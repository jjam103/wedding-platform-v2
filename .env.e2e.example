# E2E Test Environment Configuration Template
# ============================================
# This file provides a template for setting up your E2E test environment.
# Copy this file to `.env.e2e` and replace placeholder values with your actual test credentials.
#
# Setup Instructions:
# 1. Copy this file: `cp .env.e2e.example .env.e2e`
# 2. Create a dedicated Supabase test project (separate from development/production)
# 3. Replace placeholder values with your test project credentials
# 4. For external services, use mock values or dedicated test accounts
# 5. Run migrations on test database: `npm run migrate:test`
# 6. Verify setup: `npm run test:e2e`
#
# IMPORTANT: Never commit `.env.e2e` with real credentials to version control!
# ============================================

# ============================================
# Supabase Configuration - Test Database
# ============================================
# Create a dedicated Supabase project for testing (separate from dev/prod)
# Find these values in your Supabase project settings > API

# Your Supabase project URL (format: https://[project-ref].supabase.co)
NEXT_PUBLIC_SUPABASE_URL=https://your-test-project-ref.supabase.co

# Supabase anonymous key (public key, safe to expose in client-side code)
# Found in: Project Settings > API > Project API keys > anon public
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key-here

# Supabase service role key (KEEP SECRET! Has admin privileges)
# Found in: Project Settings > API > Project API keys > service_role secret
# WARNING: This key bypasses Row Level Security - only use in server-side code
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key-here

# ============================================
# External Services - Mock or Test Credentials
# ============================================
# For E2E tests, you can either:
# - Use mock values (tests will skip actual external calls)
# - Use dedicated test accounts (for testing actual integrations)

# Twilio SMS Service
# Get test credentials from: https://www.twilio.com/console
# For mock testing, use placeholder values below
TWILIO_ACCOUNT_SID=test-twilio-account-sid
TWILIO_AUTH_TOKEN=test-twilio-auth-token
TWILIO_PHONE_NUMBER=+15555555555

# Resend Email Service
# Get test API key from: https://resend.com/api-keys
# For mock testing, use: test-resend-api-key
RESEND_API_KEY=test-resend-api-key

# Backblaze B2 Storage
# Get credentials from: https://secure.backblaze.com/app_keys.htm
# For mock testing, use placeholder values below
B2_ACCESS_KEY_ID=test-b2-access-key-id
B2_SECRET_ACCESS_KEY=test-b2-secret-access-key

# B2 endpoint URL (format: https://s3.[region].backblazeb2.com)
# Example regions: us-west-004, us-east-005, eu-central-003
B2_ENDPOINT=https://s3.us-west-004.backblazeb2.com
B2_REGION=us-west-004

# B2 bucket configuration
B2_BUCKET_ID=test-bucket-id
B2_BUCKET_NAME=test-bucket-name

# Cloudflare CDN URL for B2 storage (optional)
# Format: https://your-cdn-domain.com
CLOUDFLARE_CDN_URL=https://test-cdn.example.com

# Google Gemini AI Service
# Get API key from: https://makersuite.google.com/app/apikey
# For mock testing, use: test-gemini-api-key
GEMINI_API_KEY=test-gemini-api-key

# ============================================
# E2E Test Configuration
# ============================================
# These settings control how Playwright E2E tests run

# Base URL for E2E tests
# Local development: http://localhost:3000
# CI environment: Set to your staging/test deployment URL
E2E_BASE_URL=http://localhost:3000

# Headless mode for browser tests
# true: Run browsers without UI (faster, good for CI)
# false: Show browser UI (better for debugging locally)
E2E_HEADLESS=true

# Number of parallel workers for E2E tests
# Recommended: 1-2 for local, 2-4 for CI
# Higher values = faster but more resource intensive
E2E_WORKERS=2

# Test timeout in milliseconds
# Default: 30000 (30 seconds)
# Increase if tests are timing out on slower machines
E2E_TIMEOUT=30000

# Screenshot on test failure
# true: Capture screenshots when tests fail (helpful for debugging)
# false: Skip screenshots (saves disk space)
E2E_SCREENSHOT_ON_FAILURE=true

# Video recording mode
# Options:
# - on: Record video for all tests
# - off: No video recording
# - retain-on-failure: Keep videos only for failed tests (recommended)
# - on-first-retry: Record only when retrying failed tests
E2E_VIDEO=retain-on-failure

# Trace recording mode (detailed execution logs)
# Options: same as E2E_VIDEO
# Traces are useful for debugging but take more disk space
E2E_TRACE=retain-on-failure

# ============================================
# Important Notes
# ============================================
# 
# Database Isolation:
# - E2E tests use the same test database as integration tests
# - Each test suite cleans up its data after execution
# - Safe for parallel execution with proper test isolation
# - Run migrations before first test: npm run migrate:test
#
# Mock vs Real Services:
# - Mock credentials (test-*) prevent actual external API calls
# - Use real test credentials only if you need to test actual integrations
# - Mock mode is faster and doesn't consume API quotas
#
# CI/CD Configuration:
# - Set E2E_HEADLESS=true in CI environments
# - Use E2E_VIDEO=retain-on-failure to save disk space
# - Consider increasing E2E_WORKERS for faster CI runs
# - Store real credentials in CI secrets, not in code
#
# Troubleshooting:
# - If tests fail with auth errors, verify Supabase keys are correct
# - If tests timeout, increase E2E_TIMEOUT value
# - For debugging, set E2E_HEADLESS=false to see browser UI
# - Check test database has all migrations applied
#
# Security:
# - NEVER commit .env.e2e with real credentials
# - Use separate test projects, not production databases
# - Rotate service role keys if accidentally exposed
# - Keep test data separate from production data
# ============================================
