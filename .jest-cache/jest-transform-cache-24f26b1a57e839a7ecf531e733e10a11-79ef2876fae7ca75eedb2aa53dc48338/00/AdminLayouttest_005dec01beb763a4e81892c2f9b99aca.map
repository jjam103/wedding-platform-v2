{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/AdminLayout.test.tsx"],"sourcesContent":["/**\n * Unit Tests for AdminLayout Component\n * \n * Tests:\n * - Layout structure rendering\n * - Keyboard shortcuts functionality\n * - Pending photos count display\n * - Auto-refresh behavior\n * - Accessibility features\n * \n * Requirements: Admin layout functionality\n */\n\nimport { render, screen, fireEvent, waitFor, cleanup } from '@testing-library/react';\nimport { AdminLayout } from './AdminLayout';\n\n// Mock Next.js hooks\njest.mock('next/navigation', () => ({\n  usePathname: jest.fn(() => '/admin/guests'),\n}));\n\n// Mock child components\njest.mock('./Sidebar', () => ({\n  Sidebar: ({ currentSection, pendingPhotosCount }: any) => (\n    <div data-testid=\"sidebar\">\n      <span>Current: {currentSection}</span>\n      <span>Pending: {pendingPhotosCount}</span>\n    </div>\n  ),\n}));\n\njest.mock('./TopBar', () => ({\n  TopBar: () => <div data-testid=\"topbar\">TopBar</div>,\n}));\n\njest.mock('@/components/ui/KeyboardShortcutsDialog', () => ({\n  KeyboardShortcutsDialog: ({ isOpen, onClose, shortcuts }: any) => (\n    <div data-testid=\"shortcuts-dialog\" style={{ display: isOpen ? 'block' : 'none' }}>\n      <button onClick={onClose}>Close</button>\n      <div>Shortcuts: {shortcuts.length}</div>\n    </div>\n  ),\n}));\n\njest.mock('@/hooks/useKeyboardShortcuts', () => ({\n  useKeyboardShortcuts: jest.fn(),\n}));\n\n// Mock fetch for pending photos API\nglobal.fetch = jest.fn();\n\ndescribe('AdminLayout', () => {\n  const mockFetch = fetch as jest.MockedFunction<typeof fetch>;\n\n  beforeEach(() => {\n    mockFetch.mockClear();\n    mockFetch.mockResolvedValue({\n      ok: true,\n      json: async () => ({ success: true, data: { count: 5 } }),\n    } as Response);\n    jest.clearAllMocks();\n  });\n\n  afterEach(() => {\n    cleanup();\n  });\n\n  describe('Layout Structure', () => {\n    it('should render main layout components', () => {\n      render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      expect(screen.getByTestId('sidebar')).toBeInTheDocument();\n      expect(screen.getByTestId('topbar')).toBeInTheDocument();\n      expect(screen.getByText('Test Content')).toBeInTheDocument();\n    });\n\n    it('should pass currentSection to Sidebar', () => {\n      render(\n        <AdminLayout currentSection=\"activities\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      expect(screen.getByText('Current: activities')).toBeInTheDocument();\n    });\n\n    it('should render main content with proper role and tabIndex', () => {\n      render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      const main = screen.getByRole('main');\n      expect(main).toHaveAttribute('id', 'main-content');\n      expect(main).toHaveAttribute('tabIndex', '-1');\n      expect(main).toHaveClass('focus:outline-none');\n    });\n\n    it('should apply proper layout classes', () => {\n      render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      const container = screen.getByRole('main').closest('div');\n      expect(container).toHaveClass('lg:pl-64');\n    });\n  });\n\n  describe('Pending Photos Count', () => {\n    it('should fetch pending photos count on mount', async () => {\n      render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      await waitFor(() => {\n        expect(mockFetch).toHaveBeenCalledWith('/api/admin/photos/pending-count');\n      });\n    });\n\n    it('should display fetched pending count in sidebar', async () => {\n      render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      await waitFor(() => {\n        expect(screen.getByText('Pending: 5')).toBeInTheDocument();\n      });\n    });\n\n    it('should handle fetch error gracefully', async () => {\n      const consoleSpy = jest.spyOn(console, 'error').mockImplementation(() => {});\n      mockFetch.mockRejectedValue(new Error('Network error'));\n\n      render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      await waitFor(() => {\n        expect(consoleSpy).toHaveBeenCalledWith('Failed to fetch pending photos count:', expect.any(Error));\n      });\n\n      consoleSpy.mockRestore();\n    });\n\n    it('should handle API error response gracefully', async () => {\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: false, error: { message: 'API error' } }),\n      } as Response);\n\n      render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      await waitFor(() => {\n        expect(screen.getByText('Pending: 0')).toBeInTheDocument();\n      });\n    });\n\n    it('should refresh count every 30 seconds', async () => {\n      jest.useFakeTimers();\n\n      render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      // Initial call\n      await waitFor(() => {\n        expect(mockFetch).toHaveBeenCalledTimes(1);\n      });\n\n      // Fast forward 30 seconds\n      jest.advanceTimersByTime(30000);\n\n      await waitFor(() => {\n        expect(mockFetch).toHaveBeenCalledTimes(2);\n      });\n\n      jest.useRealTimers();\n    });\n\n    it('should refresh count on photoModerated event', async () => {\n      render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      // Initial call\n      await waitFor(() => {\n        expect(mockFetch).toHaveBeenCalledTimes(1);\n      });\n\n      // Dispatch custom event\n      window.dispatchEvent(new Event('photoModerated'));\n\n      await waitFor(() => {\n        expect(mockFetch).toHaveBeenCalledTimes(2);\n      });\n    });\n  });\n\n  describe('Keyboard Shortcuts', () => {\n    it('should register keyboard shortcuts', () => {\n      const { useKeyboardShortcuts } = require('@/hooks/useKeyboardShortcuts');\n\n      render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      expect(useKeyboardShortcuts).toHaveBeenCalledWith(\n        expect.arrayContaining([\n          expect.objectContaining({ key: '/', description: 'Focus search input' }),\n          expect.objectContaining({ key: 'n', description: 'Open new entity form' }),\n          expect.objectContaining({ key: '?', description: 'Show keyboard shortcuts' }),\n          expect.objectContaining({ key: 'Escape', description: 'Close open modals' }),\n        ]),\n        true\n      );\n    });\n\n    it('should show keyboard shortcuts dialog when ? is pressed', async () => {\n      const { useKeyboardShortcuts } = require('@/hooks/useKeyboardShortcuts');\n      let helpHandler: () => void;\n\n      useKeyboardShortcuts.mockImplementation((shortcuts: any[]) => {\n        helpHandler = shortcuts.find(s => s.key === '?').handler;\n      });\n\n      render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      // Initially dialog should be hidden\n      expect(screen.getByTestId('shortcuts-dialog')).toHaveStyle({ display: 'none' });\n\n      // Trigger help handler\n      helpHandler!();\n\n      // Dialog should be visible after state update\n      await waitFor(() => {\n        expect(screen.getByTestId('shortcuts-dialog')).toHaveStyle({ display: 'block' });\n      });\n    });\n\n    it('should close keyboard shortcuts dialog', async () => {\n      render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      // Show dialog first\n      const { useKeyboardShortcuts } = require('@/hooks/useKeyboardShortcuts');\n      const helpHandler = useKeyboardShortcuts.mock.calls[0][0].find((s: any) => s.key === '?').handler;\n      helpHandler();\n\n      await waitFor(() => {\n        expect(screen.getByTestId('shortcuts-dialog')).toHaveStyle({ display: 'block' });\n      });\n\n      // Close dialog\n      fireEvent.click(screen.getByText('Close'));\n\n      await waitFor(() => {\n        expect(screen.getByTestId('shortcuts-dialog')).toHaveStyle({ display: 'none' });\n      });\n    });\n\n    it('should focus search input when / is pressed', () => {\n      const { useKeyboardShortcuts } = require('@/hooks/useKeyboardShortcuts');\n      let focusHandler: () => void;\n\n      useKeyboardShortcuts.mockImplementation((shortcuts: any[]) => {\n        focusHandler = shortcuts.find(s => s.key === '/').handler;\n      });\n\n      // Add a search input to the DOM\n      const searchInput = document.createElement('input');\n      searchInput.type = 'search';\n      searchInput.focus = jest.fn();\n      document.body.appendChild(searchInput);\n\n      render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      // Trigger focus handler\n      focusHandler!();\n\n      expect(searchInput.focus).toHaveBeenCalled();\n\n      document.body.removeChild(searchInput);\n    });\n\n    it('should click add button when n is pressed', () => {\n      const { useKeyboardShortcuts } = require('@/hooks/useKeyboardShortcuts');\n      let addHandler: () => void;\n\n      useKeyboardShortcuts.mockImplementation((shortcuts: any[]) => {\n        addHandler = shortcuts.find(s => s.key === 'n').handler;\n      });\n\n      // Add an add button to the DOM\n      const addButton = document.createElement('button');\n      addButton.setAttribute('data-action', 'add-new');\n      addButton.click = jest.fn();\n      document.body.appendChild(addButton);\n\n      render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      // Trigger add handler\n      addHandler!();\n\n      expect(addButton.click).toHaveBeenCalled();\n\n      document.body.removeChild(addButton);\n    });\n\n    it('should disable shortcuts when dialog is open', async () => {\n      const { useKeyboardShortcuts } = require('@/hooks/useKeyboardShortcuts');\n\n      render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      // Initially shortcuts should be enabled\n      expect(useKeyboardShortcuts).toHaveBeenCalledWith(expect.any(Array), true);\n\n      // Show dialog\n      const helpHandler = useKeyboardShortcuts.mock.calls[0][0].find((s: any) => s.key === '?').handler;\n      helpHandler();\n\n      // Wait for state update and re-render\n      await waitFor(() => {\n        expect(screen.getByTestId('shortcuts-dialog')).toHaveStyle({ display: 'block' });\n      });\n\n      // Shortcuts should be disabled when dialog is open (check last call)\n      const lastCall = useKeyboardShortcuts.mock.calls[useKeyboardShortcuts.mock.calls.length - 1];\n      expect(lastCall[1]).toBe(false);\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('should have proper semantic structure', () => {\n      render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      const main = screen.getByRole('main');\n      expect(main).toBeInTheDocument();\n      expect(main).toHaveAttribute('id', 'main-content');\n    });\n\n    it('should have focusable main content area', () => {\n      render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      const main = screen.getByRole('main');\n      expect(main).toHaveAttribute('tabIndex', '-1');\n      expect(main).toHaveClass('focus:outline-none');\n    });\n\n    it('should provide keyboard shortcuts help', () => {\n      render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      const shortcutsDialog = screen.getByTestId('shortcuts-dialog');\n      expect(shortcutsDialog).toBeInTheDocument();\n    });\n  });\n\n  describe('Cleanup', () => {\n    it('should cleanup interval and event listeners on unmount', () => {\n      jest.useFakeTimers();\n      const removeEventListenerSpy = jest.spyOn(window, 'removeEventListener');\n\n      const { unmount } = render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      unmount();\n\n      expect(removeEventListenerSpy).toHaveBeenCalledWith('photoModerated', expect.any(Function));\n\n      removeEventListenerSpy.mockRestore();\n      jest.useRealTimers();\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle missing search input gracefully', () => {\n      const { useKeyboardShortcuts } = require('@/hooks/useKeyboardShortcuts');\n      let focusHandler: () => void;\n\n      useKeyboardShortcuts.mockImplementation((shortcuts: any[]) => {\n        focusHandler = shortcuts.find(s => s.key === '/').handler;\n      });\n\n      render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      // Should not throw error when no search input exists\n      expect(() => focusHandler!()).not.toThrow();\n    });\n\n    it('should handle missing add button gracefully', () => {\n      const { useKeyboardShortcuts } = require('@/hooks/useKeyboardShortcuts');\n      let addHandler: () => void;\n\n      useKeyboardShortcuts.mockImplementation((shortcuts: any[]) => {\n        addHandler = shortcuts.find(s => s.key === 'n').handler;\n      });\n\n      render(\n        <AdminLayout currentSection=\"guests\">\n          <div>Test Content</div>\n        </AdminLayout>\n      );\n\n      // Should not throw error when no add button exists\n      expect(() => addHandler!()).not.toThrow();\n    });\n  });\n});"],"names":["jest","mock","usePathname","fn","Sidebar","currentSection","pendingPhotosCount","div","data-testid","span","TopBar","KeyboardShortcutsDialog","isOpen","onClose","shortcuts","style","display","button","onClick","length","useKeyboardShortcuts","global","fetch","describe","mockFetch","beforeEach","mockClear","mockResolvedValue","ok","json","success","data","count","clearAllMocks","afterEach","cleanup","it","render","AdminLayout","expect","screen","getByTestId","toBeInTheDocument","getByText","main","getByRole","toHaveAttribute","toHaveClass","container","closest","waitFor","toHaveBeenCalledWith","consoleSpy","spyOn","console","mockImplementation","mockRejectedValue","Error","any","mockRestore","error","message","useFakeTimers","toHaveBeenCalledTimes","advanceTimersByTime","useRealTimers","window","dispatchEvent","Event","require","arrayContaining","objectContaining","key","description","helpHandler","find","s","handler","toHaveStyle","calls","fireEvent","click","focusHandler","searchInput","document","createElement","type","focus","body","appendChild","toHaveBeenCalled","removeChild","addHandler","addButton","setAttribute","Array","lastCall","toBe","shortcutsDialog","removeEventListenerSpy","unmount","Function","not","toThrow"],"mappings":"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"}