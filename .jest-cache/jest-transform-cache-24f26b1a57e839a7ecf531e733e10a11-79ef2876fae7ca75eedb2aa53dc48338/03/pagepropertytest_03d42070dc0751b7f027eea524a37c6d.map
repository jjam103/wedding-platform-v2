{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/app/admin/budget/page.property.test.tsx"],"sourcesContent":["/**\n * Property-Based Tests for Budget Dashboard\n * \n * Tests universal properties that should hold for all budget calculations:\n * - Property 19: Budget calculation accuracy\n * - Property 20: Budget item highlighting\n * \n * Requirements: 9.4, 9.5\n */\n\nimport { describe, it, expect } from '@jest/globals';\nimport * as fc from 'fast-check';\nimport type { Vendor } from '@/schemas/vendorSchemas';\nimport type { Activity } from '@/schemas/activitySchemas';\n\n// ============================================================================\n// ARBITRARIES (Test Data Generators)\n// ============================================================================\n\n/**\n * Generates random vendor data for testing\n */\nconst vendorArbitrary = fc.record({\n  id: fc.uuid(),\n  name: fc.string({ minLength: 1, maxLength: 50 }),\n  category: fc.constantFrom(\n    'photography',\n    'catering',\n    'music',\n    'transportation',\n    'florist',\n    'venue',\n    'other'\n  ),\n  contactName: fc.option(fc.string({ minLength: 1, maxLength: 50 }), { nil: null }),\n  email: fc.option(fc.emailAddress(), { nil: null }),\n  phone: fc.option(fc.string({ minLength: 10, maxLength: 15 }), { nil: null }),\n  pricingModel: fc.constantFrom('flat_rate', 'per_guest'),\n  baseCost: fc.float({ min: 0, max: 50000, noNaN: true }),\n  paymentStatus: fc.constantFrom('unpaid', 'partial', 'paid'),\n  amountPaid: fc.float({ min: 0, max: 50000, noNaN: true }),\n  notes: fc.option(fc.string({ maxLength: 200 }), { nil: null }),\n  createdAt: fc.date().map((d) => d.toISOString()),\n  updatedAt: fc.date().map((d) => d.toISOString()),\n}) as fc.Arbitrary<Vendor>;\n\n/**\n * Generates random activity data for testing\n */\nconst activityArbitrary = fc.record({\n  id: fc.uuid(),\n  name: fc.string({ minLength: 1, maxLength: 100 }),\n  description: fc.option(fc.string({ maxLength: 500 }), { nil: null }),\n  eventId: fc.option(fc.uuid(), { nil: null }),\n  startTime: fc.date().map((d) => d.toISOString()),\n  endTime: fc.date().map((d) => d.toISOString()),\n  locationId: fc.option(fc.uuid(), { nil: null }),\n  capacity: fc.option(fc.integer({ min: 1, max: 500 }), { nil: null }),\n  costPerPerson: fc.option(fc.float({ min: 0, max: 1000, noNaN: true }), { nil: null }),\n  hostSubsidy: fc.option(fc.float({ min: 0, max: 1000, noNaN: true }), { nil: null }),\n  activityType: fc.string({ minLength: 1, maxLength: 50 }),\n  status: fc.constantFrom('draft', 'published', 'cancelled'),\n  visibility: fc.constantFrom('public', 'private', 'wedding_party_only'),\n  adultsOnly: fc.boolean(),\n  plusOnesAllowed: fc.boolean(),\n  createdAt: fc.date().map((d) => d.toISOString()),\n  updatedAt: fc.date().map((d) => d.toISOString()),\n}) as fc.Arbitrary<Activity>;\n\n// ============================================================================\n// HELPER FUNCTIONS\n// ============================================================================\n\n/**\n * Calculates vendor totals from an array of vendors\n */\nfunction calculateVendorTotals(vendors: Vendor[]) {\n  const total = vendors.reduce((sum, v) => sum + v.baseCost, 0);\n  const paid = vendors.reduce((sum, v) => sum + v.amountPaid, 0);\n  const balance = total - paid;\n  return { total, paid, balance };\n}\n\n/**\n * Calculates activity totals with subsidies\n */\nfunction calculateActivityTotals(activities: Activity[]) {\n  let totalCost = 0;\n  let totalSubsidy = 0;\n\n  activities.forEach((activity) => {\n    if (activity.costPerPerson && activity.capacity) {\n      const cost = activity.costPerPerson * activity.capacity;\n      const subsidy = (activity.hostSubsidy || 0) * activity.capacity;\n      totalCost += cost;\n      totalSubsidy += subsidy;\n    }\n  });\n\n  return {\n    totalCost,\n    totalSubsidy,\n    netCost: totalCost - totalSubsidy,\n  };\n}\n\n/**\n * Calculates grand totals from vendor and activity totals\n */\nfunction calculateGrandTotals(\n  vendorTotals: ReturnType<typeof calculateVendorTotals>,\n  activityTotals: ReturnType<typeof calculateActivityTotals>\n) {\n  const grossTotal = vendorTotals.total + activityTotals.totalCost;\n  const totalSubsidies = activityTotals.totalSubsidy;\n  const netTotal = grossTotal - totalSubsidies;\n  const totalPaid = vendorTotals.paid;\n  const balanceDue = netTotal - totalPaid;\n\n  return {\n    grossTotal,\n    totalSubsidies,\n    netTotal,\n    totalPaid,\n    balanceDue,\n  };\n}\n\n// ============================================================================\n// PROPERTY TESTS\n// ============================================================================\n\ndescribe('Feature: admin-ui-modernization, Property 19: Budget calculation accuracy', () => {\n  /**\n   * Property 19: Budget calculation accuracy\n   * \n   * For any budget dashboard state, the displayed guest contributions and host subsidies\n   * should equal the sum of all individual contributions and subsidies across all activities\n   * and accommodations.\n   * \n   * Validates: Requirements 9.4\n   */\n  it('should calculate guest contributions and host subsidies accurately', () => {\n    fc.assert(\n      fc.property(\n        fc.array(vendorArbitrary, { minLength: 0, maxLength: 20 }),\n        fc.array(activityArbitrary, { minLength: 0, maxLength: 20 }),\n        (vendors, activities) => {\n          // Calculate totals using the same logic as the component\n          const vendorTotals = calculateVendorTotals(vendors);\n          const activityTotals = calculateActivityTotals(activities);\n          const grandTotals = calculateGrandTotals(vendorTotals, activityTotals);\n\n          // Verify that guest contributions equal net cost\n          const guestContributions = activityTotals.netCost;\n          expect(guestContributions).toBeCloseTo(\n            activityTotals.totalCost - activityTotals.totalSubsidy,\n            2\n          );\n\n          // Verify that total subsidies equal activity subsidies\n          expect(grandTotals.totalSubsidies).toBeCloseTo(activityTotals.totalSubsidy, 2);\n\n          // Verify that net total equals gross total minus subsidies\n          expect(grandTotals.netTotal).toBeCloseTo(\n            grandTotals.grossTotal - grandTotals.totalSubsidies,\n            2\n          );\n\n          // Verify that balance due equals net total minus paid\n          expect(grandTotals.balanceDue).toBeCloseTo(\n            grandTotals.netTotal - grandTotals.totalPaid,\n            2\n          );\n\n          // Verify that gross total equals vendor total plus activity total cost\n          expect(grandTotals.grossTotal).toBeCloseTo(\n            vendorTotals.total + activityTotals.totalCost,\n            2\n          );\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should handle empty vendor and activity lists', () => {\n    const vendors: Vendor[] = [];\n    const activities: Activity[] = [];\n\n    const vendorTotals = calculateVendorTotals(vendors);\n    const activityTotals = calculateActivityTotals(activities);\n    const grandTotals = calculateGrandTotals(vendorTotals, activityTotals);\n\n    expect(vendorTotals.total).toBe(0);\n    expect(vendorTotals.paid).toBe(0);\n    expect(vendorTotals.balance).toBe(0);\n    expect(activityTotals.totalCost).toBe(0);\n    expect(activityTotals.totalSubsidy).toBe(0);\n    expect(activityTotals.netCost).toBe(0);\n    expect(grandTotals.grossTotal).toBe(0);\n    expect(grandTotals.totalSubsidies).toBe(0);\n    expect(grandTotals.netTotal).toBe(0);\n    expect(grandTotals.totalPaid).toBe(0);\n    expect(grandTotals.balanceDue).toBe(0);\n  });\n\n  it('should handle activities without costs', () => {\n    fc.assert(\n      fc.property(\n        fc.array(\n          activityArbitrary.map((a) => ({ ...a, costPerPerson: null, hostSubsidy: null })),\n          { minLength: 1, maxLength: 10 }\n        ),\n        (activities) => {\n          const activityTotals = calculateActivityTotals(activities);\n\n          expect(activityTotals.totalCost).toBe(0);\n          expect(activityTotals.totalSubsidy).toBe(0);\n          expect(activityTotals.netCost).toBe(0);\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should correctly sum individual activity costs and subsidies', () => {\n    fc.assert(\n      fc.property(\n        fc.array(activityArbitrary, { minLength: 1, maxLength: 20 }),\n        (activities) => {\n          const activityTotals = calculateActivityTotals(activities);\n\n          // Manually calculate expected totals\n          let expectedTotalCost = 0;\n          let expectedTotalSubsidy = 0;\n\n          activities.forEach((activity) => {\n            if (activity.costPerPerson && activity.capacity) {\n              expectedTotalCost += activity.costPerPerson * activity.capacity;\n              expectedTotalSubsidy += (activity.hostSubsidy || 0) * activity.capacity;\n            }\n          });\n\n          expect(activityTotals.totalCost).toBeCloseTo(expectedTotalCost, 2);\n          expect(activityTotals.totalSubsidy).toBeCloseTo(expectedTotalSubsidy, 2);\n          expect(activityTotals.netCost).toBeCloseTo(\n            expectedTotalCost - expectedTotalSubsidy,\n            2\n          );\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n});\n\ndescribe('Feature: admin-ui-modernization, Property 20: Budget item highlighting', () => {\n  /**\n   * Property 20: Budget item highlighting\n   * \n   * For any budget item where actual cost exceeds planned cost, the item should be\n   * highlighted with warning styling.\n   * \n   * Validates: Requirements 9.5\n   */\n  it('should identify vendors exceeding budget', () => {\n    fc.assert(\n      fc.property(\n        fc.array(vendorArbitrary, { minLength: 1, maxLength: 20 }),\n        (vendors) => {\n          // Find vendors where amount paid exceeds base cost\n          const overBudgetVendors = vendors.filter((v) => v.amountPaid > v.baseCost);\n\n          // Verify that each over-budget vendor is correctly identified\n          overBudgetVendors.forEach((vendor) => {\n            expect(vendor.amountPaid).toBeGreaterThan(vendor.baseCost);\n            \n            // Calculate overage amount\n            const overage = vendor.amountPaid - vendor.baseCost;\n            expect(overage).toBeGreaterThan(0);\n          });\n\n          // Verify that vendors not over budget are not included\n          const notOverBudgetVendors = vendors.filter((v) => v.amountPaid <= v.baseCost);\n          notOverBudgetVendors.forEach((vendor) => {\n            expect(vendor.amountPaid).toBeLessThanOrEqual(vendor.baseCost);\n          });\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should handle vendors with zero costs', () => {\n    fc.assert(\n      fc.property(\n        fc.array(\n          vendorArbitrary.map((v) => ({ ...v, baseCost: 0, amountPaid: 0 })),\n          { minLength: 1, maxLength: 10 }\n        ),\n        (vendors) => {\n          const overBudgetVendors = vendors.filter((v) => v.amountPaid > v.baseCost);\n          expect(overBudgetVendors).toHaveLength(0);\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should correctly calculate overage amounts', () => {\n    fc.assert(\n      fc.property(\n        fc.float({ min: 100, max: 10000, noNaN: true }),\n        fc.float({ min: Math.fround(0.01), max: 1, noNaN: true }), // Ensure overageRatio is always > 0\n        (baseCost, overageRatio) => {\n          // Create a vendor that is over budget\n          const amountPaid = baseCost * (1 + overageRatio);\n          const vendor: Vendor = {\n            id: 'test-id',\n            name: 'Test Vendor',\n            category: 'photography',\n            contactName: null,\n            email: null,\n            phone: null,\n            pricingModel: 'flat_rate',\n            baseCost,\n            paymentStatus: 'paid',\n            amountPaid,\n            notes: null,\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString(),\n          };\n\n          const overage = vendor.amountPaid - vendor.baseCost;\n          const expectedOverage = baseCost * overageRatio;\n\n          expect(overage).toBeCloseTo(expectedOverage, 2);\n          expect(overage).toBeGreaterThan(0);\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should handle edge case where amount paid equals base cost', () => {\n    fc.assert(\n      fc.property(\n        fc.float({ min: 0, max: 10000, noNaN: true }),\n        (cost) => {\n          const vendor: Vendor = {\n            id: 'test-id',\n            name: 'Test Vendor',\n            category: 'photography',\n            contactName: null,\n            email: null,\n            phone: null,\n            pricingModel: 'flat_rate',\n            baseCost: cost,\n            paymentStatus: 'paid',\n            amountPaid: cost,\n            notes: null,\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString(),\n          };\n\n          // Vendor should NOT be highlighted as over budget\n          const isOverBudget = vendor.amountPaid > vendor.baseCost;\n          expect(isOverBudget).toBe(false);\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n});\n"],"names":["vendorArbitrary","fc","record","id","uuid","name","string","minLength","maxLength","category","constantFrom","contactName","option","nil","email","emailAddress","phone","pricingModel","baseCost","float","min","max","noNaN","paymentStatus","amountPaid","notes","createdAt","date","map","d","toISOString","updatedAt","activityArbitrary","description","eventId","startTime","endTime","locationId","capacity","integer","costPerPerson","hostSubsidy","activityType","status","visibility","adultsOnly","boolean","plusOnesAllowed","calculateVendorTotals","vendors","total","reduce","sum","v","paid","balance","calculateActivityTotals","activities","totalCost","totalSubsidy","forEach","activity","cost","subsidy","netCost","calculateGrandTotals","vendorTotals","activityTotals","grossTotal","totalSubsidies","netTotal","totalPaid","balanceDue","describe","it","assert","property","array","grandTotals","guestContributions","expect","toBeCloseTo","numRuns","toBe","a","expectedTotalCost","expectedTotalSubsidy","overBudgetVendors","filter","vendor","toBeGreaterThan","overage","notOverBudgetVendors","toBeLessThanOrEqual","toHaveLength","Math","fround","overageRatio","Date","expectedOverage","isOverBudget"],"mappings":"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"}