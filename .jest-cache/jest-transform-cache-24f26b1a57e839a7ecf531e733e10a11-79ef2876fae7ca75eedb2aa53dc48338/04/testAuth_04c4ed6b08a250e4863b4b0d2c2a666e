dd0891474a47ccf3c77632f02a0f27c1
/**
 * Test Authentication Helpers
 * 
 * Utilities for handling authentication in tests.
 * Provides helpers for creating authenticated requests, managing sessions, and testing auth flows.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get TestAuthContext () {
        return TestAuthContext;
    },
    get authenticatedApiRequest () {
        return authenticatedApiRequest;
    },
    get authenticatedFetch () {
        return authenticatedFetch;
    },
    get createAuthenticatedRequest () {
        return createAuthenticatedRequest;
    },
    get createExpiredTokenRequest () {
        return createExpiredTokenRequest;
    },
    get createInvalidTokenRequest () {
        return createInvalidTokenRequest;
    },
    get createMockAuthState () {
        return createMockAuthState;
    },
    get createMockSession () {
        return createMockSession;
    },
    get createTestAuthContext () {
        return createTestAuthContext;
    },
    get createUnauthenticatedRequest () {
        return createUnauthenticatedRequest;
    },
    get extractAccessToken () {
        return extractAccessToken;
    },
    get hasValidAuth () {
        return hasValidAuth;
    },
    get waitForAuth () {
        return waitForAuth;
    },
    get withAuthContext () {
        return withAuthContext;
    }
});
const _testDb = require("./testDb");
async function authenticatedFetch(url, options = {}, accessToken) {
    const headers = new Headers(options.headers);
    headers.set('Authorization', `Bearer ${accessToken}`);
    headers.set('Content-Type', 'application/json');
    return fetch(url, {
        ...options,
        headers
    });
}
async function authenticatedApiRequest(path, options = {}, accessToken) {
    const { method = 'GET', body, headers = {} } = options;
    const url = `http://localhost:3000${path}`;
    return authenticatedFetch(url, {
        method,
        headers: {
            ...headers,
            Authorization: `Bearer ${accessToken}`,
            'Content-Type': 'application/json'
        },
        body: body ? JSON.stringify(body) : undefined
    }, accessToken);
}
function createAuthenticatedRequest(path, options = {}, accessToken) {
    const { method = 'GET', body, searchParams = {} } = options;
    const url = new URL(path, 'http://localhost:3000');
    Object.entries(searchParams).forEach(([key, value])=>{
        url.searchParams.set(key, value);
    });
    const headers = new Headers({
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${accessToken}`
    });
    return new Request(url.toString(), {
        method,
        headers,
        body: body ? JSON.stringify(body) : undefined
    });
}
function createUnauthenticatedRequest(path, options = {}) {
    const { method = 'GET', body, searchParams = {} } = options;
    const url = new URL(path, 'http://localhost:3000');
    Object.entries(searchParams).forEach(([key, value])=>{
        url.searchParams.set(key, value);
    });
    const headers = new Headers({
        'Content-Type': 'application/json'
    });
    return new Request(url.toString(), {
        method,
        headers,
        body: body ? JSON.stringify(body) : undefined
    });
}
class TestAuthContext {
    /**
   * Sign in and store user context
   */ async signIn() {
        this.user = await (0, _testDb.createAndSignInTestUser)();
        return this.user;
    }
    /**
   * Get current user
   */ getUser() {
        return this.user;
    }
    /**
   * Get access token
   */ getAccessToken() {
        if (!this.user?.accessToken) {
            throw new Error('No authenticated user. Call signIn() first.');
        }
        return this.user.accessToken;
    }
    /**
   * Create authenticated request
   */ createRequest(path, options = {}) {
        return createAuthenticatedRequest(path, options, this.getAccessToken());
    }
    /**
   * Make authenticated API request
   */ async apiRequest(path, options = {}) {
        return authenticatedApiRequest(path, options, this.getAccessToken());
    }
    /**
   * Sign out and clear context
   */ signOut() {
        this.user = null;
    }
    /**
   * Check if authenticated
   */ isAuthenticated() {
        return this.user !== null && this.user.accessToken !== undefined;
    }
    constructor(){
        this.user = null;
    }
}
function createTestAuthContext() {
    return new TestAuthContext();
}
async function withAuthContext(fn) {
    const auth = createTestAuthContext();
    await auth.signIn();
    try {
        return await fn(auth);
    } finally{
        auth.signOut();
    }
}
function createMockSession(user) {
    return {
        user: {
            id: user?.id || 'test-user-id',
            email: user?.email || 'test@example.com',
            aud: 'authenticated',
            role: 'authenticated',
            created_at: new Date().toISOString(),
            updated_at: new Date().toISOString()
        },
        access_token: user?.accessToken || 'mock-access-token',
        refresh_token: 'mock-refresh-token',
        expires_at: Date.now() + 3600000,
        expires_in: 3600,
        token_type: 'bearer'
    };
}
function createMockAuthState(authenticated = true) {
    if (!authenticated) {
        return {
            session: null,
            user: null,
            loading: false
        };
    }
    return {
        session: createMockSession(),
        user: {
            id: 'test-user-id',
            email: 'test@example.com',
            aud: 'authenticated',
            role: 'authenticated',
            created_at: new Date().toISOString(),
            updated_at: new Date().toISOString()
        },
        loading: false
    };
}
async function waitForAuth(ms = 100) {
    return new Promise((resolve)=>setTimeout(resolve, ms));
}
function hasValidAuth(request) {
    const authHeader = request.headers.get('Authorization');
    return authHeader !== null && authHeader.startsWith('Bearer ');
}
function extractAccessToken(request) {
    const authHeader = request.headers.get('Authorization');
    if (!authHeader || !authHeader.startsWith('Bearer ')) {
        return null;
    }
    return authHeader.substring(7); // Remove 'Bearer ' prefix
}
function createExpiredTokenRequest(path, options = {}) {
    const { method = 'GET', body } = options;
    const url = new URL(path, 'http://localhost:3000');
    const headers = new Headers({
        'Content-Type': 'application/json',
        'Authorization': 'Bearer expired-token'
    });
    return new Request(url.toString(), {
        method,
        headers,
        body: body ? JSON.stringify(body) : undefined
    });
}
function createInvalidTokenRequest(path, options = {}) {
    const { method = 'GET', body } = options;
    const url = new URL(path, 'http://localhost:3000');
    const headers = new Headers({
        'Content-Type': 'application/json',
        'Authorization': 'Bearer invalid-token-format'
    });
    return new Request(url.toString(), {
        method,
        headers,
        body: body ? JSON.stringify(body) : undefined
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvX190ZXN0c19fL2hlbHBlcnMvdGVzdEF1dGgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUZXN0IEF1dGhlbnRpY2F0aW9uIEhlbHBlcnNcbiAqIFxuICogVXRpbGl0aWVzIGZvciBoYW5kbGluZyBhdXRoZW50aWNhdGlvbiBpbiB0ZXN0cy5cbiAqIFByb3ZpZGVzIGhlbHBlcnMgZm9yIGNyZWF0aW5nIGF1dGhlbnRpY2F0ZWQgcmVxdWVzdHMsIG1hbmFnaW5nIHNlc3Npb25zLCBhbmQgdGVzdGluZyBhdXRoIGZsb3dzLlxuICovXG5cbmltcG9ydCB7IGNyZWF0ZVRlc3RDbGllbnQsIGNyZWF0ZUFuZFNpZ25JblRlc3RVc2VyLCB0eXBlIFRlc3RVc2VyIH0gZnJvbSAnLi90ZXN0RGInO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBhdXRoZW50aWNhdGVkIGZldGNoIHJlcXVlc3QgZm9yIEFQSSB0ZXN0aW5nXG4gKiBcbiAqIEBwYXJhbSB1cmwgLSBBUEkgZW5kcG9pbnQgVVJMXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEZldGNoIG9wdGlvbnNcbiAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIEFjY2VzcyB0b2tlbiBmb3IgYXV0aGVudGljYXRpb25cbiAqIEByZXR1cm5zIEZldGNoIHJlc3BvbnNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhdXRoZW50aWNhdGVkRmV0Y2goXG4gIHVybDogc3RyaW5nLFxuICBvcHRpb25zOiBSZXF1ZXN0SW5pdCA9IHt9LFxuICBhY2Nlc3NUb2tlbjogc3RyaW5nXG4pOiBQcm9taXNlPFJlc3BvbnNlPiB7XG4gIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpO1xuICBoZWFkZXJzLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gKTtcbiAgaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gIFxuICByZXR1cm4gZmV0Y2godXJsLCB7XG4gICAgLi4ub3B0aW9ucyxcbiAgICBoZWFkZXJzLFxuICB9KTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gYXV0aGVudGljYXRlZCBBUEkgcmVxdWVzdCBmb3IgdGVzdGluZ1xuICogXG4gKiBAcGFyYW0gcGF0aCAtIEFQSSBwYXRoIChlLmcuLCAnL2FwaS9hZG1pbi9ndWVzdHMnKVxuICogQHBhcmFtIG9wdGlvbnMgLSBSZXF1ZXN0IG9wdGlvbnNcbiAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIEFjY2VzcyB0b2tlbiBmb3IgYXV0aGVudGljYXRpb25cbiAqIEByZXR1cm5zIFJlc3BvbnNlIG9iamVjdFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXV0aGVudGljYXRlZEFwaVJlcXVlc3QoXG4gIHBhdGg6IHN0cmluZyxcbiAgb3B0aW9uczoge1xuICAgIG1ldGhvZD86IHN0cmluZztcbiAgICBib2R5PzogYW55O1xuICAgIGhlYWRlcnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICB9ID0ge30sXG4gIGFjY2Vzc1Rva2VuOiBzdHJpbmdcbik6IFByb21pc2U8UmVzcG9uc2U+IHtcbiAgY29uc3QgeyBtZXRob2QgPSAnR0VUJywgYm9keSwgaGVhZGVycyA9IHt9IH0gPSBvcHRpb25zO1xuICBcbiAgY29uc3QgdXJsID0gYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMCR7cGF0aH1gO1xuICBcbiAgcmV0dXJuIGF1dGhlbnRpY2F0ZWRGZXRjaChcbiAgICB1cmwsXG4gICAge1xuICAgICAgbWV0aG9kLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAuLi5oZWFkZXJzLFxuICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YWNjZXNzVG9rZW59YCxcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgICBib2R5OiBib2R5ID8gSlNPTi5zdHJpbmdpZnkoYm9keSkgOiB1bmRlZmluZWQsXG4gICAgfSxcbiAgICBhY2Nlc3NUb2tlblxuICApO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIG1vY2sgYXV0aGVudGljYXRlZCByZXF1ZXN0IGZvciByb3V0ZSBoYW5kbGVyIHRlc3RpbmdcbiAqIFxuICogQHBhcmFtIHBhdGggLSBSZXF1ZXN0IHBhdGhcbiAqIEBwYXJhbSBvcHRpb25zIC0gUmVxdWVzdCBvcHRpb25zXG4gKiBAcGFyYW0gYWNjZXNzVG9rZW4gLSBBY2Nlc3MgdG9rZW4gZm9yIGF1dGhlbnRpY2F0aW9uXG4gKiBAcmV0dXJucyBSZXF1ZXN0IG9iamVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQXV0aGVudGljYXRlZFJlcXVlc3QoXG4gIHBhdGg6IHN0cmluZyxcbiAgb3B0aW9uczoge1xuICAgIG1ldGhvZD86IHN0cmluZztcbiAgICBib2R5PzogYW55O1xuICAgIHNlYXJjaFBhcmFtcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIH0gPSB7fSxcbiAgYWNjZXNzVG9rZW46IHN0cmluZ1xuKTogUmVxdWVzdCB7XG4gIGNvbnN0IHsgbWV0aG9kID0gJ0dFVCcsIGJvZHksIHNlYXJjaFBhcmFtcyA9IHt9IH0gPSBvcHRpb25zO1xuICBcbiAgY29uc3QgdXJsID0gbmV3IFVSTChwYXRoLCAnaHR0cDovL2xvY2FsaG9zdDozMDAwJyk7XG4gIE9iamVjdC5lbnRyaWVzKHNlYXJjaFBhcmFtcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoa2V5LCB2YWx1ZSk7XG4gIH0pO1xuICBcbiAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHtcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2FjY2Vzc1Rva2VufWAsXG4gIH0pO1xuICBcbiAgcmV0dXJuIG5ldyBSZXF1ZXN0KHVybC50b1N0cmluZygpLCB7XG4gICAgbWV0aG9kLFxuICAgIGhlYWRlcnMsXG4gICAgYm9keTogYm9keSA/IEpTT04uc3RyaW5naWZ5KGJvZHkpIDogdW5kZWZpbmVkLFxuICB9KTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gdW5hdXRoZW50aWNhdGVkIHJlcXVlc3QgZm9yIHRlc3RpbmcgYXV0aCBmYWlsdXJlc1xuICogXG4gKiBAcGFyYW0gcGF0aCAtIFJlcXVlc3QgcGF0aFxuICogQHBhcmFtIG9wdGlvbnMgLSBSZXF1ZXN0IG9wdGlvbnNcbiAqIEByZXR1cm5zIFJlcXVlc3Qgb2JqZWN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVVbmF1dGhlbnRpY2F0ZWRSZXF1ZXN0KFxuICBwYXRoOiBzdHJpbmcsXG4gIG9wdGlvbnM6IHtcbiAgICBtZXRob2Q/OiBzdHJpbmc7XG4gICAgYm9keT86IGFueTtcbiAgICBzZWFyY2hQYXJhbXM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICB9ID0ge31cbik6IFJlcXVlc3Qge1xuICBjb25zdCB7IG1ldGhvZCA9ICdHRVQnLCBib2R5LCBzZWFyY2hQYXJhbXMgPSB7fSB9ID0gb3B0aW9ucztcbiAgXG4gIGNvbnN0IHVybCA9IG5ldyBVUkwocGF0aCwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcpO1xuICBPYmplY3QuZW50cmllcyhzZWFyY2hQYXJhbXMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KGtleSwgdmFsdWUpO1xuICB9KTtcbiAgXG4gIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7XG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgfSk7XG4gIFxuICByZXR1cm4gbmV3IFJlcXVlc3QodXJsLnRvU3RyaW5nKCksIHtcbiAgICBtZXRob2QsXG4gICAgaGVhZGVycyxcbiAgICBib2R5OiBib2R5ID8gSlNPTi5zdHJpbmdpZnkoYm9keSkgOiB1bmRlZmluZWQsXG4gIH0pO1xufVxuXG4vKipcbiAqIFRlc3QgYXV0aGVudGljYXRpb24gY29udGV4dCBmb3IgbWFuYWdpbmcgYXV0aCBzdGF0ZSBpbiB0ZXN0c1xuICovXG5leHBvcnQgY2xhc3MgVGVzdEF1dGhDb250ZXh0IHtcbiAgcHJpdmF0ZSB1c2VyOiBUZXN0VXNlciB8IG51bGwgPSBudWxsO1xuICBcbiAgLyoqXG4gICAqIFNpZ24gaW4gYW5kIHN0b3JlIHVzZXIgY29udGV4dFxuICAgKi9cbiAgYXN5bmMgc2lnbkluKCk6IFByb21pc2U8VGVzdFVzZXI+IHtcbiAgICB0aGlzLnVzZXIgPSBhd2FpdCBjcmVhdGVBbmRTaWduSW5UZXN0VXNlcigpO1xuICAgIHJldHVybiB0aGlzLnVzZXI7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCB1c2VyXG4gICAqL1xuICBnZXRVc2VyKCk6IFRlc3RVc2VyIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMudXNlcjtcbiAgfVxuICBcbiAgLyoqXG4gICAqIEdldCBhY2Nlc3MgdG9rZW5cbiAgICovXG4gIGdldEFjY2Vzc1Rva2VuKCk6IHN0cmluZyB7XG4gICAgaWYgKCF0aGlzLnVzZXI/LmFjY2Vzc1Rva2VuKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGF1dGhlbnRpY2F0ZWQgdXNlci4gQ2FsbCBzaWduSW4oKSBmaXJzdC4nKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudXNlci5hY2Nlc3NUb2tlbjtcbiAgfVxuICBcbiAgLyoqXG4gICAqIENyZWF0ZSBhdXRoZW50aWNhdGVkIHJlcXVlc3RcbiAgICovXG4gIGNyZWF0ZVJlcXVlc3QoXG4gICAgcGF0aDogc3RyaW5nLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIG1ldGhvZD86IHN0cmluZztcbiAgICAgIGJvZHk/OiBhbnk7XG4gICAgICBzZWFyY2hQYXJhbXM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICAgIH0gPSB7fVxuICApOiBSZXF1ZXN0IHtcbiAgICByZXR1cm4gY3JlYXRlQXV0aGVudGljYXRlZFJlcXVlc3QocGF0aCwgb3B0aW9ucywgdGhpcy5nZXRBY2Nlc3NUb2tlbigpKTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIE1ha2UgYXV0aGVudGljYXRlZCBBUEkgcmVxdWVzdFxuICAgKi9cbiAgYXN5bmMgYXBpUmVxdWVzdChcbiAgICBwYXRoOiBzdHJpbmcsXG4gICAgb3B0aW9uczoge1xuICAgICAgbWV0aG9kPzogc3RyaW5nO1xuICAgICAgYm9keT86IGFueTtcbiAgICAgIGhlYWRlcnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICAgIH0gPSB7fVxuICApOiBQcm9taXNlPFJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIGF1dGhlbnRpY2F0ZWRBcGlSZXF1ZXN0KHBhdGgsIG9wdGlvbnMsIHRoaXMuZ2V0QWNjZXNzVG9rZW4oKSk7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBTaWduIG91dCBhbmQgY2xlYXIgY29udGV4dFxuICAgKi9cbiAgc2lnbk91dCgpOiB2b2lkIHtcbiAgICB0aGlzLnVzZXIgPSBudWxsO1xuICB9XG4gIFxuICAvKipcbiAgICogQ2hlY2sgaWYgYXV0aGVudGljYXRlZFxuICAgKi9cbiAgaXNBdXRoZW50aWNhdGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnVzZXIgIT09IG51bGwgJiYgdGhpcy51c2VyLmFjY2Vzc1Rva2VuICE9PSB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYSB0ZXN0IGF1dGggY29udGV4dFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGVzdEF1dGhDb250ZXh0KCk6IFRlc3RBdXRoQ29udGV4dCB7XG4gIHJldHVybiBuZXcgVGVzdEF1dGhDb250ZXh0KCk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIHJ1biBhIHRlc3Qgd2l0aCBhdXRoZW50aWNhdGVkIGNvbnRleHRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhBdXRoQ29udGV4dDxUPihcbiAgZm46IChhdXRoOiBUZXN0QXV0aENvbnRleHQpID0+IFByb21pc2U8VD5cbik6IFByb21pc2U8VD4ge1xuICBjb25zdCBhdXRoID0gY3JlYXRlVGVzdEF1dGhDb250ZXh0KCk7XG4gIGF3YWl0IGF1dGguc2lnbkluKCk7XG4gIFxuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBmbihhdXRoKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBhdXRoLnNpZ25PdXQoKTtcbiAgfVxufVxuXG4vKipcbiAqIE1vY2sgc2Vzc2lvbiBmb3IgdGVzdGluZyBjb21wb25lbnRzIHRoYXQgdXNlIHVzZVNlc3Npb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1vY2tTZXNzaW9uKHVzZXI/OiBQYXJ0aWFsPFRlc3RVc2VyPikge1xuICByZXR1cm4ge1xuICAgIHVzZXI6IHtcbiAgICAgIGlkOiB1c2VyPy5pZCB8fCAndGVzdC11c2VyLWlkJyxcbiAgICAgIGVtYWlsOiB1c2VyPy5lbWFpbCB8fCAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICBhdWQ6ICdhdXRoZW50aWNhdGVkJyxcbiAgICAgIHJvbGU6ICdhdXRoZW50aWNhdGVkJyxcbiAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9LFxuICAgIGFjY2Vzc190b2tlbjogdXNlcj8uYWNjZXNzVG9rZW4gfHwgJ21vY2stYWNjZXNzLXRva2VuJyxcbiAgICByZWZyZXNoX3Rva2VuOiAnbW9jay1yZWZyZXNoLXRva2VuJyxcbiAgICBleHBpcmVzX2F0OiBEYXRlLm5vdygpICsgMzYwMDAwMCwgLy8gMSBob3VyIGZyb20gbm93XG4gICAgZXhwaXJlc19pbjogMzYwMCxcbiAgICB0b2tlbl90eXBlOiAnYmVhcmVyJyxcbiAgfTtcbn1cblxuLyoqXG4gKiBNb2NrIGF1dGggc3RhdGUgZm9yIHRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1vY2tBdXRoU3RhdGUoYXV0aGVudGljYXRlZDogYm9vbGVhbiA9IHRydWUpIHtcbiAgaWYgKCFhdXRoZW50aWNhdGVkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNlc3Npb246IG51bGwsXG4gICAgICB1c2VyOiBudWxsLFxuICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgfTtcbiAgfVxuICBcbiAgcmV0dXJuIHtcbiAgICBzZXNzaW9uOiBjcmVhdGVNb2NrU2Vzc2lvbigpLFxuICAgIHVzZXI6IHtcbiAgICAgIGlkOiAndGVzdC11c2VyLWlkJyxcbiAgICAgIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICBhdWQ6ICdhdXRoZW50aWNhdGVkJyxcbiAgICAgIHJvbGU6ICdhdXRoZW50aWNhdGVkJyxcbiAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9LFxuICAgIGxvYWRpbmc6IGZhbHNlLFxuICB9O1xufVxuXG4vKipcbiAqIFdhaXQgZm9yIGF1dGhlbnRpY2F0aW9uIHRvIGNvbXBsZXRlXG4gKiBVc2VmdWwgZm9yIHRlc3RzIHRoYXQgbmVlZCB0byB3YWl0IGZvciBhc3luYyBhdXRoIG9wZXJhdGlvbnNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdhaXRGb3JBdXRoKG1zOiBudW1iZXIgPSAxMDApOiBQcm9taXNlPHZvaWQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xufVxuXG4vKipcbiAqIFZlcmlmeSBhIHJlcXVlc3QgaGFzIHZhbGlkIGF1dGhlbnRpY2F0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNWYWxpZEF1dGgocmVxdWVzdDogUmVxdWVzdCk6IGJvb2xlYW4ge1xuICBjb25zdCBhdXRoSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnQXV0aG9yaXphdGlvbicpO1xuICByZXR1cm4gYXV0aEhlYWRlciAhPT0gbnVsbCAmJiBhdXRoSGVhZGVyLnN0YXJ0c1dpdGgoJ0JlYXJlciAnKTtcbn1cblxuLyoqXG4gKiBFeHRyYWN0IGFjY2VzcyB0b2tlbiBmcm9tIHJlcXVlc3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RBY2Nlc3NUb2tlbihyZXF1ZXN0OiBSZXF1ZXN0KTogc3RyaW5nIHwgbnVsbCB7XG4gIGNvbnN0IGF1dGhIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdBdXRob3JpemF0aW9uJyk7XG4gIGlmICghYXV0aEhlYWRlciB8fCAhYXV0aEhlYWRlci5zdGFydHNXaXRoKCdCZWFyZXIgJykpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gYXV0aEhlYWRlci5zdWJzdHJpbmcoNyk7IC8vIFJlbW92ZSAnQmVhcmVyICcgcHJlZml4XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgcmVxdWVzdCB3aXRoIGV4cGlyZWQgdG9rZW4gZm9yIHRlc3RpbmcgdG9rZW4gZXhwaXJhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRXhwaXJlZFRva2VuUmVxdWVzdChcbiAgcGF0aDogc3RyaW5nLFxuICBvcHRpb25zOiB7XG4gICAgbWV0aG9kPzogc3RyaW5nO1xuICAgIGJvZHk/OiBhbnk7XG4gIH0gPSB7fVxuKTogUmVxdWVzdCB7XG4gIGNvbnN0IHsgbWV0aG9kID0gJ0dFVCcsIGJvZHkgfSA9IG9wdGlvbnM7XG4gIFxuICBjb25zdCB1cmwgPSBuZXcgVVJMKHBhdGgsICdodHRwOi8vbG9jYWxob3N0OjMwMDAnKTtcbiAgXG4gIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7XG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgZXhwaXJlZC10b2tlbicsXG4gIH0pO1xuICBcbiAgcmV0dXJuIG5ldyBSZXF1ZXN0KHVybC50b1N0cmluZygpLCB7XG4gICAgbWV0aG9kLFxuICAgIGhlYWRlcnMsXG4gICAgYm9keTogYm9keSA/IEpTT04uc3RyaW5naWZ5KGJvZHkpIDogdW5kZWZpbmVkLFxuICB9KTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSByZXF1ZXN0IHdpdGggaW52YWxpZCB0b2tlbiBmb3IgdGVzdGluZyB0b2tlbiB2YWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJbnZhbGlkVG9rZW5SZXF1ZXN0KFxuICBwYXRoOiBzdHJpbmcsXG4gIG9wdGlvbnM6IHtcbiAgICBtZXRob2Q/OiBzdHJpbmc7XG4gICAgYm9keT86IGFueTtcbiAgfSA9IHt9XG4pOiBSZXF1ZXN0IHtcbiAgY29uc3QgeyBtZXRob2QgPSAnR0VUJywgYm9keSB9ID0gb3B0aW9ucztcbiAgXG4gIGNvbnN0IHVybCA9IG5ldyBVUkwocGF0aCwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcpO1xuICBcbiAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHtcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciBpbnZhbGlkLXRva2VuLWZvcm1hdCcsXG4gIH0pO1xuICBcbiAgcmV0dXJuIG5ldyBSZXF1ZXN0KHVybC50b1N0cmluZygpLCB7XG4gICAgbWV0aG9kLFxuICAgIGhlYWRlcnMsXG4gICAgYm9keTogYm9keSA/IEpTT04uc3RyaW5naWZ5KGJvZHkpIDogdW5kZWZpbmVkLFxuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJUZXN0QXV0aENvbnRleHQiLCJhdXRoZW50aWNhdGVkQXBpUmVxdWVzdCIsImF1dGhlbnRpY2F0ZWRGZXRjaCIsImNyZWF0ZUF1dGhlbnRpY2F0ZWRSZXF1ZXN0IiwiY3JlYXRlRXhwaXJlZFRva2VuUmVxdWVzdCIsImNyZWF0ZUludmFsaWRUb2tlblJlcXVlc3QiLCJjcmVhdGVNb2NrQXV0aFN0YXRlIiwiY3JlYXRlTW9ja1Nlc3Npb24iLCJjcmVhdGVUZXN0QXV0aENvbnRleHQiLCJjcmVhdGVVbmF1dGhlbnRpY2F0ZWRSZXF1ZXN0IiwiZXh0cmFjdEFjY2Vzc1Rva2VuIiwiaGFzVmFsaWRBdXRoIiwid2FpdEZvckF1dGgiLCJ3aXRoQXV0aENvbnRleHQiLCJ1cmwiLCJvcHRpb25zIiwiYWNjZXNzVG9rZW4iLCJoZWFkZXJzIiwiSGVhZGVycyIsInNldCIsImZldGNoIiwicGF0aCIsIm1ldGhvZCIsImJvZHkiLCJBdXRob3JpemF0aW9uIiwiSlNPTiIsInN0cmluZ2lmeSIsInVuZGVmaW5lZCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsIk9iamVjdCIsImVudHJpZXMiLCJmb3JFYWNoIiwia2V5IiwidmFsdWUiLCJSZXF1ZXN0IiwidG9TdHJpbmciLCJzaWduSW4iLCJ1c2VyIiwiY3JlYXRlQW5kU2lnbkluVGVzdFVzZXIiLCJnZXRVc2VyIiwiZ2V0QWNjZXNzVG9rZW4iLCJFcnJvciIsImNyZWF0ZVJlcXVlc3QiLCJhcGlSZXF1ZXN0Iiwic2lnbk91dCIsImlzQXV0aGVudGljYXRlZCIsImZuIiwiYXV0aCIsImlkIiwiZW1haWwiLCJhdWQiLCJyb2xlIiwiY3JlYXRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInVwZGF0ZWRfYXQiLCJhY2Nlc3NfdG9rZW4iLCJyZWZyZXNoX3Rva2VuIiwiZXhwaXJlc19hdCIsIm5vdyIsImV4cGlyZXNfaW4iLCJ0b2tlbl90eXBlIiwiYXV0aGVudGljYXRlZCIsInNlc3Npb24iLCJsb2FkaW5nIiwibXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJyZXF1ZXN0IiwiYXV0aEhlYWRlciIsImdldCIsInN0YXJ0c1dpdGgiLCJzdWJzdHJpbmciXSwibWFwcGluZ3MiOiJBQUFBOzs7OztDQUtDOzs7Ozs7Ozs7OztRQXVJWUE7ZUFBQUE7O1FBcEdTQztlQUFBQTs7UUF2QkFDO2VBQUFBOztRQTJETkM7ZUFBQUE7O1FBMk9BQztlQUFBQTs7UUEwQkFDO2VBQUFBOztRQS9FQUM7ZUFBQUE7O1FBckJBQztlQUFBQTs7UUF2QkFDO2VBQUFBOztR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