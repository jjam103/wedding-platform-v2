8fdad292a0c793f50a2b8ddeb28b3dd0
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get FormModal () {
        return FormModal;
    },
    get FormModalSimple () {
        return FormModalSimple;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const _DynamicForm = require("./DynamicForm");
function FormModal({ isOpen, onClose, title, onSubmit, initialData = {}, schema, fields, submitLabel = 'Submit', size = 'md' }) {
    // Handle Escape key press
    const handleEscape = (0, _react.useCallback)((event)=>{
        if (event.key === 'Escape') {
            onClose();
        }
    }, [
        onClose
    ]);
    // Handle backdrop click
    const handleBackdropClick = (0, _react.useCallback)((event)=>{
        if (event.target === event.currentTarget) {
            onClose();
        }
    }, [
        onClose
    ]);
    // Prevent body scroll when modal is open
    (0, _react.useEffect)(()=>{
        if (isOpen) {
            // Save current scroll position
            const scrollY = window.scrollY;
            // Prevent body scroll
            document.body.style.position = 'fixed';
            document.body.style.top = `-${scrollY}px`;
            document.body.style.width = '100%';
            // Add escape key listener
            document.addEventListener('keydown', handleEscape);
            return ()=>{
                // Restore body scroll
                document.body.style.position = '';
                document.body.style.top = '';
                document.body.style.width = '';
                window.scrollTo(0, scrollY);
                // Remove escape key listener
                document.removeEventListener('keydown', handleEscape);
            };
        }
    }, [
        isOpen,
        handleEscape
    ]);
    // Handle form submission
    const handleSubmit = (0, _react.useCallback)(async (data)=>{
        await onSubmit(data);
        onClose();
    }, [
        onSubmit,
        onClose
    ]);
    if (!isOpen) {
        return null;
    }
    const sizeClasses = {
        sm: 'max-w-md',
        md: 'max-w-2xl',
        lg: 'max-w-4xl',
        xl: 'max-w-6xl'
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
        className: "fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4 animate-fade-in",
        onClick: handleBackdropClick,
        role: "dialog",
        "aria-modal": "true",
        "aria-labelledby": "modal-title",
        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
            className: `bg-white rounded-xl shadow-2xl ${sizeClasses[size]} w-full max-h-[90vh] overflow-y-auto animate-scale-in`,
            onClick: (e)=>e.stopPropagation(),
            children: [
                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "px-4 md:px-6 py-4 border-b border-sage-200 flex items-center justify-between sticky top-0 bg-white z-10",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                            id: "modal-title",
                            className: "text-lg md:text-xl font-semibold text-sage-900",
                            children: title
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                            type: "button",
                            onClick: onClose,
                            className: "text-sage-400 hover:text-sage-600 transition-all duration-200 p-2 rounded-md hover:bg-sage-100 hover:scale-110 min-h-[44px] min-w-[44px] flex items-center justify-center",
                            "aria-label": "Close modal",
                            children: /*#__PURE__*/ (0, _jsxruntime.jsx)("svg", {
                                className: "w-6 h-6",
                                fill: "none",
                                stroke: "currentColor",
                                viewBox: "0 0 24 24",
                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("path", {
                                    strokeLinecap: "round",
                                    strokeLinejoin: "round",
                                    strokeWidth: 2,
                                    d: "M6 18L18 6M6 6l12 12"
                                })
                            })
                        })
                    ]
                }),
                /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    className: "px-4 md:px-6 py-4",
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_DynamicForm.DynamicForm, {
                        fields: fields,
                        initialData: initialData,
                        schema: schema,
                        onSubmit: handleSubmit,
                        submitLabel: submitLabel,
                        onCancel: onClose,
                        cancelLabel: "Cancel"
                    })
                })
            ]
        })
    });
}
function FormModalSimple({ isOpen, onClose, title, children, size = 'md', footer }) {
    // Handle Escape key press
    const handleEscape = (0, _react.useCallback)((event)=>{
        if (event.key === 'Escape') {
            onClose();
        }
    }, [
        onClose
    ]);
    // Handle backdrop click
    const handleBackdropClick = (0, _react.useCallback)((event)=>{
        if (event.target === event.currentTarget) {
            onClose();
        }
    }, [
        onClose
    ]);
    // Prevent body scroll when modal is open
    (0, _react.useEffect)(()=>{
        if (isOpen) {
            // Save current scroll position
            const scrollY = window.scrollY;
            // Prevent body scroll
            document.body.style.position = 'fixed';
            document.body.style.top = `-${scrollY}px`;
            document.body.style.width = '100%';
            // Add escape key listener
            document.addEventListener('keydown', handleEscape);
            return ()=>{
                // Restore body scroll
                document.body.style.position = '';
                document.body.style.top = '';
                document.body.style.width = '';
                window.scrollTo(0, scrollY);
                // Remove escape key listener
                document.removeEventListener('keydown', handleEscape);
            };
        }
    }, [
        isOpen,
        handleEscape
    ]);
    if (!isOpen) {
        return null;
    }
    const sizeClasses = {
        sm: 'max-w-md',
        md: 'max-w-2xl',
        lg: 'max-w-4xl',
        xl: 'max-w-6xl'
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
        className: "fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4 animate-fade-in",
        onClick: handleBackdropClick,
        role: "dialog",
        "aria-modal": "true",
        "aria-labelledby": "modal-title",
        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
            className: `bg-white rounded-xl shadow-2xl ${sizeClasses[size]} w-full max-h-[90vh] overflow-y-auto animate-scale-in`,
            onClick: (e)=>e.stopPropagation(),
            children: [
                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "px-4 md:px-6 py-4 border-b border-sage-200 flex items-center justify-between sticky top-0 bg-white z-10",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                            id: "modal-title",
                            className: "text-lg md:text-xl font-semibold text-sage-900",
                            children: title
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                            type: "button",
                            onClick: onClose,
                            className: "text-sage-400 hover:text-sage-600 transition-all duration-200 p-2 rounded-md hover:bg-sage-100 hover:scale-110 min-h-[44px] min-w-[44px] flex items-center justify-center",
                            "aria-label": "Close modal",
                            children: /*#__PURE__*/ (0, _jsxruntime.jsx)("svg", {
                                className: "w-6 h-6",
                                fill: "none",
                                stroke: "currentColor",
                                viewBox: "0 0 24 24",
                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("path", {
                                    strokeLinecap: "round",
                                    strokeLinejoin: "round",
                                    strokeWidth: 2,
                                    d: "M6 18L18 6M6 6l12 12"
                                })
                            })
                        })
                    ]
                }),
                /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    className: "px-4 md:px-6 py-4",
                    children: children
                }),
                footer && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    className: "px-4 md:px-6 py-4 border-t border-sage-200 flex flex-col md:flex-row items-stretch md:items-center justify-end gap-3 sticky bottom-0 bg-white",
                    children: footer
                })
            ]
        })
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy91aS9Gb3JtTW9kYWwudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgdHlwZSBSZWFjdE5vZGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJy4vQnV0dG9uJztcbmltcG9ydCB7IER5bmFtaWNGb3JtLCB0eXBlIEZvcm1GaWVsZCB9IGZyb20gJy4vRHluYW1pY0Zvcm0nO1xuXG5pbnRlcmZhY2UgRm9ybU1vZGFsUHJvcHMge1xuICBpc09wZW46IGJvb2xlYW47XG4gIG9uQ2xvc2U6ICgpID0+IHZvaWQ7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIG9uU3VibWl0OiAoZGF0YTogYW55KSA9PiBQcm9taXNlPHZvaWQ+O1xuICBpbml0aWFsRGF0YT86IGFueTtcbiAgc2NoZW1hOiB6LlpvZFNjaGVtYTtcbiAgZmllbGRzOiBGb3JtRmllbGRbXTtcbiAgc3VibWl0TGFiZWw/OiBzdHJpbmc7XG4gIHNpemU/OiAnc20nIHwgJ21kJyB8ICdsZycgfCAneGwnO1xufVxuXG5pbnRlcmZhY2UgRm9ybU1vZGFsU2ltcGxlUHJvcHMge1xuICBpc09wZW46IGJvb2xlYW47XG4gIG9uQ2xvc2U6ICgpID0+IHZvaWQ7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGNoaWxkcmVuOiBSZWFjdE5vZGU7XG4gIHNpemU/OiAnc20nIHwgJ21kJyB8ICdsZycgfCAneGwnO1xuICBmb290ZXI/OiBSZWFjdE5vZGU7XG59XG5cbi8qKlxuICogRm9ybU1vZGFsIENvbXBvbmVudFxuICogXG4gKiBNb2RhbCBkaWFsb2cgY29tcG9uZW50IHdpdGggaW50ZWdyYXRlZCBkeW5hbWljIGZvcm0gcmVuZGVyaW5nLlxuICogU3VwcG9ydHMga2V5Ym9hcmQgbmF2aWdhdGlvbiAoRXNjYXBlIHRvIGNsb3NlKSBhbmQgY2xpY2stb3V0c2lkZS10by1jbG9zZS5cbiAqIFByZXZlbnRzIGJvZHkgc2Nyb2xsIHdoZW4gb3Blbi5cbiAqIEhhbmRsZXMgZm9ybSBzdWJtaXNzaW9uIHdpdGggbG9hZGluZyBzdGF0ZXMgYW5kIHZhbGlkYXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBGb3JtTW9kYWwoe1xuICBpc09wZW4sXG4gIG9uQ2xvc2UsXG4gIHRpdGxlLFxuICBvblN1Ym1pdCxcbiAgaW5pdGlhbERhdGEgPSB7fSxcbiAgc2NoZW1hLFxuICBmaWVsZHMsXG4gIHN1Ym1pdExhYmVsID0gJ1N1Ym1pdCcsXG4gIHNpemUgPSAnbWQnLFxufTogRm9ybU1vZGFsUHJvcHMpIHtcbiAgLy8gSGFuZGxlIEVzY2FwZSBrZXkgcHJlc3NcbiAgY29uc3QgaGFuZGxlRXNjYXBlID0gdXNlQ2FsbGJhY2soKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIG9uQ2xvc2UoKTtcbiAgICB9XG4gIH0sIFtvbkNsb3NlXSk7XG5cbiAgLy8gSGFuZGxlIGJhY2tkcm9wIGNsaWNrXG4gIGNvbnN0IGhhbmRsZUJhY2tkcm9wQ2xpY2sgPSB1c2VDYWxsYmFjaygoZXZlbnQ6IFJlYWN0Lk1vdXNlRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgb25DbG9zZSgpO1xuICAgIH1cbiAgfSwgW29uQ2xvc2VdKTtcblxuICAvLyBQcmV2ZW50IGJvZHkgc2Nyb2xsIHdoZW4gbW9kYWwgaXMgb3BlblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc09wZW4pIHtcbiAgICAgIC8vIFNhdmUgY3VycmVudCBzY3JvbGwgcG9zaXRpb25cbiAgICAgIGNvbnN0IHNjcm9sbFkgPSB3aW5kb3cuc2Nyb2xsWTtcbiAgICAgIFxuICAgICAgLy8gUHJldmVudCBib2R5IHNjcm9sbFxuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnRvcCA9IGAtJHtzY3JvbGxZfXB4YDtcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICBcbiAgICAgIC8vIEFkZCBlc2NhcGUga2V5IGxpc3RlbmVyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlRXNjYXBlKTtcbiAgICAgIFxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgLy8gUmVzdG9yZSBib2R5IHNjcm9sbFxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnBvc2l0aW9uID0gJyc7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUudG9wID0gJyc7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUud2lkdGggPSAnJztcbiAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIHNjcm9sbFkpO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVtb3ZlIGVzY2FwZSBrZXkgbGlzdGVuZXJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUVzY2FwZSk7XG4gICAgICB9O1xuICAgIH1cbiAgfSwgW2lzT3BlbiwgaGFuZGxlRXNjYXBlXSk7XG5cbiAgLy8gSGFuZGxlIGZvcm0gc3VibWlzc2lvblxuICBjb25zdCBoYW5kbGVTdWJtaXQgPSB1c2VDYWxsYmFjayhhc3luYyAoZGF0YTogYW55KSA9PiB7XG4gICAgYXdhaXQgb25TdWJtaXQoZGF0YSk7XG4gICAgb25DbG9zZSgpO1xuICB9LCBbb25TdWJtaXQsIG9uQ2xvc2VdKTtcblxuICBpZiAoIWlzT3Blbikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3Qgc2l6ZUNsYXNzZXMgPSB7XG4gICAgc206ICdtYXgtdy1tZCcsXG4gICAgbWQ6ICdtYXgtdy0yeGwnLFxuICAgIGxnOiAnbWF4LXctNHhsJyxcbiAgICB4bDogJ21heC13LTZ4bCcsXG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgei00MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTQgYW5pbWF0ZS1mYWRlLWluXCJcbiAgICAgIG9uQ2xpY2s9e2hhbmRsZUJhY2tkcm9wQ2xpY2t9XG4gICAgICByb2xlPVwiZGlhbG9nXCJcbiAgICAgIGFyaWEtbW9kYWw9XCJ0cnVlXCJcbiAgICAgIGFyaWEtbGFiZWxsZWRieT1cIm1vZGFsLXRpdGxlXCJcbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17YGJnLXdoaXRlIHJvdW5kZWQteGwgc2hhZG93LTJ4bCAke3NpemVDbGFzc2VzW3NpemVdfSB3LWZ1bGwgbWF4LWgtWzkwdmhdIG92ZXJmbG93LXktYXV0byBhbmltYXRlLXNjYWxlLWluYH1cbiAgICAgICAgb25DbGljaz17KGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCl9XG4gICAgICA+XG4gICAgICAgIHsvKiBNb2RhbCBIZWFkZXIgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtNCBtZDpweC02IHB5LTQgYm9yZGVyLWIgYm9yZGVyLXNhZ2UtMjAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBzdGlja3kgdG9wLTAgYmctd2hpdGUgei0xMFwiPlxuICAgICAgICAgIDxoMiBpZD1cIm1vZGFsLXRpdGxlXCIgY2xhc3NOYW1lPVwidGV4dC1sZyBtZDp0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgdGV4dC1zYWdlLTkwMFwiPlxuICAgICAgICAgICAge3RpdGxlfVxuICAgICAgICAgIDwvaDI+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBvbkNsaWNrPXtvbkNsb3NlfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1zYWdlLTQwMCBob3Zlcjp0ZXh0LXNhZ2UtNjAwIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMCBwLTIgcm91bmRlZC1tZCBob3ZlcjpiZy1zYWdlLTEwMCBob3ZlcjpzY2FsZS0xMTAgbWluLWgtWzQ0cHhdIG1pbi13LVs0NHB4XSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiXG4gICAgICAgICAgICBhcmlhLWxhYmVsPVwiQ2xvc2UgbW9kYWxcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy02IGgtNlwiXG4gICAgICAgICAgICAgIGZpbGw9XCJub25lXCJcbiAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCJcbiAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgc3Ryb2tlTGluZWNhcD1cInJvdW5kXCJcbiAgICAgICAgICAgICAgICBzdHJva2VMaW5lam9pbj1cInJvdW5kXCJcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD17Mn1cbiAgICAgICAgICAgICAgICBkPVwiTTYgMThMMTggNk02IDZsMTIgMTJcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBNb2RhbCBCb2R5IHdpdGggRHluYW1pYyBGb3JtICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTQgbWQ6cHgtNiBweS00XCI+XG4gICAgICAgICAgPER5bmFtaWNGb3JtXG4gICAgICAgICAgICBmaWVsZHM9e2ZpZWxkc31cbiAgICAgICAgICAgIGluaXRpYWxEYXRhPXtpbml0aWFsRGF0YX1cbiAgICAgICAgICAgIHNjaGVtYT17c2NoZW1hfVxuICAgICAgICAgICAgb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH1cbiAgICAgICAgICAgIHN1Ym1pdExhYmVsPXtzdWJtaXRMYWJlbH1cbiAgICAgICAgICAgIG9uQ2FuY2VsPXtvbkNsb3NlfVxuICAgICAgICAgICAgY2FuY2VsTGFiZWw9XCJDYW5jZWxcIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbi8qKlxuICogRm9ybU1vZGFsU2ltcGxlIENvbXBvbmVudFxuICogXG4gKiBTaW1wbGUgbW9kYWwgZGlhbG9nIGNvbXBvbmVudCBmb3IgY3VzdG9tIGNvbnRlbnQuXG4gKiBVc2UgdGhpcyB3aGVuIHlvdSBuZWVkIGZ1bGwgY29udHJvbCBvdmVyIHRoZSBtb2RhbCBjb250ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gRm9ybU1vZGFsU2ltcGxlKHtcbiAgaXNPcGVuLFxuICBvbkNsb3NlLFxuICB0aXRsZSxcbiAgY2hpbGRyZW4sXG4gIHNpemUgPSAnbWQnLFxuICBmb290ZXIsXG59OiBGb3JtTW9kYWxTaW1wbGVQcm9wcykge1xuICAvLyBIYW5kbGUgRXNjYXBlIGtleSBwcmVzc1xuICBjb25zdCBoYW5kbGVFc2NhcGUgPSB1c2VDYWxsYmFjaygoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgb25DbG9zZSgpO1xuICAgIH1cbiAgfSwgW29uQ2xvc2VdKTtcblxuICAvLyBIYW5kbGUgYmFja2Ryb3AgY2xpY2tcbiAgY29uc3QgaGFuZGxlQmFja2Ryb3BDbGljayA9IHVzZUNhbGxiYWNrKChldmVudDogUmVhY3QuTW91c2VFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBldmVudC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICBvbkNsb3NlKCk7XG4gICAgfVxuICB9LCBbb25DbG9zZV0pO1xuXG4gIC8vIFByZXZlbnQgYm9keSBzY3JvbGwgd2hlbiBtb2RhbCBpcyBvcGVuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzT3Blbikge1xuICAgICAgLy8gU2F2ZSBjdXJyZW50IHNjcm9sbCBwb3NpdGlvblxuICAgICAgY29uc3Qgc2Nyb2xsWSA9IHdpbmRvdy5zY3JvbGxZO1xuICAgICAgXG4gICAgICAvLyBQcmV2ZW50IGJvZHkgc2Nyb2xsXG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUudG9wID0gYC0ke3Njcm9sbFl9cHhgO1xuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgIFxuICAgICAgLy8gQWRkIGVzY2FwZSBrZXkgbGlzdGVuZXJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVFc2NhcGUpO1xuICAgICAgXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAvLyBSZXN0b3JlIGJvZHkgc2Nyb2xsXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucG9zaXRpb24gPSAnJztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS50b3AgPSAnJztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS53aWR0aCA9ICcnO1xuICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgc2Nyb2xsWSk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZW1vdmUgZXNjYXBlIGtleSBsaXN0ZW5lclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlRXNjYXBlKTtcbiAgICAgIH07XG4gICAgfVxuICB9LCBbaXNPcGVuLCBoYW5kbGVFc2NhcGVdKTtcblxuICBpZiAoIWlzT3Blbikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3Qgc2l6ZUNsYXNzZXMgPSB7XG4gICAgc206ICdtYXgtdy1tZCcsXG4gICAgbWQ6ICdtYXgtdy0yeGwnLFxuICAgIGxnOiAnbWF4LXctNHhsJyxcbiAgICB4bDogJ21heC13LTZ4bCcsXG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgei00MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTQgYW5pbWF0ZS1mYWRlLWluXCJcbiAgICAgIG9uQ2xpY2s9e2hhbmRsZUJhY2tkcm9wQ2xpY2t9XG4gICAgICByb2xlPVwiZGlhbG9nXCJcbiAgICAgIGFyaWEtbW9kYWw9XCJ0cnVlXCJcbiAgICAgIGFyaWEtbGFiZWxsZWRieT1cIm1vZGFsLXRpdGxlXCJcbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17YGJnLXdoaXRlIHJvdW5kZWQteGwgc2hhZG93LTJ4bCAke3NpemVDbGFzc2VzW3NpemVdfSB3LWZ1bGwgbWF4LWgtWzkwdmhdIG92ZXJmbG93LXktYXV0byBhbmltYXRlLXNjYWxlLWluYH1cbiAgICAgICAgb25DbGljaz17KGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCl9XG4gICAgICA+XG4gICAgICAgIHsvKiBNb2RhbCBIZWFkZXIgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtNCBtZDpweC02IHB5LTQgYm9yZGVyLWIgYm9yZGVyLXNhZ2UtMjAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBzdGlja3kgdG9wLTAgYmctd2hpdGUgei0xMFwiPlxuICAgICAgICAgIDxoMiBpZD1cIm1vZGFsLXRpdGxlXCIgY2xhc3NOYW1lPVwidGV4dC1sZyBtZDp0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgdGV4dC1zYWdlLTkwMFwiPlxuICAgICAgICAgICAge3RpdGxlfVxuICAgICAgICAgIDwvaDI+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBvbkNsaWNrPXtvbkNsb3NlfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1zYWdlLTQwMCBob3Zlcjp0ZXh0LXNhZ2UtNjAwIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMCBwLTIgcm91bmRlZC1tZCBob3ZlcjpiZy1zYWdlLTEwMCBob3ZlcjpzY2FsZS0xMTAgbWluLWgtWzQ0cHhdIG1pbi13LVs0NHB4XSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiXG4gICAgICAgICAgICBhcmlhLWxhYmVsPVwiQ2xvc2UgbW9kYWxcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy02IGgtNlwiXG4gICAgICAgICAgICAgIGZpbGw9XCJub25lXCJcbiAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCJcbiAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgc3Ryb2tlTGluZWNhcD1cInJvdW5kXCJcbiAgICAgICAgICAgICAgICBzdHJva2VMaW5lam9pbj1cInJvdW5kXCJcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD17Mn1cbiAgICAgICAgICAgICAgICBkPVwiTTYgMThMMTggNk02IDZsMTIgMTJcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBNb2RhbCBCb2R5ICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTQgbWQ6cHgtNiBweS00XCI+XG4gICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogTW9kYWwgRm9vdGVyICovfVxuICAgICAgICB7Zm9vdGVyICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTQgbWQ6cHgtNiBweS00IGJvcmRlci10IGJvcmRlci1zYWdlLTIwMCBmbGV4IGZsZXgtY29sIG1kOmZsZXgtcm93IGl0ZW1zLXN0cmV0Y2ggbWQ6aXRlbXMtY2VudGVyIGp1c3RpZnktZW5kIGdhcC0zIHN0aWNreSBib3R0b20tMCBiZy13aGl0ZVwiPlxuICAgICAgICAgICAge2Zvb3Rlcn1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbIkZvcm1Nb2RhbCIsIkZvcm1Nb2RhbFNpbXBsZSIsImlzT3BlbiIsIm9uQ2xvc2UiLCJ0aXRsZSIsIm9uU3VibWl0IiwiaW5pdGlhbERhdGEiLCJzY2hlbWEiLCJmaWVsZHMiLCJzdWJtaXRMYWJlbCIsInNpemUiLCJoYW5kbGVFc2NhcGUiLCJ1c2VDYWxsYmFjayIsImV2ZW50Iiwia2V5IiwiaGFuZGxlQmFja2Ryb3BDbGljayIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJ1c2VFZmZlY3QiLCJzY3JvbGxZIiwid2luZG93IiwiZG9jdW1lbnQiLCJib2R5Iiwic3R5bGUiLCJwb3NpdGlvbiIsInRvcCIsIndpZHRoIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNjcm9sbFRvIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZVN1Ym1pdCIsImRhdGEiLCJzaXplQ2xhc3NlcyIsInNtIiwibWQiLCJsZyIsInhsIiwiZGl2IiwiY2xhc3NOYW1lIiwib25DbGljayIsInJvbGUiLCJhcmlhLW1vZGFsIiwiYXJpYS1sYWJlbGxlZGJ5IiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsImgyIiwiaWQiLCJidXR0b24iLCJ0eXBlIiwiYXJpYS1sYWJlbCIsInN2ZyIsImZpbGwiLCJzdHJva2UiLCJ2aWV3Qm94IiwicGF0aCIsInN0cm9rZUxpbmVjYXAiLCJzdHJva2VMaW5lam9pbiIsInN0cm9rZVdpZHRoIiwiZCIsIkR5bmFt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