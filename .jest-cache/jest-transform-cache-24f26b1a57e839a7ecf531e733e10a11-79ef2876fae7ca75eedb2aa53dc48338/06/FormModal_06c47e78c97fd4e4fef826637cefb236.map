{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/ui/FormModal.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useCallback, type ReactNode } from 'react';\nimport { z } from 'zod';\nimport { Button } from './Button';\nimport { DynamicForm, type FormField } from './DynamicForm';\n\ninterface FormModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  onSubmit: (data: any) => Promise<void>;\n  initialData?: any;\n  schema: z.ZodSchema;\n  fields: FormField[];\n  submitLabel?: string;\n  size?: 'sm' | 'md' | 'lg' | 'xl';\n}\n\ninterface FormModalSimpleProps {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  children: ReactNode;\n  size?: 'sm' | 'md' | 'lg' | 'xl';\n  footer?: ReactNode;\n}\n\n/**\n * FormModal Component\n * \n * Modal dialog component with integrated dynamic form rendering.\n * Supports keyboard navigation (Escape to close) and click-outside-to-close.\n * Prevents body scroll when open.\n * Handles form submission with loading states and validation.\n */\nexport function FormModal({\n  isOpen,\n  onClose,\n  title,\n  onSubmit,\n  initialData = {},\n  schema,\n  fields,\n  submitLabel = 'Submit',\n  size = 'md',\n}: FormModalProps) {\n  // Handle Escape key press\n  const handleEscape = useCallback((event: KeyboardEvent) => {\n    if (event.key === 'Escape') {\n      onClose();\n    }\n  }, [onClose]);\n\n  // Handle backdrop click\n  const handleBackdropClick = useCallback((event: React.MouseEvent<HTMLDivElement>) => {\n    if (event.target === event.currentTarget) {\n      onClose();\n    }\n  }, [onClose]);\n\n  // Prevent body scroll when modal is open\n  useEffect(() => {\n    if (isOpen) {\n      // Save current scroll position\n      const scrollY = window.scrollY;\n      \n      // Prevent body scroll\n      document.body.style.position = 'fixed';\n      document.body.style.top = `-${scrollY}px`;\n      document.body.style.width = '100%';\n      \n      // Add escape key listener\n      document.addEventListener('keydown', handleEscape);\n      \n      return () => {\n        // Restore body scroll\n        document.body.style.position = '';\n        document.body.style.top = '';\n        document.body.style.width = '';\n        window.scrollTo(0, scrollY);\n        \n        // Remove escape key listener\n        document.removeEventListener('keydown', handleEscape);\n      };\n    }\n  }, [isOpen, handleEscape]);\n\n  // Handle form submission\n  const handleSubmit = useCallback(async (data: any) => {\n    await onSubmit(data);\n    onClose();\n  }, [onSubmit, onClose]);\n\n  if (!isOpen) {\n    return null;\n  }\n\n  const sizeClasses = {\n    sm: 'max-w-md',\n    md: 'max-w-2xl',\n    lg: 'max-w-4xl',\n    xl: 'max-w-6xl',\n  };\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4 animate-fade-in\"\n      onClick={handleBackdropClick}\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-labelledby=\"modal-title\"\n    >\n      <div\n        className={`bg-white rounded-xl shadow-2xl ${sizeClasses[size]} w-full max-h-[90vh] overflow-y-auto animate-scale-in`}\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Modal Header */}\n        <div className=\"px-4 md:px-6 py-4 border-b border-sage-200 flex items-center justify-between sticky top-0 bg-white z-10\">\n          <h2 id=\"modal-title\" className=\"text-lg md:text-xl font-semibold text-sage-900\">\n            {title}\n          </h2>\n          <button\n            type=\"button\"\n            onClick={onClose}\n            className=\"text-sage-400 hover:text-sage-600 transition-all duration-200 p-2 rounded-md hover:bg-sage-100 hover:scale-110 min-h-[44px] min-w-[44px] flex items-center justify-center\"\n            aria-label=\"Close modal\"\n          >\n            <svg\n              className=\"w-6 h-6\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n\n        {/* Modal Body with Dynamic Form */}\n        <div className=\"px-4 md:px-6 py-4\">\n          <DynamicForm\n            fields={fields}\n            initialData={initialData}\n            schema={schema}\n            onSubmit={handleSubmit}\n            submitLabel={submitLabel}\n            onCancel={onClose}\n            cancelLabel=\"Cancel\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/**\n * FormModalSimple Component\n * \n * Simple modal dialog component for custom content.\n * Use this when you need full control over the modal content.\n */\nexport function FormModalSimple({\n  isOpen,\n  onClose,\n  title,\n  children,\n  size = 'md',\n  footer,\n}: FormModalSimpleProps) {\n  // Handle Escape key press\n  const handleEscape = useCallback((event: KeyboardEvent) => {\n    if (event.key === 'Escape') {\n      onClose();\n    }\n  }, [onClose]);\n\n  // Handle backdrop click\n  const handleBackdropClick = useCallback((event: React.MouseEvent<HTMLDivElement>) => {\n    if (event.target === event.currentTarget) {\n      onClose();\n    }\n  }, [onClose]);\n\n  // Prevent body scroll when modal is open\n  useEffect(() => {\n    if (isOpen) {\n      // Save current scroll position\n      const scrollY = window.scrollY;\n      \n      // Prevent body scroll\n      document.body.style.position = 'fixed';\n      document.body.style.top = `-${scrollY}px`;\n      document.body.style.width = '100%';\n      \n      // Add escape key listener\n      document.addEventListener('keydown', handleEscape);\n      \n      return () => {\n        // Restore body scroll\n        document.body.style.position = '';\n        document.body.style.top = '';\n        document.body.style.width = '';\n        window.scrollTo(0, scrollY);\n        \n        // Remove escape key listener\n        document.removeEventListener('keydown', handleEscape);\n      };\n    }\n  }, [isOpen, handleEscape]);\n\n  if (!isOpen) {\n    return null;\n  }\n\n  const sizeClasses = {\n    sm: 'max-w-md',\n    md: 'max-w-2xl',\n    lg: 'max-w-4xl',\n    xl: 'max-w-6xl',\n  };\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4 animate-fade-in\"\n      onClick={handleBackdropClick}\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-labelledby=\"modal-title\"\n    >\n      <div\n        className={`bg-white rounded-xl shadow-2xl ${sizeClasses[size]} w-full max-h-[90vh] overflow-y-auto animate-scale-in`}\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Modal Header */}\n        <div className=\"px-4 md:px-6 py-4 border-b border-sage-200 flex items-center justify-between sticky top-0 bg-white z-10\">\n          <h2 id=\"modal-title\" className=\"text-lg md:text-xl font-semibold text-sage-900\">\n            {title}\n          </h2>\n          <button\n            type=\"button\"\n            onClick={onClose}\n            className=\"text-sage-400 hover:text-sage-600 transition-all duration-200 p-2 rounded-md hover:bg-sage-100 hover:scale-110 min-h-[44px] min-w-[44px] flex items-center justify-center\"\n            aria-label=\"Close modal\"\n          >\n            <svg\n              className=\"w-6 h-6\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n\n        {/* Modal Body */}\n        <div className=\"px-4 md:px-6 py-4\">\n          {children}\n        </div>\n\n        {/* Modal Footer */}\n        {footer && (\n          <div className=\"px-4 md:px-6 py-4 border-t border-sage-200 flex flex-col md:flex-row items-stretch md:items-center justify-end gap-3 sticky bottom-0 bg-white\">\n            {footer}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["FormModal","FormModalSimple","isOpen","onClose","title","onSubmit","initialData","schema","fields","submitLabel","size","handleEscape","useCallback","event","key","handleBackdropClick","target","currentTarget","useEffect","scrollY","window","document","body","style","position","top","width","addEventListener","scrollTo","removeEventListener","handleSubmit","data","sizeClasses","sm","md","lg","xl","div","className","onClick","role","aria-modal","aria-labelledby","e","stopPropagation","h2","id","button","type","aria-label","svg","fill","stroke","viewBox","path","strokeLinecap","strokeLinejoin","strokeWidth","d","DynamicForm","onCancel","cancelLabel","children","footer"],"mappings":"AAAA;;;;;;;;;;;;QAoCgBA;eAAAA;;QAmIAC;eAAAA;;;;uBArKuC;6BAGX;AA+BrC,SAASD,UAAU,EACxBE,MAAM,EACNC,OAAO,EACPC,KAAK,EACLC,QAAQ,EACRC,cAAc,CAAC,CAAC,EAChBC,MAAM,EACNC,MAAM,EACNC,cAAc,QAAQ,EACtBC,OAAO,IAAI,EACI;IACf,0BAA0B;IAC1B,MAAMC,eAAeC,IAAAA,kBAAW,EAAC,CAACC;QAChC,IAAIA,MAAMC,GAAG,KAAK,UAAU;YAC1BX;QACF;IACF,GAAG;QAACA;KAAQ;IAEZ,wBAAwB;IACxB,MAAMY,sBAAsBH,IAAAA,kBAAW,EAAC,CAACC;QACvC,IAAIA,MAAMG,MAAM,KAAKH,MAAMI,aAAa,EAAE;YACxCd;QACF;IACF,GAAG;QAACA;KAAQ;IAEZ,yCAAyC;IACzCe,IAAAA,gBAAS,EAAC;QACR,IAAIhB,QAAQ;YACV,+BAA+B;YAC/B,MAAMiB,UAAUC,OAAOD,OAAO;YAE9B,sBAAsB;YACtBE,SAASC,IAAI,CAACC,KAAK,CAACC,QAAQ,GAAG;YAC/BH,SAASC,IAAI,CAACC,KAAK,CAACE,GAAG,GAAG,CAAC,CAAC,EAAEN,QAAQ,EAAE,CAAC;YACzCE,SAASC,IAAI,CAACC,KAAK,CAACG,KAAK,GAAG;YAE5B,0BAA0B;YAC1BL,SAASM,gBAAgB,CAAC,WAAWhB;YAErC,OAAO;gBACL,sBAAsB;gBACtBU,SAASC,IAAI,CAACC,KAAK,CAACC,QAAQ,GAAG;gBAC/BH,SAASC,IAAI,CAACC,KAAK,CAACE,GAAG,GAAG;gBAC1BJ,SAASC,IAAI,CAACC,KAAK,CAACG,KAAK,GAAG;gBAC5BN,OAAOQ,QAAQ,CAAC,GAAGT;gBAEnB,6BAA6B;gBAC7BE,SAASQ,mBAAmB,CAAC,WAAWlB;YAC1C;QACF;IACF,GAAG;QAACT;QAAQS;KAAa;IAEzB,yBAAyB;IACzB,MAAMmB,eAAelB,IAAAA,kBAAW,EAAC,OAAOmB;QACtC,MAAM1B,SAAS0B;QACf5B;IACF,GAAG;QAACE;QAAUF;KAAQ;IAEtB,IAAI,CAACD,QAAQ;QACX,OAAO;IACT;IAEA,MAAM8B,cAAc;QAClBC,IAAI;QACJC,IAAI;QACJC,IAAI;QACJC,IAAI;IACN;IAEA,qBACE,qBAACC;QACCC,WAAU;QACVC,SAASxB;QACTyB,MAAK;QACLC,cAAW;QACXC,mBAAgB;kBAEhB,cAAA,sBAACL;YACCC,WAAW,CAAC,+BAA+B,EAAEN,WAAW,CAACtB,KAAK,CAAC,qDAAqD,CAAC;YACrH6B,SAAS,CAACI,IAAMA,EAAEC,eAAe;;8BAGjC,sBAACP;oBAAIC,WAAU;;sCACb,qBAACO;4BAAGC,IAAG;4BAAcR,WAAU;sCAC5BlC;;sCAEH,qBAAC2C;4BACCC,MAAK;4BACLT,SAASpC;4BACTmC,WAAU;4BACVW,cAAW;sCAEX,cAAA,qBAACC;gCACCZ,WAAU;gCACVa,MAAK;gCACLC,QAAO;gCACPC,SAAQ;0CAER,cAAA,qBAACC;oCACCC,eAAc;oCACdC,gBAAe;oCACfC,aAAa;oCACbC,GAAE;;;;;;8BAOV,qBAACrB;oBAAIC,WAAU;8BACb,cAAA,qBAACqB,wBAAW;wBACVnD,QAAQA;wBACRF,aAAaA;wBACbC,QAAQA;wBACRF,UAAUyB;wBACVrB,aAAaA;wBACbmD,UAAUzD;wBACV0D,aAAY;;;;;;AAMxB;AAQO,SAAS5D,gBAAgB,EAC9BC,MAAM,EACNC,OAAO,EACPC,KAAK,EACL0D,QAAQ,EACRpD,OAAO,IAAI,EACXqD,MAAM,EACe;IACrB,0BAA0B;IAC1B,MAAMpD,eAAeC,IAAAA,kBAAW,EAAC,CAACC;QAChC,IAAIA,MAAMC,GAAG,KAAK,UAAU;YAC1BX;QACF;IACF,GAAG;QAACA;KAAQ;IAEZ,wBAAwB;IACxB,MAAMY,sBAAsBH,IAAAA,kBAAW,EAAC,CAACC;QACvC,IAAIA,MAAMG,MAAM,KAAKH,MAAMI,aAAa,EAAE;YACxCd;QACF;IACF,GAAG;QAACA;KAAQ;IAEZ,yCAAyC;IACzCe,IAAAA,gBAAS,EAAC;QACR,IAAIhB,QAAQ;YACV,+BAA+B;YAC/B,MAAMiB,UAAUC,OAAOD,OAAO;YAE9B,sBAAsB;YACtBE,SAASC,IAAI,CAACC,KAAK,CAACC,QAAQ,GAAG;YAC/BH,SAASC,IAAI,CAACC,KAAK,CAACE,GAAG,GAAG,CAAC,CAAC,EAAEN,QAAQ,EAAE,CAAC;YACzCE,SAASC,IAAI,CAACC,KAAK,CAACG,KAAK,GAAG;YAE5B,0BAA0B;YAC1BL,SAASM,gBAAgB,CAAC,WAAWhB;YAErC,OAAO;gBACL,sBAAsB;gBACtBU,SAASC,IAAI,CAACC,KAAK,CAACC,QAAQ,GAAG;gBAC/BH,SAASC,IAAI,CAACC,KAAK,CAACE,GAAG,GAAG;gBAC1BJ,SAASC,IAAI,CAACC,KAAK,CAACG,KAAK,GAAG;gBAC5BN,OAAOQ,QAAQ,CAAC,GAAGT;gBAEnB,6BAA6B;gBAC7BE,SAASQ,mBAAmB,CAAC,WAAWlB;YAC1C;QACF;IACF,GAAG;QAACT;QAAQS;KAAa;IAEzB,IAAI,CAACT,QAAQ;QACX,OAAO;IACT;IAEA,MAAM8B,cAAc;QAClBC,IAAI;QACJC,IAAI;QACJC,IAAI;QACJC,IAAI;IACN;IAEA,qBACE,qBAACC;QACCC,WAAU;QACVC,SAASxB;QACTyB,MAAK;QACLC,cAAW;QACXC,mBAAgB;kBAEhB,cAAA,sBAACL;YACCC,WAAW,CAAC,+BAA+B,EAAEN,WAAW,CAACtB,KAAK,CAAC,qDAAqD,CAAC;YACrH6B,SAAS,CAACI,IAAMA,EAAEC,eAAe;;8BAGjC,sBAACP;oBAAIC,WAAU;;sCACb,qBAACO;4BAAGC,IAAG;4BAAcR,WAAU;sCAC5BlC;;sCAEH,qBAAC2C;4BACCC,MAAK;4BACLT,SAASpC;4BACTmC,WAAU;4BACVW,cAAW;sCAEX,cAAA,qBAACC;gCACCZ,WAAU;gCACVa,MAAK;gCACLC,QAAO;gCACPC,SAAQ;0CAER,cAAA,qBAACC;oCACCC,eAAc;oCACdC,gBAAe;oCACfC,aAAa;oCACbC,GAAE;;;;;;8BAOV,qBAACrB;oBAAIC,WAAU;8BACZwB;;gBAIFC,wBACC,qBAAC1B;oBAAIC,WAAU;8BACZyB;;;;;AAMb"}