57758ff067621716dc194716d68d8d03
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "RSVPManager", {
    enumerable: true,
    get: function() {
        return RSVPManager;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
function RSVPManager({ guest }) {
    const [events, setEvents] = (0, _react.useState)([]);
    const [activities, setActivities] = (0, _react.useState)([]);
    const [loading, setLoading] = (0, _react.useState)(true);
    const [error, setError] = (0, _react.useState)(null);
    const [submitting, setSubmitting] = (0, _react.useState)(null);
    const [success, setSuccess] = (0, _react.useState)(null);
    (0, _react.useEffect)(()=>{
        loadRSVPData();
    }, [
        guest.id
    ]);
    const loadRSVPData = async ()=>{
        try {
            setLoading(true);
            setError(null);
            const [eventsResponse, activitiesResponse, rsvpsResponse] = await Promise.all([
                fetch('/api/guest/events/list'),
                fetch('/api/guest/activities/list'),
                fetch('/api/guest/rsvps')
            ]);
            if (!eventsResponse.ok || !activitiesResponse.ok || !rsvpsResponse.ok) {
                throw new Error('Failed to load RSVP data');
            }
            const eventsData = await eventsResponse.json();
            const activitiesData = await activitiesResponse.json();
            const rsvpsData = await rsvpsResponse.json();
            if (eventsData.success && activitiesData.success && rsvpsData.success) {
                // Map RSVPs to events and activities
                const rsvpMap = new Map();
                rsvpsData.data.forEach((rsvp)=>{
                    if (rsvp.event_id) {
                        rsvpMap.set(`event-${rsvp.event_id}`, rsvp);
                    }
                    if (rsvp.activity_id) {
                        rsvpMap.set(`activity-${rsvp.activity_id}`, rsvp);
                    }
                });
                const eventsWithRSVP = eventsData.data.map((event)=>({
                        ...event,
                        rsvp: rsvpMap.get(`event-${event.id}`)
                    }));
                const activitiesWithRSVP = activitiesData.data.map((activity)=>({
                        ...activity,
                        rsvp: rsvpMap.get(`activity-${activity.id}`)
                    }));
                setEvents(eventsWithRSVP);
                setActivities(activitiesWithRSVP);
            }
        } catch (err) {
            setError(err instanceof Error ? err.message : 'An error occurred');
        } finally{
            setLoading(false);
        }
    };
    const submitRSVP = async (type, id, status, guestCount, dietaryNotes, specialRequirements)=>{
        try {
            setSubmitting(`${type}-${id}`);
            setError(null);
            setSuccess(null);
            const response = await fetch('/api/guest/rsvp', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    guest_id: guest.id,
                    [type === 'event' ? 'event_id' : 'activity_id']: id,
                    status,
                    guest_count: guestCount,
                    dietary_notes: dietaryNotes,
                    special_requirements: specialRequirements
                })
            });
            const result = await response.json();
            if (!result.success) {
                setError(result.error?.message || 'Failed to submit RSVP');
                return;
            }
            setSuccess('RSVP submitted successfully!');
            // Reload data to show updated RSVP
            await loadRSVPData();
            // Clear success message after 3 seconds
            setTimeout(()=>setSuccess(null), 3000);
        } catch (err) {
            setError(err instanceof Error ? err.message : 'An error occurred');
        } finally{
            setSubmitting(null);
        }
    };
    const formatDate = (dateString)=>{
        const date = new Date(dateString);
        return date.toLocaleDateString('en-US', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
    };
    const formatTime = (dateString)=>{
        const date = new Date(dateString);
        return date.toLocaleTimeString('en-US', {
            hour: 'numeric',
            minute: '2-digit',
            hour12: true
        });
    };
    const getRSVPStatusColor = (status)=>{
        switch(status){
            case 'attending':
                return 'bg-jungle-100 text-jungle-800 border-jungle-300';
            case 'declined':
                return 'bg-sage-100 text-sage-800 border-sage-300';
            case 'maybe':
                return 'bg-sunset-100 text-sunset-800 border-sunset-300';
            default:
                return 'bg-volcano-100 text-volcano-800 border-volcano-300';
        }
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: "min-h-screen bg-gradient-to-br from-jungle-50 via-ocean-50 to-sunset-50",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsx)("header", {
                className: "bg-white shadow-sm border-b border-sage-200",
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",
                    children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center justify-between",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("h1", {
                                        className: "text-3xl font-bold text-jungle-700",
                                        children: "RSVP Management"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                        className: "text-sage-600 mt-1",
                                        children: "Respond to wedding events and activities"
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("a", {
                                href: "/guest/dashboard",
                                className: "text-ocean-600 hover:text-ocean-700 font-medium",
                                children: "← Back to Dashboard"
                            })
                        ]
                    })
                })
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("main", {
                className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",
                children: [
                    success && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "bg-jungle-50 border border-jungle-200 rounded-lg p-4 mb-6",
                        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("p", {
                            className: "text-jungle-800",
                            children: [
                                "✓ ",
                                success
                            ]
                        })
                    }),
                    error && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "bg-volcano-50 border border-volcano-200 rounded-lg p-4 mb-6",
                        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("p", {
                            className: "text-volcano-800",
                            children: [
                                "✗ ",
                                error
                            ]
                        })
                    }),
                    loading ? /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "flex items-center justify-center py-12",
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            className: "animate-spin rounded-full h-12 w-12 border-b-2 border-jungle-600"
                        })
                    }) : /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "space-y-8",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("section", {
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                                        className: "text-2xl font-bold text-jungle-700 mb-4",
                                        children: "Wedding Events"
                                    }),
                                    events.length === 0 ? /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                        className: "bg-white rounded-lg shadow-md p-8 text-center",
                                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                            className: "text-sage-600",
                                            children: "No events available at this time."
                                        })
                                    }) : /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                        className: "space-y-4",
                                        children: events.map((event)=>/*#__PURE__*/ (0, _jsxruntime.jsx)(RSVPCard, {
                                                type: "event",
                                                item: event,
                                                rsvp: event.rsvp,
                                                onSubmit: submitRSVP,
                                                submitting: submitting === `event-${event.id}`,
                                                formatDate: formatDate,
                                                formatTime: formatTime,
                                                getRSVPStatusColor: getRSVPStatusColor
                                            }, event.id))
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("section", {
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                                        className: "text-2xl font-bold text-jungle-700 mb-4",
                                        children: "Activities"
                                    }),
                                    activities.length === 0 ? /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                        className: "bg-white rounded-lg shadow-md p-8 text-center",
                                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                            className: "text-sage-600",
                                            children: "No activities available at this time."
                                        })
                                    }) : /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                        className: "space-y-4",
                                        children: activities.map((activity)=>/*#__PURE__*/ (0, _jsxruntime.jsx)(RSVPCard, {
                                                type: "activity",
                                                item: activity,
                                                rsvp: activity.rsvp,
                                                onSubmit: submitRSVP,
                                                submitting: submitting === `activity-${activity.id}`,
                                                formatDate: formatDate,
                                                formatTime: formatTime,
                                                getRSVPStatusColor: getRSVPStatusColor
                                            }, activity.id))
                                    })
                                ]
                            })
                        ]
                    })
                ]
            })
        ]
    });
}
function RSVPCard({ type, item, rsvp, onSubmit, submitting, formatDate, formatTime, getRSVPStatusColor }) {
    const [showForm, setShowForm] = (0, _react.useState)(false);
    const [status, setStatus] = (0, _react.useState)(rsvp?.status === 'attending' || rsvp?.status === 'declined' || rsvp?.status === 'maybe' ? rsvp.status : 'attending');
    const [guestCount, setGuestCount] = (0, _react.useState)(rsvp?.guest_count?.toString() || '1');
    const [dietaryNotes, setDietaryNotes] = (0, _react.useState)(rsvp?.dietary_notes || '');
    const [specialRequirements, setSpecialRequirements] = (0, _react.useState)(rsvp?.special_requirements || '');
    const handleSubmit = async (e)=>{
        e.preventDefault();
        await onSubmit(type, item.id, status, parseInt(guestCount) || undefined, dietaryNotes || undefined, specialRequirements || undefined);
        setShowForm(false);
    };
    const dateField = 'start_date' in item ? item.start_date : item.start_time;
    return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
        className: "bg-white rounded-lg shadow-md border border-sage-200 overflow-hidden",
        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
            className: "p-6",
            children: [
                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "flex items-start justify-between mb-4",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "flex-1",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("h3", {
                                    className: "text-xl font-bold text-jungle-700",
                                    children: item.name
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "mt-2 space-y-1",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("p", {
                                            className: "text-sage-700 text-sm",
                                            children: [
                                                "\uD83D\uDCC5 ",
                                                formatDate(dateField)
                                            ]
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("p", {
                                            className: "text-sage-700 text-sm",
                                            children: [
                                                "\uD83D\uDD50 ",
                                                formatTime(dateField)
                                            ]
                                        }),
                                        item.description && /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                            className: "text-sage-600 text-sm mt-2",
                                            children: item.description
                                        })
                                    ]
                                })
                            ]
                        }),
                        rsvp && /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                            className: `inline-block px-3 py-1 rounded-full text-sm font-medium border ${getRSVPStatusColor(rsvp.status)}`,
                            children: rsvp.status.charAt(0).toUpperCase() + rsvp.status.slice(1)
                        })
                    ]
                }),
                !showForm ? /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "flex items-center space-x-3",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                            onClick: ()=>setShowForm(true),
                            className: "bg-jungle-600 hover:bg-jungle-700 text-white font-medium py-2 px-6 rounded-lg transition-colors",
                            children: rsvp ? 'Update RSVP' : 'Respond to RSVP'
                        }),
                        rsvp && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "text-sm text-sage-600",
                            children: [
                                "Responded on ",
                                new Date(rsvp.responded_at || rsvp.created_at).toLocaleDateString()
                            ]
                        })
                    ]
                }) : /*#__PURE__*/ (0, _jsxruntime.jsxs)("form", {
                    onSubmit: handleSubmit,
                    className: "space-y-4 mt-4 pt-4 border-t border-sage-200",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("label", {
                                    className: "block text-sm font-medium text-sage-700 mb-2",
                                    children: "Your Response"
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "flex items-center space-x-3",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                            type: "button",
                                            onClick: ()=>setStatus('attending'),
                                            className: `px-4 py-2 rounded-lg font-medium transition-colors ${status === 'attending' ? 'bg-jungle-600 text-white' : 'bg-sage-100 text-sage-700 hover:bg-sage-200'}`,
                                            children: "Attending"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                            type: "button",
                                            onClick: ()=>setStatus('maybe'),
                                            className: `px-4 py-2 rounded-lg font-medium transition-colors ${status === 'maybe' ? 'bg-sunset-600 text-white' : 'bg-sage-100 text-sage-700 hover:bg-sage-200'}`,
                                            children: "Maybe"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                            type: "button",
                                            onClick: ()=>setStatus('declined'),
                                            className: `px-4 py-2 rounded-lg font-medium transition-colors ${status === 'declined' ? 'bg-sage-600 text-white' : 'bg-sage-100 text-sage-700 hover:bg-sage-200'}`,
                                            children: "Decline"
                                        })
                                    ]
                                })
                            ]
                        }),
                        (status === 'attending' || status === 'maybe') && /*#__PURE__*/ (0, _jsxruntime.jsxs)(_jsxruntime.Fragment, {
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("label", {
                                            className: "block text-sm font-medium text-sage-700 mb-1",
                                            children: "Number of Guests"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                                            type: "number",
                                            min: "1",
                                            value: guestCount,
                                            onChange: (e)=>setGuestCount(e.target.value),
                                            className: "w-full px-3 py-2 border border-sage-300 rounded-lg focus:ring-2 focus:ring-jungle-500 focus:border-jungle-500"
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("label", {
                                            className: "block text-sm font-medium text-sage-700 mb-1",
                                            children: "Dietary Restrictions"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("textarea", {
                                            value: dietaryNotes,
                                            onChange: (e)=>setDietaryNotes(e.target.value),
                                            rows: 2,
                                            className: "w-full px-3 py-2 border border-sage-300 rounded-lg focus:ring-2 focus:ring-jungle-500 focus:border-jungle-500",
                                            placeholder: "Any dietary restrictions or allergies..."
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("label", {
                                            className: "block text-sm font-medium text-sage-700 mb-1",
                                            children: "Special Requirements"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("textarea", {
                                            value: specialRequirements,
                                            onChange: (e)=>setSpecialRequirements(e.target.value),
                                            rows: 2,
                                            className: "w-full px-3 py-2 border border-sage-300 rounded-lg focus:ring-2 focus:ring-jungle-500 focus:border-jungle-500",
                                            placeholder: "Any special requirements or notes..."
                                        })
                                    ]
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "flex items-center space-x-3 pt-2",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                    type: "submit",
                                    disabled: submitting,
                                    className: "bg-jungle-600 hover:bg-jungle-700 disabled:bg-sage-400 text-white font-medium py-2 px-6 rounded-lg transition-colors",
                                    children: submitting ? 'Submitting...' : 'Submit RSVP'
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                    type: "button",
                                    onClick: ()=>setShowForm(false),
                                    disabled: submitting,
                                    className: "bg-sage-200 hover:bg-sage-300 disabled:bg-sage-100 text-sage-700 font-medium py-2 px-6 rounded-lg transition-colors",
                                    children: "Cancel"
                                })
                            ]
                        })
                    ]
                })
            ]
        })
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9ndWVzdC9SU1ZQTWFuYWdlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHR5cGUgeyBHdWVzdCwgRXZlbnQsIEFjdGl2aXR5LCBSU1ZQIH0gZnJvbSAnQC90eXBlcyc7XG5cbmludGVyZmFjZSBSU1ZQTWFuYWdlclByb3BzIHtcbiAgZ3Vlc3Q6IEd1ZXN0O1xufVxuXG5pbnRlcmZhY2UgRXZlbnRXaXRoUlNWUCBleHRlbmRzIEV2ZW50IHtcbiAgcnN2cD86IFJTVlA7XG59XG5cbmludGVyZmFjZSBBY3Rpdml0eVdpdGhSU1ZQIGV4dGVuZHMgQWN0aXZpdHkge1xuICByc3ZwPzogUlNWUDtcbn1cblxuLyoqXG4gKiBSU1ZQIE1hbmFnZXIgQ29tcG9uZW50XG4gKiBcbiAqIE1hbmFnZXMgZ3Vlc3QgUlNWUHMgZm9yIGV2ZW50cyBhbmQgYWN0aXZpdGllczpcbiAqIC0gRXZlbnQtbGV2ZWwgUlNWUCBmb3Jtc1xuICogLSBBY3Rpdml0eS1sZXZlbCBSU1ZQIGZvcm1zXG4gKiAtIERpZXRhcnkgcmVzdHJpY3Rpb25zIGlucHV0XG4gKiAtIFJTVlAgY29uZmlybWF0aW9uIGRpc3BsYXlcbiAqIFxuICogUmVxdWlyZW1lbnRzOiAxMy42LCA2LjEtNi44XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBSU1ZQTWFuYWdlcih7IGd1ZXN0IH06IFJTVlBNYW5hZ2VyUHJvcHMpIHtcbiAgY29uc3QgW2V2ZW50cywgc2V0RXZlbnRzXSA9IHVzZVN0YXRlPEV2ZW50V2l0aFJTVlBbXT4oW10pO1xuICBjb25zdCBbYWN0aXZpdGllcywgc2V0QWN0aXZpdGllc10gPSB1c2VTdGF0ZTxBY3Rpdml0eVdpdGhSU1ZQW10+KFtdKTtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtzdWJtaXR0aW5nLCBzZXRTdWJtaXR0aW5nXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc3VjY2Vzcywgc2V0U3VjY2Vzc10gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxvYWRSU1ZQRGF0YSgpO1xuICB9LCBbZ3Vlc3QuaWRdKTtcblxuICBjb25zdCBsb2FkUlNWUERhdGEgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgICBzZXRFcnJvcihudWxsKTtcblxuICAgICAgY29uc3QgW2V2ZW50c1Jlc3BvbnNlLCBhY3Rpdml0aWVzUmVzcG9uc2UsIHJzdnBzUmVzcG9uc2VdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBmZXRjaCgnL2FwaS9ndWVzdC9ldmVudHMvbGlzdCcpLFxuICAgICAgICBmZXRjaCgnL2FwaS9ndWVzdC9hY3Rpdml0aWVzL2xpc3QnKSxcbiAgICAgICAgZmV0Y2goJy9hcGkvZ3Vlc3QvcnN2cHMnKSxcbiAgICAgIF0pO1xuXG4gICAgICBpZiAoIWV2ZW50c1Jlc3BvbnNlLm9rIHx8ICFhY3Rpdml0aWVzUmVzcG9uc2Uub2sgfHwgIXJzdnBzUmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gbG9hZCBSU1ZQIGRhdGEnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZXZlbnRzRGF0YSA9IGF3YWl0IGV2ZW50c1Jlc3BvbnNlLmpzb24oKTtcbiAgICAgIGNvbnN0IGFjdGl2aXRpZXNEYXRhID0gYXdhaXQgYWN0aXZpdGllc1Jlc3BvbnNlLmpzb24oKTtcbiAgICAgIGNvbnN0IHJzdnBzRGF0YSA9IGF3YWl0IHJzdnBzUmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBpZiAoZXZlbnRzRGF0YS5zdWNjZXNzICYmIGFjdGl2aXRpZXNEYXRhLnN1Y2Nlc3MgJiYgcnN2cHNEYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgLy8gTWFwIFJTVlBzIHRvIGV2ZW50cyBhbmQgYWN0aXZpdGllc1xuICAgICAgICBjb25zdCByc3ZwTWFwID0gbmV3IE1hcDxzdHJpbmcsIFJTVlA+KCk7XG4gICAgICAgIHJzdnBzRGF0YS5kYXRhLmZvckVhY2goKHJzdnA6IFJTVlApID0+IHtcbiAgICAgICAgICBpZiAocnN2cC5ldmVudF9pZCkge1xuICAgICAgICAgICAgcnN2cE1hcC5zZXQoYGV2ZW50LSR7cnN2cC5ldmVudF9pZH1gLCByc3ZwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJzdnAuYWN0aXZpdHlfaWQpIHtcbiAgICAgICAgICAgIHJzdnBNYXAuc2V0KGBhY3Rpdml0eS0ke3JzdnAuYWN0aXZpdHlfaWR9YCwgcnN2cCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBldmVudHNXaXRoUlNWUCA9IGV2ZW50c0RhdGEuZGF0YS5tYXAoKGV2ZW50OiBFdmVudCkgPT4gKHtcbiAgICAgICAgICAuLi5ldmVudCxcbiAgICAgICAgICByc3ZwOiByc3ZwTWFwLmdldChgZXZlbnQtJHtldmVudC5pZH1gKSxcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGNvbnN0IGFjdGl2aXRpZXNXaXRoUlNWUCA9IGFjdGl2aXRpZXNEYXRhLmRhdGEubWFwKChhY3Rpdml0eTogQWN0aXZpdHkpID0+ICh7XG4gICAgICAgICAgLi4uYWN0aXZpdHksXG4gICAgICAgICAgcnN2cDogcnN2cE1hcC5nZXQoYGFjdGl2aXR5LSR7YWN0aXZpdHkuaWR9YCksXG4gICAgICAgIH0pKTtcblxuICAgICAgICBzZXRFdmVudHMoZXZlbnRzV2l0aFJTVlApO1xuICAgICAgICBzZXRBY3Rpdml0aWVzKGFjdGl2aXRpZXNXaXRoUlNWUCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBzZXRFcnJvcihlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ0FuIGVycm9yIG9jY3VycmVkJyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzdWJtaXRSU1ZQID0gYXN5bmMgKFxuICAgIHR5cGU6ICdldmVudCcgfCAnYWN0aXZpdHknLFxuICAgIGlkOiBzdHJpbmcsXG4gICAgc3RhdHVzOiAnYXR0ZW5kaW5nJyB8ICdkZWNsaW5lZCcgfCAnbWF5YmUnLFxuICAgIGd1ZXN0Q291bnQ/OiBudW1iZXIsXG4gICAgZGlldGFyeU5vdGVzPzogc3RyaW5nLFxuICAgIHNwZWNpYWxSZXF1aXJlbWVudHM/OiBzdHJpbmdcbiAgKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHNldFN1Ym1pdHRpbmcoYCR7dHlwZX0tJHtpZH1gKTtcbiAgICAgIHNldEVycm9yKG51bGwpO1xuICAgICAgc2V0U3VjY2VzcyhudWxsKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9ndWVzdC9yc3ZwJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBndWVzdF9pZDogZ3Vlc3QuaWQsXG4gICAgICAgICAgW3R5cGUgPT09ICdldmVudCcgPyAnZXZlbnRfaWQnIDogJ2FjdGl2aXR5X2lkJ106IGlkLFxuICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICBndWVzdF9jb3VudDogZ3Vlc3RDb3VudCxcbiAgICAgICAgICBkaWV0YXJ5X25vdGVzOiBkaWV0YXJ5Tm90ZXMsXG4gICAgICAgICAgc3BlY2lhbF9yZXF1aXJlbWVudHM6IHNwZWNpYWxSZXF1aXJlbWVudHMsXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBzZXRFcnJvcihyZXN1bHQuZXJyb3I/Lm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBzdWJtaXQgUlNWUCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNldFN1Y2Nlc3MoJ1JTVlAgc3VibWl0dGVkIHN1Y2Nlc3NmdWxseSEnKTtcbiAgICAgIFxuICAgICAgLy8gUmVsb2FkIGRhdGEgdG8gc2hvdyB1cGRhdGVkIFJTVlBcbiAgICAgIGF3YWl0IGxvYWRSU1ZQRGF0YSgpO1xuICAgICAgXG4gICAgICAvLyBDbGVhciBzdWNjZXNzIG1lc3NhZ2UgYWZ0ZXIgMyBzZWNvbmRzXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHNldFN1Y2Nlc3MobnVsbCksIDMwMDApO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgc2V0RXJyb3IoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdBbiBlcnJvciBvY2N1cnJlZCcpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRTdWJtaXR0aW5nKG51bGwpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBmb3JtYXREYXRlID0gKGRhdGVTdHJpbmc6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyaW5nKTtcbiAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLVVTJywge1xuICAgICAgd2Vla2RheTogJ2xvbmcnLFxuICAgICAgeWVhcjogJ251bWVyaWMnLFxuICAgICAgbW9udGg6ICdsb25nJyxcbiAgICAgIGRheTogJ251bWVyaWMnLFxuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGZvcm1hdFRpbWUgPSAoZGF0ZVN0cmluZzogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHJpbmcpO1xuICAgIHJldHVybiBkYXRlLnRvTG9jYWxlVGltZVN0cmluZygnZW4tVVMnLCB7XG4gICAgICBob3VyOiAnbnVtZXJpYycsXG4gICAgICBtaW51dGU6ICcyLWRpZ2l0JyxcbiAgICAgIGhvdXIxMjogdHJ1ZSxcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBnZXRSU1ZQU3RhdHVzQ29sb3IgPSAoc3RhdHVzPzogc3RyaW5nKSA9PiB7XG4gICAgc3dpdGNoIChzdGF0dXMpIHtcbiAgICAgIGNhc2UgJ2F0dGVuZGluZyc6XG4gICAgICAgIHJldHVybiAnYmctanVuZ2xlLTEwMCB0ZXh0LWp1bmdsZS04MDAgYm9yZGVyLWp1bmdsZS0zMDAnO1xuICAgICAgY2FzZSAnZGVjbGluZWQnOlxuICAgICAgICByZXR1cm4gJ2JnLXNhZ2UtMTAwIHRleHQtc2FnZS04MDAgYm9yZGVyLXNhZ2UtMzAwJztcbiAgICAgIGNhc2UgJ21heWJlJzpcbiAgICAgICAgcmV0dXJuICdiZy1zdW5zZXQtMTAwIHRleHQtc3Vuc2V0LTgwMCBib3JkZXItc3Vuc2V0LTMwMCc7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gJ2JnLXZvbGNhbm8tMTAwIHRleHQtdm9sY2Fuby04MDAgYm9yZGVyLXZvbGNhbm8tMzAwJztcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBiZy1ncmFkaWVudC10by1iciBmcm9tLWp1bmdsZS01MCB2aWEtb2NlYW4tNTAgdG8tc3Vuc2V0LTUwXCI+XG4gICAgICB7LyogSGVhZGVyICovfVxuICAgICAgPGhlYWRlciBjbGFzc05hbWU9XCJiZy13aGl0ZSBzaGFkb3ctc20gYm9yZGVyLWIgYm9yZGVyLXNhZ2UtMjAwXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctN3hsIG14LWF1dG8gcHgtNCBzbTpweC02IGxnOnB4LTggcHktNlwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC0zeGwgZm9udC1ib2xkIHRleHQtanVuZ2xlLTcwMFwiPlJTVlAgTWFuYWdlbWVudDwvaDE+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc2FnZS02MDAgbXQtMVwiPlJlc3BvbmQgdG8gd2VkZGluZyBldmVudHMgYW5kIGFjdGl2aXRpZXM8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgIGhyZWY9XCIvZ3Vlc3QvZGFzaGJvYXJkXCJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1vY2Vhbi02MDAgaG92ZXI6dGV4dC1vY2Vhbi03MDAgZm9udC1tZWRpdW1cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICDihpAgQmFjayB0byBEYXNoYm9hcmRcbiAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2hlYWRlcj5cblxuICAgICAgPG1haW4gY2xhc3NOYW1lPVwibWF4LXctN3hsIG14LWF1dG8gcHgtNCBzbTpweC02IGxnOnB4LTggcHktOFwiPlxuICAgICAgICB7LyogU3VjY2VzcyBNZXNzYWdlICovfVxuICAgICAgICB7c3VjY2VzcyAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1qdW5nbGUtNTAgYm9yZGVyIGJvcmRlci1qdW5nbGUtMjAwIHJvdW5kZWQtbGcgcC00IG1iLTZcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtanVuZ2xlLTgwMFwiPuKckyB7c3VjY2Vzc308L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG5cbiAgICAgICAgey8qIEVycm9yIE1lc3NhZ2UgKi99XG4gICAgICAgIHtlcnJvciAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy12b2xjYW5vLTUwIGJvcmRlciBib3JkZXItdm9sY2Fuby0yMDAgcm91bmRlZC1sZyBwLTQgbWItNlwiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC12b2xjYW5vLTgwMFwiPuKclyB7ZXJyb3J9PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuXG4gICAgICAgIHtsb2FkaW5nID8gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHktMTJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTEyIHctMTIgYm9yZGVyLWItMiBib3JkZXItanVuZ2xlLTYwMFwiPjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS04XCI+XG4gICAgICAgICAgICB7LyogRXZlbnRzIFNlY3Rpb24gKi99XG4gICAgICAgICAgICA8c2VjdGlvbj5cbiAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LWp1bmdsZS03MDAgbWItNFwiPldlZGRpbmcgRXZlbnRzPC9oMj5cbiAgICAgICAgICAgICAge2V2ZW50cy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLWxnIHNoYWRvdy1tZCBwLTggdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc2FnZS02MDBcIj5ObyBldmVudHMgYXZhaWxhYmxlIGF0IHRoaXMgdGltZS48L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICAgICAgICAgIHtldmVudHMubWFwKChldmVudCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8UlNWUENhcmRcbiAgICAgICAgICAgICAgICAgICAgICBrZXk9e2V2ZW50LmlkfVxuICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJldmVudFwiXG4gICAgICAgICAgICAgICAgICAgICAgaXRlbT17ZXZlbnR9XG4gICAgICAgICAgICAgICAgICAgICAgcnN2cD17ZXZlbnQucnN2cH1cbiAgICAgICAgICAgICAgICAgICAgICBvblN1Ym1pdD17c3VibWl0UlNWUH1cbiAgICAgICAgICAgICAgICAgICAgICBzdWJtaXR0aW5nPXtzdWJtaXR0aW5nID09PSBgZXZlbnQtJHtldmVudC5pZH1gfVxuICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdERhdGU9e2Zvcm1hdERhdGV9XG4gICAgICAgICAgICAgICAgICAgICAgZm9ybWF0VGltZT17Zm9ybWF0VGltZX1cbiAgICAgICAgICAgICAgICAgICAgICBnZXRSU1ZQU3RhdHVzQ29sb3I9e2dldFJTVlBTdGF0dXNDb2xvcn1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9zZWN0aW9uPlxuXG4gICAgICAgICAgICB7LyogQWN0aXZpdGllcyBTZWN0aW9uICovfVxuICAgICAgICAgICAgPHNlY3Rpb24+XG4gICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1qdW5nbGUtNzAwIG1iLTRcIj5BY3Rpdml0aWVzPC9oMj5cbiAgICAgICAgICAgICAge2FjdGl2aXRpZXMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3ctbWQgcC04IHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNhZ2UtNjAwXCI+Tm8gYWN0aXZpdGllcyBhdmFpbGFibGUgYXQgdGhpcyB0aW1lLjwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNFwiPlxuICAgICAgICAgICAgICAgICAge2FjdGl2aXRpZXMubWFwKChhY3Rpdml0eSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8UlNWUENhcmRcbiAgICAgICAgICAgICAgICAgICAgICBrZXk9e2FjdGl2aXR5LmlkfVxuICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJhY3Rpdml0eVwiXG4gICAgICAgICAgICAgICAgICAgICAgaXRlbT17YWN0aXZpdHl9XG4gICAgICAgICAgICAgICAgICAgICAgcnN2cD17YWN0aXZpdHkucnN2cH1cbiAgICAgICAgICAgICAgICAgICAgICBvblN1Ym1pdD17c3VibWl0UlNWUH1cbiAgICAgICAgICAgICAgICAgICAgICBzdWJtaXR0aW5nPXtzdWJtaXR0aW5nID09PSBgYWN0aXZpdHktJHthY3Rpdml0eS5pZH1gfVxuICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdERhdGU9e2Zvcm1hdERhdGV9XG4gICAgICAgICAgICAgICAgICAgICAgZm9ybWF0VGltZT17Zm9ybWF0VGltZX1cbiAgICAgICAgICAgICAgICAgICAgICBnZXRSU1ZQU3RhdHVzQ29sb3I9e2dldFJTVlBTdGF0dXNDb2xvcn1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9tYWluPlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5pbnRlcmZhY2UgUlNWUENhcmRQcm9wcyB7XG4gIHR5cGU6ICdldmVudCcgfCAnYWN0aXZpdHknO1xuICBpdGVtOiBFdmVudFdpdGhSU1ZQIHwgQWN0aXZpdHlXaXRoUlNWUDtcbiAgcnN2cD86IFJTVlA7XG4gIG9uU3VibWl0OiAoXG4gICAgdHlwZTogJ2V2ZW50JyB8ICdhY3Rpdml0eScsXG4gICAgaWQ6IHN0cmluZyxcbiAgICBzdGF0dXM6ICdhdHRlbmRpbmcnIHwgJ2RlY2xpbmVkJyB8ICdtYXliZScsXG4gICAgZ3Vlc3RDb3VudD86IG51bWJlcixcbiAgICBkaWV0YXJ5Tm90ZXM/OiBzdHJpbmcsXG4gICAgc3BlY2lhbFJlcXVpcmVtZW50cz86IHN0cmluZ1xuICApID0+IFByb21pc2U8dm9pZD47XG4gIHN1Ym1pdHRpbmc6IGJvb2xlYW47XG4gIGZvcm1hdERhdGU6IChkYXRlOiBzdHJpbmcpID0+IHN0cmluZztcbiAgZm9ybWF0VGltZTogKGRhdGU6IHN0cmluZykgPT4gc3RyaW5nO1xuICBnZXRSU1ZQU3RhdHVzQ29sb3I6IChzdGF0dXM/OiBzdHJpbmcpID0+IHN0cmluZztcbn1cblxuZnVuY3Rpb24gUlNWUENhcmQoe1xuICB0eXBlLFxuICBpdGVtLFxuICByc3ZwLFxuICBvblN1Ym1pdCxcbiAgc3VibWl0dGluZyxcbiAgZm9ybWF0RGF0ZSxcbiAgZm9ybWF0VGltZSxcbiAgZ2V0UlNWUFN0YXR1c0NvbG9yLFxufTogUlNWUENhcmRQcm9wcykge1xuICBjb25zdCBbc2hvd0Zvcm0sIHNldFNob3dGb3JtXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3N0YXR1cywgc2V0U3RhdHVzXSA9IHVzZVN0YXRlPCdhdHRlbmRpbmcnIHwgJ2RlY2xpbmVkJyB8ICdtYXliZSc+KFxuICAgIHJzdnA/LnN0YXR1cyA9PT0gJ2F0dGVuZGluZycgfHwgcnN2cD8uc3RhdHVzID09PSAnZGVjbGluZWQnIHx8IHJzdnA/LnN0YXR1cyA9PT0gJ21heWJlJ1xuICAgICAgPyByc3ZwLnN0YXR1c1xuICAgICAgOiAnYXR0ZW5kaW5nJ1xuICApO1xuICBjb25zdCBbZ3Vlc3RDb3VudCwgc2V0R3Vlc3RDb3VudF0gPSB1c2VTdGF0ZShyc3ZwPy5ndWVzdF9jb3VudD8udG9TdHJpbmcoKSB8fCAnMScpO1xuICBjb25zdCBbZGlldGFyeU5vdGVzLCBzZXREaWV0YXJ5Tm90ZXNdID0gdXNlU3RhdGUocnN2cD8uZGlldGFyeV9ub3RlcyB8fCAnJyk7XG4gIGNvbnN0IFtzcGVjaWFsUmVxdWlyZW1lbnRzLCBzZXRTcGVjaWFsUmVxdWlyZW1lbnRzXSA9IHVzZVN0YXRlKFxuICAgIHJzdnA/LnNwZWNpYWxfcmVxdWlyZW1lbnRzIHx8ICcnXG4gICk7XG5cbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBhd2FpdCBvblN1Ym1pdChcbiAgICAgIHR5cGUsXG4gICAgICBpdGVtLmlkLFxuICAgICAgc3RhdHVzLFxuICAgICAgcGFyc2VJbnQoZ3Vlc3RDb3VudCkgfHwgdW5kZWZpbmVkLFxuICAgICAgZGlldGFyeU5vdGVzIHx8IHVuZGVmaW5lZCxcbiAgICAgIHNwZWNpYWxSZXF1aXJlbWVudHMgfHwgdW5kZWZpbmVkXG4gICAgKTtcbiAgICBzZXRTaG93Rm9ybShmYWxzZSk7XG4gIH07XG5cbiAgY29uc3QgZGF0ZUZpZWxkID0gJ3N0YXJ0X2RhdGUnIGluIGl0ZW0gPyBpdGVtLnN0YXJ0X2RhdGUgOiBpdGVtLnN0YXJ0X3RpbWU7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93LW1kIGJvcmRlciBib3JkZXItc2FnZS0yMDAgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNlwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtc3RhcnQganVzdGlmeS1iZXR3ZWVuIG1iLTRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMVwiPlxuICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1ib2xkIHRleHQtanVuZ2xlLTcwMFwiPntpdGVtLm5hbWV9PC9oMz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiBzcGFjZS15LTFcIj5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zYWdlLTcwMCB0ZXh0LXNtXCI+8J+ThSB7Zm9ybWF0RGF0ZShkYXRlRmllbGQpfTwvcD5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zYWdlLTcwMCB0ZXh0LXNtXCI+8J+VkCB7Zm9ybWF0VGltZShkYXRlRmllbGQpfTwvcD5cbiAgICAgICAgICAgICAge2l0ZW0uZGVzY3JpcHRpb24gJiYgKFxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc2FnZS02MDAgdGV4dC1zbSBtdC0yXCI+e2l0ZW0uZGVzY3JpcHRpb259PC9wPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAge3JzdnAgJiYgKFxuICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgaW5saW5lLWJsb2NrIHB4LTMgcHktMSByb3VuZGVkLWZ1bGwgdGV4dC1zbSBmb250LW1lZGl1bSBib3JkZXIgJHtnZXRSU1ZQU3RhdHVzQ29sb3IoXG4gICAgICAgICAgICAgICAgcnN2cC5zdGF0dXNcbiAgICAgICAgICAgICAgKX1gfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7cnN2cC5zdGF0dXMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyByc3ZwLnN0YXR1cy5zbGljZSgxKX1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7IXNob3dGb3JtID8gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0zXCI+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dGb3JtKHRydWUpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1qdW5nbGUtNjAwIGhvdmVyOmJnLWp1bmdsZS03MDAgdGV4dC13aGl0ZSBmb250LW1lZGl1bSBweS0yIHB4LTYgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtyc3ZwID8gJ1VwZGF0ZSBSU1ZQJyA6ICdSZXNwb25kIHRvIFJTVlAnfVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICB7cnN2cCAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXNhZ2UtNjAwXCI+XG4gICAgICAgICAgICAgICAgUmVzcG9uZGVkIG9uIHtuZXcgRGF0ZShyc3ZwLnJlc3BvbmRlZF9hdCB8fCByc3ZwLmNyZWF0ZWRfYXQpLnRvTG9jYWxlRGF0ZVN0cmluZygpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0gY2xhc3NOYW1lPVwic3BhY2UteS00IG10LTQgcHQtNCBib3JkZXItdCBib3JkZXItc2FnZS0yMDBcIj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtc2FnZS03MDAgbWItMlwiPlxuICAgICAgICAgICAgICAgIFlvdXIgUmVzcG9uc2VcbiAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTNcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFN0YXR1cygnYXR0ZW5kaW5nJyl9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BweC00IHB5LTIgcm91bmRlZC1sZyBmb250LW1lZGl1bSB0cmFuc2l0aW9uLWNvbG9ycyAke1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPT09ICdhdHRlbmRpbmcnXG4gICAgICAgICAgICAgICAgICAgICAgPyAnYmctanVuZ2xlLTYwMCB0ZXh0LXdoaXRlJ1xuICAgICAgICAgICAgICAgICAgICAgIDogJ2JnLXNhZ2UtMTAwIHRleHQtc2FnZS03MDAgaG92ZXI6Ymctc2FnZS0yMDAnXG4gICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBBdHRlbmRpbmdcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFN0YXR1cygnbWF5YmUnKX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHB4LTQgcHktMiByb3VuZGVkLWxnIGZvbnQtbWVkaXVtIHRyYW5zaXRpb24tY29sb3JzICR7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9PT0gJ21heWJlJ1xuICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLXN1bnNldC02MDAgdGV4dC13aGl0ZSdcbiAgICAgICAgICAgICAgICAgICAgICA6ICdiZy1zYWdlLTEwMCB0ZXh0LXNhZ2UtNzAwIGhvdmVyOmJnLXNhZ2UtMjAwJ1xuICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgTWF5YmVcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFN0YXR1cygnZGVjbGluZWQnKX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHB4LTQgcHktMiByb3VuZGVkLWxnIGZvbnQtbWVkaXVtIHRyYW5zaXRpb24tY29sb3JzICR7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9PT0gJ2RlY2xpbmVkJ1xuICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLXNhZ2UtNjAwIHRleHQtd2hpdGUnXG4gICAgICAgICAgICAgICAgICAgICAgOiAnYmctc2FnZS0xMDAgdGV4dC1zYWdlLTcwMCBob3ZlcjpiZy1zYWdlLTIwMCdcbiAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIERlY2xpbmVcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgeyhzdGF0dXMgPT09ICdhdHRlbmRpbmcnIHx8IHN0YXR1cyA9PT0gJ21heWJlJykgJiYgKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LXNhZ2UtNzAwIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgTnVtYmVyIG9mIEd1ZXN0c1xuICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgbWluPVwiMVwiXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtndWVzdENvdW50fVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEd1ZXN0Q291bnQoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgcHgtMyBweS0yIGJvcmRlciBib3JkZXItc2FnZS0zMDAgcm91bmRlZC1sZyBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1qdW5nbGUtNTAwIGZvY3VzOmJvcmRlci1qdW5nbGUtNTAwXCJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1zYWdlLTcwMCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgIERpZXRhcnkgUmVzdHJpY3Rpb25zXG4gICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtkaWV0YXJ5Tm90ZXN9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0RGlldGFyeU5vdGVzKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgcm93cz17Mn1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTMgcHktMiBib3JkZXIgYm9yZGVyLXNhZ2UtMzAwIHJvdW5kZWQtbGcgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctanVuZ2xlLTUwMCBmb2N1czpib3JkZXItanVuZ2xlLTUwMFwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQW55IGRpZXRhcnkgcmVzdHJpY3Rpb25zIG9yIGFsbGVyZ2llcy4uLlwiXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtc2FnZS03MDAgbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICBTcGVjaWFsIFJlcXVpcmVtZW50c1xuICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17c3BlY2lhbFJlcXVpcmVtZW50c31cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRTcGVjaWFsUmVxdWlyZW1lbnRzKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgcm93cz17Mn1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTMgcHktMiBib3JkZXIgYm9yZGVyLXNhZ2UtMzAwIHJvdW5kZWQtbGcgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctanVuZ2xlLTUwMCBmb2N1czpib3JkZXItanVuZ2xlLTUwMFwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQW55IHNwZWNpYWwgcmVxdWlyZW1lbnRzIG9yIG5vdGVzLi4uXCJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTMgcHQtMlwiPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3N1Ym1pdHRpbmd9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctanVuZ2xlLTYwMCBob3ZlcjpiZy1qdW5nbGUtNzAwIGRpc2FibGVkOmJnLXNhZ2UtNDAwIHRleHQtd2hpdGUgZm9udC1tZWRpdW0gcHktMiBweC02IHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3N1Ym1pdHRpbmcgPyAnU3VibWl0dGluZy4uLicgOiAnU3VibWl0IFJTVlAnfVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dGb3JtKGZhbHNlKX1cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17c3VibWl0dGluZ31cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1zYWdlLTIwMCBob3ZlcjpiZy1zYWdlLTMwMCBkaXNhYmxlZDpiZy1zYWdlLTEwMCB0ZXh0LXNhZ2UtNzAwIGZvbnQtbWVkaXVtIHB5LTIgcHgtNiByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIENhbmNlbFxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbIlJTVlBNYW5hZ2VyIiwiZ3Vlc3QiLCJldmVudHMiLCJzZXRFdmVudHMiLCJ1c2VTdGF0ZSIsImFjdGl2aXRpZXMiLCJzZXRBY3Rpdml0aWVzIiwibG9hZGluZyIsInNldExvYWRpbmciLCJlcnJvciIsInNldEVycm9yIiwic3VibWl0dGluZyIsInNldFN1Ym1pdHRpbmciLCJzdWNjZXNzIiwic2V0U3VjY2VzcyIsInVzZUVmZmVjdCIsImxvYWRSU1ZQRGF0YSIsImlkIiwiZXZlbnRzUmVzcG9uc2UiLCJhY3Rpdml0aWVzUmVzcG9uc2UiLCJyc3Zwc1Jlc3BvbnNlIiwiUHJvbWlzZSIsImFsbCIsImZldGNoIiwib2siLCJFcnJvciIsImV2ZW50c0RhdGEiLCJqc29uIiwiYWN0aXZpdGllc0RhdGEiLCJyc3Zwc0RhdGEiLCJyc3ZwTWFwIiwiTWFwIiwiZGF0YSIsImZvckVhY2giLCJyc3ZwIiwiZXZlbnRfaWQiLCJzZXQiLCJhY3Rpdml0eV9pZCIsImV2ZW50c1dpdGhSU1ZQIiwibWFwIiwiZXZlbnQiLCJnZXQiLCJhY3Rpdml0aWVzV2l0aFJTVlAiLCJhY3Rpdml0eSIsImVyciIsIm1lc3NhZ2UiLCJzdWJtaXRSU1ZQIiwidHlwZSIsInN0YXR1cyIsImd1ZXN0Q291bnQiLCJkaWV0YXJ5Tm90ZXMiLCJzcGVjaWFsUmVxdWlyZW1lbnRzIiwicmVzcG9uc2UiLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJndWVzdF9pZCIsImd1ZXN0X2NvdW50IiwiZGlldGFyeV9ub3RlcyIsInNwZWNpYWxfcmVxdWlyZW1lbnRzIiwicmVzdWx0Iiwic2V0VGltZW91dCIsImZvcm1hdERhdGUiLCJkYXRlU3RyaW5nIiwiZGF0ZSIsIkRhdGUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJ3ZWVrZGF5IiwieWVhciIsIm1vbnRoIiwiZGF5IiwiZm9ybWF0VGltZSIsInRvTG9jYWxlVGltZVN0cmluZyIsImhvdXIiLCJtaW51dGUiLCJob3VyMTIiLCJnZXRSU1ZQU3RhdHVzQ29sb3IiLCJkaXYiLCJjbGFzc05hbWUiLCJoZWFkZXIiLCJoMSIsInAiLCJhIiwiaHJlZiIsIm1haW4iLCJzZWN0aW9uIiwiaDIiLCJsZW5ndGgiLCJSU1ZQQ2FyZCIsIml0ZW0iLCJvblN1Ym1pdCIsInNob3dGb3JtIiwic2V0U2hvd0Zvcm0iLCJzZXRTdGF0dXMiLCJzZXRHdWVzdENvdW50IiwidG9TdHJpbmciLCJzZXREaWV0YXJ5Tm90ZXMiLCJzZXRTcGVjaWFsUmVxdWlyZW1lbnRzIiwiaGFuZGxlU3VibWl0IiwiZSIsInByZXZlbnREZWZhdWx0IiwicGFyc2VJbnQiLCJ1bmRlZmluZWQiLCJkYXRlRmllbGQiLCJzdGFydF9kYXRlIiwic3RhcnRfdGltZSIsImgzIiwibmFtZSIsImRlc2NyaXB0aW9uIiwic3BhbiIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJidXR0b24iLCJvbkNsaWNrIiwicmVzcG9uZGVkX2F0IiwiY3JlYXRlZF9hdCIsImZvcm0iLCJsYWJlbCIsImlucHV0IiwibWluIiwidmFsdWUiLCJvbkNoYW5nZSIsInRhcmdldCIsInRleHRhcmVhIiwicm93cyIsInBsYWNlaG9sZGVyIiwiZGlzYWJsZWQiXSwibWFwcGluZ3MiOiJBQUFBOzs7OzsrQkE0QmdCQTs7O2VBQUFBOzs7O3VCQTFCb0I7QUEwQjdCLFNBQVNBLFlBQVksRUFBRUMsS0FBSyxFQUFvQjtJQUNyRCxNQUFNLENBQUNDLFFBQVFDLFVBQVUsR0FBR0MsSUFBQUEsZUFBUSxFQUFrQixFQUFFO0lBQ3hELE1BQU0sQ0FBQ0MsWUFBWUMsY0FBYyxHQUFHRixJQUFBQSxlQUFRLEVBQXFCLEVBQUU7SUFDbkUsTUFBTSxDQUFDRyxTQUFTQyxXQUFXLEdBQUdKLElBQUFBLGVBQVEsRUFBQztJQUN2QyxNQUFNLENBQUNLLE9BQU9DLFNBQVMsR0FBR04sSUFBQUEsZUFBUSxFQUFnQjtJQUNsRCxNQUFNLENBQUNPLFlBQVlDLGNBQWMsR0FBR1IsSUFBQUEsZUFBUSxFQUFnQjtJQUM1RCxNQUFNLENBQUNTLFNBQVNDLFdBQVcsR0FBR1YsSUFBQUEsZUFBUSxFQUFnQjtJQUV0RFcsSUFBQUEsZ0JBQVMsRUFBQztRQUNSQztJQUNGLEdBQUc7UUFBQ2YsTUFBTWdCLEVBQUU7S0FBQztJQUViLE1BQU1ELGVBQWU7UUFDbkIsSUFBSTtZQUNGUixXQUFXO1lBQ1hFLFNBQVM7WUFFVCxNQUFNLENBQUNRLGdCQUFnQkMsb0JBQW9CQyxjQUFjLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO2dCQUM1RUMsTUFBTTtnQkFDTkEsTUFBTTtnQkFDTkEsTUFBTTthQUNQO1lBRUQs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