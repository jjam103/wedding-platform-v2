{"version":3,"names":["cov_21fwfn6bmg","actualCoverage","s","useContentPages","f","data","setData","_react","useState","loading","setLoading","error","setError","refetch","useCallback","response","fetch","result","json","b","ok","success","Error","message","items","err","errorObj","console","create","pageData","method","headers","body","JSON","stringify","prev","errorMsg","update","id","map","page","remove","filter","useEffect"],"sources":["/Users/jaron/Desktop/wedding-platform-v2/hooks/useContentPages.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport type { ContentPage } from '@/schemas/cmsSchemas';\n\ninterface UseContentPagesReturn {\n  data: ContentPage[];\n  loading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n  create: (data: Partial<ContentPage>) => Promise<{ success: boolean; data?: ContentPage; error?: string }>;\n  update: (id: string, data: Partial<ContentPage>) => Promise<{ success: boolean; data?: ContentPage; error?: string }>;\n  remove: (id: string) => Promise<{ success: boolean; error?: string }>;\n}\n\n/**\n * Custom hook for managing content pages\n * \n * Provides:\n * - Data fetching with loading and error states\n * - CRUD operations (create, update, delete)\n * - Automatic refetch after mutations\n * - Optimistic updates\n */\nexport function useContentPages(): UseContentPagesReturn {\n  const [data, setData] = useState<ContentPage[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n\n  const refetch = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch('/api/admin/content-pages');\n      const result = await response.json();\n\n      if (!response.ok || !result.success) {\n        throw new Error(result.error?.message || 'Failed to fetch content pages');\n      }\n\n      setData(result.data.items || result.data || []);\n    } catch (err) {\n      const errorObj = err instanceof Error ? err : new Error('Unknown error');\n      setError(errorObj);\n      console.error('Failed to fetch content pages:', errorObj);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  const create = useCallback(async (pageData: Partial<ContentPage>) => {\n    try {\n      const response = await fetch('/api/admin/content-pages', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(pageData),\n      });\n\n      const result = await response.json();\n\n      if (!response.ok || !result.success) {\n        return {\n          success: false,\n          error: result.error?.message || 'Failed to create content page',\n        };\n      }\n\n      // Optimistic update\n      setData((prev) => [...prev, result.data]);\n\n      return { success: true, data: result.data };\n    } catch (err) {\n      const errorMsg = err instanceof Error ? err.message : 'Unknown error';\n      console.error('Failed to create content page:', err);\n      return { success: false, error: errorMsg };\n    }\n  }, []);\n\n  const update = useCallback(async (id: string, pageData: Partial<ContentPage>) => {\n    try {\n      const response = await fetch(`/api/admin/content-pages/${id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(pageData),\n      });\n\n      const result = await response.json();\n\n      if (!response.ok || !result.success) {\n        return {\n          success: false,\n          error: result.error?.message || 'Failed to update content page',\n        };\n      }\n\n      // Optimistic update\n      setData((prev) =>\n        prev.map((page) => (page.id === id ? { ...page, ...result.data } : page))\n      );\n\n      return { success: true, data: result.data };\n    } catch (err) {\n      const errorMsg = err instanceof Error ? err.message : 'Unknown error';\n      console.error('Failed to update content page:', err);\n      return { success: false, error: errorMsg };\n    }\n  }, []);\n\n  const remove = useCallback(async (id: string) => {\n    try {\n      const response = await fetch(`/api/admin/content-pages/${id}`, {\n        method: 'DELETE',\n      });\n\n      const result = await response.json();\n\n      if (!response.ok || !result.success) {\n        return {\n          success: false,\n          error: result.error?.message || 'Failed to delete content page',\n        };\n      }\n\n      // Optimistic update\n      setData((prev) => prev.filter((page) => page.id !== id));\n\n      return { success: true };\n    } catch (err) {\n      const errorMsg = err instanceof Error ? err.message : 'Unknown error';\n      console.error('Failed to delete content page:', err);\n      return { success: false, error: errorMsg };\n    }\n  }, []);\n\n  useEffect(() => {\n    refetch();\n  }, [refetch]);\n\n  return {\n    data,\n    loading,\n    error,\n    refetch,\n    create,\n    update,\n    remove,\n  };\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}