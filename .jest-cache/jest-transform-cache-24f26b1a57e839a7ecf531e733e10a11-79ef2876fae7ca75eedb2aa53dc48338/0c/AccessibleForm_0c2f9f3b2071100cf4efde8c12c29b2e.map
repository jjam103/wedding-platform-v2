{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/ui/AccessibleForm.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useId, type ReactNode, type FormEvent } from 'react';\nimport { generateAriaLabel, announceToScreenReader } from '@/utils/accessibility';\n\ninterface FormFieldProps {\n  label: string;\n  name: string;\n  type?: 'text' | 'email' | 'password' | 'tel' | 'number' | 'date' | 'textarea' | 'select';\n  value: string;\n  onChange: (value: string) => void;\n  required?: boolean;\n  error?: string;\n  helpText?: string;\n  placeholder?: string;\n  options?: Array<{ value: string; label: string }>;\n  disabled?: boolean;\n  autoComplete?: string;\n}\n\n/**\n * Accessible Form Field Component\n * \n * WCAG 2.1 AA compliant form field with:\n * - Proper ARIA labels\n * - Error announcements\n * - Keyboard navigation\n * - Screen reader support\n */\nexport function AccessibleFormField({\n  label,\n  name,\n  type = 'text',\n  value,\n  onChange,\n  required = false,\n  error,\n  helpText,\n  placeholder,\n  options,\n  disabled = false,\n  autoComplete,\n}: FormFieldProps) {\n  const fieldId = useId();\n  const errorId = `${fieldId}-error`;\n  const helpId = `${fieldId}-help`;\n\n  const ariaLabel = generateAriaLabel(label, required, error);\n  const ariaDescribedBy = [\n    error ? errorId : null,\n    helpText ? helpId : null,\n  ].filter(Boolean).join(' ');\n\n  const baseInputClasses = `form-input-mobile w-full ${\n    error ? 'border-volcano-500 focus:ring-volcano-500' : ''\n  } ${disabled ? 'bg-sage-100 cursor-not-allowed' : ''}`;\n\n  const renderInput = () => {\n    if (type === 'textarea') {\n      return (\n        <textarea\n          id={fieldId}\n          name={name}\n          value={value}\n          onChange={(e) => onChange(e.target.value)}\n          required={required}\n          disabled={disabled}\n          placeholder={placeholder}\n          aria-label={ariaLabel}\n          aria-describedby={ariaDescribedBy || undefined}\n          aria-invalid={error ? 'true' : 'false'}\n          aria-required={required ? 'true' : 'false'}\n          className={`${baseInputClasses} min-h-[120px]`}\n          rows={4}\n        />\n      );\n    }\n\n    if (type === 'select' && options) {\n      return (\n        <select\n          id={fieldId}\n          name={name}\n          value={value}\n          onChange={(e) => onChange(e.target.value)}\n          required={required}\n          disabled={disabled}\n          aria-label={ariaLabel}\n          aria-describedby={ariaDescribedBy || undefined}\n          aria-invalid={error ? 'true' : 'false'}\n          aria-required={required ? 'true' : 'false'}\n          className={baseInputClasses}\n        >\n          <option value=\"\">Select {label}</option>\n          {options.map((option) => (\n            <option key={option.value} value={option.value}>\n              {option.label}\n            </option>\n          ))}\n        </select>\n      );\n    }\n\n    return (\n      <input\n        id={fieldId}\n        name={name}\n        type={type}\n        value={value}\n        onChange={(e) => onChange(e.target.value)}\n        required={required}\n        disabled={disabled}\n        placeholder={placeholder}\n        autoComplete={autoComplete}\n        aria-label={ariaLabel}\n        aria-describedby={ariaDescribedBy || undefined}\n        aria-invalid={error ? 'true' : 'false'}\n        aria-required={required ? 'true' : 'false'}\n        className={baseInputClasses}\n      />\n    );\n  };\n\n  return (\n    <div className=\"mb-4\">\n      <label htmlFor={fieldId} className=\"block text-sm font-medium text-sage-900 mb-2\">\n        {label}\n        {required && <span className=\"text-volcano-500 ml-1\" aria-label=\"required\">*</span>}\n      </label>\n\n      {renderInput()}\n\n      {helpText && (\n        <p id={helpId} className=\"mt-2 text-sm text-sage-600\">\n          {helpText}\n        </p>\n      )}\n\n      {error && (\n        <div\n          id={errorId}\n          role=\"alert\"\n          aria-live=\"polite\"\n          className=\"mt-2 text-sm text-volcano-700 flex items-start space-x-1\"\n        >\n          <span aria-hidden=\"true\">‚ùå</span>\n          <span>{error}</span>\n        </div>\n      )}\n    </div>\n  );\n}\n\ninterface AccessibleFormProps {\n  children: ReactNode;\n  onSubmit: (e: FormEvent) => void;\n  title?: string;\n  description?: string;\n  submitLabel?: string;\n  cancelLabel?: string;\n  onCancel?: () => void;\n  isSubmitting?: boolean;\n  className?: string;\n}\n\n/**\n * Accessible Form Component\n * \n * WCAG 2.1 AA compliant form with:\n * - Proper form structure\n * - Submit/cancel actions\n * - Loading states\n * - Error handling\n */\nexport function AccessibleForm({\n  children,\n  onSubmit,\n  title,\n  description,\n  submitLabel = 'Submit',\n  cancelLabel = 'Cancel',\n  onCancel,\n  isSubmitting = false,\n  className = '',\n}: AccessibleFormProps) {\n  const formId = useId();\n  const [submitAttempted, setSubmitAttempted] = useState(false);\n\n  const handleSubmit = (e: FormEvent) => {\n    e.preventDefault();\n    setSubmitAttempted(true);\n    \n    // Announce form submission to screen readers\n    announceToScreenReader('Form submitted', 'polite');\n    \n    onSubmit(e);\n  };\n\n  return (\n    <form\n      id={formId}\n      onSubmit={handleSubmit}\n      className={`space-y-6 ${className}`}\n      noValidate\n      aria-label={title}\n    >\n      {title && (\n        <div className=\"mb-6\">\n          <h2 className=\"text-responsive-lg font-semibold text-sage-900\">{title}</h2>\n          {description && (\n            <p className=\"mt-2 text-sm text-sage-600\">{description}</p>\n          )}\n        </div>\n      )}\n\n      <fieldset disabled={isSubmitting} className=\"space-y-4\">\n        <legend className=\"sr-only\">{title || 'Form fields'}</legend>\n        {children}\n      </fieldset>\n\n      <div className=\"flex flex-col sm:flex-row gap-3 pt-4\">\n        <button\n          type=\"submit\"\n          disabled={isSubmitting}\n          className=\"btn-primary-mobile flex-1 sm:flex-initial\"\n          aria-busy={isSubmitting}\n        >\n          {isSubmitting ? (\n            <>\n              <span className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2\" />\n              <span>Submitting...</span>\n            </>\n          ) : (\n            submitLabel\n          )}\n        </button>\n\n        {onCancel && (\n          <button\n            type=\"button\"\n            onClick={onCancel}\n            disabled={isSubmitting}\n            className=\"btn-secondary-mobile flex-1 sm:flex-initial\"\n          >\n            {cancelLabel}\n          </button>\n        )}\n      </div>\n\n      {submitAttempted && (\n        <div role=\"status\" aria-live=\"polite\" className=\"sr-only\">\n          Form submission in progress\n        </div>\n      )}\n    </form>\n  );\n}\n"],"names":["AccessibleForm","AccessibleFormField","label","name","type","value","onChange","required","error","helpText","placeholder","options","disabled","autoComplete","fieldId","useId","errorId","helpId","ariaLabel","generateAriaLabel","ariaDescribedBy","filter","Boolean","join","baseInputClasses","renderInput","textarea","id","e","target","aria-label","aria-describedby","undefined","aria-invalid","aria-required","className","rows","select","option","map","input","div","htmlFor","span","p","role","aria-live","aria-hidden","children","onSubmit","title","description","submitLabel","cancelLabel","onCancel","isSubmitting","formId","submitAttempted","setSubmitAttempted","useState","handleSubmit","preventDefault","announceToScreenReader","form","noValidate","h2","fieldset","legend","button","aria-busy","onClick"],"mappings":"AAAA;;;;;;;;;;;;QA8KgBA;eAAAA;;QAjJAC;eAAAA;;;;uBA3BgD;+BACN;AA0BnD,SAASA,oBAAoB,EAClCC,KAAK,EACLC,IAAI,EACJC,OAAO,MAAM,EACbC,KAAK,EACLC,QAAQ,EACRC,WAAW,KAAK,EAChBC,KAAK,EACLC,QAAQ,EACRC,WAAW,EACXC,OAAO,EACPC,WAAW,KAAK,EAChBC,YAAY,EACG;IACf,MAAMC,UAAUC,IAAAA,YAAK;IACrB,MAAMC,UAAU,GAAGF,QAAQ,MAAM,CAAC;IAClC,MAAMG,SAAS,GAAGH,QAAQ,KAAK,CAAC;IAEhC,MAAMI,YAAYC,IAAAA,gCAAiB,EAACjB,OAAOK,UAAUC;IACrD,MAAMY,kBAAkB;QACtBZ,QAAQQ,UAAU;QAClBP,WAAWQ,SAAS;KACrB,CAACI,MAAM,CAACC,SAASC,IAAI,CAAC;IAEvB,MAAMC,mBAAmB,CAAC,yBAAyB,EACjDhB,QAAQ,8CAA8C,GACvD,CAAC,EAAEI,WAAW,mCAAmC,IAAI;IAEtD,MAAMa,cAAc;QAClB,IAAIrB,SAAS,YAAY;YACvB,qBACE,qBAACsB;gBACCC,IAAIb;gBACJX,MAAMA;gBACNE,OAAOA;gBACPC,UAAU,CAACsB,IAAMtB,SAASsB,EAAEC,MAAM,CAACxB,KAAK;gBACxCE,UAAUA;gBACVK,UAAUA;gBACVF,aAAaA;gBACboB,cAAYZ;gBACZa,oBAAkBX,mBAAmBY;gBACrCC,gBAAczB,QAAQ,SAAS;gBAC/B0B,iBAAe3B,WAAW,SAAS;gBACnC4B,WAAW,GAAGX,iBAAiB,cAAc,CAAC;gBAC9CY,MAAM;;QAGZ;QAEA,IAAIhC,SAAS,YAAYO,SAAS;YAChC,qBACE,sBAAC0B;gBACCV,IAAIb;gBACJX,MAAMA;gBACNE,OAAOA;gBACPC,UAAU,CAACsB,IAAMtB,SAASsB,EAAEC,MAAM,CAACxB,KAAK;gBACxCE,UAAUA;gBACVK,UAAUA;gBACVkB,cAAYZ;gBACZa,oBAAkBX,mBAAmBY;gBACrCC,gBAAczB,QAAQ,SAAS;gBAC/B0B,iBAAe3B,WAAW,SAAS;gBACnC4B,WAAWX;;kCAEX,sBAACc;wBAAOjC,OAAM;;4BAAG;4BAAQH;;;oBACxBS,QAAQ4B,GAAG,CAAC,CAACD,uBACZ,qBAACA;4BAA0BjC,OAAOiC,OAAOjC,KAAK;sCAC3CiC,OAAOpC,KAAK;2BADFoC,OAAOjC,KAAK;;;QAMjC;QAEA,qBACE,qBAACmC;YACCb,IAAIb;YACJX,MAAMA;YACNC,MAAMA;YACNC,OAAOA;YACPC,UAAU,CAACsB,IAAMtB,SAASsB,EAAEC,MAAM,CAACxB,KAAK;YACxCE,UAAUA;YACVK,UAAUA;YACVF,aAAaA;YACbG,cAAcA;YACdiB,cAAYZ;YACZa,oBAAkBX,mBAAmBY;YACrCC,gBAAczB,QAAQ,SAAS;YAC/B0B,iBAAe3B,WAAW,SAAS;YACnC4B,WAAWX;;IAGjB;IAEA,qBACE,sBAACiB;QAAIN,WAAU;;0BACb,sBAACjC;gBAAMwC,SAAS5B;gBAASqB,WAAU;;oBAChCjC;oBACAK,0BAAY,qBAACoC;wBAAKR,WAAU;wBAAwBL,cAAW;kCAAW;;;;YAG5EL;YAEAhB,0BACC,qBAACmC;gBAAEjB,IAAIV;gBAAQkB,WAAU;0BACtB1B;;YAIJD,uBACC,sBAACiC;gBACCd,IAAIX;gBACJ6B,MAAK;gBACLC,aAAU;gBACVX,WAAU;;kCAEV,qBAACQ;wBAAKI,eAAY;kCAAO;;kCACzB,qBAACJ;kCAAMnC;;;;;;AAKjB;AAuBO,SAASR,eAAe,EAC7BgD,QAAQ,EACRC,QAAQ,EACRC,KAAK,EACLC,WAAW,EACXC,cAAc,QAAQ,EACtBC,cAAc,QAAQ,EACtBC,QAAQ,EACRC,eAAe,KAAK,EACpBpB,YAAY,EAAE,EACM;IACpB,MAAMqB,SAASzC,IAAAA,YAAK;IACpB,MAAM,CAAC0C,iBAAiBC,mBAAmB,GAAGC,IAAAA,eAAQ,EAAC;IAEvD,MAAMC,eAAe,CAAChC;QACpBA,EAAEiC,cAAc;QAChBH,mBAAmB;QAEnB,6CAA6C;QAC7CI,IAAAA,qCAAsB,EAAC,kBAAkB;QAEzCb,SAASrB;IACX;IAEA,qBACE,sBAACmC;QACCpC,IAAI6B;QACJP,UAAUW;QACVzB,WAAW,CAAC,UAAU,EAAEA,WAAW;QACnC6B,UAAU;QACVlC,cAAYoB;;YAEXA,uBACC,sBAACT;gBAAIN,WAAU;;kCACb,qBAAC8B;wBAAG9B,WAAU;kCAAkDe;;oBAC/DC,6BACC,qBAACP;wBAAET,WAAU;kCAA8BgB;;;;0BAKjD,sBAACe;gBAAStD,UAAU2C;gBAAcpB,WAAU;;kCAC1C,qBAACgC;wBAAOhC,WAAU;kCAAWe,SAAS;;oBACrCF;;;0BAGH,sBAACP;gBAAIN,WAAU;;kCACb,qBAACiC;wBACChE,MAAK;wBACLQ,UAAU2C;wBACVpB,WAAU;wBACVkC,aAAWd;kCAEVA,6BACC;;8CACE,qBAACZ;oCAAKR,WAAU;;8CAChB,qBAACQ;8CAAK;;;6BAGRS;;oBAIHE,0BACC,qBAACc;wBACChE,MAAK;wBACLkE,SAAShB;wBACT1C,UAAU2C;wBACVpB,WAAU;kCAETkB;;;;YAKNI,iCACC,qBAAChB;gBAAII,MAAK;gBAASC,aAAU;gBAASX,WAAU;0BAAU;;;;AAMlE"}