ed89139e8e027eec774683ba0da99b9f
// Polyfill Web APIs for Next.js server components
"use strict";
// Mock Next.js server module
jest.mock('next/server', ()=>({
        NextResponse: {
            json: (data, init)=>({
                    json: async ()=>data,
                    status: init?.status || 200
                })
        }
    }));
// Mock Supabase SSR
jest.mock('@supabase/ssr', ()=>({
        createServerClient: jest.fn()
    }));
// Mock next/headers
jest.mock('next/headers', ()=>({
        cookies: jest.fn()
    }));
// Mock services - MUST be before route imports
jest.mock('@/services/settingsService', ()=>({
        getSettings: jest.fn(),
        updateSettings: jest.fn()
    }));
jest.mock('@/services/sectionsService', ()=>({
        listSections: jest.fn()
    }));
jest.mock('@/utils/sanitization', ()=>({
        sanitizeRichText: jest.fn((html)=>html)
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _util = require("util");
const _route = require("../../app/api/admin/home-page/route");
const _route1 = require("../../app/api/admin/home-page/sections/route");
const _ssr = require("@supabase/ssr");
const _headers = require("next/headers");
global.TextEncoder = _util.TextEncoder;
global.TextDecoder = _util.TextDecoder;
// Polyfill Request for tests
if (typeof Request === 'undefined') {
    global.Request = class Request1 {
        constructor(url, init){
            this.url = url;
            this.method = init?.method || 'GET';
            this.headers = new Map();
            if (init?.headers) {
                Object.entries(init.headers).forEach(([key, value])=>{
                    this.headers.set(key, value);
                });
            }
            this.body = init?.body || null;
        }
        async json() {
            return JSON.parse(this.body || '{}');
        }
    };
}
// Get mocked functions
const mockGetSettings = jest.mocked(require('@/services/settingsService').getSettings);
const mockUpdateSettings = jest.mocked(require('@/services/settingsService').updateSettings);
const mockListSections = jest.mocked(require('@/services/sectionsService').listSections);
const mockCreateServerClient = jest.mocked(_ssr.createServerClient);
const mockCookies = jest.mocked(_headers.cookies);
describe('Home Page API Integration Tests', ()=>{
    const mockSupabase = {
        auth: {
            getSession: jest.fn()
        }
    };
    const mockCookieStore = {
        getAll: jest.fn(()=>[]),
        set: jest.fn()
    };
    beforeEach(()=>{
        jest.clearAllMocks();
        // Mock cookies() to return cookie store
        mockCookies.mockResolvedValue(mockCookieStore);
        // Mock createServerClient to return mock Supabase client
        mockCreateServerClient.mockReturnValue(mockSupabase);
    });
    describe('GET /api/admin/home-page', ()=>{
        it('should return home page config when authenticated', async ()=>{
            // Mock authenticated session
            mockSupabase.auth.getSession.mockResolvedValue({
                data: {
                    session: {
                        user: {
                            id: 'user-123'
                        }
                    }
                },
                error: null
            });
            // Mock settings service
            mockGetSettings.mockResolvedValue({
                success: true,
                data: {
                    id: 'settings-1',
                    home_page_title: 'Test Wedding',
                    home_page_subtitle: 'June 2025',
                    home_page_welcome_message: '<p>Welcome!</p>',
                    home_page_hero_image_url: 'https://example.com/hero.jpg',
                    created_at: '2025-01-01T00:00:00Z',
                    updated_at: '2025-01-01T00:00:00Z'
                }
            });
            const response = await (0, _route.GET)();
            const data = await response.json();
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(data.data).toEqual({
                title: 'Test Wedding',
                subtitle: 'June 2025',
                welcomeMessage: '<p>Welcome!</p>',
                heroImageUrl: 'https://example.com/hero.jpg'
            });
        });
        it('should return 401 when not authenticated', async ()=>{
            // Mock unauthenticated session
            mockSupabase.auth.getSession.mockResolvedValue({
                data: {
                    session: null
                },
                error: null
            });
            const response = await (0, _route.GET)();
            const data = await response.json();
            expect(response.status).toBe(401);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('UNAUTHORIZED');
        });
        it('should return 500 when settings service fails', async ()=>{
            // Mock authenticated session
            mockSupabase.auth.getSession.mockResolvedValue({
                data: {
                    session: {
                        user: {
                            id: 'user-123'
                        }
                    }
                },
                error: null
            });
            // Mock settings service error
            mockGetSettings.mockResolvedValue({
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: 'Failed to fetch settings'
                }
            });
            const response = await (0, _route.GET)();
            const data = await response.json();
            expect(response.status).toBe(500);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('DATABASE_ERROR');
        });
    });
    describe('PUT /api/admin/home-page', ()=>{
        it('should update home page config when authenticated with valid data', async ()=>{
            // Mock authenticated session
            mockSupabase.auth.getSession.mockResolvedValue({
                data: {
                    session: {
                        user: {
                            id: 'user-123'
                        }
                    }
                },
                error: null
            });
            // Mock settings service
            mockUpdateSettings.mockResolvedValue({
                success: true,
                data: {
                    id: 'settings-1',
                    home_page_title: 'Updated Wedding',
                    home_page_subtitle: 'July 2025',
                    home_page_welcome_message: '<p>Updated welcome!</p>',
                    home_page_hero_image_url: 'https://example.com/new-hero.jpg',
                    created_at: '2025-01-01T00:00:00Z',
                    updated_at: '2025-01-02T00:00:00Z'
                }
            });
            const request = new Request('http://localhost:3000/api/admin/home-page', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    title: 'Updated Wedding',
                    subtitle: 'July 2025',
                    welcomeMessage: '<p>Updated welcome!</p>',
                    heroImageUrl: 'https://example.com/new-hero.jpg'
                })
            });
            const response = await (0, _route.PUT)(request);
            const data = await response.json();
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(data.data).toEqual({
                title: 'Updated Wedding',
                subtitle: 'July 2025',
                welcomeMessage: '<p>Updated welcome!</p>',
                heroImageUrl: 'https://example.com/new-hero.jpg'
            });
            expect(mockUpdateSettings).toHaveBeenCalledWith({
                home_page_title: 'Updated Wedding',
                home_page_subtitle: 'July 2025',
                home_page_welcome_message: '<p>Updated welcome!</p>',
                home_page_hero_image_url: 'https://example.com/new-hero.jpg'
            });
        });
        it('should return 401 when not authenticated', async ()=>{
            // Mock unauthenticated session
            mockSupabase.auth.getSession.mockResolvedValue({
                data: {
                    session: null
                },
                error: null
            });
            const request = new Request('http://localhost:3000/api/admin/home-page', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    title: 'Test Wedding'
                })
            });
            const response = await (0, _route.PUT)(request);
            const data = await response.json();
            expect(response.status).toBe(401);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('UNAUTHORIZED');
        });
        it('should return 400 when validation fails', async ()=>{
            // Mock authenticated session
            mockSupabase.auth.getSession.mockResolvedValue({
                data: {
                    session: {
                        user: {
                            id: 'user-123'
                        }
                    }
                },
                error: null
            });
            // Mock validation error
            mockUpdateSettings.mockResolvedValue({
                success: false,
                error: {
                    code: 'VALIDATION_ERROR',
                    message: 'Validation failed',
                    details: [
                        {
                            path: [
                                'home_page_hero_image_url'
                            ],
                            message: 'Invalid URL'
                        }
                    ]
                }
            });
            const request = new Request('http://localhost:3000/api/admin/home-page', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    title: 'Test Wedding',
                    heroImageUrl: 'invalid-url'
                })
            });
            const response = await (0, _route.PUT)(request);
            const data = await response.json();
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
        });
        it('should return 500 when settings service fails', async ()=>{
            // Mock authenticated session
            mockSupabase.auth.getSession.mockResolvedValue({
                data: {
                    session: {
                        user: {
                            id: 'user-123'
                        }
                    }
                },
                error: null
            });
            // Mock database error
            mockUpdateSettings.mockResolvedValue({
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: 'Failed to update settings'
                }
            });
            const request = new Request('http://localhost:3000/api/admin/home-page', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    title: 'Test Wedding'
                })
            });
            const response = await (0, _route.PUT)(request);
            const data = await response.json();
            expect(response.status).toBe(500);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('DATABASE_ERROR');
        });
        it('should sanitize rich text content', async ()=>{
            // Mock authenticated session
            mockSupabase.auth.getSession.mockResolvedValue({
                data: {
                    session: {
                        user: {
                            id: 'user-123'
                        }
                    }
                },
                error: null
            });
            // Mock settings service
            mockUpdateSettings.mockResolvedValue({
                success: true,
                data: {
                    id: 'settings-1',
                    home_page_title: 'Test Wedding',
                    home_page_subtitle: 'June 2025',
                    home_page_welcome_message: '<p>Sanitized content</p>',
                    home_page_hero_image_url: null,
                    created_at: '2025-01-01T00:00:00Z',
                    updated_at: '2025-01-02T00:00:00Z'
                }
            });
            const request = new Request('http://localhost:3000/api/admin/home-page', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    title: 'Test Wedding',
                    subtitle: 'June 2025',
                    welcomeMessage: '<script>alert("xss")</script><p>Content</p>',
                    heroImageUrl: null
                })
            });
            const response = await (0, _route.PUT)(request);
            const data = await response.json();
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
        });
    });
    describe('GET /api/admin/home-page/sections', ()=>{
        it('should return home page sections when authenticated', async ()=>{
            // Mock authenticated session
            mockSupabase.auth.getSession.mockResolvedValue({
                data: {
                    session: {
                        user: {
                            id: 'user-123'
                        }
                    }
                },
                error: null
            });
            // Mock sections service
            mockListSections.mockResolvedValue({
                success: true,
                data: [
                    {
                        id: 'section-1',
                        pageType: 'home',
                        pageId: 'home',
                        displayOrder: 1,
                        layout: 'two-column',
                        columns: []
                    },
                    {
                        id: 'section-2',
                        pageType: 'home',
                        pageId: 'home',
                        displayOrder: 2,
                        layout: 'one-column',
                        columns: []
                    }
                ]
            });
            const response = await (0, _route1.GET)();
            const data = await response.json();
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(data.data).toHaveLength(2);
            expect(data.data[0].pageType).toBe('home');
            expect(data.data[0].pageId).toBe('home');
            expect(mockListSections).toHaveBeenCalledWith('home', 'home');
        });
        it('should return 401 when not authenticated', async ()=>{
            // Mock unauthenticated session
            mockSupabase.auth.getSession.mockResolvedValue({
                data: {
                    session: null
                },
                error: null
            });
            const response = await (0, _route1.GET)();
            const data = await response.json();
            expect(response.status).toBe(401);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('UNAUTHORIZED');
        });
        it('should return 500 when sections service fails', async ()=>{
            // Mock authenticated session
            mockSupabase.auth.getSession.mockResolvedValue({
                data: {
                    session: {
                        user: {
                            id: 'user-123'
                        }
                    }
                },
                error: null
            });
            // Mock sections service error
            mockListSections.mockResolvedValue({
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: 'Failed to fetch sections'
                }
            });
            const response = await (0, _route1.GET)();
            const data = await response.json();
            expect(response.status).toBe(500);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('DATABASE_ERROR');
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvX190ZXN0c19fL2ludGVncmF0aW9uL2hvbWVQYWdlQXBpLmludGVncmF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gUG9seWZpbGwgV2ViIEFQSXMgZm9yIE5leHQuanMgc2VydmVyIGNvbXBvbmVudHNcbmltcG9ydCB7IFRleHRFbmNvZGVyLCBUZXh0RGVjb2RlciB9IGZyb20gJ3V0aWwnO1xuZ2xvYmFsLlRleHRFbmNvZGVyID0gVGV4dEVuY29kZXI7XG5nbG9iYWwuVGV4dERlY29kZXIgPSBUZXh0RGVjb2RlciBhcyBhbnk7XG5cbi8vIFBvbHlmaWxsIFJlcXVlc3QgZm9yIHRlc3RzXG5pZiAodHlwZW9mIFJlcXVlc3QgPT09ICd1bmRlZmluZWQnKSB7XG4gIGdsb2JhbC5SZXF1ZXN0ID0gY2xhc3MgUmVxdWVzdCB7XG4gICAgbWV0aG9kOiBzdHJpbmc7XG4gICAgdXJsOiBzdHJpbmc7XG4gICAgaGVhZGVyczogTWFwPHN0cmluZywgc3RyaW5nPjtcbiAgICBib2R5OiBzdHJpbmcgfCBudWxsO1xuXG4gICAgY29uc3RydWN0b3IodXJsOiBzdHJpbmcsIGluaXQ/OiBhbnkpIHtcbiAgICAgIHRoaXMudXJsID0gdXJsO1xuICAgICAgdGhpcy5tZXRob2QgPSBpbml0Py5tZXRob2QgfHwgJ0dFVCc7XG4gICAgICB0aGlzLmhlYWRlcnMgPSBuZXcgTWFwKCk7XG4gICAgICBpZiAoaW5pdD8uaGVhZGVycykge1xuICAgICAgICBPYmplY3QuZW50cmllcyhpbml0LmhlYWRlcnMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICAgIHRoaXMuaGVhZGVycy5zZXQoa2V5LCB2YWx1ZSBhcyBzdHJpbmcpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuYm9keSA9IGluaXQ/LmJvZHkgfHwgbnVsbDtcbiAgICB9XG5cbiAgICBhc3luYyBqc29uKCkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UodGhpcy5ib2R5IHx8ICd7fScpO1xuICAgIH1cbiAgfSBhcyBhbnk7XG59XG5cbi8vIE1vY2sgTmV4dC5qcyBzZXJ2ZXIgbW9kdWxlXG5qZXN0Lm1vY2soJ25leHQvc2VydmVyJywgKCkgPT4gKHtcbiAgTmV4dFJlc3BvbnNlOiB7XG4gICAganNvbjogKGRhdGE6IGFueSwgaW5pdD86IGFueSkgPT4gKHtcbiAgICAgIGpzb246IGFzeW5jICgpID0+IGRhdGEsXG4gICAgICBzdGF0dXM6IGluaXQ/LnN0YXR1cyB8fCAyMDAsXG4gICAgfSksXG4gIH0sXG59KSk7XG5cbi8vIE1vY2sgU3VwYWJhc2UgU1NSXG5qZXN0Lm1vY2soJ0BzdXBhYmFzZS9zc3InLCAoKSA9PiAoe1xuICBjcmVhdGVTZXJ2ZXJDbGllbnQ6IGplc3QuZm4oKSxcbn0pKTtcblxuLy8gTW9jayBuZXh0L2hlYWRlcnNcbmplc3QubW9jaygnbmV4dC9oZWFkZXJzJywgKCkgPT4gKHtcbiAgY29va2llczogamVzdC5mbigpLFxufSkpO1xuXG4vLyBNb2NrIHNlcnZpY2VzIC0gTVVTVCBiZSBiZWZvcmUgcm91dGUgaW1wb3J0c1xuamVzdC5tb2NrKCdAL3NlcnZpY2VzL3NldHRpbmdzU2VydmljZScsICgpID0+ICh7XG4gIGdldFNldHRpbmdzOiBqZXN0LmZuKCksXG4gIHVwZGF0ZVNldHRpbmdzOiBqZXN0LmZuKCksXG59KSk7XG5cbmplc3QubW9jaygnQC9zZXJ2aWNlcy9zZWN0aW9uc1NlcnZpY2UnLCAoKSA9PiAoe1xuICBsaXN0U2VjdGlvbnM6IGplc3QuZm4oKSxcbn0pKTtcblxuamVzdC5tb2NrKCdAL3V0aWxzL3Nhbml0aXphdGlvbicsICgpID0+ICh7XG4gIHNhbml0aXplUmljaFRleHQ6IGplc3QuZm4oKGh0bWwpID0+IGh0bWwpLFxufSkpO1xuXG4vLyBJbXBvcnQgQVBJIHJvdXRlcyBBRlRFUiBtb2Nrc1xuaW1wb3J0IHsgR0VUIGFzIGdldEhvbWVQYWdlLCBQVVQgYXMgdXBkYXRlSG9tZVBhZ2UgfSBmcm9tICdAL2FwcC9hcGkvYWRtaW4vaG9tZS1wYWdlL3JvdXRlJztcbmltcG9ydCB7IEdFVCBhcyBnZXRIb21lUGFnZVNlY3Rpb25zIH0gZnJvbSAnQC9hcHAvYXBpL2FkbWluL2hvbWUtcGFnZS9zZWN0aW9ucy9yb3V0ZSc7XG5pbXBvcnQgeyBjcmVhdGVTZXJ2ZXJDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3NyJztcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnO1xuXG4vLyBHZXQgbW9ja2VkIGZ1bmN0aW9uc1xuY29uc3QgbW9ja0dldFNldHRpbmdzID0gamVzdC5tb2NrZWQocmVxdWlyZSgnQC9zZXJ2aWNlcy9zZXR0aW5nc1NlcnZpY2UnKS5nZXRTZXR0aW5ncyk7XG5jb25zdCBtb2NrVXBkYXRlU2V0dGluZ3MgPSBqZXN0Lm1vY2tlZChyZXF1aXJlKCdAL3NlcnZpY2VzL3NldHRpbmdzU2VydmljZScpLnVwZGF0ZVNldHRpbmdzKTtcbmNvbnN0IG1vY2tMaXN0U2VjdGlvbnMgPSBqZXN0Lm1vY2tlZChyZXF1aXJlKCdAL3NlcnZpY2VzL3NlY3Rpb25zU2VydmljZScpLmxpc3RTZWN0aW9ucyk7XG5jb25zdCBtb2NrQ3JlYXRlU2VydmVyQ2xpZW50ID0gamVzdC5tb2NrZWQoY3JlYXRlU2VydmVyQ2xpZW50KTtcbmNvbnN0IG1vY2tDb29raWVzID0gamVzdC5tb2NrZWQoY29va2llcyk7XG5cbmRlc2NyaWJlKCdIb21lIFBhZ2UgQVBJIEludGVncmF0aW9uIFRlc3RzJywgKCkgPT4ge1xuICBjb25zdCBtb2NrU3VwYWJhc2UgPSB7XG4gICAgYXV0aDoge1xuICAgICAgZ2V0U2Vzc2lvbjogamVzdC5mbigpLFxuICAgIH0sXG4gIH07XG5cbiAgY29uc3QgbW9ja0Nvb2tpZVN0b3JlID0ge1xuICAgIGdldEFsbDogamVzdC5mbigoKSA9PiBbXSksXG4gICAgc2V0OiBqZXN0LmZuKCksXG4gIH07XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgXG4gICAgLy8gTW9jayBjb29raWVzKCkgdG8gcmV0dXJuIGNvb2tpZSBzdG9yZVxuICAgIG1vY2tDb29raWVzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDb29raWVTdG9yZSBhcyBhbnkpO1xuICAgIFxuICAgIC8vIE1vY2sgY3JlYXRlU2VydmVyQ2xpZW50IHRvIHJldHVybiBtb2NrIFN1cGFiYXNlIGNsaWVudFxuICAgIG1vY2tDcmVhdGVTZXJ2ZXJDbGllbnQubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSBhcyBhbnkpO1xuICB9KTtcblxuICBkZXNjcmliZSgnR0VUIC9hcGkvYWRtaW4vaG9tZS1wYWdlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGhvbWUgcGFnZSBjb25maWcgd2hlbiBhdXRoZW50aWNhdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBhdXRoZW50aWNhdGVkIHNlc3Npb25cbiAgICAgIG1vY2tTdXBhYmFzZS5hdXRoLmdldFNlc3Npb24ubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB7IHNlc3Npb246IHsgdXNlcjogeyBpZDogJ3VzZXItMTIzJyB9IH0gfSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG5cbiAgICAgIC8vIE1vY2sgc2V0dGluZ3Mgc2VydmljZVxuICAgICAgbW9ja0dldFNldHRpbmdzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGlkOiAnc2V0dGluZ3MtMScsXG4gICAgICAgICAgaG9tZV9wYWdlX3RpdGxlOiAnVGVzdCBXZWRkaW5nJyxcbiAgICAgICAgICBob21lX3BhZ2Vfc3VidGl0bGU6ICdKdW5lIDIwMjUnLFxuICAgICAgICAgIGhvbWVfcGFnZV93ZWxjb21lX21lc3NhZ2U6ICc8cD5XZWxjb21lITwvcD4nLFxuICAgICAgICAgIGhvbWVfcGFnZV9oZXJvX2ltYWdlX3VybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vaGVyby5qcGcnLFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI1LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgICAgdXBkYXRlZF9hdDogJzIwMjUtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgfSxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRIb21lUGFnZSgpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChkYXRhLmRhdGEpLnRvRXF1YWwoe1xuICAgICAgICB0aXRsZTogJ1Rlc3QgV2VkZGluZycsXG4gICAgICAgIHN1YnRpdGxlOiAnSnVuZSAyMDI1JyxcbiAgICAgICAgd2VsY29tZU1lc3NhZ2U6ICc8cD5XZWxjb21lITwvcD4nLFxuICAgICAgICBoZXJvSW1hZ2VVcmw6ICdodHRwczovL2V4YW1wbGUuY29tL2hlcm8uanBnJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNDAxIHdoZW4gbm90IGF1dGhlbnRpY2F0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIHVuYXV0aGVudGljYXRlZCBzZXNzaW9uXG4gICAgICBtb2NrU3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogeyBzZXNzaW9uOiBudWxsIH0sXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldEhvbWVQYWdlKCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMSk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ1VOQVVUSE9SSVpFRCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNTAwIHdoZW4gc2V0dGluZ3Mgc2VydmljZSBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgYXV0aGVudGljYXRlZCBzZXNzaW9uXG4gICAgICBtb2NrU3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogeyBzZXNzaW9uOiB7IHVzZXI6IHsgaWQ6ICd1c2VyLTEyMycgfSB9IH0sXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICAvLyBNb2NrIHNldHRpbmdzIHNlcnZpY2UgZXJyb3JcbiAgICAgIG1vY2tHZXRTZXR0aW5ncy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdEQVRBQkFTRV9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBmZXRjaCBzZXR0aW5ncycsXG4gICAgICAgIH0sXG4gICAgICB9IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0SG9tZVBhZ2UoKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnREFUQUJBU0VfRVJST1InKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BVVCAvYXBpL2FkbWluL2hvbWUtcGFnZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSBob21lIHBhZ2UgY29uZmlnIHdoZW4gYXV0aGVudGljYXRlZCB3aXRoIHZhbGlkIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIGF1dGhlbnRpY2F0ZWQgc2Vzc2lvblxuICAgICAgbW9ja1N1cGFiYXNlLmF1dGguZ2V0U2Vzc2lvbi5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IHsgc2Vzc2lvbjogeyB1c2VyOiB7IGlkOiAndXNlci0xMjMnIH0gfSB9LFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgLy8gTW9jayBzZXR0aW5ncyBzZXJ2aWNlXG4gICAgICBtb2NrVXBkYXRlU2V0dGluZ3MubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgaWQ6ICdzZXR0aW5ncy0xJyxcbiAgICAgICAgICBob21lX3BhZ2VfdGl0bGU6ICdVcGRhdGVkIFdlZGRpbmcnLFxuICAgICAgICAgIGhvbWVfcGFnZV9zdWJ0aXRsZTogJ0p1bHkgMjAyNScsXG4gICAgICAgICAgaG9tZV9wYWdlX3dlbGNvbWVfbWVzc2FnZTogJzxwPlVwZGF0ZWQgd2VsY29tZSE8L3A+JyxcbiAgICAgICAgICBob21lX3BhZ2VfaGVyb19pbWFnZV91cmw6ICdodHRwczovL2V4YW1wbGUuY29tL25ldy1oZXJvLmpwZycsXG4gICAgICAgICAgY3JlYXRlZF9hdDogJzIwMjUtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNS0wMS0wMlQwMDowMDowMFonLFxuICAgICAgICB9LFxuICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vaG9tZS1wYWdlJywge1xuICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHRpdGxlOiAnVXBkYXRlZCBXZWRkaW5nJyxcbiAgICAgICAgICBzdWJ0aXRsZTogJ0p1bHkgMjAyNScsXG4gICAgICAgICAgd2VsY29tZU1lc3NhZ2U6ICc8cD5VcGRhdGVkIHdlbGNvbWUhPC9wPicsXG4gICAgICAgICAgaGVyb0ltYWdlVXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9uZXctaGVyby5qcGcnLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHVwZGF0ZUhvbWVQYWdlKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChkYXRhLmRhdGEpLnRvRXF1YWwoe1xuICAgICAgICB0aXRsZTogJ1VwZGF0ZWQgV2VkZGluZycsXG4gICAgICAgIHN1YnRpdGxlOiAnSnVseSAyMDI1JyxcbiAgICAgICAgd2VsY29tZU1lc3NhZ2U6ICc8cD5VcGRhdGVkIHdlbGNvbWUhPC9wPicsXG4gICAgICAgIGhlcm9JbWFnZVVybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vbmV3LWhlcm8uanBnJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1VwZGF0ZVNldHRpbmdzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIGhvbWVfcGFnZV90aXRsZTogJ1VwZGF0ZWQgV2VkZGluZycsXG4gICAgICAgIGhvbWVfcGFnZV9zdWJ0aXRsZTogJ0p1bHkgMjAyNScsXG4gICAgICAgIGhvbWVfcGFnZV93ZWxjb21lX21lc3NhZ2U6ICc8cD5VcGRhdGVkIHdlbGNvbWUhPC9wPicsXG4gICAgICAgIGhvbWVfcGFnZV9oZXJvX2ltYWdlX3VybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vbmV3LWhlcm8uanBnJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNDAxIHdoZW4gbm90IGF1dGhlbnRpY2F0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIHVuYXV0aGVudGljYXRlZCBzZXNzaW9uXG4gICAgICBtb2NrU3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogeyBzZXNzaW9uOiBudWxsIH0sXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vaG9tZS1wYWdlJywge1xuICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHRpdGxlOiAnVGVzdCBXZWRkaW5nJyxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1cGRhdGVIb21lUGFnZShyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAxKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnVU5BVVRIT1JJWkVEJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDAgd2hlbiB2YWxpZGF0aW9uIGZhaWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBhdXRoZW50aWNhdGVkIHNlc3Npb25cbiAgICAgIG1vY2tTdXBhYmFzZS5hdXRoLmdldFNlc3Npb24ubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB7IHNlc3Npb246IHsgdXNlcjogeyBpZDogJ3VzZXItMTIzJyB9IH0gfSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG5cbiAgICAgIC8vIE1vY2sgdmFsaWRhdGlvbiBlcnJvclxuICAgICAgbW9ja1VwZGF0ZVNldHRpbmdzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ1ZBTElEQVRJT05fRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdWYWxpZGF0aW9uIGZhaWxlZCcsXG4gICAgICAgICAgZGV0YWlsczogW3sgcGF0aDogWydob21lX3BhZ2VfaGVyb19pbWFnZV91cmwnXSwgbWVzc2FnZTogJ0ludmFsaWQgVVJMJyB9XSxcbiAgICAgICAgfSxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL2hvbWUtcGFnZScsIHtcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICB0aXRsZTogJ1Rlc3QgV2VkZGluZycsXG4gICAgICAgICAgaGVyb0ltYWdlVXJsOiAnaW52YWxpZC11cmwnLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHVwZGF0ZUhvbWVQYWdlKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA1MDAgd2hlbiBzZXR0aW5ncyBzZXJ2aWNlIGZhaWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBhdXRoZW50aWNhdGVkIHNlc3Npb25cbiAgICAgIG1vY2tTdXBhYmFzZS5hdXRoLmdldFNlc3Npb24ubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB7IHNlc3Npb246IHsgdXNlcjogeyBpZDogJ3VzZXItMTIzJyB9IH0gfSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG5cbiAgICAgIC8vIE1vY2sgZGF0YWJhc2UgZXJyb3JcbiAgICAgIG1vY2tVcGRhdGVTZXR0aW5ncy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdEQVRBQkFTRV9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byB1cGRhdGUgc2V0dGluZ3MnLFxuICAgICAgICB9LFxuICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vaG9tZS1wYWdlJywge1xuICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHRpdGxlOiAnVGVzdCBXZWRkaW5nJyxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1cGRhdGVIb21lUGFnZShyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnREFUQUJBU0VfRVJST1InKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2FuaXRpemUgcmljaCB0ZXh0IGNvbnRlbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIGF1dGhlbnRpY2F0ZWQgc2Vzc2lvblxuICAgICAgbW9ja1N1cGFiYXNlLmF1dGguZ2V0U2Vzc2lvbi5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IHsgc2Vzc2lvbjogeyB1c2VyOiB7IGlkOiAndXNlci0xMjMnIH0gfSB9LFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgLy8gTW9jayBzZXR0aW5ncyBzZXJ2aWNlXG4gICAgICBtb2NrVXBkYXRlU2V0dGluZ3MubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgaWQ6ICdzZXR0aW5ncy0xJyxcbiAgICAgICAgICBob21lX3BhZ2VfdGl0bGU6ICdUZXN0IFdlZGRpbmcnLFxuICAgICAgICAgIGhvbWVfcGFnZV9zdWJ0aXRsZTogJ0p1bmUgMjAyNScsXG4gICAgICAgICAgaG9tZV9wYWdlX3dlbGNvbWVfbWVzc2FnZTogJzxwPlNhbml0aXplZCBjb250ZW50PC9wPicsXG4gICAgICAgICAgaG9tZV9wYWdlX2hlcm9faW1hZ2VfdXJsOiBudWxsLFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI1LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgICAgdXBkYXRlZF9hdDogJzIwMjUtMDEtMDJUMDA6MDA6MDBaJyxcbiAgICAgICAgfSxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL2hvbWUtcGFnZScsIHtcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICB0aXRsZTogJ1Rlc3QgV2VkZGluZycsXG4gICAgICAgICAgc3VidGl0bGU6ICdKdW5lIDIwMjUnLFxuICAgICAgICAgIHdlbGNvbWVNZXNzYWdlOiAnPHNjcmlwdD5hbGVydChcInhzc1wiKTwvc2NyaXB0PjxwPkNvbnRlbnQ8L3A+JyxcbiAgICAgICAgICBoZXJvSW1hZ2VVcmw6IG51bGwsXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdXBkYXRlSG9tZVBhZ2UocmVxdWVzdCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnR0VUIC9hcGkvYWRtaW4vaG9tZS1wYWdlL3NlY3Rpb25zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGhvbWUgcGFnZSBzZWN0aW9ucyB3aGVuIGF1dGhlbnRpY2F0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIGF1dGhlbnRpY2F0ZWQgc2Vzc2lvblxuICAgICAgbW9ja1N1cGFiYXNlLmF1dGguZ2V0U2Vzc2lvbi5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IHsgc2Vzc2lvbjogeyB1c2VyOiB7IGlkOiAndXNlci0xMjMnIH0gfSB9LFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgLy8gTW9jayBzZWN0aW9ucyBzZXJ2aWNlXG4gICAgICBtb2NrTGlzdFNlY3Rpb25zLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnc2VjdGlvbi0xJyxcbiAgICAgICAgICAgIHBhZ2VUeXBlOiAnaG9tZScsXG4gICAgICAgICAgICBwYWdlSWQ6ICdob21lJyxcbiAgICAgICAgICAgIGRpc3BsYXlPcmRlcjogMSxcbiAgICAgICAgICAgIGxheW91dDogJ3R3by1jb2x1bW4nLFxuICAgICAgICAgICAgY29sdW1uczogW10sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ3NlY3Rpb24tMicsXG4gICAgICAgICAgICBwYWdlVHlwZTogJ2hvbWUnLFxuICAgICAgICAgICAgcGFnZUlkOiAnaG9tZScsXG4gICAgICAgICAgICBkaXNwbGF5T3JkZXI6IDIsXG4gICAgICAgICAgICBsYXlvdXQ6ICdvbmUtY29sdW1uJyxcbiAgICAgICAgICAgIGNvbHVtbnM6IFtdLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0SG9tZVBhZ2VTZWN0aW9ucygpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChkYXRhLmRhdGEpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIGV4cGVjdChkYXRhLmRhdGFbMF0ucGFnZVR5cGUpLnRvQmUoJ2hvbWUnKTtcbiAgICAgIGV4cGVjdChkYXRhLmRhdGFbMF0ucGFnZUlkKS50b0JlKCdob21lJyk7XG5cbiAgICAgIGV4cGVjdChtb2NrTGlzdFNlY3Rpb25zKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnaG9tZScsICdob21lJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDEgd2hlbiBub3QgYXV0aGVudGljYXRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgdW5hdXRoZW50aWNhdGVkIHNlc3Npb25cbiAgICAgIG1vY2tTdXBhYmFzZS5hdXRoLmdldFNlc3Npb24ubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB7IHNlc3Npb246IG51bGwgfSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0SG9tZVBhZ2VTZWN0aW9ucygpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdVTkFVVEhPUklaRUQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDUwMCB3aGVuIHNlY3Rpb25zIHNlcnZpY2UgZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIGF1dGhlbnRpY2F0ZWQgc2Vzc2lvblxuICAgICAgbW9ja1N1cGFiYXNlLmF1dGguZ2V0U2Vzc2lvbi5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IHsgc2Vzc2lvbjogeyB1c2VyOiB7IGlkOiAndXNlci0xMjMnIH0gfSB9LFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgLy8gTW9jayBzZWN0aW9ucyBzZXJ2aWNlIGVycm9yXG4gICAgICBtb2NrTGlzdFNlY3Rpb25zLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ0RBVEFCQVNFX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGZldGNoIHNlY3Rpb25zJyxcbiAgICAgICAgfSxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRIb21lUGFnZVNlY3Rpb25zKCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDUwMCk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ0RBVEFCQVNFX0VSUk9SJyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJOZXh0UmVzcG9uc2UiLCJqc29uIiwiZGF0YSIsImluaXQiLCJzdGF0dXMiLCJjcmVhdGVTZXJ2ZXJDbGllbnQiLCJmbiIsImNvb2tpZXMiLCJnZXRTZXR0aW5ncyIsInVwZGF0ZVNldHRpbmdzIiwibGlzdFNlY3Rpb25zIiwic2FuaXRpemVSaWNoVGV4dCIsImh0bWwiLCJnbG9iYWwiLCJUZXh0RW5jb2RlciIsIlRleHREZWNvZGVyIiwiUmVxdWVzdCIsInVybCIsIm1ldGhvZCIsImhlYWRlcnMiLCJNYXAiLCJPYmplY3QiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImtleSIsInZhbHVlIiwic2V0IiwiYm9keSIsIkpTT04iLCJwYXJzZSIsIm1vY2tHZXRTZXR0aW5ncyIsIm1vY2tlZCIsInJlcXVpcmUiLCJtb2NrVXBkYXRlU2V0dGluZ3MiLCJtb2NrTGlzdFNlY3Rpb25zIiwibW9ja0NyZWF0ZVNlcnZlckNsaWVudCIsIm1vY2tDb29raWVzIiwiZGVzY3JpYmUiLCJtb2NrU3VwYWJhc2UiLCJhdXRoIiwiZ2V0U2Vzc2lvbiIsIm1vY2tDb29raWVTdG9yZSIsImdldEFsbCIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJtb2NrUmV0dXJuVmFsdWUiLCJpdCIsInNlc3Npb24iLCJ1c2VyIiwiaWQiLCJlcnJvciIsInN1Y2Nlc3MiLCJob21lX3BhZ2VfdGl0bGUiLCJob21lX3BhZ2Vfc3VidGl0bGUiLCJob21lX3BhZ2Vfd2VsY29tZV9tZXNzYWdlIiwiaG9tZV9wYWdlX2hlcm9faW1hZ2VfdXJsIiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRfYXQiLCJyZXNwb25zZSIsImdldEhvbWVQYWdlIiwiZXhwZWN0IiwidG9CZSIsInRvRXF1YWwiLCJ0aXRsZSIsInN1YnRpdGxlIiwid2VsY29tZU1lc3NhZ2UiLCJoZXJvSW1hZ2VVcmwiLCJjb2RlIiwibWVzc2FnZSIsInJlcXVlc3QiLCJzdHJpbmdpZnkiLCJ1cGRhdGVIb21lUGFnZSIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwiZGV0YWlscyIsInBhdGgiLCJwYWdlVHlwZSIsInBhZ2VJZCIsImRpc3BsYXlPcmRlciIsImxheW91dCIsImNvbHVtbnMiLCJnZXRIb21lUGFnZVNlY3Rpb25zIiwidG9IYXZlTGVuZ3RoIl0sIm1hcHBpbmdzIjoiQUFBQSxrREFBa0Q7O0FBK0JsRCw2QkFBNkI7QUFDN0JBLEtBQUtDLElBQUksQ0FBQyxlQUFlLElBQU8sQ0FBQTtRQUM5QkMsY0FBYztZQUNaQyxNQUFNLENBQUNDLE1BQVdDLE9BQWdCLENBQUE7b0JBQ2hDRixNQUFNLFVBQVlDO29CQUNsQkUsUUFBUUQsTUFBTUMsVUFBVTtnQkFDMUIsQ0FBQTtRQUNGO0lBQ0YsQ0FBQTtBQUVBLG9CQUFvQjtBQUNwQk4sS0FBS0MsSUFBSSxDQUFDLGlCQUFpQixJQUFPLENBQUE7UUFDaENNLG9CQUFvQlAsS0FBS1EsRUFBRTtJQUM3QixDQUFBO0FBRUEsb0JBQW9CO0FBQ3BCUixLQUFLQyxJQUFJLENBQUMsZ0JBQWdCLElBQU8sQ0FBQTtRQUMvQlEsU0FBU1QsS0FBS1EsRUFBRTtJQUNsQixDQUFBO0FBRUEsK0NBQStDO0FBQy9DUixLQUFLQyxJQUFJLENBQUMsOEJBQThCLElBQU8sQ0FBQTtRQUM3Q1MsYUFBYVYsS0FBS1EsRUFBRTtRQUNwQkcsZ0JBQWdCWCxLQUFLUSxFQUFFO0lBQ3pCLENBQUE7QUFFQVIsS0FBS0MsSUFBSSxDQUFDLDhCQUE4QixJQUFPLENBQUE7UUFDN0NXLGNBQWNaLEtBQUtRLEVBQUU7SUFDdkIsQ0FBQTtBQUVBUixLQUFLQyxJQUFJLENBQUMsd0JBQXdCLElBQU8sQ0FBQTtRQUN2Q1ksa0JBQWtCYixLQUFLUSxFQUFFLENBQUMsQ0FBQ00sT0FBU0E7SUFDdEMsQ0FBQTs7OztzQkE5RHlDO3VCQWlFaUI7d0JBQ2Y7cUJBQ1I7eUJBQ1g7QUFuRXhCQyxPQUFPQyxXQUFXLEdBQUdBLGlCQUFXO0FBQ2hDRCxPQUFPRSxXQUFXLEdBQUdBLGlCQUFXO0FBRWhDLDZCQUE2QjtBQUM3QixJQUFJLE9BQU9DLFlBQVksYUFBYTtJQUNsQ0gsT0FBT0csT0FBTyxHQUFHLE1BQU1BO1FBTXJCLFlBQVlDLEdBQVcsRUFBRWQsSUFBVSxDQUFFO1lBQ25DLElBQUksQ0FBQ2MsR0FBRyxHQUFHQTtZQUNYLElBQUksQ0FBQ0MsTUFBTSxHQUFHZixNQUFNZSxVQUFVO1lBQzlCLElBQUksQ0FBQ0MsT0FBTyxHQUFHLElBQUlDO1lBQ25CLElBQUlqQixNQUFNZ0IsU0FBUztnQkFDakJFLE9BQU9DLE9BQU8sQ0FBQ25CLEtBQUtnQixPQUFPLEVBQUVJLE9BQU8sQ0FBQyxDQUFDLENBQUNDLEtBQUtDLE1BQU07b0JBQ2hELElBQUksQ0FBQ04sT0FBTyxDQUFDTyxHQUFHLENBQUNGLEtBQUtDO2dCQUN4QjtZQUNGO1lBQ0EsSUFBSSxDQUFDRSxJQUFJLEdBQUd4QixNQUFNd0IsUUFBUTtRQUM1QjtRQUVBLE1BQU0xQixPQUFPO1lBQ1gsT0FBTzJCLEtBQUtDLEtBQUssQ0FBQyxJQUFJLENBQUNGLElBQUksSUFBSTtRQUNqQztJQUNGO0FBQ0Y7QUEwQ0EsdUJBQXVCO0FBQ3ZCLE1BQU1HLGtCQUFrQmhDLEtBQUtpQyxNQUFNLENBQUNDLFFBQVEsOEJBQThCeEIsV0FBVztBQUNyRixNQUFNeUIscUJBQXFCbkMsS0FBS2lDLE1BQU0sQ0FBQ0MsUUFBUSw4QkFBOEJ2QixjQUFjO0FBQzNGLE1BQU15QixtQkFBbUJwQyxLQUFLaUMsTUFBTSxDQUFDQyxRQUFRLDhCQUE4QnRCLFlBQVk7QUFDdkYsTUFBTXlCLHlCQUF5QnJDLEtBQUtpQyxNQUFNLENBQUMxQix1QkFBa0I7QUFDN0QsTUFBTStCLGNBQWN0QyxLQUFLaUMsTUFBTSxDQUFDeEIsZ0JBQU87QUFFdkM4QixTQUFTLG1DQUFtQztJQUMxQyxNQUFNQyxlQUFlO1FBQ25CQyxNQUFNO1lBQ0pDLFlBQVkxQyxLQUFLUSxFQUFFO1FBQ3JCO0lBQ0Y7SUFFQSxNQUFNbUMsa0JBQWtCO1FBQ3RCQyxRQUFRNUMsS0FBS1EsRUFBRSxDQUFDLElBQU0sRUFBRTtRQUN4Qm9CLEtBQUs1QixLQUFLUSxFQUFFO0lBQ2Q7SUFFQXFDLFdBQVc7UUFDVDdDLEtBQUs4QyxhQUFhO1FBRWxCLHdDQUF3QztRQUN4Q1IsWUFBWVMsaUJBQWlCLENBQUNKO1FBRTlCLHlEQUF5RDtRQUN6RE4sdUJBQXVCVyxlQUFlLENBQUNSO0lBQ3pDO0lBRUFELFNBQVMsNEJBQTRCO1FBQ25DVSxHQUFHLHFEQUFxRDtZQUN0RCw2QkFBNkI7WUFDN0JULGFBQWFDLElBQUksQ0FBQ0MsVUFBVSxDQUFDSyxpQkFBaUIsQ0FBQztnQkFDN0MzQyxNQUFNO29CQUFFOEMsU0FBUzt3QkFBRUMsTUFBTTs0QkFBRUMsSUFBSTt3QkFBVztvQkFBRTtnQkFBRTtnQkFDOUNDLE9BQU87WUFDVDtZQUVBLHdCQUF3QjtZQUN4QnJCLGdCQUFnQmUsaUJBQWlCLENBQUM7Z0JBQ2hDTyxTQUFTO2dCQUNUbEQsTUFBTTtvQkFDSmdELElBQUk7b0JBQ0pHLGlCQUFpQjtvQkFDakJDLG9CQUFvQjtvQkFDcEJDLDJCQUEyQjtvQkFDM0JDLDBCQUEwQjtvQkFDMUJDLFlBQVk7b0JBQ1pDLFlBQVk7Z0JBQ2Q7WUFDRjtZQUVBLE1BQU1DLFdBQVcsTUFBTUMsSUFBQUEsVUFBVztZQUNsQyxNQUFNMUQsT0FBTyxNQUFNeUQsU0FBUzFELElBQUk7WUFFaEM0RCxPQUFPRixTQUFTdkQsTUFBTSxFQUFFMEQsSUFBSSxDQUFDO1lBQzdCRCxPQUFPM0QsS0FBS2tELE9BQU8sRUFBRVUsSUFBSSxDQUFDO1lBQzFCRCxPQUFPM0QsS0FBS0EsSUFBSSxFQUFFNkQsT0FBTyxDQUFDO2dCQUN4QkMsT0FBTztnQkFDUEMsVUFBVTtnQkFDVkMsZ0JBQWdCO2dCQUNoQkMsY0FBYztZQUNoQjtRQUNGO1FBRUFwQixHQUFHLDRDQUE0QztZQUM3QywrQkFBK0I7WUFDL0JULGFBQWFDLElBQUksQ0FBQ0MsVUFBVSxDQUFDSyxpQkFBaUIsQ0FBQztnQkFDN0MzQyxNQUFNO29CQUFFOEMsU0FBUztnQkFBSztnQkFDdEJHLE9BQU87WUFDVDtZQUVBLE1BQU1RLFdBQVcsTUFBTUMsSUFBQUEsVUFBVztZQUNsQyxNQUFNMUQsT0FBTyxNQUFNeUQsU0FBUzFELElBQUk7WUFFaEM0RCxPQUFPRixTQUFTdkQsTUFBTSxFQUFFMEQsSUFBSSxDQUFDO1lBQzdCRCxPQUFPM0QsS0FBS2tELE9BQU8sRUFBRVUsSUFBSSxDQUFDO1lBQzFCRCxPQUFPM0QsS0FBS2lELEtBQUssQ0FBQ2lCLElBQUksRUFBRU4sSUFBSSxDQUFDO1FBQy9CO1FBRUFmLEdBQUcsaURBQWlEO1lBQ2xELDZCQUE2QjtZQUM3QlQsYUFBYUMsSUFBSSxDQUFDQyxVQUFVLENBQUNLLGlCQUFpQixDQUFDO2dCQUM3QzNDLE1BQU07b0JBQUU4QyxTQUFTO3dCQUFFQyxNQUFNOzRCQUFFQyxJQUFJO3dCQUFXO29CQUFFO2dCQUFFO2dCQUM5Q0MsT0FBTztZQUNUO1lBRUEsOEJBQThCO1lBQzlCckIsZ0JBQWdCZSxpQkFBaUIsQ0FBQztnQkFDaENPLFNBQVM7Z0JBQ1RELE9BQU87b0JBQ0xpQixNQUFNO29CQUNOQyxTQUFTO2dCQUNYO1lBQ0Y7WUFFQSxNQUFNVixXQUFXLE1BQU1DLElBQUFBLFVBQVc7WUFDbEMsTUFBTTFELE9BQU8sTUFBTXlELFNBQVMxRCxJQUFJO1lBRWhDNEQsT0FBT0YsU0FBU3ZELE1BQU0sRUFBRTBELElBQUksQ0FBQztZQUM3QkQsT0FBTzNELEtBQUtrRCxPQUFPLEVBQUVVLElBQUksQ0FBQztZQUMxQkQsT0FBTzNELEtBQUtpRCxLQUFLLENBQUNpQixJQUFJLEVBQUVOLElBQUksQ0FBQztRQUMvQjtJQUNGO0lBRUF6QixTQUFTLDRCQUE0QjtRQUNuQ1UsR0FBRyxxRUFBcUU7WUFDdEUsNkJBQTZCO1lBQzdCVCxhQUFhQyxJQUFJLENBQUNDLFVBQVUsQ0FBQ0ssaUJBQWlCLENBQUM7Z0JBQzdDM0MsTUFBTTtvQkFBRThDLFNBQVM7d0JBQUVDLE1BQU07NEJBQUVDLElBQUk7d0JBQVc7b0JBQUU7Z0JBQUU7Z0JBQzlDQyxPQUFPO1lBQ1Q7WUFFQSx3QkFBd0I7WUFDeEJsQixtQkFBbUJZLGlCQUFpQixDQUFDO2dCQUNuQ08sU0FBUztnQkFDVGxELE1BQU07b0JBQ0pnRCxJQUFJO29CQUNKRyxpQkFBaUI7b0JBQ2pCQyxvQkFBb0I7b0JBQ3BCQywyQkFBMkI7b0JBQzNCQywwQkFBMEI7b0JBQzFCQyxZQUFZO29CQUNaQyxZQUFZO2dCQUNkO1lBQ0Y7WUFFQSxNQUFNWSxVQUFVLElBQUl0RCxRQUFRLDZDQUE2QztnQkFDdkVFLFFBQVE7Z0JBQ1JDLFNBQVM7b0JBQUUsZ0JBQWdCO2dCQUFtQjtnQkFDOUNRLE1BQU1DLEtBQUsyQyxTQUFTLENBQUM7b0JBQ25CUCxPQUFPO29CQUNQQyxVQUFVO29CQUNWQyxnQkFBZ0I7b0JBQ2hCQyxjQUFjO2dCQUNoQjtZQUNGO1lBRUEsTUFBTVIsV0FBVyxNQUFNYSxJQUFBQSxVQUFjLEVBQUNGO1lBQ3RDLE1BQU1wRSxPQUFPLE1BQU15RCxTQUFTMUQsSUFBSTtZQUVoQzRELE9BQU9GLFNBQVN2RCxNQUFNLEVBQUUwRCxJQUFJLENBQUM7WUFDN0JELE9BQU8zRCxLQUFLa0QsT0FBTyxFQUFFVSxJQUFJLENBQUM7WUFDMUJELE9BQU8zRCxLQUFLQSxJQUFJLEVBQUU2RCxPQUFPLENBQUM7Z0JBQ3hCQyxPQUFPO2dCQUNQQyxVQUFVO2dCQUNWQyxnQkFBZ0I7Z0JBQ2hCQyxjQUFjO1lBQ2hCO1lBRUFOLE9BQU81QixvQkFBb0J3QyxvQkFBb0IsQ0FBQztnQkFDOUNwQixpQkFBaUI7Z0JBQ2pCQyxvQkFBb0I7Z0JBQ3BCQywyQkFBMkI7Z0JBQzNCQywwQkFBMEI7WUFDNUI7UUFDRjtRQUVBVCxHQUFHLDRDQUE0QztZQUM3QywrQkFBK0I7WUFDL0JULGFBQWFDLElBQUksQ0FBQ0MsVUFBVSxDQUFDSyxpQkFBaUIsQ0FBQztnQkFDN0MzQyxNQUFNO29CQUFFOEMsU0FBUztnQkFBSztnQkFDdEJHLE9BQU87WUFDVDtZQUVBLE1BQU1tQixVQUFVLElBQUl0RCxRQUFRLDZDQUE2QztnQkFDdkVFLFFBQVE7Z0JBQ1JDLFNBQVM7b0JBQUUsZ0JBQWdCO2dCQUFtQjtnQkFDOUNRLE1BQU1DLEtBQUsyQyxTQUFTLENBQUM7b0JBQ25CUCxPQUFPO2dCQUNUO1lBQ0Y7WUFFQSxNQUFNTCxXQUFXLE1BQU1hLElBQUFBLFVBQWMsRUFBQ0Y7WUFDdEMsTUFBTXBFLE9BQU8sTUFBTXlELFNBQVMxRCxJQUFJO1lBRWhDNEQsT0FBT0YsU0FBU3ZELE1BQU0sRUFBRTBELElBQUksQ0FBQztZQUM3QkQsT0FBTzNELEtBQUtrRCxPQUFPLEVBQUVVLElBQUksQ0FBQztZQUMxQkQsT0FBTzNELEtBQUtpRCxLQUFLLENBQUNpQixJQUFJLEVBQUVOLElBQUksQ0FBQztRQUMvQjtRQUVBZixHQUFHLDJDQUEyQztZQUM1Qyw2QkFBNkI7WUFDN0JULGFBQWFDLElBQUksQ0FBQ0MsVUFBVSxDQUFDSyxpQkFBaUIsQ0FBQztnQkFDN0MzQyxNQUFNO29CQUFFOEMsU0FBUzt3QkFBRUMsTUFBTTs0QkFBRUMsSUFBSTt3QkFBVztvQkFBRTtnQkFBRTtnQkFDOUNDLE9BQU87WUFDVDtZQUVBLHdCQUF3QjtZQUN4QmxCLG1CQUFtQlksaUJBQWlCLENBQUM7Z0JBQ25DTyxTQUFTO2dCQUNURCxPQUFPO29CQUNMaUIsTUFBTTtvQkFDTkMsU0FBUztvQkFDVEssU0FBUzt3QkFBQzs0QkFBRUMsTUFBTTtnQ0FBQzs2QkFBMkI7NEJBQUVOLFNBQVM7d0JBQWM7cUJBQUU7Z0JBQzNFO1lBQ0Y7WUFFQSxNQUFNQyxVQUFVLElBQUl0RCxRQUFRLDZDQUE2QztnQkFDdkVFLFFBQVE7Z0JBQ1JDLFNBQVM7b0JBQUUsZ0JBQWdCO2dCQUFtQjtnQkFDOUNRLE1BQU1DLEtBQUsyQyxTQUFTLENBQUM7b0JBQ25CUCxPQUFPO29CQUNQRyxjQUFjO2dCQUNoQjtZQUNGO1lBRUEsTUFBTVIsV0FBVyxNQUFNYSxJQUFBQSxVQUFjLEVBQUNGO1lBQ3RDLE1BQU1wRSxPQUFPLE1BQU15RCxTQUFTMUQsSUFBSTtZQUVoQzRELE9BQU9GLFNBQVN2RCxNQUFNLEVBQUUwRCxJQUFJLENBQUM7WUFDN0JELE9BQU8zRCxLQUFLa0QsT0FBTyxFQUFFVSxJQUFJLENBQUM7WUFDMUJELE9BQU8zRCxLQUFLaUQsS0FBSyxDQUFDaUIsSUFBSSxFQUFFTixJQUFJLENBQUM7UUFDL0I7UUFFQWYsR0FBRyxpREFBaUQ7WUFDbEQsNkJBQTZCO1lBQzdCVCxhQUFhQyxJQUFJLENBQUNDLFVBQVUsQ0FBQ0ssaUJBQWlCLENBQUM7Z0JBQzdDM0MsTUFBTTtvQkFBRThDLFNBQVM7d0JBQUVDLE1BQU07NEJBQUVDLElBQUk7d0JBQVc7b0JBQUU7Z0JBQUU7Z0JBQzlDQyxPQUFPO1lBQ1Q7WUFFQSxzQkFBc0I7WUFDdEJsQixtQkFBbUJZLGlCQUFpQixDQUFDO2dCQUNuQ08sU0FBUztnQkFDVEQsT0FBTztvQkFDTGlCLE1BQU07b0JBQ05DLFNBQVM7Z0JBQ1g7WUFDRjtZQUVBLE1BQU1DLFVBQVUsSUFBSXRELFFBQVEsNkNBQTZDO2dCQUN2RUUsUUFBUTtnQkFDUkMsU0FBUztvQkFBRSxnQkFBZ0I7Z0JBQW1CO2dCQUM5Q1EsTUFBTUMsS0FBSzJDLFNBQVMsQ0FBQztvQkFDbkJQLE9BQU87Z0JBQ1Q7WUFDRjtZQUVBLE1BQU1MLFdBQVcsTUFBTWEsSUFBQUEsVUFBYyxFQUFDRjtZQUN0QyxNQUFNcEUsT0FBTyxNQUFNeUQsU0FBUzFELElBQUk7WUFFaEM0RCxPQUFPRixTQUFTdkQsTUFBTSxFQUFFMEQsSUFBSSxDQUFDO1lBQzdCRCxPQUFPM0QsS0FBS2tELE9BQU8sRUFBRVUsSUFBSSxDQUFDO1lBQzFCRCxPQUFPM0QsS0FBS2lELEtBQUssQ0FBQ2lCLElBQUksRUFBRU4sSUFBSSxDQUFDO1FBQy9CO1FBRUFmLEdBQUcscUNBQXFDO1lBQ3RDLDZCQUE2QjtZQUM3QlQsYUFBYUMsSUFBSSxDQUFDQyxVQUFVLENBQUNLLGlCQUFpQixDQUFDO2dCQUM3QzNDLE1BQU07b0JBQUU4QyxTQUFTO3dCQUFFQyxNQUFNOzRCQUFFQyxJQUFJO3dCQUFXO29CQUFFO2dCQUFFO2dCQUM5Q0MsT0FBTztZQUNUO1lBRUEsd0JBQXdCO1lBQ3hCbEIsbUJBQW1CWSxpQkFBaUIsQ0FBQztnQkFDbkNPLFNBQVM7Z0JBQ1RsRCxNQUFNO29CQUNKZ0QsSUFBSTtvQkFDSkcsaUJBQWlCO29CQUNqQkMsb0JBQW9CO29CQUNwQkMsMkJBQTJCO29CQUMzQkMsMEJBQTBCO29CQUMxQkMsWUFBWTtvQkFDWkMsWUFBWTtnQkFDZDtZQUNGO1lBRUEsTUFBTVksVUFBVSxJQUFJdEQsUUFBUSw2Q0FBNkM7Z0JBQ3ZFRSxRQUFRO2dCQUNSQyxTQUFTO29CQUFFLGdCQUFnQjtnQkFBbUI7Z0JBQzlDUSxNQUFNQyxLQUFLMkMsU0FBUyxDQUFDO29CQUNuQlAsT0FBTztvQkFDUEMsVUFBVTtvQkFDVkMsZ0JBQWdCO29CQUNoQkMsY0FBYztnQkFDaEI7WUFDRjtZQUVBLE1BQU1SLFdBQVcsTUFBTWEsSUFBQUEsVUFBYyxFQUFDRjtZQUN0QyxNQUFNcEUsT0FBTyxNQUFNeUQsU0FBUzFELElBQUk7WUFFaEM0RCxPQUFPRixTQUFTdkQsTUFBTSxFQUFFMEQsSUFBSSxDQUFDO1lBQzdCRCxPQUFPM0QsS0FBS2tELE9BQU8sRUFBRVUsSUFBSSxDQUFDO1FBQzVCO0lBQ0Y7SUFFQXpCLFNBQVMscUNBQXFDO1FBQzVDVSxHQUFHLHVEQUF1RDtZQUN4RCw2QkFBNkI7WUFDN0JULGFBQWFDLElBQUksQ0FBQ0MsVUFBVSxDQUFDSyxpQkFBaUIsQ0FBQztnQkFDN0MzQyxNQUFNO29CQUFFOEMsU0FBUzt3QkFBRUMsTUFBTTs0QkFBRUMsSUFBSTt3QkFBVztvQkFBRTtnQkFBRTtnQkFDOUNDLE9BQU87WUFDVDtZQUVBLHdCQUF3QjtZQUN4QmpCLGlCQUFpQlcsaUJBQWlCLENBQUM7Z0JBQ2pDTyxTQUFTO2dCQUNUbEQsTUFBTTtvQkFDSjt3QkFDRWdELElBQUk7d0JBQ0owQixVQUFVO3dCQUNWQyxRQUFRO3dCQUNSQyxjQUFjO3dCQUNkQyxRQUFRO3dCQUNSQyxTQUFTLEVBQUU7b0JBQ2I7b0JBQ0E7d0JBQ0U5QixJQUFJO3dCQUNKMEIsVUFBVTt3QkFDVkMsUUFBUTt3QkFDUkMsY0FBYzt3QkFDZEMsUUFBUTt3QkFDUkMsU0FBUyxFQUFFO29CQUNiO2lCQUNEO1lBQ0g7WUFFQSxNQUFNckIsV0FBVyxNQUFNc0IsSUFBQUEsV0FBbUI7WUFDMUMsTUFBTS9FLE9BQU8sTUFBTXlELFNBQVMxRCxJQUFJO1lBRWhDNEQsT0FBT0YsU0FBU3ZELE1BQU0sRUFBRTBELElBQUksQ0FBQztZQUM3QkQsT0FBTzNELEtBQUtrRCxPQUFPLEVBQUVVLElBQUksQ0FBQztZQUMxQkQsT0FBTzNELEtBQUtBLElBQUksRUFBRWdGLFlBQVksQ0FBQztZQUMvQnJCLE9BQU8zRCxLQUFLQSxJQUFJLENBQUMsRUFBRSxDQUFDMEUsUUFBUSxFQUFFZCxJQUFJLENBQUM7WUFDbkNELE9BQU8zRCxLQUFLQSxJQUFJLENBQUMsRUFBRSxDQUFDMkUsTUFBTSxFQUFFZixJQUFJLENBQUM7WUFFakNELE9BQU8zQixrQkFBa0J1QyxvQkFBb0IsQ0FBQyxRQUFRO1FBQ3hEO1FBRUExQixHQUFHLDRDQUE0QztZQUM3QywrQkFBK0I7WUFDL0JULGFBQWFDLElBQUksQ0FBQ0MsVUFBVSxDQUFDSyxpQkFBaUIsQ0FBQztnQkFDN0MzQyxNQUFNO29CQUFFOEMsU0FBUztnQkFBSztnQkFDdEJHLE9BQU87WUFDVDtZQUVBLE1BQU1RLFdBQVcsTUFBTXNCLElBQUFBLFdBQW1CO1lBQzFDLE1BQU0vRSxPQUFPLE1BQU15RCxTQUFTMUQsSUFBSTtZQUVoQzRELE9BQU9GLFNBQVN2RCxNQUFNLEVBQUUwRCxJQUFJLENBQUM7WUFDN0JELE9BQU8zRCxLQUFLa0QsT0FBTyxFQUFFVSxJQUFJLENBQUM7WUFDMUJELE9BQU8zRCxLQUFLaUQsS0FBSyxDQUFDaUIsSUFBSSxFQUFFTixJQUFJLENBQUM7UUFDL0I7UUFFQWYsR0FBRyxpREFBaUQ7WUFDbEQsNkJBQTZCO1lBQzdCVCxhQUFhQyxJQUFJLENBQUNDLFVBQVUsQ0FBQ0ssaUJBQWlCLENBQUM7Z0JBQzdDM0MsTUFBTTtvQkFBRThDLFNBQVM7d0JBQUVDLE1BQU07NEJBQUVDLElBQUk7d0JBQVc7b0JBQUU7Z0JBQUU7Z0JBQzlDQyxPQUFPO1lBQ1Q7WUFFQSw4QkFBOEI7WUFDOUJqQixpQkFBaUJXLGlCQUFpQixDQUFDO2dCQUNqQ08sU0FBUztnQkFDVEQsT0FBTztvQkFDTGlCLE1BQU07b0JBQ05DLFNBQVM7Z0JBQ1g7WUFDRjtZQUVBLE1BQU1WLFdBQVcsTUFBTXNCLElBQUFBLFdBQW1CO1lBQzFDLE1BQU0vRSxPQUFPLE1BQU15RCxTQUFTMUQsSUFBSTtZQUVoQzRELE9BQU9GLFNBQVN2RCxNQUFNLEVBQUUwRCxJQUFJLENBQUM7WUFDN0JELE9BQU8zRCxLQUFLa0QsT0FBTyxFQUFFVSxJQUFJLENBQUM7WUFDMUJELE9BQU8zRCxLQUFLaUQsS0FBSyxDQUFDaUIsSUFBSSxFQUFFTixJQUFJLENBQUM7UUFDL0I7SUFDRjtBQUNGIn0=