{"version":3,"names":["cov_1j8wpu7d51","actualCoverage","s","InlineSectionEditor","pageType","pageId","entityName","defaultExpanded","b","f","isExpanded","setIsExpanded","_react","useState","sectionCount","setSectionCount","loading","setLoading","fetchSectionCount","useCallback","response","fetch","result","json","success","data","length","error","console","useEffect","handleToggle","prev","handleSectionSave","_jsxruntime","jsxs","className","onClick","jsx","_SectionEditor","SectionEditor","onSave"],"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/InlineSectionEditor.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, useEffect } from 'react';\nimport { SectionEditor } from './SectionEditor';\nimport { Button } from '@/components/ui/Button';\n\ninterface InlineSectionEditorProps {\n  pageType: 'activity' | 'event' | 'accommodation' | 'room_type' | 'custom' | 'home';\n  pageId: string;\n  entityName?: string;\n  defaultExpanded?: boolean;\n}\n\n/**\n * InlineSectionEditor - Embeddable section editor for admin pages\n * \n * Displays section management inline underneath the entity being edited.\n * \n * Features:\n * - Collapsible/expandable interface\n * - Shows section count\n * - Embedded SectionEditor component\n * - Minimal visual footprint when collapsed\n */\nexport function InlineSectionEditor({ \n  pageType, \n  pageId, \n  entityName,\n  defaultExpanded = false \n}: InlineSectionEditorProps) {\n  const [isExpanded, setIsExpanded] = useState(defaultExpanded);\n  const [sectionCount, setSectionCount] = useState<number>(0);\n  const [loading, setLoading] = useState(false);\n\n  // Fetch section count\n  const fetchSectionCount = useCallback(async () => {\n    if (!pageId) return;\n    \n    setLoading(true);\n    try {\n      const response = await fetch(`/api/admin/sections/by-page/${pageType}/${pageId}`);\n      const result = await response.json();\n      \n      if (result.success) {\n        setSectionCount(result.data?.length || 0);\n      }\n    } catch (error) {\n      console.error('Failed to fetch section count:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [pageType, pageId]);\n\n  // Fetch count on mount and when pageId changes\n  useEffect(() => {\n    fetchSectionCount();\n  }, [fetchSectionCount]);\n\n  const handleToggle = () => {\n    setIsExpanded(prev => !prev);\n  };\n\n  const handleSectionSave = () => {\n    // Refresh section count after save\n    fetchSectionCount();\n  };\n\n  if (!pageId) {\n    return null;\n  }\n\n  return (\n    <div className=\"border border-gray-200 rounded-lg bg-white mt-6\">\n      {/* Header - always visible */}\n      <button\n        onClick={handleToggle}\n        className=\"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors text-left\"\n      >\n        <div className=\"flex items-center gap-3\">\n          <span className=\"font-semibold text-gray-900\">\n            Page Sections\n            {entityName && <span className=\"text-gray-500 font-normal ml-2\">for {entityName}</span>}\n          </span>\n          <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-jungle-100 text-jungle-800\">\n            {loading ? '...' : `${sectionCount} section${sectionCount !== 1 ? 's' : ''}`}\n          </span>\n        </div>\n        <span className=\"text-gray-500\">{isExpanded ? '▼' : '▶'}</span>\n      </button>\n\n      {/* Section Editor - shown when expanded */}\n      {isExpanded && (\n        <div className=\"border-t border-gray-200 p-6 bg-gray-50\">\n          <SectionEditor\n            pageType={pageType}\n            pageId={pageId}\n            onSave={handleSectionSave}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]}