a7c68d8ce42b83b374fd0868d232e71c
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
const _fastcheck = /*#__PURE__*/ _interop_require_wildcard(require("fast-check"));
const _contentPagesService = /*#__PURE__*/ _interop_require_wildcard(require("./contentPagesService"));
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Mock Supabase before importing contentPagesService
const mockFrom = _globals.jest.fn();
_globals.jest.mock('@/lib/supabase', ()=>({
        supabase: {
            from: mockFrom
        }
    }));
/**
 * Feature: admin-backend-integration-cms, Property 2: Slug Preservation on Update
 * 
 * For any valid content page update, when updating a page without explicitly
 * changing the slug, the original slug SHALL be preserved.
 * 
 * Validates: Requirements 1.2
 */ (0, _globals.describe)('Feature: admin-backend-integration-cms, Property 2: Slug Preservation on Update', ()=>{
    (0, _globals.beforeEach)(()=>{
        _globals.jest.clearAllMocks();
    });
    // Generator for valid content page data
    const validContentPageArbitrary = _fastcheck.record({
        id: _fastcheck.uuid(),
        title: _fastcheck.string({
            minLength: 1,
            maxLength: 200
        }).filter((s)=>s.trim().length > 0).filter((s)=>{
            const slug = s.toLowerCase().trim().replace(/[^\w\s-]/g, '').replace(/\s+/g, '-').replace(/-+/g, '-').replace(/^-+|-+$/g, '');
            return slug.length > 0 && /[a-z0-9]/.test(slug);
        }),
        slug: _fastcheck.string({
            minLength: 1,
            maxLength: 200
        }).filter((s)=>s.trim().length > 0).filter((s)=>{
            const normalized = s.toLowerCase().replace(/[^\w\s-]/g, '').replace(/_/g, '-').replace(/\s+/g, '-').replace(/-+/g, '-').replace(/^-+|-+$/g, '');
            return normalized.length > 0 && /[a-z0-9]/.test(normalized);
        }).map((s)=>s.toLowerCase().replace(/[^\w\s-]/g, '').replace(/_/g, '-').replace(/\s+/g, '-').replace(/-+/g, '-').replace(/^-+|-+$/g, '')),
        status: _fastcheck.constantFrom('draft', 'published')
    });
    // Generator for update data without slug
    const updateWithoutSlugArbitrary = _fastcheck.record({
        title: _fastcheck.option(_fastcheck.string({
            minLength: 1,
            maxLength: 200
        }).filter((s)=>s.trim().length > 0).filter((s)=>{
            const slug = s.toLowerCase().trim().replace(/[^\w\s-]/g, '').replace(/\s+/g, '-').replace(/-+/g, '-').replace(/^-+|-+$/g, '');
            return slug.length > 0 && /[a-z0-9]/.test(slug);
        }), {
            nil: undefined
        }),
        status: _fastcheck.option(_fastcheck.constantFrom('draft', 'published'), {
            nil: undefined
        })
    });
    (0, _globals.it)('should preserve original slug when updating without explicit slug change', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(validContentPageArbitrary, updateWithoutSlugArbitrary, async (existingPage, updateData)=>{
            const originalSlug = existingPage.slug;
            // Mock database to return the existing page and then the updated page
            mockFrom.mockImplementation(()=>{
                const mockQuery = {
                    select: _globals.jest.fn().mockReturnThis(),
                    eq: _globals.jest.fn().mockReturnThis(),
                    neq: _globals.jest.fn().mockReturnThis(),
                    single: _globals.jest.fn().mockResolvedValue({
                        data: null,
                        error: {
                            code: 'PGRST116'
                        }
                    }),
                    update: _globals.jest.fn().mockReturnThis()
                };
                // Mock update to return the updated page with preserved slug
                mockQuery.update.mockReturnValue({
                    eq: _globals.jest.fn().mockReturnValue({
                        select: _globals.jest.fn().mockReturnValue({
                            single: _globals.jest.fn().mockResolvedValue({
                                data: {
                                    id: existingPage.id,
                                    title: updateData.title || existingPage.title,
                                    slug: originalSlug,
                                    status: updateData.status || existingPage.status,
                                    created_at: new Date().toISOString(),
                                    updated_at: new Date().toISOString()
                                },
                                error: null
                            })
                        })
                    })
                });
                return mockQuery;
            });
            const result = await _contentPagesService.updateContentPage(existingPage.id, updateData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                // Property: Slug should be preserved when not explicitly changed
                (0, _globals.expect)(result.data.slug).toBe(originalSlug);
                // Property: Other fields should be updated
                if (updateData.title) {
                    (0, _globals.expect)(result.data.title).toBe(updateData.title);
                }
                if (updateData.status) {
                    (0, _globals.expect)(result.data.status).toBe(updateData.status);
                }
            }
        }), {
            numRuns: 100
        });
    });
    (0, _globals.it)('should update slug when explicitly provided in update', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(validContentPageArbitrary, _fastcheck.string({
            minLength: 1,
            maxLength: 200
        }).filter((s)=>s.trim().length > 0).filter((s)=>{
            const normalized = s.toLowerCase().replace(/[^\w\s-]/g, '').replace(/_/g, '-').replace(/\s+/g, '-').replace(/-+/g, '-').replace(/^-+|-+$/g, '');
            return normalized.length > 0 && /[a-z0-9]/.test(normalized);
        }).map((s)=>s.toLowerCase().replace(/[^\w\s-]/g, '').replace(/_/g, '-').replace(/\s+/g, '-').replace(/-+/g, '-').replace(/^-+|-+$/g, '')), async (existingPage, newSlug)=>{
            // Ensure new slug is different from original
            _fastcheck.pre(newSlug !== existingPage.slug);
            const originalSlug = existingPage.slug;
            // Mock database to check uniqueness and return updated page
            mockFrom.mockImplementation(()=>{
                const mockQuery = {
                    select: _globals.jest.fn().mockReturnThis(),
                    eq: _globals.jest.fn().mockReturnThis(),
                    neq: _globals.jest.fn().mockReturnThis(),
                    single: _globals.jest.fn().mockResolvedValue({
                        data: null,
                        error: {
                            code: 'PGRST116'
                        }
                    }),
                    update: _globals.jest.fn().mockReturnThis()
                };
                // Mock update to return the updated page with new slug
                mockQuery.update.mockReturnValue({
                    eq: _globals.jest.fn().mockReturnValue({
                        select: _globals.jest.fn().mockReturnValue({
                            single: _globals.jest.fn().mockResolvedValue({
                                data: {
                                    id: existingPage.id,
                                    title: existingPage.title,
                                    slug: newSlug,
                                    status: existingPage.status,
                                    created_at: new Date().toISOString(),
                                    updated_at: new Date().toISOString()
                                },
                                error: null
                            })
                        })
                    })
                });
                return mockQuery;
            });
            const result = await _contentPagesService.updateContentPage(existingPage.id, {
                slug: newSlug
            });
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                // Property: Slug should be updated when explicitly provided
                (0, _globals.expect)(result.data.slug).toBe(newSlug);
                (0, _globals.expect)(result.data.slug).not.toBe(originalSlug);
            }
        }), {
            numRuns: 100
        });
    });
    (0, _globals.it)('should preserve slug when updating only title', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(validContentPageArbitrary, _fastcheck.string({
            minLength: 1,
            maxLength: 200
        }).filter((s)=>s.trim().length > 0).filter((s)=>{
            const slug = s.toLowerCase().trim().replace(/[^\w\s-]/g, '').replace(/\s+/g, '-').replace(/-+/g, '-').replace(/^-+|-+$/g, '');
            return slug.length > 0 && /[a-z0-9]/.test(slug);
        }), async (existingPage, newTitle)=>{
            const originalSlug = existingPage.slug;
            // Mock database
            mockFrom.mockImplementation(()=>{
                const mockQuery = {
                    select: _globals.jest.fn().mockReturnThis(),
                    eq: _globals.jest.fn().mockReturnThis(),
                    neq: _globals.jest.fn().mockReturnThis(),
                    single: _globals.jest.fn().mockResolvedValue({
                        data: null,
                        error: {
                            code: 'PGRST116'
                        }
                    }),
                    update: _globals.jest.fn().mockReturnThis()
                };
                mockQuery.update.mockReturnValue({
                    eq: _globals.jest.fn().mockReturnValue({
                        select: _globals.jest.fn().mockReturnValue({
                            single: _globals.jest.fn().mockResolvedValue({
                                data: {
                                    id: existingPage.id,
                                    title: newTitle,
                                    slug: originalSlug,
                                    status: existingPage.status,
                                    created_at: new Date().toISOString(),
                                    updated_at: new Date().toISOString()
                                },
                                error: null
                            })
                        })
                    })
                });
                return mockQuery;
            });
            const result = await _contentPagesService.updateContentPage(existingPage.id, {
                title: newTitle
            });
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                // Property: Slug should remain unchanged when only title is updated
                (0, _globals.expect)(result.data.slug).toBe(originalSlug);
                // Property: Title should be updated
                (0, _globals.expect)(result.data.title).toBe(newTitle);
            }
        }), {
            numRuns: 100
        });
    });
    (0, _globals.it)('should preserve slug when updating only status', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(validContentPageArbitrary, async (existingPage)=>{
            const originalSlug = existingPage.slug;
            const newStatus = existingPage.status === 'draft' ? 'published' : 'draft';
            // Mock database
            mockFrom.mockImplementation(()=>{
                const mockQuery = {
                    select: _globals.jest.fn().mockReturnThis(),
                    eq: _globals.jest.fn().mockReturnThis(),
                    neq: _globals.jest.fn().mockReturnThis(),
                    single: _globals.jest.fn().mockResolvedValue({
                        data: null,
                        error: {
                            code: 'PGRST116'
                        }
                    }),
                    update: _globals.jest.fn().mockReturnThis()
                };
                mockQuery.update.mockReturnValue({
                    eq: _globals.jest.fn().mockReturnValue({
                        select: _globals.jest.fn().mockReturnValue({
                            single: _globals.jest.fn().mockResolvedValue({
                                data: {
                                    id: existingPage.id,
                                    title: existingPage.title,
                                    slug: originalSlug,
                                    status: newStatus,
                                    created_at: new Date().toISOString(),
                                    updated_at: new Date().toISOString()
                                },
                                error: null
                            })
                        })
                    })
                });
                return mockQuery;
            });
            const result = await _contentPagesService.updateContentPage(existingPage.id, {
                status: newStatus
            });
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                // Property: Slug should remain unchanged when only status is updated
                (0, _globals.expect)(result.data.slug).toBe(originalSlug);
                // Property: Status should be updated
                (0, _globals.expect)(result.data.status).toBe(newStatus);
            }
        }), {
            numRuns: 100
        });
    });
    (0, _globals.it)('should preserve slug across multiple updates without slug changes', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(validContentPageArbitrary, _fastcheck.array(updateWithoutSlugArbitrary, {
            minLength: 2,
            maxLength: 5
        }), async (existingPage, updates)=>{
            const originalSlug = existingPage.slug;
            let currentPage = {
                ...existingPage
            };
            for (const updateData of updates){
                // Mock database for each update
                mockFrom.mockImplementation(()=>{
                    const mockQuery = {
                        select: _globals.jest.fn().mockReturnThis(),
                        eq: _globals.jest.fn().mockReturnThis(),
                        neq: _globals.jest.fn().mockReturnThis(),
                        single: _globals.jest.fn().mockResolvedValue({
                            data: null,
                            error: {
                                code: 'PGRST116'
                            }
                        }),
                        update: _globals.jest.fn().mockReturnThis()
                    };
                    mockQuery.update.mockReturnValue({
                        eq: _globals.jest.fn().mockReturnValue({
                            select: _globals.jest.fn().mockReturnValue({
                                single: _globals.jest.fn().mockResolvedValue({
                                    data: {
                                        id: currentPage.id,
                                        title: updateData.title || currentPage.title,
                                        slug: originalSlug,
                                        status: updateData.status || currentPage.status,
                                        created_at: new Date().toISOString(),
                                        updated_at: new Date().toISOString()
                                    },
                                    error: null
                                })
                            })
                        })
                    });
                    return mockQuery;
                });
                const result = await _contentPagesService.updateContentPage(currentPage.id, updateData);
                (0, _globals.expect)(result.success).toBe(true);
                if (result.success) {
                    // Property: Slug should remain the same across all updates
                    (0, _globals.expect)(result.data.slug).toBe(originalSlug);
                    // Update current page for next iteration
                    currentPage = result.data;
                }
            }
            // Final check: slug should still be the original
            (0, _globals.expect)(currentPage.slug).toBe(originalSlug);
        }), {
            numRuns: 50
        } // Reduced runs for multiple async operations
        );
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvc2VydmljZXMvY29udGVudFBhZ2VzU2VydmljZS5zbHVnUHJlc2VydmF0aW9uLnByb3BlcnR5LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QsIGplc3QsIGJlZm9yZUVhY2ggfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCAqIGFzIGZjIGZyb20gJ2Zhc3QtY2hlY2snO1xuXG4vLyBNb2NrIFN1cGFiYXNlIGJlZm9yZSBpbXBvcnRpbmcgY29udGVudFBhZ2VzU2VydmljZVxuY29uc3QgbW9ja0Zyb20gPSBqZXN0LmZuKCk7XG5qZXN0Lm1vY2soJ0AvbGliL3N1cGFiYXNlJywgKCkgPT4gKHtcbiAgc3VwYWJhc2U6IHtcbiAgICBmcm9tOiBtb2NrRnJvbSxcbiAgfSxcbn0pKTtcblxuLy8gSW1wb3J0IGFmdGVyIG1vY2tpbmdcbmltcG9ydCAqIGFzIGNvbnRlbnRQYWdlc1NlcnZpY2UgZnJvbSAnLi9jb250ZW50UGFnZXNTZXJ2aWNlJztcblxuLyoqXG4gKiBGZWF0dXJlOiBhZG1pbi1iYWNrZW5kLWludGVncmF0aW9uLWNtcywgUHJvcGVydHkgMjogU2x1ZyBQcmVzZXJ2YXRpb24gb24gVXBkYXRlXG4gKiBcbiAqIEZvciBhbnkgdmFsaWQgY29udGVudCBwYWdlIHVwZGF0ZSwgd2hlbiB1cGRhdGluZyBhIHBhZ2Ugd2l0aG91dCBleHBsaWNpdGx5XG4gKiBjaGFuZ2luZyB0aGUgc2x1ZywgdGhlIG9yaWdpbmFsIHNsdWcgU0hBTEwgYmUgcHJlc2VydmVkLlxuICogXG4gKiBWYWxpZGF0ZXM6IFJlcXVpcmVtZW50cyAxLjJcbiAqL1xuZGVzY3JpYmUoJ0ZlYXR1cmU6IGFkbWluLWJhY2tlbmQtaW50ZWdyYXRpb24tY21zLCBQcm9wZXJ0eSAyOiBTbHVnIFByZXNlcnZhdGlvbiBvbiBVcGRhdGUnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICAvLyBHZW5lcmF0b3IgZm9yIHZhbGlkIGNvbnRlbnQgcGFnZSBkYXRhXG4gIGNvbnN0IHZhbGlkQ29udGVudFBhZ2VBcmJpdHJhcnkgPSBmYy5yZWNvcmQoe1xuICAgIGlkOiBmYy51dWlkKCksXG4gICAgdGl0bGU6IGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiAyMDAgfSlcbiAgICAgIC5maWx0ZXIocyA9PiBzLnRyaW0oKS5sZW5ndGggPiAwKVxuICAgICAgLmZpbHRlcihzID0+IHtcbiAgICAgICAgY29uc3Qgc2x1ZyA9IHMudG9Mb3dlckNhc2UoKVxuICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAucmVwbGFjZSgvW15cXHdcXHMtXS9nLCAnJylcbiAgICAgICAgICAucmVwbGFjZSgvXFxzKy9nLCAnLScpXG4gICAgICAgICAgLnJlcGxhY2UoLy0rL2csICctJylcbiAgICAgICAgICAucmVwbGFjZSgvXi0rfC0rJC9nLCAnJyk7XG4gICAgICAgIHJldHVybiBzbHVnLmxlbmd0aCA+IDAgJiYgL1thLXowLTldLy50ZXN0KHNsdWcpO1xuICAgICAgfSksXG4gICAgc2x1ZzogZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDIwMCB9KVxuICAgICAgLmZpbHRlcihzID0+IHMudHJpbSgpLmxlbmd0aCA+IDApXG4gICAgICAuZmlsdGVyKHMgPT4ge1xuICAgICAgICBjb25zdCBub3JtYWxpemVkID0gcy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgLnJlcGxhY2UoL1teXFx3XFxzLV0vZywgJycpXG4gICAgICAgICAgLnJlcGxhY2UoL18vZywgJy0nKVxuICAgICAgICAgIC5yZXBsYWNlKC9cXHMrL2csICctJylcbiAgICAgICAgICAucmVwbGFjZSgvLSsvZywgJy0nKVxuICAgICAgICAgIC5yZXBsYWNlKC9eLSt8LSskL2csICcnKTtcbiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWQubGVuZ3RoID4gMCAmJiAvW2EtejAtOV0vLnRlc3Qobm9ybWFsaXplZCk7XG4gICAgICB9KVxuICAgICAgLm1hcChzID0+IHMudG9Mb3dlckNhc2UoKVxuICAgICAgICAucmVwbGFjZSgvW15cXHdcXHMtXS9nLCAnJylcbiAgICAgICAgLnJlcGxhY2UoL18vZywgJy0nKVxuICAgICAgICAucmVwbGFjZSgvXFxzKy9nLCAnLScpXG4gICAgICAgIC5yZXBsYWNlKC8tKy9nLCAnLScpXG4gICAgICAgIC5yZXBsYWNlKC9eLSt8LSskL2csICcnKVxuICAgICAgKSxcbiAgICBzdGF0dXM6IGZjLmNvbnN0YW50RnJvbSgnZHJhZnQnLCAncHVibGlzaGVkJykgYXMgZmMuQXJiaXRyYXJ5PCdkcmFmdCcgfCAncHVibGlzaGVkJz4sXG4gIH0pO1xuXG4gIC8vIEdlbmVyYXRvciBmb3IgdXBkYXRlIGRhdGEgd2l0aG91dCBzbHVnXG4gIGNvbnN0IHVwZGF0ZVdpdGhvdXRTbHVnQXJiaXRyYXJ5ID0gZmMucmVjb3JkKHtcbiAgICB0aXRsZTogZmMub3B0aW9uKFxuICAgICAgZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDIwMCB9KVxuICAgICAgICAuZmlsdGVyKHMgPT4gcy50cmltKCkubGVuZ3RoID4gMClcbiAgICAgICAgLmZpbHRlcihzID0+IHtcbiAgICAgICAgICBjb25zdCBzbHVnID0gcy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgICAucmVwbGFjZSgvW15cXHdcXHMtXS9nLCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXHMrL2csICctJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC8tKy9nLCAnLScpXG4gICAgICAgICAgICAucmVwbGFjZSgvXi0rfC0rJC9nLCAnJyk7XG4gICAgICAgICAgcmV0dXJuIHNsdWcubGVuZ3RoID4gMCAmJiAvW2EtejAtOV0vLnRlc3Qoc2x1Zyk7XG4gICAgICAgIH0pLFxuICAgICAgeyBuaWw6IHVuZGVmaW5lZCB9XG4gICAgKSxcbiAgICBzdGF0dXM6IGZjLm9wdGlvbihcbiAgICAgIGZjLmNvbnN0YW50RnJvbSgnZHJhZnQnLCAncHVibGlzaGVkJykgYXMgZmMuQXJiaXRyYXJ5PCdkcmFmdCcgfCAncHVibGlzaGVkJz4sXG4gICAgICB7IG5pbDogdW5kZWZpbmVkIH1cbiAgICApLFxuICB9KTtcblxuICBpdCgnc2hvdWxkIHByZXNlcnZlIG9yaWdpbmFsIHNsdWcgd2hlbiB1cGRhdGluZyB3aXRob3V0IGV4cGxpY2l0IHNsdWcgY2hhbmdlJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGZjLmFzc2VydChcbiAgICAgIGZjLmFzeW5jUHJvcGVydHkoXG4gICAgICAgIHZhbGlkQ29udGVudFBhZ2VBcmJpdHJhcnksXG4gICAgICAgIHVwZGF0ZVdpdGhvdXRTbHVnQXJiaXRyYXJ5LFxuICAgICAgICBhc3luYyAoZXhpc3RpbmdQYWdlLCB1cGRhdGVEYXRhKSA9PiB7XG4gICAgICAgICAgY29uc3Qgb3JpZ2luYWxTbHVnID0gZXhpc3RpbmdQYWdlLnNsdWc7XG5cbiAgICAgICAgICAvLyBNb2NrIGRhdGFiYXNlIHRvIHJldHVybiB0aGUgZXhpc3RpbmcgcGFnZSBhbmQgdGhlbiB0aGUgdXBkYXRlZCBwYWdlXG4gICAgICAgICAgbW9ja0Zyb20ubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1vY2tRdWVyeTogYW55ID0ge1xuICAgICAgICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgICAgICAgICBlcTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICAgICAgICAgIG5lcTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICAgICAgICAgIHNpbmdsZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgICAgIGVycm9yOiB7IGNvZGU6ICdQR1JTVDExNicgfSxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIHVwZGF0ZTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBNb2NrIHVwZGF0ZSB0byByZXR1cm4gdGhlIHVwZGF0ZWQgcGFnZSB3aXRoIHByZXNlcnZlZCBzbHVnXG4gICAgICAgICAgICBtb2NrUXVlcnkudXBkYXRlLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICAgIGVxOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgc2luZ2xlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IGV4aXN0aW5nUGFnZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdXBkYXRlRGF0YS50aXRsZSB8fCBleGlzdGluZ1BhZ2UudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgc2x1Zzogb3JpZ2luYWxTbHVnLCAvLyBTbHVnIHNob3VsZCBiZSBwcmVzZXJ2ZWRcbiAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHVwZGF0ZURhdGEuc3RhdHVzIHx8IGV4aXN0aW5nUGFnZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIG1vY2tRdWVyeTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRlbnRQYWdlc1NlcnZpY2UudXBkYXRlQ29udGVudFBhZ2UoXG4gICAgICAgICAgICBleGlzdGluZ1BhZ2UuaWQsXG4gICAgICAgICAgICB1cGRhdGVEYXRhXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIC8vIFByb3BlcnR5OiBTbHVnIHNob3VsZCBiZSBwcmVzZXJ2ZWQgd2hlbiBub3QgZXhwbGljaXRseSBjaGFuZ2VkXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuc2x1ZykudG9CZShvcmlnaW5hbFNsdWcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBQcm9wZXJ0eTogT3RoZXIgZmllbGRzIHNob3VsZCBiZSB1cGRhdGVkXG4gICAgICAgICAgICBpZiAodXBkYXRlRGF0YS50aXRsZSkge1xuICAgICAgICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEudGl0bGUpLnRvQmUodXBkYXRlRGF0YS50aXRsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXBkYXRlRGF0YS5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnN0YXR1cykudG9CZSh1cGRhdGVEYXRhLnN0YXR1cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApLFxuICAgICAgeyBudW1SdW5zOiAxMDAgfVxuICAgICk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgdXBkYXRlIHNsdWcgd2hlbiBleHBsaWNpdGx5IHByb3ZpZGVkIGluIHVwZGF0ZScsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBmYy5hc3NlcnQoXG4gICAgICBmYy5hc3luY1Byb3BlcnR5KFxuICAgICAgICB2YWxpZENvbnRlbnRQYWdlQXJiaXRyYXJ5LFxuICAgICAgICBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogMjAwIH0pXG4gICAgICAgICAgLmZpbHRlcihzID0+IHMudHJpbSgpLmxlbmd0aCA+IDApXG4gICAgICAgICAgLmZpbHRlcihzID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBzLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgLnJlcGxhY2UoL1teXFx3XFxzLV0vZywgJycpXG4gICAgICAgICAgICAgIC5yZXBsYWNlKC9fL2csICctJylcbiAgICAgICAgICAgICAgLnJlcGxhY2UoL1xccysvZywgJy0nKVxuICAgICAgICAgICAgICAucmVwbGFjZSgvLSsvZywgJy0nKVxuICAgICAgICAgICAgICAucmVwbGFjZSgvXi0rfC0rJC9nLCAnJyk7XG4gICAgICAgICAgICByZXR1cm4gbm9ybWFsaXplZC5sZW5ndGggPiAwICYmIC9bYS16MC05XS8udGVzdChub3JtYWxpemVkKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5tYXAocyA9PiBzLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgIC5yZXBsYWNlKC9bXlxcd1xccy1dL2csICcnKVxuICAgICAgICAgICAgLnJlcGxhY2UoL18vZywgJy0nKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xccysvZywgJy0nKVxuICAgICAgICAgICAgLnJlcGxhY2UoLy0rL2csICctJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9eLSt8LSskL2csICcnKVxuICAgICAgICAgICksXG4gICAgICAgIGFzeW5jIChleGlzdGluZ1BhZ2UsIG5ld1NsdWcpID0+IHtcbiAgICAgICAgICAvLyBFbnN1cmUgbmV3IHNsdWcgaXMgZGlmZmVyZW50IGZyb20gb3JpZ2luYWxcbiAgICAgICAgICBmYy5wcmUobmV3U2x1ZyAhPT0gZXhpc3RpbmdQYWdlLnNsdWcpO1xuXG4gICAgICAgICAgY29uc3Qgb3JpZ2luYWxTbHVnID0gZXhpc3RpbmdQYWdlLnNsdWc7XG5cbiAgICAgICAgICAvLyBNb2NrIGRhdGFiYXNlIHRvIGNoZWNrIHVuaXF1ZW5lc3MgYW5kIHJldHVybiB1cGRhdGVkIHBhZ2VcbiAgICAgICAgICBtb2NrRnJvbS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbW9ja1F1ZXJ5OiBhbnkgPSB7XG4gICAgICAgICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICAgICAgICAgIGVxOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgICAgICAgICAgbmVxOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgICAgICAgICAgc2luZ2xlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICAgICAgZXJyb3I6IHsgY29kZTogJ1BHUlNUMTE2JyB9LCAvLyBObyBjb25mbGljdFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgdXBkYXRlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIE1vY2sgdXBkYXRlIHRvIHJldHVybiB0aGUgdXBkYXRlZCBwYWdlIHdpdGggbmV3IHNsdWdcbiAgICAgICAgICAgIG1vY2tRdWVyeS51cGRhdGUubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgICAgZXE6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICBpZDogZXhpc3RpbmdQYWdlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBleGlzdGluZ1BhZ2UudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgc2x1ZzogbmV3U2x1ZywgLy8gU2x1ZyBzaG91bGQgYmUgdXBkYXRlZFxuICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogZXhpc3RpbmdQYWdlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gbW9ja1F1ZXJ5O1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udGVudFBhZ2VzU2VydmljZS51cGRhdGVDb250ZW50UGFnZShcbiAgICAgICAgICAgIGV4aXN0aW5nUGFnZS5pZCxcbiAgICAgICAgICAgIHsgc2x1ZzogbmV3U2x1ZyB9XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIC8vIFByb3BlcnR5OiBTbHVnIHNob3VsZCBiZSB1cGRhdGVkIHdoZW4gZXhwbGljaXRseSBwcm92aWRlZFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnNsdWcpLnRvQmUobmV3U2x1Zyk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuc2x1Zykubm90LnRvQmUob3JpZ2luYWxTbHVnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBwcmVzZXJ2ZSBzbHVnIHdoZW4gdXBkYXRpbmcgb25seSB0aXRsZScsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBmYy5hc3NlcnQoXG4gICAgICBmYy5hc3luY1Byb3BlcnR5KFxuICAgICAgICB2YWxpZENvbnRlbnRQYWdlQXJiaXRyYXJ5LFxuICAgICAgICBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogMjAwIH0pXG4gICAgICAgICAgLmZpbHRlcihzID0+IHMudHJpbSgpLmxlbmd0aCA+IDApXG4gICAgICAgICAgLmZpbHRlcihzID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNsdWcgPSBzLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgICAgICAucmVwbGFjZSgvW15cXHdcXHMtXS9nLCAnJylcbiAgICAgICAgICAgICAgLnJlcGxhY2UoL1xccysvZywgJy0nKVxuICAgICAgICAgICAgICAucmVwbGFjZSgvLSsvZywgJy0nKVxuICAgICAgICAgICAgICAucmVwbGFjZSgvXi0rfC0rJC9nLCAnJyk7XG4gICAgICAgICAgICByZXR1cm4gc2x1Zy5sZW5ndGggPiAwICYmIC9bYS16MC05XS8udGVzdChzbHVnKTtcbiAgICAgICAgICB9KSxcbiAgICAgICAgYXN5bmMgKGV4aXN0aW5nUGFnZSwgbmV3VGl0bGUpID0+IHtcbiAgICAgICAgICBjb25zdCBvcmlnaW5hbFNsdWcgPSBleGlzdGluZ1BhZ2Uuc2x1ZztcblxuICAgICAgICAgIC8vIE1vY2sgZGF0YWJhc2VcbiAgICAgICAgICBtb2NrRnJvbS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbW9ja1F1ZXJ5OiBhbnkgPSB7XG4gICAgICAgICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICAgICAgICAgIGVxOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgICAgICAgICAgbmVxOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgICAgICAgICAgc2luZ2xlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICAgICAgZXJyb3I6IHsgY29kZTogJ1BHUlNUMTE2JyB9LFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgdXBkYXRlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIG1vY2tRdWVyeS51cGRhdGUubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgICAgZXE6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICBpZDogZXhpc3RpbmdQYWdlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBuZXdUaXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICBzbHVnOiBvcmlnaW5hbFNsdWcsIC8vIFNsdWcgcHJlc2VydmVkXG4gICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBleGlzdGluZ1BhZ2Uuc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBtb2NrUXVlcnk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250ZW50UGFnZXNTZXJ2aWNlLnVwZGF0ZUNvbnRlbnRQYWdlKFxuICAgICAgICAgICAgZXhpc3RpbmdQYWdlLmlkLFxuICAgICAgICAgICAgeyB0aXRsZTogbmV3VGl0bGUgfVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICAvLyBQcm9wZXJ0eTogU2x1ZyBzaG91bGQgcmVtYWluIHVuY2hhbmdlZCB3aGVuIG9ubHkgdGl0bGUgaXMgdXBkYXRlZFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnNsdWcpLnRvQmUob3JpZ2luYWxTbHVnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUHJvcGVydHk6IFRpdGxlIHNob3VsZCBiZSB1cGRhdGVkXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEudGl0bGUpLnRvQmUobmV3VGl0bGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIHsgbnVtUnVuczogMTAwIH1cbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHByZXNlcnZlIHNsdWcgd2hlbiB1cGRhdGluZyBvbmx5IHN0YXR1cycsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBmYy5hc3NlcnQoXG4gICAgICBmYy5hc3luY1Byb3BlcnR5KFxuICAgICAgICB2YWxpZENvbnRlbnRQYWdlQXJiaXRyYXJ5LFxuICAgICAgICBhc3luYyAoZXhpc3RpbmdQYWdlKSA9PiB7XG4gICAgICAgICAgY29uc3Qgb3JpZ2luYWxTbHVnID0gZXhpc3RpbmdQYWdlLnNsdWc7XG4gICAgICAgICAgY29uc3QgbmV3U3RhdHVzID0gZXhpc3RpbmdQYWdlLnN0YXR1cyA9PT0gJ2RyYWZ0JyA/ICdwdWJsaXNoZWQnIDogJ2RyYWZ0JztcblxuICAgICAgICAgIC8vIE1vY2sgZGF0YWJhc2VcbiAgICAgICAgICBtb2NrRnJvbS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbW9ja1F1ZXJ5OiBhbnkgPSB7XG4gICAgICAgICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICAgICAgICAgIGVxOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgICAgICAgICAgbmVxOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgICAgICAgICAgc2luZ2xlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICAgICAgZXJyb3I6IHsgY29kZTogJ1BHUlNUMTE2JyB9LFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgdXBkYXRlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIG1vY2tRdWVyeS51cGRhdGUubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgICAgZXE6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICBpZDogZXhpc3RpbmdQYWdlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBleGlzdGluZ1BhZ2UudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgc2x1Zzogb3JpZ2luYWxTbHVnLCAvLyBTbHVnIHByZXNlcnZlZFxuICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogbmV3U3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBtb2NrUXVlcnk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250ZW50UGFnZXNTZXJ2aWNlLnVwZGF0ZUNvbnRlbnRQYWdlKFxuICAgICAgICAgICAgZXhpc3RpbmdQYWdlLmlkLFxuICAgICAgICAgICAgeyBzdGF0dXM6IG5ld1N0YXR1cyB9XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIC8vIFByb3BlcnR5OiBTbHVnIHNob3VsZCByZW1haW4gdW5jaGFuZ2VkIHdoZW4gb25seSBzdGF0dXMgaXMgdXBkYXRlZFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnNsdWcpLnRvQmUob3JpZ2luYWxTbHVnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUHJvcGVydHk6IFN0YXR1cyBzaG91bGQgYmUgdXBkYXRlZFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnN0YXR1cykudG9CZShuZXdTdGF0dXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIHsgbnVtUnVuczogMTAwIH1cbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHByZXNlcnZlIHNsdWcgYWNyb3NzIG11bHRpcGxlIHVwZGF0ZXMgd2l0aG91dCBzbHVnIGNoYW5nZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgZmMuYXNzZXJ0KFxuICAgICAgZmMuYXN5bmNQcm9wZXJ0eShcbiAgICAgICAgdmFsaWRDb250ZW50UGFnZUFyYml0cmFyeSxcbiAgICAgICAgZmMuYXJyYXkodXBkYXRlV2l0aG91dFNsdWdBcmJpdHJhcnksIHsgbWluTGVuZ3RoOiAyLCBtYXhMZW5ndGg6IDUgfSksXG4gICAgICAgIGFzeW5jIChleGlzdGluZ1BhZ2UsIHVwZGF0ZXMpID0+IHtcbiAgICAgICAgICBjb25zdCBvcmlnaW5hbFNsdWcgPSBleGlzdGluZ1BhZ2Uuc2x1ZztcbiAgICAgICAgICBsZXQgY3VycmVudFBhZ2UgPSB7IC4uLmV4aXN0aW5nUGFnZSB9O1xuXG4gICAgICAgICAgZm9yIChjb25zdCB1cGRhdGVEYXRhIG9mIHVwZGF0ZXMpIHtcbiAgICAgICAgICAgIC8vIE1vY2sgZGF0YWJhc2UgZm9yIGVhY2ggdXBkYXRlXG4gICAgICAgICAgICBtb2NrRnJvbS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBtb2NrUXVlcnk6IGFueSA9IHtcbiAgICAgICAgICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgICAgICAgICAgIGVxOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgICAgICAgICAgICBuZXE6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgICAgICAgICAgIHNpbmdsZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICAgICAgICBlcnJvcjogeyBjb2RlOiAnUEdSU1QxMTYnIH0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdXBkYXRlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICBtb2NrUXVlcnkudXBkYXRlLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICAgICAgZXE6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgICAgICAgICAgc2luZ2xlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBjdXJyZW50UGFnZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB1cGRhdGVEYXRhLnRpdGxlIHx8IGN1cnJlbnRQYWdlLnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2x1Zzogb3JpZ2luYWxTbHVnLCAvLyBBbHdheXMgcHJlc2VydmUgb3JpZ2luYWwgc2x1Z1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB1cGRhdGVEYXRhLnN0YXR1cyB8fCBjdXJyZW50UGFnZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgcmV0dXJuIG1vY2tRdWVyeTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250ZW50UGFnZXNTZXJ2aWNlLnVwZGF0ZUNvbnRlbnRQYWdlKFxuICAgICAgICAgICAgICBjdXJyZW50UGFnZS5pZCxcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgLy8gUHJvcGVydHk6IFNsdWcgc2hvdWxkIHJlbWFpbiB0aGUgc2FtZSBhY3Jvc3MgYWxsIHVwZGF0ZXNcbiAgICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnNsdWcpLnRvQmUob3JpZ2luYWxTbHVnKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFVwZGF0ZSBjdXJyZW50IHBhZ2UgZm9yIG5leHQgaXRlcmF0aW9uXG4gICAgICAgICAgICAgIGN1cnJlbnRQYWdlID0gcmVzdWx0LmRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gRmluYWwgY2hlY2s6IHNsdWcgc2hvdWxkIHN0aWxsIGJlIHRoZSBvcmlnaW5hbFxuICAgICAgICAgIGV4cGVjdChjdXJyZW50UGFnZS5zbHVnKS50b0JlKG9yaWdpbmFsU2x1Zyk7XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDUwIH0gLy8gUmVkdWNlZCBydW5zIGZvciBtdWx0aXBsZSBhc3luYyBvcGVyYXRpb25zXG4gICAgKTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJtb2NrRnJvbSIsImplc3QiLCJmbiIsIm1vY2siLCJzdXBhYmFzZSIsImZyb20iLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwidmFsaWRDb250ZW50UGFnZUFyYml0cmFyeSIsImZjIiwicmVjb3JkIiwiaWQiLCJ1dWlkIiwidGl0bGUiLCJzdHJpbmciLCJtaW5MZW5ndGgiLCJtYXhMZW5ndGgiLCJmaWx0ZXIiLCJzIiwidHJpbSIsImxlbmd0aCIsInNsdWciLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJ0ZXN0Iiwibm9ybWFsaXplZCIsIm1hcCIsInN0YXR1cyIsImNvbnN0YW50RnJvbSIsInVwZGF0ZVdpdGhvdXRTbHVnQXJiaXRyYXJ5Iiwib3B0aW9uIiwibmlsIiwidW5kZWZpbmVkIiwiaXQiLCJhc3NlcnQiLCJhc3luY1Byb3BlcnR5IiwiZXhpc3RpbmdQYWdlIiwidXBkYXRlRGF0YSIsIm9yaWdpbmFsU2x1ZyIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsIm1vY2tRdWVyeSIsInNlbGVjdCIsIm1vY2tSZXR1cm5UaGlzIiwiZXEiLCJuZXEiLCJzaW5nbGUiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImRhdGEiLCJlcnJvciIsImNvZGUiLCJ1cGRhdGUiLCJtb2NrUmV0dXJuVmFsdWUiLCJjcmVhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidXBkYXRlZF9hdCIsInJlc3VsdCIsImNvbnRlbnRQYWdlc1NlcnZpY2UiLCJ1cGRhdGVDb250ZW50UGFnZSIsImV4cGVjdCIsInN1Y2Nlc3MiLCJ0b0JlIiwibnVtUnVucyIsIm5ld1NsdWciLCJwcmUiLCJub3QiLCJuZXdUaXRsZSIsIm5ld1N0YXR1cyIsImFycmF5IiwidXBkYXRlcyIsImN1cnJlbnRQ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