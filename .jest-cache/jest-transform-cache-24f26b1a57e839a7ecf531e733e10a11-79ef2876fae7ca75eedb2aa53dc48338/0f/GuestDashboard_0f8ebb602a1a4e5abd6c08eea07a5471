317e40e63421618c85d852c9a7834ca2
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "GuestDashboard", {
    enumerable: true,
    get: function() {
        return GuestDashboard;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
function GuestDashboard({ guest }) {
    const [upcomingEvents, setUpcomingEvents] = (0, _react.useState)([]);
    const [rsvpSummary, setRsvpSummary] = (0, _react.useState)({
        total: 0,
        attending: 0,
        declined: 0,
        pending: 0,
        maybe: 0
    });
    const [loading, setLoading] = (0, _react.useState)(true);
    const [error, setError] = (0, _react.useState)(null);
    (0, _react.useEffect)(()=>{
        async function loadDashboardData() {
            try {
                setLoading(true);
                setError(null);
                // Fetch upcoming events and RSVPs
                const [eventsResponse, rsvpsResponse] = await Promise.all([
                    fetch('/api/guest/events'),
                    fetch('/api/guest/rsvps')
                ]);
                if (!eventsResponse.ok || !rsvpsResponse.ok) {
                    throw new Error('Failed to load dashboard data');
                }
                const eventsData = await eventsResponse.json();
                const rsvpsData = await rsvpsResponse.json();
                if (eventsData.success && rsvpsData.success) {
                    // Process upcoming events
                    const now = new Date();
                    const upcoming = eventsData.data.filter((item)=>new Date(item.date) >= now).sort((a, b)=>new Date(a.date).getTime() - new Date(b.date).getTime()).slice(0, 5);
                    setUpcomingEvents(upcoming);
                    // Calculate RSVP summary
                    const rsvps = rsvpsData.data;
                    const summary = {
                        total: rsvps.length,
                        attending: rsvps.filter((r)=>r.status === 'attending').length,
                        declined: rsvps.filter((r)=>r.status === 'declined').length,
                        pending: rsvps.filter((r)=>r.status === 'pending').length,
                        maybe: rsvps.filter((r)=>r.status === 'maybe').length
                    };
                    setRsvpSummary(summary);
                }
            } catch (err) {
                setError(err instanceof Error ? err.message : 'An error occurred');
            } finally{
                setLoading(false);
            }
        }
        loadDashboardData();
    }, [
        guest.id
    ]);
    const formatDate = (dateString)=>{
        const date = new Date(dateString);
        return date.toLocaleDateString('en-US', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
    };
    const formatTime = (dateString)=>{
        const date = new Date(dateString);
        return date.toLocaleTimeString('en-US', {
            hour: 'numeric',
            minute: '2-digit',
            hour12: true
        });
    };
    const getRSVPStatusColor = (status)=>{
        switch(status){
            case 'attending':
                return 'bg-jungle-100 text-jungle-800 border-jungle-300';
            case 'declined':
                return 'bg-sage-100 text-sage-800 border-sage-300';
            case 'maybe':
                return 'bg-sunset-100 text-sunset-800 border-sunset-300';
            case 'pending':
                return 'bg-volcano-100 text-volcano-800 border-volcano-300';
            default:
                return 'bg-sage-100 text-sage-800 border-sage-300';
        }
    };
    const getRSVPStatusLabel = (status)=>{
        switch(status){
            case 'attending':
                return 'Attending';
            case 'declined':
                return 'Declined';
            case 'maybe':
                return 'Maybe';
            case 'pending':
                return 'Pending Response';
            default:
                return status;
        }
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: "min-h-screen bg-gradient-to-br from-jungle-50 via-ocean-50 to-sunset-50",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsx)("header", {
                className: "bg-white shadow-sm border-b border-sage-200",
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",
                    children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center justify-between",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("h1", {
                                        className: "text-3xl font-bold text-jungle-700",
                                        children: [
                                            "\xa1Pura Vida, ",
                                            guest.first_name,
                                            "!"
                                        ]
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                        className: "text-sage-600 mt-1",
                                        children: "Welcome to your wedding dashboard"
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "flex items-center space-x-4",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("a", {
                                        href: "/guest/profile",
                                        className: "text-ocean-600 hover:text-ocean-700 font-medium",
                                        children: "My Profile"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("a", {
                                        href: "/api/auth/logout",
                                        className: "text-sage-600 hover:text-sage-700 font-medium",
                                        children: "Logout"
                                    })
                                ]
                            })
                        ]
                    })
                })
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)("main", {
                className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",
                children: loading ? /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    className: "flex items-center justify-center py-12",
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "animate-spin rounded-full h-12 w-12 border-b-2 border-jungle-600"
                    })
                }) : error ? /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    className: "bg-volcano-50 border border-volcano-200 rounded-lg p-4 mb-6",
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                        className: "text-volcano-800",
                        children: error
                    })
                }) : /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "grid grid-cols-1 lg:grid-cols-3 gap-6",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "lg:col-span-1",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "bg-white rounded-lg shadow-md p-6 border border-sage-200",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                                            className: "text-xl font-bold text-jungle-700 mb-4",
                                            children: "RSVP Summary"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                            className: "space-y-3",
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                    className: "flex items-center justify-between",
                                                    children: [
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                            className: "text-sage-700",
                                                            children: "Total Events:"
                                                        }),
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                            className: "font-bold text-jungle-700",
                                                            children: rsvpSummary.total
                                                        })
                                                    ]
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                    className: "flex items-center justify-between",
                                                    children: [
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                            className: "text-sage-700",
                                                            children: "Attending:"
                                                        }),
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                            className: "font-bold text-jungle-600",
                                                            children: rsvpSummary.attending
                                                        })
                                                    ]
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                    className: "flex items-center justify-between",
                                                    children: [
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                            className: "text-sage-700",
                                                            children: "Pending:"
                                                        }),
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                            className: "font-bold text-volcano-600",
                                                            children: rsvpSummary.pending
                                                        })
                                                    ]
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                    className: "flex items-center justify-between",
                                                    children: [
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                            className: "text-sage-700",
                                                            children: "Maybe:"
                                                        }),
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                            className: "font-bold text-sunset-600",
                                                            children: rsvpSummary.maybe
                                                        })
                                                    ]
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                    className: "flex items-center justify-between",
                                                    children: [
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                            className: "text-sage-700",
                                                            children: "Declined:"
                                                        }),
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                            className: "font-bold text-sage-600",
                                                            children: rsvpSummary.declined
                                                        })
                                                    ]
                                                })
                                            ]
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                            className: "mt-6",
                                            children: /*#__PURE__*/ (0, _jsxruntime.jsx)("a", {
                                                href: "/guest/rsvp",
                                                className: "block w-full text-center bg-jungle-600 hover:bg-jungle-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",
                                                children: "Manage RSVPs"
                                            })
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "bg-white rounded-lg shadow-md p-6 border border-sage-200 mt-6",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                                            className: "text-xl font-bold text-jungle-700 mb-4",
                                            children: "Quick Actions"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                            className: "space-y-2",
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("a", {
                                                    href: "/guest/family",
                                                    className: "block w-full text-left bg-ocean-50 hover:bg-ocean-100 text-ocean-700 font-medium py-3 px-4 rounded-lg transition-colors border border-ocean-200",
                                                    children: "\uD83D\uDC68‍\uD83D\uDC69‍\uD83D\uDC67‍\uD83D\uDC66 Family Information"
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("a", {
                                                    href: "/guest/transportation",
                                                    className: "block w-full text-left bg-sunset-50 hover:bg-sunset-100 text-sunset-700 font-medium py-3 px-4 rounded-lg transition-colors border border-sunset-200",
                                                    children: "✈️ Transportation Details"
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("a", {
                                                    href: "/guest/accommodation",
                                                    className: "block w-full text-left bg-jungle-50 hover:bg-jungle-100 text-jungle-700 font-medium py-3 px-4 rounded-lg transition-colors border border-jungle-200",
                                                    children: "\uD83C\uDFE8 Accommodation Info"
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("a", {
                                                    href: "/guest/photos",
                                                    className: "block w-full text-left bg-volcano-50 hover:bg-volcano-100 text-volcano-700 font-medium py-3 px-4 rounded-lg transition-colors border border-volcano-200",
                                                    children: "\uD83D\uDCF8 Upload Photos"
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("a", {
                                                    href: "/guest/itinerary",
                                                    className: "block w-full text-left bg-sage-50 hover:bg-sage-100 text-sage-700 font-medium py-3 px-4 rounded-lg transition-colors border border-sage-200",
                                                    children: "\uD83D\uDCC5 View Itinerary"
                                                })
                                            ]
                                        })
                                    ]
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            className: "lg:col-span-2",
                            children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "bg-white rounded-lg shadow-md p-6 border border-sage-200",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                                        className: "text-xl font-bold text-jungle-700 mb-4",
                                        children: "Upcoming Events"
                                    }),
                                    upcomingEvents.length === 0 ? /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                        className: "text-center py-8",
                                        children: [
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                className: "text-sage-600",
                                                children: "No upcoming events at this time."
                                            }),
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                className: "text-sage-500 text-sm mt-2",
                                                children: "Check back later for event updates!"
                                            })
                                        ]
                                    }) : /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                        className: "space-y-4",
                                        children: upcomingEvents.map((event)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                className: "border border-sage-200 rounded-lg p-4 hover:shadow-md transition-shadow",
                                                children: [
                                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                        className: "flex items-start justify-between",
                                                        children: [
                                                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                                className: "flex-1",
                                                                children: [
                                                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("h3", {
                                                                        className: "text-lg font-semibold text-jungle-700",
                                                                        children: event.name
                                                                    }),
                                                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                                        className: "mt-2 space-y-1",
                                                                        children: [
                                                                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("p", {
                                                                                className: "text-sage-700 text-sm",
                                                                                children: [
                                                                                    "\uD83D\uDCC5 ",
                                                                                    formatDate(event.date)
                                                                                ]
                                                                            }),
                                                                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("p", {
                                                                                className: "text-sage-700 text-sm",
                                                                                children: [
                                                                                    "\uD83D\uDD50 ",
                                                                                    formatTime(event.date)
                                                                                ]
                                                                            }),
                                                                            event.location && /*#__PURE__*/ (0, _jsxruntime.jsxs)("p", {
                                                                                className: "text-sage-700 text-sm",
                                                                                children: [
                                                                                    "\uD83D\uDCCD ",
                                                                                    event.location
                                                                                ]
                                                                            })
                                                                        ]
                                                                    })
                                                                ]
                                                            }),
                                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                                                className: "ml-4",
                                                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                                    className: `inline-block px-3 py-1 rounded-full text-sm font-medium border ${getRSVPStatusColor(event.rsvpStatus)}`,
                                                                    children: getRSVPStatusLabel(event.rsvpStatus)
                                                                })
                                                            })
                                                        ]
                                                    }),
                                                    event.rsvpStatus === 'pending' && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                                        className: "mt-4",
                                                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)("a", {
                                                            href: `/guest/rsvp?${event.type}=${event.id}`,
                                                            className: "inline-block bg-jungle-600 hover:bg-jungle-700 text-white font-medium py-2 px-4 rounded-lg transition-colors text-sm",
                                                            children: "Respond to RSVP"
                                                        })
                                                    })
                                                ]
                                            }, event.id))
                                    })
                                ]
                            })
                        })
                    ]
                })
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9ndWVzdC9HdWVzdERhc2hib2FyZC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHR5cGUgeyBHdWVzdCwgRXZlbnQsIEFjdGl2aXR5LCBSU1ZQIH0gZnJvbSAnQC90eXBlcyc7XG5cbmludGVyZmFjZSBHdWVzdERhc2hib2FyZFByb3BzIHtcbiAgZ3Vlc3Q6IEd1ZXN0O1xufVxuXG5pbnRlcmZhY2UgVXBjb21pbmdFdmVudCB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgdHlwZTogJ2V2ZW50JyB8ICdhY3Rpdml0eSc7XG4gIGRhdGU6IHN0cmluZztcbiAgdGltZTogc3RyaW5nO1xuICBsb2NhdGlvbj86IHN0cmluZztcbiAgcnN2cFN0YXR1czogJ3BlbmRpbmcnIHwgJ2F0dGVuZGluZycgfCAnZGVjbGluZWQnIHwgJ21heWJlJztcbn1cblxuaW50ZXJmYWNlIFJTVlBTdW1tYXJ5IHtcbiAgdG90YWw6IG51bWJlcjtcbiAgYXR0ZW5kaW5nOiBudW1iZXI7XG4gIGRlY2xpbmVkOiBudW1iZXI7XG4gIHBlbmRpbmc6IG51bWJlcjtcbiAgbWF5YmU6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBHdWVzdCBEYXNoYm9hcmQgQ29tcG9uZW50XG4gKiBcbiAqIERpc3BsYXlzIHBlcnNvbmFsaXplZCBkYXNoYm9hcmQgZm9yIGd1ZXN0cyB3aXRoOlxuICogLSBXZWxjb21lIG1lc3NhZ2Ugd2l0aCBndWVzdCBuYW1lXG4gKiAtIFVwY29taW5nIGV2ZW50cyBhbmQgYWN0aXZpdGllc1xuICogLSBSU1ZQIHN0YXR1cyBzdW1tYXJ5XG4gKiAtIFF1aWNrIGFjdGlvbiBsaW5rc1xuICogXG4gKiBSZXF1aXJlbWVudHM6IDEzLjEsIDEzLjVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEd1ZXN0RGFzaGJvYXJkKHsgZ3Vlc3QgfTogR3Vlc3REYXNoYm9hcmRQcm9wcykge1xuICBjb25zdCBbdXBjb21pbmdFdmVudHMsIHNldFVwY29taW5nRXZlbnRzXSA9IHVzZVN0YXRlPFVwY29taW5nRXZlbnRbXT4oW10pO1xuICBjb25zdCBbcnN2cFN1bW1hcnksIHNldFJzdnBTdW1tYXJ5XSA9IHVzZVN0YXRlPFJTVlBTdW1tYXJ5Pih7XG4gICAgdG90YWw6IDAsXG4gICAgYXR0ZW5kaW5nOiAwLFxuICAgIGRlY2xpbmVkOiAwLFxuICAgIHBlbmRpbmc6IDAsXG4gICAgbWF5YmU6IDAsXG4gIH0pO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWREYXNoYm9hcmREYXRhKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgICAgc2V0RXJyb3IobnVsbCk7XG5cbiAgICAgICAgLy8gRmV0Y2ggdXBjb21pbmcgZXZlbnRzIGFuZCBSU1ZQc1xuICAgICAgICBjb25zdCBbZXZlbnRzUmVzcG9uc2UsIHJzdnBzUmVzcG9uc2VdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgIGZldGNoKCcvYXBpL2d1ZXN0L2V2ZW50cycpLFxuICAgICAgICAgIGZldGNoKCcvYXBpL2d1ZXN0L3JzdnBzJyksXG4gICAgICAgIF0pO1xuXG4gICAgICAgIGlmICghZXZlbnRzUmVzcG9uc2Uub2sgfHwgIXJzdnBzUmVzcG9uc2Uub2spIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGRhc2hib2FyZCBkYXRhJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBldmVudHNEYXRhID0gYXdhaXQgZXZlbnRzUmVzcG9uc2UuanNvbigpO1xuICAgICAgICBjb25zdCByc3Zwc0RhdGEgPSBhd2FpdCByc3Zwc1Jlc3BvbnNlLmpzb24oKTtcblxuICAgICAgICBpZiAoZXZlbnRzRGF0YS5zdWNjZXNzICYmIHJzdnBzRGF0YS5zdWNjZXNzKSB7XG4gICAgICAgICAgLy8gUHJvY2VzcyB1cGNvbWluZyBldmVudHNcbiAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgIGNvbnN0IHVwY29taW5nID0gZXZlbnRzRGF0YS5kYXRhXG4gICAgICAgICAgICAuZmlsdGVyKChpdGVtOiBhbnkpID0+IG5ldyBEYXRlKGl0ZW0uZGF0ZSkgPj0gbm93KVxuICAgICAgICAgICAgLnNvcnQoKGE6IGFueSwgYjogYW55KSA9PiBuZXcgRGF0ZShhLmRhdGUpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGIuZGF0ZSkuZ2V0VGltZSgpKVxuICAgICAgICAgICAgLnNsaWNlKDAsIDUpO1xuXG4gICAgICAgICAgc2V0VXBjb21pbmdFdmVudHModXBjb21pbmcpO1xuXG4gICAgICAgICAgLy8gQ2FsY3VsYXRlIFJTVlAgc3VtbWFyeVxuICAgICAgICAgIGNvbnN0IHJzdnBzOiBSU1ZQW10gPSByc3Zwc0RhdGEuZGF0YTtcbiAgICAgICAgICBjb25zdCBzdW1tYXJ5ID0ge1xuICAgICAgICAgICAgdG90YWw6IHJzdnBzLmxlbmd0aCxcbiAgICAgICAgICAgIGF0dGVuZGluZzogcnN2cHMuZmlsdGVyKHIgPT4gci5zdGF0dXMgPT09ICdhdHRlbmRpbmcnKS5sZW5ndGgsXG4gICAgICAgICAgICBkZWNsaW5lZDogcnN2cHMuZmlsdGVyKHIgPT4gci5zdGF0dXMgPT09ICdkZWNsaW5lZCcpLmxlbmd0aCxcbiAgICAgICAgICAgIHBlbmRpbmc6IHJzdnBzLmZpbHRlcihyID0+IHIuc3RhdHVzID09PSAncGVuZGluZycpLmxlbmd0aCxcbiAgICAgICAgICAgIG1heWJlOiByc3Zwcy5maWx0ZXIociA9PiByLnN0YXR1cyA9PT0gJ21heWJlJykubGVuZ3RoLFxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBzZXRSc3ZwU3VtbWFyeShzdW1tYXJ5KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHNldEVycm9yKGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnQW4gZXJyb3Igb2NjdXJyZWQnKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxvYWREYXNoYm9hcmREYXRhKCk7XG4gIH0sIFtndWVzdC5pZF0pO1xuXG4gIGNvbnN0IGZvcm1hdERhdGUgPSAoZGF0ZVN0cmluZzogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHJpbmcpO1xuICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7XG4gICAgICB3ZWVrZGF5OiAnbG9uZycsXG4gICAgICB5ZWFyOiAnbnVtZXJpYycsXG4gICAgICBtb250aDogJ2xvbmcnLFxuICAgICAgZGF5OiAnbnVtZXJpYycsXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgZm9ybWF0VGltZSA9IChkYXRlU3RyaW5nOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cmluZyk7XG4gICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKCdlbi1VUycsIHtcbiAgICAgIGhvdXI6ICdudW1lcmljJyxcbiAgICAgIG1pbnV0ZTogJzItZGlnaXQnLFxuICAgICAgaG91cjEyOiB0cnVlLFxuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGdldFJTVlBTdGF0dXNDb2xvciA9IChzdGF0dXM6IHN0cmluZykgPT4ge1xuICAgIHN3aXRjaCAoc3RhdHVzKSB7XG4gICAgICBjYXNlICdhdHRlbmRpbmcnOlxuICAgICAgICByZXR1cm4gJ2JnLWp1bmdsZS0xMDAgdGV4dC1qdW5nbGUtODAwIGJvcmRlci1qdW5nbGUtMzAwJztcbiAgICAgIGNhc2UgJ2RlY2xpbmVkJzpcbiAgICAgICAgcmV0dXJuICdiZy1zYWdlLTEwMCB0ZXh0LXNhZ2UtODAwIGJvcmRlci1zYWdlLTMwMCc7XG4gICAgICBjYXNlICdtYXliZSc6XG4gICAgICAgIHJldHVybiAnYmctc3Vuc2V0LTEwMCB0ZXh0LXN1bnNldC04MDAgYm9yZGVyLXN1bnNldC0zMDAnO1xuICAgICAgY2FzZSAncGVuZGluZyc6XG4gICAgICAgIHJldHVybiAnYmctdm9sY2Fuby0xMDAgdGV4dC12b2xjYW5vLTgwMCBib3JkZXItdm9sY2Fuby0zMDAnO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICdiZy1zYWdlLTEwMCB0ZXh0LXNhZ2UtODAwIGJvcmRlci1zYWdlLTMwMCc7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGdldFJTVlBTdGF0dXNMYWJlbCA9IChzdGF0dXM6IHN0cmluZykgPT4ge1xuICAgIHN3aXRjaCAoc3RhdHVzKSB7XG4gICAgICBjYXNlICdhdHRlbmRpbmcnOlxuICAgICAgICByZXR1cm4gJ0F0dGVuZGluZyc7XG4gICAgICBjYXNlICdkZWNsaW5lZCc6XG4gICAgICAgIHJldHVybiAnRGVjbGluZWQnO1xuICAgICAgY2FzZSAnbWF5YmUnOlxuICAgICAgICByZXR1cm4gJ01heWJlJztcbiAgICAgIGNhc2UgJ3BlbmRpbmcnOlxuICAgICAgICByZXR1cm4gJ1BlbmRpbmcgUmVzcG9uc2UnO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHN0YXR1cztcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBiZy1ncmFkaWVudC10by1iciBmcm9tLWp1bmdsZS01MCB2aWEtb2NlYW4tNTAgdG8tc3Vuc2V0LTUwXCI+XG4gICAgICB7LyogSGVhZGVyICovfVxuICAgICAgPGhlYWRlciBjbGFzc05hbWU9XCJiZy13aGl0ZSBzaGFkb3ctc20gYm9yZGVyLWIgYm9yZGVyLXNhZ2UtMjAwXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctN3hsIG14LWF1dG8gcHgtNCBzbTpweC02IGxnOnB4LTggcHktNlwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC0zeGwgZm9udC1ib2xkIHRleHQtanVuZ2xlLTcwMFwiPlxuICAgICAgICAgICAgICAgIMKhUHVyYSBWaWRhLCB7Z3Vlc3QuZmlyc3RfbmFtZX0hXG4gICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc2FnZS02MDAgbXQtMVwiPldlbGNvbWUgdG8geW91ciB3ZWRkaW5nIGRhc2hib2FyZDwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTRcIj5cbiAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICBocmVmPVwiL2d1ZXN0L3Byb2ZpbGVcIlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtb2NlYW4tNjAwIGhvdmVyOnRleHQtb2NlYW4tNzAwIGZvbnQtbWVkaXVtXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIE15IFByb2ZpbGVcbiAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgIGhyZWY9XCIvYXBpL2F1dGgvbG9nb3V0XCJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXNhZ2UtNjAwIGhvdmVyOnRleHQtc2FnZS03MDAgZm9udC1tZWRpdW1cIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgTG9nb3V0XG4gICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvaGVhZGVyPlxuXG4gICAgICA8bWFpbiBjbGFzc05hbWU9XCJtYXgtdy03eGwgbXgtYXV0byBweC00IHNtOnB4LTYgbGc6cHgtOCBweS04XCI+XG4gICAgICAgIHtsb2FkaW5nID8gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHktMTJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTEyIHctMTIgYm9yZGVyLWItMiBib3JkZXItanVuZ2xlLTYwMFwiPjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApIDogZXJyb3IgPyAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy12b2xjYW5vLTUwIGJvcmRlciBib3JkZXItdm9sY2Fuby0yMDAgcm91bmRlZC1sZyBwLTQgbWItNlwiPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC12b2xjYW5vLTgwMFwiPntlcnJvcn08L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIGxnOmdyaWQtY29scy0zIGdhcC02XCI+XG4gICAgICAgICAgICB7LyogUlNWUCBTdW1tYXJ5IENhcmQgKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxnOmNvbC1zcGFuLTFcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLWxnIHNoYWRvdy1tZCBwLTYgYm9yZGVyIGJvcmRlci1zYWdlLTIwMFwiPlxuICAgICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWp1bmdsZS03MDAgbWItNFwiPlJTVlAgU3VtbWFyeTwvaDI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTNcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc2FnZS03MDBcIj5Ub3RhbCBFdmVudHM6PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC1qdW5nbGUtNzAwXCI+e3JzdnBTdW1tYXJ5LnRvdGFsfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zYWdlLTcwMFwiPkF0dGVuZGluZzo8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LWp1bmdsZS02MDBcIj57cnN2cFN1bW1hcnkuYXR0ZW5kaW5nfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zYWdlLTcwMFwiPlBlbmRpbmc6PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC12b2xjYW5vLTYwMFwiPntyc3ZwU3VtbWFyeS5wZW5kaW5nfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zYWdlLTcwMFwiPk1heWJlOjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQtc3Vuc2V0LTYwMFwiPntyc3ZwU3VtbWFyeS5tYXliZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc2FnZS03MDBcIj5EZWNsaW5lZDo8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXNhZ2UtNjAwXCI+e3JzdnBTdW1tYXJ5LmRlY2xpbmVkfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtNlwiPlxuICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgaHJlZj1cIi9ndWVzdC9yc3ZwXCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmxvY2sgdy1mdWxsIHRleHQtY2VudGVyIGJnLWp1bmdsZS02MDAgaG92ZXI6YmctanVuZ2xlLTcwMCB0ZXh0LXdoaXRlIGZvbnQtbWVkaXVtIHB5LTIgcHgtNCByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgTWFuYWdlIFJTVlBzXG4gICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIHsvKiBRdWljayBBY3Rpb25zIENhcmQgKi99XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3ctbWQgcC02IGJvcmRlciBib3JkZXItc2FnZS0yMDAgbXQtNlwiPlxuICAgICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWp1bmdsZS03MDAgbWItNFwiPlF1aWNrIEFjdGlvbnM8L2gyPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICBocmVmPVwiL2d1ZXN0L2ZhbWlseVwiXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJsb2NrIHctZnVsbCB0ZXh0LWxlZnQgYmctb2NlYW4tNTAgaG92ZXI6Ymctb2NlYW4tMTAwIHRleHQtb2NlYW4tNzAwIGZvbnQtbWVkaXVtIHB5LTMgcHgtNCByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIGJvcmRlciBib3JkZXItb2NlYW4tMjAwXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAg8J+RqOKAjfCfkanigI3wn5Gn4oCN8J+RpiBGYW1pbHkgSW5mb3JtYXRpb25cbiAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgIGhyZWY9XCIvZ3Vlc3QvdHJhbnNwb3J0YXRpb25cIlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJibG9jayB3LWZ1bGwgdGV4dC1sZWZ0IGJnLXN1bnNldC01MCBob3ZlcjpiZy1zdW5zZXQtMTAwIHRleHQtc3Vuc2V0LTcwMCBmb250LW1lZGl1bSBweS0zIHB4LTQgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyBib3JkZXIgYm9yZGVyLXN1bnNldC0yMDBcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICDinIjvuI8gVHJhbnNwb3J0YXRpb24gRGV0YWlsc1xuICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgaHJlZj1cIi9ndWVzdC9hY2NvbW1vZGF0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmxvY2sgdy1mdWxsIHRleHQtbGVmdCBiZy1qdW5nbGUtNTAgaG92ZXI6YmctanVuZ2xlLTEwMCB0ZXh0LWp1bmdsZS03MDAgZm9udC1tZWRpdW0gcHktMyBweC00IHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnMgYm9yZGVyIGJvcmRlci1qdW5nbGUtMjAwXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAg8J+PqCBBY2NvbW1vZGF0aW9uIEluZm9cbiAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgIGhyZWY9XCIvZ3Vlc3QvcGhvdG9zXCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmxvY2sgdy1mdWxsIHRleHQtbGVmdCBiZy12b2xjYW5vLTUwIGhvdmVyOmJnLXZvbGNhbm8tMTAwIHRleHQtdm9sY2Fuby03MDAgZm9udC1tZWRpdW0gcHktMyBweC00IHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnMgYm9yZGVyIGJvcmRlci12b2xjYW5vLTIwMFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIPCfk7ggVXBsb2FkIFBob3Rvc1xuICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgaHJlZj1cIi9ndWVzdC9pdGluZXJhcnlcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJibG9jayB3LWZ1bGwgdGV4dC1sZWZ0IGJnLXNhZ2UtNTAgaG92ZXI6Ymctc2FnZS0xMDAgdGV4dC1zYWdlLTcwMCBmb250LW1lZGl1bSBweS0zIHB4LTQgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyBib3JkZXIgYm9yZGVyLXNhZ2UtMjAwXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAg8J+ThSBWaWV3IEl0aW5lcmFyeVxuICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICB7LyogVXBjb21pbmcgRXZlbnRzIENhcmQgKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxnOmNvbC1zcGFuLTJcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLWxnIHNoYWRvdy1tZCBwLTYgYm9yZGVyIGJvcmRlci1zYWdlLTIwMFwiPlxuICAgICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWp1bmdsZS03MDAgbWItNFwiPlVwY29taW5nIEV2ZW50czwvaDI+XG4gICAgICAgICAgICAgICAge3VwY29taW5nRXZlbnRzLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgcHktOFwiPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNhZ2UtNjAwXCI+Tm8gdXBjb21pbmcgZXZlbnRzIGF0IHRoaXMgdGltZS48L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc2FnZS01MDAgdGV4dC1zbSBtdC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgQ2hlY2sgYmFjayBsYXRlciBmb3IgZXZlbnQgdXBkYXRlcyFcbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS00XCI+XG4gICAgICAgICAgICAgICAgICAgIHt1cGNvbWluZ0V2ZW50cy5tYXAoKGV2ZW50KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtldmVudC5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJvcmRlciBib3JkZXItc2FnZS0yMDAgcm91bmRlZC1sZyBwLTQgaG92ZXI6c2hhZG93LW1kIHRyYW5zaXRpb24tc2hhZG93XCJcbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtc3RhcnQganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWp1bmdsZS03MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtldmVudC5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIHNwYWNlLXktMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zYWdlLTcwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIPCfk4Uge2Zvcm1hdERhdGUoZXZlbnQuZGF0ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNhZ2UtNzAwIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg8J+VkCB7Zm9ybWF0VGltZShldmVudC5kYXRlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtldmVudC5sb2NhdGlvbiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc2FnZS03MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIPCfk40ge2V2ZW50LmxvY2F0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtbC00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGlubGluZS1ibG9jayBweC0zIHB5LTEgcm91bmRlZC1mdWxsIHRleHQtc20gZm9udC1tZWRpdW0gYm9yZGVyICR7Z2V0UlNWUFN0YXR1c0NvbG9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5yc3ZwU3RhdHVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2dldFJTVlBTdGF0dXNMYWJlbChldmVudC5yc3ZwU3RhdHVzKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZXZlbnQucnN2cFN0YXR1cyA9PT0gJ3BlbmRpbmcnICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9e2AvZ3Vlc3QvcnN2cD8ke2V2ZW50LnR5cGV9PSR7ZXZlbnQuaWR9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImlubGluZS1ibG9jayBiZy1qdW5nbGUtNjAwIGhvdmVyOmJnLWp1bmdsZS03MDAgdGV4dC13aGl0ZSBmb250LW1lZGl1bSBweS0yIHB4LTQgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyB0ZXh0LXNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZXNwb25kIHRvIFJTVlBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9tYWluPlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbIkd1ZXN0RGFzaGJvYXJkIiwiZ3Vlc3QiLCJ1cGNvbWluZ0V2ZW50cyIsInNldFVwY29taW5nRXZlbnRzIiwidXNlU3RhdGUiLCJyc3ZwU3VtbWFyeSIsInNldFJzdnBTdW1tYXJ5IiwidG90YWwiLCJhdHRlbmRpbmciLCJkZWNsaW5lZCIsInBlbmRpbmciLCJtYXliZSIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwiZXJyb3IiLCJzZXRFcnJvciIsInVzZUVmZmVjdCIsImxvYWREYXNoYm9hcmREYXRhIiwiZXZlbnRzUmVzcG9uc2UiLCJyc3Zwc1Jlc3BvbnNlIiwiUHJvbWlzZSIsImFsbCIsImZldGNoIiwib2siLCJFcnJvciIsImV2ZW50c0RhdGEiLCJqc29uIiwicnN2cHNEYXRhIiwic3VjY2VzcyIsIm5vdyIsIkRhdGUiLCJ1cGNvbWluZyIsImRhdGEiLCJmaWx0ZXIiLCJpdGVtIiwiZGF0ZSIsInNvcnQiLCJhIiwiYiIsImdldFRpbWUiLCJzbGljZSIsInJzdnBzIiwic3VtbWFyeSIsImxlbmd0aCIsInIiLCJzdGF0dXMiLCJlcnIiLCJtZXNzYWdlIiwiaWQiLCJmb3JtYXREYXRlIiwiZGF0ZVN0cmluZyIsInRvTG9jYWxlRGF0ZVN0cmluZyIsIndlZWtkYXkiLCJ5ZWFyIiwibW9udGgiLCJkYXkiLCJmb3JtYXRUaW1lIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwiaG91ciIsIm1pbnV0ZSIsImhvdXIxMiIsImdldFJTVlBTdGF0dXNDb2xvciIsImdldFJTVlBTdGF0dXNMYWJlbCIsImRpdiIsImNsYXNzTmFtZSIsImhlYWRlciIsImgxIiwiZmlyc3RfbmFtZSIsInAiLCJocmVmIiwibWFpbiIsImgyIiwic3BhbiIsIm1hcCIsImV2ZW50IiwiaDMiLCJuYW1lIiwibG9jYXRpb24iLCJyc3ZwU3RhdHVzIiwidHlwZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OytCQXNDZ0JBOzs7ZUFBQUE7Ozs7dUJBcENvQjtBQW9DN0IsU0FBU0EsZUFBZSxFQUFFQyxLQUFLLEVBQXVCO0lBQzNELE1BQU0sQ0FBQ0MsZ0JBQWdCQyxrQkFBa0IsR0FBR0Ms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