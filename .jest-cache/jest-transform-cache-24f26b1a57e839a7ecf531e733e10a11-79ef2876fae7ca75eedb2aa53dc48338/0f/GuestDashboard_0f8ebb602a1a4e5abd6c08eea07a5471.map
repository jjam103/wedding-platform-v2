{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/guest/GuestDashboard.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport type { Guest, Event, Activity, RSVP } from '@/types';\n\ninterface GuestDashboardProps {\n  guest: Guest;\n}\n\ninterface UpcomingEvent {\n  id: string;\n  name: string;\n  type: 'event' | 'activity';\n  date: string;\n  time: string;\n  location?: string;\n  rsvpStatus: 'pending' | 'attending' | 'declined' | 'maybe';\n}\n\ninterface RSVPSummary {\n  total: number;\n  attending: number;\n  declined: number;\n  pending: number;\n  maybe: number;\n}\n\n/**\n * Guest Dashboard Component\n * \n * Displays personalized dashboard for guests with:\n * - Welcome message with guest name\n * - Upcoming events and activities\n * - RSVP status summary\n * - Quick action links\n * \n * Requirements: 13.1, 13.5\n */\nexport function GuestDashboard({ guest }: GuestDashboardProps) {\n  const [upcomingEvents, setUpcomingEvents] = useState<UpcomingEvent[]>([]);\n  const [rsvpSummary, setRsvpSummary] = useState<RSVPSummary>({\n    total: 0,\n    attending: 0,\n    declined: 0,\n    pending: 0,\n    maybe: 0,\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    async function loadDashboardData() {\n      try {\n        setLoading(true);\n        setError(null);\n\n        // Fetch upcoming events and RSVPs\n        const [eventsResponse, rsvpsResponse] = await Promise.all([\n          fetch('/api/guest/events'),\n          fetch('/api/guest/rsvps'),\n        ]);\n\n        if (!eventsResponse.ok || !rsvpsResponse.ok) {\n          throw new Error('Failed to load dashboard data');\n        }\n\n        const eventsData = await eventsResponse.json();\n        const rsvpsData = await rsvpsResponse.json();\n\n        if (eventsData.success && rsvpsData.success) {\n          // Process upcoming events\n          const now = new Date();\n          const upcoming = eventsData.data\n            .filter((item: any) => new Date(item.date) >= now)\n            .sort((a: any, b: any) => new Date(a.date).getTime() - new Date(b.date).getTime())\n            .slice(0, 5);\n\n          setUpcomingEvents(upcoming);\n\n          // Calculate RSVP summary\n          const rsvps: RSVP[] = rsvpsData.data;\n          const summary = {\n            total: rsvps.length,\n            attending: rsvps.filter(r => r.status === 'attending').length,\n            declined: rsvps.filter(r => r.status === 'declined').length,\n            pending: rsvps.filter(r => r.status === 'pending').length,\n            maybe: rsvps.filter(r => r.status === 'maybe').length,\n          };\n\n          setRsvpSummary(summary);\n        }\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'An error occurred');\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    loadDashboardData();\n  }, [guest.id]);\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n    });\n  };\n\n  const formatTime = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true,\n    });\n  };\n\n  const getRSVPStatusColor = (status: string) => {\n    switch (status) {\n      case 'attending':\n        return 'bg-jungle-100 text-jungle-800 border-jungle-300';\n      case 'declined':\n        return 'bg-sage-100 text-sage-800 border-sage-300';\n      case 'maybe':\n        return 'bg-sunset-100 text-sunset-800 border-sunset-300';\n      case 'pending':\n        return 'bg-volcano-100 text-volcano-800 border-volcano-300';\n      default:\n        return 'bg-sage-100 text-sage-800 border-sage-300';\n    }\n  };\n\n  const getRSVPStatusLabel = (status: string) => {\n    switch (status) {\n      case 'attending':\n        return 'Attending';\n      case 'declined':\n        return 'Declined';\n      case 'maybe':\n        return 'Maybe';\n      case 'pending':\n        return 'Pending Response';\n      default:\n        return status;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-jungle-50 via-ocean-50 to-sunset-50\">\n      {/* Header */}\n      <header className=\"bg-white shadow-sm border-b border-sage-200\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-jungle-700\">\n                ¬°Pura Vida, {guest.first_name}!\n              </h1>\n              <p className=\"text-sage-600 mt-1\">Welcome to your wedding dashboard</p>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <a\n                href=\"/guest/profile\"\n                className=\"text-ocean-600 hover:text-ocean-700 font-medium\"\n              >\n                My Profile\n              </a>\n              <a\n                href=\"/api/auth/logout\"\n                className=\"text-sage-600 hover:text-sage-700 font-medium\"\n              >\n                Logout\n              </a>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {loading ? (\n          <div className=\"flex items-center justify-center py-12\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-jungle-600\"></div>\n          </div>\n        ) : error ? (\n          <div className=\"bg-volcano-50 border border-volcano-200 rounded-lg p-4 mb-6\">\n            <p className=\"text-volcano-800\">{error}</p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n            {/* RSVP Summary Card */}\n            <div className=\"lg:col-span-1\">\n              <div className=\"bg-white rounded-lg shadow-md p-6 border border-sage-200\">\n                <h2 className=\"text-xl font-bold text-jungle-700 mb-4\">RSVP Summary</h2>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sage-700\">Total Events:</span>\n                    <span className=\"font-bold text-jungle-700\">{rsvpSummary.total}</span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sage-700\">Attending:</span>\n                    <span className=\"font-bold text-jungle-600\">{rsvpSummary.attending}</span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sage-700\">Pending:</span>\n                    <span className=\"font-bold text-volcano-600\">{rsvpSummary.pending}</span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sage-700\">Maybe:</span>\n                    <span className=\"font-bold text-sunset-600\">{rsvpSummary.maybe}</span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sage-700\">Declined:</span>\n                    <span className=\"font-bold text-sage-600\">{rsvpSummary.declined}</span>\n                  </div>\n                </div>\n                <div className=\"mt-6\">\n                  <a\n                    href=\"/guest/rsvp\"\n                    className=\"block w-full text-center bg-jungle-600 hover:bg-jungle-700 text-white font-medium py-2 px-4 rounded-lg transition-colors\"\n                  >\n                    Manage RSVPs\n                  </a>\n                </div>\n              </div>\n\n              {/* Quick Actions Card */}\n              <div className=\"bg-white rounded-lg shadow-md p-6 border border-sage-200 mt-6\">\n                <h2 className=\"text-xl font-bold text-jungle-700 mb-4\">Quick Actions</h2>\n                <div className=\"space-y-2\">\n                  <a\n                    href=\"/guest/family\"\n                    className=\"block w-full text-left bg-ocean-50 hover:bg-ocean-100 text-ocean-700 font-medium py-3 px-4 rounded-lg transition-colors border border-ocean-200\"\n                  >\n                    üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Information\n                  </a>\n                  <a\n                    href=\"/guest/transportation\"\n                    className=\"block w-full text-left bg-sunset-50 hover:bg-sunset-100 text-sunset-700 font-medium py-3 px-4 rounded-lg transition-colors border border-sunset-200\"\n                  >\n                    ‚úàÔ∏è Transportation Details\n                  </a>\n                  <a\n                    href=\"/guest/accommodation\"\n                    className=\"block w-full text-left bg-jungle-50 hover:bg-jungle-100 text-jungle-700 font-medium py-3 px-4 rounded-lg transition-colors border border-jungle-200\"\n                  >\n                    üè® Accommodation Info\n                  </a>\n                  <a\n                    href=\"/guest/photos\"\n                    className=\"block w-full text-left bg-volcano-50 hover:bg-volcano-100 text-volcano-700 font-medium py-3 px-4 rounded-lg transition-colors border border-volcano-200\"\n                  >\n                    üì∏ Upload Photos\n                  </a>\n                  <a\n                    href=\"/guest/itinerary\"\n                    className=\"block w-full text-left bg-sage-50 hover:bg-sage-100 text-sage-700 font-medium py-3 px-4 rounded-lg transition-colors border border-sage-200\"\n                  >\n                    üìÖ View Itinerary\n                  </a>\n                </div>\n              </div>\n            </div>\n\n            {/* Upcoming Events Card */}\n            <div className=\"lg:col-span-2\">\n              <div className=\"bg-white rounded-lg shadow-md p-6 border border-sage-200\">\n                <h2 className=\"text-xl font-bold text-jungle-700 mb-4\">Upcoming Events</h2>\n                {upcomingEvents.length === 0 ? (\n                  <div className=\"text-center py-8\">\n                    <p className=\"text-sage-600\">No upcoming events at this time.</p>\n                    <p className=\"text-sage-500 text-sm mt-2\">\n                      Check back later for event updates!\n                    </p>\n                  </div>\n                ) : (\n                  <div className=\"space-y-4\">\n                    {upcomingEvents.map((event) => (\n                      <div\n                        key={event.id}\n                        className=\"border border-sage-200 rounded-lg p-4 hover:shadow-md transition-shadow\"\n                      >\n                        <div className=\"flex items-start justify-between\">\n                          <div className=\"flex-1\">\n                            <h3 className=\"text-lg font-semibold text-jungle-700\">\n                              {event.name}\n                            </h3>\n                            <div className=\"mt-2 space-y-1\">\n                              <p className=\"text-sage-700 text-sm\">\n                                üìÖ {formatDate(event.date)}\n                              </p>\n                              <p className=\"text-sage-700 text-sm\">\n                                üïê {formatTime(event.date)}\n                              </p>\n                              {event.location && (\n                                <p className=\"text-sage-700 text-sm\">\n                                  üìç {event.location}\n                                </p>\n                              )}\n                            </div>\n                          </div>\n                          <div className=\"ml-4\">\n                            <span\n                              className={`inline-block px-3 py-1 rounded-full text-sm font-medium border ${getRSVPStatusColor(\n                                event.rsvpStatus\n                              )}`}\n                            >\n                              {getRSVPStatusLabel(event.rsvpStatus)}\n                            </span>\n                          </div>\n                        </div>\n                        {event.rsvpStatus === 'pending' && (\n                          <div className=\"mt-4\">\n                            <a\n                              href={`/guest/rsvp?${event.type}=${event.id}`}\n                              className=\"inline-block bg-jungle-600 hover:bg-jungle-700 text-white font-medium py-2 px-4 rounded-lg transition-colors text-sm\"\n                            >\n                              Respond to RSVP\n                            </a>\n                          </div>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n"],"names":["GuestDashboard","guest","upcomingEvents","setUpcomingEvents","useState","rsvpSummary","setRsvpSummary","total","attending","declined","pending","maybe","loading","setLoading","error","setError","useEffect","loadDashboardData","eventsResponse","rsvpsResponse","Promise","all","fetch","ok","Error","eventsData","json","rsvpsData","success","now","Date","upcoming","data","filter","item","date","sort","a","b","getTime","slice","rsvps","summary","length","r","status","err","message","id","formatDate","dateString","toLocaleDateString","weekday","year","month","day","formatTime","toLocaleTimeString","hour","minute","hour12","getRSVPStatusColor","getRSVPStatusLabel","div","className","header","h1","first_name","p","href","main","h2","span","map","event","h3","name","location","rsvpStatus","type"],"mappings":"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"}