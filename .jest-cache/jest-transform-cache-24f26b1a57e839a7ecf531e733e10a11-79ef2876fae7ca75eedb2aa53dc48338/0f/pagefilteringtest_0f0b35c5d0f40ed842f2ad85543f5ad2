42d9dbb3c89f79932083efc24cfc483c
/**
 * Unit Tests for Guest Management Page - Advanced Filtering
 * 
 * Tests advanced filtering functionality including:
 * - RSVP status filter
 * - Activity filter
 * - Transportation filter
 * - Age group filter
 * - Airport filter
 * - Grouping functionality
 * 
 * Validates: Requirements 8.2-8.7
 */ "use strict";
// Mock Next.js router
jest.mock('next/navigation', ()=>({
        useRouter: ()=>({
                push: jest.fn(),
                replace: jest.fn(),
                prefetch: jest.fn()
            }),
        useSearchParams: ()=>({
                get: jest.fn(()=>null),
                toString: jest.fn(()=>'')
            })
    }));
// Mock DataTable components
jest.mock('@/components/ui/DataTable', ()=>({
        DataTable: ({ data, columns, loading })=>{
            if (loading) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "Loading..."
            });
            if (data.length === 0) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "No items found"
            });
            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "data-table",
                children: data.map((item, index)=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        "data-testid": `guest-row-${item.id}`,
                        children: columns.map((col)=>{
                            const value = item[col.key];
                            const displayValue = col.render ? col.render(value, item) : value;
                            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                "data-testid": `${col.key}-${item.id}`,
                                children: displayValue
                            }, col.key);
                        })
                    }, index))
            });
        }
    }));
jest.mock('@/components/ui/DataTableWithSuspense', ()=>({
        DataTableWithSuspense: ({ data, columns, loading })=>{
            if (loading) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "Loading..."
            });
            if (data.length === 0) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "No items found"
            });
            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "data-table",
                children: data.map((item, index)=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        "data-testid": `guest-row-${item.id}`,
                        children: columns.map((col)=>{
                            const value = item[col.key];
                            const displayValue = col.render ? col.render(value, item) : value;
                            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                "data-testid": `${col.key}-${item.id}`,
                                children: displayValue
                            }, col.key);
                        })
                    }, index))
            });
        }
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
require("@testing-library/jest-dom");
const _page = /*#__PURE__*/ _interop_require_default(require("./page"));
const _ToastContext = require("../../../components/ui/ToastContext");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock fetch
global.fetch = jest.fn();
// Mock window.scrollTo
window.scrollTo = jest.fn();
// Sample guest data for testing
const mockGuests = [
    {
        id: '123e4567-e89b-12d3-a456-426614174000',
        groupId: '123e4567-e89b-12d3-a456-426614174001',
        firstName: 'John',
        lastName: 'Doe',
        email: 'john.doe@example.com',
        phone: '+1234567890',
        ageType: 'adult',
        guestType: 'wedding_guest',
        dietaryRestrictions: 'Vegetarian',
        plusOneName: null,
        plusOneAttending: false,
        arrivalDate: '2024-06-01',
        departureDate: '2024-06-05',
        airportCode: 'SJO',
        flightNumber: 'AA123',
        invitationSent: true,
        invitationSentDate: '2024-01-15',
        rsvpDeadline: '2024-05-01',
        notes: 'Prefers window seat',
        createdAt: '2024-01-01T00:00:00Z',
        updatedAt: '2024-01-01T00:00:00Z'
    },
    {
        id: '223e4567-e89b-12d3-a456-426614174000',
        groupId: '123e4567-e89b-12d3-a456-426614174001',
        firstName: 'Jane',
        lastName: 'Smith',
        email: 'jane.smith@example.com',
        phone: null,
        ageType: 'adult',
        guestType: 'wedding_party',
        dietaryRestrictions: null,
        plusOneName: 'Bob Smith',
        plusOneAttending: true,
        arrivalDate: '2024-05-31',
        departureDate: '2024-06-06',
        airportCode: 'LIR',
        flightNumber: null,
        invitationSent: true,
        invitationSentDate: '2024-01-15',
        rsvpDeadline: '2024-05-01',
        notes: null,
        createdAt: '2024-01-01T00:00:00Z',
        updatedAt: '2024-01-01T00:00:00Z'
    },
    {
        id: '323e4567-e89b-12d3-a456-426614174000',
        groupId: '223e4567-e89b-12d3-a456-426614174001',
        firstName: 'Alice',
        lastName: 'Johnson',
        email: null,
        phone: '+9876543210',
        ageType: 'child',
        guestType: 'wedding_guest',
        dietaryRestrictions: 'Gluten-free',
        plusOneName: null,
        plusOneAttending: false,
        arrivalDate: null,
        departureDate: null,
        airportCode: null,
        flightNumber: null,
        invitationSent: false,
        invitationSentDate: null,
        rsvpDeadline: '2024-05-01',
        notes: 'Traveling with parents',
        createdAt: '2024-01-01T00:00:00Z',
        updatedAt: '2024-01-01T00:00:00Z'
    }
];
const mockActivities = [
    {
        id: 'activity-1',
        name: 'Beach Day'
    },
    {
        id: 'activity-2',
        name: 'Welcome Dinner'
    }
];
describe('Guest Management Page - Advanced Filtering', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        // Mock successful API responses
        global.fetch.mockImplementation((url)=>{
            if (url.includes('/api/admin/guests')) {
                return Promise.resolve({
                    ok: true,
                    json: ()=>Promise.resolve({
                            success: true,
                            data: {
                                guests: mockGuests,
                                total: mockGuests.length,
                                page: 1,
                                pageSize: 50,
                                totalPages: 1
                            }
                        })
                });
            }
            if (url.includes('/api/admin/groups')) {
                return Promise.resolve({
                    ok: true,
                    json: ()=>Promise.resolve({
                            success: true,
                            data: []
                        })
                });
            }
            if (url.includes('/api/admin/activities')) {
                return Promise.resolve({
                    ok: true,
                    json: ()=>Promise.resolve({
                            success: true,
                            data: mockActivities
                        })
                });
            }
            if (url.includes('/api/admin/rsvps')) {
                return Promise.resolve({
                    ok: true,
                    json: ()=>Promise.resolve({
                            success: true,
                            data: []
                        })
                });
            }
            return Promise.reject(new Error('Unknown URL'));
        });
    });
    it('should render RSVP status filter dropdown', async ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ToastContext.ToastProvider, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
        }));
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByLabelText(/RSVP Status/i)).toBeInTheDocument();
        });
        const rsvpFilter = _react.screen.getByLabelText(/RSVP Status/i);
        expect(rsvpFilter).toBeInTheDocument();
        expect(rsvpFilter.tagName).toBe('SELECT');
    });
    it('should render activity filter dropdown', async ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ToastContext.ToastProvider, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
        }));
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByLabelText(/Activity/i)).toBeInTheDocument();
        });
        const activityFilter = _react.screen.getByLabelText(/Activity/i);
        expect(activityFilter).toBeInTheDocument();
        expect(activityFilter.tagName).toBe('SELECT');
    });
    it('should render transportation filter dropdown', async ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ToastContext.ToastProvider, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
        }));
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByLabelText(/Transportation/i)).toBeInTheDocument();
        });
        const transportationFilter = _react.screen.getByLabelText(/Transportation/i);
        expect(transportationFilter).toBeInTheDocument();
        expect(transportationFilter.tagName).toBe('SELECT');
    });
    it('should render age group filter dropdown', async ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ToastContext.ToastProvider, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
        }));
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByLabelText(/Age Group/i)).toBeInTheDocument();
        });
        const ageGroupFilter = _react.screen.getByLabelText(/Age Group/i);
        expect(ageGroupFilter).toBeInTheDocument();
        expect(ageGroupFilter.tagName).toBe('SELECT');
    });
    it('should render airport filter dropdown', async ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ToastContext.ToastProvider, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
        }));
        await (0, _react.waitFor)(()=>{
            // Use getAllByLabelText and find the select element
            const airportLabels = _react.screen.queryAllByLabelText(/Airport/i);
            const airportFilter = airportLabels.find((el)=>el.tagName === 'SELECT');
            expect(airportFilter).toBeInTheDocument();
        });
    });
    it('should render grouping dropdown', async ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ToastContext.ToastProvider, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
        }));
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByLabelText(/Group By/i)).toBeInTheDocument();
        });
        const groupingSelect = _react.screen.getByLabelText(/Group By/i);
        expect(groupingSelect).toBeInTheDocument();
        expect(groupingSelect.tagName).toBe('SELECT');
    });
    it('should fetch guests with RSVP status filter when changed', async ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ToastContext.ToastProvider, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
        }));
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByLabelText(/RSVP Status/i)).toBeInTheDocument();
        });
        const rsvpFilter = _react.screen.getByLabelText(/RSVP Status/i);
        // Change filter value
        _react.fireEvent.change(rsvpFilter, {
            target: {
                value: 'attending'
            }
        });
        // Wait for fetch to be called with filter parameter
        await (0, _react.waitFor)(()=>{
            expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('rsvpStatus=attending'));
        });
    });
    it('should fetch guests with activity filter when changed', async ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ToastContext.ToastProvider, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
        }));
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByLabelText(/Activity/i)).toBeInTheDocument();
        });
        const activityFilter = _react.screen.getByLabelText(/Activity/i);
        // Change filter value
        _react.fireEvent.change(activityFilter, {
            target: {
                value: 'activity-1'
            }
        });
        // Wait for fetch to be called with filter parameter
        await (0, _react.waitFor)(()=>{
            expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('activityId=activity-1'));
        });
    });
    it('should fetch guests with transportation filter when changed', async ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ToastContext.ToastProvider, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
        }));
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByLabelText(/Transportation/i)).toBeInTheDocument();
        });
        const transportationFilter = _react.screen.getByLabelText(/Transportation/i);
        // Change filter value
        _react.fireEvent.change(transportationFilter, {
            target: {
                value: 'true'
            }
        });
        // Wait for fetch to be called with filter parameter
        await (0, _react.waitFor)(()=>{
            expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('hasTransportation=true'));
        });
    });
    it('should fetch guests with age group filter when changed', async ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ToastContext.ToastProvider, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
        }));
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByLabelText(/Age Group/i)).toBeInTheDocument();
        });
        const ageGroupFilter = _react.screen.getByLabelText(/Age Group/i);
        // Change filter value
        _react.fireEvent.change(ageGroupFilter, {
            target: {
                value: 'adult'
            }
        });
        // Wait for fetch to be called with filter parameter
        await (0, _react.waitFor)(()=>{
            expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('ageType=adult'));
        });
    });
    it('should fetch guests with airport filter when changed', async ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ToastContext.ToastProvider, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
        }));
        await (0, _react.waitFor)(()=>{
            const airportLabels = _react.screen.queryAllByLabelText(/Airport/i);
            const airportFilter = airportLabels.find((el)=>el.tagName === 'SELECT');
            expect(airportFilter).toBeInTheDocument();
        });
        const airportLabels = _react.screen.getAllByLabelText(/Airport/i);
        const airportFilter = airportLabels.find((el)=>el.tagName === 'SELECT');
        // Change filter value
        _react.fireEvent.change(airportFilter, {
            target: {
                value: 'SJO'
            }
        });
        // Wait for fetch to be called with filter parameter
        await (0, _react.waitFor)(()=>{
            expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('airportCode=SJO'));
        });
    });
    it('should update grouping field when changed', async ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ToastContext.ToastProvider, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
        }));
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByLabelText(/Group By/i)).toBeInTheDocument();
        });
        const groupingSelect = _react.screen.getByLabelText(/Group By/i);
        // Change grouping value
        _react.fireEvent.change(groupingSelect, {
            target: {
                value: 'ageType'
            }
        });
        // Verify the value changed
        expect(groupingSelect.value).toBe('ageType');
    });
    it('should clear all filters when Clear All Filters button is clicked', async ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ToastContext.ToastProvider, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
        }));
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByLabelText(/RSVP Status/i)).toBeInTheDocument();
        });
        // Set some filter values
        const rsvpFilter = _react.screen.getByLabelText(/RSVP Status/i);
        const ageGroupFilter = _react.screen.getByLabelText(/Age Group/i);
        const groupingSelect = _react.screen.getByLabelText(/Group By/i);
        _react.fireEvent.change(rsvpFilter, {
            target: {
                value: 'attending'
            }
        });
        _react.fireEvent.change(ageGroupFilter, {
            target: {
                value: 'adult'
            }
        });
        _react.fireEvent.change(groupingSelect, {
            target: {
                value: 'ageType'
            }
        });
        // Verify filters are set
        expect(rsvpFilter.value).toBe('attending');
        expect(ageGroupFilter.value).toBe('adult');
        expect(groupingSelect.value).toBe('ageType');
        // Click Clear All Filters button
        const clearButton = _react.screen.getByText(/Clear All Filters/i);
        _react.fireEvent.click(clearButton);
        // Wait for filters to be cleared
        await (0, _react.waitFor)(()=>{
            expect(rsvpFilter.value).toBe('');
            expect(ageGroupFilter.value).toBe('');
            expect(groupingSelect.value).toBe('');
        });
    });
    it('should render Clear All Filters button', async ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ToastContext.ToastProvider, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {})
        }));
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByText(/Clear All Filters/i)).toBeInTheDocument();
        });
        const clearButton = _react.screen.getByText(/Clear All Filters/i);
        expect(clearButton).toBeInTheDocument();
        expect(clearButton.tagName).toBe('BUTTON');
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FkbWluL2d1ZXN0cy9wYWdlLmZpbHRlcmluZy50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVuaXQgVGVzdHMgZm9yIEd1ZXN0IE1hbmFnZW1lbnQgUGFnZSAtIEFkdmFuY2VkIEZpbHRlcmluZ1xuICogXG4gKiBUZXN0cyBhZHZhbmNlZCBmaWx0ZXJpbmcgZnVuY3Rpb25hbGl0eSBpbmNsdWRpbmc6XG4gKiAtIFJTVlAgc3RhdHVzIGZpbHRlclxuICogLSBBY3Rpdml0eSBmaWx0ZXJcbiAqIC0gVHJhbnNwb3J0YXRpb24gZmlsdGVyXG4gKiAtIEFnZSBncm91cCBmaWx0ZXJcbiAqIC0gQWlycG9ydCBmaWx0ZXJcbiAqIC0gR3JvdXBpbmcgZnVuY3Rpb25hbGl0eVxuICogXG4gKiBWYWxpZGF0ZXM6IFJlcXVpcmVtZW50cyA4LjItOC43XG4gKi9cblxuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIGZpcmVFdmVudCwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0ICdAdGVzdGluZy1saWJyYXJ5L2plc3QtZG9tJztcbmltcG9ydCBHdWVzdHNQYWdlIGZyb20gJy4vcGFnZSc7XG5pbXBvcnQgeyBUb2FzdFByb3ZpZGVyIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL1RvYXN0Q29udGV4dCc7XG5cbi8vIE1vY2sgTmV4dC5qcyByb3V0ZXJcbmplc3QubW9jaygnbmV4dC9uYXZpZ2F0aW9uJywgKCkgPT4gKHtcbiAgdXNlUm91dGVyOiAoKSA9PiAoe1xuICAgIHB1c2g6IGplc3QuZm4oKSxcbiAgICByZXBsYWNlOiBqZXN0LmZuKCksXG4gICAgcHJlZmV0Y2g6IGplc3QuZm4oKSxcbiAgfSksXG4gIHVzZVNlYXJjaFBhcmFtczogKCkgPT4gKHtcbiAgICBnZXQ6IGplc3QuZm4oKCkgPT4gbnVsbCksXG4gICAgdG9TdHJpbmc6IGplc3QuZm4oKCkgPT4gJycpLFxuICB9KSxcbn0pKTtcblxuLy8gTW9jayBEYXRhVGFibGUgY29tcG9uZW50c1xuamVzdC5tb2NrKCdAL2NvbXBvbmVudHMvdWkvRGF0YVRhYmxlJywgKCkgPT4gKHtcbiAgRGF0YVRhYmxlOiAoeyBkYXRhLCBjb2x1bW5zLCBsb2FkaW5nIH06IGFueSkgPT4ge1xuICAgIGlmIChsb2FkaW5nKSByZXR1cm4gPGRpdj5Mb2FkaW5nLi4uPC9kaXY+O1xuICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDxkaXY+Tm8gaXRlbXMgZm91bmQ8L2Rpdj47XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJkYXRhLXRhYmxlXCI+XG4gICAgICAgIHtkYXRhLm1hcCgoaXRlbTogYW55LCBpbmRleDogbnVtYmVyKSA9PiAoXG4gICAgICAgICAgPGRpdiBrZXk9e2luZGV4fSBkYXRhLXRlc3RpZD17YGd1ZXN0LXJvdy0ke2l0ZW0uaWR9YH0+XG4gICAgICAgICAgICB7Y29sdW1ucy5tYXAoKGNvbDogYW55KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gaXRlbVtjb2wua2V5XTtcbiAgICAgICAgICAgICAgY29uc3QgZGlzcGxheVZhbHVlID0gY29sLnJlbmRlciA/IGNvbC5yZW5kZXIodmFsdWUsIGl0ZW0pIDogdmFsdWU7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdiBrZXk9e2NvbC5rZXl9IGRhdGEtdGVzdGlkPXtgJHtjb2wua2V5fS0ke2l0ZW0uaWR9YH0+XG4gICAgICAgICAgICAgICAgICB7ZGlzcGxheVZhbHVlfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkpfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfSxcbn0pKTtcblxuamVzdC5tb2NrKCdAL2NvbXBvbmVudHMvdWkvRGF0YVRhYmxlV2l0aFN1c3BlbnNlJywgKCkgPT4gKHtcbiAgRGF0YVRhYmxlV2l0aFN1c3BlbnNlOiAoeyBkYXRhLCBjb2x1bW5zLCBsb2FkaW5nIH06IGFueSkgPT4ge1xuICAgIGlmIChsb2FkaW5nKSByZXR1cm4gPGRpdj5Mb2FkaW5nLi4uPC9kaXY+O1xuICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDxkaXY+Tm8gaXRlbXMgZm91bmQ8L2Rpdj47XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJkYXRhLXRhYmxlXCI+XG4gICAgICAgIHtkYXRhLm1hcCgoaXRlbTogYW55LCBpbmRleDogbnVtYmVyKSA9PiAoXG4gICAgICAgICAgPGRpdiBrZXk9e2luZGV4fSBkYXRhLXRlc3RpZD17YGd1ZXN0LXJvdy0ke2l0ZW0uaWR9YH0+XG4gICAgICAgICAgICB7Y29sdW1ucy5tYXAoKGNvbDogYW55KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gaXRlbVtjb2wua2V5XTtcbiAgICAgICAgICAgICAgY29uc3QgZGlzcGxheVZhbHVlID0gY29sLnJlbmRlciA/IGNvbC5yZW5kZXIodmFsdWUsIGl0ZW0pIDogdmFsdWU7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdiBrZXk9e2NvbC5rZXl9IGRhdGEtdGVzdGlkPXtgJHtjb2wua2V5fS0ke2l0ZW0uaWR9YH0+XG4gICAgICAgICAgICAgICAgICB7ZGlzcGxheVZhbHVlfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkpfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfSxcbn0pKTtcblxuLy8gTW9jayBmZXRjaFxuZ2xvYmFsLmZldGNoID0gamVzdC5mbigpO1xuXG4vLyBNb2NrIHdpbmRvdy5zY3JvbGxUb1xud2luZG93LnNjcm9sbFRvID0gamVzdC5mbigpO1xuXG4vLyBTYW1wbGUgZ3Vlc3QgZGF0YSBmb3IgdGVzdGluZ1xuY29uc3QgbW9ja0d1ZXN0cyA9IFtcbiAge1xuICAgIGlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICBncm91cElkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJyxcbiAgICBmaXJzdE5hbWU6ICdKb2huJyxcbiAgICBsYXN0TmFtZTogJ0RvZScsXG4gICAgZW1haWw6ICdqb2huLmRvZUBleGFtcGxlLmNvbScsXG4gICAgcGhvbmU6ICcrMTIzNDU2Nzg5MCcsXG4gICAgYWdlVHlwZTogJ2FkdWx0JyBhcyBjb25zdCxcbiAgICBndWVzdFR5cGU6ICd3ZWRkaW5nX2d1ZXN0JyBhcyBjb25zdCxcbiAgICBkaWV0YXJ5UmVzdHJpY3Rpb25zOiAnVmVnZXRhcmlhbicsXG4gICAgcGx1c09uZU5hbWU6IG51bGwsXG4gICAgcGx1c09uZUF0dGVuZGluZzogZmFsc2UsXG4gICAgYXJyaXZhbERhdGU6ICcyMDI0LTA2LTAxJyxcbiAgICBkZXBhcnR1cmVEYXRlOiAnMjAyNC0wNi0wNScsXG4gICAgYWlycG9ydENvZGU6ICdTSk8nIGFzIGNvbnN0LFxuICAgIGZsaWdodE51bWJlcjogJ0FBMTIzJyxcbiAgICBpbnZpdGF0aW9uU2VudDogdHJ1ZSxcbiAgICBpbnZpdGF0aW9uU2VudERhdGU6ICcyMDI0LTAxLTE1JyxcbiAgICByc3ZwRGVhZGxpbmU6ICcyMDI0LTA1LTAxJyxcbiAgICBub3RlczogJ1ByZWZlcnMgd2luZG93IHNlYXQnLFxuICAgIGNyZWF0ZWRBdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICB1cGRhdGVkQXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gIH0sXG4gIHtcbiAgICBpZDogJzIyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgZ3JvdXBJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMScsXG4gICAgZmlyc3ROYW1lOiAnSmFuZScsXG4gICAgbGFzdE5hbWU6ICdTbWl0aCcsXG4gICAgZW1haWw6ICdqYW5lLnNtaXRoQGV4YW1wbGUuY29tJyxcbiAgICBwaG9uZTogbnVsbCxcbiAgICBhZ2VUeXBlOiAnYWR1bHQnIGFzIGNvbnN0LFxuICAgIGd1ZXN0VHlwZTogJ3dlZGRpbmdfcGFydHknIGFzIGNvbnN0LFxuICAgIGRpZXRhcnlSZXN0cmljdGlvbnM6IG51bGwsXG4gICAgcGx1c09uZU5hbWU6ICdCb2IgU21pdGgnLFxuICAgIHBsdXNPbmVBdHRlbmRpbmc6IHRydWUsXG4gICAgYXJyaXZhbERhdGU6ICcyMDI0LTA1LTMxJyxcbiAgICBkZXBhcnR1cmVEYXRlOiAnMjAyNC0wNi0wNicsXG4gICAgYWlycG9ydENvZGU6ICdMSVInIGFzIGNvbnN0LFxuICAgIGZsaWdodE51bWJlcjogbnVsbCxcbiAgICBpbnZpdGF0aW9uU2VudDogdHJ1ZSxcbiAgICBpbnZpdGF0aW9uU2VudERhdGU6ICcyMDI0LTAxLTE1JyxcbiAgICByc3ZwRGVhZGxpbmU6ICcyMDI0LTA1LTAxJyxcbiAgICBub3RlczogbnVsbCxcbiAgICBjcmVhdGVkQXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgdXBkYXRlZEF0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICB9LFxuICB7XG4gICAgaWQ6ICczMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgIGdyb3VwSWQ6ICcyMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgIGZpcnN0TmFtZTogJ0FsaWNlJyxcbiAgICBsYXN0TmFtZTogJ0pvaG5zb24nLFxuICAgIGVtYWlsOiBudWxsLFxuICAgIHBob25lOiAnKzk4NzY1NDMyMTAnLFxuICAgIGFnZVR5cGU6ICdjaGlsZCcgYXMgY29uc3QsXG4gICAgZ3Vlc3RUeXBlOiAnd2VkZGluZ19ndWVzdCcgYXMgY29uc3QsXG4gICAgZGlldGFyeVJlc3RyaWN0aW9uczogJ0dsdXRlbi1mcmVlJyxcbiAgICBwbHVzT25lTmFtZTogbnVsbCxcbiAgICBwbHVzT25lQXR0ZW5kaW5nOiBmYWxzZSxcbiAgICBhcnJpdmFsRGF0ZTogbnVsbCxcbiAgICBkZXBhcnR1cmVEYXRlOiBudWxsLFxuICAgIGFpcnBvcnRDb2RlOiBudWxsLFxuICAgIGZsaWdodE51bWJlcjogbnVsbCxcbiAgICBpbnZpdGF0aW9uU2VudDogZmFsc2UsXG4gICAgaW52aXRhdGlvblNlbnREYXRlOiBudWxsLFxuICAgIHJzdnBEZWFkbGluZTogJzIwMjQtMDUtMDEnLFxuICAgIG5vdGVzOiAnVHJhdmVsaW5nIHdpdGggcGFyZW50cycsXG4gICAgY3JlYXRlZEF0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgIHVwZGF0ZWRBdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgfSxcbl07XG5cbmNvbnN0IG1vY2tBY3Rpdml0aWVzID0gW1xuICB7IGlkOiAnYWN0aXZpdHktMScsIG5hbWU6ICdCZWFjaCBEYXknIH0sXG4gIHsgaWQ6ICdhY3Rpdml0eS0yJywgbmFtZTogJ1dlbGNvbWUgRGlubmVyJyB9LFxuXTtcblxuZGVzY3JpYmUoJ0d1ZXN0IE1hbmFnZW1lbnQgUGFnZSAtIEFkdmFuY2VkIEZpbHRlcmluZycsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgXG4gICAgLy8gTW9jayBzdWNjZXNzZnVsIEFQSSByZXNwb25zZXNcbiAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCh1cmw6IHN0cmluZykgPT4ge1xuICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9hZG1pbi9ndWVzdHMnKSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgZ3Vlc3RzOiBtb2NrR3Vlc3RzLFxuICAgICAgICAgICAgICB0b3RhbDogbW9ja0d1ZXN0cy5sZW5ndGgsXG4gICAgICAgICAgICAgIHBhZ2U6IDEsXG4gICAgICAgICAgICAgIHBhZ2VTaXplOiA1MCxcbiAgICAgICAgICAgICAgdG90YWxQYWdlczogMSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9hZG1pbi9ncm91cHMnKSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGE6IFtdLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvYWRtaW4vYWN0aXZpdGllcycpKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogbW9ja0FjdGl2aXRpZXMsXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9hZG1pbi9yc3ZwcycpKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogW10sXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignVW5rbm93biBVUkwnKSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVuZGVyIFJTVlAgc3RhdHVzIGZpbHRlciBkcm9wZG93bicsIGFzeW5jICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8VG9hc3RQcm92aWRlcj5cbiAgICAgICAgPEd1ZXN0c1BhZ2UgLz5cbiAgICAgIDwvVG9hc3RQcm92aWRlcj5cbiAgICApO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9SU1ZQIFN0YXR1cy9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHJzdnBGaWx0ZXIgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL1JTVlAgU3RhdHVzL2kpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xuICAgIGV4cGVjdChyc3ZwRmlsdGVyKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChyc3ZwRmlsdGVyLnRhZ05hbWUpLnRvQmUoJ1NFTEVDVCcpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJlbmRlciBhY3Rpdml0eSBmaWx0ZXIgZHJvcGRvd24nLCBhc3luYyAoKSA9PiB7XG4gICAgcmVuZGVyKFxuICAgICAgPFRvYXN0UHJvdmlkZXI+XG4gICAgICAgIDxHdWVzdHNQYWdlIC8+XG4gICAgICA8L1RvYXN0UHJvdmlkZXI+XG4gICAgKTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvQWN0aXZpdHkvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBhY3Rpdml0eUZpbHRlciA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvQWN0aXZpdHkvaSkgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgZXhwZWN0KGFjdGl2aXR5RmlsdGVyKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChhY3Rpdml0eUZpbHRlci50YWdOYW1lKS50b0JlKCdTRUxFQ1QnKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZW5kZXIgdHJhbnNwb3J0YXRpb24gZmlsdGVyIGRyb3Bkb3duJywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlcihcbiAgICAgIDxUb2FzdFByb3ZpZGVyPlxuICAgICAgICA8R3Vlc3RzUGFnZSAvPlxuICAgICAgPC9Ub2FzdFByb3ZpZGVyPlxuICAgICk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL1RyYW5zcG9ydGF0aW9uL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgdHJhbnNwb3J0YXRpb25GaWx0ZXIgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL1RyYW5zcG9ydGF0aW9uL2kpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xuICAgIGV4cGVjdCh0cmFuc3BvcnRhdGlvbkZpbHRlcikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3QodHJhbnNwb3J0YXRpb25GaWx0ZXIudGFnTmFtZSkudG9CZSgnU0VMRUNUJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVuZGVyIGFnZSBncm91cCBmaWx0ZXIgZHJvcGRvd24nLCBhc3luYyAoKSA9PiB7XG4gICAgcmVuZGVyKFxuICAgICAgPFRvYXN0UHJvdmlkZXI+XG4gICAgICAgIDxHdWVzdHNQYWdlIC8+XG4gICAgICA8L1RvYXN0UHJvdmlkZXI+XG4gICAgKTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvQWdlIEdyb3VwL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgYWdlR3JvdXBGaWx0ZXIgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL0FnZSBHcm91cC9pKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcbiAgICBleHBlY3QoYWdlR3JvdXBGaWx0ZXIpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KGFnZUdyb3VwRmlsdGVyLnRhZ05hbWUpLnRvQmUoJ1NFTEVDVCcpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJlbmRlciBhaXJwb3J0IGZpbHRlciBkcm9wZG93bicsIGFzeW5jICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8VG9hc3RQcm92aWRlcj5cbiAgICAgICAgPEd1ZXN0c1BhZ2UgLz5cbiAgICAgIDwvVG9hc3RQcm92aWRlcj5cbiAgICApO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAvLyBVc2UgZ2V0QWxsQnlMYWJlbFRleHQgYW5kIGZpbmQgdGhlIHNlbGVjdCBlbGVtZW50XG4gICAgICBjb25zdCBhaXJwb3J0TGFiZWxzID0gc2NyZWVuLnF1ZXJ5QWxsQnlMYWJlbFRleHQoL0FpcnBvcnQvaSk7XG4gICAgICBjb25zdCBhaXJwb3J0RmlsdGVyID0gYWlycG9ydExhYmVscy5maW5kKGVsID0+IGVsLnRhZ05hbWUgPT09ICdTRUxFQ1QnKTtcbiAgICAgIGV4cGVjdChhaXJwb3J0RmlsdGVyKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJlbmRlciBncm91cGluZyBkcm9wZG93bicsIGFzeW5jICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8VG9hc3RQcm92aWRlcj5cbiAgICAgICAgPEd1ZXN0c1BhZ2UgLz5cbiAgICAgIDwvVG9hc3RQcm92aWRlcj5cbiAgICApO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9Hcm91cCBCeS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGdyb3VwaW5nU2VsZWN0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9Hcm91cCBCeS9pKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcbiAgICBleHBlY3QoZ3JvdXBpbmdTZWxlY3QpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KGdyb3VwaW5nU2VsZWN0LnRhZ05hbWUpLnRvQmUoJ1NFTEVDVCcpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGZldGNoIGd1ZXN0cyB3aXRoIFJTVlAgc3RhdHVzIGZpbHRlciB3aGVuIGNoYW5nZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgcmVuZGVyKFxuICAgICAgPFRvYXN0UHJvdmlkZXI+XG4gICAgICAgIDxHdWVzdHNQYWdlIC8+XG4gICAgICA8L1RvYXN0UHJvdmlkZXI+XG4gICAgKTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvUlNWUCBTdGF0dXMvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCByc3ZwRmlsdGVyID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9SU1ZQIFN0YXR1cy9pKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcbiAgICBcbiAgICAvLyBDaGFuZ2UgZmlsdGVyIHZhbHVlXG4gICAgZmlyZUV2ZW50LmNoYW5nZShyc3ZwRmlsdGVyLCB7IHRhcmdldDogeyB2YWx1ZTogJ2F0dGVuZGluZycgfSB9KTtcblxuICAgIC8vIFdhaXQgZm9yIGZldGNoIHRvIGJlIGNhbGxlZCB3aXRoIGZpbHRlciBwYXJhbWV0ZXJcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygncnN2cFN0YXR1cz1hdHRlbmRpbmcnKVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBmZXRjaCBndWVzdHMgd2l0aCBhY3Rpdml0eSBmaWx0ZXIgd2hlbiBjaGFuZ2VkJywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlcihcbiAgICAgIDxUb2FzdFByb3ZpZGVyPlxuICAgICAgICA8R3Vlc3RzUGFnZSAvPlxuICAgICAgPC9Ub2FzdFByb3ZpZGVyPlxuICAgICk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL0FjdGl2aXR5L2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgYWN0aXZpdHlGaWx0ZXIgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL0FjdGl2aXR5L2kpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xuICAgIFxuICAgIC8vIENoYW5nZSBmaWx0ZXIgdmFsdWVcbiAgICBmaXJlRXZlbnQuY2hhbmdlKGFjdGl2aXR5RmlsdGVyLCB7IHRhcmdldDogeyB2YWx1ZTogJ2FjdGl2aXR5LTEnIH0gfSk7XG5cbiAgICAvLyBXYWl0IGZvciBmZXRjaCB0byBiZSBjYWxsZWQgd2l0aCBmaWx0ZXIgcGFyYW1ldGVyXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ2FjdGl2aXR5SWQ9YWN0aXZpdHktMScpXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGZldGNoIGd1ZXN0cyB3aXRoIHRyYW5zcG9ydGF0aW9uIGZpbHRlciB3aGVuIGNoYW5nZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgcmVuZGVyKFxuICAgICAgPFRvYXN0UHJvdmlkZXI+XG4gICAgICAgIDxHdWVzdHNQYWdlIC8+XG4gICAgICA8L1RvYXN0UHJvdmlkZXI+XG4gICAgKTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvVHJhbnNwb3J0YXRpb24vaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCB0cmFuc3BvcnRhdGlvbkZpbHRlciA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvVHJhbnNwb3J0YXRpb24vaSkgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgXG4gICAgLy8gQ2hhbmdlIGZpbHRlciB2YWx1ZVxuICAgIGZpcmVFdmVudC5jaGFuZ2UodHJhbnNwb3J0YXRpb25GaWx0ZXIsIHsgdGFyZ2V0OiB7IHZhbHVlOiAndHJ1ZScgfSB9KTtcblxuICAgIC8vIFdhaXQgZm9yIGZldGNoIHRvIGJlIGNhbGxlZCB3aXRoIGZpbHRlciBwYXJhbWV0ZXJcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnaGFzVHJhbnNwb3J0YXRpb249dHJ1ZScpXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGZldGNoIGd1ZXN0cyB3aXRoIGFnZSBncm91cCBmaWx0ZXIgd2hlbiBjaGFuZ2VkJywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlcihcbiAgICAgIDxUb2FzdFByb3ZpZGVyPlxuICAgICAgICA8R3Vlc3RzUGFnZSAvPlxuICAgICAgPC9Ub2FzdFByb3ZpZGVyPlxuICAgICk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL0FnZSBHcm91cC9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGFnZUdyb3VwRmlsdGVyID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9BZ2UgR3JvdXAvaSkgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgXG4gICAgLy8gQ2hhbmdlIGZpbHRlciB2YWx1ZVxuICAgIGZpcmVFdmVudC5jaGFuZ2UoYWdlR3JvdXBGaWx0ZXIsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnYWR1bHQnIH0gfSk7XG5cbiAgICAvLyBXYWl0IGZvciBmZXRjaCB0byBiZSBjYWxsZWQgd2l0aCBmaWx0ZXIgcGFyYW1ldGVyXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ2FnZVR5cGU9YWR1bHQnKVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBmZXRjaCBndWVzdHMgd2l0aCBhaXJwb3J0IGZpbHRlciB3aGVuIGNoYW5nZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgcmVuZGVyKFxuICAgICAgPFRvYXN0UHJvdmlkZXI+XG4gICAgICAgIDxHdWVzdHNQYWdlIC8+XG4gICAgICA8L1RvYXN0UHJvdmlkZXI+XG4gICAgKTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgY29uc3QgYWlycG9ydExhYmVscyA9IHNjcmVlbi5xdWVyeUFsbEJ5TGFiZWxUZXh0KC9BaXJwb3J0L2kpO1xuICAgICAgY29uc3QgYWlycG9ydEZpbHRlciA9IGFpcnBvcnRMYWJlbHMuZmluZChlbCA9PiBlbC50YWdOYW1lID09PSAnU0VMRUNUJyk7XG4gICAgICBleHBlY3QoYWlycG9ydEZpbHRlcikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGFpcnBvcnRMYWJlbHMgPSBzY3JlZW4uZ2V0QWxsQnlMYWJlbFRleHQoL0FpcnBvcnQvaSk7XG4gICAgY29uc3QgYWlycG9ydEZpbHRlciA9IGFpcnBvcnRMYWJlbHMuZmluZChlbCA9PiBlbC50YWdOYW1lID09PSAnU0VMRUNUJykgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgXG4gICAgLy8gQ2hhbmdlIGZpbHRlciB2YWx1ZVxuICAgIGZpcmVFdmVudC5jaGFuZ2UoYWlycG9ydEZpbHRlciwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdTSk8nIH0gfSk7XG5cbiAgICAvLyBXYWl0IGZvciBmZXRjaCB0byBiZSBjYWxsZWQgd2l0aCBmaWx0ZXIgcGFyYW1ldGVyXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ2FpcnBvcnRDb2RlPVNKTycpXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHVwZGF0ZSBncm91cGluZyBmaWVsZCB3aGVuIGNoYW5nZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgcmVuZGVyKFxuICAgICAgPFRvYXN0UHJvdmlkZXI+XG4gICAgICAgIDxHdWVzdHNQYWdlIC8+XG4gICAgICA8L1RvYXN0UHJvdmlkZXI+XG4gICAgKTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvR3JvdXAgQnkvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBncm91cGluZ1NlbGVjdCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvR3JvdXAgQnkvaSkgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgXG4gICAgLy8gQ2hhbmdlIGdyb3VwaW5nIHZhbHVlXG4gICAgZmlyZUV2ZW50LmNoYW5nZShncm91cGluZ1NlbGVjdCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdhZ2VUeXBlJyB9IH0pO1xuXG4gICAgLy8gVmVyaWZ5IHRoZSB2YWx1ZSBjaGFuZ2VkXG4gICAgZXhwZWN0KGdyb3VwaW5nU2VsZWN0LnZhbHVlKS50b0JlKCdhZ2VUeXBlJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgY2xlYXIgYWxsIGZpbHRlcnMgd2hlbiBDbGVhciBBbGwgRmlsdGVycyBidXR0b24gaXMgY2xpY2tlZCcsIGFzeW5jICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8VG9hc3RQcm92aWRlcj5cbiAgICAgICAgPEd1ZXN0c1BhZ2UgLz5cbiAgICAgIDwvVG9hc3RQcm92aWRlcj5cbiAgICApO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9SU1ZQIFN0YXR1cy9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIC8vIFNldCBzb21lIGZpbHRlciB2YWx1ZXNcbiAgICBjb25zdCByc3ZwRmlsdGVyID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9SU1ZQIFN0YXR1cy9pKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcbiAgICBjb25zdCBhZ2VHcm91cEZpbHRlciA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvQWdlIEdyb3VwL2kpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xuICAgIGNvbnN0IGdyb3VwaW5nU2VsZWN0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9Hcm91cCBCeS9pKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcblxuICAgIGZpcmVFdmVudC5jaGFuZ2UocnN2cEZpbHRlciwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdhdHRlbmRpbmcnIH0gfSk7XG4gICAgZmlyZUV2ZW50LmNoYW5nZShhZ2VHcm91cEZpbHRlciwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdhZHVsdCcgfSB9KTtcbiAgICBmaXJlRXZlbnQuY2hhbmdlKGdyb3VwaW5nU2VsZWN0LCB7IHRhcmdldDogeyB2YWx1ZTogJ2FnZVR5cGUnIH0gfSk7XG5cbiAgICAvLyBWZXJpZnkgZmlsdGVycyBhcmUgc2V0XG4gICAgZXhwZWN0KHJzdnBGaWx0ZXIudmFsdWUpLnRvQmUoJ2F0dGVuZGluZycpO1xuICAgIGV4cGVjdChhZ2VHcm91cEZpbHRlci52YWx1ZSkudG9CZSgnYWR1bHQnKTtcbiAgICBleHBlY3QoZ3JvdXBpbmdTZWxlY3QudmFsdWUpLnRvQmUoJ2FnZVR5cGUnKTtcblxuICAgIC8vIENsaWNrIENsZWFyIEFsbCBGaWx0ZXJzIGJ1dHRvblxuICAgIGNvbnN0IGNsZWFyQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgvQ2xlYXIgQWxsIEZpbHRlcnMvaSk7XG4gICAgZmlyZUV2ZW50LmNsaWNrKGNsZWFyQnV0dG9uKTtcblxuICAgIC8vIFdhaXQgZm9yIGZpbHRlcnMgdG8gYmUgY2xlYXJlZFxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHJzdnBGaWx0ZXIudmFsdWUpLnRvQmUoJycpO1xuICAgICAgZXhwZWN0KGFnZUdyb3VwRmlsdGVyLnZhbHVlKS50b0JlKCcnKTtcbiAgICAgIGV4cGVjdChncm91cGluZ1NlbGVjdC52YWx1ZSkudG9CZSgnJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVuZGVyIENsZWFyIEFsbCBGaWx0ZXJzIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8VG9hc3RQcm92aWRlcj5cbiAgICAgICAgPEd1ZXN0c1BhZ2UgLz5cbiAgICAgIDwvVG9hc3RQcm92aWRlcj5cbiAgICApO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvQ2xlYXIgQWxsIEZpbHRlcnMvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBjbGVhckJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoL0NsZWFyIEFsbCBGaWx0ZXJzL2kpO1xuICAgIGV4cGVjdChjbGVhckJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3QoY2xlYXJCdXR0b24udGFnTmFtZSkudG9CZSgnQlVUVE9OJyk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJ1c2VSb3V0ZXIiLCJwdXNoIiwiZm4iLCJyZXBsYWNlIiwicHJlZmV0Y2giLCJ1c2VTZWFyY2hQYXJhbXMiLCJnZXQiLCJ0b1N0cmluZyIsIkRhdGFUYWJsZSIsImRhdGEiLCJjb2x1bW5zIiwibG9hZGluZyIsImRpdiIsImxlbmd0aCIsImRhdGEtdGVzdGlkIiwibWFwIiwiaXRlbSIsImluZGV4IiwiaWQiLCJjb2wiLCJ2YWx1ZSIsImtleSIsImRpc3BsYXlWYWx1ZSIsInJlbmRlciIsIkRhdGFUYWJsZVdpdGhTdXNwZW5zZSIsImdsb2JhbCIsImZldGNoIiwid2luZG93Iiwic2Nyb2xsVG8iLCJtb2NrR3Vlc3RzIiwiZ3JvdXBJZCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZW1haWwiLCJwaG9uZSIsImFnZVR5cGUiLCJndWVzdFR5cGUiLCJkaWV0YXJ5UmVzdHJpY3Rpb25zIiwicGx1c09uZU5hbWUiLCJwbHVzT25lQXR0ZW5kaW5nIiwiYXJyaXZhbERhdGUiLCJkZXBhcnR1cmVEYXRlIiwiYWlycG9ydENvZGUiLCJmbGlnaHROdW1iZXIiLCJpbnZpdGF0aW9uU2VudCIsImludml0YXRpb25TZW50RGF0ZSIsInJzdnBEZWFkbGluZSIsIm5vdGVzIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwibW9ja0FjdGl2aXRpZXMiLCJuYW1lIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsInVybCIsImluY2x1ZGVzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJvayIsImpzb24iLCJzdWNjZXNzIiwiZ3Vlc3RzIiwidG90YWwiLCJwYWdlIiwicGFnZVNpemUiLCJ0b3RhbFBhZ2VzIiwicmVqZWN0IiwiRXJyb3IiLCJpdCIsIlRvYXN0UHJvdmlkZXIiLCJHdWVzdHNQYWdlIiwid2FpdEZvciIsImV4cGVjdCIsInNjcmVlbiIsImdldEJ5TGFiZWxUZXh0IiwidG9CZUluVGhlRG9jdW1lbnQiLCJyc3ZwRmlsdGVyIiwidGFnTmFtZSIsInRvQmUiLCJhY3Rpdml0eUZpbHRlciIsInRyYW5zcG9ydGF0aW9uRmlsdGVyIiwiYWdlR3JvdXBGaWx0ZXIiLCJhaXJwb3J0TGFiZWxzIiwicXVlcnlBbGxCeUxhYmVsVGV4dCIsImFpcnBvcnRGaWx0ZXIiLCJmaW5kIiwiZWwiLCJncm91cGluZ1NlbGVjdCIsImZpcmVFdmVudCIsImNoYW5nZSIsInRhcmdldCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwic3RyaW5nQ29udGFpbmluZyIsImdldEFsbEJ5TGFiZWxUZXh0IiwiY2xlYXJCdXR0b24iLCJnZXRCeVRleHQiLCJjbGljayJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7OztDQVlDO0FBT0Qsc0JBQXNCO0FBQ3RCQSxLQUFLQyxJQUFJLENBQUMsbUJBQW1CLElBQU8sQ0FBQTtRQUNsQ0MsV0FBVyxJQUFPLENBQUE7Z0JBQ2hCQyxNQUFNSCxLQUFLSSxFQUFFO2dCQUNiQyxTQUFTTCxLQUFLSSxFQUFFO2dCQUNoQkUsVUFBVU4sS0FBS0ksRUFBRTtZQUNuQixDQUFBO1FBQ0FHLGlCQUFpQixJQUFPLENBQUE7Z0JBQ3RCQyxLQUFLUixLQUFLSSxFQUFFLENBQUMsSUFBTTtnQkFDbkJLLFVBQVVULEtBQUtJLEVBQUUsQ0FBQyxJQUFNO1lBQzFCLENBQUE7SUFDRixDQUFBO0FBRUEsNEJBQTRCO0FBQzVCSixLQUFLQyxJQUFJLENBQUMsNkJBQTZCLElBQU8sQ0FBQTtRQUM1Q1MsV0FBVyxDQUFDLEVBQUVDLElBQUksRUFBRUMsT0FBTyxFQUFFQyxPQUFPLEVBQU87WUFDekMsSUFBSUEsU0FBUyxxQkFBTyxxQkFBQ0M7MEJBQUk7O1lBQ3pCLElBQUlILEtBQUtJLE1BQU0sS0FBSyxHQUFHLHFCQUFPLHFCQUFDRDswQkFBSTs7WUFDbkMscUJBQ0UscUJBQUNBO2dCQUFJRSxlQUFZOzBCQUNkTCxLQUFLTSxHQUFHLENBQUMsQ0FBQ0MsTUFBV0Msc0JBQ3BCLHFCQUFDTDt3QkFBZ0JFLGVBQWEsQ0FBQyxVQUFVLEVBQUVFLEtBQUtFLEVBQUUsRUFBRTtrQ0FDakRSLFFB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