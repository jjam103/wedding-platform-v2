6cde944a567b853a5f5cf7a12a7d52a4
/**
 * Regression Test Suite: Slug Management
 * 
 * Tests slug generation and management to prevent regressions in:
 * - Slug generation from titles
 * - Slug uniqueness enforcement
 * - Slug preservation on updates
 * - Slug-based routing
 * - URL safety
 * 
 * Requirements: 24.1, 24.3, 24.7, 24.10
 * 
 * Validates: Requirements 24.1, 24.2, 24.3, 24.4, 24.5, 24.6, 24.7, 24.8, 24.9, 24.10
 */ "use strict";
// Mock Supabase
jest.mock('@/lib/supabase', ()=>({
        createClient: jest.fn(()=>(0, _mockSupabase.createMockSupabaseClient)())
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _mockSupabase = require("../helpers/mockSupabase");
describe('Regression: Slug Management', ()=>{
    let mockSupabase;
    beforeEach(()=>{
        jest.clearAllMocks();
        mockSupabase = (0, _mockSupabase.createMockSupabaseClient)();
    });
    describe('Slug Generation', ()=>{
        it('should generate slug from title on creation', async ()=>{
            mockSupabase.from.mockReturnValue({
                insert: jest.fn().mockReturnValue({
                    select: jest.fn().mockReturnValue({
                        single: jest.fn().mockResolvedValue({
                            data: {
                                id: 'event-1',
                                title: 'Wedding Ceremony',
                                slug: 'wedding-ceremony'
                            },
                            error: null
                        })
                    })
                })
            });
            // Slug should be generated: "Wedding Ceremony" → "wedding-ceremony"
            expect(mockSupabase.from).toBeDefined();
        });
        it('should convert title to lowercase', async ()=>{
            const title = 'Beach VOLLEYBALL Tournament';
            const expectedSlug = 'beach-volleyball-tournament';
            expect(expectedSlug).toBe(title.toLowerCase().replace(/\s+/g, '-'));
        });
        it('should replace spaces with hyphens', async ()=>{
            const title = 'Our Wedding Story';
            const expectedSlug = 'our-wedding-story';
            expect(expectedSlug).toBe(title.toLowerCase().replace(/\s+/g, '-'));
        });
        it('should remove special characters', async ()=>{
            const title = 'Welcome! (2024) - Our Story';
            const expectedSlug = 'welcome-2024-our-story';
            // Remove special characters: ! ( ) -
            const slug = title.toLowerCase().replace(/[^a-z0-9\s-]/g, '').replace(/\s+/g, '-').replace(/-+/g, '-');
            expect(slug).toBe(expectedSlug);
        });
        it('should handle multiple consecutive spaces', async ()=>{
            const title = 'Wedding    Ceremony    Details';
            const expectedSlug = 'wedding-ceremony-details';
            const slug = title.toLowerCase().replace(/\s+/g, '-');
            expect(slug).toBe(expectedSlug);
        });
        it('should handle leading and trailing spaces', async ()=>{
            const title = '  Wedding Ceremony  ';
            const expectedSlug = 'wedding-ceremony';
            const slug = title.trim().toLowerCase().replace(/\s+/g, '-');
            expect(slug).toBe(expectedSlug);
        });
        it('should handle accented characters', async ()=>{
            const title = 'Café Reception';
            const expectedSlug = 'cafe-reception';
            // Accented characters should be normalized
            const slug = title.normalize('NFD').replace(/[\u0300-\u036f]/g, '').toLowerCase().replace(/\s+/g, '-');
            expect(slug).toBe(expectedSlug);
        });
        it('should handle empty title', async ()=>{
            const title = '';
            const expectedSlug = 'untitled';
            const slug = title || 'untitled';
            expect(slug).toBe(expectedSlug);
        });
        it('should truncate very long slugs', async ()=>{
            const title = 'A'.repeat(200);
            const maxLength = 100;
            const slug = title.toLowerCase().substring(0, maxLength);
            expect(slug.length).toBeLessThanOrEqual(maxLength);
        });
    });
    describe('Slug Uniqueness', ()=>{
        it('should enforce unique slugs within entity type', async ()=>{
            mockSupabase.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    eq: jest.fn().mockResolvedValue({
                        data: [
                            {
                                id: 'event-1',
                                slug: 'wedding-ceremony'
                            }
                        ],
                        error: null
                    })
                })
            });
            // Attempting to create another event with same slug should fail
            expect(mockSupabase.from).toBeDefined();
        });
        it('should append numeric suffix for duplicate slugs', async ()=>{
            mockSupabase.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    eq: jest.fn().mockResolvedValue({
                        data: [
                            {
                                id: 'event-1',
                                slug: 'wedding-ceremony'
                            }
                        ],
                        error: null
                    })
                }),
                insert: jest.fn().mockReturnValue({
                    select: jest.fn().mockReturnValue({
                        single: jest.fn().mockResolvedValue({
                            data: {
                                id: 'event-2',
                                title: 'Wedding Ceremony',
                                slug: 'wedding-ceremony-2'
                            },
                            error: null
                        })
                    })
                })
            });
            // Second event with same title should get slug: "wedding-ceremony-2"
            expect(mockSupabase.from).toBeDefined();
        });
        it('should increment suffix for multiple duplicates', async ()=>{
            mockSupabase.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    eq: jest.fn().mockResolvedValue({
                        data: [
                            {
                                id: 'event-1',
                                slug: 'wedding-ceremony'
                            },
                            {
                                id: 'event-2',
                                slug: 'wedding-ceremony-2'
                            },
                            {
                                id: 'event-3',
                                slug: 'wedding-ceremony-3'
                            }
                        ],
                        error: null
                    })
                })
            });
            // Next event should get slug: "wedding-ceremony-4"
            const nextSuffix = 4;
            expect(nextSuffix).toBe(4);
        });
        it('should allow same slug across different entity types', async ()=>{
            // Event can have slug "ceremony"
            // Activity can also have slug "ceremony"
            // Content page can also have slug "ceremony"
            mockSupabase.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    eq: jest.fn().mockReturnValue({
                        eq: jest.fn().mockResolvedValue({
                            data: [],
                            error: null
                        })
                    })
                })
            });
            // Slugs are unique within entity type, not globally
            expect(mockSupabase.from).toBeDefined();
        });
        it('should check uniqueness before saving', async ()=>{
            mockSupabase.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    eq: jest.fn().mockReturnValue({
                        neq: jest.fn().mockResolvedValue({
                            data: [
                                {
                                    id: 'event-2',
                                    slug: 'wedding-ceremony'
                                }
                            ],
                            error: null
                        })
                    })
                })
            });
            // Uniqueness check should exclude current entity (neq id)
            expect(mockSupabase.from).toBeDefined();
        });
    });
    describe('Slug Preservation', ()=>{
        it('should preserve slug when updating title', async ()=>{
            mockSupabase.from.mockReturnValue({
                update: jest.fn().mockReturnValue({
                    eq: jest.fn().mockResolvedValue({
                        data: {
                            id: 'event-1',
                            title: 'Updated Wedding Ceremony',
                            slug: 'wedding-ceremony'
                        },
                        error: null
                    })
                })
            });
            // Slug should not change when title is updated
            expect(mockSupabase.from).toBeDefined();
        });
        it('should allow manual slug update', async ()=>{
            mockSupabase.from.mockReturnValue({
                update: jest.fn().mockReturnValue({
                    eq: jest.fn().mockResolvedValue({
                        data: {
                            id: 'event-1',
                            title: 'Wedding Ceremony',
                            slug: 'ceremony'
                        },
                        error: null
                    })
                })
            });
            // Admin can manually update slug
            expect(mockSupabase.from).toBeDefined();
        });
        it('should validate manual slug for URL safety', async ()=>{
            const manualSlug = 'my-custom-slug!@#';
            const isValid = /^[a-z0-9-]+$/.test(manualSlug);
            expect(isValid).toBe(false);
        });
        it('should prevent changing slug to duplicate', async ()=>{
            mockSupabase.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    eq: jest.fn().mockReturnValue({
                        neq: jest.fn().mockResolvedValue({
                            data: [
                                {
                                    id: 'event-2',
                                    slug: 'reception'
                                }
                            ],
                            error: null
                        })
                    })
                })
            });
            // Attempting to change slug to existing slug should fail
            expect(mockSupabase.from).toBeDefined();
        });
        it('should maintain slug history for redirects', async ()=>{
            // When slug changes, old slug should redirect to new slug
            const slugHistory = [
                {
                    old_slug: 'wedding-ceremony-old',
                    new_slug: 'wedding-ceremony',
                    created_at: '2024-01-15'
                }
            ];
            expect(slugHistory.length).toBe(1);
            expect(slugHistory[0].old_slug).toBeDefined();
            expect(slugHistory[0].new_slug).toBeDefined();
        });
    });
    describe('Slug-Based Routing', ()=>{
        it('should route to event by slug', async ()=>{
            mockSupabase.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    eq: jest.fn().mockReturnValue({
                        single: jest.fn().mockResolvedValue({
                            data: {
                                id: 'event-1',
                                title: 'Wedding Ceremony',
                                slug: 'wedding-ceremony'
                            },
                            error: null
                        })
                    })
                })
            });
            // Route: /event/wedding-ceremony
            expect(mockSupabase.from).toBeDefined();
        });
        it('should route to activity by slug', async ()=>{
            mockSupabase.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    eq: jest.fn().mockReturnValue({
                        single: jest.fn().mockResolvedValue({
                            data: {
                                id: 'activity-1',
                                title: 'Beach Volleyball',
                                slug: 'beach-volleyball'
                            },
                            error: null
                        })
                    })
                })
            });
            // Route: /activity/beach-volleyball
            expect(mockSupabase.from).toBeDefined();
        });
        it('should route to content page by slug', async ()=>{
            mockSupabase.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    eq: jest.fn().mockReturnValue({
                        single: jest.fn().mockResolvedValue({
                            data: {
                                id: 'page-1',
                                title: 'Our Story',
                                slug: 'our-story'
                            },
                            error: null
                        })
                    })
                })
            });
            // Route: /content-page/our-story
            expect(mockSupabase.from).toBeDefined();
        });
        it('should return 404 for non-existent slug', async ()=>{
            mockSupabase.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    eq: jest.fn().mockReturnValue({
                        single: jest.fn().mockResolvedValue({
                            data: null,
                            error: {
                                message: 'No rows returned'
                            }
                        })
                    })
                })
            });
            // Should return 404 Not Found
            expect(mockSupabase.from).toBeDefined();
        });
        it('should redirect old slug to new slug', async ()=>{
            // Old URL: /event/wedding-ceremony-old
            // Should redirect to: /event/wedding-ceremony
            mockSupabase.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    eq: jest.fn().mockReturnValue({
                        single: jest.fn().mockResolvedValue({
                            data: {
                                old_slug: 'wedding-ceremony-old',
                                new_slug: 'wedding-ceremony'
                            },
                            error: null
                        })
                    })
                })
            });
            // Should return 301 Permanent Redirect
            expect(mockSupabase.from).toBeDefined();
        });
        it('should support preview mode with slug', async ()=>{
            // Route: /event/wedding-ceremony?preview=true
            const previewMode = true;
            mockSupabase.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    eq: jest.fn().mockReturnValue({
                        single: jest.fn().mockResolvedValue({
                            data: {
                                id: 'event-1',
                                title: 'Wedding Ceremony',
                                slug: 'wedding-ceremony',
                                status: 'draft'
                            },
                            error: null
                        })
                    })
                })
            });
            // Preview mode should show draft content
            expect(previewMode).toBe(true);
        });
        it('should maintain backward compatibility with ID-based URLs', async ()=>{
            // Old URL: /event/event-1
            // Should redirect to: /event/wedding-ceremony
            mockSupabase.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    eq: jest.fn().mockReturnValue({
                        single: jest.fn().mockResolvedValue({
                            data: {
                                id: 'event-1',
                                slug: 'wedding-ceremony'
                            },
                            error: null
                        })
                    })
                })
            });
            // Should return 301 Permanent Redirect to slug-based URL
            expect(mockSupabase.from).toBeDefined();
        });
    });
    describe('URL Safety', ()=>{
        it('should only allow lowercase letters, numbers, and hyphens', async ()=>{
            const validSlug = 'wedding-ceremony-2024';
            const isValid = /^[a-z0-9-]+$/.test(validSlug);
            expect(isValid).toBe(true);
        });
        it('should reject uppercase letters', async ()=>{
            const invalidSlug = 'Wedding-Ceremony';
            const isValid = /^[a-z0-9-]+$/.test(invalidSlug);
            expect(isValid).toBe(false);
        });
        it('should reject special characters', async ()=>{
            const invalidSlug = 'wedding-ceremony!@#';
            const isValid = /^[a-z0-9-]+$/.test(invalidSlug);
            expect(isValid).toBe(false);
        });
        it('should reject spaces', async ()=>{
            const invalidSlug = 'wedding ceremony';
            const isValid = /^[a-z0-9-]+$/.test(invalidSlug);
            expect(isValid).toBe(false);
        });
        it('should reject underscores', async ()=>{
            const invalidSlug = 'wedding_ceremony';
            const isValid = /^[a-z0-9-]+$/.test(invalidSlug);
            expect(isValid).toBe(false);
        });
        it('should reject leading hyphen', async ()=>{
            const invalidSlug = '-wedding-ceremony';
            const isValid = /^[a-z0-9][a-z0-9-]*$/.test(invalidSlug);
            expect(isValid).toBe(false);
        });
        it('should reject trailing hyphen', async ()=>{
            const invalidSlug = 'wedding-ceremony-';
            const isValid = /^[a-z0-9-]*[a-z0-9]$/.test(invalidSlug);
            expect(isValid).toBe(false);
        });
        it('should reject consecutive hyphens', async ()=>{
            const invalidSlug = 'wedding--ceremony';
            const hasConsecutiveHyphens = /--/.test(invalidSlug);
            expect(hasConsecutiveHyphens).toBe(true);
        });
        it('should be URL-encodable without changes', async ()=>{
            const slug = 'wedding-ceremony-2024';
            const encoded = encodeURIComponent(slug);
            expect(encoded).toBe(slug);
        });
        it('should be safe for file systems', async ()=>{
            const slug = 'wedding-ceremony-2024';
            const unsafeChars = /[<>:"/\\|?*]/;
            expect(unsafeChars.test(slug)).toBe(false);
        });
    });
    describe('Slug Validation', ()=>{
        it('should validate slug length (min: 1, max: 100)', async ()=>{
            const tooShort = '';
            const tooLong = 'a'.repeat(101);
            const valid = 'wedding-ceremony';
            expect(tooShort.length).toBeLessThan(1);
            expect(tooLong.length).toBeGreaterThan(100);
            expect(valid.length).toBeGreaterThanOrEqual(1);
            expect(valid.length).toBeLessThanOrEqual(100);
        });
        it('should validate slug format on creation', async ()=>{
            const slug = 'wedding-ceremony';
            const isValid = /^[a-z0-9][a-z0-9-]*[a-z0-9]$|^[a-z0-9]$/.test(slug);
            expect(isValid).toBe(true);
        });
        it('should validate slug format on update', async ()=>{
            const slug = 'updated-ceremony';
            const isValid = /^[a-z0-9][a-z0-9-]*[a-z0-9]$|^[a-z0-9]$/.test(slug);
            expect(isValid).toBe(true);
        });
        it('should return validation error for invalid slug', async ()=>{
            const invalidSlug = 'Invalid Slug!';
            const error = {
                code: 'VALIDATION_ERROR',
                message: 'Slug must contain only lowercase letters, numbers, and hyphens'
            };
            expect(error.code).toBe('VALIDATION_ERROR');
            expect(error.message).toContain('lowercase letters');
        });
        it('should return validation error for duplicate slug', async ()=>{
            mockSupabase.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    eq: jest.fn().mockReturnValue({
                        neq: jest.fn().mockResolvedValue({
                            data: [
                                {
                                    id: 'event-2',
                                    slug: 'wedding-ceremony'
                                }
                            ],
                            error: null
                        })
                    })
                })
            });
            const error = {
                code: 'CONFLICT',
                message: 'Slug already exists'
            };
            expect(error.code).toBe('CONFLICT');
            expect(error.message).toContain('already exists');
        });
    });
    describe('Slug Migration', ()=>{
        it('should generate slugs for existing records without slugs', async ()=>{
            mockSupabase.from.mockReturnValue({
                select: jest.fn().mockReturnValue({
                    is: jest.fn().mockResolvedValue({
                        data: [
                            {
                                id: 'event-1',
                                title: 'Wedding Ceremony',
                                slug: null
                            },
                            {
                                id: 'event-2',
                                title: 'Reception',
                                slug: null
                            }
                        ],
                        error: null
                    })
                }),
                update: jest.fn().mockReturnValue({
                    eq: jest.fn().mockResolvedValue({
                        data: {
                            id: 'event-1',
                            slug: 'wedding-ceremony'
                        },
                        error: null
                    })
                })
            });
            // Migration should generate slugs for all records
            expect(mockSupabase.from).toBeDefined();
        });
        it('should handle slug conflicts during migration', async ()=>{
            // Multiple records with same title should get unique slugs
            const records = [
                {
                    id: 'event-1',
                    title: 'Wedding Ceremony'
                },
                {
                    id: 'event-2',
                    title: 'Wedding Ceremony'
                },
                {
                    id: 'event-3',
                    title: 'Wedding Ceremony'
                }
            ];
            const expectedSlugs = [
                'wedding-ceremony',
                'wedding-ceremony-2',
                'wedding-ceremony-3'
            ];
            expect(expectedSlugs.length).toBe(records.length);
        });
        it('should log migration progress', async ()=>{
            const migrationLog = {
                total_records: 100,
                processed: 100,
                successful: 98,
                failed: 2,
                duration_ms: 5000
            };
            expect(migrationLog.successful).toBe(98);
            expect(migrationLog.failed).toBe(2);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvX190ZXN0c19fL3JlZ3Jlc3Npb24vc2x1Z01hbmFnZW1lbnQucmVncmVzc2lvbi50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUmVncmVzc2lvbiBUZXN0IFN1aXRlOiBTbHVnIE1hbmFnZW1lbnRcbiAqIFxuICogVGVzdHMgc2x1ZyBnZW5lcmF0aW9uIGFuZCBtYW5hZ2VtZW50IHRvIHByZXZlbnQgcmVncmVzc2lvbnMgaW46XG4gKiAtIFNsdWcgZ2VuZXJhdGlvbiBmcm9tIHRpdGxlc1xuICogLSBTbHVnIHVuaXF1ZW5lc3MgZW5mb3JjZW1lbnRcbiAqIC0gU2x1ZyBwcmVzZXJ2YXRpb24gb24gdXBkYXRlc1xuICogLSBTbHVnLWJhc2VkIHJvdXRpbmdcbiAqIC0gVVJMIHNhZmV0eVxuICogXG4gKiBSZXF1aXJlbWVudHM6IDI0LjEsIDI0LjMsIDI0LjcsIDI0LjEwXG4gKiBcbiAqIFZhbGlkYXRlczogUmVxdWlyZW1lbnRzIDI0LjEsIDI0LjIsIDI0LjMsIDI0LjQsIDI0LjUsIDI0LjYsIDI0LjcsIDI0LjgsIDI0LjksIDI0LjEwXG4gKi9cblxuaW1wb3J0IHsgY3JlYXRlTW9ja1N1cGFiYXNlQ2xpZW50IH0gZnJvbSAnQC9fX3Rlc3RzX18vaGVscGVycy9tb2NrU3VwYWJhc2UnO1xuXG4vLyBNb2NrIFN1cGFiYXNlXG5qZXN0Lm1vY2soJ0AvbGliL3N1cGFiYXNlJywgKCkgPT4gKHtcbiAgY3JlYXRlQ2xpZW50OiBqZXN0LmZuKCgpID0+IGNyZWF0ZU1vY2tTdXBhYmFzZUNsaWVudCgpKSxcbn0pKTtcblxuZGVzY3JpYmUoJ1JlZ3Jlc3Npb246IFNsdWcgTWFuYWdlbWVudCcsICgpID0+IHtcbiAgbGV0IG1vY2tTdXBhYmFzZTogUmV0dXJuVHlwZTx0eXBlb2YgY3JlYXRlTW9ja1N1cGFiYXNlQ2xpZW50PjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBtb2NrU3VwYWJhc2UgPSBjcmVhdGVNb2NrU3VwYWJhc2VDbGllbnQoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NsdWcgR2VuZXJhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIHNsdWcgZnJvbSB0aXRsZSBvbiBjcmVhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGluc2VydDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgIHNpbmdsZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGlkOiAnZXZlbnQtMScsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdXZWRkaW5nIENlcmVtb255JyxcbiAgICAgICAgICAgICAgICBzbHVnOiAnd2VkZGluZy1jZXJlbW9ueScsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICAvLyBTbHVnIHNob3VsZCBiZSBnZW5lcmF0ZWQ6IFwiV2VkZGluZyBDZXJlbW9ueVwiIOKGkiBcIndlZGRpbmctY2VyZW1vbnlcIlxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZS5mcm9tKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjb252ZXJ0IHRpdGxlIHRvIGxvd2VyY2FzZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRpdGxlID0gJ0JlYWNoIFZPTExFWUJBTEwgVG91cm5hbWVudCc7XG4gICAgICBjb25zdCBleHBlY3RlZFNsdWcgPSAnYmVhY2gtdm9sbGV5YmFsbC10b3VybmFtZW50JztcblxuICAgICAgZXhwZWN0KGV4cGVjdGVkU2x1ZykudG9CZSh0aXRsZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJy0nKSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlcGxhY2Ugc3BhY2VzIHdpdGggaHlwaGVucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRpdGxlID0gJ091ciBXZWRkaW5nIFN0b3J5JztcbiAgICAgIGNvbnN0IGV4cGVjdGVkU2x1ZyA9ICdvdXItd2VkZGluZy1zdG9yeSc7XG5cbiAgICAgIGV4cGVjdChleHBlY3RlZFNsdWcpLnRvQmUodGl0bGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICctJykpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZW1vdmUgc3BlY2lhbCBjaGFyYWN0ZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGl0bGUgPSAnV2VsY29tZSEgKDIwMjQpIC0gT3VyIFN0b3J5JztcbiAgICAgIGNvbnN0IGV4cGVjdGVkU2x1ZyA9ICd3ZWxjb21lLTIwMjQtb3VyLXN0b3J5JztcblxuICAgICAgLy8gUmVtb3ZlIHNwZWNpYWwgY2hhcmFjdGVyczogISAoICkgLVxuICAgICAgY29uc3Qgc2x1ZyA9IHRpdGxlXG4gICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgIC5yZXBsYWNlKC9bXmEtejAtOVxccy1dL2csICcnKVxuICAgICAgICAucmVwbGFjZSgvXFxzKy9nLCAnLScpXG4gICAgICAgIC5yZXBsYWNlKC8tKy9nLCAnLScpO1xuXG4gICAgICBleHBlY3Qoc2x1ZykudG9CZShleHBlY3RlZFNsdWcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbXVsdGlwbGUgY29uc2VjdXRpdmUgc3BhY2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGl0bGUgPSAnV2VkZGluZyAgICBDZXJlbW9ueSAgICBEZXRhaWxzJztcbiAgICAgIGNvbnN0IGV4cGVjdGVkU2x1ZyA9ICd3ZWRkaW5nLWNlcmVtb255LWRldGFpbHMnO1xuXG4gICAgICBjb25zdCBzbHVnID0gdGl0bGVcbiAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgLnJlcGxhY2UoL1xccysvZywgJy0nKTtcblxuICAgICAgZXhwZWN0KHNsdWcpLnRvQmUoZXhwZWN0ZWRTbHVnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNwYWNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRpdGxlID0gJyAgV2VkZGluZyBDZXJlbW9ueSAgJztcbiAgICAgIGNvbnN0IGV4cGVjdGVkU2x1ZyA9ICd3ZWRkaW5nLWNlcmVtb255JztcblxuICAgICAgY29uc3Qgc2x1ZyA9IHRpdGxlXG4gICAgICAgIC50cmltKClcbiAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgLnJlcGxhY2UoL1xccysvZywgJy0nKTtcblxuICAgICAgZXhwZWN0KHNsdWcpLnRvQmUoZXhwZWN0ZWRTbHVnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGFjY2VudGVkIGNoYXJhY3RlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0aXRsZSA9ICdDYWbDqSBSZWNlcHRpb24nO1xuICAgICAgY29uc3QgZXhwZWN0ZWRTbHVnID0gJ2NhZmUtcmVjZXB0aW9uJztcblxuICAgICAgLy8gQWNjZW50ZWQgY2hhcmFjdGVycyBzaG91bGQgYmUgbm9ybWFsaXplZFxuICAgICAgY29uc3Qgc2x1ZyA9IHRpdGxlXG4gICAgICAgIC5ub3JtYWxpemUoJ05GRCcpXG4gICAgICAgIC5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCAnJylcbiAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgLnJlcGxhY2UoL1xccysvZywgJy0nKTtcblxuICAgICAgZXhwZWN0KHNsdWcpLnRvQmUoZXhwZWN0ZWRTbHVnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHRpdGxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGl0bGUgPSAnJztcbiAgICAgIGNvbnN0IGV4cGVjdGVkU2x1ZyA9ICd1bnRpdGxlZCc7XG5cbiAgICAgIGNvbnN0IHNsdWcgPSB0aXRsZSB8fCAndW50aXRsZWQnO1xuXG4gICAgICBleHBlY3Qoc2x1ZykudG9CZShleHBlY3RlZFNsdWcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0cnVuY2F0ZSB2ZXJ5IGxvbmcgc2x1Z3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0aXRsZSA9ICdBJy5yZXBlYXQoMjAwKTtcbiAgICAgIGNvbnN0IG1heExlbmd0aCA9IDEwMDtcblxuICAgICAgY29uc3Qgc2x1ZyA9IHRpdGxlXG4gICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgIC5zdWJzdHJpbmcoMCwgbWF4TGVuZ3RoKTtcblxuICAgICAgZXhwZWN0KHNsdWcubGVuZ3RoKS50b0JlTGVzc1RoYW5PckVxdWFsKG1heExlbmd0aCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTbHVnIFVuaXF1ZW5lc3MnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBlbmZvcmNlIHVuaXF1ZSBzbHVncyB3aXRoaW4gZW50aXR5IHR5cGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrU3VwYWJhc2UuZnJvbS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgIGVxOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgZGF0YTogW1xuICAgICAgICAgICAgICB7IGlkOiAnZXZlbnQtMScsIHNsdWc6ICd3ZWRkaW5nLWNlcmVtb255JyB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgLy8gQXR0ZW1wdGluZyB0byBjcmVhdGUgYW5vdGhlciBldmVudCB3aXRoIHNhbWUgc2x1ZyBzaG91bGQgZmFpbFxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZS5mcm9tKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhcHBlbmQgbnVtZXJpYyBzdWZmaXggZm9yIGR1cGxpY2F0ZSBzbHVncycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgZXE6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICBkYXRhOiBbXG4gICAgICAgICAgICAgIHsgaWQ6ICdldmVudC0xJywgc2x1ZzogJ3dlZGRpbmctY2VyZW1vbnknIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgICBpbnNlcnQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpZDogJ2V2ZW50LTInLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnV2VkZGluZyBDZXJlbW9ueScsXG4gICAgICAgICAgICAgICAgc2x1ZzogJ3dlZGRpbmctY2VyZW1vbnktMicsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICAvLyBTZWNvbmQgZXZlbnQgd2l0aCBzYW1lIHRpdGxlIHNob3VsZCBnZXQgc2x1ZzogXCJ3ZWRkaW5nLWNlcmVtb255LTJcIlxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZS5mcm9tKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbmNyZW1lbnQgc3VmZml4IGZvciBtdWx0aXBsZSBkdXBsaWNhdGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICBlcTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgIGRhdGE6IFtcbiAgICAgICAgICAgICAgeyBpZDogJ2V2ZW50LTEnLCBzbHVnOiAnd2VkZGluZy1jZXJlbW9ueScgfSxcbiAgICAgICAgICAgICAgeyBpZDogJ2V2ZW50LTInLCBzbHVnOiAnd2VkZGluZy1jZXJlbW9ueS0yJyB9LFxuICAgICAgICAgICAgICB7IGlkOiAnZXZlbnQtMycsIHNsdWc6ICd3ZWRkaW5nLWNlcmVtb255LTMnIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICAvLyBOZXh0IGV2ZW50IHNob3VsZCBnZXQgc2x1ZzogXCJ3ZWRkaW5nLWNlcmVtb255LTRcIlxuICAgICAgY29uc3QgbmV4dFN1ZmZpeCA9IDQ7XG4gICAgICBleHBlY3QobmV4dFN1ZmZpeCkudG9CZSg0KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWxsb3cgc2FtZSBzbHVnIGFjcm9zcyBkaWZmZXJlbnQgZW50aXR5IHR5cGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gRXZlbnQgY2FuIGhhdmUgc2x1ZyBcImNlcmVtb255XCJcbiAgICAgIC8vIEFjdGl2aXR5IGNhbiBhbHNvIGhhdmUgc2x1ZyBcImNlcmVtb255XCJcbiAgICAgIC8vIENvbnRlbnQgcGFnZSBjYW4gYWxzbyBoYXZlIHNsdWcgXCJjZXJlbW9ueVwiXG5cbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgZXE6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgZXE6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgIGRhdGE6IFtdLFxuICAgICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgLy8gU2x1Z3MgYXJlIHVuaXF1ZSB3aXRoaW4gZW50aXR5IHR5cGUsIG5vdCBnbG9iYWxseVxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZS5mcm9tKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjaGVjayB1bmlxdWVuZXNzIGJlZm9yZSBzYXZpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrU3VwYWJhc2UuZnJvbS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgIGVxOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgIG5lcTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgICAgZGF0YTogW1xuICAgICAgICAgICAgICAgIHsgaWQ6ICdldmVudC0yJywgc2x1ZzogJ3dlZGRpbmctY2VyZW1vbnknIH0sXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICAvLyBVbmlxdWVuZXNzIGNoZWNrIHNob3VsZCBleGNsdWRlIGN1cnJlbnQgZW50aXR5IChuZXEgaWQpXG4gICAgICBleHBlY3QobW9ja1N1cGFiYXNlLmZyb20pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTbHVnIFByZXNlcnZhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHByZXNlcnZlIHNsdWcgd2hlbiB1cGRhdGluZyB0aXRsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVwZGF0ZTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgZXE6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIGlkOiAnZXZlbnQtMScsXG4gICAgICAgICAgICAgIHRpdGxlOiAnVXBkYXRlZCBXZWRkaW5nIENlcmVtb255JyxcbiAgICAgICAgICAgICAgc2x1ZzogJ3dlZGRpbmctY2VyZW1vbnknLCAvLyBTbHVnIHVuY2hhbmdlZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgLy8gU2x1ZyBzaG91bGQgbm90IGNoYW5nZSB3aGVuIHRpdGxlIGlzIHVwZGF0ZWRcbiAgICAgIGV4cGVjdChtb2NrU3VwYWJhc2UuZnJvbSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWxsb3cgbWFudWFsIHNsdWcgdXBkYXRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgdXBkYXRlOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICBlcTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgaWQ6ICdldmVudC0xJyxcbiAgICAgICAgICAgICAgdGl0bGU6ICdXZWRkaW5nIENlcmVtb255JyxcbiAgICAgICAgICAgICAgc2x1ZzogJ2NlcmVtb255JywgLy8gTWFudWFsbHkgdXBkYXRlZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgLy8gQWRtaW4gY2FuIG1hbnVhbGx5IHVwZGF0ZSBzbHVnXG4gICAgICBleHBlY3QobW9ja1N1cGFiYXNlLmZyb20pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIG1hbnVhbCBzbHVnIGZvciBVUkwgc2FmZXR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWFudWFsU2x1ZyA9ICdteS1jdXN0b20tc2x1ZyFAIyc7XG4gICAgICBjb25zdCBpc1ZhbGlkID0gL15bYS16MC05LV0rJC8udGVzdChtYW51YWxTbHVnKTtcblxuICAgICAgZXhwZWN0KGlzVmFsaWQpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwcmV2ZW50IGNoYW5naW5nIHNsdWcgdG8gZHVwbGljYXRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICBlcTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICBuZXE6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgIGRhdGE6IFtcbiAgICAgICAgICAgICAgICB7IGlkOiAnZXZlbnQtMicsIHNsdWc6ICdyZWNlcHRpb24nIH0sXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICAvLyBBdHRlbXB0aW5nIHRvIGNoYW5nZSBzbHVnIHRvIGV4aXN0aW5nIHNsdWcgc2hvdWxkIGZhaWxcbiAgICAgIGV4cGVjdChtb2NrU3VwYWJhc2UuZnJvbSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbWFpbnRhaW4gc2x1ZyBoaXN0b3J5IGZvciByZWRpcmVjdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBXaGVuIHNsdWcgY2hhbmdlcywgb2xkIHNsdWcgc2hvdWxkIHJlZGlyZWN0IHRvIG5ldyBzbHVnXG4gICAgICBjb25zdCBzbHVnSGlzdG9yeSA9IFtcbiAgICAgICAgeyBvbGRfc2x1ZzogJ3dlZGRpbmctY2VyZW1vbnktb2xkJywgbmV3X3NsdWc6ICd3ZWRkaW5nLWNlcmVtb255JywgY3JlYXRlZF9hdDogJzIwMjQtMDEtMTUnIH0sXG4gICAgICBdO1xuXG4gICAgICBleHBlY3Qoc2x1Z0hpc3RvcnkubGVuZ3RoKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KHNsdWdIaXN0b3J5WzBdLm9sZF9zbHVnKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHNsdWdIaXN0b3J5WzBdLm5ld19zbHVnKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU2x1Zy1CYXNlZCBSb3V0aW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcm91dGUgdG8gZXZlbnQgYnkgc2x1ZycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgZXE6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgc2luZ2xlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgaWQ6ICdldmVudC0xJyxcbiAgICAgICAgICAgICAgICB0aXRsZTogJ1dlZGRpbmcgQ2VyZW1vbnknLFxuICAgICAgICAgICAgICAgIHNsdWc6ICd3ZWRkaW5nLWNlcmVtb255JyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSksXG4gICAgICB9IGFzIGFueSk7XG5cbiAgICAgIC8vIFJvdXRlOiAvZXZlbnQvd2VkZGluZy1jZXJlbW9ueVxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZS5mcm9tKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByb3V0ZSB0byBhY3Rpdml0eSBieSBzbHVnJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICBlcTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpZDogJ2FjdGl2aXR5LTEnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnQmVhY2ggVm9sbGV5YmFsbCcsXG4gICAgICAgICAgICAgICAgc2x1ZzogJ2JlYWNoLXZvbGxleWJhbGwnLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgLy8gUm91dGU6IC9hY3Rpdml0eS9iZWFjaC12b2xsZXliYWxsXG4gICAgICBleHBlY3QobW9ja1N1cGFiYXNlLmZyb20pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJvdXRlIHRvIGNvbnRlbnQgcGFnZSBieSBzbHVnJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICBlcTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpZDogJ3BhZ2UtMScsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdPdXIgU3RvcnknLFxuICAgICAgICAgICAgICAgIHNsdWc6ICdvdXItc3RvcnknLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgLy8gUm91dGU6IC9jb250ZW50LXBhZ2Uvb3VyLXN0b3J5XG4gICAgICBleHBlY3QobW9ja1N1cGFiYXNlLmZyb20pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDQgZm9yIG5vbi1leGlzdGVudCBzbHVnJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICBlcTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdObyByb3dzIHJldHVybmVkJyB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICAvLyBTaG91bGQgcmV0dXJuIDQwNCBOb3QgRm91bmRcbiAgICAgIGV4cGVjdChtb2NrU3VwYWJhc2UuZnJvbSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVkaXJlY3Qgb2xkIHNsdWcgdG8gbmV3IHNsdWcnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBPbGQgVVJMOiAvZXZlbnQvd2VkZGluZy1jZXJlbW9ueS1vbGRcbiAgICAgIC8vIFNob3VsZCByZWRpcmVjdCB0bzogL2V2ZW50L3dlZGRpbmctY2VyZW1vbnlcblxuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICBlcTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBvbGRfc2x1ZzogJ3dlZGRpbmctY2VyZW1vbnktb2xkJyxcbiAgICAgICAgICAgICAgICBuZXdfc2x1ZzogJ3dlZGRpbmctY2VyZW1vbnknLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgLy8gU2hvdWxkIHJldHVybiAzMDEgUGVybWFuZW50IFJlZGlyZWN0XG4gICAgICBleHBlY3QobW9ja1N1cGFiYXNlLmZyb20pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgcHJldmlldyBtb2RlIHdpdGggc2x1ZycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFJvdXRlOiAvZXZlbnQvd2VkZGluZy1jZXJlbW9ueT9wcmV2aWV3PXRydWVcbiAgICAgIGNvbnN0IHByZXZpZXdNb2RlID0gdHJ1ZTtcblxuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICBlcTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpZDogJ2V2ZW50LTEnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnV2VkZGluZyBDZXJlbW9ueScsXG4gICAgICAgICAgICAgICAgc2x1ZzogJ3dlZGRpbmctY2VyZW1vbnknLFxuICAgICAgICAgICAgICAgIHN0YXR1czogJ2RyYWZ0JyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSksXG4gICAgICB9IGFzIGFueSk7XG5cbiAgICAgIC8vIFByZXZpZXcgbW9kZSBzaG91bGQgc2hvdyBkcmFmdCBjb250ZW50XG4gICAgICBleHBlY3QocHJldmlld01vZGUpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG1haW50YWluIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgd2l0aCBJRC1iYXNlZCBVUkxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gT2xkIFVSTDogL2V2ZW50L2V2ZW50LTFcbiAgICAgIC8vIFNob3VsZCByZWRpcmVjdCB0bzogL2V2ZW50L3dlZGRpbmctY2VyZW1vbnlcblxuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICBlcTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpZDogJ2V2ZW50LTEnLFxuICAgICAgICAgICAgICAgIHNsdWc6ICd3ZWRkaW5nLWNlcmVtb255JyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSksXG4gICAgICB9IGFzIGFueSk7XG5cbiAgICAgIC8vIFNob3VsZCByZXR1cm4gMzAxIFBlcm1hbmVudCBSZWRpcmVjdCB0byBzbHVnLWJhc2VkIFVSTFxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZS5mcm9tKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVVJMIFNhZmV0eScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIG9ubHkgYWxsb3cgbG93ZXJjYXNlIGxldHRlcnMsIG51bWJlcnMsIGFuZCBoeXBoZW5zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdmFsaWRTbHVnID0gJ3dlZGRpbmctY2VyZW1vbnktMjAyNCc7XG4gICAgICBjb25zdCBpc1ZhbGlkID0gL15bYS16MC05LV0rJC8udGVzdCh2YWxpZFNsdWcpO1xuXG4gICAgICBleHBlY3QoaXNWYWxpZCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IHVwcGVyY2FzZSBsZXR0ZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZFNsdWcgPSAnV2VkZGluZy1DZXJlbW9ueSc7XG4gICAgICBjb25zdCBpc1ZhbGlkID0gL15bYS16MC05LV0rJC8udGVzdChpbnZhbGlkU2x1Zyk7XG5cbiAgICAgIGV4cGVjdChpc1ZhbGlkKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IHNwZWNpYWwgY2hhcmFjdGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRTbHVnID0gJ3dlZGRpbmctY2VyZW1vbnkhQCMnO1xuICAgICAgY29uc3QgaXNWYWxpZCA9IC9eW2EtejAtOS1dKyQvLnRlc3QoaW52YWxpZFNsdWcpO1xuXG4gICAgICBleHBlY3QoaXNWYWxpZCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlamVjdCBzcGFjZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkU2x1ZyA9ICd3ZWRkaW5nIGNlcmVtb255JztcbiAgICAgIGNvbnN0IGlzVmFsaWQgPSAvXlthLXowLTktXSskLy50ZXN0KGludmFsaWRTbHVnKTtcblxuICAgICAgZXhwZWN0KGlzVmFsaWQpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgdW5kZXJzY29yZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkU2x1ZyA9ICd3ZWRkaW5nX2NlcmVtb255JztcbiAgICAgIGNvbnN0IGlzVmFsaWQgPSAvXlthLXowLTktXSskLy50ZXN0KGludmFsaWRTbHVnKTtcblxuICAgICAgZXhwZWN0KGlzVmFsaWQpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgbGVhZGluZyBoeXBoZW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkU2x1ZyA9ICctd2VkZGluZy1jZXJlbW9ueSc7XG4gICAgICBjb25zdCBpc1ZhbGlkID0gL15bYS16MC05XVthLXowLTktXSokLy50ZXN0KGludmFsaWRTbHVnKTtcblxuICAgICAgZXhwZWN0KGlzVmFsaWQpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgdHJhaWxpbmcgaHlwaGVuJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZFNsdWcgPSAnd2VkZGluZy1jZXJlbW9ueS0nO1xuICAgICAgY29uc3QgaXNWYWxpZCA9IC9eW2EtejAtOS1dKlthLXowLTldJC8udGVzdChpbnZhbGlkU2x1Zyk7XG5cbiAgICAgIGV4cGVjdChpc1ZhbGlkKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGNvbnNlY3V0aXZlIGh5cGhlbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkU2x1ZyA9ICd3ZWRkaW5nLS1jZXJlbW9ueSc7XG4gICAgICBjb25zdCBoYXNDb25zZWN1dGl2ZUh5cGhlbnMgPSAvLS0vLnRlc3QoaW52YWxpZFNsdWcpO1xuXG4gICAgICBleHBlY3QoaGFzQ29uc2VjdXRpdmVIeXBoZW5zKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBiZSBVUkwtZW5jb2RhYmxlIHdpdGhvdXQgY2hhbmdlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNsdWcgPSAnd2VkZGluZy1jZXJlbW9ueS0yMDI0JztcbiAgICAgIGNvbnN0IGVuY29kZWQgPSBlbmNvZGVVUklDb21wb25lbnQoc2x1Zyk7XG5cbiAgICAgIGV4cGVjdChlbmNvZGVkKS50b0JlKHNsdWcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBiZSBzYWZlIGZvciBmaWxlIHN5c3RlbXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzbHVnID0gJ3dlZGRpbmctY2VyZW1vbnktMjAyNCc7XG4gICAgICBjb25zdCB1bnNhZmVDaGFycyA9IC9bPD46XCIvXFxcXHw/Kl0vO1xuXG4gICAgICBleHBlY3QodW5zYWZlQ2hhcnMudGVzdChzbHVnKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTbHVnIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBzbHVnIGxlbmd0aCAobWluOiAxLCBtYXg6IDEwMCknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0b29TaG9ydCA9ICcnO1xuICAgICAgY29uc3QgdG9vTG9uZyA9ICdhJy5yZXBlYXQoMTAxKTtcbiAgICAgIGNvbnN0IHZhbGlkID0gJ3dlZGRpbmctY2VyZW1vbnknO1xuXG4gICAgICBleHBlY3QodG9vU2hvcnQubGVuZ3RoKS50b0JlTGVzc1RoYW4oMSk7XG4gICAgICBleHBlY3QodG9vTG9uZy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigxMDApO1xuICAgICAgZXhwZWN0KHZhbGlkLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgxKTtcbiAgICAgIGV4cGVjdCh2YWxpZC5sZW5ndGgpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMTAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgc2x1ZyBmb3JtYXQgb24gY3JlYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzbHVnID0gJ3dlZGRpbmctY2VyZW1vbnknO1xuICAgICAgY29uc3QgaXNWYWxpZCA9IC9eW2EtejAtOV1bYS16MC05LV0qW2EtejAtOV0kfF5bYS16MC05XSQvLnRlc3Qoc2x1Zyk7XG5cbiAgICAgIGV4cGVjdChpc1ZhbGlkKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBzbHVnIGZvcm1hdCBvbiB1cGRhdGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzbHVnID0gJ3VwZGF0ZWQtY2VyZW1vbnknO1xuICAgICAgY29uc3QgaXNWYWxpZCA9IC9eW2EtejAtOV1bYS16MC05LV0qW2EtejAtOV0kfF5bYS16MC05XSQvLnRlc3Qoc2x1Zyk7XG5cbiAgICAgIGV4cGVjdChpc1ZhbGlkKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdmFsaWRhdGlvbiBlcnJvciBmb3IgaW52YWxpZCBzbHVnJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZFNsdWcgPSAnSW52YWxpZCBTbHVnISc7XG4gICAgICBjb25zdCBlcnJvciA9IHtcbiAgICAgICAgY29kZTogJ1ZBTElEQVRJT05fRVJST1InLFxuICAgICAgICBtZXNzYWdlOiAnU2x1ZyBtdXN0IGNvbnRhaW4gb25seSBsb3dlcmNhc2UgbGV0dGVycywgbnVtYmVycywgYW5kIGh5cGhlbnMnLFxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KGVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ2xvd2VyY2FzZSBsZXR0ZXJzJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiB2YWxpZGF0aW9uIGVycm9yIGZvciBkdXBsaWNhdGUgc2x1ZycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgZXE6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgbmVxOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgICBkYXRhOiBbXG4gICAgICAgICAgICAgICAgeyBpZDogJ2V2ZW50LTInLCBzbHVnOiAnd2VkZGluZy1jZXJlbW9ueScgfSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSksXG4gICAgICB9IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IGVycm9yID0ge1xuICAgICAgICBjb2RlOiAnQ09ORkxJQ1QnLFxuICAgICAgICBtZXNzYWdlOiAnU2x1ZyBhbHJlYWR5IGV4aXN0cycsXG4gICAgICB9O1xuXG4gICAgICBleHBlY3QoZXJyb3IuY29kZSkudG9CZSgnQ09ORkxJQ1QnKTtcbiAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ2FscmVhZHkgZXhpc3RzJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTbHVnIE1pZ3JhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIHNsdWdzIGZvciBleGlzdGluZyByZWNvcmRzIHdpdGhvdXQgc2x1Z3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrU3VwYWJhc2UuZnJvbS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgIGlzOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgZGF0YTogW1xuICAgICAgICAgICAgICB7IGlkOiAnZXZlbnQtMScsIHRpdGxlOiAnV2VkZGluZyBDZXJlbW9ueScsIHNsdWc6IG51bGwgfSxcbiAgICAgICAgICAgICAgeyBpZDogJ2V2ZW50LTInLCB0aXRsZTogJ1JlY2VwdGlvbicsIHNsdWc6IG51bGwgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSksXG4gICAgICAgIHVwZGF0ZTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgZXE6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIGlkOiAnZXZlbnQtMScsXG4gICAgICAgICAgICAgIHNsdWc6ICd3ZWRkaW5nLWNlcmVtb255JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSksXG4gICAgICB9IGFzIGFueSk7XG5cbiAgICAgIC8vIE1pZ3JhdGlvbiBzaG91bGQgZ2VuZXJhdGUgc2x1Z3MgZm9yIGFsbCByZWNvcmRzXG4gICAgICBleHBlY3QobW9ja1N1cGFiYXNlLmZyb20pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzbHVnIGNvbmZsaWN0cyBkdXJpbmcgbWlncmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTXVsdGlwbGUgcmVjb3JkcyB3aXRoIHNhbWUgdGl0bGUgc2hvdWxkIGdldCB1bmlxdWUgc2x1Z3NcbiAgICAgIGNvbnN0IHJlY29yZHMgPSBbXG4gICAgICAgIHsgaWQ6ICdldmVudC0xJywgdGl0bGU6ICdXZWRkaW5nIENlcmVtb255JyB9LFxuICAgICAgICB7IGlkOiAnZXZlbnQtMicsIHRpdGxlOiAnV2VkZGluZyBDZXJlbW9ueScgfSxcbiAgICAgICAgeyBpZDogJ2V2ZW50LTMnLCB0aXRsZTogJ1dlZGRpbmcgQ2VyZW1vbnknIH0sXG4gICAgICBdO1xuXG4gICAgICBjb25zdCBleHBlY3RlZFNsdWdzID0gW1xuICAgICAgICAnd2VkZGluZy1jZXJlbW9ueScsXG4gICAgICAgICd3ZWRkaW5nLWNlcmVtb255LTInLFxuICAgICAgICAnd2VkZGluZy1jZXJlbW9ueS0zJyxcbiAgICAgIF07XG5cbiAgICAgIGV4cGVjdChleHBlY3RlZFNsdWdzLmxlbmd0aCkudG9CZShyZWNvcmRzLmxlbmd0aCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxvZyBtaWdyYXRpb24gcHJvZ3Jlc3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtaWdyYXRpb25Mb2cgPSB7XG4gICAgICAgIHRvdGFsX3JlY29yZHM6IDEwMCxcbiAgICAgICAgcHJvY2Vzc2VkOiAxMDAsXG4gICAgICAgIHN1Y2Nlc3NmdWw6IDk4LFxuICAgICAgICBmYWlsZWQ6IDIsXG4gICAgICAgIGR1cmF0aW9uX21zOiA1MDAwLFxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KG1pZ3JhdGlvbkxvZy5zdWNjZXNzZnVsKS50b0JlKDk4KTtcbiAgICAgIGV4cGVjdChtaWdyYXRpb25Mb2cuZmFpbGVkKS50b0JlKDIpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwiY3JlYXRlQ2xpZW50IiwiZm4iLCJjcmVhdGVNb2NrU3VwYWJhc2VDbGllbnQiLCJkZXNjcmliZSIsIm1vY2tTdXBhYmFzZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiaXQiLCJmcm9tIiwibW9ja1JldHVyblZhbHVlIiwiaW5zZXJ0Iiwic2VsZWN0Iiwic2luZ2xlIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJkYXRhIiwiaWQiLCJ0aXRsZSIsInNsdWciLCJlcnJvciIsImV4cGVjdCIsInRvQmVEZWZpbmVkIiwiZXhwZWN0ZWRTbHVnIiwidG9CZSIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsInRyaW0iLCJub3JtYWxpemUiLCJyZXBlYXQiLCJtYXhMZW5ndGgiLCJzdWJzdHJpbmciLCJsZW5ndGgiLCJ0b0JlTGVzc1RoYW5PckVxdWFsIiwiZXEiLCJuZXh0U3VmZml4IiwibmVxIiwidXBkYXRlIiwibWFudWFsU2x1ZyIsImlzVmFsaWQiLCJ0ZXN0Iiwic2x1Z0hpc3RvcnkiLCJvbGRfc2x1ZyIsIm5ld19zbHVnIiwiY3JlYXRlZF9hdCIsIm1lc3NhZ2UiLCJwcmV2aWV3TW9kZSIsInN0YXR1cyIsInZhbGlkU2x1ZyIsImludmFsaWRTbHVnIiwiaGFzQ29uc2VjdXRpdmVIeXBoZW5zIiwiZW5jb2RlZCIsImVuY29kZVVSSUNvbXBvbmVudCIsInVuc2FmZUNoYXJzIiwidG9vU2hvcnQiLCJ0b29Mb25nIiwidmFsaWQiLCJ0b0JlTGVzc1RoYW4iLCJ0b0JlR3JlYXRlclRoYW4iLCJ0b0JlR3JlYXRlclRoYW5PckVxdWFsIiwiY29kZSIsInRvQ29udGFpbiIsImlzIiwicmVjb3JkcyIsImV4cGVjdGVkU2x1Z3MiLCJtaWdyYXRpb25Mb2ciLCJ0b3RhbF9yZWNvcmRzIiwicHJvY2Vzc2VkIiwic3VjY2Vzc2Z1bCIsImZhaWxlZCIsImR1cmF0aW9uX21zIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7OztDQWFDO0FBSUQsZ0JBQWdCO0FBQ2hCQSxLQUFLQyxJQUFJLENBQUMsa0JBQWtCLElBQU8sQ0FBQTtRQUNqQ0MsY0FBY0YsS0FBS0csRUFBRSxDQUFDLElBQU1DLElBQUFBLHNDQUF3QjtJQUN0RCxDQUFBOzs7OzhCQUx5QztBQU96Q0MsU0FBUywrQkFBK0I7SUFDdEMsSUFBSUM7SUFFSkMsV0FBVztRQUNUUCxLQUFLUSxhQUFhO1FBQ2xCRixlQUFlRixJQUFBQSxzQ0FBd0I7SUFDekM7SUFFQUMsU0FBUyxtQkFBbUI7UUFDMUJJLEdBQUcsK0NBQStDO1lBQ2hESCxhQUFhSSxJQUFJLENBQUNDLGVBQWUsQ0FBQztnQkFDaENDLFFBQVFaLEtBQUtHLEVBQUUsR0FBR1EsZUFBZSxDQUFDO29CQUNoQ0UsUUFBUWIsS0FBS0csRUFBRSxHQUFHUSxlQUFlLENBQUM7d0JBQ2hDRyxRQUFRZCxLQUFLRyxFQUFFLEdBQUdZLGlCQUFpQixDQUFDOzRCQUNsQ0MsTUFBTTtnQ0FDSkMsSUFBSTtnQ0FDSkMsT0FBTztnQ0FDUEMsTUFBTTs0QkFDUjs0QkFDQUMsT0FBTzt3QkFDVDtvQkFDRjtnQkFDRjtZQUNGO1lBRUEsb0VBQW9FO1lBQ3BFQyxPQUFPZixhQUFhSSxJQUFJLEVBQUVZLFdBQVc7UUFDdkM7UUFFQWIsR0FBRyxxQ0FBcUM7WUFDdEMsTUFBTVMsUUFBUTtZQUNkLE1BQU1LLGVBQWU7WUFFckJGLE9BQU9FLGNBQWNDLElBQUksQ0FBQ04s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