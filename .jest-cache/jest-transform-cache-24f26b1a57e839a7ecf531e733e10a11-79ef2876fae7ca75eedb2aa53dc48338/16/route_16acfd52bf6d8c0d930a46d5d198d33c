f56dd124b231234664cab4639576fd4d
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "GET", {
    enumerable: true,
    get: function() {
        return GET;
    }
});
const _authhelpersnextjs = require("@supabase/auth-helpers-nextjs");
const _headers = require("next/headers");
const _server = require("next/server");
async function GET(request) {
    try {
        // 1. Auth check
        const supabase = (0, _authhelpersnextjs.createRouteHandlerClient)({
            cookies: _headers.cookies
        });
        const { data: { session }, error: authError } = await supabase.auth.getSession();
        if (authError || !session) {
            return _server.NextResponse.json({
                success: false,
                error: {
                    code: 'UNAUTHORIZED',
                    message: 'Authentication required'
                }
            }, {
                status: 401
            });
        }
        // 2. Parse query parameters
        const { searchParams } = new URL(request.url);
        const query = searchParams.get('q') || '';
        const typesParam = searchParams.get('types') || 'event,activity,content_page,accommodation';
        const types = typesParam.split(',').filter(Boolean);
        if (!query.trim()) {
            return _server.NextResponse.json({
                success: true,
                data: {
                    events: [],
                    activities: [],
                    content_pages: [],
                    accommodations: []
                }
            });
        }
        // 3. Search across entity types
        const results = {
            events: [],
            activities: [],
            content_pages: [],
            accommodations: []
        };
        // Search events
        if (types.includes('event')) {
            const { data: events, error: eventsError } = await supabase.from('events').select('id, title, date, location_id, locations(name)').or(`title.ilike.%${query}%,description.ilike.%${query}%`).is('deleted_at', null).order('date', {
                ascending: true
            }).limit(10);
            if (!eventsError && events) {
                results.events = events.map((event)=>({
                        id: event.id,
                        name: event.title,
                        date: event.date,
                        location: event.locations?.name
                    }));
            }
        }
        // Search activities
        if (types.includes('activity')) {
            const { data: activities, error: activitiesError } = await supabase.from('activities').select('id, title, date, capacity, location_id, locations(name)').or(`title.ilike.%${query}%,description.ilike.%${query}%`).is('deleted_at', null).order('date', {
                ascending: true
            }).limit(10);
            if (!activitiesError && activities) {
                results.activities = activities.map((activity)=>({
                        id: activity.id,
                        name: activity.title,
                        date: activity.date,
                        capacity: activity.capacity,
                        location: activity.locations?.name
                    }));
            }
        }
        // Search content pages
        if (types.includes('content_page')) {
            const { data: pages, error: pagesError } = await supabase.from('content_pages').select('id, title, slug, type').or(`title.ilike.%${query}%,slug.ilike.%${query}%`).is('deleted_at', null).eq('status', 'published').order('title', {
                ascending: true
            }).limit(10);
            if (!pagesError && pages) {
                results.content_pages = pages.map((page)=>({
                        id: page.id,
                        title: page.title,
                        slug: page.slug,
                        type: page.type
                    }));
            }
        }
        // Search accommodations
        if (types.includes('accommodation')) {
            const { data: accommodations, error: accommodationsError } = await supabase.from('accommodations').select('id, name, location_id, locations(name), room_types(count)').or(`name.ilike.%${query}%,description.ilike.%${query}%`).is('deleted_at', null).order('name', {
                ascending: true
            }).limit(10);
            if (!accommodationsError && accommodations) {
                results.accommodations = accommodations.map((accommodation)=>({
                        id: accommodation.id,
                        name: accommodation.name,
                        location: accommodation.locations?.name,
                        room_count: accommodation.room_types?.[0]?.count || 0
                    }));
            }
        }
        return _server.NextResponse.json({
            success: true,
            data: results
        });
    } catch (error) {
        console.error('Reference search error:', error);
        return _server.NextResponse.json({
            success: false,
            error: {
                code: 'INTERNAL_ERROR',
                message: error instanceof Error ? error.message : 'Search failed'
            }
        }, {
            status: 500
        });
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FwaS9hZG1pbi9yZWZlcmVuY2VzL3NlYXJjaC9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVSb3V0ZUhhbmRsZXJDbGllbnQgfSBmcm9tICdAc3VwYWJhc2UvYXV0aC1oZWxwZXJzLW5leHRqcyc7XG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJztcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gMS4gQXV0aCBjaGVja1xuICAgIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlUm91dGVIYW5kbGVyQ2xpZW50KHsgY29va2llcyB9KTtcbiAgICBjb25zdCB7IGRhdGE6IHsgc2Vzc2lvbiB9LCBlcnJvcjogYXV0aEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFNlc3Npb24oKTtcblxuICAgIGlmIChhdXRoRXJyb3IgfHwgIXNlc3Npb24pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiB7IGNvZGU6ICdVTkFVVEhPUklaRUQnLCBtZXNzYWdlOiAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyAyLiBQYXJzZSBxdWVyeSBwYXJhbWV0ZXJzXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuICAgIGNvbnN0IHF1ZXJ5ID0gc2VhcmNoUGFyYW1zLmdldCgncScpIHx8ICcnO1xuICAgIGNvbnN0IHR5cGVzUGFyYW0gPSBzZWFyY2hQYXJhbXMuZ2V0KCd0eXBlcycpIHx8ICdldmVudCxhY3Rpdml0eSxjb250ZW50X3BhZ2UsYWNjb21tb2RhdGlvbic7XG4gICAgY29uc3QgdHlwZXMgPSB0eXBlc1BhcmFtLnNwbGl0KCcsJykuZmlsdGVyKEJvb2xlYW4pO1xuXG4gICAgaWYgKCFxdWVyeS50cmltKCkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBldmVudHM6IFtdLFxuICAgICAgICAgIGFjdGl2aXRpZXM6IFtdLFxuICAgICAgICAgIGNvbnRlbnRfcGFnZXM6IFtdLFxuICAgICAgICAgIGFjY29tbW9kYXRpb25zOiBbXSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIDMuIFNlYXJjaCBhY3Jvc3MgZW50aXR5IHR5cGVzXG4gICAgY29uc3QgcmVzdWx0czoge1xuICAgICAgZXZlbnRzOiBhbnlbXTtcbiAgICAgIGFjdGl2aXRpZXM6IGFueVtdO1xuICAgICAgY29udGVudF9wYWdlczogYW55W107XG4gICAgICBhY2NvbW1vZGF0aW9uczogYW55W107XG4gICAgfSA9IHtcbiAgICAgIGV2ZW50czogW10sXG4gICAgICBhY3Rpdml0aWVzOiBbXSxcbiAgICAgIGNvbnRlbnRfcGFnZXM6IFtdLFxuICAgICAgYWNjb21tb2RhdGlvbnM6IFtdLFxuICAgIH07XG5cbiAgICAvLyBTZWFyY2ggZXZlbnRzXG4gICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdldmVudCcpKSB7XG4gICAgICBjb25zdCB7IGRhdGE6IGV2ZW50cywgZXJyb3I6IGV2ZW50c0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnZXZlbnRzJylcbiAgICAgICAgLnNlbGVjdCgnaWQsIHRpdGxlLCBkYXRlLCBsb2NhdGlvbl9pZCwgbG9jYXRpb25zKG5hbWUpJylcbiAgICAgICAgLm9yKGB0aXRsZS5pbGlrZS4lJHtxdWVyeX0lLGRlc2NyaXB0aW9uLmlsaWtlLiUke3F1ZXJ5fSVgKVxuICAgICAgICAuaXMoJ2RlbGV0ZWRfYXQnLCBudWxsKVxuICAgICAgICAub3JkZXIoJ2RhdGUnLCB7IGFzY2VuZGluZzogdHJ1ZSB9KVxuICAgICAgICAubGltaXQoMTApO1xuXG4gICAgICBpZiAoIWV2ZW50c0Vycm9yICYmIGV2ZW50cykge1xuICAgICAgICByZXN1bHRzLmV2ZW50cyA9IGV2ZW50cy5tYXAoKGV2ZW50OiBhbnkpID0+ICh7XG4gICAgICAgICAgaWQ6IGV2ZW50LmlkLFxuICAgICAgICAgIG5hbWU6IGV2ZW50LnRpdGxlLFxuICAgICAgICAgIGRhdGU6IGV2ZW50LmRhdGUsXG4gICAgICAgICAgbG9jYXRpb246IGV2ZW50LmxvY2F0aW9ucz8ubmFtZSxcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNlYXJjaCBhY3Rpdml0aWVzXG4gICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdhY3Rpdml0eScpKSB7XG4gICAgICBjb25zdCB7IGRhdGE6IGFjdGl2aXRpZXMsIGVycm9yOiBhY3Rpdml0aWVzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdhY3Rpdml0aWVzJylcbiAgICAgICAgLnNlbGVjdCgnaWQsIHRpdGxlLCBkYXRlLCBjYXBhY2l0eSwgbG9jYXRpb25faWQsIGxvY2F0aW9ucyhuYW1lKScpXG4gICAgICAgIC5vcihgdGl0bGUuaWxpa2UuJSR7cXVlcnl9JSxkZXNjcmlwdGlvbi5pbGlrZS4lJHtxdWVyeX0lYClcbiAgICAgICAgLmlzKCdkZWxldGVkX2F0JywgbnVsbClcbiAgICAgICAgLm9yZGVyKCdkYXRlJywgeyBhc2NlbmRpbmc6IHRydWUgfSlcbiAgICAgICAgLmxpbWl0KDEwKTtcblxuICAgICAgaWYgKCFhY3Rpdml0aWVzRXJyb3IgJiYgYWN0aXZpdGllcykge1xuICAgICAgICByZXN1bHRzLmFjdGl2aXRpZXMgPSBhY3Rpdml0aWVzLm1hcCgoYWN0aXZpdHk6IGFueSkgPT4gKHtcbiAgICAgICAgICBpZDogYWN0aXZpdHkuaWQsXG4gICAgICAgICAgbmFtZTogYWN0aXZpdHkudGl0bGUsXG4gICAgICAgICAgZGF0ZTogYWN0aXZpdHkuZGF0ZSxcbiAgICAgICAgICBjYXBhY2l0eTogYWN0aXZpdHkuY2FwYWNpdHksXG4gICAgICAgICAgbG9jYXRpb246IGFjdGl2aXR5LmxvY2F0aW9ucz8ubmFtZSxcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNlYXJjaCBjb250ZW50IHBhZ2VzXG4gICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdjb250ZW50X3BhZ2UnKSkge1xuICAgICAgY29uc3QgeyBkYXRhOiBwYWdlcywgZXJyb3I6IHBhZ2VzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdjb250ZW50X3BhZ2VzJylcbiAgICAgICAgLnNlbGVjdCgnaWQsIHRpdGxlLCBzbHVnLCB0eXBlJylcbiAgICAgICAgLm9yKGB0aXRsZS5pbGlrZS4lJHtxdWVyeX0lLHNsdWcuaWxpa2UuJSR7cXVlcnl9JWApXG4gICAgICAgIC5pcygnZGVsZXRlZF9hdCcsIG51bGwpXG4gICAgICAgIC5lcSgnc3RhdHVzJywgJ3B1Ymxpc2hlZCcpXG4gICAgICAgIC5vcmRlcigndGl0bGUnLCB7IGFzY2VuZGluZzogdHJ1ZSB9KVxuICAgICAgICAubGltaXQoMTApO1xuXG4gICAgICBpZiAoIXBhZ2VzRXJyb3IgJiYgcGFnZXMpIHtcbiAgICAgICAgcmVzdWx0cy5jb250ZW50X3BhZ2VzID0gcGFnZXMubWFwKChwYWdlOiBhbnkpID0+ICh7XG4gICAgICAgICAgaWQ6IHBhZ2UuaWQsXG4gICAgICAgICAgdGl0bGU6IHBhZ2UudGl0bGUsXG4gICAgICAgICAgc2x1ZzogcGFnZS5zbHVnLFxuICAgICAgICAgIHR5cGU6IHBhZ2UudHlwZSxcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNlYXJjaCBhY2NvbW1vZGF0aW9uc1xuICAgIGlmICh0eXBlcy5pbmNsdWRlcygnYWNjb21tb2RhdGlvbicpKSB7XG4gICAgICBjb25zdCB7IGRhdGE6IGFjY29tbW9kYXRpb25zLCBlcnJvcjogYWNjb21tb2RhdGlvbnNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2FjY29tbW9kYXRpb25zJylcbiAgICAgICAgLnNlbGVjdCgnaWQsIG5hbWUsIGxvY2F0aW9uX2lkLCBsb2NhdGlvbnMobmFtZSksIHJvb21fdHlwZXMoY291bnQpJylcbiAgICAgICAgLm9yKGBuYW1lLmlsaWtlLiUke3F1ZXJ5fSUsZGVzY3JpcHRpb24uaWxpa2UuJSR7cXVlcnl9JWApXG4gICAgICAgIC5pcygnZGVsZXRlZF9hdCcsIG51bGwpXG4gICAgICAgIC5vcmRlcignbmFtZScsIHsgYXNjZW5kaW5nOiB0cnVlIH0pXG4gICAgICAgIC5saW1pdCgxMCk7XG5cbiAgICAgIGlmICghYWNjb21tb2RhdGlvbnNFcnJvciAmJiBhY2NvbW1vZGF0aW9ucykge1xuICAgICAgICByZXN1bHRzLmFjY29tbW9kYXRpb25zID0gYWNjb21tb2RhdGlvbnMubWFwKChhY2NvbW1vZGF0aW9uOiBhbnkpID0+ICh7XG4gICAgICAgICAgaWQ6IGFjY29tbW9kYXRpb24uaWQsXG4gICAgICAgICAgbmFtZTogYWNjb21tb2RhdGlvbi5uYW1lLFxuICAgICAgICAgIGxvY2F0aW9uOiBhY2NvbW1vZGF0aW9uLmxvY2F0aW9ucz8ubmFtZSxcbiAgICAgICAgICByb29tX2NvdW50OiBhY2NvbW1vZGF0aW9uLnJvb21fdHlwZXM/LlswXT8uY291bnQgfHwgMCxcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YTogcmVzdWx0cyxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdSZWZlcmVuY2Ugc2VhcmNoIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdJTlRFUk5BTF9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnU2VhcmNoIGZhaWxlZCcsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkdFVCIsInJlcXVlc3QiLCJzdXBhYmFzZSIsImNyZWF0ZVJvdXRlSGFuZGxlckNsaWVudCIsImNvb2tpZXMiLCJkYXRhIiwic2Vzc2lvbiIsImVycm9yIiwiYXV0aEVycm9yIiwiYXV0aCIsImdldFNlc3Npb24iLCJOZXh0UmVzcG9uc2UiLCJqc29uIiwic3VjY2VzcyIsImNvZGUiLCJtZXNzYWdlIiwic3RhdHVzIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwicXVlcnkiLCJnZXQiLCJ0eXBlc1BhcmFtIiwidHlwZXMiLCJzcGxpdCIsImZpbHRlciIsIkJvb2xlYW4iLCJ0cmltIiwiZXZlbnRzIiwiYWN0aXZpdGllcyIsImNvbnRlbnRfcGFnZXMiLCJhY2NvbW1vZGF0aW9ucyIsInJlc3VsdHMiLCJpbmNsdWRlcyIsImV2ZW50c0Vycm9yIiwiZnJvbSIsInNlbGVjdCIsIm9yIiwiaXMiLCJvcmRlciIsImFzY2VuZGluZyIsImxpbWl0IiwibWFwIiwiZXZlbnQiLCJpZCIsIm5hbWUiLCJ0aXRsZSIsImRhdGUiLCJsb2NhdGlvbiIsImxvY2F0aW9ucyIsImFjdGl2aXRpZXNFcnJvciIsImFjdGl2aXR5IiwiY2FwYWNpdHkiLCJwYWdlcyIsInBhZ2VzRXJyb3IiLCJlcSIsInBhZ2UiLCJzbHVnIiwidHlwZSIsImFjY29tbW9kYXRpb25zRXJyb3IiLCJhY2NvbW1vZGF0aW9uIiwicm9vbV9jb3VudCIsInJvb21fdHlwZXMiLCJjb3VudCIsImNvbnNvbGUiLCJFcnJvciJdLCJtYXBwaW5ncyI6Ijs7OzsrQkFJc0JBOzs7ZUFBQUE7OzttQ0FKbUI7eUJBQ2pCO3dCQUNLO0FBRXRCLGVBQWVBLElBQUlDLE9BQWdCO0lBQ3hDLElBQUk7UUFDRixnQkFBZ0I7UUFDaEIsTUFBTUMsV0FBV0MsSUFBQUEsMkNBQXdCLEVBQUM7WUFBRUMsU0FBQUEsZ0JBQU87UUFBQztRQUNwRCxNQUFNLEVBQUVDLE1BQU0sRUFBRUMsT0FBTyxFQUFFLEVBQUVDLE9BQU9DLFNBQVMsRUFBRSxHQUFHLE1BQU1OLFNBQVNPLElBQUksQ0FBQ0MsVUFBVTtRQUU5RSxJQUFJRixhQUFhLENBQUNGLFNBQVM7WUFDekIsT0FBT0ssb0JBQVksQ0FBQ0MsSUFBSSxDQUN0QjtnQkFDRUMsU0FBUztnQkFDVE4sT0FBTztvQkFBRU8sTUFBTTtvQkFBZ0JDLFNBQVM7Z0JBQTBCO1lBQ3BFLEdBQ0E7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLDRCQUE0QjtRQUM1QixNQUFNLEVBQUVDLFlBQVksRUFBRSxHQUFHLElBQUlDLElBQUlqQixRQUFRa0IsR0FBRztRQUM1QyxNQUFNQyxRQUFRSCxhQUFhSSxHQUFHLENBQUMsUUFBUTtRQUN2QyxNQUFNQyxhQUFhTCxhQUFhSSxHQUFHLENBQUMsWUFBWTtRQUNoRCxNQUFNRSxRQUFRRCxXQUFXRSxLQUFLLENBQUMsS0FBS0MsTUFBTSxDQUFDQztRQUUzQyxJQUFJLENBQUNOLE1BQU1PLElBQUksSUFBSTtZQUNqQixPQUFPaEIsb0JBQVksQ0FBQ0MsSUFBSSxDQUFDO2dCQUN2QkMsU0FBUztnQkFDVFIsTUFBTTtvQkFDSnVCLFFBQVEsRUFBRTtvQkFDVkMsWUFBWSxFQUFFO29CQUNkQyxlQUFlLEVBQUU7b0JBQ2pCQyxnQkFBZ0IsRUFBRTtnQkFDcEI7WUFDRjtRQUNGO1FBRUEsZ0NBQWdDO1FBQ2hDLE1BQU1DLFVBS0Y7WUFD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