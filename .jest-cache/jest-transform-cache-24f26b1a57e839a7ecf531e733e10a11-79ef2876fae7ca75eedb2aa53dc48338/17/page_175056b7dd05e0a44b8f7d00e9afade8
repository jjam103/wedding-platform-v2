af5d6cc65c11954e6d70af9d5ce0131e
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, /**
 * Home Page Editor
 * 
 * Allows admins to customize the wedding homepage with:
 * - Title and subtitle
 * - Welcome message (rich text)
 * - Hero image URL
 * - Manage sections button (opens SectionEditor)
 * - Preview button (opens guest-facing homepage)
 * - Auto-save draft every 30 seconds
 */ "default", {
    enumerable: true,
    get: function() {
        return HomePageEditorPage;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const _navigation = require("next/navigation");
const _dynamic = /*#__PURE__*/ _interop_require_default(require("next/dynamic"));
const _Button = require("../../../components/ui/Button");
const _Card = require("../../../components/ui/Card");
const _RichTextEditorSkeleton = require("../../../components/admin/RichTextEditorSkeleton");
const _SectionEditorSkeleton = require("../../../components/admin/SectionEditorSkeleton");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Lazy load heavy components
const RichTextEditor = (0, _dynamic.default)(()=>Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../../components/admin/RichTextEditor"))).then((mod)=>({
            default: mod.RichTextEditor
        })), {
    loadableGenerated: {
        webpack: ()=>[
                require.resolveWeak("@/components/admin/RichTextEditor")
            ]
    },
    loading: ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)(_RichTextEditorSkeleton.RichTextEditorSkeleton, {}),
    ssr: false
});
const SectionEditor = (0, _dynamic.default)(()=>Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../../components/admin/SectionEditor"))).then((mod)=>({
            default: mod.SectionEditor
        })), {
    loadableGenerated: {
        webpack: ()=>[
                require.resolveWeak("@/components/admin/SectionEditor")
            ]
    },
    loading: ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditorSkeleton.SectionEditorSkeleton, {}),
    ssr: false
});
function HomePageEditorPage() {
    const router = (0, _navigation.useRouter)();
    const [config, setConfig] = (0, _react.useState)({
        title: null,
        subtitle: null,
        welcomeMessage: null,
        heroImageUrl: null
    });
    const [loading, setLoading] = (0, _react.useState)(true);
    const [saving, setSaving] = (0, _react.useState)(false);
    const [error, setError] = (0, _react.useState)(null);
    const [isDirty, setIsDirty] = (0, _react.useState)(false);
    const [showSectionEditor, setShowSectionEditor] = (0, _react.useState)(false);
    const [lastSaved, setLastSaved] = (0, _react.useState)(null);
    const autoSaveTimerRef = (0, _react.useRef)(null);
    // Load home page config
    const loadConfig = (0, _react.useCallback)(async ()=>{
        try {
            setLoading(true);
            setError(null);
            const response = await fetch('/api/admin/home-page');
            const result = await response.json();
            if (result.success) {
                setConfig(result.data);
            } else {
                setError(result.error.message);
            }
        } catch (err) {
            setError(err instanceof Error ? err.message : 'Failed to load home page config');
        } finally{
            setLoading(false);
        }
    }, []);
    // Save home page config
    const saveConfig = (0, _react.useCallback)(async (showToast = true)=>{
        try {
            setSaving(true);
            setError(null);
            const response = await fetch('/api/admin/home-page', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(config)
            });
            const result = await response.json();
            if (result.success) {
                setConfig(result.data);
                setIsDirty(false);
                setLastSaved(new Date());
                if (showToast) {
                    // Show success toast (would use toast context in real implementation)
                    console.log('Home page saved successfully');
                }
            } else {
                setError(result.error.message);
            }
        } catch (err) {
            setError(err instanceof Error ? err.message : 'Failed to save home page config');
        } finally{
            setSaving(false);
        }
    }, [
        config
    ]);
    // Auto-save every 30 seconds if dirty
    (0, _react.useEffect)(()=>{
        if (isDirty && !saving) {
            autoSaveTimerRef.current = setTimeout(()=>{
                saveConfig(false); // Silent auto-save
            }, 30000); // 30 seconds
        }
        return ()=>{
            if (autoSaveTimerRef.current) {
                clearTimeout(autoSaveTimerRef.current);
            }
        };
    }, [
        isDirty,
        saving,
        saveConfig
    ]);
    // Load config on mount
    (0, _react.useEffect)(()=>{
        loadConfig();
    }, [
        loadConfig
    ]);
    // Warn before leaving with unsaved changes
    (0, _react.useEffect)(()=>{
        const handleBeforeUnload = (e)=>{
            if (isDirty) {
                e.preventDefault();
                e.returnValue = '';
            }
        };
        window.addEventListener('beforeunload', handleBeforeUnload);
        return ()=>window.removeEventListener('beforeunload', handleBeforeUnload);
    }, [
        isDirty
    ]);
    const handleFieldChange = (field, value)=>{
        setConfig((prev)=>({
                ...prev,
                [field]: value
            }));
        setIsDirty(true);
    };
    const handlePreview = ()=>{
        // Open guest-facing homepage in new tab
        window.open('/', '_blank');
    };
    const handleManageSections = ()=>{
        setShowSectionEditor(true);
    };
    const handleSectionEditorClose = ()=>{
        setShowSectionEditor(false);
    };
    if (loading) {
        return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
            className: "p-6",
            children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "animate-pulse",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "h-8 bg-gray-200 rounded w-1/4 mb-6"
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "space-y-4",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "h-10 bg-gray-200 rounded"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "h-10 bg-gray-200 rounded"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "h-32 bg-gray-200 rounded"
                            })
                        ]
                    })
                ]
            })
        });
    }
    if (showSectionEditor) {
        return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
            className: "p-6",
            children: [
                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "mb-6 flex items-center justify-between",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("h1", {
                            className: "text-2xl font-bold text-gray-900",
                            children: "Home Page Sections"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                            onClick: handleSectionEditorClose,
                            variant: "secondary",
                            children: "Back to Home Page Editor"
                        })
                    ]
                }),
                /*#__PURE__*/ (0, _jsxruntime.jsx)(SectionEditor, {
                    pageType: "home",
                    pageId: "home",
                    onSave: handleSectionEditorClose
                })
            ]
        });
    }
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: "p-6 max-w-4xl mx-auto",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "mb-6",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("h1", {
                        className: "text-2xl font-bold text-gray-900 mb-2",
                        children: "Home Page Editor"
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                        className: "text-gray-600",
                        children: "Customize your wedding homepage with a title, subtitle, welcome message, and hero image."
                    }),
                    lastSaved && /*#__PURE__*/ (0, _jsxruntime.jsxs)("p", {
                        className: "text-sm text-gray-500 mt-2",
                        children: [
                            "Last saved: ",
                            lastSaved.toLocaleTimeString()
                        ]
                    })
                ]
            }),
            error && /*#__PURE__*/ (0, _jsxruntime.jsx)(_Card.Card, {
                className: "mb-6 p-4 bg-red-50 border-red-200",
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                    className: "text-red-800",
                    children: error
                })
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "space-y-6",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)(_Card.Card, {
                        className: "p-6",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("label", {
                                htmlFor: "title",
                                className: "block text-sm font-medium text-gray-700 mb-2",
                                children: "Wedding Title *"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                                id: "title",
                                type: "text",
                                value: config.title || '',
                                onChange: (e)=>handleFieldChange('title', e.target.value),
                                placeholder: "Sarah & Michael's Costa Rica Wedding",
                                className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",
                                disabled: saving
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                className: "mt-1 text-sm text-gray-500",
                                children: "The main title displayed on your wedding homepage"
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)(_Card.Card, {
                        className: "p-6",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("label", {
                                htmlFor: "subtitle",
                                className: "block text-sm font-medium text-gray-700 mb-2",
                                children: "Subtitle"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                                id: "subtitle",
                                type: "text",
                                value: config.subtitle || '',
                                onChange: (e)=>handleFieldChange('subtitle', e.target.value),
                                placeholder: "June 14-16, 2025 â€¢ Tamarindo, Costa Rica",
                                className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",
                                disabled: saving
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                className: "mt-1 text-sm text-gray-500",
                                children: "Optional subtitle with date and location"
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)(_Card.Card, {
                        className: "p-6",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("label", {
                                htmlFor: "heroImageUrl",
                                className: "block text-sm font-medium text-gray-700 mb-2",
                                children: "Hero Image URL"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                                id: "heroImageUrl",
                                type: "url",
                                value: config.heroImageUrl || '',
                                onChange: (e)=>handleFieldChange('heroImageUrl', e.target.value),
                                placeholder: "https://example.com/hero-image.jpg",
                                className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",
                                disabled: saving
                            }),
                            config.heroImageUrl && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "mt-3",
                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("img", {
                                    src: config.heroImageUrl,
                                    alt: "Hero preview",
                                    className: "max-w-xs rounded-md border border-gray-300",
                                    onError: (e)=>{
                                        e.target.style.display = 'none';
                                    }
                                })
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                className: "mt-1 text-sm text-gray-500",
                                children: "URL of the hero image displayed at the top of the homepage"
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)(_Card.Card, {
                        className: "p-6",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("label", {
                                className: "block text-sm font-medium text-gray-700 mb-2",
                                children: "Welcome Message"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(RichTextEditor, {
                                value: config.welcomeMessage || '',
                                onChange: (html)=>handleFieldChange('welcomeMessage', html),
                                placeholder: "Write a welcome message for your guests...",
                                disabled: saving
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                className: "mt-1 text-sm text-gray-500",
                                children: "Rich text welcome message displayed on the homepage"
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center justify-between gap-4",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "flex gap-3",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                                        onClick: handleManageSections,
                                        variant: "secondary",
                                        disabled: saving,
                                        children: "Manage Sections"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                                        onClick: handlePreview,
                                        variant: "secondary",
                                        disabled: saving,
                                        children: "Preview"
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                                onClick: ()=>saveConfig(true),
                                disabled: saving || !isDirty,
                                children: saving ? 'Saving...' : 'Save Changes'
                            })
                        ]
                    }),
                    isDirty && !saving && /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                        className: "text-sm text-amber-600",
                        children: "You have unsaved changes. They will be auto-saved in 30 seconds."
                    })
                ]
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FkbWluL2hvbWUtcGFnZS9wYWdlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICduZXh0L25hdmlnYXRpb24nO1xuaW1wb3J0IGR5bmFtaWMgZnJvbSAnbmV4dC9keW5hbWljJztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9CdXR0b24nO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9DYXJkJztcbmltcG9ydCB7IFJpY2hUZXh0RWRpdG9yU2tlbGV0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvYWRtaW4vUmljaFRleHRFZGl0b3JTa2VsZXRvbic7XG5pbXBvcnQgeyBTZWN0aW9uRWRpdG9yU2tlbGV0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvYWRtaW4vU2VjdGlvbkVkaXRvclNrZWxldG9uJztcblxuLy8gTGF6eSBsb2FkIGhlYXZ5IGNvbXBvbmVudHNcbmNvbnN0IFJpY2hUZXh0RWRpdG9yID0gZHluYW1pYygoKSA9PiBpbXBvcnQoJ0AvY29tcG9uZW50cy9hZG1pbi9SaWNoVGV4dEVkaXRvcicpLnRoZW4obW9kID0+ICh7IGRlZmF1bHQ6IG1vZC5SaWNoVGV4dEVkaXRvciB9KSksIHtcbiAgbG9hZGluZzogKCkgPT4gPFJpY2hUZXh0RWRpdG9yU2tlbGV0b24gLz4sXG4gIHNzcjogZmFsc2UsXG59KTtcblxuY29uc3QgU2VjdGlvbkVkaXRvciA9IGR5bmFtaWMoKCkgPT4gaW1wb3J0KCdAL2NvbXBvbmVudHMvYWRtaW4vU2VjdGlvbkVkaXRvcicpLnRoZW4obW9kID0+ICh7IGRlZmF1bHQ6IG1vZC5TZWN0aW9uRWRpdG9yIH0pKSwge1xuICBsb2FkaW5nOiAoKSA9PiA8U2VjdGlvbkVkaXRvclNrZWxldG9uIC8+LFxuICBzc3I6IGZhbHNlLFxufSk7XG5cbmludGVyZmFjZSBIb21lUGFnZUNvbmZpZyB7XG4gIHRpdGxlOiBzdHJpbmcgfCBudWxsO1xuICBzdWJ0aXRsZTogc3RyaW5nIHwgbnVsbDtcbiAgd2VsY29tZU1lc3NhZ2U6IHN0cmluZyB8IG51bGw7XG4gIGhlcm9JbWFnZVVybDogc3RyaW5nIHwgbnVsbDtcbn1cblxuLyoqXG4gKiBIb21lIFBhZ2UgRWRpdG9yXG4gKiBcbiAqIEFsbG93cyBhZG1pbnMgdG8gY3VzdG9taXplIHRoZSB3ZWRkaW5nIGhvbWVwYWdlIHdpdGg6XG4gKiAtIFRpdGxlIGFuZCBzdWJ0aXRsZVxuICogLSBXZWxjb21lIG1lc3NhZ2UgKHJpY2ggdGV4dClcbiAqIC0gSGVybyBpbWFnZSBVUkxcbiAqIC0gTWFuYWdlIHNlY3Rpb25zIGJ1dHRvbiAob3BlbnMgU2VjdGlvbkVkaXRvcilcbiAqIC0gUHJldmlldyBidXR0b24gKG9wZW5zIGd1ZXN0LWZhY2luZyBob21lcGFnZSlcbiAqIC0gQXV0by1zYXZlIGRyYWZ0IGV2ZXJ5IDMwIHNlY29uZHNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSG9tZVBhZ2VFZGl0b3JQYWdlKCkge1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3QgW2NvbmZpZywgc2V0Q29uZmlnXSA9IHVzZVN0YXRlPEhvbWVQYWdlQ29uZmlnPih7XG4gICAgdGl0bGU6IG51bGwsXG4gICAgc3VidGl0bGU6IG51bGwsXG4gICAgd2VsY29tZU1lc3NhZ2U6IG51bGwsXG4gICAgaGVyb0ltYWdlVXJsOiBudWxsLFxuICB9KTtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtzYXZpbmcsIHNldFNhdmluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc0RpcnR5LCBzZXRJc0RpcnR5XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dTZWN0aW9uRWRpdG9yLCBzZXRTaG93U2VjdGlvbkVkaXRvcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsYXN0U2F2ZWQsIHNldExhc3RTYXZlZF0gPSB1c2VTdGF0ZTxEYXRlIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGF1dG9TYXZlVGltZXJSZWYgPSB1c2VSZWY8Tm9kZUpTLlRpbWVvdXQgfCBudWxsPihudWxsKTtcblxuICAvLyBMb2FkIGhvbWUgcGFnZSBjb25maWdcbiAgY29uc3QgbG9hZENvbmZpZyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgIHNldEVycm9yKG51bGwpO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2FkbWluL2hvbWUtcGFnZScpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgXG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgc2V0Q29uZmlnKHJlc3VsdC5kYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldEVycm9yKHJlc3VsdC5lcnJvci5tZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHNldEVycm9yKGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGxvYWQgaG9tZSBwYWdlIGNvbmZpZycpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICAvLyBTYXZlIGhvbWUgcGFnZSBjb25maWdcbiAgY29uc3Qgc2F2ZUNvbmZpZyA9IHVzZUNhbGxiYWNrKGFzeW5jIChzaG93VG9hc3QgPSB0cnVlKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHNldFNhdmluZyh0cnVlKTtcbiAgICAgIHNldEVycm9yKG51bGwpO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2FkbWluL2hvbWUtcGFnZScsIHtcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGNvbmZpZyksXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgXG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgc2V0Q29uZmlnKHJlc3VsdC5kYXRhKTtcbiAgICAgICAgc2V0SXNEaXJ0eShmYWxzZSk7XG4gICAgICAgIHNldExhc3RTYXZlZChuZXcgRGF0ZSgpKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChzaG93VG9hc3QpIHtcbiAgICAgICAgICAvLyBTaG93IHN1Y2Nlc3MgdG9hc3QgKHdvdWxkIHVzZSB0b2FzdCBjb250ZXh0IGluIHJlYWwgaW1wbGVtZW50YXRpb24pXG4gICAgICAgICAgY29uc29sZS5sb2coJ0hvbWUgcGFnZSBzYXZlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0RXJyb3IocmVzdWx0LmVycm9yLm1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgc2V0RXJyb3IoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdGYWlsZWQgdG8gc2F2ZSBob21lIHBhZ2UgY29uZmlnJyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldFNhdmluZyhmYWxzZSk7XG4gICAgfVxuICB9LCBbY29uZmlnXSk7XG5cbiAgLy8gQXV0by1zYXZlIGV2ZXJ5IDMwIHNlY29uZHMgaWYgZGlydHlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaXNEaXJ0eSAmJiAhc2F2aW5nKSB7XG4gICAgICBhdXRvU2F2ZVRpbWVyUmVmLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgc2F2ZUNvbmZpZyhmYWxzZSk7IC8vIFNpbGVudCBhdXRvLXNhdmVcbiAgICAgIH0sIDMwMDAwKTsgLy8gMzAgc2Vjb25kc1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGF1dG9TYXZlVGltZXJSZWYuY3VycmVudCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoYXV0b1NhdmVUaW1lclJlZi5jdXJyZW50KTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbaXNEaXJ0eSwgc2F2aW5nLCBzYXZlQ29uZmlnXSk7XG5cbiAgLy8gTG9hZCBjb25maWcgb24gbW91bnRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsb2FkQ29uZmlnKCk7XG4gIH0sIFtsb2FkQ29uZmlnXSk7XG5cbiAgLy8gV2FybiBiZWZvcmUgbGVhdmluZyB3aXRoIHVuc2F2ZWQgY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZUJlZm9yZVVubG9hZCA9IChlOiBCZWZvcmVVbmxvYWRFdmVudCkgPT4ge1xuICAgICAgaWYgKGlzRGlydHkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnJldHVyblZhbHVlID0gJyc7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgaGFuZGxlQmVmb3JlVW5sb2FkKTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGhhbmRsZUJlZm9yZVVubG9hZCk7XG4gIH0sIFtpc0RpcnR5XSk7XG5cbiAgY29uc3QgaGFuZGxlRmllbGRDaGFuZ2UgPSAoZmllbGQ6IGtleW9mIEhvbWVQYWdlQ29uZmlnLCB2YWx1ZTogc3RyaW5nIHwgbnVsbCkgPT4ge1xuICAgIHNldENvbmZpZyhwcmV2ID0+ICh7IC4uLnByZXYsIFtmaWVsZF06IHZhbHVlIH0pKTtcbiAgICBzZXRJc0RpcnR5KHRydWUpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVByZXZpZXcgPSAoKSA9PiB7XG4gICAgLy8gT3BlbiBndWVzdC1mYWNpbmcgaG9tZXBhZ2UgaW4gbmV3IHRhYlxuICAgIHdpbmRvdy5vcGVuKCcvJywgJ19ibGFuaycpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZU1hbmFnZVNlY3Rpb25zID0gKCkgPT4ge1xuICAgIHNldFNob3dTZWN0aW9uRWRpdG9yKHRydWUpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVNlY3Rpb25FZGl0b3JDbG9zZSA9ICgpID0+IHtcbiAgICBzZXRTaG93U2VjdGlvbkVkaXRvcihmYWxzZSk7XG4gIH07XG5cbiAgaWYgKGxvYWRpbmcpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTZcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXB1bHNlXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLTggYmctZ3JheS0yMDAgcm91bmRlZCB3LTEvNCBtYi02XCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC0xMCBiZy1ncmF5LTIwMCByb3VuZGVkXCI+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtMTAgYmctZ3JheS0yMDAgcm91bmRlZFwiPjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLTMyIGJnLWdyYXktMjAwIHJvdW5kZWRcIj48L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgaWYgKHNob3dTZWN0aW9uRWRpdG9yKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC02XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtZ3JheS05MDBcIj5Ib21lIFBhZ2UgU2VjdGlvbnM8L2gxPlxuICAgICAgICAgIDxCdXR0b24gb25DbGljaz17aGFuZGxlU2VjdGlvbkVkaXRvckNsb3NlfSB2YXJpYW50PVwic2Vjb25kYXJ5XCI+XG4gICAgICAgICAgICBCYWNrIHRvIEhvbWUgUGFnZSBFZGl0b3JcbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxTZWN0aW9uRWRpdG9yIHBhZ2VUeXBlPVwiaG9tZVwiIHBhZ2VJZD1cImhvbWVcIiBvblNhdmU9e2hhbmRsZVNlY3Rpb25FZGl0b3JDbG9zZX0gLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwicC02IG1heC13LTR4bCBteC1hdXRvXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTZcIj5cbiAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LWdyYXktOTAwIG1iLTJcIj5Ib21lIFBhZ2UgRWRpdG9yPC9oMT5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTYwMFwiPlxuICAgICAgICAgIEN1c3RvbWl6ZSB5b3VyIHdlZGRpbmcgaG9tZXBhZ2Ugd2l0aCBhIHRpdGxlLCBzdWJ0aXRsZSwgd2VsY29tZSBtZXNzYWdlLCBhbmQgaGVybyBpbWFnZS5cbiAgICAgICAgPC9wPlxuICAgICAgICB7bGFzdFNhdmVkICYmIChcbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDAgbXQtMlwiPlxuICAgICAgICAgICAgTGFzdCBzYXZlZDoge2xhc3RTYXZlZC50b0xvY2FsZVRpbWVTdHJpbmcoKX1cbiAgICAgICAgICA8L3A+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cblxuICAgICAge2Vycm9yICYmIChcbiAgICAgICAgPENhcmQgY2xhc3NOYW1lPVwibWItNiBwLTQgYmctcmVkLTUwIGJvcmRlci1yZWQtMjAwXCI+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1yZWQtODAwXCI+e2Vycm9yfTwvcD5cbiAgICAgICAgPC9DYXJkPlxuICAgICAgKX1cblxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTZcIj5cbiAgICAgICAgey8qIFdlZGRpbmcgVGl0bGUgKi99XG4gICAgICAgIDxDYXJkIGNsYXNzTmFtZT1cInAtNlwiPlxuICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwidGl0bGVcIiBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAgbWItMlwiPlxuICAgICAgICAgICAgV2VkZGluZyBUaXRsZSAqXG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIGlkPVwidGl0bGVcIlxuICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgdmFsdWU9e2NvbmZpZy50aXRsZSB8fCAnJ31cbiAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlRmllbGRDaGFuZ2UoJ3RpdGxlJywgZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJTYXJhaCAmIE1pY2hhZWwncyBDb3N0YSBSaWNhIFdlZGRpbmdcIlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTMgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWJsdWUtNTAwXCJcbiAgICAgICAgICAgIGRpc2FibGVkPXtzYXZpbmd9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtdC0xIHRleHQtc20gdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgVGhlIG1haW4gdGl0bGUgZGlzcGxheWVkIG9uIHlvdXIgd2VkZGluZyBob21lcGFnZVxuICAgICAgICAgIDwvcD5cbiAgICAgICAgPC9DYXJkPlxuXG4gICAgICAgIHsvKiBTdWJ0aXRsZSAqL31cbiAgICAgICAgPENhcmQgY2xhc3NOYW1lPVwicC02XCI+XG4gICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJzdWJ0aXRsZVwiIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBtYi0yXCI+XG4gICAgICAgICAgICBTdWJ0aXRsZVxuICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICBpZD1cInN1YnRpdGxlXCJcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgIHZhbHVlPXtjb25maWcuc3VidGl0bGUgfHwgJyd9XG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGhhbmRsZUZpZWxkQ2hhbmdlKCdzdWJ0aXRsZScsIGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiSnVuZSAxNC0xNiwgMjAyNSDigKIgVGFtYXJpbmRvLCBDb3N0YSBSaWNhXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC0zIHB5LTIgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMFwiXG4gICAgICAgICAgICBkaXNhYmxlZD17c2F2aW5nfVxuICAgICAgICAgIC8+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtMSB0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgIE9wdGlvbmFsIHN1YnRpdGxlIHdpdGggZGF0ZSBhbmQgbG9jYXRpb25cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvQ2FyZD5cblxuICAgICAgICB7LyogSGVybyBJbWFnZSBVUkwgKi99XG4gICAgICAgIDxDYXJkIGNsYXNzTmFtZT1cInAtNlwiPlxuICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwiaGVyb0ltYWdlVXJsXCIgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTJcIj5cbiAgICAgICAgICAgIEhlcm8gSW1hZ2UgVVJMXG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIGlkPVwiaGVyb0ltYWdlVXJsXCJcbiAgICAgICAgICAgIHR5cGU9XCJ1cmxcIlxuICAgICAgICAgICAgdmFsdWU9e2NvbmZpZy5oZXJvSW1hZ2VVcmwgfHwgJyd9XG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGhhbmRsZUZpZWxkQ2hhbmdlKCdoZXJvSW1hZ2VVcmwnLCBlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cImh0dHBzOi8vZXhhbXBsZS5jb20vaGVyby1pbWFnZS5qcGdcIlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTMgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWJsdWUtNTAwXCJcbiAgICAgICAgICAgIGRpc2FibGVkPXtzYXZpbmd9XG4gICAgICAgICAgLz5cbiAgICAgICAgICB7Y29uZmlnLmhlcm9JbWFnZVVybCAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTNcIj5cbiAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgIHNyYz17Y29uZmlnLmhlcm9JbWFnZVVybH1cbiAgICAgICAgICAgICAgICBhbHQ9XCJIZXJvIHByZXZpZXdcIlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm1heC13LXhzIHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1ncmF5LTMwMFwiXG4gICAgICAgICAgICAgICAgb25FcnJvcj17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIChlLnRhcmdldCBhcyBIVE1MSW1hZ2VFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTEgdGV4dC1zbSB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICBVUkwgb2YgdGhlIGhlcm8gaW1hZ2UgZGlzcGxheWVkIGF0IHRoZSB0b3Agb2YgdGhlIGhvbWVwYWdlXG4gICAgICAgICAgPC9wPlxuICAgICAgICA8L0NhcmQ+XG5cbiAgICAgICAgey8qIFdlbGNvbWUgTWVzc2FnZSAqL31cbiAgICAgICAgPENhcmQgY2xhc3NOYW1lPVwicC02XCI+XG4gICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBtYi0yXCI+XG4gICAgICAgICAgICBXZWxjb21lIE1lc3NhZ2VcbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgIDxSaWNoVGV4dEVkaXRvclxuICAgICAgICAgICAgdmFsdWU9e2NvbmZpZy53ZWxjb21lTWVzc2FnZSB8fCAnJ31cbiAgICAgICAgICAgIG9uQ2hhbmdlPXsoaHRtbCkgPT4gaGFuZGxlRmllbGRDaGFuZ2UoJ3dlbGNvbWVNZXNzYWdlJywgaHRtbCl9XG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIldyaXRlIGEgd2VsY29tZSBtZXNzYWdlIGZvciB5b3VyIGd1ZXN0cy4uLlwiXG4gICAgICAgICAgICBkaXNhYmxlZD17c2F2aW5nfVxuICAgICAgICAgIC8+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtMSB0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgIFJpY2ggdGV4dCB3ZWxjb21lIG1lc3NhZ2UgZGlzcGxheWVkIG9uIHRoZSBob21lcGFnZVxuICAgICAgICAgIDwvcD5cbiAgICAgICAgPC9DYXJkPlxuXG4gICAgICAgIHsvKiBBY3Rpb24gQnV0dG9ucyAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gZ2FwLTRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTNcIj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlTWFuYWdlU2VjdGlvbnN9XG4gICAgICAgICAgICAgIHZhcmlhbnQ9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgICAgICBkaXNhYmxlZD17c2F2aW5nfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBNYW5hZ2UgU2VjdGlvbnNcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVQcmV2aWV3fVxuICAgICAgICAgICAgICB2YXJpYW50PVwic2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e3NhdmluZ31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgUHJldmlld1xuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2F2ZUNvbmZpZyh0cnVlKX1cbiAgICAgICAgICAgIGRpc2FibGVkPXtzYXZpbmcgfHwgIWlzRGlydHl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3NhdmluZyA/ICdTYXZpbmcuLi4nIDogJ1NhdmUgQ2hhbmdlcyd9XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHtpc0RpcnR5ICYmICFzYXZpbmcgJiYgKFxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1hbWJlci02MDBcIj5cbiAgICAgICAgICAgIFlvdSBoYXZlIHVuc2F2ZWQgY2hhbmdlcy4gVGhleSB3aWxsIGJlIGF1dG8tc2F2ZWQgaW4gMzAgc2Vjb25kcy5cbiAgICAgICAgICA8L3A+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJIb21lUGFnZUVkaXRvclBhZ2UiLCJSaWNoVGV4dEVkaXRvciIsImR5bmFtaWMiLCJ0aGVuIiwibW9kIiwiZGVmYXVsdCIsImxvYWRpbmciLCJSaWNoVGV4dEVkaXRvclNrZWxldG9uIiwic3NyIiwiU2VjdGlvbkVkaXRvciIsIlNlY3Rpb25FZGl0b3JTa2VsZXRvbiIsInJvdXRlciIsInVzZVJvdXRlciIsImNvbmZpZyIsInNldENvbmZpZyIsInVzZVN0YXRlIiwidGl0bGUiLCJzdWJ0aXRsZSIsIndlbGNvbWVNZXNzYWdlIiwiaGVyb0ltYWdlVXJsIiwic2V0TG9hZGluZyIsInNhdmluZyIsInNldFNhdmluZyIsImVycm9yIiwic2V0RXJyb3IiLCJpc0RpcnR5Iiwic2V0SXNEaXJ0eSIsInNob3dTZWN0aW9uRWRpdG9yIiwic2V0U2hvd1NlY3Rpb25FZGl0b3IiLCJsYXN0U2F2ZWQiLCJzZXRMYXN0U2F2ZWQiLCJhdXRvU2F2ZVRpbWVyUmVmIiwidXNlUmVmIiwibG9hZENvbmZpZyIsInVzZUNhbGxiYWNrIiwicmVzcG9uc2UiLCJmZXRjaCIsInJlc3VsdCIsImpzb24iLCJzdWNjZXNzIiwiZGF0YSIsIm1lc3NhZ2UiLCJlcnIiLCJFcnJvciIsInNhdmVDb25maWciLCJzaG93VG9hc3QiLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJEYXRlIiwiY29uc29sZSIsImxvZyIsInVzZUVmZmVjdCIsImN1cnJlbnQiLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiaGFuZGxlQmVmb3JlVW5sb2FkIiwiZSIsInByZXZlbnREZWZhdWx0IiwicmV0dXJuVmFsdWUiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZUZpZWxkQ2hhbmdlIiwiZmllbGQiLCJ2YWx1ZSIsInByZXYiLCJoYW5kbGVQcmV2aWV3Iiwib3BlbiIsImhhbmRsZU1hbmFnZVNlY3Rpb25zIiwiaGFuZGxlU2VjdGlvbkVkaXRvckNsb3NlIiwiZGl2IiwiY2xhc3NOYW1lIiwiaDEiLCJCdXR0b24iLCJvbkNsaWNrIiwidmFyaWFudCIsInBhZ2VUeXBlIiwicGFnZUlkIiwib25TYXZlIiwicCIsInRvTG9jYWxlVGltZVN0cmluZyIsIkNhcmQiLCJsYWJlbCIsImh0bWxGb3IiLCJpbnB1dCIsImlkIiwidHlwZSIsIm9uQ2hhbmdlIiwidGFyZ2V0IiwicGxhY2Vob2xkZXIiLCJkaXNhYmxlZCIsImltZyIsInNyYyIsImFsdCIsIm9uRXJyb3IiLCJzdHlsZSIsImRpc3BsYXkiLCJodG1sIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7K0JBNEJBOzs7Ozs7Ozs7O0NBVUMsR0FDRDs7O2VBQXdCQTs7Ozt1QkFyQ2lDOzRCQUMvQjtnRUFDTjt3QkFDRztzQkFDRjt3Q0FDa0I7dUNBQ0Q7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRXRDLDZCQUE2QjtBQUM3QixNQUFNQyxpQkFBaUJDLElBQUFBLGdCQUFPLEVBQUMsSUFBTSxtRUFBQSxRQUFPLDhDQUFxQ0MsSUFBSSxDQUFDQyxDQUFBQSxNQUFRLENBQUE7WUFBRUMsU0FBU0QsSUFBSUgsY0FBYztRQUFDLENBQUE7Ozs7OztJQUMxSEssU0FBUyxrQkFBTSxxQkFBQ0MsOENBQXNCO0lBQ3RDQyxL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