49084f55cb1e92dfcced979ecbdb3771
"use strict";

/* istanbul ignore next */
function cov_2gve3ijhet() {
  var path = "/Users/jaron/Desktop/wedding-platform-v2/middleware.ts";
  var hash = "c03f9df509a37c274c49c79aebbbaa3fb181bf4a";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/jaron/Desktop/wedding-platform-v2/middleware.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 6,
          column: 4
        },
        end: {
          line: 9,
          column: 7
        }
      },
      "2": {
        start: {
          line: 6,
          column: 24
        },
        end: {
          line: 9,
          column: 7
        }
      },
      "3": {
        start: {
          line: 11,
          column: 0
        },
        end: {
          line: 18,
          column: 3
        }
      },
      "4": {
        start: {
          line: 13,
          column: 8
        },
        end: {
          line: 13,
          column: 22
        }
      },
      "5": {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 16,
          column: 26
        }
      },
      "6": {
        start: {
          line: 19,
          column: 16
        },
        end: {
          line: 19,
          column: 38
        }
      },
      "7": {
        start: {
          line: 20,
          column: 13
        },
        end: {
          line: 20,
          column: 37
        }
      },
      "8": {
        start: {
          line: 22,
          column: 25
        },
        end: {
          line: 22,
          column: 40
        }
      },
      "9": {
        start: {
          line: 24,
          column: 4
        },
        end: {
          line: 26,
          column: 5
        }
      },
      "10": {
        start: {
          line: 25,
          column: 8
        },
        end: {
          line: 25,
          column: 43
        }
      },
      "11": {
        start: {
          line: 28,
          column: 26
        },
        end: {
          line: 28,
          column: 92
        }
      },
      "12": {
        start: {
          line: 29,
          column: 4
        },
        end: {
          line: 88,
          column: 5
        }
      },
      "13": {
        start: {
          line: 30,
          column: 8
        },
        end: {
          line: 87,
          column: 9
        }
      },
      "14": {
        start: {
          line: 31,
          column: 32
        },
        end: {
          line: 31,
          column: 68
        }
      },
      "15": {
        start: {
          line: 32,
          column: 36
        },
        end: {
          line: 32,
          column: 77
        }
      },
      "16": {
        start: {
          line: 33,
          column: 12
        },
        end: {
          line: 36,
          column: 13
        }
      },
      "17": {
        start: {
          line: 34,
          column: 16
        },
        end: {
          line: 34,
          column: 72
        }
      },
      "18": {
        start: {
          line: 35,
          column: 16
        },
        end: {
          line: 35,
          column: 48
        }
      },
      "19": {
        start: {
          line: 37,
          column: 27
        },
        end: {
          line: 41,
          column: 14
        }
      },
      "20": {
        start: {
          line: 43,
          column: 29
        },
        end: {
          line: 55,
          column: 14
        }
      },
      "21": {
        start: {
          line: 46,
          column: 24
        },
        end: {
          line: 46,
          column: 56
        }
      },
      "22": {
        start: {
          line: 49,
          column: 24
        },
        end: {
          line: 52,
          column: 27
        }
      },
      "23": {
        start: {
          line: 50,
          column: 28
        },
        end: {
          line: 50,
          column: 61
        }
      },
      "24": {
        start: {
          line: 51,
          column: 28
        },
        end: {
          line: 51,
          column: 71
        }
      },
      "25": {
        start: {
          line: 56,
          column: 46
        },
        end: {
          line: 56,
          column: 75
        }
      },
      "26": {
        start: {
          line: 57,
          column: 12
        },
        end: {
          line: 60,
          column: 13
        }
      },
      "27": {
        start: {
          line: 58,
          column: 16
        },
        end: {
          line: 58,
          column: 75
        }
      },
      "28": {
        start: {
          line: 59,
          column: 16
        },
        end: {
          line: 59,
          column: 48
        }
      },
      "29": {
        start: {
          line: 61,
          column: 12
        },
        end: {
          line: 61,
          column: 69
        }
      },
      "30": {
        start: {
          line: 63,
          column: 57
        },
        end: {
          line: 63,
          column: 127
        }
      },
      "31": {
        start: {
          line: 64,
          column: 12
        },
        end: {
          line: 67,
          column: 15
        }
      },
      "32": {
        start: {
          line: 68,
          column: 12
        },
        end: {
          line: 71,
          column: 13
        }
      },
      "33": {
        start: {
          line: 69,
          column: 16
        },
        end: {
          line: 69,
          column: 91
        }
      },
      "34": {
        start: {
          line: 70,
          column: 16
        },
        end: {
          line: 70,
          column: 55
        }
      },
      "35": {
        start: {
          line: 73,
          column: 33
        },
        end: {
          line: 76,
          column: 13
        }
      },
      "36": {
        start: {
          line: 77,
          column: 12
        },
        end: {
          line: 80,
          column: 13
        }
      },
      "37": {
        start: {
          line: 78,
          column: 16
        },
        end: {
          line: 78,
          column: 82
        }
      },
      "38": {
        start: {
          line: 79,
          column: 16
        },
        end: {
          line: 79,
          column: 55
        }
      },
      "39": {
        start: {
          line: 81,
          column: 12
        },
        end: {
          line: 81,
          column: 80
        }
      },
      "40": {
        start: {
          line: 83,
          column: 12
        },
        end: {
          line: 83,
          column: 28
        }
      },
      "41": {
        start: {
          line: 85,
          column: 12
        },
        end: {
          line: 85,
          column: 54
        }
      },
      "42": {
        start: {
          line: 86,
          column: 12
        },
        end: {
          line: 86,
          column: 44
        }
      },
      "43": {
        start: {
          line: 90,
          column: 4
        },
        end: {
          line: 90,
          column: 39
        }
      },
      "44": {
        start: {
          line: 97,
          column: 4
        },
        end: {
          line: 107,
          column: 5
        }
      },
      "45": {
        start: {
          line: 98,
          column: 8
        },
        end: {
          line: 106,
          column: 11
        }
      },
      "46": {
        start: {
          line: 108,
          column: 21
        },
        end: {
          line: 108,
          column: 56
        }
      },
      "47": {
        start: {
          line: 109,
          column: 4
        },
        end: {
          line: 109,
          column: 68
        }
      },
      "48": {
        start: {
          line: 110,
          column: 4
        },
        end: {
          line: 110,
          column: 51
        }
      },
      "49": {
        start: {
          line: 117,
          column: 4
        },
        end: {
          line: 127,
          column: 5
        }
      },
      "50": {
        start: {
          line: 118,
          column: 8
        },
        end: {
          line: 126,
          column: 11
        }
      },
      "51": {
        start: {
          line: 128,
          column: 28
        },
        end: {
          line: 128,
          column: 70
        }
      },
      "52": {
        start: {
          line: 129,
          column: 4
        },
        end: {
          line: 129,
          column: 58
        }
      },
      "53": {
        start: {
          line: 131,
          column: 15
        },
        end: {
          line: 141,
          column: 1
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 5,
            column: 9
          },
          end: {
            line: 5,
            column: 16
          }
        },
        loc: {
          start: {
            line: 5,
            column: 30
          },
          end: {
            line: 10,
            column: 1
          }
        },
        line: 5
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 12,
            column: 4
          },
          end: {
            line: 12,
            column: 5
          }
        },
        loc: {
          start: {
            line: 12,
            column: 18
          },
          end: {
            line: 14,
            column: 5
          }
        },
        line: 12
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 15,
            column: 4
          },
          end: {
            line: 15,
            column: 5
          }
        },
        loc: {
          start: {
            line: 15,
            column: 22
          },
          end: {
            line: 17,
            column: 5
          }
        },
        line: 15
      },
      "3": {
        name: "middleware",
        decl: {
          start: {
            line: 21,
            column: 15
          },
          end: {
            line: 21,
            column: 25
          }
        },
        loc: {
          start: {
            line: 21,
            column: 35
          },
          end: {
            line: 91,
            column: 1
          }
        },
        line: 21
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 45,
            column: 20
          },
          end: {
            line: 45,
            column: 21
          }
        },
        loc: {
          start: {
            line: 45,
            column: 30
          },
          end: {
            line: 47,
            column: 21
          }
        },
        line: 45
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 48,
            column: 20
          },
          end: {
            line: 48,
            column: 21
          }
        },
        loc: {
          start: {
            line: 48,
            column: 42
          },
          end: {
            line: 53,
            column: 21
          }
        },
        line: 48
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 49,
            column: 45
          },
          end: {
            line: 49,
            column: 46
          }
        },
        loc: {
          start: {
            line: 49,
            column: 73
          },
          end: {
            line: 52,
            column: 25
          }
        },
        line: 49
      },
      "7": {
        name: "redirectToLogin",
        decl: {
          start: {
            line: 95,
            column: 13
          },
          end: {
            line: 95,
            column: 28
          }
        },
        loc: {
          start: {
            line: 95,
            column: 38
          },
          end: {
            line: 111,
            column: 1
          }
        },
        line: 95
      },
      "8": {
        name: "redirectToUnauthorized",
        decl: {
          start: {
            line: 115,
            column: 13
          },
          end: {
            line: 115,
            column: 35
          }
        },
        loc: {
          start: {
            line: 115,
            column: 45
          },
          end: {
            line: 130,
            column: 1
          }
        },
        line: 115
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 24,
            column: 4
          },
          end: {
            line: 26,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 24,
            column: 4
          },
          end: {
            line: 26,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 24
      },
      "1": {
        loc: {
          start: {
            line: 24,
            column: 8
          },
          end: {
            line: 24,
            column: 159
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 24,
            column: 8
          },
          end: {
            line: 24,
            column: 36
          }
        }, {
          start: {
            line: 24,
            column: 40
          },
          end: {
            line: 24,
            column: 56
          }
        }, {
          start: {
            line: 24,
            column: 60
          },
          end: {
            line: 24,
            column: 92
          }
        }, {
          start: {
            line: 24,
            column: 96
          },
          end: {
            line: 24,
            column: 125
          }
        }, {
          start: {
            line: 24,
            column: 129
          },
          end: {
            line: 24,
            column: 159
          }
        }],
        line: 24
      },
      "2": {
        loc: {
          start: {
            line: 28,
            column: 26
          },
          end: {
            line: 28,
            column: 92
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 28,
            column: 26
          },
          end: {
            line: 28,
            column: 55
          }
        }, {
          start: {
            line: 28,
            column: 59
          },
          end: {
            line: 28,
            column: 92
          }
        }],
        line: 28
      },
      "3": {
        loc: {
          start: {
            line: 29,
            column: 4
          },
          end: {
            line: 88,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 29,
            column: 4
          },
          end: {
            line: 88,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 29
      },
      "4": {
        loc: {
          start: {
            line: 33,
            column: 12
          },
          end: {
            line: 36,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 33,
            column: 12
          },
          end: {
            line: 36,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 33
      },
      "5": {
        loc: {
          start: {
            line: 33,
            column: 16
          },
          end: {
            line: 33,
            column: 48
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 33,
            column: 16
          },
          end: {
            line: 33,
            column: 28
          }
        }, {
          start: {
            line: 33,
            column: 32
          },
          end: {
            line: 33,
            column: 48
          }
        }],
        line: 33
      },
      "6": {
        loc: {
          start: {
            line: 57,
            column: 12
          },
          end: {
            line: 60,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 57,
            column: 12
          },
          end: {
            line: 60,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 57
      },
      "7": {
        loc: {
          start: {
            line: 57,
            column: 16
          },
          end: {
            line: 57,
            column: 30
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 57,
            column: 16
          },
          end: {
            line: 57,
            column: 21
          }
        }, {
          start: {
            line: 57,
            column: 25
          },
          end: {
            line: 57,
            column: 30
          }
        }],
        line: 57
      },
      "8": {
        loc: {
          start: {
            line: 68,
            column: 12
          },
          end: {
            line: 71,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 68,
            column: 12
          },
          end: {
            line: 71,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 68
      },
      "9": {
        loc: {
          start: {
            line: 68,
            column: 16
          },
          end: {
            line: 68,
            column: 38
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 68,
            column: 16
          },
          end: {
            line: 68,
            column: 25
          }
        }, {
          start: {
            line: 68,
            column: 29
          },
          end: {
            line: 68,
            column: 38
          }
        }],
        line: 68
      },
      "10": {
        loc: {
          start: {
            line: 77,
            column: 12
          },
          end: {
            line: 80,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 77,
            column: 12
          },
          end: {
            line: 80,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 77
      },
      "11": {
        loc: {
          start: {
            line: 97,
            column: 4
          },
          end: {
            line: 107,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 97,
            column: 4
          },
          end: {
            line: 107,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 97
      },
      "12": {
        loc: {
          start: {
            line: 117,
            column: 4
          },
          end: {
            line: 127,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 117,
            column: 4
          },
          end: {
            line: 127,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 117
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0, 0, 0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["/Users/jaron/Desktop/wedding-platform-v2/middleware.ts"],
      sourcesContent: ["import { NextResponse } from 'next/server';\nimport type { NextRequest } from 'next/server';\nimport { createServerClient } from '@supabase/ssr';\n\n/**\n * Middleware for protecting routes with authentication and role-based access control.\n * \n * Protected routes:\n * - /admin/* - Requires super_admin or host role\n * - /api/admin/* - Requires super_admin or host role\n * \n * Public routes:\n * - /auth/* - Authentication pages\n * - / - Home page\n * - /api/auth/* - Authentication API endpoints\n */\n\nexport async function middleware(request: NextRequest) {\n  const { pathname } = request.nextUrl;\n\n  // Skip middleware for public routes\n  if (\n    pathname.startsWith('/auth') ||\n    pathname === '/' ||\n    pathname.startsWith('/api/auth') ||\n    pathname.startsWith('/_next') ||\n    pathname.startsWith('/static')\n  ) {\n    return NextResponse.next();\n  }\n\n  // Check if route requires admin access\n  const requiresAdmin = pathname.startsWith('/admin') || pathname.startsWith('/api/admin');\n\n  if (requiresAdmin) {\n    try {\n      const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\n      const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\n\n      if (!supabaseUrl || !supabaseAnonKey) {\n        console.error('Missing Supabase environment variables');\n        return redirectToLogin(request);\n      }\n\n      let response = NextResponse.next({\n        request: {\n          headers: request.headers,\n        },\n      });\n\n      // Create Supabase client for middleware\n      const supabase = createServerClient(\n        supabaseUrl,\n        supabaseAnonKey,\n        {\n          cookies: {\n            getAll() {\n              return request.cookies.getAll();\n            },\n            setAll(cookiesToSet) {\n              cookiesToSet.forEach(({ name, value, options }) => {\n                request.cookies.set(name, value);\n                response.cookies.set(name, value, options);\n              });\n            },\n          },\n        }\n      );\n\n      const { data: { user }, error } = await supabase.auth.getUser();\n\n      if (error || !user) {\n        console.log('[Middleware] No user found:', error?.message);\n        return redirectToLogin(request);\n      }\n\n      console.log('[Middleware] User authenticated:', user.id);\n\n      // Fetch user role from users table\n      const { data: userData, error: userError } = await supabase\n        .from('users')\n        .select('role')\n        .eq('id', user.id)\n        .single();\n\n      console.log('[Middleware] User data query result:', { userData, userError });\n\n      if (userError || !userData) {\n        console.log('[Middleware] Failed to fetch user role:', userError?.message);\n        return redirectToUnauthorized(request);\n      }\n\n      // Check if user has required role for admin routes\n      const allowedRoles = ['super_admin', 'host'];\n      if (!allowedRoles.includes(userData.role)) {\n        console.log('[Middleware] User role not allowed:', userData.role);\n        return redirectToUnauthorized(request);\n      }\n\n      console.log('[Middleware] Access granted for role:', userData.role);\n\n      // User is authorized, return response with updated cookies\n      return response;\n    } catch (error) {\n      console.error('Middleware error:', error);\n      return redirectToLogin(request);\n    }\n  }\n\n  // For non-admin routes, just continue\n  return NextResponse.next();\n}\n\n/**\n * Redirects to login page with return URL (for page requests).\n * Returns JSON error for API requests.\n */\nfunction redirectToLogin(request: NextRequest): NextResponse {\n  // For API routes, return JSON error instead of redirect\n  if (request.nextUrl.pathname.startsWith('/api/')) {\n    return NextResponse.json(\n      { success: false, error: { code: 'UNAUTHORIZED', message: 'Authentication required' } },\n      { status: 401 }\n    );\n  }\n  \n  const loginUrl = new URL('/auth/login', request.url);\n  loginUrl.searchParams.set('returnTo', request.nextUrl.pathname);\n  return NextResponse.redirect(loginUrl);\n}\n\n/**\n * Redirects to unauthorized page (for page requests).\n * Returns JSON error for API requests.\n */\nfunction redirectToUnauthorized(request: NextRequest): NextResponse {\n  // For API routes, return JSON error instead of redirect\n  if (request.nextUrl.pathname.startsWith('/api/')) {\n    return NextResponse.json(\n      { success: false, error: { code: 'FORBIDDEN', message: 'Insufficient permissions' } },\n      { status: 403 }\n    );\n  }\n  \n  const unauthorizedUrl = new URL('/auth/unauthorized', request.url);\n  return NextResponse.redirect(unauthorizedUrl);\n}\n\nexport const config = {\n  matcher: [\n    /*\n     * Match all request paths except:\n     * - _next/static (static files)\n     * - _next/image (image optimization files)\n     * - favicon.ico (favicon file)\n     * - public folder\n     */\n    '/((?!_next/static|_next/image|favicon.ico|.*\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)',\n  ],\n};\n"],
      names: ["config", "middleware", "request", "pathname", "nextUrl", "startsWith", "NextResponse", "next", "requiresAdmin", "supabaseUrl", "process", "env", "NEXT_PUBLIC_SUPABASE_URL", "supabaseAnonKey", "NEXT_PUBLIC_SUPABASE_ANON_KEY", "console", "error", "redirectToLogin", "response", "headers", "supabase", "createServerClient", "cookies", "getAll", "setAll", "cookiesToSet", "forEach", "name", "value", "options", "set", "data", "user", "auth", "getUser", "log", "message", "id", "userData", "userError", "from", "select", "eq", "single", "redirectToUnauthorized", "allowedRoles", "includes", "role", "json", "success", "code", "status", "loginUrl", "URL", "url", "searchParams", "redirect", "unauthorizedUrl", "matcher"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "c03f9df509a37c274c49c79aebbbaa3fb181bf4a"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2gve3ijhet = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2gve3ijhet();
cov_2gve3ijhet().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_2gve3ijhet().f[0]++;
  cov_2gve3ijhet().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_2gve3ijhet().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: Object.getOwnPropertyDescriptor(all, name).get
    });
  }
}
/* istanbul ignore next */
cov_2gve3ijhet().s[3]++;
_export(exports, {
  get config() {
    /* istanbul ignore next */
    cov_2gve3ijhet().f[1]++;
    cov_2gve3ijhet().s[4]++;
    return config;
  },
  get middleware() {
    /* istanbul ignore next */
    cov_2gve3ijhet().f[2]++;
    cov_2gve3ijhet().s[5]++;
    return middleware;
  }
});
const _server =
/* istanbul ignore next */
(cov_2gve3ijhet().s[6]++, require("next/server"));
const _ssr =
/* istanbul ignore next */
(cov_2gve3ijhet().s[7]++, require("@supabase/ssr"));
async function middleware(request) {
  /* istanbul ignore next */
  cov_2gve3ijhet().f[3]++;
  const {
    pathname
  } =
  /* istanbul ignore next */
  (cov_2gve3ijhet().s[8]++, request.nextUrl);
  // Skip middleware for public routes
  /* istanbul ignore next */
  cov_2gve3ijhet().s[9]++;
  if (
  /* istanbul ignore next */
  (cov_2gve3ijhet().b[1][0]++, pathname.startsWith('/auth')) ||
  /* istanbul ignore next */
  (cov_2gve3ijhet().b[1][1]++, pathname === '/') ||
  /* istanbul ignore next */
  (cov_2gve3ijhet().b[1][2]++, pathname.startsWith('/api/auth')) ||
  /* istanbul ignore next */
  (cov_2gve3ijhet().b[1][3]++, pathname.startsWith('/_next')) ||
  /* istanbul ignore next */
  (cov_2gve3ijhet().b[1][4]++, pathname.startsWith('/static'))) {
    /* istanbul ignore next */
    cov_2gve3ijhet().b[0][0]++;
    cov_2gve3ijhet().s[10]++;
    return _server.NextResponse.next();
  } else
  /* istanbul ignore next */
  {
    cov_2gve3ijhet().b[0][1]++;
  }
  // Check if route requires admin access
  const requiresAdmin =
  /* istanbul ignore next */
  (cov_2gve3ijhet().s[11]++,
  /* istanbul ignore next */
  (cov_2gve3ijhet().b[2][0]++, pathname.startsWith('/admin')) ||
  /* istanbul ignore next */
  (cov_2gve3ijhet().b[2][1]++, pathname.startsWith('/api/admin')));
  /* istanbul ignore next */
  cov_2gve3ijhet().s[12]++;
  if (requiresAdmin) {
    /* istanbul ignore next */
    cov_2gve3ijhet().b[3][0]++;
    cov_2gve3ijhet().s[13]++;
    try {
      const supabaseUrl =
      /* istanbul ignore next */
      (cov_2gve3ijhet().s[14]++, process.env.NEXT_PUBLIC_SUPABASE_URL);
      const supabaseAnonKey =
      /* istanbul ignore next */
      (cov_2gve3ijhet().s[15]++, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);
      /* istanbul ignore next */
      cov_2gve3ijhet().s[16]++;
      if (
      /* istanbul ignore next */
      (cov_2gve3ijhet().b[5][0]++, !supabaseUrl) ||
      /* istanbul ignore next */
      (cov_2gve3ijhet().b[5][1]++, !supabaseAnonKey)) {
        /* istanbul ignore next */
        cov_2gve3ijhet().b[4][0]++;
        cov_2gve3ijhet().s[17]++;
        console.error('Missing Supabase environment variables');
        /* istanbul ignore next */
        cov_2gve3ijhet().s[18]++;
        return redirectToLogin(request);
      } else
      /* istanbul ignore next */
      {
        cov_2gve3ijhet().b[4][1]++;
      }
      let response =
      /* istanbul ignore next */
      (cov_2gve3ijhet().s[19]++, _server.NextResponse.next({
        request: {
          headers: request.headers
        }
      }));
      // Create Supabase client for middleware
      const supabase =
      /* istanbul ignore next */
      (cov_2gve3ijhet().s[20]++, (0, _ssr.createServerClient)(supabaseUrl, supabaseAnonKey, {
        cookies: {
          getAll() {
            /* istanbul ignore next */
            cov_2gve3ijhet().f[4]++;
            cov_2gve3ijhet().s[21]++;
            return request.cookies.getAll();
          },
          setAll(cookiesToSet) {
            /* istanbul ignore next */
            cov_2gve3ijhet().f[5]++;
            cov_2gve3ijhet().s[22]++;
            cookiesToSet.forEach(({
              name,
              value,
              options
            }) => {
              /* istanbul ignore next */
              cov_2gve3ijhet().f[6]++;
              cov_2gve3ijhet().s[23]++;
              request.cookies.set(name, value);
              /* istanbul ignore next */
              cov_2gve3ijhet().s[24]++;
              response.cookies.set(name, value, options);
            });
          }
        }
      }));
      const {
        data: {
          user
        },
        error
      } =
      /* istanbul ignore next */
      (cov_2gve3ijhet().s[25]++, await supabase.auth.getUser());
      /* istanbul ignore next */
      cov_2gve3ijhet().s[26]++;
      if (
      /* istanbul ignore next */
      (cov_2gve3ijhet().b[7][0]++, error) ||
      /* istanbul ignore next */
      (cov_2gve3ijhet().b[7][1]++, !user)) {
        /* istanbul ignore next */
        cov_2gve3ijhet().b[6][0]++;
        cov_2gve3ijhet().s[27]++;
        console.log('[Middleware] No user found:', error?.message);
        /* istanbul ignore next */
        cov_2gve3ijhet().s[28]++;
        return redirectToLogin(request);
      } else
      /* istanbul ignore next */
      {
        cov_2gve3ijhet().b[6][1]++;
      }
      cov_2gve3ijhet().s[29]++;
      console.log('[Middleware] User authenticated:', user.id);
      // Fetch user role from users table
      const {
        data: userData,
        error: userError
      } =
      /* istanbul ignore next */
      (cov_2gve3ijhet().s[30]++, await supabase.from('users').select('role').eq('id', user.id).single());
      /* istanbul ignore next */
      cov_2gve3ijhet().s[31]++;
      console.log('[Middleware] User data query result:', {
        userData,
        userError
      });
      /* istanbul ignore next */
      cov_2gve3ijhet().s[32]++;
      if (
      /* istanbul ignore next */
      (cov_2gve3ijhet().b[9][0]++, userError) ||
      /* istanbul ignore next */
      (cov_2gve3ijhet().b[9][1]++, !userData)) {
        /* istanbul ignore next */
        cov_2gve3ijhet().b[8][0]++;
        cov_2gve3ijhet().s[33]++;
        console.log('[Middleware] Failed to fetch user role:', userError?.message);
        /* istanbul ignore next */
        cov_2gve3ijhet().s[34]++;
        return redirectToUnauthorized(request);
      } else
      /* istanbul ignore next */
      {
        cov_2gve3ijhet().b[8][1]++;
      }
      // Check if user has required role for admin routes
      const allowedRoles =
      /* istanbul ignore next */
      (cov_2gve3ijhet().s[35]++, ['super_admin', 'host']);
      /* istanbul ignore next */
      cov_2gve3ijhet().s[36]++;
      if (!allowedRoles.includes(userData.role)) {
        /* istanbul ignore next */
        cov_2gve3ijhet().b[10][0]++;
        cov_2gve3ijhet().s[37]++;
        console.log('[Middleware] User role not allowed:', userData.role);
        /* istanbul ignore next */
        cov_2gve3ijhet().s[38]++;
        return redirectToUnauthorized(request);
      } else
      /* istanbul ignore next */
      {
        cov_2gve3ijhet().b[10][1]++;
      }
      cov_2gve3ijhet().s[39]++;
      console.log('[Middleware] Access granted for role:', userData.role);
      // User is authorized, return response with updated cookies
      /* istanbul ignore next */
      cov_2gve3ijhet().s[40]++;
      return response;
    } catch (error) {
      /* istanbul ignore next */
      cov_2gve3ijhet().s[41]++;
      console.error('Middleware error:', error);
      /* istanbul ignore next */
      cov_2gve3ijhet().s[42]++;
      return redirectToLogin(request);
    }
  } else
  /* istanbul ignore next */
  {
    cov_2gve3ijhet().b[3][1]++;
  }
  // For non-admin routes, just continue
  cov_2gve3ijhet().s[43]++;
  return _server.NextResponse.next();
}
/**
 * Redirects to login page with return URL (for page requests).
 * Returns JSON error for API requests.
 */
function redirectToLogin(request) {
  /* istanbul ignore next */
  cov_2gve3ijhet().f[7]++;
  cov_2gve3ijhet().s[44]++;
  // For API routes, return JSON error instead of redirect
  if (request.nextUrl.pathname.startsWith('/api/')) {
    /* istanbul ignore next */
    cov_2gve3ijhet().b[11][0]++;
    cov_2gve3ijhet().s[45]++;
    return _server.NextResponse.json({
      success: false,
      error: {
        code: 'UNAUTHORIZED',
        message: 'Authentication required'
      }
    }, {
      status: 401
    });
  } else
  /* istanbul ignore next */
  {
    cov_2gve3ijhet().b[11][1]++;
  }
  const loginUrl =
  /* istanbul ignore next */
  (cov_2gve3ijhet().s[46]++, new URL('/auth/login', request.url));
  /* istanbul ignore next */
  cov_2gve3ijhet().s[47]++;
  loginUrl.searchParams.set('returnTo', request.nextUrl.pathname);
  /* istanbul ignore next */
  cov_2gve3ijhet().s[48]++;
  return _server.NextResponse.redirect(loginUrl);
}
/**
 * Redirects to unauthorized page (for page requests).
 * Returns JSON error for API requests.
 */
function redirectToUnauthorized(request) {
  /* istanbul ignore next */
  cov_2gve3ijhet().f[8]++;
  cov_2gve3ijhet().s[49]++;
  // For API routes, return JSON error instead of redirect
  if (request.nextUrl.pathname.startsWith('/api/')) {
    /* istanbul ignore next */
    cov_2gve3ijhet().b[12][0]++;
    cov_2gve3ijhet().s[50]++;
    return _server.NextResponse.json({
      success: false,
      error: {
        code: 'FORBIDDEN',
        message: 'Insufficient permissions'
      }
    }, {
      status: 403
    });
  } else
  /* istanbul ignore next */
  {
    cov_2gve3ijhet().b[12][1]++;
  }
  const unauthorizedUrl =
  /* istanbul ignore next */
  (cov_2gve3ijhet().s[51]++, new URL('/auth/unauthorized', request.url));
  /* istanbul ignore next */
  cov_2gve3ijhet().s[52]++;
  return _server.NextResponse.redirect(unauthorizedUrl);
}
const config =
/* istanbul ignore next */
(cov_2gve3ijhet().s[53]++, {
  matcher: [
  /*
  * Match all request paths except:
  * - _next/static (static files)
  * - _next/image (image optimization files)
  * - favicon.ico (favicon file)
  * - public folder
  */
  '/((?!_next/static|_next/image|favicon.ico|.*\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)']
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25maWciLCJjb3ZfMmd2ZTNpamhldCIsImYiLCJzIiwibWlkZGxld2FyZSIsInJlcXVlc3QiLCJwYXRobmFtZSIsIm5leHRVcmwiLCJiIiwic3RhcnRzV2l0aCIsIl9zZXJ2ZXIiLCJOZXh0UmVzcG9uc2UiLCJuZXh0IiwicmVxdWlyZXNBZG1pbiIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiY29uc29sZSIsImVycm9yIiwicmVkaXJlY3RUb0xvZ2luIiwicmVzcG9uc2UiLCJoZWFkZXJzIiwic3VwYWJhc2UiLCJfc3NyIiwiY3JlYXRlU2VydmVyQ2xpZW50IiwiY29va2llcyIsImdldEFsbCIsInNldEFsbCIsImNvb2tpZXNUb1NldCIsImZvckVhY2giLCJuYW1lIiwidmFsdWUiLCJvcHRpb25zIiwic2V0IiwiZGF0YSIsInVzZXIiLCJhdXRoIiwiZ2V0VXNlciIsImxvZyIsIm1lc3NhZ2UiLCJpZCIsInVzZXJEYXRhIiwidXNlckVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwicmVkaXJlY3RUb1VuYXV0aG9yaXplZCIsImFsbG93ZWRSb2xlcyIsImluY2x1ZGVzIiwicm9sZSIsImpzb24iLCJzdWNjZXNzIiwiY29kZSIsInN0YXR1cyIsImxvZ2luVXJsIiwiVVJMIiwidXJsIiwic2VhcmNoUGFyYW1zIiwicmVkaXJlY3QiLCJ1bmF1dGhvcml6ZWRVcmwiLCJtYXRjaGVyIl0sInNvdXJjZXMiOlsiL1VzZXJzL2phcm9uL0Rlc2t0b3Avd2VkZGluZy1wbGF0Zm9ybS12Mi9taWRkbGV3YXJlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB0eXBlIHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBjcmVhdGVTZXJ2ZXJDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3NyJztcblxuLyoqXG4gKiBNaWRkbGV3YXJlIGZvciBwcm90ZWN0aW5nIHJvdXRlcyB3aXRoIGF1dGhlbnRpY2F0aW9uIGFuZCByb2xlLWJhc2VkIGFjY2VzcyBjb250cm9sLlxuICogXG4gKiBQcm90ZWN0ZWQgcm91dGVzOlxuICogLSAvYWRtaW4vKiAtIFJlcXVpcmVzIHN1cGVyX2FkbWluIG9yIGhvc3Qgcm9sZVxuICogLSAvYXBpL2FkbWluLyogLSBSZXF1aXJlcyBzdXBlcl9hZG1pbiBvciBob3N0IHJvbGVcbiAqIFxuICogUHVibGljIHJvdXRlczpcbiAqIC0gL2F1dGgvKiAtIEF1dGhlbnRpY2F0aW9uIHBhZ2VzXG4gKiAtIC8gLSBIb21lIHBhZ2VcbiAqIC0gL2FwaS9hdXRoLyogLSBBdXRoZW50aWNhdGlvbiBBUEkgZW5kcG9pbnRzXG4gKi9cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3QgeyBwYXRobmFtZSB9ID0gcmVxdWVzdC5uZXh0VXJsO1xuXG4gIC8vIFNraXAgbWlkZGxld2FyZSBmb3IgcHVibGljIHJvdXRlc1xuICBpZiAoXG4gICAgcGF0aG5hbWUuc3RhcnRzV2l0aCgnL2F1dGgnKSB8fFxuICAgIHBhdGhuYW1lID09PSAnLycgfHxcbiAgICBwYXRobmFtZS5zdGFydHNXaXRoKCcvYXBpL2F1dGgnKSB8fFxuICAgIHBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9fbmV4dCcpIHx8XG4gICAgcGF0aG5hbWUuc3RhcnRzV2l0aCgnL3N0YXRpYycpXG4gICkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpO1xuICB9XG5cbiAgLy8gQ2hlY2sgaWYgcm91dGUgcmVxdWlyZXMgYWRtaW4gYWNjZXNzXG4gIGNvbnN0IHJlcXVpcmVzQWRtaW4gPSBwYXRobmFtZS5zdGFydHNXaXRoKCcvYWRtaW4nKSB8fCBwYXRobmFtZS5zdGFydHNXaXRoKCcvYXBpL2FkbWluJyk7XG5cbiAgaWYgKHJlcXVpcmVzQWRtaW4pIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XG4gICAgICBjb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWTtcblxuICAgICAgaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VBbm9uS2V5KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ01pc3NpbmcgU3VwYWJhc2UgZW52aXJvbm1lbnQgdmFyaWFibGVzJyk7XG4gICAgICAgIHJldHVybiByZWRpcmVjdFRvTG9naW4ocmVxdWVzdCk7XG4gICAgICB9XG5cbiAgICAgIGxldCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5uZXh0KHtcbiAgICAgICAgcmVxdWVzdDoge1xuICAgICAgICAgIGhlYWRlcnM6IHJlcXVlc3QuaGVhZGVycyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDcmVhdGUgU3VwYWJhc2UgY2xpZW50IGZvciBtaWRkbGV3YXJlXG4gICAgICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVNlcnZlckNsaWVudChcbiAgICAgICAgc3VwYWJhc2VVcmwsXG4gICAgICAgIHN1cGFiYXNlQW5vbktleSxcbiAgICAgICAge1xuICAgICAgICAgIGNvb2tpZXM6IHtcbiAgICAgICAgICAgIGdldEFsbCgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3QuY29va2llcy5nZXRBbGwoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRBbGwoY29va2llc1RvU2V0KSB7XG4gICAgICAgICAgICAgIGNvb2tpZXNUb1NldC5mb3JFYWNoKCh7IG5hbWUsIHZhbHVlLCBvcHRpb25zIH0pID0+IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmNvb2tpZXMuc2V0KG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5jb29raWVzLnNldChuYW1lLCB2YWx1ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBjb25zdCB7IGRhdGE6IHsgdXNlciB9LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKCk7XG5cbiAgICAgIGlmIChlcnJvciB8fCAhdXNlcikge1xuICAgICAgICBjb25zb2xlLmxvZygnW01pZGRsZXdhcmVdIE5vIHVzZXIgZm91bmQ6JywgZXJyb3I/Lm1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4gcmVkaXJlY3RUb0xvZ2luKHJlcXVlc3QpO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygnW01pZGRsZXdhcmVdIFVzZXIgYXV0aGVudGljYXRlZDonLCB1c2VyLmlkKTtcblxuICAgICAgLy8gRmV0Y2ggdXNlciByb2xlIGZyb20gdXNlcnMgdGFibGVcbiAgICAgIGNvbnN0IHsgZGF0YTogdXNlckRhdGEsIGVycm9yOiB1c2VyRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAgIC5zZWxlY3QoJ3JvbGUnKVxuICAgICAgICAuZXEoJ2lkJywgdXNlci5pZClcbiAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICBjb25zb2xlLmxvZygnW01pZGRsZXdhcmVdIFVzZXIgZGF0YSBxdWVyeSByZXN1bHQ6JywgeyB1c2VyRGF0YSwgdXNlckVycm9yIH0pO1xuXG4gICAgICBpZiAodXNlckVycm9yIHx8ICF1c2VyRGF0YSkge1xuICAgICAgICBjb25zb2xlLmxvZygnW01pZGRsZXdhcmVdIEZhaWxlZCB0byBmZXRjaCB1c2VyIHJvbGU6JywgdXNlckVycm9yPy5tZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuIHJlZGlyZWN0VG9VbmF1dGhvcml6ZWQocmVxdWVzdCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIHVzZXIgaGFzIHJlcXVpcmVkIHJvbGUgZm9yIGFkbWluIHJvdXRlc1xuICAgICAgY29uc3QgYWxsb3dlZFJvbGVzID0gWydzdXBlcl9hZG1pbicsICdob3N0J107XG4gICAgICBpZiAoIWFsbG93ZWRSb2xlcy5pbmNsdWRlcyh1c2VyRGF0YS5yb2xlKSkge1xuICAgICAgICBjb25zb2xlLmxvZygnW01pZGRsZXdhcmVdIFVzZXIgcm9sZSBub3QgYWxsb3dlZDonLCB1c2VyRGF0YS5yb2xlKTtcbiAgICAgICAgcmV0dXJuIHJlZGlyZWN0VG9VbmF1dGhvcml6ZWQocmVxdWVzdCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCdbTWlkZGxld2FyZV0gQWNjZXNzIGdyYW50ZWQgZm9yIHJvbGU6JywgdXNlckRhdGEucm9sZSk7XG5cbiAgICAgIC8vIFVzZXIgaXMgYXV0aG9yaXplZCwgcmV0dXJuIHJlc3BvbnNlIHdpdGggdXBkYXRlZCBjb29raWVzXG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ01pZGRsZXdhcmUgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHJlZGlyZWN0VG9Mb2dpbihyZXF1ZXN0KTtcbiAgICB9XG4gIH1cblxuICAvLyBGb3Igbm9uLWFkbWluIHJvdXRlcywganVzdCBjb250aW51ZVxuICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKTtcbn1cblxuLyoqXG4gKiBSZWRpcmVjdHMgdG8gbG9naW4gcGFnZSB3aXRoIHJldHVybiBVUkwgKGZvciBwYWdlIHJlcXVlc3RzKS5cbiAqIFJldHVybnMgSlNPTiBlcnJvciBmb3IgQVBJIHJlcXVlc3RzLlxuICovXG5mdW5jdGlvbiByZWRpcmVjdFRvTG9naW4ocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBOZXh0UmVzcG9uc2Uge1xuICAvLyBGb3IgQVBJIHJvdXRlcywgcmV0dXJuIEpTT04gZXJyb3IgaW5zdGVhZCBvZiByZWRpcmVjdFxuICBpZiAocmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9hcGkvJykpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogeyBjb2RlOiAnVU5BVVRIT1JJWkVEJywgbWVzc2FnZTogJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJyB9IH0sXG4gICAgICB7IHN0YXR1czogNDAxIH1cbiAgICApO1xuICB9XG4gIFxuICBjb25zdCBsb2dpblVybCA9IG5ldyBVUkwoJy9hdXRoL2xvZ2luJywgcmVxdWVzdC51cmwpO1xuICBsb2dpblVybC5zZWFyY2hQYXJhbXMuc2V0KCdyZXR1cm5UbycsIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZSk7XG4gIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobG9naW5VcmwpO1xufVxuXG4vKipcbiAqIFJlZGlyZWN0cyB0byB1bmF1dGhvcml6ZWQgcGFnZSAoZm9yIHBhZ2UgcmVxdWVzdHMpLlxuICogUmV0dXJucyBKU09OIGVycm9yIGZvciBBUEkgcmVxdWVzdHMuXG4gKi9cbmZ1bmN0aW9uIHJlZGlyZWN0VG9VbmF1dGhvcml6ZWQocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBOZXh0UmVzcG9uc2Uge1xuICAvLyBGb3IgQVBJIHJvdXRlcywgcmV0dXJuIEpTT04gZXJyb3IgaW5zdGVhZCBvZiByZWRpcmVjdFxuICBpZiAocmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9hcGkvJykpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogeyBjb2RlOiAnRk9SQklEREVOJywgbWVzc2FnZTogJ0luc3VmZmljaWVudCBwZXJtaXNzaW9ucycgfSB9LFxuICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgKTtcbiAgfVxuICBcbiAgY29uc3QgdW5hdXRob3JpemVkVXJsID0gbmV3IFVSTCgnL2F1dGgvdW5hdXRob3JpemVkJywgcmVxdWVzdC51cmwpO1xuICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KHVuYXV0aG9yaXplZFVybCk7XG59XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIG1hdGNoZXI6IFtcbiAgICAvKlxuICAgICAqIE1hdGNoIGFsbCByZXF1ZXN0IHBhdGhzIGV4Y2VwdDpcbiAgICAgKiAtIF9uZXh0L3N0YXRpYyAoc3RhdGljIGZpbGVzKVxuICAgICAqIC0gX25leHQvaW1hZ2UgKGltYWdlIG9wdGltaXphdGlvbiBmaWxlcylcbiAgICAgKiAtIGZhdmljb24uaWNvIChmYXZpY29uIGZpbGUpXG4gICAgICogLSBwdWJsaWMgZm9sZGVyXG4gICAgICovXG4gICAgJy8oKD8hX25leHQvc3RhdGljfF9uZXh0L2ltYWdlfGZhdmljb24uaWNvfC4qXFxcXC4oPzpzdmd8cG5nfGpwZ3xqcGVnfGdpZnx3ZWJwKSQpLiopJyxcbiAgXSxcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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QUFBLEVBQU87UUFBRW1DLElBQUEsRUFBTTtRQUFnQmQsT0FBQSxFQUFTO01BQTBCO0lBQUUsR0FDdEY7TUFBRWUsTUFBQSxFQUFRO0lBQUk7RUFFbEI7RUFBQTtFQUFBO0lBQUF4RCxjQUFBLEdBQUFPLENBQUE7RUFBQTtFQUVBLE1BQU1rRCxRQUFBO0VBQUE7RUFBQSxDQUFBekQsY0FBQSxHQUFBRSxDQUFBLFFBQVcsSUFBSXdELEdBQUEsQ0FBSSxlQUFldEQsT0FBQSxDQUFRdUQsR0FBRztFQUFBO0VBQUEzRCxjQUFBLEdBQUFFLENBQUE7RUFDbkR1RCxRQUFBLENBQVNHLFlBQVksQ0FBQ3pCLEdBQUcsQ0FBQyxZQUFZL0IsT0FBQSxDQUFRRSxPQUFPLENBQUNELFFBQVE7RUFBQTtFQUFBTCxjQUFBLEdBQUFFLENBQUE7RUFDOUQsT0FBT08sT0FBQSxDQUFBQyxZQUFZLENBQUNtRCxRQUFRLENBQUNKLFFBQUE7QUFDL0I7QUFFQTs7OztBQUlBLFNBQVNSLHVCQUF1QjdDLE9BQW9CO0VBQUE7RUFBQUosY0FBQSxHQUFBQyxDQUFBO0VBQUFELGNBQUEsR0FBQUUsQ0FBQTtFQUNsRDtFQUNBLElBQUlFLE9BQUEsQ0FBUUUsT0FBTyxDQUFDRCxRQUFRLENBQUNHLFVBQVUsQ0FBQyxVQUFVO0lBQUE7SUFBQVIsY0FBQSxHQUFBTyxDQUFBO0lBQUFQLGNBQUEsR0FBQUUsQ0FBQTtJQUNoRCxPQUFPTyxPQUFBLENBQUFDLFlBQVksQ0FBQzJDLElBQUksQ0FDdEI7TUFBRUMsT0FBQSxFQUFTO01BQU9sQyxLQUFBLEVBQU87UUFBRW1DLElBQUEsRUFBTTtRQUFhZCxPQUFBLEVBQVM7TUFBMkI7SUFBRSxHQUNwRjtNQUFFZSxNQUFBLEVBQVE7SUFBSTtFQUVsQjtFQUFBO0VBQUE7SUFBQXhELGNBQUEsR0FBQU8sQ0FBQTtFQUFBO0VBRUEsTUFBTXVELGVBQUE7RUFBQTtFQUFBLENBQUE5RCxjQUFBLEdBQUFFLENBQUEsUUFBa0IsSUFBSXdELEdBQUEsQ0FBSSxzQkFBc0J0RCxPQUFBLENBQVF1RCxHQUFHO0VBQUE7RUFBQTNELGNBQUEsR0FBQUUsQ0FBQTtFQUNqRSxPQUFPTyxPQUFBLENBQUFDLFlBQVksQ0FBQ21ELFFBQVEsQ0FBQ0MsZUFBQTtBQUMvQjtBQUVPLE1BQU0vRCxNQUFBO0FBQUE7QUFBQSxDQUFBQyxjQUFBLEdBQUFFLENBQUEsUUFBUztFQUNwQjZELE9BQUEsRUFBUztFQUNQOzs7Ozs7O0VBT0E7QUFFSiIsImlnbm9yZUxpc3QiOltdfQ==