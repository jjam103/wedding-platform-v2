d786dc41a935db05578cc967fab64bdd
"use strict";
// Mock DataTable components
jest.mock('@/components/ui/DataTable', ()=>({
        DataTable: ({ data, columns, loading, onRowClick })=>{
            if (loading) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "Loading..."
            });
            if (data.length === 0) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "No items found"
            });
            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "data-table",
                children: data.map((item, index)=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        "data-testid": `location-row-${item.id}`,
                        onClick: ()=>onRowClick && onRowClick(item),
                        style: {
                            cursor: onRowClick ? 'pointer' : 'default'
                        },
                        children: columns.map((col)=>{
                            const value = item[col.key];
                            const displayValue = col.render ? col.render(value, item) : value;
                            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                "data-testid": `${col.key}-${item.id}`,
                                children: displayValue
                            }, col.key);
                        })
                    }, index))
            });
        }
    }));
jest.mock('@/components/ui/DataTableWithSuspense', ()=>({
        DataTableWithSuspense: ({ data, columns, loading, onRowClick })=>{
            if (loading) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "Loading..."
            });
            if (data.length === 0) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "No items found"
            });
            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "data-table",
                children: data.map((item, index)=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        "data-testid": `location-row-${item.id}`,
                        onClick: ()=>onRowClick && onRowClick(item),
                        style: {
                            cursor: onRowClick ? 'pointer' : 'default'
                        },
                        children: columns.map((col)=>{
                            const value = item[col.key];
                            const displayValue = col.render ? col.render(value, item) : value;
                            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                "data-testid": `${col.key}-${item.id}`,
                                children: displayValue
                            }, col.key);
                        })
                    }, index))
            });
        }
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _page = /*#__PURE__*/ _interop_require_default(require("./page"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock fetch
global.fetch = jest.fn();
describe('LocationManagementPage', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    const mockLocations = [
        {
            id: 'loc-1',
            name: 'Costa Rica',
            parentLocationId: null,
            address: null,
            coordinates: null,
            description: null,
            createdAt: '2025-01-01T00:00:00Z',
            children: [
                {
                    id: 'loc-2',
                    name: 'Guanacaste',
                    parentLocationId: 'loc-1',
                    address: null,
                    coordinates: null,
                    description: null,
                    createdAt: '2025-01-01T00:00:00Z',
                    children: [
                        {
                            id: 'loc-3',
                            name: 'Tamarindo',
                            parentLocationId: 'loc-2',
                            address: 'Tamarindo, Guanacaste',
                            coordinates: null,
                            description: null,
                            createdAt: '2025-01-01T00:00:00Z',
                            children: []
                        }
                    ]
                }
            ]
        }
    ];
    describe('Tree View Rendering', ()=>{
        it('should render location hierarchy', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockLocations
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            // Wait for the location name to appear (it's rendered directly in the tree)
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Costa Rica')).toBeInTheDocument();
            }, {
                timeout: 5000
            });
        });
        it('should expand and collapse nodes', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockLocations
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getAllByText('Costa Rica').length).toBeGreaterThan(0);
            });
            // Click expand button
            const expandButton = _react.screen.getByLabelText('Expand');
            _react.fireEvent.click(expandButton);
            // Child should now be visible in tree (not just in select)
            await (0, _react.waitFor)(()=>{
                const guanacasteElements = _react.screen.getAllByText('Guanacaste');
                expect(guanacasteElements.length).toBeGreaterThan(1); // In select and tree
            });
            // Click collapse button
            const collapseButton = _react.screen.getByLabelText('Collapse');
            _react.fireEvent.click(collapseButton);
            // Child should be hidden from tree (but still in select)
            await (0, _react.waitFor)(()=>{
                const guanacasteElements = _react.screen.getAllByText('Guanacaste');
                expect(guanacasteElements.length).toBe(1); // Only in select
            });
        });
        it('should display location addresses', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockLocations
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            // Expand to show Tamarindo
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getAllByText('Costa Rica').length).toBeGreaterThan(0);
            });
            const expandButtons = _react.screen.getAllByLabelText('Expand');
            _react.fireEvent.click(expandButtons[0]); // Expand Costa Rica
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getAllByText('Guanacaste').length).toBeGreaterThan(1);
            });
            _react.fireEvent.click(_react.screen.getAllByLabelText('Expand')[0]); // Expand Guanacaste
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo, Guanacaste')).toBeInTheDocument();
            });
        });
    });
    describe('Location Creation', ()=>{
        it('should open form when Add Location clicked', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: []
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('+ Add Location')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByText('+ Add Location'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Add New Location')).toBeInTheDocument();
            });
        });
        it('should create location successfully', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: []
                    })
            }).mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'new-loc',
                            name: 'New Location',
                            parentLocationId: null,
                            address: null,
                            coordinates: null,
                            description: null,
                            createdAt: '2025-01-01T00:00:00Z'
                        }
                    })
            }).mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: []
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('+ Add Location')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByText('+ Add Location'));
            // Fill form
            const nameInput = _react.screen.getByPlaceholderText('e.g., Tamarindo Beach');
            _react.fireEvent.change(nameInput, {
                target: {
                    value: 'New Location'
                }
            });
            // Submit form
            const submitButton = _react.screen.getByRole('button', {
                name: /submit|create/i
            });
            _react.fireEvent.click(submitButton);
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/admin/locations', expect.objectContaining({
                    method: 'POST',
                    body: JSON.stringify({
                        name: 'New Location'
                    })
                }));
            });
        });
    });
    describe('Parent Assignment', ()=>{
        it('should allow selecting parent location', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockLocations
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('+ Add Location')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByText('+ Add Location'));
            // Parent selector should be available
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Parent Location')).toBeInTheDocument();
            });
        });
    });
    describe('Circular Reference Prevention', ()=>{
        it('should prevent creating circular reference', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockLocations
                    })
            }).mockResolvedValueOnce({
                json: async ()=>({
                        success: false,
                        error: {
                            code: 'CIRCULAR_REFERENCE',
                            message: 'This would create a circular reference'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getAllByText('Costa Rica').length).toBeGreaterThan(0);
            });
            // Expand and edit
            const expandButton = _react.screen.getByLabelText('Expand');
            _react.fireEvent.click(expandButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getAllByText('Guanacaste').length).toBeGreaterThan(1);
            });
            const editButtons = _react.screen.getAllByText('Edit');
            _react.fireEvent.click(editButtons[1]); // Edit Guanacaste
            // Form should open - just verify it's there
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Edit Location')).toBeInTheDocument();
            });
        });
    });
    describe('Search Functionality', ()=>{
        it.skip('should filter locations by search query', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockLocations
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getAllByText('Costa Rica').length).toBeGreaterThan(0);
            });
            // Expand to show all locations
            const expandButtons = _react.screen.getAllByLabelText('Expand');
            _react.fireEvent.click(expandButtons[0]);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getAllByText('Guanacaste').length).toBeGreaterThan(1);
            });
            // Search for Tamarindo
            const searchInput = _react.screen.getByPlaceholderText('Search locations...');
            _react.fireEvent.change(searchInput, {
                target: {
                    value: 'Tamarindo'
                }
            });
            // Tamarindo should be visible
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo')).toBeInTheDocument();
            });
        });
        it('should show no results message when search has no matches', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockLocations
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getAllByText('Costa Rica').length).toBeGreaterThan(0);
            }, {
                timeout: 3000
            });
            const searchInput = _react.screen.getByPlaceholderText('Search locations...');
            _react.fireEvent.change(searchInput, {
                target: {
                    value: 'NonexistentLocation'
                }
            });
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('No locations match your search')).toBeInTheDocument();
            }, {
                timeout: 3000
            });
        });
    });
    describe('Location Deletion', ()=>{
        it('should delete location with confirmation', async ()=>{
            global.confirm = jest.fn(()=>true);
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockLocations
                    })
            }).mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: undefined
                    })
            }).mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: []
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getAllByText('Costa Rica').length).toBeGreaterThan(0);
            });
            const deleteButton = _react.screen.getByText('Delete');
            _react.fireEvent.click(deleteButton);
            expect(global.confirm).toHaveBeenCalledWith(expect.stringContaining('Are you sure'));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('/api/admin/locations/'), expect.objectContaining({
                    method: 'DELETE'
                }));
            });
        });
        it.skip('should not delete if confirmation cancelled', async ()=>{
            global.confirm = jest.fn(()=>false);
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockLocations
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getAllByText('Costa Rica').length).toBeGreaterThan(0);
            });
            const deleteButton = _react.screen.getByText('Delete');
            _react.fireEvent.click(deleteButton);
            expect(global.confirm).toHaveBeenCalled();
            expect(global.fetch).toHaveBeenCalledTimes(1); // Only initial load
        });
    });
    describe('Error Handling', ()=>{
        it.skip('should display error message on load failure', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: false,
                        error: {
                            code: 'DATABASE_ERROR',
                            message: 'Failed to load locations'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            // Wait for loading to complete
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Loading locations...')).not.toBeInTheDocument();
            });
            // Error should be displayed
            expect(_react.screen.getByText(/Failed to load locations/i)).toBeInTheDocument();
        });
        it('should show empty state when no locations', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: []
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('No locations yet. Add your first location above.')).toBeInTheDocument();
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FkbWluL2xvY2F0aW9ucy9wYWdlLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCBmaXJlRXZlbnQsIHdhaXRGb3IgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCBMb2NhdGlvbk1hbmFnZW1lbnRQYWdlIGZyb20gJy4vcGFnZSc7XG5cbi8vIE1vY2sgRGF0YVRhYmxlIGNvbXBvbmVudHNcbmplc3QubW9jaygnQC9jb21wb25lbnRzL3VpL0RhdGFUYWJsZScsICgpID0+ICh7XG4gIERhdGFUYWJsZTogKHsgZGF0YSwgY29sdW1ucywgbG9hZGluZywgb25Sb3dDbGljayB9OiBhbnkpID0+IHtcbiAgICBpZiAobG9hZGluZykgcmV0dXJuIDxkaXY+TG9hZGluZy4uLjwvZGl2PjtcbiAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHJldHVybiA8ZGl2Pk5vIGl0ZW1zIGZvdW5kPC9kaXY+O1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiZGF0YS10YWJsZVwiPlxuICAgICAgICB7ZGF0YS5tYXAoKGl0ZW06IGFueSwgaW5kZXg6IG51bWJlcikgPT4gKFxuICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICBrZXk9e2luZGV4fSBcbiAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgbG9jYXRpb24tcm93LSR7aXRlbS5pZH1gfVxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gb25Sb3dDbGljayAmJiBvblJvd0NsaWNrKGl0ZW0pfVxuICAgICAgICAgICAgc3R5bGU9e3sgY3Vyc29yOiBvblJvd0NsaWNrID8gJ3BvaW50ZXInIDogJ2RlZmF1bHQnIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2NvbHVtbnMubWFwKChjb2w6IGFueSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGl0ZW1bY29sLmtleV07XG4gICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlWYWx1ZSA9IGNvbC5yZW5kZXIgPyBjb2wucmVuZGVyKHZhbHVlLCBpdGVtKSA6IHZhbHVlO1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYga2V5PXtjb2wua2V5fSBkYXRhLXRlc3RpZD17YCR7Y29sLmtleX0tJHtpdGVtLmlkfWB9PlxuICAgICAgICAgICAgICAgICAge2Rpc3BsYXlWYWx1ZX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApKX1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH0sXG59KSk7XG5cbmplc3QubW9jaygnQC9jb21wb25lbnRzL3VpL0RhdGFUYWJsZVdpdGhTdXNwZW5zZScsICgpID0+ICh7XG4gIERhdGFUYWJsZVdpdGhTdXNwZW5zZTogKHsgZGF0YSwgY29sdW1ucywgbG9hZGluZywgb25Sb3dDbGljayB9OiBhbnkpID0+IHtcbiAgICBpZiAobG9hZGluZykgcmV0dXJuIDxkaXY+TG9hZGluZy4uLjwvZGl2PjtcbiAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHJldHVybiA8ZGl2Pk5vIGl0ZW1zIGZvdW5kPC9kaXY+O1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiZGF0YS10YWJsZVwiPlxuICAgICAgICB7ZGF0YS5tYXAoKGl0ZW06IGFueSwgaW5kZXg6IG51bWJlcikgPT4gKFxuICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICBrZXk9e2luZGV4fSBcbiAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgbG9jYXRpb24tcm93LSR7aXRlbS5pZH1gfVxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gb25Sb3dDbGljayAmJiBvblJvd0NsaWNrKGl0ZW0pfVxuICAgICAgICAgICAgc3R5bGU9e3sgY3Vyc29yOiBvblJvd0NsaWNrID8gJ3BvaW50ZXInIDogJ2RlZmF1bHQnIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2NvbHVtbnMubWFwKChjb2w6IGFueSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGl0ZW1bY29sLmtleV07XG4gICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlWYWx1ZSA9IGNvbC5yZW5kZXIgPyBjb2wucmVuZGVyKHZhbHVlLCBpdGVtKSA6IHZhbHVlO1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYga2V5PXtjb2wua2V5fSBkYXRhLXRlc3RpZD17YCR7Y29sLmtleX0tJHtpdGVtLmlkfWB9PlxuICAgICAgICAgICAgICAgICAge2Rpc3BsYXlWYWx1ZX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApKX1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH0sXG59KSk7XG5cbi8vIE1vY2sgZmV0Y2hcbmdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKTtcblxuZGVzY3JpYmUoJ0xvY2F0aW9uTWFuYWdlbWVudFBhZ2UnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBjb25zdCBtb2NrTG9jYXRpb25zID0gW1xuICAgIHtcbiAgICAgIGlkOiAnbG9jLTEnLFxuICAgICAgbmFtZTogJ0Nvc3RhIFJpY2EnLFxuICAgICAgcGFyZW50TG9jYXRpb25JZDogbnVsbCxcbiAgICAgIGFkZHJlc3M6IG51bGwsXG4gICAgICBjb29yZGluYXRlczogbnVsbCxcbiAgICAgIGRlc2NyaXB0aW9uOiBudWxsLFxuICAgICAgY3JlYXRlZEF0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnbG9jLTInLFxuICAgICAgICAgIG5hbWU6ICdHdWFuYWNhc3RlJyxcbiAgICAgICAgICBwYXJlbnRMb2NhdGlvbklkOiAnbG9jLTEnLFxuICAgICAgICAgIGFkZHJlc3M6IG51bGwsXG4gICAgICAgICAgY29vcmRpbmF0ZXM6IG51bGwsXG4gICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsXG4gICAgICAgICAgY3JlYXRlZEF0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAnbG9jLTMnLFxuICAgICAgICAgICAgICBuYW1lOiAnVGFtYXJpbmRvJyxcbiAgICAgICAgICAgICAgcGFyZW50TG9jYXRpb25JZDogJ2xvYy0yJyxcbiAgICAgICAgICAgICAgYWRkcmVzczogJ1RhbWFyaW5kbywgR3VhbmFjYXN0ZScsXG4gICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBudWxsLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCxcbiAgICAgICAgICAgICAgY3JlYXRlZEF0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogW10sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0sXG4gIF07XG5cbiAgZGVzY3JpYmUoJ1RyZWUgVmlldyBSZW5kZXJpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgbG9jYXRpb24gaGllcmFyY2h5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tMb2NhdGlvbnMgfSksXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxMb2NhdGlvbk1hbmFnZW1lbnRQYWdlIC8+KTtcblxuICAgICAgLy8gV2FpdCBmb3IgdGhlIGxvY2F0aW9uIG5hbWUgdG8gYXBwZWFyIChpdCdzIHJlbmRlcmVkIGRpcmVjdGx5IGluIHRoZSB0cmVlKVxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDb3N0YSBSaWNhJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9LCB7IHRpbWVvdXQ6IDUwMDAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGV4cGFuZCBhbmQgY29sbGFwc2Ugbm9kZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja0xvY2F0aW9ucyB9KSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPExvY2F0aW9uTWFuYWdlbWVudFBhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRBbGxCeVRleHQoJ0Nvc3RhIFJpY2EnKS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBleHBhbmQgYnV0dG9uXG4gICAgICBjb25zdCBleHBhbmRCdXR0b24gPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ0V4cGFuZCcpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGV4cGFuZEJ1dHRvbik7XG5cbiAgICAgIC8vIENoaWxkIHNob3VsZCBub3cgYmUgdmlzaWJsZSBpbiB0cmVlIChub3QganVzdCBpbiBzZWxlY3QpXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgZ3VhbmFjYXN0ZUVsZW1lbnRzID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgnR3VhbmFjYXN0ZScpO1xuICAgICAgICBleHBlY3QoZ3VhbmFjYXN0ZUVsZW1lbnRzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDEpOyAvLyBJbiBzZWxlY3QgYW5kIHRyZWVcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBjb2xsYXBzZSBidXR0b25cbiAgICAgIGNvbnN0IGNvbGxhcHNlQnV0dG9uID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdDb2xsYXBzZScpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGNvbGxhcHNlQnV0dG9uKTtcblxuICAgICAgLy8gQ2hpbGQgc2hvdWxkIGJlIGhpZGRlbiBmcm9tIHRyZWUgKGJ1dCBzdGlsbCBpbiBzZWxlY3QpXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgZ3VhbmFjYXN0ZUVsZW1lbnRzID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgnR3VhbmFjYXN0ZScpO1xuICAgICAgICBleHBlY3QoZ3VhbmFjYXN0ZUVsZW1lbnRzLmxlbmd0aCkudG9CZSgxKTsgLy8gT25seSBpbiBzZWxlY3RcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGxvY2F0aW9uIGFkZHJlc3NlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrTG9jYXRpb25zIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8TG9jYXRpb25NYW5hZ2VtZW50UGFnZSAvPik7XG5cbiAgICAgIC8vIEV4cGFuZCB0byBzaG93IFRhbWFyaW5kb1xuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QWxsQnlUZXh0KCdDb3N0YSBSaWNhJykubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZXhwYW5kQnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeUxhYmVsVGV4dCgnRXhwYW5kJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soZXhwYW5kQnV0dG9uc1swXSk7IC8vIEV4cGFuZCBDb3N0YSBSaWNhXG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEFsbEJ5VGV4dCgnR3VhbmFjYXN0ZScpLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDEpO1xuICAgICAgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QWxsQnlMYWJlbFRleHQoJ0V4cGFuZCcpWzBdKTsgLy8gRXhwYW5kIEd1YW5hY2FzdGVcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdUYW1hcmluZG8sIEd1YW5hY2FzdGUnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTG9jYXRpb24gQ3JlYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBvcGVuIGZvcm0gd2hlbiBBZGQgTG9jYXRpb24gY2xpY2tlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBbXSB9KSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPExvY2F0aW9uTWFuYWdlbWVudFBhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJysgQWRkIExvY2F0aW9uJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJysgQWRkIExvY2F0aW9uJykpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0FkZCBOZXcgTG9jYXRpb24nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgbG9jYXRpb24gc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IFtdIH0pLFxuICAgICAgICB9KVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgaWQ6ICduZXctbG9jJyxcbiAgICAgICAgICAgICAgbmFtZTogJ05ldyBMb2NhdGlvbicsXG4gICAgICAgICAgICAgIHBhcmVudExvY2F0aW9uSWQ6IG51bGwsXG4gICAgICAgICAgICAgIGFkZHJlc3M6IG51bGwsXG4gICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBudWxsLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCxcbiAgICAgICAgICAgICAgY3JlYXRlZEF0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogW10gfSksXG4gICAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPExvY2F0aW9uTWFuYWdlbWVudFBhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJysgQWRkIExvY2F0aW9uJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJysgQWRkIExvY2F0aW9uJykpO1xuXG4gICAgICAvLyBGaWxsIGZvcm1cbiAgICAgIGNvbnN0IG5hbWVJbnB1dCA9IHNjcmVlbi5nZXRCeVBsYWNlaG9sZGVyVGV4dCgnZS5nLiwgVGFtYXJpbmRvIEJlYWNoJyk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKG5hbWVJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdOZXcgTG9jYXRpb24nIH0gfSk7XG5cbiAgICAgIC8vIFN1Ym1pdCBmb3JtXG4gICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9zdWJtaXR8Y3JlYXRlL2kgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soc3VibWl0QnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgICcvYXBpL2FkbWluL2xvY2F0aW9ucycsXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWU6ICdOZXcgTG9jYXRpb24nIH0pLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BhcmVudCBBc3NpZ25tZW50JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYWxsb3cgc2VsZWN0aW5nIHBhcmVudCBsb2NhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrTG9jYXRpb25zIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8TG9jYXRpb25NYW5hZ2VtZW50UGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgTG9jYXRpb24nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgTG9jYXRpb24nKSk7XG5cbiAgICAgIC8vIFBhcmVudCBzZWxlY3RvciBzaG91bGQgYmUgYXZhaWxhYmxlXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1BhcmVudCBMb2NhdGlvbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDaXJjdWxhciBSZWZlcmVuY2UgUHJldmVudGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHByZXZlbnQgY3JlYXRpbmcgY2lyY3VsYXIgcmVmZXJlbmNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tMb2NhdGlvbnMgfSksXG4gICAgICAgIH0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICAgIGNvZGU6ICdDSVJDVUxBUl9SRUZFUkVOQ0UnLFxuICAgICAgICAgICAgICBtZXNzYWdlOiAnVGhpcyB3b3VsZCBjcmVhdGUgYSBjaXJjdWxhciByZWZlcmVuY2UnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8TG9jYXRpb25NYW5hZ2VtZW50UGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEFsbEJ5VGV4dCgnQ29zdGEgUmljYScpLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEV4cGFuZCBhbmQgZWRpdFxuICAgICAgY29uc3QgZXhwYW5kQnV0dG9uID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdFeHBhbmQnKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhleHBhbmRCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRBbGxCeVRleHQoJ0d1YW5hY2FzdGUnKS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigxKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBlZGl0QnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoJ0VkaXQnKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhlZGl0QnV0dG9uc1sxXSk7IC8vIEVkaXQgR3VhbmFjYXN0ZVxuXG4gICAgICAvLyBGb3JtIHNob3VsZCBvcGVuIC0ganVzdCB2ZXJpZnkgaXQncyB0aGVyZVxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdFZGl0IExvY2F0aW9uJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NlYXJjaCBGdW5jdGlvbmFsaXR5JywgKCkgPT4ge1xuICAgIGl0LnNraXAoJ3Nob3VsZCBmaWx0ZXIgbG9jYXRpb25zIGJ5IHNlYXJjaCBxdWVyeScsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrTG9jYXRpb25zIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8TG9jYXRpb25NYW5hZ2VtZW50UGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEFsbEJ5VGV4dCgnQ29zdGEgUmljYScpLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEV4cGFuZCB0byBzaG93IGFsbCBsb2NhdGlvbnNcbiAgICAgIGNvbnN0IGV4cGFuZEJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlMYWJlbFRleHQoJ0V4cGFuZCcpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGV4cGFuZEJ1dHRvbnNbMF0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRBbGxCeVRleHQoJ0d1YW5hY2FzdGUnKS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigxKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTZWFyY2ggZm9yIFRhbWFyaW5kb1xuICAgICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoJ1NlYXJjaCBsb2NhdGlvbnMuLi4nKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2Uoc2VhcmNoSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnVGFtYXJpbmRvJyB9IH0pO1xuXG4gICAgICAvLyBUYW1hcmluZG8gc2hvdWxkIGJlIHZpc2libGVcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVGFtYXJpbmRvJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2hvdyBubyByZXN1bHRzIG1lc3NhZ2Ugd2hlbiBzZWFyY2ggaGFzIG5vIG1hdGNoZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja0xvY2F0aW9ucyB9KSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPExvY2F0aW9uTWFuYWdlbWVudFBhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRBbGxCeVRleHQoJ0Nvc3RhIFJpY2EnKS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIH0sIHsgdGltZW91dDogMzAwMCB9KTtcblxuICAgICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoJ1NlYXJjaCBsb2NhdGlvbnMuLi4nKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2Uoc2VhcmNoSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnTm9uZXhpc3RlbnRMb2NhdGlvbicgfSB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdObyBsb2NhdGlvbnMgbWF0Y2ggeW91ciBzZWFyY2gnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0sIHsgdGltZW91dDogMzAwMCB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0xvY2F0aW9uIERlbGV0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGVsZXRlIGxvY2F0aW9uIHdpdGggY29uZmlybWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZ2xvYmFsLmNvbmZpcm0gPSBqZXN0LmZuKCgpID0+IHRydWUpO1xuXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaylcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja0xvY2F0aW9ucyB9KSxcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogdW5kZWZpbmVkIH0pLFxuICAgICAgICB9KVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBbXSB9KSxcbiAgICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8TG9jYXRpb25NYW5hZ2VtZW50UGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEFsbEJ5VGV4dCgnQ29zdGEgUmljYScpLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ0RlbGV0ZScpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGRlbGV0ZUJ1dHRvbik7XG5cbiAgICAgIGV4cGVjdChnbG9iYWwuY29uZmlybSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdBcmUgeW91IHN1cmUnKVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCcvYXBpL2FkbWluL2xvY2F0aW9ucy8nKSxcbiAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7IG1ldGhvZDogJ0RFTEVURScgfSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQuc2tpcCgnc2hvdWxkIG5vdCBkZWxldGUgaWYgY29uZmlybWF0aW9uIGNhbmNlbGxlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGdsb2JhbC5jb25maXJtID0gamVzdC5mbigoKSA9PiBmYWxzZSk7XG5cbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrTG9jYXRpb25zIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8TG9jYXRpb25NYW5hZ2VtZW50UGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEFsbEJ5VGV4dCgnQ29zdGEgUmljYScpLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ0RlbGV0ZScpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGRlbGV0ZUJ1dHRvbik7XG5cbiAgICAgIGV4cGVjdChnbG9iYWwuY29uZmlybSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpOyAvLyBPbmx5IGluaXRpYWwgbG9hZFxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQuc2tpcCgnc2hvdWxkIGRpc3BsYXkgZXJyb3IgbWVzc2FnZSBvbiBsb2FkIGZhaWx1cmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogeyBjb2RlOiAnREFUQUJBU0VfRVJST1InLCBtZXNzYWdlOiAnRmFpbGVkIHRvIGxvYWQgbG9jYXRpb25zJyB9LFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPExvY2F0aW9uTWFuYWdlbWVudFBhZ2UgLz4pO1xuXG4gICAgICAvLyBXYWl0IGZvciBsb2FkaW5nIHRvIGNvbXBsZXRlXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnTG9hZGluZyBsb2NhdGlvbnMuLi4nKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gRXJyb3Igc2hvdWxkIGJlIGRpc3BsYXllZFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL0ZhaWxlZCB0byBsb2FkIGxvY2F0aW9ucy9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2hvdyBlbXB0eSBzdGF0ZSB3aGVuIG5vIGxvY2F0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBbXSB9KSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPExvY2F0aW9uTWFuYWdlbWVudFBhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KFxuICAgICAgICAgIHNjcmVlbi5nZXRCeVRleHQoJ05vIGxvY2F0aW9ucyB5ZXQuIEFkZCB5b3VyIGZpcnN0IGxvY2F0aW9uIGFib3ZlLicpXG4gICAgICAgICkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwiRGF0YVRhYmxlIiwiZGF0YSIsImNvbHVtbnMiLCJsb2FkaW5nIiwib25Sb3dDbGljayIsImRpdiIsImxlbmd0aCIsImRhdGEtdGVzdGlkIiwibWFwIiwiaXRlbSIsImluZGV4IiwiaWQiLCJvbkNsaWNrIiwic3R5bGUiLCJjdXJzb3IiLCJjb2wiLCJ2YWx1ZSIsImtleSIsImRpc3BsYXlWYWx1ZSIsInJlbmRlciIsIkRhdGFUYWJsZVdpdGhTdXNwZW5zZSIsImdsb2JhbCIsImZldGNoIiwiZm4iLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwibW9ja0xvY2F0aW9ucyIsIm5hbWUiLCJwYXJlbnRMb2NhdGlvbklkIiwiYWRkcmVzcyIsImNvb3JkaW5hdGVzIiwiZGVzY3JpcHRpb24iLCJjcmVhdGVkQXQiLCJjaGlsZHJlbiIsIml0IiwibW9ja1Jlc29sdmVkVmFsdWVPbmNlIiwianNvbiIsInN1Y2Nlc3MiLCJMb2NhdGlvbk1hbmFnZW1lbnRQYWdlIiwid2FpdEZvciIsImV4cGVjdCIsInNjcmVlbiIsImdldEJ5VGV4dCIsInRvQmVJblRoZURvY3VtZW50IiwidGltZW91dCIsImdldEFsbEJ5VGV4dCIsInRvQmVHcmVhdGVyVGhhbiIsImV4cGFuZEJ1dHRvbiIsImdldEJ5TGFiZWxUZXh0IiwiZmlyZUV2ZW50IiwiY2xpY2siLCJndWFuYWNhc3RlRWxlbWVudHMiLCJjb2xsYXBzZUJ1dHRvbiIsInRvQmUiLCJleHBhbmRCdXR0b25zIiwiZ2V0QWxsQnlMYWJlbFRleHQiLCJuYW1lSW5wdXQiLCJnZXRCeVBsYWNlaG9sZGVyVGV4dCIsImNoYW5nZSIsInRhcmdldCIsInN1Ym1pdEJ1dHRvbiIsImdldEJ5Um9sZSIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwib2JqZWN0Q29udGFpbmluZyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsImVkaXRCdXR0b25zIiwic2tpcCIsInNlYXJjaElucHV0IiwiY29uZmlybSIsInVuZGVmaW5lZCIsImRlbGV0ZUJ1dHRvbiIsInN0cmluZ0NvbnRhaW5pbmciLCJ0b0hhdmVCZWVuQ2FsbGVkIiwidG9IYXZlQmVlbkNhbGxlZFRpbWVzIiwicXVlcnlCeVRleHQiLCJub3QiXSwibWFwcGluZ3MiOiI7QUFHQSw0QkFBNEI7QUFDNUJBLEtBQUtDLElBQUksQ0FBQyw2QkFBNkIsSUFBTyxDQUFBO1FBQzVDQyxXQUFXLENBQUMsRUFBRUMsSUFBSSxFQUFFQyxPQUFPLEVBQUVDLE9BQU8sRUFBRUMsVUFBVSxFQUFPO1lBQ3JELElBQUlELFNBQVMscUJBQU8scUJBQUNFOzBCQUFJOztZQUN6QixJQUFJSixLQUFLSyxNQUFNLEtBQUssR0FBRyxxQkFBTyxxQkFBQ0Q7MEJBQUk7O1lBQ25DLHFCQUNFLHFCQUFDQTtnQkFBSUUsZUFBWTswQkFDZE4sS0FBS08sR0FBRyxDQUFDLENBQUNDLE1BQVdDLHNCQUNwQixxQkFBQ0w7d0JBRUNFLGVBQWEsQ0FBQyxhQUFhLEVBQUVFLEtBQUtFLEVBQUUsRUFBRTt3QkFDdENDLFNBQVMsSUFBTVIsY0FBY0EsV0FBV0s7d0JBQ3hDSSxPQUFPOzRCQUFFQyxRQUFRVixhQUFhLFlBQVk7d0JBQVU7a0NBRW5ERixRQUFRTSxHQUFHLENBQUMsQ0FBQ087NEJBQ1osTUFBTUMsUUFBUVAsSUFBSSxDQUFDTSxJQUFJRSxHQUFHLENBQUM7NEJBQzNCLE1BQU1DLGVBQWVILElBQUlJLE1BQU0sR0FBR0osSUFBSUksTUFBTSxDQUFDSCxPQUFPUCxRQUFRTzs0QkFDNUQscUJBQ0UscUJBQUNYO2dDQUFrQkUsZUFBYSxHQUFHUSxJQUFJRSxHQUFHLENBQUMsQ0FBQyxFQUFFUixLQUFLRSxFQUFFLEVBQUU7MENBQ3BETzsrQkFET0gsSUFBSUUsR0FBRzt3QkFJckI7dUJBYktQOztRQWtCZjtJQUNGLENBQUE7QUFFQVosS0FBS0MsSUFBSSxDQUFDLHlDQUF5QyxJQUFPLENBQUE7UUFDeERxQix1QkFBdUIsQ0FBQyxFQUFFbkIsSUFBSSxFQUFFQyxPQUFPLEVBQUVDLE9BQU8sRUFBRUMsVUFBVSxFQUFPO1lBQ2pFLElBQUlELFNBQVMscUJBQU8scUJBQUNFOzBCQUFJOztZQUN6QixJQUFJSixLQUFLSyxNQUFNLEtBQUssR0FBRyxxQkFBTyxxQkFBQ0Q7MEJBQUk7O1lBQ25DLHFCQUNFLHFCQUFDQTtnQkFBSUUsZUFBWTswQkFDZE4sS0FBS08sR0FBRyxDQUFDLENBQUNDLE1BQVdDLHNCQUNwQixxQkFBQ0w7d0JBRUNFLGVBQWEsQ0FBQyxhQUFhLEVBQUVFLEtBQUtFLEVBQUUsRUFBRTt3QkFDdENDLFNBQVMsSUFBTVIsY0FBY0EsV0FBV0s7d0JBQ3hDSSxPQUFPOzRCQUFFQyxRQUFRVixhQUFhLFlBQVk7d0JBQVU7a0NBRW5ERixRQUFRTSxHQUFHLENBQUMsQ0FBQ087NEJBQ1osTUFBTUMsUUFBUVAsSUFBSSxDQUFDTSxJQUFJRSxHQUFHLENBQUM7NEJBQzNCLE1BQU1DLGVBQWVILElBQUlJLE1BQU0sR0FBR0osSUFBSUksTUFBTSxDQUFDSCxPQUFPUCxRQUFRTzs0QkFDNUQscUJBQ0UscUJBQUNYO2dDQUFrQkUsZUFBYSxHQUFHUSxJQUFJRSxHQUFHLENBQUMsQ0FBQyxFQUFFUixLQUFLRSxFQUFFLEVBQUU7MENBQ3BETzsrQkFET0gsSUFBSUUsR0FBRzt3QkFJckI7dUJBYktQOztRQWtCZjtJQUNGLENBQUE7Ozs7O3VCQTVEbUQ7NkRBQ2hCOzs7Ozs7QUE2RG5DLGFBQWE7QUFDYlcsT0FBT0MsS0FBSyxHQUFHeEIsS0FBS3lCLEVBQUU7QUFFdEJDLFNBQVMsMEJBQTBCO0lBQ2pDQyxXQUFXO1FBQ1QzQixLQUFLNEIsYUFBYTtJQUNwQjtJQUVBLE1BQU1DLGdCQUFnQjtRQUNwQjtZQUNFaEIsSUFBSTtZQUNKaUIsTUFBTTtZQUNOQyxrQkFBa0I7WUFDbEJDLFNBQVM7WUFDVEMsYUFBYTtZQUNiQyxhQUFhO1lBQ2JDLFdBQVc7WUFDWEMsVUFBVTtnQkFDUjtvQkFDRXZCLElBQUk7b0JBQ0ppQixNQUFNO29CQUNOQyxrQkFBa0I7b0JBQ2xCQyxTQUFTO29CQUNUQyxhQUFhO29CQUNiQyxhQUFhO29CQUNiQyxXQUFXO29CQUNYQyxVQUFVO3dCQUNSOzRCQUNFdkIsSUFBSTs0QkFDSmlCLE1BQU07NEJBQ05DLGtCQUFrQjs0QkFDbEJDLFNBQVM7NEJBQ1RDLGFBQWE7NEJBQ2JDLGFBQWE7NEJBQ2JDLFdBQVc7NEJBQ1hDLFVBQVUsRUFBRTt3QkFDZDtxQkFDRDtnQkFDSDthQUNEO1FBQ0g7S0FDRDtJQUVEVixTQUFTLHVCQUF1QjtRQUM5QlcsR0FBRyxvQ0FBb0M7WUFDcENkLE9BQU9DLEtBQUssQ0FBZWMscUJBQXFCLENBQUM7Z0JBQ2hEQyxNQUFNLFVBQWEsQ0FBQTt3QkFBRUMsU0FBUzt3QkFBTXJDLE1BQU0wQjtvQkFBYyxDQUFBO1lBQzFEO1lBRUFSLElBQUFBLGFBQU0sZ0JBQUMscUJBQUNvQixhQUFzQjtZQUU5Qiw0RUFBNEU7WUFDNUUsTUFBTUMsSUFBQUEsY0FBTyxFQUFDO2dCQUNaQyxPQUFPQyxhQUFNLENBQUNDLFNBQVMsQ0FBQyxlQUFlQyxpQkFBaUI7WUFDMUQsR0FBRztnQkFBRUMsU0FBUztZQUFLO1FBQ3JCO1FBRUFWLEdBQUcsb0NBQW9DO1lBQ3BDZCxPQUFPQyxLQUFLLENBQWVjLHFCQUFxQixDQUFDO2dCQUNoREMsTUFBTSxVQUFhLENBQUE7d0JBQUVDLFNBQVM7d0JBQU1yQyxNQUFNMEI7b0JBQWMsQ0FBQTtZQUMxRDtZQUVBUixJQUFBQSxhQUFNLGdCQUFDLHFCQUFDb0IsYUFBc0I7WUFFOUIsTUFBTUMsSUFBQUEsY0FBTyxFQUFDO2dCQUNaQyxPQUFPQyxhQUFNLENBQUNJLFlBQVksQ0FBQyxjQUFjeEMsTUFBTSxFQUFFeUMsZUFBZSxDQUFDO1lBQ25FO1lBRUEsc0JBQXNCO1lBQ3RCLE1BQU1DLGVBQWVOLGFBQU0sQ0FBQ08sY0FBYyxDQUFDO1lBQzNDQyxnQkFBUyxDQUFDQyxLQUFLLENBQUNIO1lBRWhCLDJEQUEyRDtZQUMzRCxNQUFNUixJQUFBQSxjQUFPLEVBQUM7Z0JBQ1osTUFBTVkscUJBQXFCVixhQUFNLENBQUNJLFlBQVksQ0FBQztnQkFDL0NMLE9BQU9XLG1CQUFtQjlDLE1BQU0sRUFBRXlDLGVBQWUsQ0FBQyxJQUFJLHFCQUFxQjtZQUM3RTtZQUVBLHdCQUF3QjtZQUN4QixNQUFNTSxpQkFBaUJYLGFBQU0sQ0FBQ08sY0FBYyxDQUFDO1lBQzdDQyxnQkFBUyxDQUFDQyxLQUFLLENBQUNFO1lBRWhCLHlEQUF5RDtZQUN6RCxNQUFNYixJQUFBQSxjQUFPLEVBQUM7Z0JBQ1osTUFBTVkscUJBQXFCVixhQUFNLENBQUNJLFlBQVksQ0FBQztnQkFDL0NMLE9BQU9XLG1CQUFtQjlDLE1BQU0sRUFBRWdELElBQUksQ0FBQyxJQUFJLGlCQUFpQjtZQUM5RDtRQUNGO1FBRUFuQixHQUFHLHFDQUFxQztZQUNyQ2QsT0FBT0MsS0FBSyxDQUFlYyxxQkFBcUIsQ0FBQztnQkFDaERDLE1BQU0sVUFBYSxDQUFBO3dCQUFFQyxTQUFTO3dCQUFNckMsTUFBTTBCO29CQUFjLENBQUE7WUFDMUQ7WUFFQVIsSUFBQUEsYUFBTSxnQkFBQyxxQkFBQ29CLGFBQXNCO1lBRTlCLDJCQUEyQjtZQUMzQixNQUFNQyxJQUFBQSxjQUFPLEVBQUM7Z0JBQ1pDLE9BQU9DLGFBQU0sQ0FBQ0ksWUFBWSxDQUFDLGNBQWN4QyxNQUFNLEVBQUV5QyxlQUFlLENBQUM7WUFDbkU7WUFFQSxNQUFNUSxnQkFBZ0JiLGFBQU0sQ0FBQ2MsaUJBQWlCLENBQUM7WUFDL0NOLGdCQUFTLENBQUNDLEtBQUssQ0FBQ0ksYUFBYSxDQUFDLEVBQUUsR0FBRyxvQkFBb0I7WUFFdkQsTUFBTWYsSUFBQUEsY0FBTyxFQUFDO2dCQUNaQyxPQUFPQyxhQUFNLENBQUNJLFlBQVksQ0FBQyxjQUFjeEMsTUFBTSxFQUFFeUMsZUFBZSxDQUFDO1lBQ25FO1lBRUFHLGdCQUFTLENBQUNDLEtBQUssQ0FBQ1QsYUFBTSxDQUFDYyxpQkFBaUIsQ0FBQyxTQUFTLENBQUMsRUFBRSxHQUFHLG9CQUFvQjtZQUU1RSxNQUFNaEIsSUFBQUEsY0FBTyxFQUFDO2dCQUNaQyxPQUFPQyxhQUFNLENBQUNDLFNBQVMsQ0FBQywwQkFBMEJDLGlCQUFpQjtZQUNyRTtRQUNGO0lBQ0Y7SUFFQXBCLFNBQVMscUJBQXFCO1FBQzVCVyxHQUFHLDhDQUE4QztZQUM5Q2QsT0FBT0MsS0FBSyxDQUFlYyxxQkFBcUIsQ0FBQztnQkFDaERDLE1BQU0sVUFBYSxDQUFBO3dCQUFFQyxTQUFTO3dCQUFNckMsTUFBTSxFQUFFO29CQUFDLENBQUE7WUFDL0M7WUFFQWtCLElBQUFBLGFBQU0sZ0JBQUMscUJBQUNvQixhQUFzQjtZQUU5QixNQUFNQyxJQUFBQSxjQUFPLEVBQUM7Z0JBQ1pDLE9BQU9DLGFBQU0sQ0FBQ0MsU0FBUyxDQUFDLG1CQUFtQkMsaUJBQWlCO1lBQzlEO1lBRUFNLGdCQUFTLENBQUNDLEtBQUssQ0FBQ1QsYUFBTSxDQUFDQyxTQUFTLENBQUM7WUFFakMsTUFBTUgsSUFBQUEsY0FBTyxFQUFDO2dCQUNaQyxPQUFPQyxhQUFNLENBQUNDLFNBQVMsQ0FBQyxxQkFBcUJDLGlCQUFpQjtZQUNoRTtRQUNGO1FBRUFULEdBQUcsdUNBQXVDO1lBQ3ZDZCxPQUFPQyxLQUFLLENBQ1ZjLHFCQUFxQixDQUFDO2dCQUNyQkMsTUFBTSxVQUFhLENBQUE7d0JBQUVDLFNBQVM7d0JBQU1yQyxNQUFNLEVBQUU7b0JBQUMsQ0FBQTtZQUMvQyxHQUNDbUMscUJBQXFCLENBQUM7Z0JBQ3JCQyxNQUFNLFVBQWEsQ0FBQTt3QkFDakJDLFNBQVM7d0JBQ1RyQyxNQUFNOzRCQUNKVSxJQUFJOzRCQUNKaUIsTUFBTTs0QkFDTkMsa0JBQWtCOzRCQUNsQkMsU0FBUzs0QkFDVEMsYUFBYTs0QkFDYkMsYUFBYTs0QkFDYkMsV0FBVzt3QkFDYjtvQkFDRixDQUFBO1lBQ0YsR0FDQ0cscUJBQXFCLENBQUM7Z0JBQ3JCQyxNQUFNLFVBQWEsQ0FBQTt3QkFBRUMsU0FBUzt3QkFBTXJDLE1BQU0sRUFBRTtvQkFBQyxDQUFBO1lBQy9DO1lBRUZrQixJQUFBQSxhQUFNLGdCQUFDLHFCQUFDb0IsYUFBc0I7WUFFOUIsTUFBTUMsSUFBQUEsY0FBTyxFQUFDO2dCQUNaQyxPQUFPQyxhQUFNLENBQUNDLFNBQVMsQ0FBQyxtQkFBbUJDLGlCQUFpQjtZQUM5RDtZQUVBTSxnQkFBUyxDQUFDQyxLQUFLLENBQUNULGFBQU0sQ0FBQ0MsU0FBUyxDQUFDO1lBRWpDLFlBQVk7WUFDWixNQUFNYyxZQUFZZixhQUFNLENBQUNnQixvQkFBb0IsQ0FBQztZQUM5Q1IsZ0JBQVMsQ0FBQ1MsTUFBTSxDQUFDRixXQUFXO2dCQUFFRyxRQUFRO29CQUFFNUMsT0FBTztnQkFBZTtZQUFFO1lBRWhFLGNBQWM7WUFDZCxNQUFNNkMsZUFBZW5CLGFBQU0sQ0FBQ29CLFNBQVMsQ0FBQyxVQUFVO2dCQUFFbEMsTUFBTTtZQUFpQjtZQUN6RXNCLGdCQUFTLENBQUNDLEtBQUssQ0FBQ1U7WUFFaEIsTUFBTXJCLElBQUFBLGNBQU8sRUFBQztnQkFDWkMsT0FBT3BCLE9BQU9DLEtBQUssRUFBRXlDLG9CQUFvQixDQUN2Qyx3QkFDQXRCLE9BQU91QixnQkFBZ0IsQ0FBQztvQkFDdEJDLFFBQVE7b0JBQ1JDLE1BQU1DLEtBQUtDLFNBQVMsQ0FBQzt3QkFBRXhDLE1BQU07b0JBQWU7Z0JBQzlDO1lBRUo7UUFDRjtJQUNGO0lBRUFKLFNBQVMscUJBQXFCO1FBQzVCVyxHQUFHLDBDQUEwQztZQUMxQ2QsT0FBT0MsS0FBSyxDQUFlYyxxQkFBcUIsQ0FBQztnQkFDaERDLE1BQU0sVUFBYSxDQUFBO3dCQUFFQyxTQUFTO3dCQUFNckMsTUFBTTBCO29CQUFjLENBQUE7WUFDMUQ7WUFFQVIsSUFBQUEsYUFBTSxnQkFBQyxxQkFBQ29CLGFBQXNCO1lBRTlCLE1BQU1DLElBQUFBLGNBQU8sRUFBQztnQkFDWkMsT0FBT0MsYUFBTSxDQUFDQyxTQUFTLENBQUMsbUJBQW1CQyxpQkFBaUI7WUFDOUQ7WUFFQU0sZ0JBQVMsQ0FBQ0MsS0FBSyxDQUFDVCxhQUFNLENBQUNDLFNBQVMsQ0FBQztZQUVqQyxzQ0FBc0M7WUFDdEMsTUFBTUgsSUFBQUEsY0FBTyxFQUFDO2dCQUNaQyxPQUFPQyxhQUFNLENBQUNDLFNBQVMsQ0FBQyxvQkFBb0JDLGlCQUFpQjtZQUMvRDtRQUNGO0lBQ0Y7SUFFQXBCLFNBQVMsaUNBQWlDO1FBQ3hDVyxHQUFHLDhDQUE4QztZQUM5Q2QsT0FBT0MsS0FBSyxDQUNWYyxxQkFBcUIsQ0FBQztnQkFDckJDLE1BQU0sVUFBYSxDQUFBO3dCQUFFQyxTQUFTO3dCQUFNckMsTUFBTTBCO29CQUFjLENBQUE7WUFDMUQsR0FDQ1MscUJBQXFCLENBQUM7Z0JBQ3JCQyxNQUFNLFVBQWEsQ0FBQTt3QkFDakJDLFNBQVM7d0JBQ1QrQixPQUFPOzRCQUNMQyxNQUFNOzRCQUNOQyxTQUFTO3dCQUNYO29CQUNGLENBQUE7WUFDRjtZQUVGcEQsSUFBQUEsYUFBTSxnQkFBQyxxQkFBQ29CLGFBQXNCO1lBRTlCLE1BQU1DLElBQUFBLGNBQU8sRUFBQztnQkFDWkMsT0FBT0MsYUFBTSxDQUFDSSxZQUFZLENBQUMsY0FBY3hDLE1BQU0sRUFBRXlDLGVBQWUsQ0FBQztZQUNuRTtZQUVBLGtCQUFrQjtZQUNsQixNQUFNQyxlQUFlTixhQUFNLENBQUNPLGNBQWMsQ0FBQztZQUMzQ0MsZ0JBQVMsQ0FBQ0MsS0FBSyxDQUFDSDtZQUVoQixNQUFNUixJQUFBQSxjQUFPLEVBQUM7Z0JBQ1pDLE9BQU9DLGFBQU0sQ0FBQ0ksWUFBWSxDQUFDLGNBQWN4QyxNQUFNLEVBQUV5QyxlQUFlLENBQUM7WUFDbkU7WUFFQSxNQUFNeUIsY0FBYzlCLGFBQU0sQ0FBQ0ksWUFBWSxDQUFDO1lBQ3hDSSxnQkFBUyxDQUFDQyxLQUFLLENBQUNxQixXQUFXLENBQUMsRUFBRSxHQUFHLGtCQUFrQjtZQUVuRCw0Q0FBNEM7WUFDNUMsTUFBTWhDLElBQUFBLGNBQU8sRUFBQztnQkFDWkMsT0FBT0MsYUFBTSxDQUFDQyxTQUFTLENBQUMsa0JBQWtCQyxpQkFBaUI7WUFDN0Q7UUFDRjtJQUNGO0lBRUFwQixTQUFTLHdCQUF3QjtRQUMvQlcsR0FBR3NDLElBQUksQ0FBQywyQ0FBMkM7WUFDaERwRCxPQUFPQyxLQUFLLENBQWVjLHFCQUFxQixDQUFDO2dCQUNoREMsTUFBTSxVQUFhLENBQUE7d0JBQUVDLFNBQVM7d0JBQU1yQyxNQUFNMEI7b0JBQWMsQ0FBQTtZQUMxRDtZQUVBUixJQUFBQSxhQUFNLGdCQUFDLHFCQUFDb0IsYUFBc0I7WUFFOUIsTUFBTUMsSUFBQUEsY0FBTyxFQUFDO2dCQUNaQyxPQUFPQyxhQUFNLENBQUNJLFlBQVksQ0FBQyxjQUFjeEMsTUFBTSxFQUFFeUMsZUFBZSxDQUFDO1lBQ25FO1lBRUEsK0JBQStCO1lBQy9CLE1BQU1RLGdCQUFnQmIsYUFBTSxDQUFDYyxpQkFBaUIsQ0FBQztZQUMvQ04sZ0JBQVMsQ0FBQ0MsS0FBSyxDQUFDSSxhQUFhLENBQUMsRUFBRTtZQUVoQyxNQUFNZixJQUFBQSxjQUFPLEVBQUM7Z0JBQ1pDLE9BQU9DLGFBQU0sQ0FBQ0ksWUFBWSxDQUFDLGNBQWN4QyxNQUFNLEVBQUV5QyxlQUFlLENBQUM7WUFDbkU7WUFFQSx1QkFBdUI7WUFDdkIsTUFBTTJCLGNBQWNoQyxhQUFNLENBQUNnQixvQkFBb0IsQ0FBQztZQUNoRFIsZ0JBQVMsQ0FBQ1MsTUFBTSxDQUFDZSxhQUFhO2dCQUFFZCxRQUFRO29CQUFFNUMsT0FBTztnQkFBWTtZQUFFO1lBRS9ELDhCQUE4QjtZQUM5QixNQUFNd0IsSUFBQUEsY0FBTyxFQUFDO2dCQUNaQyxPQUFPQyxhQUFNLENBQUNDLFNBQVMsQ0FBQyxjQUFjQyxpQkFBaUI7WUFDekQ7UUFDRjtRQUVBVCxHQUFHLDZEQUE2RDtZQUM3RGQsT0FBT0MsS0FBSyxDQUFlYyxxQkFBcUIsQ0FBQztnQkFDaERDLE1BQU0sVUFBYSxDQUFBO3dCQUFFQyxTQUFTO3dCQUFNckMsTUFBTTBCO29CQUFjLENBQUE7WUFDMUQ7WUFFQVIsSUFBQUEsYUFBTSxnQkFBQyxxQkFBQ29CLGFBQXNCO1lBRTlCLE1BQU1DLElBQUFBLGNBQU8sRUFBQztnQkFDWkMsT0FBT0MsYUFBTSxDQUFDSSxZQUFZLENBQUMsY0FBY3hDLE1BQU0sRUFBRXlDLGVBQWUsQ0FBQztZQUNuRSxHQUFHO2dCQUFFRixTQUFTO1lBQUs7WUFFbkIsTUFBTTZCLGNBQWNoQyxhQUFNLENBQUNnQixvQkFBb0IsQ0FBQztZQUNoRFIsZ0JBQVMsQ0FBQ1MsTUFBTSxDQUFDZSxhQUFhO2dCQUFFZCxRQUFRO29CQUFFNUMsT0FBTztnQkFBc0I7WUFBRTtZQUV6RSxNQUFNd0IsSUFBQUEsY0FBTyxFQUFDO2dCQUNaQyxPQUFPQyxhQUFNLENBQUNDLFNBQVMsQ0FBQyxtQ0FBbUNDLGlCQUFpQjtZQUM5RSxHQUFHO2dCQUFFQyxTQUFTO1lBQUs7UUFDckI7SUFDRjtJQUVBckIsU0FBUyxxQkFBcUI7UUFDNUJXLEdBQUcsNENBQTRDO1lBQzdDZCxPQUFPc0QsT0FBTyxHQUFHN0UsS0FBS3lCLEVBQUUsQ0FBQyxJQUFNO1lBRTlCRixPQUFPQyxLQUFLLENBQ1ZjLHFCQUFxQixDQUFDO2dCQUNyQkMsTUFBTSxVQUFhLENBQUE7d0JBQUVDLFNBQVM7d0JBQU1yQyxNQUFNMEI7b0JBQWMsQ0FBQTtZQUMxRCxHQUNDUyxxQkFBcUIsQ0FBQztnQkFDckJDLE1BQU0sVUFBYSxDQUFBO3dCQUFFQyxTQUFTO3dCQUFNckMsTUFBTTJFO29CQUFVLENBQUE7WUFDdEQsR0FDQ3hDLHFCQUFxQixDQUFDO2dCQUNyQkMsTUFBTSxVQUFhLENBQUE7d0JBQUVDLFNBQVM7d0JBQU1yQyxNQUFNLEVBQUU7b0JBQUMsQ0FBQTtZQUMvQztZQUVGa0IsSUFBQUEsYUFBTSxnQkFBQyxxQkFBQ29CLGFBQXNCO1lBRTlCLE1BQU1DLElBQUFBLGNBQU8sRUFBQztnQkFDWkMsT0FBT0MsYUFBTSxDQUFDSSxZQUFZLENBQUMsY0FBY3hDLE1BQU0sRUFBRXlDLGVBQWUsQ0FBQztZQUNuRTtZQUVBLE1BQU04QixlQUFlbkMsYUFBTSxDQUFDQyxTQUFTLENBQUM7WUFDdENPLGdCQUFTLENBQUNDLEtBQUssQ0FBQzBCO1lBRWhCcEMsT0FBT3BCLE9BQU9zRCxPQUFPLEVBQUVaLG9CQUFvQixDQUN6Q3RCLE9BQU9xQyxnQkFBZ0IsQ0FBQztZQUcxQixNQUFNdEMsSUFBQUEsY0FBTyxFQUFDO2dCQUNaQyxPQUFPcEIsT0FBT0MsS0FBSyxFQUFFeUMsb0JBQW9CLENBQ3ZDdEIsT0FBT3FDLGdCQUFnQixDQUFDLDBCQUN4QnJDLE9BQU91QixnQkFBZ0IsQ0FBQztvQkFBRUMsUUFBUTtnQkFBUztZQUUvQztRQUNGO1FBRUE5QixHQUFHc0MsSUFBSSxDQUFDLCtDQUErQztZQUNyRHBELE9BQU9zRCxPQUFPLEdBQUc3RSxLQUFLeUIsRUFBRSxDQUFDLElBQU07WUFFOUJGLE9BQU9DLEtBQUssQ0FBZWMscUJBQXFCLENBQUM7Z0JBQ2hEQyxNQUFNLFVBQWEsQ0FBQTt3QkFBRUMsU0FBUzt3QkFBTXJDLE1BQU0wQjtvQkFBYyxDQUFBO1lBQzFEO1lBRUFSLElBQUFBLGFBQU0sZ0JBQUMscUJBQUNvQixhQUFzQjtZQUU5QixNQUFNQyxJQUFBQSxjQUFPLEVBQUM7Z0JBQ1pDLE9BQU9DLGFBQU0sQ0FBQ0ksWUFBWSxDQUFDLGNBQWN4QyxNQUFNLEVBQUV5QyxlQUFlLENBQUM7WUFDbkU7WUFFQSxNQUFNOEIsZUFBZW5DLGFBQU0sQ0FBQ0MsU0FBUyxDQUFDO1lBQ3RDTyxnQkFBUyxDQUFDQyxLQUFLLENBQUMwQjtZQUVoQnBDLE9BQU9wQixPQUFPc0QsT0FBTyxFQUFFSSxnQkFBZ0I7WUFDdkN0QyxPQUFPcEIsT0FBT0MsS0FBSyxFQUFFMEQscUJBQXFCLENBQUMsSUFBSSxvQkFBb0I7UUFDckU7SUFDRjtJQUVBeEQsU0FBUyxrQkFBa0I7UUFDekJXLEdBQUdzQyxJQUFJLENBQUMsZ0RBQWdEO1lBQ3JEcEQsT0FBT0MsS0FBSyxDQUFlYyxxQkFBcUIsQ0FBQztnQkFDaERDLE1BQU0sVUFBYSxDQUFBO3dCQUNqQkMsU0FBUzt3QkFDVCtCLE9BQU87NEJBQUVDLE1BQU07NEJBQWtCQyxTQUFTO3dCQUEyQjtvQkFDdkUsQ0FBQTtZQUNGO1lBRUFwRCxJQUFBQSxhQUFNLGdCQUFDLHFCQUFDb0IsYUFBc0I7WUFFOUIsK0JBQStCO1lBQy9CLE1BQU1DLElBQUFBLGNBQU8sRUFBQztnQkFDWkMsT0FBT0MsYUFBTSxDQUFDdUMsV0FBVyxDQUFDLHlCQUF5QkMsR0FBRyxDQUFDdEMsaUJBQWlCO1lBQzFFO1lBRUEsNEJBQTRCO1lBQzVCSCxPQUFPQyxhQUFNLENBQUNDLFNBQVMsQ0FBQyw4QkFBOEJDLGlCQUFpQjtRQUN6RTtRQUVBVCxHQUFHLDZDQUE2QztZQUM3Q2QsT0FBT0MsS0FBSyxDQUFlYyxxQkFBcUIsQ0FBQztnQkFDaERDLE1BQU0sVUFBYSxDQUFBO3dCQUFFQyxTQUFTO3dCQUFNckMsTUFBTSxFQUFFO29CQUFDLENBQUE7WUFDL0M7WUFFQWtCLElBQUFBLGFBQU0sZ0JBQUMscUJBQUNvQixhQUFzQjtZQUU5QixNQUFNQyxJQUFBQSxjQUFPLEVBQUM7Z0JBQ1pDLE9BQ0VDLGFBQU0sQ0FBQ0MsU0FBUyxDQUFDLHFEQUNqQkMsaUJBQWlCO1lBQ3JCO1FBQ0Y7SUFDRjtBQUNGIn0=