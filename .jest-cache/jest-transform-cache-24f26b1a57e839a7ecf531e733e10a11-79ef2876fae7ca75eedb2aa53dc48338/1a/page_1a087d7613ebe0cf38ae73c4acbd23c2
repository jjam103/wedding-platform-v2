955c79863b3c9a5310124ebae6fc966f
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get /**
 * Room Types Management Page
 * 
 * Provides CRUD interface for managing room types within an accommodation.
 * Features:
 * - Data table with sorting and capacity tracking
 * - Collapsible inline form for create/edit operations
 * - Occupancy percentage display
 * - Guest assignment interface
 * - Section editor integration
 * - Delete confirmation dialog
 * - Toast notifications for success/error feedback
 * - Real-time data refresh after operations
 * 
 * Requirements: 22.1-22.8
 */ default () {
        return RoomTypesPage;
    },
    get dynamic () {
        return dynamic;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const _DataTableWithSuspense = require("../../../../../components/ui/DataTableWithSuspense");
const _CollapsibleForm = require("../../../../../components/admin/CollapsibleForm");
const _ConfirmDialog = require("../../../../../components/ui/ConfirmDialog");
const _Button = require("../../../../../components/ui/Button");
const _ToastContext = require("../../../../../components/ui/ToastContext");
const _accommodationSchemas = require("../../../../../schemas/accommodationSchemas");
const _navigation = require("next/navigation");
const dynamic = 'force-dynamic';
function RoomTypesPage({ params }) {
    const { addToast } = (0, _ToastContext.useToast)();
    const router = (0, _navigation.useRouter)();
    const [accommodationId, setAccommodationId] = (0, _react.useState)('');
    // State management
    const [roomTypes, setRoomTypes] = (0, _react.useState)([]);
    const [accommodationName, setAccommodationName] = (0, _react.useState)('');
    const [loading, setLoading] = (0, _react.useState)(true);
    const [isFormOpen, setIsFormOpen] = (0, _react.useState)(false);
    const [isDeleteDialogOpen, setIsDeleteDialogOpen] = (0, _react.useState)(false);
    const [selectedRoomType, setSelectedRoomType] = (0, _react.useState)(null);
    const [roomTypeToDelete, setRoomTypeToDelete] = (0, _react.useState)(null);
    // Ref for scrolling to newly created room type
    const newRoomTypeRef = (0, _react.useRef)(null);
    /**
   * Unwrap params Promise on mount
   */ (0, _react.useEffect)(()=>{
        params.then(({ id })=>{
            setAccommodationId(id);
        });
    }, [
        params
    ]);
    /**
   * Fetch accommodation details
   */ const fetchAccommodation = (0, _react.useCallback)(async ()=>{
        if (!accommodationId) return;
        try {
            const response = await fetch(`/api/admin/accommodations/${accommodationId}`);
            if (!response.ok) {
                throw new Error('Failed to fetch accommodation');
            }
            const result = await response.json();
            if (result.success) {
                setAccommodationName(result.data.name || 'Accommodation');
            }
        } catch (error) {
            console.error('Failed to fetch accommodation:', error);
        }
    }, [
        accommodationId
    ]);
    /**
   * Fetch room types from API
   */ const fetchRoomTypes = (0, _react.useCallback)(async ()=>{
        if (!accommodationId) return;
        try {
            setLoading(true);
            const response = await fetch(`/api/admin/accommodations/${accommodationId}/room-types`);
            if (!response.ok) {
                throw new Error('Failed to fetch room types');
            }
            const result = await response.json();
            if (result.success) {
                setRoomTypes(result.data || []);
            } else {
                addToast({
                    type: 'error',
                    message: result.error?.message || 'Failed to load room types'
                });
            }
        } catch (error) {
            addToast({
                type: 'error',
                message: error instanceof Error ? error.message : 'Failed to load room types'
            });
        } finally{
            setLoading(false);
        }
    }, [
        accommodationId,
        addToast
    ]);
    // Load data on mount only
    (0, _react.useEffect)(()=>{
        if (accommodationId) {
            fetchAccommodation();
            fetchRoomTypes();
        }
    // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [
        accommodationId
    ]);
    /**
   * Handle row click - open edit form
   */ const handleRowClick = (0, _react.useCallback)((roomType)=>{
        setSelectedRoomType(roomType);
        setIsFormOpen(true);
    }, []);
    /**
   * Handle add room type button click
   */ const handleAddRoomType = (0, _react.useCallback)(()=>{
        setSelectedRoomType(null);
        setIsFormOpen(true);
    }, []);
    /**
   * Handle delete button click
   */ const handleDeleteClick = (0, _react.useCallback)((roomType)=>{
        setRoomTypeToDelete(roomType);
        setIsDeleteDialogOpen(true);
    }, []);
    /**
   * Handle manage sections button click
   */ const handleManageSections = (0, _react.useCallback)((roomType)=>{
        // Navigate to section editor for this room type
        if (accommodationId) {
            router.push(`/admin/accommodations/${accommodationId}/room-types/${roomType.id}/sections`);
        }
    }, [
        router,
        accommodationId
    ]);
    /**
   * Handle back to accommodations
   */ const handleBackToAccommodations = (0, _react.useCallback)(()=>{
        router.push('/admin/accommodations');
    }, [
        router
    ]);
    /**
   * Handle form submission (create or update)
   */ const handleSubmit = (0, _react.useCallback)(async (data)=>{
        try {
            const isEdit = !!selectedRoomType;
            // Add accommodation ID to data
            const submitData = {
                ...data,
                accommodationId
            };
            const url = isEdit ? `/api/admin/room-types/${selectedRoomType.id}` : '/api/admin/room-types';
            const method = isEdit ? 'PUT' : 'POST';
            const response = await fetch(url, {
                method,
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(submitData)
            });
            const result = await response.json();
            if (result.success) {
                addToast({
                    type: 'success',
                    message: isEdit ? 'Room type updated successfully' : 'Room type created successfully'
                });
                // Store new room type ID for scrolling
                if (!isEdit && result.data?.id) {
                    newRoomTypeRef.current = result.data.id;
                }
                // Refresh room type list
                await fetchRoomTypes();
                // Close form
                setIsFormOpen(false);
                setSelectedRoomType(null);
                // Scroll to new room type after a short delay
                if (newRoomTypeRef.current) {
                    setTimeout(()=>{
                        const element = document.querySelector(`[data-row-id="${newRoomTypeRef.current}"]`);
                        if (element) {
                            element.scrollIntoView({
                                behavior: 'smooth',
                                block: 'center'
                            });
                        }
                        newRoomTypeRef.current = null;
                    }, 100);
                }
            } else {
                addToast({
                    type: 'error',
                    message: result.error?.message || 'Operation failed'
                });
            }
        } catch (error) {
            addToast({
                type: 'error',
                message: error instanceof Error ? error.message : 'Operation failed'
            });
        }
    }, [
        selectedRoomType,
        accommodationId,
        addToast,
        fetchRoomTypes
    ]);
    /**
   * Handle delete confirmation
   */ const handleDeleteConfirm = (0, _react.useCallback)(async ()=>{
        if (!roomTypeToDelete) return;
        try {
            const response = await fetch(`/api/admin/room-types/${roomTypeToDelete.id}`, {
                method: 'DELETE'
            });
            const result = await response.json();
            if (result.success) {
                addToast({
                    type: 'success',
                    message: 'Room type deleted successfully'
                });
                // Refresh room type list
                await fetchRoomTypes();
                // Close dialog
                setIsDeleteDialogOpen(false);
                setRoomTypeToDelete(null);
            } else {
                addToast({
                    type: 'error',
                    message: result.error?.message || 'Failed to delete room type'
                });
            }
        } catch (error) {
            addToast({
                type: 'error',
                message: error instanceof Error ? error.message : 'Failed to delete room type'
            });
        }
    }, [
        roomTypeToDelete,
        addToast,
        fetchRoomTypes
    ]);
    /**
   * Calculate occupancy percentage
   */ const calculateOccupancy = (roomType)=>{
        // This would need to fetch actual assignments
        // For now, return 0 as placeholder
        return 0;
    };
    /**
   * Format currency for display
   */ const formatCurrency = (amount)=>{
        return new Intl.NumberFormat('en-US', {
            style: 'currency',
            currency: 'USD'
        }).format(amount);
    };
    // Define table columns
    const columns = [
        {
            key: 'name',
            label: 'Name',
            sortable: true
        },
        {
            key: 'capacity',
            label: 'Capacity',
            sortable: true,
            render: (value)=>`${value} guests`
        },
        {
            key: 'totalRooms',
            label: 'Total Rooms',
            sortable: true
        },
        {
            key: 'pricePerNight',
            label: 'Price/Night',
            sortable: true,
            render: (value)=>formatCurrency(value)
        },
        {
            key: 'occupancy',
            label: 'Occupancy',
            sortable: false,
            render: (_, row)=>{
                const roomType = row;
                const occupancy = calculateOccupancy(roomType);
                const percentage = roomType.totalRooms > 0 ? occupancy / roomType.totalRooms * 100 : 0;
                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "flex items-center gap-2",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                            className: "text-sm text-sage-900",
                            children: [
                                occupancy,
                                "/",
                                roomType.totalRooms
                            ]
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                            className: "text-xs text-sage-600",
                            children: [
                                "(",
                                percentage.toFixed(0),
                                "%)"
                            ]
                        })
                    ]
                });
            }
        },
        {
            key: 'actions',
            label: 'Actions',
            sortable: false,
            render: (_, row)=>/*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                    variant: "secondary",
                    size: "sm",
                    onClick: (e)=>{
                        e.stopPropagation();
                        handleManageSections(row);
                    },
                    children: "Manage Sections"
                })
        }
    ];
    // Define form fields
    const formFields = [
        {
            name: 'name',
            label: 'Room Type Name',
            type: 'text',
            required: true,
            placeholder: 'Enter room type name (e.g., Ocean View Suite)'
        },
        {
            name: 'capacity',
            label: 'Capacity',
            type: 'number',
            required: true,
            placeholder: 'Maximum guests per room',
            helpText: 'Maximum number of guests that can stay in this room type'
        },
        {
            name: 'totalRooms',
            label: 'Total Rooms',
            type: 'number',
            required: true,
            placeholder: 'Number of rooms available',
            helpText: 'Total number of rooms of this type'
        },
        {
            name: 'pricePerNight',
            label: 'Price Per Night',
            type: 'number',
            required: true,
            placeholder: '0.00',
            helpText: 'Price per night in USD'
        },
        {
            name: 'hostSubsidyPerNight',
            label: 'Host Subsidy Per Night',
            type: 'number',
            required: false,
            placeholder: '0.00',
            helpText: 'Amount host will subsidize per night (optional)'
        },
        {
            name: 'description',
            label: 'Description',
            type: 'richtext',
            required: false,
            placeholder: 'Enter room type description',
            helpText: 'Rich text editor for detailed room type description'
        }
    ];
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: "space-y-6",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "flex items-center justify-between",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "flex items-center gap-2 mb-2",
                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                                    variant: "secondary",
                                    size: "sm",
                                    onClick: handleBackToAccommodations,
                                    children: "â† Back to Accommodations"
                                })
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("h1", {
                                className: "text-3xl font-bold text-sage-900",
                                children: [
                                    "Room Types: ",
                                    accommodationName
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                className: "text-sage-600 mt-1",
                                children: "Manage room types and guest assignments"
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                        variant: "primary",
                        onClick: handleAddRoomType,
                        "aria-label": "Create new room type",
                        "data-action": "add-new",
                        children: "+ Add Room Type"
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_CollapsibleForm.CollapsibleForm, {
                isOpen: isFormOpen,
                onToggle: ()=>{
                    setIsFormOpen(!isFormOpen);
                    if (isFormOpen) {
                        setSelectedRoomType(null);
                    }
                },
                title: selectedRoomType ? 'Edit Room Type' : 'Add New Room Type',
                fields: formFields,
                schema: selectedRoomType ? _accommodationSchemas.updateRoomTypeSchema : _accommodationSchemas.createRoomTypeSchema,
                onSubmit: handleSubmit,
                onCancel: ()=>{
                    setIsFormOpen(false);
                    setSelectedRoomType(null);
                },
                initialData: selectedRoomType || {},
                submitLabel: selectedRoomType ? 'Update Room Type' : 'Create Room Type'
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_DataTableWithSuspense.DataTableWithSuspense, {
                data: roomTypes,
                columns: columns,
                loading: loading,
                onRowClick: handleRowClick,
                onDelete: handleDeleteClick,
                totalCount: roomTypes.length,
                currentPage: 1,
                pageSize: 25,
                idField: "id"
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_ConfirmDialog.ConfirmDialog, {
                isOpen: isDeleteDialogOpen,
                onClose: ()=>{
                    setIsDeleteDialogOpen(false);
                    setRoomTypeToDelete(null);
                },
                onConfirm: handleDeleteConfirm,
                title: "Delete Room Type",
                message: `Are you sure you want to delete "${roomTypeToDelete?.name}"? This will unassign all guests from this room type. This action cannot be undone.`,
                confirmLabel: "Delete",
                cancelLabel: "Cancel",
                variant: "danger"
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FkbWluL2FjY29tbW9kYXRpb25zL1tpZF0vcm9vbS10eXBlcy9wYWdlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmV4cG9ydCBjb25zdCBkeW5hbWljID0gJ2ZvcmNlLWR5bmFtaWMnO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRGF0YVRhYmxlV2l0aFN1c3BlbnNlIGFzIERhdGFUYWJsZSwgdHlwZSBDb2x1bW5EZWYgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvRGF0YVRhYmxlV2l0aFN1c3BlbnNlJztcbmltcG9ydCB7IENvbGxhcHNpYmxlRm9ybSB9IGZyb20gJ0AvY29tcG9uZW50cy9hZG1pbi9Db2xsYXBzaWJsZUZvcm0nO1xuaW1wb3J0IHsgQ29uZmlybURpYWxvZyB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9Db25maXJtRGlhbG9nJztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9CdXR0b24nO1xuaW1wb3J0IHsgdXNlVG9hc3QgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvVG9hc3RDb250ZXh0JztcbmltcG9ydCB0eXBlIHsgUm9vbVR5cGUgfSBmcm9tICdAL3NjaGVtYXMvYWNjb21tb2RhdGlvblNjaGVtYXMnO1xuaW1wb3J0IHsgY3JlYXRlUm9vbVR5cGVTY2hlbWEsIHVwZGF0ZVJvb21UeXBlU2NoZW1hIH0gZnJvbSAnQC9zY2hlbWFzL2FjY29tbW9kYXRpb25TY2hlbWFzJztcbmltcG9ydCB0eXBlIHsgRm9ybUZpZWxkIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL0R5bmFtaWNGb3JtJztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvbmF2aWdhdGlvbic7XG5cbi8qKlxuICogUm9vbSBUeXBlcyBNYW5hZ2VtZW50IFBhZ2VcbiAqIFxuICogUHJvdmlkZXMgQ1JVRCBpbnRlcmZhY2UgZm9yIG1hbmFnaW5nIHJvb20gdHlwZXMgd2l0aGluIGFuIGFjY29tbW9kYXRpb24uXG4gKiBGZWF0dXJlczpcbiAqIC0gRGF0YSB0YWJsZSB3aXRoIHNvcnRpbmcgYW5kIGNhcGFjaXR5IHRyYWNraW5nXG4gKiAtIENvbGxhcHNpYmxlIGlubGluZSBmb3JtIGZvciBjcmVhdGUvZWRpdCBvcGVyYXRpb25zXG4gKiAtIE9jY3VwYW5jeSBwZXJjZW50YWdlIGRpc3BsYXlcbiAqIC0gR3Vlc3QgYXNzaWdubWVudCBpbnRlcmZhY2VcbiAqIC0gU2VjdGlvbiBlZGl0b3IgaW50ZWdyYXRpb25cbiAqIC0gRGVsZXRlIGNvbmZpcm1hdGlvbiBkaWFsb2dcbiAqIC0gVG9hc3Qgbm90aWZpY2F0aW9ucyBmb3Igc3VjY2Vzcy9lcnJvciBmZWVkYmFja1xuICogLSBSZWFsLXRpbWUgZGF0YSByZWZyZXNoIGFmdGVyIG9wZXJhdGlvbnNcbiAqIFxuICogUmVxdWlyZW1lbnRzOiAyMi4xLTIyLjhcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUm9vbVR5cGVzUGFnZSh7IHBhcmFtcyB9OiB7IHBhcmFtczogUHJvbWlzZTx7IGlkOiBzdHJpbmcgfT4gfSkge1xuICBjb25zdCB7IGFkZFRvYXN0IH0gPSB1c2VUb2FzdCgpO1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3QgW2FjY29tbW9kYXRpb25JZCwgc2V0QWNjb21tb2RhdGlvbklkXSA9IHVzZVN0YXRlPHN0cmluZz4oJycpO1xuICBcbiAgLy8gU3RhdGUgbWFuYWdlbWVudFxuICBjb25zdCBbcm9vbVR5cGVzLCBzZXRSb29tVHlwZXNdID0gdXNlU3RhdGU8Um9vbVR5cGVbXT4oW10pO1xuICBjb25zdCBbYWNjb21tb2RhdGlvbk5hbWUsIHNldEFjY29tbW9kYXRpb25OYW1lXSA9IHVzZVN0YXRlPHN0cmluZz4oJycpO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2lzRm9ybU9wZW4sIHNldElzRm9ybU9wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaXNEZWxldGVEaWFsb2dPcGVuLCBzZXRJc0RlbGV0ZURpYWxvZ09wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2VsZWN0ZWRSb29tVHlwZSwgc2V0U2VsZWN0ZWRSb29tVHlwZV0gPSB1c2VTdGF0ZTxSb29tVHlwZSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbcm9vbVR5cGVUb0RlbGV0ZSwgc2V0Um9vbVR5cGVUb0RlbGV0ZV0gPSB1c2VTdGF0ZTxSb29tVHlwZSB8IG51bGw+KG51bGwpO1xuICBcbiAgLy8gUmVmIGZvciBzY3JvbGxpbmcgdG8gbmV3bHkgY3JlYXRlZCByb29tIHR5cGVcbiAgY29uc3QgbmV3Um9vbVR5cGVSZWYgPSB1c2VSZWY8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG5cbiAgLyoqXG4gICAqIFVud3JhcCBwYXJhbXMgUHJvbWlzZSBvbiBtb3VudFxuICAgKi9cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBwYXJhbXMudGhlbigoeyBpZCB9KSA9PiB7XG4gICAgICBzZXRBY2NvbW1vZGF0aW9uSWQoaWQpO1xuICAgIH0pO1xuICB9LCBbcGFyYW1zXSk7XG5cbiAgLyoqXG4gICAqIEZldGNoIGFjY29tbW9kYXRpb24gZGV0YWlsc1xuICAgKi9cbiAgY29uc3QgZmV0Y2hBY2NvbW1vZGF0aW9uID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmICghYWNjb21tb2RhdGlvbklkKSByZXR1cm47XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvYWRtaW4vYWNjb21tb2RhdGlvbnMvJHthY2NvbW1vZGF0aW9uSWR9YCk7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIGFjY29tbW9kYXRpb24nKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHNldEFjY29tbW9kYXRpb25OYW1lKHJlc3VsdC5kYXRhLm5hbWUgfHwgJ0FjY29tbW9kYXRpb24nKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZldGNoIGFjY29tbW9kYXRpb246JywgZXJyb3IpO1xuICAgIH1cbiAgfSwgW2FjY29tbW9kYXRpb25JZF0pO1xuXG4gIC8qKlxuICAgKiBGZXRjaCByb29tIHR5cGVzIGZyb20gQVBJXG4gICAqL1xuICBjb25zdCBmZXRjaFJvb21UeXBlcyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBpZiAoIWFjY29tbW9kYXRpb25JZCkgcmV0dXJuO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2FkbWluL2FjY29tbW9kYXRpb25zLyR7YWNjb21tb2RhdGlvbklkfS9yb29tLXR5cGVzYCk7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIHJvb20gdHlwZXMnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHNldFJvb21UeXBlcyhyZXN1bHQuZGF0YSB8fCBbXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhZGRUb2FzdCh7XG4gICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICBtZXNzYWdlOiByZXN1bHQuZXJyb3I/Lm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBsb2FkIHJvb20gdHlwZXMnLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYWRkVG9hc3Qoe1xuICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gbG9hZCByb29tIHR5cGVzJyxcbiAgICAgIH0pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH0sIFthY2NvbW1vZGF0aW9uSWQsIGFkZFRvYXN0XSk7XG5cbiAgLy8gTG9hZCBkYXRhIG9uIG1vdW50IG9ubHlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYWNjb21tb2RhdGlvbklkKSB7XG4gICAgICBmZXRjaEFjY29tbW9kYXRpb24oKTtcbiAgICAgIGZldGNoUm9vbVR5cGVzKCk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW2FjY29tbW9kYXRpb25JZF0pO1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgcm93IGNsaWNrIC0gb3BlbiBlZGl0IGZvcm1cbiAgICovXG4gIGNvbnN0IGhhbmRsZVJvd0NsaWNrID0gdXNlQ2FsbGJhY2soKHJvb21UeXBlOiBSb29tVHlwZSkgPT4ge1xuICAgIHNldFNlbGVjdGVkUm9vbVR5cGUocm9vbVR5cGUpO1xuICAgIHNldElzRm9ybU9wZW4odHJ1ZSk7XG4gIH0sIFtdKTtcblxuICAvKipcbiAgICogSGFuZGxlIGFkZCByb29tIHR5cGUgYnV0dG9uIGNsaWNrXG4gICAqL1xuICBjb25zdCBoYW5kbGVBZGRSb29tVHlwZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRTZWxlY3RlZFJvb21UeXBlKG51bGwpO1xuICAgIHNldElzRm9ybU9wZW4odHJ1ZSk7XG4gIH0sIFtdKTtcblxuICAvKipcbiAgICogSGFuZGxlIGRlbGV0ZSBidXR0b24gY2xpY2tcbiAgICovXG4gIGNvbnN0IGhhbmRsZURlbGV0ZUNsaWNrID0gdXNlQ2FsbGJhY2soKHJvb21UeXBlOiBSb29tVHlwZSkgPT4ge1xuICAgIHNldFJvb21UeXBlVG9EZWxldGUocm9vbVR5cGUpO1xuICAgIHNldElzRGVsZXRlRGlhbG9nT3Blbih0cnVlKTtcbiAgfSwgW10pO1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgbWFuYWdlIHNlY3Rpb25zIGJ1dHRvbiBjbGlja1xuICAgKi9cbiAgY29uc3QgaGFuZGxlTWFuYWdlU2VjdGlvbnMgPSB1c2VDYWxsYmFjaygocm9vbVR5cGU6IFJvb21UeXBlKSA9PiB7XG4gICAgLy8gTmF2aWdhdGUgdG8gc2VjdGlvbiBlZGl0b3IgZm9yIHRoaXMgcm9vbSB0eXBlXG4gICAgaWYgKGFjY29tbW9kYXRpb25JZCkge1xuICAgICAgcm91dGVyLnB1c2goYC9hZG1pbi9hY2NvbW1vZGF0aW9ucy8ke2FjY29tbW9kYXRpb25JZH0vcm9vbS10eXBlcy8ke3Jvb21UeXBlLmlkfS9zZWN0aW9uc2ApO1xuICAgIH1cbiAgfSwgW3JvdXRlciwgYWNjb21tb2RhdGlvbklkXSk7XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBiYWNrIHRvIGFjY29tbW9kYXRpb25zXG4gICAqL1xuICBjb25zdCBoYW5kbGVCYWNrVG9BY2NvbW1vZGF0aW9ucyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICByb3V0ZXIucHVzaCgnL2FkbWluL2FjY29tbW9kYXRpb25zJyk7XG4gIH0sIFtyb3V0ZXJdKTtcblxuICAvKipcbiAgICogSGFuZGxlIGZvcm0gc3VibWlzc2lvbiAoY3JlYXRlIG9yIHVwZGF0ZSlcbiAgICovXG4gIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IHVzZUNhbGxiYWNrKGFzeW5jIChkYXRhOiBhbnkpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgaXNFZGl0ID0gISFzZWxlY3RlZFJvb21UeXBlO1xuICAgICAgXG4gICAgICAvLyBBZGQgYWNjb21tb2RhdGlvbiBJRCB0byBkYXRhXG4gICAgICBjb25zdCBzdWJtaXREYXRhID0ge1xuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBhY2NvbW1vZGF0aW9uSWQsXG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zdCB1cmwgPSBpc0VkaXQgPyBgL2FwaS9hZG1pbi9yb29tLXR5cGVzLyR7c2VsZWN0ZWRSb29tVHlwZS5pZH1gIDogJy9hcGkvYWRtaW4vcm9vbS10eXBlcyc7XG4gICAgICBjb25zdCBtZXRob2QgPSBpc0VkaXQgPyAnUFVUJyA6ICdQT1NUJztcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgbWV0aG9kLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoc3VibWl0RGF0YSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgYWRkVG9hc3Qoe1xuICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICAgICAgICBtZXNzYWdlOiBpc0VkaXQgPyAnUm9vbSB0eXBlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyA6ICdSb29tIHR5cGUgY3JlYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFN0b3JlIG5ldyByb29tIHR5cGUgSUQgZm9yIHNjcm9sbGluZ1xuICAgICAgICBpZiAoIWlzRWRpdCAmJiByZXN1bHQuZGF0YT8uaWQpIHtcbiAgICAgICAgICBuZXdSb29tVHlwZVJlZi5jdXJyZW50ID0gcmVzdWx0LmRhdGEuaWQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFJlZnJlc2ggcm9vbSB0eXBlIGxpc3RcbiAgICAgICAgYXdhaXQgZmV0Y2hSb29tVHlwZXMoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENsb3NlIGZvcm1cbiAgICAgICAgc2V0SXNGb3JtT3BlbihmYWxzZSk7XG4gICAgICAgIHNldFNlbGVjdGVkUm9vbVR5cGUobnVsbCk7XG4gICAgICAgIFxuICAgICAgICAvLyBTY3JvbGwgdG8gbmV3IHJvb20gdHlwZSBhZnRlciBhIHNob3J0IGRlbGF5XG4gICAgICAgIGlmIChuZXdSb29tVHlwZVJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtcm93LWlkPVwiJHtuZXdSb29tVHlwZVJlZi5jdXJyZW50fVwiXWApO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgZWxlbWVudC5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdjZW50ZXInIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3Um9vbVR5cGVSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWRkVG9hc3Qoe1xuICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgbWVzc2FnZTogcmVzdWx0LmVycm9yPy5tZXNzYWdlIHx8ICdPcGVyYXRpb24gZmFpbGVkJyxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFkZFRvYXN0KHtcbiAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnT3BlcmF0aW9uIGZhaWxlZCcsXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtzZWxlY3RlZFJvb21UeXBlLCBhY2NvbW1vZGF0aW9uSWQsIGFkZFRvYXN0LCBmZXRjaFJvb21UeXBlc10pO1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgZGVsZXRlIGNvbmZpcm1hdGlvblxuICAgKi9cbiAgY29uc3QgaGFuZGxlRGVsZXRlQ29uZmlybSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXJvb21UeXBlVG9EZWxldGUpIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2FkbWluL3Jvb20tdHlwZXMvJHtyb29tVHlwZVRvRGVsZXRlLmlkfWAsIHtcbiAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBhZGRUb2FzdCh7XG4gICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdSb29tIHR5cGUgZGVsZXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlZnJlc2ggcm9vbSB0eXBlIGxpc3RcbiAgICAgICAgYXdhaXQgZmV0Y2hSb29tVHlwZXMoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENsb3NlIGRpYWxvZ1xuICAgICAgICBzZXRJc0RlbGV0ZURpYWxvZ09wZW4oZmFsc2UpO1xuICAgICAgICBzZXRSb29tVHlwZVRvRGVsZXRlKG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWRkVG9hc3Qoe1xuICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgbWVzc2FnZTogcmVzdWx0LmVycm9yPy5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gZGVsZXRlIHJvb20gdHlwZScsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhZGRUb2FzdCh7XG4gICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBkZWxldGUgcm9vbSB0eXBlJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3Jvb21UeXBlVG9EZWxldGUsIGFkZFRvYXN0LCBmZXRjaFJvb21UeXBlc10pO1xuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgb2NjdXBhbmN5IHBlcmNlbnRhZ2VcbiAgICovXG4gIGNvbnN0IGNhbGN1bGF0ZU9jY3VwYW5jeSA9IChyb29tVHlwZTogUm9vbVR5cGUpID0+IHtcbiAgICAvLyBUaGlzIHdvdWxkIG5lZWQgdG8gZmV0Y2ggYWN0dWFsIGFzc2lnbm1lbnRzXG4gICAgLy8gRm9yIG5vdywgcmV0dXJuIDAgYXMgcGxhY2Vob2xkZXJcbiAgICByZXR1cm4gMDtcbiAgfTtcblxuICAvKipcbiAgICogRm9ybWF0IGN1cnJlbmN5IGZvciBkaXNwbGF5XG4gICAqL1xuICBjb25zdCBmb3JtYXRDdXJyZW5jeSA9IChhbW91bnQ6IG51bWJlcikgPT4ge1xuICAgIHJldHVybiBuZXcgSW50bC5OdW1iZXJGb3JtYXQoJ2VuLVVTJywge1xuICAgICAgc3R5bGU6ICdjdXJyZW5jeScsXG4gICAgICBjdXJyZW5jeTogJ1VTRCcsXG4gICAgfSkuZm9ybWF0KGFtb3VudCk7XG4gIH07XG5cbiAgLy8gRGVmaW5lIHRhYmxlIGNvbHVtbnNcbiAgY29uc3QgY29sdW1uczogQ29sdW1uRGVmPFJvb21UeXBlPltdID0gW1xuICAgIHtcbiAgICAgIGtleTogJ25hbWUnLFxuICAgICAgbGFiZWw6ICdOYW1lJyxcbiAgICAgIHNvcnRhYmxlOiB0cnVlLFxuICAgIH0sXG4gICAge1xuICAgICAga2V5OiAnY2FwYWNpdHknLFxuICAgICAgbGFiZWw6ICdDYXBhY2l0eScsXG4gICAgICBzb3J0YWJsZTogdHJ1ZSxcbiAgICAgIHJlbmRlcjogKHZhbHVlKSA9PiBgJHt2YWx1ZX0gZ3Vlc3RzYCxcbiAgICB9LFxuICAgIHtcbiAgICAgIGtleTogJ3RvdGFsUm9vbXMnLFxuICAgICAgbGFiZWw6ICdUb3RhbCBSb29tcycsXG4gICAgICBzb3J0YWJsZTogdHJ1ZSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGtleTogJ3ByaWNlUGVyTmlnaHQnLFxuICAgICAgbGFiZWw6ICdQcmljZS9OaWdodCcsXG4gICAgICBzb3J0YWJsZTogdHJ1ZSxcbiAgICAgIHJlbmRlcjogKHZhbHVlKSA9PiBmb3JtYXRDdXJyZW5jeSh2YWx1ZSBhcyBudW1iZXIpLFxuICAgIH0sXG4gICAge1xuICAgICAga2V5OiAnb2NjdXBhbmN5JyxcbiAgICAgIGxhYmVsOiAnT2NjdXBhbmN5JyxcbiAgICAgIHNvcnRhYmxlOiBmYWxzZSxcbiAgICAgIHJlbmRlcjogKF8sIHJvdykgPT4ge1xuICAgICAgICBjb25zdCByb29tVHlwZSA9IHJvdyBhcyBSb29tVHlwZTtcbiAgICAgICAgY29uc3Qgb2NjdXBhbmN5ID0gY2FsY3VsYXRlT2NjdXBhbmN5KHJvb21UeXBlKTtcbiAgICAgICAgY29uc3QgcGVyY2VudGFnZSA9IHJvb21UeXBlLnRvdGFsUm9vbXMgPiAwID8gKG9jY3VwYW5jeSAvIHJvb21UeXBlLnRvdGFsUm9vbXMpICogMTAwIDogMDtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXNhZ2UtOTAwXCI+XG4gICAgICAgICAgICAgIHtvY2N1cGFuY3l9L3tyb29tVHlwZS50b3RhbFJvb21zfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXNhZ2UtNjAwXCI+XG4gICAgICAgICAgICAgICh7cGVyY2VudGFnZS50b0ZpeGVkKDApfSUpXG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAga2V5OiAnYWN0aW9ucycsXG4gICAgICBsYWJlbDogJ0FjdGlvbnMnLFxuICAgICAgc29ydGFibGU6IGZhbHNlLFxuICAgICAgcmVuZGVyOiAoXywgcm93KSA9PiAoXG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICB2YXJpYW50PVwic2Vjb25kYXJ5XCJcbiAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgaGFuZGxlTWFuYWdlU2VjdGlvbnMocm93IGFzIFJvb21UeXBlKTtcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgTWFuYWdlIFNlY3Rpb25zXG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgKSxcbiAgICB9LFxuICBdO1xuXG4gIC8vIERlZmluZSBmb3JtIGZpZWxkc1xuICBjb25zdCBmb3JtRmllbGRzOiBGb3JtRmllbGRbXSA9IFtcbiAgICB7XG4gICAgICBuYW1lOiAnbmFtZScsXG4gICAgICBsYWJlbDogJ1Jvb20gVHlwZSBOYW1lJyxcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgcGxhY2Vob2xkZXI6ICdFbnRlciByb29tIHR5cGUgbmFtZSAoZS5nLiwgT2NlYW4gVmlldyBTdWl0ZSknLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ2NhcGFjaXR5JyxcbiAgICAgIGxhYmVsOiAnQ2FwYWNpdHknLFxuICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgIHBsYWNlaG9sZGVyOiAnTWF4aW11bSBndWVzdHMgcGVyIHJvb20nLFxuICAgICAgaGVscFRleHQ6ICdNYXhpbXVtIG51bWJlciBvZiBndWVzdHMgdGhhdCBjYW4gc3RheSBpbiB0aGlzIHJvb20gdHlwZScsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAndG90YWxSb29tcycsXG4gICAgICBsYWJlbDogJ1RvdGFsIFJvb21zJyxcbiAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICBwbGFjZWhvbGRlcjogJ051bWJlciBvZiByb29tcyBhdmFpbGFibGUnLFxuICAgICAgaGVscFRleHQ6ICdUb3RhbCBudW1iZXIgb2Ygcm9vbXMgb2YgdGhpcyB0eXBlJyxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdwcmljZVBlck5pZ2h0JyxcbiAgICAgIGxhYmVsOiAnUHJpY2UgUGVyIE5pZ2h0JyxcbiAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICBwbGFjZWhvbGRlcjogJzAuMDAnLFxuICAgICAgaGVscFRleHQ6ICdQcmljZSBwZXIgbmlnaHQgaW4gVVNEJyxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdob3N0U3Vic2lkeVBlck5pZ2h0JyxcbiAgICAgIGxhYmVsOiAnSG9zdCBTdWJzaWR5IFBlciBOaWdodCcsXG4gICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgIHBsYWNlaG9sZGVyOiAnMC4wMCcsXG4gICAgICBoZWxwVGV4dDogJ0Ftb3VudCBob3N0IHdpbGwgc3Vic2lkaXplIHBlciBuaWdodCAob3B0aW9uYWwpJyxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdkZXNjcmlwdGlvbicsXG4gICAgICBsYWJlbDogJ0Rlc2NyaXB0aW9uJyxcbiAgICAgIHR5cGU6ICdyaWNodGV4dCcsXG4gICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICBwbGFjZWhvbGRlcjogJ0VudGVyIHJvb20gdHlwZSBkZXNjcmlwdGlvbicsXG4gICAgICBoZWxwVGV4dDogJ1JpY2ggdGV4dCBlZGl0b3IgZm9yIGRldGFpbGVkIHJvb20gdHlwZSBkZXNjcmlwdGlvbicsXG4gICAgfSxcbiAgXTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS02XCI+XG4gICAgICB7LyogUGFnZSBIZWFkZXIgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbWItMlwiPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICB2YXJpYW50PVwic2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQmFja1RvQWNjb21tb2RhdGlvbnN9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIOKGkCBCYWNrIHRvIEFjY29tbW9kYXRpb25zXG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC0zeGwgZm9udC1ib2xkIHRleHQtc2FnZS05MDBcIj5Sb29tIFR5cGVzOiB7YWNjb21tb2RhdGlvbk5hbWV9PC9oMT5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNhZ2UtNjAwIG10LTFcIj5NYW5hZ2Ugcm9vbSB0eXBlcyBhbmQgZ3Vlc3QgYXNzaWdubWVudHM8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgdmFyaWFudD1cInByaW1hcnlcIlxuICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFkZFJvb21UeXBlfVxuICAgICAgICAgIGFyaWEtbGFiZWw9XCJDcmVhdGUgbmV3IHJvb20gdHlwZVwiXG4gICAgICAgICAgZGF0YS1hY3Rpb249XCJhZGQtbmV3XCJcbiAgICAgICAgPlxuICAgICAgICAgICsgQWRkIFJvb20gVHlwZVxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogQ29sbGFwc2libGUgRm9ybSAqL31cbiAgICAgIDxDb2xsYXBzaWJsZUZvcm1cbiAgICAgICAgaXNPcGVuPXtpc0Zvcm1PcGVufVxuICAgICAgICBvblRvZ2dsZT17KCkgPT4ge1xuICAgICAgICAgIHNldElzRm9ybU9wZW4oIWlzRm9ybU9wZW4pO1xuICAgICAgICAgIGlmIChpc0Zvcm1PcGVuKSB7XG4gICAgICAgICAgICBzZXRTZWxlY3RlZFJvb21UeXBlKG51bGwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfX1cbiAgICAgICAgdGl0bGU9e3NlbGVjdGVkUm9vbVR5cGUgPyAnRWRpdCBSb29tIFR5cGUnIDogJ0FkZCBOZXcgUm9vbSBUeXBlJ31cbiAgICAgICAgZmllbGRzPXtmb3JtRmllbGRzfVxuICAgICAgICBzY2hlbWE9e3NlbGVjdGVkUm9vbVR5cGUgPyB1cGRhdGVSb29tVHlwZVNjaGVtYSA6IGNyZWF0ZVJvb21UeXBlU2NoZW1hfVxuICAgICAgICBvblN1Ym1pdD17aGFuZGxlU3VibWl0fVxuICAgICAgICBvbkNhbmNlbD17KCkgPT4ge1xuICAgICAgICAgIHNldElzRm9ybU9wZW4oZmFsc2UpO1xuICAgICAgICAgIHNldFNlbGVjdGVkUm9vbVR5cGUobnVsbCk7XG4gICAgICAgIH19XG4gICAgICAgIGluaXRpYWxEYXRhPXtzZWxlY3RlZFJvb21UeXBlIHx8IHt9fVxuICAgICAgICBzdWJtaXRMYWJlbD17c2VsZWN0ZWRSb29tVHlwZSA/ICdVcGRhdGUgUm9vbSBUeXBlJyA6ICdDcmVhdGUgUm9vbSBUeXBlJ31cbiAgICAgIC8+XG5cbiAgICAgIHsvKiBEYXRhIFRhYmxlICovfVxuICAgICAgPERhdGFUYWJsZVxuICAgICAgICBkYXRhPXtyb29tVHlwZXN9XG4gICAgICAgIGNvbHVtbnM9e2NvbHVtbnN9XG4gICAgICAgIGxvYWRpbmc9e2xvYWRpbmd9XG4gICAgICAgIG9uUm93Q2xpY2s9e2hhbmRsZVJvd0NsaWNrfVxuICAgICAgICBvbkRlbGV0ZT17aGFuZGxlRGVsZXRlQ2xpY2t9XG4gICAgICAgIHRvdGFsQ291bnQ9e3Jvb21UeXBlcy5sZW5ndGh9XG4gICAgICAgIGN1cnJlbnRQYWdlPXsxfVxuICAgICAgICBwYWdlU2l6ZT17MjV9XG4gICAgICAgIGlkRmllbGQ9XCJpZFwiXG4gICAgICAvPlxuXG4gICAgICB7LyogRGVsZXRlIENvbmZpcm1hdGlvbiBEaWFsb2cgKi99XG4gICAgICA8Q29uZmlybURpYWxvZ1xuICAgICAgICBpc09wZW49e2lzRGVsZXRlRGlhbG9nT3Blbn1cbiAgICAgICAgb25DbG9zZT17KCkgPT4ge1xuICAgICAgICAgIHNldElzRGVsZXRlRGlhbG9nT3BlbihmYWxzZSk7XG4gICAgICAgICAgc2V0Um9vbVR5cGVUb0RlbGV0ZShudWxsKTtcbiAgICAgICAgfX1cbiAgICAgICAgb25Db25maXJtPXtoYW5kbGVEZWxldGVDb25maXJtfVxuICAgICAgICB0aXRsZT1cIkRlbGV0ZSBSb29tIFR5cGVcIlxuICAgICAgICBtZXNzYWdlPXtgQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSBcIiR7cm9vbVR5cGVUb0RlbGV0ZT8ubmFtZX1cIj8gVGhpcyB3aWxsIHVuYXNzaWduIGFsbCBndWVzdHMgZnJvbSB0aGlzIHJvb20gdHlwZS4gVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZS5gfVxuICAgICAgICBjb25maXJtTGFiZWw9XCJEZWxldGVcIlxuICAgICAgICBjYW5jZWxMYWJlbD1cIkNhbmNlbFwiXG4gICAgICAgIHZhcmlhbnQ9XCJkYW5nZXJcIlxuICAgICAgLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJSb29tVHlwZXNQYWdlIiwiZHluYW1pYyIsInBhcmFtcyIsImFkZFRvYXN0IiwidXNlVG9hc3QiLCJyb3V0ZXIiLCJ1c2VSb3V0ZXIiLCJhY2NvbW1vZGF0aW9uSWQiLCJzZXRBY2NvbW1vZGF0aW9uSWQiLCJ1c2VTdGF0ZSIsInJvb21UeXBlcyIsInNldFJvb21UeXBlcyIsImFjY29tbW9kYXRpb25OYW1lIiwic2V0QWNjb21tb2RhdGlvbk5hbWUiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsImlzRm9ybU9wZW4iLCJzZXRJc0Zvcm1PcGVuIiwiaXNEZWxldGVEaWFsb2dPcGVuIiwic2V0SXNEZWxldGVEaWFsb2dPcGVuIiwic2VsZWN0ZWRSb29tVHlwZSIsInNldFNlbGVjdGVkUm9vbVR5cGUiLCJyb29tVHlwZVRvRGVsZXRlIiwic2V0Um9vbVR5cGVUb0RlbGV0ZSIsIm5ld1Jvb21UeXBlUmVmIiwidXNlUmVmIiwidXNlRWZmZWN0IiwidGhlbiIsImlkIiwiZmV0Y2hBY2NvbW1vZGF0aW9uIiwidXNlQ2FsbGJhY2siLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJFcnJvciIsInJlc3VsdCIsImpzb24iLCJzdWNjZXNzIiwiZGF0YSIsIm5hbWUiLCJlcnJvciIsImNvbnNvbGUiLCJmZXRjaFJvb21UeXBlcyIsInR5cGUiLCJtZXNzYWdlIiwiaGFuZGxlUm93Q2xpY2siLCJyb29tVHlwZSIsImhhbmRsZUFkZFJvb21UeXBlIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVNYW5hZ2VTZWN0aW9ucyIsInB1c2giLCJoYW5kbGVCYWNrVG9BY2NvbW1vZGF0aW9ucyIsImhhbmRsZVN1Ym1pdCIsImlzRWRpdCIsInN1Ym1pdERhdGEiLCJ1cmwiLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjdXJyZW50Iiwic2V0VGltZW91dCIsImVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwiYmxvY2siLCJoYW5kbGVEZWxldGVDb25maXJtIiwiY2FsY3VsYXRlT2NjdXBhbmN5IiwiZm9ybWF0Q3VycmVuY3kiLCJhbW91bnQiLCJJbnRsIiwiTnVtYmVyRm9ybWF0Iiwic3R5bGUiLCJjdXJyZW5jeSIsImZvcm1hdCIsImNvbHVtbnMiLCJrZXkiLCJsYWJlbCIsInNvcnRhYmxlIiwicmVuZGVyIiwidmFsdWUiLCJfIiwicm93Iiwib2NjdXBhbmN5IiwicGVyY2VudGFnZSIsInRvdGFsUm9vbXMiLCJkaXYiLCJjbGFzc05hbWUiLCJzcGFuIiwidG9GaXhlZCIsIkJ1dHRvbiIsInZhcmlhbnQiLCJzaXplIiwib25DbGljayIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJmb3JtRmllbGRzIiwicmVxdWlyZWQiLCJwbGFjZWhvbGRlciIsImhlbHBUZXh0IiwiaDEiLCJwIiwiYXJpYS1sYWJlbCIsImRhdGEtYWN0aW9uIiwiQ29sbGFwc2libGVGb3JtIiwiaXNPcGVuIiwib25Ub2dnbGUiLCJ0aXRsZSIsImZpZWxkcyIsInNjaGVtYSIsInVwZGF0ZVJvb21UeXBlU2NoZW1hIiwiY3JlYXRlUm9vbVR5cGVTY2hlbWEiLCJvblN1Ym1pdCIsIm9uQ2FuY2VsIiwiaW5pdGlhbERhdGEiLCJzdWJtaXRMYWJlbCIsIkRhdGFUYWJsZSIsIm9uUm93Q2xpY2siLCJvbkRlbGV0ZSIsInRvdGFsQ291bnQiLCJsZW5ndGgiLCJjdXJyZW50UGFnZSIsInBhZ2VTaXplIiwiaWRGaWVsZCIsIkNvbmZpcm1EaWFsb2ciLCJvbkNsb3NlIiwib25Db25maXJtIiwiY29uZmlybUxhYmVsIiwiY2FuY2VsTGFiZWwiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7UUFlQTs7Ozs7Ozs7Ozs7Ozs7O0NBZUMsR0FDRDtlQUF3QkE7O1FBN0JYQztlQUFBQTs7Ozt1QkFFNEM7dUNBQ1U7aUNBQ25DOytCQUNGO3dCQUNQOzhCQUNFO3NDQUVrQzs0QkFFakM7QUFYbkIsTUFBTUEsVUFBVTtBQTZCUixTQUFTRCxjQUFjLEVBQUVFLE1BQU0sRUFBdUM7SUFDbkYsTUFBTSxFQUFFQyxRQUFRLEVBQUUsR0FBR0MsSUFBQUEsc0JBQVE7SUFDN0IsTUFBTUMsU0FBU0MsSUFBQUEscUJBQVM7SUFDeEIsTUFBTSxDQUFDQyxpQkFBaUJDLG1CQUFtQixHQUFHQyxJQUFBQSxlQUFRLEVBQVM7SUFFL0QsbUJB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