5837a9af39e597f2b95e5c5df87c47e4
/**
 * Unit tests for Supabase Server Client utilities
 * 
 * Tests server-side Supabase client creation with async cookies handling.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
// Mock Next.js headers
_globals.jest.mock('next/headers', ()=>({
        cookies: _globals.jest.fn()
    }));
// Mock Supabase SSR
_globals.jest.mock('@supabase/ssr', ()=>({
        createServerClient: _globals.jest.fn()
    }));
(0, _globals.describe)('supabaseServer', ()=>{
    let mockCookieStore;
    let mockSupabaseClient;
    (0, _globals.beforeEach)(()=>{
        _globals.jest.clearAllMocks();
        // Setup mock cookie store
        mockCookieStore = {
            getAll: _globals.jest.fn().mockReturnValue([]),
            set: _globals.jest.fn()
        };
        // Setup mock Supabase client
        mockSupabaseClient = {
            auth: {
                getSession: _globals.jest.fn(),
                getUser: _globals.jest.fn()
            },
            from: _globals.jest.fn()
        };
        // Mock cookies() to return our mock store
        const { cookies } = require('next/headers');
        cookies.mockResolvedValue(mockCookieStore);
        // Mock createServerClient to return our mock client
        const { createServerClient } = require('@supabase/ssr');
        createServerClient.mockReturnValue(mockSupabaseClient);
    });
    (0, _globals.describe)('createAuthenticatedClient', ()=>{
        (0, _globals.it)('should create Supabase client with cookie handling', async ()=>{
            const { createServerClient } = require('@supabase/ssr');
            const { createAuthenticatedClient } = require('./supabaseServer');
            await createAuthenticatedClient();
            (0, _globals.expect)(createServerClient).toHaveBeenCalledWith(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY, _globals.expect.objectContaining({
                cookies: _globals.expect.objectContaining({
                    getAll: _globals.expect.any(Function),
                    setAll: _globals.expect.any(Function)
                })
            }));
        });
        (0, _globals.it)('should return Supabase client instance', async ()=>{
            const { createAuthenticatedClient } = require('./supabaseServer');
            const client = await createAuthenticatedClient();
            (0, _globals.expect)(client).toBeDefined();
            (0, _globals.expect)(client).toBe(mockSupabaseClient);
        });
        (0, _globals.it)('should await cookies() before creating client', async ()=>{
            const { cookies } = require('next/headers');
            const { createAuthenticatedClient } = require('./supabaseServer');
            await createAuthenticatedClient();
            (0, _globals.expect)(cookies).toHaveBeenCalled();
        });
        (0, _globals.it)('should handle cookie getAll correctly', async ()=>{
            const mockCookies = [
                {
                    name: 'session',
                    value: 'abc123'
                },
                {
                    name: 'refresh',
                    value: 'xyz789'
                }
            ];
            mockCookieStore.getAll.mockReturnValue(mockCookies);
            const { createAuthenticatedClient } = require('./supabaseServer');
            await createAuthenticatedClient();
            const { createServerClient } = require('@supabase/ssr');
            const cookiesConfig = createServerClient.mock.calls[0][2].cookies;
            const result = cookiesConfig.getAll();
            (0, _globals.expect)(result).toEqual(mockCookies);
        });
        (0, _globals.it)('should handle cookie setAll correctly', async ()=>{
            const { createAuthenticatedClient } = require('./supabaseServer');
            await createAuthenticatedClient();
            const { createServerClient } = require('@supabase/ssr');
            const cookiesConfig = createServerClient.mock.calls[0][2].cookies;
            const cookiesToSet = [
                {
                    name: 'session',
                    value: 'new123',
                    options: {}
                },
                {
                    name: 'refresh',
                    value: 'new789',
                    options: {}
                }
            ];
            cookiesConfig.setAll(cookiesToSet);
            (0, _globals.expect)(mockCookieStore.set).toHaveBeenCalledTimes(2);
            (0, _globals.expect)(mockCookieStore.set).toHaveBeenCalledWith('session', 'new123', {});
            (0, _globals.expect)(mockCookieStore.set).toHaveBeenCalledWith('refresh', 'new789', {});
        });
        (0, _globals.it)('should handle cookie setting errors gracefully', async ()=>{
            mockCookieStore.set.mockImplementation(()=>{
                throw new Error('Cookie setting failed');
            });
            const { createAuthenticatedClient } = require('./supabaseServer');
            await createAuthenticatedClient();
            const { createServerClient } = require('@supabase/ssr');
            const cookiesConfig = createServerClient.mock.calls[0][2].cookies;
            const cookiesToSet = [
                {
                    name: 'session',
                    value: 'new123',
                    options: {}
                }
            ];
            // Should not throw error
            (0, _globals.expect)(()=>{
                cookiesConfig.setAll(cookiesToSet);
            }).not.toThrow();
        });
        (0, _globals.it)('should log error when cookie setting fails', async ()=>{
            const consoleErrorSpy = _globals.jest.spyOn(console, 'error').mockImplementation();
            mockCookieStore.set.mockImplementation(()=>{
                throw new Error('Cookie setting failed');
            });
            const { createAuthenticatedClient } = require('./supabaseServer');
            await createAuthenticatedClient();
            const { createServerClient } = require('@supabase/ssr');
            const cookiesConfig = createServerClient.mock.calls[0][2].cookies;
            const cookiesToSet = [
                {
                    name: 'session',
                    value: 'new123',
                    options: {}
                }
            ];
            cookiesConfig.setAll(cookiesToSet);
            (0, _globals.expect)(consoleErrorSpy).toHaveBeenCalledWith('Error setting cookies:', _globals.expect.any(Error));
            consoleErrorSpy.mockRestore();
        });
        (0, _globals.it)('should handle empty cookie array', async ()=>{
            mockCookieStore.getAll.mockReturnValue([]);
            const { createAuthenticatedClient } = require('./supabaseServer');
            await createAuthenticatedClient();
            const { createServerClient } = require('@supabase/ssr');
            const cookiesConfig = createServerClient.mock.calls[0][2].cookies;
            const result = cookiesConfig.getAll();
            (0, _globals.expect)(result).toEqual([]);
        });
        (0, _globals.it)('should handle setting empty cookie array', async ()=>{
            const { createAuthenticatedClient } = require('./supabaseServer');
            await createAuthenticatedClient();
            const { createServerClient } = require('@supabase/ssr');
            const cookiesConfig = createServerClient.mock.calls[0][2].cookies;
            cookiesConfig.setAll([]);
            (0, _globals.expect)(mockCookieStore.set).not.toHaveBeenCalled();
        });
        (0, _globals.it)('should handle cookies with options', async ()=>{
            const { createAuthenticatedClient } = require('./supabaseServer');
            await createAuthenticatedClient();
            const { createServerClient } = require('@supabase/ssr');
            const cookiesConfig = createServerClient.mock.calls[0][2].cookies;
            const cookiesToSet = [
                {
                    name: 'session',
                    value: 'abc123',
                    options: {
                        httpOnly: true,
                        secure: true,
                        sameSite: 'lax',
                        maxAge: 3600
                    }
                }
            ];
            cookiesConfig.setAll(cookiesToSet);
            (0, _globals.expect)(mockCookieStore.set).toHaveBeenCalledWith('session', 'abc123', {
                httpOnly: true,
                secure: true,
                sameSite: 'lax',
                maxAge: 3600
            });
        });
        (0, _globals.it)('should work with authenticated session', async ()=>{
            mockSupabaseClient.auth.getSession.mockResolvedValue({
                data: {
                    session: {
                        user: {
                            id: 'user-123',
                            email: 'test@example.com'
                        },
                        access_token: 'token-123'
                    }
                },
                error: null
            });
            const { createAuthenticatedClient } = require('./supabaseServer');
            const client = await createAuthenticatedClient();
            const { data } = await client.auth.getSession();
            (0, _globals.expect)(data.session).toBeDefined();
            (0, _globals.expect)(data.session.user.id).toBe('user-123');
        });
        (0, _globals.it)('should work without authenticated session', async ()=>{
            mockSupabaseClient.auth.getSession.mockResolvedValue({
                data: {
                    session: null
                },
                error: null
            });
            const { createAuthenticatedClient } = require('./supabaseServer');
            const client = await createAuthenticatedClient();
            const { data } = await client.auth.getSession();
            (0, _globals.expect)(data.session).toBeNull();
        });
    });
    (0, _globals.describe)('environment variable handling', ()=>{
        (0, _globals.it)('should use NEXT_PUBLIC_SUPABASE_URL from environment', async ()=>{
            process.env.NEXT_PUBLIC_SUPABASE_URL = 'https://custom.supabase.co';
            const { createServerClient } = require('@supabase/ssr');
            const { createAuthenticatedClient } = require('./supabaseServer');
            await createAuthenticatedClient();
            (0, _globals.expect)(createServerClient).toHaveBeenCalledWith('https://custom.supabase.co', _globals.expect.any(String), _globals.expect.any(Object));
        });
        (0, _globals.it)('should use NEXT_PUBLIC_SUPABASE_ANON_KEY from environment', async ()=>{
            process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = 'custom-anon-key';
            const { createServerClient } = require('@supabase/ssr');
            const { createAuthenticatedClient } = require('./supabaseServer');
            await createAuthenticatedClient();
            (0, _globals.expect)(createServerClient).toHaveBeenCalledWith(_globals.expect.any(String), 'custom-anon-key', _globals.expect.any(Object));
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvbGliL3N1cGFiYXNlU2VydmVyLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVbml0IHRlc3RzIGZvciBTdXBhYmFzZSBTZXJ2ZXIgQ2xpZW50IHV0aWxpdGllc1xuICogXG4gKiBUZXN0cyBzZXJ2ZXItc2lkZSBTdXBhYmFzZSBjbGllbnQgY3JlYXRpb24gd2l0aCBhc3luYyBjb29raWVzIGhhbmRsaW5nLlxuICovXG5cbmltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCBqZXN0LCBiZWZvcmVFYWNoIH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5cbi8vIE1vY2sgTmV4dC5qcyBoZWFkZXJzXG5qZXN0Lm1vY2soJ25leHQvaGVhZGVycycsICgpID0+ICh7XG4gIGNvb2tpZXM6IGplc3QuZm4oKSxcbn0pKTtcblxuLy8gTW9jayBTdXBhYmFzZSBTU1Jcbmplc3QubW9jaygnQHN1cGFiYXNlL3NzcicsICgpID0+ICh7XG4gIGNyZWF0ZVNlcnZlckNsaWVudDogamVzdC5mbigpLFxufSkpO1xuXG5kZXNjcmliZSgnc3VwYWJhc2VTZXJ2ZXInLCAoKSA9PiB7XG4gIGxldCBtb2NrQ29va2llU3RvcmU6IGFueTtcbiAgbGV0IG1vY2tTdXBhYmFzZUNsaWVudDogYW55O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuXG4gICAgLy8gU2V0dXAgbW9jayBjb29raWUgc3RvcmVcbiAgICBtb2NrQ29va2llU3RvcmUgPSB7XG4gICAgICBnZXRBbGw6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoW10pLFxuICAgICAgc2V0OiBqZXN0LmZuKCksXG4gICAgfTtcblxuICAgIC8vIFNldHVwIG1vY2sgU3VwYWJhc2UgY2xpZW50XG4gICAgbW9ja1N1cGFiYXNlQ2xpZW50ID0ge1xuICAgICAgYXV0aDoge1xuICAgICAgICBnZXRTZXNzaW9uOiBqZXN0LmZuKCksXG4gICAgICAgIGdldFVzZXI6IGplc3QuZm4oKSxcbiAgICAgIH0sXG4gICAgICBmcm9tOiBqZXN0LmZuKCksXG4gICAgfTtcblxuICAgIC8vIE1vY2sgY29va2llcygpIHRvIHJldHVybiBvdXIgbW9jayBzdG9yZVxuICAgIGNvbnN0IHsgY29va2llcyB9ID0gcmVxdWlyZSgnbmV4dC9oZWFkZXJzJyk7XG4gICAgKGNvb2tpZXMgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ29va2llU3RvcmUpO1xuXG4gICAgLy8gTW9jayBjcmVhdGVTZXJ2ZXJDbGllbnQgdG8gcmV0dXJuIG91ciBtb2NrIGNsaWVudFxuICAgIGNvbnN0IHsgY3JlYXRlU2VydmVyQ2xpZW50IH0gPSByZXF1aXJlKCdAc3VwYWJhc2Uvc3NyJyk7XG4gICAgKGNyZWF0ZVNlcnZlckNsaWVudCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2VDbGllbnQpO1xuICB9KTtcblxuICBkZXNjcmliZSgnY3JlYXRlQXV0aGVudGljYXRlZENsaWVudCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBTdXBhYmFzZSBjbGllbnQgd2l0aCBjb29raWUgaGFuZGxpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IGNyZWF0ZVNlcnZlckNsaWVudCB9ID0gcmVxdWlyZSgnQHN1cGFiYXNlL3NzcicpO1xuICAgICAgY29uc3QgeyBjcmVhdGVBdXRoZW50aWNhdGVkQ2xpZW50IH0gPSByZXF1aXJlKCcuL3N1cGFiYXNlU2VydmVyJyk7XG4gICAgICBcbiAgICAgIGF3YWl0IGNyZWF0ZUF1dGhlbnRpY2F0ZWRDbGllbnQoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGNyZWF0ZVNlcnZlckNsaWVudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCxcbiAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVksXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBjb29raWVzOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICBnZXRBbGw6IGV4cGVjdC5hbnkoRnVuY3Rpb24pLFxuICAgICAgICAgICAgc2V0QWxsOiBleHBlY3QuYW55KEZ1bmN0aW9uKSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBTdXBhYmFzZSBjbGllbnQgaW5zdGFuY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IGNyZWF0ZUF1dGhlbnRpY2F0ZWRDbGllbnQgfSA9IHJlcXVpcmUoJy4vc3VwYWJhc2VTZXJ2ZXInKTtcbiAgICAgIFxuICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgY3JlYXRlQXV0aGVudGljYXRlZENsaWVudCgpO1xuICAgICAgXG4gICAgICBleHBlY3QoY2xpZW50KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGNsaWVudCkudG9CZShtb2NrU3VwYWJhc2VDbGllbnQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhd2FpdCBjb29raWVzKCkgYmVmb3JlIGNyZWF0aW5nIGNsaWVudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgY29va2llcyB9ID0gcmVxdWlyZSgnbmV4dC9oZWFkZXJzJyk7XG4gICAgICBjb25zdCB7IGNyZWF0ZUF1dGhlbnRpY2F0ZWRDbGllbnQgfSA9IHJlcXVpcmUoJy4vc3VwYWJhc2VTZXJ2ZXInKTtcbiAgICAgIFxuICAgICAgYXdhaXQgY3JlYXRlQXV0aGVudGljYXRlZENsaWVudCgpO1xuICAgICAgXG4gICAgICBleHBlY3QoY29va2llcykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29va2llIGdldEFsbCBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQ29va2llcyA9IFtcbiAgICAgICAgeyBuYW1lOiAnc2Vzc2lvbicsIHZhbHVlOiAnYWJjMTIzJyB9LFxuICAgICAgICB7IG5hbWU6ICdyZWZyZXNoJywgdmFsdWU6ICd4eXo3ODknIH0sXG4gICAgICBdO1xuICAgICAgbW9ja0Nvb2tpZVN0b3JlLmdldEFsbC5tb2NrUmV0dXJuVmFsdWUobW9ja0Nvb2tpZXMpO1xuICAgICAgXG4gICAgICBjb25zdCB7IGNyZWF0ZUF1dGhlbnRpY2F0ZWRDbGllbnQgfSA9IHJlcXVpcmUoJy4vc3VwYWJhc2VTZXJ2ZXInKTtcbiAgICAgIGF3YWl0IGNyZWF0ZUF1dGhlbnRpY2F0ZWRDbGllbnQoKTtcbiAgICAgIFxuICAgICAgY29uc3QgeyBjcmVhdGVTZXJ2ZXJDbGllbnQgfSA9IHJlcXVpcmUoJ0BzdXBhYmFzZS9zc3InKTtcbiAgICAgIGNvbnN0IGNvb2tpZXNDb25maWcgPSAoY3JlYXRlU2VydmVyQ2xpZW50IGFzIGplc3QuTW9jaykubW9jay5jYWxsc1swXVsyXS5jb29raWVzO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBjb29raWVzQ29uZmlnLmdldEFsbCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrQ29va2llcyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb29raWUgc2V0QWxsIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgY3JlYXRlQXV0aGVudGljYXRlZENsaWVudCB9ID0gcmVxdWlyZSgnLi9zdXBhYmFzZVNlcnZlcicpO1xuICAgICAgYXdhaXQgY3JlYXRlQXV0aGVudGljYXRlZENsaWVudCgpO1xuICAgICAgXG4gICAgICBjb25zdCB7IGNyZWF0ZVNlcnZlckNsaWVudCB9ID0gcmVxdWlyZSgnQHN1cGFiYXNlL3NzcicpO1xuICAgICAgY29uc3QgY29va2llc0NvbmZpZyA9IChjcmVhdGVTZXJ2ZXJDbGllbnQgYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzWzBdWzJdLmNvb2tpZXM7XG4gICAgICBcbiAgICAgIGNvbnN0IGNvb2tpZXNUb1NldCA9IFtcbiAgICAgICAgeyBuYW1lOiAnc2Vzc2lvbicsIHZhbHVlOiAnbmV3MTIzJywgb3B0aW9uczoge30gfSxcbiAgICAgICAgeyBuYW1lOiAncmVmcmVzaCcsIHZhbHVlOiAnbmV3Nzg5Jywgb3B0aW9uczoge30gfSxcbiAgICAgIF07XG4gICAgICBcbiAgICAgIGNvb2tpZXNDb25maWcuc2V0QWxsKGNvb2tpZXNUb1NldCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtb2NrQ29va2llU3RvcmUuc2V0KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMik7XG4gICAgICBleHBlY3QobW9ja0Nvb2tpZVN0b3JlLnNldCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3Nlc3Npb24nLCAnbmV3MTIzJywge30pO1xuICAgICAgZXhwZWN0KG1vY2tDb29raWVTdG9yZS5zZXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdyZWZyZXNoJywgJ25ldzc4OScsIHt9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvb2tpZSBzZXR0aW5nIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0Nvb2tpZVN0b3JlLnNldC5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nvb2tpZSBzZXR0aW5nIGZhaWxlZCcpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHsgY3JlYXRlQXV0aGVudGljYXRlZENsaWVudCB9ID0gcmVxdWlyZSgnLi9zdXBhYmFzZVNlcnZlcicpO1xuICAgICAgYXdhaXQgY3JlYXRlQXV0aGVudGljYXRlZENsaWVudCgpO1xuICAgICAgXG4gICAgICBjb25zdCB7IGNyZWF0ZVNlcnZlckNsaWVudCB9ID0gcmVxdWlyZSgnQHN1cGFiYXNlL3NzcicpO1xuICAgICAgY29uc3QgY29va2llc0NvbmZpZyA9IChjcmVhdGVTZXJ2ZXJDbGllbnQgYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzWzBdWzJdLmNvb2tpZXM7XG4gICAgICBcbiAgICAgIGNvbnN0IGNvb2tpZXNUb1NldCA9IFtcbiAgICAgICAgeyBuYW1lOiAnc2Vzc2lvbicsIHZhbHVlOiAnbmV3MTIzJywgb3B0aW9uczoge30gfSxcbiAgICAgIF07XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBub3QgdGhyb3cgZXJyb3JcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIGNvb2tpZXNDb25maWcuc2V0QWxsKGNvb2tpZXNUb1NldCk7XG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsb2cgZXJyb3Igd2hlbiBjb29raWUgc2V0dGluZyBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnNvbGVFcnJvclNweSA9IGplc3Quc3B5T24oY29uc29sZSwgJ2Vycm9yJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XG4gICAgICBtb2NrQ29va2llU3RvcmUuc2V0Lm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ29va2llIHNldHRpbmcgZmFpbGVkJyk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgeyBjcmVhdGVBdXRoZW50aWNhdGVkQ2xpZW50IH0gPSByZXF1aXJlKCcuL3N1cGFiYXNlU2VydmVyJyk7XG4gICAgICBhd2FpdCBjcmVhdGVBdXRoZW50aWNhdGVkQ2xpZW50KCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHsgY3JlYXRlU2VydmVyQ2xpZW50IH0gPSByZXF1aXJlKCdAc3VwYWJhc2Uvc3NyJyk7XG4gICAgICBjb25zdCBjb29raWVzQ29uZmlnID0gKGNyZWF0ZVNlcnZlckNsaWVudCBhcyBqZXN0Lk1vY2spLm1vY2suY2FsbHNbMF1bMl0uY29va2llcztcbiAgICAgIFxuICAgICAgY29uc3QgY29va2llc1RvU2V0ID0gW1xuICAgICAgICB7IG5hbWU6ICdzZXNzaW9uJywgdmFsdWU6ICduZXcxMjMnLCBvcHRpb25zOiB7fSB9LFxuICAgICAgXTtcbiAgICAgIFxuICAgICAgY29va2llc0NvbmZpZy5zZXRBbGwoY29va2llc1RvU2V0KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGNvbnNvbGVFcnJvclNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICdFcnJvciBzZXR0aW5nIGNvb2tpZXM6JyxcbiAgICAgICAgZXhwZWN0LmFueShFcnJvcilcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnNvbGVFcnJvclNweS5tb2NrUmVzdG9yZSgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgY29va2llIGFycmF5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0Nvb2tpZVN0b3JlLmdldEFsbC5tb2NrUmV0dXJuVmFsdWUoW10pO1xuICAgICAgXG4gICAgICBjb25zdCB7IGNyZWF0ZUF1dGhlbnRpY2F0ZWRDbGllbnQgfSA9IHJlcXVpcmUoJy4vc3VwYWJhc2VTZXJ2ZXInKTtcbiAgICAgIGF3YWl0IGNyZWF0ZUF1dGhlbnRpY2F0ZWRDbGllbnQoKTtcbiAgICAgIFxuICAgICAgY29uc3QgeyBjcmVhdGVTZXJ2ZXJDbGllbnQgfSA9IHJlcXVpcmUoJ0BzdXBhYmFzZS9zc3InKTtcbiAgICAgIGNvbnN0IGNvb2tpZXNDb25maWcgPSAoY3JlYXRlU2VydmVyQ2xpZW50IGFzIGplc3QuTW9jaykubW9jay5jYWxsc1swXVsyXS5jb29raWVzO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBjb29raWVzQ29uZmlnLmdldEFsbCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzZXR0aW5nIGVtcHR5IGNvb2tpZSBhcnJheScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgY3JlYXRlQXV0aGVudGljYXRlZENsaWVudCB9ID0gcmVxdWlyZSgnLi9zdXBhYmFzZVNlcnZlcicpO1xuICAgICAgYXdhaXQgY3JlYXRlQXV0aGVudGljYXRlZENsaWVudCgpO1xuICAgICAgXG4gICAgICBjb25zdCB7IGNyZWF0ZVNlcnZlckNsaWVudCB9ID0gcmVxdWlyZSgnQHN1cGFiYXNlL3NzcicpO1xuICAgICAgY29uc3QgY29va2llc0NvbmZpZyA9IChjcmVhdGVTZXJ2ZXJDbGllbnQgYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzWzBdWzJdLmNvb2tpZXM7XG4gICAgICBcbiAgICAgIGNvb2tpZXNDb25maWcuc2V0QWxsKFtdKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG1vY2tDb29raWVTdG9yZS5zZXQpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb29raWVzIHdpdGggb3B0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgY3JlYXRlQXV0aGVudGljYXRlZENsaWVudCB9ID0gcmVxdWlyZSgnLi9zdXBhYmFzZVNlcnZlcicpO1xuICAgICAgYXdhaXQgY3JlYXRlQXV0aGVudGljYXRlZENsaWVudCgpO1xuICAgICAgXG4gICAgICBjb25zdCB7IGNyZWF0ZVNlcnZlckNsaWVudCB9ID0gcmVxdWlyZSgnQHN1cGFiYXNlL3NzcicpO1xuICAgICAgY29uc3QgY29va2llc0NvbmZpZyA9IChjcmVhdGVTZXJ2ZXJDbGllbnQgYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzWzBdWzJdLmNvb2tpZXM7XG4gICAgICBcbiAgICAgIGNvbnN0IGNvb2tpZXNUb1NldCA9IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdzZXNzaW9uJyxcbiAgICAgICAgICB2YWx1ZTogJ2FiYzEyMycsXG4gICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgICBzZWN1cmU6IHRydWUsXG4gICAgICAgICAgICBzYW1lU2l0ZTogJ2xheCcgYXMgY29uc3QsXG4gICAgICAgICAgICBtYXhBZ2U6IDM2MDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIF07XG4gICAgICBcbiAgICAgIGNvb2tpZXNDb25maWcuc2V0QWxsKGNvb2tpZXNUb1NldCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtb2NrQ29va2llU3RvcmUuc2V0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ3Nlc3Npb24nLFxuICAgICAgICAnYWJjMTIzJyxcbiAgICAgICAge1xuICAgICAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgICAgIHNlY3VyZTogdHJ1ZSxcbiAgICAgICAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgICAgICAgbWF4QWdlOiAzNjAwLFxuICAgICAgICB9XG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB3b3JrIHdpdGggYXV0aGVudGljYXRlZCBzZXNzaW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlQ2xpZW50LmF1dGguZ2V0U2Vzc2lvbi5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICB1c2VyOiB7IGlkOiAndXNlci0xMjMnLCBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nIH0sXG4gICAgICAgICAgICBhY2Nlc3NfdG9rZW46ICd0b2tlbi0xMjMnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHsgY3JlYXRlQXV0aGVudGljYXRlZENsaWVudCB9ID0gcmVxdWlyZSgnLi9zdXBhYmFzZVNlcnZlcicpO1xuICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgY3JlYXRlQXV0aGVudGljYXRlZENsaWVudCgpO1xuICAgICAgXG4gICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGNsaWVudC5hdXRoLmdldFNlc3Npb24oKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGRhdGEuc2Vzc2lvbikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChkYXRhLnNlc3Npb24udXNlci5pZCkudG9CZSgndXNlci0xMjMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgd29yayB3aXRob3V0IGF1dGhlbnRpY2F0ZWQgc2Vzc2lvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZUNsaWVudC5hdXRoLmdldFNlc3Npb24ubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB7IHNlc3Npb246IG51bGwgfSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgeyBjcmVhdGVBdXRoZW50aWNhdGVkQ2xpZW50IH0gPSByZXF1aXJlKCcuL3N1cGFiYXNlU2VydmVyJyk7XG4gICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBjcmVhdGVBdXRoZW50aWNhdGVkQ2xpZW50KCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgY2xpZW50LmF1dGguZ2V0U2Vzc2lvbigpO1xuICAgICAgXG4gICAgICBleHBlY3QoZGF0YS5zZXNzaW9uKS50b0JlTnVsbCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZW52aXJvbm1lbnQgdmFyaWFibGUgaGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB1c2UgTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIGZyb20gZW52aXJvbm1lbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgPSAnaHR0cHM6Ly9jdXN0b20uc3VwYWJhc2UuY28nO1xuICAgICAgXG4gICAgICBjb25zdCB7IGNyZWF0ZVNlcnZlckNsaWVudCB9ID0gcmVxdWlyZSgnQHN1cGFiYXNlL3NzcicpO1xuICAgICAgY29uc3QgeyBjcmVhdGVBdXRoZW50aWNhdGVkQ2xpZW50IH0gPSByZXF1aXJlKCcuL3N1cGFiYXNlU2VydmVyJyk7XG4gICAgICBcbiAgICAgIGF3YWl0IGNyZWF0ZUF1dGhlbnRpY2F0ZWRDbGllbnQoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGNyZWF0ZVNlcnZlckNsaWVudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICdodHRwczovL2N1c3RvbS5zdXBhYmFzZS5jbycsXG4gICAgICAgIGV4cGVjdC5hbnkoU3RyaW5nKSxcbiAgICAgICAgZXhwZWN0LmFueShPYmplY3QpXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1c2UgTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgZnJvbSBlbnZpcm9ubWVudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZID0gJ2N1c3RvbS1hbm9uLWtleSc7XG4gICAgICBcbiAgICAgIGNvbnN0IHsgY3JlYXRlU2VydmVyQ2xpZW50IH0gPSByZXF1aXJlKCdAc3VwYWJhc2Uvc3NyJyk7XG4gICAgICBjb25zdCB7IGNyZWF0ZUF1dGhlbnRpY2F0ZWRDbGllbnQgfSA9IHJlcXVpcmUoJy4vc3VwYWJhc2VTZXJ2ZXInKTtcbiAgICAgIFxuICAgICAgYXdhaXQgY3JlYXRlQXV0aGVudGljYXRlZENsaWVudCgpO1xuICAgICAgXG4gICAgICBleHBlY3QoY3JlYXRlU2VydmVyQ2xpZW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgICAnY3VzdG9tLWFub24ta2V5JyxcbiAgICAgICAgZXhwZWN0LmFueShPYmplY3QpXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwiY29va2llcyIsImZuIiwiY3JlYXRlU2VydmVyQ2xpZW50IiwiZGVzY3JpYmUiLCJtb2NrQ29va2llU3RvcmUiLCJtb2NrU3VwYWJhc2VDbGllbnQiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsImdldEFsbCIsIm1vY2tSZXR1cm5WYWx1ZSIsInNldCIsImF1dGgiLCJnZXRTZXNzaW9uIiwiZ2V0VXNlciIsImZyb20iLCJyZXF1aXJlIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJpdCIsImNyZWF0ZUF1dGhlbnRpY2F0ZWRDbGllbnQiLCJleHBlY3QiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsIm9iamVjdENvbnRhaW5pbmciLCJhbnkiLCJGdW5jdGlvbiIsInNldEFsbCIsImNsaWVudCIsInRvQmVEZWZpbmVkIiwidG9CZSIsInRvSGF2ZUJlZW5DYWxsZWQiLCJtb2NrQ29va2llcyIsIm5hbWUiLCJ2YWx1ZSIsImNvb2tpZXNDb25maWciLCJjYWxscyIsInJlc3VsdCIsInRvRXF1YWwiLCJjb29raWVzVG9TZXQiLCJvcHRpb25zIiwidG9IYXZlQmVlbkNhbGxlZFRpbWVzIiwibW9ja0ltcGxlbWVudGF0aW9uIiwiRXJyb3IiLCJub3QiLCJ0b1Rocm93IiwiY29uc29sZUVycm9yU3B5Iiwic3B5T24iLCJjb25zb2xlIiwibW9ja1Jlc3RvcmUiLCJodHRwT25seSIsInNlY3VyZSIsInNhbWVTaXRlIiwibWF4QWdlIiwiZGF0YSIsInNlc3Npb24iLCJ1c2VyIiwiaWQiLCJlbWFpbCIsImFjY2Vzc190b2tlbiIsImVycm9yIiwidG9CZU51bGwiLCJTdHJpbmciLCJPYmplY3QiXSwibWFwcGluZ3MiOiJBQUFBOzs7O0NBSUM7Ozs7eUJBRXNEO0FBRXZELHVCQUF1QjtBQUN2QkEsYUFBSSxDQUFDQyxJQUFJLENBQUMsZ0JBQWdCLElBQU8sQ0FBQTtRQUMvQkMsU0FBU0YsYUFBSSxDQUFDRyxFQUFF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