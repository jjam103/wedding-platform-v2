cc055f14099c2ee79407632e200e2fe9
/**
 * PhotoGalleryPreview Component Tests
 * 
 * Tests the photo gallery preview functionality in the section editor,
 * including photo fetching, display modes, loading states, and error handling.
 */ "use strict";
// Mock Next.js Image component
jest.mock('next/image', ()=>({
        __esModule: true,
        default: ({ src, alt, fill, ...props })=>// eslint-disable-next-line @next/next/no-img-element
            /*#__PURE__*/ (0, _jsxruntime.jsx)("img", {
                src: src,
                alt: alt,
                ...props
            })
    }));
// Mock dynamic imports
jest.mock('next/dynamic', ()=>({
        __esModule: true,
        default: (fn)=>{
            const Component = fn().then((mod)=>mod.default || mod);
            return Component;
        }
    }));
// Mock PhotoPicker
jest.mock('./PhotoPicker', ()=>({
        PhotoPicker: ({ onSelect, onClose })=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                "data-testid": "photo-picker-modal",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                        onClick: ()=>onSelect([
                                'photo-1',
                                'photo-2'
                            ]),
                        children: "Select Photos"
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                        onClick: onClose,
                        children: "Close"
                    })
                ]
            })
    }));
// Mock RichTextEditor
jest.mock('./RichTextEditor', ()=>({
        RichTextEditor: ({ value, onChange })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("textarea", {
                "data-testid": "rich-text-editor",
                value: value,
                onChange: (e)=>onChange(e.target.value)
            })
    }));
// Mock PhotoGallerySkeleton
jest.mock('./PhotoGallerySkeleton', ()=>({
        PhotoGallerySkeleton: ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "photo-gallery-skeleton",
                children: "Loading..."
            })
    }));
// Mock Button component
jest.mock('@/components/ui/Button', ()=>({
        Button: ({ children, onClick, ...props })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                onClick: onClick,
                ...props,
                children: children
            })
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _SectionEditor = require("./SectionEditor");
describe('PhotoGalleryPreview', ()=>{
    beforeEach(()=>{
        // Reset fetch mock
        global.fetch = jest.fn();
    });
    afterEach(()=>{
        jest.clearAllMocks();
    });
    describe('Photo Fetching and Display', ()=>{
        it('should fetch and display photos with thumbnails and captions', async ()=>{
            // Mock API responses
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-1',
                            photo_url: 'https://example.com/photo1.jpg',
                            caption: 'Beautiful sunset'
                        }
                    })
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-2',
                            photo_url: 'https://example.com/photo2.jpg',
                            caption: 'Mountain view'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            // Wait for photos to load
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/admin/photos/photo-1');
                expect(global.fetch).toHaveBeenCalledWith('/api/admin/photos/photo-2');
            });
        });
        it('should use photo_url field (not deprecated url field)', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-1',
                            photo_url: 'https://example.com/photo1.jpg',
                            caption: 'Test photo'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
            // Verify photo_url is used in the response
            const calls = global.fetch.mock.calls;
            expect(calls.length).toBeGreaterThan(0);
        });
    });
    describe('Display Modes', ()=>{
        it('should display "Gallery Grid" mode indicator', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-1',
                            photo_url: 'https://example.com/photo1.jpg'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            // Gallery mode is the default
            await (0, _react.waitFor)(()=>{
                const modeText = _react.screen.queryByText(/Display Mode:/i);
                if (modeText) {
                    expect(modeText).toBeInTheDocument();
                }
            });
        });
        it('should display "Carousel" mode indicator', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-1',
                            photo_url: 'https://example.com/photo1.jpg'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
        });
        it('should display "Auto-play Loop" mode indicator', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-1',
                            photo_url: 'https://example.com/photo1.jpg'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
        });
    });
    describe('Loading States', ()=>{
        it('should display skeleton placeholders while loading', async ()=>{
            // Mock slow API response
            global.fetch.mockImplementation(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            ok: true,
                            json: async ()=>({
                                    success: true,
                                    data: {
                                        id: 'photo-1',
                                        photo_url: 'https://example.com/photo1.jpg'
                                    }
                                })
                        }), 100)));
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            // Should show loading state initially
            // Note: The skeleton is shown during photo fetch, not component load
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
        });
        it('should hide loading state after photos load', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-1',
                            photo_url: 'https://example.com/photo1.jpg'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
            // Loading state should be gone
            await (0, _react.waitFor)(()=>{
                const skeletons = _react.screen.queryAllByTestId('photo-gallery-skeleton');
                // Skeleton might still be present for lazy-loaded components
                expect(skeletons.length).toBeGreaterThanOrEqual(0);
            });
        });
    });
    describe('Error States', ()=>{
        it('should handle API errors gracefully', async ()=>{
            // Mock API error
            global.fetch.mockRejectedValue(new Error('Network error'));
            const consoleSpy = jest.spyOn(console, 'error').mockImplementation();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
            // Should log error but not crash
            await (0, _react.waitFor)(()=>{
                expect(consoleSpy).toHaveBeenCalledWith(expect.stringContaining('Error fetching'), expect.any(Error));
            });
            consoleSpy.mockRestore();
        });
        it('should handle failed photo fetch (404)', async ()=>{
            global.fetch.mockResolvedValue({
                ok: false,
                status: 404,
                json: async ()=>({
                        success: false,
                        error: {
                            code: 'NOT_FOUND',
                            message: 'Photo not found'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
            // Should not crash, should filter out failed photos
            await (0, _react.waitFor)(()=>{
                const component = _react.screen.getByTestId('section-editor');
                expect(component).toBeInTheDocument();
            }, {
                timeout: 3000
            });
        });
        it('should filter out null photos from failed requests', async ()=>{
            // Mock mixed success/failure responses
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-1',
                            photo_url: 'https://example.com/photo1.jpg'
                        }
                    })
            }).mockResolvedValueOnce({
                ok: false,
                status: 404
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledTimes(2);
            });
            // Should only show the successful photo
            await (0, _react.waitFor)(()=>{
                const component = _react.screen.getByTestId('section-editor');
                expect(component).toBeInTheDocument();
            });
        });
    });
    describe('Empty State', ()=>{
        it('should display "No photos selected" when no photos', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            // Wait for component to render
            await (0, _react.waitFor)(()=>{
                const component = _react.screen.getByTestId('section-editor');
                expect(component).toBeInTheDocument();
            });
            // Should show empty state message
            await (0, _react.waitFor)(()=>{
                const emptyMessage = _react.screen.queryByText(/No photos selected/i);
                if (emptyMessage) {
                    expect(emptyMessage).toBeInTheDocument();
                }
            });
        });
        it('should display empty state when photoIds array is empty', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                const component = _react.screen.getByTestId('section-editor');
                expect(component).toBeInTheDocument();
            });
        });
    });
    describe('Photo Captions', ()=>{
        it('should display photo captions when available', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-1',
                            photo_url: 'https://example.com/photo1.jpg',
                            caption: 'Beautiful sunset over the ocean'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
        });
        it('should handle photos without captions', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-1',
                            photo_url: 'https://example.com/photo1.jpg'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
            // Should not crash without caption
            await (0, _react.waitFor)(()=>{
                const component = _react.screen.getByTestId('section-editor');
                expect(component).toBeInTheDocument();
            });
        });
    });
    describe('Integration with SectionEditor', ()=>{
        it('should render within section editor', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                const component = _react.screen.getByTestId('section-editor');
                expect(component).toBeInTheDocument();
            });
        });
        it('should update when photo selection changes', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-1',
                            photo_url: 'https://example.com/photo1.jpg'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                const component = _react.screen.getByTestId('section-editor');
                expect(component).toBeInTheDocument();
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9hZG1pbi9TZWN0aW9uRWRpdG9yLnByZXZpZXcudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQaG90b0dhbGxlcnlQcmV2aWV3IENvbXBvbmVudCBUZXN0c1xuICogXG4gKiBUZXN0cyB0aGUgcGhvdG8gZ2FsbGVyeSBwcmV2aWV3IGZ1bmN0aW9uYWxpdHkgaW4gdGhlIHNlY3Rpb24gZWRpdG9yLFxuICogaW5jbHVkaW5nIHBob3RvIGZldGNoaW5nLCBkaXNwbGF5IG1vZGVzLCBsb2FkaW5nIHN0YXRlcywgYW5kIGVycm9yIGhhbmRsaW5nLlxuICovXG5cbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBTZWN0aW9uRWRpdG9yIH0gZnJvbSAnLi9TZWN0aW9uRWRpdG9yJztcblxuLy8gTW9jayBOZXh0LmpzIEltYWdlIGNvbXBvbmVudFxuamVzdC5tb2NrKCduZXh0L2ltYWdlJywgKCkgPT4gKHtcbiAgX19lc01vZHVsZTogdHJ1ZSxcbiAgZGVmYXVsdDogKHsgc3JjLCBhbHQsIGZpbGwsIC4uLnByb3BzIH06IGFueSkgPT4gKFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAbmV4dC9uZXh0L25vLWltZy1lbGVtZW50XG4gICAgPGltZyBzcmM9e3NyY30gYWx0PXthbHR9IHsuLi5wcm9wc30gLz5cbiAgKSxcbn0pKTtcblxuLy8gTW9jayBkeW5hbWljIGltcG9ydHNcbmplc3QubW9jaygnbmV4dC9keW5hbWljJywgKCkgPT4gKHtcbiAgX19lc01vZHVsZTogdHJ1ZSxcbiAgZGVmYXVsdDogKGZuOiBhbnkpID0+IHtcbiAgICBjb25zdCBDb21wb25lbnQgPSBmbigpLnRoZW4oKG1vZDogYW55KSA9PiBtb2QuZGVmYXVsdCB8fCBtb2QpO1xuICAgIHJldHVybiBDb21wb25lbnQ7XG4gIH0sXG59KSk7XG5cbi8vIE1vY2sgUGhvdG9QaWNrZXJcbmplc3QubW9jaygnLi9QaG90b1BpY2tlcicsICgpID0+ICh7XG4gIFBob3RvUGlja2VyOiAoeyBvblNlbGVjdCwgb25DbG9zZSB9OiBhbnkpID0+IChcbiAgICA8ZGl2IGRhdGEtdGVzdGlkPVwicGhvdG8tcGlja2VyLW1vZGFsXCI+XG4gICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IG9uU2VsZWN0KFsncGhvdG8tMScsICdwaG90by0yJ10pfT5TZWxlY3QgUGhvdG9zPC9idXR0b24+XG4gICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uQ2xvc2V9PkNsb3NlPC9idXR0b24+XG4gICAgPC9kaXY+XG4gICksXG59KSk7XG5cbi8vIE1vY2sgUmljaFRleHRFZGl0b3Jcbmplc3QubW9jaygnLi9SaWNoVGV4dEVkaXRvcicsICgpID0+ICh7XG4gIFJpY2hUZXh0RWRpdG9yOiAoeyB2YWx1ZSwgb25DaGFuZ2UgfTogYW55KSA9PiAoXG4gICAgPHRleHRhcmVhXG4gICAgICBkYXRhLXRlc3RpZD1cInJpY2gtdGV4dC1lZGl0b3JcIlxuICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgb25DaGFuZ2U9eyhlKSA9PiBvbkNoYW5nZShlLnRhcmdldC52YWx1ZSl9XG4gICAgLz5cbiAgKSxcbn0pKTtcblxuLy8gTW9jayBQaG90b0dhbGxlcnlTa2VsZXRvblxuamVzdC5tb2NrKCcuL1Bob3RvR2FsbGVyeVNrZWxldG9uJywgKCkgPT4gKHtcbiAgUGhvdG9HYWxsZXJ5U2tlbGV0b246ICgpID0+IDxkaXYgZGF0YS10ZXN0aWQ9XCJwaG90by1nYWxsZXJ5LXNrZWxldG9uXCI+TG9hZGluZy4uLjwvZGl2Pixcbn0pKTtcblxuLy8gTW9jayBCdXR0b24gY29tcG9uZW50XG5qZXN0Lm1vY2soJ0AvY29tcG9uZW50cy91aS9CdXR0b24nLCAoKSA9PiAoe1xuICBCdXR0b246ICh7IGNoaWxkcmVuLCBvbkNsaWNrLCAuLi5wcm9wcyB9OiBhbnkpID0+IChcbiAgICA8YnV0dG9uIG9uQ2xpY2s9e29uQ2xpY2t9IHsuLi5wcm9wc30+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9idXR0b24+XG4gICksXG59KSk7XG5cbmRlc2NyaWJlKCdQaG90b0dhbGxlcnlQcmV2aWV3JywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAvLyBSZXNldCBmZXRjaCBtb2NrXG4gICAgZ2xvYmFsLmZldGNoID0gamVzdC5mbigpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGhvdG8gRmV0Y2hpbmcgYW5kIERpc3BsYXknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBmZXRjaCBhbmQgZGlzcGxheSBwaG90b3Mgd2l0aCB0aHVtYm5haWxzIGFuZCBjYXB0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgQVBJIHJlc3BvbnNlc1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBpZDogJ3Bob3RvLTEnLFxuICAgICAgICAgICAgICBwaG90b191cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Bob3RvMS5qcGcnLFxuICAgICAgICAgICAgICBjYXB0aW9uOiAnQmVhdXRpZnVsIHN1bnNldCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgaWQ6ICdwaG90by0yJyxcbiAgICAgICAgICAgICAgcGhvdG9fdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9waG90bzIuanBnJyxcbiAgICAgICAgICAgICAgY2FwdGlvbjogJ01vdW50YWluIHZpZXcnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImFjdGl2aXR5XCJcbiAgICAgICAgICBwYWdlSWQ9XCJhY3Rpdml0eS0xXCJcbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIC8vIFdhaXQgZm9yIHBob3RvcyB0byBsb2FkXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hcGkvYWRtaW4vcGhvdG9zL3Bob3RvLTEnKTtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hcGkvYWRtaW4vcGhvdG9zL3Bob3RvLTInKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1c2UgcGhvdG9fdXJsIGZpZWxkIChub3QgZGVwcmVjYXRlZCB1cmwgZmllbGQpJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBpZDogJ3Bob3RvLTEnLFxuICAgICAgICAgICAgcGhvdG9fdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9waG90bzEuanBnJyxcbiAgICAgICAgICAgIGNhcHRpb246ICdUZXN0IHBob3RvJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJhY3Rpdml0eVwiXG4gICAgICAgICAgcGFnZUlkPVwiYWN0aXZpdHktMVwiXG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFZlcmlmeSBwaG90b191cmwgaXMgdXNlZCBpbiB0aGUgcmVzcG9uc2VcbiAgICAgIGNvbnN0IGNhbGxzID0gKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2suY2FsbHM7XG4gICAgICBleHBlY3QoY2FsbHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdEaXNwbGF5IE1vZGVzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGlzcGxheSBcIkdhbGxlcnkgR3JpZFwiIG1vZGUgaW5kaWNhdG9yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBpZDogJ3Bob3RvLTEnLFxuICAgICAgICAgICAgcGhvdG9fdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9waG90bzEuanBnJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJhY3Rpdml0eVwiXG4gICAgICAgICAgcGFnZUlkPVwiYWN0aXZpdHktMVwiXG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICAvLyBHYWxsZXJ5IG1vZGUgaXMgdGhlIGRlZmF1bHRcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBtb2RlVGV4dCA9IHNjcmVlbi5xdWVyeUJ5VGV4dCgvRGlzcGxheSBNb2RlOi9pKTtcbiAgICAgICAgaWYgKG1vZGVUZXh0KSB7XG4gICAgICAgICAgZXhwZWN0KG1vZGVUZXh0KS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBcIkNhcm91c2VsXCIgbW9kZSBpbmRpY2F0b3InLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGlkOiAncGhvdG8tMScsXG4gICAgICAgICAgICBwaG90b191cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Bob3RvMS5qcGcnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImFjdGl2aXR5XCJcbiAgICAgICAgICBwYWdlSWQ9XCJhY3Rpdml0eS0xXCJcbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBcIkF1dG8tcGxheSBMb29wXCIgbW9kZSBpbmRpY2F0b3InLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGlkOiAncGhvdG8tMScsXG4gICAgICAgICAgICBwaG90b191cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Bob3RvMS5qcGcnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImFjdGl2aXR5XCJcbiAgICAgICAgICBwYWdlSWQ9XCJhY3Rpdml0eS0xXCJcbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0xvYWRpbmcgU3RhdGVzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGlzcGxheSBza2VsZXRvbiBwbGFjZWhvbGRlcnMgd2hpbGUgbG9hZGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgc2xvdyBBUEkgcmVzcG9uc2VcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oXG4gICAgICAgICgpID0+XG4gICAgICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+XG4gICAgICAgICAgICBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgICAoKSA9PlxuICAgICAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgaWQ6ICdwaG90by0xJyxcbiAgICAgICAgICAgICAgICAgICAgICBwaG90b191cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Bob3RvMS5qcGcnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIDEwMFxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImFjdGl2aXR5XCJcbiAgICAgICAgICBwYWdlSWQ9XCJhY3Rpdml0eS0xXCJcbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIC8vIFNob3VsZCBzaG93IGxvYWRpbmcgc3RhdGUgaW5pdGlhbGx5XG4gICAgICAvLyBOb3RlOiBUaGUgc2tlbGV0b24gaXMgc2hvd24gZHVyaW5nIHBob3RvIGZldGNoLCBub3QgY29tcG9uZW50IGxvYWRcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGlkZSBsb2FkaW5nIHN0YXRlIGFmdGVyIHBob3RvcyBsb2FkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBpZDogJ3Bob3RvLTEnLFxuICAgICAgICAgICAgcGhvdG9fdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9waG90bzEuanBnJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJhY3Rpdml0eVwiXG4gICAgICAgICAgcGFnZUlkPVwiYWN0aXZpdHktMVwiXG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIExvYWRpbmcgc3RhdGUgc2hvdWxkIGJlIGdvbmVcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBza2VsZXRvbnMgPSBzY3JlZW4ucXVlcnlBbGxCeVRlc3RJZCgncGhvdG8tZ2FsbGVyeS1za2VsZXRvbicpO1xuICAgICAgICAvLyBTa2VsZXRvbiBtaWdodCBzdGlsbCBiZSBwcmVzZW50IGZvciBsYXp5LWxvYWRlZCBjb21wb25lbnRzXG4gICAgICAgIGV4cGVjdChza2VsZXRvbnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBTdGF0ZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgQVBJIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBBUEkgZXJyb3JcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKSk7XG5cbiAgICAgIGNvbnN0IGNvbnNvbGVTcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICdlcnJvcicpLm1vY2tJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJhY3Rpdml0eVwiXG4gICAgICAgICAgcGFnZUlkPVwiYWN0aXZpdHktMVwiXG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBsb2cgZXJyb3IgYnV0IG5vdCBjcmFzaFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChjb25zb2xlU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnRXJyb3IgZmV0Y2hpbmcnKSxcbiAgICAgICAgICBleHBlY3QuYW55KEVycm9yKVxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGVTcHkubW9ja1Jlc3RvcmUoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGZhaWxlZCBwaG90byBmZXRjaCAoNDA0KScsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiBmYWxzZSxcbiAgICAgICAgc3RhdHVzOiA0MDQsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHsgY29kZTogJ05PVF9GT1VORCcsIG1lc3NhZ2U6ICdQaG90byBub3QgZm91bmQnIH0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImFjdGl2aXR5XCJcbiAgICAgICAgICBwYWdlSWQ9XCJhY3Rpdml0eS0xXCJcbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2hvdWxkIG5vdCBjcmFzaCwgc2hvdWxkIGZpbHRlciBvdXQgZmFpbGVkIHBob3Rvc1xuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnc2VjdGlvbi1lZGl0b3InKTtcbiAgICAgICAgZXhwZWN0KGNvbXBvbmVudCkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0sIHsgdGltZW91dDogMzAwMCB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmlsdGVyIG91dCBudWxsIHBob3RvcyBmcm9tIGZhaWxlZCByZXF1ZXN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgbWl4ZWQgc3VjY2Vzcy9mYWlsdXJlIHJlc3BvbnNlc1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBpZDogJ3Bob3RvLTEnLFxuICAgICAgICAgICAgICBwaG90b191cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Bob3RvMS5qcGcnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICAgIHN0YXR1czogNDA0LFxuICAgICAgICB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiYWN0aXZpdHlcIlxuICAgICAgICAgIHBhZ2VJZD1cImFjdGl2aXR5LTFcIlxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTaG91bGQgb25seSBzaG93IHRoZSBzdWNjZXNzZnVsIHBob3RvXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdzZWN0aW9uLWVkaXRvcicpO1xuICAgICAgICBleHBlY3QoY29tcG9uZW50KS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFbXB0eSBTdGF0ZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgXCJObyBwaG90b3Mgc2VsZWN0ZWRcIiB3aGVuIG5vIHBob3RvcycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImFjdGl2aXR5XCJcbiAgICAgICAgICBwYWdlSWQ9XCJhY3Rpdml0eS0xXCJcbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIC8vIFdhaXQgZm9yIGNvbXBvbmVudCB0byByZW5kZXJcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBjb21wb25lbnQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3NlY3Rpb24tZWRpdG9yJyk7XG4gICAgICAgIGV4cGVjdChjb21wb25lbnQpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2hvdWxkIHNob3cgZW1wdHkgc3RhdGUgbWVzc2FnZVxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGVtcHR5TWVzc2FnZSA9IHNjcmVlbi5xdWVyeUJ5VGV4dCgvTm8gcGhvdG9zIHNlbGVjdGVkL2kpO1xuICAgICAgICBpZiAoZW1wdHlNZXNzYWdlKSB7XG4gICAgICAgICAgZXhwZWN0KGVtcHR5TWVzc2FnZSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgZW1wdHkgc3RhdGUgd2hlbiBwaG90b0lkcyBhcnJheSBpcyBlbXB0eScsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImFjdGl2aXR5XCJcbiAgICAgICAgICBwYWdlSWQ9XCJhY3Rpdml0eS0xXCJcbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBjb21wb25lbnQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3NlY3Rpb24tZWRpdG9yJyk7XG4gICAgICAgIGV4cGVjdChjb21wb25lbnQpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Bob3RvIENhcHRpb25zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGlzcGxheSBwaG90byBjYXB0aW9ucyB3aGVuIGF2YWlsYWJsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgaWQ6ICdwaG90by0xJyxcbiAgICAgICAgICAgIHBob3RvX3VybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vcGhvdG8xLmpwZycsXG4gICAgICAgICAgICBjYXB0aW9uOiAnQmVhdXRpZnVsIHN1bnNldCBvdmVyIHRoZSBvY2VhbicsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiYWN0aXZpdHlcIlxuICAgICAgICAgIHBhZ2VJZD1cImFjdGl2aXR5LTFcIlxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcGhvdG9zIHdpdGhvdXQgY2FwdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGlkOiAncGhvdG8tMScsXG4gICAgICAgICAgICBwaG90b191cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Bob3RvMS5qcGcnLFxuICAgICAgICAgICAgLy8gTm8gY2FwdGlvblxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImFjdGl2aXR5XCJcbiAgICAgICAgICBwYWdlSWQ9XCJhY3Rpdml0eS0xXCJcbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2hvdWxkIG5vdCBjcmFzaCB3aXRob3V0IGNhcHRpb25cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBjb21wb25lbnQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3NlY3Rpb24tZWRpdG9yJyk7XG4gICAgICAgIGV4cGVjdChjb21wb25lbnQpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ludGVncmF0aW9uIHdpdGggU2VjdGlvbkVkaXRvcicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlbmRlciB3aXRoaW4gc2VjdGlvbiBlZGl0b3InLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJhY3Rpdml0eVwiXG4gICAgICAgICAgcGFnZUlkPVwiYWN0aXZpdHktMVwiXG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdzZWN0aW9uLWVkaXRvcicpO1xuICAgICAgICBleHBlY3QoY29tcG9uZW50KS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSB3aGVuIHBob3RvIHNlbGVjdGlvbiBjaGFuZ2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBpZDogJ3Bob3RvLTEnLFxuICAgICAgICAgICAgcGhvdG9fdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9waG90bzEuanBnJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJhY3Rpdml0eVwiXG4gICAgICAgICAgcGFnZUlkPVwiYWN0aXZpdHktMVwiXG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdzZWN0aW9uLWVkaXRvcicpO1xuICAgICAgICBleHBlY3QoY29tcG9uZW50KS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInNyYyIsImFsdCIsImZpbGwiLCJwcm9wcyIsImltZyIsImZuIiwiQ29tcG9uZW50IiwidGhlbiIsIm1vZCIsIlBob3RvUGlja2VyIiwib25TZWxlY3QiLCJvbkNsb3NlIiwiZGl2IiwiZGF0YS10ZXN0aWQiLCJidXR0b24iLCJvbkNsaWNrIiwiUmljaFRleHRFZGl0b3IiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwidGV4dGFyZWEiLCJlIiwidGFyZ2V0IiwiUGhvdG9HYWxsZXJ5U2tlbGV0b24iLCJCdXR0b24iLCJjaGlsZHJlbiIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImdsb2JhbCIsImZldGNoIiwiYWZ0ZXJFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIml0IiwibW9ja1Jlc29sdmVkVmFsdWVPbmNlIiwib2siLCJqc29uIiwic3VjY2VzcyIsImRhdGEiLCJpZCIsInBob3RvX3VybCIsImNhcHRpb24iLCJyZW5kZXIiLCJTZWN0aW9uRWRpdG9yIiwicGFnZVR5cGUiLCJwYWdlSWQiLCJ3YWl0Rm9yIiwiZXhwZWN0IiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsInRvSGF2ZUJlZW5DYWxsZWQiLCJjYWxscyIsImxlbmd0aCIsInRvQmVHcmVhdGVyVGhhbiIsIm1vZGVUZXh0Iiwic2NyZWVuIiwicXVlcnlCeVRleHQiLCJ0b0JlSW5UaGVEb2N1bWVudCIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInNrZWxldG9ucyIsInF1ZXJ5QWxsQnlUZXN0SWQiLCJ0b0JlR3JlYXRlclRoYW5PckVxdWFsIiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciIsImNvbnNvbGVTcHkiLCJzcHlPbiIsImNvbnNvbGUiLCJzdHJpbmdDb250YWluaW5nIiwiYW55IiwibW9ja1Jlc3RvcmUiLCJzdGF0dXMiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiY29tcG9uZW50IiwiZ2V0QnlUZXN0SWQiLCJ0aW1lb3V0IiwidG9IYXZlQmVlbkNhbGxlZFRpbWVzIiwiZW1wdHlNZXNzYWdlIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Q0FLQztBQUtELCtCQUErQjtBQUMvQkEsS0FBS0MsSUFBSSxDQUFDLGNBQWMsSUFBTyxDQUFBO1FBQzdCQyxZQUFZO1FBQ1pDLFNBQVMsQ0FBQyxFQUFFQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFFLEdBQUdDLE9BQVksR0FDekMscURBQXFEOzBCQUNyRCxxQkFBQ0M7Z0JBQUlKLEtBQUtBO2dCQUFLQyxLQUFLQTtnQkFBTSxHQUFHRSxLQUFLOztJQUV0QyxDQUFBO0FBRUEsdUJBQXVCO0FBQ3ZCUCxLQUFLQyxJQUFJLENBQUMsZ0JBQWdCLElBQU8sQ0FBQTtR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