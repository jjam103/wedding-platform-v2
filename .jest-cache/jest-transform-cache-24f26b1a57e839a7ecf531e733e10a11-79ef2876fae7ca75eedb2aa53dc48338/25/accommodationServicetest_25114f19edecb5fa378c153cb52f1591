4bfffae1e6fbc874279726f1193ea24c
/**
 * Test Suite: Accommodation Service
 * 
 * Tests for accommodation management service including room type management
 * and guest assignments.
 * 
 * Follows the 4-path testing pattern:
 * 1. Success path - Valid input returns success
 * 2. Validation error - Invalid input returns VALIDATION_ERROR
 * 3. Database error - DB failure returns DATABASE_ERROR
 * 4. Security - Malicious input is sanitized
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
// Set up environment variables BEFORE any imports
process.env.NEXT_PUBLIC_SUPABASE_URL = 'https://test.supabase.co';
process.env.SUPABASE_SERVICE_ROLE_KEY = 'test-service-role-key';
// Mock Supabase client creation BEFORE any imports - Pattern A
_globals.jest.mock('@supabase/supabase-js', ()=>{
    const mockFrom = _globals.jest.fn();
    const mockSupabaseClient = {
        from: mockFrom
    };
    return {
        createClient: _globals.jest.fn(()=>mockSupabaseClient),
        __mockFrom: mockFrom
    };
});
// Import service using require() AFTER mocking
const accommodationService = require('./accommodationService');
// Get the mocked from function
const { __mockFrom: mockFrom } = require('@supabase/supabase-js');
(0, _globals.describe)('accommodationService', ()=>{
    (0, _globals.beforeEach)(()=>{
        _globals.jest.clearAllMocks();
        // Set up environment variables for the service
        process.env.NEXT_PUBLIC_SUPABASE_URL = 'https://test.supabase.co';
        process.env.SUPABASE_SERVICE_ROLE_KEY = 'test-service-role-key';
        // Reset Supabase mocks to default successful state
        mockFrom.mockReturnValue({
            select: _globals.jest.fn().mockResolvedValue({
                data: [],
                error: null
            }),
            insert: _globals.jest.fn().mockReturnValue({
                select: _globals.jest.fn().mockReturnValue({
                    single: _globals.jest.fn().mockResolvedValue({
                        data: null,
                        error: null
                    })
                })
            })
        });
    });
    // ============================================================================
    // ACCOMMODATION CRUD OPERATIONS TESTS
    // ============================================================================
    (0, _globals.describe)('createAccommodation', ()=>{
        const validData = {
            name: 'Costa Rica Beach Resort',
            locationId: '123e4567-e89b-12d3-a456-426614174000',
            description: 'Beautiful beachfront resort',
            address: '123 Beach Road, Costa Rica',
            status: 'published'
        };
        (0, _globals.it)('should return success with accommodation data when valid input provided', async ()=>{
            const mockAccommodation = {
                id: 'accommodation-1',
                name: validData.name,
                location_id: validData.locationId,
                description: validData.description,
                address: validData.address,
                status: validData.status,
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            mockFrom.mockReturnValue({
                insert: _globals.jest.fn().mockReturnValue({
                    select: _globals.jest.fn().mockReturnValue({
                        single: _globals.jest.fn().mockResolvedValue({
                            data: mockAccommodation,
                            error: null
                        })
                    })
                })
            });
            const result = await accommodationService.createAccommodation(validData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.id).toBe('accommodation-1');
                (0, _globals.expect)(result.data.name).toBe('Costa Rica Beach Resort');
                (0, _globals.expect)(result.data.locationId).toBe(validData.locationId);
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when name is missing', async ()=>{
            const invalidData = {
                ...validData,
                name: ''
            };
            const result = await accommodationService.createAccommodation(invalidData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when name exceeds 200 characters', async ()=>{
            const invalidData = {
                ...validData,
                name: 'a'.repeat(201)
            };
            const result = await accommodationService.createAccommodation(invalidData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        (0, _globals.it)('should return DATABASE_ERROR when insert fails', async ()=>{
            mockFrom.mockReturnValue({
                insert: _globals.jest.fn().mockReturnValue({
                    select: _globals.jest.fn().mockReturnValue({
                        single: _globals.jest.fn().mockResolvedValue({
                            data: null,
                            error: {
                                message: 'Connection failed',
                                code: 'DB_ERROR'
                            }
                        })
                    })
                })
            });
            const result = await accommodationService.createAccommodation(validData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('DATABASE_ERROR');
            }
        });
        (0, _globals.it)('should sanitize input to prevent XSS attacks', async ()=>{
            const maliciousData = {
                ...validData,
                name: '<script>alert("xss")</script>Resort',
                description: '<img src=x onerror=alert(1)>Description',
                address: '<script>alert("xss")</script>123 Beach Road'
            };
            const mockAccommodation = {
                id: 'accommodation-1',
                name: 'Resort',
                location_id: validData.locationId,
                description: 'Description',
                address: '123 Beach Road',
                status: validData.status,
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            mockFrom.mockReturnValue({
                insert: _globals.jest.fn().mockReturnValue({
                    select: _globals.jest.fn().mockReturnValue({
                        single: _globals.jest.fn().mockResolvedValue({
                            data: mockAccommodation,
                            error: null
                        })
                    })
                })
            });
            const result = await accommodationService.createAccommodation(maliciousData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.name).not.toContain('<script>');
                (0, _globals.expect)(result.data.description).not.toContain('<img');
                (0, _globals.expect)(result.data.address).not.toContain('<script>');
            }
        });
    });
    (0, _globals.describe)('getAccommodation', ()=>{
        const validId = '123e4567-e89b-12d3-a456-426614174000';
        (0, _globals.it)('should return accommodation when valid ID provided', async ()=>{
            const mockAccommodation = {
                id: validId,
                name: 'Costa Rica Beach Resort',
                location_id: null,
                description: 'Beautiful resort',
                address: '123 Beach Road',
                status: 'published',
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            mockFrom.mockReturnValue({
                select: _globals.jest.fn().mockReturnValue({
                    eq: _globals.jest.fn().mockReturnValue({
                        single: _globals.jest.fn().mockResolvedValue({
                            data: mockAccommodation,
                            error: null
                        })
                    })
                })
            });
            const result = await accommodationService.getAccommodation(validId);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.id).toBe(validId);
                (0, _globals.expect)(result.data.name).toBe('Costa Rica Beach Resort');
            }
        });
        (0, _globals.it)('should return NOT_FOUND when accommodation does not exist', async ()=>{
            mockFrom.mockReturnValue({
                select: _globals.jest.fn().mockReturnValue({
                    eq: _globals.jest.fn().mockReturnValue({
                        single: _globals.jest.fn().mockResolvedValue({
                            data: null,
                            error: {
                                code: 'PGRST116',
                                message: 'No rows found'
                            }
                        })
                    })
                })
            });
            const result = await accommodationService.getAccommodation(validId);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('NOT_FOUND');
            }
        });
        (0, _globals.it)('should return DATABASE_ERROR when database query fails', async ()=>{
            mockFrom.mockReturnValue({
                select: _globals.jest.fn().mockReturnValue({
                    eq: _globals.jest.fn().mockReturnValue({
                        single: _globals.jest.fn().mockResolvedValue({
                            data: null,
                            error: {
                                message: 'Connection failed',
                                code: 'DB_ERROR'
                            }
                        })
                    })
                })
            });
            const result = await accommodationService.getAccommodation(validId);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('DATABASE_ERROR');
            }
        });
    });
    // ============================================================================
    // ROOM TYPE CRUD OPERATIONS TESTS
    // ============================================================================
    (0, _globals.describe)('createRoomType', ()=>{
        const validData = {
            accommodationId: '123e4567-e89b-12d3-a456-426614174000',
            name: 'Deluxe Ocean View',
            description: 'Spacious room with ocean view',
            capacity: 2,
            totalRooms: 10,
            pricePerNight: 200,
            hostSubsidyPerNight: 50,
            status: 'published'
        };
        (0, _globals.it)('should return success with room type data when valid input provided', async ()=>{
            const mockRoomType = {
                id: 'room-type-1',
                accommodation_id: validData.accommodationId,
                name: validData.name,
                description: validData.description,
                capacity: validData.capacity,
                total_rooms: validData.totalRooms,
                price_per_night: validData.pricePerNight,
                host_subsidy_per_night: validData.hostSubsidyPerNight,
                status: validData.status,
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            mockFrom.mockReturnValue({
                insert: _globals.jest.fn().mockReturnValue({
                    select: _globals.jest.fn().mockReturnValue({
                        single: _globals.jest.fn().mockResolvedValue({
                            data: mockRoomType,
                            error: null
                        })
                    })
                })
            });
            const result = await accommodationService.createRoomType(validData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.id).toBe('room-type-1');
                (0, _globals.expect)(result.data.name).toBe('Deluxe Ocean View');
                (0, _globals.expect)(result.data.capacity).toBe(2);
                (0, _globals.expect)(result.data.totalRooms).toBe(10);
                (0, _globals.expect)(result.data.pricePerNight).toBe(200);
                (0, _globals.expect)(result.data.hostSubsidyPerNight).toBe(50);
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when name is missing', async ()=>{
            const invalidData = {
                ...validData,
                name: ''
            };
            const result = await accommodationService.createRoomType(invalidData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when capacity is not positive', async ()=>{
            const invalidData = {
                ...validData,
                capacity: 0
            };
            const result = await accommodationService.createRoomType(invalidData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when hostSubsidyPerNight exceeds pricePerNight', async ()=>{
            const invalidData = {
                ...validData,
                hostSubsidyPerNight: 250
            }; // Greater than pricePerNight (200)
            const result = await accommodationService.createRoomType(invalidData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        (0, _globals.it)('should sanitize input to prevent XSS attacks', async ()=>{
            const maliciousData = {
                ...validData,
                name: '<script>alert("xss")</script>Deluxe Room',
                description: '<img src=x onerror=alert(1)>Ocean view room'
            };
            const mockRoomType = {
                id: 'room-type-1',
                accommodation_id: validData.accommodationId,
                name: 'Deluxe Room',
                description: 'Ocean view room',
                capacity: validData.capacity,
                total_rooms: validData.totalRooms,
                price_per_night: validData.pricePerNight,
                host_subsidy_per_night: validData.hostSubsidyPerNight,
                status: validData.status,
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            mockFrom.mockReturnValue({
                insert: _globals.jest.fn().mockReturnValue({
                    select: _globals.jest.fn().mockReturnValue({
                        single: _globals.jest.fn().mockResolvedValue({
                            data: mockRoomType,
                            error: null
                        })
                    })
                })
            });
            const result = await accommodationService.createRoomType(maliciousData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.name).not.toContain('<script>');
                (0, _globals.expect)(result.data.description).not.toContain('<img');
            }
        });
    });
    (0, _globals.describe)('listRoomTypes', ()=>{
        const accommodationId = '123e4567-e89b-12d3-a456-426614174000';
        (0, _globals.it)('should return room types for accommodation', async ()=>{
            const mockRoomTypes = [
                {
                    id: 'room-type-1',
                    accommodation_id: accommodationId,
                    name: 'Standard Room',
                    description: null,
                    capacity: 2,
                    total_rooms: 5,
                    price_per_night: 150,
                    host_subsidy_per_night: null,
                    status: 'published',
                    created_at: '2024-01-01T00:00:00Z',
                    updated_at: '2024-01-01T00:00:00Z'
                },
                {
                    id: 'room-type-2',
                    accommodation_id: accommodationId,
                    name: 'Deluxe Room',
                    description: 'Ocean view',
                    capacity: 2,
                    total_rooms: 3,
                    price_per_night: 200,
                    host_subsidy_per_night: 50,
                    status: 'published',
                    created_at: '2024-01-01T00:00:00Z',
                    updated_at: '2024-01-01T00:00:00Z'
                }
            ];
            mockFrom.mockReturnValue({
                select: _globals.jest.fn().mockReturnValue({
                    eq: _globals.jest.fn().mockReturnValue({
                        order: _globals.jest.fn().mockResolvedValue({
                            data: mockRoomTypes,
                            error: null
                        })
                    })
                })
            });
            const result = await accommodationService.listRoomTypes(accommodationId);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data).toHaveLength(2);
                (0, _globals.expect)(result.data[0].name).toBe('Standard Room');
                (0, _globals.expect)(result.data[1].name).toBe('Deluxe Room');
            }
        });
        (0, _globals.it)('should return DATABASE_ERROR when query fails', async ()=>{
            mockFrom.mockReturnValue({
                select: _globals.jest.fn().mockReturnValue({
                    eq: _globals.jest.fn().mockReturnValue({
                        order: _globals.jest.fn().mockResolvedValue({
                            data: null,
                            error: {
                                message: 'Connection failed',
                                code: 'DB_ERROR'
                            }
                        })
                    })
                })
            });
            const result = await accommodationService.listRoomTypes(accommodationId);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('DATABASE_ERROR');
            }
        });
    });
    // ============================================================================
    // ROOM ASSIGNMENT OPERATIONS TESTS
    // ============================================================================
    (0, _globals.describe)('createRoomAssignment', ()=>{
        const validData = {
            roomTypeId: '123e4567-e89b-12d3-a456-426614174000',
            guestId: '456e7890-e89b-12d3-a456-426614174000',
            checkIn: '2024-06-01',
            checkOut: '2024-06-05',
            notes: 'Special dietary requirements'
        };
        (0, _globals.it)('should return success with room assignment data when valid input provided', async ()=>{
            const mockAssignment = {
                id: 'assignment-1',
                room_type_id: validData.roomTypeId,
                guest_id: validData.guestId,
                check_in: validData.checkIn,
                check_out: validData.checkOut,
                notes: validData.notes,
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            mockFrom.mockReturnValue({
                insert: _globals.jest.fn().mockReturnValue({
                    select: _globals.jest.fn().mockReturnValue({
                        single: _globals.jest.fn().mockResolvedValue({
                            data: mockAssignment,
                            error: null
                        })
                    })
                })
            });
            const result = await accommodationService.createRoomAssignment(validData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.id).toBe('assignment-1');
                (0, _globals.expect)(result.data.roomTypeId).toBe(validData.roomTypeId);
                (0, _globals.expect)(result.data.guestId).toBe(validData.guestId);
                (0, _globals.expect)(result.data.checkIn).toBe(validData.checkIn);
                (0, _globals.expect)(result.data.checkOut).toBe(validData.checkOut);
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when checkOut is before checkIn', async ()=>{
            const invalidData = {
                ...validData,
                checkIn: '2024-06-05',
                checkOut: '2024-06-01'
            };
            const result = await accommodationService.createRoomAssignment(invalidData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        (0, _globals.it)('should return CONFLICT when guest already has assignment for dates', async ()=>{
            mockFrom.mockReturnValue({
                insert: _globals.jest.fn().mockReturnValue({
                    select: _globals.jest.fn().mockReturnValue({
                        single: _globals.jest.fn().mockResolvedValue({
                            data: null,
                            error: {
                                code: '23505',
                                message: 'Duplicate key violation'
                            }
                        })
                    })
                })
            });
            const result = await accommodationService.createRoomAssignment(validData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('CONFLICT');
            }
        });
        (0, _globals.it)('should sanitize notes to prevent XSS attacks', async ()=>{
            const maliciousData = {
                ...validData,
                notes: '<script>alert("xss")</script>Special requirements'
            };
            const mockAssignment = {
                id: 'assignment-1',
                room_type_id: validData.roomTypeId,
                guest_id: validData.guestId,
                check_in: validData.checkIn,
                check_out: validData.checkOut,
                notes: 'Special requirements',
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            mockFrom.mockReturnValue({
                insert: _globals.jest.fn().mockReturnValue({
                    select: _globals.jest.fn().mockReturnValue({
                        single: _globals.jest.fn().mockResolvedValue({
                            data: mockAssignment,
                            error: null
                        })
                    })
                })
            });
            const result = await accommodationService.createRoomAssignment(maliciousData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.notes).not.toContain('<script>');
            }
        });
    });
    (0, _globals.describe)('listGuestRoomAssignments', ()=>{
        const guestId = '456e7890-e89b-12d3-a456-426614174000';
        (0, _globals.it)('should return room assignments for guest', async ()=>{
            const mockAssignments = [
                {
                    id: 'assignment-1',
                    room_type_id: '123e4567-e89b-12d3-a456-426614174000',
                    guest_id: guestId,
                    check_in: '2024-06-01',
                    check_out: '2024-06-05',
                    notes: null,
                    created_at: '2024-01-01T00:00:00Z',
                    updated_at: '2024-01-01T00:00:00Z'
                }
            ];
            mockFrom.mockReturnValue({
                select: _globals.jest.fn().mockReturnValue({
                    eq: _globals.jest.fn().mockReturnValue({
                        order: _globals.jest.fn().mockResolvedValue({
                            data: mockAssignments,
                            error: null
                        })
                    })
                })
            });
            const result = await accommodationService.listGuestRoomAssignments(guestId);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data).toHaveLength(1);
                (0, _globals.expect)(result.data[0].guestId).toBe(guestId);
            }
        });
    });
    (0, _globals.describe)('listRoomTypeAssignments', ()=>{
        const roomTypeId = '123e4567-e89b-12d3-a456-426614174000';
        (0, _globals.it)('should return room assignments for room type', async ()=>{
            const mockAssignments = [
                {
                    id: 'assignment-1',
                    room_type_id: roomTypeId,
                    guest_id: '456e7890-e89b-12d3-a456-426614174000',
                    check_in: '2024-06-01',
                    check_out: '2024-06-05',
                    notes: null,
                    created_at: '2024-01-01T00:00:00Z',
                    updated_at: '2024-01-01T00:00:00Z'
                }
            ];
            mockFrom.mockReturnValue({
                select: _globals.jest.fn().mockReturnValue({
                    eq: _globals.jest.fn().mockReturnValue({
                        order: _globals.jest.fn().mockResolvedValue({
                            data: mockAssignments,
                            error: null
                        })
                    })
                })
            });
            const result = await accommodationService.listRoomTypeAssignments(roomTypeId);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data).toHaveLength(1);
                (0, _globals.expect)(result.data[0].roomTypeId).toBe(roomTypeId);
            }
        });
    });
    // ============================================================================
    // COST CALCULATION OPERATIONS TESTS
    // ============================================================================
    (0, _globals.describe)('calculateRoomCost', ()=>{
        const validParams = {
            roomTypeId: '123e4567-e89b-12d3-a456-426614174000',
            checkIn: '2024-06-01',
            checkOut: '2024-06-05'
        };
        (0, _globals.it)('should calculate cost correctly with subsidy', async ()=>{
            const mockRoomType = {
                id: validParams.roomTypeId,
                accommodation_id: '123e4567-e89b-12d3-a456-426614174000',
                name: 'Deluxe Room',
                description: null,
                capacity: 2,
                total_rooms: 10,
                price_per_night: 200,
                host_subsidy_per_night: 50,
                status: 'published',
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            // Mock the query chain for getRoomType
            mockFrom.mockReturnValue({
                select: _globals.jest.fn().mockReturnValue({
                    eq: _globals.jest.fn().mockReturnValue({
                        single: _globals.jest.fn().mockResolvedValue({
                            data: mockRoomType,
                            error: null
                        })
                    })
                })
            });
            const result = await accommodationService.calculateRoomCost(validParams);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.numberOfNights).toBe(4); // June 1-5 = 4 nights
                (0, _globals.expect)(result.data.pricePerNight).toBe(200);
                (0, _globals.expect)(result.data.subsidyPerNight).toBe(50);
                (0, _globals.expect)(result.data.totalCost).toBe(800); // 200 * 4
                (0, _globals.expect)(result.data.totalSubsidy).toBe(200); // 50 * 4
                (0, _globals.expect)(result.data.guestCost).toBe(600); // 800 - 200
            }
        });
        (0, _globals.it)('should calculate cost correctly without subsidy', async ()=>{
            const mockRoomType = {
                id: validParams.roomTypeId,
                accommodation_id: '123e4567-e89b-12d3-a456-426614174000',
                name: 'Standard Room',
                description: null,
                capacity: 2,
                total_rooms: 10,
                price_per_night: 150,
                host_subsidy_per_night: null,
                status: 'published',
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            mockFrom.mockReturnValue({
                select: _globals.jest.fn().mockReturnValue({
                    eq: _globals.jest.fn().mockReturnValue({
                        single: _globals.jest.fn().mockResolvedValue({
                            data: mockRoomType,
                            error: null
                        })
                    })
                })
            });
            const result = await accommodationService.calculateRoomCost(validParams);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.numberOfNights).toBe(4);
                (0, _globals.expect)(result.data.pricePerNight).toBe(150);
                (0, _globals.expect)(result.data.subsidyPerNight).toBe(0);
                (0, _globals.expect)(result.data.totalCost).toBe(600); // 150 * 4
                (0, _globals.expect)(result.data.totalSubsidy).toBe(0);
                (0, _globals.expect)(result.data.guestCost).toBe(600); // 600 - 0
            }
        });
        (0, _globals.it)('should return error when room type not found', async ()=>{
            // Mock getRoomType to return NOT_FOUND error
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    code: 'PGRST116',
                    message: 'No rows found'
                }
            });
            const mockEq = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValue({
                select: mockSelect
            });
            const result = await accommodationService.calculateRoomCost(validParams);
            console.log('mockFrom called:', mockFrom.mock.calls.length, 'times');
            console.log('mockSelect called:', mockSelect.mock.calls.length, 'times');
            console.log('mockEq called:', mockEq.mock.calls.length, 'times');
            console.log('mockSingle called:', mockSingle.mock.calls.length, 'times');
            console.log('Result:', JSON.stringify(result, null, 2));
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('NOT_FOUND');
            }
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvc2VydmljZXMvYWNjb21tb2RhdGlvblNlcnZpY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRlc3QgU3VpdGU6IEFjY29tbW9kYXRpb24gU2VydmljZVxuICogXG4gKiBUZXN0cyBmb3IgYWNjb21tb2RhdGlvbiBtYW5hZ2VtZW50IHNlcnZpY2UgaW5jbHVkaW5nIHJvb20gdHlwZSBtYW5hZ2VtZW50XG4gKiBhbmQgZ3Vlc3QgYXNzaWdubWVudHMuXG4gKiBcbiAqIEZvbGxvd3MgdGhlIDQtcGF0aCB0ZXN0aW5nIHBhdHRlcm46XG4gKiAxLiBTdWNjZXNzIHBhdGggLSBWYWxpZCBpbnB1dCByZXR1cm5zIHN1Y2Nlc3NcbiAqIDIuIFZhbGlkYXRpb24gZXJyb3IgLSBJbnZhbGlkIGlucHV0IHJldHVybnMgVkFMSURBVElPTl9FUlJPUlxuICogMy4gRGF0YWJhc2UgZXJyb3IgLSBEQiBmYWlsdXJlIHJldHVybnMgREFUQUJBU0VfRVJST1JcbiAqIDQuIFNlY3VyaXR5IC0gTWFsaWNpb3VzIGlucHV0IGlzIHNhbml0aXplZFxuICovXG5cbmltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCBqZXN0LCBiZWZvcmVFYWNoLCBhZnRlckVhY2ggfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCB0eXBlIHsgXG4gIENyZWF0ZUFjY29tbW9kYXRpb25EVE8sIFxuICBVcGRhdGVBY2NvbW1vZGF0aW9uRFRPLFxuICBDcmVhdGVSb29tVHlwZURUTyxcbiAgVXBkYXRlUm9vbVR5cGVEVE8sXG4gIENyZWF0ZVJvb21Bc3NpZ25tZW50RFRPLFxuICBVcGRhdGVSb29tQXNzaWdubWVudERUTyxcbiAgQ2FsY3VsYXRlQ29zdERUT1xufSBmcm9tICdAL3NjaGVtYXMvYWNjb21tb2RhdGlvblNjaGVtYXMnO1xuXG4vLyBTZXQgdXAgZW52aXJvbm1lbnQgdmFyaWFibGVzIEJFRk9SRSBhbnkgaW1wb3J0c1xucHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMID0gJ2h0dHBzOi8vdGVzdC5zdXBhYmFzZS5jbyc7XG5wcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZID0gJ3Rlc3Qtc2VydmljZS1yb2xlLWtleSc7XG5cbi8vIE1vY2sgU3VwYWJhc2UgY2xpZW50IGNyZWF0aW9uIEJFRk9SRSBhbnkgaW1wb3J0cyAtIFBhdHRlcm4gQVxuamVzdC5tb2NrKCdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tGcm9tID0gamVzdC5mbigpO1xuICBjb25zdCBtb2NrU3VwYWJhc2VDbGllbnQgPSB7XG4gICAgZnJvbTogbW9ja0Zyb20sXG4gIH07XG4gIFxuICByZXR1cm4ge1xuICAgIGNyZWF0ZUNsaWVudDogamVzdC5mbigoKSA9PiBtb2NrU3VwYWJhc2VDbGllbnQpLFxuICAgIF9fbW9ja0Zyb206IG1vY2tGcm9tLCAvLyBFeHBvcnQgZm9yIHRlc3QgYWNjZXNzXG4gIH07XG59KTtcblxuLy8gSW1wb3J0IHNlcnZpY2UgdXNpbmcgcmVxdWlyZSgpIEFGVEVSIG1vY2tpbmdcbmNvbnN0IGFjY29tbW9kYXRpb25TZXJ2aWNlID0gcmVxdWlyZSgnLi9hY2NvbW1vZGF0aW9uU2VydmljZScpO1xuXG4vLyBHZXQgdGhlIG1vY2tlZCBmcm9tIGZ1bmN0aW9uXG5jb25zdCB7IF9fbW9ja0Zyb206IG1vY2tGcm9tIH0gPSByZXF1aXJlKCdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnKTtcblxuZGVzY3JpYmUoJ2FjY29tbW9kYXRpb25TZXJ2aWNlJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBcbiAgICAvLyBTZXQgdXAgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZvciB0aGUgc2VydmljZVxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCA9ICdodHRwczovL3Rlc3Quc3VwYWJhc2UuY28nO1xuICAgIHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkgPSAndGVzdC1zZXJ2aWNlLXJvbGUta2V5JztcbiAgICBcbiAgICAvLyBSZXNldCBTdXBhYmFzZSBtb2NrcyB0byBkZWZhdWx0IHN1Y2Nlc3NmdWwgc3RhdGVcbiAgICBtb2NrRnJvbS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiBbXSwgZXJyb3I6IG51bGwgfSksXG4gICAgICBpbnNlcnQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgIHNpbmdsZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogbnVsbCwgZXJyb3I6IG51bGwgfSksXG4gICAgICAgIH0pLFxuICAgICAgfSksXG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gQUNDT01NT0RBVElPTiBDUlVEIE9QRVJBVElPTlMgVEVTVFNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIGRlc2NyaWJlKCdjcmVhdGVBY2NvbW1vZGF0aW9uJywgKCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkRGF0YTogQ3JlYXRlQWNjb21tb2RhdGlvbkRUTyA9IHtcbiAgICAgIG5hbWU6ICdDb3N0YSBSaWNhIEJlYWNoIFJlc29ydCcsXG4gICAgICBsb2NhdGlvbklkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQmVhdXRpZnVsIGJlYWNoZnJvbnQgcmVzb3J0JyxcbiAgICAgIGFkZHJlc3M6ICcxMjMgQmVhY2ggUm9hZCwgQ29zdGEgUmljYScsXG4gICAgICBzdGF0dXM6ICdwdWJsaXNoZWQnLFxuICAgIH07XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBzdWNjZXNzIHdpdGggYWNjb21tb2RhdGlvbiBkYXRhIHdoZW4gdmFsaWQgaW5wdXQgcHJvdmlkZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQWNjb21tb2RhdGlvbiA9IHtcbiAgICAgICAgaWQ6ICdhY2NvbW1vZGF0aW9uLTEnLFxuICAgICAgICBuYW1lOiB2YWxpZERhdGEubmFtZSxcbiAgICAgICAgbG9jYXRpb25faWQ6IHZhbGlkRGF0YS5sb2NhdGlvbklkLFxuICAgICAgICBkZXNjcmlwdGlvbjogdmFsaWREYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICBhZGRyZXNzOiB2YWxpZERhdGEuYWRkcmVzcyxcbiAgICAgICAgc3RhdHVzOiB2YWxpZERhdGEuc3RhdHVzLFxuICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgfTtcblxuICAgICAgbW9ja0Zyb20ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaW5zZXJ0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgc2luZ2xlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiBtb2NrQWNjb21tb2RhdGlvbiwgZXJyb3I6IG51bGwgfSksXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFjY29tbW9kYXRpb25TZXJ2aWNlLmNyZWF0ZUFjY29tbW9kYXRpb24odmFsaWREYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5pZCkudG9CZSgnYWNjb21tb2RhdGlvbi0xJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5uYW1lKS50b0JlKCdDb3N0YSBSaWNhIEJlYWNoIFJlc29ydCcpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEubG9jYXRpb25JZCkudG9CZSh2YWxpZERhdGEubG9jYXRpb25JZCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBWQUxJREFUSU9OX0VSUk9SIHdoZW4gbmFtZSBpcyBtaXNzaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZERhdGEgPSB7IC4uLnZhbGlkRGF0YSwgbmFtZTogJycgfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFjY29tbW9kYXRpb25TZXJ2aWNlLmNyZWF0ZUFjY29tbW9kYXRpb24oaW52YWxpZERhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIFZBTElEQVRJT05fRVJST1Igd2hlbiBuYW1lIGV4Y2VlZHMgMjAwIGNoYXJhY3RlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkRGF0YSA9IHsgLi4udmFsaWREYXRhLCBuYW1lOiAnYScucmVwZWF0KDIwMSkgfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFjY29tbW9kYXRpb25TZXJ2aWNlLmNyZWF0ZUFjY29tbW9kYXRpb24oaW52YWxpZERhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIERBVEFCQVNFX0VSUk9SIHdoZW4gaW5zZXJ0IGZhaWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0Zyb20ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaW5zZXJ0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgc2luZ2xlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBcbiAgICAgICAgICAgICAgZGF0YTogbnVsbCwgXG4gICAgICAgICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdDb25uZWN0aW9uIGZhaWxlZCcsIGNvZGU6ICdEQl9FUlJPUicgfSBcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhY2NvbW1vZGF0aW9uU2VydmljZS5jcmVhdGVBY2NvbW1vZGF0aW9uKHZhbGlkRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnREFUQUJBU0VfRVJST1InKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2FuaXRpemUgaW5wdXQgdG8gcHJldmVudCBYU1MgYXR0YWNrcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1hbGljaW91c0RhdGEgPSB7XG4gICAgICAgIC4uLnZhbGlkRGF0YSxcbiAgICAgICAgbmFtZTogJzxzY3JpcHQ+YWxlcnQoXCJ4c3NcIik8L3NjcmlwdD5SZXNvcnQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJzxpbWcgc3JjPXggb25lcnJvcj1hbGVydCgxKT5EZXNjcmlwdGlvbicsXG4gICAgICAgIGFkZHJlc3M6ICc8c2NyaXB0PmFsZXJ0KFwieHNzXCIpPC9zY3JpcHQ+MTIzIEJlYWNoIFJvYWQnLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja0FjY29tbW9kYXRpb24gPSB7XG4gICAgICAgIGlkOiAnYWNjb21tb2RhdGlvbi0xJyxcbiAgICAgICAgbmFtZTogJ1Jlc29ydCcsXG4gICAgICAgIGxvY2F0aW9uX2lkOiB2YWxpZERhdGEubG9jYXRpb25JZCxcbiAgICAgICAgZGVzY3JpcHRpb246ICdEZXNjcmlwdGlvbicsXG4gICAgICAgIGFkZHJlc3M6ICcxMjMgQmVhY2ggUm9hZCcsXG4gICAgICAgIHN0YXR1czogdmFsaWREYXRhLnN0YXR1cyxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGluc2VydDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgIHNpbmdsZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogbW9ja0FjY29tbW9kYXRpb24sIGVycm9yOiBudWxsIH0pLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhY2NvbW1vZGF0aW9uU2VydmljZS5jcmVhdGVBY2NvbW1vZGF0aW9uKG1hbGljaW91c0RhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLm5hbWUpLm5vdC50b0NvbnRhaW4oJzxzY3JpcHQ+Jyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5kZXNjcmlwdGlvbikubm90LnRvQ29udGFpbignPGltZycpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuYWRkcmVzcykubm90LnRvQ29udGFpbignPHNjcmlwdD4nKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldEFjY29tbW9kYXRpb24nLCAoKSA9PiB7XG4gICAgY29uc3QgdmFsaWRJZCA9ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gYWNjb21tb2RhdGlvbiB3aGVuIHZhbGlkIElEIHByb3ZpZGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0FjY29tbW9kYXRpb24gPSB7XG4gICAgICAgIGlkOiB2YWxpZElkLFxuICAgICAgICBuYW1lOiAnQ29zdGEgUmljYSBCZWFjaCBSZXNvcnQnLFxuICAgICAgICBsb2NhdGlvbl9pZDogbnVsbCxcbiAgICAgICAgZGVzY3JpcHRpb246ICdCZWF1dGlmdWwgcmVzb3J0JyxcbiAgICAgICAgYWRkcmVzczogJzEyMyBCZWFjaCBSb2FkJyxcbiAgICAgICAgc3RhdHVzOiAncHVibGlzaGVkJyxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgZXE6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgc2luZ2xlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiBtb2NrQWNjb21tb2RhdGlvbiwgZXJyb3I6IG51bGwgfSksXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFjY29tbW9kYXRpb25TZXJ2aWNlLmdldEFjY29tbW9kYXRpb24odmFsaWRJZCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuaWQpLnRvQmUodmFsaWRJZCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5uYW1lKS50b0JlKCdDb3N0YSBSaWNhIEJlYWNoIFJlc29ydCcpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gTk9UX0ZPVU5EIHdoZW4gYWNjb21tb2RhdGlvbiBkb2VzIG5vdCBleGlzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgZXE6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgc2luZ2xlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBcbiAgICAgICAgICAgICAgZGF0YTogbnVsbCwgXG4gICAgICAgICAgICAgIGVycm9yOiB7IGNvZGU6ICdQR1JTVDExNicsIG1lc3NhZ2U6ICdObyByb3dzIGZvdW5kJyB9IFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFjY29tbW9kYXRpb25TZXJ2aWNlLmdldEFjY29tbW9kYXRpb24odmFsaWRJZCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnTk9UX0ZPVU5EJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBEQVRBQkFTRV9FUlJPUiB3aGVuIGRhdGFiYXNlIHF1ZXJ5IGZhaWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0Zyb20ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICBlcTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IFxuICAgICAgICAgICAgICBkYXRhOiBudWxsLCBcbiAgICAgICAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ0Nvbm5lY3Rpb24gZmFpbGVkJywgY29kZTogJ0RCX0VSUk9SJyB9IFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFjY29tbW9kYXRpb25TZXJ2aWNlLmdldEFjY29tbW9kYXRpb24odmFsaWRJZCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnREFUQUJBU0VfRVJST1InKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBST09NIFRZUEUgQ1JVRCBPUEVSQVRJT05TIFRFU1RTXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBkZXNjcmliZSgnY3JlYXRlUm9vbVR5cGUnLCAoKSA9PiB7XG4gICAgY29uc3QgdmFsaWREYXRhOiBDcmVhdGVSb29tVHlwZURUTyA9IHtcbiAgICAgIGFjY29tbW9kYXRpb25JZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICBuYW1lOiAnRGVsdXhlIE9jZWFuIFZpZXcnLFxuICAgICAgZGVzY3JpcHRpb246ICdTcGFjaW91cyByb29tIHdpdGggb2NlYW4gdmlldycsXG4gICAgICBjYXBhY2l0eTogMixcbiAgICAgIHRvdGFsUm9vbXM6IDEwLFxuICAgICAgcHJpY2VQZXJOaWdodDogMjAwLFxuICAgICAgaG9zdFN1YnNpZHlQZXJOaWdodDogNTAsXG4gICAgICBzdGF0dXM6ICdwdWJsaXNoZWQnLFxuICAgIH07XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBzdWNjZXNzIHdpdGggcm9vbSB0eXBlIGRhdGEgd2hlbiB2YWxpZCBpbnB1dCBwcm92aWRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tSb29tVHlwZSA9IHtcbiAgICAgICAgaWQ6ICdyb29tLXR5cGUtMScsXG4gICAgICAgIGFjY29tbW9kYXRpb25faWQ6IHZhbGlkRGF0YS5hY2NvbW1vZGF0aW9uSWQsXG4gICAgICAgIG5hbWU6IHZhbGlkRGF0YS5uYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogdmFsaWREYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICBjYXBhY2l0eTogdmFsaWREYXRhLmNhcGFjaXR5LFxuICAgICAgICB0b3RhbF9yb29tczogdmFsaWREYXRhLnRvdGFsUm9vbXMsXG4gICAgICAgIHByaWNlX3Blcl9uaWdodDogdmFsaWREYXRhLnByaWNlUGVyTmlnaHQsXG4gICAgICAgIGhvc3Rfc3Vic2lkeV9wZXJfbmlnaHQ6IHZhbGlkRGF0YS5ob3N0U3Vic2lkeVBlck5pZ2h0LFxuICAgICAgICBzdGF0dXM6IHZhbGlkRGF0YS5zdGF0dXMsXG4gICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICB9O1xuXG4gICAgICBtb2NrRnJvbS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpbnNlcnQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IG1vY2tSb29tVHlwZSwgZXJyb3I6IG51bGwgfSksXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFjY29tbW9kYXRpb25TZXJ2aWNlLmNyZWF0ZVJvb21UeXBlKHZhbGlkRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuaWQpLnRvQmUoJ3Jvb20tdHlwZS0xJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5uYW1lKS50b0JlKCdEZWx1eGUgT2NlYW4gVmlldycpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuY2FwYWNpdHkpLnRvQmUoMik7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS50b3RhbFJvb21zKS50b0JlKDEwKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnByaWNlUGVyTmlnaHQpLnRvQmUoMjAwKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmhvc3RTdWJzaWR5UGVyTmlnaHQpLnRvQmUoNTApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIG5hbWUgaXMgbWlzc2luZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWREYXRhID0geyAuLi52YWxpZERhdGEsIG5hbWU6ICcnIH07XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhY2NvbW1vZGF0aW9uU2VydmljZS5jcmVhdGVSb29tVHlwZShpbnZhbGlkRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIGNhcGFjaXR5IGlzIG5vdCBwb3NpdGl2ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWREYXRhID0geyAuLi52YWxpZERhdGEsIGNhcGFjaXR5OiAwIH07XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhY2NvbW1vZGF0aW9uU2VydmljZS5jcmVhdGVSb29tVHlwZShpbnZhbGlkRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIGhvc3RTdWJzaWR5UGVyTmlnaHQgZXhjZWVkcyBwcmljZVBlck5pZ2h0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZERhdGEgPSB7IC4uLnZhbGlkRGF0YSwgaG9zdFN1YnNpZHlQZXJOaWdodDogMjUwIH07IC8vIEdyZWF0ZXIgdGhhbiBwcmljZVBlck5pZ2h0ICgyMDApXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhY2NvbW1vZGF0aW9uU2VydmljZS5jcmVhdGVSb29tVHlwZShpbnZhbGlkRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzYW5pdGl6ZSBpbnB1dCB0byBwcmV2ZW50IFhTUyBhdHRhY2tzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWFsaWNpb3VzRGF0YSA9IHtcbiAgICAgICAgLi4udmFsaWREYXRhLFxuICAgICAgICBuYW1lOiAnPHNjcmlwdD5hbGVydChcInhzc1wiKTwvc2NyaXB0PkRlbHV4ZSBSb29tJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICc8aW1nIHNyYz14IG9uZXJyb3I9YWxlcnQoMSk+T2NlYW4gdmlldyByb29tJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tSb29tVHlwZSA9IHtcbiAgICAgICAgaWQ6ICdyb29tLXR5cGUtMScsXG4gICAgICAgIGFjY29tbW9kYXRpb25faWQ6IHZhbGlkRGF0YS5hY2NvbW1vZGF0aW9uSWQsXG4gICAgICAgIG5hbWU6ICdEZWx1eGUgUm9vbScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnT2NlYW4gdmlldyByb29tJyxcbiAgICAgICAgY2FwYWNpdHk6IHZhbGlkRGF0YS5jYXBhY2l0eSxcbiAgICAgICAgdG90YWxfcm9vbXM6IHZhbGlkRGF0YS50b3RhbFJvb21zLFxuICAgICAgICBwcmljZV9wZXJfbmlnaHQ6IHZhbGlkRGF0YS5wcmljZVBlck5pZ2h0LFxuICAgICAgICBob3N0X3N1YnNpZHlfcGVyX25pZ2h0OiB2YWxpZERhdGEuaG9zdFN1YnNpZHlQZXJOaWdodCxcbiAgICAgICAgc3RhdHVzOiB2YWxpZERhdGEuc3RhdHVzLFxuICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgfTtcblxuICAgICAgbW9ja0Zyb20ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaW5zZXJ0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgc2luZ2xlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiBtb2NrUm9vbVR5cGUsIGVycm9yOiBudWxsIH0pLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhY2NvbW1vZGF0aW9uU2VydmljZS5jcmVhdGVSb29tVHlwZShtYWxpY2lvdXNEYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5uYW1lKS5ub3QudG9Db250YWluKCc8c2NyaXB0PicpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuZGVzY3JpcHRpb24pLm5vdC50b0NvbnRhaW4oJzxpbWcnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xpc3RSb29tVHlwZXMnLCAoKSA9PiB7XG4gICAgY29uc3QgYWNjb21tb2RhdGlvbklkID0gJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCc7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiByb29tIHR5cGVzIGZvciBhY2NvbW1vZGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Jvb21UeXBlcyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAncm9vbS10eXBlLTEnLFxuICAgICAgICAgIGFjY29tbW9kYXRpb25faWQ6IGFjY29tbW9kYXRpb25JZCxcbiAgICAgICAgICBuYW1lOiAnU3RhbmRhcmQgUm9vbScsXG4gICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsXG4gICAgICAgICAgY2FwYWNpdHk6IDIsXG4gICAgICAgICAgdG90YWxfcm9vbXM6IDUsXG4gICAgICAgICAgcHJpY2VfcGVyX25pZ2h0OiAxNTAsXG4gICAgICAgICAgaG9zdF9zdWJzaWR5X3Blcl9uaWdodDogbnVsbCxcbiAgICAgICAgICBzdGF0dXM6ICdwdWJsaXNoZWQnLFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAncm9vbS10eXBlLTInLFxuICAgICAgICAgIGFjY29tbW9kYXRpb25faWQ6IGFjY29tbW9kYXRpb25JZCxcbiAgICAgICAgICBuYW1lOiAnRGVsdXhlIFJvb20nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnT2NlYW4gdmlldycsXG4gICAgICAgICAgY2FwYWNpdHk6IDIsXG4gICAgICAgICAgdG90YWxfcm9vbXM6IDMsXG4gICAgICAgICAgcHJpY2VfcGVyX25pZ2h0OiAyMDAsXG4gICAgICAgICAgaG9zdF9zdWJzaWR5X3Blcl9uaWdodDogNTAsXG4gICAgICAgICAgc3RhdHVzOiAncHVibGlzaGVkJyxcbiAgICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICBtb2NrRnJvbS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgIGVxOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgIG9yZGVyOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiBtb2NrUm9vbVR5cGVzLCBlcnJvcjogbnVsbCB9KSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWNjb21tb2RhdGlvblNlcnZpY2UubGlzdFJvb21UeXBlcyhhY2NvbW1vZGF0aW9uSWQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVswXS5uYW1lKS50b0JlKCdTdGFuZGFyZCBSb29tJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVsxXS5uYW1lKS50b0JlKCdEZWx1eGUgUm9vbScpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gREFUQUJBU0VfRVJST1Igd2hlbiBxdWVyeSBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgZXE6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgb3JkZXI6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IFxuICAgICAgICAgICAgICBkYXRhOiBudWxsLCBcbiAgICAgICAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ0Nvbm5lY3Rpb24gZmFpbGVkJywgY29kZTogJ0RCX0VSUk9SJyB9IFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFjY29tbW9kYXRpb25TZXJ2aWNlLmxpc3RSb29tVHlwZXMoYWNjb21tb2RhdGlvbklkKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdEQVRBQkFTRV9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFJPT00gQVNTSUdOTUVOVCBPUEVSQVRJT05TIFRFU1RTXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBkZXNjcmliZSgnY3JlYXRlUm9vbUFzc2lnbm1lbnQnLCAoKSA9PiB7XG4gICAgY29uc3QgdmFsaWREYXRhOiBDcmVhdGVSb29tQXNzaWdubWVudERUTyA9IHtcbiAgICAgIHJvb21UeXBlSWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgZ3Vlc3RJZDogJzQ1NmU3ODkwLWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICBjaGVja0luOiAnMjAyNC0wNi0wMScsXG4gICAgICBjaGVja091dDogJzIwMjQtMDYtMDUnLFxuICAgICAgbm90ZXM6ICdTcGVjaWFsIGRpZXRhcnkgcmVxdWlyZW1lbnRzJyxcbiAgICB9O1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc3VjY2VzcyB3aXRoIHJvb20gYXNzaWdubWVudCBkYXRhIHdoZW4gdmFsaWQgaW5wdXQgcHJvdmlkZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQXNzaWdubWVudCA9IHtcbiAgICAgICAgaWQ6ICdhc3NpZ25tZW50LTEnLFxuICAgICAgICByb29tX3R5cGVfaWQ6IHZhbGlkRGF0YS5yb29tVHlwZUlkLFxuICAgICAgICBndWVzdF9pZDogdmFsaWREYXRhLmd1ZXN0SWQsXG4gICAgICAgIGNoZWNrX2luOiB2YWxpZERhdGEuY2hlY2tJbixcbiAgICAgICAgY2hlY2tfb3V0OiB2YWxpZERhdGEuY2hlY2tPdXQsXG4gICAgICAgIG5vdGVzOiB2YWxpZERhdGEubm90ZXMsXG4gICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICB9O1xuXG4gICAgICBtb2NrRnJvbS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpbnNlcnQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IG1vY2tBc3NpZ25tZW50LCBlcnJvcjogbnVsbCB9KSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWNjb21tb2RhdGlvblNlcnZpY2UuY3JlYXRlUm9vbUFzc2lnbm1lbnQodmFsaWREYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5pZCkudG9CZSgnYXNzaWdubWVudC0xJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5yb29tVHlwZUlkKS50b0JlKHZhbGlkRGF0YS5yb29tVHlwZUlkKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmd1ZXN0SWQpLnRvQmUodmFsaWREYXRhLmd1ZXN0SWQpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuY2hlY2tJbikudG9CZSh2YWxpZERhdGEuY2hlY2tJbik7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5jaGVja091dCkudG9CZSh2YWxpZERhdGEuY2hlY2tPdXQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIGNoZWNrT3V0IGlzIGJlZm9yZSBjaGVja0luJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZERhdGEgPSB7IFxuICAgICAgICAuLi52YWxpZERhdGEsIFxuICAgICAgICBjaGVja0luOiAnMjAyNC0wNi0wNScsXG4gICAgICAgIGNoZWNrT3V0OiAnMjAyNC0wNi0wMScgXG4gICAgICB9O1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWNjb21tb2RhdGlvblNlcnZpY2UuY3JlYXRlUm9vbUFzc2lnbm1lbnQoaW52YWxpZERhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIENPTkZMSUNUIHdoZW4gZ3Vlc3QgYWxyZWFkeSBoYXMgYXNzaWdubWVudCBmb3IgZGF0ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRnJvbS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpbnNlcnQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IFxuICAgICAgICAgICAgICBkYXRhOiBudWxsLCBcbiAgICAgICAgICAgICAgZXJyb3I6IHsgY29kZTogJzIzNTA1JywgbWVzc2FnZTogJ0R1cGxpY2F0ZSBrZXkgdmlvbGF0aW9uJyB9IFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFjY29tbW9kYXRpb25TZXJ2aWNlLmNyZWF0ZVJvb21Bc3NpZ25tZW50KHZhbGlkRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnQ09ORkxJQ1QnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2FuaXRpemUgbm90ZXMgdG8gcHJldmVudCBYU1MgYXR0YWNrcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1hbGljaW91c0RhdGEgPSB7XG4gICAgICAgIC4uLnZhbGlkRGF0YSxcbiAgICAgICAgbm90ZXM6ICc8c2NyaXB0PmFsZXJ0KFwieHNzXCIpPC9zY3JpcHQ+U3BlY2lhbCByZXF1aXJlbWVudHMnLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja0Fzc2lnbm1lbnQgPSB7XG4gICAgICAgIGlkOiAnYXNzaWdubWVudC0xJyxcbiAgICAgICAgcm9vbV90eXBlX2lkOiB2YWxpZERhdGEucm9vbVR5cGVJZCxcbiAgICAgICAgZ3Vlc3RfaWQ6IHZhbGlkRGF0YS5ndWVzdElkLFxuICAgICAgICBjaGVja19pbjogdmFsaWREYXRhLmNoZWNrSW4sXG4gICAgICAgIGNoZWNrX291dDogdmFsaWREYXRhLmNoZWNrT3V0LFxuICAgICAgICBub3RlczogJ1NwZWNpYWwgcmVxdWlyZW1lbnRzJyxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGluc2VydDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgIHNpbmdsZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogbW9ja0Fzc2lnbm1lbnQsIGVycm9yOiBudWxsIH0pLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhY2NvbW1vZGF0aW9uU2VydmljZS5jcmVhdGVSb29tQXNzaWdubWVudChtYWxpY2lvdXNEYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5ub3Rlcykubm90LnRvQ29udGFpbignPHNjcmlwdD4nKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xpc3RHdWVzdFJvb21Bc3NpZ25tZW50cycsICgpID0+IHtcbiAgICBjb25zdCBndWVzdElkID0gJzQ1NmU3ODkwLWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCc7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiByb29tIGFzc2lnbm1lbnRzIGZvciBndWVzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tBc3NpZ25tZW50cyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnYXNzaWdubWVudC0xJyxcbiAgICAgICAgICByb29tX3R5cGVfaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICAgIGd1ZXN0X2lkOiBndWVzdElkLFxuICAgICAgICAgIGNoZWNrX2luOiAnMjAyNC0wNi0wMScsXG4gICAgICAgICAgY2hlY2tfb3V0OiAnMjAyNC0wNi0wNScsXG4gICAgICAgICAgbm90ZXM6IG51bGwsXG4gICAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgbW9ja0Zyb20ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICBlcTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICBvcmRlcjogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogbW9ja0Fzc2lnbm1lbnRzLCBlcnJvcjogbnVsbCB9KSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWNjb21tb2RhdGlvblNlcnZpY2UubGlzdEd1ZXN0Um9vbUFzc2lnbm1lbnRzKGd1ZXN0SWQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVswXS5ndWVzdElkKS50b0JlKGd1ZXN0SWQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbGlzdFJvb21UeXBlQXNzaWdubWVudHMnLCAoKSA9PiB7XG4gICAgY29uc3Qgcm9vbVR5cGVJZCA9ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcm9vbSBhc3NpZ25tZW50cyBmb3Igcm9vbSB0eXBlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Fzc2lnbm1lbnRzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdhc3NpZ25tZW50LTEnLFxuICAgICAgICAgIHJvb21fdHlwZV9pZDogcm9vbVR5cGVJZCxcbiAgICAgICAgICBndWVzdF9pZDogJzQ1NmU3ODkwLWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgICAgY2hlY2tfaW46ICcyMDI0LTA2LTAxJyxcbiAgICAgICAgICBjaGVja19vdXQ6ICcyMDI0LTA2LTA1JyxcbiAgICAgICAgICBub3RlczogbnVsbCxcbiAgICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICBtb2NrRnJvbS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgIGVxOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgIG9yZGVyOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiBtb2NrQXNzaWdubWVudHMsIGVycm9yOiBudWxsIH0pLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhY2NvbW1vZGF0aW9uU2VydmljZS5saXN0Um9vbVR5cGVBc3NpZ25tZW50cyhyb29tVHlwZUlkKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGFbMF0ucm9vbVR5cGVJZCkudG9CZShyb29tVHlwZUlkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBDT1NUIENBTENVTEFUSU9OIE9QRVJBVElPTlMgVEVTVFNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIGRlc2NyaWJlKCdjYWxjdWxhdGVSb29tQ29zdCcsICgpID0+IHtcbiAgICBjb25zdCB2YWxpZFBhcmFtczogQ2FsY3VsYXRlQ29zdERUTyA9IHtcbiAgICAgIHJvb21UeXBlSWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgY2hlY2tJbjogJzIwMjQtMDYtMDEnLFxuICAgICAgY2hlY2tPdXQ6ICcyMDI0LTA2LTA1JyxcbiAgICB9O1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgY29zdCBjb3JyZWN0bHkgd2l0aCBzdWJzaWR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Jvb21UeXBlID0ge1xuICAgICAgICBpZDogdmFsaWRQYXJhbXMucm9vbVR5cGVJZCxcbiAgICAgICAgYWNjb21tb2RhdGlvbl9pZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgIG5hbWU6ICdEZWx1eGUgUm9vbScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLFxuICAgICAgICBjYXBhY2l0eTogMixcbiAgICAgICAgdG90YWxfcm9vbXM6IDEwLFxuICAgICAgICBwcmljZV9wZXJfbmlnaHQ6IDIwMCxcbiAgICAgICAgaG9zdF9zdWJzaWR5X3Blcl9uaWdodDogNTAsXG4gICAgICAgIHN0YXR1czogJ3B1Ymxpc2hlZCcsXG4gICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICB9O1xuXG4gICAgICAvLyBNb2NrIHRoZSBxdWVyeSBjaGFpbiBmb3IgZ2V0Um9vbVR5cGVcbiAgICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgZXE6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgc2luZ2xlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiBtb2NrUm9vbVR5cGUsIGVycm9yOiBudWxsIH0pLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhY2NvbW1vZGF0aW9uU2VydmljZS5jYWxjdWxhdGVSb29tQ29zdCh2YWxpZFBhcmFtcyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEubnVtYmVyT2ZOaWdodHMpLnRvQmUoNCk7IC8vIEp1bmUgMS01ID0gNCBuaWdodHNcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnByaWNlUGVyTmlnaHQpLnRvQmUoMjAwKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnN1YnNpZHlQZXJOaWdodCkudG9CZSg1MCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS50b3RhbENvc3QpLnRvQmUoODAwKTsgLy8gMjAwICogNFxuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEudG90YWxTdWJzaWR5KS50b0JlKDIwMCk7IC8vIDUwICogNFxuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuZ3Vlc3RDb3N0KS50b0JlKDYwMCk7IC8vIDgwMCAtIDIwMFxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgY29zdCBjb3JyZWN0bHkgd2l0aG91dCBzdWJzaWR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Jvb21UeXBlID0ge1xuICAgICAgICBpZDogdmFsaWRQYXJhbXMucm9vbVR5cGVJZCxcbiAgICAgICAgYWNjb21tb2RhdGlvbl9pZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgIG5hbWU6ICdTdGFuZGFyZCBSb29tJyxcbiAgICAgICAgZGVzY3JpcHRpb246IG51bGwsXG4gICAgICAgIGNhcGFjaXR5OiAyLFxuICAgICAgICB0b3RhbF9yb29tczogMTAsXG4gICAgICAgIHByaWNlX3Blcl9uaWdodDogMTUwLFxuICAgICAgICBob3N0X3N1YnNpZHlfcGVyX25pZ2h0OiBudWxsLFxuICAgICAgICBzdGF0dXM6ICdwdWJsaXNoZWQnLFxuICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgfTtcblxuICAgICAgbW9ja0Zyb20ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICBlcTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IG1vY2tSb29tVHlwZSwgZXJyb3I6IG51bGwgfSksXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFjY29tbW9kYXRpb25TZXJ2aWNlLmNhbGN1bGF0ZVJvb21Db3N0KHZhbGlkUGFyYW1zKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5udW1iZXJPZk5pZ2h0cykudG9CZSg0KTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnByaWNlUGVyTmlnaHQpLnRvQmUoMTUwKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnN1YnNpZHlQZXJOaWdodCkudG9CZSgwKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnRvdGFsQ29zdCkudG9CZSg2MDApOyAvLyAxNTAgKiA0XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS50b3RhbFN1YnNpZHkpLnRvQmUoMCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5ndWVzdENvc3QpLnRvQmUoNjAwKTsgLy8gNjAwIC0gMFxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZXJyb3Igd2hlbiByb29tIHR5cGUgbm90IGZvdW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBnZXRSb29tVHlwZSB0byByZXR1cm4gTk9UX0ZPVU5EIGVycm9yXG4gICAgICBjb25zdCBtb2NrU2luZ2xlID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgXG4gICAgICAgIGRhdGE6IG51bGwsIFxuICAgICAgICBlcnJvcjogeyBjb2RlOiAnUEdSU1QxMTYnLCBtZXNzYWdlOiAnTm8gcm93cyBmb3VuZCcgfSBcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBtb2NrRXEgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgc2luZ2xlOiBtb2NrU2luZ2xlIH0pO1xuICAgICAgY29uc3QgbW9ja1NlbGVjdCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBlcTogbW9ja0VxIH0pO1xuICAgICAgXG4gICAgICBtb2NrRnJvbS5tb2NrUmV0dXJuVmFsdWUoeyBzZWxlY3Q6IG1vY2tTZWxlY3QgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFjY29tbW9kYXRpb25TZXJ2aWNlLmNhbGN1bGF0ZVJvb21Db3N0KHZhbGlkUGFyYW1zKTtcblxuICAgICAgY29uc29sZS5sb2coJ21vY2tGcm9tIGNhbGxlZDonLCBtb2NrRnJvbS5tb2NrLmNhbGxzLmxlbmd0aCwgJ3RpbWVzJyk7XG4gICAgICBjb25zb2xlLmxvZygnbW9ja1NlbGVjdCBjYWxsZWQ6JywgbW9ja1NlbGVjdC5tb2NrLmNhbGxzLmxlbmd0aCwgJ3RpbWVzJyk7XG4gICAgICBjb25zb2xlLmxvZygnbW9ja0VxIGNhbGxlZDonLCBtb2NrRXEubW9jay5jYWxscy5sZW5ndGgsICd0aW1lcycpO1xuICAgICAgY29uc29sZS5sb2coJ21vY2tTaW5nbGUgY2FsbGVkOicsIG1vY2tTaW5nbGUubW9jay5jYWxscy5sZW5ndGgsICd0aW1lcycpO1xuICAgICAgY29uc29sZS5sb2coJ1Jlc3VsdDonLCBKU09OLnN0cmluZ2lmeShyZXN1bHQsIG51bGwsIDIpKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdOT1RfRk9VTkQnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59KTsiXSwibmFtZXMiOlsicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJqZXN0IiwibW9jayIsIm1vY2tGcm9tIiwiZm4iLCJtb2NrU3VwYWJhc2VDbGllbnQiLCJmcm9tIiwiY3JlYXRlQ2xpZW50IiwiX19tb2NrRnJvbSIsImFjY29tbW9kYXRpb25TZXJ2aWNlIiwicmVxdWlyZSIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJtb2NrUmV0dXJuVmFsdWUiLCJzZWxlY3QiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImRhdGEiLCJlcnJvciIsImluc2VydCIsInNpbmdsZSIsInZhbGlkRGF0YSIsIm5hbWUiLCJsb2NhdGlvbklkIiwiZGVzY3JpcHRpb24iLCJhZGRyZXNzIiwic3RhdHVzIiwiaXQiLCJtb2NrQWNjb21tb2RhdGlvbiIsImlkIiwibG9jYXRpb25faWQiLCJjcmVhdGVkX2F0IiwidXBkYXRlZF9hdCIsInJlc3VsdCIsImNyZWF0ZUFjY29tbW9kYXRpb24iLCJleHBlY3QiLCJzdWNjZXNzIiwidG9CZSIsImludmFsaWREYXRhIiwiY29kZSIsInJlcGVhdCIsIm1lc3NhZ2UiLCJtYWxpY2lvdXNEYXRhIiwibm90IiwidG9Db250YWluIiwidmFsaWRJZCIsImVxIiwiZ2V0QWNjb21tb2RhdGlvbiIsImFjY29tbW9kYXRpb25JZCIsImNhcGFjaXR5IiwidG90YWxSb29tcyIsInByaWNlUGVyTmlnaHQiLCJob3N0U3Vic2lkeVBlck5pZ2h0IiwibW9ja1Jvb21UeXBlIiwiYWNjb21tb2RhdGlvbl9pZCIsInRvdGFsX3Jvb21zIiwicHJpY2VfcGVyX25pZ2h0IiwiaG9zdF9zdWJzaWR5X3Blcl9uaWdodCIsImNyZWF0ZVJvb21UeXBlIiwibW9ja1Jvb21UeXBlcyIsIm9yZGVyIiwibGlzdFJvb21UeXBlcyIsInRvSGF2ZUxlbmd0aCIsInJvb21UeXBlSWQiLCJndWVzdElkIiwiY2hlY2tJbiIsImNoZWNrT3V0Iiwibm90ZXMiLCJtb2NrQXNzaWdubWVudCIsInJvb21fdHlwZV9pZCIsImd1ZXN0X2lkIiwiY2hlY2tfaW4iLCJjaGVja19vdXQiLCJjcmVhdGVSb29tQXNzaWdubWVudCIsIm1vY2tBc3NpZ25tZW50cyIsImxpc3RHdWVzdFJvb21Bc3NpZ25tZW50cyIsImxpc3RSb29tVHlwZUFzc2lnbm1lbnRzIiwidmFsaWRQYXJhbXMiLCJjYWxjdWxhdGVSb29tQ29zdCIsIm51bWJlck9mTmlnaHRzIiwic3Vic2lkeVBlck5pZ2h0IiwidG90YWxDb3N0IiwidG90YWxTdWJzaWR5IiwiZ3Vlc3RDb3N0IiwibW9ja1NpbmdsZSIsIm1vY2tFcSIsIm1vY2tTZWxlY3QiLCJjb25zb2xlIiwibG9nIiwiY2FsbHMiLCJsZW5ndGgiLCJKU09OIiwic3RyaW5naWZ5Il0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Q0FXQzs7Ozt5QkFFaUU7QUFXbEUsa0RBQWtEO0FBQ2xEQSxRQUFRQyxHQUFHLENBQUNDLHdCQUF3QixHQUFHO0FBQ3ZDRixRQUFRQyxHQUFHLENBQUNFLHlCQUF5QixHQUFHO0FBRXhDLCtEQUErRDtBQUMvREMsYUFBSSxDQUFDQyxJQUFJLENBQUMseUJBQXlCO0lBQ2pDLE1BQU1DLFdBQVdGLGFBQUksQ0FBQ0csRUFBRTtJQUN4QixNQUFNQyxxQkFBcUI7UUFDekJDLE1BQU1IO0lBQ1I7SUFFQSxPQUFPO1FBQ0xJLGNBQWNOLGFBQUksQ0FBQ0csRUFBRSxDQUFDLElBQU1DO1FBQzVCRyxZQUFZTDtJQUNkO0FBQ0Y7QUFFQSwrQ0FBK0M7QUFDL0MsTUFBTU0sdUJBQXVCQyxRQUFRO0FBRXJDLCtCQUErQjtBQUMvQixNQUFNLEVBQUVGLFlBQVlMLFFBQVEsRUFBRSxHQUFHTyxRQUFRO0FBRXpDQyxJQUFBQSxpQkFBUSxFQUFDLHdCQUF3QjtJQUMvQkMsSUFBQUEsbUJBQVUsRUFBQztRQUNUWCxhQUFJLENBQUNZLGFBQWE7UUFFbEIsK0NBQStDO1FBQy9DaEIsUUFBUUMsR0FBRyxDQUFDQyx3QkFBd0IsR0FBRztRQUN2Q0YsUUFBUUMsR0FBRyxDQUFDRSx5QkFBeUIsR0FBRztRQUV4QyxtREFBbUQ7UUFDbkRHLFNBQVNXLGVBQWUsQ0FBQztZQUN2QkMs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