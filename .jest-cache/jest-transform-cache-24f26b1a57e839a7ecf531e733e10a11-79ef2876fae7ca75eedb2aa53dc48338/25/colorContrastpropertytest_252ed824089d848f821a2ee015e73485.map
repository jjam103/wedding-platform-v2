{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/utils/colorContrast.property.test.ts"],"sourcesContent":["import * as fc from 'fast-check';\nimport {\n  getContrastRatio,\n  meetsWCAG_AA,\n  costaRicaColors,\n  commonColorCombinations,\n} from './colorContrast';\n\n/**\n * Property 36: Costa Rica Theme Color Contrast\n * \n * For any color combination used in the UI from the Costa Rica theme palette,\n * the contrast ratio should meet or exceed WCAG 2.1 AA standards\n * (4.5:1 for normal text, 3:1 for large text).\n * \n * Validates: Requirements 17.8\n * Feature: destination-wedding-platform, Property 36: Costa Rica Theme Color Contrast\n */\n\ndescribe('Feature: destination-wedding-platform, Property 36: Costa Rica Theme Color Contrast', () => {\n  it('should meet WCAG 2.1 AA contrast for all common color combinations', () => {\n    // Test all predefined common color combinations\n    commonColorCombinations.forEach((combo) => {\n      const ratio = getContrastRatio(combo.foreground, combo.background);\n      \n      // Determine if this is large text (buttons, headings) or normal text\n      const isLargeText = combo.usage.includes('button') || combo.usage.includes('badge');\n      const level = isLargeText ? 'large' : 'normal';\n      \n      expect(meetsWCAG_AA(ratio, level)).toBe(true);\n      \n      // Log for debugging\n      if (!meetsWCAG_AA(ratio, level)) {\n        console.error(\n          `Failed contrast check for ${combo.usage}: ${ratio.toFixed(2)}:1 (${level} text)`\n        );\n      }\n    });\n  });\n\n  it('should meet WCAG 2.1 AA for jungle colors on white background', () => {\n    const white = costaRicaColors.cloud[50];\n    \n    // Test darker jungle shades (700+) used for text - these meet AA standards\n    const textShades = [\n      costaRicaColors.jungle[700],\n      costaRicaColors.jungle[800],\n      costaRicaColors.jungle[900],\n    ];\n    \n    textShades.forEach((shade) => {\n      const ratio = getContrastRatio(shade, white);\n      expect(meetsWCAG_AA(ratio, 'normal')).toBe(true);\n    });\n  });\n\n  it('should meet WCAG 2.1 AA for ocean colors on white background', () => {\n    const white = costaRicaColors.cloud[50];\n    \n    // Test darker ocean shades (700+) used for text - these meet AA standards\n    const textShades = [\n      costaRicaColors.ocean[700],\n      costaRicaColors.ocean[800],\n      costaRicaColors.ocean[900],\n    ];\n    \n    textShades.forEach((shade) => {\n      const ratio = getContrastRatio(shade, white);\n      expect(meetsWCAG_AA(ratio, 'normal')).toBe(true);\n    });\n  });\n\n  it('should meet WCAG 2.1 AA for sage colors on white background', () => {\n    const white = costaRicaColors.cloud[50];\n    \n    // Test darker sage shades (used for text)\n    const textShades = [\n      costaRicaColors.sage[600],\n      costaRicaColors.sage[700],\n      costaRicaColors.sage[800],\n      costaRicaColors.sage[900],\n    ];\n    \n    textShades.forEach((shade) => {\n      const ratio = getContrastRatio(shade, white);\n      expect(meetsWCAG_AA(ratio, 'normal')).toBe(true);\n    });\n  });\n\n  it('should meet WCAG 2.1 AA for white text on colored backgrounds', () => {\n    const white = costaRicaColors.cloud[50];\n    \n    // Test primary color shades (600+) used for buttons/badges - these meet AA for large text\n    const backgrounds = [\n      costaRicaColors.jungle[600],\n      costaRicaColors.jungle[700],\n      costaRicaColors.ocean[600],\n      costaRicaColors.ocean[700],\n      costaRicaColors.sunset[600],\n      costaRicaColors.sunset[700],\n      costaRicaColors.volcano[600],\n      costaRicaColors.volcano[700],\n      costaRicaColors.sage[800],\n      costaRicaColors.sage[900],\n    ];\n    \n    backgrounds.forEach((background) => {\n      const ratio = getContrastRatio(white, background);\n      // Large text standard for buttons (3:1)\n      expect(meetsWCAG_AA(ratio, 'large')).toBe(true);\n    });\n  });\n\n  it('should meet WCAG 2.1 AA for colored text on light backgrounds', () => {\n    // Test alert/message color combinations\n    const combinations = [\n      { text: costaRicaColors.jungle[700], bg: costaRicaColors.jungle[50] },\n      { text: costaRicaColors.ocean[700], bg: costaRicaColors.ocean[50] },\n      { text: costaRicaColors.sunset[700], bg: costaRicaColors.sunset[50] },\n      { text: costaRicaColors.volcano[700], bg: costaRicaColors.volcano[50] },\n    ];\n    \n    combinations.forEach((combo) => {\n      const ratio = getContrastRatio(combo.text, combo.bg);\n      expect(meetsWCAG_AA(ratio, 'normal')).toBe(true);\n    });\n  });\n\n  it('should have sufficient contrast for all palette combinations used in UI', () => {\n    // Property-based test: generate color pairs from palette\n    const colorArbitrary = fc.constantFrom(\n      ...Object.values(costaRicaColors).flatMap((palette) => Object.values(palette))\n    );\n    \n    fc.assert(\n      fc.property(colorArbitrary, colorArbitrary, (color1, color2) => {\n        // Skip if colors are too similar (same shade level)\n        if (color1 === color2) {\n          return true;\n        }\n        \n        const ratio = getContrastRatio(color1, color2);\n        \n        // For any two different colors in our palette,\n        // if they're used together, they should have some minimum contrast\n        // We use a relaxed threshold here since not all combinations are used\n        expect(ratio).toBeGreaterThan(1.0);\n      }),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should maintain contrast ratios above minimum threshold', () => {\n    // Test that contrast ratios are calculated correctly\n    const testCases = [\n      { fg: '#000000', bg: '#ffffff', expectedMin: 21 }, // Black on white\n      { fg: '#ffffff', bg: '#000000', expectedMin: 21 }, // White on black\n      { fg: costaRicaColors.jungle[700], bg: costaRicaColors.cloud[50], expectedMin: 4.5 },\n      { fg: costaRicaColors.sage[900], bg: costaRicaColors.cloud[50], expectedMin: 4.5 },\n    ];\n    \n    testCases.forEach((testCase) => {\n      const ratio = getContrastRatio(testCase.fg, testCase.bg);\n      expect(ratio).toBeGreaterThanOrEqual(testCase.expectedMin);\n    });\n  });\n\n  it('should ensure primary action colors meet AA standards', () => {\n    const white = costaRicaColors.cloud[50];\n    \n    // Primary action colors (buttons, links) - use 600+ shades for AA compliance\n    const primaryColors = [\n      { color: costaRicaColors.jungle[600], usage: 'Primary button background' },\n      { color: costaRicaColors.jungle[700], usage: 'Primary button hover' },\n      { color: costaRicaColors.ocean[700], usage: 'Link color' },\n      { color: costaRicaColors.ocean[800], usage: 'Link hover' },\n    ];\n    \n    primaryColors.forEach(({ color, usage }) => {\n      const ratio = getContrastRatio(white, color);\n      expect(meetsWCAG_AA(ratio, 'large')).toBe(true);\n    });\n  });\n\n  it('should ensure error and warning colors meet AA standards', () => {\n    const white = costaRicaColors.cloud[50];\n    \n    // Error and warning colors - use 600+ for backgrounds, 700+ for text\n    const alertColors = [\n      { color: costaRicaColors.volcano[600], usage: 'Error background' },\n      { color: costaRicaColors.volcano[700], usage: 'Error text' },\n      { color: costaRicaColors.sunset[600], usage: 'Warning background' },\n      { color: costaRicaColors.sunset[700], usage: 'Warning text' },\n    ];\n    \n    alertColors.forEach(({ color, usage }) => {\n      const ratio = getContrastRatio(white, color);\n      const level = usage.includes('background') ? 'large' : 'normal';\n      expect(meetsWCAG_AA(ratio, level)).toBe(true);\n    });\n  });\n\n  it('should validate contrast for all text sizes', () => {\n    // Test both normal and large text standards\n    const combinations = [\n      {\n        fg: costaRicaColors.sage[900],\n        bg: costaRicaColors.cloud[50],\n        normalText: true,\n        largeText: true,\n      },\n      {\n        fg: costaRicaColors.cloud[50],\n        bg: costaRicaColors.jungle[600],\n        normalText: false, // May not meet normal text standard\n        largeText: true, // Should meet large text standard\n      },\n    ];\n    \n    combinations.forEach((combo) => {\n      const ratio = getContrastRatio(combo.fg, combo.bg);\n      \n      if (combo.normalText) {\n        expect(meetsWCAG_AA(ratio, 'normal')).toBe(true);\n      }\n      \n      if (combo.largeText) {\n        expect(meetsWCAG_AA(ratio, 'large')).toBe(true);\n      }\n    });\n  });\n});\n"],"names":["describe","it","commonColorCombinations","forEach","combo","ratio","getContrastRatio","foreground","background","isLargeText","usage","includes","level","expect","meetsWCAG_AA","toBe","console","error","toFixed","white","costaRicaColors","cloud","textShades","jungle","shade","ocean","sage","backgrounds","sunset","volcano","combinations","text","bg","colorArbitrary","fc","constantFrom","Object","values","flatMap","palette","assert","property","color1","color2","toBeGreaterThan","numRuns","testCases","fg","expectedMin","testCase","toBeGreaterThanOrEqual","primaryColors","color","alertColors","normalText","largeText"],"mappings":"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"}