{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/__tests__/mocks/mockServices.test.ts"],"sourcesContent":["/**\n * Tests for Mock External Services\n * \n * Verifies that mock services provide realistic responses and proper tracking.\n */\n\nimport { describe, it, expect, beforeEach } from '@jest/globals';\n\ndescribe('Mock B2 Service', () => {\n  let mockB2: any;\n\n  beforeEach(async () => {\n    mockB2 = await import('./mockB2Service');\n    mockB2.resetB2Client();\n  });\n\n  it('should validate B2 config successfully', () => {\n    const result = mockB2.validateB2Config();\n    expect(result.success).toBe(true);\n    expect(result.data).toHaveProperty('endpoint');\n    expect(result.data).toHaveProperty('bucket');\n  });\n\n  it('should initialize B2 client', () => {\n    const config = {\n      endpoint: 'https://test.com',\n      region: 'us-west',\n      accessKeyId: 'test-key',\n      secretAccessKey: 'test-secret',\n      bucket: 'test-bucket',\n      cdnDomain: 'test-cdn.com',\n    };\n\n    const result = mockB2.initializeB2Client(config);\n    expect(result.success).toBe(true);\n  });\n\n  it('should upload file and return mock URL', async () => {\n    const config = mockB2.validateB2Config().data;\n    mockB2.initializeB2Client(config);\n\n    const fileBuffer = Buffer.from('test file content');\n    const result = await mockB2.uploadToB2(fileBuffer, 'test.jpg', 'image/jpeg');\n\n    expect(result.success).toBe(true);\n    expect(result.data.url).toContain('test-cdn.example.com');\n    expect(result.data.key).toContain('photos/');\n    expect(result.data.key).toContain('test.jpg');\n  });\n\n  it('should track uploaded files', async () => {\n    const config = mockB2.validateB2Config().data;\n    mockB2.initializeB2Client(config);\n\n    const fileBuffer = Buffer.from('test file content');\n    await mockB2.uploadToB2(fileBuffer, 'photo1.jpg', 'image/jpeg');\n    await mockB2.uploadToB2(fileBuffer, 'photo2.jpg', 'image/jpeg');\n\n    const uploads = mockB2.getMockUploads();\n    expect(uploads).toHaveLength(2);\n    expect(uploads[0].fileName).toBe('photo1.jpg');\n    expect(uploads[1].fileName).toBe('photo2.jpg');\n  });\n\n  it('should perform health check', async () => {\n    const result = await mockB2.checkB2Health();\n    expect(result.success).toBe(true);\n    expect(result.data.healthy).toBe(true);\n  });\n\n  it('should simulate B2 failure', async () => {\n    const config = mockB2.validateB2Config().data;\n    mockB2.initializeB2Client(config);\n\n    mockB2.simulateB2Failure('Storage quota exceeded');\n    const status = mockB2.getB2HealthStatus();\n    expect(status.healthy).toBe(false);\n    expect(status.error).toBe('Storage quota exceeded');\n  });\n\n  it('should reset mock state', async () => {\n    const config = mockB2.validateB2Config().data;\n    mockB2.initializeB2Client(config);\n\n    const fileBuffer = Buffer.from('test');\n    await mockB2.uploadToB2(fileBuffer, 'test.jpg', 'image/jpeg');\n\n    mockB2.resetB2Client();\n    const uploads = mockB2.getMockUploads();\n    expect(uploads).toHaveLength(0);\n  });\n});\n\ndescribe('Mock Resend Service', () => {\n  let mockResend: any;\n\n  beforeEach(async () => {\n    mockResend = await import('./mockResendService');\n    mockResend.resetMockResend();\n  });\n\n  it('should send email successfully', async () => {\n    const client = new mockResend.MockResend();\n    const result = await client.emails.send({\n      from: 'test@example.com',\n      to: 'user@example.com',\n      subject: 'Test Email',\n      html: '<p>Hello!</p>',\n    });\n\n    expect(result.data).toBeTruthy();\n    expect(result.data?.id).toBeTruthy();\n    expect(result.error).toBeNull();\n  });\n\n  it('should track sent emails', async () => {\n    const client = new mockResend.MockResend();\n    await client.emails.send({\n      from: 'test@example.com',\n      to: 'user1@example.com',\n      subject: 'Email 1',\n      html: '<p>Test 1</p>',\n    });\n    await client.emails.send({\n      from: 'test@example.com',\n      to: 'user2@example.com',\n      subject: 'Email 2',\n      html: '<p>Test 2</p>',\n    });\n\n    const emails = mockResend.getSentEmails();\n    expect(emails).toHaveLength(2);\n    expect(emails[0].to).toBe('user1@example.com');\n    expect(emails[1].to).toBe('user2@example.com');\n  });\n\n  it('should filter emails by recipient', async () => {\n    const client = new mockResend.MockResend();\n    await client.emails.send({\n      from: 'test@example.com',\n      to: 'user1@example.com',\n      subject: 'Test',\n      html: '<p>Test</p>',\n    });\n    await client.emails.send({\n      from: 'test@example.com',\n      to: 'user2@example.com',\n      subject: 'Test',\n      html: '<p>Test</p>',\n    });\n\n    const emails = mockResend.getSentEmailsByRecipient('user1@example.com');\n    expect(emails).toHaveLength(1);\n    expect(emails[0].to).toBe('user1@example.com');\n  });\n\n  it('should verify email was sent', async () => {\n    const client = new mockResend.MockResend();\n    await client.emails.send({\n      from: 'test@example.com',\n      to: 'user@example.com',\n      subject: 'Welcome Email',\n      html: '<p>Welcome to our platform!</p>',\n    });\n\n    expect(mockResend.verifyEmailSent({\n      to: 'user@example.com',\n      subject: 'Welcome',\n    })).toBe(true);\n\n    expect(mockResend.verifyEmailSent({\n      to: 'other@example.com',\n    })).toBe(false);\n  });\n\n  it('should simulate email failure', async () => {\n    const client = new mockResend.MockResend();\n    mockResend.simulateEmailFailure('Invalid recipient');\n\n    const result = await client.emails.send({\n      from: 'test@example.com',\n      to: 'invalid@example.com',\n      subject: 'Test',\n      html: '<p>Test</p>',\n    });\n\n    expect(result.data).toBeNull();\n    expect(result.error).toBeTruthy();\n    expect(result.error.message).toBe('Invalid recipient');\n  });\n});\n\ndescribe('Mock Twilio Service', () => {\n  let mockTwilio: any;\n\n  beforeEach(async () => {\n    mockTwilio = await import('./mockTwilioService');\n    mockTwilio.resetMockTwilio();\n  });\n\n  it('should send SMS successfully', async () => {\n    const client = mockTwilio.mockTwilio('test-sid', 'test-token');\n    const result = await client.messages.create({\n      to: '+15551234567',\n      from: '+15559876543',\n      body: 'Test message',\n    });\n\n    expect(result.sid).toBeTruthy();\n    expect(result.status).toBe('sent');\n  });\n\n  it('should track sent messages', async () => {\n    const client = mockTwilio.mockTwilio('test-sid', 'test-token');\n    await client.messages.create({\n      to: '+15551234567',\n      from: '+15559876543',\n      body: 'Message 1',\n    });\n    await client.messages.create({\n      to: '+15551234568',\n      from: '+15559876543',\n      body: 'Message 2',\n    });\n\n    const messages = mockTwilio.getSentMessages();\n    expect(messages).toHaveLength(2);\n    expect(messages[0].body).toBe('Message 1');\n    expect(messages[1].body).toBe('Message 2');\n  });\n\n  it('should verify SMS was sent', async () => {\n    const client = mockTwilio.mockTwilio('test-sid', 'test-token');\n    await client.messages.create({\n      to: '+15551234567',\n      from: '+15559876543',\n      body: 'Your verification code is 123456',\n    });\n\n    expect(mockTwilio.verifySMSSent({\n      to: '+15551234567',\n      containsText: 'verification code',\n    })).toBe(true);\n\n    expect(mockTwilio.verifySMSSent({\n      to: '+15559999999',\n    })).toBe(false);\n  });\n\n  it('should simulate SMS failure', async () => {\n    const client = mockTwilio.mockTwilio('test-sid', 'test-token');\n    mockTwilio.simulateSMSFailure('Invalid phone number');\n\n    await expect(client.messages.create({\n      to: 'invalid',\n      from: '+15559876543',\n      body: 'Test',\n    })).rejects.toThrow('Invalid phone number');\n  });\n});\n\ndescribe('Mock Gemini Service', () => {\n  let mockGemini: any;\n\n  beforeEach(async () => {\n    mockGemini = await import('./mockGeminiService');\n    mockGemini.resetMockGemini();\n  });\n\n  it('should generate content successfully', async () => {\n    const genAI = new mockGemini.MockGoogleGenerativeAI('test-key');\n    const model = genAI.getGenerativeModel({ model: 'gemini-pro' });\n    const result = await model.generateContent('Content Type: activity\\nExtract data...');\n    const response = await result.response;\n    const text = response.text();\n\n    expect(text).toBeTruthy();\n    expect(text).toContain('Mock Activity');\n  });\n\n  it('should track AI requests', async () => {\n    const genAI = new mockGemini.MockGoogleGenerativeAI('test-key');\n    const model = genAI.getGenerativeModel({ model: 'gemini-pro' });\n    \n    await model.generateContent('Content Type: activity\\nExtract data...');\n    await model.generateContent('Content Type: accommodation\\nExtract data...');\n\n    const requests = mockGemini.getAIRequests();\n    expect(requests).toHaveLength(2);\n  });\n\n  it('should verify AI request was made', async () => {\n    const genAI = new mockGemini.MockGoogleGenerativeAI('test-key');\n    const model = genAI.getGenerativeModel({ model: 'gemini-pro' });\n    \n    await model.generateContent('Content Type: vendor\\nExtract vendor data...');\n\n    expect(mockGemini.verifyAIRequest({\n      contentType: 'vendor',\n    })).toBe(true);\n\n    expect(mockGemini.verifyAIRequest({\n      contentType: 'activity',\n    })).toBe(false);\n  });\n\n  it('should simulate AI failure', async () => {\n    const genAI = new mockGemini.MockGoogleGenerativeAI('test-key');\n    const model = genAI.getGenerativeModel({ model: 'gemini-pro' });\n    \n    mockGemini.simulateAIFailure('API quota exceeded');\n\n    await expect(model.generateContent('Extract data...')).rejects.toThrow('API quota exceeded');\n  });\n});\n\ndescribe('Service Detector', () => {\n  let serviceDetector: any;\n\n  beforeEach(async () => {\n    serviceDetector = await import('./serviceDetector');\n  });\n\n  it('should detect E2E test mode', () => {\n    const originalEnv = process.env.NODE_ENV;\n    process.env.NODE_ENV = 'test';\n\n    const isE2E = serviceDetector.isE2ETestMode();\n    expect(isE2E).toBe(true);\n\n    process.env.NODE_ENV = originalEnv;\n  });\n\n  it('should determine if mocks should be used', () => {\n    const originalEnv = process.env.NODE_ENV;\n    process.env.NODE_ENV = 'test';\n\n    const useMocks = serviceDetector.shouldUseMockServices();\n    expect(useMocks).toBe(true);\n\n    process.env.NODE_ENV = originalEnv;\n  });\n\n  it('should get environment summary', () => {\n    const summary = serviceDetector.getEnvironmentSummary();\n    expect(summary).toHaveProperty('nodeEnv');\n    expect(summary).toHaveProperty('isE2ETest');\n    expect(summary).toHaveProperty('useMockServices');\n    expect(summary).toHaveProperty('indicators');\n  });\n\n  it('should get appropriate B2 service', async () => {\n    const b2Service = await serviceDetector.getB2Service();\n    expect(b2Service).toBeTruthy();\n    expect(b2Service.uploadToB2).toBeDefined();\n  });\n\n  it('should reset all mock services', async () => {\n    // This should not throw\n    await expect(serviceDetector.resetAllMockServices()).resolves.not.toThrow();\n  });\n});\n"],"names":["describe","mockB2","beforeEach","resetB2Client","it","result","validateB2Config","expect","success","toBe","data","toHaveProperty","config","endpoint","region","accessKeyId","secretAccessKey","bucket","cdnDomain","initializeB2Client","fileBuffer","Buffer","from","uploadToB2","url","toContain","key","uploads","getMockUploads","toHaveLength","fileName","checkB2Health","healthy","simulateB2Failure","status","getB2HealthStatus","error","mockResend","resetMockResend","client","MockResend","emails","send","to","subject","html","toBeTruthy","id","toBeNull","getSentEmails","getSentEmailsByRecipient","verifyEmailSent","simulateEmailFailure","message","mockTwilio","resetMockTwilio","messages","create","body","sid","getSentMessages","verifySMSSent","containsText","simulateSMSFailure","rejects","toThrow","mockGemini","resetMockGemini","genAI","MockGoogleGenerativeAI","model","getGenerativeModel","generateContent","response","text","requests","getAIRequests","verifyAIRequest","contentType","simulateAIFailure","serviceDetector","originalEnv","process","env","NODE_ENV","isE2E","isE2ETestMode","useMocks","shouldUseMockServices","summary","getEnvironmentSummary","b2Service","getB2Service","toBeDefined","resetAllMockServices","resolves","not"],"mappings":"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"}