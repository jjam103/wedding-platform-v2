{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/__tests__/performance/adminPages.performance.test.ts"],"sourcesContent":["/**\n * Performance tests for admin pages\n * \n * Tests:\n * - List page load times (< 500ms for datasets under 1000 items)\n * - Search response times (< 1000ms)\n * - Save operation times (< 2000ms)\n * \n * Requirements: 20.1-20.3\n */\n\nimport { createMockSupabaseClient } from '../helpers/mockSupabase';\n\n// Mock Supabase\njest.mock('@/lib/supabase', () => ({\n  createClient: jest.fn(),\n}));\n\njest.mock('@supabase/auth-helpers-nextjs', () => ({\n  createRouteHandlerClient: jest.fn(),\n}));\n\ndescribe('Admin Pages Performance Tests', () => {\n  let mockSupabase: ReturnType<typeof createMockSupabaseClient>;\n\n  beforeEach(() => {\n    mockSupabase = createMockSupabaseClient();\n    jest.clearAllMocks();\n  });\n\n  describe('List Page Load Times', () => {\n    it('should load guests list page within 500ms for 100 guests', async () => {\n      // Arrange: Create 100 mock guests\n      const mockGuests = Array.from({ length: 100 }, (_, i) => ({\n        id: `guest-${i}`,\n        first_name: `First${i}`,\n        last_name: `Last${i}`,\n        email: `guest${i}@example.com`,\n        age_type: 'adult',\n        guest_type: 'wedding_guest',\n        group_id: 'group-1',\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      }));\n\n      mockSupabase.from.mockReturnValue({\n        select: jest.fn().mockReturnValue({\n          order: jest.fn().mockReturnValue({\n            range: jest.fn().mockResolvedValue({\n              data: mockGuests,\n              error: null,\n              count: 100,\n            }),\n          }),\n        }),\n      });\n\n      // Act: Measure load time\n      const startTime = performance.now();\n      \n      // Simulate fetching guests\n      const { data, error } = await mockSupabase\n        .from('guests')\n        .select('*', { count: 'exact' })\n        .order('last_name')\n        .range(0, 49);\n\n      const endTime = performance.now();\n      const loadTime = endTime - startTime;\n\n      // Assert: Load time should be under 500ms\n      expect(error).toBeNull();\n      expect(data).toHaveLength(100);\n      expect(loadTime).toBeLessThan(500);\n    });\n\n    it('should load events list page within 500ms for 50 events', async () => {\n      // Arrange: Create 50 mock events\n      const mockEvents = Array.from({ length: 50 }, (_, i) => ({\n        id: `event-${i}`,\n        slug: `event-${i}`,\n        title: `Event ${i}`,\n        event_type: 'activity',\n        event_date: new Date().toISOString(),\n        is_active: true,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      }));\n\n      mockSupabase.from.mockReturnValue({\n        select: jest.fn().mockReturnValue({\n          order: jest.fn().mockReturnValue({\n            range: jest.fn().mockResolvedValue({\n              data: mockEvents,\n              error: null,\n              count: 50,\n            }),\n          }),\n        }),\n      });\n\n      // Act: Measure load time\n      const startTime = performance.now();\n      \n      const { data, error } = await mockSupabase\n        .from('events')\n        .select('*', { count: 'exact' })\n        .order('event_date')\n        .range(0, 49);\n\n      const endTime = performance.now();\n      const loadTime = endTime - startTime;\n\n      // Assert\n      expect(error).toBeNull();\n      expect(data).toHaveLength(50);\n      expect(loadTime).toBeLessThan(500);\n    });\n\n    it('should load activities list page within 500ms for 100 activities', async () => {\n      // Arrange\n      const mockActivities = Array.from({ length: 100 }, (_, i) => ({\n        id: `activity-${i}`,\n        slug: `activity-${i}`,\n        title: `Activity ${i}`,\n        activity_type: 'activity',\n        activity_date: new Date().toISOString(),\n        capacity: 50,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      }));\n\n      mockSupabase.from.mockReturnValue({\n        select: jest.fn().mockReturnValue({\n          order: jest.fn().mockReturnValue({\n            range: jest.fn().mockResolvedValue({\n              data: mockActivities,\n              error: null,\n              count: 100,\n            }),\n          }),\n        }),\n      });\n\n      // Act\n      const startTime = performance.now();\n      \n      const { data, error } = await mockSupabase\n        .from('activities')\n        .select('*', { count: 'exact' })\n        .order('activity_date')\n        .range(0, 49);\n\n      const endTime = performance.now();\n      const loadTime = endTime - startTime;\n\n      // Assert\n      expect(error).toBeNull();\n      expect(data).toHaveLength(100);\n      expect(loadTime).toBeLessThan(500);\n    });\n  });\n\n  describe('Search Response Times', () => {\n    it('should return search results within 1000ms for guest search', async () => {\n      // Arrange\n      const mockResults = Array.from({ length: 20 }, (_, i) => ({\n        id: `guest-${i}`,\n        first_name: `John${i}`,\n        last_name: `Doe${i}`,\n        email: `john${i}@example.com`,\n      }));\n\n      mockSupabase.from.mockReturnValue({\n        select: jest.fn().mockReturnValue({\n          or: jest.fn().mockReturnValue({\n            limit: jest.fn().mockResolvedValue({\n              data: mockResults,\n              error: null,\n            }),\n          }),\n        }),\n      });\n\n      // Act\n      const startTime = performance.now();\n      \n      const { data, error } = await mockSupabase\n        .from('guests')\n        .select('id, first_name, last_name, email')\n        .or('first_name.ilike.%john%,last_name.ilike.%john%,email.ilike.%john%')\n        .limit(20);\n\n      const endTime = performance.now();\n      const searchTime = endTime - startTime;\n\n      // Assert\n      expect(error).toBeNull();\n      expect(data).toHaveLength(20);\n      expect(searchTime).toBeLessThan(1000);\n    });\n\n    it('should return reference search results within 1000ms', async () => {\n      // Arrange\n      const mockResults = [\n        { id: 'event-1', name: 'Ceremony', type: 'event', slug: 'ceremony' },\n        { id: 'activity-1', name: 'Beach Day', type: 'activity', slug: 'beach-day' },\n        { id: 'page-1', name: 'Our Story', type: 'content_page', slug: 'our-story' },\n      ];\n\n      // Mock multiple table queries\n      mockSupabase.from.mockImplementation((table: string) => ({\n        select: jest.fn().mockReturnValue({\n          ilike: jest.fn().mockReturnValue({\n            limit: jest.fn().mockResolvedValue({\n              data: mockResults.filter(r => r.type === table.slice(0, -1)),\n              error: null,\n            }),\n          }),\n        }),\n      }));\n\n      // Act\n      const startTime = performance.now();\n      \n      // Simulate searching across multiple entity types\n      const searches = await Promise.all([\n        mockSupabase.from('events').select('*').ilike('title', '%ceremony%').limit(5),\n        mockSupabase.from('activities').select('*').ilike('title', '%beach%').limit(5),\n        mockSupabase.from('content_pages').select('*').ilike('title', '%story%').limit(5),\n      ]);\n\n      const endTime = performance.now();\n      const searchTime = endTime - startTime;\n\n      // Assert\n      expect(searches.every(s => s.error === null)).toBe(true);\n      expect(searchTime).toBeLessThan(1000);\n    });\n\n    it('should filter activities by type within 1000ms', async () => {\n      // Arrange\n      const mockActivities = Array.from({ length: 30 }, (_, i) => ({\n        id: `activity-${i}`,\n        title: `Activity ${i}`,\n        activity_type: 'activity',\n      }));\n\n      mockSupabase.from.mockReturnValue({\n        select: jest.fn().mockReturnValue({\n          eq: jest.fn().mockReturnValue({\n            order: jest.fn().mockResolvedValue({\n              data: mockActivities,\n              error: null,\n            }),\n          }),\n        }),\n      });\n\n      // Act\n      const startTime = performance.now();\n      \n      const { data, error } = await mockSupabase\n        .from('activities')\n        .select('*')\n        .eq('activity_type', 'activity')\n        .order('activity_date');\n\n      const endTime = performance.now();\n      const filterTime = endTime - startTime;\n\n      // Assert\n      expect(error).toBeNull();\n      expect(data).toHaveLength(30);\n      expect(filterTime).toBeLessThan(1000);\n    });\n  });\n\n  describe('Save Operation Times', () => {\n    it('should save guest within 2000ms', async () => {\n      // Arrange\n      const guestData = {\n        first_name: 'John',\n        last_name: 'Doe',\n        email: 'john@example.com',\n        age_type: 'adult',\n        guest_type: 'wedding_guest',\n        group_id: 'group-1',\n      };\n\n      const savedGuest = {\n        id: 'guest-1',\n        ...guestData,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      mockSupabase.from.mockReturnValue({\n        insert: jest.fn().mockReturnValue({\n          select: jest.fn().mockReturnValue({\n            single: jest.fn().mockResolvedValue({\n              data: savedGuest,\n              error: null,\n            }),\n          }),\n        }),\n      });\n\n      // Act\n      const startTime = performance.now();\n      \n      const { data, error } = await mockSupabase\n        .from('guests')\n        .insert(guestData)\n        .select()\n        .single();\n\n      const endTime = performance.now();\n      const saveTime = endTime - startTime;\n\n      // Assert\n      expect(error).toBeNull();\n      expect(data).toEqual(savedGuest);\n      expect(saveTime).toBeLessThan(2000);\n    });\n\n    it('should update event within 2000ms', async () => {\n      // Arrange\n      const updateData = {\n        title: 'Updated Event',\n        description: 'Updated description',\n      };\n\n      const updatedEvent = {\n        id: 'event-1',\n        slug: 'updated-event',\n        ...updateData,\n        updated_at: new Date().toISOString(),\n      };\n\n      mockSupabase.from.mockReturnValue({\n        update: jest.fn().mockReturnValue({\n          eq: jest.fn().mockReturnValue({\n            select: jest.fn().mockReturnValue({\n              single: jest.fn().mockResolvedValue({\n                data: updatedEvent,\n                error: null,\n              }),\n            }),\n          }),\n        }),\n      });\n\n      // Act\n      const startTime = performance.now();\n      \n      const { data, error } = await mockSupabase\n        .from('events')\n        .update(updateData)\n        .eq('id', 'event-1')\n        .select()\n        .single();\n\n      const endTime = performance.now();\n      const updateTime = endTime - startTime;\n\n      // Assert\n      expect(error).toBeNull();\n      expect(data).toEqual(updatedEvent);\n      expect(updateTime).toBeLessThan(2000);\n    });\n\n    it('should save section with columns within 2000ms', async () => {\n      // Arrange\n      const sectionData = {\n        page_type: 'custom',\n        page_id: 'page-1',\n        display_order: 1,\n        layout: 'two-column',\n      };\n\n      const savedSection = {\n        id: 'section-1',\n        ...sectionData,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      const columnData = [\n        {\n          section_id: 'section-1',\n          column_number: 1,\n          content_type: 'rich_text',\n          content_data: { html: '<p>Column 1 content</p>' },\n        },\n        {\n          section_id: 'section-1',\n          column_number: 2,\n          content_type: 'rich_text',\n          content_data: { html: '<p>Column 2 content</p>' },\n        },\n      ];\n\n      mockSupabase.from.mockImplementation((table: string) => {\n        if (table === 'sections') {\n          return {\n            insert: jest.fn().mockReturnValue({\n              select: jest.fn().mockReturnValue({\n                single: jest.fn().mockResolvedValue({\n                  data: savedSection,\n                  error: null,\n                }),\n              }),\n            }),\n          };\n        } else if (table === 'section_columns') {\n          return {\n            insert: jest.fn().mockResolvedValue({\n              data: columnData,\n              error: null,\n            }),\n          };\n        }\n        return {};\n      });\n\n      // Act\n      const startTime = performance.now();\n      \n      // Save section\n      const sectionResult = await mockSupabase\n        .from('sections')\n        .insert(sectionData)\n        .select()\n        .single();\n\n      // Save columns\n      const columnsResult = await mockSupabase\n        .from('section_columns')\n        .insert(columnData);\n\n      const endTime = performance.now();\n      const saveTime = endTime - startTime;\n\n      // Assert\n      expect(sectionResult.error).toBeNull();\n      expect(columnsResult.error).toBeNull();\n      expect(saveTime).toBeLessThan(2000);\n    });\n\n    it('should bulk create guests within 2000ms for 50 guests', async () => {\n      // Arrange\n      const guestsData = Array.from({ length: 50 }, (_, i) => ({\n        first_name: `First${i}`,\n        last_name: `Last${i}`,\n        email: `guest${i}@example.com`,\n        age_type: 'adult',\n        guest_type: 'wedding_guest',\n        group_id: 'group-1',\n      }));\n\n      const savedGuests = guestsData.map((g, i) => ({\n        id: `guest-${i}`,\n        ...g,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      }));\n\n      mockSupabase.from.mockReturnValue({\n        insert: jest.fn().mockReturnValue({\n          select: jest.fn().mockResolvedValue({\n            data: savedGuests,\n            error: null,\n          }),\n        }),\n      });\n\n      // Act\n      const startTime = performance.now();\n      \n      const { data, error } = await mockSupabase\n        .from('guests')\n        .insert(guestsData)\n        .select();\n\n      const endTime = performance.now();\n      const bulkSaveTime = endTime - startTime;\n\n      // Assert\n      expect(error).toBeNull();\n      expect(data).toHaveLength(50);\n      expect(bulkSaveTime).toBeLessThan(2000);\n    });\n  });\n\n  describe('Performance Degradation Tests', () => {\n    it('should maintain performance with 1000 guests', async () => {\n      // Arrange\n      const mockGuests = Array.from({ length: 1000 }, (_, i) => ({\n        id: `guest-${i}`,\n        first_name: `First${i}`,\n        last_name: `Last${i}`,\n        email: `guest${i}@example.com`,\n      }));\n\n      mockSupabase.from.mockReturnValue({\n        select: jest.fn().mockReturnValue({\n          order: jest.fn().mockReturnValue({\n            range: jest.fn().mockResolvedValue({\n              data: mockGuests.slice(0, 50),\n              error: null,\n              count: 1000,\n            }),\n          }),\n        }),\n      });\n\n      // Act\n      const startTime = performance.now();\n      \n      const { data, error } = await mockSupabase\n        .from('guests')\n        .select('*', { count: 'exact' })\n        .order('last_name')\n        .range(0, 49);\n\n      const endTime = performance.now();\n      const loadTime = endTime - startTime;\n\n      // Assert\n      expect(error).toBeNull();\n      expect(data).toHaveLength(50);\n      expect(loadTime).toBeLessThan(500);\n    });\n\n    it('should handle pagination efficiently', async () => {\n      // Arrange\n      const totalGuests = 500;\n      const pageSize = 50;\n      const pages = Math.ceil(totalGuests / pageSize);\n\n      mockSupabase.from.mockReturnValue({\n        select: jest.fn().mockReturnValue({\n          order: jest.fn().mockReturnValue({\n            range: jest.fn().mockImplementation((from: number, to: number) => {\n              const mockData = Array.from({ length: to - from + 1 }, (_, i) => ({\n                id: `guest-${from + i}`,\n                first_name: `First${from + i}`,\n                last_name: `Last${from + i}`,\n              }));\n              return Promise.resolve({\n                data: mockData,\n                error: null,\n                count: totalGuests,\n              });\n            }),\n          }),\n        }),\n      });\n\n      // Act: Load all pages\n      const startTime = performance.now();\n      \n      const pageLoads = [];\n      for (let page = 0; page < pages; page++) {\n        const from = page * pageSize;\n        const to = from + pageSize - 1;\n        \n        const pageStart = performance.now();\n        await mockSupabase\n          .from('guests')\n          .select('*', { count: 'exact' })\n          .order('last_name')\n          .range(from, to);\n        const pageEnd = performance.now();\n        \n        pageLoads.push(pageEnd - pageStart);\n      }\n\n      const endTime = performance.now();\n      const totalTime = endTime - startTime;\n      const avgPageLoad = pageLoads.reduce((a, b) => a + b, 0) / pageLoads.length;\n\n      // Assert\n      expect(avgPageLoad).toBeLessThan(500);\n      expect(totalTime).toBeLessThan(5000); // All pages should load in under 5 seconds\n    });\n  });\n});\n"],"names":["jest","mock","createClient","fn","createRouteHandlerClient","describe","mockSupabase","beforeEach","createMockSupabaseClient","clearAllMocks","it","mockGuests","Array","from","length","_","i","id","first_name","last_name","email","age_type","guest_type","group_id","created_at","Date","toISOString","updated_at","mockReturnValue","select","order","range","mockResolvedValue","data","error","count","startTime","performance","now","endTime","loadTime","expect","toBeNull","toHaveLength","toBeLessThan","mockEvents","slug","title","event_type","event_date","is_active","mockActivities","activity_type","activity_date","capacity","mockResults","or","limit","searchTime","name","type","mockImplementation","table","ilike","filter","r","slice","searches","Promise","all","every","s","toBe","eq","filterTime","guestData","savedGuest","insert","single","saveTime","toEqual","updateData","description","updatedEvent","update","updateTime","sectionData","page_type","page_id","display_order","layout","savedSection","columnData","section_id","column_number","content_type","content_data","html","sectionResult","columnsResult","guestsData","savedGuests","map","g","bulkSaveTime","totalGuests","pageSize","pages","Math","ceil","to","mockData","resolve","pageLoads","page","pageStart","pageEnd","push","totalTime","avgPageLoad","reduce","a","b"],"mappings":"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"}