027f2d4362d6caf8892129be69dfc330
/**
 * Unit Tests: SettingsForm - Auth Method Configuration
 * 
 * Tests the auth method configuration section of the SettingsForm component
 * 
 * Requirements: 22.1, 22.2
 */ "use strict";
// Mock next/navigation
jest.mock('next/navigation', ()=>({
        useRouter: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _navigation = require("next/navigation");
const _SettingsForm = /*#__PURE__*/ _interop_require_default(require("./SettingsForm"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock fetch
global.fetch = jest.fn();
describe('SettingsForm - Auth Method Configuration', ()=>{
    const mockRouter = {
        refresh: jest.fn()
    };
    beforeEach(()=>{
        jest.clearAllMocks();
        _navigation.useRouter.mockReturnValue(mockRouter);
        global.fetch.mockResolvedValue({
            json: async ()=>({
                    success: true,
                    data: {}
                })
        });
    });
    it('should render auth method dropdown with default value', ()=>{
        const initialSettings = {
            id: '1',
            wedding_date: '2024-06-15T00:00:00Z',
            venue_name: 'Test Venue',
            couple_name_1: 'Person 1',
            couple_name_2: 'Person 2',
            timezone: 'America/Costa_Rica',
            send_rsvp_confirmations: true,
            send_activity_reminders: true,
            send_deadline_reminders: true,
            reminder_days_before: 7,
            require_photo_moderation: true,
            max_photos_per_guest: 20,
            allowed_photo_formats: [
                'jpg',
                'jpeg',
                'png',
                'heic'
            ],
            default_auth_method: 'email_matching',
            home_page_title: null,
            home_page_subtitle: null,
            home_page_welcome_message: null,
            home_page_hero_image_url: null,
            created_at: '2024-01-01T00:00:00Z',
            updated_at: '2024-01-01T00:00:00Z'
        };
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SettingsForm.default, {
            initialSettings: initialSettings
        }));
        const authMethodSelect = _react.screen.getByLabelText('Default Authentication Method');
        expect(authMethodSelect).toBeInTheDocument();
        expect(authMethodSelect).toHaveValue('email_matching');
    });
    it('should render auth method dropdown with magic_link value', ()=>{
        const initialSettings = {
            id: '1',
            wedding_date: '2024-06-15T00:00:00Z',
            venue_name: 'Test Venue',
            couple_name_1: 'Person 1',
            couple_name_2: 'Person 2',
            timezone: 'America/Costa_Rica',
            send_rsvp_confirmations: true,
            send_activity_reminders: true,
            send_deadline_reminders: true,
            reminder_days_before: 7,
            require_photo_moderation: true,
            max_photos_per_guest: 20,
            allowed_photo_formats: [
                'jpg',
                'jpeg',
                'png',
                'heic'
            ],
            default_auth_method: 'magic_link',
            home_page_title: null,
            home_page_subtitle: null,
            home_page_welcome_message: null,
            home_page_hero_image_url: null,
            created_at: '2024-01-01T00:00:00Z',
            updated_at: '2024-01-01T00:00:00Z'
        };
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SettingsForm.default, {
            initialSettings: initialSettings
        }));
        const authMethodSelect = _react.screen.getByLabelText('Default Authentication Method');
        expect(authMethodSelect).toHaveValue('magic_link');
    });
    it('should display email matching description when email_matching is selected', ()=>{
        const initialSettings = {
            id: '1',
            wedding_date: '2024-06-15T00:00:00Z',
            venue_name: 'Test Venue',
            couple_name_1: 'Person 1',
            couple_name_2: 'Person 2',
            timezone: 'America/Costa_Rica',
            send_rsvp_confirmations: true,
            send_activity_reminders: true,
            send_deadline_reminders: true,
            reminder_days_before: 7,
            require_photo_moderation: true,
            max_photos_per_guest: 20,
            allowed_photo_formats: [
                'jpg',
                'jpeg',
                'png',
                'heic'
            ],
            default_auth_method: 'email_matching',
            home_page_title: null,
            home_page_subtitle: null,
            home_page_welcome_message: null,
            home_page_hero_image_url: null,
            created_at: '2024-01-01T00:00:00Z',
            updated_at: '2024-01-01T00:00:00Z'
        };
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SettingsForm.default, {
            initialSettings: initialSettings
        }));
        expect(_react.screen.getByText(/Guests log in by entering their email address/i)).toBeInTheDocument();
    });
    it('should display magic link description when magic_link is selected', ()=>{
        const initialSettings = {
            id: '1',
            wedding_date: '2024-06-15T00:00:00Z',
            venue_name: 'Test Venue',
            couple_name_1: 'Person 1',
            couple_name_2: 'Person 2',
            timezone: 'America/Costa_Rica',
            send_rsvp_confirmations: true,
            send_activity_reminders: true,
            send_deadline_reminders: true,
            reminder_days_before: 7,
            require_photo_moderation: true,
            max_photos_per_guest: 20,
            allowed_photo_formats: [
                'jpg',
                'jpeg',
                'png',
                'heic'
            ],
            default_auth_method: 'magic_link',
            home_page_title: null,
            home_page_subtitle: null,
            home_page_welcome_message: null,
            home_page_hero_image_url: null,
            created_at: '2024-01-01T00:00:00Z',
            updated_at: '2024-01-01T00:00:00Z'
        };
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SettingsForm.default, {
            initialSettings: initialSettings
        }));
        expect(_react.screen.getByText(/Guests request a one-time login link/i)).toBeInTheDocument();
    });
    it('should update description when auth method is changed', ()=>{
        const initialSettings = {
            id: '1',
            wedding_date: '2024-06-15T00:00:00Z',
            venue_name: 'Test Venue',
            couple_name_1: 'Person 1',
            couple_name_2: 'Person 2',
            timezone: 'America/Costa_Rica',
            send_rsvp_confirmations: true,
            send_activity_reminders: true,
            send_deadline_reminders: true,
            reminder_days_before: 7,
            require_photo_moderation: true,
            max_photos_per_guest: 20,
            allowed_photo_formats: [
                'jpg',
                'jpeg',
                'png',
                'heic'
            ],
            default_auth_method: 'email_matching',
            home_page_title: null,
            home_page_subtitle: null,
            home_page_welcome_message: null,
            home_page_hero_image_url: null,
            created_at: '2024-01-01T00:00:00Z',
            updated_at: '2024-01-01T00:00:00Z'
        };
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SettingsForm.default, {
            initialSettings: initialSettings
        }));
        // Initially shows email matching description
        expect(_react.screen.getByText(/Guests log in by entering their email address/i)).toBeInTheDocument();
        // Change to magic link
        const authMethodSelect = _react.screen.getByLabelText('Default Authentication Method');
        _react.fireEvent.change(authMethodSelect, {
            target: {
                value: 'magic_link'
            }
        });
        // Should now show magic link description
        expect(_react.screen.getByText(/Guests request a one-time login link/i)).toBeInTheDocument();
    });
    it('should display authentication methods info box', ()=>{
        const initialSettings = {
            id: '1',
            wedding_date: '2024-06-15T00:00:00Z',
            venue_name: 'Test Venue',
            couple_name_1: 'Person 1',
            couple_name_2: 'Person 2',
            timezone: 'America/Costa_Rica',
            send_rsvp_confirmations: true,
            send_activity_reminders: true,
            send_deadline_reminders: true,
            reminder_days_before: 7,
            require_photo_moderation: true,
            max_photos_per_guest: 20,
            allowed_photo_formats: [
                'jpg',
                'jpeg',
                'png',
                'heic'
            ],
            default_auth_method: 'email_matching',
            home_page_title: null,
            home_page_subtitle: null,
            home_page_welcome_message: null,
            home_page_hero_image_url: null,
            created_at: '2024-01-01T00:00:00Z',
            updated_at: '2024-01-01T00:00:00Z'
        };
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SettingsForm.default, {
            initialSettings: initialSettings
        }));
        expect(_react.screen.getByText('Authentication Methods')).toBeInTheDocument();
        expect(_react.screen.getByText(/Email Matching:/)).toBeInTheDocument();
        expect(_react.screen.getByText(/Magic Link:/)).toBeInTheDocument();
        expect(_react.screen.getByText(/You can override the authentication method for individual guests/i)).toBeInTheDocument();
    });
    it('should include default_auth_method in form submission', async ()=>{
        const initialSettings = {
            id: '1',
            wedding_date: '2024-06-15T00:00:00Z',
            venue_name: 'Test Venue',
            couple_name_1: 'Person 1',
            couple_name_2: 'Person 2',
            timezone: 'America/Costa_Rica',
            send_rsvp_confirmations: true,
            send_activity_reminders: true,
            send_deadline_reminders: true,
            reminder_days_before: 7,
            require_photo_moderation: true,
            max_photos_per_guest: 20,
            allowed_photo_formats: [
                'jpg',
                'jpeg',
                'png',
                'heic'
            ],
            default_auth_method: 'email_matching',
            home_page_title: null,
            home_page_subtitle: null,
            home_page_welcome_message: null,
            home_page_hero_image_url: null,
            created_at: '2024-01-01T00:00:00Z',
            updated_at: '2024-01-01T00:00:00Z'
        };
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SettingsForm.default, {
            initialSettings: initialSettings
        }));
        // Change auth method
        const authMethodSelect = _react.screen.getByLabelText('Default Authentication Method');
        _react.fireEvent.change(authMethodSelect, {
            target: {
                value: 'magic_link'
            }
        });
        // Submit form
        const submitButton = _react.screen.getByText('Save Settings');
        _react.fireEvent.click(submitButton);
        await (0, _react.waitFor)(()=>{
            expect(global.fetch).toHaveBeenCalledWith('/api/admin/settings', expect.objectContaining({
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: expect.stringContaining('"default_auth_method":"magic_link"')
            }));
        });
    });
    it('should display success toast after successful save', async ()=>{
        const initialSettings = {
            id: '1',
            wedding_date: '2024-06-15T00:00:00Z',
            venue_name: 'Test Venue',
            couple_name_1: 'Person 1',
            couple_name_2: 'Person 2',
            timezone: 'America/Costa_Rica',
            send_rsvp_confirmations: true,
            send_activity_reminders: true,
            send_deadline_reminders: true,
            reminder_days_before: 7,
            require_photo_moderation: true,
            max_photos_per_guest: 20,
            allowed_photo_formats: [
                'jpg',
                'jpeg',
                'png',
                'heic'
            ],
            default_auth_method: 'email_matching',
            home_page_title: null,
            home_page_subtitle: null,
            home_page_welcome_message: null,
            home_page_hero_image_url: null,
            created_at: '2024-01-01T00:00:00Z',
            updated_at: '2024-01-01T00:00:00Z'
        };
        global.fetch.mockResolvedValueOnce({
            json: async ()=>({
                    success: true,
                    data: {
                        default_auth_method: 'magic_link'
                    }
                })
        });
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SettingsForm.default, {
            initialSettings: initialSettings
        }));
        // Submit form
        const submitButton = _react.screen.getByText('Save Settings');
        _react.fireEvent.click(submitButton);
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByText('Settings saved successfully')).toBeInTheDocument();
        });
    });
    it('should display error toast on save failure', async ()=>{
        const initialSettings = {
            id: '1',
            wedding_date: '2024-06-15T00:00:00Z',
            venue_name: 'Test Venue',
            couple_name_1: 'Person 1',
            couple_name_2: 'Person 2',
            timezone: 'America/Costa_Rica',
            send_rsvp_confirmations: true,
            send_activity_reminders: true,
            send_deadline_reminders: true,
            reminder_days_before: 7,
            require_photo_moderation: true,
            max_photos_per_guest: 20,
            allowed_photo_formats: [
                'jpg',
                'jpeg',
                'png',
                'heic'
            ],
            default_auth_method: 'email_matching',
            home_page_title: null,
            home_page_subtitle: null,
            home_page_welcome_message: null,
            home_page_hero_image_url: null,
            created_at: '2024-01-01T00:00:00Z',
            updated_at: '2024-01-01T00:00:00Z'
        };
        global.fetch.mockResolvedValueOnce({
            json: async ()=>({
                    success: false,
                    error: {
                        code: 'VALIDATION_ERROR',
                        message: 'Invalid auth method'
                    }
                })
        });
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SettingsForm.default, {
            initialSettings: initialSettings
        }));
        // Submit form
        const submitButton = _react.screen.getByText('Save Settings');
        _react.fireEvent.click(submitButton);
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByText('Invalid auth method')).toBeInTheDocument();
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9hZG1pbi9TZXR0aW5nc0Zvcm0uYXV0aE1ldGhvZC50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVuaXQgVGVzdHM6IFNldHRpbmdzRm9ybSAtIEF1dGggTWV0aG9kIENvbmZpZ3VyYXRpb25cbiAqIFxuICogVGVzdHMgdGhlIGF1dGggbWV0aG9kIGNvbmZpZ3VyYXRpb24gc2VjdGlvbiBvZiB0aGUgU2V0dGluZ3NGb3JtIGNvbXBvbmVudFxuICogXG4gKiBSZXF1aXJlbWVudHM6IDIyLjEsIDIyLjJcbiAqL1xuXG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICduZXh0L25hdmlnYXRpb24nO1xuaW1wb3J0IFNldHRpbmdzRm9ybSBmcm9tICcuL1NldHRpbmdzRm9ybSc7XG5cbi8vIE1vY2sgbmV4dC9uYXZpZ2F0aW9uXG5qZXN0Lm1vY2soJ25leHQvbmF2aWdhdGlvbicsICgpID0+ICh7XG4gIHVzZVJvdXRlcjogamVzdC5mbigpLFxufSkpO1xuXG4vLyBNb2NrIGZldGNoXG5nbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCk7XG5cbmRlc2NyaWJlKCdTZXR0aW5nc0Zvcm0gLSBBdXRoIE1ldGhvZCBDb25maWd1cmF0aW9uJywgKCkgPT4ge1xuICBjb25zdCBtb2NrUm91dGVyID0ge1xuICAgIHJlZnJlc2g6IGplc3QuZm4oKSxcbiAgfTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICAodXNlUm91dGVyIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKG1vY2tSb3V0ZXIpO1xuICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB7fSB9KSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZW5kZXIgYXV0aCBtZXRob2QgZHJvcGRvd24gd2l0aCBkZWZhdWx0IHZhbHVlJywgKCkgPT4ge1xuICAgIGNvbnN0IGluaXRpYWxTZXR0aW5ncyA9IHtcbiAgICAgIGlkOiAnMScsXG4gICAgICB3ZWRkaW5nX2RhdGU6ICcyMDI0LTA2LTE1VDAwOjAwOjAwWicsXG4gICAgICB2ZW51ZV9uYW1lOiAnVGVzdCBWZW51ZScsXG4gICAgICBjb3VwbGVfbmFtZV8xOiAnUGVyc29uIDEnLFxuICAgICAgY291cGxlX25hbWVfMjogJ1BlcnNvbiAyJyxcbiAgICAgIHRpbWV6b25lOiAnQW1lcmljYS9Db3N0YV9SaWNhJyxcbiAgICAgIHNlbmRfcnN2cF9jb25maXJtYXRpb25zOiB0cnVlLFxuICAgICAgc2VuZF9hY3Rpdml0eV9yZW1pbmRlcnM6IHRydWUsXG4gICAgICBzZW5kX2RlYWRsaW5lX3JlbWluZGVyczogdHJ1ZSxcbiAgICAgIHJlbWluZGVyX2RheXNfYmVmb3JlOiA3LFxuICAgICAgcmVxdWlyZV9waG90b19tb2RlcmF0aW9uOiB0cnVlLFxuICAgICAgbWF4X3Bob3Rvc19wZXJfZ3Vlc3Q6IDIwLFxuICAgICAgYWxsb3dlZF9waG90b19mb3JtYXRzOiBbJ2pwZycsICdqcGVnJywgJ3BuZycsICdoZWljJ10sXG4gICAgICBkZWZhdWx0X2F1dGhfbWV0aG9kOiAnZW1haWxfbWF0Y2hpbmcnIGFzIGNvbnN0LFxuICAgICAgaG9tZV9wYWdlX3RpdGxlOiBudWxsLFxuICAgICAgaG9tZV9wYWdlX3N1YnRpdGxlOiBudWxsLFxuICAgICAgaG9tZV9wYWdlX3dlbGNvbWVfbWVzc2FnZTogbnVsbCxcbiAgICAgIGhvbWVfcGFnZV9oZXJvX2ltYWdlX3VybDogbnVsbCxcbiAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgIH07XG5cbiAgICByZW5kZXIoPFNldHRpbmdzRm9ybSBpbml0aWFsU2V0dGluZ3M9e2luaXRpYWxTZXR0aW5nc30gLz4pO1xuXG4gICAgY29uc3QgYXV0aE1ldGhvZFNlbGVjdCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnRGVmYXVsdCBBdXRoZW50aWNhdGlvbiBNZXRob2QnKTtcbiAgICBleHBlY3QoYXV0aE1ldGhvZFNlbGVjdCkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3QoYXV0aE1ldGhvZFNlbGVjdCkudG9IYXZlVmFsdWUoJ2VtYWlsX21hdGNoaW5nJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVuZGVyIGF1dGggbWV0aG9kIGRyb3Bkb3duIHdpdGggbWFnaWNfbGluayB2YWx1ZScsICgpID0+IHtcbiAgICBjb25zdCBpbml0aWFsU2V0dGluZ3MgPSB7XG4gICAgICBpZDogJzEnLFxuICAgICAgd2VkZGluZ19kYXRlOiAnMjAyNC0wNi0xNVQwMDowMDowMFonLFxuICAgICAgdmVudWVfbmFtZTogJ1Rlc3QgVmVudWUnLFxuICAgICAgY291cGxlX25hbWVfMTogJ1BlcnNvbiAxJyxcbiAgICAgIGNvdXBsZV9uYW1lXzI6ICdQZXJzb24gMicsXG4gICAgICB0aW1lem9uZTogJ0FtZXJpY2EvQ29zdGFfUmljYScsXG4gICAgICBzZW5kX3JzdnBfY29uZmlybWF0aW9uczogdHJ1ZSxcbiAgICAgIHNlbmRfYWN0aXZpdHlfcmVtaW5kZXJzOiB0cnVlLFxuICAgICAgc2VuZF9kZWFkbGluZV9yZW1pbmRlcnM6IHRydWUsXG4gICAgICByZW1pbmRlcl9kYXlzX2JlZm9yZTogNyxcbiAgICAgIHJlcXVpcmVfcGhvdG9fbW9kZXJhdGlvbjogdHJ1ZSxcbiAgICAgIG1heF9waG90b3NfcGVyX2d1ZXN0OiAyMCxcbiAgICAgIGFsbG93ZWRfcGhvdG9fZm9ybWF0czogWydqcGcnLCAnanBlZycsICdwbmcnLCAnaGVpYyddLFxuICAgICAgZGVmYXVsdF9hdXRoX21ldGhvZDogJ21hZ2ljX2xpbmsnIGFzIGNvbnN0LFxuICAgICAgaG9tZV9wYWdlX3RpdGxlOiBudWxsLFxuICAgICAgaG9tZV9wYWdlX3N1YnRpdGxlOiBudWxsLFxuICAgICAgaG9tZV9wYWdlX3dlbGNvbWVfbWVzc2FnZTogbnVsbCxcbiAgICAgIGhvbWVfcGFnZV9oZXJvX2ltYWdlX3VybDogbnVsbCxcbiAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgIH07XG5cbiAgICByZW5kZXIoPFNldHRpbmdzRm9ybSBpbml0aWFsU2V0dGluZ3M9e2luaXRpYWxTZXR0aW5nc30gLz4pO1xuXG4gICAgY29uc3QgYXV0aE1ldGhvZFNlbGVjdCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnRGVmYXVsdCBBdXRoZW50aWNhdGlvbiBNZXRob2QnKTtcbiAgICBleHBlY3QoYXV0aE1ldGhvZFNlbGVjdCkudG9IYXZlVmFsdWUoJ21hZ2ljX2xpbmsnKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBkaXNwbGF5IGVtYWlsIG1hdGNoaW5nIGRlc2NyaXB0aW9uIHdoZW4gZW1haWxfbWF0Y2hpbmcgaXMgc2VsZWN0ZWQnLCAoKSA9PiB7XG4gICAgY29uc3QgaW5pdGlhbFNldHRpbmdzID0ge1xuICAgICAgaWQ6ICcxJyxcbiAgICAgIHdlZGRpbmdfZGF0ZTogJzIwMjQtMDYtMTVUMDA6MDA6MDBaJyxcbiAgICAgIHZlbnVlX25hbWU6ICdUZXN0IFZlbnVlJyxcbiAgICAgIGNvdXBsZV9uYW1lXzE6ICdQZXJzb24gMScsXG4gICAgICBjb3VwbGVfbmFtZV8yOiAnUGVyc29uIDInLFxuICAgICAgdGltZXpvbmU6ICdBbWVyaWNhL0Nvc3RhX1JpY2EnLFxuICAgICAgc2VuZF9yc3ZwX2NvbmZpcm1hdGlvbnM6IHRydWUsXG4gICAgICBzZW5kX2FjdGl2aXR5X3JlbWluZGVyczogdHJ1ZSxcbiAgICAgIHNlbmRfZGVhZGxpbmVfcmVtaW5kZXJzOiB0cnVlLFxuICAgICAgcmVtaW5kZXJfZGF5c19iZWZvcmU6IDcsXG4gICAgICByZXF1aXJlX3Bob3RvX21vZGVyYXRpb246IHRydWUsXG4gICAgICBtYXhfcGhvdG9zX3Blcl9ndWVzdDogMjAsXG4gICAgICBhbGxvd2VkX3Bob3RvX2Zvcm1hdHM6IFsnanBnJywgJ2pwZWcnLCAncG5nJywgJ2hlaWMnXSxcbiAgICAgIGRlZmF1bHRfYXV0aF9tZXRob2Q6ICdlbWFpbF9tYXRjaGluZycgYXMgY29uc3QsXG4gICAgICBob21lX3BhZ2VfdGl0bGU6IG51bGwsXG4gICAgICBob21lX3BhZ2Vfc3VidGl0bGU6IG51bGwsXG4gICAgICBob21lX3BhZ2Vfd2VsY29tZV9tZXNzYWdlOiBudWxsLFxuICAgICAgaG9tZV9wYWdlX2hlcm9faW1hZ2VfdXJsOiBudWxsLFxuICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgfTtcblxuICAgIHJlbmRlcig8U2V0dGluZ3NGb3JtIGluaXRpYWxTZXR0aW5ncz17aW5pdGlhbFNldHRpbmdzfSAvPik7XG5cbiAgICBleHBlY3QoXG4gICAgICBzY3JlZW4uZ2V0QnlUZXh0KC9HdWVzdHMgbG9nIGluIGJ5IGVudGVyaW5nIHRoZWlyIGVtYWlsIGFkZHJlc3MvaSlcbiAgICApLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgZGlzcGxheSBtYWdpYyBsaW5rIGRlc2NyaXB0aW9uIHdoZW4gbWFnaWNfbGluayBpcyBzZWxlY3RlZCcsICgpID0+IHtcbiAgICBjb25zdCBpbml0aWFsU2V0dGluZ3MgPSB7XG4gICAgICBpZDogJzEnLFxuICAgICAgd2VkZGluZ19kYXRlOiAnMjAyNC0wNi0xNVQwMDowMDowMFonLFxuICAgICAgdmVudWVfbmFtZTogJ1Rlc3QgVmVudWUnLFxuICAgICAgY291cGxlX25hbWVfMTogJ1BlcnNvbiAxJyxcbiAgICAgIGNvdXBsZV9uYW1lXzI6ICdQZXJzb24gMicsXG4gICAgICB0aW1lem9uZTogJ0FtZXJpY2EvQ29zdGFfUmljYScsXG4gICAgICBzZW5kX3JzdnBfY29uZmlybWF0aW9uczogdHJ1ZSxcbiAgICAgIHNlbmRfYWN0aXZpdHlfcmVtaW5kZXJzOiB0cnVlLFxuICAgICAgc2VuZF9kZWFkbGluZV9yZW1pbmRlcnM6IHRydWUsXG4gICAgICByZW1pbmRlcl9kYXlzX2JlZm9yZTogNyxcbiAgICAgIHJlcXVpcmVfcGhvdG9fbW9kZXJhdGlvbjogdHJ1ZSxcbiAgICAgIG1heF9waG90b3NfcGVyX2d1ZXN0OiAyMCxcbiAgICAgIGFsbG93ZWRfcGhvdG9fZm9ybWF0czogWydqcGcnLCAnanBlZycsICdwbmcnLCAnaGVpYyddLFxuICAgICAgZGVmYXVsdF9hdXRoX21ldGhvZDogJ21hZ2ljX2xpbmsnIGFzIGNvbnN0LFxuICAgICAgaG9tZV9wYWdlX3RpdGxlOiBudWxsLFxuICAgICAgaG9tZV9wYWdlX3N1YnRpdGxlOiBudWxsLFxuICAgICAgaG9tZV9wYWdlX3dlbGNvbWVfbWVzc2FnZTogbnVsbCxcbiAgICAgIGhvbWVfcGFnZV9oZXJvX2ltYWdlX3VybDogbnVsbCxcbiAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgIH07XG5cbiAgICByZW5kZXIoPFNldHRpbmdzRm9ybSBpbml0aWFsU2V0dGluZ3M9e2luaXRpYWxTZXR0aW5nc30gLz4pO1xuXG4gICAgZXhwZWN0KFxuICAgICAgc2NyZWVuLmdldEJ5VGV4dCgvR3Vlc3RzIHJlcXVlc3QgYSBvbmUtdGltZSBsb2dpbiBsaW5rL2kpXG4gICAgKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHVwZGF0ZSBkZXNjcmlwdGlvbiB3aGVuIGF1dGggbWV0aG9kIGlzIGNoYW5nZWQnLCAoKSA9PiB7XG4gICAgY29uc3QgaW5pdGlhbFNldHRpbmdzID0ge1xuICAgICAgaWQ6ICcxJyxcbiAgICAgIHdlZGRpbmdfZGF0ZTogJzIwMjQtMDYtMTVUMDA6MDA6MDBaJyxcbiAgICAgIHZlbnVlX25hbWU6ICdUZXN0IFZlbnVlJyxcbiAgICAgIGNvdXBsZV9uYW1lXzE6ICdQZXJzb24gMScsXG4gICAgICBjb3VwbGVfbmFtZV8yOiAnUGVyc29uIDInLFxuICAgICAgdGltZXpvbmU6ICdBbWVyaWNhL0Nvc3RhX1JpY2EnLFxuICAgICAgc2VuZF9yc3ZwX2NvbmZpcm1hdGlvbnM6IHRydWUsXG4gICAgICBzZW5kX2FjdGl2aXR5X3JlbWluZGVyczogdHJ1ZSxcbiAgICAgIHNlbmRfZGVhZGxpbmVfcmVtaW5kZXJzOiB0cnVlLFxuICAgICAgcmVtaW5kZXJfZGF5c19iZWZvcmU6IDcsXG4gICAgICByZXF1aXJlX3Bob3RvX21vZGVyYXRpb246IHRydWUsXG4gICAgICBtYXhfcGhvdG9zX3Blcl9ndWVzdDogMjAsXG4gICAgICBhbGxvd2VkX3Bob3RvX2Zvcm1hdHM6IFsnanBnJywgJ2pwZWcnLCAncG5nJywgJ2hlaWMnXSxcbiAgICAgIGRlZmF1bHRfYXV0aF9tZXRob2Q6ICdlbWFpbF9tYXRjaGluZycgYXMgY29uc3QsXG4gICAgICBob21lX3BhZ2VfdGl0bGU6IG51bGwsXG4gICAgICBob21lX3BhZ2Vfc3VidGl0bGU6IG51bGwsXG4gICAgICBob21lX3BhZ2Vfd2VsY29tZV9tZXNzYWdlOiBudWxsLFxuICAgICAgaG9tZV9wYWdlX2hlcm9faW1hZ2VfdXJsOiBudWxsLFxuICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgfTtcblxuICAgIHJlbmRlcig8U2V0dGluZ3NGb3JtIGluaXRpYWxTZXR0aW5ncz17aW5pdGlhbFNldHRpbmdzfSAvPik7XG5cbiAgICAvLyBJbml0aWFsbHkgc2hvd3MgZW1haWwgbWF0Y2hpbmcgZGVzY3JpcHRpb25cbiAgICBleHBlY3QoXG4gICAgICBzY3JlZW4uZ2V0QnlUZXh0KC9HdWVzdHMgbG9nIGluIGJ5IGVudGVyaW5nIHRoZWlyIGVtYWlsIGFkZHJlc3MvaSlcbiAgICApLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAvLyBDaGFuZ2UgdG8gbWFnaWMgbGlua1xuICAgIGNvbnN0IGF1dGhNZXRob2RTZWxlY3QgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ0RlZmF1bHQgQXV0aGVudGljYXRpb24gTWV0aG9kJyk7XG4gICAgZmlyZUV2ZW50LmNoYW5nZShhdXRoTWV0aG9kU2VsZWN0LCB7IHRhcmdldDogeyB2YWx1ZTogJ21hZ2ljX2xpbmsnIH0gfSk7XG5cbiAgICAvLyBTaG91bGQgbm93IHNob3cgbWFnaWMgbGluayBkZXNjcmlwdGlvblxuICAgIGV4cGVjdChcbiAgICAgIHNjcmVlbi5nZXRCeVRleHQoL0d1ZXN0cyByZXF1ZXN0IGEgb25lLXRpbWUgbG9naW4gbGluay9pKVxuICAgICkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBkaXNwbGF5IGF1dGhlbnRpY2F0aW9uIG1ldGhvZHMgaW5mbyBib3gnLCAoKSA9PiB7XG4gICAgY29uc3QgaW5pdGlhbFNldHRpbmdzID0ge1xuICAgICAgaWQ6ICcxJyxcbiAgICAgIHdlZGRpbmdfZGF0ZTogJzIwMjQtMDYtMTVUMDA6MDA6MDBaJyxcbiAgICAgIHZlbnVlX25hbWU6ICdUZXN0IFZlbnVlJyxcbiAgICAgIGNvdXBsZV9uYW1lXzE6ICdQZXJzb24gMScsXG4gICAgICBjb3VwbGVfbmFtZV8yOiAnUGVyc29uIDInLFxuICAgICAgdGltZXpvbmU6ICdBbWVyaWNhL0Nvc3RhX1JpY2EnLFxuICAgICAgc2VuZF9yc3ZwX2NvbmZpcm1hdGlvbnM6IHRydWUsXG4gICAgICBzZW5kX2FjdGl2aXR5X3JlbWluZGVyczogdHJ1ZSxcbiAgICAgIHNlbmRfZGVhZGxpbmVfcmVtaW5kZXJzOiB0cnVlLFxuICAgICAgcmVtaW5kZXJfZGF5c19iZWZvcmU6IDcsXG4gICAgICByZXF1aXJlX3Bob3RvX21vZGVyYXRpb246IHRydWUsXG4gICAgICBtYXhfcGhvdG9zX3Blcl9ndWVzdDogMjAsXG4gICAgICBhbGxvd2VkX3Bob3RvX2Zvcm1hdHM6IFsnanBnJywgJ2pwZWcnLCAncG5nJywgJ2hlaWMnXSxcbiAgICAgIGRlZmF1bHRfYXV0aF9tZXRob2Q6ICdlbWFpbF9tYXRjaGluZycgYXMgY29uc3QsXG4gICAgICBob21lX3BhZ2VfdGl0bGU6IG51bGwsXG4gICAgICBob21lX3BhZ2Vfc3VidGl0bGU6IG51bGwsXG4gICAgICBob21lX3BhZ2Vfd2VsY29tZV9tZXNzYWdlOiBudWxsLFxuICAgICAgaG9tZV9wYWdlX2hlcm9faW1hZ2VfdXJsOiBudWxsLFxuICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgfTtcblxuICAgIHJlbmRlcig8U2V0dGluZ3NGb3JtIGluaXRpYWxTZXR0aW5ncz17aW5pdGlhbFNldHRpbmdzfSAvPik7XG5cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQXV0aGVudGljYXRpb24gTWV0aG9kcycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9FbWFpbCBNYXRjaGluZzovKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvTWFnaWMgTGluazovKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3QoXG4gICAgICBzY3JlZW4uZ2V0QnlUZXh0KC9Zb3UgY2FuIG92ZXJyaWRlIHRoZSBhdXRoZW50aWNhdGlvbiBtZXRob2QgZm9yIGluZGl2aWR1YWwgZ3Vlc3RzL2kpXG4gICAgKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGluY2x1ZGUgZGVmYXVsdF9hdXRoX21ldGhvZCBpbiBmb3JtIHN1Ym1pc3Npb24nLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgaW5pdGlhbFNldHRpbmdzID0ge1xuICAgICAgaWQ6ICcxJyxcbiAgICAgIHdlZGRpbmdfZGF0ZTogJzIwMjQtMDYtMTVUMDA6MDA6MDBaJyxcbiAgICAgIHZlbnVlX25hbWU6ICdUZXN0IFZlbnVlJyxcbiAgICAgIGNvdXBsZV9uYW1lXzE6ICdQZXJzb24gMScsXG4gICAgICBjb3VwbGVfbmFtZV8yOiAnUGVyc29uIDInLFxuICAgICAgdGltZXpvbmU6ICdBbWVyaWNhL0Nvc3RhX1JpY2EnLFxuICAgICAgc2VuZF9yc3ZwX2NvbmZpcm1hdGlvbnM6IHRydWUsXG4gICAgICBzZW5kX2FjdGl2aXR5X3JlbWluZGVyczogdHJ1ZSxcbiAgICAgIHNlbmRfZGVhZGxpbmVfcmVtaW5kZXJzOiB0cnVlLFxuICAgICAgcmVtaW5kZXJfZGF5c19iZWZvcmU6IDcsXG4gICAgICByZXF1aXJlX3Bob3RvX21vZGVyYXRpb246IHRydWUsXG4gICAgICBtYXhfcGhvdG9zX3Blcl9ndWVzdDogMjAsXG4gICAgICBhbGxvd2VkX3Bob3RvX2Zvcm1hdHM6IFsnanBnJywgJ2pwZWcnLCAncG5nJywgJ2hlaWMnXSxcbiAgICAgIGRlZmF1bHRfYXV0aF9tZXRob2Q6ICdlbWFpbF9tYXRjaGluZycgYXMgY29uc3QsXG4gICAgICBob21lX3BhZ2VfdGl0bGU6IG51bGwsXG4gICAgICBob21lX3BhZ2Vfc3VidGl0bGU6IG51bGwsXG4gICAgICBob21lX3BhZ2Vfd2VsY29tZV9tZXNzYWdlOiBudWxsLFxuICAgICAgaG9tZV9wYWdlX2hlcm9faW1hZ2VfdXJsOiBudWxsLFxuICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgfTtcblxuICAgIHJlbmRlcig8U2V0dGluZ3NGb3JtIGluaXRpYWxTZXR0aW5ncz17aW5pdGlhbFNldHRpbmdzfSAvPik7XG5cbiAgICAvLyBDaGFuZ2UgYXV0aCBtZXRob2RcbiAgICBjb25zdCBhdXRoTWV0aG9kU2VsZWN0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdEZWZhdWx0IEF1dGhlbnRpY2F0aW9uIE1ldGhvZCcpO1xuICAgIGZpcmVFdmVudC5jaGFuZ2UoYXV0aE1ldGhvZFNlbGVjdCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdtYWdpY19saW5rJyB9IH0pO1xuXG4gICAgLy8gU3VibWl0IGZvcm1cbiAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdTYXZlIFNldHRpbmdzJyk7XG4gICAgZmlyZUV2ZW50LmNsaWNrKHN1Ym1pdEJ1dHRvbik7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnL2FwaS9hZG1pbi9zZXR0aW5ncycsXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgIGJvZHk6IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdcImRlZmF1bHRfYXV0aF9tZXRob2RcIjpcIm1hZ2ljX2xpbmtcIicpLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBkaXNwbGF5IHN1Y2Nlc3MgdG9hc3QgYWZ0ZXIgc3VjY2Vzc2Z1bCBzYXZlJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGluaXRpYWxTZXR0aW5ncyA9IHtcbiAgICAgIGlkOiAnMScsXG4gICAgICB3ZWRkaW5nX2RhdGU6ICcyMDI0LTA2LTE1VDAwOjAwOjAwWicsXG4gICAgICB2ZW51ZV9uYW1lOiAnVGVzdCBWZW51ZScsXG4gICAgICBjb3VwbGVfbmFtZV8xOiAnUGVyc29uIDEnLFxuICAgICAgY291cGxlX25hbWVfMjogJ1BlcnNvbiAyJyxcbiAgICAgIHRpbWV6b25lOiAnQW1lcmljYS9Db3N0YV9SaWNhJyxcbiAgICAgIHNlbmRfcnN2cF9jb25maXJtYXRpb25zOiB0cnVlLFxuICAgICAgc2VuZF9hY3Rpdml0eV9yZW1pbmRlcnM6IHRydWUsXG4gICAgICBzZW5kX2RlYWRsaW5lX3JlbWluZGVyczogdHJ1ZSxcbiAgICAgIHJlbWluZGVyX2RheXNfYmVmb3JlOiA3LFxuICAgICAgcmVxdWlyZV9waG90b19tb2RlcmF0aW9uOiB0cnVlLFxuICAgICAgbWF4X3Bob3Rvc19wZXJfZ3Vlc3Q6IDIwLFxuICAgICAgYWxsb3dlZF9waG90b19mb3JtYXRzOiBbJ2pwZycsICdqcGVnJywgJ3BuZycsICdoZWljJ10sXG4gICAgICBkZWZhdWx0X2F1dGhfbWV0aG9kOiAnZW1haWxfbWF0Y2hpbmcnIGFzIGNvbnN0LFxuICAgICAgaG9tZV9wYWdlX3RpdGxlOiBudWxsLFxuICAgICAgaG9tZV9wYWdlX3N1YnRpdGxlOiBudWxsLFxuICAgICAgaG9tZV9wYWdlX3dlbGNvbWVfbWVzc2FnZTogbnVsbCxcbiAgICAgIGhvbWVfcGFnZV9oZXJvX2ltYWdlX3VybDogbnVsbCxcbiAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgIH07XG5cbiAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHsgZGVmYXVsdF9hdXRoX21ldGhvZDogJ21hZ2ljX2xpbmsnIH0gfSksXG4gICAgfSk7XG5cbiAgICByZW5kZXIoPFNldHRpbmdzRm9ybSBpbml0aWFsU2V0dGluZ3M9e2luaXRpYWxTZXR0aW5nc30gLz4pO1xuXG4gICAgLy8gU3VibWl0IGZvcm1cbiAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdTYXZlIFNldHRpbmdzJyk7XG4gICAgZmlyZUV2ZW50LmNsaWNrKHN1Ym1pdEJ1dHRvbik7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTZXR0aW5ncyBzYXZlZCBzdWNjZXNzZnVsbHknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBkaXNwbGF5IGVycm9yIHRvYXN0IG9uIHNhdmUgZmFpbHVyZScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBpbml0aWFsU2V0dGluZ3MgPSB7XG4gICAgICBpZDogJzEnLFxuICAgICAgd2VkZGluZ19kYXRlOiAnMjAyNC0wNi0xNVQwMDowMDowMFonLFxuICAgICAgdmVudWVfbmFtZTogJ1Rlc3QgVmVudWUnLFxuICAgICAgY291cGxlX25hbWVfMTogJ1BlcnNvbiAxJyxcbiAgICAgIGNvdXBsZV9uYW1lXzI6ICdQZXJzb24gMicsXG4gICAgICB0aW1lem9uZTogJ0FtZXJpY2EvQ29zdGFfUmljYScsXG4gICAgICBzZW5kX3JzdnBfY29uZmlybWF0aW9uczogdHJ1ZSxcbiAgICAgIHNlbmRfYWN0aXZpdHlfcmVtaW5kZXJzOiB0cnVlLFxuICAgICAgc2VuZF9kZWFkbGluZV9yZW1pbmRlcnM6IHRydWUsXG4gICAgICByZW1pbmRlcl9kYXlzX2JlZm9yZTogNyxcbiAgICAgIHJlcXVpcmVfcGhvdG9fbW9kZXJhdGlvbjogdHJ1ZSxcbiAgICAgIG1heF9waG90b3NfcGVyX2d1ZXN0OiAyMCxcbiAgICAgIGFsbG93ZWRfcGhvdG9fZm9ybWF0czogWydqcGcnLCAnanBlZycsICdwbmcnLCAnaGVpYyddLFxuICAgICAgZGVmYXVsdF9hdXRoX21ldGhvZDogJ2VtYWlsX21hdGNoaW5nJyBhcyBjb25zdCxcbiAgICAgIGhvbWVfcGFnZV90aXRsZTogbnVsbCxcbiAgICAgIGhvbWVfcGFnZV9zdWJ0aXRsZTogbnVsbCxcbiAgICAgIGhvbWVfcGFnZV93ZWxjb21lX21lc3NhZ2U6IG51bGwsXG4gICAgICBob21lX3BhZ2VfaGVyb19pbWFnZV91cmw6IG51bGwsXG4gICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICB9O1xuXG4gICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHsgY29kZTogJ1ZBTElEQVRJT05fRVJST1InLCBtZXNzYWdlOiAnSW52YWxpZCBhdXRoIG1ldGhvZCcgfSxcbiAgICAgIH0pLFxuICAgIH0pO1xuXG4gICAgcmVuZGVyKDxTZXR0aW5nc0Zvcm0gaW5pdGlhbFNldHRpbmdzPXtpbml0aWFsU2V0dGluZ3N9IC8+KTtcblxuICAgIC8vIFN1Ym1pdCBmb3JtXG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgnU2F2ZSBTZXR0aW5ncycpO1xuICAgIGZpcmVFdmVudC5jbGljayhzdWJtaXRCdXR0b24pO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnSW52YWxpZCBhdXRoIG1ldGhvZCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwidXNlUm91dGVyIiwiZm4iLCJnbG9iYWwiLCJmZXRjaCIsImRlc2NyaWJlIiwibW9ja1JvdXRlciIsInJlZnJlc2giLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tSZXR1cm5WYWx1ZSIsIm1vY2tSZXNvbHZlZFZhbHVlIiwianNvbiIsInN1Y2Nlc3MiLCJkYXRhIiwiaXQiLCJpbml0aWFsU2V0dGluZ3MiLCJpZCIsIndlZGRpbmdfZGF0ZSIsInZlbnVlX25hbWUiLCJjb3VwbGVfbmFtZV8xIiwiY291cGxlX25hbWVfMiIsInRpbWV6b25lIiwic2VuZF9yc3ZwX2NvbmZpcm1hdGlvbnMiLCJzZW5kX2FjdGl2aXR5X3JlbWluZGVycyIsInNlbmRfZGVhZGxpbmVfcmVtaW5kZXJzIiwicmVtaW5kZXJfZGF5c19iZWZvcmUiLCJyZXF1aXJlX3Bob3RvX21vZGVyYXRpb24iLCJtYXhfcGhvdG9zX3Blcl9ndWVzdCIsImFsbG93ZWRfcGhvdG9fZm9ybWF0cyIsImRlZmF1bHRfYXV0aF9tZXRob2QiLCJob21lX3BhZ2VfdGl0bGUiLCJob21lX3BhZ2Vfc3VidGl0bGUiLCJob21lX3BhZ2Vfd2VsY29tZV9tZXNzYWdlIiwiaG9tZV9wYWdlX2hlcm9faW1hZ2VfdXJsIiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRfYXQiLCJyZW5kZXIiLCJTZXR0aW5nc0Zvcm0iLCJhdXRoTWV0aG9kU2VsZWN0Iiwic2NyZWVuIiwiZ2V0QnlMYWJlbFRleHQiLCJleHBlY3QiLCJ0b0JlSW5UaGVEb2N1bWVudCIsInRvSGF2ZVZhbHVlIiwiZ2V0QnlUZXh0IiwiZmlyZUV2ZW50IiwiY2hhbmdlIiwidGFyZ2V0IiwidmFsdWUiLCJzdWJtaXRCdXR0b24iLCJjbGljayIsIndhaXRGb3IiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsIm9iamVjdENvbnRhaW5pbmciLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsInN0cmluZ0NvbnRhaW5pbmciLCJtb2NrUmVzb2x2ZWRWYWx1ZU9uY2UiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0NBTUM7QUFNRCx1QkFBdUI7QUFDdkJBLEtBQUtDLElBQUksQ0FBQyxtQkFBbUIsSUFBTyxDQUFBO1FBQ2xDQyxXQUFXRixLQUFLRyxFQUFFO0lBQ3BCLENBQUE7Ozs7O3VCQVBtRDs0QkFDekI7cUVBQ0Q7Ozs7OztBQU96QixhQUFhO0FBQ2JDLE9BQU9DLEtBQUssR0FBR0wsS0FBS0csRUFBRTtBQUV0QkcsU0FBUyw0Q0FBNEM7SUFDbkQsTUFBTUMsYUFBYTtRQUNqQkMsU0FBU1IsS0FBS0csRUFBRTtJQUNsQjtJQUVBTSxXQUFXO1FBQ1RULEtBQUtVLGFBQWE7UUFDakJSLHFCQUFTLENBQWVTLGVBQWUsQ0FBQ0o7UUFDeENILE9BQU9DLEtBQUssQ0FBZU8saUJBQWlCLENBQUM7WUFDNUNDLE1BQU0sVUFBYSxDQUFBO29CQUFFQyxTQUFTO29CQUFNQyxNQUFNLENBQUM7Z0JBQUUsQ0FBQTtRQUMvQztJQUNGO0lBRUFDLEdBQUcseURBQXlEO1FBQzFELE1BQU1DLGtCQUFrQjtZQUN0QkMsSUFBSTtZQUNKQyxjQUFjO1lBQ2RDLFlBQVk7WUFDWkMsZUFBZTtZQUNmQyxlQUFlO1lBQ2ZDLFVBQVU7WUFDVkMseUJBQXlCO1lBQ3pCQyx5QkFBeUI7WUFDekJDLHlCQUF5QjtZQUN6QkMsc0JBQXNCO1lBQ3RCQywwQkFBMEI7WUFDMUJDLHNCQUFzQjtZQUN0QkMsdUJBQXVCO2dCQUFDO2dCQUFPO2dCQUFRO2dCQUFPO2FBQU87WUFDckRDLHFCQUFxQjtZQUNyQkMsaUJBQWlCO1lBQ2pCQyxvQkFBb0I7WUFDcEJDLDJCQUEyQjtZQUMzQkMsMEJBQTBCO1lBQzFCQyxZQUFZO1lBQ1pDLFlBQVk7UUFDZDtRQUVBQyxJQUFBQSxhQUFNLGdCQUFDLHFCQUFDQyxxQkFBWTtZQUFDdEIsaUJBQWlCQTs7UUFFdEMsTUFBTXVCLG1CQUFtQkMsYUFBTSxDQUFDQyxjQUFjLENBQUM7UUFDL0NDLE9BQU9ILGtCQUFrQkksaUJBQWlCO1FBQzFDRCxPQUFPSCxrQkFBa0JLLFdBQVcsQ0FBQztJQUN2QztJQUVBN0IsR0FBRyw0REFBNEQ7UUFDN0QsTUFBTUMsa0JBQWtCO1lBQ3RCQyxJQUFJO1lBQ0pDLGNBQWM7WUFDZEMsWUFBWTtZQUNaQyxlQUFlO1lBQ2ZDLGVBQWU7WUFDZkMsVUFBVTtZQUNWQyx5QkFBeUI7WUFDekJDLHlCQUF5QjtZQUN6QkMseUJBQXlCO1lBQ3pCQyxzQkFBc0I7WUFDdEJDLDBCQUEwQjtZQUMxQkMsc0JBQXNCO1lBQ3RCQyx1QkFBdUI7Z0JBQUM7Z0JBQU87Z0JBQVE7Z0JBQU87YUFBTztZQUNyREMscUJBQXFCO1lBQ3JCQyxpQkFBaUI7WUFDakJDLG9CQUFvQjtZQUNwQkMsMkJBQTJCO1lBQzNCQywwQkFBMEI7WUFDMUJDLFlBQVk7WUFDWkMsWUFBWTtRQUNkO1FBRUFDLElBQUFBLGFBQU0sZ0JBQUMscUJBQUNDLHFCQUFZO1lBQUN0QixpQkFBaUJBOztRQUV0QyxNQUFNdUIsbUJBQW1CQyxhQUFNLENBQUNDLGNBQWMsQ0FBQztRQUMvQ0MsT0FBT0gsa0JBQWtCSyxXQUFXLENBQUM7SUFDdkM7SUFFQTdCLEdBQUcsNkVBQTZFO1FBQzlFLE1BQU1DLGtCQUFrQjtZQUN0QkMsSUFBSTtZQUNKQyxjQUFjO1lBQ2RDLFlBQVk7WUFDWkMsZUFBZTtZQUNmQyxlQUFlO1lBQ2ZDLFVBQVU7WUFDVkMseUJBQXlCO1lBQ3pCQyx5QkFBeUI7WUFDekJDLHlCQUF5QjtZQUN6QkMsc0JBQXNCO1lBQ3RCQywwQkFBMEI7WUFDMUJDLHNCQUFzQjtZQUN0QkMsdUJBQXVCO2dCQUFDO2dCQUFPO2dCQUFRO2dCQUFPO2FBQU87WUFDckRDLHFCQUFxQjtZQUNyQkMsaUJBQWlCO1lBQ2pCQyxvQkFBb0I7WUFDcEJDLDJCQUEyQjtZQUMzQkMsMEJBQTBCO1lBQzFCQyxZQUFZO1lBQ1pDLFlBQVk7UUFDZDtRQUVBQyxJQUFBQSxhQUFNLGdCQUFDLHFCQUFDQyxxQkFBWTtZQUFDdEIsaUJBQWlCQTs7UUFFdEMwQixPQUNFRixhQUFNLENBQUNLLFNBQVMsQ0FBQyxtREFDakJGLGlCQUFpQjtJQUNyQjtJQUVBNUIsR0FBRyxxRUFBcUU7UUFDdEUsTUFBTUMsa0JBQWtCO1lBQ3RCQyxJQUFJO1lBQ0pDLGNBQWM7WUFDZEMsWUFBWTtZQUNaQyxlQUFlO1lBQ2ZDLGVBQWU7WUFDZkMsVUFBVTtZQUNWQyx5QkFBeUI7WUFDekJDLHlCQUF5QjtZQUN6QkMseUJBQXlCO1lBQ3pCQyxzQkFBc0I7WUFDdEJDLDBCQUEwQjtZQUMxQkMsc0JBQXNCO1lBQ3RCQyx1QkFBdUI7Z0JBQUM7Z0JBQU87Z0JBQVE7Z0JBQU87YUFBTztZQUNyREMscUJBQXFCO1lBQ3JCQyxpQkFBaUI7WUFDakJDLG9CQUFvQjtZQUNwQkMsMkJBQTJCO1lBQzNCQywwQkFBMEI7WUFDMUJDLFlBQVk7WUFDWkMsWUFBWTtRQUNkO1FBRUFDLElBQUFBLGFBQU0sZ0JBQUMscUJBQUNDLHFCQUFZO1lBQUN0QixpQkFBaUJBOztRQUV0QzBCLE9BQ0VGLGFBQU0sQ0FBQ0ssU0FBUyxDQUFDLDBDQUNqQkYsaUJBQWlCO0lBQ3JCO0lBRUE1QixHQUFHLHlEQUF5RDtRQUMxRCxNQUFNQyxrQkFBa0I7WUFDdEJDLElBQUk7WUFDSkMsY0FBYztZQUNkQyxZQUFZO1lBQ1pDLGVBQWU7WUFDZkMsZUFBZTtZQUNmQyxVQUFVO1lBQ1ZDLHlCQUF5QjtZQUN6QkMseUJBQXlCO1lBQ3pCQyx5QkFBeUI7WUFDekJDLHNCQUFzQjtZQUN0QkMsMEJBQTBCO1lBQzFCQyxzQkFBc0I7WUFDdEJDLHVCQUF1QjtnQkFBQztnQkFBTztnQkFBUTtnQkFBTzthQUFPO1lBQ3JEQyxxQkFBcUI7WUFDckJDLGlCQUFpQjtZQUNqQkMsb0JBQW9CO1lBQ3BCQywyQkFBMkI7WUFDM0JDLDBCQUEwQjtZQUMxQkMsWUFBWTtZQUNaQyxZQUFZO1FBQ2Q7UUFFQUMsSUFBQUEsYUFBTSxnQkFBQyxxQkFBQ0MscUJBQVk7WUFBQ3RCLGlCQUFpQkE7O1FBRXRDLDZDQUE2QztRQUM3QzBCLE9BQ0VGLGFBQU0sQ0FBQ0ssU0FBUyxDQUFDLG1EQUNqQkYsaUJBQWlCO1FBRW5CLHVCQUF1QjtRQUN2QixNQUFNSixtQkFBbUJDLGFBQU0sQ0FBQ0MsY0FBYyxDQUFDO1FBQy9DSyxnQkFBUyxDQUFDQyxNQUFNLENBQUNSLGtCQUFrQjtZQUFFUyxRQUFRO2dCQUFFQyxPQUFPO1lBQWE7UUFBRTtRQUVyRSx5Q0FBeUM7UUFDekNQLE9BQ0VGLGFBQU0sQ0FBQ0ssU0FBUyxDQUFDLDBDQUNqQkYsaUJBQWlCO0lBQ3JCO0lBRUE1QixHQUFHLGtEQUFrRDtRQUNuRCxNQUFNQyxrQkFBa0I7WUFDdEJDLElBQUk7WUFDSkMsY0FBYztZQUNkQyxZQUFZO1lBQ1pDLGVBQWU7WUFDZkMsZUFBZTtZQUNmQyxVQUFVO1lBQ1ZDLHlCQUF5QjtZQUN6QkMseUJBQXlCO1lBQ3pCQyx5QkFBeUI7WUFDekJDLHNCQUFzQjtZQUN0QkMsMEJBQTBCO1lBQzFCQyxzQkFBc0I7WUFDdEJDLHVCQUF1QjtnQkFBQztnQkFBTztnQkFBUTtnQkFBTzthQUFPO1lBQ3JEQyxxQkFBcUI7WUFDckJDLGlCQUFpQjtZQUNqQkMsb0JBQW9CO1lBQ3BCQywyQkFBMkI7WUFDM0JDLDBCQUEwQjtZQUMxQkMsWUFBWTtZQUNaQyxZQUFZO1FBQ2Q7UUFFQUMsSUFBQUEsYUFBTSxnQkFBQyxxQkFBQ0MscUJBQVk7WUFBQ3RCLGlCQUFpQkE7O1FBRXRDMEIsT0FBT0YsYUFBTSxDQUFDSyxTQUFTLENBQUMsMkJBQTJCRixpQkFBaUI7UUFDcEVELE9BQU9GLGFBQU0sQ0FBQ0ssU0FBUyxDQUFDLG9CQUFvQkYsaUJBQWlCO1FBQzdERCxPQUFPRixhQUFNLENBQUNLLFNBQVMsQ0FBQyxnQkFBZ0JGLGlCQUFpQjtRQUN6REQsT0FDRUYsYUFBTSxDQUFDSyxTQUFTLENBQUMsc0VBQ2pCRixpQkFBaUI7SUFDckI7SUFFQTVCLEdBQUcseURBQXlEO1FBQzFELE1BQU1DLGtCQUFrQjtZQUN0QkMsSUFBSTtZQUNKQyxjQUFjO1lBQ2RDLFlBQVk7WUFDWkMsZUFBZTtZQUNmQyxlQUFlO1lBQ2ZDLFVBQVU7WUFDVkMseUJBQXlCO1lBQ3pCQyx5QkFBeUI7WUFDekJDLHlCQUF5QjtZQUN6QkMsc0JBQXNCO1lBQ3RCQywwQkFBMEI7WUFDMUJDLHNCQUFzQjtZQUN0QkMsdUJBQXVCO2dCQUFDO2dCQUFPO2dCQUFRO2dCQUFPO2FBQU87WUFDckRDLHFCQUFxQjtZQUNyQkMsaUJBQWlCO1lBQ2pCQyxvQkFBb0I7WUFDcEJDLDJCQUEyQjtZQUMzQkMsMEJBQTBCO1lBQzFCQyxZQUFZO1lBQ1pDLFlBQVk7UUFDZDtRQUVBQyxJQUFBQSxhQUFNLGdCQUFDLHFCQUFDQyxxQkFBWTtZQUFDdEIsaUJBQWlCQTs7UUFFdEMscUJBQXFCO1FBQ3JCLE1BQU11QixtQkFBbUJDLGFBQU0sQ0FBQ0MsY0FBYyxDQUFDO1FBQy9DSyxnQkFBUyxDQUFDQyxNQUFNLENBQUNSLGtCQUFrQjtZQUFFUyxRQUFRO2dCQUFFQyxPQUFPO1lBQWE7UUFBRTtRQUVyRSxjQUFjO1FBQ2QsTUFBTUMsZUFBZVYsYUFBTSxDQUFDSyxTQUFTLENBQUM7UUFDdENDLGdCQUFTLENBQUNLLEtBQUssQ0FBQ0Q7UUFFaEIsTUFBTUUsSUFBQUEsY0FBTyxFQUFDO1lBQ1pWLE9BQU92QyxPQUFPQyxLQUFLLEVBQUVpRCxvQkFBb0IsQ0FDdkMsdUJBQ0FYLE9BQU9ZLGdCQUFnQixDQUFDO2dCQUN0QkMsUUFBUTtnQkFDUkMsU0FBUztvQkFBRSxnQkFBZ0I7Z0JBQW1CO2dCQUM5Q0MsTUFBTWYsT0FBT2dCLGdCQUFnQixDQUFDO1lBQ2hDO1FBRUo7SUFDRjtJQUVBM0MsR0FBRyxzREFBc0Q7UUFDdkQsTUFBTUMsa0JBQWtCO1lBQ3RCQyxJQUFJO1lBQ0pDLGNBQWM7WUFDZEMsWUFBWTtZQUNaQyxlQUFlO1lBQ2ZDLGVBQWU7WUFDZkMsVUFBVTtZQUNWQyx5QkFBeUI7WUFDekJDLHlCQUF5QjtZQUN6QkMseUJBQXlCO1lBQ3pCQyxzQkFBc0I7WUFDdEJDLDBCQUEwQjtZQUMxQkMsc0JBQXNCO1lBQ3RCQyx1QkFBdUI7Z0JBQUM7Z0JBQU87Z0JBQVE7Z0JBQU87YUFBTztZQUNyREMscUJBQXFCO1lBQ3JCQyxpQkFBaUI7WUFDakJDLG9CQUFvQjtZQUNwQkMsMkJBQTJCO1lBQzNCQywwQkFBMEI7WUFDMUJDLFlBQVk7WUFDWkMsWUFBWTtRQUNkO1FBRUNqQyxPQUFPQyxLQUFLLENBQWV1RCxxQkFBcUIsQ0FBQztZQUNoRC9DLE1BQU0sVUFBYSxDQUFBO29CQUFFQyxTQUFTO29CQUFNQyxNQUFNO3dCQUFFZ0IscUJBQXFCO29CQUFhO2dCQUFFLENBQUE7UUFDbEY7UUFFQU8sSUFBQUEsYUFBTSxnQkFBQyxxQkFBQ0MscUJBQVk7WUFBQ3RCLGlCQUFpQkE7O1FBRXRDLGNBQWM7UUFDZCxNQUFNa0MsZUFBZVYsYUFBTSxDQUFDSyxTQUFTLENBQUM7UUFDdENDLGdCQUFTLENBQUNLLEtBQUssQ0FBQ0Q7UUFFaEIsTUFBTUUsSUFBQUEsY0FBTyxFQUFDO1lBQ1pWLE9BQU9GLGFBQU0sQ0FBQ0ssU0FBUyxDQUFDLGdDQUFnQ0YsaUJBQWlCO1FBQzNFO0lBQ0Y7SUFFQTVCLEdBQUcsOENBQThDO1FBQy9DLE1BQU1DLGtCQUFrQjtZQUN0QkMsSUFBSTtZQUNKQyxjQUFjO1lBQ2RDLFlBQVk7WUFDWkMsZUFBZTtZQUNmQyxlQUFlO1lBQ2ZDLFVBQVU7WUFDVkMseUJBQXlCO1lBQ3pCQyx5QkFBeUI7WUFDekJDLHlCQUF5QjtZQUN6QkMsc0JBQXNCO1lBQ3RCQywwQkFBMEI7WUFDMUJDLHNCQUFzQjtZQUN0QkMsdUJBQXVCO2dCQUFDO2dCQUFPO2dCQUFRO2dCQUFPO2FBQU87WUFDckRDLHFCQUFxQjtZQUNyQkMsaUJBQWlCO1lBQ2pCQyxvQkFBb0I7WUFDcEJDLDJCQUEyQjtZQUMzQkMsMEJBQTBCO1lBQzFCQyxZQUFZO1lBQ1pDLFlBQVk7UUFDZDtRQUVDakMsT0FBT0MsS0FBSyxDQUFldUQscUJBQXFCLENBQUM7WUFDaEQvQyxNQUFNLFVBQWEsQ0FBQTtvQkFDakJDLFNBQVM7b0JBQ1QrQyxPQUFPO3dCQUFFQyxNQUFNO3dCQUFvQkMsU0FBUztvQkFBc0I7Z0JBQ3BFLENBQUE7UUFDRjtRQUVBekIsSUFBQUEsYUFBTSxnQkFBQyxxQkFBQ0MscUJBQVk7WUFBQ3RCLGlCQUFpQkE7O1FBRXRDLGNBQWM7UUFDZCxNQUFNa0MsZUFBZVYsYUFBTSxDQUFDSyxTQUFTLENBQUM7UUFDdENDLGdCQUFTLENBQUNLLEtBQUssQ0FBQ0Q7UUFFaEIsTUFBTUUsSUFBQUEsY0FBTyxFQUFDO1lBQ1pWLE9BQU9GLGFBQU0sQ0FBQ0ssU0FBUyxDQUFDLHdCQUF3QkYsaUJBQWlCO1FBQ25FO0lBQ0Y7QUFDRiJ9