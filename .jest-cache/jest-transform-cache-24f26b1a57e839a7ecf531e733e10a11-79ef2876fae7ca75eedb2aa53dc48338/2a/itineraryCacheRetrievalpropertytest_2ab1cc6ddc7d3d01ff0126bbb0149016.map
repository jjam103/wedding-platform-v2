{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/services/itineraryCacheRetrieval.property.test.ts"],"sourcesContent":["import * as fc from 'fast-check';\nimport { cacheItinerary, getCachedItinerary } from './itineraryService';\n\n/**\n * Property 31: Itinerary Cache Retrieval\n * \n * For any guest's personalized itinerary, after caching via the PWA service worker,\n * the itinerary data should be retrievable from the cache even when offline,\n * and should match the originally cached data.\n * \n * Validates: Requirements 18.3, 18.4\n * Feature: destination-wedding-platform, Property 31: Itinerary Cache Retrieval\n */\n\n// Mock localStorage for testing\nclass MockLocalStorage {\n  private store: Map<string, string> = new Map();\n\n  getItem(key: string): string | null {\n    return this.store.get(key) || null;\n  }\n\n  setItem(key: string, value: string): void {\n    this.store.set(key, value);\n  }\n\n  removeItem(key: string): void {\n    this.store.delete(key);\n  }\n\n  clear(): void {\n    this.store.clear();\n  }\n}\n\n// Setup mock localStorage\nlet mockLocalStorage: MockLocalStorage;\n\nbeforeEach(() => {\n  mockLocalStorage = new MockLocalStorage();\n  Object.defineProperty(window, 'localStorage', {\n    value: mockLocalStorage,\n    writable: true,\n  });\n});\n\nafterEach(() => {\n  mockLocalStorage.clear();\n});\n\n// Arbitraries for property-based testing\nconst guestIdArbitrary = fc.uuid();\n\nconst itineraryEventArbitrary = fc.record({\n  id: fc.uuid(),\n  name: fc.string({ minLength: 1, maxLength: 100 }),\n  type: fc.constantFrom('event' as const, 'activity' as const),\n  date: fc.date().map((d) => d.toISOString()),\n  time: fc.date().map((d) => d.toISOString()),\n  location: fc.option(fc.string({ minLength: 1, maxLength: 100 }), { nil: undefined }),\n  description: fc.option(fc.string({ minLength: 1, maxLength: 500 }), { nil: undefined }),\n  rsvp_status: fc.option(fc.constantFrom('attending', 'declined', 'maybe', 'pending'), {\n    nil: undefined,\n  }),\n});\n\nconst accommodationDetailsArbitrary = fc.record({\n  accommodation_name: fc.option(fc.string({ minLength: 1, maxLength: 100 }), { nil: undefined }),\n  room_type: fc.option(fc.string({ minLength: 1, maxLength: 50 }), { nil: undefined }),\n  check_in: fc.option(fc.date().map((d) => d.toISOString()), { nil: undefined }),\n  check_out: fc.option(fc.date().map((d) => d.toISOString()), { nil: undefined }),\n  address: fc.option(fc.string({ minLength: 1, maxLength: 200 }), { nil: undefined }),\n});\n\nconst transportationDetailsArbitrary = fc.record({\n  airport_code: fc.option(fc.constantFrom('SJO', 'LIR', 'Other'), { nil: undefined }),\n  flight_number: fc.option(fc.string({ minLength: 1, maxLength: 20 }), { nil: undefined }),\n  arrival_date: fc.option(fc.date().map((d) => d.toISOString()), { nil: undefined }),\n  departure_date: fc.option(fc.date().map((d) => d.toISOString()), { nil: undefined }),\n});\n\nconst itineraryArbitrary = fc.record({\n  guest_id: fc.uuid(),\n  guest_name: fc.string({ minLength: 1, maxLength: 100 }),\n  events: fc.array(itineraryEventArbitrary, { minLength: 0, maxLength: 10 }),\n  accommodation: fc.option(accommodationDetailsArbitrary, { nil: undefined }),\n  transportation: fc.option(transportationDetailsArbitrary, { nil: undefined }),\n  generated_at: fc.date().map((d) => d.toISOString()),\n});\n\ndescribe('Feature: destination-wedding-platform, Property 31: Itinerary Cache Retrieval', () => {\n  it('should retrieve cached itinerary that matches the originally cached data', async () => {\n    await fc.assert(\n      fc.asyncProperty(guestIdArbitrary, itineraryArbitrary, async (guestId, itinerary) => {\n        // Arrange: Set guest_id to match\n        const testItinerary = { ...itinerary, guest_id: guestId };\n\n        // Act: Cache the itinerary\n        const cacheResult = await cacheItinerary(guestId, testItinerary);\n\n        // Assert: Caching should succeed\n        expect(cacheResult.success).toBe(true);\n\n        // Act: Retrieve the cached itinerary\n        const retrieveResult = await getCachedItinerary(guestId);\n\n        // Assert: Retrieval should succeed and match original data\n        expect(retrieveResult.success).toBe(true);\n        \n        if (retrieveResult.success) {\n          expect(retrieveResult.data).not.toBeNull();\n\n          if (retrieveResult.data) {\n            expect(retrieveResult.data.guest_id).toBe(testItinerary.guest_id);\n            expect(retrieveResult.data.guest_name).toBe(testItinerary.guest_name);\n            expect(retrieveResult.data.events).toHaveLength(testItinerary.events.length);\n            expect(retrieveResult.data.generated_at).toBe(testItinerary.generated_at);\n\n            // Verify events match\n            testItinerary.events.forEach((event, index) => {\n              expect(retrieveResult.data!.events[index].id).toBe(event.id);\n              expect(retrieveResult.data!.events[index].name).toBe(event.name);\n              expect(retrieveResult.data!.events[index].type).toBe(event.type);\n            });\n          }\n        }\n      }),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should return null for non-existent cached itinerary', async () => {\n    await fc.assert(\n      fc.asyncProperty(guestIdArbitrary, async (guestId) => {\n        // Act: Try to retrieve itinerary that was never cached\n        const result = await getCachedItinerary(guestId);\n\n        // Assert: Should succeed but return null\n        expect(result.success).toBe(true);\n        if (result.success) {\n          expect(result.data).toBeNull();\n        }\n      }),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should preserve all itinerary fields through cache round-trip', async () => {\n    await fc.assert(\n      fc.asyncProperty(itineraryArbitrary, async (itinerary) => {\n        // Act: Cache and retrieve\n        const cacheResult = await cacheItinerary(itinerary.guest_id, itinerary);\n        expect(cacheResult.success).toBe(true);\n\n        const retrieveResult = await getCachedItinerary(itinerary.guest_id);\n\n        // Assert: All fields should be preserved\n        expect(retrieveResult.success).toBe(true);\n        \n        if (retrieveResult.success) {\n          expect(retrieveResult.data).not.toBeNull();\n\n          if (retrieveResult.data) {\n            const cached = retrieveResult.data;\n\n            // Verify all top-level fields\n            expect(cached.guest_id).toBe(itinerary.guest_id);\n            expect(cached.guest_name).toBe(itinerary.guest_name);\n            expect(cached.generated_at).toBe(itinerary.generated_at);\n\n            // Verify accommodation details if present\n            if (itinerary.accommodation) {\n              expect(cached.accommodation).toBeDefined();\n              expect(cached.accommodation?.accommodation_name).toBe(\n                itinerary.accommodation.accommodation_name\n              );\n              expect(cached.accommodation?.room_type).toBe(itinerary.accommodation.room_type);\n            }\n\n            // Verify transportation details if present\n            if (itinerary.transportation) {\n              expect(cached.transportation).toBeDefined();\n              expect(cached.transportation?.airport_code).toBe(\n                itinerary.transportation.airport_code\n              );\n              expect(cached.transportation?.flight_number).toBe(\n                itinerary.transportation.flight_number\n              );\n            }\n\n            // Verify all events\n            expect(cached.events).toHaveLength(itinerary.events.length);\n            itinerary.events.forEach((event, index) => {\n              expect(cached.events[index].id).toBe(event.id);\n              expect(cached.events[index].name).toBe(event.name);\n              expect(cached.events[index].type).toBe(event.type);\n              expect(cached.events[index].date).toBe(event.date);\n              expect(cached.events[index].time).toBe(event.time);\n              expect(cached.events[index].location).toBe(event.location);\n              expect(cached.events[index].description).toBe(event.description);\n              expect(cached.events[index].rsvp_status).toBe(event.rsvp_status);\n            });\n          }\n        }\n      }),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should handle multiple guests with separate cached itineraries', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.array(\n          fc.record({\n            guestId: fc.uuid(),\n            itinerary: itineraryArbitrary,\n          }),\n          { minLength: 2, maxLength: 5 }\n        ),\n        async (guestItineraries) => {\n          // Ensure unique guest IDs\n          const uniqueGuests = Array.from(\n            new Map(guestItineraries.map((g) => [g.guestId, g])).values()\n          );\n\n          // Act: Cache all itineraries\n          for (const { guestId, itinerary } of uniqueGuests) {\n            const testItinerary = { ...itinerary, guest_id: guestId };\n            const result = await cacheItinerary(guestId, testItinerary);\n            expect(result.success).toBe(true);\n          }\n\n          // Assert: Each guest should retrieve their own itinerary\n          for (const { guestId, itinerary } of uniqueGuests) {\n            const result = await getCachedItinerary(guestId);\n            expect(result.success).toBe(true);\n            \n            if (result.success) {\n              expect(result.data).not.toBeNull();\n\n              if (result.data) {\n                expect(result.data.guest_id).toBe(guestId);\n                expect(result.data.guest_name).toBe(itinerary.guest_name);\n              }\n            }\n          }\n        }\n      ),\n      { numRuns: 50 }\n    );\n  });\n\n  it('should handle cache updates by overwriting previous data', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        guestIdArbitrary,\n        itineraryArbitrary,\n        itineraryArbitrary,\n        async (guestId, itinerary1, itinerary2) => {\n          // Arrange: Create two different itineraries for same guest\n          const firstItinerary = { ...itinerary1, guest_id: guestId };\n          const secondItinerary = { ...itinerary2, guest_id: guestId };\n\n          // Act: Cache first itinerary\n          const cache1Result = await cacheItinerary(guestId, firstItinerary);\n          expect(cache1Result.success).toBe(true);\n\n          // Act: Cache second itinerary (should overwrite)\n          const cache2Result = await cacheItinerary(guestId, secondItinerary);\n          expect(cache2Result.success).toBe(true);\n\n          // Act: Retrieve cached itinerary\n          const retrieveResult = await getCachedItinerary(guestId);\n\n          // Assert: Should retrieve the second (most recent) itinerary\n          expect(retrieveResult.success).toBe(true);\n          \n          if (retrieveResult.success) {\n            expect(retrieveResult.data).not.toBeNull();\n\n            if (retrieveResult.data) {\n              expect(retrieveResult.data.guest_name).toBe(secondItinerary.guest_name);\n              expect(retrieveResult.data.generated_at).toBe(secondItinerary.generated_at);\n              expect(retrieveResult.data.events).toHaveLength(secondItinerary.events.length);\n            }\n          }\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n});\n"],"names":["MockLocalStorage","getItem","key","store","get","setItem","value","set","removeItem","delete","clear","Map","mockLocalStorage","beforeEach","Object","defineProperty","window","writable","afterEach","guestIdArbitrary","fc","uuid","itineraryEventArbitrary","record","id","name","string","minLength","maxLength","type","constantFrom","date","map","d","toISOString","time","location","option","nil","undefined","description","rsvp_status","accommodationDetailsArbitrary","accommodation_name","room_type","check_in","check_out","address","transportationDetailsArbitrary","airport_code","flight_number","arrival_date","departure_date","itineraryArbitrary","guest_id","guest_name","events","array","accommodation","transportation","generated_at","describe","it","assert","asyncProperty","guestId","itinerary","testItinerary","cacheResult","cacheItinerary","expect","success","toBe","retrieveResult","getCachedItinerary","data","not","toBeNull","toHaveLength","length","forEach","event","index","numRuns","result","cached","toBeDefined","guestItineraries","uniqueGuests","Array","from","g","values","itinerary1","itinerary2","firstItinerary","secondItinerary","cache1Result","cache2Result"],"mappings":"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"}