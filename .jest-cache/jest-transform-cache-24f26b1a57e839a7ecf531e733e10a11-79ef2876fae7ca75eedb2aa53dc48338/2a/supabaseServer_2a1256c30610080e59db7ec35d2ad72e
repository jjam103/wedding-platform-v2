7b21db4cd6fbc953c66055fbbac34225
/**
 * Supabase Server Client Utilities
 * 
 * Helper functions for creating Supabase clients in Next.js 15+ API routes
 * with proper async cookies() handling.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "createAuthenticatedClient", {
    enumerable: true,
    get: function() {
        return createAuthenticatedClient;
    }
});
const _ssr = require("@supabase/ssr");
const _headers = require("next/headers");
async function createAuthenticatedClient() {
    const cookieStore = await (0, _headers.cookies)();
    return (0, _ssr.createServerClient)(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY, {
        cookies: {
            getAll () {
                return cookieStore.getAll();
            },
            setAll (cookiesToSet) {
                try {
                    cookiesToSet.forEach(({ name, value, options })=>{
                        cookieStore.set(name, value, options);
                    });
                } catch (error) {
                    // Handle cookie setting errors (e.g., in middleware)
                    console.error('Error setting cookies:', error);
                }
            }
        }
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvbGliL3N1cGFiYXNlU2VydmVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU3VwYWJhc2UgU2VydmVyIENsaWVudCBVdGlsaXRpZXNcbiAqIFxuICogSGVscGVyIGZ1bmN0aW9ucyBmb3IgY3JlYXRpbmcgU3VwYWJhc2UgY2xpZW50cyBpbiBOZXh0LmpzIDE1KyBBUEkgcm91dGVzXG4gKiB3aXRoIHByb3BlciBhc3luYyBjb29raWVzKCkgaGFuZGxpbmcuXG4gKi9cblxuaW1wb3J0IHsgY3JlYXRlU2VydmVyQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3Nzcic7XG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJztcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGF1dGhlbnRpY2F0ZWQgU3VwYWJhc2UgY2xpZW50IGZvciBBUEkgcm91dGVzLlxuICogXG4gKiBUaGlzIGZ1bmN0aW9uIHByb3Blcmx5IGhhbmRsZXMgdGhlIE5leHQuanMgMTUrIGFzeW5jIGNvb2tpZXMoKSBBUElcbiAqIGFuZCBjcmVhdGVzIGEgU3VwYWJhc2UgY2xpZW50IHdpdGggY29va2llLWJhc2VkIGF1dGhlbnRpY2F0aW9uLlxuICogXG4gKiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmluZyB0byBhbiBhdXRoZW50aWNhdGVkIFN1cGFiYXNlIGNsaWVudFxuICogXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gKiAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQXV0aGVudGljYXRlZENsaWVudCgpO1xuICogICBjb25zdCB7IGRhdGE6IHsgc2Vzc2lvbiB9IH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFNlc3Npb24oKTtcbiAqICAgLy8gLi4uIHJlc3Qgb2Ygcm91dGUgbG9naWNcbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQXV0aGVudGljYXRlZENsaWVudCgpIHtcbiAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XG5cbiAgcmV0dXJuIGNyZWF0ZVNlcnZlckNsaWVudChcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZISxcbiAgICB7XG4gICAgICBjb29raWVzOiB7XG4gICAgICAgIGdldEFsbCgpIHtcbiAgICAgICAgICByZXR1cm4gY29va2llU3RvcmUuZ2V0QWxsKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldEFsbChjb29raWVzVG9TZXQpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29va2llc1RvU2V0LmZvckVhY2goKHsgbmFtZSwgdmFsdWUsIG9wdGlvbnMgfSkgPT4ge1xuICAgICAgICAgICAgICBjb29raWVTdG9yZS5zZXQobmFtZSwgdmFsdWUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBjb29raWUgc2V0dGluZyBlcnJvcnMgKGUuZy4sIGluIG1pZGRsZXdhcmUpXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZXR0aW5nIGNvb2tpZXM6JywgZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfVxuICApO1xufVxuIl0sIm5hbWVzIjpbImNyZWF0ZUF1dGhlbnRpY2F0ZWRDbGllbnQiLCJjb29raWVTdG9yZSIsImNvb2tpZXMiLCJjcmVhdGVTZXJ2ZXJDbGllbnQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJnZXRBbGwiLCJzZXRBbGwiLCJjb29raWVzVG9TZXQiLCJmb3JFYWNoIiwibmFtZSIsInZhbHVlIiwib3B0aW9ucyIsInNldCIsImVycm9yIiwiY29uc29sZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O0NBS0M7Ozs7K0JBc0JxQkE7OztlQUFBQTs7O3FCQXBCYTt5QkFDWDtBQW1CakIsZUFBZUE7SUFDcEIsTUFBTUMsY0FBYyxNQUFNQyxJQUFBQSxnQkFBTztJQUVqQyxPQUFPQyxJQUFBQSx1QkFBa0IsRUFDdkJDLFFBQVFDLEdBQUcsQ0FBQ0Msd0JBQXdCLEVBQ3BDRixRQUFRQyxHQUFHLENBQUNFLDZCQUE2QixFQUN6QztRQUNFTCxTQUFTO1lBQ1BNO2dCQUNFLE9BQU9QLFlBQVlPLE1BQU07WUFDM0I7WUFDQUMsUUFBT0MsWUFBWTtnQkFDakIsSUFBSTtvQkFDRkEsYUFBYUMsT0FBTyxDQUFDLENBQUMsRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRTt3QkFDNUNiLFlBQVljLEdBQUcsQ0FBQ0gsTUFBTUMsT0FBT0M7b0JBQy9CO2dCQUNGLEVBQUUsT0FBT0UsT0FBTztvQkFDZCxxREFBcUQ7b0JBQ3JEQyxRQUFRRCxLQUFLLENBQUMsMEJBQTBCQTtnQkFDMUM7WUFDRjtRQUNGO0lBQ0Y7QUFFSiJ9