312364aaf25a2011ad5b9c43109d8a41
/**
 * Guest View Navigation Tests for Accommodations
 * 
 * Tests the "View as Guest" functionality for accommodations.
 * Requirements: 32.4
 */ "use strict";
// Mock dependencies
jest.mock('@/components/ui/ToastContext');
jest.mock('next/navigation', ()=>({
        useRouter: jest.fn(),
        useSearchParams: ()=>({
                get: jest.fn(),
                getAll: jest.fn(),
                has: jest.fn(),
                keys: jest.fn(),
                values: jest.fn(),
                entries: jest.fn(),
                forEach: jest.fn(),
                toString: jest.fn()
            }),
        usePathname: ()=>'/admin/accommodations'
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _page = /*#__PURE__*/ _interop_require_default(require("./page"));
const _ToastContext = require("../../../components/ui/ToastContext");
const _navigation = require("next/navigation");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock fetch
global.fetch = jest.fn();
// Mock window.location
delete window.location;
window.location = {
    href: ''
};
const mockUseToast = _ToastContext.useToast;
const mockUseRouter = _navigation.useRouter;
describe('AccommodationsPage - Guest View Navigation', ()=>{
    const mockAddToast = jest.fn();
    const mockPush = jest.fn();
    const mockAccommodations = [
        {
            id: 'accommodation-1',
            name: 'Tamarindo Diria Beach Resort',
            address: '123 Beach Road, Tamarindo',
            description: 'Beachfront resort',
            locationId: 'loc-1',
            checkInDate: '2025-06-14',
            checkOutDate: '2025-06-17',
            status: 'available'
        },
        {
            id: 'accommodation-2',
            name: 'Sunset Villa',
            address: '456 Hill Street, Tamarindo',
            description: 'Luxury villa',
            locationId: 'loc-2',
            checkInDate: '2025-06-14',
            checkOutDate: '2025-06-17',
            status: 'booked'
        }
    ];
    const mockLocations = [
        {
            id: 'loc-1',
            name: 'Tamarindo Beach'
        },
        {
            id: 'loc-2',
            name: 'Tamarindo Hills'
        }
    ];
    beforeEach(()=>{
        jest.clearAllMocks();
        mockUseToast.mockReturnValue({
            addToast: mockAddToast,
            toasts: [],
            removeToast: jest.fn()
        });
        mockUseRouter.mockReturnValue({
            push: mockPush,
            replace: jest.fn(),
            refresh: jest.fn(),
            back: jest.fn(),
            forward: jest.fn(),
            prefetch: jest.fn()
        });
        // Mock fetch responses
        global.fetch.mockImplementation((url)=>{
            if (url.includes('/api/admin/accommodations')) {
                return Promise.resolve({
                    ok: true,
                    json: ()=>Promise.resolve({
                            success: true,
                            data: {
                                accommodations: mockAccommodations
                            }
                        })
                });
            }
            if (url.includes('/api/admin/locations')) {
                return Promise.resolve({
                    ok: true,
                    json: ()=>Promise.resolve({
                            success: true,
                            data: mockLocations
                        })
                });
            }
            return Promise.reject(new Error('Unknown URL'));
        });
    });
    describe('View Button', ()=>{
        it('should render View button for each accommodation', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                const viewButtons = _react.screen.getAllByRole('button', {
                    name: /^view$/i
                });
                expect(viewButtons).toHaveLength(mockAccommodations.length);
            });
        });
        it('should navigate to guest-facing accommodation page when View button is clicked', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
            });
            const viewButtons = _react.screen.getAllByRole('button', {
                name: /^view$/i
            });
            _react.fireEvent.click(viewButtons[0]);
            expect(window.location.href).toBe('/guest/accommodation/accommodation-1');
        });
        it('should generate correct URL for each accommodation ID', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
            });
            // Test first accommodation
            const viewButtons = _react.screen.getAllByRole('button', {
                name: /^view$/i
            });
            _react.fireEvent.click(viewButtons[0]);
            expect(window.location.href).toBe('/guest/accommodation/accommodation-1');
            // Reset location
            window.location.href = '';
            // Test second accommodation
            _react.fireEvent.click(viewButtons[1]);
            expect(window.location.href).toBe('/guest/accommodation/accommodation-2');
        });
        it('should not propagate click event to row', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
            });
            const viewButtons = _react.screen.getAllByRole('button', {
                name: /^view$/i
            });
            const clickEvent = new MouseEvent('click', {
                bubbles: true
            });
            const stopPropagationSpy = jest.spyOn(clickEvent, 'stopPropagation');
            viewButtons[0].dispatchEvent(clickEvent);
            expect(stopPropagationSpy).toHaveBeenCalled();
        });
    });
    describe('Link Generation', ()=>{
        it('should generate URL with /guest/accommodation/ prefix', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
            });
            const viewButtons = _react.screen.getAllByRole('button', {
                name: /^view$/i
            });
            _react.fireEvent.click(viewButtons[0]);
            expect(window.location.href).toMatch(/^\/guest\/accommodation\//);
        });
        it('should use accommodation ID in URL', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
            });
            const viewButtons = _react.screen.getAllByRole('button', {
                name: /^view$/i
            });
            _react.fireEvent.click(viewButtons[0]);
            expect(window.location.href).toContain('accommodation-1');
        });
        it('should use singular "accommodation" not plural in URL', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
            });
            const viewButtons = _react.screen.getAllByRole('button', {
                name: /^view$/i
            });
            _react.fireEvent.click(viewButtons[0]);
            expect(window.location.href).toContain('/accommodation/');
            expect(window.location.href).not.toContain('/accommodations/');
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FkbWluL2FjY29tbW9kYXRpb25zL3BhZ2UuZ3Vlc3RWaWV3LnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR3Vlc3QgVmlldyBOYXZpZ2F0aW9uIFRlc3RzIGZvciBBY2NvbW1vZGF0aW9uc1xuICogXG4gKiBUZXN0cyB0aGUgXCJWaWV3IGFzIEd1ZXN0XCIgZnVuY3Rpb25hbGl0eSBmb3IgYWNjb21tb2RhdGlvbnMuXG4gKiBSZXF1aXJlbWVudHM6IDMyLjRcbiAqL1xuXG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgQWNjb21tb2RhdGlvbnNQYWdlIGZyb20gJy4vcGFnZSc7XG5pbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9Ub2FzdENvbnRleHQnO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9uYXZpZ2F0aW9uJztcblxuLy8gTW9jayBkZXBlbmRlbmNpZXNcbmplc3QubW9jaygnQC9jb21wb25lbnRzL3VpL1RvYXN0Q29udGV4dCcpO1xuamVzdC5tb2NrKCduZXh0L25hdmlnYXRpb24nLCAoKSA9PiAoe1xuICB1c2VSb3V0ZXI6IGplc3QuZm4oKSxcbiAgdXNlU2VhcmNoUGFyYW1zOiAoKSA9PiAoe1xuICAgIGdldDogamVzdC5mbigpLFxuICAgIGdldEFsbDogamVzdC5mbigpLFxuICAgIGhhczogamVzdC5mbigpLFxuICAgIGtleXM6IGplc3QuZm4oKSxcbiAgICB2YWx1ZXM6IGplc3QuZm4oKSxcbiAgICBlbnRyaWVzOiBqZXN0LmZuKCksXG4gICAgZm9yRWFjaDogamVzdC5mbigpLFxuICAgIHRvU3RyaW5nOiBqZXN0LmZuKCksXG4gIH0pLFxuICB1c2VQYXRobmFtZTogKCkgPT4gJy9hZG1pbi9hY2NvbW1vZGF0aW9ucycsXG59KSk7XG5cbi8vIE1vY2sgZmV0Y2hcbmdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKTtcblxuLy8gTW9jayB3aW5kb3cubG9jYXRpb25cbmRlbGV0ZSAod2luZG93IGFzIGFueSkubG9jYXRpb247XG53aW5kb3cubG9jYXRpb24gPSB7IGhyZWY6ICcnIH0gYXMgYW55O1xuXG5jb25zdCBtb2NrVXNlVG9hc3QgPSB1c2VUb2FzdCBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiB1c2VUb2FzdD47XG5jb25zdCBtb2NrVXNlUm91dGVyID0gdXNlUm91dGVyIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIHVzZVJvdXRlcj47XG5cbmRlc2NyaWJlKCdBY2NvbW1vZGF0aW9uc1BhZ2UgLSBHdWVzdCBWaWV3IE5hdmlnYXRpb24nLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tBZGRUb2FzdCA9IGplc3QuZm4oKTtcbiAgY29uc3QgbW9ja1B1c2ggPSBqZXN0LmZuKCk7XG5cbiAgY29uc3QgbW9ja0FjY29tbW9kYXRpb25zID0gW1xuICAgIHtcbiAgICAgIGlkOiAnYWNjb21tb2RhdGlvbi0xJyxcbiAgICAgIG5hbWU6ICdUYW1hcmluZG8gRGlyaWEgQmVhY2ggUmVzb3J0JyxcbiAgICAgIGFkZHJlc3M6ICcxMjMgQmVhY2ggUm9hZCwgVGFtYXJpbmRvJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQmVhY2hmcm9udCByZXNvcnQnLFxuICAgICAgbG9jYXRpb25JZDogJ2xvYy0xJyxcbiAgICAgIGNoZWNrSW5EYXRlOiAnMjAyNS0wNi0xNCcsXG4gICAgICBjaGVja091dERhdGU6ICcyMDI1LTA2LTE3JyxcbiAgICAgIHN0YXR1czogJ2F2YWlsYWJsZScsXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ2FjY29tbW9kYXRpb24tMicsXG4gICAgICBuYW1lOiAnU3Vuc2V0IFZpbGxhJyxcbiAgICAgIGFkZHJlc3M6ICc0NTYgSGlsbCBTdHJlZXQsIFRhbWFyaW5kbycsXG4gICAgICBkZXNjcmlwdGlvbjogJ0x1eHVyeSB2aWxsYScsXG4gICAgICBsb2NhdGlvbklkOiAnbG9jLTInLFxuICAgICAgY2hlY2tJbkRhdGU6ICcyMDI1LTA2LTE0JyxcbiAgICAgIGNoZWNrT3V0RGF0ZTogJzIwMjUtMDYtMTcnLFxuICAgICAgc3RhdHVzOiAnYm9va2VkJyxcbiAgICB9LFxuICBdO1xuXG4gIGNvbnN0IG1vY2tMb2NhdGlvbnMgPSBbXG4gICAgeyBpZDogJ2xvYy0xJywgbmFtZTogJ1RhbWFyaW5kbyBCZWFjaCcgfSxcbiAgICB7IGlkOiAnbG9jLTInLCBuYW1lOiAnVGFtYXJpbmRvIEhpbGxzJyB9LFxuICBdO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIFxuICAgIG1vY2tVc2VUb2FzdC5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgYWRkVG9hc3Q6IG1vY2tBZGRUb2FzdCxcbiAgICAgIHRvYXN0czogW10sXG4gICAgICByZW1vdmVUb2FzdDogamVzdC5mbigpLFxuICAgIH0pO1xuXG4gICAgbW9ja1VzZVJvdXRlci5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgcHVzaDogbW9ja1B1c2gsXG4gICAgICByZXBsYWNlOiBqZXN0LmZuKCksXG4gICAgICByZWZyZXNoOiBqZXN0LmZuKCksXG4gICAgICBiYWNrOiBqZXN0LmZuKCksXG4gICAgICBmb3J3YXJkOiBqZXN0LmZuKCksXG4gICAgICBwcmVmZXRjaDogamVzdC5mbigpLFxuICAgIH0gYXMgYW55KTtcblxuICAgIC8vIE1vY2sgZmV0Y2ggcmVzcG9uc2VzXG4gICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigodXJsOiBzdHJpbmcpID0+IHtcbiAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvYWRtaW4vYWNjb21tb2RhdGlvbnMnKSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGE6IHsgYWNjb21tb2RhdGlvbnM6IG1vY2tBY2NvbW1vZGF0aW9ucyB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvYWRtaW4vbG9jYXRpb25zJykpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiBtb2NrTG9jYXRpb25zLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1Vua25vd24gVVJMJykpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVmlldyBCdXR0b24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgVmlldyBidXR0b24gZm9yIGVhY2ggYWNjb21tb2RhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8QWNjb21tb2RhdGlvbnNQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IHZpZXdCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvXnZpZXckL2kgfSk7XG4gICAgICAgIGV4cGVjdCh2aWV3QnV0dG9ucykudG9IYXZlTGVuZ3RoKG1vY2tBY2NvbW1vZGF0aW9ucy5sZW5ndGgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5hdmlnYXRlIHRvIGd1ZXN0LWZhY2luZyBhY2NvbW1vZGF0aW9uIHBhZ2Ugd2hlbiBWaWV3IGJ1dHRvbiBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBY2NvbW1vZGF0aW9uc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1RhbWFyaW5kbyBEaXJpYSBCZWFjaCBSZXNvcnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB2aWV3QnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL152aWV3JC9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHZpZXdCdXR0b25zWzBdKTtcblxuICAgICAgZXhwZWN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKS50b0JlKCcvZ3Vlc3QvYWNjb21tb2RhdGlvbi9hY2NvbW1vZGF0aW9uLTEnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgY29ycmVjdCBVUkwgZm9yIGVhY2ggYWNjb21tb2RhdGlvbiBJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8QWNjb21tb2RhdGlvbnNQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdUYW1hcmluZG8gRGlyaWEgQmVhY2ggUmVzb3J0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gVGVzdCBmaXJzdCBhY2NvbW1vZGF0aW9uXG4gICAgICBjb25zdCB2aWV3QnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL152aWV3JC9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHZpZXdCdXR0b25zWzBdKTtcbiAgICAgIGV4cGVjdCh3aW5kb3cubG9jYXRpb24uaHJlZikudG9CZSgnL2d1ZXN0L2FjY29tbW9kYXRpb24vYWNjb21tb2RhdGlvbi0xJyk7XG5cbiAgICAgIC8vIFJlc2V0IGxvY2F0aW9uXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcnO1xuXG4gICAgICAvLyBUZXN0IHNlY29uZCBhY2NvbW1vZGF0aW9uXG4gICAgICBmaXJlRXZlbnQuY2xpY2sodmlld0J1dHRvbnNbMV0pO1xuICAgICAgZXhwZWN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKS50b0JlKCcvZ3Vlc3QvYWNjb21tb2RhdGlvbi9hY2NvbW1vZGF0aW9uLTInKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IHByb3BhZ2F0ZSBjbGljayBldmVudCB0byByb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPEFjY29tbW9kYXRpb25zUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVGFtYXJpbmRvIERpcmlhIEJlYWNoIFJlc29ydCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHZpZXdCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvXnZpZXckL2kgfSk7XG4gICAgICBjb25zdCBjbGlja0V2ZW50ID0gbmV3IE1vdXNlRXZlbnQoJ2NsaWNrJywgeyBidWJibGVzOiB0cnVlIH0pO1xuICAgICAgY29uc3Qgc3RvcFByb3BhZ2F0aW9uU3B5ID0gamVzdC5zcHlPbihjbGlja0V2ZW50LCAnc3RvcFByb3BhZ2F0aW9uJyk7XG4gICAgICBcbiAgICAgIHZpZXdCdXR0b25zWzBdLmRpc3BhdGNoRXZlbnQoY2xpY2tFdmVudCk7XG5cbiAgICAgIGV4cGVjdChzdG9wUHJvcGFnYXRpb25TcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0xpbmsgR2VuZXJhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIFVSTCB3aXRoIC9ndWVzdC9hY2NvbW1vZGF0aW9uLyBwcmVmaXgnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPEFjY29tbW9kYXRpb25zUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVGFtYXJpbmRvIERpcmlhIEJlYWNoIFJlc29ydCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHZpZXdCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvXnZpZXckL2kgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sodmlld0J1dHRvbnNbMF0pO1xuXG4gICAgICBleHBlY3Qod2luZG93LmxvY2F0aW9uLmhyZWYpLnRvTWF0Y2goL15cXC9ndWVzdFxcL2FjY29tbW9kYXRpb25cXC8vKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXNlIGFjY29tbW9kYXRpb24gSUQgaW4gVVJMJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBY2NvbW1vZGF0aW9uc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1RhbWFyaW5kbyBEaXJpYSBCZWFjaCBSZXNvcnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB2aWV3QnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL152aWV3JC9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHZpZXdCdXR0b25zWzBdKTtcblxuICAgICAgZXhwZWN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKS50b0NvbnRhaW4oJ2FjY29tbW9kYXRpb24tMScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1c2Ugc2luZ3VsYXIgXCJhY2NvbW1vZGF0aW9uXCIgbm90IHBsdXJhbCBpbiBVUkwnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPEFjY29tbW9kYXRpb25zUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVGFtYXJpbmRvIERpcmlhIEJlYWNoIFJlc29ydCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHZpZXdCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvXnZpZXckL2kgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sodmlld0J1dHRvbnNbMF0pO1xuXG4gICAgICBleHBlY3Qod2luZG93LmxvY2F0aW9uLmhyZWYpLnRvQ29udGFpbignL2FjY29tbW9kYXRpb24vJyk7XG4gICAgICBleHBlY3Qod2luZG93LmxvY2F0aW9uLmhyZWYpLm5vdC50b0NvbnRhaW4oJy9hY2NvbW1vZGF0aW9ucy8nKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInVzZVJvdXRlciIsImZuIiwidXNlU2VhcmNoUGFyYW1zIiwiZ2V0IiwiZ2V0QWxsIiwiaGFzIiwia2V5cyIsInZhbHVlcyIsImVudHJpZXMiLCJmb3JFYWNoIiwidG9TdHJpbmciLCJ1c2VQYXRobmFtZSIsImdsb2JhbCIsImZldGNoIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwibW9ja1VzZVRvYXN0IiwidXNlVG9hc3QiLCJtb2NrVXNlUm91dGVyIiwiZGVzY3JpYmUiLCJtb2NrQWRkVG9hc3QiLCJtb2NrUHVzaCIsIm1vY2tBY2NvbW1vZGF0aW9ucyIsImlkIiwibmFtZSIsImFkZHJlc3MiLCJkZXNjcmlwdGlvbiIsImxvY2F0aW9uSWQiLCJjaGVja0luRGF0ZSIsImNoZWNrT3V0RGF0ZSIsInN0YXR1cyIsIm1vY2tMb2NhdGlvbnMiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tSZXR1cm5WYWx1ZSIsImFkZFRvYXN0IiwidG9hc3RzIiwicmVtb3ZlVG9hc3QiLCJwdXNoIiwicmVwbGFjZSIsInJlZnJlc2giLCJiYWNrIiwiZm9yd2FyZCIsInByZWZldGNoIiwibW9ja0ltcGxlbWVudGF0aW9uIiwidXJsIiwiaW5jbHVkZXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsIm9rIiwianNvbiIsInN1Y2Nlc3MiLCJkYXRhIiwiYWNjb21tb2RhdGlvbnMiLCJyZWplY3QiLCJFcnJvciIsIml0IiwicmVuZGVyIiwiQWNjb21tb2RhdGlvbnNQYWdlIiwid2FpdEZvciIsInZpZXdCdXR0b25zIiwic2NyZWVuIiwiZ2V0QWxsQnlSb2xlIiwiZXhwZWN0IiwidG9IYXZlTGVuZ3RoIiwibGVuZ3RoIiwiZ2V0QnlUZXh0IiwidG9CZUluVGhlRG9jdW1lbnQiLCJmaXJlRXZlbnQiLCJjbGljayIsInRvQmUiLCJjbGlja0V2ZW50IiwiTW91c2VFdmVudCIsImJ1YmJsZXMiLCJzdG9wUHJvcGFnYXRpb25TcHkiLCJzcHlPbiIsImRpc3BhdGNoRXZlbnQiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwidG9NYXRjaCIsInRvQ29udGFpbiIsIm5vdCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O0NBS0M7QUFPRCxvQkFBb0I7QUFDcEJBLEtBQUtDLElBQUksQ0FBQztBQUNWRCxLQUFLQyxJQUFJLENBQUMsbUJBQW1CLElBQU8sQ0FBQTtRQUNsQ0MsV0FBV0YsS0FBS0csRUFBRTtRQUNsQkMsaUJBQWlCLElBQU8sQ0FBQTtnQkFDdEJDLEtBQUtMLEtBQUtHLEVBQUU7Z0JBQ1pHLFFBQVFOLEtBQUtHLEVBQUU7Z0JBQ2ZJLEtBQUtQLEtBQUtHLEVBQUU7Z0JBQ1pLLE1BQU1SLEtBQUtHLEVBQUU7Z0JBQ2JNLFFBQVFULEtBQUtHLEVBQUU7Z0JBQ2ZPLFNBQVNWLEtBQUtHLEVBQUU7Z0JBQ2hCUSxTQUFTWCxLQUFLRyxFQUFFO2dCQUNoQlMsVUFBVVosS0FBS0csRUFBRTtZQUNuQixDQUFB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