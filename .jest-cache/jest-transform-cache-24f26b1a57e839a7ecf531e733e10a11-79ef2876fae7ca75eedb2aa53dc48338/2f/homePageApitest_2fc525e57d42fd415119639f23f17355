5006bc8040947aaaadbc711283037d1e
"use strict";
// Mock Next.js cookies
jest.mock('next/headers', ()=>({
        cookies: jest.fn(()=>({
                getAll: jest.fn(()=>[]),
                set: jest.fn()
            }))
    }));
// Mock Supabase client
jest.mock('@supabase/ssr', ()=>({
        createServerClient: jest.fn(()=>({
                auth: {
                    getSession: jest.fn()
                }
            }))
    }));
// Mock settings service
jest.mock('@/services/settingsService');
// Mock sanitization
jest.mock('@/utils/sanitization', ()=>({
        sanitizeRichText: jest.fn((text)=>text)
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _route = require("../../app/api/admin/home-page/route");
const _settingsService = /*#__PURE__*/ _interop_require_wildcard(require("../../services/settingsService"));
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
describe('GET /api/admin/home-page', ()=>{
    let mockGetSession;
    beforeEach(()=>{
        jest.clearAllMocks();
        const { createServerClient } = require('@supabase/ssr');
        mockGetSession = jest.fn();
        createServerClient.mockReturnValue({
            auth: {
                getSession: mockGetSession
            }
        });
    });
    it('should return 401 when not authenticated', async ()=>{
        mockGetSession.mockResolvedValue({
            data: {
                session: null
            },
            error: null
        });
        const response = await (0, _route.GET)();
        const data = await response.json();
        expect(response.status).toBe(401);
        expect(data.success).toBe(false);
        expect(data.error.code).toBe('UNAUTHORIZED');
    });
    it('should return home page configuration when authenticated', async ()=>{
        mockGetSession.mockResolvedValue({
            data: {
                session: {
                    user: {
                        id: 'user-1'
                    }
                }
            },
            error: null
        });
        _settingsService.getSetting.mockResolvedValueOnce({
            success: true,
            data: 'Welcome to Our Wedding'
        }).mockResolvedValueOnce({
            success: true,
            data: 'Join us in Costa Rica'
        }).mockResolvedValueOnce({
            success: true,
            data: '<p>We are excited!</p>'
        }).mockResolvedValueOnce({
            success: true,
            data: 'https://example.com/hero.jpg'
        });
        const response = await (0, _route.GET)();
        const data = await response.json();
        expect(response.status).toBe(200);
        expect(data.success).toBe(true);
        expect(data.data.title).toBe('Welcome to Our Wedding');
        expect(data.data.subtitle).toBe('Join us in Costa Rica');
        expect(data.data.welcomeMessage).toBe('<p>We are excited!</p>');
        expect(data.data.heroImageUrl).toBe('https://example.com/hero.jpg');
    });
    it('should handle missing settings gracefully', async ()=>{
        mockGetSession.mockResolvedValue({
            data: {
                session: {
                    user: {
                        id: 'user-1'
                    }
                }
            },
            error: null
        });
        _settingsService.getSetting.mockResolvedValueOnce({
            success: false,
            error: {
                code: 'NOT_FOUND',
                message: 'Setting not found'
            }
        }).mockResolvedValueOnce({
            success: false,
            error: {
                code: 'NOT_FOUND',
                message: 'Setting not found'
            }
        }).mockResolvedValueOnce({
            success: false,
            error: {
                code: 'NOT_FOUND',
                message: 'Setting not found'
            }
        }).mockResolvedValueOnce({
            success: false,
            error: {
                code: 'NOT_FOUND',
                message: 'Setting not found'
            }
        });
        const response = await (0, _route.GET)();
        const data = await response.json();
        expect(response.status).toBe(200);
        expect(data.success).toBe(true);
        expect(data.data.title).toBeNull();
        expect(data.data.subtitle).toBeNull();
        expect(data.data.welcomeMessage).toBeNull();
        expect(data.data.heroImageUrl).toBeNull();
    });
});
describe('PUT /api/admin/home-page', ()=>{
    let mockGetSession;
    beforeEach(()=>{
        jest.clearAllMocks();
        const { createServerClient } = require('@supabase/ssr');
        mockGetSession = jest.fn();
        createServerClient.mockReturnValue({
            auth: {
                getSession: mockGetSession
            }
        });
    });
    it('should return 401 when not authenticated', async ()=>{
        mockGetSession.mockResolvedValue({
            data: {
                session: null
            },
            error: null
        });
        const request = new Request('http://localhost:3000/api/admin/home-page', {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                title: 'Test'
            })
        });
        const response = await (0, _route.PUT)(request);
        const data = await response.json();
        expect(response.status).toBe(401);
        expect(data.success).toBe(false);
        expect(data.error.code).toBe('UNAUTHORIZED');
    });
    it('should successfully update home page configuration', async ()=>{
        mockGetSession.mockResolvedValue({
            data: {
                session: {
                    user: {
                        id: 'user-1'
                    }
                }
            },
            error: null
        });
        const config = {
            title: 'Welcome to Our Wedding',
            subtitle: 'Join us in Costa Rica',
            welcomeMessage: '<p>We are excited to celebrate with you!</p>',
            heroImageUrl: 'https://example.com/hero.jpg'
        };
        _settingsService.upsertHomePageConfig.mockResolvedValue({
            success: true,
            data: config
        });
        const request = new Request('http://localhost:3000/api/admin/home-page', {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(config)
        });
        const response = await (0, _route.PUT)(request);
        const data = await response.json();
        expect(response.status).toBe(200);
        expect(data.success).toBe(true);
        expect(data.data.title).toBe(config.title);
        expect(data.data.subtitle).toBe(config.subtitle);
        expect(_settingsService.upsertHomePageConfig).toHaveBeenCalledWith(expect.objectContaining({
            title: config.title,
            subtitle: config.subtitle
        }));
    });
    it('should return 400 for invalid configuration', async ()=>{
        mockGetSession.mockResolvedValue({
            data: {
                session: {
                    user: {
                        id: 'user-1'
                    }
                }
            },
            error: null
        });
        const invalidConfig = {
            title: '',
            heroImageUrl: 'not-a-valid-url'
        };
        const request = new Request('http://localhost:3000/api/admin/home-page', {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(invalidConfig)
        });
        const response = await (0, _route.PUT)(request);
        const data = await response.json();
        expect(response.status).toBe(400);
        expect(data.success).toBe(false);
        expect(data.error.code).toBe('VALIDATION_ERROR');
    });
    it('should return 500 when service fails', async ()=>{
        mockGetSession.mockResolvedValue({
            data: {
                session: {
                    user: {
                        id: 'user-1'
                    }
                }
            },
            error: null
        });
        _settingsService.upsertHomePageConfig.mockResolvedValue({
            success: false,
            error: {
                code: 'DATABASE_ERROR',
                message: 'Failed to update settings'
            }
        });
        const request = new Request('http://localhost:3000/api/admin/home-page', {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                title: 'Test'
            })
        });
        const response = await (0, _route.PUT)(request);
        const data = await response.json();
        expect(response.status).toBe(500);
        expect(data.success).toBe(false);
        expect(data.error.code).toBe('DATABASE_ERROR');
    });
    it('should sanitize rich text content', async ()=>{
        mockGetSession.mockResolvedValue({
            data: {
                session: {
                    user: {
                        id: 'user-1'
                    }
                }
            },
            error: null
        });
        const { sanitizeRichText } = require('@/utils/sanitization');
        sanitizeRichText.mockReturnValue('<p>Sanitized content</p>');
        _settingsService.upsertHomePageConfig.mockResolvedValue({
            success: true,
            data: {
                welcomeMessage: '<p>Sanitized content</p>'
            }
        });
        const request = new Request('http://localhost:3000/api/admin/home-page', {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                welcomeMessage: '<p>Original content</p>'
            })
        });
        const response = await (0, _route.PUT)(request);
        const data = await response.json();
        expect(response.status).toBe(200);
        expect(sanitizeRichText).toHaveBeenCalledWith('<p>Original content</p>');
        expect(_settingsService.upsertHomePageConfig).toHaveBeenCalledWith(expect.objectContaining({
            welcomeMessage: '<p>Sanitized content</p>'
        }));
    });
    it('should handle partial updates', async ()=>{
        mockGetSession.mockResolvedValue({
            data: {
                session: {
                    user: {
                        id: 'user-1'
                    }
                }
            },
            error: null
        });
        const partialConfig = {
            title: 'New Title Only'
        };
        _settingsService.upsertHomePageConfig.mockResolvedValue({
            success: true,
            data: partialConfig
        });
        const request = new Request('http://localhost:3000/api/admin/home-page', {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(partialConfig)
        });
        const response = await (0, _route.PUT)(request);
        const data = await response.json();
        expect(response.status).toBe(200);
        expect(data.success).toBe(true);
        expect(data.data.title).toBe('New Title Only');
    });
    it('should handle unexpected errors gracefully', async ()=>{
        mockGetSession.mockResolvedValue({
            data: {
                session: {
                    user: {
                        id: 'user-1'
                    }
                }
            },
            error: null
        });
        _settingsService.upsertHomePageConfig.mockRejectedValue(new Error('Unexpected error'));
        const request = new Request('http://localhost:3000/api/admin/home-page', {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                title: 'Test'
            })
        });
        const response = await (0, _route.PUT)(request);
        const data = await response.json();
        expect(response.status).toBe(500);
        expect(data.success).toBe(false);
        expect(data.error.code).toBe('INTERNAL_ERROR');
        expect(data.error.message).toBe('An unexpected error occurred');
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvX190ZXN0c19fL2ludGVncmF0aW9uL2hvbWVQYWdlQXBpLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR0VULCBQVVQgfSBmcm9tICdAL2FwcC9hcGkvYWRtaW4vaG9tZS1wYWdlL3JvdXRlJztcbmltcG9ydCAqIGFzIHNldHRpbmdzU2VydmljZSBmcm9tICdAL3NlcnZpY2VzL3NldHRpbmdzU2VydmljZSc7XG5cbi8vIE1vY2sgTmV4dC5qcyBjb29raWVzXG5qZXN0Lm1vY2soJ25leHQvaGVhZGVycycsICgpID0+ICh7XG4gIGNvb2tpZXM6IGplc3QuZm4oKCkgPT4gKHtcbiAgICBnZXRBbGw6IGplc3QuZm4oKCkgPT4gW10pLFxuICAgIHNldDogamVzdC5mbigpLFxuICB9KSksXG59KSk7XG5cbi8vIE1vY2sgU3VwYWJhc2UgY2xpZW50XG5qZXN0Lm1vY2soJ0BzdXBhYmFzZS9zc3InLCAoKSA9PiAoe1xuICBjcmVhdGVTZXJ2ZXJDbGllbnQ6IGplc3QuZm4oKCkgPT4gKHtcbiAgICBhdXRoOiB7XG4gICAgICBnZXRTZXNzaW9uOiBqZXN0LmZuKCksXG4gICAgfSxcbiAgfSkpLFxufSkpO1xuXG4vLyBNb2NrIHNldHRpbmdzIHNlcnZpY2Vcbmplc3QubW9jaygnQC9zZXJ2aWNlcy9zZXR0aW5nc1NlcnZpY2UnKTtcblxuLy8gTW9jayBzYW5pdGl6YXRpb25cbmplc3QubW9jaygnQC91dGlscy9zYW5pdGl6YXRpb24nLCAoKSA9PiAoe1xuICBzYW5pdGl6ZVJpY2hUZXh0OiBqZXN0LmZuKCh0ZXh0KSA9PiB0ZXh0KSxcbn0pKTtcblxuZGVzY3JpYmUoJ0dFVCAvYXBpL2FkbWluL2hvbWUtcGFnZScsICgpID0+IHtcbiAgbGV0IG1vY2tHZXRTZXNzaW9uOiBqZXN0Lk1vY2s7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgY29uc3QgeyBjcmVhdGVTZXJ2ZXJDbGllbnQgfSA9IHJlcXVpcmUoJ0BzdXBhYmFzZS9zc3InKTtcbiAgICBtb2NrR2V0U2Vzc2lvbiA9IGplc3QuZm4oKTtcbiAgICBjcmVhdGVTZXJ2ZXJDbGllbnQubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgZ2V0U2Vzc2lvbjogbW9ja0dldFNlc3Npb24sXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJldHVybiA0MDEgd2hlbiBub3QgYXV0aGVudGljYXRlZCcsIGFzeW5jICgpID0+IHtcbiAgICBtb2NrR2V0U2Vzc2lvbi5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBkYXRhOiB7IHNlc3Npb246IG51bGwgfSxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQoKTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xuICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ1VOQVVUSE9SSVpFRCcpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJldHVybiBob21lIHBhZ2UgY29uZmlndXJhdGlvbiB3aGVuIGF1dGhlbnRpY2F0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja0dldFNlc3Npb24ubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgZGF0YTogeyBzZXNzaW9uOiB7IHVzZXI6IHsgaWQ6ICd1c2VyLTEnIH0gfSB9LFxuICAgICAgZXJyb3I6IG51bGwsXG4gICAgfSk7XG5cbiAgICAoc2V0dGluZ3NTZXJ2aWNlLmdldFNldHRpbmcgYXMgamVzdC5Nb2NrKVxuICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6ICdXZWxjb21lIHRvIE91ciBXZWRkaW5nJyB9KVxuICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6ICdKb2luIHVzIGluIENvc3RhIFJpY2EnIH0pXG4gICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogJzxwPldlIGFyZSBleGNpdGVkITwvcD4nIH0pXG4gICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogJ2h0dHBzOi8vZXhhbXBsZS5jb20vaGVyby5qcGcnIH0pO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQoKTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KGRhdGEuZGF0YS50aXRsZSkudG9CZSgnV2VsY29tZSB0byBPdXIgV2VkZGluZycpO1xuICAgIGV4cGVjdChkYXRhLmRhdGEuc3VidGl0bGUpLnRvQmUoJ0pvaW4gdXMgaW4gQ29zdGEgUmljYScpO1xuICAgIGV4cGVjdChkYXRhLmRhdGEud2VsY29tZU1lc3NhZ2UpLnRvQmUoJzxwPldlIGFyZSBleGNpdGVkITwvcD4nKTtcbiAgICBleHBlY3QoZGF0YS5kYXRhLmhlcm9JbWFnZVVybCkudG9CZSgnaHR0cHM6Ly9leGFtcGxlLmNvbS9oZXJvLmpwZycpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhbmRsZSBtaXNzaW5nIHNldHRpbmdzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja0dldFNlc3Npb24ubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgZGF0YTogeyBzZXNzaW9uOiB7IHVzZXI6IHsgaWQ6ICd1c2VyLTEnIH0gfSB9LFxuICAgICAgZXJyb3I6IG51bGwsXG4gICAgfSk7XG5cbiAgICAoc2V0dGluZ3NTZXJ2aWNlLmdldFNldHRpbmcgYXMgamVzdC5Nb2NrKVxuICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogeyBjb2RlOiAnTk9UX0ZPVU5EJywgbWVzc2FnZTogJ1NldHRpbmcgbm90IGZvdW5kJyB9IH0pXG4gICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiB7IGNvZGU6ICdOT1RfRk9VTkQnLCBtZXNzYWdlOiAnU2V0dGluZyBub3QgZm91bmQnIH0gfSlcbiAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IHsgY29kZTogJ05PVF9GT1VORCcsIG1lc3NhZ2U6ICdTZXR0aW5nIG5vdCBmb3VuZCcgfSB9KVxuICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogeyBjb2RlOiAnTk9UX0ZPVU5EJywgbWVzc2FnZTogJ1NldHRpbmcgbm90IGZvdW5kJyB9IH0pO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQoKTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KGRhdGEuZGF0YS50aXRsZSkudG9CZU51bGwoKTtcbiAgICBleHBlY3QoZGF0YS5kYXRhLnN1YnRpdGxlKS50b0JlTnVsbCgpO1xuICAgIGV4cGVjdChkYXRhLmRhdGEud2VsY29tZU1lc3NhZ2UpLnRvQmVOdWxsKCk7XG4gICAgZXhwZWN0KGRhdGEuZGF0YS5oZXJvSW1hZ2VVcmwpLnRvQmVOdWxsKCk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdQVVQgL2FwaS9hZG1pbi9ob21lLXBhZ2UnLCAoKSA9PiB7XG4gIGxldCBtb2NrR2V0U2Vzc2lvbjogamVzdC5Nb2NrO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIGNvbnN0IHsgY3JlYXRlU2VydmVyQ2xpZW50IH0gPSByZXF1aXJlKCdAc3VwYWJhc2Uvc3NyJyk7XG4gICAgbW9ja0dldFNlc3Npb24gPSBqZXN0LmZuKCk7XG4gICAgY3JlYXRlU2VydmVyQ2xpZW50Lm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBhdXRoOiB7XG4gICAgICAgIGdldFNlc3Npb246IG1vY2tHZXRTZXNzaW9uLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZXR1cm4gNDAxIHdoZW4gbm90IGF1dGhlbnRpY2F0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja0dldFNlc3Npb24ubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgZGF0YTogeyBzZXNzaW9uOiBudWxsIH0sXG4gICAgICBlcnJvcjogbnVsbCxcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9ob21lLXBhZ2UnLCB7XG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHRpdGxlOiAnVGVzdCcgfSksXG4gICAgfSk7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBVVChyZXF1ZXN0KTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xuICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ1VOQVVUSE9SSVpFRCcpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHN1Y2Nlc3NmdWxseSB1cGRhdGUgaG9tZSBwYWdlIGNvbmZpZ3VyYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja0dldFNlc3Npb24ubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgZGF0YTogeyBzZXNzaW9uOiB7IHVzZXI6IHsgaWQ6ICd1c2VyLTEnIH0gfSB9LFxuICAgICAgZXJyb3I6IG51bGwsXG4gICAgfSk7XG5cbiAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICB0aXRsZTogJ1dlbGNvbWUgdG8gT3VyIFdlZGRpbmcnLFxuICAgICAgc3VidGl0bGU6ICdKb2luIHVzIGluIENvc3RhIFJpY2EnLFxuICAgICAgd2VsY29tZU1lc3NhZ2U6ICc8cD5XZSBhcmUgZXhjaXRlZCB0byBjZWxlYnJhdGUgd2l0aCB5b3UhPC9wPicsXG4gICAgICBoZXJvSW1hZ2VVcmw6ICdodHRwczovL2V4YW1wbGUuY29tL2hlcm8uanBnJyxcbiAgICB9O1xuXG4gICAgKHNldHRpbmdzU2VydmljZS51cHNlcnRIb21lUGFnZUNvbmZpZyBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBjb25maWcsXG4gICAgfSk7XG5cbiAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vaG9tZS1wYWdlJywge1xuICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoY29uZmlnKSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUFVUKHJlcXVlc3QpO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICBleHBlY3QoZGF0YS5kYXRhLnRpdGxlKS50b0JlKGNvbmZpZy50aXRsZSk7XG4gICAgZXhwZWN0KGRhdGEuZGF0YS5zdWJ0aXRsZSkudG9CZShjb25maWcuc3VidGl0bGUpO1xuICAgIGV4cGVjdChzZXR0aW5nc1NlcnZpY2UudXBzZXJ0SG9tZVBhZ2VDb25maWcpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICB0aXRsZTogY29uZmlnLnRpdGxlLFxuICAgICAgICBzdWJ0aXRsZTogY29uZmlnLnN1YnRpdGxlLFxuICAgICAgfSlcbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJldHVybiA0MDAgZm9yIGludmFsaWQgY29uZmlndXJhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICBtb2NrR2V0U2Vzc2lvbi5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBkYXRhOiB7IHNlc3Npb246IHsgdXNlcjogeyBpZDogJ3VzZXItMScgfSB9IH0sXG4gICAgICBlcnJvcjogbnVsbCxcbiAgICB9KTtcblxuICAgIGNvbnN0IGludmFsaWRDb25maWcgPSB7XG4gICAgICB0aXRsZTogJycsIC8vIEVtcHR5IHN0cmluZyBzaG91bGQgZmFpbCB2YWxpZGF0aW9uXG4gICAgICBoZXJvSW1hZ2VVcmw6ICdub3QtYS12YWxpZC11cmwnLFxuICAgIH07XG5cbiAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vaG9tZS1wYWdlJywge1xuICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoaW52YWxpZENvbmZpZyksXG4gICAgfSk7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBVVChyZXF1ZXN0KTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZXR1cm4gNTAwIHdoZW4gc2VydmljZSBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICBtb2NrR2V0U2Vzc2lvbi5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBkYXRhOiB7IHNlc3Npb246IHsgdXNlcjogeyBpZDogJ3VzZXItMScgfSB9IH0sXG4gICAgICBlcnJvcjogbnVsbCxcbiAgICB9KTtcblxuICAgIChzZXR0aW5nc1NlcnZpY2UudXBzZXJ0SG9tZVBhZ2VDb25maWcgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6ICdEQVRBQkFTRV9FUlJPUicsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gdXBkYXRlIHNldHRpbmdzJyxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vaG9tZS1wYWdlJywge1xuICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB0aXRsZTogJ1Rlc3QnIH0pLFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQVVQocmVxdWVzdCk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdEQVRBQkFTRV9FUlJPUicpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHNhbml0aXplIHJpY2ggdGV4dCBjb250ZW50JywgYXN5bmMgKCkgPT4ge1xuICAgIG1vY2tHZXRTZXNzaW9uLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIGRhdGE6IHsgc2Vzc2lvbjogeyB1c2VyOiB7IGlkOiAndXNlci0xJyB9IH0gfSxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgIH0pO1xuXG4gICAgY29uc3QgeyBzYW5pdGl6ZVJpY2hUZXh0IH0gPSByZXF1aXJlKCdAL3V0aWxzL3Nhbml0aXphdGlvbicpO1xuICAgIHNhbml0aXplUmljaFRleHQubW9ja1JldHVyblZhbHVlKCc8cD5TYW5pdGl6ZWQgY29udGVudDwvcD4nKTtcblxuICAgIChzZXR0aW5nc1NlcnZpY2UudXBzZXJ0SG9tZVBhZ2VDb25maWcgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YToge1xuICAgICAgICB3ZWxjb21lTWVzc2FnZTogJzxwPlNhbml0aXplZCBjb250ZW50PC9wPicsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL2hvbWUtcGFnZScsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgd2VsY29tZU1lc3NhZ2U6ICc8cD5PcmlnaW5hbCBjb250ZW50PC9wPicsXG4gICAgICB9KSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUFVUKHJlcXVlc3QpO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgZXhwZWN0KHNhbml0aXplUmljaFRleHQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCc8cD5PcmlnaW5hbCBjb250ZW50PC9wPicpO1xuICAgIGV4cGVjdChzZXR0aW5nc1NlcnZpY2UudXBzZXJ0SG9tZVBhZ2VDb25maWcpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICB3ZWxjb21lTWVzc2FnZTogJzxwPlNhbml0aXplZCBjb250ZW50PC9wPicsXG4gICAgICB9KVxuICAgICk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGFuZGxlIHBhcnRpYWwgdXBkYXRlcycsIGFzeW5jICgpID0+IHtcbiAgICBtb2NrR2V0U2Vzc2lvbi5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBkYXRhOiB7IHNlc3Npb246IHsgdXNlcjogeyBpZDogJ3VzZXItMScgfSB9IH0sXG4gICAgICBlcnJvcjogbnVsbCxcbiAgICB9KTtcblxuICAgIGNvbnN0IHBhcnRpYWxDb25maWcgPSB7XG4gICAgICB0aXRsZTogJ05ldyBUaXRsZSBPbmx5JyxcbiAgICB9O1xuXG4gICAgKHNldHRpbmdzU2VydmljZS51cHNlcnRIb21lUGFnZUNvbmZpZyBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBwYXJ0aWFsQ29uZmlnLFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL2hvbWUtcGFnZScsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBhcnRpYWxDb25maWcpLFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQVVQocmVxdWVzdCk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChkYXRhLmRhdGEudGl0bGUpLnRvQmUoJ05ldyBUaXRsZSBPbmx5Jyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGFuZGxlIHVuZXhwZWN0ZWQgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja0dldFNlc3Npb24ubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgZGF0YTogeyBzZXNzaW9uOiB7IHVzZXI6IHsgaWQ6ICd1c2VyLTEnIH0gfSB9LFxuICAgICAgZXJyb3I6IG51bGwsXG4gICAgfSk7XG5cbiAgICAoc2V0dGluZ3NTZXJ2aWNlLnVwc2VydEhvbWVQYWdlQ29uZmlnIGFzIGplc3QuTW9jaykubW9ja1JlamVjdGVkVmFsdWUoXG4gICAgICBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgZXJyb3InKVxuICAgICk7XG5cbiAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vaG9tZS1wYWdlJywge1xuICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB0aXRsZTogJ1Rlc3QnIH0pLFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQVVQocmVxdWVzdCk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdJTlRFUk5BTF9FUlJPUicpO1xuICAgIGV4cGVjdChkYXRhLmVycm9yLm1lc3NhZ2UpLnRvQmUoJ0FuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQnKTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsImNvb2tpZXMiLCJmbiIsImdldEFsbCIsInNldCIsImNyZWF0ZVNlcnZlckNsaWVudCIsImF1dGgiLCJnZXRTZXNzaW9uIiwic2FuaXRpemVSaWNoVGV4dCIsInRleHQiLCJkZXNjcmliZSIsIm1vY2tHZXRTZXNzaW9uIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJyZXF1aXJlIiwibW9ja1JldHVyblZhbHVlIiwiaXQiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImRhdGEiLCJzZXNzaW9uIiwiZXJyb3IiLCJyZXNwb25zZSIsIkdFVCIsImpzb24iLCJleHBlY3QiLCJzdGF0dXMiLCJ0b0JlIiwic3VjY2VzcyIsImNvZGUiLCJ1c2VyIiwiaWQiLCJzZXR0aW5nc1NlcnZpY2UiLCJnZXRTZXR0aW5nIiwibW9ja1Jlc29sdmVkVmFsdWVPbmNlIiwidGl0bGUiLCJzdWJ0aXRsZSIsIndlbGNvbWVNZXNzYWdlIiwiaGVyb0ltYWdlVXJsIiwibWVzc2FnZSIsInRvQmVOdWxsIiwicmVxdWVzdCIsIlJlcXVlc3QiLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJQVVQiLCJjb25maWciLCJ1cHNlcnRIb21lUGFnZUNvbmZpZyIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwib2JqZWN0Q29udGFpbmluZyIsImludmFsaWRDb25maWci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