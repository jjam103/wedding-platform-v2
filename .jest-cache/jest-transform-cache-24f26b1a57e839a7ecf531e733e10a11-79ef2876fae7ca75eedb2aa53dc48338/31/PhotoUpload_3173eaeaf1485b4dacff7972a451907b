3269c52cffaea0e4b32af9404f45990a
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "PhotoUpload", {
    enumerable: true,
    get: function() {
        return PhotoUpload;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
function PhotoUpload({ guest }) {
    const [photos, setPhotos] = (0, _react.useState)([]);
    const [uploading, setUploading] = (0, _react.useState)(false);
    const [uploadProgress, setUploadProgress] = (0, _react.useState)(0);
    const [error, setError] = (0, _react.useState)(null);
    const [success, setSuccess] = (0, _react.useState)(null);
    const handleFileSelect = (e)=>{
        const files = Array.from(e.target.files || []);
        // Validate file types
        const validFiles = files.filter((file)=>{
            if (!file.type.startsWith('image/')) {
                setError(`${file.name} is not an image file`);
                return false;
            }
            if (file.size > 10 * 1024 * 1024) {
                setError(`${file.name} is too large (max 10MB)`);
                return false;
            }
            return true;
        });
        // Create preview URLs
        const newPhotos = validFiles.map((file)=>({
                file,
                preview: URL.createObjectURL(file),
                caption: '',
                altText: ''
            }));
        setPhotos([
            ...photos,
            ...newPhotos
        ]);
        setError(null);
    };
    const removePhoto = (index)=>{
        const newPhotos = [
            ...photos
        ];
        URL.revokeObjectURL(newPhotos[index].preview);
        newPhotos.splice(index, 1);
        setPhotos(newPhotos);
    };
    const updatePhotoCaption = (index, caption)=>{
        const newPhotos = [
            ...photos
        ];
        newPhotos[index].caption = caption;
        setPhotos(newPhotos);
    };
    const updatePhotoAltText = (index, altText)=>{
        const newPhotos = [
            ...photos
        ];
        newPhotos[index].altText = altText;
        setPhotos(newPhotos);
    };
    const handleUpload = async ()=>{
        if (photos.length === 0) {
            setError('Please select at least one photo to upload');
            return;
        }
        try {
            setUploading(true);
            setError(null);
            setSuccess(null);
            setUploadProgress(0);
            const totalPhotos = photos.length;
            let uploadedCount = 0;
            for (const photo of photos){
                const formData = new FormData();
                formData.append('file', photo.file);
                formData.append('caption', photo.caption);
                formData.append('alt_text', photo.altText);
                formData.append('page_type', 'memory');
                const response = await fetch('/api/guest/photos/upload', {
                    method: 'POST',
                    body: formData
                });
                const result = await response.json();
                if (!result.success) {
                    throw new Error(result.error?.message || 'Failed to upload photo');
                }
                uploadedCount++;
                setUploadProgress(Math.round(uploadedCount / totalPhotos * 100));
            }
            setSuccess(`Successfully uploaded ${uploadedCount} photo${uploadedCount > 1 ? 's' : ''}!`);
            // Clear photos after successful upload
            photos.forEach((photo)=>URL.revokeObjectURL(photo.preview));
            setPhotos([]);
            // Clear success message after 5 seconds
            setTimeout(()=>setSuccess(null), 5000);
        } catch (err) {
            setError(err instanceof Error ? err.message : 'An error occurred during upload');
        } finally{
            setUploading(false);
            setUploadProgress(0);
        }
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: "min-h-screen bg-gradient-to-br from-jungle-50 via-ocean-50 to-sunset-50",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsx)("header", {
                className: "bg-white shadow-sm border-b border-sage-200",
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",
                    children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center justify-between",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("h1", {
                                        className: "text-3xl font-bold text-jungle-700",
                                        children: "Upload Photos"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                        className: "text-sage-600 mt-1",
                                        children: "Share your wedding memories"
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("a", {
                                href: "/guest/dashboard",
                                className: "text-ocean-600 hover:text-ocean-700 font-medium",
                                children: "← Back to Dashboard"
                            })
                        ]
                    })
                })
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("main", {
                className: "max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",
                children: [
                    success && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "bg-jungle-50 border border-jungle-200 rounded-lg p-4 mb-6",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("p", {
                                className: "text-jungle-800",
                                children: [
                                    "✓ ",
                                    success
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                className: "text-sm text-jungle-700 mt-1",
                                children: "Your photos are pending moderation and will appear in the gallery once approved."
                            })
                        ]
                    }),
                    error && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "bg-volcano-50 border border-volcano-200 rounded-lg p-4 mb-6",
                        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("p", {
                            className: "text-volcano-800",
                            children: [
                                "✗ ",
                                error
                            ]
                        })
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "bg-ocean-50 border border-ocean-200 rounded-lg p-4 mb-6",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                                className: "font-semibold text-ocean-800 mb-2",
                                children: "\uD83D\uDCF8 Photo Upload Guidelines"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("ul", {
                                className: "text-sm text-ocean-700 space-y-1",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("li", {
                                        children: "• Accepted formats: JPG, PNG, GIF, WebP"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("li", {
                                        children: "• Maximum file size: 10MB per photo"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("li", {
                                        children: "• You can upload multiple photos at once"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("li", {
                                        children: "• Photos will be reviewed before appearing in the gallery"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("li", {
                                        children: "• Add captions to help tell the story of your photos"
                                    })
                                ]
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "bg-white rounded-lg shadow-md border border-sage-200 p-6 mb-6",
                        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("label", {
                            htmlFor: "photo-upload",
                            className: "block w-full cursor-pointer",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "border-2 border-dashed border-sage-300 rounded-lg p-12 text-center hover:border-jungle-400 hover:bg-jungle-50 transition-colors",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                            className: "text-6xl mb-4",
                                            children: "\uD83D\uDCF7"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("h3", {
                                            className: "text-lg font-semibold text-sage-700 mb-2",
                                            children: "Click to select photos"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                            className: "text-sm text-sage-600",
                                            children: "or drag and drop your photos here"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                            className: "text-xs text-sage-500 mt-2",
                                            children: "You can select multiple photos at once"
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                                    id: "photo-upload",
                                    type: "file",
                                    accept: "image/*",
                                    multiple: true,
                                    onChange: handleFileSelect,
                                    className: "hidden",
                                    disabled: uploading
                                })
                            ]
                        })
                    }),
                    photos.length > 0 && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "bg-white rounded-lg shadow-md border border-sage-200 p-6 mb-6",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("h2", {
                                className: "text-xl font-bold text-jungle-700 mb-4",
                                children: [
                                    "Selected Photos (",
                                    photos.length,
                                    ")"
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "space-y-4",
                                children: photos.map((photo, index)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                        className: "border border-sage-200 rounded-lg p-4 flex items-start space-x-4",
                                        children: [
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                                className: "flex-shrink-0",
                                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("img", {
                                                    src: photo.preview,
                                                    alt: "Preview",
                                                    className: "w-32 h-32 object-cover rounded-lg"
                                                })
                                            }),
                                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                className: "flex-1 space-y-3",
                                                children: [
                                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                        children: [
                                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("label", {
                                                                className: "block text-sm font-medium text-sage-700 mb-1",
                                                                children: "Caption"
                                                            }),
                                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                                                                type: "text",
                                                                value: photo.caption,
                                                                onChange: (e)=>updatePhotoCaption(index, e.target.value),
                                                                placeholder: "Add a caption for this photo...",
                                                                className: "w-full px-3 py-2 border border-sage-300 rounded-lg focus:ring-2 focus:ring-jungle-500 focus:border-jungle-500",
                                                                disabled: uploading
                                                            })
                                                        ]
                                                    }),
                                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                        children: [
                                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("label", {
                                                                className: "block text-sm font-medium text-sage-700 mb-1",
                                                                children: "Alt Text (for accessibility)"
                                                            }),
                                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                                                                type: "text",
                                                                value: photo.altText,
                                                                onChange: (e)=>updatePhotoAltText(index, e.target.value),
                                                                placeholder: "Describe what's in the photo...",
                                                                className: "w-full px-3 py-2 border border-sage-300 rounded-lg focus:ring-2 focus:ring-jungle-500 focus:border-jungle-500",
                                                                disabled: uploading
                                                            })
                                                        ]
                                                    }),
                                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                        className: "text-xs text-sage-500",
                                                        children: [
                                                            photo.file.name,
                                                            " (",
                                                            (photo.file.size / 1024 / 1024).toFixed(2),
                                                            " MB)"
                                                        ]
                                                    })
                                                ]
                                            }),
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                                onClick: ()=>removePhoto(index),
                                                disabled: uploading,
                                                className: "flex-shrink-0 text-volcano-600 hover:text-volcano-700 disabled:text-sage-400",
                                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("svg", {
                                                    className: "w-6 h-6",
                                                    fill: "none",
                                                    stroke: "currentColor",
                                                    viewBox: "0 0 24 24",
                                                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)("path", {
                                                        strokeLinecap: "round",
                                                        strokeLinejoin: "round",
                                                        strokeWidth: 2,
                                                        d: "M6 18L18 6M6 6l12 12"
                                                    })
                                                })
                                            })
                                        ]
                                    }, index))
                            }),
                            uploading && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "mt-6",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                        className: "flex items-center justify-between mb-2",
                                        children: [
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                className: "text-sm font-medium text-sage-700",
                                                children: "Uploading..."
                                            }),
                                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                                className: "text-sm font-medium text-jungle-700",
                                                children: [
                                                    uploadProgress,
                                                    "%"
                                                ]
                                            })
                                        ]
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                        className: "w-full bg-sage-200 rounded-full h-2",
                                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                            className: "bg-jungle-600 h-2 rounded-full transition-all duration-300",
                                            style: {
                                                width: `${uploadProgress}%`
                                            }
                                        })
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "mt-6 flex items-center space-x-3",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                        onClick: handleUpload,
                                        disabled: uploading || photos.length === 0,
                                        className: "bg-jungle-600 hover:bg-jungle-700 disabled:bg-sage-400 text-white font-medium py-3 px-8 rounded-lg transition-colors",
                                        children: uploading ? 'Uploading...' : `Upload ${photos.length} Photo${photos.length > 1 ? 's' : ''}`
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                        onClick: ()=>{
                                            photos.forEach((photo)=>URL.revokeObjectURL(photo.preview));
                                            setPhotos([]);
                                        },
                                        disabled: uploading,
                                        className: "bg-sage-200 hover:bg-sage-300 disabled:bg-sage-100 text-sage-700 font-medium py-3 px-8 rounded-lg transition-colors",
                                        children: "Clear All"
                                    })
                                ]
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "bg-sage-50 border border-sage-200 rounded-lg p-4",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("h3", {
                                className: "font-semibold text-sage-800 mb-2",
                                children: "What happens after upload?"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                className: "text-sm text-sage-700",
                                children: "Your photos will be reviewed by the wedding hosts to ensure they're appropriate for the gallery. Once approved, they'll appear in the wedding photo gallery for all guests to enjoy. This usually takes 1-2 days."
                            })
                        ]
                    })
                ]
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9ndWVzdC9QaG90b1VwbG9hZC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB0eXBlIHsgR3Vlc3QgfSBmcm9tICdAL3R5cGVzJztcblxuaW50ZXJmYWNlIFBob3RvVXBsb2FkUHJvcHMge1xuICBndWVzdDogR3Vlc3Q7XG59XG5cbmludGVyZmFjZSBQaG90b0ZpbGUge1xuICBmaWxlOiBGaWxlO1xuICBwcmV2aWV3OiBzdHJpbmc7XG4gIGNhcHRpb246IHN0cmluZztcbiAgYWx0VGV4dDogc3RyaW5nO1xufVxuXG4vKipcbiAqIFBob3RvIFVwbG9hZCBDb21wb25lbnRcbiAqIFxuICogQWxsb3dzIGd1ZXN0cyB0byB1cGxvYWQgd2VkZGluZyBwaG90b3M6XG4gKiAtIFNpbmdsZSBhbmQgYmF0Y2ggcGhvdG8gdXBsb2FkXG4gKiAtIENhcHRpb24gYW5kIGFsdCB0ZXh0IGlucHV0XG4gKiAtIFByZXZpZXcgYmVmb3JlIHVwbG9hZFxuICogLSBVcGxvYWQgcHJvZ3Jlc3MgdHJhY2tpbmdcbiAqIFxuICogUmVxdWlyZW1lbnRzOiAxMy45LCAxMS4xLCAxMS4xMVxuICovXG5leHBvcnQgZnVuY3Rpb24gUGhvdG9VcGxvYWQoeyBndWVzdCB9OiBQaG90b1VwbG9hZFByb3BzKSB7XG4gIGNvbnN0IFtwaG90b3MsIHNldFBob3Rvc10gPSB1c2VTdGF0ZTxQaG90b0ZpbGVbXT4oW10pO1xuICBjb25zdCBbdXBsb2FkaW5nLCBzZXRVcGxvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdXBsb2FkUHJvZ3Jlc3MsIHNldFVwbG9hZFByb2dyZXNzXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc3VjY2Vzcywgc2V0U3VjY2Vzc10gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICBjb25zdCBoYW5kbGVGaWxlU2VsZWN0ID0gKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgY29uc3QgZmlsZXMgPSBBcnJheS5mcm9tKGUudGFyZ2V0LmZpbGVzIHx8IFtdKTtcbiAgICBcbiAgICAvLyBWYWxpZGF0ZSBmaWxlIHR5cGVzXG4gICAgY29uc3QgdmFsaWRGaWxlcyA9IGZpbGVzLmZpbHRlcihmaWxlID0+IHtcbiAgICAgIGlmICghZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7XG4gICAgICAgIHNldEVycm9yKGAke2ZpbGUubmFtZX0gaXMgbm90IGFuIGltYWdlIGZpbGVgKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKGZpbGUuc2l6ZSA+IDEwICogMTAyNCAqIDEwMjQpIHsgLy8gMTBNQiBsaW1pdFxuICAgICAgICBzZXRFcnJvcihgJHtmaWxlLm5hbWV9IGlzIHRvbyBsYXJnZSAobWF4IDEwTUIpYCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuXG4gICAgLy8gQ3JlYXRlIHByZXZpZXcgVVJMc1xuICAgIGNvbnN0IG5ld1Bob3RvcyA9IHZhbGlkRmlsZXMubWFwKGZpbGUgPT4gKHtcbiAgICAgIGZpbGUsXG4gICAgICBwcmV2aWV3OiBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpLFxuICAgICAgY2FwdGlvbjogJycsXG4gICAgICBhbHRUZXh0OiAnJyxcbiAgICB9KSk7XG5cbiAgICBzZXRQaG90b3MoWy4uLnBob3RvcywgLi4ubmV3UGhvdG9zXSk7XG4gICAgc2V0RXJyb3IobnVsbCk7XG4gIH07XG5cbiAgY29uc3QgcmVtb3ZlUGhvdG8gPSAoaW5kZXg6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IG5ld1Bob3RvcyA9IFsuLi5waG90b3NdO1xuICAgIFVSTC5yZXZva2VPYmplY3RVUkwobmV3UGhvdG9zW2luZGV4XS5wcmV2aWV3KTtcbiAgICBuZXdQaG90b3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICBzZXRQaG90b3MobmV3UGhvdG9zKTtcbiAgfTtcblxuICBjb25zdCB1cGRhdGVQaG90b0NhcHRpb24gPSAoaW5kZXg6IG51bWJlciwgY2FwdGlvbjogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgbmV3UGhvdG9zID0gWy4uLnBob3Rvc107XG4gICAgbmV3UGhvdG9zW2luZGV4XS5jYXB0aW9uID0gY2FwdGlvbjtcbiAgICBzZXRQaG90b3MobmV3UGhvdG9zKTtcbiAgfTtcblxuICBjb25zdCB1cGRhdGVQaG90b0FsdFRleHQgPSAoaW5kZXg6IG51bWJlciwgYWx0VGV4dDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgbmV3UGhvdG9zID0gWy4uLnBob3Rvc107XG4gICAgbmV3UGhvdG9zW2luZGV4XS5hbHRUZXh0ID0gYWx0VGV4dDtcbiAgICBzZXRQaG90b3MobmV3UGhvdG9zKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVVcGxvYWQgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKHBob3Rvcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHNldEVycm9yKCdQbGVhc2Ugc2VsZWN0IGF0IGxlYXN0IG9uZSBwaG90byB0byB1cGxvYWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgc2V0VXBsb2FkaW5nKHRydWUpO1xuICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgICBzZXRTdWNjZXNzKG51bGwpO1xuICAgICAgc2V0VXBsb2FkUHJvZ3Jlc3MoMCk7XG5cbiAgICAgIGNvbnN0IHRvdGFsUGhvdG9zID0gcGhvdG9zLmxlbmd0aDtcbiAgICAgIGxldCB1cGxvYWRlZENvdW50ID0gMDtcblxuICAgICAgZm9yIChjb25zdCBwaG90byBvZiBwaG90b3MpIHtcbiAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgcGhvdG8uZmlsZSk7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnY2FwdGlvbicsIHBob3RvLmNhcHRpb24pO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2FsdF90ZXh0JywgcGhvdG8uYWx0VGV4dCk7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgncGFnZV90eXBlJywgJ21lbW9yeScpO1xuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvZ3Vlc3QvcGhvdG9zL3VwbG9hZCcsIHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBib2R5OiBmb3JtRGF0YSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzdWx0LmVycm9yPy5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gdXBsb2FkIHBob3RvJyk7XG4gICAgICAgIH1cblxuICAgICAgICB1cGxvYWRlZENvdW50Kys7XG4gICAgICAgIHNldFVwbG9hZFByb2dyZXNzKE1hdGgucm91bmQoKHVwbG9hZGVkQ291bnQgLyB0b3RhbFBob3RvcykgKiAxMDApKTtcbiAgICAgIH1cblxuICAgICAgc2V0U3VjY2VzcyhgU3VjY2Vzc2Z1bGx5IHVwbG9hZGVkICR7dXBsb2FkZWRDb3VudH0gcGhvdG8ke3VwbG9hZGVkQ291bnQgPiAxID8gJ3MnIDogJyd9IWApO1xuICAgICAgXG4gICAgICAvLyBDbGVhciBwaG90b3MgYWZ0ZXIgc3VjY2Vzc2Z1bCB1cGxvYWRcbiAgICAgIHBob3Rvcy5mb3JFYWNoKHBob3RvID0+IFVSTC5yZXZva2VPYmplY3RVUkwocGhvdG8ucHJldmlldykpO1xuICAgICAgc2V0UGhvdG9zKFtdKTtcbiAgICAgIFxuICAgICAgLy8gQ2xlYXIgc3VjY2VzcyBtZXNzYWdlIGFmdGVyIDUgc2Vjb25kc1xuICAgICAgc2V0VGltZW91dCgoKSA9PiBzZXRTdWNjZXNzKG51bGwpLCA1MDAwKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHNldEVycm9yKGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnQW4gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIHVwbG9hZCcpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRVcGxvYWRpbmcoZmFsc2UpO1xuICAgICAgc2V0VXBsb2FkUHJvZ3Jlc3MoMCk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gYmctZ3JhZGllbnQtdG8tYnIgZnJvbS1qdW5nbGUtNTAgdmlhLW9jZWFuLTUwIHRvLXN1bnNldC01MFwiPlxuICAgICAgey8qIEhlYWRlciAqL31cbiAgICAgIDxoZWFkZXIgY2xhc3NOYW1lPVwiYmctd2hpdGUgc2hhZG93LXNtIGJvcmRlci1iIGJvcmRlci1zYWdlLTIwMFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1heC13LTd4bCBteC1hdXRvIHB4LTQgc206cHgtNiBsZzpweC04IHB5LTZcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRleHQtM3hsIGZvbnQtYm9sZCB0ZXh0LWp1bmdsZS03MDBcIj5VcGxvYWQgUGhvdG9zPC9oMT5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zYWdlLTYwMCBtdC0xXCI+U2hhcmUgeW91ciB3ZWRkaW5nIG1lbW9yaWVzPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8YVxuICAgICAgICAgICAgICBocmVmPVwiL2d1ZXN0L2Rhc2hib2FyZFwiXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtb2NlYW4tNjAwIGhvdmVyOnRleHQtb2NlYW4tNzAwIGZvbnQtbWVkaXVtXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAg4oaQIEJhY2sgdG8gRGFzaGJvYXJkXG4gICAgICAgICAgICA8L2E+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9oZWFkZXI+XG5cbiAgICAgIDxtYWluIGNsYXNzTmFtZT1cIm1heC13LTV4bCBteC1hdXRvIHB4LTQgc206cHgtNiBsZzpweC04IHB5LThcIj5cbiAgICAgICAgey8qIFN1Y2Nlc3MgTWVzc2FnZSAqL31cbiAgICAgICAge3N1Y2Nlc3MgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctanVuZ2xlLTUwIGJvcmRlciBib3JkZXItanVuZ2xlLTIwMCByb3VuZGVkLWxnIHAtNCBtYi02XCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWp1bmdsZS04MDBcIj7inJMge3N1Y2Nlc3N9PC9wPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWp1bmdsZS03MDAgbXQtMVwiPlxuICAgICAgICAgICAgICBZb3VyIHBob3RvcyBhcmUgcGVuZGluZyBtb2RlcmF0aW9uIGFuZCB3aWxsIGFwcGVhciBpbiB0aGUgZ2FsbGVyeSBvbmNlIGFwcHJvdmVkLlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuXG4gICAgICAgIHsvKiBFcnJvciBNZXNzYWdlICovfVxuICAgICAgICB7ZXJyb3IgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctdm9sY2Fuby01MCBib3JkZXIgYm9yZGVyLXZvbGNhbm8tMjAwIHJvdW5kZWQtbGcgcC00IG1iLTZcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtdm9sY2Fuby04MDBcIj7inJcge2Vycm9yfTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cblxuICAgICAgICB7LyogVXBsb2FkIEluc3RydWN0aW9ucyAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1vY2Vhbi01MCBib3JkZXIgYm9yZGVyLW9jZWFuLTIwMCByb3VuZGVkLWxnIHAtNCBtYi02XCI+XG4gICAgICAgICAgPGgyIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1vY2Vhbi04MDAgbWItMlwiPvCfk7ggUGhvdG8gVXBsb2FkIEd1aWRlbGluZXM8L2gyPlxuICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtb2NlYW4tNzAwIHNwYWNlLXktMVwiPlxuICAgICAgICAgICAgPGxpPuKAoiBBY2NlcHRlZCBmb3JtYXRzOiBKUEcsIFBORywgR0lGLCBXZWJQPC9saT5cbiAgICAgICAgICAgIDxsaT7igKIgTWF4aW11bSBmaWxlIHNpemU6IDEwTUIgcGVyIHBob3RvPC9saT5cbiAgICAgICAgICAgIDxsaT7igKIgWW91IGNhbiB1cGxvYWQgbXVsdGlwbGUgcGhvdG9zIGF0IG9uY2U8L2xpPlxuICAgICAgICAgICAgPGxpPuKAoiBQaG90b3Mgd2lsbCBiZSByZXZpZXdlZCBiZWZvcmUgYXBwZWFyaW5nIGluIHRoZSBnYWxsZXJ5PC9saT5cbiAgICAgICAgICAgIDxsaT7igKIgQWRkIGNhcHRpb25zIHRvIGhlbHAgdGVsbCB0aGUgc3Rvcnkgb2YgeW91ciBwaG90b3M8L2xpPlxuICAgICAgICAgIDwvdWw+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBGaWxlIFVwbG9hZCBBcmVhICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93LW1kIGJvcmRlciBib3JkZXItc2FnZS0yMDAgcC02IG1iLTZcIj5cbiAgICAgICAgICA8bGFiZWxcbiAgICAgICAgICAgIGh0bWxGb3I9XCJwaG90by11cGxvYWRcIlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmxvY2sgdy1mdWxsIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvcmRlci0yIGJvcmRlci1kYXNoZWQgYm9yZGVyLXNhZ2UtMzAwIHJvdW5kZWQtbGcgcC0xMiB0ZXh0LWNlbnRlciBob3Zlcjpib3JkZXItanVuZ2xlLTQwMCBob3ZlcjpiZy1qdW5nbGUtNTAgdHJhbnNpdGlvbi1jb2xvcnNcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LTZ4bCBtYi00XCI+8J+TtzwvZGl2PlxuICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtc2FnZS03MDAgbWItMlwiPlxuICAgICAgICAgICAgICAgIENsaWNrIHRvIHNlbGVjdCBwaG90b3NcbiAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXNhZ2UtNjAwXCI+XG4gICAgICAgICAgICAgICAgb3IgZHJhZyBhbmQgZHJvcCB5b3VyIHBob3RvcyBoZXJlXG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXNhZ2UtNTAwIG10LTJcIj5cbiAgICAgICAgICAgICAgICBZb3UgY2FuIHNlbGVjdCBtdWx0aXBsZSBwaG90b3MgYXQgb25jZVxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICBpZD1cInBob3RvLXVwbG9hZFwiXG4gICAgICAgICAgICAgIHR5cGU9XCJmaWxlXCJcbiAgICAgICAgICAgICAgYWNjZXB0PVwiaW1hZ2UvKlwiXG4gICAgICAgICAgICAgIG11bHRpcGxlXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVGaWxlU2VsZWN0fVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoaWRkZW5cIlxuICAgICAgICAgICAgICBkaXNhYmxlZD17dXBsb2FkaW5nfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogUGhvdG8gUHJldmlld3MgKi99XG4gICAgICAgIHtwaG90b3MubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLWxnIHNoYWRvdy1tZCBib3JkZXIgYm9yZGVyLXNhZ2UtMjAwIHAtNiBtYi02XCI+XG4gICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LWJvbGQgdGV4dC1qdW5nbGUtNzAwIG1iLTRcIj5cbiAgICAgICAgICAgICAgU2VsZWN0ZWQgUGhvdG9zICh7cGhvdG9zLmxlbmd0aH0pXG4gICAgICAgICAgICA8L2gyPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICAgICAge3Bob3Rvcy5tYXAoKHBob3RvLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJib3JkZXIgYm9yZGVyLXNhZ2UtMjAwIHJvdW5kZWQtbGcgcC00IGZsZXggaXRlbXMtc3RhcnQgc3BhY2UteC00XCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7LyogUHJldmlldyBJbWFnZSAqL31cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC1zaHJpbmstMFwiPlxuICAgICAgICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgICAgICAgc3JjPXtwaG90by5wcmV2aWV3fVxuICAgICAgICAgICAgICAgICAgICAgIGFsdD1cIlByZXZpZXdcIlxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMzIgaC0zMiBvYmplY3QtY292ZXIgcm91bmRlZC1sZ1wiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgey8qIFBob3RvIERldGFpbHMgKi99XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBzcGFjZS15LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LXNhZ2UtNzAwIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIENhcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3Bob3RvLmNhcHRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHVwZGF0ZVBob3RvQ2FwdGlvbihpbmRleCwgZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJBZGQgYSBjYXB0aW9uIGZvciB0aGlzIHBob3RvLi4uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC0zIHB5LTIgYm9yZGVyIGJvcmRlci1zYWdlLTMwMCByb3VuZGVkLWxnIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWp1bmdsZS01MDAgZm9jdXM6Ym9yZGVyLWp1bmdsZS01MDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3VwbG9hZGluZ31cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LXNhZ2UtNzAwIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIEFsdCBUZXh0IChmb3IgYWNjZXNzaWJpbGl0eSlcbiAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3Bob3RvLmFsdFRleHR9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHVwZGF0ZVBob3RvQWx0VGV4dChpbmRleCwgZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJEZXNjcmliZSB3aGF0J3MgaW4gdGhlIHBob3RvLi4uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC0zIHB5LTIgYm9yZGVyIGJvcmRlci1zYWdlLTMwMCByb3VuZGVkLWxnIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWp1bmdsZS01MDAgZm9jdXM6Ym9yZGVyLWp1bmdsZS01MDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3VwbG9hZGluZ31cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtc2FnZS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7cGhvdG8uZmlsZS5uYW1lfSAoeyhwaG90by5maWxlLnNpemUgLyAxMDI0IC8gMTAyNCkudG9GaXhlZCgyKX0gTUIpXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgIHsvKiBSZW1vdmUgQnV0dG9uICovfVxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiByZW1vdmVQaG90byhpbmRleCl9XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXt1cGxvYWRpbmd9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgtc2hyaW5rLTAgdGV4dC12b2xjYW5vLTYwMCBob3Zlcjp0ZXh0LXZvbGNhbm8tNzAwIGRpc2FibGVkOnRleHQtc2FnZS00MDBcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctNiBoLTZcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNNiAxOEwxOCA2TTYgNmwxMiAxMlwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIHsvKiBVcGxvYWQgUHJvZ3Jlc3MgKi99XG4gICAgICAgICAgICB7dXBsb2FkaW5nICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC02XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItMlwiPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LXNhZ2UtNzAwXCI+VXBsb2FkaW5nLi4uPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWp1bmdsZS03MDBcIj57dXBsb2FkUHJvZ3Jlc3N9JTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBiZy1zYWdlLTIwMCByb3VuZGVkLWZ1bGwgaC0yXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWp1bmdsZS02MDAgaC0yIHJvdW5kZWQtZnVsbCB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDBcIlxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYCR7dXBsb2FkUHJvZ3Jlc3N9JWAgfX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgey8qIFVwbG9hZCBCdXR0b24gKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTYgZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0zXCI+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVVcGxvYWR9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3VwbG9hZGluZyB8fCBwaG90b3MubGVuZ3RoID09PSAwfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWp1bmdsZS02MDAgaG92ZXI6YmctanVuZ2xlLTcwMCBkaXNhYmxlZDpiZy1zYWdlLTQwMCB0ZXh0LXdoaXRlIGZvbnQtbWVkaXVtIHB5LTMgcHgtOCByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHt1cGxvYWRpbmcgPyAnVXBsb2FkaW5nLi4uJyA6IGBVcGxvYWQgJHtwaG90b3MubGVuZ3RofSBQaG90byR7cGhvdG9zLmxlbmd0aCA+IDEgPyAncycgOiAnJ31gfVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHBob3Rvcy5mb3JFYWNoKHBob3RvID0+IFVSTC5yZXZva2VPYmplY3RVUkwocGhvdG8ucHJldmlldykpO1xuICAgICAgICAgICAgICAgICAgc2V0UGhvdG9zKFtdKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXt1cGxvYWRpbmd9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctc2FnZS0yMDAgaG92ZXI6Ymctc2FnZS0zMDAgZGlzYWJsZWQ6Ymctc2FnZS0xMDAgdGV4dC1zYWdlLTcwMCBmb250LW1lZGl1bSBweS0zIHB4LTggcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBDbGVhciBBbGxcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cblxuICAgICAgICB7LyogSGVscCBUZXh0ICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXNhZ2UtNTAgYm9yZGVyIGJvcmRlci1zYWdlLTIwMCByb3VuZGVkLWxnIHAtNFwiPlxuICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtc2FnZS04MDAgbWItMlwiPldoYXQgaGFwcGVucyBhZnRlciB1cGxvYWQ/PC9oMz5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtc2FnZS03MDBcIj5cbiAgICAgICAgICAgIFlvdXIgcGhvdG9zIHdpbGwgYmUgcmV2aWV3ZWQgYnkgdGhlIHdlZGRpbmcgaG9zdHMgdG8gZW5zdXJlIHRoZXkncmUgYXBwcm9wcmlhdGUgZm9yXG4gICAgICAgICAgICB0aGUgZ2FsbGVyeS4gT25jZSBhcHByb3ZlZCwgdGhleSdsbCBhcHBlYXIgaW4gdGhlIHdlZGRpbmcgcGhvdG8gZ2FsbGVyeSBmb3IgYWxsXG4gICAgICAgICAgICBndWVzdHMgdG8gZW5qb3kuIFRoaXMgdXN1YWxseSB0YWtlcyAxLTIgZGF5cy5cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9tYWluPlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbIlBob3RvVXBsb2FkIiwiZ3Vlc3QiLCJwaG90b3MiLCJzZXRQaG90b3MiLCJ1c2VTdGF0ZSIsInVwbG9hZGluZyIsInNldFVwbG9hZGluZyIsInVwbG9hZFByb2dyZXNzIiwic2V0VXBsb2FkUHJvZ3Jlc3MiLCJlcnJvciIsInNldEVycm9yIiwic3VjY2VzcyIsInNldFN1Y2Nlc3MiLCJoYW5kbGVGaWxlU2VsZWN0IiwiZSIsImZpbGVzIiwiQXJyYXkiLCJmcm9tIiwidGFyZ2V0IiwidmFsaWRGaWxlcyIsImZpbHRlciIsImZpbGUiLCJ0eXBlIiwic3RhcnRzV2l0aCIsIm5hbWUiLCJzaXplIiwibmV3UGhvdG9zIiwibWFwIiwicHJldmlldyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsImNhcHRpb24iLCJhbHRUZXh0IiwicmVtb3ZlUGhvdG8iLCJpbmRleCIsInJldm9rZU9iamVjdFVSTCIsInNwbGljZSIsInVwZGF0ZVBob3RvQ2FwdGlvbiIsInVwZGF0ZVBob3RvQWx0VGV4dCIsImhhbmRsZVVwbG9hZCIsImxlbmd0aCIsInRvdGFsUGhvdG9zIiwidXBsb2FkZWRDb3VudCIsInBob3RvIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5IiwicmVzdWx0IiwianNvbiIsIkVycm9yIiwibWVzc2FnZSIsIk1hdGgiLCJyb3VuZCIsImZvckVhY2giLCJzZXRUaW1lb3V0IiwiZXJyIiwiZGl2IiwiY2xhc3NOYW1lIiwiaGVhZGVyIiwiaDEiLCJwIiwiYSIsImhyZWYiLCJtYWluIiwiaDIiLCJ1bCIsImxpIiwibGFiZWwiLCJodG1sRm9yIiwiaDMiLCJpbnB1dCIsImlkIiwiYWNjZXB0IiwibXVsdGlwbGUiLCJvbkNoYW5nZSIsImRpc2FibGVkIiwiaW1nIiwic3JjIiwiYWx0IiwidmFsdWUiLCJwbGFjZWhvbGRlciIsInRvRml4ZWQiLCJidXR0b24iLCJvbkNsaWNrIiwic3ZnIiwiZmlsbCIsInN0cm9rZSIsInZpZXdCb3giLCJwYXRoIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJkIiwic3BhbiIsInN0eWxlIiwid2lkdGgiXSwibWFwcGluZ3MiOiJBQUFBOzs7OzsrQkEyQmdCQTs7O2VBQUFBOzs7O3VCQXpCUztBQXlCbEIsU0FBU0EsWUFBWSxFQUFFQyxLQUFLLEVBQW9CO0lBQ3JELE1BQU0sQ0FBQ0MsUUFBUUMsVUFBVSxHQUFHQyxJQUFBQSxlQUFRLEVBQWMsRUFBRTtJQUNwRCxNQUFNLENBQUNDLFdBQVdDLGFBQWEsR0FBR0YsSUFBQUEsZUFBUSxFQUFDO0lBQzNDLE1BQU0sQ0FBQ0csZ0JBQWdCQyxrQkFBa0IsR0FBR0osSUFBQUEsZUFBUSxFQUFDO0lBQ3JELE1BQU0sQ0FBQ0ssT0FBT0MsU0FBUyxHQUFHTixJQUFBQSxlQUFRLEVBQWdCO0lBQ2xELE1BQU0sQ0FBQ08sU0FBU0MsV0FBVyxHQUFHUixJQUFBQSxlQUFRLEVBQWdCO0lBRXRELE1BQU1TLG1CQUFtQixDQUFDQztRQUN4QixNQUFNQyxRQUFRQyxNQUFNQyxJQUFJLENBQUNILEVBQUVJLE1BQU0sQ0FBQ0gsS0FBSyxJQUFJLEVBQUU7UUFFN0Msc0JBQXNCO1FBQ3RCLE1BQU1JLGFBQWFKLE1BQU1LLE1BQU0sQ0FBQ0MsQ0FBQUE7WUFDOUIsSUFBSSxDQUFDQSxLQUFLQyxJQUFJLENBQUNDLFVBQVUsQ0FBQyxXQUFXO2dCQUNuQ2IsU0FBUyxHQUFHVyxLQUFLRyxJQUFJLENBQUMscUJBQXFCLENBQUM7Z0JBQzVDLE9BQU87WUFDVDtZQUNBLElBQUlILEtBQUtJLElBQUksR0FBRyxLQUFLLE9BQU8sTUFBTTtnQkFDaENmLFNBQVMsR0FBR1csS0FBS0csSUFBSSxDQUFDLHdCQUF3QixDQUFDO2dCQUMvQyxPQUFPO1lBQ1Q7WUFDQSxPQUFPO1FBQ1Q7UUFFQSxzQkFBc0I7UUFDdEIsTUFBTUUsWUFBWVAsV0FBV1EsR0FBRyxDQUFDTixDQUFBQSxPQUFTLENBQUE7Z0JBQ3hDQTtnQkFDQU8sU0FBU0MsSUFBSUMsZUFBZSxDQUFDVDtnQkFDN0JVLFNBQVM7Z0JBQ1RDLFNBQVM7WUFDWCxDQUFBO1FBRUE3QixVQUFVO2VBQUlEO2VBQVd3QjtTQUFVO1FBQ25DaEIsU0FBUztJQUNYO0lBRUEsTUFBTXVCLGNBQWMsQ0FBQ0M7UUFDbkIsTUFBTVIsWUFBWTtlQUFJeEI7U0FBTztRQUM3QjJCLElBQUlNLGVBQWUsQ0FBQ1QsU0FBUyxDQUFDUSxNQUFNLENBQUNOLE9BQU87UUFDNUNGLFVBQVVVLE1BQU0sQ0FBQ0YsT0FBTztRQUN4Qi9CLFVBQVV1QjtJQUNaO0lBRUEsTUFBTVcscUJBQXFCLENBQUNILE9BQWVIO1FBQ3pDLE1BQU1MLFlBQVk7ZUFBSXhCO1NBQU87UUFDN0J3QixTQUFTLENBQUNRLE1BQU0sQ0FBQ0gsT0FBTyxHQUFHQTtRQUMzQjVCLFVBQVV1QjtJQUNaO0lBRUEsTUFBTVkscUJBQXFCLENBQUNKLE9BQWVGO1FBQ3pDLE1BQU1OLFlBQVk7ZUFBSXhCO1NBQU87UUFDN0J3QixTQUFTLENBQUNRLE1BQU0sQ0FBQ0YsT0FBTyxHQUFHQTtRQUMzQjdCLFVBQVV1QjtJQUNaO0lBRUEsTUFBTWEsZUFBZTtRQUNuQixJQUFJckMsT0FBT3NDLE1BQU0sS0FBSyxHQUFHO1lBQ3ZCOUIsU0FBUztZQUNUO1FBQ0Y7UUFFQSxJQUFJO1lBQ0ZKLGFBQWE7WUFDYkksU0FBUztZQUNURSxXQUFXO1lBQ1hKLGtCQUFrQjtZQUVsQixNQUFNaUMsY0FBY3ZDLE9BQU9zQyxNQUFNO1lBQ2pDLElBQUlFLGdCQUFnQjtZQUVwQixLQUFLLE1BQU1DLFNBQVN6QyxPQUFRO2dCQUMxQixNQUFNMEMsV0FBVyxJQUFJQztnQkFDckJELFNBQVNFLE1BQU0sQ0FBQyxRQUFRSCxNQUFNdEIsSUFBSTtnQkFDbEN1QixTQUFTRSxNQUFNLENBQUMsV0FBV0gsTUFBTVosT0FBTztnQkFDeENhLFNBQVNFLE1BQU0sQ0FBQyxZQUFZSCxNQUFNWCxPQUFPO2dCQUN6Q1ksU0FBU0UsTUFBTSxDQUFDLGFBQWE7Z0JBRTdCLE1BQU1DLFdBQVcsTUFBTUMsTUFBTSw0QkFBNEI7b0JBQ3ZEQyxRQUFRO29CQUNSQyxNQUFNTjtnQkFDUjtnQkFFQSxNQUFNTyxTQUFTLE1BQU1KLFNBQVNLLElBQUk7Z0JBRWxDLElBQUksQ0FBQ0QsT0FBT3hDLE9BQU8sRUFBRTtvQkFDbkIsTUFBTSxJQUFJMEMsTUFBTUYsT0FBTzFDLEtBQUssRUFBRTZDLFdBQVc7Z0JBQzNDO2dCQUVBWjtnQkFDQWxDLGtCQUFrQitDLEtBQUtDLEtBQUssQ0FBQyxBQUFDZCxnQkFBZ0JELGNBQWU7WUFDL0Q7WUFFQTdCLFdBQVcsQ0FBQyxzQkFBc0IsRUFBRThCLGNBQWMsTUFBTSxFQUFFQSxnQkFBZ0IsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDO1lBRXpGLHVDQUF1QztZQUN2Q3hDLE9BQU91RCxPQUFPLENBQUNkLENBQUFBLFFBQVNkLElBQUlNLGVBQWUsQ0FBQ1EsTUFBTWYsT0FBTztZQUN6RHpCLFVBQVUsRUFBRTtZQUVaLHdDQUF3QztZQUN4Q3VELFdBQVcsSUFBTTlDLFdBQVcsT0FBTztRQUNyQyxFQUFFLE9BQU8rQyxLQUFLO1lBQ1pqRCxTQUFTaUQsZUFBZU4sUUFBUU0sSUFBSUwsT0FBTyxHQUFHO1FBQ2hELFNBQVU7WUFDUmhELGFBQWE7WUFDYkUsa0JBQWtCO1FBQ3BCO0lBQ0Y7SUFFQSxxQkFDRSxzQkFBQ29EO1FBQUlDLFdBQVU7OzBCQUViLHFCQUFDQztnQkFBT0QsV0FBVTswQkFDaEIsY0FBQSxxQkFBQ0Q7b0JBQUlDLFdBQVU7OEJBQ2IsY0FBQSxzQkFBQ0Q7d0JBQUlDLFdBQVU7OzBDQUNiLHNCQUFDRDs7a0RBQ0MscUJBQUNHO3dDQUFHRixXQUFVO2tEQUFxQzs7a0RBQ25ELHFCQUFDRzt3Q0FBRUgsV0FBVTtrREFBcUI7Ozs7MENBRXBDLHFCQUFDSTtnQ0FDQ0MsTUFBSztnQ0FDTEwsV0FBVTswQ0FDWDs7Ozs7OzBCQU9QLHNCQUFDTTtnQkFBS04sV0FBVTs7b0JBRWJsRCx5QkFDQyxzQkFBQ2lEO3dCQUFJQyxXQUFVOzswQ0FDYixzQkFBQ0c7Z0NBQUVILFdBQVU7O29DQUFrQjtvQ0FBR2xEOzs7MENBQ2xDLHFCQUFDcUQ7Z0NBQUVILFdBQVU7MENBQStCOzs7O29CQU8vQ3BELHVCQUNDLHFCQUFDbUQ7d0JBQUlDLFdBQVU7a0NBQ2IsY0FBQSxzQkFBQ0c7NEJBQUVILFdBQVU7O2dDQUFtQjtnQ0FBR3BEOzs7O2tDQUt2QyxzQkFBQ21EO3dCQUFJQyxXQUFVOzswQ0FDYixxQkFBQ087Z0NBQUdQLFdBQVU7MENBQW9DOzswQ0FDbEQsc0JBQUNRO2dDQUFHUixXQUFVOztrREFDWixxQkFBQ1M7a0RBQUc7O2tEQUNKLHFCQUFDQTtrREFBRzs7a0RBQ0oscUJBQUNBO2tEQUFHOztrREFDSixxQkFBQ0E7a0RBQUc7O2tEQUNKLHFCQUFDQTtrREFBRzs7Ozs7O2tDQUtSLHFCQUFDVjt3QkFBSUMsV0FBVTtrQ0FDYixjQUFBLHNCQUFDVTs0QkFDQ0MsU0FBUTs0QkFDUlgsV0FBVTs7OENBRVYsc0JBQUNEO29DQUFJQyxXQUFVOztzREFDYixxQkFBQ0Q7NENBQUlDLFdBQVU7c0RBQWdCOztzREFDL0IscUJBQUNZOzRDQUFHWixXQUFVO3NEQUEyQzs7c0RBR3pELHFCQUFDRzs0Q0FBRUgsV0FBVTtzREFBd0I7O3NEQUdyQyxxQkFBQ0c7NENBQUVILFdBQVU7c0RBQTZCOzs7OzhDQUk1QyxxQkFBQ2E7b0NBQ0NDLElBQUc7b0NBQ0hyRCxNQUFLO29DQUNMc0QsUUFBTztvQ0FDUEMsUUFBUTtvQ0FDUkMsVUFBVWpFO29DQUNWZ0QsV0FBVTtvQ0FDVmtCLFVBQVUxRTs7Ozs7b0JBTWZILE9BQU9zQyxNQUFNLEdBQUcsbUJBQ2Ysc0JBQUNvQjt3QkFBSUMsV0FBVTs7MENBQ2Isc0JBQUNPO2dDQUFHUCxXQUFVOztvQ0FBeUM7b0NBQ25DM0QsT0FBT3NDLE1BQU07b0NBQUM7OzswQ0FFbEMscUJBQUNvQjtnQ0FBSUMsV0FBVTswQ0FDWjNELE9BQU95QixHQUFHLENBQUMsQ0FBQ2dCLE9BQU9ULHNCQUNsQixzQkFBQzBCO3dDQUVDQyxXQUFVOzswREFHVixxQkFBQ0Q7Z0RBQUlDLFdBQVU7MERBQ2IsY0FBQSxxQkFBQ21CO29EQUNDQyxLQUFLdEMsTUFBTWYsT0FBTztvREFDbEJzRCxLQUFJO29EQUNKckIsV0FBVTs7OzBEQUtkLHNCQUFDRDtnREFBSUMsV0FBVTs7a0VBQ2Isc0JBQUNEOzswRUFDQyxxQkFBQ1c7Z0VBQU1WLFdBQVU7MEVBQStDOzswRUFHaEUscUJBQUNhO2dFQUNDcEQsTUFBSztnRUFDTDZELE9BQU94QyxNQUFNWixPQUFPO2dFQUNwQitDLFVBQVUsQ0FBQ2hFLElBQU11QixtQkFBbUJILE9BQU9wQixFQUFFSSxNQUFNLENBQUNpRSxLQUFLO2dFQUN6REMsYUFBWTtnRUFDWnZCLFdBQVU7Z0VBQ1ZrQixVQUFVMUU7Ozs7a0VBR2Qsc0JBQUN1RDs7MEVBQ0MscUJBQUNXO2dFQUFNVixXQUFVOzBFQUErQzs7MEVBR2hFLHFCQUFDYTtnRUFDQ3BELE1BQUs7Z0VBQ0w2RCxPQUFPeEMsTUFBTVgsT0FBTztnRUFDcEI4QyxVQUFVLENBQUNoRSxJQUFNd0IsbUJBQW1CSixPQUFPcEIsRUFBRUksTUFBTSxDQUFDaUUsS0FBSztnRUFDekRDLGFBQVk7Z0VBQ1p2QixXQUFVO2dFQUNWa0IsVUFBVTFFOzs7O2tFQUdkLHNCQUFDdUQ7d0RBQUlDLFdBQVU7OzREQUNabEIsTUFBTXRCLElBQUksQ0FBQ0csSUFBSTs0REFBQzs0REFBSW1CLENBQUFBLE1BQU10QixJQUFJLENBQUNJLElBQUksR0FBRyxPQUFPLElBQUcsRUFBRzRELE9BQU8sQ0FBQzs0REFBRzs7Ozs7MERBS25FLHFCQUFDQztnREFDQ0MsU0FBUyxJQUFNdEQsWUFBWUM7Z0RBQzNCNkMsVUFBVTFFO2dEQUNWd0QsV0FBVTswREFFVixjQUFBLHFCQUFDMkI7b0RBQUkzQixXQUFVO29EQUFVNEIsTUFBSztvREFBT0MsUUFBTztvREFBZUMsU0FBUTs4REFDakUsY0FBQSxxQkFBQ0M7d0RBQUtDLGVBQWM7d0RBQVFDLGdCQUFlO3dEQUFRQyxhQUFhO3dEQUFHQyxHQUFFOzs7Ozt1Q0FwRHBFOUQ7OzRCQTREVjdCLDJCQUNDLHNCQUFDdUQ7Z0NBQUlDLFdBQVU7O2tEQUNiLHNCQUFDRDt3Q0FBSUMsV0FBVTs7MERBQ2IscUJBQUNvQztnREFBS3BDLFdBQVU7MERBQW9DOzswREFDcEQsc0JBQUNvQztnREFBS3BDLFdBQVU7O29EQUF1Q3REO29EQUFlOzs7OztrREFFeEUscUJBQUNxRDt3Q0FBSUMsV0FBVTtrREFDYixjQUFBLHFCQUFDRDs0Q0FDQ0MsV0FBVTs0Q0FDVnFDLE9BQU87Z0RBQUVDLE9BQU8sR0FBRzVGLGVBQWUsQ0FBQyxDQUFDOzRDQUFDOzs7OzswQ0FPN0Msc0JBQUNxRDtnQ0FBSUMsV0FBVTs7a0RBQ2IscUJBQUN5Qjt3Q0FDQ0MsU0FBU2hEO3dDQUNUd0MsVUFBVTFFLGFBQWFILE9BQU9zQyxNQUFNLEtBQUs7d0NBQ3pDcUIsV0FBVTtrREFFVHhELFlBQVksaUJBQWlCLENBQUMsT0FBTyxFQUFFSCxPQUFPc0MsTUFBTSxDQUFDLE1BQU0sRUFBRXRDLE9BQU9zQyxNQUFNLEdBQUcsSUFBSSxNQUFNLElBQUk7O2tEQUU5RixxQkFBQzhDO3dDQUNDQyxTQUFTOzRDQUNQckYsT0FBT3VELE9BQU8sQ0FBQ2QsQ0FBQUEsUUFBU2QsSUFBSU0sZUFBZSxDQUFDUSxNQUFNZixPQUFPOzRDQUN6RHpCLFVBQVUsRUFBRTt3Q0FDZDt3Q0FDQTRFLFVBQVUxRTt3Q0FDVndELFdBQVU7a0RBQ1g7Ozs7OztrQ0FRUCxzQkFBQ0Q7d0JBQUlDLFdBQVU7OzBDQUNiLHFCQUFDWTtnQ0FBR1osV0FBVTswQ0FBbUM7OzBDQUNqRCxxQkFBQ0c7Z0NBQUVILFdBQVU7MENBQXdCOzs7Ozs7OztBQVMvQyJ9