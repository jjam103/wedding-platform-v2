a356e59b3903088147f5746f79e6a873
'use client';
"use strict";

/* istanbul ignore next */
function cov_1dqox4blaw() {
  var path = "/Users/jaron/Desktop/wedding-platform-v2/app/admin/admin-users/page.tsx";
  var hash = "e1bf5e775c4861e173ae42f73f58cdbaaa02700c";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/jaron/Desktop/wedding-platform-v2/app/admin/admin-users/page.tsx",
    statementMap: {
      "0": {
        start: {
          line: 3,
          column: 0
        },
        end: {
          line: 5,
          column: 3
        }
      },
      "1": {
        start: {
          line: 7,
          column: 4
        },
        end: {
          line: 10,
          column: 7
        }
      },
      "2": {
        start: {
          line: 7,
          column: 24
        },
        end: {
          line: 10,
          column: 7
        }
      },
      "3": {
        start: {
          line: 12,
          column: 0
        },
        end: {
          line: 31,
          column: 3
        }
      },
      "4": {
        start: {
          line: 26,
          column: 8
        },
        end: {
          line: 26,
          column: 30
        }
      },
      "5": {
        start: {
          line: 29,
          column: 8
        },
        end: {
          line: 29,
          column: 23
        }
      },
      "6": {
        start: {
          line: 32,
          column: 20
        },
        end: {
          line: 32,
          column: 48
        }
      },
      "7": {
        start: {
          line: 33,
          column: 15
        },
        end: {
          line: 33,
          column: 31
        }
      },
      "8": {
        start: {
          line: 34,
          column: 21
        },
        end: {
          line: 34,
          column: 69
        }
      },
      "9": {
        start: {
          line: 35,
          column: 26
        },
        end: {
          line: 35,
          column: 79
        }
      },
      "10": {
        start: {
          line: 36,
          column: 22
        },
        end: {
          line: 36,
          column: 68
        }
      },
      "11": {
        start: {
          line: 37,
          column: 16
        },
        end: {
          line: 37,
          column: 31
        }
      },
      "12": {
        start: {
          line: 39,
          column: 25
        },
        end: {
          line: 39,
          column: 54
        }
      },
      "13": {
        start: {
          line: 40,
          column: 46
        },
        end: {
          line: 40,
          column: 70
        }
      },
      "14": {
        start: {
          line: 41,
          column: 50
        },
        end: {
          line: 41,
          column: 79
        }
      },
      "15": {
        start: {
          line: 42,
          column: 34
        },
        end: {
          line: 42,
          column: 60
        }
      },
      "16": {
        start: {
          line: 43,
          column: 4
        },
        end: {
          line: 69,
          column: 7
        }
      },
      "17": {
        start: {
          line: 45,
          column: 12
        },
        end: {
          line: 64,
          column: 13
        }
      },
      "18": {
        start: {
          line: 46,
          column: 33
        },
        end: {
          line: 46,
          column: 65
        }
      },
      "19": {
        start: {
          line: 47,
          column: 31
        },
        end: {
          line: 47,
          column: 52
        }
      },
      "20": {
        start: {
          line: 48,
          column: 16
        },
        end: {
          line: 56,
          column: 17
        }
      },
      "21": {
        start: {
          line: 49,
          column: 20
        },
        end: {
          line: 49,
          column: 58
        }
      },
      "22": {
        start: {
          line: 51,
          column: 41
        },
        end: {
          line: 51,
          column: 86
        }
      },
      "23": {
        start: {
          line: 52,
          column: 39
        },
        end: {
          line: 52,
          column: 64
        }
      },
      "24": {
        start: {
          line: 53,
          column: 20
        },
        end: {
          line: 55,
          column: 21
        }
      },
      "25": {
        start: {
          line: 54,
          column: 24
        },
        end: {
          line: 54,
          column: 65
        }
      },
      "26": {
        start: {
          line: 58,
          column: 16
        },
        end: {
          line: 61,
          column: 19
        }
      },
      "27": {
        start: {
          line: 63,
          column: 16
        },
        end: {
          line: 63,
          column: 34
        }
      },
      "28": {
        start: {
          line: 66,
          column: 8
        },
        end: {
          line: 66,
          column: 27
        }
      },
      "29": {
        start: {
          line: 70,
          column: 4
        },
        end: {
          line: 89,
          column: 5
        }
      },
      "30": {
        start: {
          line: 71,
          column: 8
        },
        end: {
          line: 88,
          column: 11
        }
      },
      "31": {
        start: {
          line: 90,
          column: 4
        },
        end: {
          line: 113,
          column: 7
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 6,
            column: 9
          },
          end: {
            line: 6,
            column: 16
          }
        },
        loc: {
          start: {
            line: 6,
            column: 30
          },
          end: {
            line: 11,
            column: 1
          }
        },
        line: 6
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 13,
            column: 4
          },
          end: {
            line: 13,
            column: 5
          }
        },
        loc: {
          start: {
            line: 25,
            column: 15
          },
          end: {
            line: 27,
            column: 5
          }
        },
        line: 25
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 28,
            column: 4
          },
          end: {
            line: 28,
            column: 5
          }
        },
        loc: {
          start: {
            line: 28,
            column: 19
          },
          end: {
            line: 30,
            column: 5
          }
        },
        line: 28
      },
      "3": {
        name: "AdminUsersPage",
        decl: {
          start: {
            line: 38,
            column: 9
          },
          end: {
            line: 38,
            column: 23
          }
        },
        loc: {
          start: {
            line: 38,
            column: 26
          },
          end: {
            line: 114,
            column: 1
          }
        },
        line: 38
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 43,
            column: 26
          },
          end: {
            line: 43,
            column: 27
          }
        },
        loc: {
          start: {
            line: 43,
            column: 30
          },
          end: {
            line: 67,
            column: 5
          }
        },
        line: 43
      },
      "5": {
        name: "fetchCurrentUser",
        decl: {
          start: {
            line: 44,
            column: 23
          },
          end: {
            line: 44,
            column: 39
          }
        },
        loc: {
          start: {
            line: 44,
            column: 42
          },
          end: {
            line: 65,
            column: 9
          }
        },
        line: 44
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 48,
            column: 16
          },
          end: {
            line: 56,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 48,
            column: 16
          },
          end: {
            line: 56,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 48
      },
      "1": {
        loc: {
          start: {
            line: 48,
            column: 20
          },
          end: {
            line: 48,
            column: 49
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 48,
            column: 20
          },
          end: {
            line: 48,
            column: 34
          }
        }, {
          start: {
            line: 48,
            column: 38
          },
          end: {
            line: 48,
            column: 49
          }
        }],
        line: 48
      },
      "2": {
        loc: {
          start: {
            line: 53,
            column: 20
          },
          end: {
            line: 55,
            column: 21
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 53,
            column: 20
          },
          end: {
            line: 55,
            column: 21
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 53
      },
      "3": {
        loc: {
          start: {
            line: 53,
            column: 24
          },
          end: {
            line: 53,
            column: 61
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 53,
            column: 24
          },
          end: {
            line: 53,
            column: 42
          }
        }, {
          start: {
            line: 53,
            column: 46
          },
          end: {
            line: 53,
            column: 61
          }
        }],
        line: 53
      },
      "4": {
        loc: {
          start: {
            line: 70,
            column: 4
          },
          end: {
            line: 89,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 70,
            column: 4
          },
          end: {
            line: 89,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 70
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["/Users/jaron/Desktop/wedding-platform-v2/app/admin/admin-users/page.tsx"],
      sourcesContent: ["'use client';\n\nexport const dynamic = 'force-dynamic';\n\nimport { useState, useEffect } from 'react';\nimport { AdminLayout } from '@/components/admin/AdminLayout';\nimport { AdminUserManager } from '@/components/admin/AdminUserManager';\nimport { useToast } from '@/components/ui/ToastContext';\n\n/**\n * Admin Users Management Page\n * \n * Provides interface for managing admin users with role-based access control.\n * Features:\n * - Create/invite new admin users\n * - Update user roles (owner, admin, editor)\n * - Deactivate/reactivate users\n * - View audit logs\n * - Last owner protection\n * \n * Uses existing AdminUserManager component with full CRUD functionality.\n */\nexport default function AdminUsersPage() {\n  const { addToast } = useToast();\n  const [currentUserId, setCurrentUserId] = useState<string>('');\n  const [currentUserRole, setCurrentUserRole] = useState<'admin' | 'owner'>('admin');\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function fetchCurrentUser() {\n      try {\n        const response = await fetch('/api/auth/session');\n        const result = await response.json();\n        \n        if (result.success && result.data) {\n          setCurrentUserId(result.data.user.id);\n          // Fetch user role from admin_users table\n          const roleResponse = await fetch(`/api/admin/admin-users/current`);\n          const roleResult = await roleResponse.json();\n          \n          if (roleResult.success && roleResult.data) {\n            setCurrentUserRole(roleResult.data.role);\n          }\n        }\n      } catch (error) {\n        addToast({\n          type: 'error',\n          message: 'Failed to load user information',\n        });\n      } finally {\n        setLoading(false);\n      }\n    }\n    \n    fetchCurrentUser();\n  }, [addToast]);\n\n  if (loading) {\n    return (\n      <AdminLayout currentSection=\"admin-users\">\n        <div className=\"space-y-6\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-sage-900\">Admin Users</h1>\n            <p className=\"text-sage-600 mt-1\">Loading...</p>\n          </div>\n        </div>\n      </AdminLayout>\n    );\n  }\n\n  return (\n    <AdminLayout currentSection=\"admin-users\">\n      <div className=\"space-y-6\">\n        {/* Page Header */}\n        <div>\n          <h1 className=\"text-3xl font-bold text-sage-900\">Admin Users</h1>\n          <p className=\"text-sage-600 mt-1\">\n            Manage admin users and their permissions\n          </p>\n        </div>\n\n        {/* Admin User Manager Component */}\n        <AdminUserManager \n          currentUserId={currentUserId}\n          currentUserRole={currentUserRole}\n        />\n      </div>\n    </AdminLayout>\n  );\n}\n"],
      names: ["AdminUsersPage", "dynamic", "addToast", "useToast", "currentUserId", "setCurrentUserId", "useState", "currentUserRole", "setCurrentUserRole", "loading", "setLoading", "useEffect", "fetchCurrentUser", "response", "fetch", "result", "json", "success", "data", "user", "id", "roleResponse", "roleResult", "role", "error", "type", "message", "AdminLayout", "currentSection", "div", "className", "h1", "p", "AdminUserManager"],
      mappings: "AAAA;;;;;;;;;;;;QASA;;;;;;;;;;;;CAYC,GACD;eAAwBA;;QApBXC;eAAAA;;;;uBAEuB;6BACR;kCACK;8BACR;AALlB,MAAMA,UAAU;AAoBR,SAASD;IACtB,MAAM,EAAEE,QAAQ,EAAE,GAAGC,IAAAA,sBAAQ;IAC7B,MAAM,CAACC,eAAeC,iBAAiB,GAAGC,IAAAA,eAAQ,EAAS;IAC3D,MAAM,CAACC,iBAAiBC,mBAAmB,GAAGF,IAAAA,eAAQ,EAAoB;IAC1E,MAAM,CAACG,SAASC,WAAW,GAAGJ,IAAAA,eAAQ,EAAC;IAEvCK,IAAAA,gBAAS,EAAC;QACR,eAAeC;YACb,IAAI;gBACF,MAAMC,WAAW,MAAMC,MAAM;gBAC7B,MAAMC,SAAS,MAAMF,SAASG,IAAI;gBAElC,IAAID,OAAOE,OAAO,IAAIF,OAAOG,IAAI,EAAE;oBACjCb,iBAAiBU,OAAOG,IAAI,CAACC,IAAI,CAACC,EAAE;oBACpC,yCAAyC;oBACzC,MAAMC,eAAe,MAAMP,MAAM,CAAC,8BAA8B,CAAC;oBACjE,MAAMQ,aAAa,MAAMD,aAAaL,IAAI;oBAE1C,IAAIM,WAAWL,OAAO,IAAIK,WAAWJ,IAAI,EAAE;wBACzCV,mBAAmBc,WAAWJ,IAAI,CAACK,IAAI;oBACzC;gBACF;YACF,EAAE,OAAOC,OAAO;gBACdtB,SAAS;oBACPuB,MAAM;oBACNC,SAAS;gBACX;YACF,SAAU;gBACRhB,WAAW;YACb;QACF;QAEAE;IACF,GAAG;QAACV;KAAS;IAEb,IAAIO,SAAS;QACX,qBACE,qBAACkB,wBAAW;YAACC,gBAAe;sBAC1B,cAAA,qBAACC;gBAAIC,WAAU;0BACb,cAAA,sBAACD;;sCACC,qBAACE;4BAAGD,WAAU;sCAAmC;;sCACjD,qBAACE;4BAAEF,WAAU;sCAAqB;;;;;;IAK5C;IAEA,qBACE,qBAACH,wBAAW;QAACC,gBAAe;kBAC1B,cAAA,sBAACC;YAAIC,WAAU;;8BAEb,sBAACD;;sCACC,qBAACE;4BAAGD,WAAU;sCAAmC;;sCACjD,qBAACE;4BAAEF,WAAU;sCAAqB;;;;8BAMpC,qBAACG,kCAAgB;oBACf7B,eAAeA;oBACfG,iBAAiBA;;;;;AAK3B"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "e1bf5e775c4861e173ae42f73f58cdbaaa02700c"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1dqox4blaw = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1dqox4blaw();
cov_1dqox4blaw().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_1dqox4blaw().f[0]++;
  cov_1dqox4blaw().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_1dqox4blaw().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: Object.getOwnPropertyDescriptor(all, name).get
    });
  }
}
/* istanbul ignore next */
cov_1dqox4blaw().s[3]++;
_export(exports, {
  get
  /**
  * Admin Users Management Page
  * 
  * Provides interface for managing admin users with role-based access control.
  * Features:
  * - Create/invite new admin users
  * - Update user roles (owner, admin, editor)
  * - Deactivate/reactivate users
  * - View audit logs
  * - Last owner protection
  * 
  * Uses existing AdminUserManager component with full CRUD functionality.
  */
  default() {
    /* istanbul ignore next */
    cov_1dqox4blaw().f[1]++;
    cov_1dqox4blaw().s[4]++;
    return AdminUsersPage;
  },
  get dynamic() {
    /* istanbul ignore next */
    cov_1dqox4blaw().f[2]++;
    cov_1dqox4blaw().s[5]++;
    return dynamic;
  }
});
const _jsxruntime =
/* istanbul ignore next */
(cov_1dqox4blaw().s[6]++, require("react/jsx-runtime"));
const _react =
/* istanbul ignore next */
(cov_1dqox4blaw().s[7]++, require("react"));
const _AdminLayout =
/* istanbul ignore next */
(cov_1dqox4blaw().s[8]++, require("../../../components/admin/AdminLayout"));
const _AdminUserManager =
/* istanbul ignore next */
(cov_1dqox4blaw().s[9]++, require("../../../components/admin/AdminUserManager"));
const _ToastContext =
/* istanbul ignore next */
(cov_1dqox4blaw().s[10]++, require("../../../components/ui/ToastContext"));
const dynamic =
/* istanbul ignore next */
(cov_1dqox4blaw().s[11]++, 'force-dynamic');
function AdminUsersPage() {
  /* istanbul ignore next */
  cov_1dqox4blaw().f[3]++;
  const {
    addToast
  } =
  /* istanbul ignore next */
  (cov_1dqox4blaw().s[12]++, (0, _ToastContext.useToast)());
  const [currentUserId, setCurrentUserId] =
  /* istanbul ignore next */
  (cov_1dqox4blaw().s[13]++, (0, _react.useState)(''));
  const [currentUserRole, setCurrentUserRole] =
  /* istanbul ignore next */
  (cov_1dqox4blaw().s[14]++, (0, _react.useState)('admin'));
  const [loading, setLoading] =
  /* istanbul ignore next */
  (cov_1dqox4blaw().s[15]++, (0, _react.useState)(true));
  /* istanbul ignore next */
  cov_1dqox4blaw().s[16]++;
  (0, _react.useEffect)(() => {
    /* istanbul ignore next */
    cov_1dqox4blaw().f[4]++;
    async function fetchCurrentUser() {
      /* istanbul ignore next */
      cov_1dqox4blaw().f[5]++;
      cov_1dqox4blaw().s[17]++;
      try {
        const response =
        /* istanbul ignore next */
        (cov_1dqox4blaw().s[18]++, await fetch('/api/auth/session'));
        const result =
        /* istanbul ignore next */
        (cov_1dqox4blaw().s[19]++, await response.json());
        /* istanbul ignore next */
        cov_1dqox4blaw().s[20]++;
        if (
        /* istanbul ignore next */
        (cov_1dqox4blaw().b[1][0]++, result.success) &&
        /* istanbul ignore next */
        (cov_1dqox4blaw().b[1][1]++, result.data)) {
          /* istanbul ignore next */
          cov_1dqox4blaw().b[0][0]++;
          cov_1dqox4blaw().s[21]++;
          setCurrentUserId(result.data.user.id);
          // Fetch user role from admin_users table
          const roleResponse =
          /* istanbul ignore next */
          (cov_1dqox4blaw().s[22]++, await fetch(`/api/admin/admin-users/current`));
          const roleResult =
          /* istanbul ignore next */
          (cov_1dqox4blaw().s[23]++, await roleResponse.json());
          /* istanbul ignore next */
          cov_1dqox4blaw().s[24]++;
          if (
          /* istanbul ignore next */
          (cov_1dqox4blaw().b[3][0]++, roleResult.success) &&
          /* istanbul ignore next */
          (cov_1dqox4blaw().b[3][1]++, roleResult.data)) {
            /* istanbul ignore next */
            cov_1dqox4blaw().b[2][0]++;
            cov_1dqox4blaw().s[25]++;
            setCurrentUserRole(roleResult.data.role);
          } else
          /* istanbul ignore next */
          {
            cov_1dqox4blaw().b[2][1]++;
          }
        } else
        /* istanbul ignore next */
        {
          cov_1dqox4blaw().b[0][1]++;
        }
      } catch (error) {
        /* istanbul ignore next */
        cov_1dqox4blaw().s[26]++;
        addToast({
          type: 'error',
          message: 'Failed to load user information'
        });
      } finally {
        /* istanbul ignore next */
        cov_1dqox4blaw().s[27]++;
        setLoading(false);
      }
    }
    /* istanbul ignore next */
    cov_1dqox4blaw().s[28]++;
    fetchCurrentUser();
  }, [addToast]);
  /* istanbul ignore next */
  cov_1dqox4blaw().s[29]++;
  if (loading) {
    /* istanbul ignore next */
    cov_1dqox4blaw().b[4][0]++;
    cov_1dqox4blaw().s[30]++;
    return /*#__PURE__*/(0, _jsxruntime.jsx)(_AdminLayout.AdminLayout, {
      currentSection: "admin-users",
      children: /*#__PURE__*/(0, _jsxruntime.jsx)("div", {
        className: "space-y-6",
        children: /*#__PURE__*/(0, _jsxruntime.jsxs)("div", {
          children: [/*#__PURE__*/(0, _jsxruntime.jsx)("h1", {
            className: "text-3xl font-bold text-sage-900",
            children: "Admin Users"
          }), /*#__PURE__*/(0, _jsxruntime.jsx)("p", {
            className: "text-sage-600 mt-1",
            children: "Loading..."
          })]
        })
      })
    });
  } else
  /* istanbul ignore next */
  {
    cov_1dqox4blaw().b[4][1]++;
  }
  cov_1dqox4blaw().s[31]++;
  return /*#__PURE__*/(0, _jsxruntime.jsx)(_AdminLayout.AdminLayout, {
    currentSection: "admin-users",
    children: /*#__PURE__*/(0, _jsxruntime.jsxs)("div", {
      className: "space-y-6",
      children: [/*#__PURE__*/(0, _jsxruntime.jsxs)("div", {
        children: [/*#__PURE__*/(0, _jsxruntime.jsx)("h1", {
          className: "text-3xl font-bold text-sage-900",
          children: "Admin Users"
        }), /*#__PURE__*/(0, _jsxruntime.jsx)("p", {
          className: "text-sage-600 mt-1",
          children: "Manage admin users and their permissions"
        })]
      }), /*#__PURE__*/(0, _jsxruntime.jsx)(_AdminUserManager.AdminUserManager, {
        currentUserId: currentUserId,
        currentUserRole: currentUserRole
      })]
    })
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkZWZhdWx0IiwiY292XzFkcW94NGJsYXciLCJmIiwicyIsIkFkbWluVXNlcnNQYWdlIiwiZHluYW1pYyIsImFkZFRvYXN0IiwiX1RvYXN0Q29udGV4dCIsInVzZVRvYXN0IiwiY3VycmVudFVzZXJJZCIsInNldEN1cnJlbnRVc2VySWQiLCJfcmVhY3QiLCJ1c2VTdGF0ZSIsImN1cnJlbnRVc2VyUm9sZSIsInNldEN1cnJlbnRVc2VyUm9sZSIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwidXNlRWZmZWN0IiwiZmV0Y2hDdXJyZW50VXNlciIsInJlc3BvbnNlIiwiZmV0Y2giLCJyZXN1bHQiLCJqc29uIiwiYiIsInN1Y2Nlc3MiLCJkYXRhIiwidXNlciIsImlkIiwicm9sZVJlc3BvbnNlIiwicm9sZVJlc3VsdCIsInJvbGUiLCJlcnJvciIsInR5cGUiLCJtZXNzYWdlIiwiX2pzeHJ1bnRpbWUiLCJqc3giLCJfQWRtaW5MYXlvdXQiLCJBZG1pbkxheW91dCIsImN1cnJlbnRTZWN0aW9uIiwiY2xhc3NOYW1lIiwianN4cyIsIl9BZG1pblVzZXJNYW5hZ2VyIiwiQWRtaW5Vc2VyTWFuYWdlciJdLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FkbWluL2FkbWluLXVzZXJzL3BhZ2UudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSAnZm9yY2UtZHluYW1pYyc7XG5cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBBZG1pbkxheW91dCB9IGZyb20gJ0AvY29tcG9uZW50cy9hZG1pbi9BZG1pbkxheW91dCc7XG5pbXBvcnQgeyBBZG1pblVzZXJNYW5hZ2VyIH0gZnJvbSAnQC9jb21wb25lbnRzL2FkbWluL0FkbWluVXNlck1hbmFnZXInO1xuaW1wb3J0IHsgdXNlVG9hc3QgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvVG9hc3RDb250ZXh0JztcblxuLyoqXG4gKiBBZG1pbiBVc2VycyBNYW5hZ2VtZW50IFBhZ2VcbiAqIFxuICogUHJvdmlkZXMgaW50ZXJmYWNlIGZvciBtYW5hZ2luZyBhZG1pbiB1c2VycyB3aXRoIHJvbGUtYmFzZWQgYWNjZXNzIGNvbnRyb2wuXG4gKiBGZWF0dXJlczpcbiAqIC0gQ3JlYXRlL2ludml0ZSBuZXcgYWRtaW4gdXNlcnNcbiAqIC0gVXBkYXRlIHVzZXIgcm9sZXMgKG93bmVyLCBhZG1pbiwgZWRpdG9yKVxuICogLSBEZWFjdGl2YXRlL3JlYWN0aXZhdGUgdXNlcnNcbiAqIC0gVmlldyBhdWRpdCBsb2dzXG4gKiAtIExhc3Qgb3duZXIgcHJvdGVjdGlvblxuICogXG4gKiBVc2VzIGV4aXN0aW5nIEFkbWluVXNlck1hbmFnZXIgY29tcG9uZW50IHdpdGggZnVsbCBDUlVEIGZ1bmN0aW9uYWxpdHkuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFkbWluVXNlcnNQYWdlKCkge1xuICBjb25zdCB7IGFkZFRvYXN0IH0gPSB1c2VUb2FzdCgpO1xuICBjb25zdCBbY3VycmVudFVzZXJJZCwgc2V0Q3VycmVudFVzZXJJZF0gPSB1c2VTdGF0ZTxzdHJpbmc+KCcnKTtcbiAgY29uc3QgW2N1cnJlbnRVc2VyUm9sZSwgc2V0Q3VycmVudFVzZXJSb2xlXSA9IHVzZVN0YXRlPCdhZG1pbicgfCAnb3duZXInPignYWRtaW4nKTtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBhc3luYyBmdW5jdGlvbiBmZXRjaEN1cnJlbnRVc2VyKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9hdXRoL3Nlc3Npb24nKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC5kYXRhKSB7XG4gICAgICAgICAgc2V0Q3VycmVudFVzZXJJZChyZXN1bHQuZGF0YS51c2VyLmlkKTtcbiAgICAgICAgICAvLyBGZXRjaCB1c2VyIHJvbGUgZnJvbSBhZG1pbl91c2VycyB0YWJsZVxuICAgICAgICAgIGNvbnN0IHJvbGVSZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2FkbWluL2FkbWluLXVzZXJzL2N1cnJlbnRgKTtcbiAgICAgICAgICBjb25zdCByb2xlUmVzdWx0ID0gYXdhaXQgcm9sZVJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAocm9sZVJlc3VsdC5zdWNjZXNzICYmIHJvbGVSZXN1bHQuZGF0YSkge1xuICAgICAgICAgICAgc2V0Q3VycmVudFVzZXJSb2xlKHJvbGVSZXN1bHQuZGF0YS5yb2xlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGFkZFRvYXN0KHtcbiAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gbG9hZCB1c2VyIGluZm9ybWF0aW9uJyxcbiAgICAgICAgfSk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZmV0Y2hDdXJyZW50VXNlcigpO1xuICB9LCBbYWRkVG9hc3RdKTtcblxuICBpZiAobG9hZGluZykge1xuICAgIHJldHVybiAoXG4gICAgICA8QWRtaW5MYXlvdXQgY3VycmVudFNlY3Rpb249XCJhZG1pbi11c2Vyc1wiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNlwiPlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC0zeGwgZm9udC1ib2xkIHRleHQtc2FnZS05MDBcIj5BZG1pbiBVc2VyczwvaDE+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNhZ2UtNjAwIG10LTFcIj5Mb2FkaW5nLi4uPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvQWRtaW5MYXlvdXQ+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPEFkbWluTGF5b3V0IGN1cnJlbnRTZWN0aW9uPVwiYWRtaW4tdXNlcnNcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS02XCI+XG4gICAgICAgIHsvKiBQYWdlIEhlYWRlciAqL31cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC0zeGwgZm9udC1ib2xkIHRleHQtc2FnZS05MDBcIj5BZG1pbiBVc2VyczwvaDE+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zYWdlLTYwMCBtdC0xXCI+XG4gICAgICAgICAgICBNYW5hZ2UgYWRtaW4gdXNlcnMgYW5kIHRoZWlyIHBlcm1pc3Npb25zXG4gICAgICAgICAgPC9wPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogQWRtaW4gVXNlciBNYW5hZ2VyIENvbXBvbmVudCAqL31cbiAgICAgICAgPEFkbWluVXNlck1hbmFnZXIgXG4gICAgICAgICAgY3VycmVudFVzZXJJZD17Y3VycmVudFVzZXJJZH1cbiAgICAgICAgICBjdXJyZW50VXNlclJvbGU9e2N1cnJlbnRVc2VyUm9sZX1cbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgIDwvQWRtaW5MYXlvdXQ+XG4gICk7XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQVNBOzs7Ozs7Ozs7Ozs7O0VBYUFBLFFBQUE7SUFBQTtJQUFBQyxjQUFBLEdBQUFDLENBQUE7SUFBQUQsY0FBQSxHQUFBRSxDQUFBO1dBQXdCQyxjQUFBOztNQXBCWEMsUUFBQTtJQUFBO0lBQUFKLGNBQUEsR0FBQUMsQ0FBQTtJQUFBRCxjQUFBLEdBQUFFLENBQUE7V0FBQUUsT0FBQTs7Ozs7Ozs7a0NBRXVCOzs7a0NBQ1I7OztrQ0FDSzs7O21DQUNSO0FBTGxCLE1BQU1BLE9BQUE7QUFBQTtBQUFBLENBQUFKLGNBQUEsR0FBQUUsQ0FBQSxRQUFVO0FBb0JSLFNBQVNDLGVBQUE7RUFBQTtFQUFBSCxjQUFBLEdBQUFDLENBQUE7RUFDdEIsTUFBTTtJQUFFSTtFQUFRLENBQUU7RUFBQTtFQUFBLENBQUFMLGNBQUEsR0FBQUUsQ0FBQSxRQUFHLElBQUFJLGFBQUEsQ0FBQUMsUUFBUTtFQUM3QixNQUFNLENBQUNDLGFBQUEsRUFBZUMsZ0JBQUEsQ0FBaUI7RUFBQTtFQUFBLENBQUFULGNBQUEsR0FBQUUsQ0FBQSxRQUFHLElBQUFRLE1BQUEsQ0FBQUMsUUFBUSxFQUFTO0VBQzNELE1BQU0sQ0FBQ0MsZUFBQSxFQUFpQkMsa0JBQUEsQ0FBbUI7RUFBQTtFQUFBLENBQUFiLGNBQUEsR0FBQUUsQ0FBQSxRQUFHLElBQUFRLE1BQUEsQ0FBQUMsUUFBUSxFQUFvQjtFQUMxRSxNQUFNLENBQUNHLE9BQUEsRUFBU0MsVUFBQSxDQUFXO0VBQUE7RUFBQSxDQUFBZixjQUFBLEdBQUFFLENBQUEsUUFBRyxJQUFBUSxNQUFBLENBQUFDLFFBQVEsRUFBQztFQUFBO0VBQUFYLGNBQUEsR0FBQUUsQ0FBQTtFQUV2QyxJQUFBUSxNQUFBLENBQUFNLFNBQVMsRUFBQztJQUFBO0lBQUFoQixjQUFBLEdBQUFDLENBQUE7SUFDUixlQUFlZ0IsaUJBQUE7TUFBQTtNQUFBakIsY0FBQSxHQUFBQyxDQUFBO01BQUFELGNBQUEsR0FBQUUsQ0FBQTtNQUNiLElBQUk7UUFDRixNQUFNZ0IsUUFBQTtRQUFBO1FBQUEsQ0FBQWxCLGNBQUEsR0FBQUUsQ0FBQSxRQUFXLE1BQU1pQixLQUFBLENBQU07UUFDN0IsTUFBTUMsTUFBQTtRQUFBO1FBQUEsQ0FBQXBCLGNBQUEsR0FBQUUsQ0FBQSxRQUFTLE1BQU1nQixRQUFBLENBQVNHLElBQUk7UUFBQTtRQUFBckIsY0FBQSxHQUFBRSxDQUFBO1FBRWxDO1FBQUk7UUFBQSxDQUFBRixjQUFBLEdBQUFzQixDQUFBLFVBQUFGLE1BQUEsQ0FBT0csT0FBTztRQUFBO1FBQUEsQ0FBQXZCLGNBQUEsR0FBQXNCLENBQUEsVUFBSUYsTUFBQSxDQUFPSSxJQUFJLEdBQUU7VUFBQTtVQUFBeEIsY0FBQSxHQUFBc0IsQ0FBQTtVQUFBdEIsY0FBQSxHQUFBRSxDQUFBO1VBQ2pDTyxnQkFBQSxDQUFpQlcsTUFBQSxDQUFPSSxJQUFJLENBQUNDLElBQUksQ0FBQ0MsRUFBRTtVQUNwQztVQUNBLE1BQU1DLFlBQUE7VUFBQTtVQUFBLENBQUEzQixjQUFBLEdBQUFFLENBQUEsUUFBZSxNQUFNaUIsS0FBQSxDQUFNLGdDQUFnQztVQUNqRSxNQUFNUyxVQUFBO1VBQUE7VUFBQSxDQUFBNUIsY0FBQSxHQUFBRSxDQUFBLFFBQWEsTUFBTXlCLFlBQUEsQ0FBYU4sSUFBSTtVQUFBO1VBQUFyQixjQUFBLEdBQUFFLENBQUE7VUFFMUM7VUFBSTtVQUFBLENBQUFGLGNBQUEsR0FBQXNCLENBQUEsVUFBQU0sVUFBQSxDQUFXTCxPQUFPO1VBQUE7VUFBQSxDQUFBdkIsY0FBQSxHQUFBc0IsQ0FBQSxVQUFJTSxVQUFBLENBQVdKLElBQUksR0FBRTtZQUFBO1lBQUF4QixjQUFBLEdBQUFzQixDQUFBO1lBQUF0QixjQUFBLEdBQUFFLENBQUE7WUFDekNXLGtCQUFBLENBQW1CZSxVQUFBLENBQVdKLElBQUksQ0FBQ0ssSUFBSTtVQUN6QztVQUFBO1VBQUE7WUFBQTdCLGNBQUEsR0FBQXNCLENBQUE7VUFBQTtRQUNGO1FBQUE7UUFBQTtVQUFBdEIsY0FBQSxHQUFBc0IsQ0FBQTtRQUFBO01BQ0YsRUFBRSxPQUFPUSxLQUFBLEVBQU87UUFBQTtRQUFBOUIsY0FBQSxHQUFBRSxDQUFBO1FBQ2RHLFFBQUEsQ0FBUztVQUNQMEIsSUFBQSxFQUFNO1VBQ05DLE9BQUEsRUFBUztRQUNYO01BQ0YsVUFBVTtRQUFBO1FBQUFoQyxjQUFBLEdBQUFFLENBQUE7UUFDUmEsVUFBQSxDQUFXO01BQ2I7SUFDRjtJQUFBO0lBQUFmLGNBQUEsR0FBQUUsQ0FBQTtJQUVBZSxnQkFBQTtFQUNGLEdBQUcsQ0FBQ1osUUFBQSxDQUFTO0VBQUE7RUFBQUwsY0FBQSxHQUFBRSxDQUFBO0VBRWIsSUFBSVksT0FBQSxFQUFTO0lBQUE7SUFBQWQsY0FBQSxHQUFBc0IsQ0FBQTtJQUFBdEIsY0FBQSxHQUFBRSxDQUFBO0lBQ1gsb0JBQ0UsSUFBQStCLFdBQUEsQ0FBQUMsR0FBQSxFQUFDQyxZQUFBLENBQUFDLFdBQVc7TUFBQ0MsY0FBQSxFQUFlO2dCQUMxQixpQkFBQUosV0FBQSxDQUFBQyxHQUFBLEVBQUM7UUFBSUksU0FBQSxFQUFVO2tCQUNiLGlCQUFBTCxXQUFBLENBQUFNLElBQUEsRUFBQztrQ0FDQyxJQUFBTixXQUFBLENBQUFDLEdBQUEsRUFBQztZQUFHSSxTQUFBLEVBQVU7c0JBQW1DOzJCQUNqRCxJQUFBTCxXQUFBLENBQUFDLEdBQUEsRUFBQztZQUFFSSxTQUFBLEVBQVU7c0JBQXFCOzs7OztFQUs1QztFQUFBO0VBQUE7SUFBQXRDLGNBQUEsR0FBQXNCLENBQUE7RUFBQTtFQUFBdEIsY0FBQSxHQUFBRSxDQUFBO0VBRUEsb0JBQ0UsSUFBQStCLFdBQUEsQ0FBQUMsR0FBQSxFQUFDQyxZQUFBLENBQUFDLFdBQVc7SUFBQ0MsY0FBQSxFQUFlO2NBQzFCLGlCQUFBSixXQUFBLENBQUFNLElBQUEsRUFBQztNQUFJRCxTQUFBLEVBQVU7OEJBRWIsSUFBQUwsV0FBQSxDQUFBTSxJQUFBLEVBQUM7Z0NBQ0MsSUFBQU4sV0FBQSxDQUFBQyxHQUFBLEVBQUM7VUFBR0ksU0FBQSxFQUFVO29CQUFtQzt5QkFDakQsSUFBQUwsV0FBQSxDQUFBQyxHQUFBLEVBQUM7VUFBRUksU0FBQSxFQUFVO29CQUFxQjs7dUJBTXBDLElBQUFMLFdBQUEsQ0FBQUMsR0FBQSxFQUFDTSxpQkFBQSxDQUFBQyxnQkFBZ0I7UUFDZmpDLGFBQUEsRUFBZUEsYUFBQTtRQUNmSSxlQUFBLEVBQWlCQTs7OztBQUszQiIsImlnbm9yZUxpc3QiOltdfQ==