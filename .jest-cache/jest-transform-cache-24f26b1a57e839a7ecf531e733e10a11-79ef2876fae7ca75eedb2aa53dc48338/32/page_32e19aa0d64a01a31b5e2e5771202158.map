{"version":3,"names":["default","cov_1dqox4blaw","f","s","AdminUsersPage","dynamic","addToast","_ToastContext","useToast","currentUserId","setCurrentUserId","_react","useState","currentUserRole","setCurrentUserRole","loading","setLoading","useEffect","fetchCurrentUser","response","fetch","result","json","b","success","data","user","id","roleResponse","roleResult","role","error","type","message","_jsxruntime","jsx","_AdminLayout","AdminLayout","currentSection","className","jsxs","_AdminUserManager","AdminUserManager"],"sources":["/Users/jaron/Desktop/wedding-platform-v2/app/admin/admin-users/page.tsx"],"sourcesContent":["'use client';\n\nexport const dynamic = 'force-dynamic';\n\nimport { useState, useEffect } from 'react';\nimport { AdminLayout } from '@/components/admin/AdminLayout';\nimport { AdminUserManager } from '@/components/admin/AdminUserManager';\nimport { useToast } from '@/components/ui/ToastContext';\n\n/**\n * Admin Users Management Page\n * \n * Provides interface for managing admin users with role-based access control.\n * Features:\n * - Create/invite new admin users\n * - Update user roles (owner, admin, editor)\n * - Deactivate/reactivate users\n * - View audit logs\n * - Last owner protection\n * \n * Uses existing AdminUserManager component with full CRUD functionality.\n */\nexport default function AdminUsersPage() {\n  const { addToast } = useToast();\n  const [currentUserId, setCurrentUserId] = useState<string>('');\n  const [currentUserRole, setCurrentUserRole] = useState<'admin' | 'owner'>('admin');\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function fetchCurrentUser() {\n      try {\n        const response = await fetch('/api/auth/session');\n        const result = await response.json();\n        \n        if (result.success && result.data) {\n          setCurrentUserId(result.data.user.id);\n          // Fetch user role from admin_users table\n          const roleResponse = await fetch(`/api/admin/admin-users/current`);\n          const roleResult = await roleResponse.json();\n          \n          if (roleResult.success && roleResult.data) {\n            setCurrentUserRole(roleResult.data.role);\n          }\n        }\n      } catch (error) {\n        addToast({\n          type: 'error',\n          message: 'Failed to load user information',\n        });\n      } finally {\n        setLoading(false);\n      }\n    }\n    \n    fetchCurrentUser();\n  }, [addToast]);\n\n  if (loading) {\n    return (\n      <AdminLayout currentSection=\"admin-users\">\n        <div className=\"space-y-6\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-sage-900\">Admin Users</h1>\n            <p className=\"text-sage-600 mt-1\">Loading...</p>\n          </div>\n        </div>\n      </AdminLayout>\n    );\n  }\n\n  return (\n    <AdminLayout currentSection=\"admin-users\">\n      <div className=\"space-y-6\">\n        {/* Page Header */}\n        <div>\n          <h1 className=\"text-3xl font-bold text-sage-900\">Admin Users</h1>\n          <p className=\"text-sage-600 mt-1\">\n            Manage admin users and their permissions\n          </p>\n        </div>\n\n        {/* Admin User Manager Component */}\n        <AdminUserManager \n          currentUserId={currentUserId}\n          currentUserRole={currentUserRole}\n        />\n      </div>\n    </AdminLayout>\n  );\n}\n"],"mappings":"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","ignoreList":[]}