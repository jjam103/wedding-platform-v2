{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/SimpleReferenceSelector.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\n\ninterface Reference {\n  type: 'event' | 'activity' | 'content_page' | 'accommodation';\n  id: string;\n  name: string;\n  description?: string;\n  metadata?: Record<string, any>;\n}\n\ninterface SimpleReferenceSelectorProps {\n  onSelect: (reference: Reference) => void;\n}\n\ninterface EntityItem {\n  id: string;\n  name: string;\n  slug?: string;\n  date?: string;\n  location?: string;\n  capacity?: number;\n  room_count?: number;\n  type?: string;\n}\n\n/**\n * SimpleReferenceSelector Component\n * \n * Inline reference selector with dropdown and list\n * - Dropdown to select entity type (Events, Activities, Pages, Accommodations)\n * - Click to select specific items\n * - No search, just simple selection\n */\nexport function SimpleReferenceSelector({ onSelect }: SimpleReferenceSelectorProps) {\n  const [selectedType, setSelectedType] = useState<'event' | 'activity' | 'content_page' | 'accommodation'>('activity');\n  const [items, setItems] = useState<EntityItem[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Fetch items when type changes\n  useEffect(() => {\n    async function fetchItems() {\n      setLoading(true);\n      setError(null);\n\n      try {\n        let endpoint = '';\n        switch (selectedType) {\n          case 'event':\n            endpoint = '/api/admin/events';\n            break;\n          case 'activity':\n            endpoint = '/api/admin/activities';\n            break;\n          case 'content_page':\n            endpoint = '/api/admin/content-pages';\n            break;\n          case 'accommodation':\n            endpoint = '/api/admin/accommodations';\n            break;\n        }\n\n        const response = await fetch(endpoint);\n        if (!response.ok) {\n          throw new Error('Failed to fetch items');\n        }\n\n        const result = await response.json();\n        \n        if (result.success) {\n          // Handle different response formats from different APIs\n          let dataArray = [];\n          \n          if (result.data) {\n            // Check for paginated response (activities, events)\n            if (result.data.activities) {\n              dataArray = result.data.activities;\n            } else if (result.data.events) {\n              dataArray = result.data.events;\n            } else if (result.data.items) {\n              dataArray = result.data.items;\n            } else if (Array.isArray(result.data)) {\n              // Direct array response (content_pages, accommodations)\n              dataArray = result.data;\n            }\n          }\n          \n          const normalizedItems = dataArray.map((item: any) => ({\n            id: item.id,\n            name: item.name || item.title,\n            slug: item.slug,\n            date: item.date || item.start_time,\n            location: item.location?.name || item.locations?.name,\n            capacity: item.capacity,\n            room_count: item.room_count,\n            type: item.type,\n          }));\n          setItems(normalizedItems);\n        } else {\n          setError(result.error?.message || 'Failed to load items');\n        }\n      } catch (err) {\n        console.error('Error fetching items:', err);\n        setError(err instanceof Error ? err.message : 'Failed to load items');\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchItems();\n  }, [selectedType]);\n\n  const handleSelectItem = (item: EntityItem) => {\n    onSelect({\n      type: selectedType,\n      id: item.id,\n      name: item.name,\n      metadata: {\n        slug: item.slug,\n        date: item.date,\n        location: item.location,\n        capacity: item.capacity,\n        room_count: item.room_count,\n        type: item.type,\n      },\n    });\n  };\n\n  const getTypeLabel = (type: string) => {\n    switch (type) {\n      case 'event':\n        return 'Events';\n      case 'activity':\n        return 'Activities';\n      case 'content_page':\n        return 'Content Pages';\n      case 'accommodation':\n        return 'Accommodations';\n      default:\n        return type;\n    }\n  };\n\n  const getTypeColor = (type: string) => {\n    switch (type) {\n      case 'event':\n        return 'purple';\n      case 'activity':\n        return 'blue';\n      case 'content_page':\n        return 'green';\n      case 'accommodation':\n        return 'orange';\n      default:\n        return 'gray';\n    }\n  };\n\n  return (\n    <div className=\"border border-gray-200 rounded-lg bg-white\">\n      {/* Type Selector */}\n      <div className=\"p-4 border-b border-gray-200\">\n        <label htmlFor=\"type-select\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n          Select Type\n        </label>\n        <select\n          id=\"type-select\"\n          value={selectedType}\n          onChange={(e) => setSelectedType(e.target.value as any)}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\n        >\n          <option value=\"activity\">Activities</option>\n          <option value=\"event\">Events</option>\n          <option value=\"content_page\">Content Pages</option>\n          <option value=\"accommodation\">Accommodations</option>\n        </select>\n      </div>\n\n      {/* Items List */}\n      <div className=\"p-4 max-h-96 overflow-y-auto\">\n        {loading && (\n          <div className=\"flex items-center justify-center py-8\">\n            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-emerald-600\"></div>\n          </div>\n        )}\n\n        {error && (\n          <div className=\"bg-red-50 border border-red-200 rounded-md p-3 text-sm text-red-800\">\n            {error}\n          </div>\n        )}\n\n        {!loading && !error && items.length === 0 && (\n          <div className=\"text-center py-8 text-gray-500\">\n            <p className=\"text-sm\">No {getTypeLabel(selectedType).toLowerCase()} found</p>\n          </div>\n        )}\n\n        {!loading && !error && items.length > 0 && (\n          <div className=\"space-y-2\">\n            {items.map((item) => (\n              <button\n                key={item.id}\n                type=\"button\"\n                className=\"w-full text-left border border-gray-200 rounded-md p-3 hover:border-emerald-500 hover:bg-emerald-50 cursor-pointer transition-colors\"\n                onClick={() => handleSelectItem(item)}\n              >\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <span\n                    className={`inline-block px-2 py-0.5 text-xs font-medium bg-${getTypeColor(selectedType)}-100 text-${getTypeColor(selectedType)}-800 rounded`}\n                  >\n                    {getTypeLabel(selectedType).slice(0, -1)}\n                  </span>\n                  <span className=\"font-medium text-gray-900\">{item.name}</span>\n                </div>\n                {item.date && (\n                  <p className=\"text-xs text-gray-600\">\n                    üìÖ {new Date(item.date).toLocaleDateString()}\n                  </p>\n                )}\n                {item.location && (\n                  <p className=\"text-xs text-gray-600\">üìç {item.location}</p>\n                )}\n                {item.capacity && (\n                  <p className=\"text-xs text-gray-600\">üë• Capacity: {item.capacity}</p>\n                )}\n                {item.room_count !== undefined && (\n                  <p className=\"text-xs text-gray-600\">üè† {item.room_count} rooms</p>\n                )}\n                {item.slug && (\n                  <p className=\"text-xs text-gray-600\">üîó /{item.slug}</p>\n                )}\n              </button>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["SimpleReferenceSelector","onSelect","selectedType","setSelectedType","useState","items","setItems","loading","setLoading","error","setError","useEffect","fetchItems","endpoint","response","fetch","ok","Error","result","json","success","dataArray","data","activities","events","Array","isArray","normalizedItems","map","item","id","name","title","slug","date","start_time","location","locations","capacity","room_count","type","message","err","console","handleSelectItem","metadata","getTypeLabel","getTypeColor","div","className","label","htmlFor","select","value","onChange","e","target","option","length","p","toLowerCase","button","onClick","span","slice","Date","toLocaleDateString","undefined"],"mappings":"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"}