{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/app/admin/accommodations/page.tsx"],"sourcesContent":["'use client';\n\nexport const dynamic = 'force-dynamic';\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { DataTableWithSuspense as DataTable, type ColumnDef } from '@/components/ui/DataTableWithSuspense';\nimport { CollapsibleForm } from '@/components/admin/CollapsibleForm';\nimport { LocationSelector } from '@/components/admin/LocationSelector';\nimport { ConfirmDialog } from '@/components/ui/ConfirmDialog';\nimport { Button } from '@/components/ui/Button';\nimport { useToast } from '@/components/ui/ToastContext';\nimport type { Accommodation } from '@/schemas/accommodationSchemas';\nimport { createAccommodationSchema, updateAccommodationSchema } from '@/schemas/accommodationSchemas';\nimport type { FormField } from '@/components/ui/DynamicForm';\nimport { useRouter } from 'next/navigation';\n\ninterface Location {\n  id: string;\n  name: string;\n  parentLocationId?: string | null;\n}\n\n/**\n * Accommodation Management Page\n * \n * Provides CRUD interface for managing wedding accommodations with collapsible forms.\n * Features:\n * - Data table with sorting, filtering, and search\n * - Collapsible inline form for create/edit operations\n * - LocationSelector with hierarchical location support\n * - Room types management navigation\n * - Section editor integration\n * - Delete confirmation dialog\n * - Toast notifications for success/error feedback\n * - Real-time data refresh after operations\n * \n * Requirements: 10.1-10.7, 28.1-28.8\n */\nexport default function AccommodationsPage() {\n  const { addToast } = useToast();\n  const router = useRouter();\n  \n  // State management\n  const [accommodations, setAccommodations] = useState<Accommodation[]>([]);\n  const [locations, setLocations] = useState<Location[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [isFormOpen, setIsFormOpen] = useState(false);\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\n  const [selectedAccommodation, setSelectedAccommodation] = useState<Accommodation | null>(null);\n  const [accommodationToDelete, setAccommodationToDelete] = useState<Accommodation | null>(null);\n  const [selectedLocationId, setSelectedLocationId] = useState<string>('');\n  \n  // Ref for scrolling to newly created accommodation\n  const newAccommodationRef = useRef<string | null>(null);\n\n  /**\n   * Fetch accommodations from API\n   */\n  const fetchAccommodations = useCallback(async () => {\n    try {\n      setLoading(true);\n      \n      const response = await fetch('/api/admin/accommodations');\n      if (!response.ok) {\n        throw new Error('Failed to fetch accommodations');\n      }\n\n      const result = await response.json();\n      if (result.success) {\n        setAccommodations(result.data.accommodations || []);\n      } else {\n        addToast({\n          type: 'error',\n          message: result.error?.message || 'Failed to load accommodations',\n        });\n      }\n    } catch (error) {\n      addToast({\n        type: 'error',\n        message: error instanceof Error ? error.message : 'Failed to load accommodations',\n      });\n    } finally {\n      setLoading(false);\n    }\n  }, [addToast]);\n\n  /**\n   * Fetch locations for dropdown\n   */\n  const fetchLocations = useCallback(async () => {\n    try {\n      const response = await fetch('/api/admin/locations');\n      if (!response.ok) {\n        return;\n      }\n\n      const result = await response.json();\n      if (result.success) {\n        setLocations(result.data.locations || []);\n      }\n    } catch (error) {\n      // Silently fail for locations - not critical\n      console.error('Failed to fetch locations:', error);\n    }\n  }, []);\n\n  // Load data on mount\n  useEffect(() => {\n    fetchAccommodations();\n    fetchLocations();\n  }, [fetchAccommodations, fetchLocations]);\n\n  /**\n   * Handle row click - open edit form\n   */\n  const handleRowClick = useCallback((accommodation: Accommodation) => {\n    setSelectedAccommodation(accommodation);\n    setSelectedLocationId(accommodation.locationId || '');\n    setIsFormOpen(true);\n  }, []);\n\n  /**\n   * Handle add accommodation button click\n   */\n  const handleAddAccommodation = useCallback(() => {\n    setSelectedAccommodation(null);\n    setSelectedLocationId('');\n    setIsFormOpen(true);\n  }, []);\n\n  /**\n   * Handle delete button click\n   */\n  const handleDeleteClick = useCallback((accommodation: Accommodation) => {\n    setAccommodationToDelete(accommodation);\n    setIsDeleteDialogOpen(true);\n  }, []);\n\n  /**\n   * Handle room types button click\n   */\n  const handleRoomTypes = useCallback((accommodation: Accommodation) => {\n    // Navigate to room types page for this accommodation\n    router.push(`/admin/accommodations/${accommodation.id}/room-types`);\n  }, [router]);\n\n  /**\n   * Handle manage sections button click\n   */\n  const handleManageSections = useCallback((accommodation: Accommodation) => {\n    // Navigate to section editor for this accommodation\n    router.push(`/admin/accommodations/${accommodation.id}/sections`);\n  }, [router]);\n\n  /**\n   * Handle form submission (create or update)\n   */\n  const handleSubmit = useCallback(async (data: any) => {\n    try {\n      const isEdit = !!selectedAccommodation;\n      \n      // Add selected location to data\n      const submitData = {\n        ...data,\n        locationId: selectedLocationId || null,\n      };\n      \n      const url = isEdit ? `/api/admin/accommodations/${selectedAccommodation.id}` : '/api/admin/accommodations';\n      const method = isEdit ? 'PUT' : 'POST';\n\n      const response = await fetch(url, {\n        method,\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(submitData),\n      });\n\n      const result = await response.json();\n\n      if (result.success) {\n        addToast({\n          type: 'success',\n          message: isEdit ? 'Accommodation updated successfully' : 'Accommodation created successfully',\n        });\n        \n        // Store new accommodation ID for scrolling\n        if (!isEdit && result.data?.id) {\n          newAccommodationRef.current = result.data.id;\n        }\n        \n        // Refresh accommodation list\n        await fetchAccommodations();\n        \n        // Close form\n        setIsFormOpen(false);\n        setSelectedAccommodation(null);\n        setSelectedLocationId('');\n        \n        // Scroll to new accommodation after a short delay\n        if (newAccommodationRef.current) {\n          setTimeout(() => {\n            const element = document.querySelector(`[data-row-id=\"${newAccommodationRef.current}\"]`);\n            if (element) {\n              element.scrollIntoView({ behavior: 'smooth', block: 'center' });\n            }\n            newAccommodationRef.current = null;\n          }, 100);\n        }\n      } else {\n        addToast({\n          type: 'error',\n          message: result.error?.message || 'Operation failed',\n        });\n      }\n    } catch (error) {\n      addToast({\n        type: 'error',\n        message: error instanceof Error ? error.message : 'Operation failed',\n      });\n    }\n  }, [selectedAccommodation, selectedLocationId, addToast, fetchAccommodations]);\n\n  /**\n   * Handle delete confirmation\n   */\n  const handleDeleteConfirm = useCallback(async () => {\n    if (!accommodationToDelete) return;\n\n    try {\n      const response = await fetch(`/api/admin/accommodations/${accommodationToDelete.id}`, {\n        method: 'DELETE',\n      });\n\n      const result = await response.json();\n\n      if (result.success) {\n        addToast({\n          type: 'success',\n          message: 'Accommodation deleted successfully',\n        });\n        \n        // Refresh accommodation list\n        await fetchAccommodations();\n        \n        // Close dialog\n        setIsDeleteDialogOpen(false);\n        setAccommodationToDelete(null);\n      } else {\n        addToast({\n          type: 'error',\n          message: result.error?.message || 'Failed to delete accommodation',\n        });\n      }\n    } catch (error) {\n      addToast({\n        type: 'error',\n        message: error instanceof Error ? error.message : 'Failed to delete accommodation',\n      });\n    }\n  }, [accommodationToDelete, addToast, fetchAccommodations]);\n\n  /**\n   * Format date for display\n   */\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  // Define table columns\n  const columns: ColumnDef<Accommodation>[] = [\n    {\n      key: 'name',\n      label: 'Name',\n      sortable: true,\n    },\n    {\n      key: 'locationId',\n      label: 'Location',\n      sortable: true,\n      render: (value) => {\n        if (!value) return '-';\n        const location = locations.find(l => l.id === value);\n        return location?.name || '-';\n      },\n    },\n    {\n      key: 'checkInDate',\n      label: 'Check-in',\n      sortable: true,\n      render: (value) => value ? formatDate(value as string) : '-',\n    },\n    {\n      key: 'checkOutDate',\n      label: 'Check-out',\n      sortable: true,\n      render: (value) => value ? formatDate(value as string) : '-',\n    },\n    {\n      key: 'status',\n      label: 'Status',\n      sortable: true,\n      filterable: true,\n      filterType: 'select',\n      filterOptions: [\n        { label: 'Draft', value: 'draft' },\n        { label: 'Published', value: 'published' },\n      ],\n      render: (value) => {\n        const labels: Record<string, string> = {\n          draft: 'Draft',\n          published: 'Published',\n        };\n        return (\n          <span\n            className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n              value === 'draft'\n                ? 'bg-sage-100 text-sage-800'\n                : 'bg-jungle-100 text-jungle-800'\n            }`}\n          >\n            {labels[value as string] || value}\n          </span>\n        );\n      },\n    },\n    {\n      key: 'actions',\n      label: 'Actions',\n      sortable: false,\n      render: (_, row) => (\n        <div className=\"flex gap-2\">\n          <Button\n            variant=\"secondary\"\n            size=\"sm\"\n            onClick={(e) => {\n              e.stopPropagation();\n              window.location.href = `/guest/accommodation/${(row as Accommodation).id}`;\n            }}\n          >\n            View\n          </Button>\n          <Button\n            variant=\"secondary\"\n            size=\"sm\"\n            onClick={(e) => {\n              e.stopPropagation();\n              handleRoomTypes(row as Accommodation);\n            }}\n          >\n            Room Types\n          </Button>\n          <Button\n            variant=\"secondary\"\n            size=\"sm\"\n            onClick={(e) => {\n              e.stopPropagation();\n              handleManageSections(row as Accommodation);\n            }}\n          >\n            Manage Sections\n          </Button>\n        </div>\n      ),\n    },\n  ];\n\n  // Define form fields\n  const formFields: FormField[] = [\n    {\n      name: 'name',\n      label: 'Accommodation Name',\n      type: 'text',\n      required: true,\n      placeholder: 'Enter accommodation name',\n    },\n    {\n      name: 'address',\n      label: 'Address',\n      type: 'text',\n      required: false,\n      placeholder: 'Enter address',\n    },\n    {\n      name: 'description',\n      label: 'Description',\n      type: 'richtext',\n      required: false,\n      placeholder: 'Enter accommodation description',\n      helpText: 'Rich text editor for detailed accommodation description',\n    },\n    {\n      name: 'checkInDate',\n      label: 'Check-in Date',\n      type: 'date',\n      required: false,\n      helpText: 'Default check-in date for this accommodation',\n    },\n    {\n      name: 'checkOutDate',\n      label: 'Check-out Date',\n      type: 'date',\n      required: false,\n      helpText: 'Default check-out date for this accommodation',\n    },\n    {\n      name: 'status',\n      label: 'Status',\n      type: 'select',\n      required: true,\n      options: [\n        { label: 'Draft', value: 'draft' },\n        { label: 'Published', value: 'published' },\n      ],\n    },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Page Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-sage-900\">Accommodation Management</h1>\n          <p className=\"text-sage-600 mt-1\">Manage wedding accommodations and lodging</p>\n        </div>\n        <Button\n          variant=\"primary\"\n          onClick={handleAddAccommodation}\n          aria-label=\"Create new accommodation\"\n          data-action=\"add-new\"\n        >\n          + Add Accommodation\n        </Button>\n      </div>\n\n      {/* Collapsible Form */}\n      <CollapsibleForm\n        isOpen={isFormOpen}\n        onToggle={() => {\n          setIsFormOpen(!isFormOpen);\n          if (isFormOpen) {\n            setSelectedAccommodation(null);\n            setSelectedLocationId('');\n          }\n        }}\n        title={selectedAccommodation ? 'Edit Accommodation' : 'Add New Accommodation'}\n        fields={formFields}\n        schema={selectedAccommodation ? updateAccommodationSchema : createAccommodationSchema}\n        onSubmit={handleSubmit}\n        onCancel={() => {\n          setIsFormOpen(false);\n          setSelectedAccommodation(null);\n          setSelectedLocationId('');\n        }}\n        initialData={selectedAccommodation || {}}\n        submitLabel={selectedAccommodation ? 'Update Accommodation' : 'Create Accommodation'}\n      >\n        {/* Location Selector - Custom field */}\n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium text-sage-700 mb-2\">\n            Location\n          </label>\n          <LocationSelector\n            locations={locations}\n            selectedLocationId={selectedLocationId}\n            onSelect={setSelectedLocationId}\n            placeholder=\"Select accommodation location\"\n          />\n          <p className=\"mt-1 text-sm text-sage-500\">\n            Select the location where this accommodation is situated\n          </p>\n        </div>\n      </CollapsibleForm>\n\n      {/* Data Table */}\n      <DataTable\n        data={accommodations}\n        columns={columns}\n        loading={loading}\n        onRowClick={handleRowClick}\n        onDelete={handleDeleteClick}\n        totalCount={accommodations.length}\n        currentPage={1}\n        pageSize={25}\n        idField=\"id\"\n      />\n\n      {/* Delete Confirmation Dialog */}\n      <ConfirmDialog\n        isOpen={isDeleteDialogOpen}\n        onClose={() => {\n          setIsDeleteDialogOpen(false);\n          setAccommodationToDelete(null);\n        }}\n        onConfirm={handleDeleteConfirm}\n        title=\"Delete Accommodation\"\n        message={`Are you sure you want to delete \"${accommodationToDelete?.name}\"? This will also remove all associated room types. This action cannot be undone.`}\n        confirmLabel=\"Delete\"\n        cancelLabel=\"Cancel\"\n        variant=\"danger\"\n      />\n    </div>\n  );\n}\n"],"names":["AccommodationsPage","dynamic","addToast","useToast","router","useRouter","accommodations","setAccommodations","useState","locations","setLocations","loading","setLoading","isFormOpen","setIsFormOpen","isDeleteDialogOpen","setIsDeleteDialogOpen","selectedAccommodation","setSelectedAccommodation","accommodationToDelete","setAccommodationToDelete","selectedLocationId","setSelectedLocationId","newAccommodationRef","useRef","fetchAccommodations","useCallback","response","fetch","ok","Error","result","json","success","data","type","message","error","fetchLocations","console","useEffect","handleRowClick","accommodation","locationId","handleAddAccommodation","handleDeleteClick","handleRoomTypes","push","id","handleManageSections","handleSubmit","isEdit","submitData","url","method","headers","body","JSON","stringify","current","setTimeout","element","document","querySelector","scrollIntoView","behavior","block","handleDeleteConfirm","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","columns","key","label","sortable","render","value","location","find","l","name","filterable","filterType","filterOptions","labels","draft","published","span","className","_","row","div","Button","variant","size","onClick","e","stopPropagation","window","href","formFields","required","placeholder","helpText","options","h1","p","aria-label","data-action","CollapsibleForm","isOpen","onToggle","title","fields","schema","updateAccommodationSchema","createAccommodationSchema","onSubmit","onCancel","initialData","submitLabel","LocationSelector","onSelect","DataTable","onRowClick","onDelete","totalCount","length","currentPage","pageSize","idField","ConfirmDialog","onClose","onConfirm","confirmLabel","cancelLabel"],"mappings":"AAAA;;;;;;;;;;;;QAsBA;;;;;;;;;;;;;;;CAeC,GACD;eAAwBA;;QApCXC;eAAAA;;;;uBAE4C;uCACU;iCACnC;kCACC;+BACH;wBACP;8BACE;sCAE4C;4BAE3C;AAZnB,MAAMA,UAAU;AAoCR,SAASD;IACtB,MAAM,EAAEE,QAAQ,EAAE,GAAGC,IAAAA,sBAAQ;IAC7B,MAAMC,SAASC,IAAAA,qBAAS;IAExB,mBAAmB;IACnB,MAAM,CAACC,gBAAgBC,kBAAkB,GAAGC,IAAAA,eAAQ,EAAkB,EAAE;IACxE,MAAM,CAACC,WAAWC,aAAa,GAAGF,IAAAA,eAAQ,EAAa,EAAE;IACzD,MAAM,CAACG,SAASC,WAAW,GAAGJ,IAAAA,eAAQ,EAAC;IACvC,MAAM,CAACK,YAAYC,cAAc,GAAGN,IAAAA,eAAQ,EAAC;IAC7C,MAAM,CAACO,oBAAoBC,sBAAsB,GAAGR,IAAAA,eAAQ,EAAC;IAC7D,MAAM,CAACS,uBAAuBC,yBAAyB,GAAGV,IAAAA,eAAQ,EAAuB;IACzF,MAAM,CAACW,uBAAuBC,yBAAyB,GAAGZ,IAAAA,eAAQ,EAAuB;IACzF,MAAM,CAACa,oBAAoBC,sBAAsB,GAAGd,IAAAA,eAAQ,EAAS;IAErE,mDAAmD;IACnD,MAAMe,sBAAsBC,IAAAA,aAAM,EAAgB;IAElD;;GAEC,GACD,MAAMC,sBAAsBC,IAAAA,kBAAW,EAAC;QACtC,IAAI;YACFd,WAAW;YAEX,MAAMe,WAAW,MAAMC,MAAM;YAC7B,IAAI,CAACD,SAASE,EAAE,EAAE;gBAChB,MAAM,IAAIC,MAAM;YAClB;YAEA,MAAMC,SAAS,MAAMJ,SAASK,IAAI;YAClC,IAAID,OAAOE,OAAO,EAAE;gBAClB1B,kBAAkBwB,OAAOG,IAAI,CAAC5B,cAAc,IAAI,EAAE;YACpD,OAAO;gBACLJ,SAAS;oBACPiC,MAAM;oBACNC,SAASL,OAAOM,KAAK,EAAED,WAAW;gBACpC;YACF;QACF,EAAE,OAAOC,OAAO;YACdnC,SAAS;gBACPiC,MAAM;gBACNC,SAASC,iBAAiBP,QAAQO,MAAMD,OAAO,GAAG;YACpD;QACF,SAAU;YACRxB,WAAW;QACb;IACF,GAAG;QAACV;KAAS;IAEb;;GAEC,GACD,MAAMoC,iBAAiBZ,IAAAA,kBAAW,EAAC;QACjC,IAAI;YACF,MAAMC,WAAW,MAAMC,MAAM;YAC7B,IAAI,CAACD,SAASE,EAAE,EAAE;gBAChB;YACF;YAEA,MAAME,SAAS,MAAMJ,SAASK,IAAI;YAClC,IAAID,OAAOE,OAAO,EAAE;gBAClBvB,aAAaqB,OAAOG,IAAI,CAACzB,SAAS,IAAI,EAAE;YAC1C;QACF,EAAE,OAAO4B,OAAO;YACd,6CAA6C;YAC7CE,QAAQF,KAAK,CAAC,8BAA8BA;QAC9C;IACF,GAAG,EAAE;IAEL,qBAAqB;IACrBG,IAAAA,gBAAS,EAAC;QACRf;QACAa;IACF,GAAG;QAACb;QAAqBa;KAAe;IAExC;;GAEC,GACD,MAAMG,iBAAiBf,IAAAA,kBAAW,EAAC,CAACgB;QAClCxB,yBAAyBwB;QACzBpB,sBAAsBoB,cAAcC,UAAU,IAAI;QAClD7B,cAAc;IAChB,GAAG,EAAE;IAEL;;GAEC,GACD,MAAM8B,yBAAyBlB,IAAAA,kBAAW,EAAC;QACzCR,yBAAyB;QACzBI,sBAAsB;QACtBR,cAAc;IAChB,GAAG,EAAE;IAEL;;GAEC,GACD,MAAM+B,oBAAoBnB,IAAAA,kBAAW,EAAC,CAACgB;QACrCtB,yBAAyBsB;QACzB1B,sBAAsB;IACxB,GAAG,EAAE;IAEL;;GAEC,GACD,MAAM8B,kBAAkBpB,IAAAA,kBAAW,EAAC,CAACgB;QACnC,qDAAqD;QACrDtC,OAAO2C,IAAI,CAAC,CAAC,sBAAsB,EAAEL,cAAcM,EAAE,CAAC,WAAW,CAAC;IACpE,GAAG;QAAC5C;KAAO;IAEX;;GAEC,GACD,MAAM6C,uBAAuBvB,IAAAA,kBAAW,EAAC,CAACgB;QACxC,oDAAoD;QACpDtC,OAAO2C,IAAI,CAAC,CAAC,sBAAsB,EAAEL,cAAcM,EAAE,CAAC,SAAS,CAAC;IAClE,GAAG;QAAC5C;KAAO;IAEX;;GAEC,GACD,MAAM8C,eAAexB,IAAAA,kBAAW,EAAC,OAAOQ;QACtC,IAAI;YACF,MAAMiB,SAAS,CAAC,CAAClC;YAEjB,gCAAgC;YAChC,MAAMmC,aAAa;gBACjB,GAAGlB,IAAI;gBACPS,YAAYtB,sBAAsB;YACpC;YAEA,MAAMgC,MAAMF,SAAS,CAAC,0BAA0B,EAAElC,sBAAsB+B,EAAE,EAAE,GAAG;YAC/E,MAAMM,SAASH,SAAS,QAAQ;YAEhC,MAAMxB,WAAW,MAAMC,MAAMyB,KAAK;gBAChCC;gBACAC,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9CC,MAAMC,KAAKC,SAAS,CAACN;YACvB;YAEA,MAAMrB,SAAS,MAAMJ,SAASK,IAAI;YAElC,IAAID,OAAOE,OAAO,EAAE;gBAClB/B,SAAS;oBACPiC,MAAM;oBACNC,SAASe,SAAS,uCAAuC;gBAC3D;gBAEA,2CAA2C;gBAC3C,IAAI,CAACA,UAAUpB,OAAOG,IAAI,EAAEc,IAAI;oBAC9BzB,oBAAoBoC,OAAO,GAAG5B,OAAOG,IAAI,CAACc,EAAE;gBAC9C;gBAEA,6BAA6B;gBAC7B,MAAMvB;gBAEN,aAAa;gBACbX,cAAc;gBACdI,yBAAyB;gBACzBI,sBAAsB;gBAEtB,kDAAkD;gBAClD,IAAIC,oBAAoBoC,OAAO,EAAE;oBAC/BC,WAAW;wBACT,MAAMC,UAAUC,SAASC,aAAa,CAAC,CAAC,cAAc,EAAExC,oBAAoBoC,OAAO,CAAC,EAAE,CAAC;wBACvF,IAAIE,SAAS;4BACXA,QAAQG,cAAc,CAAC;gCAAEC,UAAU;gCAAUC,OAAO;4BAAS;wBAC/D;wBACA3C,oBAAoBoC,OAAO,GAAG;oBAChC,GAAG;gBACL;YACF,OAAO;gBACLzD,SAAS;oBACPiC,MAAM;oBACNC,SAASL,OAAOM,KAAK,EAAED,WAAW;gBACpC;YACF;QACF,EAAE,OAAOC,OAAO;YACdnC,SAAS;gBACPiC,MAAM;gBACNC,SAASC,iBAAiBP,QAAQO,MAAMD,OAAO,GAAG;YACpD;QACF;IACF,GAAG;QAACnB;QAAuBI;QAAoBnB;QAAUuB;KAAoB;IAE7E;;GAEC,GACD,MAAM0C,sBAAsBzC,IAAAA,kBAAW,EAAC;QACtC,IAAI,CAACP,uBAAuB;QAE5B,IAAI;YACF,MAAMQ,WAAW,MAAMC,MAAM,CAAC,0BAA0B,EAAET,sBAAsB6B,EAAE,EAAE,EAAE;gBACpFM,QAAQ;YACV;YAEA,MAAMvB,SAAS,MAAMJ,SAASK,IAAI;YAElC,IAAID,OAAOE,OAAO,EAAE;gBAClB/B,SAAS;oBACPiC,MAAM;oBACNC,SAAS;gBACX;gBAEA,6BAA6B;gBAC7B,MAAMX;gBAEN,eAAe;gBACfT,sBAAsB;gBACtBI,yBAAyB;YAC3B,OAAO;gBACLlB,SAAS;oBACPiC,MAAM;oBACNC,SAASL,OAAOM,KAAK,EAAED,WAAW;gBACpC;YACF;QACF,EAAE,OAAOC,OAAO;YACdnC,SAAS;gBACPiC,MAAM;gBACNC,SAASC,iBAAiBP,QAAQO,MAAMD,OAAO,GAAG;YACpD;QACF;IACF,GAAG;QAACjB;QAAuBjB;QAAUuB;KAAoB;IAEzD;;GAEC,GACD,MAAM2C,aAAa,CAACC;QAClB,MAAMC,OAAO,IAAIC,KAAKF;QACtB,OAAOC,KAAKE,kBAAkB,CAAC,SAAS;YACtCC,MAAM;YACNC,OAAO;YACPC,KAAK;QACP;IACF;IAEA,uBAAuB;IACvB,MAAMC,UAAsC;QAC1C;YACEC,KAAK;YACLC,OAAO;YACPC,UAAU;QACZ;QACA;YACEF,KAAK;YACLC,OAAO;YACPC,UAAU;YACVC,QAAQ,CAACC;gBACP,IAAI,CAACA,OAAO,OAAO;gBACnB,MAAMC,WAAWzE,UAAU0E,IAAI,CAACC,CAAAA,IAAKA,EAAEpC,EAAE,KAAKiC;gBAC9C,OAAOC,UAAUG,QAAQ;YAC3B;QACF;QACA;YACER,KAAK;YACLC,OAAO;YACPC,UAAU;YACVC,QAAQ,CAACC,QAAUA,QAAQb,WAAWa,SAAmB;QAC3D;QACA;YACEJ,KAAK;YACLC,OAAO;YACPC,UAAU;YACVC,QAAQ,CAACC,QAAUA,QAAQb,WAAWa,SAAmB;QAC3D;QACA;YACEJ,KAAK;YACLC,OAAO;YACPC,UAAU;YACVO,YAAY;YACZC,YAAY;YACZC,eAAe;gBACb;oBAAEV,OAAO;oBAASG,OAAO;gBAAQ;gBACjC;oBAAEH,OAAO;oBAAaG,OAAO;gBAAY;aAC1C;YACDD,QAAQ,CAACC;gBACP,MAAMQ,SAAiC;oBACrCC,OAAO;oBACPC,WAAW;gBACb;gBACA,qBACE,qBAACC;oBACCC,WAAW,CAAC,wEAAwE,EAClFZ,UAAU,UACN,8BACA,iCACJ;8BAEDQ,MAAM,CAACR,MAAgB,IAAIA;;YAGlC;QACF;QACA;YACEJ,KAAK;YACLC,OAAO;YACPC,UAAU;YACVC,QAAQ,CAACc,GAAGC,oBACV,sBAACC;oBAAIH,WAAU;;sCACb,qBAACI,cAAM;4BACLC,SAAQ;4BACRC,MAAK;4BACLC,SAAS,CAACC;gCACRA,EAAEC,eAAe;gCACjBC,OAAOrB,QAAQ,CAACsB,IAAI,GAAG,CAAC,qBAAqB,EAAE,AAACT,IAAsB/C,EAAE,EAAE;4BAC5E;sCACD;;sCAGD,qBAACiD,cAAM;4BACLC,SAAQ;4BACRC,MAAK;4BACLC,SAAS,CAACC;gCACRA,EAAEC,eAAe;gCACjBxD,gBAAgBiD;4BAClB;sCACD;;sCAGD,qBAACE,cAAM;4BACLC,SAAQ;4BACRC,MAAK;4BACLC,SAAS,CAACC;gCACRA,EAAEC,eAAe;gCACjBrD,qBAAqB8C;4BACvB;sCACD;;;;QAKP;KACD;IAED,qBAAqB;IACrB,MAAMU,aAA0B;QAC9B;YACEpB,MAAM;YACNP,OAAO;YACP3C,MAAM;YACNuE,UAAU;YACVC,aAAa;QACf;QACA;YACEtB,MAAM;YACNP,OAAO;YACP3C,MAAM;YACNuE,UAAU;YACVC,aAAa;QACf;QACA;YACEtB,MAAM;YACNP,OAAO;YACP3C,MAAM;YACNuE,UAAU;YACVC,aAAa;YACbC,UAAU;QACZ;QACA;YACEvB,MAAM;YACNP,OAAO;YACP3C,MAAM;YACNuE,UAAU;YACVE,UAAU;QACZ;QACA;YACEvB,MAAM;YACNP,OAAO;YACP3C,MAAM;YACNuE,UAAU;YACVE,UAAU;QACZ;QACA;YACEvB,MAAM;YACNP,OAAO;YACP3C,MAAM;YACNuE,UAAU;YACVG,SAAS;gBACP;oBAAE/B,OAAO;oBAASG,OAAO;gBAAQ;gBACjC;oBAAEH,OAAO;oBAAaG,OAAO;gBAAY;aAC1C;QACH;KACD;IAED,qBACE,sBAACe;QAAIH,WAAU;;0BAEb,sBAACG;gBAAIH,WAAU;;kCACb,sBAACG;;0CACC,qBAACc;gCAAGjB,WAAU;0CAAmC;;0CACjD,qBAACkB;gCAAElB,WAAU;0CAAqB;;;;kCAEpC,qBAACI,cAAM;wBACLC,SAAQ;wBACRE,SAASxD;wBACToE,cAAW;wBACXC,eAAY;kCACb;;;;0BAMH,qBAACC,gCAAe;gBACdC,QAAQtG;gBACRuG,UAAU;oBACRtG,cAAc,CAACD;oBACf,IAAIA,YAAY;wBACdK,yBAAyB;wBACzBI,sBAAsB;oBACxB;gBACF;gBACA+F,OAAOpG,wBAAwB,uBAAuB;gBACtDqG,QAAQb;gBACRc,QAAQtG,wBAAwBuG,+CAAyB,GAAGC,+CAAyB;gBACrFC,UAAUxE;gBACVyE,UAAU;oBACR7G,cAAc;oBACdI,yBAAyB;oBACzBI,sBAAsB;gBACxB;gBACAsG,aAAa3G,yBAAyB,CAAC;gBACvC4G,aAAa5G,wBAAwB,yBAAyB;0BAG9D,cAAA,sBAAC+E;oBAAIH,WAAU;;sCACb,qBAACf;4BAAMe,WAAU;sCAA+C;;sCAGhE,qBAACiC,kCAAgB;4BACfrH,WAAWA;4BACXY,oBAAoBA;4BACpB0G,UAAUzG;4BACVqF,aAAY;;sCAEd,qBAACI;4BAAElB,WAAU;sCAA6B;;;;;0BAO9C,qBAACmC,4CAAS;gBACR9F,MAAM5B;gBACNsE,SAASA;gBACTjE,SAASA;gBACTsH,YAAYxF;gBACZyF,UAAUrF;gBACVsF,YAAY7H,eAAe8H,MAAM;gBACjCC,aAAa;gBACbC,UAAU;gBACVC,SAAQ;;0BAIV,qBAACC,4BAAa;gBACZrB,QAAQpG;gBACR0H,SAAS;oBACPzH,sBAAsB;oBACtBI,yBAAyB;gBAC3B;gBACAsH,WAAWvE;gBACXkD,OAAM;gBACNjF,SAAS,CAAC,iCAAiC,EAAEjB,uBAAuBkE,KAAK,iFAAiF,CAAC;gBAC3JsD,cAAa;gBACbC,aAAY;gBACZ1C,SAAQ;;;;AAIhB"}