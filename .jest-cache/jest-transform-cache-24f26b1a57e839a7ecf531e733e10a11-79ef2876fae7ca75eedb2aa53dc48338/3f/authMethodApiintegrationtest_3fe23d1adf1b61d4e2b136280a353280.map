{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/__tests__/integration/authMethodApi.integration.test.ts"],"sourcesContent":["/**\n * Integration tests for auth method configuration API endpoints\n * \n * Tests:\n * - GET /api/admin/settings/auth-method\n * - PUT /api/admin/settings/auth-method\n */\n\nimport { GET, PUT } from '@/app/api/admin/settings/auth-method/route';\nimport * as settingsService from '@/services/settingsService';\n\n// Mock settingsService\njest.mock('@/services/settingsService', () => ({\n  getDefaultAuthMethod: jest.fn(),\n  updateDefaultAuthMethod: jest.fn(),\n}));\n\n// Mock Supabase auth\njest.mock('@supabase/auth-helpers-nextjs', () => ({\n  createRouteHandlerClient: jest.fn(() => ({\n    auth: {\n      getSession: jest.fn(),\n    },\n  })),\n}));\n\n// Mock Next.js headers\njest.mock('next/headers', () => ({\n  cookies: jest.fn(),\n}));\n\ndescribe('Auth Method API Integration Tests', () => {\n  const mockGetDefaultAuthMethod = settingsService.getDefaultAuthMethod as jest.MockedFunction<\n    typeof settingsService.getDefaultAuthMethod\n  >;\n  const mockUpdateDefaultAuthMethod = settingsService.updateDefaultAuthMethod as jest.MockedFunction<\n    typeof settingsService.updateDefaultAuthMethod\n  >;\n\n  let mockAuth: any;\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    const { createRouteHandlerClient } = require('@supabase/auth-helpers-nextjs');\n    mockAuth = createRouteHandlerClient();\n  });\n\n  describe('GET /api/admin/settings/auth-method', () => {\n    it('should return current auth method when authenticated', async () => {\n      // Mock authenticated session\n      mockAuth.auth.getSession.mockResolvedValue({\n        data: { session: { user: { id: 'user-1' } } },\n        error: null,\n      });\n\n      // Mock service response\n      mockGetDefaultAuthMethod.mockResolvedValue({\n        success: true,\n        data: 'email_matching',\n      });\n\n      const request = new Request('http://localhost:3000/api/admin/settings/auth-method');\n      const response = await GET(request);\n      const data = await response.json();\n\n      expect(response.status).toBe(200);\n      expect(data.success).toBe(true);\n      expect(data.data.defaultAuthMethod).toBe('email_matching');\n    });\n\n    it('should return 401 when not authenticated', async () => {\n      // Mock no session\n      mockAuth.auth.getSession.mockResolvedValue({\n        data: { session: null },\n        error: null,\n      });\n\n      const request = new Request('http://localhost:3000/api/admin/settings/auth-method');\n      const response = await GET(request);\n      const data = await response.json();\n\n      expect(response.status).toBe(401);\n      expect(data.success).toBe(false);\n      expect(data.error.code).toBe('UNAUTHORIZED');\n    });\n\n    it('should return 404 when setting not found', async () => {\n      mockAuth.auth.getSession.mockResolvedValue({\n        data: { session: { user: { id: 'user-1' } } },\n        error: null,\n      });\n\n      mockGetDefaultAuthMethod.mockResolvedValue({\n        success: false,\n        error: {\n          code: 'NOT_FOUND',\n          message: 'Setting not found',\n        },\n      });\n\n      const request = new Request('http://localhost:3000/api/admin/settings/auth-method');\n      const response = await GET(request);\n      const data = await response.json();\n\n      expect(response.status).toBe(404);\n      expect(data.success).toBe(false);\n    });\n\n    it('should return 500 when service fails', async () => {\n      mockAuth.auth.getSession.mockResolvedValue({\n        data: { session: { user: { id: 'user-1' } } },\n        error: null,\n      });\n\n      mockGetDefaultAuthMethod.mockResolvedValue({\n        success: false,\n        error: {\n          code: 'DATABASE_ERROR',\n          message: 'Database error',\n        },\n      });\n\n      const request = new Request('http://localhost:3000/api/admin/settings/auth-method');\n      const response = await GET(request);\n      const data = await response.json();\n\n      expect(response.status).toBe(500);\n      expect(data.success).toBe(false);\n    });\n  });\n\n  describe('PUT /api/admin/settings/auth-method', () => {\n    it('should update auth method without updating guests', async () => {\n      mockAuth.auth.getSession.mockResolvedValue({\n        data: { session: { user: { id: 'user-1' } } },\n        error: null,\n      });\n\n      mockUpdateDefaultAuthMethod.mockResolvedValue({\n        success: true,\n        data: { updatedGuestsCount: 0 },\n      });\n\n      const request = new Request('http://localhost:3000/api/admin/settings/auth-method', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          defaultAuthMethod: 'magic_link',\n          updateExistingGuests: false,\n        }),\n      });\n\n      const response = await PUT(request);\n      const data = await response.json();\n\n      expect(response.status).toBe(200);\n      expect(data.success).toBe(true);\n      expect(data.data.defaultAuthMethod).toBe('magic_link');\n      expect(data.data.updatedGuestsCount).toBe(0);\n      expect(mockUpdateDefaultAuthMethod).toHaveBeenCalledWith('magic_link', false);\n    });\n\n    it('should update auth method and bulk update guests', async () => {\n      mockAuth.auth.getSession.mockResolvedValue({\n        data: { session: { user: { id: 'user-1' } } },\n        error: null,\n      });\n\n      mockUpdateDefaultAuthMethod.mockResolvedValue({\n        success: true,\n        data: { updatedGuestsCount: 5 },\n      });\n\n      const request = new Request('http://localhost:3000/api/admin/settings/auth-method', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          defaultAuthMethod: 'email_matching',\n          updateExistingGuests: true,\n        }),\n      });\n\n      const response = await PUT(request);\n      const data = await response.json();\n\n      expect(response.status).toBe(200);\n      expect(data.success).toBe(true);\n      expect(data.data.defaultAuthMethod).toBe('email_matching');\n      expect(data.data.updatedGuestsCount).toBe(5);\n      expect(mockUpdateDefaultAuthMethod).toHaveBeenCalledWith('email_matching', true);\n    });\n\n    it('should return 401 when not authenticated', async () => {\n      mockAuth.auth.getSession.mockResolvedValue({\n        data: { session: null },\n        error: null,\n      });\n\n      const request = new Request('http://localhost:3000/api/admin/settings/auth-method', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          defaultAuthMethod: 'magic_link',\n        }),\n      });\n\n      const response = await PUT(request);\n      const data = await response.json();\n\n      expect(response.status).toBe(401);\n      expect(data.success).toBe(false);\n      expect(data.error.code).toBe('UNAUTHORIZED');\n    });\n\n    it('should return 400 for invalid auth method', async () => {\n      mockAuth.auth.getSession.mockResolvedValue({\n        data: { session: { user: { id: 'user-1' } } },\n        error: null,\n      });\n\n      const request = new Request('http://localhost:3000/api/admin/settings/auth-method', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          defaultAuthMethod: 'invalid_method',\n        }),\n      });\n\n      const response = await PUT(request);\n      const data = await response.json();\n\n      expect(response.status).toBe(400);\n      expect(data.success).toBe(false);\n      expect(data.error.code).toBe('VALIDATION_ERROR');\n    });\n\n    it('should return 400 for missing required fields', async () => {\n      mockAuth.auth.getSession.mockResolvedValue({\n        data: { session: { user: { id: 'user-1' } } },\n        error: null,\n      });\n\n      const request = new Request('http://localhost:3000/api/admin/settings/auth-method', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({}),\n      });\n\n      const response = await PUT(request);\n      const data = await response.json();\n\n      expect(response.status).toBe(400);\n      expect(data.success).toBe(false);\n      expect(data.error.code).toBe('VALIDATION_ERROR');\n    });\n\n    it('should return 500 when service fails', async () => {\n      mockAuth.auth.getSession.mockResolvedValue({\n        data: { session: { user: { id: 'user-1' } } },\n        error: null,\n      });\n\n      mockUpdateDefaultAuthMethod.mockResolvedValue({\n        success: false,\n        error: {\n          code: 'DATABASE_ERROR',\n          message: 'Failed to update',\n        },\n      });\n\n      const request = new Request('http://localhost:3000/api/admin/settings/auth-method', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          defaultAuthMethod: 'magic_link',\n        }),\n      });\n\n      const response = await PUT(request);\n      const data = await response.json();\n\n      expect(response.status).toBe(500);\n      expect(data.success).toBe(false);\n    });\n\n    it('should default updateExistingGuests to false when not provided', async () => {\n      mockAuth.auth.getSession.mockResolvedValue({\n        data: { session: { user: { id: 'user-1' } } },\n        error: null,\n      });\n\n      mockUpdateDefaultAuthMethod.mockResolvedValue({\n        success: true,\n        data: { updatedGuestsCount: 0 },\n      });\n\n      const request = new Request('http://localhost:3000/api/admin/settings/auth-method', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          defaultAuthMethod: 'magic_link',\n        }),\n      });\n\n      const response = await PUT(request);\n      const data = await response.json();\n\n      expect(response.status).toBe(200);\n      expect(mockUpdateDefaultAuthMethod).toHaveBeenCalledWith('magic_link', false);\n    });\n  });\n});\n"],"names":["jest","mock","getDefaultAuthMethod","fn","updateDefaultAuthMethod","createRouteHandlerClient","auth","getSession","cookies","describe","mockGetDefaultAuthMethod","settingsService","mockUpdateDefaultAuthMethod","mockAuth","beforeEach","clearAllMocks","require","it","mockResolvedValue","data","session","user","id","error","success","request","Request","response","GET","json","expect","status","toBe","defaultAuthMethod","code","message","updatedGuestsCount","method","headers","body","JSON","stringify","updateExistingGuests","PUT","toHaveBeenCalledWith"],"mappings":"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"}