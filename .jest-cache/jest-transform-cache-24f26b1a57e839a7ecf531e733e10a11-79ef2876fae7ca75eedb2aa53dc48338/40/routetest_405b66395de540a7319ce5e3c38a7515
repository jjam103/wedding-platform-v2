34b8f1e8d64755c11146757882ceb576
"use strict";
// Mock dependencies
jest.mock('@/services/rsvpManagementService');
jest.mock('@/lib/apiHelpers', ()=>{
    const actual = jest.requireActual('@/lib/apiHelpers');
    return {
        ...actual,
        withAuth: jest.fn()
    };
});
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _route = require("./route");
const _rsvpManagementService = /*#__PURE__*/ _interop_require_wildcard(require("../../../../services/rsvpManagementService"));
const _apiHelpers = /*#__PURE__*/ _interop_require_wildcard(require("../../../../lib/apiHelpers"));
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Helper to create test requests
function createTestRequest(url) {
    return new Request(url, {
        method: 'GET',
        headers: {
            'Content-Type': 'application/json'
        }
    });
}
describe('GET /api/admin/rsvps', ()=>{
    const mockListRSVPs = _rsvpManagementService.listRSVPs;
    const mockWithAuth = _apiHelpers.withAuth;
    beforeEach(()=>{
        jest.clearAllMocks();
        // Mock withAuth to call the handler directly
        mockWithAuth.mockImplementation(async (handler)=>{
            return handler('test-user-id');
        });
    });
    describe('Success Cases', ()=>{
        it('should return paginated RSVPs with statistics when called with valid parameters', async ()=>{
            // Arrange
            const mockResponse = {
                data: [
                    {
                        id: 'rsvp-1',
                        guestId: 'guest-1',
                        guestFirstName: 'John',
                        guestLastName: 'Doe',
                        guestEmail: 'john@example.com',
                        eventId: 'event-1',
                        eventName: 'Wedding Ceremony',
                        activityId: null,
                        activityName: null,
                        status: 'attending',
                        guestCount: 2,
                        dietaryNotes: null,
                        specialRequirements: null,
                        notes: null,
                        respondedAt: '2024-01-15T10:00:00Z',
                        createdAt: '2024-01-10T10:00:00Z',
                        updatedAt: '2024-01-15T10:00:00Z'
                    }
                ],
                pagination: {
                    page: 1,
                    limit: 50,
                    total: 1,
                    totalPages: 1
                },
                statistics: {
                    totalRSVPs: 1,
                    byStatus: {
                        attending: 1,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 2
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?page=1&limit=50');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(data.data).toEqual(mockResponse);
            expect(mockListRSVPs).toHaveBeenCalledWith({}, {
                page: 1,
                limit: 50
            });
        });
        it('should apply filters when provided in query parameters', async ()=>{
            // Arrange
            const mockResponse = {
                data: [],
                pagination: {
                    page: 1,
                    limit: 50,
                    total: 0,
                    totalPages: 0
                },
                statistics: {
                    totalRSVPs: 0,
                    byStatus: {
                        attending: 0,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 0
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?eventId=00000000-0000-0000-0000-000000000001&status=attending&searchQuery=John');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(mockListRSVPs).toHaveBeenCalledWith({
                eventId: '00000000-0000-0000-0000-000000000001',
                status: 'attending',
                searchQuery: 'John'
            }, {
                page: 1,
                limit: 50
            });
        });
        it('should use default pagination values when not provided', async ()=>{
            // Arrange
            const mockResponse = {
                data: [],
                pagination: {
                    page: 1,
                    limit: 50,
                    total: 0,
                    totalPages: 0
                },
                statistics: {
                    totalRSVPs: 0,
                    byStatus: {
                        attending: 0,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 0
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            const response = await (0, _route.GET)(request);
            // Assert
            expect(response.status).toBe(200);
            expect(mockListRSVPs).toHaveBeenCalledWith({}, {
                page: 1,
                limit: 50
            });
        });
        it('should handle multiple filters simultaneously', async ()=>{
            // Arrange
            const mockResponse = {
                data: [],
                pagination: {
                    page: 2,
                    limit: 25,
                    total: 0,
                    totalPages: 0
                },
                statistics: {
                    totalRSVPs: 0,
                    byStatus: {
                        attending: 0,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 0
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?eventId=00000000-0000-0000-0000-000000000001&activityId=00000000-0000-0000-0000-000000000002&status=pending&guestId=00000000-0000-0000-0000-000000000003&page=2&limit=25');
            // Act
            const response = await (0, _route.GET)(request);
            // Assert
            expect(response.status).toBe(200);
            expect(mockListRSVPs).toHaveBeenCalledWith({
                eventId: '00000000-0000-0000-0000-000000000001',
                activityId: '00000000-0000-0000-0000-000000000002',
                status: 'pending',
                guestId: '00000000-0000-0000-0000-000000000003'
            }, {
                page: 2,
                limit: 25
            });
        });
    });
    describe('Validation Errors', ()=>{
        it('should return 400 when eventId is not a valid UUID', async ()=>{
            // Arrange
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?eventId=invalid-uuid');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
            expect(data.error.message).toBe('Invalid query parameters');
            expect(mockListRSVPs).not.toHaveBeenCalled();
        });
        it('should return 400 when status is invalid', async ()=>{
            // Arrange
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?status=invalid-status');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
            expect(mockListRSVPs).not.toHaveBeenCalled();
        });
        it('should return 400 when page is not a positive integer', async ()=>{
            // Arrange
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?page=-1');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
            expect(mockListRSVPs).not.toHaveBeenCalled();
        });
        it('should return 400 when limit exceeds maximum', async ()=>{
            // Arrange
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?limit=150');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
            expect(mockListRSVPs).not.toHaveBeenCalled();
        });
        it('should return 400 when searchQuery exceeds maximum length', async ()=>{
            // Arrange
            const longQuery = 'a'.repeat(101);
            const request = createTestRequest(`http://localhost:3000/api/admin/rsvps?searchQuery=${longQuery}`);
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
            expect(mockListRSVPs).not.toHaveBeenCalled();
        });
    });
    describe('Service Errors', ()=>{
        it('should return 500 when service returns DATABASE_ERROR', async ()=>{
            // Arrange
            mockListRSVPs.mockResolvedValue({
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: 'Database connection failed'
                }
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(500);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('DATABASE_ERROR');
            expect(data.error.message).toBe('Database connection failed');
        });
        it('should return 400 when service returns VALIDATION_ERROR', async ()=>{
            // Arrange
            mockListRSVPs.mockResolvedValue({
                success: false,
                error: {
                    code: 'VALIDATION_ERROR',
                    message: 'Invalid filter parameters',
                    details: [
                        {
                            field: 'eventId',
                            message: 'Invalid UUID'
                        }
                    ]
                }
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
        });
        it('should return 500 when service returns UNKNOWN_ERROR', async ()=>{
            // Arrange
            mockListRSVPs.mockResolvedValue({
                success: false,
                error: {
                    code: 'UNKNOWN_ERROR',
                    message: 'An unexpected error occurred'
                }
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(500);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('UNKNOWN_ERROR');
        });
    });
    describe('Error Handling', ()=>{
        it('should return 500 when service throws an exception', async ()=>{
            // Arrange
            mockListRSVPs.mockRejectedValue(new Error('Unexpected service error'));
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(500);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('INTERNAL_ERROR');
            expect(data.error.message).toBe('Failed to fetch RSVPs');
        });
        it('should log error details when exception occurs', async ()=>{
            // Arrange
            const consoleErrorSpy = jest.spyOn(console, 'error').mockImplementation();
            mockListRSVPs.mockRejectedValue(new Error('Test error'));
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            await (0, _route.GET)(request);
            // Assert
            expect(consoleErrorSpy).toHaveBeenCalledWith('GET /api/admin/rsvps error:', expect.objectContaining({
                error: 'Test error',
                stack: expect.any(String)
            }));
            consoleErrorSpy.mockRestore();
        });
    });
    describe('Authentication', ()=>{
        it('should call withAuth wrapper', async ()=>{
            // Arrange
            const mockResponse = {
                data: [],
                pagination: {
                    page: 1,
                    limit: 50,
                    total: 0,
                    totalPages: 0
                },
                statistics: {
                    totalRSVPs: 0,
                    byStatus: {
                        attending: 0,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 0
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            await (0, _route.GET)(request);
            // Assert
            expect(_apiHelpers.withAuth).toHaveBeenCalled();
        });
    });
    describe('Edge Cases', ()=>{
        it('should handle empty result set', async ()=>{
            // Arrange
            const mockResponse = {
                data: [],
                pagination: {
                    page: 1,
                    limit: 50,
                    total: 0,
                    totalPages: 0
                },
                statistics: {
                    totalRSVPs: 0,
                    byStatus: {
                        attending: 0,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 0
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(data.data.data).toEqual([]);
            expect(data.data.pagination.total).toBe(0);
        });
        it('should handle large page numbers', async ()=>{
            // Arrange
            const mockResponse = {
                data: [],
                pagination: {
                    page: 999,
                    limit: 50,
                    total: 0,
                    totalPages: 0
                },
                statistics: {
                    totalRSVPs: 0,
                    byStatus: {
                        attending: 0,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 0
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?page=999');
            // Act
            const response = await (0, _route.GET)(request);
            // Assert
            expect(response.status).toBe(200);
            expect(mockListRSVPs).toHaveBeenCalledWith({}, {
                page: 999,
                limit: 50
            });
        });
        it('should handle all valid RSVP statuses', async ()=>{
            // Arrange
            const statuses = [
                'pending',
                'attending',
                'declined',
                'maybe'
            ];
            for (const status of statuses){
                mockListRSVPs.mockResolvedValue({
                    success: true,
                    data: {
                        data: [],
                        pagination: {
                            page: 1,
                            limit: 50,
                            total: 0,
                            totalPages: 0
                        },
                        statistics: {
                            totalRSVPs: 0,
                            byStatus: {
                                attending: 0,
                                declined: 0,
                                maybe: 0,
                                pending: 0
                            },
                            totalGuestCount: 0
                        }
                    }
                });
                const request = createTestRequest(`http://localhost:3000/api/admin/rsvps?status=${status}`);
                // Act
                const response = await (0, _route.GET)(request);
                // Assert
                expect(response.status).toBe(200);
                expect(mockListRSVPs).toHaveBeenCalledWith({
                    status
                }, {
                    page: 1,
                    limit: 50
                });
            }
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FwaS9hZG1pbi9yc3Zwcy9yb3V0ZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdFVCB9IGZyb20gJy4vcm91dGUnO1xuaW1wb3J0ICogYXMgcnN2cE1hbmFnZW1lbnRTZXJ2aWNlIGZyb20gJ0Avc2VydmljZXMvcnN2cE1hbmFnZW1lbnRTZXJ2aWNlJztcbmltcG9ydCAqIGFzIGFwaUhlbHBlcnMgZnJvbSAnQC9saWIvYXBpSGVscGVycyc7XG5cbi8vIEhlbHBlciB0byBjcmVhdGUgdGVzdCByZXF1ZXN0c1xuZnVuY3Rpb24gY3JlYXRlVGVzdFJlcXVlc3QodXJsOiBzdHJpbmcpOiBSZXF1ZXN0IHtcbiAgcmV0dXJuIG5ldyBSZXF1ZXN0KHVybCwge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gIH0pO1xufVxuXG4vLyBNb2NrIGRlcGVuZGVuY2llc1xuamVzdC5tb2NrKCdAL3NlcnZpY2VzL3JzdnBNYW5hZ2VtZW50U2VydmljZScpO1xuamVzdC5tb2NrKCdAL2xpYi9hcGlIZWxwZXJzJywgKCkgPT4ge1xuICBjb25zdCBhY3R1YWwgPSBqZXN0LnJlcXVpcmVBY3R1YWwoJ0AvbGliL2FwaUhlbHBlcnMnKTtcbiAgcmV0dXJuIHtcbiAgICAuLi5hY3R1YWwsXG4gICAgd2l0aEF1dGg6IGplc3QuZm4oKSxcbiAgfTtcbn0pO1xuXG5kZXNjcmliZSgnR0VUIC9hcGkvYWRtaW4vcnN2cHMnLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tMaXN0UlNWUHMgPSByc3ZwTWFuYWdlbWVudFNlcnZpY2UubGlzdFJTVlBzIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248XG4gICAgdHlwZW9mIHJzdnBNYW5hZ2VtZW50U2VydmljZS5saXN0UlNWUHNcbiAgPjtcbiAgY29uc3QgbW9ja1dpdGhBdXRoID0gYXBpSGVscGVycy53aXRoQXV0aCBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiBhcGlIZWxwZXJzLndpdGhBdXRoPjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBcbiAgICAvLyBNb2NrIHdpdGhBdXRoIHRvIGNhbGwgdGhlIGhhbmRsZXIgZGlyZWN0bHlcbiAgICBtb2NrV2l0aEF1dGgubW9ja0ltcGxlbWVudGF0aW9uKGFzeW5jIChoYW5kbGVyKSA9PiB7XG4gICAgICByZXR1cm4gaGFuZGxlcigndGVzdC11c2VyLWlkJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTdWNjZXNzIENhc2VzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHBhZ2luYXRlZCBSU1ZQcyB3aXRoIHN0YXRpc3RpY3Mgd2hlbiBjYWxsZWQgd2l0aCB2YWxpZCBwYXJhbWV0ZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgbW9ja1Jlc3BvbnNlID0ge1xuICAgICAgICBkYXRhOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdyc3ZwLTEnLFxuICAgICAgICAgICAgZ3Vlc3RJZDogJ2d1ZXN0LTEnLFxuICAgICAgICAgICAgZ3Vlc3RGaXJzdE5hbWU6ICdKb2huJyxcbiAgICAgICAgICAgIGd1ZXN0TGFzdE5hbWU6ICdEb2UnLFxuICAgICAgICAgICAgZ3Vlc3RFbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nLFxuICAgICAgICAgICAgZXZlbnRJZDogJ2V2ZW50LTEnLFxuICAgICAgICAgICAgZXZlbnROYW1lOiAnV2VkZGluZyBDZXJlbW9ueScsXG4gICAgICAgICAgICBhY3Rpdml0eUlkOiBudWxsLFxuICAgICAgICAgICAgYWN0aXZpdHlOYW1lOiBudWxsLFxuICAgICAgICAgICAgc3RhdHVzOiAnYXR0ZW5kaW5nJyBhcyBjb25zdCxcbiAgICAgICAgICAgIGd1ZXN0Q291bnQ6IDIsXG4gICAgICAgICAgICBkaWV0YXJ5Tm90ZXM6IG51bGwsXG4gICAgICAgICAgICBzcGVjaWFsUmVxdWlyZW1lbnRzOiBudWxsLFxuICAgICAgICAgICAgbm90ZXM6IG51bGwsXG4gICAgICAgICAgICByZXNwb25kZWRBdDogJzIwMjQtMDEtMTVUMTA6MDA6MDBaJyxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogJzIwMjQtMDEtMTBUMTA6MDA6MDBaJyxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogJzIwMjQtMDEtMTVUMTA6MDA6MDBaJyxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgICAgcGFnZTogMSxcbiAgICAgICAgICBsaW1pdDogNTAsXG4gICAgICAgICAgdG90YWw6IDEsXG4gICAgICAgICAgdG90YWxQYWdlczogMSxcbiAgICAgICAgfSxcbiAgICAgICAgc3RhdGlzdGljczoge1xuICAgICAgICAgIHRvdGFsUlNWUHM6IDEsXG4gICAgICAgICAgYnlTdGF0dXM6IHtcbiAgICAgICAgICAgIGF0dGVuZGluZzogMSxcbiAgICAgICAgICAgIGRlY2xpbmVkOiAwLFxuICAgICAgICAgICAgbWF5YmU6IDAsXG4gICAgICAgICAgICBwZW5kaW5nOiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdG90YWxHdWVzdENvdW50OiAyLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgbW9ja0xpc3RSU1ZQcy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IG1vY2tSZXNwb25zZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlVGVzdFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vcnN2cHM/cGFnZT0xJmxpbWl0PTUwJyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZGF0YS5kYXRhKS50b0VxdWFsKG1vY2tSZXNwb25zZSk7XG4gICAgICBleHBlY3QobW9ja0xpc3RSU1ZQcykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIHt9LFxuICAgICAgICB7IHBhZ2U6IDEsIGxpbWl0OiA1MCB9XG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhcHBseSBmaWx0ZXJzIHdoZW4gcHJvdmlkZWQgaW4gcXVlcnkgcGFyYW1ldGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcbiAgICAgICAgZGF0YTogW10sXG4gICAgICAgIHBhZ2luYXRpb246IHsgcGFnZTogMSwgbGltaXQ6IDUwLCB0b3RhbDogMCwgdG90YWxQYWdlczogMCB9LFxuICAgICAgICBzdGF0aXN0aWNzOiB7XG4gICAgICAgICAgdG90YWxSU1ZQczogMCxcbiAgICAgICAgICBieVN0YXR1czogeyBhdHRlbmRpbmc6IDAsIGRlY2xpbmVkOiAwLCBtYXliZTogMCwgcGVuZGluZzogMCB9LFxuICAgICAgICAgIHRvdGFsR3Vlc3RDb3VudDogMCxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tMaXN0UlNWUHMubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiBtb2NrUmVzcG9uc2UsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZVRlc3RSZXF1ZXN0KFxuICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9yc3Zwcz9ldmVudElkPTAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMSZzdGF0dXM9YXR0ZW5kaW5nJnNlYXJjaFF1ZXJ5PUpvaG4nXG4gICAgICApO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KG1vY2tMaXN0UlNWUHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICB7XG4gICAgICAgICAgZXZlbnRJZDogJzAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMScsXG4gICAgICAgICAgc3RhdHVzOiAnYXR0ZW5kaW5nJyxcbiAgICAgICAgICBzZWFyY2hRdWVyeTogJ0pvaG4nLFxuICAgICAgICB9LFxuICAgICAgICB7IHBhZ2U6IDEsIGxpbWl0OiA1MCB9XG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1c2UgZGVmYXVsdCBwYWdpbmF0aW9uIHZhbHVlcyB3aGVuIG5vdCBwcm92aWRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcbiAgICAgICAgZGF0YTogW10sXG4gICAgICAgIHBhZ2luYXRpb246IHsgcGFnZTogMSwgbGltaXQ6IDUwLCB0b3RhbDogMCwgdG90YWxQYWdlczogMCB9LFxuICAgICAgICBzdGF0aXN0aWNzOiB7XG4gICAgICAgICAgdG90YWxSU1ZQczogMCxcbiAgICAgICAgICBieVN0YXR1czogeyBhdHRlbmRpbmc6IDAsIGRlY2xpbmVkOiAwLCBtYXliZTogMCwgcGVuZGluZzogMCB9LFxuICAgICAgICAgIHRvdGFsR3Vlc3RDb3VudDogMCxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tMaXN0UlNWUHMubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiBtb2NrUmVzcG9uc2UsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZVRlc3RSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3JzdnBzJyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KG1vY2tMaXN0UlNWUHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICB7fSxcbiAgICAgICAgeyBwYWdlOiAxLCBsaW1pdDogNTAgfVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG11bHRpcGxlIGZpbHRlcnMgc2ltdWx0YW5lb3VzbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSB7XG4gICAgICAgIGRhdGE6IFtdLFxuICAgICAgICBwYWdpbmF0aW9uOiB7IHBhZ2U6IDIsIGxpbWl0OiAyNSwgdG90YWw6IDAsIHRvdGFsUGFnZXM6IDAgfSxcbiAgICAgICAgc3RhdGlzdGljczoge1xuICAgICAgICAgIHRvdGFsUlNWUHM6IDAsXG4gICAgICAgICAgYnlTdGF0dXM6IHsgYXR0ZW5kaW5nOiAwLCBkZWNsaW5lZDogMCwgbWF5YmU6IDAsIHBlbmRpbmc6IDAgfSxcbiAgICAgICAgICB0b3RhbEd1ZXN0Q291bnQ6IDAsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBtb2NrTGlzdFJTVlBzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogbW9ja1Jlc3BvbnNlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVUZXN0UmVxdWVzdChcbiAgICAgICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vcnN2cHM/ZXZlbnRJZD0wMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDEmYWN0aXZpdHlJZD0wMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDImc3RhdHVzPXBlbmRpbmcmZ3Vlc3RJZD0wMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDMmcGFnZT0yJmxpbWl0PTI1J1xuICAgICAgKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QobW9ja0xpc3RSU1ZQcykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIHtcbiAgICAgICAgICBldmVudElkOiAnMDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAxJyxcbiAgICAgICAgICBhY3Rpdml0eUlkOiAnMDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAyJyxcbiAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgICBndWVzdElkOiAnMDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAzJyxcbiAgICAgICAgfSxcbiAgICAgICAgeyBwYWdlOiAyLCBsaW1pdDogMjUgfVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1ZhbGlkYXRpb24gRXJyb3JzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwMCB3aGVuIGV2ZW50SWQgaXMgbm90IGEgdmFsaWQgVVVJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVUZXN0UmVxdWVzdChcbiAgICAgICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vcnN2cHM/ZXZlbnRJZD1pbnZhbGlkLXV1aWQnXG4gICAgICApO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLm1lc3NhZ2UpLnRvQmUoJ0ludmFsaWQgcXVlcnkgcGFyYW1ldGVycycpO1xuICAgICAgZXhwZWN0KG1vY2tMaXN0UlNWUHMpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDAgd2hlbiBzdGF0dXMgaXMgaW52YWxpZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVUZXN0UmVxdWVzdChcbiAgICAgICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vcnN2cHM/c3RhdHVzPWludmFsaWQtc3RhdHVzJ1xuICAgICAgKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICBleHBlY3QobW9ja0xpc3RSU1ZQcykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwMCB3aGVuIHBhZ2UgaXMgbm90IGEgcG9zaXRpdmUgaW50ZWdlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVUZXN0UmVxdWVzdChcbiAgICAgICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vcnN2cHM/cGFnZT0tMSdcbiAgICAgICk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgZXhwZWN0KG1vY2tMaXN0UlNWUHMpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDAgd2hlbiBsaW1pdCBleGNlZWRzIG1heGltdW0nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlVGVzdFJlcXVlc3QoXG4gICAgICAgICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3JzdnBzP2xpbWl0PTE1MCdcbiAgICAgICk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgZXhwZWN0KG1vY2tMaXN0UlNWUHMpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDAgd2hlbiBzZWFyY2hRdWVyeSBleGNlZWRzIG1heGltdW0gbGVuZ3RoJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgbG9uZ1F1ZXJ5ID0gJ2EnLnJlcGVhdCgxMDEpO1xuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZVRlc3RSZXF1ZXN0KFxuICAgICAgICBgaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9yc3Zwcz9zZWFyY2hRdWVyeT0ke2xvbmdRdWVyeX1gXG4gICAgICApO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgIGV4cGVjdChtb2NrTGlzdFJTVlBzKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU2VydmljZSBFcnJvcnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNTAwIHdoZW4gc2VydmljZSByZXR1cm5zIERBVEFCQVNFX0VSUk9SJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja0xpc3RSU1ZQcy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdEQVRBQkFTRV9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlVGVzdFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vcnN2cHMnKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg1MDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdEQVRBQkFTRV9FUlJPUicpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IubWVzc2FnZSkudG9CZSgnRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwMCB3aGVuIHNlcnZpY2UgcmV0dXJucyBWQUxJREFUSU9OX0VSUk9SJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja0xpc3RSU1ZQcy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBmaWx0ZXIgcGFyYW1ldGVycycsXG4gICAgICAgICAgZGV0YWlsczogW3sgZmllbGQ6ICdldmVudElkJywgbWVzc2FnZTogJ0ludmFsaWQgVVVJRCcgfV0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZVRlc3RSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3JzdnBzJyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNTAwIHdoZW4gc2VydmljZSByZXR1cm5zIFVOS05PV05fRVJST1InLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrTGlzdFJTVlBzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ1VOS05PV05fRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlVGVzdFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vcnN2cHMnKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg1MDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdVTktOT1dOX0VSUk9SJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiA1MDAgd2hlbiBzZXJ2aWNlIHRocm93cyBhbiBleGNlcHRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrTGlzdFJTVlBzLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignVW5leHBlY3RlZCBzZXJ2aWNlIGVycm9yJykpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlVGVzdFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vcnN2cHMnKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg1MDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdJTlRFUk5BTF9FUlJPUicpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IubWVzc2FnZSkudG9CZSgnRmFpbGVkIHRvIGZldGNoIFJTVlBzJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxvZyBlcnJvciBkZXRhaWxzIHdoZW4gZXhjZXB0aW9uIG9jY3VycycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGNvbnNvbGVFcnJvclNweSA9IGplc3Quc3B5T24oY29uc29sZSwgJ2Vycm9yJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XG4gICAgICBtb2NrTGlzdFJTVlBzLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignVGVzdCBlcnJvcicpKTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZVRlc3RSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3JzdnBzJyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgYXdhaXQgR0VUKHJlcXVlc3QpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChjb25zb2xlRXJyb3JTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnR0VUIC9hcGkvYWRtaW4vcnN2cHMgZXJyb3I6JyxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGVycm9yOiAnVGVzdCBlcnJvcicsXG4gICAgICAgICAgc3RhY2s6IGV4cGVjdC5hbnkoU3RyaW5nKSxcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGNvbnNvbGVFcnJvclNweS5tb2NrUmVzdG9yZSgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQXV0aGVudGljYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjYWxsIHdpdGhBdXRoIHdyYXBwZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSB7XG4gICAgICAgIGRhdGE6IFtdLFxuICAgICAgICBwYWdpbmF0aW9uOiB7IHBhZ2U6IDEsIGxpbWl0OiA1MCwgdG90YWw6IDAsIHRvdGFsUGFnZXM6IDAgfSxcbiAgICAgICAgc3RhdGlzdGljczoge1xuICAgICAgICAgIHRvdGFsUlNWUHM6IDAsXG4gICAgICAgICAgYnlTdGF0dXM6IHsgYXR0ZW5kaW5nOiAwLCBkZWNsaW5lZDogMCwgbWF5YmU6IDAsIHBlbmRpbmc6IDAgfSxcbiAgICAgICAgICB0b3RhbEd1ZXN0Q291bnQ6IDAsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBtb2NrTGlzdFJTVlBzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogbW9ja1Jlc3BvbnNlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVUZXN0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9yc3ZwcycpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGF3YWl0IEdFVChyZXF1ZXN0KTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QoYXBpSGVscGVycy53aXRoQXV0aCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRWRnZSBDYXNlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSByZXN1bHQgc2V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgbW9ja1Jlc3BvbnNlID0ge1xuICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgcGFnaW5hdGlvbjogeyBwYWdlOiAxLCBsaW1pdDogNTAsIHRvdGFsOiAwLCB0b3RhbFBhZ2VzOiAwIH0sXG4gICAgICAgIHN0YXRpc3RpY3M6IHtcbiAgICAgICAgICB0b3RhbFJTVlBzOiAwLFxuICAgICAgICAgIGJ5U3RhdHVzOiB7IGF0dGVuZGluZzogMCwgZGVjbGluZWQ6IDAsIG1heWJlOiAwLCBwZW5kaW5nOiAwIH0sXG4gICAgICAgICAgdG90YWxHdWVzdENvdW50OiAwLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgbW9ja0xpc3RSU1ZQcy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IG1vY2tSZXNwb25zZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlVGVzdFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vcnN2cHMnKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChkYXRhLmRhdGEuZGF0YSkudG9FcXVhbChbXSk7XG4gICAgICBleHBlY3QoZGF0YS5kYXRhLnBhZ2luYXRpb24udG90YWwpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBsYXJnZSBwYWdlIG51bWJlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSB7XG4gICAgICAgIGRhdGE6IFtdLFxuICAgICAgICBwYWdpbmF0aW9uOiB7IHBhZ2U6IDk5OSwgbGltaXQ6IDUwLCB0b3RhbDogMCwgdG90YWxQYWdlczogMCB9LFxuICAgICAgICBzdGF0aXN0aWNzOiB7XG4gICAgICAgICAgdG90YWxSU1ZQczogMCxcbiAgICAgICAgICBieVN0YXR1czogeyBhdHRlbmRpbmc6IDAsIGRlY2xpbmVkOiAwLCBtYXliZTogMCwgcGVuZGluZzogMCB9LFxuICAgICAgICAgIHRvdGFsR3Vlc3RDb3VudDogMCxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tMaXN0UlNWUHMubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiBtb2NrUmVzcG9uc2UsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZVRlc3RSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3JzdnBzP3BhZ2U9OTk5Jyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KG1vY2tMaXN0UlNWUHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICB7fSxcbiAgICAgICAgeyBwYWdlOiA5OTksIGxpbWl0OiA1MCB9XG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYWxsIHZhbGlkIFJTVlAgc3RhdHVzZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBzdGF0dXNlcyA9IFsncGVuZGluZycsICdhdHRlbmRpbmcnLCAnZGVjbGluZWQnLCAnbWF5YmUnXSBhcyBjb25zdDtcblxuICAgICAgZm9yIChjb25zdCBzdGF0dXMgb2Ygc3RhdHVzZXMpIHtcbiAgICAgICAgbW9ja0xpc3RSU1ZQcy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgICAgIHBhZ2luYXRpb246IHsgcGFnZTogMSwgbGltaXQ6IDUwLCB0b3RhbDogMCwgdG90YWxQYWdlczogMCB9LFxuICAgICAgICAgICAgc3RhdGlzdGljczoge1xuICAgICAgICAgICAgICB0b3RhbFJTVlBzOiAwLFxuICAgICAgICAgICAgICBieVN0YXR1czogeyBhdHRlbmRpbmc6IDAsIGRlY2xpbmVkOiAwLCBtYXliZTogMCwgcGVuZGluZzogMCB9LFxuICAgICAgICAgICAgICB0b3RhbEd1ZXN0Q291bnQ6IDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVUZXN0UmVxdWVzdChcbiAgICAgICAgICBgaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9yc3Zwcz9zdGF0dXM9JHtzdGF0dXN9YFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIEFjdFxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcblxuICAgICAgICAvLyBBc3NlcnRcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgICBleHBlY3QobW9ja0xpc3RSU1ZQcykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgeyBzdGF0dXMgfSxcbiAgICAgICAgICB7IHBhZ2U6IDEsIGxpbWl0OiA1MCB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJhY3R1YWwiLCJyZXF1aXJlQWN0dWFsIiwid2l0aEF1dGgiLCJmbiIsImNyZWF0ZVRlc3RSZXF1ZXN0IiwidXJsIiwiUmVxdWVzdCIsIm1ldGhvZCIsImhlYWRlcnMiLCJkZXNjcmliZSIsIm1vY2tMaXN0UlNWUHMiLCJyc3ZwTWFuYWdlbWVudFNlcnZpY2UiLCJsaXN0UlNWUHMiLCJtb2NrV2l0aEF1dGgiLCJhcGlIZWxwZXJzIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJoYW5kbGVyIiwiaXQiLCJtb2NrUmVzcG9uc2UiLCJkYXRhIiwiaWQiLCJndWVzdElkIiwiZ3Vlc3RGaXJzdE5hbWUiLCJndWVzdExhc3ROYW1lIiwiZ3Vlc3RFbWFpbCIsImV2ZW50SWQiLCJldmVudE5hbWUiLCJhY3Rpdml0eUlkIiwiYWN0aXZpdHlOYW1lIiwic3RhdHVzIiwiZ3Vlc3RDb3VudCIsImRpZXRhcnlOb3RlcyIsInNwZWNpYWxSZXF1aXJlbWVudHMiLCJub3RlcyIsInJlc3BvbmRlZEF0IiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwicGFnaW5hdGlvbiIsInBhZ2UiLCJsaW1pdCIsInRvdGFsIiwidG90YWxQYWdlcyIsInN0YXRpc3RpY3MiLCJ0b3RhbFJTVlBzIiwiYnlTdGF0dXMiLCJhdHRlbmRpbmciLCJkZWNsaW5lZCIsIm1heWJlIiwicGVuZGluZyIsInRvdGFsR3Vlc3RDb3VudCIsIm1vY2tSZXNvbHZlZFZhbHVlIiwic3VjY2VzcyIsInJlcXVlc3QiLCJyZXNwb25zZSIsIkdFVCIsImpzb24iLCJleHBlY3QiLCJ0b0JlIiwidG9FcXVhbCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwic2VhcmNoUXVlcnkiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwibm90IiwidG9IYXZlQmVlbkNhbGxlZCIsImxvbmdRdWVyeSIsInJlcGVhdCIsImRldGFpbHMiLCJmaWVsZCIsIm1vY2tSZWplY3RlZFZhbHVlIiwiRXJyb3IiLCJjb25zb2xlRXJyb3JTcHkiLCJzcHlPbiIsImNvbnNvbGUiLCJvYmplY3RDb250YWluaW5nIiwic3RhY2siLCJhbnkiLCJTdHJpbmciLCJtb2NrUmVzdG9yZSIsInN0YXR1c2VzIl0sIm1hcHBpbmdzIjoiO0FBWUEsb0JBQW9CO0FBQ3BCQSxLQUFLQyxJQUFJLENBQUM7QUFDVkQsS0FBS0MsSUFBSSxDQUFDLG9CQUFvQjtJQUM1QixNQUFNQyxTQUFTRixLQUFLRyxhQUFhLENBQUM7SUFDbEMsT0FBTztRQUNMLEdBQUdELE1BQU07UUFDVEUsVUFBVUosS0FB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