{"version":3,"names":["default","cov_2h8szef1eb","f","s","ActivityPage","dynamic","params","slug","isUUID","test","activity","b","activityResult","_activityService","get","success","_navigation","notFound","data","redirect","getBySlug","sectionsResult","_sectionsService","listSections","id","sections","_jsxruntime","jsx","className","jsxs","name","activityType","startTime","Date","toLocaleString","locationId","eventId","capacity","costPerPerson","undefined","description","dangerouslySetInnerHTML","__html","length","map","section","_SectionRenderer","SectionRenderer"],"sources":["/Users/jaron/Desktop/wedding-platform-v2/app/activity/[slug]/page.tsx"],"sourcesContent":["export const dynamic = 'force-dynamic';\n\nimport { notFound, redirect } from 'next/navigation';\nimport { SectionRenderer } from '@/components/guest/SectionRenderer';\nimport { listSections } from '@/services/sectionsService';\nimport { getBySlug, get } from '@/services/activityService';\n\ninterface ActivityPageProps {\n  params: Promise<{ slug: string }>;\n}\n\n/**\n * Activity Details Page\n * \n * Displays activity information with sections:\n * - Activity name, description, time, location\n * - Custom sections with rich text, photos, and references\n * - RSVP information and capacity\n * \n * Requirements: \n * - 4.2 (E2E Critical Path Testing - section management flow)\n * - 24.10 (Slug Management - slug-based routing for activities)\n * \n * This route uses [slug] for URL-friendly routing.\n * Backward compatibility: UUID-based URLs redirect to slug-based URLs.\n */\nexport default async function ActivityPage({ params }: ActivityPageProps) {\n  // Next.js 15: params is a Promise\n  const { slug } = await params;\n  \n  // Determine if the parameter is a UUID (legacy) or slug (new)\n  const isUUID = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(slug);\n  \n  let activity;\n  \n  if (isUUID) {\n    // Legacy UUID-based URL - fetch by ID\n    const activityResult = await get(slug);\n    \n    if (!activityResult.success) {\n      notFound();\n    }\n    \n    activity = activityResult.data;\n    \n    // Redirect to slug-based URL if slug exists and is different\n    if (activity.slug && activity.slug !== slug) {\n      redirect(`/activity/${activity.slug}`);\n    }\n    \n    // Continue rendering with UUID if no slug exists\n  } else {\n    // New slug-based URL - fetch by slug\n    const activityResult = await getBySlug(slug);\n    \n    if (!activityResult.success) {\n      notFound();\n    }\n    \n    activity = activityResult.data;\n  }\n  \n  // Fetch sections for this activity\n  const sectionsResult = await listSections('activity', activity.id);\n  const sections = sectionsResult.success ? sectionsResult.data : [];\n  \n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-jungle-50 to-ocean-50\">\n      <div className=\"max-w-4xl mx-auto px-4 py-8\">\n        {/* Activity Header */}\n        <div className=\"bg-white rounded-lg shadow-lg p-8 mb-6\">\n          <h1 className=\"text-3xl font-bold text-jungle-800 mb-4\">\n            {activity.name}\n          </h1>\n          \n          {/* Activity Details */}\n          <div className=\"space-y-3 text-sage-700\">\n            {activity.activityType && (\n              <div className=\"flex items-center gap-2\">\n                <span className=\"font-semibold\">Type:</span>\n                <span className=\"px-3 py-1 bg-sage-100 text-sage-800 rounded-full text-sm\">\n                  {activity.activityType}\n                </span>\n              </div>\n            )}\n            \n            {activity.startTime && (\n              <div className=\"flex items-center gap-2\">\n                <span className=\"font-semibold\">Time:</span>\n                <span>{new Date(activity.startTime).toLocaleString()}</span>\n              </div>\n            )}\n            \n            {activity.locationId && (\n              <div className=\"flex items-center gap-2\">\n                <span className=\"font-semibold\">Location:</span>\n                <span>Location details</span>\n              </div>\n            )}\n            \n            {activity.eventId && (\n              <div className=\"flex items-center gap-2\">\n                <span className=\"font-semibold\">Event:</span>\n                <span>Event details</span>\n              </div>\n            )}\n            \n            {activity.capacity && (\n              <div className=\"flex items-center gap-2\">\n                <span className=\"font-semibold\">Capacity:</span>\n                <span>{activity.capacity} guests</span>\n              </div>\n            )}\n            \n            {activity.costPerPerson !== undefined && activity.costPerPerson !== null && (\n              <div className=\"flex items-center gap-2\">\n                <span className=\"font-semibold\">Cost:</span>\n                <span>${activity.costPerPerson} per person</span>\n              </div>\n            )}\n          </div>\n          \n          {/* Activity Description */}\n          {activity.description && (\n            <div \n              className=\"mt-6 prose prose-lg max-w-none text-gray-700\"\n              dangerouslySetInnerHTML={{ __html: activity.description }}\n            />\n          )}\n        </div>\n        \n        {/* Sections */}\n        {sections.length > 0 && (\n          <div className=\"space-y-6\">\n            {sections.map((section) => (\n              <div key={section.id} className=\"bg-white rounded-lg shadow-lg p-8\">\n                <SectionRenderer section={section} />\n              </div>\n            ))}\n          </div>\n        )}\n        \n        {/* No Sections Message */}\n        {sections.length === 0 && (\n          <div className=\"bg-white rounded-lg shadow-lg p-8 text-center text-sage-600\">\n            <p>No additional information available for this activity.</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]}