49701b2958e3768ab18a59dd6374e29d
/**
 * Unit Tests for SectionEditor Photo Integration
 * 
 * Tests:
 * - Photo selection
 * - Multiple photo handling
 * - Photo preview
 * 
 * Requirements: 2.4
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _SectionEditor = require("./SectionEditor");
// Mock fetch globally
global.fetch = jest.fn();
// Mock window.confirm
const originalConfirm = window.confirm;
// Mock scrollIntoView
Element.prototype.scrollIntoView = jest.fn();
// Mock photo data
const mockPhotos = [
    {
        id: 'photo-1',
        photo_url: 'https://example.com/photo1.jpg',
        caption: 'Beach sunset',
        alt_text: 'Beautiful sunset at the beach',
        moderation_status: 'approved',
        created_at: '2025-01-01T00:00:00Z'
    },
    {
        id: 'photo-2',
        photo_url: 'https://example.com/photo2.jpg',
        caption: 'Wedding ceremony',
        alt_text: 'Ceremony at the venue',
        moderation_status: 'approved',
        created_at: '2025-01-02T00:00:00Z'
    },
    {
        id: 'photo-3',
        photo_url: 'https://example.com/photo3.jpg',
        caption: 'Reception dinner',
        alt_text: 'Dinner reception',
        moderation_status: 'approved',
        created_at: '2025-01-03T00:00:00Z'
    }
];
// Mock section with photo gallery column
const mockPhotoSection = {
    id: 'section-1',
    page_type: 'custom',
    page_id: 'page-1',
    display_order: 0,
    created_at: '2024-01-01T00:00:00Z',
    updated_at: '2024-01-01T00:00:00Z',
    columns: [
        {
            id: 'column-1',
            section_id: 'section-1',
            column_number: 1,
            content_type: 'photo_gallery',
            content_data: {
                photo_ids: []
            },
            created_at: '2024-01-01T00:00:00Z',
            updated_at: '2024-01-01T00:00:00Z'
        }
    ]
};
const mockPhotoSectionWithPhotos = {
    ...mockPhotoSection,
    columns: [
        {
            ...mockPhotoSection.columns[0],
            content_data: {
                photo_ids: [
                    'photo-1',
                    'photo-2'
                ]
            }
        }
    ]
};
describe('SectionEditor - Photo Integration', ()=>{
    let mockOnSave;
    let mockOnClose;
    beforeEach(()=>{
        mockOnSave = jest.fn();
        mockOnClose = jest.fn();
        window.confirm = jest.fn().mockReturnValue(true);
        global.fetch.mockReset();
        jest.clearAllMocks();
    });
    afterEach(()=>{
        (0, _react.cleanup)();
        window.confirm = originalConfirm;
    });
    const mockFetchSuccess = (data)=>{
        global.fetch.mockResolvedValueOnce({
            ok: true,
            json: async ()=>({
                    success: true,
                    data
                })
        });
    };
    describe('Photo Selection', ()=>{
        it('should display PhotoPicker component for photo_gallery column type', async ()=>{
            mockFetchSuccess([
                mockPhotoSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                // PhotoPicker should render the "Add Photos from Gallery" button
                expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
            });
        });
        it('should open photo picker modal when add photos button is clicked', async ()=>{
            mockFetchSuccess([
                mockPhotoSection
            ]);
            mockFetchSuccess({
                photos: mockPhotos,
                total: 3
            }); // Photos API response
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Select Photos')).toBeInTheDocument();
            });
        });
        it('should fetch photos when photo picker opens', async ()=>{
            mockFetchSuccess([
                mockPhotoSection
            ]);
            mockFetchSuccess({
                photos: mockPhotos,
                total: 3
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('/api/admin/photos'));
            });
        });
        it('should update section when photo is selected', async ()=>{
            mockFetchSuccess([
                mockPhotoSection
            ]);
            mockFetchSuccess({
                photos: mockPhotos,
                total: 3
            }); // Photos API
            mockFetchSuccess(mockPhotoSectionWithPhotos); // Update section API
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Beautiful sunset at the beach')).toBeInTheDocument();
            });
            // Select a photo
            _react.fireEvent.click(_react.screen.getByAltText('Beautiful sunset at the beach'));
            // Close the modal
            _react.fireEvent.click(_react.screen.getByText('Done'));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('/api/admin/sections/section-1'), expect.objectContaining({
                    method: 'PUT',
                    body: expect.stringContaining('photo_ids')
                }));
            });
        });
        it('should pass correct pageType to PhotoPicker', async ()=>{
            mockFetchSuccess([
                mockPhotoSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "event",
                pageId: "event-123",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                // The PhotoPicker should be rendered with the correct pageType
                // This is verified by checking that the component renders
                expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
            });
        });
        it('should pass correct pageId to PhotoPicker', async ()=>{
            mockFetchSuccess([
                mockPhotoSection
            ]);
            mockFetchSuccess({
                photos: mockPhotos,
                total: 3
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-456",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('page_id=activity-456'));
            });
        });
        it('should disable photo picker when section is saving', async ()=>{
            mockFetchSuccess([
                mockPhotoSection
            ]);
            // Mock a delayed response for section update
            global.fetch.mockImplementationOnce(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            ok: true,
                            json: async ()=>({
                                    success: true,
                                    data: mockPhotoSection
                                })
                        }), 100)));
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
            });
            // Trigger a save operation by toggling layout
            const layoutSelect = _react.screen.getByRole('combobox');
            _react.fireEvent.change(layoutSelect, {
                target: {
                    value: 'two-column'
                }
            });
            // Photo picker button should be disabled during save
            const addPhotosButton = _react.screen.getByText('+ Add Photos from Gallery');
            expect(addPhotosButton).toBeDisabled();
        });
    });
    describe('Multiple Photo Handling', ()=>{
        it('should display selected photos count', async ()=>{
            mockFetchSuccess([
                mockPhotoSectionWithPhotos
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Selected Photos (2)')).toBeInTheDocument();
            });
        });
        it('should display all selected photos in preview grid', async ()=>{
            mockFetchSuccess([
                mockPhotoSectionWithPhotos
            ]);
            mockFetchSuccess({
                photos: mockPhotos,
                total: 3
            }); // For PhotoPicker
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Selected Photos (2)')).toBeInTheDocument();
            });
            // Open photo picker to trigger photo fetch
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Select Photos')).toBeInTheDocument();
            });
            // Close picker
            _react.fireEvent.click(_react.screen.getByText('Done'));
            await (0, _react.waitFor)(()=>{
                // Should display 2 photo previews in the grid
                const photoGrid = _react.screen.getByText('Selected Photos (2)').closest('.border');
                expect(photoGrid).toBeInTheDocument();
                // Grid should contain photo elements
                const images = photoGrid?.querySelectorAll('img');
                expect(images?.length).toBe(2);
            });
        });
        it('should allow selecting multiple photos', async ()=>{
            mockFetchSuccess([
                mockPhotoSection
            ]);
            mockFetchSuccess({
                photos: mockPhotos,
                total: 3
            }); // Photos API
            mockFetchSuccess(mockPhotoSection); // First update with 1 photo
            mockFetchSuccess(mockPhotoSectionWithPhotos); // Second update with 2 photos
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Beautiful sunset at the beach')).toBeInTheDocument();
            });
            // Select first photo
            _react.fireEvent.click(_react.screen.getByAltText('Beautiful sunset at the beach'));
            // Wait for first update
            await (0, _react.waitFor)(()=>{
                const firstUpdateCall = global.fetch.mock.calls.find((call)=>call[0].includes('/api/admin/sections/section-1') && call[1]?.method === 'PUT');
                expect(firstUpdateCall).toBeDefined();
            });
            // Select second photo
            _react.fireEvent.click(_react.screen.getByAltText('Ceremony at the venue'));
            // Close modal
            _react.fireEvent.click(_react.screen.getByText('Done'));
            await (0, _react.waitFor)(()=>{
                // Should have made at least 2 update calls (one for each photo selection)
                const updateCalls = global.fetch.mock.calls.filter((call)=>call[0].includes('/api/admin/sections/section-1') && call[1]?.method === 'PUT');
                expect(updateCalls.length).toBeGreaterThanOrEqual(1);
                // The last update should contain both photos
                const lastUpdateCall = updateCalls[updateCalls.length - 1];
                if (lastUpdateCall) {
                    const body = JSON.parse(lastUpdateCall[1].body);
                    // Should have at least one photo selected
                    expect(body.columns[0].content_data.photo_ids.length).toBeGreaterThan(0);
                }
            });
        });
        it('should allow removing individual photos from selection', async ()=>{
            mockFetchSuccess([
                mockPhotoSectionWithPhotos
            ]);
            mockFetchSuccess({
                photos: mockPhotos,
                total: 3
            }); // For PhotoPicker to fetch photos
            mockFetchSuccess(mockPhotoSection); // Update with 0 photos
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Selected Photos (2)')).toBeInTheDocument();
            });
            // Open photo picker to trigger photo fetch
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Select Photos')).toBeInTheDocument();
            });
            // Close picker
            _react.fireEvent.click(_react.screen.getByText('Done'));
            await (0, _react.waitFor)(()=>{
                // Find and click remove button on first photo
                const removeButtons = _react.screen.getAllByLabelText('Remove photo');
                expect(removeButtons.length).toBeGreaterThan(0);
                _react.fireEvent.click(removeButtons[0]);
            });
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('/api/admin/sections/section-1'), expect.objectContaining({
                    method: 'PUT'
                }));
            });
        });
        it('should allow clearing all selected photos', async ()=>{
            mockFetchSuccess([
                mockPhotoSectionWithPhotos
            ]);
            mockFetchSuccess(mockPhotoSection); // Update with 0 photos
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Selected Photos (2)')).toBeInTheDocument();
            });
            // Click "Clear All" button
            _react.fireEvent.click(_react.screen.getByText('Clear All'));
            await (0, _react.waitFor)(()=>{
                const updateCall = global.fetch.mock.calls.find((call)=>call[0].includes('/api/admin/sections/section-1') && call[1]?.method === 'PUT');
                expect(updateCall).toBeDefined();
                const body = JSON.parse(updateCall[1].body);
                expect(body.columns[0].content_data.photo_ids).toHaveLength(0);
            });
        });
        it('should maintain photo order in selection', async ()=>{
            const orderedPhotoSection = {
                ...mockPhotoSection,
                columns: [
                    {
                        ...mockPhotoSection.columns[0],
                        content_data: {
                            photo_ids: [
                                'photo-3',
                                'photo-1',
                                'photo-2'
                            ]
                        }
                    }
                ]
            };
            mockFetchSuccess([
                orderedPhotoSection
            ]);
            mockFetchSuccess({
                photos: mockPhotos,
                total: 3
            }); // For PhotoPicker
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Selected Photos (3)')).toBeInTheDocument();
            });
            // Open photo picker to trigger photo fetch
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Select Photos')).toBeInTheDocument();
            });
            // Close picker
            _react.fireEvent.click(_react.screen.getByText('Done'));
            await (0, _react.waitFor)(()=>{
                // Photos should be displayed in the order they were selected
                const photoGrid = _react.screen.getByText('Selected Photos (3)').closest('.border');
                const images = photoGrid?.querySelectorAll('img');
                expect(images?.length).toBe(3);
            // Order should be maintained (photo-3, photo-1, photo-2)
            });
        });
        it('should handle empty photo selection', async ()=>{
            mockFetchSuccess([
                mockPhotoSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                // Should not show "Selected Photos" section when no photos selected
                expect(_react.screen.queryByText(/Selected Photos/)).not.toBeInTheDocument();
                // Should show the add photos button
                expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
            });
        });
    });
    describe('Photo Preview', ()=>{
        it('should display photo thumbnails in selected photos section', async ()=>{
            mockFetchSuccess([
                mockPhotoSectionWithPhotos
            ]);
            mockFetchSuccess({
                photos: mockPhotos,
                total: 3
            }); // For PhotoPicker
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Selected Photos (2)')).toBeInTheDocument();
            });
            // Open photo picker to trigger photo fetch
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Select Photos')).toBeInTheDocument();
            });
            // Close picker
            _react.fireEvent.click(_react.screen.getByText('Done'));
            await (0, _react.waitFor)(()=>{
                // Should display photo thumbnails
                const photoGrid = _react.screen.getByText('Selected Photos (2)').closest('.border');
                const images = photoGrid?.querySelectorAll('img');
                expect(images?.length).toBe(2);
            });
        });
        it('should display photo captions in preview', async ()=>{
            mockFetchSuccess([
                mockPhotoSectionWithPhotos
            ]);
            mockFetchSuccess({
                photos: mockPhotos,
                total: 3
            }); // For PhotoPicker to resolve photo details
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Selected Photos (2)')).toBeInTheDocument();
            });
            // Captions should be visible in the preview grid
            const photoGrid = _react.screen.getByText('Selected Photos (2)').closest('.border');
            expect(photoGrid).toBeInTheDocument();
        });
        it('should show photos in guest preview modal', async ()=>{
            mockFetchSuccess([
                mockPhotoSectionWithPhotos
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Open preview modal by clicking Guest Preview button
            _react.fireEvent.click(_react.screen.getByText('Guest Preview'));
            await (0, _react.waitFor)(()=>{
                // Preview should show photo placeholders
                const previewSection = _react.screen.getByText('Guest Preview').closest('.border');
                expect(previewSection).toBeInTheDocument();
                // Should display photo IDs in preview
                expect(previewSection?.textContent).toContain('photo-1');
                expect(previewSection?.textContent).toContain('photo-2');
            });
        });
        it('should show "No photos selected" message in preview when empty', async ()=>{
            mockFetchSuccess([
                mockPhotoSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Open preview by clicking Guest Preview button
            _react.fireEvent.click(_react.screen.getByText('Guest Preview'));
            await (0, _react.waitFor)(()=>{
                // Should show empty state message
                expect(_react.screen.getByText('No photos selected')).toBeInTheDocument();
            });
        });
        it('should display photo grid layout in preview', async ()=>{
            const multiPhotoSection = {
                ...mockPhotoSection,
                columns: [
                    {
                        ...mockPhotoSection.columns[0],
                        content_data: {
                            photo_ids: [
                                'photo-1',
                                'photo-2',
                                'photo-3'
                            ]
                        }
                    }
                ]
            };
            mockFetchSuccess([
                multiPhotoSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Open preview by clicking Guest Preview button
            _react.fireEvent.click(_react.screen.getByText('Guest Preview'));
            await (0, _react.waitFor)(()=>{
                // Preview should use grid layout for photos
                const previewSection = _react.screen.getByText('Guest Preview').closest('.border');
                const photoGrid = previewSection?.querySelector('.grid.grid-cols-2');
                expect(photoGrid).toBeInTheDocument();
            });
        });
        it('should show hover effects on photo thumbnails', async ()=>{
            mockFetchSuccess([
                mockPhotoSectionWithPhotos
            ]);
            mockFetchSuccess({
                photos: mockPhotos,
                total: 3
            }); // For PhotoPicker
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Selected Photos (2)')).toBeInTheDocument();
            });
            // Open photo picker to trigger photo fetch
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Select Photos')).toBeInTheDocument();
            });
            // Close picker
            _react.fireEvent.click(_react.screen.getByText('Done'));
            await (0, _react.waitFor)(()=>{
                // Photo containers should have group class for hover effects
                const photoGrid = _react.screen.getByText('Selected Photos (2)').closest('.border');
                const photoContainers = photoGrid?.querySelectorAll('.group');
                expect(photoContainers?.length).toBeGreaterThan(0);
            });
        });
        it('should display remove button on hover', async ()=>{
            mockFetchSuccess([
                mockPhotoSectionWithPhotos
            ]);
            mockFetchSuccess({
                photos: mockPhotos,
                total: 3
            }); // For PhotoPicker
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Selected Photos (2)')).toBeInTheDocument();
            });
            // Open photo picker to trigger photo fetch
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Select Photos')).toBeInTheDocument();
            });
            // Close picker
            _react.fireEvent.click(_react.screen.getByText('Done'));
            await (0, _react.waitFor)(()=>{
                // Remove buttons should be present (with opacity-0 initially)
                const removeButtons = _react.screen.getAllByLabelText('Remove photo');
                expect(removeButtons.length).toBe(2);
                // Buttons should have group-hover:opacity-100 class
                removeButtons.forEach((button)=>{
                    expect(button.className).toContain('group-hover:opacity-100');
                });
            });
        });
    });
    describe('Column Type Change to Photo Gallery', ()=>{
        it('should initialize empty photo_ids when changing to photo_gallery type', async ()=>{
            const richTextSection = {
                ...mockPhotoSection,
                columns: [
                    {
                        ...mockPhotoSection.columns[0],
                        content_type: 'rich_text',
                        content_data: {
                            html: '<p>Some text</p>'
                        }
                    }
                ]
            };
            mockFetchSuccess([
                richTextSection
            ]);
            mockFetchSuccess(mockPhotoSection); // Updated to photo_gallery
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                // Find the column type selector (second combobox - first is layout selector)
                const selects = _react.screen.getAllByRole('combobox');
                expect(selects.length).toBeGreaterThan(1);
            });
            // Change column type to photo_gallery (second combobox)
            const selects = _react.screen.getAllByRole('combobox');
            const columnTypeSelect = selects[1]; // Second select is column type
            _react.fireEvent.change(columnTypeSelect, {
                target: {
                    value: 'photo_gallery'
                }
            });
            await (0, _react.waitFor)(()=>{
                const updateCall = global.fetch.mock.calls.find((call)=>call[0].includes('/api/admin/sections/section-1') && call[1]?.method === 'PUT');
                expect(updateCall).toBeDefined();
                const body = JSON.parse(updateCall[1].body);
                expect(body.columns[0].content_type).toBe('photo_gallery');
                expect(body.columns[0].content_data).toEqual({
                    photo_ids: [],
                    display_mode: 'gallery'
                });
            });
        });
        it('should display PhotoPicker after changing column type to photo_gallery', async ()=>{
            const richTextSection = {
                ...mockPhotoSection,
                columns: [
                    {
                        ...mockPhotoSection.columns[0],
                        content_type: 'rich_text',
                        content_data: {
                            html: '<p>Some text</p>'
                        }
                    }
                ]
            };
            mockFetchSuccess([
                richTextSection
            ]);
            mockFetchSuccess(mockPhotoSection); // Updated to photo_gallery
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                // Find the column type selector (second combobox)
                const selects = _react.screen.getAllByRole('combobox');
                expect(selects.length).toBeGreaterThan(1);
            });
            // Change column type to photo_gallery (second combobox)
            const selects = _react.screen.getAllByRole('combobox');
            const columnTypeSelect = selects[1]; // Second select is column type
            _react.fireEvent.change(columnTypeSelect, {
                target: {
                    value: 'photo_gallery'
                }
            });
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9hZG1pbi9TZWN0aW9uRWRpdG9yLnBob3RvSW50ZWdyYXRpb24udGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVbml0IFRlc3RzIGZvciBTZWN0aW9uRWRpdG9yIFBob3RvIEludGVncmF0aW9uXG4gKiBcbiAqIFRlc3RzOlxuICogLSBQaG90byBzZWxlY3Rpb25cbiAqIC0gTXVsdGlwbGUgcGhvdG8gaGFuZGxpbmdcbiAqIC0gUGhvdG8gcHJldmlld1xuICogXG4gKiBSZXF1aXJlbWVudHM6IDIuNFxuICovXG5cbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCBmaXJlRXZlbnQsIHdhaXRGb3IsIGNsZWFudXAgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IFNlY3Rpb25FZGl0b3IgfSBmcm9tICcuL1NlY3Rpb25FZGl0b3InO1xuXG4vLyBNb2NrIGZldGNoIGdsb2JhbGx5XG5nbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCk7XG5cbi8vIE1vY2sgd2luZG93LmNvbmZpcm1cbmNvbnN0IG9yaWdpbmFsQ29uZmlybSA9IHdpbmRvdy5jb25maXJtO1xuXG4vLyBNb2NrIHNjcm9sbEludG9WaWV3XG5FbGVtZW50LnByb3RvdHlwZS5zY3JvbGxJbnRvVmlldyA9IGplc3QuZm4oKTtcblxuLy8gTW9jayBwaG90byBkYXRhXG5jb25zdCBtb2NrUGhvdG9zID0gW1xuICB7XG4gICAgaWQ6ICdwaG90by0xJyxcbiAgICBwaG90b191cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Bob3RvMS5qcGcnLFxuICAgIGNhcHRpb246ICdCZWFjaCBzdW5zZXQnLFxuICAgIGFsdF90ZXh0OiAnQmVhdXRpZnVsIHN1bnNldCBhdCB0aGUgYmVhY2gnLFxuICAgIG1vZGVyYXRpb25fc3RhdHVzOiAnYXBwcm92ZWQnIGFzIGNvbnN0LFxuICAgIGNyZWF0ZWRfYXQ6ICcyMDI1LTAxLTAxVDAwOjAwOjAwWicsXG4gIH0sXG4gIHtcbiAgICBpZDogJ3Bob3RvLTInLFxuICAgIHBob3RvX3VybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vcGhvdG8yLmpwZycsXG4gICAgY2FwdGlvbjogJ1dlZGRpbmcgY2VyZW1vbnknLFxuICAgIGFsdF90ZXh0OiAnQ2VyZW1vbnkgYXQgdGhlIHZlbnVlJyxcbiAgICBtb2RlcmF0aW9uX3N0YXR1czogJ2FwcHJvdmVkJyBhcyBjb25zdCxcbiAgICBjcmVhdGVkX2F0OiAnMjAyNS0wMS0wMlQwMDowMDowMFonLFxuICB9LFxuICB7XG4gICAgaWQ6ICdwaG90by0zJyxcbiAgICBwaG90b191cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Bob3RvMy5qcGcnLFxuICAgIGNhcHRpb246ICdSZWNlcHRpb24gZGlubmVyJyxcbiAgICBhbHRfdGV4dDogJ0Rpbm5lciByZWNlcHRpb24nLFxuICAgIG1vZGVyYXRpb25fc3RhdHVzOiAnYXBwcm92ZWQnIGFzIGNvbnN0LFxuICAgIGNyZWF0ZWRfYXQ6ICcyMDI1LTAxLTAzVDAwOjAwOjAwWicsXG4gIH0sXG5dO1xuXG4vLyBNb2NrIHNlY3Rpb24gd2l0aCBwaG90byBnYWxsZXJ5IGNvbHVtblxuY29uc3QgbW9ja1Bob3RvU2VjdGlvbiA9IHtcbiAgaWQ6ICdzZWN0aW9uLTEnLFxuICBwYWdlX3R5cGU6ICdjdXN0b20nIGFzIGNvbnN0LFxuICBwYWdlX2lkOiAncGFnZS0xJyxcbiAgZGlzcGxheV9vcmRlcjogMCxcbiAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgY29sdW1uczogW1xuICAgIHtcbiAgICAgIGlkOiAnY29sdW1uLTEnLFxuICAgICAgc2VjdGlvbl9pZDogJ3NlY3Rpb24tMScsXG4gICAgICBjb2x1bW5fbnVtYmVyOiAxIGFzIGNvbnN0LFxuICAgICAgY29udGVudF90eXBlOiAncGhvdG9fZ2FsbGVyeScgYXMgY29uc3QsXG4gICAgICBjb250ZW50X2RhdGE6IHsgcGhvdG9faWRzOiBbXSB9LFxuICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgfSxcbiAgXSxcbn07XG5cbmNvbnN0IG1vY2tQaG90b1NlY3Rpb25XaXRoUGhvdG9zID0ge1xuICAuLi5tb2NrUGhvdG9TZWN0aW9uLFxuICBjb2x1bW5zOiBbXG4gICAge1xuICAgICAgLi4ubW9ja1Bob3RvU2VjdGlvbi5jb2x1bW5zWzBdLFxuICAgICAgY29udGVudF9kYXRhOiB7IHBob3RvX2lkczogWydwaG90by0xJywgJ3Bob3RvLTInXSB9LFxuICAgIH0sXG4gIF0sXG59O1xuXG5kZXNjcmliZSgnU2VjdGlvbkVkaXRvciAtIFBob3RvIEludGVncmF0aW9uJywgKCkgPT4ge1xuICBsZXQgbW9ja09uU2F2ZTogamVzdC5Nb2NrO1xuICBsZXQgbW9ja09uQ2xvc2U6IGplc3QuTW9jaztcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBtb2NrT25TYXZlID0gamVzdC5mbigpO1xuICAgIG1vY2tPbkNsb3NlID0gamVzdC5mbigpO1xuICAgIHdpbmRvdy5jb25maXJtID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcbiAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc2V0KCk7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgY2xlYW51cCgpO1xuICAgIHdpbmRvdy5jb25maXJtID0gb3JpZ2luYWxDb25maXJtO1xuICB9KTtcblxuICBjb25zdCBtb2NrRmV0Y2hTdWNjZXNzID0gKGRhdGE6IGFueSkgPT4ge1xuICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgb2s6IHRydWUsXG4gICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhIH0pLFxuICAgIH0pO1xuICB9O1xuXG4gIGRlc2NyaWJlKCdQaG90byBTZWxlY3Rpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IFBob3RvUGlja2VyIGNvbXBvbmVudCBmb3IgcGhvdG9fZ2FsbGVyeSBjb2x1bW4gdHlwZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tQaG90b1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBFZGl0IGJ1dHRvbiB0byBleHBhbmQgc2VjdGlvblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2VkaXQvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAvLyBQaG90b1BpY2tlciBzaG91bGQgcmVuZGVyIHRoZSBcIkFkZCBQaG90b3MgZnJvbSBHYWxsZXJ5XCIgYnV0dG9uXG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcrIEFkZCBQaG90b3MgZnJvbSBHYWxsZXJ5JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgb3BlbiBwaG90byBwaWNrZXIgbW9kYWwgd2hlbiBhZGQgcGhvdG9zIGJ1dHRvbiBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1Bob3RvU2VjdGlvbl0pO1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyh7IHBob3RvczogbW9ja1Bob3RvcywgdG90YWw6IDMgfSk7IC8vIFBob3RvcyBBUEkgcmVzcG9uc2VcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBFZGl0IGJ1dHRvbiB0byBleHBhbmQgc2VjdGlvblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2VkaXQvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCcrIEFkZCBQaG90b3MgZnJvbSBHYWxsZXJ5JykpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1NlbGVjdCBQaG90b3MnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmZXRjaCBwaG90b3Mgd2hlbiBwaG90byBwaWNrZXIgb3BlbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrUGhvdG9TZWN0aW9uXSk7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKHsgcGhvdG9zOiBtb2NrUGhvdG9zLCB0b3RhbDogMyB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBFZGl0IGJ1dHRvbiB0byBleHBhbmQgc2VjdGlvblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2VkaXQvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCcrIEFkZCBQaG90b3MgZnJvbSBHYWxsZXJ5JykpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJy9hcGkvYWRtaW4vcGhvdG9zJylcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgc2VjdGlvbiB3aGVuIHBob3RvIGlzIHNlbGVjdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1Bob3RvU2VjdGlvbl0pO1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyh7IHBob3RvczogbW9ja1Bob3RvcywgdG90YWw6IDMgfSk7IC8vIFBob3RvcyBBUElcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MobW9ja1Bob3RvU2VjdGlvbldpdGhQaG90b3MpOyAvLyBVcGRhdGUgc2VjdGlvbiBBUElcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBFZGl0IGJ1dHRvbiB0byBleHBhbmQgc2VjdGlvblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2VkaXQvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCcrIEFkZCBQaG90b3MgZnJvbSBHYWxsZXJ5JykpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUFsdFRleHQoJ0JlYXV0aWZ1bCBzdW5zZXQgYXQgdGhlIGJlYWNoJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2VsZWN0IGEgcGhvdG9cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlBbHRUZXh0KCdCZWF1dGlmdWwgc3Vuc2V0IGF0IHRoZSBiZWFjaCcpKTtcblxuICAgICAgLy8gQ2xvc2UgdGhlIG1vZGFsXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnRG9uZScpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCcvYXBpL2FkbWluL3NlY3Rpb25zL3NlY3Rpb24tMScpLFxuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICBib2R5OiBleHBlY3Quc3RyaW5nQ29udGFpbmluZygncGhvdG9faWRzJyksXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwYXNzIGNvcnJlY3QgcGFnZVR5cGUgdG8gUGhvdG9QaWNrZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrUGhvdG9TZWN0aW9uXSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImV2ZW50XCJcbiAgICAgICAgICBwYWdlSWQ9XCJldmVudC0xMjNcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBFZGl0IGJ1dHRvbiB0byBleHBhbmQgc2VjdGlvblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2VkaXQvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAvLyBUaGUgUGhvdG9QaWNrZXIgc2hvdWxkIGJlIHJlbmRlcmVkIHdpdGggdGhlIGNvcnJlY3QgcGFnZVR5cGVcbiAgICAgICAgLy8gVGhpcyBpcyB2ZXJpZmllZCBieSBjaGVja2luZyB0aGF0IHRoZSBjb21wb25lbnQgcmVuZGVyc1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHBhc3MgY29ycmVjdCBwYWdlSWQgdG8gUGhvdG9QaWNrZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrUGhvdG9TZWN0aW9uXSk7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKHsgcGhvdG9zOiBtb2NrUGhvdG9zLCB0b3RhbDogMyB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiYWN0aXZpdHlcIlxuICAgICAgICAgIHBhZ2VJZD1cImFjdGl2aXR5LTQ1NlwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIEVkaXQgYnV0dG9uIHRvIGV4cGFuZCBzZWN0aW9uXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZWRpdC9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcrIEFkZCBQaG90b3MgZnJvbSBHYWxsZXJ5JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJysgQWRkIFBob3RvcyBmcm9tIEdhbGxlcnknKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygncGFnZV9pZD1hY3Rpdml0eS00NTYnKVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc2FibGUgcGhvdG8gcGlja2VyIHdoZW4gc2VjdGlvbiBpcyBzYXZpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrUGhvdG9TZWN0aW9uXSk7XG4gICAgICBcbiAgICAgIC8vIE1vY2sgYSBkZWxheWVkIHJlc3BvbnNlIGZvciBzZWN0aW9uIHVwZGF0ZVxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UoKCkgPT5cbiAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tQaG90b1NlY3Rpb24gfSksXG4gICAgICAgIH0pLCAxMDApKVxuICAgICAgKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBFZGl0IGJ1dHRvbiB0byBleHBhbmQgc2VjdGlvblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2VkaXQvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFRyaWdnZXIgYSBzYXZlIG9wZXJhdGlvbiBieSB0b2dnbGluZyBsYXlvdXRcbiAgICAgIGNvbnN0IGxheW91dFNlbGVjdCA9IHNjcmVlbi5nZXRCeVJvbGUoJ2NvbWJvYm94Jyk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKGxheW91dFNlbGVjdCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICd0d28tY29sdW1uJyB9IH0pO1xuXG4gICAgICAvLyBQaG90byBwaWNrZXIgYnV0dG9uIHNob3VsZCBiZSBkaXNhYmxlZCBkdXJpbmcgc2F2ZVxuICAgICAgY29uc3QgYWRkUGhvdG9zQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpO1xuICAgICAgZXhwZWN0KGFkZFBob3Rvc0J1dHRvbikudG9CZURpc2FibGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdNdWx0aXBsZSBQaG90byBIYW5kbGluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgc2VsZWN0ZWQgcGhvdG9zIGNvdW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1Bob3RvU2VjdGlvbldpdGhQaG90b3NdKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBFZGl0IGJ1dHRvbiB0byBleHBhbmQgc2VjdGlvblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2VkaXQvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU2VsZWN0ZWQgUGhvdG9zICgyKScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgYWxsIHNlbGVjdGVkIHBob3RvcyBpbiBwcmV2aWV3IGdyaWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrUGhvdG9TZWN0aW9uV2l0aFBob3Rvc10pO1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyh7IHBob3RvczogbW9ja1Bob3RvcywgdG90YWw6IDMgfSk7IC8vIEZvciBQaG90b1BpY2tlclxuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIEVkaXQgYnV0dG9uIHRvIGV4cGFuZCBzZWN0aW9uXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZWRpdC9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTZWxlY3RlZCBQaG90b3MgKDIpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gT3BlbiBwaG90byBwaWNrZXIgdG8gdHJpZ2dlciBwaG90byBmZXRjaFxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJysgQWRkIFBob3RvcyBmcm9tIEdhbGxlcnknKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU2VsZWN0IFBob3RvcycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsb3NlIHBpY2tlclxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJ0RvbmUnKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAvLyBTaG91bGQgZGlzcGxheSAyIHBob3RvIHByZXZpZXdzIGluIHRoZSBncmlkXG4gICAgICAgIGNvbnN0IHBob3RvR3JpZCA9IHNjcmVlbi5nZXRCeVRleHQoJ1NlbGVjdGVkIFBob3RvcyAoMiknKS5jbG9zZXN0KCcuYm9yZGVyJyk7XG4gICAgICAgIGV4cGVjdChwaG90b0dyaWQpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBHcmlkIHNob3VsZCBjb250YWluIHBob3RvIGVsZW1lbnRzXG4gICAgICAgIGNvbnN0IGltYWdlcyA9IHBob3RvR3JpZD8ucXVlcnlTZWxlY3RvckFsbCgnaW1nJyk7XG4gICAgICAgIGV4cGVjdChpbWFnZXM/Lmxlbmd0aCkudG9CZSgyKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBzZWxlY3RpbmcgbXVsdGlwbGUgcGhvdG9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1Bob3RvU2VjdGlvbl0pO1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyh7IHBob3RvczogbW9ja1Bob3RvcywgdG90YWw6IDMgfSk7IC8vIFBob3RvcyBBUElcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MobW9ja1Bob3RvU2VjdGlvbik7IC8vIEZpcnN0IHVwZGF0ZSB3aXRoIDEgcGhvdG9cbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MobW9ja1Bob3RvU2VjdGlvbldpdGhQaG90b3MpOyAvLyBTZWNvbmQgdXBkYXRlIHdpdGggMiBwaG90b3NcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBFZGl0IGJ1dHRvbiB0byBleHBhbmQgc2VjdGlvblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2VkaXQvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCcrIEFkZCBQaG90b3MgZnJvbSBHYWxsZXJ5JykpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUFsdFRleHQoJ0JlYXV0aWZ1bCBzdW5zZXQgYXQgdGhlIGJlYWNoJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2VsZWN0IGZpcnN0IHBob3RvXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5QWx0VGV4dCgnQmVhdXRpZnVsIHN1bnNldCBhdCB0aGUgYmVhY2gnKSk7XG4gICAgICBcbiAgICAgIC8vIFdhaXQgZm9yIGZpcnN0IHVwZGF0ZVxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZpcnN0VXBkYXRlQ2FsbCA9IChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgICAgY2FsbCA9PiBjYWxsWzBdLmluY2x1ZGVzKCcvYXBpL2FkbWluL3NlY3Rpb25zL3NlY3Rpb24tMScpICYmIGNhbGxbMV0/Lm1ldGhvZCA9PT0gJ1BVVCdcbiAgICAgICAgKTtcbiAgICAgICAgZXhwZWN0KGZpcnN0VXBkYXRlQ2FsbCkudG9CZURlZmluZWQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTZWxlY3Qgc2Vjb25kIHBob3RvXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5QWx0VGV4dCgnQ2VyZW1vbnkgYXQgdGhlIHZlbnVlJykpO1xuXG4gICAgICAvLyBDbG9zZSBtb2RhbFxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJ0RvbmUnKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAvLyBTaG91bGQgaGF2ZSBtYWRlIGF0IGxlYXN0IDIgdXBkYXRlIGNhbGxzIChvbmUgZm9yIGVhY2ggcGhvdG8gc2VsZWN0aW9uKVxuICAgICAgICBjb25zdCB1cGRhdGVDYWxscyA9IChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzLmZpbHRlcihcbiAgICAgICAgICBjYWxsID0+IGNhbGxbMF0uaW5jbHVkZXMoJy9hcGkvYWRtaW4vc2VjdGlvbnMvc2VjdGlvbi0xJykgJiYgY2FsbFsxXT8ubWV0aG9kID09PSAnUFVUJ1xuICAgICAgICApO1xuICAgICAgICBleHBlY3QodXBkYXRlQ2FsbHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDEpO1xuICAgICAgICBcbiAgICAgICAgLy8gVGhlIGxhc3QgdXBkYXRlIHNob3VsZCBjb250YWluIGJvdGggcGhvdG9zXG4gICAgICAgIGNvbnN0IGxhc3RVcGRhdGVDYWxsID0gdXBkYXRlQ2FsbHNbdXBkYXRlQ2FsbHMubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChsYXN0VXBkYXRlQ2FsbCkge1xuICAgICAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKGxhc3RVcGRhdGVDYWxsWzFdLmJvZHkpO1xuICAgICAgICAgIC8vIFNob3VsZCBoYXZlIGF0IGxlYXN0IG9uZSBwaG90byBzZWxlY3RlZFxuICAgICAgICAgIGV4cGVjdChib2R5LmNvbHVtbnNbMF0uY29udGVudF9kYXRhLnBob3RvX2lkcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFsbG93IHJlbW92aW5nIGluZGl2aWR1YWwgcGhvdG9zIGZyb20gc2VsZWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1Bob3RvU2VjdGlvbldpdGhQaG90b3NdKTtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoeyBwaG90b3M6IG1vY2tQaG90b3MsIHRvdGFsOiAzIH0pOyAvLyBGb3IgUGhvdG9QaWNrZXIgdG8gZmV0Y2ggcGhvdG9zXG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKG1vY2tQaG90b1NlY3Rpb24pOyAvLyBVcGRhdGUgd2l0aCAwIHBob3Rvc1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIEVkaXQgYnV0dG9uIHRvIGV4cGFuZCBzZWN0aW9uXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZWRpdC9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTZWxlY3RlZCBQaG90b3MgKDIpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gT3BlbiBwaG90byBwaWNrZXIgdG8gdHJpZ2dlciBwaG90byBmZXRjaFxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJysgQWRkIFBob3RvcyBmcm9tIEdhbGxlcnknKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU2VsZWN0IFBob3RvcycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsb3NlIHBpY2tlclxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJ0RvbmUnKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAvLyBGaW5kIGFuZCBjbGljayByZW1vdmUgYnV0dG9uIG9uIGZpcnN0IHBob3RvXG4gICAgICAgIGNvbnN0IHJlbW92ZUJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlMYWJlbFRleHQoJ1JlbW92ZSBwaG90bycpO1xuICAgICAgICBleHBlY3QocmVtb3ZlQnV0dG9ucy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHJlbW92ZUJ1dHRvbnNbMF0pO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnL2FwaS9hZG1pbi9zZWN0aW9ucy9zZWN0aW9uLTEnKSxcbiAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWxsb3cgY2xlYXJpbmcgYWxsIHNlbGVjdGVkIHBob3RvcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tQaG90b1NlY3Rpb25XaXRoUGhvdG9zXSk7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKG1vY2tQaG90b1NlY3Rpb24pOyAvLyBVcGRhdGUgd2l0aCAwIHBob3Rvc1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIEVkaXQgYnV0dG9uIHRvIGV4cGFuZCBzZWN0aW9uXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZWRpdC9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTZWxlY3RlZCBQaG90b3MgKDIpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgXCJDbGVhciBBbGxcIiBidXR0b25cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCdDbGVhciBBbGwnKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCB1cGRhdGVDYWxsID0gKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgICBjYWxsID0+IGNhbGxbMF0uaW5jbHVkZXMoJy9hcGkvYWRtaW4vc2VjdGlvbnMvc2VjdGlvbi0xJykgJiYgY2FsbFsxXT8ubWV0aG9kID09PSAnUFVUJ1xuICAgICAgICApO1xuICAgICAgICBleHBlY3QodXBkYXRlQ2FsbCkudG9CZURlZmluZWQoKTtcbiAgICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UodXBkYXRlQ2FsbFsxXS5ib2R5KTtcbiAgICAgICAgZXhwZWN0KGJvZHkuY29sdW1uc1swXS5jb250ZW50X2RhdGEucGhvdG9faWRzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbWFpbnRhaW4gcGhvdG8gb3JkZXIgaW4gc2VsZWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgb3JkZXJlZFBob3RvU2VjdGlvbiA9IHtcbiAgICAgICAgLi4ubW9ja1Bob3RvU2VjdGlvbixcbiAgICAgICAgY29sdW1uczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIC4uLm1vY2tQaG90b1NlY3Rpb24uY29sdW1uc1swXSxcbiAgICAgICAgICAgIGNvbnRlbnRfZGF0YTogeyBwaG90b19pZHM6IFsncGhvdG8tMycsICdwaG90by0xJywgJ3Bob3RvLTInXSB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyhbb3JkZXJlZFBob3RvU2VjdGlvbl0pO1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyh7IHBob3RvczogbW9ja1Bob3RvcywgdG90YWw6IDMgfSk7IC8vIEZvciBQaG90b1BpY2tlclxuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIEVkaXQgYnV0dG9uIHRvIGV4cGFuZCBzZWN0aW9uXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZWRpdC9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTZWxlY3RlZCBQaG90b3MgKDMpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gT3BlbiBwaG90byBwaWNrZXIgdG8gdHJpZ2dlciBwaG90byBmZXRjaFxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJysgQWRkIFBob3RvcyBmcm9tIEdhbGxlcnknKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU2VsZWN0IFBob3RvcycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsb3NlIHBpY2tlclxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJ0RvbmUnKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAvLyBQaG90b3Mgc2hvdWxkIGJlIGRpc3BsYXllZCBpbiB0aGUgb3JkZXIgdGhleSB3ZXJlIHNlbGVjdGVkXG4gICAgICAgIGNvbnN0IHBob3RvR3JpZCA9IHNjcmVlbi5nZXRCeVRleHQoJ1NlbGVjdGVkIFBob3RvcyAoMyknKS5jbG9zZXN0KCcuYm9yZGVyJyk7XG4gICAgICAgIGNvbnN0IGltYWdlcyA9IHBob3RvR3JpZD8ucXVlcnlTZWxlY3RvckFsbCgnaW1nJyk7XG4gICAgICAgIFxuICAgICAgICBleHBlY3QoaW1hZ2VzPy5sZW5ndGgpLnRvQmUoMyk7XG4gICAgICAgIC8vIE9yZGVyIHNob3VsZCBiZSBtYWludGFpbmVkIChwaG90by0zLCBwaG90by0xLCBwaG90by0yKVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBwaG90byBzZWxlY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrUGhvdG9TZWN0aW9uXSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgRWRpdCBidXR0b24gdG8gZXhwYW5kIHNlY3Rpb25cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9lZGl0L2kgfSkpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgLy8gU2hvdWxkIG5vdCBzaG93IFwiU2VsZWN0ZWQgUGhvdG9zXCIgc2VjdGlvbiB3aGVuIG5vIHBob3RvcyBzZWxlY3RlZFxuICAgICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KC9TZWxlY3RlZCBQaG90b3MvKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBTaG91bGQgc2hvdyB0aGUgYWRkIHBob3RvcyBidXR0b25cbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJysgQWRkIFBob3RvcyBmcm9tIEdhbGxlcnknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGhvdG8gUHJldmlldycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgcGhvdG8gdGh1bWJuYWlscyBpbiBzZWxlY3RlZCBwaG90b3Mgc2VjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tQaG90b1NlY3Rpb25XaXRoUGhvdG9zXSk7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKHsgcGhvdG9zOiBtb2NrUGhvdG9zLCB0b3RhbDogMyB9KTsgLy8gRm9yIFBob3RvUGlja2VyXG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgRWRpdCBidXR0b24gdG8gZXhwYW5kIHNlY3Rpb25cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9lZGl0L2kgfSkpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1NlbGVjdGVkIFBob3RvcyAoMiknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBPcGVuIHBob3RvIHBpY2tlciB0byB0cmlnZ2VyIHBob3RvIGZldGNoXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTZWxlY3QgUGhvdG9zJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xvc2UgcGlja2VyXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnRG9uZScpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIC8vIFNob3VsZCBkaXNwbGF5IHBob3RvIHRodW1ibmFpbHNcbiAgICAgICAgY29uc3QgcGhvdG9HcmlkID0gc2NyZWVuLmdldEJ5VGV4dCgnU2VsZWN0ZWQgUGhvdG9zICgyKScpLmNsb3Nlc3QoJy5ib3JkZXInKTtcbiAgICAgICAgY29uc3QgaW1hZ2VzID0gcGhvdG9HcmlkPy5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKTtcbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChpbWFnZXM/Lmxlbmd0aCkudG9CZSgyKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHBob3RvIGNhcHRpb25zIGluIHByZXZpZXcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrUGhvdG9TZWN0aW9uV2l0aFBob3Rvc10pO1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyh7IHBob3RvczogbW9ja1Bob3RvcywgdG90YWw6IDMgfSk7IC8vIEZvciBQaG90b1BpY2tlciB0byByZXNvbHZlIHBob3RvIGRldGFpbHNcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBFZGl0IGJ1dHRvbiB0byBleHBhbmQgc2VjdGlvblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2VkaXQvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU2VsZWN0ZWQgUGhvdG9zICgyKScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENhcHRpb25zIHNob3VsZCBiZSB2aXNpYmxlIGluIHRoZSBwcmV2aWV3IGdyaWRcbiAgICAgIGNvbnN0IHBob3RvR3JpZCA9IHNjcmVlbi5nZXRCeVRleHQoJ1NlbGVjdGVkIFBob3RvcyAoMiknKS5jbG9zZXN0KCcuYm9yZGVyJyk7XG4gICAgICBleHBlY3QocGhvdG9HcmlkKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzaG93IHBob3RvcyBpbiBndWVzdCBwcmV2aWV3IG1vZGFsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1Bob3RvU2VjdGlvbldpdGhQaG90b3NdKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBPcGVuIHByZXZpZXcgbW9kYWwgYnkgY2xpY2tpbmcgR3Vlc3QgUHJldmlldyBidXR0b25cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCdHdWVzdCBQcmV2aWV3JykpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgLy8gUHJldmlldyBzaG91bGQgc2hvdyBwaG90byBwbGFjZWhvbGRlcnNcbiAgICAgICAgY29uc3QgcHJldmlld1NlY3Rpb24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdHdWVzdCBQcmV2aWV3JykuY2xvc2VzdCgnLmJvcmRlcicpO1xuICAgICAgICBleHBlY3QocHJldmlld1NlY3Rpb24pLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBTaG91bGQgZGlzcGxheSBwaG90byBJRHMgaW4gcHJldmlld1xuICAgICAgICBleHBlY3QocHJldmlld1NlY3Rpb24/LnRleHRDb250ZW50KS50b0NvbnRhaW4oJ3Bob3RvLTEnKTtcbiAgICAgICAgZXhwZWN0KHByZXZpZXdTZWN0aW9uPy50ZXh0Q29udGVudCkudG9Db250YWluKCdwaG90by0yJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2hvdyBcIk5vIHBob3RvcyBzZWxlY3RlZFwiIG1lc3NhZ2UgaW4gcHJldmlldyB3aGVuIGVtcHR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1Bob3RvU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIE9wZW4gcHJldmlldyBieSBjbGlja2luZyBHdWVzdCBQcmV2aWV3IGJ1dHRvblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJ0d1ZXN0IFByZXZpZXcnKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAvLyBTaG91bGQgc2hvdyBlbXB0eSBzdGF0ZSBtZXNzYWdlXG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdObyBwaG90b3Mgc2VsZWN0ZWQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHBob3RvIGdyaWQgbGF5b3V0IGluIHByZXZpZXcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtdWx0aVBob3RvU2VjdGlvbiA9IHtcbiAgICAgICAgLi4ubW9ja1Bob3RvU2VjdGlvbixcbiAgICAgICAgY29sdW1uczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIC4uLm1vY2tQaG90b1NlY3Rpb24uY29sdW1uc1swXSxcbiAgICAgICAgICAgIGNvbnRlbnRfZGF0YTogeyBwaG90b19pZHM6IFsncGhvdG8tMScsICdwaG90by0yJywgJ3Bob3RvLTMnXSB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbXVsdGlQaG90b1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBPcGVuIHByZXZpZXcgYnkgY2xpY2tpbmcgR3Vlc3QgUHJldmlldyBidXR0b25cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCdHdWVzdCBQcmV2aWV3JykpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgLy8gUHJldmlldyBzaG91bGQgdXNlIGdyaWQgbGF5b3V0IGZvciBwaG90b3NcbiAgICAgICAgY29uc3QgcHJldmlld1NlY3Rpb24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdHdWVzdCBQcmV2aWV3JykuY2xvc2VzdCgnLmJvcmRlcicpO1xuICAgICAgICBjb25zdCBwaG90b0dyaWQgPSBwcmV2aWV3U2VjdGlvbj8ucXVlcnlTZWxlY3RvcignLmdyaWQuZ3JpZC1jb2xzLTInKTtcbiAgICAgICAgZXhwZWN0KHBob3RvR3JpZCkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzaG93IGhvdmVyIGVmZmVjdHMgb24gcGhvdG8gdGh1bWJuYWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tQaG90b1NlY3Rpb25XaXRoUGhvdG9zXSk7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKHsgcGhvdG9zOiBtb2NrUGhvdG9zLCB0b3RhbDogMyB9KTsgLy8gRm9yIFBob3RvUGlja2VyXG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgRWRpdCBidXR0b24gdG8gZXhwYW5kIHNlY3Rpb25cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9lZGl0L2kgfSkpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1NlbGVjdGVkIFBob3RvcyAoMiknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBPcGVuIHBob3RvIHBpY2tlciB0byB0cmlnZ2VyIHBob3RvIGZldGNoXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTZWxlY3QgUGhvdG9zJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xvc2UgcGlja2VyXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnRG9uZScpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIC8vIFBob3RvIGNvbnRhaW5lcnMgc2hvdWxkIGhhdmUgZ3JvdXAgY2xhc3MgZm9yIGhvdmVyIGVmZmVjdHNcbiAgICAgICAgY29uc3QgcGhvdG9HcmlkID0gc2NyZWVuLmdldEJ5VGV4dCgnU2VsZWN0ZWQgUGhvdG9zICgyKScpLmNsb3Nlc3QoJy5ib3JkZXInKTtcbiAgICAgICAgY29uc3QgcGhvdG9Db250YWluZXJzID0gcGhvdG9HcmlkPy5xdWVyeVNlbGVjdG9yQWxsKCcuZ3JvdXAnKTtcbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChwaG90b0NvbnRhaW5lcnM/Lmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgcmVtb3ZlIGJ1dHRvbiBvbiBob3ZlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tQaG90b1NlY3Rpb25XaXRoUGhvdG9zXSk7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKHsgcGhvdG9zOiBtb2NrUGhvdG9zLCB0b3RhbDogMyB9KTsgLy8gRm9yIFBob3RvUGlja2VyXG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgRWRpdCBidXR0b24gdG8gZXhwYW5kIHNlY3Rpb25cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9lZGl0L2kgfSkpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1NlbGVjdGVkIFBob3RvcyAoMiknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBPcGVuIHBob3RvIHBpY2tlciB0byB0cmlnZ2VyIHBob3RvIGZldGNoXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTZWxlY3QgUGhvdG9zJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xvc2UgcGlja2VyXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnRG9uZScpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIC8vIFJlbW92ZSBidXR0b25zIHNob3VsZCBiZSBwcmVzZW50ICh3aXRoIG9wYWNpdHktMCBpbml0aWFsbHkpXG4gICAgICAgIGNvbnN0IHJlbW92ZUJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlMYWJlbFRleHQoJ1JlbW92ZSBwaG90bycpO1xuICAgICAgICBleHBlY3QocmVtb3ZlQnV0dG9ucy5sZW5ndGgpLnRvQmUoMik7XG4gICAgICAgIFxuICAgICAgICAvLyBCdXR0b25zIHNob3VsZCBoYXZlIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwIGNsYXNzXG4gICAgICAgIHJlbW92ZUJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgICAgIGV4cGVjdChidXR0b24uY2xhc3NOYW1lKS50b0NvbnRhaW4oJ2dyb3VwLWhvdmVyOm9wYWNpdHktMTAwJyk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb2x1bW4gVHlwZSBDaGFuZ2UgdG8gUGhvdG8gR2FsbGVyeScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgZW1wdHkgcGhvdG9faWRzIHdoZW4gY2hhbmdpbmcgdG8gcGhvdG9fZ2FsbGVyeSB0eXBlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmljaFRleHRTZWN0aW9uID0ge1xuICAgICAgICAuLi5tb2NrUGhvdG9TZWN0aW9uLFxuICAgICAgICBjb2x1bW5zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgLi4ubW9ja1Bob3RvU2VjdGlvbi5jb2x1bW5zWzBdLFxuICAgICAgICAgICAgY29udGVudF90eXBlOiAncmljaF90ZXh0JyBhcyBjb25zdCxcbiAgICAgICAgICAgIGNvbnRlbnRfZGF0YTogeyBodG1sOiAnPHA+U29tZSB0ZXh0PC9wPicgfSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfTtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW3JpY2hUZXh0U2VjdGlvbl0pO1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyhtb2NrUGhvdG9TZWN0aW9uKTsgLy8gVXBkYXRlZCB0byBwaG90b19nYWxsZXJ5XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgRWRpdCBidXR0b24gdG8gZXhwYW5kIHNlY3Rpb25cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9lZGl0L2kgfSkpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgLy8gRmluZCB0aGUgY29sdW1uIHR5cGUgc2VsZWN0b3IgKHNlY29uZCBjb21ib2JveCAtIGZpcnN0IGlzIGxheW91dCBzZWxlY3RvcilcbiAgICAgICAgY29uc3Qgc2VsZWN0cyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2NvbWJvYm94Jyk7XG4gICAgICAgIGV4cGVjdChzZWxlY3RzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDEpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENoYW5nZSBjb2x1bW4gdHlwZSB0byBwaG90b19nYWxsZXJ5IChzZWNvbmQgY29tYm9ib3gpXG4gICAgICBjb25zdCBzZWxlY3RzID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnY29tYm9ib3gnKTtcbiAgICAgIGNvbnN0IGNvbHVtblR5cGVTZWxlY3QgPSBzZWxlY3RzWzFdOyAvLyBTZWNvbmQgc2VsZWN0IGlzIGNvbHVtbiB0eXBlXG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKGNvbHVtblR5cGVTZWxlY3QsIHsgdGFyZ2V0OiB7IHZhbHVlOiAncGhvdG9fZ2FsbGVyeScgfSB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZUNhbGwgPSAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9jay5jYWxscy5maW5kKFxuICAgICAgICAgIGNhbGwgPT4gY2FsbFswXS5pbmNsdWRlcygnL2FwaS9hZG1pbi9zZWN0aW9ucy9zZWN0aW9uLTEnKSAmJiBjYWxsWzFdPy5tZXRob2QgPT09ICdQVVQnXG4gICAgICAgICk7XG4gICAgICAgIGV4cGVjdCh1cGRhdGVDYWxsKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZSh1cGRhdGVDYWxsWzFdLmJvZHkpO1xuICAgICAgICBleHBlY3QoYm9keS5jb2x1bW5zWzBdLmNvbnRlbnRfdHlwZSkudG9CZSgncGhvdG9fZ2FsbGVyeScpO1xuICAgICAgICBleHBlY3QoYm9keS5jb2x1bW5zWzBdLmNvbnRlbnRfZGF0YSkudG9FcXVhbCh7IHBob3RvX2lkczogW10sIGRpc3BsYXlfbW9kZTogJ2dhbGxlcnknIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgUGhvdG9QaWNrZXIgYWZ0ZXIgY2hhbmdpbmcgY29sdW1uIHR5cGUgdG8gcGhvdG9fZ2FsbGVyeScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJpY2hUZXh0U2VjdGlvbiA9IHtcbiAgICAgICAgLi4ubW9ja1Bob3RvU2VjdGlvbixcbiAgICAgICAgY29sdW1uczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIC4uLm1vY2tQaG90b1NlY3Rpb24uY29sdW1uc1swXSxcbiAgICAgICAgICAgIGNvbnRlbnRfdHlwZTogJ3JpY2hfdGV4dCcgYXMgY29uc3QsXG4gICAgICAgICAgICBjb250ZW50X2RhdGE6IHsgaHRtbDogJzxwPlNvbWUgdGV4dDwvcD4nIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH07XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFtyaWNoVGV4dFNlY3Rpb25dKTtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MobW9ja1Bob3RvU2VjdGlvbik7IC8vIFVwZGF0ZWQgdG8gcGhvdG9fZ2FsbGVyeVxuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIEVkaXQgYnV0dG9uIHRvIGV4cGFuZCBzZWN0aW9uXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZWRpdC9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIC8vIEZpbmQgdGhlIGNvbHVtbiB0eXBlIHNlbGVjdG9yIChzZWNvbmQgY29tYm9ib3gpXG4gICAgICAgIGNvbnN0IHNlbGVjdHMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdjb21ib2JveCcpO1xuICAgICAgICBleHBlY3Qoc2VsZWN0cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigxKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDaGFuZ2UgY29sdW1uIHR5cGUgdG8gcGhvdG9fZ2FsbGVyeSAoc2Vjb25kIGNvbWJvYm94KVxuICAgICAgY29uc3Qgc2VsZWN0cyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2NvbWJvYm94Jyk7XG4gICAgICBjb25zdCBjb2x1bW5UeXBlU2VsZWN0ID0gc2VsZWN0c1sxXTsgLy8gU2Vjb25kIHNlbGVjdCBpcyBjb2x1bW4gdHlwZVxuICAgICAgZmlyZUV2ZW50LmNoYW5nZShjb2x1bW5UeXBlU2VsZWN0LCB7IHRhcmdldDogeyB2YWx1ZTogJ3Bob3RvX2dhbGxlcnknIH0gfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiZ2xvYmFsIiwiZmV0Y2giLCJqZXN0IiwiZm4iLCJvcmlnaW5hbENvbmZpcm0iLCJ3aW5kb3ciLCJjb25maXJtIiwiRWxlbWVudCIsInByb3RvdHlwZSIsInNjcm9sbEludG9WaWV3IiwibW9ja1Bob3RvcyIsImlkIiwicGhvdG9fdXJsIiwiY2FwdGlvbiIsImFsdF90ZXh0IiwibW9kZXJhdGlvbl9zdGF0dXMiLCJjcmVhdGVkX2F0IiwibW9ja1Bob3RvU2VjdGlvbiIsInBhZ2VfdHlwZSIsInBhZ2VfaWQiLCJkaXNwbGF5X29yZGVyIiwidXBkYXRlZF9hdCIsImNvbHVtbnMiLCJzZWN0aW9uX2lkIiwiY29sdW1uX251bWJlciIsImNvbnRlbnRfdHlwZSIsImNvbnRlbnRfZGF0YSIsInBob3RvX2lkcyIsIm1vY2tQaG90b1NlY3Rpb25XaXRoUGhvdG9zIiwiZGVzY3JpYmUiLCJtb2NrT25TYXZlIiwibW9ja09uQ2xvc2UiLCJiZWZvcmVFYWNoIiwibW9ja1JldHVyblZhbHVlIiwibW9ja1Jlc2V0IiwiY2xlYXJBbGxNb2NrcyIsImFmdGVyRWFjaCIsImNsZWFudXAiLCJtb2NrRmV0Y2hTdWNjZXNzIiwiZGF0YSIsIm1vY2tSZXNvbHZlZFZhbHVlT25jZSIsIm9rIiwianNvbiIsInN1Y2Nlc3MiLCJpdCIsInJlbmRlciIsIlNlY3Rpb25FZGl0b3IiLCJwYWdlVHlwZSIsInBhZ2VJZCIsIm9uU2F2ZSIsIm9uQ2xvc2UiLCJ3YWl0Rm9yIiwiZXhwZWN0Iiwic2NyZWVuIiwiZ2V0QnlUZXh0IiwidG9CZUluVGhlRG9jdW1lbnQiLCJmaXJlRXZlbnQiLCJjbGljayIsImdldEJ5Um9sZSIsIm5hbWUiLCJwaG90b3MiLCJ0b3RhbCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwic3RyaW5nQ29udGFpbmluZyIsImdldEJ5QWx0VGV4dCIsIm9iamVjdENvbnRhaW5pbmciLCJtZXRob2QiLCJib2R5IiwibW9ja0ltcGxlbWVudGF0aW9uT25jZSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImxheW91dFNlbGVjdCIsImNoYW5nZSIsInRhcmdldCIsInZhbHVlIiwiYWRkUGhvdG9zQnV0dG9uIiwidG9CZURpc2FibGVkIiwicGhvdG9HcmlkIiwiY2xvc2VzdCIsImltYWdlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsZW5ndGgiLCJ0b0JlIiwiZmlyc3RVcGRhdGVDYWxsIiwibW9jayIsImNhbGxzIiwiZmluZCIsImNhbGwiLCJpbmNsdWRlcyIsInRvQmVEZWZpbmVkIiwidXBkYXRlQ2FsbHMiLCJmaWx0ZXIiLCJ0b0JlR3JlYXRlclRoYW5PckVxdWFsIiwibGFzdFVwZGF0ZUNhbGwiLCJKU09OIiwicGFyc2UiLCJ0b0JlR3JlYXRlclRoYW4iLCJyZW1vdmVCdXR0b25zIiwiZ2V0QWxsQnlMYWJlbFRleHQiLCJ1cGRhdGVDYWxsIiwidG9IYXZlTGVuZ3RoIiwib3JkZXJlZFBob3RvU2VjdGlvbiIsInF1ZXJ5QnlUZXh0Iiwibm90IiwicHJldmlld1NlY3Rpb24iLCJ0ZXh0Q29udGVudCIsInRvQ29udGFpbiIsIm11bHRpUGhvdG9TZWN0aW9uIiwicXVlcnlTZWxlY3RvciIsInBob3RvQ29udGFpbmVycyIsImZvckVhY2giLCJidXR0b24iLCJjbGFzc05hbWUiLCJyaWNoVGV4dFNlY3Rpb24iLCJodG1sIiwic2VsZWN0cyIsImdldEFsbEJ5Um9sZSIsImNvbHVtblR5cGVTZWxlY3QiLCJ0b0VxdWFsIiwiZGlzcGxheV9tb2RlIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7O0NBU0M7Ozs7O3VCQUUy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