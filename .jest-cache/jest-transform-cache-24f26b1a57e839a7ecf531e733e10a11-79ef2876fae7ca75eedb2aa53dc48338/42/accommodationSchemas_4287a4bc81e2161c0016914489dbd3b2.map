{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/schemas/accommodationSchemas.ts"],"sourcesContent":["import { z } from 'zod';\n\n/**\n * Schema for creating a new accommodation.\n */\nexport const createAccommodationSchema = z.object({\n  name: z.string().min(1, 'Name is required').max(200, 'Name must be 200 characters or less'),\n  locationId: z.string().uuid('Invalid location ID').nullable().optional(),\n  description: z.string().max(5000, 'Description must be 5000 characters or less').nullable().optional(),\n  address: z.string().max(500, 'Address must be 500 characters or less').nullable().optional(),\n  status: z.enum(['draft', 'published']).optional().default('draft'),\n});\n\n/**\n * Schema for updating an existing accommodation.\n */\nexport const updateAccommodationSchema = createAccommodationSchema.partial();\n\n/**\n * Schema for filtering accommodations.\n */\nexport const accommodationFilterSchema = z.object({\n  locationId: z.string().uuid().nullable().optional(),\n  status: z.enum(['draft', 'published']).optional(),\n  page: z.number().int().positive().optional().default(1),\n  pageSize: z.number().int().positive().max(100).optional().default(50),\n});\n\n/**\n * Schema for searching accommodations.\n */\nexport const accommodationSearchSchema = z.object({\n  query: z.string().min(1, 'Search query is required'),\n  page: z.number().int().positive().optional().default(1),\n  pageSize: z.number().int().positive().max(100).optional().default(50),\n});\n\n/**\n * Schema for creating a new room type.\n */\nexport const createRoomTypeSchema = z.object({\n  accommodationId: z.string().uuid('Invalid accommodation ID'),\n  name: z.string().min(1, 'Name is required').max(200, 'Name must be 200 characters or less'),\n  description: z.string().max(2000, 'Description must be 2000 characters or less').nullable().optional(),\n  capacity: z.coerce.number().int().positive('Capacity must be positive'),\n  totalRooms: z.coerce.number().int().positive('Total rooms must be positive'),\n  pricePerNight: z.coerce.number().nonnegative('Price per night must be non-negative'),\n  hostSubsidyPerNight: z.coerce.number().nonnegative('Host subsidy must be non-negative').nullable().optional(),\n  status: z.enum(['draft', 'published']).optional().default('draft'),\n}).refine(\n  (data) => {\n    if (data.hostSubsidyPerNight !== null && data.hostSubsidyPerNight !== undefined) {\n      return data.hostSubsidyPerNight <= data.pricePerNight;\n    }\n    return true;\n  },\n  {\n    message: 'Host subsidy cannot exceed price per night',\n    path: ['hostSubsidyPerNight'],\n  }\n);\n\n/**\n * Schema for updating an existing room type.\n */\nexport const updateRoomTypeSchema = z.object({\n  name: z.string().min(1, 'Name is required').max(200, 'Name must be 200 characters or less').optional(),\n  description: z.string().max(2000, 'Description must be 2000 characters or less').nullable().optional(),\n  capacity: z.number().int().positive('Capacity must be positive').optional(),\n  totalRooms: z.number().int().positive('Total rooms must be positive').optional(),\n  pricePerNight: z.number().nonnegative('Price per night must be non-negative').optional(),\n  hostSubsidyPerNight: z.number().nonnegative('Host subsidy must be non-negative').nullable().optional(),\n  status: z.enum(['draft', 'published']).optional(),\n}).refine(\n  (data) => {\n    if (data.hostSubsidyPerNight !== null && data.hostSubsidyPerNight !== undefined && data.pricePerNight !== undefined) {\n      return data.hostSubsidyPerNight <= data.pricePerNight;\n    }\n    return true;\n  },\n  {\n    message: 'Host subsidy cannot exceed price per night',\n    path: ['hostSubsidyPerNight'],\n  }\n);\n\n/**\n * Schema for creating a new room assignment.\n */\nexport const createRoomAssignmentSchema = z.object({\n  roomTypeId: z.string().uuid('Invalid room type ID'),\n  guestId: z.string().uuid('Invalid guest ID'),\n  checkIn: z.string().refine((val) => !isNaN(Date.parse(val)), 'Invalid check-in date'),\n  checkOut: z.string().refine((val) => !isNaN(Date.parse(val)), 'Invalid check-out date'),\n  notes: z.string().max(1000, 'Notes must be 1000 characters or less').nullable().optional(),\n}).refine(\n  (data) => {\n    const checkIn = new Date(data.checkIn);\n    const checkOut = new Date(data.checkOut);\n    return checkIn < checkOut;\n  },\n  {\n    message: 'Check-out date must be after check-in date',\n    path: ['checkOut'],\n  }\n);\n\n/**\n * Schema for updating an existing room assignment.\n */\nexport const updateRoomAssignmentSchema = z.object({\n  checkIn: z.string().refine((val) => !isNaN(Date.parse(val)), 'Invalid check-in date').optional(),\n  checkOut: z.string().refine((val) => !isNaN(Date.parse(val)), 'Invalid check-out date').optional(),\n  notes: z.string().max(1000, 'Notes must be 1000 characters or less').nullable().optional(),\n}).refine(\n  (data) => {\n    if (data.checkIn && data.checkOut) {\n      const checkIn = new Date(data.checkIn);\n      const checkOut = new Date(data.checkOut);\n      return checkIn < checkOut;\n    }\n    return true;\n  },\n  {\n    message: 'Check-out date must be after check-in date',\n    path: ['checkOut'],\n  }\n);\n\n/**\n * Schema for calculating room assignment costs.\n */\nexport const calculateCostSchema = z.object({\n  roomTypeId: z.string().uuid('Invalid room type ID'),\n  checkIn: z.string().refine((val) => !isNaN(Date.parse(val)), 'Invalid check-in date'),\n  checkOut: z.string().refine((val) => !isNaN(Date.parse(val)), 'Invalid check-out date'),\n}).refine(\n  (data) => {\n    const checkIn = new Date(data.checkIn);\n    const checkOut = new Date(data.checkOut);\n    return checkIn < checkOut;\n  },\n  {\n    message: 'Check-out date must be after check-in date',\n    path: ['checkOut'],\n  }\n);\n\n/**\n * TypeScript types derived from schemas.\n */\nexport type CreateAccommodationDTO = z.infer<typeof createAccommodationSchema>;\nexport type UpdateAccommodationDTO = z.infer<typeof updateAccommodationSchema>;\nexport type AccommodationFilterDTO = z.infer<typeof accommodationFilterSchema>;\nexport type AccommodationSearchDTO = z.infer<typeof accommodationSearchSchema>;\nexport type CreateRoomTypeDTO = z.infer<typeof createRoomTypeSchema>;\nexport type UpdateRoomTypeDTO = z.infer<typeof updateRoomTypeSchema>;\nexport type CreateRoomAssignmentDTO = z.infer<typeof createRoomAssignmentSchema>;\nexport type UpdateRoomAssignmentDTO = z.infer<typeof updateRoomAssignmentSchema>;\nexport type CalculateCostDTO = z.infer<typeof calculateCostSchema>;\n\n/**\n * Accommodation entity type.\n */\nexport interface Accommodation {\n  id: string;\n  name: string;\n  slug: string;\n  locationId: string | null;\n  description: string | null;\n  address: string | null;\n  checkInDate?: string | null;\n  checkOutDate?: string | null;\n  status: 'draft' | 'published';\n  createdAt: string;\n  updatedAt: string;\n}\n\n/**\n * Room type entity type.\n */\nexport interface RoomType {\n  id: string;\n  accommodationId: string;\n  name: string;\n  slug: string;\n  description: string | null;\n  capacity: number;\n  totalRooms: number;\n  pricePerNight: number;\n  hostSubsidyPerNight: number | null;\n  status: 'draft' | 'published';\n  createdAt: string;\n  updatedAt: string;\n}\n\n/**\n * Room assignment entity type.\n */\nexport interface RoomAssignment {\n  id: string;\n  roomTypeId: string;\n  guestId: string;\n  checkIn: string;\n  checkOut: string;\n  notes: string | null;\n  createdAt: string;\n  updatedAt: string;\n}\n\n/**\n * Paginated accommodations response.\n */\nexport interface PaginatedAccommodations {\n  accommodations: Accommodation[];\n  total: number;\n  page: number;\n  pageSize: number;\n  totalPages: number;\n}\n\n/**\n * Room assignment cost calculation result.\n */\nexport interface RoomCost {\n  totalCost: number;\n  totalSubsidy: number;\n  guestCost: number;\n  numberOfNights: number;\n  pricePerNight: number;\n  subsidyPerNight: number;\n}\n\n/**\n * Accommodation with room types.\n */\nexport interface AccommodationWithRoomTypes extends Accommodation {\n  roomTypes: RoomType[];\n}\n\n/**\n * Room type with availability information.\n */\nexport interface RoomTypeWithAvailability extends RoomType {\n  availableRooms: number;\n  assignedRooms: number;\n}\n"],"names":["accommodationFilterSchema","accommodationSearchSchema","calculateCostSchema","createAccommodationSchema","createRoomAssignmentSchema","createRoomTypeSchema","updateAccommodationSchema","updateRoomAssignmentSchema","updateRoomTypeSchema","z","object","name","string","min","max","locationId","uuid","nullable","optional","description","address","status","enum","default","partial","page","number","int","positive","pageSize","query","accommodationId","capacity","coerce","totalRooms","pricePerNight","nonnegative","hostSubsidyPerNight","refine","data","undefined","message","path","roomTypeId","guestId","checkIn","val","isNaN","Date","parse","checkOut","notes"],"mappings":"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"}