957920e36ffee19bcff02119ca5b4cac
/**
 * Unit Tests for Event Service Slug Methods
 * 
 * Tests the slug-related functionality in eventService including:
 * - getBySlug method
 * - Slug generation on create
 * - Slug preservation on update
 * - Slug validation
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _eventService = require("./eventService");
describe('eventService - Slug Methods', ()=>{
    // Clean up test events after each test
    const createdEventIds = [];
    afterEach(async ()=>{
        // Clean up all created events
        for (const id of createdEventIds){
            await (0, _eventService.deleteEvent)(id);
        }
        createdEventIds.length = 0;
    });
    describe('getBySlug', ()=>{
        it('should retrieve event by slug', async ()=>{
            // Create event
            const createResult = await (0, _eventService.create)({
                name: 'Wedding Ceremony',
                eventType: 'ceremony',
                startDate: '2025-06-15T14:00:00Z'
            });
            expect(createResult.success).toBe(true);
            if (!createResult.success) return;
            createdEventIds.push(createResult.data.id);
            const slug = createResult.data.slug;
            // Retrieve by slug
            const getResult = await (0, _eventService.getBySlug)(slug);
            expect(getResult.success).toBe(true);
            if (!getResult.success) return;
            expect(getResult.data.id).toBe(createResult.data.id);
            expect(getResult.data.name).toBe('Wedding Ceremony');
            expect(getResult.data.slug).toBe(slug);
        });
        it('should return NOT_FOUND for non-existent slug', async ()=>{
            const result = await (0, _eventService.getBySlug)('non-existent-event-slug');
            expect(result.success).toBe(false);
            if (result.success) return;
            expect(result.error.code).toBe('NOT_FOUND');
        });
        it('should return VALIDATION_ERROR for empty slug', async ()=>{
            const result = await (0, _eventService.getBySlug)('');
            expect(result.success).toBe(false);
            if (result.success) return;
            expect(result.error.code).toBe('VALIDATION_ERROR');
        });
        it('should handle slug lookup case-insensitively', async ()=>{
            // Create event
            const createResult = await (0, _eventService.create)({
                name: 'Beach Party',
                eventType: 'reception',
                startDate: '2025-06-16T18:00:00Z'
            });
            expect(createResult.success).toBe(true);
            if (!createResult.success) return;
            createdEventIds.push(createResult.data.id);
            const slug = createResult.data.slug;
            // Try with different case
            const getResult = await (0, _eventService.getBySlug)(slug.toUpperCase());
            expect(getResult.success).toBe(true);
            if (!getResult.success) return;
            expect(getResult.data.id).toBe(createResult.data.id);
        });
    });
    describe('Slug Generation on Create', ()=>{
        it('should generate slug from event name', async ()=>{
            const result = await (0, _eventService.create)({
                name: 'Welcome Dinner',
                eventType: 'meal',
                startDate: '2025-06-14T19:00:00Z'
            });
            expect(result.success).toBe(true);
            if (!result.success) return;
            createdEventIds.push(result.data.id);
            expect(result.data.slug).toBe('welcome-dinner');
        });
        it('should generate URL-safe slug from name with special characters', async ()=>{
            const result = await (0, _eventService.create)({
                name: 'Bride & Groom\'s Reception!',
                eventType: 'reception',
                startDate: '2025-06-15T20:00:00Z'
            });
            expect(result.success).toBe(true);
            if (!result.success) return;
            createdEventIds.push(result.data.id);
            // Special characters should be removed
            expect(result.data.slug).toMatch(/^[a-z0-9-]+$/);
            expect(result.data.slug).not.toContain('&');
            expect(result.data.slug).not.toContain("'");
            expect(result.data.slug).not.toContain('!');
        });
        it('should generate unique slugs for duplicate names', async ()=>{
            // Create first event
            const result1 = await (0, _eventService.create)({
                name: 'Ceremony',
                eventType: 'ceremony',
                startDate: '2025-06-15T14:00:00Z'
            });
            expect(result1.success).toBe(true);
            if (!result1.success) return;
            createdEventIds.push(result1.data.id);
            // Create second event with same name
            const result2 = await (0, _eventService.create)({
                name: 'Ceremony',
                eventType: 'ceremony',
                startDate: '2025-06-15T15:00:00Z'
            });
            expect(result2.success).toBe(true);
            if (!result2.success) return;
            createdEventIds.push(result2.data.id);
            // Slugs should be different
            expect(result1.data.slug).toBe('ceremony');
            expect(result2.data.slug).toBe('ceremony-2');
        });
        it('should return VALIDATION_ERROR for name with no alphanumeric characters', async ()=>{
            const result = await (0, _eventService.create)({
                name: '!!!',
                eventType: 'activity',
                startDate: '2025-06-15T10:00:00Z'
            });
            expect(result.success).toBe(false);
            if (result.success) return;
            expect(result.error.code).toBe('VALIDATION_ERROR');
            expect(result.error.message).toContain('alphanumeric character');
        });
        it('should handle names with multiple spaces', async ()=>{
            const result = await (0, _eventService.create)({
                name: 'Beach    Volleyball    Tournament',
                eventType: 'activity',
                startDate: '2025-06-16T10:00:00Z'
            });
            expect(result.success).toBe(true);
            if (!result.success) return;
            createdEventIds.push(result.data.id);
            // Multiple spaces should be collapsed to single hyphens
            expect(result.data.slug).toBe('beach-volleyball-tournament');
            expect(result.data.slug).not.toContain('--');
        });
        it('should trim leading and trailing whitespace from name', async ()=>{
            const result = await (0, _eventService.create)({
                name: '   Sunset Cruise   ',
                eventType: 'activity',
                startDate: '2025-06-17T18:00:00Z'
            });
            expect(result.success).toBe(true);
            if (!result.success) return;
            createdEventIds.push(result.data.id);
            // Slug should not have leading or trailing hyphens
            expect(result.data.slug).toBe('sunset-cruise');
            expect(result.data.slug).not.toMatch(/^-/);
            expect(result.data.slug).not.toMatch(/-$/);
        });
    });
    describe('Slug Preservation on Update', ()=>{
        it('should preserve slug when updating event name', async ()=>{
            // Create event
            const createResult = await (0, _eventService.create)({
                name: 'Original Name',
                eventType: 'ceremony',
                startDate: '2025-06-15T14:00:00Z'
            });
            expect(createResult.success).toBe(true);
            if (!createResult.success) return;
            createdEventIds.push(createResult.data.id);
            const originalSlug = createResult.data.slug;
            // Update name
            const updateResult = await (0, _eventService.update)(createResult.data.id, {
                name: 'New Name'
            });
            expect(updateResult.success).toBe(true);
            if (!updateResult.success) return;
            // Slug should remain unchanged
            expect(updateResult.data.slug).toBe(originalSlug);
            expect(updateResult.data.name).toBe('New Name');
        });
        it('should preserve slug when updating description', async ()=>{
            // Create event
            const createResult = await (0, _eventService.create)({
                name: 'Test Event',
                eventType: 'reception',
                startDate: '2025-06-15T18:00:00Z',
                description: 'Original description'
            });
            expect(createResult.success).toBe(true);
            if (!createResult.success) return;
            createdEventIds.push(createResult.data.id);
            const originalSlug = createResult.data.slug;
            // Update description
            const updateResult = await (0, _eventService.update)(createResult.data.id, {
                description: 'Updated description'
            });
            expect(updateResult.success).toBe(true);
            if (!updateResult.success) return;
            // Slug should remain unchanged
            expect(updateResult.data.slug).toBe(originalSlug);
        });
        it('should preserve slug across multiple updates', async ()=>{
            // Create event
            const createResult = await (0, _eventService.create)({
                name: 'Initial Name',
                eventType: 'meal',
                startDate: '2025-06-15T19:00:00Z'
            });
            expect(createResult.success).toBe(true);
            if (!createResult.success) return;
            createdEventIds.push(createResult.data.id);
            const originalSlug = createResult.data.slug;
            // Update name multiple times
            const names = [
                'First Update',
                'Second Update',
                'Third Update'
            ];
            for (const name of names){
                const updateResult = await (0, _eventService.update)(createResult.data.id, {
                    name
                });
                expect(updateResult.success).toBe(true);
                if (!updateResult.success) continue;
                expect(updateResult.data.slug).toBe(originalSlug);
            }
        });
    });
    describe('Slug Validation', ()=>{
        it('should accept valid slug patterns', async ()=>{
            const validNames = [
                'simple-event',
                'event-with-numbers-123',
                'a',
                'event-2'
            ];
            for (const name of validNames){
                const result = await (0, _eventService.create)({
                    name,
                    eventType: 'activity',
                    startDate: '2025-06-15T10:00:00Z'
                });
                expect(result.success).toBe(true);
                if (!result.success) continue;
                createdEventIds.push(result.data.id);
                expect(result.data.slug).toMatch(/^[a-z0-9-]+$/);
            }
        });
        it('should handle unicode characters in names', async ()=>{
            const result = await (0, _eventService.create)({
                name: 'Caf√© Reception',
                eventType: 'reception',
                startDate: '2025-06-15T18:00:00Z'
            });
            expect(result.success).toBe(true);
            if (!result.success) return;
            createdEventIds.push(result.data.id);
            // Unicode should be removed, leaving only ASCII
            expect(result.data.slug).toMatch(/^[a-z0-9-]+$/);
            expect(result.data.slug).not.toMatch(/[^\x00-\x7F]/);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvc2VydmljZXMvZXZlbnRTZXJ2aWNlLnNsdWdNZXRob2RzLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVbml0IFRlc3RzIGZvciBFdmVudCBTZXJ2aWNlIFNsdWcgTWV0aG9kc1xuICogXG4gKiBUZXN0cyB0aGUgc2x1Zy1yZWxhdGVkIGZ1bmN0aW9uYWxpdHkgaW4gZXZlbnRTZXJ2aWNlIGluY2x1ZGluZzpcbiAqIC0gZ2V0QnlTbHVnIG1ldGhvZFxuICogLSBTbHVnIGdlbmVyYXRpb24gb24gY3JlYXRlXG4gKiAtIFNsdWcgcHJlc2VydmF0aW9uIG9uIHVwZGF0ZVxuICogLSBTbHVnIHZhbGlkYXRpb25cbiAqL1xuXG5pbXBvcnQgeyBjcmVhdGUsIHVwZGF0ZSwgZ2V0QnlTbHVnLCBkZWxldGVFdmVudCB9IGZyb20gJy4vZXZlbnRTZXJ2aWNlJztcblxuZGVzY3JpYmUoJ2V2ZW50U2VydmljZSAtIFNsdWcgTWV0aG9kcycsICgpID0+IHtcbiAgLy8gQ2xlYW4gdXAgdGVzdCBldmVudHMgYWZ0ZXIgZWFjaCB0ZXN0XG4gIGNvbnN0IGNyZWF0ZWRFdmVudElkczogc3RyaW5nW10gPSBbXTtcblxuICBhZnRlckVhY2goYXN5bmMgKCkgPT4ge1xuICAgIC8vIENsZWFuIHVwIGFsbCBjcmVhdGVkIGV2ZW50c1xuICAgIGZvciAoY29uc3QgaWQgb2YgY3JlYXRlZEV2ZW50SWRzKSB7XG4gICAgICBhd2FpdCBkZWxldGVFdmVudChpZCk7XG4gICAgfVxuICAgIGNyZWF0ZWRFdmVudElkcy5sZW5ndGggPSAwO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0QnlTbHVnJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0cmlldmUgZXZlbnQgYnkgc2x1ZycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBldmVudFxuICAgICAgY29uc3QgY3JlYXRlUmVzdWx0ID0gYXdhaXQgY3JlYXRlKHtcbiAgICAgICAgbmFtZTogJ1dlZGRpbmcgQ2VyZW1vbnknLFxuICAgICAgICBldmVudFR5cGU6ICdjZXJlbW9ueScsXG4gICAgICAgIHN0YXJ0RGF0ZTogJzIwMjUtMDYtMTVUMTQ6MDA6MDBaJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoY3JlYXRlUmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAoIWNyZWF0ZVJlc3VsdC5zdWNjZXNzKSByZXR1cm47XG5cbiAgICAgIGNyZWF0ZWRFdmVudElkcy5wdXNoKGNyZWF0ZVJlc3VsdC5kYXRhLmlkKTtcbiAgICAgIGNvbnN0IHNsdWcgPSBjcmVhdGVSZXN1bHQuZGF0YS5zbHVnO1xuXG4gICAgICAvLyBSZXRyaWV2ZSBieSBzbHVnXG4gICAgICBjb25zdCBnZXRSZXN1bHQgPSBhd2FpdCBnZXRCeVNsdWcoc2x1Zyk7XG5cbiAgICAgIGV4cGVjdChnZXRSZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmICghZ2V0UmVzdWx0LnN1Y2Nlc3MpIHJldHVybjtcblxuICAgICAgZXhwZWN0KGdldFJlc3VsdC5kYXRhLmlkKS50b0JlKGNyZWF0ZVJlc3VsdC5kYXRhLmlkKTtcbiAgICAgIGV4cGVjdChnZXRSZXN1bHQuZGF0YS5uYW1lKS50b0JlKCdXZWRkaW5nIENlcmVtb255Jyk7XG4gICAgICBleHBlY3QoZ2V0UmVzdWx0LmRhdGEuc2x1ZykudG9CZShzbHVnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIE5PVF9GT1VORCBmb3Igbm9uLWV4aXN0ZW50IHNsdWcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRCeVNsdWcoJ25vbi1leGlzdGVudC1ldmVudC1zbHVnJyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHJldHVybjtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdOT1RfRk9VTkQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIFZBTElEQVRJT05fRVJST1IgZm9yIGVtcHR5IHNsdWcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRCeVNsdWcoJycpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSByZXR1cm47XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2x1ZyBsb29rdXAgY2FzZS1pbnNlbnNpdGl2ZWx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGV2ZW50XG4gICAgICBjb25zdCBjcmVhdGVSZXN1bHQgPSBhd2FpdCBjcmVhdGUoe1xuICAgICAgICBuYW1lOiAnQmVhY2ggUGFydHknLFxuICAgICAgICBldmVudFR5cGU6ICdyZWNlcHRpb24nLFxuICAgICAgICBzdGFydERhdGU6ICcyMDI1LTA2LTE2VDE4OjAwOjAwWicsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGNyZWF0ZVJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKCFjcmVhdGVSZXN1bHQuc3VjY2VzcykgcmV0dXJuO1xuXG4gICAgICBjcmVhdGVkRXZlbnRJZHMucHVzaChjcmVhdGVSZXN1bHQuZGF0YS5pZCk7XG4gICAgICBjb25zdCBzbHVnID0gY3JlYXRlUmVzdWx0LmRhdGEuc2x1ZztcblxuICAgICAgLy8gVHJ5IHdpdGggZGlmZmVyZW50IGNhc2VcbiAgICAgIGNvbnN0IGdldFJlc3VsdCA9IGF3YWl0IGdldEJ5U2x1ZyhzbHVnLnRvVXBwZXJDYXNlKCkpO1xuXG4gICAgICBleHBlY3QoZ2V0UmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAoIWdldFJlc3VsdC5zdWNjZXNzKSByZXR1cm47XG5cbiAgICAgIGV4cGVjdChnZXRSZXN1bHQuZGF0YS5pZCkudG9CZShjcmVhdGVSZXN1bHQuZGF0YS5pZCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTbHVnIEdlbmVyYXRpb24gb24gQ3JlYXRlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgc2x1ZyBmcm9tIGV2ZW50IG5hbWUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGUoe1xuICAgICAgICBuYW1lOiAnV2VsY29tZSBEaW5uZXInLFxuICAgICAgICBldmVudFR5cGU6ICdtZWFsJyxcbiAgICAgICAgc3RhcnREYXRlOiAnMjAyNS0wNi0xNFQxOTowMDowMFonLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHJldHVybjtcblxuICAgICAgY3JlYXRlZEV2ZW50SWRzLnB1c2gocmVzdWx0LmRhdGEuaWQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmRhdGEuc2x1ZykudG9CZSgnd2VsY29tZS1kaW5uZXInKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgVVJMLXNhZmUgc2x1ZyBmcm9tIG5hbWUgd2l0aCBzcGVjaWFsIGNoYXJhY3RlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGUoe1xuICAgICAgICBuYW1lOiAnQnJpZGUgJiBHcm9vbVxcJ3MgUmVjZXB0aW9uIScsXG4gICAgICAgIGV2ZW50VHlwZTogJ3JlY2VwdGlvbicsXG4gICAgICAgIHN0YXJ0RGF0ZTogJzIwMjUtMDYtMTVUMjA6MDA6MDBaJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSByZXR1cm47XG5cbiAgICAgIGNyZWF0ZWRFdmVudElkcy5wdXNoKHJlc3VsdC5kYXRhLmlkKTtcblxuICAgICAgLy8gU3BlY2lhbCBjaGFyYWN0ZXJzIHNob3VsZCBiZSByZW1vdmVkXG4gICAgICBleHBlY3QocmVzdWx0LmRhdGEuc2x1ZykudG9NYXRjaCgvXlthLXowLTktXSskLyk7XG4gICAgICBleHBlY3QocmVzdWx0LmRhdGEuc2x1Zykubm90LnRvQ29udGFpbignJicpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnNsdWcpLm5vdC50b0NvbnRhaW4oXCInXCIpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnNsdWcpLm5vdC50b0NvbnRhaW4oJyEnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgdW5pcXVlIHNsdWdzIGZvciBkdXBsaWNhdGUgbmFtZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgZmlyc3QgZXZlbnRcbiAgICAgIGNvbnN0IHJlc3VsdDEgPSBhd2FpdCBjcmVhdGUoe1xuICAgICAgICBuYW1lOiAnQ2VyZW1vbnknLFxuICAgICAgICBldmVudFR5cGU6ICdjZXJlbW9ueScsXG4gICAgICAgIHN0YXJ0RGF0ZTogJzIwMjUtMDYtMTVUMTQ6MDA6MDBaJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0MS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKCFyZXN1bHQxLnN1Y2Nlc3MpIHJldHVybjtcblxuICAgICAgY3JlYXRlZEV2ZW50SWRzLnB1c2gocmVzdWx0MS5kYXRhLmlkKTtcblxuICAgICAgLy8gQ3JlYXRlIHNlY29uZCBldmVudCB3aXRoIHNhbWUgbmFtZVxuICAgICAgY29uc3QgcmVzdWx0MiA9IGF3YWl0IGNyZWF0ZSh7XG4gICAgICAgIG5hbWU6ICdDZXJlbW9ueScsXG4gICAgICAgIGV2ZW50VHlwZTogJ2NlcmVtb255JyxcbiAgICAgICAgc3RhcnREYXRlOiAnMjAyNS0wNi0xNVQxNTowMDowMFonLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQyLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAoIXJlc3VsdDIuc3VjY2VzcykgcmV0dXJuO1xuXG4gICAgICBjcmVhdGVkRXZlbnRJZHMucHVzaChyZXN1bHQyLmRhdGEuaWQpO1xuXG4gICAgICAvLyBTbHVncyBzaG91bGQgYmUgZGlmZmVyZW50XG4gICAgICBleHBlY3QocmVzdWx0MS5kYXRhLnNsdWcpLnRvQmUoJ2NlcmVtb255Jyk7XG4gICAgICBleHBlY3QocmVzdWx0Mi5kYXRhLnNsdWcpLnRvQmUoJ2NlcmVtb255LTInKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIFZBTElEQVRJT05fRVJST1IgZm9yIG5hbWUgd2l0aCBubyBhbHBoYW51bWVyaWMgY2hhcmFjdGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZSh7XG4gICAgICAgIG5hbWU6ICchISEnLFxuICAgICAgICBldmVudFR5cGU6ICdhY3Rpdml0eScsXG4gICAgICAgIHN0YXJ0RGF0ZTogJzIwMjUtMDYtMTVUMTA6MDA6MDBaJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSByZXR1cm47XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ2FscGhhbnVtZXJpYyBjaGFyYWN0ZXInKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG5hbWVzIHdpdGggbXVsdGlwbGUgc3BhY2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3JlYXRlKHtcbiAgICAgICAgbmFtZTogJ0JlYWNoICAgIFZvbGxleWJhbGwgICAgVG91cm5hbWVudCcsXG4gICAgICAgIGV2ZW50VHlwZTogJ2FjdGl2aXR5JyxcbiAgICAgICAgc3RhcnREYXRlOiAnMjAyNS0wNi0xNlQxMDowMDowMFonLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHJldHVybjtcblxuICAgICAgY3JlYXRlZEV2ZW50SWRzLnB1c2gocmVzdWx0LmRhdGEuaWQpO1xuXG4gICAgICAvLyBNdWx0aXBsZSBzcGFjZXMgc2hvdWxkIGJlIGNvbGxhcHNlZCB0byBzaW5nbGUgaHlwaGVuc1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnNsdWcpLnRvQmUoJ2JlYWNoLXZvbGxleWJhbGwtdG91cm5hbWVudCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnNsdWcpLm5vdC50b0NvbnRhaW4oJy0tJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRyaW0gbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZSBmcm9tIG5hbWUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGUoe1xuICAgICAgICBuYW1lOiAnICAgU3Vuc2V0IENydWlzZSAgICcsXG4gICAgICAgIGV2ZW50VHlwZTogJ2FjdGl2aXR5JyxcbiAgICAgICAgc3RhcnREYXRlOiAnMjAyNS0wNi0xN1QxODowMDowMFonLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHJldHVybjtcblxuICAgICAgY3JlYXRlZEV2ZW50SWRzLnB1c2gocmVzdWx0LmRhdGEuaWQpO1xuXG4gICAgICAvLyBTbHVnIHNob3VsZCBub3QgaGF2ZSBsZWFkaW5nIG9yIHRyYWlsaW5nIGh5cGhlbnNcbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5zbHVnKS50b0JlKCdzdW5zZXQtY3J1aXNlJyk7XG4gICAgICBleHBlY3QocmVzdWx0LmRhdGEuc2x1Zykubm90LnRvTWF0Y2goL14tLyk7XG4gICAgICBleHBlY3QocmVzdWx0LmRhdGEuc2x1Zykubm90LnRvTWF0Y2goLy0kLyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTbHVnIFByZXNlcnZhdGlvbiBvbiBVcGRhdGUnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBwcmVzZXJ2ZSBzbHVnIHdoZW4gdXBkYXRpbmcgZXZlbnQgbmFtZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBldmVudFxuICAgICAgY29uc3QgY3JlYXRlUmVzdWx0ID0gYXdhaXQgY3JlYXRlKHtcbiAgICAgICAgbmFtZTogJ09yaWdpbmFsIE5hbWUnLFxuICAgICAgICBldmVudFR5cGU6ICdjZXJlbW9ueScsXG4gICAgICAgIHN0YXJ0RGF0ZTogJzIwMjUtMDYtMTVUMTQ6MDA6MDBaJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoY3JlYXRlUmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAoIWNyZWF0ZVJlc3VsdC5zdWNjZXNzKSByZXR1cm47XG5cbiAgICAgIGNyZWF0ZWRFdmVudElkcy5wdXNoKGNyZWF0ZVJlc3VsdC5kYXRhLmlkKTtcbiAgICAgIGNvbnN0IG9yaWdpbmFsU2x1ZyA9IGNyZWF0ZVJlc3VsdC5kYXRhLnNsdWc7XG5cbiAgICAgIC8vIFVwZGF0ZSBuYW1lXG4gICAgICBjb25zdCB1cGRhdGVSZXN1bHQgPSBhd2FpdCB1cGRhdGUoY3JlYXRlUmVzdWx0LmRhdGEuaWQsIHtcbiAgICAgICAgbmFtZTogJ05ldyBOYW1lJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QodXBkYXRlUmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAoIXVwZGF0ZVJlc3VsdC5zdWNjZXNzKSByZXR1cm47XG5cbiAgICAgIC8vIFNsdWcgc2hvdWxkIHJlbWFpbiB1bmNoYW5nZWRcbiAgICAgIGV4cGVjdCh1cGRhdGVSZXN1bHQuZGF0YS5zbHVnKS50b0JlKG9yaWdpbmFsU2x1Zyk7XG4gICAgICBleHBlY3QodXBkYXRlUmVzdWx0LmRhdGEubmFtZSkudG9CZSgnTmV3IE5hbWUnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcHJlc2VydmUgc2x1ZyB3aGVuIHVwZGF0aW5nIGRlc2NyaXB0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGV2ZW50XG4gICAgICBjb25zdCBjcmVhdGVSZXN1bHQgPSBhd2FpdCBjcmVhdGUoe1xuICAgICAgICBuYW1lOiAnVGVzdCBFdmVudCcsXG4gICAgICAgIGV2ZW50VHlwZTogJ3JlY2VwdGlvbicsXG4gICAgICAgIHN0YXJ0RGF0ZTogJzIwMjUtMDYtMTVUMTg6MDA6MDBaJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdPcmlnaW5hbCBkZXNjcmlwdGlvbicsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGNyZWF0ZVJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKCFjcmVhdGVSZXN1bHQuc3VjY2VzcykgcmV0dXJuO1xuXG4gICAgICBjcmVhdGVkRXZlbnRJZHMucHVzaChjcmVhdGVSZXN1bHQuZGF0YS5pZCk7XG4gICAgICBjb25zdCBvcmlnaW5hbFNsdWcgPSBjcmVhdGVSZXN1bHQuZGF0YS5zbHVnO1xuXG4gICAgICAvLyBVcGRhdGUgZGVzY3JpcHRpb25cbiAgICAgIGNvbnN0IHVwZGF0ZVJlc3VsdCA9IGF3YWl0IHVwZGF0ZShjcmVhdGVSZXN1bHQuZGF0YS5pZCwge1xuICAgICAgICBkZXNjcmlwdGlvbjogJ1VwZGF0ZWQgZGVzY3JpcHRpb24nLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdCh1cGRhdGVSZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmICghdXBkYXRlUmVzdWx0LnN1Y2Nlc3MpIHJldHVybjtcblxuICAgICAgLy8gU2x1ZyBzaG91bGQgcmVtYWluIHVuY2hhbmdlZFxuICAgICAgZXhwZWN0KHVwZGF0ZVJlc3VsdC5kYXRhLnNsdWcpLnRvQmUob3JpZ2luYWxTbHVnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcHJlc2VydmUgc2x1ZyBhY3Jvc3MgbXVsdGlwbGUgdXBkYXRlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBldmVudFxuICAgICAgY29uc3QgY3JlYXRlUmVzdWx0ID0gYXdhaXQgY3JlYXRlKHtcbiAgICAgICAgbmFtZTogJ0luaXRpYWwgTmFtZScsXG4gICAgICAgIGV2ZW50VHlwZTogJ21lYWwnLFxuICAgICAgICBzdGFydERhdGU6ICcyMDI1LTA2LTE1VDE5OjAwOjAwWicsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGNyZWF0ZVJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKCFjcmVhdGVSZXN1bHQuc3VjY2VzcykgcmV0dXJuO1xuXG4gICAgICBjcmVhdGVkRXZlbnRJZHMucHVzaChjcmVhdGVSZXN1bHQuZGF0YS5pZCk7XG4gICAgICBjb25zdCBvcmlnaW5hbFNsdWcgPSBjcmVhdGVSZXN1bHQuZGF0YS5zbHVnO1xuXG4gICAgICAvLyBVcGRhdGUgbmFtZSBtdWx0aXBsZSB0aW1lc1xuICAgICAgY29uc3QgbmFtZXMgPSBbJ0ZpcnN0IFVwZGF0ZScsICdTZWNvbmQgVXBkYXRlJywgJ1RoaXJkIFVwZGF0ZSddO1xuICAgICAgZm9yIChjb25zdCBuYW1lIG9mIG5hbWVzKSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZVJlc3VsdCA9IGF3YWl0IHVwZGF0ZShjcmVhdGVSZXN1bHQuZGF0YS5pZCwgeyBuYW1lIH0pO1xuXG4gICAgICAgIGV4cGVjdCh1cGRhdGVSZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgaWYgKCF1cGRhdGVSZXN1bHQuc3VjY2VzcykgY29udGludWU7XG5cbiAgICAgICAgZXhwZWN0KHVwZGF0ZVJlc3VsdC5kYXRhLnNsdWcpLnRvQmUob3JpZ2luYWxTbHVnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NsdWcgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFjY2VwdCB2YWxpZCBzbHVnIHBhdHRlcm5zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdmFsaWROYW1lcyA9IFtcbiAgICAgICAgJ3NpbXBsZS1ldmVudCcsXG4gICAgICAgICdldmVudC13aXRoLW51bWJlcnMtMTIzJyxcbiAgICAgICAgJ2EnLFxuICAgICAgICAnZXZlbnQtMicsXG4gICAgICBdO1xuXG4gICAgICBmb3IgKGNvbnN0IG5hbWUgb2YgdmFsaWROYW1lcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGUoe1xuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgZXZlbnRUeXBlOiAnYWN0aXZpdHknLFxuICAgICAgICAgIHN0YXJ0RGF0ZTogJzIwMjUtMDYtMTVUMTA6MDA6MDBaJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSBjb250aW51ZTtcblxuICAgICAgICBjcmVhdGVkRXZlbnRJZHMucHVzaChyZXN1bHQuZGF0YS5pZCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5zbHVnKS50b01hdGNoKC9eW2EtejAtOS1dKyQvKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHVuaWNvZGUgY2hhcmFjdGVycyBpbiBuYW1lcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZSh7XG4gICAgICAgIG5hbWU6ICdDYWbDqSBSZWNlcHRpb24nLFxuICAgICAgICBldmVudFR5cGU6ICdyZWNlcHRpb24nLFxuICAgICAgICBzdGFydERhdGU6ICcyMDI1LTA2LTE1VDE4OjAwOjAwWicsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2VzcykgcmV0dXJuO1xuXG4gICAgICBjcmVhdGVkRXZlbnRJZHMucHVzaChyZXN1bHQuZGF0YS5pZCk7XG5cbiAgICAgIC8vIFVuaWNvZGUgc2hvdWxkIGJlIHJlbW92ZWQsIGxlYXZpbmcgb25seSBBU0NJSVxuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnNsdWcpLnRvTWF0Y2goL15bYS16MC05LV0rJC8pO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnNsdWcpLm5vdC50b01hdGNoKC9bXlxceDAwLVxceDdGXS8pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImRlc2NyaWJlIiwiY3JlYXRlZEV2ZW50SWRzIiwiYWZ0ZXJFYWNoIiwiaWQiLCJkZWxldGVFdmVudCIsImxlbmd0aCIsIml0IiwiY3JlYXRlUmVzdWx0IiwiY3JlYXRlIiwibmFtZSIsImV2ZW50VHlwZSIsInN0YXJ0RGF0ZSIsImV4cGVjdCIsInN1Y2Nlc3MiLCJ0b0JlIiwicHVzaCIsImRhdGEiLCJzbHVnIiwiZ2V0UmVzdWx0IiwiZ2V0QnlTbHVnIiwicmVzdWx0IiwiZXJyb3IiLCJjb2RlIiwidG9VcHBlckNhc2UiLCJ0b01hdGNoIiwibm90IiwidG9Db250YWluIiwicmVzdWx0MSIsInJlc3VsdDIiLCJtZXNzYWdlIiwib3JpZ2luYWxTbHVnIiwidXBkYXRlUmVzdWx0IiwidXBkYXRlIiwiZGVzY3JpcHRpb24iLCJuYW1lcyIsInZhbGlkTmFtZXMiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7OztDQVFDOzs7OzhCQUVzRDtBQUV2REEsU0FBUywrQkFBK0I7SUFDdEMsdUNBQXVDO0lBQ3ZDLE1BQU1DLGtCQUE0QixFQUFFO0lBRXBDQyxVQUFVO1FBQ1IsOEJBQThCO1FBQzlCLEtBQUssTUFBTUMsTUFBTUYsZ0JBQWlCO1lBQ2hDLE1BQU1HLElBQUFBLHlCQUFX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