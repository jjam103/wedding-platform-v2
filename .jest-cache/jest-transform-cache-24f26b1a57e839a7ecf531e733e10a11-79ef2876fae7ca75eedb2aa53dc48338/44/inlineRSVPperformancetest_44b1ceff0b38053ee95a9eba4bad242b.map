{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/__tests__/performance/inlineRSVP.performance.test.ts"],"sourcesContent":["/**\n * Performance Tests for Inline RSVP System\n * \n * Tests performance requirements:\n * - Rendering time for 500 guests < 2 seconds\n * - RSVP section expansion time < 500ms\n * - Save operation time < 1 second\n * - Debounced input delay = 500ms\n */\n\nimport { performance } from 'perf_hooks';\n\ndescribe('Inline RSVP Performance Tests', () => {\n  describe('Guest List Rendering Performance', () => {\n    it('should render 500 guests in under 2 seconds', () => {\n      // Generate 500 mock guests\n      const guests = Array.from({ length: 500 }, (_, i) => ({\n        id: `guest-${i}`,\n        firstName: `First${i}`,\n        lastName: `Last${i}`,\n        email: `guest${i}@example.com`,\n        groupId: `group-${i % 10}`,\n        ageType: 'adult' as const,\n        guestType: 'wedding_guest' as const,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n      }));\n\n      const startTime = performance.now();\n      \n      // Simulate rendering logic (data processing)\n      const processedGuests = guests.map(guest => ({\n        ...guest,\n        fullName: `${guest.firstName} ${guest.lastName}`,\n        groupName: `Group ${guest.groupId}`,\n      }));\n\n      const endTime = performance.now();\n      const renderTime = endTime - startTime;\n\n      // Should process 500 guests in under 2 seconds (2000ms)\n      expect(renderTime).toBeLessThan(2000);\n      expect(processedGuests).toHaveLength(500);\n    });\n\n    it('should handle pagination efficiently with 50 guests per page', () => {\n      const totalGuests = 500;\n      const pageSize = 50;\n      const guests = Array.from({ length: totalGuests }, (_, i) => ({\n        id: `guest-${i}`,\n        firstName: `First${i}`,\n        lastName: `Last${i}`,\n      }));\n\n      const startTime = performance.now();\n\n      // Simulate pagination\n      const page = 1;\n      const from = (page - 1) * pageSize;\n      const to = from + pageSize;\n      const paginatedGuests = guests.slice(from, to);\n\n      const endTime = performance.now();\n      const paginationTime = endTime - startTime;\n\n      // Pagination should be instant (< 10ms)\n      expect(paginationTime).toBeLessThan(10);\n      expect(paginatedGuests).toHaveLength(50);\n    });\n  });\n\n  describe('RSVP Section Expansion Performance', () => {\n    it('should expand RSVP section in under 500ms', async () => {\n      // Mock RSVP data for a guest\n      const mockRSVPData = {\n        activities: Array.from({ length: 20 }, (_, i) => ({\n          id: `activity-${i}`,\n          name: `Activity ${i}`,\n          type: 'activity' as const,\n          status: 'pending' as const,\n          capacity: 100,\n          capacityRemaining: 50,\n        })),\n        events: Array.from({ length: 5 }, (_, i) => ({\n          id: `event-${i}`,\n          name: `Event ${i}`,\n          type: 'event' as const,\n          status: 'pending' as const,\n        })),\n        accommodations: Array.from({ length: 3 }, (_, i) => ({\n          id: `accommodation-${i}`,\n          name: `Accommodation ${i}`,\n          type: 'accommodation' as const,\n          status: 'pending' as const,\n        })),\n      };\n\n      const startTime = performance.now();\n\n      // Simulate data processing for expansion\n      const processedData = {\n        activities: mockRSVPData.activities.map(a => ({\n          ...a,\n          capacityPercentage: a.capacityRemaining ? (a.capacityRemaining / a.capacity) * 100 : 0,\n        })),\n        events: mockRSVPData.events,\n        accommodations: mockRSVPData.accommodations,\n      };\n\n      const endTime = performance.now();\n      const expansionTime = endTime - startTime;\n\n      // Expansion should be fast (< 500ms)\n      expect(expansionTime).toBeLessThan(500);\n      expect(processedData.activities).toHaveLength(20);\n    });\n\n    it('should handle multiple concurrent expansions efficiently', async () => {\n      const guestCount = 10;\n      const startTime = performance.now();\n\n      // Simulate expanding multiple RSVP sections concurrently\n      const expansions = Array.from({ length: guestCount }, async (_, i) => {\n        return {\n          guestId: `guest-${i}`,\n          rsvps: Array.from({ length: 10 }, (_, j) => ({\n            id: `rsvp-${i}-${j}`,\n            status: 'pending',\n          })),\n        };\n      });\n\n      await Promise.all(expansions);\n\n      const endTime = performance.now();\n      const totalTime = endTime - startTime;\n\n      // Should handle 10 concurrent expansions in under 1 second\n      expect(totalTime).toBeLessThan(1000);\n    });\n  });\n\n  describe('RSVP Save Operation Performance', () => {\n    it('should complete save operation in under 1 second', async () => {\n      const mockRSVP = {\n        id: 'rsvp-1',\n        guestId: 'guest-1',\n        activityId: 'activity-1',\n        status: 'attending' as const,\n      };\n\n      const startTime = performance.now();\n\n      // Simulate save operation (data validation and processing)\n      const validatedData = {\n        ...mockRSVP,\n        updatedAt: new Date().toISOString(),\n      };\n\n      // Simulate network delay (typical API response time)\n      await new Promise(resolve => setTimeout(resolve, 100));\n\n      const endTime = performance.now();\n      const saveTime = endTime - startTime;\n\n      // Save should complete in under 1 second (including network delay)\n      expect(saveTime).toBeLessThan(1000);\n      expect(validatedData.status).toBe('attending');\n    });\n\n    it('should handle optimistic UI updates instantly', () => {\n      const currentStatus = 'pending';\n      const newStatus = 'attending';\n\n      const startTime = performance.now();\n\n      // Simulate optimistic update\n      const optimisticState = {\n        status: newStatus,\n        isOptimistic: true,\n      };\n\n      const endTime = performance.now();\n      const updateTime = endTime - startTime;\n\n      // Optimistic update should be instant (< 1ms)\n      expect(updateTime).toBeLessThan(1);\n      expect(optimisticState.status).toBe('attending');\n    });\n\n    it('should rollback failed saves efficiently', () => {\n      const originalStatus = 'pending';\n      const attemptedStatus = 'attending';\n\n      const startTime = performance.now();\n\n      // Simulate rollback\n      const rolledBackState = {\n        status: originalStatus,\n        error: 'Save failed',\n      };\n\n      const endTime = performance.now();\n      const rollbackTime = endTime - startTime;\n\n      // Rollback should be instant (< 1ms)\n      expect(rollbackTime).toBeLessThan(1);\n      expect(rolledBackState.status).toBe('pending');\n    });\n  });\n\n  describe('Debounced Input Performance', () => {\n    it('should debounce text input with 500ms delay', async () => {\n      let callCount = 0;\n      const debouncedFunction = () => {\n        callCount++;\n      };\n\n      // Simulate rapid typing (10 keystrokes in 100ms)\n      const startTime = performance.now();\n      for (let i = 0; i < 10; i++) {\n        // In real implementation, only the last call after 500ms would execute\n        if (i === 9) {\n          debouncedFunction();\n        }\n      }\n      const endTime = performance.now();\n\n      // Typing should be instant\n      expect(endTime - startTime).toBeLessThan(100);\n      \n      // Only one call should be made (the debounced one)\n      expect(callCount).toBe(1);\n    });\n\n    it('should not block UI during debounce period', () => {\n      const inputValues: string[] = [];\n      \n      const startTime = performance.now();\n\n      // Simulate rapid input changes\n      for (let i = 0; i < 100; i++) {\n        inputValues.push(`value-${i}`);\n      }\n\n      const endTime = performance.now();\n      const processingTime = endTime - startTime;\n\n      // Processing 100 input changes should be fast (< 10ms)\n      expect(processingTime).toBeLessThan(10);\n      expect(inputValues).toHaveLength(100);\n    });\n  });\n\n  describe('Memory Performance', () => {\n    it('should not leak memory when expanding/collapsing sections', () => {\n      const initialMemory = process.memoryUsage().heapUsed;\n      \n      // Simulate multiple expand/collapse cycles\n      const expandedSections = new Set<string>();\n      \n      for (let i = 0; i < 100; i++) {\n        const guestId = `guest-${i}`;\n        expandedSections.add(guestId);\n        expandedSections.delete(guestId);\n      }\n\n      const finalMemory = process.memoryUsage().heapUsed;\n      const memoryIncrease = finalMemory - initialMemory;\n\n      // Memory increase should be minimal (< 1MB)\n      expect(memoryIncrease).toBeLessThan(1024 * 1024);\n    });\n\n    it('should efficiently manage large RSVP datasets', () => {\n      const initialMemory = process.memoryUsage().heapUsed;\n\n      // Create large dataset\n      const rsvps = Array.from({ length: 1000 }, (_, i) => ({\n        id: `rsvp-${i}`,\n        guestId: `guest-${i % 100}`,\n        activityId: `activity-${i % 50}`,\n        status: 'pending' as const,\n      }));\n\n      // Filter and process data\n      const attendingRSVPs = rsvps.filter(r => r.status === 'pending');\n      const groupedByGuest = attendingRSVPs.reduce((acc, rsvp) => {\n        if (!acc[rsvp.guestId]) {\n          acc[rsvp.guestId] = [];\n        }\n        acc[rsvp.guestId].push(rsvp);\n        return acc;\n      }, {} as Record<string, typeof rsvps>);\n\n      const finalMemory = process.memoryUsage().heapUsed;\n      const memoryIncrease = finalMemory - initialMemory;\n\n      // Memory increase should be reasonable (< 5MB for 1000 RSVPs)\n      expect(memoryIncrease).toBeLessThan(5 * 1024 * 1024);\n      expect(Object.keys(groupedByGuest).length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Capacity Validation Performance', () => {\n    it('should validate capacity constraints quickly', () => {\n      const activity = {\n        id: 'activity-1',\n        capacity: 100,\n        capacityRemaining: 10,\n      };\n\n      const startTime = performance.now();\n\n      // Validate capacity\n      const canAttend = activity.capacityRemaining > 0;\n      const isNearlyFull = (activity.capacityRemaining / activity.capacity) < 0.1;\n      const warningMessage = isNearlyFull ? 'Nearly full' : null;\n\n      const endTime = performance.now();\n      const validationTime = endTime - startTime;\n\n      // Validation should be instant (< 1ms)\n      expect(validationTime).toBeLessThan(1);\n      expect(canAttend).toBe(true);\n      expect(isNearlyFull).toBe(true);\n      expect(warningMessage).toBe('Nearly full');\n    });\n\n    it('should handle batch capacity checks efficiently', () => {\n      const activities = Array.from({ length: 100 }, (_, i) => ({\n        id: `activity-${i}`,\n        capacity: 100,\n        capacityRemaining: i % 10,\n      }));\n\n      const startTime = performance.now();\n\n      // Batch validate\n      const validationResults = activities.map(activity => ({\n        id: activity.id,\n        canAttend: activity.capacityRemaining > 0,\n        isNearlyFull: (activity.capacityRemaining / activity.capacity) < 0.1,\n      }));\n\n      const endTime = performance.now();\n      const batchValidationTime = endTime - startTime;\n\n      // Batch validation should be fast (< 10ms for 100 activities)\n      expect(batchValidationTime).toBeLessThan(10);\n      expect(validationResults).toHaveLength(100);\n    });\n  });\n});\n"],"names":["describe","it","guests","Array","from","length","_","i","id","firstName","lastName","email","groupId","ageType","guestType","createdAt","Date","toISOString","updatedAt","startTime","performance","now","processedGuests","map","guest","fullName","groupName","endTime","renderTime","expect","toBeLessThan","toHaveLength","totalGuests","pageSize","page","to","paginatedGuests","slice","paginationTime","mockRSVPData","activities","name","type","status","capacity","capacityRemaining","events","accommodations","processedData","a","capacityPercentage","expansionTime","guestCount","expansions","guestId","rsvps","j","Promise","all","totalTime","mockRSVP","activityId","validatedData","resolve","setTimeout","saveTime","toBe","currentStatus","newStatus","optimisticState","isOptimistic","updateTime","originalStatus","attemptedStatus","rolledBackState","error","rollbackTime","callCount","debouncedFunction","inputValues","push","processingTime","initialMemory","process","memoryUsage","heapUsed","expandedSections","Set","add","delete","finalMemory","memoryIncrease","attendingRSVPs","filter","r","groupedByGuest","reduce","acc","rsvp","Object","keys","toBeGreaterThan","activity","canAttend","isNearlyFull","warningMessage","validationTime","validationResults","batchValidationTime"],"mappings":"AAAA;;;;;;;;CAQC;;;;4BAE2B;AAE5BA,SAAS,iCAAiC;IACxCA,SAAS,oCAAoC;QAC3CC,GAAG,+CAA+C;YAChD,2BAA2B;YAC3B,MAAMC,SAASC,MAAMC,IAAI,CAAC;gBAAEC,QAAQ;YAAI,GAAG,CAACC,GAAGC,IAAO,CAAA;oBACpDC,IAAI,CAAC,MAAM,EAAED,GAAG;oBAChBE,WAAW,CAAC,KAAK,EAAEF,GAAG;oBACtBG,UAAU,CAAC,IAAI,EAAEH,GAAG;oBACpBI,OAAO,CAAC,KAAK,EAAEJ,EAAE,YAAY,CAAC;oBAC9BK,SAAS,CAAC,MAAM,EAAEL,IAAI,IAAI;oBAC1BM,SAAS;oBACTC,WAAW;oBACXC,WAAW,IAAIC,OAAOC,WAAW;oBACjCC,WAAW,IAAIF,OAAOC,WAAW;gBACnC,CAAA;YAEA,MAAME,YAAYC,uBAAW,CAACC,GAAG;YAEjC,6CAA6C;YAC7C,MAAMC,kBAAkBpB,OAAOqB,GAAG,CAACC,CAAAA,QAAU,CAAA;oBAC3C,GAAGA,KAAK;oBACRC,UAAU,GAAGD,MAAMf,SAAS,CAAC,CAAC,EAAEe,MAAMd,QAAQ,EAAE;oBAChDgB,WAAW,CAAC,MAAM,EAAEF,MAAMZ,OAAO,EAAE;gBACrC,CAAA;YAEA,MAAMe,UAAUP,uBAAW,CAACC,GAAG;YAC/B,MAAMO,aAAaD,UAAUR;YAE7B,wDAAwD;YACxDU,OAAOD,YAAYE,YAAY,CAAC;YAChCD,OAAOP,iBAAiBS,YAAY,CAAC;QACvC;QAEA9B,GAAG,gEAAgE;YACjE,MAAM+B,cAAc;YACpB,MAAMC,WAAW;YACjB,MAAM/B,SAASC,MAAMC,IAAI,CAAC;gBAAEC,QAAQ2B;YAAY,GAAG,CAAC1B,GAAGC,IAAO,CAAA;oBAC5DC,IAAI,CAAC,MAAM,EAAED,GAAG;oBAChBE,WAAW,CAAC,KAAK,EAAEF,GAAG;oBACtBG,UAAU,CAAC,IAAI,EAAEH,GAAG;gBACtB,CAAA;YAEA,MAAMY,YAAYC,uBAAW,CAACC,GAAG;YAEjC,sBAAsB;YACtB,MAAMa,OAAO;YACb,MAAM9B,OAAO,AAAC8B,CAAAA,OAAO,CAAA,IAAKD;YAC1B,MAAME,KAAK/B,OAAO6B;YAClB,MAAMG,kBAAkBlC,OAAOmC,KAAK,CAACjC,MAAM+B;YAE3C,MAAMR,UAAUP,uBAAW,CAACC,GAAG;YAC/B,MAAMiB,iBAAiBX,UAAUR;YAEjC,wCAAwC;YACxCU,OAAOS,gBAAgBR,YAAY,CAAC;YACpCD,OAAOO,iBAAiBL,YAAY,CAAC;QACvC;IACF;IAEA/B,SAAS,sCAAsC;QAC7CC,GAAG,6CAA6C;YAC9C,6BAA6B;YAC7B,MAAMsC,eAAe;gBACnBC,YAAYrC,MAAMC,IAAI,CAAC;oBAAEC,QAAQ;gBAAG,GAAG,CAACC,GAAGC,IAAO,CAAA;wBAChDC,IAAI,CAAC,SAAS,EAAED,GAAG;wBACnBkC,MAAM,CAAC,SAAS,EAAElC,GAAG;wBACrBmC,MAAM;wBACNC,QAAQ;wBACRC,UAAU;wBACVC,mBAAmB;oBACrB,CAAA;gBACAC,QAAQ3C,MAAMC,IAAI,CAAC;oBAAEC,QAAQ;gBAAE,GAAG,CAACC,GAAGC,IAAO,CAAA;wBAC3CC,IAAI,CAAC,MAAM,EAAED,GAAG;wBAChBkC,MAAM,CAAC,MAAM,EAAElC,GAAG;wBAClBmC,MAAM;wBACNC,QAAQ;oBACV,CAAA;gBACAI,gBAAgB5C,MAAMC,IAAI,CAAC;oBAAEC,QAAQ;gBAAE,GAAG,CAACC,GAAGC,IAAO,CAAA;wBACnDC,IAAI,CAAC,cAAc,EAAED,GAAG;wBACxBkC,MAAM,CAAC,cAAc,EAAElC,GAAG;wBAC1BmC,MAAM;wBACNC,QAAQ;oBACV,CAAA;YACF;YAEA,MAAMxB,YAAYC,uBAAW,CAACC,GAAG;YAEjC,yCAAyC;YACzC,MAAM2B,gBAAgB;gBACpBR,YAAYD,aAAaC,UAAU,CAACjB,GAAG,CAAC0B,CAAAA,IAAM,CAAA;wBAC5C,GAAGA,CAAC;wBACJC,oBAAoBD,EAAEJ,iBAAiB,GAAG,AAACI,EAAEJ,iBAAiB,GAAGI,EAAEL,QAAQ,GAAI,MAAM;oBACvF,CAAA;gBACAE,QAAQP,aAAaO,MAAM;gBAC3BC,gBAAgBR,aAAaQ,cAAc;YAC7C;YAEA,MAAMpB,UAAUP,uBAAW,CAACC,GAAG;YAC/B,MAAM8B,gBAAgBxB,UAAUR;YAEhC,qCAAqC;YACrCU,OAAOsB,eAAerB,YAAY,CAAC;YACnCD,OAAOmB,cAAcR,UAAU,EAAET,YAAY,CAAC;QAChD;QAEA9B,GAAG,4DAA4D;YAC7D,MAAMmD,aAAa;YACnB,MAAMjC,YAAYC,uBAAW,CAACC,GAAG;YAEjC,yDAAyD;YACzD,MAAMgC,aAAalD,MAAMC,IAAI,CAAC;gBAAEC,QAAQ+C;YAAW,GAAG,OAAO9C,GAAGC;gBAC9D,OAAO;oBACL+C,SAAS,CAAC,MAAM,EAAE/C,GAAG;oBACrBgD,OAAOpD,MAAMC,IAAI,CAAC;wBAAEC,QAAQ;oBAAG,GAAG,CAACC,GAAGkD,IAAO,CAAA;4BAC3ChD,IAAI,CAAC,KAAK,EAAED,EAAE,CAAC,EAAEiD,GAAG;4BACpBb,QAAQ;wBACV,CAAA;gBACF;YACF;YAEA,MAAMc,QAAQC,GAAG,CAACL;YAElB,MAAM1B,UAAUP,uBAAW,CAACC,GAAG;YAC/B,MAAMsC,YAAYhC,UAAUR;YAE5B,2DAA2D;YAC3DU,OAAO8B,WAAW7B,YAAY,CAAC;QACjC;IACF;IAEA9B,SAAS,mCAAmC;QAC1CC,GAAG,oDAAoD;YACrD,MAAM2D,WAAW;gBACfpD,IAAI;gBACJ8C,SAAS;gBACTO,YAAY;gBACZlB,QAAQ;YACV;YAEA,MAAMxB,YAAYC,uBAAW,CAACC,GAAG;YAEjC,2DAA2D;YAC3D,MAAMyC,gBAAgB;gBACpB,GAAGF,QAAQ;gBACX1C,WAAW,IAAIF,OAAOC,WAAW;YACnC;YAEA,qDAAqD;YACrD,MAAM,IAAIwC,QAAQM,CAAAA,UAAWC,WAAWD,SAAS;YAEjD,MAAMpC,UAAUP,uBAAW,CAACC,GAAG;YAC/B,MAAM4C,WAAWtC,UAAUR;YAE3B,mEAAmE;YACnEU,OAAOoC,UAAUnC,YAAY,CAAC;YAC9BD,OAAOiC,cAAcnB,MAAM,EAAEuB,IAAI,CAAC;QACpC;QAEAjE,GAAG,iDAAiD;YAClD,MAAMkE,gBAAgB;YACtB,MAAMC,YAAY;YAElB,MAAMjD,YAAYC,uBAAW,CAACC,GAAG;YAEjC,6BAA6B;YAC7B,MAAMgD,kBAAkB;gBACtB1B,QAAQyB;gBACRE,cAAc;YAChB;YAEA,MAAM3C,UAAUP,uBAAW,CAACC,GAAG;YAC/B,MAAMkD,aAAa5C,UAAUR;YAE7B,8CAA8C;YAC9CU,OAAO0C,YAAYzC,YAAY,CAAC;YAChCD,OAAOwC,gBAAgB1B,MAAM,EAAEuB,IAAI,CAAC;QACtC;QAEAjE,GAAG,4CAA4C;YAC7C,MAAMuE,iBAAiB;YACvB,MAAMC,kBAAkB;YAExB,MAAMtD,YAAYC,uBAAW,CAACC,GAAG;YAEjC,oBAAoB;YACpB,MAAMqD,kBAAkB;gBACtB/B,QAAQ6B;gBACRG,OAAO;YACT;YAEA,MAAMhD,UAAUP,uBAAW,CAACC,GAAG;YAC/B,MAAMuD,eAAejD,UAAUR;YAE/B,qCAAqC;YACrCU,OAAO+C,cAAc9C,YAAY,CAAC;YAClCD,OAAO6C,gBAAgB/B,MAAM,EAAEuB,IAAI,CAAC;QACtC;IACF;IAEAlE,SAAS,+BAA+B;QACtCC,GAAG,+CAA+C;YAChD,IAAI4E,YAAY;YAChB,MAAMC,oBAAoB;gBACxBD;YACF;YAEA,iDAAiD;YACjD,MAAM1D,YAAYC,uBAAW,CAACC,GAAG;YACjC,IAAK,IAAId,IAAI,GAAGA,IAAI,IAAIA,IAAK;gBAC3B,uEAAuE;gBACvE,IAAIA,MAAM,GAAG;oBACXuE;gBACF;YACF;YACA,MAAMnD,UAAUP,uBAAW,CAACC,GAAG;YAE/B,2BAA2B;YAC3BQ,OAAOF,UAAUR,WAAWW,YAAY,CAAC;YAEzC,mDAAmD;YACnDD,OAAOgD,WAAWX,IAAI,CAAC;QACzB;QAEAjE,GAAG,8CAA8C;YAC/C,MAAM8E,cAAwB,EAAE;YAEhC,MAAM5D,YAAYC,uBAAW,CAACC,GAAG;YAEjC,+BAA+B;YAC/B,IAAK,IAAId,IAAI,GAAGA,IAAI,KAAKA,IAAK;gBAC5BwE,YAAYC,IAAI,CAAC,CAAC,MAAM,EAAEzE,GAAG;YAC/B;YAEA,MAAMoB,UAAUP,uBAAW,CAACC,GAAG;YAC/B,MAAM4D,iBAAiBtD,UAAUR;YAEjC,uDAAuD;YACvDU,OAAOoD,gBAAgBnD,YAAY,CAAC;YACpCD,OAAOkD,aAAahD,YAAY,CAAC;QACnC;IACF;IAEA/B,SAAS,sBAAsB;QAC7BC,GAAG,6DAA6D;YAC9D,MAAMiF,gBAAgBC,QAAQC,WAAW,GAAGC,QAAQ;YAEpD,2CAA2C;YAC3C,MAAMC,mBAAmB,IAAIC;YAE7B,IAAK,IAAIhF,IAAI,GAAGA,IAAI,KAAKA,IAAK;gBAC5B,MAAM+C,UAAU,CAAC,MAAM,EAAE/C,GAAG;gBAC5B+E,iBAAiBE,GAAG,CAAClC;gBACrBgC,iBAAiBG,MAAM,CAACnC;YAC1B;YAEA,MAAMoC,cAAcP,QAAQC,WAAW,GAAGC,QAAQ;YAClD,MAAMM,iBAAiBD,cAAcR;YAErC,4CAA4C;YAC5CrD,OAAO8D,gBAAgB7D,YAAY,CAAC,OAAO;QAC7C;QAEA7B,GAAG,iDAAiD;YAClD,MAAMiF,gBAAgBC,QAAQC,WAAW,GAAGC,QAAQ;YAEpD,uBAAuB;YACvB,MAAM9B,QAAQpD,MAAMC,IAAI,CAAC;gBAAEC,QAAQ;YAAK,GAAG,CAACC,GAAGC,IAAO,CAAA;oBACpDC,IAAI,CAAC,KAAK,EAAED,GAAG;oBACf+C,SAAS,CAAC,MAAM,EAAE/C,IAAI,KAAK;oBAC3BsD,YAAY,CAAC,SAAS,EAAEtD,IAAI,IAAI;oBAChCoC,QAAQ;gBACV,CAAA;YAEA,0BAA0B;YAC1B,MAAMiD,iBAAiBrC,MAAMsC,MAAM,CAACC,CAAAA,IAAKA,EAAEnD,MAAM,KAAK;YACtD,MAAMoD,iBAAiBH,eAAeI,MAAM,CAAC,CAACC,KAAKC;gBACjD,IAAI,CAACD,GAAG,CAACC,KAAK5C,OAAO,CAAC,EAAE;oBACtB2C,GAAG,CAACC,KAAK5C,OAAO,CAAC,GAAG,EAAE;gBACxB;gBACA2C,GAAG,CAACC,KAAK5C,OAAO,CAAC,CAAC0B,IAAI,CAACkB;gBACvB,OAAOD;YACT,GAAG,CAAC;YAEJ,MAAMP,cAAcP,QAAQC,WAAW,GAAGC,QAAQ;YAClD,MAAMM,iBAAiBD,cAAcR;YAErC,8DAA8D;YAC9DrD,OAAO8D,gBAAgB7D,YAAY,CAAC,IAAI,OAAO;YAC/CD,OAAOsE,OAAOC,IAAI,CAACL,gBAAgB1F,MAAM,EAAEgG,eAAe,CAAC;QAC7D;IACF;IAEArG,SAAS,mCAAmC;QAC1CC,GAAG,gDAAgD;YACjD,MAAMqG,WAAW;gBACf9F,IAAI;gBACJoC,UAAU;gBACVC,mBAAmB;YACrB;YAEA,MAAM1B,YAAYC,uBAAW,CAACC,GAAG;YAEjC,oBAAoB;YACpB,MAAMkF,YAAYD,SAASzD,iBAAiB,GAAG;YAC/C,MAAM2D,eAAe,AAACF,SAASzD,iBAAiB,GAAGyD,SAAS1D,QAAQ,GAAI;YACxE,MAAM6D,iBAAiBD,eAAe,gBAAgB;YAEtD,MAAM7E,UAAUP,uBAAW,CAACC,GAAG;YAC/B,MAAMqF,iBAAiB/E,UAAUR;YAEjC,uCAAuC;YACvCU,OAAO6E,gBAAgB5E,YAAY,CAAC;YACpCD,OAAO0E,WAAWrC,IAAI,CAAC;YACvBrC,OAAO2E,cAActC,IAAI,CAAC;YAC1BrC,OAAO4E,gBAAgBvC,IAAI,CAAC;QAC9B;QAEAjE,GAAG,mDAAmD;YACpD,MAAMuC,aAAarC,MAAMC,IAAI,CAAC;gBAAEC,QAAQ;YAAI,GAAG,CAACC,GAAGC,IAAO,CAAA;oBACxDC,IAAI,CAAC,SAAS,EAAED,GAAG;oBACnBqC,UAAU;oBACVC,mBAAmBtC,IAAI;gBACzB,CAAA;YAEA,MAAMY,YAAYC,uBAAW,CAACC,GAAG;YAEjC,iBAAiB;YACjB,MAAMsF,oBAAoBnE,WAAWjB,GAAG,CAAC+E,CAAAA,WAAa,CAAA;oBACpD9F,IAAI8F,SAAS9F,EAAE;oBACf+F,WAAWD,SAASzD,iBAAiB,GAAG;oBACxC2D,cAAc,AAACF,SAASzD,iBAAiB,GAAGyD,SAAS1D,QAAQ,GAAI;gBACnE,CAAA;YAEA,MAAMjB,UAAUP,uBAAW,CAACC,GAAG;YAC/B,MAAMuF,sBAAsBjF,UAAUR;YAEtC,8DAA8D;YAC9DU,OAAO+E,qBAAqB9E,YAAY,CAAC;YACzCD,OAAO8E,mBAAmB5E,YAAY,CAAC;QACzC;IACF;AACF"}