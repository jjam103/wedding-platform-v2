{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/ui/DynamicForm.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, type FormEvent } from 'react';\nimport { z } from 'zod';\nimport { Button } from './Button';\n\nexport interface FormField {\n  name: string;\n  label: string;\n  type: 'text' | 'email' | 'number' | 'select' | 'textarea' | 'date' | 'datetime-local' | 'checkbox' | 'richtext';\n  placeholder?: string;\n  required?: boolean;\n  options?: { label: string; value: string | number }[];\n  helpText?: string;\n  disabled?: boolean;\n  rows?: number; // For textarea\n}\n\ninterface DynamicFormProps {\n  fields: FormField[];\n  initialData?: Record<string, any>;\n  schema: z.ZodSchema;\n  onSubmit: (data: Record<string, any>) => Promise<void>;\n  submitLabel?: string;\n  onCancel?: () => void;\n  cancelLabel?: string;\n}\n\ninterface FormState {\n  data: Record<string, any>;\n  errors: Record<string, string>;\n  touched: Record<string, boolean>;\n  submitting: boolean;\n}\n\n/**\n * DynamicForm Component\n * \n * Renders a form dynamically based on field configuration.\n * Validates input using Zod schemas and displays field-level errors.\n * Supports various input types including text, email, number, select, textarea, date, datetime, and checkbox.\n */\nexport function DynamicForm({\n  fields,\n  initialData = {},\n  schema,\n  onSubmit,\n  submitLabel = 'Submit',\n  onCancel,\n  cancelLabel = 'Cancel',\n}: DynamicFormProps) {\n  const [formState, setFormState] = useState<FormState>({\n    data: initialData,\n    errors: {},\n    touched: {},\n    submitting: false,\n  });\n\n  // Handle field change\n  const handleChange = useCallback((name: string, value: any) => {\n    setFormState((prev) => ({\n      ...prev,\n      data: {\n        ...prev.data,\n        [name]: value,\n      },\n      touched: {\n        ...prev.touched,\n        [name]: true,\n      },\n    }));\n  }, []);\n\n  // Handle field blur - validate single field\n  const handleBlur = useCallback((name: string) => {\n    const validation = schema.safeParse(formState.data);\n    \n    if (!validation.success) {\n      const fieldError = validation.error.issues.find(\n        (issue) => issue.path[0] === name\n      );\n      \n      if (fieldError) {\n        setFormState((prev) => ({\n          ...prev,\n          errors: {\n            ...prev.errors,\n            [name]: fieldError.message,\n          },\n        }));\n      } else {\n        // Clear error if field is now valid\n        setFormState((prev) => {\n          const newErrors = { ...prev.errors };\n          delete newErrors[name];\n          return {\n            ...prev,\n            errors: newErrors,\n          };\n        });\n      }\n    } else {\n      // Clear error if validation passes\n      setFormState((prev) => {\n        const newErrors = { ...prev.errors };\n        delete newErrors[name];\n        return {\n          ...prev,\n          errors: newErrors,\n        };\n      });\n    }\n  }, [formState.data, schema]);\n\n  // Handle form submission\n  const handleSubmit = useCallback(async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    \n    // Validate all fields\n    const validation = schema.safeParse(formState.data);\n    \n    if (!validation.success) {\n      // Set all fields as touched\n      const allTouched = fields.reduce((acc, field) => {\n        acc[field.name] = true;\n        return acc;\n      }, {} as Record<string, boolean>);\n      \n      // Map errors\n      const errors = validation.error.issues.reduce((acc, issue) => {\n        const fieldName = issue.path[0] as string;\n        acc[fieldName] = issue.message;\n        return acc;\n      }, {} as Record<string, string>);\n      \n      setFormState((prev) => ({\n        ...prev,\n        errors,\n        touched: allTouched,\n      }));\n      \n      return;\n    }\n    \n    // Submit form\n    setFormState((prev) => ({ ...prev, submitting: true }));\n    \n    try {\n      await onSubmit(validation.data);\n    } catch (error) {\n      console.error('Form submission error:', error);\n    } finally {\n      setFormState((prev) => ({ ...prev, submitting: false }));\n    }\n  }, [formState.data, schema, fields, onSubmit]);\n\n  // Render form field based on type\n  const renderField = (field: FormField) => {\n    const value = formState.data[field.name] ?? '';\n    const error = formState.touched[field.name] ? formState.errors[field.name] : undefined;\n    const hasError = !!error;\n\n    const baseInputClasses = `w-full px-3 py-3 md:py-2 text-base md:text-sm border rounded-md transition-colors focus:outline-none focus:ring-2 min-h-[44px] ${\n      hasError\n        ? 'border-volcano-500 focus:ring-volcano-500 focus:border-volcano-500'\n        : 'border-sage-300 focus:ring-jungle-500 focus:border-jungle-500'\n    } ${field.disabled ? 'bg-sage-100 cursor-not-allowed' : 'bg-white'}`;\n\n    const labelClasses = `block text-sm font-medium text-sage-700 mb-1 ${\n      field.required ? \"after:content-['*'] after:ml-1 after:text-volcano-500\" : ''\n    }`;\n\n    switch (field.type) {\n      case 'text':\n      case 'email':\n      case 'number':\n        return (\n          <div key={field.name} className=\"mb-4\">\n            <label htmlFor={field.name} className={labelClasses}>\n              {field.label}\n            </label>\n            <input\n              id={field.name}\n              name={field.name}\n              type={field.type}\n              value={value}\n              onChange={(e) => handleChange(field.name, field.type === 'number' ? Number(e.target.value) : e.target.value)}\n              onBlur={() => handleBlur(field.name)}\n              placeholder={field.placeholder}\n              disabled={field.disabled}\n              required={field.required}\n              className={baseInputClasses}\n              aria-invalid={hasError}\n              aria-describedby={hasError ? `${field.name}-error` : field.helpText ? `${field.name}-help` : undefined}\n            />\n            {field.helpText && !hasError && (\n              <p id={`${field.name}-help`} className=\"mt-1 text-sm text-sage-500\">\n                {field.helpText}\n              </p>\n            )}\n            {hasError && (\n              <p id={`${field.name}-error`} className=\"mt-1 text-sm text-volcano-600\" role=\"alert\">\n                {error}\n              </p>\n            )}\n          </div>\n        );\n\n      case 'select':\n        return (\n          <div key={field.name} className=\"mb-4\">\n            <label htmlFor={field.name} className={labelClasses}>\n              {field.label}\n            </label>\n            <select\n              id={field.name}\n              name={field.name}\n              value={value}\n              onChange={(e) => handleChange(field.name, e.target.value)}\n              onBlur={() => handleBlur(field.name)}\n              disabled={field.disabled}\n              required={field.required}\n              className={baseInputClasses}\n              aria-invalid={hasError}\n              aria-describedby={hasError ? `${field.name}-error` : field.helpText ? `${field.name}-help` : undefined}\n            >\n              <option value=\"\">Select {field.label}</option>\n              {field.options?.map((option) => (\n                <option key={option.value} value={option.value}>\n                  {option.label}\n                </option>\n              ))}\n            </select>\n            {field.helpText && !hasError && (\n              <p id={`${field.name}-help`} className=\"mt-1 text-sm text-sage-500\">\n                {field.helpText}\n              </p>\n            )}\n            {hasError && (\n              <p id={`${field.name}-error`} className=\"mt-1 text-sm text-volcano-600\" role=\"alert\">\n                {error}\n              </p>\n            )}\n          </div>\n        );\n\n      case 'textarea':\n        return (\n          <div key={field.name} className=\"mb-4\">\n            <label htmlFor={field.name} className={labelClasses}>\n              {field.label}\n            </label>\n            <textarea\n              id={field.name}\n              name={field.name}\n              value={value}\n              onChange={(e) => handleChange(field.name, e.target.value)}\n              onBlur={() => handleBlur(field.name)}\n              placeholder={field.placeholder}\n              disabled={field.disabled}\n              required={field.required}\n              rows={field.rows || 4}\n              className={baseInputClasses}\n              aria-invalid={hasError}\n              aria-describedby={hasError ? `${field.name}-error` : field.helpText ? `${field.name}-help` : undefined}\n            />\n            {field.helpText && !hasError && (\n              <p id={`${field.name}-help`} className=\"mt-1 text-sm text-sage-500\">\n                {field.helpText}\n              </p>\n            )}\n            {hasError && (\n              <p id={`${field.name}-error`} className=\"mt-1 text-sm text-volcano-600\" role=\"alert\">\n                {error}\n              </p>\n            )}\n          </div>\n        );\n\n      case 'date':\n      case 'datetime-local':\n        return (\n          <div key={field.name} className=\"mb-4\">\n            <label htmlFor={field.name} className={labelClasses}>\n              {field.label}\n            </label>\n            <input\n              id={field.name}\n              name={field.name}\n              type={field.type === 'datetime-local' ? 'datetime-local' : 'date'}\n              value={value}\n              onChange={(e) => handleChange(field.name, e.target.value)}\n              onBlur={() => handleBlur(field.name)}\n              disabled={field.disabled}\n              required={field.required}\n              className={baseInputClasses}\n              aria-invalid={hasError}\n              aria-describedby={hasError ? `${field.name}-error` : field.helpText ? `${field.name}-help` : undefined}\n            />\n            {field.helpText && !hasError && (\n              <p id={`${field.name}-help`} className=\"mt-1 text-sm text-sage-500\">\n                {field.helpText}\n              </p>\n            )}\n            {hasError && (\n              <p id={`${field.name}-error`} className=\"mt-1 text-sm text-volcano-600\" role=\"alert\">\n                {error}\n              </p>\n            )}\n          </div>\n        );\n\n      case 'checkbox':\n        return (\n          <div key={field.name} className=\"mb-4\">\n            <div className=\"flex items-center min-h-[44px]\">\n              <input\n                id={field.name}\n                name={field.name}\n                type=\"checkbox\"\n                checked={!!value}\n                onChange={(e) => handleChange(field.name, e.target.checked)}\n                onBlur={() => handleBlur(field.name)}\n                disabled={field.disabled}\n                className=\"h-5 w-5 md:h-4 md:w-4 text-jungle-500 focus:ring-jungle-500 border-sage-300 rounded\"\n                aria-invalid={hasError}\n                aria-describedby={hasError ? `${field.name}-error` : field.helpText ? `${field.name}-help` : undefined}\n              />\n              <label htmlFor={field.name} className=\"ml-3 md:ml-2 block text-base md:text-sm text-sage-700\">\n                {field.label}\n                {field.required && <span className=\"ml-1 text-volcano-500\">*</span>}\n              </label>\n            </div>\n            {field.helpText && !hasError && (\n              <p id={`${field.name}-help`} className=\"mt-1 text-sm text-sage-500 ml-8 md:ml-6\">\n                {field.helpText}\n              </p>\n            )}\n            {hasError && (\n              <p id={`${field.name}-error`} className=\"mt-1 text-sm text-volcano-600 ml-8 md:ml-6\" role=\"alert\">\n                {error}\n              </p>\n            )}\n          </div>\n        );\n\n      case 'richtext':\n        return (\n          <div key={field.name} className=\"mb-4\">\n            <label htmlFor={field.name} className={labelClasses}>\n              {field.label}\n            </label>\n            <textarea\n              id={field.name}\n              name={field.name}\n              value={value}\n              onChange={(e) => handleChange(field.name, e.target.value)}\n              onBlur={() => handleBlur(field.name)}\n              placeholder={field.placeholder}\n              disabled={field.disabled}\n              required={field.required}\n              rows={field.rows || 8}\n              className={baseInputClasses}\n              aria-invalid={hasError}\n              aria-describedby={hasError ? `${field.name}-error` : field.helpText ? `${field.name}-help` : undefined}\n            />\n            {field.helpText && !hasError && (\n              <p id={`${field.name}-help`} className=\"mt-1 text-sm text-sage-500\">\n                {field.helpText}\n              </p>\n            )}\n            {hasError && (\n              <p id={`${field.name}-error`} className=\"mt-1 text-sm text-volcano-600\" role=\"alert\">\n                {error}\n              </p>\n            )}\n          </div>\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} noValidate>\n      {fields.map(renderField)}\n      \n      <div className=\"flex flex-col md:flex-row items-stretch md:items-center justify-end gap-3 mt-6\">\n        {onCancel && (\n          <Button\n            type=\"button\"\n            variant=\"ghost\"\n            onClick={onCancel}\n            disabled={formState.submitting}\n            className=\"w-full md:w-auto order-2 md:order-1\"\n          >\n            {cancelLabel}\n          </Button>\n        )}\n        <Button\n          type=\"submit\"\n          variant=\"primary\"\n          loading={formState.submitting}\n          disabled={formState.submitting}\n          className=\"w-full md:w-auto order-1 md:order-2\"\n        >\n          {submitLabel}\n        </Button>\n      </div>\n    </form>\n  );\n}\n"],"names":["DynamicForm","fields","initialData","schema","onSubmit","submitLabel","onCancel","cancelLabel","formState","setFormState","useState","data","errors","touched","submitting","handleChange","useCallback","name","value","prev","handleBlur","validation","safeParse","success","fieldError","error","issues","find","issue","path","message","newErrors","handleSubmit","event","preventDefault","allTouched","reduce","acc","field","fieldName","console","renderField","undefined","hasError","baseInputClasses","disabled","labelClasses","required","type","div","className","label","htmlFor","input","id","onChange","e","Number","target","onBlur","placeholder","aria-invalid","aria-describedby","helpText","p","role","select","option","options","map","textarea","rows","checked","span","form","noValidate","Button","variant","onClick","loading"],"mappings":"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"}