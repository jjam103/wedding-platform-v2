393ece180195fa7c94202ab1468fc18b
/**
 * Unit Tests for FamilyManager Component
 * 
 * Tests family member display, profile editing, RSVP management,
 * RLS enforcement, and permission checks.
 * 
 * Requirements: 6.3, 6.4, 6.5, 6.6, 6.7, 6.9, 6.10
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _FamilyManager = require("./FamilyManager");
// Mock fetch
global.fetch = jest.fn();
describe('FamilyManager Component', ()=>{
    const mockAdultGuest = {
        id: 'adult-1',
        first_name: 'John',
        last_name: 'Doe',
        email: 'john@example.com',
        phone: '555-0100',
        age_type: 'adult',
        guest_type: 'wedding_guest',
        group_id: 'group-1',
        dietary_restrictions: 'None',
        created_at: '2024-01-01T00:00:00Z',
        updated_at: '2024-01-01T00:00:00Z'
    };
    const mockChildGuest = {
        id: 'child-1',
        first_name: 'Jane',
        last_name: 'Doe',
        email: 'jane@example.com',
        phone: null,
        age_type: 'child',
        guest_type: 'wedding_guest',
        group_id: 'group-1',
        dietary_restrictions: 'Vegetarian',
        created_at: '2024-01-01T00:00:00Z',
        updated_at: '2024-01-01T00:00:00Z'
    };
    const mockFamilyMembers = [
        mockAdultGuest,
        mockChildGuest
    ];
    const mockRsvpsByGuest = {
        'adult-1': [
            {
                id: 'rsvp-1',
                guest_id: 'adult-1',
                event_id: 'event-1',
                activity_id: null,
                status: 'attending',
                guest_count: 2,
                dietary_notes: null,
                events: {
                    id: 'event-1',
                    name: 'Wedding Ceremony'
                },
                activities: null
            },
            {
                id: 'rsvp-2',
                guest_id: 'adult-1',
                event_id: null,
                activity_id: 'activity-1',
                status: 'pending',
                guest_count: 1,
                dietary_notes: null,
                events: null,
                activities: {
                    id: 'activity-1',
                    name: 'Beach Volleyball'
                }
            }
        ],
        'child-1': [
            {
                id: 'rsvp-3',
                guest_id: 'child-1',
                event_id: 'event-1',
                activity_id: null,
                status: 'attending',
                guest_count: 1,
                dietary_notes: 'Vegetarian',
                events: {
                    id: 'event-1',
                    name: 'Wedding Ceremony'
                },
                activities: null
            }
        ]
    };
    beforeEach(()=>{
        jest.clearAllMocks();
        global.fetch.mockClear();
    });
    describe('Family Member Display', ()=>{
        it('should display all family members for adult guests', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            expect(_react.screen.getByText('John Doe')).toBeInTheDocument();
            expect(_react.screen.getByText('Jane Doe')).toBeInTheDocument();
        });
        it('should display only self for child guests', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockChildGuest,
                familyMembers: [
                    mockChildGuest
                ],
                rsvpsByGuest: mockRsvpsByGuest
            }));
            expect(_react.screen.getByText('Jane Doe')).toBeInTheDocument();
            expect(_react.screen.queryByText('John Doe')).not.toBeInTheDocument();
        });
        it('should display contact information for each family member', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            expect(_react.screen.getByText('john@example.com')).toBeInTheDocument();
            expect(_react.screen.getByText('555-0100')).toBeInTheDocument();
            expect(_react.screen.getByText('jane@example.com')).toBeInTheDocument();
        });
        it('should display age type labels correctly', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            expect(_react.screen.getAllByText(/ðŸ‘¤ Adult/)).toHaveLength(1);
            expect(_react.screen.getAllByText(/ðŸ‘¶ Child/)).toHaveLength(1);
        });
        it('should display dietary restrictions', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            expect(_react.screen.getByText(/None/)).toBeInTheDocument();
            expect(_react.screen.getByText(/Vegetarian/)).toBeInTheDocument();
        });
    });
    describe('Profile Editing', ()=>{
        it('should show edit button for family members that can be edited', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            expect(editButtons.length).toBeGreaterThan(0);
        });
        it('should open edit form when edit button is clicked', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            expect(_react.screen.getByDisplayValue('John')).toBeInTheDocument();
            expect(_react.screen.getByDisplayValue('Doe')).toBeInTheDocument();
            expect(_react.screen.getByDisplayValue('john@example.com')).toBeInTheDocument();
        });
        it('should allow editing first name', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const firstNameInput = _react.screen.getByDisplayValue('John');
            _react.fireEvent.change(firstNameInput, {
                target: {
                    value: 'Jonathan'
                }
            });
            expect(_react.screen.getByDisplayValue('Jonathan')).toBeInTheDocument();
        });
        it('should allow editing last name', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const lastNameInput = _react.screen.getByDisplayValue('Doe');
            _react.fireEvent.change(lastNameInput, {
                target: {
                    value: 'Smith'
                }
            });
            expect(_react.screen.getByDisplayValue('Smith')).toBeInTheDocument();
        });
        it('should allow editing email', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const emailInput = _react.screen.getByDisplayValue('john@example.com');
            _react.fireEvent.change(emailInput, {
                target: {
                    value: 'jonathan@example.com'
                }
            });
            expect(_react.screen.getByDisplayValue('jonathan@example.com')).toBeInTheDocument();
        });
        it('should allow editing phone', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const phoneInput = _react.screen.getByDisplayValue('555-0100');
            _react.fireEvent.change(phoneInput, {
                target: {
                    value: '555-0200'
                }
            });
            expect(_react.screen.getByDisplayValue('555-0200')).toBeInTheDocument();
        });
        it('should allow editing dietary restrictions', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const dietaryInput = _react.screen.getByDisplayValue('None');
            _react.fireEvent.change(dietaryInput, {
                target: {
                    value: 'Gluten-free'
                }
            });
            expect(_react.screen.getByDisplayValue('Gluten-free')).toBeInTheDocument();
        });
        it('should save changes when save button is clicked', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: {
                            ...mockAdultGuest,
                            first_name: 'Jonathan'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const firstNameInput = _react.screen.getByDisplayValue('John');
            _react.fireEvent.change(firstNameInput, {
                target: {
                    value: 'Jonathan'
                }
            });
            const saveButton = _react.screen.getByText(/Save/);
            _react.fireEvent.click(saveButton);
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/guest/family/adult-1', expect.objectContaining({
                    method: 'PATCH',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        first_name: 'Jonathan',
                        last_name: 'Doe',
                        email: 'john@example.com',
                        phone: '555-0100',
                        dietary_restrictions: 'None'
                    })
                }));
            });
        });
        it('should display success message after successful save', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockAdultGuest
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const saveButton = _react.screen.getByText(/Save/);
            _react.fireEvent.click(saveButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/updated successfully/i)).toBeInTheDocument();
            });
        });
        it('should display error message on save failure', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: false,
                        error: {
                            message: 'Failed to update'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const saveButton = _react.screen.getByText(/Save/);
            _react.fireEvent.click(saveButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/Failed to update/i)).toBeInTheDocument();
            });
        });
        it('should cancel editing when cancel button is clicked', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const firstNameInput = _react.screen.getByDisplayValue('John');
            _react.fireEvent.change(firstNameInput, {
                target: {
                    value: 'Jonathan'
                }
            });
            const cancelButton = _react.screen.getByText(/Cancel/);
            _react.fireEvent.click(cancelButton);
            expect(_react.screen.queryByDisplayValue('Jonathan')).not.toBeInTheDocument();
        });
    });
    describe('RSVP Management', ()=>{
        it('should display RSVP summary for each family member', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            // Adult has 2 RSVPs (1 attending, 1 pending)
            expect(_react.screen.getByText(/Attending: 1/)).toBeInTheDocument();
            expect(_react.screen.getByText(/Pending: 1/)).toBeInTheDocument();
        });
        it('should toggle RSVP details when button is clicked', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const toggleButtons = _react.screen.getAllByText(/View RSVPs/);
            _react.fireEvent.click(toggleButtons[0]);
            expect(_react.screen.getByText('Wedding Ceremony')).toBeInTheDocument();
            expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
        });
        it('should display RSVP status with correct styling', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const toggleButtons = _react.screen.getAllByText(/View RSVPs/);
            _react.fireEvent.click(toggleButtons[0]);
            const attendingBadge = _react.screen.getByText(/âœ“/);
            expect(attendingBadge).toBeInTheDocument();
            const pendingBadge = _react.screen.getByText(/â—‹/);
            expect(pendingBadge).toBeInTheDocument();
        });
        it('should display guest count for RSVPs', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const toggleButtons = _react.screen.getAllByText(/View RSVPs/);
            _react.fireEvent.click(toggleButtons[0]);
            expect(_react.screen.getByText(/Guests: 2/)).toBeInTheDocument();
            expect(_react.screen.getByText(/Guests: 1/)).toBeInTheDocument();
        });
        it('should display dietary notes for RSVPs', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockChildGuest,
                familyMembers: [
                    mockChildGuest
                ],
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const toggleButtons = _react.screen.getAllByText(/View RSVPs/);
            _react.fireEvent.click(toggleButtons[0]);
            expect(_react.screen.getByText(/Vegetarian/)).toBeInTheDocument();
        });
        it('should show empty state when no RSVPs exist', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: [
                    {
                        ...mockAdultGuest,
                        id: 'no-rsvps'
                    }
                ],
                rsvpsByGuest: {}
            }));
            const toggleButtons = _react.screen.getAllByText(/View RSVPs/);
            _react.fireEvent.click(toggleButtons[0]);
            expect(_react.screen.getByText(/No RSVPs yet/)).toBeInTheDocument();
        });
    });
    describe('Permission Checks', ()=>{
        it('should allow adults to edit all family members', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            expect(editButtons.length).toBe(2); // Can edit both adult and child
        });
        it('should allow children to edit only themselves', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockChildGuest,
                familyMembers: [
                    mockChildGuest
                ],
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            expect(editButtons.length).toBe(1); // Can only edit self
        });
        it('should not show edit button for members children cannot edit', ()=>{
            const childWithAdultSibling = {
                ...mockChildGuest,
                id: 'child-2'
            };
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: childWithAdultSibling,
                familyMembers: [
                    mockAdultGuest,
                    childWithAdultSibling
                ],
                rsvpsByGuest: mockRsvpsByGuest
            }));
            // Should only see one edit button (for self)
            const editButtons = _react.screen.getAllByText(/Edit/);
            expect(editButtons.length).toBe(1);
        });
        it('should not allow editing when canEdit returns false', ()=>{
            const childGuest = {
                ...mockChildGuest
            };
            const otherChild = {
                ...mockChildGuest,
                id: 'other-child',
                first_name: 'Other'
            };
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: childGuest,
                familyMembers: [
                    childGuest,
                    otherChild
                ],
                rsvpsByGuest: mockRsvpsByGuest
            }));
            // Should only see edit button for self, not for other child
            const editButtons = _react.screen.getAllByText(/Edit/);
            expect(editButtons.length).toBe(1);
        });
    });
    describe('RLS Enforcement', ()=>{
        it('should only display family members from the same group', ()=>{
            const differentGroupMember = {
                ...mockAdultGuest,
                id: 'different-group',
                group_id: 'group-2',
                first_name: 'Other'
            };
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            expect(_react.screen.queryByText('Other')).not.toBeInTheDocument();
        });
        it('should not allow editing members from different groups', ()=>{
            // This is enforced at the API level, but component should not show edit button
            const currentGuest = {
                ...mockAdultGuest,
                group_id: 'group-1'
            };
            const differentGroupMember = {
                ...mockAdultGuest,
                id: 'diff-id',
                group_id: 'group-2'
            };
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: currentGuest,
                familyMembers: [
                    currentGuest
                ],
                rsvpsByGuest: mockRsvpsByGuest
            }));
            // Should only see one family member (self)
            expect(_react.screen.getAllByText(/ðŸ‘¤ Adult/).length).toBe(1);
        });
    });
    describe('Error Handling', ()=>{
        it('should handle network errors gracefully', async ()=>{
            global.fetch.mockRejectedValueOnce(new Error('Network error'));
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const saveButton = _react.screen.getByText(/Save/);
            _react.fireEvent.click(saveButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/Network error/i)).toBeInTheDocument();
            });
        });
        it('should handle API errors gracefully', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: false,
                        error: {
                            code: 'VALIDATION_ERROR',
                            message: 'Invalid email format'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const saveButton = _react.screen.getByText(/Save/);
            _react.fireEvent.click(saveButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/Invalid email format/i)).toBeInTheDocument();
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9ndWVzdC9GYW1pbHlNYW5hZ2VyLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5pdCBUZXN0cyBmb3IgRmFtaWx5TWFuYWdlciBDb21wb25lbnRcbiAqIFxuICogVGVzdHMgZmFtaWx5IG1lbWJlciBkaXNwbGF5LCBwcm9maWxlIGVkaXRpbmcsIFJTVlAgbWFuYWdlbWVudCxcbiAqIFJMUyBlbmZvcmNlbWVudCwgYW5kIHBlcm1pc3Npb24gY2hlY2tzLlxuICogXG4gKiBSZXF1aXJlbWVudHM6IDYuMywgNi40LCA2LjUsIDYuNiwgNi43LCA2LjksIDYuMTBcbiAqL1xuXG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBGYW1pbHlNYW5hZ2VyIH0gZnJvbSAnLi9GYW1pbHlNYW5hZ2VyJztcbmltcG9ydCB0eXBlIHsgR3Vlc3QgfSBmcm9tICdAL3R5cGVzJztcblxuLy8gTW9jayBmZXRjaFxuZ2xvYmFsLmZldGNoID0gamVzdC5mbigpO1xuXG5kZXNjcmliZSgnRmFtaWx5TWFuYWdlciBDb21wb25lbnQnLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tBZHVsdEd1ZXN0OiBHdWVzdCA9IHtcbiAgICBpZDogJ2FkdWx0LTEnLFxuICAgIGZpcnN0X25hbWU6ICdKb2huJyxcbiAgICBsYXN0X25hbWU6ICdEb2UnLFxuICAgIGVtYWlsOiAnam9obkBleGFtcGxlLmNvbScsXG4gICAgcGhvbmU6ICc1NTUtMDEwMCcsXG4gICAgYWdlX3R5cGU6ICdhZHVsdCcsXG4gICAgZ3Vlc3RfdHlwZTogJ3dlZGRpbmdfZ3Vlc3QnLFxuICAgIGdyb3VwX2lkOiAnZ3JvdXAtMScsXG4gICAgZGlldGFyeV9yZXN0cmljdGlvbnM6ICdOb25lJyxcbiAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gIH07XG5cbiAgY29uc3QgbW9ja0NoaWxkR3Vlc3Q6IEd1ZXN0ID0ge1xuICAgIGlkOiAnY2hpbGQtMScsXG4gICAgZmlyc3RfbmFtZTogJ0phbmUnLFxuICAgIGxhc3RfbmFtZTogJ0RvZScsXG4gICAgZW1haWw6ICdqYW5lQGV4YW1wbGUuY29tJyxcbiAgICBwaG9uZTogbnVsbCxcbiAgICBhZ2VfdHlwZTogJ2NoaWxkJyxcbiAgICBndWVzdF90eXBlOiAnd2VkZGluZ19ndWVzdCcsXG4gICAgZ3JvdXBfaWQ6ICdncm91cC0xJyxcbiAgICBkaWV0YXJ5X3Jlc3RyaWN0aW9uczogJ1ZlZ2V0YXJpYW4nLFxuICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgfTtcblxuICBjb25zdCBtb2NrRmFtaWx5TWVtYmVyczogR3Vlc3RbXSA9IFttb2NrQWR1bHRHdWVzdCwgbW9ja0NoaWxkR3Vlc3RdO1xuXG4gIGNvbnN0IG1vY2tSc3Zwc0J5R3Vlc3QgPSB7XG4gICAgJ2FkdWx0LTEnOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiAncnN2cC0xJyxcbiAgICAgICAgZ3Vlc3RfaWQ6ICdhZHVsdC0xJyxcbiAgICAgICAgZXZlbnRfaWQ6ICdldmVudC0xJyxcbiAgICAgICAgYWN0aXZpdHlfaWQ6IG51bGwsXG4gICAgICAgIHN0YXR1czogJ2F0dGVuZGluZycsXG4gICAgICAgIGd1ZXN0X2NvdW50OiAyLFxuICAgICAgICBkaWV0YXJ5X25vdGVzOiBudWxsLFxuICAgICAgICBldmVudHM6IHsgaWQ6ICdldmVudC0xJywgbmFtZTogJ1dlZGRpbmcgQ2VyZW1vbnknIH0sXG4gICAgICAgIGFjdGl2aXRpZXM6IG51bGwsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogJ3JzdnAtMicsXG4gICAgICAgIGd1ZXN0X2lkOiAnYWR1bHQtMScsXG4gICAgICAgIGV2ZW50X2lkOiBudWxsLFxuICAgICAgICBhY3Rpdml0eV9pZDogJ2FjdGl2aXR5LTEnLFxuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgZ3Vlc3RfY291bnQ6IDEsXG4gICAgICAgIGRpZXRhcnlfbm90ZXM6IG51bGwsXG4gICAgICAgIGV2ZW50czogbnVsbCxcbiAgICAgICAgYWN0aXZpdGllczogeyBpZDogJ2FjdGl2aXR5LTEnLCBuYW1lOiAnQmVhY2ggVm9sbGV5YmFsbCcgfSxcbiAgICAgIH0sXG4gICAgXSxcbiAgICAnY2hpbGQtMSc6IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdyc3ZwLTMnLFxuICAgICAgICBndWVzdF9pZDogJ2NoaWxkLTEnLFxuICAgICAgICBldmVudF9pZDogJ2V2ZW50LTEnLFxuICAgICAgICBhY3Rpdml0eV9pZDogbnVsbCxcbiAgICAgICAgc3RhdHVzOiAnYXR0ZW5kaW5nJyxcbiAgICAgICAgZ3Vlc3RfY291bnQ6IDEsXG4gICAgICAgIGRpZXRhcnlfbm90ZXM6ICdWZWdldGFyaWFuJyxcbiAgICAgICAgZXZlbnRzOiB7IGlkOiAnZXZlbnQtMScsIG5hbWU6ICdXZWRkaW5nIENlcmVtb255JyB9LFxuICAgICAgICBhY3Rpdml0aWVzOiBudWxsLFxuICAgICAgfSxcbiAgICBdLFxuICB9O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrQ2xlYXIoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ZhbWlseSBNZW1iZXIgRGlzcGxheScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgYWxsIGZhbWlseSBtZW1iZXJzIGZvciBhZHVsdCBndWVzdHMnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxGYW1pbHlNYW5hZ2VyXG4gICAgICAgICAgY3VycmVudEd1ZXN0PXttb2NrQWR1bHRHdWVzdH1cbiAgICAgICAgICBmYW1pbHlNZW1iZXJzPXttb2NrRmFtaWx5TWVtYmVyc31cbiAgICAgICAgICByc3Zwc0J5R3Vlc3Q9e21vY2tSc3Zwc0J5R3Vlc3R9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnSm9obiBEb2UnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdKYW5lIERvZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IG9ubHkgc2VsZiBmb3IgY2hpbGQgZ3Vlc3RzJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17bW9ja0NoaWxkR3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17W21vY2tDaGlsZEd1ZXN0XX1cbiAgICAgICAgICByc3Zwc0J5R3Vlc3Q9e21vY2tSc3Zwc0J5R3Vlc3R9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnSmFuZSBEb2UnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ0pvaG4gRG9lJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGNvbnRhY3QgaW5mb3JtYXRpb24gZm9yIGVhY2ggZmFtaWx5IG1lbWJlcicsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e21vY2tBZHVsdEd1ZXN0fVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e21vY2tGYW1pbHlNZW1iZXJzfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdqb2huQGV4YW1wbGUuY29tJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnNTU1LTAxMDAnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdqYW5lQGV4YW1wbGUuY29tJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgYWdlIHR5cGUgbGFiZWxzIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e21vY2tBZHVsdEd1ZXN0fVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e21vY2tGYW1pbHlNZW1iZXJzfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QWxsQnlUZXh0KC/wn5GkIEFkdWx0LykpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QWxsQnlUZXh0KC/wn5G2IENoaWxkLykpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBkaWV0YXJ5IHJlc3RyaWN0aW9ucycsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e21vY2tBZHVsdEd1ZXN0fVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e21vY2tGYW1pbHlNZW1iZXJzfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9Ob25lLykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvVmVnZXRhcmlhbi8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUHJvZmlsZSBFZGl0aW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc2hvdyBlZGl0IGJ1dHRvbiBmb3IgZmFtaWx5IG1lbWJlcnMgdGhhdCBjYW4gYmUgZWRpdGVkJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17bW9ja0FkdWx0R3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17bW9ja0ZhbWlseU1lbWJlcnN9XG4gICAgICAgICAgcnN2cHNCeUd1ZXN0PXttb2NrUnN2cHNCeUd1ZXN0fVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgZWRpdEJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC9FZGl0Lyk7XG4gICAgICBleHBlY3QoZWRpdEJ1dHRvbnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG9wZW4gZWRpdCBmb3JtIHdoZW4gZWRpdCBidXR0b24gaXMgY2xpY2tlZCcsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e21vY2tBZHVsdEd1ZXN0fVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e21vY2tGYW1pbHlNZW1iZXJzfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGVkaXRCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgvRWRpdC8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGVkaXRCdXR0b25zWzBdKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeURpc3BsYXlWYWx1ZSgnSm9obicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeURpc3BsYXlWYWx1ZSgnRG9lJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCdqb2huQGV4YW1wbGUuY29tJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFsbG93IGVkaXRpbmcgZmlyc3QgbmFtZScsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e21vY2tBZHVsdEd1ZXN0fVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e21vY2tGYW1pbHlNZW1iZXJzfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGVkaXRCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgvRWRpdC8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGVkaXRCdXR0b25zWzBdKTtcblxuICAgICAgY29uc3QgZmlyc3ROYW1lSW5wdXQgPSBzY3JlZW4uZ2V0QnlEaXNwbGF5VmFsdWUoJ0pvaG4nKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoZmlyc3ROYW1lSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnSm9uYXRoYW4nIH0gfSk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlEaXNwbGF5VmFsdWUoJ0pvbmF0aGFuJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFsbG93IGVkaXRpbmcgbGFzdCBuYW1lJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17bW9ja0FkdWx0R3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17bW9ja0ZhbWlseU1lbWJlcnN9XG4gICAgICAgICAgcnN2cHNCeUd1ZXN0PXttb2NrUnN2cHNCeUd1ZXN0fVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgZWRpdEJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC9FZGl0Lyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soZWRpdEJ1dHRvbnNbMF0pO1xuXG4gICAgICBjb25zdCBsYXN0TmFtZUlucHV0ID0gc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCdEb2UnKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UobGFzdE5hbWVJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdTbWl0aCcgfSB9KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeURpc3BsYXlWYWx1ZSgnU21pdGgnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWxsb3cgZWRpdGluZyBlbWFpbCcsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e21vY2tBZHVsdEd1ZXN0fVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e21vY2tGYW1pbHlNZW1iZXJzfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGVkaXRCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgvRWRpdC8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGVkaXRCdXR0b25zWzBdKTtcblxuICAgICAgY29uc3QgZW1haWxJbnB1dCA9IHNjcmVlbi5nZXRCeURpc3BsYXlWYWx1ZSgnam9obkBleGFtcGxlLmNvbScpO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShlbWFpbElucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJ2pvbmF0aGFuQGV4YW1wbGUuY29tJyB9IH0pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCdqb25hdGhhbkBleGFtcGxlLmNvbScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBlZGl0aW5nIHBob25lJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17bW9ja0FkdWx0R3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17bW9ja0ZhbWlseU1lbWJlcnN9XG4gICAgICAgICAgcnN2cHNCeUd1ZXN0PXttb2NrUnN2cHNCeUd1ZXN0fVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgZWRpdEJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC9FZGl0Lyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soZWRpdEJ1dHRvbnNbMF0pO1xuXG4gICAgICBjb25zdCBwaG9uZUlucHV0ID0gc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCc1NTUtMDEwMCcpO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShwaG9uZUlucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJzU1NS0wMjAwJyB9IH0pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCc1NTUtMDIwMCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBlZGl0aW5nIGRpZXRhcnkgcmVzdHJpY3Rpb25zJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17bW9ja0FkdWx0R3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17bW9ja0ZhbWlseU1lbWJlcnN9XG4gICAgICAgICAgcnN2cHNCeUd1ZXN0PXttb2NrUnN2cHNCeUd1ZXN0fVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgZWRpdEJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC9FZGl0Lyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soZWRpdEJ1dHRvbnNbMF0pO1xuXG4gICAgICBjb25zdCBkaWV0YXJ5SW5wdXQgPSBzY3JlZW4uZ2V0QnlEaXNwbGF5VmFsdWUoJ05vbmUnKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoZGlldGFyeUlucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJ0dsdXRlbi1mcmVlJyB9IH0pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCdHbHV0ZW4tZnJlZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzYXZlIGNoYW5nZXMgd2hlbiBzYXZlIGJ1dHRvbiBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHsgLi4ubW9ja0FkdWx0R3Vlc3QsIGZpcnN0X25hbWU6ICdKb25hdGhhbicgfSB9KSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxGYW1pbHlNYW5hZ2VyXG4gICAgICAgICAgY3VycmVudEd1ZXN0PXttb2NrQWR1bHRHdWVzdH1cbiAgICAgICAgICBmYW1pbHlNZW1iZXJzPXttb2NrRmFtaWx5TWVtYmVyc31cbiAgICAgICAgICByc3Zwc0J5R3Vlc3Q9e21vY2tSc3Zwc0J5R3Vlc3R9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBlZGl0QnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoL0VkaXQvKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhlZGl0QnV0dG9uc1swXSk7XG5cbiAgICAgIGNvbnN0IGZpcnN0TmFtZUlucHV0ID0gc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCdKb2huJyk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKGZpcnN0TmFtZUlucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJ0pvbmF0aGFuJyB9IH0pO1xuXG4gICAgICBjb25zdCBzYXZlQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgvU2F2ZS8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNhdmVCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgJy9hcGkvZ3Vlc3QvZmFtaWx5L2FkdWx0LTEnLFxuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICBmaXJzdF9uYW1lOiAnSm9uYXRoYW4nLFxuICAgICAgICAgICAgICBsYXN0X25hbWU6ICdEb2UnLFxuICAgICAgICAgICAgICBlbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nLFxuICAgICAgICAgICAgICBwaG9uZTogJzU1NS0wMTAwJyxcbiAgICAgICAgICAgICAgZGlldGFyeV9yZXN0cmljdGlvbnM6ICdOb25lJyxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBzdWNjZXNzIG1lc3NhZ2UgYWZ0ZXIgc3VjY2Vzc2Z1bCBzYXZlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tBZHVsdEd1ZXN0IH0pLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e21vY2tBZHVsdEd1ZXN0fVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e21vY2tGYW1pbHlNZW1iZXJzfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGVkaXRCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgvRWRpdC8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGVkaXRCdXR0b25zWzBdKTtcblxuICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoL1NhdmUvKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhzYXZlQnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC91cGRhdGVkIHN1Y2Nlc3NmdWxseS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGVycm9yIG1lc3NhZ2Ugb24gc2F2ZSBmYWlsdXJlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogeyBtZXNzYWdlOiAnRmFpbGVkIHRvIHVwZGF0ZScgfSB9KSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxGYW1pbHlNYW5hZ2VyXG4gICAgICAgICAgY3VycmVudEd1ZXN0PXttb2NrQWR1bHRHdWVzdH1cbiAgICAgICAgICBmYW1pbHlNZW1iZXJzPXttb2NrRmFtaWx5TWVtYmVyc31cbiAgICAgICAgICByc3Zwc0J5R3Vlc3Q9e21vY2tSc3Zwc0J5R3Vlc3R9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBlZGl0QnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoL0VkaXQvKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhlZGl0QnV0dG9uc1swXSk7XG5cbiAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KC9TYXZlLyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2F2ZUJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvRmFpbGVkIHRvIHVwZGF0ZS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYW5jZWwgZWRpdGluZyB3aGVuIGNhbmNlbCBidXR0b24gaXMgY2xpY2tlZCcsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e21vY2tBZHVsdEd1ZXN0fVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e21vY2tGYW1pbHlNZW1iZXJzfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGVkaXRCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgvRWRpdC8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGVkaXRCdXR0b25zWzBdKTtcblxuICAgICAgY29uc3QgZmlyc3ROYW1lSW5wdXQgPSBzY3JlZW4uZ2V0QnlEaXNwbGF5VmFsdWUoJ0pvaG4nKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoZmlyc3ROYW1lSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnSm9uYXRoYW4nIH0gfSk7XG5cbiAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoL0NhbmNlbC8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGNhbmNlbEJ1dHRvbik7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeURpc3BsYXlWYWx1ZSgnSm9uYXRoYW4nKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSU1ZQIE1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IFJTVlAgc3VtbWFyeSBmb3IgZWFjaCBmYW1pbHkgbWVtYmVyJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17bW9ja0FkdWx0R3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17bW9ja0ZhbWlseU1lbWJlcnN9XG4gICAgICAgICAgcnN2cHNCeUd1ZXN0PXttb2NrUnN2cHNCeUd1ZXN0fVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgLy8gQWR1bHQgaGFzIDIgUlNWUHMgKDEgYXR0ZW5kaW5nLCAxIHBlbmRpbmcpXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvQXR0ZW5kaW5nOiAxLykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvUGVuZGluZzogMS8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0b2dnbGUgUlNWUCBkZXRhaWxzIHdoZW4gYnV0dG9uIGlzIGNsaWNrZWQnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxGYW1pbHlNYW5hZ2VyXG4gICAgICAgICAgY3VycmVudEd1ZXN0PXttb2NrQWR1bHRHdWVzdH1cbiAgICAgICAgICBmYW1pbHlNZW1iZXJzPXttb2NrRmFtaWx5TWVtYmVyc31cbiAgICAgICAgICByc3Zwc0J5R3Vlc3Q9e21vY2tSc3Zwc0J5R3Vlc3R9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBjb25zdCB0b2dnbGVCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgvVmlldyBSU1ZQcy8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHRvZ2dsZUJ1dHRvbnNbMF0pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnV2VkZGluZyBDZXJlbW9ueScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0JlYWNoIFZvbGxleWJhbGwnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBSU1ZQIHN0YXR1cyB3aXRoIGNvcnJlY3Qgc3R5bGluZycsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e21vY2tBZHVsdEd1ZXN0fVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e21vY2tGYW1pbHlNZW1iZXJzfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHRvZ2dsZUJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC9WaWV3IFJTVlBzLyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sodG9nZ2xlQnV0dG9uc1swXSk7XG5cbiAgICAgIGNvbnN0IGF0dGVuZGluZ0JhZGdlID0gc2NyZWVuLmdldEJ5VGV4dCgv4pyTLyk7XG4gICAgICBleHBlY3QoYXR0ZW5kaW5nQmFkZ2UpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAgIGNvbnN0IHBlbmRpbmdCYWRnZSA9IHNjcmVlbi5nZXRCeVRleHQoL+KXiy8pO1xuICAgICAgZXhwZWN0KHBlbmRpbmdCYWRnZSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBndWVzdCBjb3VudCBmb3IgUlNWUHMnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxGYW1pbHlNYW5hZ2VyXG4gICAgICAgICAgY3VycmVudEd1ZXN0PXttb2NrQWR1bHRHdWVzdH1cbiAgICAgICAgICBmYW1pbHlNZW1iZXJzPXttb2NrRmFtaWx5TWVtYmVyc31cbiAgICAgICAgICByc3Zwc0J5R3Vlc3Q9e21vY2tSc3Zwc0J5R3Vlc3R9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBjb25zdCB0b2dnbGVCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgvVmlldyBSU1ZQcy8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHRvZ2dsZUJ1dHRvbnNbMF0pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvR3Vlc3RzOiAyLykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvR3Vlc3RzOiAxLykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgZGlldGFyeSBub3RlcyBmb3IgUlNWUHMnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxGYW1pbHlNYW5hZ2VyXG4gICAgICAgICAgY3VycmVudEd1ZXN0PXttb2NrQ2hpbGRHdWVzdH1cbiAgICAgICAgICBmYW1pbHlNZW1iZXJzPXtbbW9ja0NoaWxkR3Vlc3RdfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHRvZ2dsZUJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC9WaWV3IFJTVlBzLyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sodG9nZ2xlQnV0dG9uc1swXSk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9WZWdldGFyaWFuLykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNob3cgZW1wdHkgc3RhdGUgd2hlbiBubyBSU1ZQcyBleGlzdCcsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e21vY2tBZHVsdEd1ZXN0fVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e1t7IC4uLm1vY2tBZHVsdEd1ZXN0LCBpZDogJ25vLXJzdnBzJyB9XX1cbiAgICAgICAgICByc3Zwc0J5R3Vlc3Q9e3t9fVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgdG9nZ2xlQnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoL1ZpZXcgUlNWUHMvKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayh0b2dnbGVCdXR0b25zWzBdKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL05vIFJTVlBzIHlldC8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGVybWlzc2lvbiBDaGVja3MnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBhZHVsdHMgdG8gZWRpdCBhbGwgZmFtaWx5IG1lbWJlcnMnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxGYW1pbHlNYW5hZ2VyXG4gICAgICAgICAgY3VycmVudEd1ZXN0PXttb2NrQWR1bHRHdWVzdH1cbiAgICAgICAgICBmYW1pbHlNZW1iZXJzPXttb2NrRmFtaWx5TWVtYmVyc31cbiAgICAgICAgICByc3Zwc0J5R3Vlc3Q9e21vY2tSc3Zwc0J5R3Vlc3R9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBlZGl0QnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoL0VkaXQvKTtcbiAgICAgIGV4cGVjdChlZGl0QnV0dG9ucy5sZW5ndGgpLnRvQmUoMik7IC8vIENhbiBlZGl0IGJvdGggYWR1bHQgYW5kIGNoaWxkXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFsbG93IGNoaWxkcmVuIHRvIGVkaXQgb25seSB0aGVtc2VsdmVzJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17bW9ja0NoaWxkR3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17W21vY2tDaGlsZEd1ZXN0XX1cbiAgICAgICAgICByc3Zwc0J5R3Vlc3Q9e21vY2tSc3Zwc0J5R3Vlc3R9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBlZGl0QnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoL0VkaXQvKTtcbiAgICAgIGV4cGVjdChlZGl0QnV0dG9ucy5sZW5ndGgpLnRvQmUoMSk7IC8vIENhbiBvbmx5IGVkaXQgc2VsZlxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3Qgc2hvdyBlZGl0IGJ1dHRvbiBmb3IgbWVtYmVycyBjaGlsZHJlbiBjYW5ub3QgZWRpdCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGNoaWxkV2l0aEFkdWx0U2libGluZyA9IHtcbiAgICAgICAgLi4ubW9ja0NoaWxkR3Vlc3QsXG4gICAgICAgIGlkOiAnY2hpbGQtMicsXG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxGYW1pbHlNYW5hZ2VyXG4gICAgICAgICAgY3VycmVudEd1ZXN0PXtjaGlsZFdpdGhBZHVsdFNpYmxpbmd9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17W21vY2tBZHVsdEd1ZXN0LCBjaGlsZFdpdGhBZHVsdFNpYmxpbmddfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIC8vIFNob3VsZCBvbmx5IHNlZSBvbmUgZWRpdCBidXR0b24gKGZvciBzZWxmKVxuICAgICAgY29uc3QgZWRpdEJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC9FZGl0Lyk7XG4gICAgICBleHBlY3QoZWRpdEJ1dHRvbnMubGVuZ3RoKS50b0JlKDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgYWxsb3cgZWRpdGluZyB3aGVuIGNhbkVkaXQgcmV0dXJucyBmYWxzZScsICgpID0+IHtcbiAgICAgIGNvbnN0IGNoaWxkR3Vlc3QgPSB7IC4uLm1vY2tDaGlsZEd1ZXN0IH07XG4gICAgICBjb25zdCBvdGhlckNoaWxkID0geyAuLi5tb2NrQ2hpbGRHdWVzdCwgaWQ6ICdvdGhlci1jaGlsZCcsIGZpcnN0X25hbWU6ICdPdGhlcicgfTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17Y2hpbGRHdWVzdH1cbiAgICAgICAgICBmYW1pbHlNZW1iZXJzPXtbY2hpbGRHdWVzdCwgb3RoZXJDaGlsZF19XG4gICAgICAgICAgcnN2cHNCeUd1ZXN0PXttb2NrUnN2cHNCeUd1ZXN0fVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgLy8gU2hvdWxkIG9ubHkgc2VlIGVkaXQgYnV0dG9uIGZvciBzZWxmLCBub3QgZm9yIG90aGVyIGNoaWxkXG4gICAgICBjb25zdCBlZGl0QnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoL0VkaXQvKTtcbiAgICAgIGV4cGVjdChlZGl0QnV0dG9ucy5sZW5ndGgpLnRvQmUoMSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSTFMgRW5mb3JjZW1lbnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBvbmx5IGRpc3BsYXkgZmFtaWx5IG1lbWJlcnMgZnJvbSB0aGUgc2FtZSBncm91cCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGRpZmZlcmVudEdyb3VwTWVtYmVyID0ge1xuICAgICAgICAuLi5tb2NrQWR1bHRHdWVzdCxcbiAgICAgICAgaWQ6ICdkaWZmZXJlbnQtZ3JvdXAnLFxuICAgICAgICBncm91cF9pZDogJ2dyb3VwLTInLFxuICAgICAgICBmaXJzdF9uYW1lOiAnT3RoZXInLFxuICAgICAgfTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17bW9ja0FkdWx0R3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17bW9ja0ZhbWlseU1lbWJlcnN9IC8vIFNob3VsZCBub3QgaW5jbHVkZSBkaWZmZXJlbnQgZ3JvdXAgbWVtYmVyXG4gICAgICAgICAgcnN2cHNCeUd1ZXN0PXttb2NrUnN2cHNCeUd1ZXN0fVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnT3RoZXInKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCBhbGxvdyBlZGl0aW5nIG1lbWJlcnMgZnJvbSBkaWZmZXJlbnQgZ3JvdXBzJywgKCkgPT4ge1xuICAgICAgLy8gVGhpcyBpcyBlbmZvcmNlZCBhdCB0aGUgQVBJIGxldmVsLCBidXQgY29tcG9uZW50IHNob3VsZCBub3Qgc2hvdyBlZGl0IGJ1dHRvblxuICAgICAgY29uc3QgY3VycmVudEd1ZXN0ID0geyAuLi5tb2NrQWR1bHRHdWVzdCwgZ3JvdXBfaWQ6ICdncm91cC0xJyB9O1xuICAgICAgY29uc3QgZGlmZmVyZW50R3JvdXBNZW1iZXIgPSB7IC4uLm1vY2tBZHVsdEd1ZXN0LCBpZDogJ2RpZmYtaWQnLCBncm91cF9pZDogJ2dyb3VwLTInIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e2N1cnJlbnRHdWVzdH1cbiAgICAgICAgICBmYW1pbHlNZW1iZXJzPXtbY3VycmVudEd1ZXN0XX0gLy8gU2VydmVyIHNob3VsZCBmaWx0ZXIgb3V0IGRpZmZlcmVudCBncm91cFxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIC8vIFNob3VsZCBvbmx5IHNlZSBvbmUgZmFtaWx5IG1lbWJlciAoc2VsZilcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QWxsQnlUZXh0KC/wn5GkIEFkdWx0LykubGVuZ3RoKS50b0JlKDEpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbmV0d29yayBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdOZXR3b3JrIGVycm9yJykpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxGYW1pbHlNYW5hZ2VyXG4gICAgICAgICAgY3VycmVudEd1ZXN0PXttb2NrQWR1bHRHdWVzdH1cbiAgICAgICAgICBmYW1pbHlNZW1iZXJzPXttb2NrRmFtaWx5TWVtYmVyc31cbiAgICAgICAgICByc3Zwc0J5R3Vlc3Q9e21vY2tSc3Zwc0J5R3Vlc3R9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBlZGl0QnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoL0VkaXQvKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhlZGl0QnV0dG9uc1swXSk7XG5cbiAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KC9TYXZlLyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2F2ZUJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvTmV0d29yayBlcnJvci9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgQVBJIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogeyBjb2RlOiAnVkFMSURBVElPTl9FUlJPUicsIG1lc3NhZ2U6ICdJbnZhbGlkIGVtYWlsIGZvcm1hdCcgfSB9KSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxGYW1pbHlNYW5hZ2VyXG4gICAgICAgICAgY3VycmVudEd1ZXN0PXttb2NrQWR1bHRHdWVzdH1cbiAgICAgICAgICBmYW1pbHlNZW1iZXJzPXttb2NrRmFtaWx5TWVtYmVyc31cbiAgICAgICAgICByc3Zwc0J5R3Vlc3Q9e21vY2tSc3Zwc0J5R3Vlc3R9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBlZGl0QnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoL0VkaXQvKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhlZGl0QnV0dG9uc1swXSk7XG5cbiAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KC9TYXZlLyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2F2ZUJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvSW52YWxpZCBlbWFpbCBmb3JtYXQvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJnbG9iYWwiLCJmZXRjaCIsImplc3QiLCJmbiIsImRlc2NyaWJlIiwibW9ja0FkdWx0R3Vlc3QiLCJpZCIsImZpcnN0X25hbWUiLCJsYXN0X25hbWUiLCJlbWFpbCIsInBob25lIiwiYWdlX3R5cGUiLCJndWVzdF90eXBlIiwiZ3JvdXBfaWQiLCJkaWV0YXJ5X3Jlc3RyaWN0aW9ucyIsImNyZWF0ZWRfYXQiLCJ1cGRhdGVkX2F0IiwibW9ja0NoaWxkR3Vlc3QiLCJtb2NrRmFtaWx5TWVtYmVycyIsIm1vY2tSc3Zwc0J5R3Vlc3QiLCJndWVzdF9pZCIsImV2ZW50X2lkIiwiYWN0aXZpdHlfaWQiLCJzdGF0dXMiLCJndWVzdF9jb3VudCIsImRpZXRhcnlfbm90ZXMiLCJldmVudHMiLCJuYW1lIiwiYWN0aXZpdGllcyIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwibW9ja0NsZWFyIiwiaXQiLCJyZW5kZXIiLCJGYW1pbHlNYW5hZ2VyIiwiY3VycmVudEd1ZXN0IiwiZmFtaWx5TWVtYmVycyIsInJzdnBzQnlHdWVzdCIsImV4cGVjdCIsInNjcmVlbiIsImdldEJ5VGV4dCIsInRvQmVJblRoZURvY3VtZW50IiwicXVlcnlCeVRleHQiLCJub3QiLCJnZXRBbGxCeVRleHQiLCJ0b0hhdmVMZW5ndGgiLCJlZGl0QnV0dG9ucyIsImxlbmd0aCIsInRvQmVHcmVhdGVyVGhhbiIsImZpcmVFdmVudCIsImNsaWNrIiwiZ2V0QnlEaXNwbGF5VmFsdWUiLCJmaXJzdE5hbWVJbnB1dCIsImNoYW5nZSIsInRhcmdldCIsInZhbHVlIiwibGFzdE5hbWVJbnB1dCIsImVtYWlsSW5wdXQiLCJwaG9uZUlucHV0IiwiZGlldGFyeUlucHV0IiwibW9ja1Jlc29sdmVkVmFsdWVPbmNlIiwianNvbiIsInN1Y2Nlc3MiLCJkYXRhIiwic2F2ZUJ1dHRvbiIsIndhaXRGb3IiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsIm9iamVjdENvbnRhaW5pbmciLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJlcnJvciIsIm1lc3NhZ2UiLCJjYW5jZWxCdXR0b24iLCJxdWVyeUJ5RGlzcGxheVZhbHVlIiwidG9nZ2xlQnV0dG9ucyIsImF0dGVuZGluZ0JhZGdlIiwicGVuZGluZ0JhZGdlIiwidG9CZSIsImNoaWxkV2l0aEFkdWx0U2libGluZyIsImNoaWxkR3Vlc3QiLCJvdGhlckNoaWxkIiwiZGlmZmVyZW50R3JvdXBNZW1iZXIiLCJtb2NrUmVqZWN0ZWRWYWx1ZU9uY2UiLCJFcnJvciIsImNvZGUiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0NBT0M7Ozs7O3VCQUVrRDsrQkFDckI7QUFHOUIsYUFBYTtBQUNiQSxPQUFPQyxLQUFLLEdBQUdDLEtBQUtDLEVBQUU7QUFFdEJDLFNBQVMsMkJBQTJCO0lBQ2xDLE1BQU1DLGlCQUF3QjtRQUM1QkMsSUFBSTtRQUNKQyxZQUFZO1FBQ1pDLFdBQVc7UUFDWEMsT0FBTztRQUNQQyxPQUFPO1FBQ1BDLFVBQVU7UUFDVkMsWUFBWTtRQUNaQyxVQUFVO1FBQ1ZDLHNCQUFzQjtRQUN0QkMsWUFBWTtRQUNaQyxZQUFZO0lBQ2Q7SUFFQSxNQUFNQyxpQkFBd0I7UUFDNUJYLElBQUk7UUFDSkMsWUFBWTtRQUNaQyxXQUFXO1FBQ1hDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxVQUFVO1FBQ1ZDLFlBQVk7UUFDWkMsVUFBVTtRQUNWQyxzQkFBc0I7UUFDdEJDLFlBQVk7UUFDWkMsWUFBWTtJQUNkO0lBRUEsTUFBTUUsb0JBQTZCO1FBQUNiO1FBQWdCWTtLQUFlO0lBRW5FLE1BQU1FLG1CQUFtQjtRQUN2QixXQUFXO1lBQ1Q7Z0JBQ0ViLElBQUk7Z0JBQ0pjLFVBQVU7Z0JBQ1ZDLFVBQVU7Z0JBQ1ZDLGFBQWE7Z0JBQ2JDLFFBQVE7Z0JBQ1JDLGFBQWE7Z0JBQ2JDLGVBQWU7Z0JBQ2ZDLFFBQVE7b0JBQUVwQixJQUFJO29CQUFXcUIsTUFBTTtnQkFBbUI7Z0JBQ2xEQyxZQUFZO1lBQ2Q7WUFDQTtnQkFDRXRCLElBQUk7Z0JBQ0pjLFVBQVU7Z0JBQ1ZDLFVBQVU7Z0JBQ1ZDLGFBQWE7Z0JBQ2JDLFFB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