{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/guest/FamilyManager.test.tsx"],"sourcesContent":["/**\n * Unit Tests for FamilyManager Component\n * \n * Tests family member display, profile editing, RSVP management,\n * RLS enforcement, and permission checks.\n * \n * Requirements: 6.3, 6.4, 6.5, 6.6, 6.7, 6.9, 6.10\n */\n\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport { FamilyManager } from './FamilyManager';\nimport type { Guest } from '@/types';\n\n// Mock fetch\nglobal.fetch = jest.fn();\n\ndescribe('FamilyManager Component', () => {\n  const mockAdultGuest: Guest = {\n    id: 'adult-1',\n    first_name: 'John',\n    last_name: 'Doe',\n    email: 'john@example.com',\n    phone: '555-0100',\n    age_type: 'adult',\n    guest_type: 'wedding_guest',\n    group_id: 'group-1',\n    dietary_restrictions: 'None',\n    created_at: '2024-01-01T00:00:00Z',\n    updated_at: '2024-01-01T00:00:00Z',\n  };\n\n  const mockChildGuest: Guest = {\n    id: 'child-1',\n    first_name: 'Jane',\n    last_name: 'Doe',\n    email: 'jane@example.com',\n    phone: null,\n    age_type: 'child',\n    guest_type: 'wedding_guest',\n    group_id: 'group-1',\n    dietary_restrictions: 'Vegetarian',\n    created_at: '2024-01-01T00:00:00Z',\n    updated_at: '2024-01-01T00:00:00Z',\n  };\n\n  const mockFamilyMembers: Guest[] = [mockAdultGuest, mockChildGuest];\n\n  const mockRsvpsByGuest = {\n    'adult-1': [\n      {\n        id: 'rsvp-1',\n        guest_id: 'adult-1',\n        event_id: 'event-1',\n        activity_id: null,\n        status: 'attending',\n        guest_count: 2,\n        dietary_notes: null,\n        events: { id: 'event-1', name: 'Wedding Ceremony' },\n        activities: null,\n      },\n      {\n        id: 'rsvp-2',\n        guest_id: 'adult-1',\n        event_id: null,\n        activity_id: 'activity-1',\n        status: 'pending',\n        guest_count: 1,\n        dietary_notes: null,\n        events: null,\n        activities: { id: 'activity-1', name: 'Beach Volleyball' },\n      },\n    ],\n    'child-1': [\n      {\n        id: 'rsvp-3',\n        guest_id: 'child-1',\n        event_id: 'event-1',\n        activity_id: null,\n        status: 'attending',\n        guest_count: 1,\n        dietary_notes: 'Vegetarian',\n        events: { id: 'event-1', name: 'Wedding Ceremony' },\n        activities: null,\n      },\n    ],\n  };\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    (global.fetch as jest.Mock).mockClear();\n  });\n\n  describe('Family Member Display', () => {\n    it('should display all family members for adult guests', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      expect(screen.getByText('John Doe')).toBeInTheDocument();\n      expect(screen.getByText('Jane Doe')).toBeInTheDocument();\n    });\n\n    it('should display only self for child guests', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockChildGuest}\n          familyMembers={[mockChildGuest]}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      expect(screen.getByText('Jane Doe')).toBeInTheDocument();\n      expect(screen.queryByText('John Doe')).not.toBeInTheDocument();\n    });\n\n    it('should display contact information for each family member', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      expect(screen.getByText('john@example.com')).toBeInTheDocument();\n      expect(screen.getByText('555-0100')).toBeInTheDocument();\n      expect(screen.getByText('jane@example.com')).toBeInTheDocument();\n    });\n\n    it('should display age type labels correctly', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      expect(screen.getAllByText(/ðŸ‘¤ Adult/)).toHaveLength(1);\n      expect(screen.getAllByText(/ðŸ‘¶ Child/)).toHaveLength(1);\n    });\n\n    it('should display dietary restrictions', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      expect(screen.getByText(/None/)).toBeInTheDocument();\n      expect(screen.getByText(/Vegetarian/)).toBeInTheDocument();\n    });\n  });\n\n  describe('Profile Editing', () => {\n    it('should show edit button for family members that can be edited', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      const editButtons = screen.getAllByText(/Edit/);\n      expect(editButtons.length).toBeGreaterThan(0);\n    });\n\n    it('should open edit form when edit button is clicked', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      const editButtons = screen.getAllByText(/Edit/);\n      fireEvent.click(editButtons[0]);\n\n      expect(screen.getByDisplayValue('John')).toBeInTheDocument();\n      expect(screen.getByDisplayValue('Doe')).toBeInTheDocument();\n      expect(screen.getByDisplayValue('john@example.com')).toBeInTheDocument();\n    });\n\n    it('should allow editing first name', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      const editButtons = screen.getAllByText(/Edit/);\n      fireEvent.click(editButtons[0]);\n\n      const firstNameInput = screen.getByDisplayValue('John');\n      fireEvent.change(firstNameInput, { target: { value: 'Jonathan' } });\n\n      expect(screen.getByDisplayValue('Jonathan')).toBeInTheDocument();\n    });\n\n    it('should allow editing last name', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      const editButtons = screen.getAllByText(/Edit/);\n      fireEvent.click(editButtons[0]);\n\n      const lastNameInput = screen.getByDisplayValue('Doe');\n      fireEvent.change(lastNameInput, { target: { value: 'Smith' } });\n\n      expect(screen.getByDisplayValue('Smith')).toBeInTheDocument();\n    });\n\n    it('should allow editing email', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      const editButtons = screen.getAllByText(/Edit/);\n      fireEvent.click(editButtons[0]);\n\n      const emailInput = screen.getByDisplayValue('john@example.com');\n      fireEvent.change(emailInput, { target: { value: 'jonathan@example.com' } });\n\n      expect(screen.getByDisplayValue('jonathan@example.com')).toBeInTheDocument();\n    });\n\n    it('should allow editing phone', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      const editButtons = screen.getAllByText(/Edit/);\n      fireEvent.click(editButtons[0]);\n\n      const phoneInput = screen.getByDisplayValue('555-0100');\n      fireEvent.change(phoneInput, { target: { value: '555-0200' } });\n\n      expect(screen.getByDisplayValue('555-0200')).toBeInTheDocument();\n    });\n\n    it('should allow editing dietary restrictions', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      const editButtons = screen.getAllByText(/Edit/);\n      fireEvent.click(editButtons[0]);\n\n      const dietaryInput = screen.getByDisplayValue('None');\n      fireEvent.change(dietaryInput, { target: { value: 'Gluten-free' } });\n\n      expect(screen.getByDisplayValue('Gluten-free')).toBeInTheDocument();\n    });\n\n    it('should save changes when save button is clicked', async () => {\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        json: async () => ({ success: true, data: { ...mockAdultGuest, first_name: 'Jonathan' } }),\n      });\n\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      const editButtons = screen.getAllByText(/Edit/);\n      fireEvent.click(editButtons[0]);\n\n      const firstNameInput = screen.getByDisplayValue('John');\n      fireEvent.change(firstNameInput, { target: { value: 'Jonathan' } });\n\n      const saveButton = screen.getByText(/Save/);\n      fireEvent.click(saveButton);\n\n      await waitFor(() => {\n        expect(global.fetch).toHaveBeenCalledWith(\n          '/api/guest/family/adult-1',\n          expect.objectContaining({\n            method: 'PATCH',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              first_name: 'Jonathan',\n              last_name: 'Doe',\n              email: 'john@example.com',\n              phone: '555-0100',\n              dietary_restrictions: 'None',\n            }),\n          })\n        );\n      });\n    });\n\n    it('should display success message after successful save', async () => {\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        json: async () => ({ success: true, data: mockAdultGuest }),\n      });\n\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      const editButtons = screen.getAllByText(/Edit/);\n      fireEvent.click(editButtons[0]);\n\n      const saveButton = screen.getByText(/Save/);\n      fireEvent.click(saveButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/updated successfully/i)).toBeInTheDocument();\n      });\n    });\n\n    it('should display error message on save failure', async () => {\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        json: async () => ({ success: false, error: { message: 'Failed to update' } }),\n      });\n\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      const editButtons = screen.getAllByText(/Edit/);\n      fireEvent.click(editButtons[0]);\n\n      const saveButton = screen.getByText(/Save/);\n      fireEvent.click(saveButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/Failed to update/i)).toBeInTheDocument();\n      });\n    });\n\n    it('should cancel editing when cancel button is clicked', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      const editButtons = screen.getAllByText(/Edit/);\n      fireEvent.click(editButtons[0]);\n\n      const firstNameInput = screen.getByDisplayValue('John');\n      fireEvent.change(firstNameInput, { target: { value: 'Jonathan' } });\n\n      const cancelButton = screen.getByText(/Cancel/);\n      fireEvent.click(cancelButton);\n\n      expect(screen.queryByDisplayValue('Jonathan')).not.toBeInTheDocument();\n    });\n  });\n\n  describe('RSVP Management', () => {\n    it('should display RSVP summary for each family member', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      // Adult has 2 RSVPs (1 attending, 1 pending)\n      expect(screen.getByText(/Attending: 1/)).toBeInTheDocument();\n      expect(screen.getByText(/Pending: 1/)).toBeInTheDocument();\n    });\n\n    it('should toggle RSVP details when button is clicked', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      const toggleButtons = screen.getAllByText(/View RSVPs/);\n      fireEvent.click(toggleButtons[0]);\n\n      expect(screen.getByText('Wedding Ceremony')).toBeInTheDocument();\n      expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n    });\n\n    it('should display RSVP status with correct styling', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      const toggleButtons = screen.getAllByText(/View RSVPs/);\n      fireEvent.click(toggleButtons[0]);\n\n      const attendingBadge = screen.getByText(/âœ“/);\n      expect(attendingBadge).toBeInTheDocument();\n\n      const pendingBadge = screen.getByText(/â—‹/);\n      expect(pendingBadge).toBeInTheDocument();\n    });\n\n    it('should display guest count for RSVPs', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      const toggleButtons = screen.getAllByText(/View RSVPs/);\n      fireEvent.click(toggleButtons[0]);\n\n      expect(screen.getByText(/Guests: 2/)).toBeInTheDocument();\n      expect(screen.getByText(/Guests: 1/)).toBeInTheDocument();\n    });\n\n    it('should display dietary notes for RSVPs', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockChildGuest}\n          familyMembers={[mockChildGuest]}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      const toggleButtons = screen.getAllByText(/View RSVPs/);\n      fireEvent.click(toggleButtons[0]);\n\n      expect(screen.getByText(/Vegetarian/)).toBeInTheDocument();\n    });\n\n    it('should show empty state when no RSVPs exist', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={[{ ...mockAdultGuest, id: 'no-rsvps' }]}\n          rsvpsByGuest={{}}\n        />\n      );\n\n      const toggleButtons = screen.getAllByText(/View RSVPs/);\n      fireEvent.click(toggleButtons[0]);\n\n      expect(screen.getByText(/No RSVPs yet/)).toBeInTheDocument();\n    });\n  });\n\n  describe('Permission Checks', () => {\n    it('should allow adults to edit all family members', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      const editButtons = screen.getAllByText(/Edit/);\n      expect(editButtons.length).toBe(2); // Can edit both adult and child\n    });\n\n    it('should allow children to edit only themselves', () => {\n      render(\n        <FamilyManager\n          currentGuest={mockChildGuest}\n          familyMembers={[mockChildGuest]}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      const editButtons = screen.getAllByText(/Edit/);\n      expect(editButtons.length).toBe(1); // Can only edit self\n    });\n\n    it('should not show edit button for members children cannot edit', () => {\n      const childWithAdultSibling = {\n        ...mockChildGuest,\n        id: 'child-2',\n      };\n\n      render(\n        <FamilyManager\n          currentGuest={childWithAdultSibling}\n          familyMembers={[mockAdultGuest, childWithAdultSibling]}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      // Should only see one edit button (for self)\n      const editButtons = screen.getAllByText(/Edit/);\n      expect(editButtons.length).toBe(1);\n    });\n\n    it('should not allow editing when canEdit returns false', () => {\n      const childGuest = { ...mockChildGuest };\n      const otherChild = { ...mockChildGuest, id: 'other-child', first_name: 'Other' };\n\n      render(\n        <FamilyManager\n          currentGuest={childGuest}\n          familyMembers={[childGuest, otherChild]}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      // Should only see edit button for self, not for other child\n      const editButtons = screen.getAllByText(/Edit/);\n      expect(editButtons.length).toBe(1);\n    });\n  });\n\n  describe('RLS Enforcement', () => {\n    it('should only display family members from the same group', () => {\n      const differentGroupMember = {\n        ...mockAdultGuest,\n        id: 'different-group',\n        group_id: 'group-2',\n        first_name: 'Other',\n      };\n\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers} // Should not include different group member\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      expect(screen.queryByText('Other')).not.toBeInTheDocument();\n    });\n\n    it('should not allow editing members from different groups', () => {\n      // This is enforced at the API level, but component should not show edit button\n      const currentGuest = { ...mockAdultGuest, group_id: 'group-1' };\n      const differentGroupMember = { ...mockAdultGuest, id: 'diff-id', group_id: 'group-2' };\n\n      render(\n        <FamilyManager\n          currentGuest={currentGuest}\n          familyMembers={[currentGuest]} // Server should filter out different group\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      // Should only see one family member (self)\n      expect(screen.getAllByText(/ðŸ‘¤ Adult/).length).toBe(1);\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle network errors gracefully', async () => {\n      (global.fetch as jest.Mock).mockRejectedValueOnce(new Error('Network error'));\n\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      const editButtons = screen.getAllByText(/Edit/);\n      fireEvent.click(editButtons[0]);\n\n      const saveButton = screen.getByText(/Save/);\n      fireEvent.click(saveButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/Network error/i)).toBeInTheDocument();\n      });\n    });\n\n    it('should handle API errors gracefully', async () => {\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        json: async () => ({ success: false, error: { code: 'VALIDATION_ERROR', message: 'Invalid email format' } }),\n      });\n\n      render(\n        <FamilyManager\n          currentGuest={mockAdultGuest}\n          familyMembers={mockFamilyMembers}\n          rsvpsByGuest={mockRsvpsByGuest}\n        />\n      );\n\n      const editButtons = screen.getAllByText(/Edit/);\n      fireEvent.click(editButtons[0]);\n\n      const saveButton = screen.getByText(/Save/);\n      fireEvent.click(saveButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/Invalid email format/i)).toBeInTheDocument();\n      });\n    });\n  });\n});\n"],"names":["global","fetch","jest","fn","describe","mockAdultGuest","id","first_name","last_name","email","phone","age_type","guest_type","group_id","dietary_restrictions","created_at","updated_at","mockChildGuest","mockFamilyMembers","mockRsvpsByGuest","guest_id","event_id","activity_id","status","guest_count","dietary_notes","events","name","activities","beforeEach","clearAllMocks","mockClear","it","render","FamilyManager","currentGuest","familyMembers","rsvpsByGuest","expect","screen","getByText","toBeInTheDocument","queryByText","not","getAllByText","toHaveLength","editButtons","length","toBeGreaterThan","fireEvent","click","getByDisplayValue","firstNameInput","change","target","value","lastNameInput","emailInput","phoneInput","dietaryInput","mockResolvedValueOnce","json","success","data","saveButton","waitFor","toHaveBeenCalledWith","objectContaining","method","headers","body","JSON","stringify","error","message","cancelButton","queryByDisplayValue","toggleButtons","attendingBadge","pendingBadge","toBe","childWithAdultSibling","childGuest","otherChild","differentGroupMember","mockRejectedValueOnce","Error","code"],"mappings":"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"}