{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/services/gallerySettingsService.test.ts"],"sourcesContent":["import {\n  getSettings,\n  upsertSettings,\n  updateDisplayMode,\n  updatePhotoOrder,\n  configureGallery,\n  deleteSettings,\n} from './gallerySettingsService';\nimport { createMockSupabaseClient } from '../__tests__/helpers/mockSupabase';\n\n// Mock the supabase lib at the module level\nconst mockSupabase = createMockSupabaseClient();\njest.mock('../lib/supabase', () => ({\n  supabase: mockSupabase,\n}));\n\ndescribe('gallerySettingsService', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('getSettings', () => {\n    it('should return success with gallery settings when settings exist', async () => {\n      const mockSettings = {\n        id: 'settings-123',\n        page_type: 'activity',\n        page_id: 'activity-456',\n        display_mode: 'gallery',\n        show_captions: true,\n        created_at: '2024-01-01T10:00:00Z',\n        updated_at: '2024-01-01T10:00:00Z',\n      };\n\n      mockSupabase.from.mockReturnValue({\n        select: jest.fn().mockReturnValue({\n          eq: jest.fn().mockReturnValue({\n            eq: jest.fn().mockReturnValue({\n              single: jest.fn().mockResolvedValue({\n                data: mockSettings,\n                error: null,\n              }),\n            }),\n          }),\n        }),\n      });\n\n      const result = await getSettings('activity', 'activity-456');\n\n      expect(result.success).toBe(true);\n      if (result.success) {\n        expect(result.data).toEqual(mockSettings);\n      }\n    });\n\n    it('should return success with default settings when no settings found', async () => {\n      mockSupabase.from.mockReturnValue({\n        select: jest.fn().mockReturnValue({\n          eq: jest.fn().mockReturnValue({\n            eq: jest.fn().mockReturnValue({\n              single: jest.fn().mockResolvedValue({\n                data: null,\n                error: { code: 'PGRST116' }, // No rows found\n              }),\n            }),\n          }),\n        }),\n      });\n\n      const result = await getSettings('event', 'event-789');\n\n      expect(result.success).toBe(true);\n      if (result.success) {\n        expect(result.data.page_type).toBe('event');\n        expect(result.data.page_id).toBe('event-789');\n        expect(result.data.display_mode).toBe('gallery');\n        expect(result.data.show_captions).toBe(true);\n        expect(result.data.id).toBe('');\n      }\n    });\n\n    it('should return DATABASE_ERROR when query fails with other error', async () => {\n      mockSupabase.from.mockReturnValue({\n        select: jest.fn().mockReturnValue({\n          eq: jest.fn().mockReturnValue({\n            eq: jest.fn().mockReturnValue({\n              single: jest.fn().mockResolvedValue({\n                data: null,\n                error: { code: 'OTHER_ERROR', message: 'Database error' },\n              }),\n            }),\n          }),\n        }),\n      });\n\n      const result = await getSettings('accommodation', 'accommodation-123');\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.code).toBe('DATABASE_ERROR');\n      }\n    });\n\n    it('should return UNKNOWN_ERROR when unexpected error occurs', async () => {\n      mockSupabase.from.mockImplementation(() => {\n        throw new Error('Unexpected error');\n      });\n\n      const result = await getSettings('room_type', 'room-123');\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.code).toBe('UNKNOWN_ERROR');\n      }\n    });\n  });\n\n  describe('upsertSettings', () => {\n    it('should return success with created settings when valid data provided', async () => {\n      const validData = {\n        page_type: 'activity' as const,\n        page_id: 'activity-456',\n        display_mode: 'carousel' as const,\n        photos_per_row: 3,\n        show_captions: false,\n        autoplay_interval: 5000,\n        transition_effect: 'fade',\n      };\n\n      const mockCreatedSettings = {\n        id: 'settings-123',\n        ...validData,\n        created_at: '2024-01-01T10:00:00Z',\n        updated_at: '2024-01-01T10:00:00Z',\n      };\n\n      mockSupabase.from.mockReturnValue({\n        upsert: jest.fn().mockReturnValue({\n          select: jest.fn().mockReturnValue({\n            single: jest.fn().mockResolvedValue({\n              data: mockCreatedSettings,\n              error: null,\n            }),\n          }),\n        }),\n      });\n\n      const result = await upsertSettings(validData);\n\n      expect(result.success).toBe(true);\n      if (result.success) {\n        expect(result.data).toEqual(mockCreatedSettings);\n      }\n    });\n\n    it('should return VALIDATION_ERROR when invalid data provided', async () => {\n      const invalidData = {\n        page_type: 'invalid' as any,\n        page_id: '',\n        display_mode: 'invalid' as any,\n      };\n\n      const result = await upsertSettings(invalidData);\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.code).toBe('VALIDATION_ERROR');\n      }\n    });\n\n    it('should return DATABASE_ERROR when upsert fails', async () => {\n      const validData = {\n        page_type: 'activity' as const,\n        page_id: 'activity-456',\n        display_mode: 'gallery' as const,\n      };\n\n      mockSupabase.from.mockReturnValue({\n        upsert: jest.fn().mockReturnValue({\n          select: jest.fn().mockReturnValue({\n            single: jest.fn().mockResolvedValue({\n              data: null,\n              error: { message: 'Upsert failed' },\n            }),\n          }),\n        }),\n      });\n\n      const result = await upsertSettings(validData);\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.code).toBe('DATABASE_ERROR');\n      }\n    });\n\n    it('should return UNKNOWN_ERROR when unexpected error occurs', async () => {\n      const validData = {\n        page_type: 'activity' as const,\n        page_id: 'activity-456',\n        display_mode: 'gallery' as const,\n      };\n\n      mockSupabase.from.mockImplementation(() => {\n        throw new Error('Unexpected error');\n      });\n\n      const result = await upsertSettings(validData);\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.code).toBe('UNKNOWN_ERROR');\n      }\n    });\n  });\n\n  describe('updateDisplayMode', () => {\n    it('should return success when display mode updated successfully', async () => {\n      mockSupabase.from.mockReturnValue({\n        update: jest.fn().mockReturnValue({\n          eq: jest.fn().mockResolvedValue({\n            error: null,\n          }),\n        }),\n      });\n\n      const result = await updateDisplayMode('page-123', 'carousel');\n\n      expect(result.success).toBe(true);\n    });\n\n    it('should return DATABASE_ERROR when update fails', async () => {\n      mockSupabase.from.mockReturnValue({\n        update: jest.fn().mockReturnValue({\n          eq: jest.fn().mockResolvedValue({\n            error: { message: 'Update failed' },\n          }),\n        }),\n      });\n\n      const result = await updateDisplayMode('page-123', 'loop');\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.code).toBe('DATABASE_ERROR');\n      }\n    });\n\n    it('should return UNKNOWN_ERROR when unexpected error occurs', async () => {\n      mockSupabase.from.mockImplementation(() => {\n        throw new Error('Unexpected error');\n      });\n\n      const result = await updateDisplayMode('page-123', 'gallery');\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.code).toBe('UNKNOWN_ERROR');\n      }\n    });\n  });\n\n  describe('updatePhotoOrder', () => {\n    it('should return success when photo order updated successfully', async () => {\n      const photoIds = ['photo-1', 'photo-2', 'photo-3'];\n\n      mockSupabase.from.mockReturnValue({\n        update: jest.fn().mockReturnValue({\n          eq: jest.fn().mockReturnValue({\n            eq: jest.fn().mockResolvedValue({\n              error: null,\n            }),\n          }),\n        }),\n      });\n\n      const result = await updatePhotoOrder('page-123', photoIds);\n\n      expect(result.success).toBe(true);\n      expect(mockSupabase.from).toHaveBeenCalledWith('photos');\n    });\n\n    it('should return DATABASE_ERROR when some updates fail', async () => {\n      const photoIds = ['photo-1', 'photo-2'];\n\n      mockSupabase.from.mockReturnValue({\n        update: jest.fn().mockReturnValue({\n          eq: jest.fn().mockReturnValue({\n            eq: jest.fn()\n              .mockResolvedValueOnce({ error: null })\n              .mockResolvedValueOnce({ error: { message: 'Update failed' } }),\n          }),\n        }),\n      });\n\n      const result = await updatePhotoOrder('page-123', photoIds);\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.code).toBe('DATABASE_ERROR');\n      }\n    });\n\n    it('should return UNKNOWN_ERROR when unexpected error occurs', async () => {\n      mockSupabase.from.mockImplementation(() => {\n        throw new Error('Unexpected error');\n      });\n\n      const result = await updatePhotoOrder('page-123', ['photo-1']);\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.code).toBe('UNKNOWN_ERROR');\n      }\n    });\n  });\n\n  describe('configureGallery', () => {\n    it('should return success when gallery configured successfully', async () => {\n      const options = {\n        photos_per_row: 4,\n        show_captions: true,\n        autoplay_interval: 3000,\n        transition_effect: 'slide',\n      };\n\n      mockSupabase.from.mockReturnValue({\n        update: jest.fn().mockReturnValue({\n          eq: jest.fn().mockResolvedValue({\n            error: null,\n          }),\n        }),\n      });\n\n      const result = await configureGallery('page-123', options);\n\n      expect(result.success).toBe(true);\n    });\n\n    it('should return VALIDATION_ERROR when invalid options provided', async () => {\n      const invalidOptions = {\n        photos_per_row: -1, // Invalid: negative number\n        show_captions: 'invalid' as any, // Invalid: not boolean\n      };\n\n      const result = await configureGallery('page-123', invalidOptions);\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.code).toBe('VALIDATION_ERROR');\n      }\n    });\n\n    it('should return DATABASE_ERROR when update fails', async () => {\n      const options = {\n        photos_per_row: 3,\n        show_captions: false,\n      };\n\n      mockSupabase.from.mockReturnValue({\n        update: jest.fn().mockReturnValue({\n          eq: jest.fn().mockResolvedValue({\n            error: { message: 'Update failed' },\n          }),\n        }),\n      });\n\n      const result = await configureGallery('page-123', options);\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.code).toBe('DATABASE_ERROR');\n      }\n    });\n\n    it('should return UNKNOWN_ERROR when unexpected error occurs', async () => {\n      mockSupabase.from.mockImplementation(() => {\n        throw new Error('Unexpected error');\n      });\n\n      const result = await configureGallery('page-123', {});\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.code).toBe('UNKNOWN_ERROR');\n      }\n    });\n  });\n\n  describe('deleteSettings', () => {\n    it('should return success when settings deleted successfully', async () => {\n      mockSupabase.from.mockReturnValue({\n        delete: jest.fn().mockReturnValue({\n          eq: jest.fn().mockResolvedValue({\n            error: null,\n          }),\n        }),\n      });\n\n      const result = await deleteSettings('page-123');\n\n      expect(result.success).toBe(true);\n    });\n\n    it('should return DATABASE_ERROR when delete fails', async () => {\n      mockSupabase.from.mockReturnValue({\n        delete: jest.fn().mockReturnValue({\n          eq: jest.fn().mockResolvedValue({\n            error: { message: 'Delete failed' },\n          }),\n        }),\n      });\n\n      const result = await deleteSettings('page-123');\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.code).toBe('DATABASE_ERROR');\n      }\n    });\n\n    it('should return UNKNOWN_ERROR when unexpected error occurs', async () => {\n      mockSupabase.from.mockImplementation(() => {\n        throw new Error('Unexpected error');\n      });\n\n      const result = await deleteSettings('page-123');\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.code).toBe('UNKNOWN_ERROR');\n      }\n    });\n  });\n});"],"names":["jest","mock","supabase","mockSupabase","createMockSupabaseClient","describe","beforeEach","clearAllMocks","it","mockSettings","id","page_type","page_id","display_mode","show_captions","created_at","updated_at","from","mockReturnValue","select","fn","eq","single","mockResolvedValue","data","error","result","getSettings","expect","success","toBe","toEqual","code","message","mockImplementation","Error","validData","photos_per_row","autoplay_interval","transition_effect","mockCreatedSettings","upsert","upsertSettings","invalidData","update","updateDisplayMode","photoIds","updatePhotoOrder","toHaveBeenCalledWith","mockResolvedValueOnce","options","configureGallery","invalidOptions","delete","deleteSettings"],"mappings":"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"}