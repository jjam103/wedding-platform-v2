80405a0ded7664111f89b6b294b36bb3
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get calculateRoomCost () {
        return calculateRoomCost;
    },
    get createAccommodation () {
        return createAccommodation;
    },
    get createRoomAssignment () {
        return createRoomAssignment;
    },
    get createRoomType () {
        return createRoomType;
    },
    get deleteAccommodation () {
        return deleteAccommodation;
    },
    get deleteRoomAssignment () {
        return deleteRoomAssignment;
    },
    get deleteRoomType () {
        return deleteRoomType;
    },
    get getAccommodation () {
        return getAccommodation;
    },
    get getAccommodationWithRoomTypes () {
        return getAccommodationWithRoomTypes;
    },
    get getRoomAssignment () {
        return getRoomAssignment;
    },
    get getRoomType () {
        return getRoomType;
    },
    get getRoomTypeWithAvailability () {
        return getRoomTypeWithAvailability;
    },
    get listAccommodations () {
        return listAccommodations;
    },
    get listGuestRoomAssignments () {
        return listGuestRoomAssignments;
    },
    get listRoomTypeAssignments () {
        return listRoomTypeAssignments;
    },
    get listRoomTypes () {
        return listRoomTypes;
    },
    get searchAccommodations () {
        return searchAccommodations;
    },
    get updateAccommodation () {
        return updateAccommodation;
    },
    get updateRoomAssignment () {
        return updateRoomAssignment;
    },
    get updateRoomType () {
        return updateRoomType;
    }
});
const _supabasejs = require("@supabase/supabase-js");
const _sanitization = require("../utils/sanitization");
const _accommodationSchemas = require("../schemas/accommodationSchemas");
// Initialize Supabase client - Pattern A (testable)
const supabase = (0, _supabasejs.createClient)(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY);
/**
 * Converts camelCase to snake_case for database columns.
 */ function toSnakeCase(obj) {
    const snakeObj = {};
    for(const key in obj){
        const snakeKey = key.replace(/[A-Z]/g, (letter)=>`_${letter.toLowerCase()}`);
        snakeObj[snakeKey] = obj[key];
    }
    return snakeObj;
}
/**
 * Converts snake_case to camelCase for TypeScript objects.
 */ function toCamelCase(obj) {
    const camelObj = {};
    for(const key in obj){
        const camelKey = key.replace(/_([a-z])/g, (_, letter)=>letter.toUpperCase());
        camelObj[camelKey] = obj[key];
    }
    return camelObj;
}
async function createAccommodation(data) {
    try {
        const validation = _accommodationSchemas.createAccommodationSchema.safeParse(data);
        if (!validation.success) {
            return {
                success: false,
                error: {
                    code: 'VALIDATION_ERROR',
                    message: 'Validation failed',
                    details: validation.error.issues
                }
            };
        }
        const sanitized = {
            ...validation.data,
            name: (0, _sanitization.sanitizeInput)(validation.data.name),
            address: validation.data.address ? (0, _sanitization.sanitizeInput)(validation.data.address) : null,
            description: validation.data.description ? (0, _sanitization.sanitizeRichText)(validation.data.description) : null
        };
        const dbData = toSnakeCase(sanitized);
        const { data: result, error } = await supabase.from('accommodations').insert(dbData).select().single();
        if (error) {
            return {
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: error.message,
                    details: error
                }
            };
        }
        return {
            success: true,
            data: toCamelCase(result)
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function getAccommodation(id) {
    try {
        const { data, error } = await supabase.from('accommodations').select('*').eq('id', id).single();
        if (error) {
            if (error.code === 'PGRST116') {
                return {
                    success: false,
                    error: {
                        code: 'NOT_FOUND',
                        message: 'Accommodation not found'
                    }
                };
            }
            return {
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: error.message,
                    details: error
                }
            };
        }
        return {
            success: true,
            data: toCamelCase(data)
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function updateAccommodation(id, data) {
    try {
        const validation = _accommodationSchemas.updateAccommodationSchema.safeParse(data);
        if (!validation.success) {
            return {
                success: false,
                error: {
                    code: 'VALIDATION_ERROR',
                    message: 'Validation failed',
                    details: validation.error.issues
                }
            };
        }
        const sanitized = {
            ...validation.data
        };
        if (sanitized.name) {
            sanitized.name = (0, _sanitization.sanitizeInput)(sanitized.name);
        }
        if (sanitized.address) {
            sanitized.address = (0, _sanitization.sanitizeInput)(sanitized.address);
        }
        if (sanitized.description) {
            sanitized.description = (0, _sanitization.sanitizeRichText)(sanitized.description);
        }
        const dbData = toSnakeCase(sanitized);
        const { data: result, error } = await supabase.from('accommodations').update(dbData).eq('id', id).select().single();
        if (error) {
            if (error.code === 'PGRST116') {
                return {
                    success: false,
                    error: {
                        code: 'NOT_FOUND',
                        message: 'Accommodation not found'
                    }
                };
            }
            return {
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: error.message,
                    details: error
                }
            };
        }
        return {
            success: true,
            data: toCamelCase(result)
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function deleteAccommodation(id) {
    try {
        const { error } = await supabase.from('accommodations').delete().eq('id', id);
        if (error) {
            return {
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: error.message,
                    details: error
                }
            };
        }
        return {
            success: true,
            data: undefined
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function listAccommodations(filters = {
    page: 1,
    pageSize: 50
}) {
    try {
        const filtersWithDefaults = {
            page: 1,
            pageSize: 50,
            ...filters
        };
        const validation = _accommodationSchemas.accommodationFilterSchema.safeParse(filtersWithDefaults);
        if (!validation.success) {
            return {
                success: false,
                error: {
                    code: 'VALIDATION_ERROR',
                    message: 'Validation failed',
                    details: validation.error.issues
                }
            };
        }
        const { page = 1, pageSize = 50, ...filterParams } = validation.data;
        const from = (page - 1) * pageSize;
        const to = from + pageSize - 1;
        let query = supabase.from('accommodations').select('*', {
            count: 'exact'
        });
        if (filterParams.locationId !== undefined) {
            if (filterParams.locationId === null) {
                query = query.is('location_id', null);
            } else {
                query = query.eq('location_id', filterParams.locationId);
            }
        }
        if (filterParams.status) {
            query = query.eq('status', filterParams.status);
        }
        query = query.order('name', {
            ascending: true
        }).range(from, to);
        const { data, error, count } = await query;
        if (error) {
            return {
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: error.message,
                    details: error
                }
            };
        }
        const accommodations = data.map((accommodation)=>toCamelCase(accommodation));
        const total = count || 0;
        const totalPages = Math.ceil(total / pageSize);
        return {
            success: true,
            data: {
                accommodations,
                total,
                page,
                pageSize,
                totalPages
            }
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function searchAccommodations(searchParams) {
    try {
        const validation = _accommodationSchemas.accommodationSearchSchema.safeParse(searchParams);
        if (!validation.success) {
            return {
                success: false,
                error: {
                    code: 'VALIDATION_ERROR',
                    message: 'Validation failed',
                    details: validation.error.issues
                }
            };
        }
        const { query, page = 1, pageSize = 50 } = validation.data;
        const from = (page - 1) * pageSize;
        const to = from + pageSize - 1;
        const sanitizedQuery = (0, _sanitization.sanitizeInput)(query);
        const { data, error, count } = await supabase.from('accommodations').select('*', {
            count: 'exact'
        }).or(`name.ilike.%${sanitizedQuery}%,address.ilike.%${sanitizedQuery}%,description.ilike.%${sanitizedQuery}%`).order('name', {
            ascending: true
        }).range(from, to);
        if (error) {
            return {
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: error.message,
                    details: error
                }
            };
        }
        const accommodations = data.map((accommodation)=>toCamelCase(accommodation));
        const total = count || 0;
        const totalPages = Math.ceil(total / pageSize);
        return {
            success: true,
            data: {
                accommodations,
                total,
                page,
                pageSize,
                totalPages
            }
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function createRoomType(data) {
    try {
        const validation = _accommodationSchemas.createRoomTypeSchema.safeParse(data);
        if (!validation.success) {
            return {
                success: false,
                error: {
                    code: 'VALIDATION_ERROR',
                    message: 'Validation failed',
                    details: validation.error.issues
                }
            };
        }
        const sanitized = {
            ...validation.data,
            name: (0, _sanitization.sanitizeInput)(validation.data.name),
            description: validation.data.description ? (0, _sanitization.sanitizeRichText)(validation.data.description) : null
        };
        const dbData = toSnakeCase(sanitized);
        const { data: result, error } = await supabase.from('room_types').insert(dbData).select().single();
        if (error) {
            return {
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: error.message,
                    details: error
                }
            };
        }
        return {
            success: true,
            data: toCamelCase(result)
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function getRoomType(id) {
    try {
        const { data, error } = await supabase.from('room_types').select('*').eq('id', id).single();
        if (error) {
            if (error.code === 'PGRST116') {
                return {
                    success: false,
                    error: {
                        code: 'NOT_FOUND',
                        message: 'Room type not found'
                    }
                };
            }
            return {
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: error.message,
                    details: error
                }
            };
        }
        return {
            success: true,
            data: toCamelCase(data)
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function updateRoomType(id, data) {
    try {
        const validation = _accommodationSchemas.updateRoomTypeSchema.safeParse(data);
        if (!validation.success) {
            return {
                success: false,
                error: {
                    code: 'VALIDATION_ERROR',
                    message: 'Validation failed',
                    details: validation.error.issues
                }
            };
        }
        const sanitized = {
            ...validation.data
        };
        if (sanitized.name) {
            sanitized.name = (0, _sanitization.sanitizeInput)(sanitized.name);
        }
        if (sanitized.description) {
            sanitized.description = (0, _sanitization.sanitizeRichText)(sanitized.description);
        }
        const dbData = toSnakeCase(sanitized);
        const { data: result, error } = await supabase.from('room_types').update(dbData).eq('id', id).select().single();
        if (error) {
            if (error.code === 'PGRST116') {
                return {
                    success: false,
                    error: {
                        code: 'NOT_FOUND',
                        message: 'Room type not found'
                    }
                };
            }
            return {
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: error.message,
                    details: error
                }
            };
        }
        return {
            success: true,
            data: toCamelCase(result)
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function deleteRoomType(id) {
    try {
        const { error } = await supabase.from('room_types').delete().eq('id', id);
        if (error) {
            return {
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: error.message,
                    details: error
                }
            };
        }
        return {
            success: true,
            data: undefined
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function listRoomTypes(accommodationId) {
    try {
        const { data, error } = await supabase.from('room_types').select('*').eq('accommodation_id', accommodationId).order('name', {
            ascending: true
        });
        if (error) {
            return {
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: error.message,
                    details: error
                }
            };
        }
        const roomTypes = data.map((roomType)=>toCamelCase(roomType));
        return {
            success: true,
            data: roomTypes
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function getAccommodationWithRoomTypes(id) {
    try {
        const accommodationResult = await getAccommodation(id);
        if (!accommodationResult.success) {
            return accommodationResult;
        }
        const roomTypesResult = await listRoomTypes(id);
        if (!roomTypesResult.success) {
            return roomTypesResult;
        }
        return {
            success: true,
            data: {
                ...accommodationResult.data,
                roomTypes: roomTypesResult.data
            }
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function createRoomAssignment(data) {
    try {
        const validation = _accommodationSchemas.createRoomAssignmentSchema.safeParse(data);
        if (!validation.success) {
            return {
                success: false,
                error: {
                    code: 'VALIDATION_ERROR',
                    message: 'Validation failed',
                    details: validation.error.issues
                }
            };
        }
        const sanitized = {
            ...validation.data,
            notes: validation.data.notes ? (0, _sanitization.sanitizeInput)(validation.data.notes) : null
        };
        const dbData = toSnakeCase(sanitized);
        const { data: result, error } = await supabase.from('room_assignments').insert(dbData).select().single();
        if (error) {
            if (error.code === '23505') {
                return {
                    success: false,
                    error: {
                        code: 'CONFLICT',
                        message: 'Guest already has a room assignment for these dates'
                    }
                };
            }
            return {
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: error.message,
                    details: error
                }
            };
        }
        return {
            success: true,
            data: toCamelCase(result)
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function getRoomAssignment(id) {
    try {
        const { data, error } = await supabase.from('room_assignments').select('*').eq('id', id).single();
        if (error) {
            if (error.code === 'PGRST116') {
                return {
                    success: false,
                    error: {
                        code: 'NOT_FOUND',
                        message: 'Room assignment not found'
                    }
                };
            }
            return {
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: error.message,
                    details: error
                }
            };
        }
        return {
            success: true,
            data: toCamelCase(data)
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function updateRoomAssignment(id, data) {
    try {
        const validation = _accommodationSchemas.updateRoomAssignmentSchema.safeParse(data);
        if (!validation.success) {
            return {
                success: false,
                error: {
                    code: 'VALIDATION_ERROR',
                    message: 'Validation failed',
                    details: validation.error.issues
                }
            };
        }
        const sanitized = {
            ...validation.data
        };
        if (sanitized.notes) {
            sanitized.notes = (0, _sanitization.sanitizeInput)(sanitized.notes);
        }
        const dbData = toSnakeCase(sanitized);
        const { data: result, error } = await supabase.from('room_assignments').update(dbData).eq('id', id).select().single();
        if (error) {
            if (error.code === 'PGRST116') {
                return {
                    success: false,
                    error: {
                        code: 'NOT_FOUND',
                        message: 'Room assignment not found'
                    }
                };
            }
            return {
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: error.message,
                    details: error
                }
            };
        }
        return {
            success: true,
            data: toCamelCase(result)
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function deleteRoomAssignment(id) {
    try {
        const { error } = await supabase.from('room_assignments').delete().eq('id', id);
        if (error) {
            return {
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: error.message,
                    details: error
                }
            };
        }
        return {
            success: true,
            data: undefined
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function listGuestRoomAssignments(guestId) {
    try {
        const { data, error } = await supabase.from('room_assignments').select('*').eq('guest_id', guestId).order('check_in', {
            ascending: true
        });
        if (error) {
            return {
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: error.message,
                    details: error
                }
            };
        }
        const assignments = data.map((assignment)=>toCamelCase(assignment));
        return {
            success: true,
            data: assignments
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function listRoomTypeAssignments(roomTypeId) {
    try {
        const { data, error } = await supabase.from('room_assignments').select('*').eq('room_type_id', roomTypeId).order('check_in', {
            ascending: true
        });
        if (error) {
            return {
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: error.message,
                    details: error
                }
            };
        }
        const assignments = data.map((assignment)=>toCamelCase(assignment));
        return {
            success: true,
            data: assignments
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function calculateRoomCost(params) {
    try {
        const validation = _accommodationSchemas.calculateCostSchema.safeParse(params);
        if (!validation.success) {
            return {
                success: false,
                error: {
                    code: 'VALIDATION_ERROR',
                    message: 'Validation failed',
                    details: validation.error.issues
                }
            };
        }
        const { roomTypeId, checkIn, checkOut } = validation.data;
        // Get room type details
        const roomTypeResult = await getRoomType(roomTypeId);
        if (!roomTypeResult.success) {
            return roomTypeResult;
        }
        const roomType = roomTypeResult.data;
        // Calculate number of nights
        const checkInDate = new Date(checkIn);
        const checkOutDate = new Date(checkOut);
        const numberOfNights = Math.ceil((checkOutDate.getTime() - checkInDate.getTime()) / (1000 * 60 * 60 * 24));
        // Calculate costs
        const pricePerNight = roomType.pricePerNight;
        const subsidyPerNight = roomType.hostSubsidyPerNight || 0;
        const totalCost = pricePerNight * numberOfNights;
        const totalSubsidy = subsidyPerNight * numberOfNights;
        const guestCost = totalCost - totalSubsidy;
        return {
            success: true,
            data: {
                totalCost,
                totalSubsidy,
                guestCost,
                numberOfNights,
                pricePerNight,
                subsidyPerNight
            }
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function getRoomTypeWithAvailability(roomTypeId, checkIn, checkOut) {
    try {
        const roomTypeResult = await getRoomType(roomTypeId);
        if (!roomTypeResult.success) {
            return roomTypeResult;
        }
        const roomType = roomTypeResult.data;
        // Count overlapping assignments
        const { data, error } = await supabase.from('room_assignments').select('id').eq('room_type_id', roomTypeId).or(`check_in.lte.${checkOut},check_out.gte.${checkIn}`);
        if (error) {
            return {
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: error.message,
                    details: error
                }
            };
        }
        const assignedRooms = data.length;
        const availableRooms = Math.max(0, roomType.totalRooms - assignedRooms);
        return {
            success: true,
            data: {
                ...roomType,
                assignedRooms,
                availableRooms
            }
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvc2VydmljZXMvYWNjb21tb2RhdGlvblNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcbmltcG9ydCB7IHNhbml0aXplSW5wdXQsIHNhbml0aXplUmljaFRleHQgfSBmcm9tIFwiLi4vdXRpbHMvc2FuaXRpemF0aW9uXCI7XG5pbXBvcnQge1xuICBjcmVhdGVBY2NvbW1vZGF0aW9uU2NoZW1hLFxuICB1cGRhdGVBY2NvbW1vZGF0aW9uU2NoZW1hLFxuICBhY2NvbW1vZGF0aW9uRmlsdGVyU2NoZW1hLFxuICBhY2NvbW1vZGF0aW9uU2VhcmNoU2NoZW1hLFxuICBjcmVhdGVSb29tVHlwZVNjaGVtYSxcbiAgdXBkYXRlUm9vbVR5cGVTY2hlbWEsXG4gIGNyZWF0ZVJvb21Bc3NpZ25tZW50U2NoZW1hLFxuICB1cGRhdGVSb29tQXNzaWdubWVudFNjaGVtYSxcbiAgY2FsY3VsYXRlQ29zdFNjaGVtYSxcbiAgdHlwZSBDcmVhdGVBY2NvbW1vZGF0aW9uRFRPLFxuICB0eXBlIFVwZGF0ZUFjY29tbW9kYXRpb25EVE8sXG4gIHR5cGUgQWNjb21tb2RhdGlvbkZpbHRlckRUTyxcbiAgdHlwZSBBY2NvbW1vZGF0aW9uU2VhcmNoRFRPLFxuICB0eXBlIENyZWF0ZVJvb21UeXBlRFRPLFxuICB0eXBlIFVwZGF0ZVJvb21UeXBlRFRPLFxuICB0eXBlIENyZWF0ZVJvb21Bc3NpZ25tZW50RFRPLFxuICB0eXBlIFVwZGF0ZVJvb21Bc3NpZ25tZW50RFRPLFxuICB0eXBlIENhbGN1bGF0ZUNvc3REVE8sXG4gIHR5cGUgQWNjb21tb2RhdGlvbixcbiAgdHlwZSBSb29tVHlwZSxcbiAgdHlwZSBSb29tQXNzaWdubWVudCxcbiAgdHlwZSBQYWdpbmF0ZWRBY2NvbW1vZGF0aW9ucyxcbiAgdHlwZSBSb29tQ29zdCxcbiAgdHlwZSBBY2NvbW1vZGF0aW9uV2l0aFJvb21UeXBlcyxcbiAgdHlwZSBSb29tVHlwZVdpdGhBdmFpbGFiaWxpdHksXG59IGZyb20gJy4uL3NjaGVtYXMvYWNjb21tb2RhdGlvblNjaGVtYXMnO1xuXG4vKipcbiAqIFJlc3VsdCB0eXBlIGZvciBjb25zaXN0ZW50IGVycm9yIGhhbmRsaW5nLlxuICovXG50eXBlIFJlc3VsdDxUPiA9XG4gIHwgeyBzdWNjZXNzOiB0cnVlOyBkYXRhOiBUIH1cbiAgfCB7IHN1Y2Nlc3M6IGZhbHNlOyBlcnJvcjogeyBjb2RlOiBzdHJpbmc7IG1lc3NhZ2U6IHN0cmluZzsgZGV0YWlscz86IGFueSB9IH07XG5cbi8vIEluaXRpYWxpemUgU3VwYWJhc2UgY2xpZW50IC0gUGF0dGVybiBBICh0ZXN0YWJsZSlcbmNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KFxuICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxuICBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIVxuKTtcblxuLyoqXG4gKiBDb252ZXJ0cyBjYW1lbENhc2UgdG8gc25ha2VfY2FzZSBmb3IgZGF0YWJhc2UgY29sdW1ucy5cbiAqL1xuZnVuY3Rpb24gdG9TbmFrZUNhc2Uob2JqOiBhbnkpOiBhbnkge1xuICBjb25zdCBzbmFrZU9iajogYW55ID0ge307XG4gIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgIGNvbnN0IHNuYWtlS2V5ID0ga2V5LnJlcGxhY2UoL1tBLVpdL2csIChsZXR0ZXIpID0+IGBfJHtsZXR0ZXIudG9Mb3dlckNhc2UoKX1gKTtcbiAgICBzbmFrZU9ialtzbmFrZUtleV0gPSBvYmpba2V5XTtcbiAgfVxuICByZXR1cm4gc25ha2VPYmo7XG59XG5cbi8qKlxuICogQ29udmVydHMgc25ha2VfY2FzZSB0byBjYW1lbENhc2UgZm9yIFR5cGVTY3JpcHQgb2JqZWN0cy5cbiAqL1xuZnVuY3Rpb24gdG9DYW1lbENhc2Uob2JqOiBhbnkpOiBhbnkge1xuICBjb25zdCBjYW1lbE9iajogYW55ID0ge307XG4gIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgIGNvbnN0IGNhbWVsS2V5ID0ga2V5LnJlcGxhY2UoL18oW2Etel0pL2csIChfLCBsZXR0ZXIpID0+IGxldHRlci50b1VwcGVyQ2FzZSgpKTtcbiAgICBjYW1lbE9ialtjYW1lbEtleV0gPSBvYmpba2V5XTtcbiAgfVxuICByZXR1cm4gY2FtZWxPYmo7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEFDQ09NTU9EQVRJT04gQ1JVRCBPUEVSQVRJT05TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBhY2NvbW1vZGF0aW9uIGluIHRoZSBzeXN0ZW0uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBY2NvbW1vZGF0aW9uKGRhdGE6IENyZWF0ZUFjY29tbW9kYXRpb25EVE8pOiBQcm9taXNlPFJlc3VsdDxBY2NvbW1vZGF0aW9uPj4ge1xuICB0cnkge1xuICAgIGNvbnN0IHZhbGlkYXRpb24gPSBjcmVhdGVBY2NvbW1vZGF0aW9uU2NoZW1hLnNhZmVQYXJzZShkYXRhKTtcbiAgICBpZiAoIXZhbGlkYXRpb24uc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ1ZBTElEQVRJT05fRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdWYWxpZGF0aW9uIGZhaWxlZCcsXG4gICAgICAgICAgZGV0YWlsczogdmFsaWRhdGlvbi5lcnJvci5pc3N1ZXMsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IHNhbml0aXplZCA9IHtcbiAgICAgIC4uLnZhbGlkYXRpb24uZGF0YSxcbiAgICAgIG5hbWU6IHNhbml0aXplSW5wdXQodmFsaWRhdGlvbi5kYXRhLm5hbWUpLFxuICAgICAgYWRkcmVzczogdmFsaWRhdGlvbi5kYXRhLmFkZHJlc3MgPyBzYW5pdGl6ZUlucHV0KHZhbGlkYXRpb24uZGF0YS5hZGRyZXNzKSA6IG51bGwsXG4gICAgICBkZXNjcmlwdGlvbjogdmFsaWRhdGlvbi5kYXRhLmRlc2NyaXB0aW9uID8gc2FuaXRpemVSaWNoVGV4dCh2YWxpZGF0aW9uLmRhdGEuZGVzY3JpcHRpb24pIDogbnVsbCxcbiAgICB9O1xuXG5cbiAgICBjb25zdCBkYkRhdGEgPSB0b1NuYWtlQ2FzZShzYW5pdGl6ZWQpO1xuICAgIGNvbnN0IHsgZGF0YTogcmVzdWx0LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdhY2NvbW1vZGF0aW9ucycpXG4gICAgICAuaW5zZXJ0KGRiRGF0YSlcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHsgY29kZTogJ0RBVEFCQVNFX0VSUk9SJywgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwgZGV0YWlsczogZXJyb3IgfSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogdG9DYW1lbENhc2UocmVzdWx0KSBhcyBBY2NvbW1vZGF0aW9uIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogJ1VOS05PV05fRVJST1InLFxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIFJldHJpZXZlcyBhIHNpbmdsZSBhY2NvbW1vZGF0aW9uIGJ5IElELlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWNjb21tb2RhdGlvbihpZDogc3RyaW5nKTogUHJvbWlzZTxSZXN1bHQ8QWNjb21tb2RhdGlvbj4+IHtcbiAgdHJ5IHtcblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnYWNjb21tb2RhdGlvbnMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2lkJywgaWQpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci5jb2RlID09PSAnUEdSU1QxMTYnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHsgY29kZTogJ05PVF9GT1VORCcsIG1lc3NhZ2U6ICdBY2NvbW1vZGF0aW9uIG5vdCBmb3VuZCcgfSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogeyBjb2RlOiAnREFUQUJBU0VfRVJST1InLCBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLCBkZXRhaWxzOiBlcnJvciB9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB0b0NhbWVsQ2FzZShkYXRhKSBhcyBBY2NvbW1vZGF0aW9uIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogJ1VOS05PV05fRVJST1InLFxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIFVwZGF0ZXMgYW4gZXhpc3RpbmcgYWNjb21tb2RhdGlvbi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUFjY29tbW9kYXRpb24oaWQ6IHN0cmluZywgZGF0YTogVXBkYXRlQWNjb21tb2RhdGlvbkRUTyk6IFByb21pc2U8UmVzdWx0PEFjY29tbW9kYXRpb24+PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IHVwZGF0ZUFjY29tbW9kYXRpb25TY2hlbWEuc2FmZVBhcnNlKGRhdGEpO1xuICAgIGlmICghdmFsaWRhdGlvbi5zdWNjZXNzKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnVkFMSURBVElPTl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ1ZhbGlkYXRpb24gZmFpbGVkJyxcbiAgICAgICAgICBkZXRhaWxzOiB2YWxpZGF0aW9uLmVycm9yLmlzc3VlcyxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3Qgc2FuaXRpemVkOiBhbnkgPSB7IC4uLnZhbGlkYXRpb24uZGF0YSB9O1xuICAgIGlmIChzYW5pdGl6ZWQubmFtZSkge1xuICAgICAgc2FuaXRpemVkLm5hbWUgPSBzYW5pdGl6ZUlucHV0KHNhbml0aXplZC5uYW1lKTtcbiAgICB9XG4gICAgaWYgKHNhbml0aXplZC5hZGRyZXNzKSB7XG4gICAgICBzYW5pdGl6ZWQuYWRkcmVzcyA9IHNhbml0aXplSW5wdXQoc2FuaXRpemVkLmFkZHJlc3MpO1xuICAgIH1cbiAgICBpZiAoc2FuaXRpemVkLmRlc2NyaXB0aW9uKSB7XG4gICAgICBzYW5pdGl6ZWQuZGVzY3JpcHRpb24gPSBzYW5pdGl6ZVJpY2hUZXh0KHNhbml0aXplZC5kZXNjcmlwdGlvbik7XG4gICAgfVxuXG5cbiAgICBjb25zdCBkYkRhdGEgPSB0b1NuYWtlQ2FzZShzYW5pdGl6ZWQpO1xuICAgIGNvbnN0IHsgZGF0YTogcmVzdWx0LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdhY2NvbW1vZGF0aW9ucycpXG4gICAgICAudXBkYXRlKGRiRGF0YSlcbiAgICAgIC5lcSgnaWQnLCBpZClcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ1BHUlNUMTE2Jykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiB7IGNvZGU6ICdOT1RfRk9VTkQnLCBtZXNzYWdlOiAnQWNjb21tb2RhdGlvbiBub3QgZm91bmQnIH0sXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHsgY29kZTogJ0RBVEFCQVNFX0VSUk9SJywgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwgZGV0YWlsczogZXJyb3IgfSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogdG9DYW1lbENhc2UocmVzdWx0KSBhcyBBY2NvbW1vZGF0aW9uIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogJ1VOS05PV05fRVJST1InLFxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIERlbGV0ZXMgYW4gYWNjb21tb2RhdGlvbiBieSBJRC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFjY29tbW9kYXRpb24oaWQ6IHN0cmluZyk6IFByb21pc2U8UmVzdWx0PHZvaWQ+PiB7XG4gIHRyeSB7XG5cbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdhY2NvbW1vZGF0aW9ucycpLmRlbGV0ZSgpLmVxKCdpZCcsIGlkKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7IGNvZGU6ICdEQVRBQkFTRV9FUlJPUicsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsIGRldGFpbHM6IGVycm9yIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHVuZGVmaW5lZCB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6ICdVTktOT1dOX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBMaXN0cyBhY2NvbW1vZGF0aW9ucyB3aXRoIG9wdGlvbmFsIGZpbHRlcmluZyBhbmQgcGFnaW5hdGlvbi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxpc3RBY2NvbW1vZGF0aW9ucyhmaWx0ZXJzOiBQYXJ0aWFsPEFjY29tbW9kYXRpb25GaWx0ZXJEVE8+ID0geyBwYWdlOiAxLCBwYWdlU2l6ZTogNTAgfSk6IFByb21pc2U8UmVzdWx0PFBhZ2luYXRlZEFjY29tbW9kYXRpb25zPj4ge1xuICB0cnkge1xuICAgIGNvbnN0IGZpbHRlcnNXaXRoRGVmYXVsdHMgPSB7IHBhZ2U6IDEsIHBhZ2VTaXplOiA1MCwgLi4uZmlsdGVycyB9O1xuICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhY2NvbW1vZGF0aW9uRmlsdGVyU2NoZW1hLnNhZmVQYXJzZShmaWx0ZXJzV2l0aERlZmF1bHRzKTtcbiAgICBpZiAoIXZhbGlkYXRpb24uc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ1ZBTElEQVRJT05fRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdWYWxpZGF0aW9uIGZhaWxlZCcsXG4gICAgICAgICAgZGV0YWlsczogdmFsaWRhdGlvbi5lcnJvci5pc3N1ZXMsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IHsgcGFnZSA9IDEsIHBhZ2VTaXplID0gNTAsIC4uLmZpbHRlclBhcmFtcyB9ID0gdmFsaWRhdGlvbi5kYXRhO1xuICAgIGNvbnN0IGZyb20gPSAocGFnZSAtIDEpICogcGFnZVNpemU7XG4gICAgY29uc3QgdG8gPSBmcm9tICsgcGFnZVNpemUgLSAxO1xuXG5cbiAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZS5mcm9tKCdhY2NvbW1vZGF0aW9ucycpLnNlbGVjdCgnKicsIHsgY291bnQ6ICdleGFjdCcgfSk7XG5cbiAgICBpZiAoZmlsdGVyUGFyYW1zLmxvY2F0aW9uSWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKGZpbHRlclBhcmFtcy5sb2NhdGlvbklkID09PSBudWxsKSB7XG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuaXMoJ2xvY2F0aW9uX2lkJywgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdsb2NhdGlvbl9pZCcsIGZpbHRlclBhcmFtcy5sb2NhdGlvbklkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZpbHRlclBhcmFtcy5zdGF0dXMpIHtcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ3N0YXR1cycsIGZpbHRlclBhcmFtcy5zdGF0dXMpO1xuICAgIH1cblxuICAgIHF1ZXJ5ID0gcXVlcnkub3JkZXIoJ25hbWUnLCB7IGFzY2VuZGluZzogdHJ1ZSB9KS5yYW5nZShmcm9tLCB0byk7XG5cbiAgICBjb25zdCB7IGRhdGEsIGVycm9yLCBjb3VudCB9ID0gYXdhaXQgcXVlcnk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogeyBjb2RlOiAnREFUQUJBU0VfRVJST1InLCBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLCBkZXRhaWxzOiBlcnJvciB9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBhY2NvbW1vZGF0aW9ucyA9IGRhdGEubWFwKChhY2NvbW1vZGF0aW9uKSA9PiB0b0NhbWVsQ2FzZShhY2NvbW1vZGF0aW9uKSBhcyBBY2NvbW1vZGF0aW9uKTtcbiAgICBjb25zdCB0b3RhbCA9IGNvdW50IHx8IDA7XG4gICAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbCh0b3RhbCAvIHBhZ2VTaXplKTtcblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YToge1xuICAgICAgICBhY2NvbW1vZGF0aW9ucyxcbiAgICAgICAgdG90YWwsXG4gICAgICAgIHBhZ2UsXG4gICAgICAgIHBhZ2VTaXplLFxuICAgICAgICB0b3RhbFBhZ2VzLFxuICAgICAgfSxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6ICdVTktOT1dOX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBTZWFyY2hlcyBhY2NvbW1vZGF0aW9ucyBieSBuYW1lLCBhZGRyZXNzLCBvciBkZXNjcmlwdGlvbi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaEFjY29tbW9kYXRpb25zKHNlYXJjaFBhcmFtczogQWNjb21tb2RhdGlvblNlYXJjaERUTyk6IFByb21pc2U8UmVzdWx0PFBhZ2luYXRlZEFjY29tbW9kYXRpb25zPj4ge1xuICB0cnkge1xuICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhY2NvbW1vZGF0aW9uU2VhcmNoU2NoZW1hLnNhZmVQYXJzZShzZWFyY2hQYXJhbXMpO1xuICAgIGlmICghdmFsaWRhdGlvbi5zdWNjZXNzKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnVkFMSURBVElPTl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ1ZhbGlkYXRpb24gZmFpbGVkJyxcbiAgICAgICAgICBkZXRhaWxzOiB2YWxpZGF0aW9uLmVycm9yLmlzc3VlcyxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgeyBxdWVyeSwgcGFnZSA9IDEsIHBhZ2VTaXplID0gNTAgfSA9IHZhbGlkYXRpb24uZGF0YTtcbiAgICBjb25zdCBmcm9tID0gKHBhZ2UgLSAxKSAqIHBhZ2VTaXplO1xuICAgIGNvbnN0IHRvID0gZnJvbSArIHBhZ2VTaXplIC0gMTtcblxuICAgIGNvbnN0IHNhbml0aXplZFF1ZXJ5ID0gc2FuaXRpemVJbnB1dChxdWVyeSk7XG5cblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IsIGNvdW50IH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2FjY29tbW9kYXRpb25zJylcbiAgICAgIC5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnIH0pXG4gICAgICAub3IoYG5hbWUuaWxpa2UuJSR7c2FuaXRpemVkUXVlcnl9JSxhZGRyZXNzLmlsaWtlLiUke3Nhbml0aXplZFF1ZXJ5fSUsZGVzY3JpcHRpb24uaWxpa2UuJSR7c2FuaXRpemVkUXVlcnl9JWApXG4gICAgICAub3JkZXIoJ25hbWUnLCB7IGFzY2VuZGluZzogdHJ1ZSB9KVxuICAgICAgLnJhbmdlKGZyb20sIHRvKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7IGNvZGU6ICdEQVRBQkFTRV9FUlJPUicsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsIGRldGFpbHM6IGVycm9yIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IGFjY29tbW9kYXRpb25zID0gZGF0YS5tYXAoKGFjY29tbW9kYXRpb24pID0+IHRvQ2FtZWxDYXNlKGFjY29tbW9kYXRpb24pIGFzIEFjY29tbW9kYXRpb24pO1xuICAgIGNvbnN0IHRvdGFsID0gY291bnQgfHwgMDtcbiAgICBjb25zdCB0b3RhbFBhZ2VzID0gTWF0aC5jZWlsKHRvdGFsIC8gcGFnZVNpemUpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGFjY29tbW9kYXRpb25zLFxuICAgICAgICB0b3RhbCxcbiAgICAgICAgcGFnZSxcbiAgICAgICAgcGFnZVNpemUsXG4gICAgICAgIHRvdGFsUGFnZXMsXG4gICAgICB9LFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogJ1VOS05PV05fRVJST1InLFxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBST09NIFRZUEUgQ1JVRCBPUEVSQVRJT05TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyByb29tIHR5cGUgZm9yIGFuIGFjY29tbW9kYXRpb24uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVSb29tVHlwZShkYXRhOiBDcmVhdGVSb29tVHlwZURUTyk6IFByb21pc2U8UmVzdWx0PFJvb21UeXBlPj4ge1xuICB0cnkge1xuICAgIGNvbnN0IHZhbGlkYXRpb24gPSBjcmVhdGVSb29tVHlwZVNjaGVtYS5zYWZlUGFyc2UoZGF0YSk7XG4gICAgaWYgKCF2YWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnVmFsaWRhdGlvbiBmYWlsZWQnLFxuICAgICAgICAgIGRldGFpbHM6IHZhbGlkYXRpb24uZXJyb3IuaXNzdWVzLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBzYW5pdGl6ZWQgPSB7XG4gICAgICAuLi52YWxpZGF0aW9uLmRhdGEsXG4gICAgICBuYW1lOiBzYW5pdGl6ZUlucHV0KHZhbGlkYXRpb24uZGF0YS5uYW1lKSxcbiAgICAgIGRlc2NyaXB0aW9uOiB2YWxpZGF0aW9uLmRhdGEuZGVzY3JpcHRpb24gPyBzYW5pdGl6ZVJpY2hUZXh0KHZhbGlkYXRpb24uZGF0YS5kZXNjcmlwdGlvbikgOiBudWxsLFxuICAgIH07XG5cblxuICAgIGNvbnN0IGRiRGF0YSA9IHRvU25ha2VDYXNlKHNhbml0aXplZCk7XG4gICAgY29uc3QgeyBkYXRhOiByZXN1bHQsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3Jvb21fdHlwZXMnKVxuICAgICAgLmluc2VydChkYkRhdGEpXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7IGNvZGU6ICdEQVRBQkFTRV9FUlJPUicsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsIGRldGFpbHM6IGVycm9yIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHRvQ2FtZWxDYXNlKHJlc3VsdCkgYXMgUm9vbVR5cGUgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiAnVU5LTk9XTl9FUlJPUicsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogUmV0cmlldmVzIGEgc2luZ2xlIHJvb20gdHlwZSBieSBJRC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJvb21UeXBlKGlkOiBzdHJpbmcpOiBQcm9taXNlPFJlc3VsdDxSb29tVHlwZT4+IHtcbiAgdHJ5IHtcblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncm9vbV90eXBlcycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnaWQnLCBpZClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yLmNvZGUgPT09ICdQR1JTVDExNicpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogeyBjb2RlOiAnTk9UX0ZPVU5EJywgbWVzc2FnZTogJ1Jvb20gdHlwZSBub3QgZm91bmQnIH0sXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHsgY29kZTogJ0RBVEFCQVNFX0VSUk9SJywgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwgZGV0YWlsczogZXJyb3IgfSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogdG9DYW1lbENhc2UoZGF0YSkgYXMgUm9vbVR5cGUgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiAnVU5LTk9XTl9FUlJPUicsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogVXBkYXRlcyBhbiBleGlzdGluZyByb29tIHR5cGUuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVSb29tVHlwZShpZDogc3RyaW5nLCBkYXRhOiBVcGRhdGVSb29tVHlwZURUTyk6IFByb21pc2U8UmVzdWx0PFJvb21UeXBlPj4ge1xuICB0cnkge1xuICAgIGNvbnN0IHZhbGlkYXRpb24gPSB1cGRhdGVSb29tVHlwZVNjaGVtYS5zYWZlUGFyc2UoZGF0YSk7XG4gICAgaWYgKCF2YWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnVmFsaWRhdGlvbiBmYWlsZWQnLFxuICAgICAgICAgIGRldGFpbHM6IHZhbGlkYXRpb24uZXJyb3IuaXNzdWVzLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBzYW5pdGl6ZWQ6IGFueSA9IHsgLi4udmFsaWRhdGlvbi5kYXRhIH07XG4gICAgaWYgKHNhbml0aXplZC5uYW1lKSB7XG4gICAgICBzYW5pdGl6ZWQubmFtZSA9IHNhbml0aXplSW5wdXQoc2FuaXRpemVkLm5hbWUpO1xuICAgIH1cbiAgICBpZiAoc2FuaXRpemVkLmRlc2NyaXB0aW9uKSB7XG4gICAgICBzYW5pdGl6ZWQuZGVzY3JpcHRpb24gPSBzYW5pdGl6ZVJpY2hUZXh0KHNhbml0aXplZC5kZXNjcmlwdGlvbik7XG4gICAgfVxuXG5cbiAgICBjb25zdCBkYkRhdGEgPSB0b1NuYWtlQ2FzZShzYW5pdGl6ZWQpO1xuICAgIGNvbnN0IHsgZGF0YTogcmVzdWx0LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdyb29tX3R5cGVzJylcbiAgICAgIC51cGRhdGUoZGJEYXRhKVxuICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci5jb2RlID09PSAnUEdSU1QxMTYnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHsgY29kZTogJ05PVF9GT1VORCcsIG1lc3NhZ2U6ICdSb29tIHR5cGUgbm90IGZvdW5kJyB9LFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7IGNvZGU6ICdEQVRBQkFTRV9FUlJPUicsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsIGRldGFpbHM6IGVycm9yIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHRvQ2FtZWxDYXNlKHJlc3VsdCkgYXMgUm9vbVR5cGUgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiAnVU5LTk9XTl9FUlJPUicsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogRGVsZXRlcyBhIHJvb20gdHlwZSBieSBJRC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVJvb21UeXBlKGlkOiBzdHJpbmcpOiBQcm9taXNlPFJlc3VsdDx2b2lkPj4ge1xuICB0cnkge1xuXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgncm9vbV90eXBlcycpLmRlbGV0ZSgpLmVxKCdpZCcsIGlkKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7IGNvZGU6ICdEQVRBQkFTRV9FUlJPUicsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsIGRldGFpbHM6IGVycm9yIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHVuZGVmaW5lZCB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6ICdVTktOT1dOX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBMaXN0cyByb29tIHR5cGVzIGZvciBhIHNwZWNpZmljIGFjY29tbW9kYXRpb24uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsaXN0Um9vbVR5cGVzKGFjY29tbW9kYXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTxSZXN1bHQ8Um9vbVR5cGVbXT4+IHtcbiAgdHJ5IHtcblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncm9vbV90eXBlcycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnYWNjb21tb2RhdGlvbl9pZCcsIGFjY29tbW9kYXRpb25JZClcbiAgICAgIC5vcmRlcignbmFtZScsIHsgYXNjZW5kaW5nOiB0cnVlIH0pO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHsgY29kZTogJ0RBVEFCQVNFX0VSUk9SJywgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwgZGV0YWlsczogZXJyb3IgfSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3Qgcm9vbVR5cGVzID0gZGF0YS5tYXAoKHJvb21UeXBlKSA9PiB0b0NhbWVsQ2FzZShyb29tVHlwZSkgYXMgUm9vbVR5cGUpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJvb21UeXBlcyB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6ICdVTktOT1dOX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBHZXRzIGFuIGFjY29tbW9kYXRpb24gd2l0aCBhbGwgaXRzIHJvb20gdHlwZXMuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBY2NvbW1vZGF0aW9uV2l0aFJvb21UeXBlcyhpZDogc3RyaW5nKTogUHJvbWlzZTxSZXN1bHQ8QWNjb21tb2RhdGlvbldpdGhSb29tVHlwZXM+PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgYWNjb21tb2RhdGlvblJlc3VsdCA9IGF3YWl0IGdldEFjY29tbW9kYXRpb24oaWQpO1xuICAgIGlmICghYWNjb21tb2RhdGlvblJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICByZXR1cm4gYWNjb21tb2RhdGlvblJlc3VsdCBhcyBSZXN1bHQ8QWNjb21tb2RhdGlvbldpdGhSb29tVHlwZXM+O1xuICAgIH1cblxuICAgIGNvbnN0IHJvb21UeXBlc1Jlc3VsdCA9IGF3YWl0IGxpc3RSb29tVHlwZXMoaWQpO1xuICAgIGlmICghcm9vbVR5cGVzUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIHJldHVybiByb29tVHlwZXNSZXN1bHQgYXMgUmVzdWx0PEFjY29tbW9kYXRpb25XaXRoUm9vbVR5cGVzPjtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgLi4uYWNjb21tb2RhdGlvblJlc3VsdC5kYXRhLFxuICAgICAgICByb29tVHlwZXM6IHJvb21UeXBlc1Jlc3VsdC5kYXRhLFxuICAgICAgfSxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6ICdVTktOT1dOX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUk9PTSBBU1NJR05NRU5UIE9QRVJBVElPTlNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHJvb20gYXNzaWdubWVudCBmb3IgYSBndWVzdC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVJvb21Bc3NpZ25tZW50KGRhdGE6IENyZWF0ZVJvb21Bc3NpZ25tZW50RFRPKTogUHJvbWlzZTxSZXN1bHQ8Um9vbUFzc2lnbm1lbnQ+PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IGNyZWF0ZVJvb21Bc3NpZ25tZW50U2NoZW1hLnNhZmVQYXJzZShkYXRhKTtcbiAgICBpZiAoIXZhbGlkYXRpb24uc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ1ZBTElEQVRJT05fRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdWYWxpZGF0aW9uIGZhaWxlZCcsXG4gICAgICAgICAgZGV0YWlsczogdmFsaWRhdGlvbi5lcnJvci5pc3N1ZXMsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IHNhbml0aXplZCA9IHtcbiAgICAgIC4uLnZhbGlkYXRpb24uZGF0YSxcbiAgICAgIG5vdGVzOiB2YWxpZGF0aW9uLmRhdGEubm90ZXMgPyBzYW5pdGl6ZUlucHV0KHZhbGlkYXRpb24uZGF0YS5ub3RlcykgOiBudWxsLFxuICAgIH07XG5cblxuICAgIGNvbnN0IGRiRGF0YSA9IHRvU25ha2VDYXNlKHNhbml0aXplZCk7XG4gICAgY29uc3QgeyBkYXRhOiByZXN1bHQsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3Jvb21fYXNzaWdubWVudHMnKVxuICAgICAgLmluc2VydChkYkRhdGEpXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yLmNvZGUgPT09ICcyMzUwNScpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgY29kZTogJ0NPTkZMSUNUJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdHdWVzdCBhbHJlYWR5IGhhcyBhIHJvb20gYXNzaWdubWVudCBmb3IgdGhlc2UgZGF0ZXMnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHsgY29kZTogJ0RBVEFCQVNFX0VSUk9SJywgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwgZGV0YWlsczogZXJyb3IgfSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogdG9DYW1lbENhc2UocmVzdWx0KSBhcyBSb29tQXNzaWdubWVudCB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6ICdVTktOT1dOX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBSZXRyaWV2ZXMgYSBzaW5nbGUgcm9vbSBhc3NpZ25tZW50IGJ5IElELlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Um9vbUFzc2lnbm1lbnQoaWQ6IHN0cmluZyk6IFByb21pc2U8UmVzdWx0PFJvb21Bc3NpZ25tZW50Pj4ge1xuICB0cnkge1xuXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdyb29tX2Fzc2lnbm1lbnRzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ1BHUlNUMTE2Jykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiB7IGNvZGU6ICdOT1RfRk9VTkQnLCBtZXNzYWdlOiAnUm9vbSBhc3NpZ25tZW50IG5vdCBmb3VuZCcgfSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogeyBjb2RlOiAnREFUQUJBU0VfRVJST1InLCBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLCBkZXRhaWxzOiBlcnJvciB9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB0b0NhbWVsQ2FzZShkYXRhKSBhcyBSb29tQXNzaWdubWVudCB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6ICdVTktOT1dOX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBVcGRhdGVzIGFuIGV4aXN0aW5nIHJvb20gYXNzaWdubWVudC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVJvb21Bc3NpZ25tZW50KGlkOiBzdHJpbmcsIGRhdGE6IFVwZGF0ZVJvb21Bc3NpZ25tZW50RFRPKTogUHJvbWlzZTxSZXN1bHQ8Um9vbUFzc2lnbm1lbnQ+PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IHVwZGF0ZVJvb21Bc3NpZ25tZW50U2NoZW1hLnNhZmVQYXJzZShkYXRhKTtcbiAgICBpZiAoIXZhbGlkYXRpb24uc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ1ZBTElEQVRJT05fRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdWYWxpZGF0aW9uIGZhaWxlZCcsXG4gICAgICAgICAgZGV0YWlsczogdmFsaWRhdGlvbi5lcnJvci5pc3N1ZXMsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IHNhbml0aXplZDogYW55ID0geyAuLi52YWxpZGF0aW9uLmRhdGEgfTtcbiAgICBpZiAoc2FuaXRpemVkLm5vdGVzKSB7XG4gICAgICBzYW5pdGl6ZWQubm90ZXMgPSBzYW5pdGl6ZUlucHV0KHNhbml0aXplZC5ub3Rlcyk7XG4gICAgfVxuXG5cbiAgICBjb25zdCBkYkRhdGEgPSB0b1NuYWtlQ2FzZShzYW5pdGl6ZWQpO1xuICAgIGNvbnN0IHsgZGF0YTogcmVzdWx0LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdyb29tX2Fzc2lnbm1lbnRzJylcbiAgICAgIC51cGRhdGUoZGJEYXRhKVxuICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci5jb2RlID09PSAnUEdSU1QxMTYnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHsgY29kZTogJ05PVF9GT1VORCcsIG1lc3NhZ2U6ICdSb29tIGFzc2lnbm1lbnQgbm90IGZvdW5kJyB9LFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7IGNvZGU6ICdEQVRBQkFTRV9FUlJPUicsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsIGRldGFpbHM6IGVycm9yIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHRvQ2FtZWxDYXNlKHJlc3VsdCkgYXMgUm9vbUFzc2lnbm1lbnQgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiAnVU5LTk9XTl9FUlJPUicsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogRGVsZXRlcyBhIHJvb20gYXNzaWdubWVudCBieSBJRC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVJvb21Bc3NpZ25tZW50KGlkOiBzdHJpbmcpOiBQcm9taXNlPFJlc3VsdDx2b2lkPj4ge1xuICB0cnkge1xuXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgncm9vbV9hc3NpZ25tZW50cycpLmRlbGV0ZSgpLmVxKCdpZCcsIGlkKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7IGNvZGU6ICdEQVRBQkFTRV9FUlJPUicsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsIGRldGFpbHM6IGVycm9yIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHVuZGVmaW5lZCB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6ICdVTktOT1dOX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBMaXN0cyByb29tIGFzc2lnbm1lbnRzIGZvciBhIHNwZWNpZmljIGd1ZXN0LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlzdEd1ZXN0Um9vbUFzc2lnbm1lbnRzKGd1ZXN0SWQ6IHN0cmluZyk6IFByb21pc2U8UmVzdWx0PFJvb21Bc3NpZ25tZW50W10+PiB7XG4gIHRyeSB7XG5cbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3Jvb21fYXNzaWdubWVudHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2d1ZXN0X2lkJywgZ3Vlc3RJZClcbiAgICAgIC5vcmRlcignY2hlY2tfaW4nLCB7IGFzY2VuZGluZzogdHJ1ZSB9KTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7IGNvZGU6ICdEQVRBQkFTRV9FUlJPUicsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsIGRldGFpbHM6IGVycm9yIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IGFzc2lnbm1lbnRzID0gZGF0YS5tYXAoKGFzc2lnbm1lbnQpID0+IHRvQ2FtZWxDYXNlKGFzc2lnbm1lbnQpIGFzIFJvb21Bc3NpZ25tZW50KTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBhc3NpZ25tZW50cyB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6ICdVTktOT1dOX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBMaXN0cyByb29tIGFzc2lnbm1lbnRzIGZvciBhIHNwZWNpZmljIHJvb20gdHlwZS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxpc3RSb29tVHlwZUFzc2lnbm1lbnRzKHJvb21UeXBlSWQ6IHN0cmluZyk6IFByb21pc2U8UmVzdWx0PFJvb21Bc3NpZ25tZW50W10+PiB7XG4gIHRyeSB7XG5cbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3Jvb21fYXNzaWdubWVudHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ3Jvb21fdHlwZV9pZCcsIHJvb21UeXBlSWQpXG4gICAgICAub3JkZXIoJ2NoZWNrX2luJywgeyBhc2NlbmRpbmc6IHRydWUgfSk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogeyBjb2RlOiAnREFUQUJBU0VfRVJST1InLCBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLCBkZXRhaWxzOiBlcnJvciB9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBhc3NpZ25tZW50cyA9IGRhdGEubWFwKChhc3NpZ25tZW50KSA9PiB0b0NhbWVsQ2FzZShhc3NpZ25tZW50KSBhcyBSb29tQXNzaWdubWVudCk7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogYXNzaWdubWVudHMgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiAnVU5LTk9XTl9FUlJPUicsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENPU1QgQ0FMQ1VMQVRJT04gT1BFUkFUSU9OU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGNvc3QgZm9yIGEgcm9vbSBhc3NpZ25tZW50IGluY2x1ZGluZyBzdWJzaWRpZXMuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjYWxjdWxhdGVSb29tQ29zdChwYXJhbXM6IENhbGN1bGF0ZUNvc3REVE8pOiBQcm9taXNlPFJlc3VsdDxSb29tQ29zdD4+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB2YWxpZGF0aW9uID0gY2FsY3VsYXRlQ29zdFNjaGVtYS5zYWZlUGFyc2UocGFyYW1zKTtcbiAgICBpZiAoIXZhbGlkYXRpb24uc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ1ZBTElEQVRJT05fRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdWYWxpZGF0aW9uIGZhaWxlZCcsXG4gICAgICAgICAgZGV0YWlsczogdmFsaWRhdGlvbi5lcnJvci5pc3N1ZXMsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IHsgcm9vbVR5cGVJZCwgY2hlY2tJbiwgY2hlY2tPdXQgfSA9IHZhbGlkYXRpb24uZGF0YTtcblxuICAgIC8vIEdldCByb29tIHR5cGUgZGV0YWlsc1xuICAgIGNvbnN0IHJvb21UeXBlUmVzdWx0ID0gYXdhaXQgZ2V0Um9vbVR5cGUocm9vbVR5cGVJZCk7XG4gICAgaWYgKCFyb29tVHlwZVJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICByZXR1cm4gcm9vbVR5cGVSZXN1bHQgYXMgUmVzdWx0PFJvb21Db3N0PjtcbiAgICB9XG5cbiAgICBjb25zdCByb29tVHlwZSA9IHJvb21UeXBlUmVzdWx0LmRhdGE7XG5cbiAgICAvLyBDYWxjdWxhdGUgbnVtYmVyIG9mIG5pZ2h0c1xuICAgIGNvbnN0IGNoZWNrSW5EYXRlID0gbmV3IERhdGUoY2hlY2tJbik7XG4gICAgY29uc3QgY2hlY2tPdXREYXRlID0gbmV3IERhdGUoY2hlY2tPdXQpO1xuICAgIGNvbnN0IG51bWJlck9mTmlnaHRzID0gTWF0aC5jZWlsKChjaGVja091dERhdGUuZ2V0VGltZSgpIC0gY2hlY2tJbkRhdGUuZ2V0VGltZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XG5cbiAgICAvLyBDYWxjdWxhdGUgY29zdHNcbiAgICBjb25zdCBwcmljZVBlck5pZ2h0ID0gcm9vbVR5cGUucHJpY2VQZXJOaWdodDtcbiAgICBjb25zdCBzdWJzaWR5UGVyTmlnaHQgPSByb29tVHlwZS5ob3N0U3Vic2lkeVBlck5pZ2h0IHx8IDA7XG4gICAgY29uc3QgdG90YWxDb3N0ID0gcHJpY2VQZXJOaWdodCAqIG51bWJlck9mTmlnaHRzO1xuICAgIGNvbnN0IHRvdGFsU3Vic2lkeSA9IHN1YnNpZHlQZXJOaWdodCAqIG51bWJlck9mTmlnaHRzO1xuICAgIGNvbnN0IGd1ZXN0Q29zdCA9IHRvdGFsQ29zdCAtIHRvdGFsU3Vic2lkeTtcblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YToge1xuICAgICAgICB0b3RhbENvc3QsXG4gICAgICAgIHRvdGFsU3Vic2lkeSxcbiAgICAgICAgZ3Vlc3RDb3N0LFxuICAgICAgICBudW1iZXJPZk5pZ2h0cyxcbiAgICAgICAgcHJpY2VQZXJOaWdodCxcbiAgICAgICAgc3Vic2lkeVBlck5pZ2h0LFxuICAgICAgfSxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6ICdVTktOT1dOX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBHZXRzIHJvb20gdHlwZSB3aXRoIGF2YWlsYWJpbGl0eSBpbmZvcm1hdGlvbi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJvb21UeXBlV2l0aEF2YWlsYWJpbGl0eShcbiAgcm9vbVR5cGVJZDogc3RyaW5nLFxuICBjaGVja0luOiBzdHJpbmcsXG4gIGNoZWNrT3V0OiBzdHJpbmdcbik6IFByb21pc2U8UmVzdWx0PFJvb21UeXBlV2l0aEF2YWlsYWJpbGl0eT4+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByb29tVHlwZVJlc3VsdCA9IGF3YWl0IGdldFJvb21UeXBlKHJvb21UeXBlSWQpO1xuICAgIGlmICghcm9vbVR5cGVSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIHJvb21UeXBlUmVzdWx0IGFzIFJlc3VsdDxSb29tVHlwZVdpdGhBdmFpbGFiaWxpdHk+O1xuICAgIH1cblxuICAgIGNvbnN0IHJvb21UeXBlID0gcm9vbVR5cGVSZXN1bHQuZGF0YTtcblxuXG4gICAgLy8gQ291bnQgb3ZlcmxhcHBpbmcgYXNzaWdubWVudHNcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3Jvb21fYXNzaWdubWVudHMnKVxuICAgICAgLnNlbGVjdCgnaWQnKVxuICAgICAgLmVxKCdyb29tX3R5cGVfaWQnLCByb29tVHlwZUlkKVxuICAgICAgLm9yKGBjaGVja19pbi5sdGUuJHtjaGVja091dH0sY2hlY2tfb3V0Lmd0ZS4ke2NoZWNrSW59YCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogeyBjb2RlOiAnREFUQUJBU0VfRVJST1InLCBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLCBkZXRhaWxzOiBlcnJvciB9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBhc3NpZ25lZFJvb21zID0gZGF0YS5sZW5ndGg7XG4gICAgY29uc3QgYXZhaWxhYmxlUm9vbXMgPSBNYXRoLm1heCgwLCByb29tVHlwZS50b3RhbFJvb21zIC0gYXNzaWduZWRSb29tcyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgLi4ucm9vbVR5cGUsXG4gICAgICAgIGFzc2lnbmVkUm9vbXMsXG4gICAgICAgIGF2YWlsYWJsZVJvb21zLFxuICAgICAgfSxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6ICdVTktOT1dOX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJjYWxjdWxhdGVSb29tQ29zdCIsImNyZWF0ZUFjY29tbW9kYXRpb24iLCJjcmVhdGVSb29tQXNzaWdubWVudCIsImNyZWF0ZVJvb21UeXBlIiwiZGVsZXRlQWNjb21tb2RhdGlvbiIsImRlbGV0ZVJvb21Bc3NpZ25tZW50IiwiZGVsZXRlUm9vbVR5cGUiLCJnZXRBY2NvbW1vZGF0aW9uIiwiZ2V0QWNjb21tb2RhdGlvbldpdGhSb29tVHlwZXMiLCJnZXRSb29tQXNzaWdubWVudCIsImdldFJvb21UeXBlIiwiZ2V0Um9vbVR5cGVXaXRoQXZhaWxhYmlsaXR5IiwibGlzdEFjY29tbW9kYXRpb25zIiwibGlzdEd1ZXN0Um9vbUFzc2lnbm1lbnRzIiwibGlzdFJvb21UeXBlQXNzaWdubWVudHMiLCJsaXN0Um9vbVR5cGVzIiwic2VhcmNoQWNjb21tb2RhdGlvbnMiLCJ1cGRhdGVBY2NvbW1vZGF0aW9uIiwidXBkYXRlUm9vbUFzc2lnbm1lbnQiLCJ1cGRhdGVSb29tVHlwZSIsInN1cGFiYXNlIiwiY3JlYXRlQ2xpZW50IiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJ0b1NuYWtlQ2FzZSIsIm9iaiIsInNuYWtlT2JqIiwia2V5Iiwic25ha2VLZXkiLCJyZXBsYWNlIiwibGV0dGVyIiwidG9Mb3dlckNhc2UiLCJ0b0NhbWVsQ2FzZSIsImNhbWVsT2JqIiwiY2FtZWxLZXkiLCJfIiwidG9VcHBlckNhc2UiLCJkYXRhIiwidmFsaWRhdGlvbiIsImNyZWF0ZUFjY29tbW9kYXRpb25TY2hlbWEiLCJzYWZlUGFyc2UiLCJzdWNjZXNzIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsImRldGFpbHMiLCJpc3N1ZXMiLCJzYW5pdGl6ZWQiLCJuYW1lIiwic2FuaXRpemVJbnB1dCIsImFkZHJlc3MiLCJkZXNjcmlwdGlvbiIsInNhbml0aXplUmljaFRleHQiLCJkYkRhdGEiLCJyZXN1bHQiLCJmcm9tIiwiaW5zZXJ0Iiwic2VsZWN0Iiwic2luZ2xlIiwiRXJyb3IiLCJpZCIsImVxIiwidXBkYXRlQWNjb21tb2RhdGlvblNjaGVtYSIsInVwZGF0ZSIsImRlbGV0ZSIsInVuZGVmaW5lZCIsImZpbHRlcnMiLCJwYWdlIiwicGFnZVNpemUiLCJmaWx0ZXJzV2l0aERlZmF1bHRzIiwiYWNjb21tb2RhdGlvbkZpbHRlclNjaGVtYSIsImZpbHRlclBhcmFtcyIsInRvIiwicXVlcnkiLCJjb3VudCIsImxvY2F0aW9uSWQiLCJpcyIsInN0YXR1cyIsIm9yZGVyIiwiYXNjZW5kaW5nIiwicmFuZ2UiLCJhY2NvbW1vZGF0aW9ucyIsIm1hcCIsImFjY29tbW9kYXRpb24iLCJ0b3RhbCIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsInNlYXJjaFBhcmFtcyIsImFjY29tbW9kYXRpb25TZWFyY2hTY2hlbWEiLCJzYW5pdGl6ZWRRdWVyeSIsIm9yIiwiY3JlYXRlUm9vbVR5cGVTY2hlbWEiLCJ1cGRhdGVSb29tVHlwZVNjaGVtYSIsImFjY29tbW9kYXRpb25JZCIsInJvb21UeXBlcyIsInJvb21UeXBlIiwiYWNjb21tb2RhdGlvblJlc3VsdCIsInJvb21UeXBlc1Jlc3VsdCIsImNyZWF0ZVJvb21Bc3NpZ25tZW50U2NoZW1hIiwibm90ZXMiLCJ1cGRhdGVSb29tQXNzaWdubWVudFNjaGVtYSIsImd1ZXN0SWQiLCJhc3NpZ25tZW50cyIsImFzc2lnbm1lbnQiLCJyb29tVHlwZUlkIiwicGFyYW1zIiwiY2FsY3VsYXRlQ29zdFNjaGVtYSIsImNoZWNrSW4iLCJjaGVja091dCIsInJvb21UeXBlUmVzdWx0IiwiY2hlY2tJbkRhdGUiLCJEYXRlIiwiY2hlY2tPdXREYXRlIiwibnVtYmVyT2ZOaWdodHMiLCJnZXRUaW1lIiwicHJpY2VQZXJOaWdodCIsInN1YnNpZHlQZXJOaWdodCIsImhvc3RTdWJzaWR5UGVyTmlnaHQiLCJ0b3RhbENvc3QiLCJ0b3RhbFN1YnNpZHkiLCJndWVzdENvc3QiLCJhc3NpZ25lZFJvb21zIiwibGVuZ3RoIiwiYXZhaWxhYmxlUm9vbXMiLCJtYXgiLCJ0b3RhbFJvb21zIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztRQTgyQnNCQTtlQUFBQTs7UUFweUJBQztlQUFBQTs7UUE4aUJBQztlQUFBQTs7UUFsUEFDO2VBQUFBOztRQXRLQUM7ZUFBQUE7O1FBK2lCQUM7ZUFBQUE7O1FBdlBBQztlQUFBQTs7UUEzWkFDO2VBQUFBOztRQXNkQUM7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