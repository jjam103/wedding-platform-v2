9ba1899bb6da8f37aeff3d2ab4c05e54
"use strict";

/* istanbul ignore next */
function cov_1xrs2oqi0k() {
  var path = "/Users/jaron/Desktop/wedding-platform-v2/hooks/useSectionsForPage.ts";
  var hash = "2cee09e81bbaab098264a963a07d3f3a5562bab2";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/jaron/Desktop/wedding-platform-v2/hooks/useSectionsForPage.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 5,
          column: 0
        },
        end: {
          line: 10,
          column: 3
        }
      },
      "2": {
        start: {
          line: 8,
          column: 8
        },
        end: {
          line: 8,
          column: 34
        }
      },
      "3": {
        start: {
          line: 11,
          column: 15
        },
        end: {
          line: 11,
          column: 31
        }
      },
      "4": {
        start: {
          line: 13,
          column: 36
        },
        end: {
          line: 13,
          column: 60
        }
      },
      "5": {
        start: {
          line: 14,
          column: 34
        },
        end: {
          line: 14,
          column: 60
        }
      },
      "6": {
        start: {
          line: 15,
          column: 30
        },
        end: {
          line: 15,
          column: 56
        }
      },
      "7": {
        start: {
          line: 16,
          column: 26
        },
        end: {
          line: 43,
          column: 5
        }
      },
      "8": {
        start: {
          line: 17,
          column: 8
        },
        end: {
          line: 20,
          column: 9
        }
      },
      "9": {
        start: {
          line: 18,
          column: 12
        },
        end: {
          line: 18,
          column: 30
        }
      },
      "10": {
        start: {
          line: 19,
          column: 12
        },
        end: {
          line: 19,
          column: 19
        }
      },
      "11": {
        start: {
          line: 21,
          column: 8
        },
        end: {
          line: 42,
          column: 9
        }
      },
      "12": {
        start: {
          line: 22,
          column: 12
        },
        end: {
          line: 22,
          column: 29
        }
      },
      "13": {
        start: {
          line: 23,
          column: 12
        },
        end: {
          line: 23,
          column: 27
        }
      },
      "14": {
        start: {
          line: 24,
          column: 29
        },
        end: {
          line: 24,
          column: 101
        }
      },
      "15": {
        start: {
          line: 25,
          column: 12
        },
        end: {
          line: 27,
          column: 13
        }
      },
      "16": {
        start: {
          line: 26,
          column: 16
        },
        end: {
          line: 26,
          column: 84
        }
      },
      "17": {
        start: {
          line: 28,
          column: 27
        },
        end: {
          line: 28,
          column: 48
        }
      },
      "18": {
        start: {
          line: 29,
          column: 12
        },
        end: {
          line: 35,
          column: 13
        }
      },
      "19": {
        start: {
          line: 31,
          column: 39
        },
        end: {
          line: 31,
          column: 106
        }
      },
      "20": {
        start: {
          line: 31,
          column: 72
        },
        end: {
          line: 31,
          column: 105
        }
      },
      "21": {
        start: {
          line: 32,
          column: 16
        },
        end: {
          line: 32,
          column: 44
        }
      },
      "22": {
        start: {
          line: 34,
          column: 16
        },
        end: {
          line: 34,
          column: 85
        }
      },
      "23": {
        start: {
          line: 37,
          column: 12
        },
        end: {
          line: 37,
          column: 59
        }
      },
      "24": {
        start: {
          line: 38,
          column: 12
        },
        end: {
          line: 38,
          column: 78
        }
      },
      "25": {
        start: {
          line: 39,
          column: 12
        },
        end: {
          line: 39,
          column: 28
        }
      },
      "26": {
        start: {
          line: 41,
          column: 12
        },
        end: {
          line: 41,
          column: 30
        }
      },
      "27": {
        start: {
          line: 44,
          column: 4
        },
        end: {
          line: 49,
          column: 7
        }
      },
      "28": {
        start: {
          line: 45,
          column: 8
        },
        end: {
          line: 45,
          column: 24
        }
      },
      "29": {
        start: {
          line: 50,
          column: 4
        },
        end: {
          line: 55,
          column: 6
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 7,
            column: 9
          },
          end: {
            line: 7,
            column: 10
          }
        },
        loc: {
          start: {
            line: 7,
            column: 20
          },
          end: {
            line: 9,
            column: 5
          }
        },
        line: 7
      },
      "1": {
        name: "useSectionsForPage",
        decl: {
          start: {
            line: 12,
            column: 9
          },
          end: {
            line: 12,
            column: 27
          }
        },
        loc: {
          start: {
            line: 12,
            column: 46
          },
          end: {
            line: 56,
            column: 1
          }
        },
        line: 12
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 16,
            column: 26
          },
          end: {
            line: 16,
            column: 27
          }
        },
        loc: {
          start: {
            line: 16,
            column: 36
          },
          end: {
            line: 43,
            column: 5
          }
        },
        line: 16
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 31,
            column: 64
          },
          end: {
            line: 31,
            column: 65
          }
        },
        loc: {
          start: {
            line: 31,
            column: 72
          },
          end: {
            line: 31,
            column: 105
          }
        },
        line: 31
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 44,
            column: 26
          },
          end: {
            line: 44,
            column: 27
          }
        },
        loc: {
          start: {
            line: 44,
            column: 30
          },
          end: {
            line: 46,
            column: 5
          }
        },
        line: 44
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 17,
            column: 8
          },
          end: {
            line: 20,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 17,
            column: 8
          },
          end: {
            line: 20,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 17
      },
      "1": {
        loc: {
          start: {
            line: 17,
            column: 12
          },
          end: {
            line: 17,
            column: 32
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 17,
            column: 12
          },
          end: {
            line: 17,
            column: 21
          }
        }, {
          start: {
            line: 17,
            column: 25
          },
          end: {
            line: 17,
            column: 32
          }
        }],
        line: 17
      },
      "2": {
        loc: {
          start: {
            line: 25,
            column: 12
          },
          end: {
            line: 27,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 25,
            column: 12
          },
          end: {
            line: 27,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 25
      },
      "3": {
        loc: {
          start: {
            line: 29,
            column: 12
          },
          end: {
            line: 35,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 29,
            column: 12
          },
          end: {
            line: 35,
            column: 13
          }
        }, {
          start: {
            line: 33,
            column: 19
          },
          end: {
            line: 35,
            column: 13
          }
        }],
        line: 29
      },
      "4": {
        loc: {
          start: {
            line: 31,
            column: 40
          },
          end: {
            line: 31,
            column: 57
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 31,
            column: 40
          },
          end: {
            line: 31,
            column: 51
          }
        }, {
          start: {
            line: 31,
            column: 55
          },
          end: {
            line: 31,
            column: 57
          }
        }],
        line: 31
      },
      "5": {
        loc: {
          start: {
            line: 34,
            column: 32
          },
          end: {
            line: 34,
            column: 83
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 34,
            column: 32
          },
          end: {
            line: 34,
            column: 53
          }
        }, {
          start: {
            line: 34,
            column: 57
          },
          end: {
            line: 34,
            column: 83
          }
        }],
        line: 34
      },
      "6": {
        loc: {
          start: {
            line: 38,
            column: 21
          },
          end: {
            line: 38,
            column: 76
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 38,
            column: 44
          },
          end: {
            line: 38,
            column: 47
          }
        }, {
          start: {
            line: 38,
            column: 50
          },
          end: {
            line: 38,
            column: 76
          }
        }],
        line: 38
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["/Users/jaron/Desktop/wedding-platform-v2/hooks/useSectionsForPage.ts"],
      sourcesContent: ["import { useState, useEffect } from 'react';\n\ninterface Column {\n  id: string;\n  section_id: string;\n  column_number: 1 | 2;\n  content_type: 'rich_text' | 'photo_gallery' | 'references';\n  content_data: any;\n  created_at: string;\n  updated_at: string;\n}\n\ninterface Section {\n  id: string;\n  title?: string;\n  page_type: 'activity' | 'event' | 'accommodation' | 'room_type' | 'custom' | 'home';\n  page_id: string;\n  display_order: number;\n  created_at: string;\n  updated_at: string;\n  columns: Column[];\n}\n\ninterface UseSectionsForPageReturn {\n  sections: Section[];\n  loading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n}\n\n/**\n * Hook to fetch sections for a specific page\n * \n * @param pageType - Type of page (activity, event, accommodation, etc.)\n * @param pageId - ID of the page\n * @returns Sections data, loading state, error, and refetch function\n */\nexport function useSectionsForPage(\n  pageType: string,\n  pageId: string\n): UseSectionsForPageReturn {\n  const [sections, setSections] = useState<Section[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n\n  const fetchSections = async () => {\n    if (!pageType || !pageId) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response = await fetch(\n        `/api/admin/sections?pageType=${pageType}&pageId=${pageId}`\n      );\n\n      if (!response.ok) {\n        throw new Error(`Failed to fetch sections: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n\n      if (result.success) {\n        // Sort sections by display_order\n        const sortedSections = (result.data || []).sort(\n          (a: Section, b: Section) => a.display_order - b.display_order\n        );\n        setSections(sortedSections);\n      } else {\n        throw new Error(result.error?.message || 'Failed to fetch sections');\n      }\n    } catch (err) {\n      console.error('Error fetching sections:', err);\n      setError(err instanceof Error ? err : new Error('Unknown error'));\n      setSections([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchSections();\n  }, [pageType, pageId]);\n\n  return {\n    sections,\n    loading,\n    error,\n    refetch: fetchSections,\n  };\n}\n"],
      names: ["useSectionsForPage", "pageType", "pageId", "sections", "setSections", "useState", "loading", "setLoading", "error", "setError", "fetchSections", "response", "fetch", "ok", "Error", "statusText", "result", "json", "success", "sortedSections", "data", "sort", "a", "b", "display_order", "message", "err", "console", "useEffect", "refetch"],
      mappings: ";;;;+BAqCgBA;;;eAAAA;;;uBArCoB;AAqC7B,SAASA,mBACdC,QAAgB,EAChBC,MAAc;IAEd,MAAM,CAACC,UAAUC,YAAY,GAAGC,IAAAA,eAAQ,EAAY,EAAE;IACtD,MAAM,CAACC,SAASC,WAAW,GAAGF,IAAAA,eAAQ,EAAC;IACvC,MAAM,CAACG,OAAOC,SAAS,GAAGJ,IAAAA,eAAQ,EAAe;IAEjD,MAAMK,gBAAgB;QACpB,IAAI,CAACT,YAAY,CAACC,QAAQ;YACxBK,WAAW;YACX;QACF;QAEA,IAAI;YACFA,WAAW;YACXE,SAAS;YAET,MAAME,WAAW,MAAMC,MACrB,CAAC,6BAA6B,EAAEX,SAAS,QAAQ,EAAEC,QAAQ;YAG7D,IAAI,CAACS,SAASE,EAAE,EAAE;gBAChB,MAAM,IAAIC,MAAM,CAAC,0BAA0B,EAAEH,SAASI,UAAU,EAAE;YACpE;YAEA,MAAMC,SAAS,MAAML,SAASM,IAAI;YAElC,IAAID,OAAOE,OAAO,EAAE;gBAClB,iCAAiC;gBACjC,MAAMC,iBAAiB,AAACH,CAAAA,OAAOI,IAAI,IAAI,EAAE,AAAD,EAAGC,IAAI,CAC7C,CAACC,GAAYC,IAAeD,EAAEE,aAAa,GAAGD,EAAEC,aAAa;gBAE/DpB,YAAYe;YACd,OAAO;gBACL,MAAM,IAAIL,MAAME,OAAOR,KAAK,EAAEiB,WAAW;YAC3C;QACF,EAAE,OAAOC,KAAK;YACZC,QAAQnB,KAAK,CAAC,4BAA4BkB;YAC1CjB,SAASiB,eAAeZ,QAAQY,MAAM,IAAIZ,MAAM;YAChDV,YAAY,EAAE;QAChB,SAAU;YACRG,WAAW;QACb;IACF;IAEAqB,IAAAA,gBAAS,EAAC;QACRlB;IACF,GAAG;QAACT;QAAUC;KAAO;IAErB,OAAO;QACLC;QACAG;QACAE;QACAqB,SAASnB;IACX;AACF"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "2cee09e81bbaab098264a963a07d3f3a5562bab2"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1xrs2oqi0k = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1xrs2oqi0k();
cov_1xrs2oqi0k().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_1xrs2oqi0k().s[1]++;
Object.defineProperty(exports, "useSectionsForPage", {
  enumerable: true,
  get: function () {
    /* istanbul ignore next */
    cov_1xrs2oqi0k().f[0]++;
    cov_1xrs2oqi0k().s[2]++;
    return useSectionsForPage;
  }
});
const _react =
/* istanbul ignore next */
(cov_1xrs2oqi0k().s[3]++, require("react"));
function useSectionsForPage(pageType, pageId) {
  /* istanbul ignore next */
  cov_1xrs2oqi0k().f[1]++;
  const [sections, setSections] =
  /* istanbul ignore next */
  (cov_1xrs2oqi0k().s[4]++, (0, _react.useState)([]));
  const [loading, setLoading] =
  /* istanbul ignore next */
  (cov_1xrs2oqi0k().s[5]++, (0, _react.useState)(true));
  const [error, setError] =
  /* istanbul ignore next */
  (cov_1xrs2oqi0k().s[6]++, (0, _react.useState)(null));
  /* istanbul ignore next */
  cov_1xrs2oqi0k().s[7]++;
  const fetchSections = async () => {
    /* istanbul ignore next */
    cov_1xrs2oqi0k().f[2]++;
    cov_1xrs2oqi0k().s[8]++;
    if (
    /* istanbul ignore next */
    (cov_1xrs2oqi0k().b[1][0]++, !pageType) ||
    /* istanbul ignore next */
    (cov_1xrs2oqi0k().b[1][1]++, !pageId)) {
      /* istanbul ignore next */
      cov_1xrs2oqi0k().b[0][0]++;
      cov_1xrs2oqi0k().s[9]++;
      setLoading(false);
      /* istanbul ignore next */
      cov_1xrs2oqi0k().s[10]++;
      return;
    } else
    /* istanbul ignore next */
    {
      cov_1xrs2oqi0k().b[0][1]++;
    }
    cov_1xrs2oqi0k().s[11]++;
    try {
      /* istanbul ignore next */
      cov_1xrs2oqi0k().s[12]++;
      setLoading(true);
      /* istanbul ignore next */
      cov_1xrs2oqi0k().s[13]++;
      setError(null);
      const response =
      /* istanbul ignore next */
      (cov_1xrs2oqi0k().s[14]++, await fetch(`/api/admin/sections?pageType=${pageType}&pageId=${pageId}`));
      /* istanbul ignore next */
      cov_1xrs2oqi0k().s[15]++;
      if (!response.ok) {
        /* istanbul ignore next */
        cov_1xrs2oqi0k().b[2][0]++;
        cov_1xrs2oqi0k().s[16]++;
        throw new Error(`Failed to fetch sections: ${response.statusText}`);
      } else
      /* istanbul ignore next */
      {
        cov_1xrs2oqi0k().b[2][1]++;
      }
      const result =
      /* istanbul ignore next */
      (cov_1xrs2oqi0k().s[17]++, await response.json());
      /* istanbul ignore next */
      cov_1xrs2oqi0k().s[18]++;
      if (result.success) {
        /* istanbul ignore next */
        cov_1xrs2oqi0k().b[3][0]++;
        // Sort sections by display_order
        const sortedSections =
        /* istanbul ignore next */
        (cov_1xrs2oqi0k().s[19]++, (
        /* istanbul ignore next */
        (cov_1xrs2oqi0k().b[4][0]++, result.data) ||
        /* istanbul ignore next */
        (cov_1xrs2oqi0k().b[4][1]++, [])).sort((a, b) => {
          /* istanbul ignore next */
          cov_1xrs2oqi0k().f[3]++;
          cov_1xrs2oqi0k().s[20]++;
          return a.display_order - b.display_order;
        }));
        /* istanbul ignore next */
        cov_1xrs2oqi0k().s[21]++;
        setSections(sortedSections);
      } else {
        /* istanbul ignore next */
        cov_1xrs2oqi0k().b[3][1]++;
        cov_1xrs2oqi0k().s[22]++;
        throw new Error(
        /* istanbul ignore next */
        (cov_1xrs2oqi0k().b[5][0]++, result.error?.message) ||
        /* istanbul ignore next */
        (cov_1xrs2oqi0k().b[5][1]++, 'Failed to fetch sections'));
      }
    } catch (err) {
      /* istanbul ignore next */
      cov_1xrs2oqi0k().s[23]++;
      console.error('Error fetching sections:', err);
      /* istanbul ignore next */
      cov_1xrs2oqi0k().s[24]++;
      setError(err instanceof Error ?
      /* istanbul ignore next */
      (cov_1xrs2oqi0k().b[6][0]++, err) :
      /* istanbul ignore next */
      (cov_1xrs2oqi0k().b[6][1]++, new Error('Unknown error')));
      /* istanbul ignore next */
      cov_1xrs2oqi0k().s[25]++;
      setSections([]);
    } finally {
      /* istanbul ignore next */
      cov_1xrs2oqi0k().s[26]++;
      setLoading(false);
    }
  };
  /* istanbul ignore next */
  cov_1xrs2oqi0k().s[27]++;
  (0, _react.useEffect)(() => {
    /* istanbul ignore next */
    cov_1xrs2oqi0k().f[4]++;
    cov_1xrs2oqi0k().s[28]++;
    fetchSections();
  }, [pageType, pageId]);
  /* istanbul ignore next */
  cov_1xrs2oqi0k().s[29]++;
  return {
    sections,
    loading,
    error,
    refetch: fetchSections
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXhyczJvcWkwayIsImFjdHVhbENvdmVyYWdlIiwicyIsInVzZVNlY3Rpb25zRm9yUGFnZSIsInBhZ2VUeXBlIiwicGFnZUlkIiwiZiIsInNlY3Rpb25zIiwic2V0U2VjdGlvbnMiLCJfcmVhY3QiLCJ1c2VTdGF0ZSIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwiZXJyb3IiLCJzZXRFcnJvciIsImZldGNoU2VjdGlvbnMiLCJiIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiRXJyb3IiLCJzdGF0dXNUZXh0IiwicmVzdWx0IiwianNvbiIsInN1Y2Nlc3MiLCJzb3J0ZWRTZWN0aW9ucyIsImRhdGEiLCJzb3J0IiwiYSIsImRpc3BsYXlfb3JkZXIiLCJtZXNzYWdlIiwiZXJyIiwiY29uc29sZSIsInVzZUVmZmVjdCIsInJlZmV0Y2giXSwic291cmNlcyI6WyIvVXNlcnMvamFyb24vRGVza3RvcC93ZWRkaW5nLXBsYXRmb3JtLXYyL2hvb2tzL3VzZVNlY3Rpb25zRm9yUGFnZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuXG5pbnRlcmZhY2UgQ29sdW1uIHtcbiAgaWQ6IHN0cmluZztcbiAgc2VjdGlvbl9pZDogc3RyaW5nO1xuICBjb2x1bW5fbnVtYmVyOiAxIHwgMjtcbiAgY29udGVudF90eXBlOiAncmljaF90ZXh0JyB8ICdwaG90b19nYWxsZXJ5JyB8ICdyZWZlcmVuY2VzJztcbiAgY29udGVudF9kYXRhOiBhbnk7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgU2VjdGlvbiB7XG4gIGlkOiBzdHJpbmc7XG4gIHRpdGxlPzogc3RyaW5nO1xuICBwYWdlX3R5cGU6ICdhY3Rpdml0eScgfCAnZXZlbnQnIHwgJ2FjY29tbW9kYXRpb24nIHwgJ3Jvb21fdHlwZScgfCAnY3VzdG9tJyB8ICdob21lJztcbiAgcGFnZV9pZDogc3RyaW5nO1xuICBkaXNwbGF5X29yZGVyOiBudW1iZXI7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xuICBjb2x1bW5zOiBDb2x1bW5bXTtcbn1cblxuaW50ZXJmYWNlIFVzZVNlY3Rpb25zRm9yUGFnZVJldHVybiB7XG4gIHNlY3Rpb25zOiBTZWN0aW9uW107XG4gIGxvYWRpbmc6IGJvb2xlYW47XG4gIGVycm9yOiBFcnJvciB8IG51bGw7XG4gIHJlZmV0Y2g6ICgpID0+IFByb21pc2U8dm9pZD47XG59XG5cbi8qKlxuICogSG9vayB0byBmZXRjaCBzZWN0aW9ucyBmb3IgYSBzcGVjaWZpYyBwYWdlXG4gKiBcbiAqIEBwYXJhbSBwYWdlVHlwZSAtIFR5cGUgb2YgcGFnZSAoYWN0aXZpdHksIGV2ZW50LCBhY2NvbW1vZGF0aW9uLCBldGMuKVxuICogQHBhcmFtIHBhZ2VJZCAtIElEIG9mIHRoZSBwYWdlXG4gKiBAcmV0dXJucyBTZWN0aW9ucyBkYXRhLCBsb2FkaW5nIHN0YXRlLCBlcnJvciwgYW5kIHJlZmV0Y2ggZnVuY3Rpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVNlY3Rpb25zRm9yUGFnZShcbiAgcGFnZVR5cGU6IHN0cmluZyxcbiAgcGFnZUlkOiBzdHJpbmdcbik6IFVzZVNlY3Rpb25zRm9yUGFnZVJldHVybiB7XG4gIGNvbnN0IFtzZWN0aW9ucywgc2V0U2VjdGlvbnNdID0gdXNlU3RhdGU8U2VjdGlvbltdPihbXSk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPEVycm9yIHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgZmV0Y2hTZWN0aW9ucyA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXBhZ2VUeXBlIHx8ICFwYWdlSWQpIHtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgc2V0RXJyb3IobnVsbCk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgIGAvYXBpL2FkbWluL3NlY3Rpb25zP3BhZ2VUeXBlPSR7cGFnZVR5cGV9JnBhZ2VJZD0ke3BhZ2VJZH1gXG4gICAgICApO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHNlY3Rpb25zOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIC8vIFNvcnQgc2VjdGlvbnMgYnkgZGlzcGxheV9vcmRlclxuICAgICAgICBjb25zdCBzb3J0ZWRTZWN0aW9ucyA9IChyZXN1bHQuZGF0YSB8fCBbXSkuc29ydChcbiAgICAgICAgICAoYTogU2VjdGlvbiwgYjogU2VjdGlvbikgPT4gYS5kaXNwbGF5X29yZGVyIC0gYi5kaXNwbGF5X29yZGVyXG4gICAgICAgICk7XG4gICAgICAgIHNldFNlY3Rpb25zKHNvcnRlZFNlY3Rpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXN1bHQuZXJyb3I/Lm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBmZXRjaCBzZWN0aW9ucycpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgc2VjdGlvbnM6JywgZXJyKTtcbiAgICAgIHNldEVycm9yKGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyIDogbmV3IEVycm9yKCdVbmtub3duIGVycm9yJykpO1xuICAgICAgc2V0U2VjdGlvbnMoW10pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaFNlY3Rpb25zKCk7XG4gIH0sIFtwYWdlVHlwZSwgcGFnZUlkXSk7XG5cbiAgcmV0dXJuIHtcbiAgICBzZWN0aW9ucyxcbiAgICBsb2FkaW5nLFxuICAgIGVycm9yLFxuICAgIHJlZmV0Y2g6IGZldGNoU2VjdGlvbnMsXG4gIH07XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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