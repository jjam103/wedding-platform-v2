{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/__tests__/helpers/testTags.ts"],"sourcesContent":["/**\n * Test Tagging System\n * \n * Provides utilities for tagging tests with metadata for selective execution.\n * \n * Usage:\n * ```typescript\n * import { describeWithTags, itWithTags } from '@/__tests__/helpers/testTags';\n * \n * describeWithTags('Guest Service', ['unit', 'fast', 'critical'], () => {\n *   itWithTags('should create guest', ['database'], async () => {\n *     // Test implementation\n *   });\n * });\n * ```\n * \n * Run tests by tag:\n * ```bash\n * npm test -- --testNamePattern=\"@tag:unit\"\n * npm test -- --testNamePattern=\"@tag:critical\"\n * npm test -- --testNamePattern=\"@tag:fast\"\n * ```\n */\n\n/**\n * Available test tags\n */\nexport type TestTag =\n  // Speed tags\n  | 'fast'        // <100ms execution\n  | 'medium'      // 100ms-1s execution\n  | 'slow'        // >1s execution\n  \n  // Type tags\n  | 'unit'        // Unit test\n  | 'integration' // Integration test\n  | 'e2e'         // End-to-end test\n  | 'property'    // Property-based test\n  | 'regression'  // Regression test\n  \n  // Priority tags\n  | 'critical'    // Critical path (auth, payments, RLS)\n  | 'important'   // Important but not critical\n  | 'optional'    // Nice to have\n  \n  // Feature tags\n  | 'auth'        // Authentication\n  | 'rls'         // Row Level Security\n  | 'api'         // API routes\n  | 'database'    // Database operations\n  | 'ui'          // UI components\n  | 'email'       // Email functionality\n  | 'photos'      // Photo management\n  | 'rsvp'        // RSVP functionality\n  | 'budget'      // Budget tracking\n  | 'cms'         // Content management\n  \n  // Environment tags\n  | 'requires-db' // Requires database connection\n  | 'requires-auth' // Requires authentication\n  | 'requires-server' // Requires running server\n  | 'requires-browser' // Requires browser (E2E)\n  \n  // Stability tags\n  | 'stable'      // Stable, reliable test\n  | 'flaky'       // Known to be flaky\n  | 'wip'         // Work in progress\n  | 'skip'        // Skip this test\n  ;\n\n/**\n * Test tag metadata\n */\ninterface TestTagMetadata {\n  tags: TestTag[];\n  description?: string;\n  jiraTicket?: string;\n  author?: string;\n}\n\n/**\n * Format tags for test name\n */\nfunction formatTags(tags: TestTag[]): string {\n  return tags.map(tag => `@tag:${tag}`).join(' ');\n}\n\n/**\n * Describe block with tags\n * \n * @example\n * describeWithTags('Guest Service', ['unit', 'fast', 'critical'], () => {\n *   // Tests\n * });\n */\nexport function describeWithTags(\n  name: string,\n  tags: TestTag[],\n  fn: () => void\n): void {\n  const tagString = formatTags(tags);\n  describe(`${name} ${tagString}`, fn);\n}\n\n/**\n * Test case with tags\n * \n * @example\n * itWithTags('should create guest', ['database', 'fast'], async () => {\n *   // Test implementation\n * });\n */\nexport function itWithTags(\n  name: string,\n  tags: TestTag[],\n  fn: () => void | Promise<void>,\n  timeout?: number\n): void {\n  const tagString = formatTags(tags);\n  it(`${name} ${tagString}`, fn, timeout);\n}\n\n/**\n * Skip test with tags\n */\nexport function itSkipWithTags(\n  name: string,\n  tags: TestTag[],\n  fn: () => void | Promise<void>\n): void {\n  const tagString = formatTags(tags);\n  it.skip(`${name} ${tagString}`, fn);\n}\n\n/**\n * Only run this test with tags\n */\nexport function itOnlyWithTags(\n  name: string,\n  tags: TestTag[],\n  fn: () => void | Promise<void>,\n  timeout?: number\n): void {\n  const tagString = formatTags(tags);\n  it.only(`${name} ${tagString}`, fn, timeout);\n}\n\n/**\n * Test metadata decorator\n * \n * @example\n * testMetadata({\n *   tags: ['unit', 'critical'],\n *   description: 'Tests guest creation with RLS',\n *   jiraTicket: 'PROJ-123',\n *   author: 'john@example.com'\n * });\n */\nexport function testMetadata(metadata: TestTagMetadata): void {\n  // Store metadata for reporting\n  // This can be used by custom reporters\n  if (typeof expect !== 'undefined' && (expect as any).getState) {\n    const state = (expect as any).getState();\n    if (state.testPath) {\n      // Store metadata in global registry\n      if (!(global as any).__TEST_METADATA__) {\n        (global as any).__TEST_METADATA__ = new Map();\n      }\n      (global as any).__TEST_METADATA__.set(state.testPath, metadata);\n    }\n  }\n}\n\n/**\n * Helper to run only fast tests\n */\nexport const describeFast = (name: string, fn: () => void) =>\n  describeWithTags(name, ['fast'], fn);\n\n/**\n * Helper to run only slow tests\n */\nexport const describeSlow = (name: string, fn: () => void) =>\n  describeWithTags(name, ['slow'], fn);\n\n/**\n * Helper to run only critical tests\n */\nexport const describeCritical = (name: string, fn: () => void) =>\n  describeWithTags(name, ['critical'], fn);\n\n/**\n * Helper to run only unit tests\n */\nexport const describeUnit = (name: string, fn: () => void) =>\n  describeWithTags(name, ['unit'], fn);\n\n/**\n * Helper to run only integration tests\n */\nexport const describeIntegration = (name: string, fn: () => void) =>\n  describeWithTags(name, ['integration'], fn);\n\n/**\n * Get all tags from test name\n */\nexport function getTagsFromTestName(testName: string): TestTag[] {\n  const tagRegex = /@tag:(\\w+)/g;\n  const tags: TestTag[] = [];\n  let match;\n  \n  while ((match = tagRegex.exec(testName)) !== null) {\n    tags.push(match[1] as TestTag);\n  }\n  \n  return tags;\n}\n\n/**\n * Check if test has specific tag\n */\nexport function hasTag(testName: string, tag: TestTag): boolean {\n  return getTagsFromTestName(testName).includes(tag);\n}\n\n/**\n * Check if test has any of the specified tags\n */\nexport function hasAnyTag(testName: string, tags: TestTag[]): boolean {\n  const testTags = getTagsFromTestName(testName);\n  return tags.some(tag => testTags.includes(tag));\n}\n\n/**\n * Check if test has all of the specified tags\n */\nexport function hasAllTags(testName: string, tags: TestTag[]): boolean {\n  const testTags = getTagsFromTestName(testName);\n  return tags.every(tag => testTags.includes(tag));\n}\n"],"names":["describeCritical","describeFast","describeIntegration","describeSlow","describeUnit","describeWithTags","getTagsFromTestName","hasAllTags","hasAnyTag","hasTag","itOnlyWithTags","itSkipWithTags","itWithTags","testMetadata","formatTags","tags","map","tag","join","name","fn","tagString","describe","timeout","it","skip","only","metadata","expect","getState","state","testPath","global","__TEST_METADATA__","Map","set","testName","tagRegex","match","exec","push","includes","testTags","some","every"],"mappings":"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"}