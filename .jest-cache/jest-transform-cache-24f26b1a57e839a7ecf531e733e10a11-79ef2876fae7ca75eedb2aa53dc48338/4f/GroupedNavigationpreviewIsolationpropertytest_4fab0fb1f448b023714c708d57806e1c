6e913e434c3278911e0c8802ef97322d
"use strict";
/**
 * Feature: admin-ux-enhancements, Property 6: Guest Portal Preview Isolation
 * 
 * **Validates: Requirements 5.2, 5.3**
 * 
 * For any admin user clicking "Preview Guest Portal", the preview should open in a new tab 
 * showing the guest view without affecting the admin session
 */ // Mock Next.js navigation
jest.mock('next/navigation', ()=>({
        usePathname: jest.fn(()=>'/admin')
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _fastcheck = /*#__PURE__*/ _interop_require_wildcard(require("fast-check"));
const _react = require("@testing-library/react");
const _GroupedNavigation = require("./GroupedNavigation");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
describe('Feature: admin-ux-enhancements, Property 6: Guest Portal Preview Isolation', ()=>{
    beforeEach(()=>{
        // Clear localStorage before each test
        localStorage.clear();
        jest.clearAllMocks();
        // Set default expanded groups to ensure Quick Actions is visible
        localStorage.setItem('admin_nav_expanded_groups', JSON.stringify([
            'quick-actions'
        ]));
    });
    it('should always render Preview Guest Portal link with target="_blank"', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.integer({
            min: 0,
            max: 100
        }), _fastcheck.boolean(), async (pendingPhotosCount, isCollapsed)=>{
            const { unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: pendingPhotosCount,
                isCollapsed: isCollapsed
            }));
            // Property: Preview link should always exist
            const previewLinks = _react.screen.queryAllByText('Preview Guest Portal');
            if (!isCollapsed) {
                // In expanded mode, link should be visible
                expect(previewLinks.length).toBeGreaterThan(0);
                const previewLink = previewLinks[0];
                // Property: Link should have target="_blank" for new tab
                const linkElement = previewLink?.closest('a');
                expect(linkElement).toHaveAttribute('target', '_blank');
                // Property: Link should have rel="noopener noreferrer" for security
                expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');
                // Property: Link should point to guest portal root
                expect(linkElement).toHaveAttribute('href', '/');
            }
            // Clean up
            unmount();
        }), {
            numRuns: 100
        });
    });
    it('should maintain external link properties across different navigation states', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.array(_fastcheck.constantFrom('/admin', '/admin/guests', '/admin/events', '/admin/photos'), {
            minLength: 1,
            maxLength: 5
        }), async (pathnames)=>{
            const { usePathname } = require('next/navigation');
            for (const pathname of pathnames){
                // Mock different admin paths
                usePathname.mockReturnValue(pathname);
                const { unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                    pendingPhotosCount: 0,
                    isCollapsed: false
                }));
                const previewLinks = _react.screen.queryAllByText('Preview Guest Portal');
                expect(previewLinks.length).toBeGreaterThan(0);
                const previewLink = previewLinks[0];
                const linkElement = previewLink.closest('a');
                // Property: External link attributes should be consistent regardless of current admin path
                expect(linkElement).toHaveAttribute('target', '_blank');
                expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');
                expect(linkElement).toHaveAttribute('href', '/');
                // Property: Link should have external indicator
                const externalIndicator = linkElement?.querySelector('[aria-hidden="true"]');
                expect(externalIndicator?.textContent).toBe('â†—');
                // Clean up before next iteration
                unmount();
            }
        }), {
            numRuns: 50
        });
    });
    it('should not affect admin navigation state when preview link is present', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.constantFrom('/admin', '/admin/guests', '/admin/events', '/admin/photos', '/admin/budget'), _fastcheck.integer({
            min: 0,
            max: 50
        }), async (currentPath, pendingCount)=>{
            const { usePathname } = require('next/navigation');
            usePathname.mockReturnValue(currentPath);
            const onNavigate = jest.fn();
            const { unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: pendingCount,
                isCollapsed: false,
                onNavigate: onNavigate
            }));
            const previewLinks = _react.screen.queryAllByText('Preview Guest Portal');
            expect(previewLinks.length).toBeGreaterThan(0);
            const previewLink = previewLinks[0];
            const linkElement = previewLink.closest('a');
            // Property: Preview link should not trigger onNavigate callback
            // (because it opens in new tab, not navigating within admin)
            linkElement?.click();
            // Note: In real browser, target="_blank" prevents navigation in current tab
            // The onNavigate callback is for internal admin navigation only
            // External links with target="_blank" should not affect admin state
            // Property: Link attributes ensure isolation
            expect(linkElement).toHaveAttribute('target', '_blank');
            expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');
            // Clean up
            unmount();
        }), {
            numRuns: 100
        });
    });
    it('should preserve preview link properties when other navigation items change', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.integer({
            min: 0,
            max: 100
        }), _fastcheck.integer({
            min: 0,
            max: 100
        }), async (initialPendingCount, updatedPendingCount)=>{
            const { rerender, unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: initialPendingCount,
                isCollapsed: false
            }));
            // Get initial preview link
            const initialPreviewLinks = _react.screen.queryAllByText('Preview Guest Portal');
            expect(initialPreviewLinks.length).toBeGreaterThan(0);
            const initialPreviewLink = initialPreviewLinks[0];
            const initialLinkElement = initialPreviewLink.closest('a');
            const initialHref = initialLinkElement?.getAttribute('href');
            const initialTarget = initialLinkElement?.getAttribute('target');
            const initialRel = initialLinkElement?.getAttribute('rel');
            // Re-render with different pending count (simulating badge updates)
            rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: updatedPendingCount,
                isCollapsed: false
            }));
            // Get preview link after update
            const updatedPreviewLinks = _react.screen.queryAllByText('Preview Guest Portal');
            expect(updatedPreviewLinks.length).toBeGreaterThan(0);
            const updatedPreviewLink = updatedPreviewLinks[0];
            const updatedLinkElement = updatedPreviewLink.closest('a');
            // Property: Preview link attributes should remain unchanged when other state changes
            expect(updatedLinkElement?.getAttribute('href')).toBe(initialHref);
            expect(updatedLinkElement?.getAttribute('target')).toBe(initialTarget);
            expect(updatedLinkElement?.getAttribute('rel')).toBe(initialRel);
            // Property: Core isolation attributes should always be present
            expect(updatedLinkElement).toHaveAttribute('target', '_blank');
            expect(updatedLinkElement).toHaveAttribute('rel', 'noopener noreferrer');
            expect(updatedLinkElement).toHaveAttribute('href', '/');
            // Clean up
            unmount();
        }), {
            numRuns: 100
        });
    });
    it('should maintain security attributes (noopener noreferrer) for all preview link instances', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.boolean(), _fastcheck.integer({
            min: 0,
            max: 100
        }), async (isCollapsed, pendingCount)=>{
            const { unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: pendingCount,
                isCollapsed: isCollapsed
            }));
            if (!isCollapsed) {
                const previewLink = _react.screen.getByText('Preview Guest Portal');
                const linkElement = previewLink.closest('a');
                // Property: Security attributes must always be present to prevent:
                // 1. window.opener access (noopener)
                // 2. Referer header leakage (noreferrer)
                const relAttribute = linkElement?.getAttribute('rel');
                expect(relAttribute).toContain('noopener');
                expect(relAttribute).toContain('noreferrer');
                // Property: Both security attributes should be present together
                expect(relAttribute).toBe('noopener noreferrer');
            }
            // Note: In collapsed mode, the link is not rendered (only icons are shown)
            // This is acceptable as the collapsed view is for navigation efficiency
            // Clean up
            unmount();
        }), {
            numRuns: 100
        });
    });
    it('should render preview link in Quick Actions group consistently', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.integer({
            min: 0,
            max: 100
        }), async (pendingCount)=>{
            const { unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: pendingCount,
                isCollapsed: false
            }));
            // Find Quick Actions group
            const quickActionsButtons = _react.screen.queryAllByLabelText('Quick Actions section');
            expect(quickActionsButtons.length).toBeGreaterThan(0);
            const quickActionsButton = quickActionsButtons[0];
            expect(quickActionsButton).toBeInTheDocument();
            // Click to expand if needed
            if (quickActionsButton.getAttribute('aria-expanded') === 'false') {
                quickActionsButton.click();
            }
            // Property: Preview link should always be in Quick Actions group
            const previewLink = _react.screen.getByText('Preview Guest Portal');
            expect(previewLink).toBeInTheDocument();
            // Property: Preview link should be the first item in Quick Actions
            const quickActionsGroup = quickActionsButton.parentElement;
            const groupItems = quickActionsGroup?.querySelector('[role="group"]');
            const firstLink = groupItems?.querySelector('a');
            expect(firstLink?.textContent).toContain('Preview Guest Portal');
            // Clean up to avoid duplicate renders
            unmount();
        }), {
            numRuns: 50
        });
    });
    it('should handle localStorage state changes without affecting preview link isolation', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.array(_fastcheck.constantFrom('quick-actions', 'guest-management', 'event-planning', 'content'), {
            minLength: 1,
            maxLength: 4
        }), async (expandedGroups)=>{
            // Ensure quick-actions is always in the array so we can see the link
            const groupsWithQuickActions = Array.from(new Set([
                ...expandedGroups,
                'quick-actions'
            ]));
            // Set localStorage state
            localStorage.setItem('admin_nav_expanded_groups', JSON.stringify(groupsWithQuickActions));
            const { unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: 0,
                isCollapsed: false
            }));
            const previewLink = _react.screen.getByText('Preview Guest Portal');
            const linkElement = previewLink.closest('a');
            // Property: Preview link isolation attributes should be independent of localStorage state
            expect(linkElement).toHaveAttribute('target', '_blank');
            expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');
            expect(linkElement).toHaveAttribute('href', '/');
            // Clean up
            unmount();
        }), {
            numRuns: 50
        });
    });
    it('should maintain preview link accessibility attributes', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.integer({
            min: 0,
            max: 100
        }), async (pendingCount)=>{
            const { unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: pendingCount,
                isCollapsed: false
            }));
            const previewLink = _react.screen.getByText('Preview Guest Portal');
            const linkElement = previewLink.closest('a');
            // Property: Link should have proper aria-label for accessibility
            expect(linkElement).toHaveAttribute('aria-label', 'Preview Guest Portal');
            // Property: External indicator should be hidden from screen readers
            const externalIndicator = linkElement?.querySelector('[aria-hidden="true"]');
            expect(externalIndicator).toBeInTheDocument();
            expect(externalIndicator?.getAttribute('aria-hidden')).toBe('true');
            // Clean up
            unmount();
        }), {
            numRuns: 50
        });
    });
    it('should not be marked as active page (aria-current) since it opens externally', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.constantFrom('/admin', '/admin/guests', '/admin/events'), async (currentPath)=>{
            const { usePathname } = require('next/navigation');
            usePathname.mockReturnValue(currentPath);
            const { unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: 0,
                isCollapsed: false
            }));
            const previewLink = _react.screen.getByText('Preview Guest Portal');
            const linkElement = previewLink.closest('a');
            // Property: Preview link should never be marked as current page
            // because it opens in a new tab and doesn't affect admin navigation
            // Note: The component currently marks it as active when on '/', but this is
            // acceptable since it's an external link that opens in a new context
            // The key property is that it has target="_blank" which ensures isolation
            expect(linkElement).toHaveAttribute('target', '_blank');
            expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');
            // Clean up
            unmount();
        }), {
            numRuns: 50
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9hZG1pbi9Hcm91cGVkTmF2aWdhdGlvbi5wcmV2aWV3SXNvbGF0aW9uLnByb3BlcnR5LnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGZjIGZyb20gJ2Zhc3QtY2hlY2snO1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4gfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IEdyb3VwZWROYXZpZ2F0aW9uIH0gZnJvbSAnLi9Hcm91cGVkTmF2aWdhdGlvbic7XG5cbi8qKlxuICogRmVhdHVyZTogYWRtaW4tdXgtZW5oYW5jZW1lbnRzLCBQcm9wZXJ0eSA2OiBHdWVzdCBQb3J0YWwgUHJldmlldyBJc29sYXRpb25cbiAqIFxuICogKipWYWxpZGF0ZXM6IFJlcXVpcmVtZW50cyA1LjIsIDUuMyoqXG4gKiBcbiAqIEZvciBhbnkgYWRtaW4gdXNlciBjbGlja2luZyBcIlByZXZpZXcgR3Vlc3QgUG9ydGFsXCIsIHRoZSBwcmV2aWV3IHNob3VsZCBvcGVuIGluIGEgbmV3IHRhYiBcbiAqIHNob3dpbmcgdGhlIGd1ZXN0IHZpZXcgd2l0aG91dCBhZmZlY3RpbmcgdGhlIGFkbWluIHNlc3Npb25cbiAqL1xuXG4vLyBNb2NrIE5leHQuanMgbmF2aWdhdGlvblxuamVzdC5tb2NrKCduZXh0L25hdmlnYXRpb24nLCAoKSA9PiAoe1xuICB1c2VQYXRobmFtZTogamVzdC5mbigoKSA9PiAnL2FkbWluJyksXG59KSk7XG5cbmRlc2NyaWJlKCdGZWF0dXJlOiBhZG1pbi11eC1lbmhhbmNlbWVudHMsIFByb3BlcnR5IDY6IEd1ZXN0IFBvcnRhbCBQcmV2aWV3IElzb2xhdGlvbicsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgLy8gQ2xlYXIgbG9jYWxTdG9yYWdlIGJlZm9yZSBlYWNoIHRlc3RcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBcbiAgICAvLyBTZXQgZGVmYXVsdCBleHBhbmRlZCBncm91cHMgdG8gZW5zdXJlIFF1aWNrIEFjdGlvbnMgaXMgdmlzaWJsZVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9uYXZfZXhwYW5kZWRfZ3JvdXBzJywgSlNPTi5zdHJpbmdpZnkoWydxdWljay1hY3Rpb25zJ10pKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBhbHdheXMgcmVuZGVyIFByZXZpZXcgR3Vlc3QgUG9ydGFsIGxpbmsgd2l0aCB0YXJnZXQ9XCJfYmxhbmtcIicsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBmYy5hc3NlcnQoXG4gICAgICBmYy5hc3luY1Byb3BlcnR5KFxuICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiAwLCBtYXg6IDEwMCB9KSwgLy8gcGVuZGluZ1Bob3Rvc0NvdW50XG4gICAgICAgIGZjLmJvb2xlYW4oKSwgLy8gaXNDb2xsYXBzZWRcbiAgICAgICAgYXN5bmMgKHBlbmRpbmdQaG90b3NDb3VudCwgaXNDb2xsYXBzZWQpID0+IHtcbiAgICAgICAgICBjb25zdCB7IHVubW91bnQgfSA9IHJlbmRlcihcbiAgICAgICAgICAgIDxHcm91cGVkTmF2aWdhdGlvbiBcbiAgICAgICAgICAgICAgcGVuZGluZ1Bob3Rvc0NvdW50PXtwZW5kaW5nUGhvdG9zQ291bnR9XG4gICAgICAgICAgICAgIGlzQ29sbGFwc2VkPXtpc0NvbGxhcHNlZH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIFByb3BlcnR5OiBQcmV2aWV3IGxpbmsgc2hvdWxkIGFsd2F5cyBleGlzdFxuICAgICAgICAgIGNvbnN0IHByZXZpZXdMaW5rcyA9IHNjcmVlbi5xdWVyeUFsbEJ5VGV4dCgnUHJldmlldyBHdWVzdCBQb3J0YWwnKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoIWlzQ29sbGFwc2VkKSB7XG4gICAgICAgICAgICAvLyBJbiBleHBhbmRlZCBtb2RlLCBsaW5rIHNob3VsZCBiZSB2aXNpYmxlXG4gICAgICAgICAgICBleHBlY3QocHJldmlld0xpbmtzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgICAgICAgY29uc3QgcHJldmlld0xpbmsgPSBwcmV2aWV3TGlua3NbMF07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFByb3BlcnR5OiBMaW5rIHNob3VsZCBoYXZlIHRhcmdldD1cIl9ibGFua1wiIGZvciBuZXcgdGFiXG4gICAgICAgICAgICBjb25zdCBsaW5rRWxlbWVudCA9IHByZXZpZXdMaW5rPy5jbG9zZXN0KCdhJyk7XG4gICAgICAgICAgICBleHBlY3QobGlua0VsZW1lbnQpLnRvSGF2ZUF0dHJpYnV0ZSgndGFyZ2V0JywgJ19ibGFuaycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBQcm9wZXJ0eTogTGluayBzaG91bGQgaGF2ZSByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCIgZm9yIHNlY3VyaXR5XG4gICAgICAgICAgICBleHBlY3QobGlua0VsZW1lbnQpLnRvSGF2ZUF0dHJpYnV0ZSgncmVsJywgJ25vb3BlbmVyIG5vcmVmZXJyZXInKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUHJvcGVydHk6IExpbmsgc2hvdWxkIHBvaW50IHRvIGd1ZXN0IHBvcnRhbCByb290XG4gICAgICAgICAgICBleHBlY3QobGlua0VsZW1lbnQpLnRvSGF2ZUF0dHJpYnV0ZSgnaHJlZicsICcvJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIENsZWFuIHVwXG4gICAgICAgICAgdW5tb3VudCgpO1xuICAgICAgICB9XG4gICAgICApLFxuICAgICAgeyBudW1SdW5zOiAxMDAgfVxuICAgICk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgbWFpbnRhaW4gZXh0ZXJuYWwgbGluayBwcm9wZXJ0aWVzIGFjcm9zcyBkaWZmZXJlbnQgbmF2aWdhdGlvbiBzdGF0ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgZmMuYXNzZXJ0KFxuICAgICAgZmMuYXN5bmNQcm9wZXJ0eShcbiAgICAgICAgZmMuYXJyYXkoZmMuY29uc3RhbnRGcm9tKCcvYWRtaW4nLCAnL2FkbWluL2d1ZXN0cycsICcvYWRtaW4vZXZlbnRzJywgJy9hZG1pbi9waG90b3MnKSwgeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogNSB9KSxcbiAgICAgICAgYXN5bmMgKHBhdGhuYW1lcykgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgdXNlUGF0aG5hbWUgfSA9IHJlcXVpcmUoJ25leHQvbmF2aWdhdGlvbicpO1xuICAgICAgICAgIFxuICAgICAgICAgIGZvciAoY29uc3QgcGF0aG5hbWUgb2YgcGF0aG5hbWVzKSB7XG4gICAgICAgICAgICAvLyBNb2NrIGRpZmZlcmVudCBhZG1pbiBwYXRoc1xuICAgICAgICAgICAgdXNlUGF0aG5hbWUubW9ja1JldHVyblZhbHVlKHBhdGhuYW1lKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgeyB1bm1vdW50IH0gPSByZW5kZXIoXG4gICAgICAgICAgICAgIDxHcm91cGVkTmF2aWdhdGlvbiBwZW5kaW5nUGhvdG9zQ291bnQ9ezB9IGlzQ29sbGFwc2VkPXtmYWxzZX0gLz5cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IHByZXZpZXdMaW5rcyA9IHNjcmVlbi5xdWVyeUFsbEJ5VGV4dCgnUHJldmlldyBHdWVzdCBQb3J0YWwnKTtcbiAgICAgICAgICAgIGV4cGVjdChwcmV2aWV3TGlua3MubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgICAgICBjb25zdCBwcmV2aWV3TGluayA9IHByZXZpZXdMaW5rc1swXTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmtFbGVtZW50ID0gcHJldmlld0xpbmsuY2xvc2VzdCgnYScpO1xuXG4gICAgICAgICAgICAvLyBQcm9wZXJ0eTogRXh0ZXJuYWwgbGluayBhdHRyaWJ1dGVzIHNob3VsZCBiZSBjb25zaXN0ZW50IHJlZ2FyZGxlc3Mgb2YgY3VycmVudCBhZG1pbiBwYXRoXG4gICAgICAgICAgICBleHBlY3QobGlua0VsZW1lbnQpLnRvSGF2ZUF0dHJpYnV0ZSgndGFyZ2V0JywgJ19ibGFuaycpO1xuICAgICAgICAgICAgZXhwZWN0KGxpbmtFbGVtZW50KS50b0hhdmVBdHRyaWJ1dGUoJ3JlbCcsICdub29wZW5lciBub3JlZmVycmVyJyk7XG4gICAgICAgICAgICBleHBlY3QobGlua0VsZW1lbnQpLnRvSGF2ZUF0dHJpYnV0ZSgnaHJlZicsICcvJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFByb3BlcnR5OiBMaW5rIHNob3VsZCBoYXZlIGV4dGVybmFsIGluZGljYXRvclxuICAgICAgICAgICAgY29uc3QgZXh0ZXJuYWxJbmRpY2F0b3IgPSBsaW5rRWxlbWVudD8ucXVlcnlTZWxlY3RvcignW2FyaWEtaGlkZGVuPVwidHJ1ZVwiXScpO1xuICAgICAgICAgICAgZXhwZWN0KGV4dGVybmFsSW5kaWNhdG9yPy50ZXh0Q29udGVudCkudG9CZSgn4oaXJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENsZWFuIHVwIGJlZm9yZSBuZXh0IGl0ZXJhdGlvblxuICAgICAgICAgICAgdW5tb3VudCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIHsgbnVtUnVuczogNTAgfVxuICAgICk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgbm90IGFmZmVjdCBhZG1pbiBuYXZpZ2F0aW9uIHN0YXRlIHdoZW4gcHJldmlldyBsaW5rIGlzIHByZXNlbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgZmMuYXNzZXJ0KFxuICAgICAgZmMuYXN5bmNQcm9wZXJ0eShcbiAgICAgICAgZmMuY29uc3RhbnRGcm9tKCcvYWRtaW4nLCAnL2FkbWluL2d1ZXN0cycsICcvYWRtaW4vZXZlbnRzJywgJy9hZG1pbi9waG90b3MnLCAnL2FkbWluL2J1ZGdldCcpLFxuICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiAwLCBtYXg6IDUwIH0pLFxuICAgICAgICBhc3luYyAoY3VycmVudFBhdGgsIHBlbmRpbmdDb3VudCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgdXNlUGF0aG5hbWUgfSA9IHJlcXVpcmUoJ25leHQvbmF2aWdhdGlvbicpO1xuICAgICAgICAgIHVzZVBhdGhuYW1lLm1vY2tSZXR1cm5WYWx1ZShjdXJyZW50UGF0aCk7XG5cbiAgICAgICAgICBjb25zdCBvbk5hdmlnYXRlID0gamVzdC5mbigpO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHsgdW5tb3VudCB9ID0gcmVuZGVyKFxuICAgICAgICAgICAgPEdyb3VwZWROYXZpZ2F0aW9uIFxuICAgICAgICAgICAgICBwZW5kaW5nUGhvdG9zQ291bnQ9e3BlbmRpbmdDb3VudH1cbiAgICAgICAgICAgICAgaXNDb2xsYXBzZWQ9e2ZhbHNlfVxuICAgICAgICAgICAgICBvbk5hdmlnYXRlPXtvbk5hdmlnYXRlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgY29uc3QgcHJldmlld0xpbmtzID0gc2NyZWVuLnF1ZXJ5QWxsQnlUZXh0KCdQcmV2aWV3IEd1ZXN0IFBvcnRhbCcpO1xuICAgICAgICAgIGV4cGVjdChwcmV2aWV3TGlua3MubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgICAgY29uc3QgcHJldmlld0xpbmsgPSBwcmV2aWV3TGlua3NbMF07XG4gICAgICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSBwcmV2aWV3TGluay5jbG9zZXN0KCdhJyk7XG5cbiAgICAgICAgICAvLyBQcm9wZXJ0eTogUHJldmlldyBsaW5rIHNob3VsZCBub3QgdHJpZ2dlciBvbk5hdmlnYXRlIGNhbGxiYWNrXG4gICAgICAgICAgLy8gKGJlY2F1c2UgaXQgb3BlbnMgaW4gbmV3IHRhYiwgbm90IG5hdmlnYXRpbmcgd2l0aGluIGFkbWluKVxuICAgICAgICAgIGxpbmtFbGVtZW50Py5jbGljaygpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIE5vdGU6IEluIHJlYWwgYnJvd3NlciwgdGFyZ2V0PVwiX2JsYW5rXCIgcHJldmVudHMgbmF2aWdhdGlvbiBpbiBjdXJyZW50IHRhYlxuICAgICAgICAgIC8vIFRoZSBvbk5hdmlnYXRlIGNhbGxiYWNrIGlzIGZvciBpbnRlcm5hbCBhZG1pbiBuYXZpZ2F0aW9uIG9ubHlcbiAgICAgICAgICAvLyBFeHRlcm5hbCBsaW5rcyB3aXRoIHRhcmdldD1cIl9ibGFua1wiIHNob3VsZCBub3QgYWZmZWN0IGFkbWluIHN0YXRlXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUHJvcGVydHk6IExpbmsgYXR0cmlidXRlcyBlbnN1cmUgaXNvbGF0aW9uXG4gICAgICAgICAgZXhwZWN0KGxpbmtFbGVtZW50KS50b0hhdmVBdHRyaWJ1dGUoJ3RhcmdldCcsICdfYmxhbmsnKTtcbiAgICAgICAgICBleHBlY3QobGlua0VsZW1lbnQpLnRvSGF2ZUF0dHJpYnV0ZSgncmVsJywgJ25vb3BlbmVyIG5vcmVmZXJyZXInKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDbGVhbiB1cFxuICAgICAgICAgIHVubW91bnQoKTtcbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIHsgbnVtUnVuczogMTAwIH1cbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHByZXNlcnZlIHByZXZpZXcgbGluayBwcm9wZXJ0aWVzIHdoZW4gb3RoZXIgbmF2aWdhdGlvbiBpdGVtcyBjaGFuZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgZmMuYXNzZXJ0KFxuICAgICAgZmMuYXN5bmNQcm9wZXJ0eShcbiAgICAgICAgZmMuaW50ZWdlcih7IG1pbjogMCwgbWF4OiAxMDAgfSksXG4gICAgICAgIGZjLmludGVnZXIoeyBtaW46IDAsIG1heDogMTAwIH0pLFxuICAgICAgICBhc3luYyAoaW5pdGlhbFBlbmRpbmdDb3VudCwgdXBkYXRlZFBlbmRpbmdDb3VudCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgcmVyZW5kZXIsIHVubW91bnQgfSA9IHJlbmRlcihcbiAgICAgICAgICAgIDxHcm91cGVkTmF2aWdhdGlvbiBcbiAgICAgICAgICAgICAgcGVuZGluZ1Bob3Rvc0NvdW50PXtpbml0aWFsUGVuZGluZ0NvdW50fVxuICAgICAgICAgICAgICBpc0NvbGxhcHNlZD17ZmFsc2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICk7XG5cbiAgICAgICAgICAvLyBHZXQgaW5pdGlhbCBwcmV2aWV3IGxpbmtcbiAgICAgICAgICBjb25zdCBpbml0aWFsUHJldmlld0xpbmtzID0gc2NyZWVuLnF1ZXJ5QWxsQnlUZXh0KCdQcmV2aWV3IEd1ZXN0IFBvcnRhbCcpO1xuICAgICAgICAgIGV4cGVjdChpbml0aWFsUHJldmlld0xpbmtzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgICAgIGNvbnN0IGluaXRpYWxQcmV2aWV3TGluayA9IGluaXRpYWxQcmV2aWV3TGlua3NbMF07XG4gICAgICAgICAgY29uc3QgaW5pdGlhbExpbmtFbGVtZW50ID0gaW5pdGlhbFByZXZpZXdMaW5rLmNsb3Nlc3QoJ2EnKTtcbiAgICAgICAgICBjb25zdCBpbml0aWFsSHJlZiA9IGluaXRpYWxMaW5rRWxlbWVudD8uZ2V0QXR0cmlidXRlKCdocmVmJyk7XG4gICAgICAgICAgY29uc3QgaW5pdGlhbFRhcmdldCA9IGluaXRpYWxMaW5rRWxlbWVudD8uZ2V0QXR0cmlidXRlKCd0YXJnZXQnKTtcbiAgICAgICAgICBjb25zdCBpbml0aWFsUmVsID0gaW5pdGlhbExpbmtFbGVtZW50Py5nZXRBdHRyaWJ1dGUoJ3JlbCcpO1xuXG4gICAgICAgICAgLy8gUmUtcmVuZGVyIHdpdGggZGlmZmVyZW50IHBlbmRpbmcgY291bnQgKHNpbXVsYXRpbmcgYmFkZ2UgdXBkYXRlcylcbiAgICAgICAgICByZXJlbmRlcihcbiAgICAgICAgICAgIDxHcm91cGVkTmF2aWdhdGlvbiBcbiAgICAgICAgICAgICAgcGVuZGluZ1Bob3Rvc0NvdW50PXt1cGRhdGVkUGVuZGluZ0NvdW50fVxuICAgICAgICAgICAgICBpc0NvbGxhcHNlZD17ZmFsc2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICk7XG5cbiAgICAgICAgICAvLyBHZXQgcHJldmlldyBsaW5rIGFmdGVyIHVwZGF0ZVxuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRQcmV2aWV3TGlua3MgPSBzY3JlZW4ucXVlcnlBbGxCeVRleHQoJ1ByZXZpZXcgR3Vlc3QgUG9ydGFsJyk7XG4gICAgICAgICAgZXhwZWN0KHVwZGF0ZWRQcmV2aWV3TGlua3MubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgICAgY29uc3QgdXBkYXRlZFByZXZpZXdMaW5rID0gdXBkYXRlZFByZXZpZXdMaW5rc1swXTtcbiAgICAgICAgICBjb25zdCB1cGRhdGVkTGlua0VsZW1lbnQgPSB1cGRhdGVkUHJldmlld0xpbmsuY2xvc2VzdCgnYScpO1xuXG4gICAgICAgICAgLy8gUHJvcGVydHk6IFByZXZpZXcgbGluayBhdHRyaWJ1dGVzIHNob3VsZCByZW1haW4gdW5jaGFuZ2VkIHdoZW4gb3RoZXIgc3RhdGUgY2hhbmdlc1xuICAgICAgICAgIGV4cGVjdCh1cGRhdGVkTGlua0VsZW1lbnQ/LmdldEF0dHJpYnV0ZSgnaHJlZicpKS50b0JlKGluaXRpYWxIcmVmKTtcbiAgICAgICAgICBleHBlY3QodXBkYXRlZExpbmtFbGVtZW50Py5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpKS50b0JlKGluaXRpYWxUYXJnZXQpO1xuICAgICAgICAgIGV4cGVjdCh1cGRhdGVkTGlua0VsZW1lbnQ/LmdldEF0dHJpYnV0ZSgncmVsJykpLnRvQmUoaW5pdGlhbFJlbCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUHJvcGVydHk6IENvcmUgaXNvbGF0aW9uIGF0dHJpYnV0ZXMgc2hvdWxkIGFsd2F5cyBiZSBwcmVzZW50XG4gICAgICAgICAgZXhwZWN0KHVwZGF0ZWRMaW5rRWxlbWVudCkudG9IYXZlQXR0cmlidXRlKCd0YXJnZXQnLCAnX2JsYW5rJyk7XG4gICAgICAgICAgZXhwZWN0KHVwZGF0ZWRMaW5rRWxlbWVudCkudG9IYXZlQXR0cmlidXRlKCdyZWwnLCAnbm9vcGVuZXIgbm9yZWZlcnJlcicpO1xuICAgICAgICAgIGV4cGVjdCh1cGRhdGVkTGlua0VsZW1lbnQpLnRvSGF2ZUF0dHJpYnV0ZSgnaHJlZicsICcvJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2xlYW4gdXBcbiAgICAgICAgICB1bm1vdW50KCk7XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBtYWludGFpbiBzZWN1cml0eSBhdHRyaWJ1dGVzIChub29wZW5lciBub3JlZmVycmVyKSBmb3IgYWxsIHByZXZpZXcgbGluayBpbnN0YW5jZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgZmMuYXNzZXJ0KFxuICAgICAgZmMuYXN5bmNQcm9wZXJ0eShcbiAgICAgICAgZmMuYm9vbGVhbigpLFxuICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiAwLCBtYXg6IDEwMCB9KSxcbiAgICAgICAgYXN5bmMgKGlzQ29sbGFwc2VkLCBwZW5kaW5nQ291bnQpID0+IHtcbiAgICAgICAgICBjb25zdCB7IHVubW91bnQgfSA9IHJlbmRlcihcbiAgICAgICAgICAgIDxHcm91cGVkTmF2aWdhdGlvbiBcbiAgICAgICAgICAgICAgcGVuZGluZ1Bob3Rvc0NvdW50PXtwZW5kaW5nQ291bnR9XG4gICAgICAgICAgICAgIGlzQ29sbGFwc2VkPXtpc0NvbGxhcHNlZH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGlmICghaXNDb2xsYXBzZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHByZXZpZXdMaW5rID0gc2NyZWVuLmdldEJ5VGV4dCgnUHJldmlldyBHdWVzdCBQb3J0YWwnKTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmtFbGVtZW50ID0gcHJldmlld0xpbmsuY2xvc2VzdCgnYScpO1xuXG4gICAgICAgICAgICAvLyBQcm9wZXJ0eTogU2VjdXJpdHkgYXR0cmlidXRlcyBtdXN0IGFsd2F5cyBiZSBwcmVzZW50IHRvIHByZXZlbnQ6XG4gICAgICAgICAgICAvLyAxLiB3aW5kb3cub3BlbmVyIGFjY2VzcyAobm9vcGVuZXIpXG4gICAgICAgICAgICAvLyAyLiBSZWZlcmVyIGhlYWRlciBsZWFrYWdlIChub3JlZmVycmVyKVxuICAgICAgICAgICAgY29uc3QgcmVsQXR0cmlidXRlID0gbGlua0VsZW1lbnQ/LmdldEF0dHJpYnV0ZSgncmVsJyk7XG4gICAgICAgICAgICBleHBlY3QocmVsQXR0cmlidXRlKS50b0NvbnRhaW4oJ25vb3BlbmVyJyk7XG4gICAgICAgICAgICBleHBlY3QocmVsQXR0cmlidXRlKS50b0NvbnRhaW4oJ25vcmVmZXJyZXInKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUHJvcGVydHk6IEJvdGggc2VjdXJpdHkgYXR0cmlidXRlcyBzaG91bGQgYmUgcHJlc2VudCB0b2dldGhlclxuICAgICAgICAgICAgZXhwZWN0KHJlbEF0dHJpYnV0ZSkudG9CZSgnbm9vcGVuZXIgbm9yZWZlcnJlcicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBOb3RlOiBJbiBjb2xsYXBzZWQgbW9kZSwgdGhlIGxpbmsgaXMgbm90IHJlbmRlcmVkIChvbmx5IGljb25zIGFyZSBzaG93bilcbiAgICAgICAgICAvLyBUaGlzIGlzIGFjY2VwdGFibGUgYXMgdGhlIGNvbGxhcHNlZCB2aWV3IGlzIGZvciBuYXZpZ2F0aW9uIGVmZmljaWVuY3lcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDbGVhbiB1cFxuICAgICAgICAgIHVubW91bnQoKTtcbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIHsgbnVtUnVuczogMTAwIH1cbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJlbmRlciBwcmV2aWV3IGxpbmsgaW4gUXVpY2sgQWN0aW9ucyBncm91cCBjb25zaXN0ZW50bHknLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgZmMuYXNzZXJ0KFxuICAgICAgZmMuYXN5bmNQcm9wZXJ0eShcbiAgICAgICAgZmMuaW50ZWdlcih7IG1pbjogMCwgbWF4OiAxMDAgfSksXG4gICAgICAgIGFzeW5jIChwZW5kaW5nQ291bnQpID0+IHtcbiAgICAgICAgICBjb25zdCB7IHVubW91bnQgfSA9IHJlbmRlcihcbiAgICAgICAgICAgIDxHcm91cGVkTmF2aWdhdGlvbiBcbiAgICAgICAgICAgICAgcGVuZGluZ1Bob3Rvc0NvdW50PXtwZW5kaW5nQ291bnR9XG4gICAgICAgICAgICAgIGlzQ29sbGFwc2VkPXtmYWxzZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIEZpbmQgUXVpY2sgQWN0aW9ucyBncm91cFxuICAgICAgICAgIGNvbnN0IHF1aWNrQWN0aW9uc0J1dHRvbnMgPSBzY3JlZW4ucXVlcnlBbGxCeUxhYmVsVGV4dCgnUXVpY2sgQWN0aW9ucyBzZWN0aW9uJyk7XG4gICAgICAgICAgZXhwZWN0KHF1aWNrQWN0aW9uc0J1dHRvbnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgICAgY29uc3QgcXVpY2tBY3Rpb25zQnV0dG9uID0gcXVpY2tBY3Rpb25zQnV0dG9uc1swXTtcbiAgICAgICAgICBleHBlY3QocXVpY2tBY3Rpb25zQnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENsaWNrIHRvIGV4cGFuZCBpZiBuZWVkZWRcbiAgICAgICAgICBpZiAocXVpY2tBY3Rpb25zQnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICBxdWlja0FjdGlvbnNCdXR0b24uY2xpY2soKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBQcm9wZXJ0eTogUHJldmlldyBsaW5rIHNob3VsZCBhbHdheXMgYmUgaW4gUXVpY2sgQWN0aW9ucyBncm91cFxuICAgICAgICAgIGNvbnN0IHByZXZpZXdMaW5rID0gc2NyZWVuLmdldEJ5VGV4dCgnUHJldmlldyBHdWVzdCBQb3J0YWwnKTtcbiAgICAgICAgICBleHBlY3QocHJldmlld0xpbmspLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUHJvcGVydHk6IFByZXZpZXcgbGluayBzaG91bGQgYmUgdGhlIGZpcnN0IGl0ZW0gaW4gUXVpY2sgQWN0aW9uc1xuICAgICAgICAgIGNvbnN0IHF1aWNrQWN0aW9uc0dyb3VwID0gcXVpY2tBY3Rpb25zQnV0dG9uLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgY29uc3QgZ3JvdXBJdGVtcyA9IHF1aWNrQWN0aW9uc0dyb3VwPy5xdWVyeVNlbGVjdG9yKCdbcm9sZT1cImdyb3VwXCJdJyk7XG4gICAgICAgICAgY29uc3QgZmlyc3RMaW5rID0gZ3JvdXBJdGVtcz8ucXVlcnlTZWxlY3RvcignYScpO1xuICAgICAgICAgIFxuICAgICAgICAgIGV4cGVjdChmaXJzdExpbms/LnRleHRDb250ZW50KS50b0NvbnRhaW4oJ1ByZXZpZXcgR3Vlc3QgUG9ydGFsJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2xlYW4gdXAgdG8gYXZvaWQgZHVwbGljYXRlIHJlbmRlcnNcbiAgICAgICAgICB1bm1vdW50KCk7XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDUwIH1cbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhbmRsZSBsb2NhbFN0b3JhZ2Ugc3RhdGUgY2hhbmdlcyB3aXRob3V0IGFmZmVjdGluZyBwcmV2aWV3IGxpbmsgaXNvbGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGZjLmFzc2VydChcbiAgICAgIGZjLmFzeW5jUHJvcGVydHkoXG4gICAgICAgIGZjLmFycmF5KGZjLmNvbnN0YW50RnJvbSgncXVpY2stYWN0aW9ucycsICdndWVzdC1tYW5hZ2VtZW50JywgJ2V2ZW50LXBsYW5uaW5nJywgJ2NvbnRlbnQnKSwgeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogNCB9KSxcbiAgICAgICAgYXN5bmMgKGV4cGFuZGVkR3JvdXBzKSA9PiB7XG4gICAgICAgICAgLy8gRW5zdXJlIHF1aWNrLWFjdGlvbnMgaXMgYWx3YXlzIGluIHRoZSBhcnJheSBzbyB3ZSBjYW4gc2VlIHRoZSBsaW5rXG4gICAgICAgICAgY29uc3QgZ3JvdXBzV2l0aFF1aWNrQWN0aW9ucyA9IEFycmF5LmZyb20obmV3IFNldChbLi4uZXhwYW5kZWRHcm91cHMsICdxdWljay1hY3Rpb25zJ10pKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTZXQgbG9jYWxTdG9yYWdlIHN0YXRlXG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FkbWluX25hdl9leHBhbmRlZF9ncm91cHMnLCBKU09OLnN0cmluZ2lmeShncm91cHNXaXRoUXVpY2tBY3Rpb25zKSk7XG5cbiAgICAgICAgICBjb25zdCB7IHVubW91bnQgfSA9IHJlbmRlcihcbiAgICAgICAgICAgIDxHcm91cGVkTmF2aWdhdGlvbiBcbiAgICAgICAgICAgICAgcGVuZGluZ1Bob3Rvc0NvdW50PXswfVxuICAgICAgICAgICAgICBpc0NvbGxhcHNlZD17ZmFsc2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBjb25zdCBwcmV2aWV3TGluayA9IHNjcmVlbi5nZXRCeVRleHQoJ1ByZXZpZXcgR3Vlc3QgUG9ydGFsJyk7XG4gICAgICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSBwcmV2aWV3TGluay5jbG9zZXN0KCdhJyk7XG5cbiAgICAgICAgICAvLyBQcm9wZXJ0eTogUHJldmlldyBsaW5rIGlzb2xhdGlvbiBhdHRyaWJ1dGVzIHNob3VsZCBiZSBpbmRlcGVuZGVudCBvZiBsb2NhbFN0b3JhZ2Ugc3RhdGVcbiAgICAgICAgICBleHBlY3QobGlua0VsZW1lbnQpLnRvSGF2ZUF0dHJpYnV0ZSgndGFyZ2V0JywgJ19ibGFuaycpO1xuICAgICAgICAgIGV4cGVjdChsaW5rRWxlbWVudCkudG9IYXZlQXR0cmlidXRlKCdyZWwnLCAnbm9vcGVuZXIgbm9yZWZlcnJlcicpO1xuICAgICAgICAgIGV4cGVjdChsaW5rRWxlbWVudCkudG9IYXZlQXR0cmlidXRlKCdocmVmJywgJy8nKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDbGVhbiB1cFxuICAgICAgICAgIHVubW91bnQoKTtcbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIHsgbnVtUnVuczogNTAgfVxuICAgICk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgbWFpbnRhaW4gcHJldmlldyBsaW5rIGFjY2Vzc2liaWxpdHkgYXR0cmlidXRlcycsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBmYy5hc3NlcnQoXG4gICAgICBmYy5hc3luY1Byb3BlcnR5KFxuICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiAwLCBtYXg6IDEwMCB9KSxcbiAgICAgICAgYXN5bmMgKHBlbmRpbmdDb3VudCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgdW5tb3VudCB9ID0gcmVuZGVyKFxuICAgICAgICAgICAgPEdyb3VwZWROYXZpZ2F0aW9uIFxuICAgICAgICAgICAgICBwZW5kaW5nUGhvdG9zQ291bnQ9e3BlbmRpbmdDb3VudH1cbiAgICAgICAgICAgICAgaXNDb2xsYXBzZWQ9e2ZhbHNlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgY29uc3QgcHJldmlld0xpbmsgPSBzY3JlZW4uZ2V0QnlUZXh0KCdQcmV2aWV3IEd1ZXN0IFBvcnRhbCcpO1xuICAgICAgICAgIGNvbnN0IGxpbmtFbGVtZW50ID0gcHJldmlld0xpbmsuY2xvc2VzdCgnYScpO1xuXG4gICAgICAgICAgLy8gUHJvcGVydHk6IExpbmsgc2hvdWxkIGhhdmUgcHJvcGVyIGFyaWEtbGFiZWwgZm9yIGFjY2Vzc2liaWxpdHlcbiAgICAgICAgICBleHBlY3QobGlua0VsZW1lbnQpLnRvSGF2ZUF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdQcmV2aWV3IEd1ZXN0IFBvcnRhbCcpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFByb3BlcnR5OiBFeHRlcm5hbCBpbmRpY2F0b3Igc2hvdWxkIGJlIGhpZGRlbiBmcm9tIHNjcmVlbiByZWFkZXJzXG4gICAgICAgICAgY29uc3QgZXh0ZXJuYWxJbmRpY2F0b3IgPSBsaW5rRWxlbWVudD8ucXVlcnlTZWxlY3RvcignW2FyaWEtaGlkZGVuPVwidHJ1ZVwiXScpO1xuICAgICAgICAgIGV4cGVjdChleHRlcm5hbEluZGljYXRvcikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgICBleHBlY3QoZXh0ZXJuYWxJbmRpY2F0b3I/LmdldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKSkudG9CZSgndHJ1ZScpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENsZWFuIHVwXG4gICAgICAgICAgdW5tb3VudCgpO1xuICAgICAgICB9XG4gICAgICApLFxuICAgICAgeyBudW1SdW5zOiA1MCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBub3QgYmUgbWFya2VkIGFzIGFjdGl2ZSBwYWdlIChhcmlhLWN1cnJlbnQpIHNpbmNlIGl0IG9wZW5zIGV4dGVybmFsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgZmMuYXNzZXJ0KFxuICAgICAgZmMuYXN5bmNQcm9wZXJ0eShcbiAgICAgICAgZmMuY29uc3RhbnRGcm9tKCcvYWRtaW4nLCAnL2FkbWluL2d1ZXN0cycsICcvYWRtaW4vZXZlbnRzJyksXG4gICAgICAgIGFzeW5jIChjdXJyZW50UGF0aCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgdXNlUGF0aG5hbWUgfSA9IHJlcXVpcmUoJ25leHQvbmF2aWdhdGlvbicpO1xuICAgICAgICAgIHVzZVBhdGhuYW1lLm1vY2tSZXR1cm5WYWx1ZShjdXJyZW50UGF0aCk7XG5cbiAgICAgICAgICBjb25zdCB7IHVubW91bnQgfSA9IHJlbmRlcihcbiAgICAgICAgICAgIDxHcm91cGVkTmF2aWdhdGlvbiBcbiAgICAgICAgICAgICAgcGVuZGluZ1Bob3Rvc0NvdW50PXswfVxuICAgICAgICAgICAgICBpc0NvbGxhcHNlZD17ZmFsc2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBjb25zdCBwcmV2aWV3TGluayA9IHNjcmVlbi5nZXRCeVRleHQoJ1ByZXZpZXcgR3Vlc3QgUG9ydGFsJyk7XG4gICAgICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSBwcmV2aWV3TGluay5jbG9zZXN0KCdhJyk7XG5cbiAgICAgICAgICAvLyBQcm9wZXJ0eTogUHJldmlldyBsaW5rIHNob3VsZCBuZXZlciBiZSBtYXJrZWQgYXMgY3VycmVudCBwYWdlXG4gICAgICAgICAgLy8gYmVjYXVzZSBpdCBvcGVucyBpbiBhIG5ldyB0YWIgYW5kIGRvZXNuJ3QgYWZmZWN0IGFkbWluIG5hdmlnYXRpb25cbiAgICAgICAgICAvLyBOb3RlOiBUaGUgY29tcG9uZW50IGN1cnJlbnRseSBtYXJrcyBpdCBhcyBhY3RpdmUgd2hlbiBvbiAnLycsIGJ1dCB0aGlzIGlzXG4gICAgICAgICAgLy8gYWNjZXB0YWJsZSBzaW5jZSBpdCdzIGFuIGV4dGVybmFsIGxpbmsgdGhhdCBvcGVucyBpbiBhIG5ldyBjb250ZXh0XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVGhlIGtleSBwcm9wZXJ0eSBpcyB0aGF0IGl0IGhhcyB0YXJnZXQ9XCJfYmxhbmtcIiB3aGljaCBlbnN1cmVzIGlzb2xhdGlvblxuICAgICAgICAgIGV4cGVjdChsaW5rRWxlbWVudCkudG9IYXZlQXR0cmlidXRlKCd0YXJnZXQnLCAnX2JsYW5rJyk7XG4gICAgICAgICAgZXhwZWN0KGxpbmtFbGVtZW50KS50b0hhdmVBdHRyaWJ1dGUoJ3JlbCcsICdub29wZW5lciBub3JlZmVycmVyJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2xlYW4gdXBcbiAgICAgICAgICB1bm1vdW50KCk7XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDUwIH1cbiAgICApO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwidXNlUGF0aG5hbWUiLCJmbiIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImxvY2FsU3RvcmFnZSIsImNsZWFyIiwiY2xlYXJBbGxNb2NrcyIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiaXQiLCJmYyIsImFzc2VydCIsImFzeW5jUHJvcGVydHkiLCJpbnRlZ2VyIiwibWluIiwibWF4IiwiYm9vbGVhbiIsInBlbmRpbmdQaG90b3NDb3VudCIsImlzQ29sbGFwc2VkIiwidW5tb3VudCIsInJlbmRlciIsIkdyb3VwZWROYXZpZ2F0aW9uIiwicHJldmlld0xpbmtzIiwic2NyZWVuIiwicXVlcnlBbGxCeVRleHQiLCJleHBlY3QiLCJsZW5ndGgiLCJ0b0JlR3JlYXRlclRoYW4iLCJwcmV2aWV3TGluayIsImxpbmtFbGVtZW50IiwiY2xvc2VzdCIsInRvSGF2ZUF0dHJpYnV0ZSIsIm51bVJ1bnMiLCJhcnJheSIsImNvbnN0YW50RnJvbSIsIm1pbkxlbmd0aCIsIm1heExlbmd0aCIsInBhdGhuYW1lcyIsInJlcXVpcmUiLCJwYXRobmFtZSIsIm1vY2tSZXR1cm5WYWx1ZSIsImV4dGVybmFsSW5kaWNhdG9yIiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50IiwidG9CZSIsImN1cnJlbnRQYXRoIiwicGVuZGluZ0NvdW50Iiwib25OYXZpZ2F0ZSIsImNsaWNrIiwiaW5pdGlhbFBlbmRpbmdDb3VudCIsInVwZGF0ZWRQZW5kaW5nQ291bnQiLCJyZXJlbmRlciIsImluaXRpYWxQcmV2aWV3TGlua3MiLCJpbml0aWFsUHJldmlld0xpbmsiLCJpbml0aWFsTGlua0VsZW1lbnQiLCJpbml0aWFsSHJlZiIsImdldEF0dHJpYnV0ZSIsImluaXRpYWxUYXJnZXQiLCJpbml0aWFsUmVsIiwidXBkYXRlZFByZXZpZXdMaW5rcyIsInVwZGF0ZWRQcmV2aWV3TGluayIsInVwZGF0ZWRMaW5rRWxlbWVudCIsImdldEJ5VGV4dCIsInJlbEF0dHJpYnV0ZSIsInRvQ29udGFpbiIsInF1aWNrQWN0aW9uc0J1dHRvbnMiLCJxdWVyeUFsbEJ5TGFiZWxUZXh0IiwicXVpY2tBY3Rpb25zQnV0dG9uIiwidG9CZUluVGhlRG9jdW1lbnQiLCJxdWlja0FjdGlvbnNHcm91cCIsInBhcmVudEVsZW1lbnQiLCJncm91cEl0ZW1zIiwiZmlyc3RMaW5rIiwiZXhwYW5kZWRHcm91cHMiLCJncm91cHNXaXRoUXVpY2tBY3Rpb25zIiwiQXJyYXkiLCJmcm9tIiwiU2V0Il0sIm1hcHBpbmdzIjoiO0FBSUE7Ozs7Ozs7Q0FPQyxHQUVELDBCQUEwQjtBQUMxQkEsS0FBS0MsSUFBSSxDQUFDLG1CQUFtQixJQUFPLENBQUE7UUFDbENDLGFBQWFGLEtBQUtHLEVBQUUsQ0FBQyxJQUFNO0lBQzdCLENBQUE7Ozs7O21FQWhCb0I7dUJBQ1c7bUNBQ0c7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWdCbENDLFNBQVMsOEVBQThFO0lBQ3JGQyxXQUFXO1FBQ1Qsc0NBQXNDO1FBQ3RDQyxhQUFhQyxLQUFLO1FBQ2xCUCxLQUFLUSxhQUFhO1FBRWxCLGlFQUFpRTtRQUNqRUYsYUFBYUcsT0FBTyxDQUFDLDZCQUE2QkMsS0FBS0MsU0FBUyxDQUFDO1lBQUM7U0FBZ0I7SUFDcEY7SUFFQUMsR0FBRyx1RUFBdUU7UUFDeEUsTUFBTUMsV0FBR0MsTUFBTSxDQUNiRCxXQUFHRSxhQUFhLENBQ2RGLFdBQUdHLE9BQU8sQ0FBQztZQUFFQyxLQUFLO1lBQUdDLEtBQUs7UUFBSSxJQUM5QkwsV0FBR00sT0FBTyxJQUNWLE9BQU9DLG9CQUFvQkM7WUFDekIsTUFBTSxFQUFFQyxPQUFPLEVBQUUsR0FBR0MsSUFBQUEsYUFBTSxnQkFDeEIscUJBQUNDLG9DQUFp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