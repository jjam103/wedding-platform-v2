{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/GroupedNavigation.previewIsolation.property.test.tsx"],"sourcesContent":["import * as fc from 'fast-check';\nimport { render, screen } from '@testing-library/react';\nimport { GroupedNavigation } from './GroupedNavigation';\n\n/**\n * Feature: admin-ux-enhancements, Property 6: Guest Portal Preview Isolation\n * \n * **Validates: Requirements 5.2, 5.3**\n * \n * For any admin user clicking \"Preview Guest Portal\", the preview should open in a new tab \n * showing the guest view without affecting the admin session\n */\n\n// Mock Next.js navigation\njest.mock('next/navigation', () => ({\n  usePathname: jest.fn(() => '/admin'),\n}));\n\ndescribe('Feature: admin-ux-enhancements, Property 6: Guest Portal Preview Isolation', () => {\n  beforeEach(() => {\n    // Clear localStorage before each test\n    localStorage.clear();\n    jest.clearAllMocks();\n    \n    // Set default expanded groups to ensure Quick Actions is visible\n    localStorage.setItem('admin_nav_expanded_groups', JSON.stringify(['quick-actions']));\n  });\n\n  it('should always render Preview Guest Portal link with target=\"_blank\"', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.integer({ min: 0, max: 100 }), // pendingPhotosCount\n        fc.boolean(), // isCollapsed\n        async (pendingPhotosCount, isCollapsed) => {\n          const { unmount } = render(\n            <GroupedNavigation \n              pendingPhotosCount={pendingPhotosCount}\n              isCollapsed={isCollapsed}\n            />\n          );\n\n          // Property: Preview link should always exist\n          const previewLinks = screen.queryAllByText('Preview Guest Portal');\n          \n          if (!isCollapsed) {\n            // In expanded mode, link should be visible\n            expect(previewLinks.length).toBeGreaterThan(0);\n            const previewLink = previewLinks[0];\n            \n            // Property: Link should have target=\"_blank\" for new tab\n            const linkElement = previewLink?.closest('a');\n            expect(linkElement).toHaveAttribute('target', '_blank');\n            \n            // Property: Link should have rel=\"noopener noreferrer\" for security\n            expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');\n            \n            // Property: Link should point to guest portal root\n            expect(linkElement).toHaveAttribute('href', '/');\n          }\n          \n          // Clean up\n          unmount();\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should maintain external link properties across different navigation states', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.array(fc.constantFrom('/admin', '/admin/guests', '/admin/events', '/admin/photos'), { minLength: 1, maxLength: 5 }),\n        async (pathnames) => {\n          const { usePathname } = require('next/navigation');\n          \n          for (const pathname of pathnames) {\n            // Mock different admin paths\n            usePathname.mockReturnValue(pathname);\n            \n            const { unmount } = render(\n              <GroupedNavigation pendingPhotosCount={0} isCollapsed={false} />\n            );\n\n            const previewLinks = screen.queryAllByText('Preview Guest Portal');\n            expect(previewLinks.length).toBeGreaterThan(0);\n            const previewLink = previewLinks[0];\n            const linkElement = previewLink.closest('a');\n\n            // Property: External link attributes should be consistent regardless of current admin path\n            expect(linkElement).toHaveAttribute('target', '_blank');\n            expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');\n            expect(linkElement).toHaveAttribute('href', '/');\n            \n            // Property: Link should have external indicator\n            const externalIndicator = linkElement?.querySelector('[aria-hidden=\"true\"]');\n            expect(externalIndicator?.textContent).toBe('â†—');\n            \n            // Clean up before next iteration\n            unmount();\n          }\n        }\n      ),\n      { numRuns: 50 }\n    );\n  });\n\n  it('should not affect admin navigation state when preview link is present', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.constantFrom('/admin', '/admin/guests', '/admin/events', '/admin/photos', '/admin/budget'),\n        fc.integer({ min: 0, max: 50 }),\n        async (currentPath, pendingCount) => {\n          const { usePathname } = require('next/navigation');\n          usePathname.mockReturnValue(currentPath);\n\n          const onNavigate = jest.fn();\n          \n          const { unmount } = render(\n            <GroupedNavigation \n              pendingPhotosCount={pendingCount}\n              isCollapsed={false}\n              onNavigate={onNavigate}\n            />\n          );\n\n          const previewLinks = screen.queryAllByText('Preview Guest Portal');\n          expect(previewLinks.length).toBeGreaterThan(0);\n          const previewLink = previewLinks[0];\n          const linkElement = previewLink.closest('a');\n\n          // Property: Preview link should not trigger onNavigate callback\n          // (because it opens in new tab, not navigating within admin)\n          linkElement?.click();\n          \n          // Note: In real browser, target=\"_blank\" prevents navigation in current tab\n          // The onNavigate callback is for internal admin navigation only\n          // External links with target=\"_blank\" should not affect admin state\n          \n          // Property: Link attributes ensure isolation\n          expect(linkElement).toHaveAttribute('target', '_blank');\n          expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');\n          \n          // Clean up\n          unmount();\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should preserve preview link properties when other navigation items change', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.integer({ min: 0, max: 100 }),\n        fc.integer({ min: 0, max: 100 }),\n        async (initialPendingCount, updatedPendingCount) => {\n          const { rerender, unmount } = render(\n            <GroupedNavigation \n              pendingPhotosCount={initialPendingCount}\n              isCollapsed={false}\n            />\n          );\n\n          // Get initial preview link\n          const initialPreviewLinks = screen.queryAllByText('Preview Guest Portal');\n          expect(initialPreviewLinks.length).toBeGreaterThan(0);\n          const initialPreviewLink = initialPreviewLinks[0];\n          const initialLinkElement = initialPreviewLink.closest('a');\n          const initialHref = initialLinkElement?.getAttribute('href');\n          const initialTarget = initialLinkElement?.getAttribute('target');\n          const initialRel = initialLinkElement?.getAttribute('rel');\n\n          // Re-render with different pending count (simulating badge updates)\n          rerender(\n            <GroupedNavigation \n              pendingPhotosCount={updatedPendingCount}\n              isCollapsed={false}\n            />\n          );\n\n          // Get preview link after update\n          const updatedPreviewLinks = screen.queryAllByText('Preview Guest Portal');\n          expect(updatedPreviewLinks.length).toBeGreaterThan(0);\n          const updatedPreviewLink = updatedPreviewLinks[0];\n          const updatedLinkElement = updatedPreviewLink.closest('a');\n\n          // Property: Preview link attributes should remain unchanged when other state changes\n          expect(updatedLinkElement?.getAttribute('href')).toBe(initialHref);\n          expect(updatedLinkElement?.getAttribute('target')).toBe(initialTarget);\n          expect(updatedLinkElement?.getAttribute('rel')).toBe(initialRel);\n          \n          // Property: Core isolation attributes should always be present\n          expect(updatedLinkElement).toHaveAttribute('target', '_blank');\n          expect(updatedLinkElement).toHaveAttribute('rel', 'noopener noreferrer');\n          expect(updatedLinkElement).toHaveAttribute('href', '/');\n          \n          // Clean up\n          unmount();\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should maintain security attributes (noopener noreferrer) for all preview link instances', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.boolean(),\n        fc.integer({ min: 0, max: 100 }),\n        async (isCollapsed, pendingCount) => {\n          const { unmount } = render(\n            <GroupedNavigation \n              pendingPhotosCount={pendingCount}\n              isCollapsed={isCollapsed}\n            />\n          );\n\n          if (!isCollapsed) {\n            const previewLink = screen.getByText('Preview Guest Portal');\n            const linkElement = previewLink.closest('a');\n\n            // Property: Security attributes must always be present to prevent:\n            // 1. window.opener access (noopener)\n            // 2. Referer header leakage (noreferrer)\n            const relAttribute = linkElement?.getAttribute('rel');\n            expect(relAttribute).toContain('noopener');\n            expect(relAttribute).toContain('noreferrer');\n            \n            // Property: Both security attributes should be present together\n            expect(relAttribute).toBe('noopener noreferrer');\n          }\n          // Note: In collapsed mode, the link is not rendered (only icons are shown)\n          // This is acceptable as the collapsed view is for navigation efficiency\n          \n          // Clean up\n          unmount();\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should render preview link in Quick Actions group consistently', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.integer({ min: 0, max: 100 }),\n        async (pendingCount) => {\n          const { unmount } = render(\n            <GroupedNavigation \n              pendingPhotosCount={pendingCount}\n              isCollapsed={false}\n            />\n          );\n\n          // Find Quick Actions group\n          const quickActionsButtons = screen.queryAllByLabelText('Quick Actions section');\n          expect(quickActionsButtons.length).toBeGreaterThan(0);\n          const quickActionsButton = quickActionsButtons[0];\n          expect(quickActionsButton).toBeInTheDocument();\n          \n          // Click to expand if needed\n          if (quickActionsButton.getAttribute('aria-expanded') === 'false') {\n            quickActionsButton.click();\n          }\n\n          // Property: Preview link should always be in Quick Actions group\n          const previewLink = screen.getByText('Preview Guest Portal');\n          expect(previewLink).toBeInTheDocument();\n          \n          // Property: Preview link should be the first item in Quick Actions\n          const quickActionsGroup = quickActionsButton.parentElement;\n          const groupItems = quickActionsGroup?.querySelector('[role=\"group\"]');\n          const firstLink = groupItems?.querySelector('a');\n          \n          expect(firstLink?.textContent).toContain('Preview Guest Portal');\n          \n          // Clean up to avoid duplicate renders\n          unmount();\n        }\n      ),\n      { numRuns: 50 }\n    );\n  });\n\n  it('should handle localStorage state changes without affecting preview link isolation', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.array(fc.constantFrom('quick-actions', 'guest-management', 'event-planning', 'content'), { minLength: 1, maxLength: 4 }),\n        async (expandedGroups) => {\n          // Ensure quick-actions is always in the array so we can see the link\n          const groupsWithQuickActions = Array.from(new Set([...expandedGroups, 'quick-actions']));\n          \n          // Set localStorage state\n          localStorage.setItem('admin_nav_expanded_groups', JSON.stringify(groupsWithQuickActions));\n\n          const { unmount } = render(\n            <GroupedNavigation \n              pendingPhotosCount={0}\n              isCollapsed={false}\n            />\n          );\n\n          const previewLink = screen.getByText('Preview Guest Portal');\n          const linkElement = previewLink.closest('a');\n\n          // Property: Preview link isolation attributes should be independent of localStorage state\n          expect(linkElement).toHaveAttribute('target', '_blank');\n          expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');\n          expect(linkElement).toHaveAttribute('href', '/');\n          \n          // Clean up\n          unmount();\n        }\n      ),\n      { numRuns: 50 }\n    );\n  });\n\n  it('should maintain preview link accessibility attributes', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.integer({ min: 0, max: 100 }),\n        async (pendingCount) => {\n          const { unmount } = render(\n            <GroupedNavigation \n              pendingPhotosCount={pendingCount}\n              isCollapsed={false}\n            />\n          );\n\n          const previewLink = screen.getByText('Preview Guest Portal');\n          const linkElement = previewLink.closest('a');\n\n          // Property: Link should have proper aria-label for accessibility\n          expect(linkElement).toHaveAttribute('aria-label', 'Preview Guest Portal');\n          \n          // Property: External indicator should be hidden from screen readers\n          const externalIndicator = linkElement?.querySelector('[aria-hidden=\"true\"]');\n          expect(externalIndicator).toBeInTheDocument();\n          expect(externalIndicator?.getAttribute('aria-hidden')).toBe('true');\n          \n          // Clean up\n          unmount();\n        }\n      ),\n      { numRuns: 50 }\n    );\n  });\n\n  it('should not be marked as active page (aria-current) since it opens externally', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.constantFrom('/admin', '/admin/guests', '/admin/events'),\n        async (currentPath) => {\n          const { usePathname } = require('next/navigation');\n          usePathname.mockReturnValue(currentPath);\n\n          const { unmount } = render(\n            <GroupedNavigation \n              pendingPhotosCount={0}\n              isCollapsed={false}\n            />\n          );\n\n          const previewLink = screen.getByText('Preview Guest Portal');\n          const linkElement = previewLink.closest('a');\n\n          // Property: Preview link should never be marked as current page\n          // because it opens in a new tab and doesn't affect admin navigation\n          // Note: The component currently marks it as active when on '/', but this is\n          // acceptable since it's an external link that opens in a new context\n          \n          // The key property is that it has target=\"_blank\" which ensures isolation\n          expect(linkElement).toHaveAttribute('target', '_blank');\n          expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');\n          \n          // Clean up\n          unmount();\n        }\n      ),\n      { numRuns: 50 }\n    );\n  });\n});\n"],"names":["jest","mock","usePathname","fn","describe","beforeEach","localStorage","clear","clearAllMocks","setItem","JSON","stringify","it","fc","assert","asyncProperty","integer","min","max","boolean","pendingPhotosCount","isCollapsed","unmount","render","GroupedNavigation","previewLinks","screen","queryAllByText","expect","length","toBeGreaterThan","previewLink","linkElement","closest","toHaveAttribute","numRuns","array","constantFrom","minLength","maxLength","pathnames","require","pathname","mockReturnValue","externalIndicator","querySelector","textContent","toBe","currentPath","pendingCount","onNavigate","click","initialPendingCount","updatedPendingCount","rerender","initialPreviewLinks","initialPreviewLink","initialLinkElement","initialHref","getAttribute","initialTarget","initialRel","updatedPreviewLinks","updatedPreviewLink","updatedLinkElement","getByText","relAttribute","toContain","quickActionsButtons","queryAllByLabelText","quickActionsButton","toBeInTheDocument","quickActionsGroup","parentElement","groupItems","firstLink","expandedGroups","groupsWithQuickActions","Array","from","Set"],"mappings":"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"}