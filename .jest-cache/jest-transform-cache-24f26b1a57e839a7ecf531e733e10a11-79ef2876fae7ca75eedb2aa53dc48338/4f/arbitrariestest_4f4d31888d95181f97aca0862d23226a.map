{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/__tests__/helpers/arbitraries.test.ts"],"sourcesContent":["/**\n * Tests for Property-Based Test Arbitraries\n * \n * Validates that arbitraries generate valid data that passes schema validation.\n */\n\nimport * as fc from 'fast-check';\nimport {\n  validGuestArbitrary,\n  validEventArbitrary,\n  validActivityArbitrary,\n  validVendorArbitrary,\n  validAccommodationArbitrary,\n  validLocationArbitrary,\n  createGuestDTOArbitrary,\n  createEventDTOArbitrary,\n  createActivityDTOArbitrary,\n  createVendorDTOArbitrary,\n  createAccommodationDTOArbitrary,\n  createLocationDTOArbitrary,\n} from './arbitraries';\nimport { createGuestSchema } from '@/schemas/guestSchemas';\nimport { createEventSchema } from '@/schemas/eventSchemas';\nimport { createActivitySchema } from '@/schemas/activitySchemas';\nimport { createVendorSchema } from '@/schemas/vendorSchemas';\nimport { createAccommodationSchema } from '@/schemas/accommodationSchemas';\nimport { createLocationSchema } from '@/schemas/locationSchemas';\n\ndescribe('Test Data Arbitraries', () => {\n  describe('Entity Arbitraries', () => {\n    it('should generate valid Guest entities', () => {\n      fc.assert(\n        fc.property(validGuestArbitrary, (guest) => {\n          expect(guest).toHaveProperty('id');\n          expect(guest).toHaveProperty('groupId');\n          expect(guest).toHaveProperty('firstName');\n          expect(guest).toHaveProperty('lastName');\n          expect(guest).toHaveProperty('ageType');\n          expect(guest).toHaveProperty('guestType');\n          expect(['adult', 'child', 'senior']).toContain(guest.ageType);\n        }),\n        { numRuns: 10 }\n      );\n    });\n\n    it('should generate valid Event entities', () => {\n      fc.assert(\n        fc.property(validEventArbitrary, (event) => {\n          expect(event).toHaveProperty('id');\n          expect(event).toHaveProperty('name');\n          expect(event).toHaveProperty('eventType');\n          expect(event).toHaveProperty('startDate');\n          expect(['ceremony', 'reception', 'pre_wedding', 'post_wedding']).toContain(event.eventType);\n          \n          // Validate endDate is after startDate if both present\n          if (event.endDate) {\n            expect(new Date(event.endDate).getTime()).toBeGreaterThanOrEqual(\n              new Date(event.startDate).getTime()\n            );\n          }\n        }),\n        { numRuns: 10 }\n      );\n    });\n\n    it('should generate valid Activity entities', () => {\n      fc.assert(\n        fc.property(validActivityArbitrary, (activity) => {\n          expect(activity).toHaveProperty('id');\n          expect(activity).toHaveProperty('name');\n          expect(activity).toHaveProperty('activityType');\n          expect(activity).toHaveProperty('startTime');\n          \n          // Validate endTime is after startTime if both present\n          if (activity.endTime) {\n            expect(new Date(activity.endTime).getTime()).toBeGreaterThanOrEqual(\n              new Date(activity.startTime).getTime()\n            );\n          }\n          \n          // Validate hostSubsidy <= costPerPerson if both present\n          if (activity.hostSubsidy !== null && activity.costPerPerson !== null) {\n            expect(activity.hostSubsidy).toBeLessThanOrEqual(activity.costPerPerson);\n          }\n        }),\n        { numRuns: 10 }\n      );\n    });\n\n    it('should generate valid Vendor entities', () => {\n      fc.assert(\n        fc.property(validVendorArbitrary, (vendor) => {\n          expect(vendor).toHaveProperty('id');\n          expect(vendor).toHaveProperty('name');\n          expect(vendor).toHaveProperty('category');\n          expect(vendor).toHaveProperty('pricingModel');\n          expect(vendor).toHaveProperty('baseCost');\n          expect(vendor).toHaveProperty('amountPaid');\n          \n          // Validate amountPaid <= baseCost\n          expect(vendor.amountPaid).toBeLessThanOrEqual(vendor.baseCost);\n        }),\n        { numRuns: 10 }\n      );\n    });\n\n    it('should generate valid Accommodation entities', () => {\n      fc.assert(\n        fc.property(validAccommodationArbitrary, (accommodation) => {\n          expect(accommodation).toHaveProperty('id');\n          expect(accommodation).toHaveProperty('name');\n          expect(accommodation).toHaveProperty('status');\n          expect(['draft', 'published']).toContain(accommodation.status);\n        }),\n        { numRuns: 10 }\n      );\n    });\n\n    it('should generate valid Location entities', () => {\n      fc.assert(\n        fc.property(validLocationArbitrary, (location) => {\n          expect(location).toHaveProperty('id');\n          expect(location).toHaveProperty('name');\n          \n          // Validate coordinates if present\n          if (location.coordinates) {\n            expect(location.coordinates.lat).toBeGreaterThanOrEqual(-90);\n            expect(location.coordinates.lat).toBeLessThanOrEqual(90);\n            expect(location.coordinates.lng).toBeGreaterThanOrEqual(-180);\n            expect(location.coordinates.lng).toBeLessThanOrEqual(180);\n          }\n        }),\n        { numRuns: 10 }\n      );\n    });\n  });\n\n  describe('DTO Arbitraries', () => {\n    it('should generate data that passes createGuestSchema validation', () => {\n      fc.assert(\n        fc.property(createGuestDTOArbitrary, (guestDTO) => {\n          const result = createGuestSchema.safeParse(guestDTO);\n          if (!result.success) {\n            console.error('Validation errors:', result.error.issues);\n          }\n          expect(result.success).toBe(true);\n        }),\n        { numRuns: 10 }\n      );\n    });\n\n    it('should generate data that passes createEventSchema validation', () => {\n      fc.assert(\n        fc.property(createEventDTOArbitrary, (eventDTO) => {\n          const result = createEventSchema.safeParse(eventDTO);\n          if (!result.success) {\n            console.error('Validation errors:', result.error.issues);\n          }\n          expect(result.success).toBe(true);\n        }),\n        { numRuns: 10 }\n      );\n    });\n\n    it('should generate data that passes createActivitySchema validation', () => {\n      fc.assert(\n        fc.property(createActivityDTOArbitrary, (activityDTO) => {\n          const result = createActivitySchema.safeParse(activityDTO);\n          if (!result.success) {\n            console.error('Validation errors:', result.error.issues);\n          }\n          expect(result.success).toBe(true);\n        }),\n        { numRuns: 10 }\n      );\n    });\n\n    it('should generate data that passes createVendorSchema validation', () => {\n      fc.assert(\n        fc.property(createVendorDTOArbitrary, (vendorDTO) => {\n          const result = createVendorSchema.safeParse(vendorDTO);\n          if (!result.success) {\n            console.error('Validation errors:', result.error.issues);\n          }\n          expect(result.success).toBe(true);\n        }),\n        { numRuns: 10 }\n      );\n    });\n\n    it('should generate data that passes createAccommodationSchema validation', () => {\n      fc.assert(\n        fc.property(createAccommodationDTOArbitrary, (accommodationDTO) => {\n          const result = createAccommodationSchema.safeParse(accommodationDTO);\n          if (!result.success) {\n            console.error('Validation errors:', result.error.issues);\n          }\n          expect(result.success).toBe(true);\n        }),\n        { numRuns: 10 }\n      );\n    });\n\n    it('should generate data that passes createLocationSchema validation', () => {\n      fc.assert(\n        fc.property(createLocationDTOArbitrary, (locationDTO) => {\n          const result = createLocationSchema.safeParse(locationDTO);\n          if (!result.success) {\n            console.error('Validation errors:', result.error.issues);\n          }\n          expect(result.success).toBe(true);\n        }),\n        { numRuns: 10 }\n      );\n    });\n  });\n\n  describe('Constraint Validation', () => {\n    it('should ensure Event endDate is always after or equal to startDate', () => {\n      fc.assert(\n        fc.property(validEventArbitrary, (event) => {\n          if (event.endDate) {\n            const startTime = new Date(event.startDate).getTime();\n            const endTime = new Date(event.endDate).getTime();\n            expect(endTime).toBeGreaterThanOrEqual(startTime);\n          }\n          return true;\n        }),\n        { numRuns: 50 }\n      );\n    });\n\n    it('should ensure Activity endTime is always after or equal to startTime', () => {\n      fc.assert(\n        fc.property(validActivityArbitrary, (activity) => {\n          if (activity.endTime) {\n            const startTime = new Date(activity.startTime).getTime();\n            const endTime = new Date(activity.endTime).getTime();\n            expect(endTime).toBeGreaterThanOrEqual(startTime);\n          }\n          return true;\n        }),\n        { numRuns: 50 }\n      );\n    });\n\n    it('should ensure Activity hostSubsidy is always <= costPerPerson', () => {\n      fc.assert(\n        fc.property(validActivityArbitrary, (activity) => {\n          if (activity.hostSubsidy !== null && activity.costPerPerson !== null) {\n            expect(activity.hostSubsidy).toBeLessThanOrEqual(activity.costPerPerson);\n          }\n          return true;\n        }),\n        { numRuns: 50 }\n      );\n    });\n\n    it('should ensure Vendor amountPaid is always <= baseCost', () => {\n      fc.assert(\n        fc.property(validVendorArbitrary, (vendor) => {\n          expect(vendor.amountPaid).toBeLessThanOrEqual(vendor.baseCost);\n          return true;\n        }),\n        { numRuns: 50 }\n      );\n    });\n\n    it('should ensure Location coordinates are within valid ranges', () => {\n      fc.assert(\n        fc.property(validLocationArbitrary, (location) => {\n          if (location.coordinates) {\n            expect(location.coordinates.lat).toBeGreaterThanOrEqual(-90);\n            expect(location.coordinates.lat).toBeLessThanOrEqual(90);\n            expect(location.coordinates.lng).toBeGreaterThanOrEqual(-180);\n            expect(location.coordinates.lng).toBeLessThanOrEqual(180);\n          }\n          return true;\n        }),\n        { numRuns: 50 }\n      );\n    });\n  });\n});\n"],"names":["describe","it","fc","assert","property","validGuestArbitrary","guest","expect","toHaveProperty","toContain","ageType","numRuns","validEventArbitrary","event","eventType","endDate","Date","getTime","toBeGreaterThanOrEqual","startDate","validActivityArbitrary","activity","endTime","startTime","hostSubsidy","costPerPerson","toBeLessThanOrEqual","validVendorArbitrary","vendor","amountPaid","baseCost","validAccommodationArbitrary","accommodation","status","validLocationArbitrary","location","coordinates","lat","lng","createGuestDTOArbitrary","guestDTO","result","createGuestSchema","safeParse","success","console","error","issues","toBe","createEventDTOArbitrary","eventDTO","createEventSchema","createActivityDTOArbitrary","activityDTO","createActivitySchema","createVendorDTOArbitrary","vendorDTO","createVendorSchema","createAccommodationDTOArbitrary","accommodationDTO","createAccommodationSchema","createLocationDTOArbitrary","locationDTO","createLocationSchema"],"mappings":"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"}