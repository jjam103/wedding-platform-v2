6d05fa0f2aa87137cdc35136ff084602
/**
 * Unit Tests for Guest Activities Page
 * 
 * Tests activity list display, filtering, RSVP status, capacity warnings, and interactions.
 * 
 * Requirements: 9.3, 9.4, 9.5, 9.7
 */ "use strict";
// Mock the ActivityCard component
jest.mock('@/components/guest/ActivityCard', ()=>({
        ActivityCard: ({ activity, onClick })=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                "data-testid": `activity-card-${activity.id}`,
                onClick: onClick,
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("h3", {
                        children: activity.name
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                        "data-testid": "activity-type",
                        children: activity.activityType
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                        "data-testid": "rsvp-status",
                        children: activity.rsvpStatus
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                        "data-testid": "capacity-remaining",
                        children: activity.capacityRemaining
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                        "data-testid": "net-cost",
                        children: activity.netCost
                    })
                ]
            })
    }));
// Mock the ActivityPreviewModal component
jest.mock('@/components/guest/ActivityPreviewModal', ()=>({
        ActivityPreviewModal: ({ activityId, isOpen, onClose })=>isOpen ? /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                "data-testid": "activity-preview-modal",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                        children: [
                            "Activity ID: ",
                            activityId
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                        onClick: onClose,
                        children: "Close"
                    })
                ]
            }) : null
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _userevent = /*#__PURE__*/ _interop_require_default(require("@testing-library/user-event"));
const _page = /*#__PURE__*/ _interop_require_default(require("./page"));
const _factories = require("../../../__tests__/helpers/factories");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock fetch
global.fetch = jest.fn();
describe('GuestActivitiesPage', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    describe('Activity List Display', ()=>{
        it('should display list of activities with mock data', async ()=>{
            const mockActivities = [
                (0, _factories.createMockActivity)({
                    id: 'activity-1',
                    name: 'Beach Volleyball',
                    activityType: 'activity',
                    rsvpStatus: 'attending'
                }),
                (0, _factories.createMockActivity)({
                    id: 'activity-2',
                    name: 'Welcome Dinner',
                    activityType: 'meal',
                    rsvpStatus: 'pending'
                })
            ];
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockActivities
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
                expect(_react.screen.getByText('Welcome Dinner')).toBeInTheDocument();
            });
        });
        it('should display RSVP status for each activity', async ()=>{
            const mockActivities = [
                (0, _factories.createMockActivity)({
                    id: 'activity-1',
                    name: 'Activity 1',
                    rsvpStatus: 'attending'
                }),
                (0, _factories.createMockActivity)({
                    id: 'activity-2',
                    name: 'Activity 2',
                    rsvpStatus: 'declined'
                }),
                (0, _factories.createMockActivity)({
                    id: 'activity-3',
                    name: 'Activity 3',
                    rsvpStatus: 'maybe'
                }),
                (0, _factories.createMockActivity)({
                    id: 'activity-4',
                    name: 'Activity 4',
                    rsvpStatus: 'pending'
                })
            ];
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockActivities
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                const statuses = _react.screen.getAllByTestId('rsvp-status');
                expect(statuses[0]).toHaveTextContent('attending');
                expect(statuses[1]).toHaveTextContent('declined');
                expect(statuses[2]).toHaveTextContent('maybe');
                expect(statuses[3]).toHaveTextContent('pending');
            });
        });
        it('should display capacity information', async ()=>{
            const mockActivities = [
                (0, _factories.createMockActivity)({
                    id: 'activity-1',
                    name: 'Activity 1',
                    capacity: 50,
                    capacityRemaining: 25
                })
            ];
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockActivities
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByTestId('capacity-remaining')).toHaveTextContent('25');
            });
        });
        it('should display net cost after subsidy', async ()=>{
            const mockActivities = [
                (0, _factories.createMockActivity)({
                    id: 'activity-1',
                    name: 'Activity 1',
                    netCost: 50
                })
            ];
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockActivities
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByTestId('net-cost')).toHaveTextContent('50');
            });
        });
    });
    describe('Filtering', ()=>{
        it('should filter activities by type', async ()=>{
            const mockActivities = [
                (0, _factories.createMockActivity)({
                    id: 'activity-1',
                    name: 'Beach Volleyball',
                    activityType: 'activity'
                }),
                (0, _factories.createMockActivity)({
                    id: 'activity-2',
                    name: 'Wedding Ceremony',
                    activityType: 'ceremony'
                }),
                (0, _factories.createMockActivity)({
                    id: 'activity-3',
                    name: 'Welcome Dinner',
                    activityType: 'meal'
                })
            ];
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockActivities
                    })
            });
            const user = _userevent.default.setup();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            });
            // Filter by ceremony
            const typeSelect = _react.screen.getByLabelText(/activity type/i);
            await user.selectOptions(typeSelect, 'ceremony');
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Beach Volleyball')).not.toBeInTheDocument();
                expect(_react.screen.getByText('Wedding Ceremony')).toBeInTheDocument();
                expect(_react.screen.queryByText('Welcome Dinner')).not.toBeInTheDocument();
            });
        });
        it('should filter activities by date range (from date)', async ()=>{
            const mockActivities = [
                (0, _factories.createMockActivity)({
                    id: 'activity-1',
                    name: 'Activity 1',
                    startTime: '2025-06-01T10:00:00Z'
                }),
                (0, _factories.createMockActivity)({
                    id: 'activity-2',
                    name: 'Activity 2',
                    startTime: '2025-06-15T10:00:00Z'
                }),
                (0, _factories.createMockActivity)({
                    id: 'activity-3',
                    name: 'Activity 3',
                    startTime: '2025-06-30T10:00:00Z'
                })
            ];
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockActivities
                    })
            });
            const user = _userevent.default.setup();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Activity 1')).toBeInTheDocument();
            });
            // Filter by from date
            const fromDateInput = _react.screen.getByLabelText(/from date/i);
            await user.type(fromDateInput, '2025-06-10');
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Activity 1')).not.toBeInTheDocument();
                expect(_react.screen.getByText('Activity 2')).toBeInTheDocument();
                expect(_react.screen.getByText('Activity 3')).toBeInTheDocument();
            });
        });
        it('should filter activities by date range (to date)', async ()=>{
            const mockActivities = [
                (0, _factories.createMockActivity)({
                    id: 'activity-1',
                    name: 'Activity 1',
                    startTime: '2025-06-01T10:00:00Z'
                }),
                (0, _factories.createMockActivity)({
                    id: 'activity-2',
                    name: 'Activity 2',
                    startTime: '2025-06-15T10:00:00Z'
                }),
                (0, _factories.createMockActivity)({
                    id: 'activity-3',
                    name: 'Activity 3',
                    startTime: '2025-06-30T10:00:00Z'
                })
            ];
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockActivities
                    })
            });
            const user = _userevent.default.setup();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Activity 1')).toBeInTheDocument();
            });
            // Filter by to date
            const toDateInput = _react.screen.getByLabelText(/to date/i);
            await user.type(toDateInput, '2025-06-20');
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Activity 1')).toBeInTheDocument();
                expect(_react.screen.getByText('Activity 2')).toBeInTheDocument();
                expect(_react.screen.queryByText('Activity 3')).not.toBeInTheDocument();
            });
        });
        it('should clear all filters when clear button clicked', async ()=>{
            const mockActivities = [
                (0, _factories.createMockActivity)({
                    id: 'activity-1',
                    name: 'Activity 1',
                    activityType: 'ceremony',
                    startTime: '2025-06-01T10:00:00Z'
                }),
                (0, _factories.createMockActivity)({
                    id: 'activity-2',
                    name: 'Activity 2',
                    activityType: 'meal',
                    startTime: '2025-06-15T10:00:00Z'
                })
            ];
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockActivities
                    })
            });
            const user = _userevent.default.setup();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Activity 1')).toBeInTheDocument();
            });
            // Apply filters
            const typeSelect = _react.screen.getByLabelText(/activity type/i);
            await user.selectOptions(typeSelect, 'ceremony');
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Activity 2')).not.toBeInTheDocument();
            });
            // Clear filters
            const clearButton = _react.screen.getByRole('button', {
                name: /clear filters/i
            });
            await user.click(clearButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Activity 1')).toBeInTheDocument();
                expect(_react.screen.getByText('Activity 2')).toBeInTheDocument();
            });
        });
    });
    describe('Loading State', ()=>{
        it('should display loading spinner while fetching activities', ()=>{
            global.fetch.mockImplementation(()=>new Promise(()=>{}) // Never resolves
            );
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            expect(_react.screen.getByRole('status', {
                hidden: true
            })).toBeInTheDocument();
        });
    });
    describe('Error State', ()=>{
        it('should display error message when fetch fails', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: false,
                        error: {
                            message: 'Failed to fetch activities'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/error loading activities/i)).toBeInTheDocument();
                expect(_react.screen.getByText(/failed to fetch activities/i)).toBeInTheDocument();
            });
        });
        it('should allow retry after error', async ()=>{
            const mockActivities = [
                (0, _factories.createMockActivity)({
                    id: 'activity-1',
                    name: 'Activity 1'
                })
            ];
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: false,
                        error: {
                            message: 'Network error'
                        }
                    })
            }).mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockActivities
                    })
            });
            const user = _userevent.default.setup();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/error loading activities/i)).toBeInTheDocument();
            });
            const retryButton = _react.screen.getByRole('button', {
                name: /try again/i
            });
            await user.click(retryButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Activity 1')).toBeInTheDocument();
            });
        });
    });
    describe('Empty State', ()=>{
        it('should display empty state when no activities found', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: []
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/no activities found/i)).toBeInTheDocument();
            });
        });
        it('should display different message when filters return no results', async ()=>{
            const mockActivities = [
                (0, _factories.createMockActivity)({
                    id: 'activity-1',
                    name: 'Activity 1',
                    activityType: 'ceremony'
                })
            ];
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockActivities
                    })
            });
            const user = _userevent.default.setup();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Activity 1')).toBeInTheDocument();
            });
            // Apply filter that returns no results
            const typeSelect = _react.screen.getByLabelText(/activity type/i);
            await user.selectOptions(typeSelect, 'meal');
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/no activities match your filters/i)).toBeInTheDocument();
            });
        });
    });
    describe('Activity Card Click', ()=>{
        it('should open preview modal when activity card clicked', async ()=>{
            const mockActivities = [
                (0, _factories.createMockActivity)({
                    id: 'activity-1',
                    name: 'Beach Volleyball'
                })
            ];
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockActivities
                    })
            });
            const user = _userevent.default.setup();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            });
            const activityCard = _react.screen.getByTestId('activity-card-activity-1');
            await user.click(activityCard);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByTestId('activity-preview-modal')).toBeInTheDocument();
                expect(_react.screen.getByText('Activity ID: activity-1')).toBeInTheDocument();
            });
        });
        it('should close preview modal when close button clicked', async ()=>{
            const mockActivities = [
                (0, _factories.createMockActivity)({
                    id: 'activity-1',
                    name: 'Beach Volleyball'
                })
            ];
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockActivities
                    })
            });
            const user = _userevent.default.setup();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            });
            // Open modal
            const activityCard = _react.screen.getByTestId('activity-card-activity-1');
            await user.click(activityCard);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByTestId('activity-preview-modal')).toBeInTheDocument();
            });
            // Close modal
            const closeButton = _react.screen.getByRole('button', {
                name: /close/i
            });
            await user.click(closeButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByTestId('activity-preview-modal')).not.toBeInTheDocument();
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2d1ZXN0L2FjdGl2aXRpZXMvcGFnZS50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVuaXQgVGVzdHMgZm9yIEd1ZXN0IEFjdGl2aXRpZXMgUGFnZVxuICogXG4gKiBUZXN0cyBhY3Rpdml0eSBsaXN0IGRpc3BsYXksIGZpbHRlcmluZywgUlNWUCBzdGF0dXMsIGNhcGFjaXR5IHdhcm5pbmdzLCBhbmQgaW50ZXJhY3Rpb25zLlxuICogXG4gKiBSZXF1aXJlbWVudHM6IDkuMywgOS40LCA5LjUsIDkuN1xuICovXG5cbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCB3YWl0Rm9yLCB3aXRoaW4gfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB1c2VyRXZlbnQgZnJvbSAnQHRlc3RpbmctbGlicmFyeS91c2VyLWV2ZW50JztcbmltcG9ydCBHdWVzdEFjdGl2aXRpZXNQYWdlIGZyb20gJy4vcGFnZSc7XG5pbXBvcnQgeyBjcmVhdGVNb2NrQWN0aXZpdHkgfSBmcm9tICdAL19fdGVzdHNfXy9oZWxwZXJzL2ZhY3Rvcmllcyc7XG5cbi8vIE1vY2sgdGhlIEFjdGl2aXR5Q2FyZCBjb21wb25lbnRcbmplc3QubW9jaygnQC9jb21wb25lbnRzL2d1ZXN0L0FjdGl2aXR5Q2FyZCcsICgpID0+ICh7XG4gIEFjdGl2aXR5Q2FyZDogKHsgYWN0aXZpdHksIG9uQ2xpY2sgfTogYW55KSA9PiAoXG4gICAgPGRpdiBkYXRhLXRlc3RpZD17YGFjdGl2aXR5LWNhcmQtJHthY3Rpdml0eS5pZH1gfSBvbkNsaWNrPXtvbkNsaWNrfT5cbiAgICAgIDxoMz57YWN0aXZpdHkubmFtZX08L2gzPlxuICAgICAgPHNwYW4gZGF0YS10ZXN0aWQ9XCJhY3Rpdml0eS10eXBlXCI+e2FjdGl2aXR5LmFjdGl2aXR5VHlwZX08L3NwYW4+XG4gICAgICA8c3BhbiBkYXRhLXRlc3RpZD1cInJzdnAtc3RhdHVzXCI+e2FjdGl2aXR5LnJzdnBTdGF0dXN9PC9zcGFuPlxuICAgICAgPHNwYW4gZGF0YS10ZXN0aWQ9XCJjYXBhY2l0eS1yZW1haW5pbmdcIj57YWN0aXZpdHkuY2FwYWNpdHlSZW1haW5pbmd9PC9zcGFuPlxuICAgICAgPHNwYW4gZGF0YS10ZXN0aWQ9XCJuZXQtY29zdFwiPnthY3Rpdml0eS5uZXRDb3N0fTwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgKSxcbn0pKTtcblxuLy8gTW9jayB0aGUgQWN0aXZpdHlQcmV2aWV3TW9kYWwgY29tcG9uZW50XG5qZXN0Lm1vY2soJ0AvY29tcG9uZW50cy9ndWVzdC9BY3Rpdml0eVByZXZpZXdNb2RhbCcsICgpID0+ICh7XG4gIEFjdGl2aXR5UHJldmlld01vZGFsOiAoeyBhY3Rpdml0eUlkLCBpc09wZW4sIG9uQ2xvc2UgfTogYW55KSA9PiAoXG4gICAgaXNPcGVuID8gKFxuICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImFjdGl2aXR5LXByZXZpZXctbW9kYWxcIj5cbiAgICAgICAgPHNwYW4+QWN0aXZpdHkgSUQ6IHthY3Rpdml0eUlkfTwvc3Bhbj5cbiAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkNsb3NlfT5DbG9zZTwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgKSA6IG51bGxcbiAgKSxcbn0pKTtcblxuLy8gTW9jayBmZXRjaFxuZ2xvYmFsLmZldGNoID0gamVzdC5mbigpO1xuXG5kZXNjcmliZSgnR3Vlc3RBY3Rpdml0aWVzUGFnZScsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBY3Rpdml0eSBMaXN0IERpc3BsYXknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGxpc3Qgb2YgYWN0aXZpdGllcyB3aXRoIG1vY2sgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tBY3Rpdml0aWVzID0gW1xuICAgICAgICBjcmVhdGVNb2NrQWN0aXZpdHkoe1xuICAgICAgICAgIGlkOiAnYWN0aXZpdHktMScsXG4gICAgICAgICAgbmFtZTogJ0JlYWNoIFZvbGxleWJhbGwnLFxuICAgICAgICAgIGFjdGl2aXR5VHlwZTogJ2FjdGl2aXR5JyxcbiAgICAgICAgICByc3ZwU3RhdHVzOiAnYXR0ZW5kaW5nJyxcbiAgICAgICAgfSksXG4gICAgICAgIGNyZWF0ZU1vY2tBY3Rpdml0eSh7XG4gICAgICAgICAgaWQ6ICdhY3Rpdml0eS0yJyxcbiAgICAgICAgICBuYW1lOiAnV2VsY29tZSBEaW5uZXInLFxuICAgICAgICAgIGFjdGl2aXR5VHlwZTogJ21lYWwnLFxuICAgICAgICAgIHJzdnBTdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgfSksXG4gICAgICBdO1xuXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja0FjdGl2aXRpZXMgfSksXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxHdWVzdEFjdGl2aXRpZXNQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdCZWFjaCBWb2xsZXliYWxsJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdXZWxjb21lIERpbm5lcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgUlNWUCBzdGF0dXMgZm9yIGVhY2ggYWN0aXZpdHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQWN0aXZpdGllcyA9IFtcbiAgICAgICAgY3JlYXRlTW9ja0FjdGl2aXR5KHtcbiAgICAgICAgICBpZDogJ2FjdGl2aXR5LTEnLFxuICAgICAgICAgIG5hbWU6ICdBY3Rpdml0eSAxJyxcbiAgICAgICAgICByc3ZwU3RhdHVzOiAnYXR0ZW5kaW5nJyxcbiAgICAgICAgfSksXG4gICAgICAgIGNyZWF0ZU1vY2tBY3Rpdml0eSh7XG4gICAgICAgICAgaWQ6ICdhY3Rpdml0eS0yJyxcbiAgICAgICAgICBuYW1lOiAnQWN0aXZpdHkgMicsXG4gICAgICAgICAgcnN2cFN0YXR1czogJ2RlY2xpbmVkJyxcbiAgICAgICAgfSksXG4gICAgICAgIGNyZWF0ZU1vY2tBY3Rpdml0eSh7XG4gICAgICAgICAgaWQ6ICdhY3Rpdml0eS0zJyxcbiAgICAgICAgICBuYW1lOiAnQWN0aXZpdHkgMycsXG4gICAgICAgICAgcnN2cFN0YXR1czogJ21heWJlJyxcbiAgICAgICAgfSksXG4gICAgICAgIGNyZWF0ZU1vY2tBY3Rpdml0eSh7XG4gICAgICAgICAgaWQ6ICdhY3Rpdml0eS00JyxcbiAgICAgICAgICBuYW1lOiAnQWN0aXZpdHkgNCcsXG4gICAgICAgICAgcnN2cFN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICB9KSxcbiAgICAgIF07XG5cbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrQWN0aXZpdGllcyB9KSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPEd1ZXN0QWN0aXZpdGllc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhdHVzZXMgPSBzY3JlZW4uZ2V0QWxsQnlUZXN0SWQoJ3JzdnAtc3RhdHVzJyk7XG4gICAgICAgIGV4cGVjdChzdGF0dXNlc1swXSkudG9IYXZlVGV4dENvbnRlbnQoJ2F0dGVuZGluZycpO1xuICAgICAgICBleHBlY3Qoc3RhdHVzZXNbMV0pLnRvSGF2ZVRleHRDb250ZW50KCdkZWNsaW5lZCcpO1xuICAgICAgICBleHBlY3Qoc3RhdHVzZXNbMl0pLnRvSGF2ZVRleHRDb250ZW50KCdtYXliZScpO1xuICAgICAgICBleHBlY3Qoc3RhdHVzZXNbM10pLnRvSGF2ZVRleHRDb250ZW50KCdwZW5kaW5nJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBjYXBhY2l0eSBpbmZvcm1hdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tBY3Rpdml0aWVzID0gW1xuICAgICAgICBjcmVhdGVNb2NrQWN0aXZpdHkoe1xuICAgICAgICAgIGlkOiAnYWN0aXZpdHktMScsXG4gICAgICAgICAgbmFtZTogJ0FjdGl2aXR5IDEnLFxuICAgICAgICAgIGNhcGFjaXR5OiA1MCxcbiAgICAgICAgICBjYXBhY2l0eVJlbWFpbmluZzogMjUsXG4gICAgICAgIH0pLFxuICAgICAgXTtcblxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tBY3Rpdml0aWVzIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8R3Vlc3RBY3Rpdml0aWVzUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdjYXBhY2l0eS1yZW1haW5pbmcnKSkudG9IYXZlVGV4dENvbnRlbnQoJzI1Jyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBuZXQgY29zdCBhZnRlciBzdWJzaWR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0FjdGl2aXRpZXMgPSBbXG4gICAgICAgIGNyZWF0ZU1vY2tBY3Rpdml0eSh7XG4gICAgICAgICAgaWQ6ICdhY3Rpdml0eS0xJyxcbiAgICAgICAgICBuYW1lOiAnQWN0aXZpdHkgMScsXG4gICAgICAgICAgbmV0Q29zdDogNTAsXG4gICAgICAgIH0pLFxuICAgICAgXTtcblxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tBY3Rpdml0aWVzIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8R3Vlc3RBY3Rpdml0aWVzUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCduZXQtY29zdCcpKS50b0hhdmVUZXh0Q29udGVudCgnNTAnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRmlsdGVyaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZmlsdGVyIGFjdGl2aXRpZXMgYnkgdHlwZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tBY3Rpdml0aWVzID0gW1xuICAgICAgICBjcmVhdGVNb2NrQWN0aXZpdHkoe1xuICAgICAgICAgIGlkOiAnYWN0aXZpdHktMScsXG4gICAgICAgICAgbmFtZTogJ0JlYWNoIFZvbGxleWJhbGwnLFxuICAgICAgICAgIGFjdGl2aXR5VHlwZTogJ2FjdGl2aXR5JyxcbiAgICAgICAgfSksXG4gICAgICAgIGNyZWF0ZU1vY2tBY3Rpdml0eSh7XG4gICAgICAgICAgaWQ6ICdhY3Rpdml0eS0yJyxcbiAgICAgICAgICBuYW1lOiAnV2VkZGluZyBDZXJlbW9ueScsXG4gICAgICAgICAgYWN0aXZpdHlUeXBlOiAnY2VyZW1vbnknLFxuICAgICAgICB9KSxcbiAgICAgICAgY3JlYXRlTW9ja0FjdGl2aXR5KHtcbiAgICAgICAgICBpZDogJ2FjdGl2aXR5LTMnLFxuICAgICAgICAgIG5hbWU6ICdXZWxjb21lIERpbm5lcicsXG4gICAgICAgICAgYWN0aXZpdHlUeXBlOiAnbWVhbCcsXG4gICAgICAgIH0pLFxuICAgICAgXTtcblxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tBY3Rpdml0aWVzIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICAgIHJlbmRlcig8R3Vlc3RBY3Rpdml0aWVzUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQmVhY2ggVm9sbGV5YmFsbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEZpbHRlciBieSBjZXJlbW9ueVxuICAgICAgY29uc3QgdHlwZVNlbGVjdCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvYWN0aXZpdHkgdHlwZS9pKTtcbiAgICAgIGF3YWl0IHVzZXIuc2VsZWN0T3B0aW9ucyh0eXBlU2VsZWN0LCAnY2VyZW1vbnknKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ0JlYWNoIFZvbGxleWJhbGwnKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdXZWRkaW5nIENlcmVtb255JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ1dlbGNvbWUgRGlubmVyJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpbHRlciBhY3Rpdml0aWVzIGJ5IGRhdGUgcmFuZ2UgKGZyb20gZGF0ZSknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQWN0aXZpdGllcyA9IFtcbiAgICAgICAgY3JlYXRlTW9ja0FjdGl2aXR5KHtcbiAgICAgICAgICBpZDogJ2FjdGl2aXR5LTEnLFxuICAgICAgICAgIG5hbWU6ICdBY3Rpdml0eSAxJyxcbiAgICAgICAgICBzdGFydFRpbWU6ICcyMDI1LTA2LTAxVDEwOjAwOjAwWicsXG4gICAgICAgIH0pLFxuICAgICAgICBjcmVhdGVNb2NrQWN0aXZpdHkoe1xuICAgICAgICAgIGlkOiAnYWN0aXZpdHktMicsXG4gICAgICAgICAgbmFtZTogJ0FjdGl2aXR5IDInLFxuICAgICAgICAgIHN0YXJ0VGltZTogJzIwMjUtMDYtMTVUMTA6MDA6MDBaJyxcbiAgICAgICAgfSksXG4gICAgICAgIGNyZWF0ZU1vY2tBY3Rpdml0eSh7XG4gICAgICAgICAgaWQ6ICdhY3Rpdml0eS0zJyxcbiAgICAgICAgICBuYW1lOiAnQWN0aXZpdHkgMycsXG4gICAgICAgICAgc3RhcnRUaW1lOiAnMjAyNS0wNi0zMFQxMDowMDowMFonLFxuICAgICAgICB9KSxcbiAgICAgIF07XG5cbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrQWN0aXZpdGllcyB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgICByZW5kZXIoPEd1ZXN0QWN0aXZpdGllc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0FjdGl2aXR5IDEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBGaWx0ZXIgYnkgZnJvbSBkYXRlXG4gICAgICBjb25zdCBmcm9tRGF0ZUlucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9mcm9tIGRhdGUvaSk7XG4gICAgICBhd2FpdCB1c2VyLnR5cGUoZnJvbURhdGVJbnB1dCwgJzIwMjUtMDYtMTAnKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ0FjdGl2aXR5IDEnKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdBY3Rpdml0eSAyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdBY3Rpdml0eSAzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmlsdGVyIGFjdGl2aXRpZXMgYnkgZGF0ZSByYW5nZSAodG8gZGF0ZSknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQWN0aXZpdGllcyA9IFtcbiAgICAgICAgY3JlYXRlTW9ja0FjdGl2aXR5KHtcbiAgICAgICAgICBpZDogJ2FjdGl2aXR5LTEnLFxuICAgICAgICAgIG5hbWU6ICdBY3Rpdml0eSAxJyxcbiAgICAgICAgICBzdGFydFRpbWU6ICcyMDI1LTA2LTAxVDEwOjAwOjAwWicsXG4gICAgICAgIH0pLFxuICAgICAgICBjcmVhdGVNb2NrQWN0aXZpdHkoe1xuICAgICAgICAgIGlkOiAnYWN0aXZpdHktMicsXG4gICAgICAgICAgbmFtZTogJ0FjdGl2aXR5IDInLFxuICAgICAgICAgIHN0YXJ0VGltZTogJzIwMjUtMDYtMTVUMTA6MDA6MDBaJyxcbiAgICAgICAgfSksXG4gICAgICAgIGNyZWF0ZU1vY2tBY3Rpdml0eSh7XG4gICAgICAgICAgaWQ6ICdhY3Rpdml0eS0zJyxcbiAgICAgICAgICBuYW1lOiAnQWN0aXZpdHkgMycsXG4gICAgICAgICAgc3RhcnRUaW1lOiAnMjAyNS0wNi0zMFQxMDowMDowMFonLFxuICAgICAgICB9KSxcbiAgICAgIF07XG5cbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrQWN0aXZpdGllcyB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgICByZW5kZXIoPEd1ZXN0QWN0aXZpdGllc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0FjdGl2aXR5IDEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBGaWx0ZXIgYnkgdG8gZGF0ZVxuICAgICAgY29uc3QgdG9EYXRlSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL3RvIGRhdGUvaSk7XG4gICAgICBhd2FpdCB1c2VyLnR5cGUodG9EYXRlSW5wdXQsICcyMDI1LTA2LTIwJyk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQWN0aXZpdHkgMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQWN0aXZpdHkgMicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdBY3Rpdml0eSAzJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNsZWFyIGFsbCBmaWx0ZXJzIHdoZW4gY2xlYXIgYnV0dG9uIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQWN0aXZpdGllcyA9IFtcbiAgICAgICAgY3JlYXRlTW9ja0FjdGl2aXR5KHtcbiAgICAgICAgICBpZDogJ2FjdGl2aXR5LTEnLFxuICAgICAgICAgIG5hbWU6ICdBY3Rpdml0eSAxJyxcbiAgICAgICAgICBhY3Rpdml0eVR5cGU6ICdjZXJlbW9ueScsXG4gICAgICAgICAgc3RhcnRUaW1lOiAnMjAyNS0wNi0wMVQxMDowMDowMFonLFxuICAgICAgICB9KSxcbiAgICAgICAgY3JlYXRlTW9ja0FjdGl2aXR5KHtcbiAgICAgICAgICBpZDogJ2FjdGl2aXR5LTInLFxuICAgICAgICAgIG5hbWU6ICdBY3Rpdml0eSAyJyxcbiAgICAgICAgICBhY3Rpdml0eVR5cGU6ICdtZWFsJyxcbiAgICAgICAgICBzdGFydFRpbWU6ICcyMDI1LTA2LTE1VDEwOjAwOjAwWicsXG4gICAgICAgIH0pLFxuICAgICAgXTtcblxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tBY3Rpdml0aWVzIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICAgIHJlbmRlcig8R3Vlc3RBY3Rpdml0aWVzUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQWN0aXZpdHkgMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEFwcGx5IGZpbHRlcnNcbiAgICAgIGNvbnN0IHR5cGVTZWxlY3QgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2FjdGl2aXR5IHR5cGUvaSk7XG4gICAgICBhd2FpdCB1c2VyLnNlbGVjdE9wdGlvbnModHlwZVNlbGVjdCwgJ2NlcmVtb255Jyk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdBY3Rpdml0eSAyJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsZWFyIGZpbHRlcnNcbiAgICAgIGNvbnN0IGNsZWFyQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvY2xlYXIgZmlsdGVycy9pIH0pO1xuICAgICAgYXdhaXQgdXNlci5jbGljayhjbGVhckJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQWN0aXZpdHkgMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQWN0aXZpdHkgMicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdMb2FkaW5nIFN0YXRlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGlzcGxheSBsb2FkaW5nIHNwaW5uZXIgd2hpbGUgZmV0Y2hpbmcgYWN0aXZpdGllcycsICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oXG4gICAgICAgICgpID0+IG5ldyBQcm9taXNlKCgpID0+IHt9KSAvLyBOZXZlciByZXNvbHZlc1xuICAgICAgKTtcblxuICAgICAgcmVuZGVyKDxHdWVzdEFjdGl2aXRpZXNQYWdlIC8+KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ3N0YXR1cycsIHsgaGlkZGVuOiB0cnVlIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgU3RhdGUnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGVycm9yIG1lc3NhZ2Ugd2hlbiBmZXRjaCBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IHsgbWVzc2FnZTogJ0ZhaWxlZCB0byBmZXRjaCBhY3Rpdml0aWVzJyB9IH0pLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8R3Vlc3RBY3Rpdml0aWVzUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvZXJyb3IgbG9hZGluZyBhY3Rpdml0aWVzL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvZmFpbGVkIHRvIGZldGNoIGFjdGl2aXRpZXMvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWxsb3cgcmV0cnkgYWZ0ZXIgZXJyb3InLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQWN0aXZpdGllcyA9IFtjcmVhdGVNb2NrQWN0aXZpdHkoeyBpZDogJ2FjdGl2aXR5LTEnLCBuYW1lOiAnQWN0aXZpdHkgMScgfSldO1xuXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaylcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiB7IG1lc3NhZ2U6ICdOZXR3b3JrIGVycm9yJyB9IH0pLFxuICAgICAgICB9KVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrQWN0aXZpdGllcyB9KSxcbiAgICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICAgIHJlbmRlcig8R3Vlc3RBY3Rpdml0aWVzUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvZXJyb3IgbG9hZGluZyBhY3Rpdml0aWVzL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJldHJ5QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvdHJ5IGFnYWluL2kgfSk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHJldHJ5QnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdBY3Rpdml0eSAxJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0VtcHR5IFN0YXRlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGlzcGxheSBlbXB0eSBzdGF0ZSB3aGVuIG5vIGFjdGl2aXRpZXMgZm91bmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogW10gfSksXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxHdWVzdEFjdGl2aXRpZXNQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9ubyBhY3Rpdml0aWVzIGZvdW5kL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgZGlmZmVyZW50IG1lc3NhZ2Ugd2hlbiBmaWx0ZXJzIHJldHVybiBubyByZXN1bHRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0FjdGl2aXRpZXMgPSBbXG4gICAgICAgIGNyZWF0ZU1vY2tBY3Rpdml0eSh7XG4gICAgICAgICAgaWQ6ICdhY3Rpdml0eS0xJyxcbiAgICAgICAgICBuYW1lOiAnQWN0aXZpdHkgMScsXG4gICAgICAgICAgYWN0aXZpdHlUeXBlOiAnY2VyZW1vbnknLFxuICAgICAgICB9KSxcbiAgICAgIF07XG5cbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrQWN0aXZpdGllcyB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgICByZW5kZXIoPEd1ZXN0QWN0aXZpdGllc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0FjdGl2aXR5IDEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBcHBseSBmaWx0ZXIgdGhhdCByZXR1cm5zIG5vIHJlc3VsdHNcbiAgICAgIGNvbnN0IHR5cGVTZWxlY3QgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2FjdGl2aXR5IHR5cGUvaSk7XG4gICAgICBhd2FpdCB1c2VyLnNlbGVjdE9wdGlvbnModHlwZVNlbGVjdCwgJ21lYWwnKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9ubyBhY3Rpdml0aWVzIG1hdGNoIHlvdXIgZmlsdGVycy9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQWN0aXZpdHkgQ2FyZCBDbGljaycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIG9wZW4gcHJldmlldyBtb2RhbCB3aGVuIGFjdGl2aXR5IGNhcmQgY2xpY2tlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tBY3Rpdml0aWVzID0gW1xuICAgICAgICBjcmVhdGVNb2NrQWN0aXZpdHkoe1xuICAgICAgICAgIGlkOiAnYWN0aXZpdHktMScsXG4gICAgICAgICAgbmFtZTogJ0JlYWNoIFZvbGxleWJhbGwnLFxuICAgICAgICB9KSxcbiAgICAgIF07XG5cbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrQWN0aXZpdGllcyB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG4gICAgICByZW5kZXIoPEd1ZXN0QWN0aXZpdGllc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0JlYWNoIFZvbGxleWJhbGwnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBhY3Rpdml0eUNhcmQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2FjdGl2aXR5LWNhcmQtYWN0aXZpdHktMScpO1xuICAgICAgYXdhaXQgdXNlci5jbGljayhhY3Rpdml0eUNhcmQpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnYWN0aXZpdHktcHJldmlldy1tb2RhbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQWN0aXZpdHkgSUQ6IGFjdGl2aXR5LTEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjbG9zZSBwcmV2aWV3IG1vZGFsIHdoZW4gY2xvc2UgYnV0dG9uIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQWN0aXZpdGllcyA9IFtcbiAgICAgICAgY3JlYXRlTW9ja0FjdGl2aXR5KHtcbiAgICAgICAgICBpZDogJ2FjdGl2aXR5LTEnLFxuICAgICAgICAgIG5hbWU6ICdCZWFjaCBWb2xsZXliYWxsJyxcbiAgICAgICAgfSksXG4gICAgICBdO1xuXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja0FjdGl2aXRpZXMgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuICAgICAgcmVuZGVyKDxHdWVzdEFjdGl2aXRpZXNQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdCZWFjaCBWb2xsZXliYWxsJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gT3BlbiBtb2RhbFxuICAgICAgY29uc3QgYWN0aXZpdHlDYXJkID0gc2NyZWVuLmdldEJ5VGVzdElkKCdhY3Rpdml0eS1jYXJkLWFjdGl2aXR5LTEnKTtcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soYWN0aXZpdHlDYXJkKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2FjdGl2aXR5LXByZXZpZXctbW9kYWwnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbG9zZSBtb2RhbFxuICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9jbG9zZS9pIH0pO1xuICAgICAgYXdhaXQgdXNlci5jbGljayhjbG9zZUJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXN0SWQoJ2FjdGl2aXR5LXByZXZpZXctbW9kYWwnKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsIkFjdGl2aXR5Q2FyZCIsImFjdGl2aXR5Iiwib25DbGljayIsImRpdiIsImRhdGEtdGVzdGlkIiwiaWQiLCJoMyIsIm5hbWUiLCJzcGFuIiwiYWN0aXZpdHlUeXBlIiwicnN2cFN0YXR1cyIsImNhcGFjaXR5UmVtYWluaW5nIiwibmV0Q29zdCIsIkFjdGl2aXR5UHJldmlld01vZGFsIiwiYWN0aXZpdHlJZCIsImlzT3BlbiIsIm9uQ2xvc2UiLCJidXR0b24iLCJnbG9iYWwiLCJmZXRjaCIsImZuIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIml0IiwibW9ja0FjdGl2aXRpZXMiLCJjcmVhdGVNb2NrQWN0aXZpdHkiLCJtb2NrUmVzb2x2ZWRWYWx1ZU9uY2UiLCJqc29uIiwic3VjY2VzcyIsImRhdGEiLCJyZW5kZXIiLCJHdWVzdEFjdGl2aXRpZXNQYWdlIiwid2FpdEZvciIsImV4cGVjdCIsInNjcmVlbiIsImdldEJ5VGV4dCIsInRvQmVJblRoZURvY3VtZW50Iiwic3RhdHVzZXMiLCJnZXRBbGxCeVRlc3RJZCIsInRvSGF2ZVRleHRDb250ZW50IiwiY2FwYWNpdHkiLCJnZXRCeVRlc3RJZCIsInVzZXIiLCJ1c2VyRXZlbnQiLCJzZXR1cCIsInR5cGVTZWxlY3QiLCJnZXRCeUxhYmVsVGV4dCIsInNlbGVjdE9wdGlvbnMiLCJxdWVyeUJ5VGV4dCIsIm5vdCIsInN0YXJ0VGltZSIsImZyb21EYXRlSW5wdXQiLCJ0eXBlIiwidG9EYXRlSW5wdXQiLCJjbGVhckJ1dHRvbiIsImdldEJ5Um9sZSIsImNsaWNrIiwibW9ja0ltcGxlbWVudGF0aW9uIiwiUHJvbWlzZSIsImhpZGRlbiIsImVycm9yIiwibWVzc2FnZSIsInJldHJ5QnV0dG9uIiwiYWN0aXZpdHlDYXJkIiwiY2xvc2VCdXR0b24iLCJxdWVyeUJ5VGVzdElkIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0NBTUM7QUFPRCxrQ0FBa0M7QUFDbENBLEtBQUtDLElBQUksQ0FBQyxtQ0FBbUMsSUFBTyxDQUFBO1FBQ2xEQyxjQUFjLENBQUMsRUFBRUMsUUFBUSxFQUFFQyxPQUFPLEVBQU8saUJBQ3ZDLHNCQUFDQztnQkFBSUMsZUFBYSxDQUFDLGNBQWMsRUFBRUgsU0FBU0ksRUFBRSxFQUFFO2dCQUFFSCxTQUFTQTs7a0NBQ3pELHFCQUFDSTtrQ0FBSUwsU0FBU00sSUFBSTs7a0NBQ2xCLHFCQUFDQzt3QkFBS0osZUFBWTtrQ0FBaUJILFNBQVNRLFlBQVk7O2tDQUN4RCxxQkFBQ0Q7d0JBQUtKLGVBQVk7a0NBQWVILFNBQVNTLFVBQVU7O2tDQUNwRCxxQkFBQ0Y7d0JBQUtKLGVBQVk7a0NBQXNCSCxTQUFTVSxpQkFBaUI7O2tDQUNsRSxxQkFBQ0g7d0JBQUtKLGVBQVk7a0NBQVlILFNBQVNXLE9BQU87Ozs7SUFHcEQsQ0FBQTtBQUVBLDBDQUEwQztBQUMxQ2QsS0FBS0MsSUFBSSxDQUFDLDJDQUEyQyxJQUFPLENBQUE7UUFDMURjLHNCQUFzQixDQUFDLEVBQUVDLFVBQVUsRUFBRUMsTUFBTSxFQUFFQyxPQUFPLEVBQU8sR0FDekRELHVCQUNFLHNCQUFDWjtnQkFBSUMsZUFBWTs7a0NBQ2Ysc0JBQUNJOzs0QkFBSzs0QkFBY007OztrQ0FDcEIscUJBQUNHO3dCQUFPZixTQUFTYztrQ0FBUzs7O2lCQUUxQjtJQUVSLENBQUE7Ozs7O3VCQTVCZ0Q7a0VBQzFCOzZEQUNVOzJCQUNHOzs7Ozs7QUEyQm5DLGFBQWE7QUFDYkUsT0FBT0MsS0FBSyxHQUFHckIsS0FBS3NCLEVBQUU7QUFFdEJDLFNBQVMsdUJBQXVCO0lB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