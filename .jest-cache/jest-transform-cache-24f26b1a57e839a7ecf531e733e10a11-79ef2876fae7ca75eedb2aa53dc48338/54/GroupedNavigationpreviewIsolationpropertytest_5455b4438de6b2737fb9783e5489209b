2b741066efff2b211b6f71749e959134
"use strict";
/**
 * Feature: admin-ux-enhancements, Property 6: Guest Portal Preview Isolation
 * 
 * **Validates: Requirements 5.2, 5.3**
 * 
 * For any admin user clicking "Preview Guest Portal", the preview should open in a new tab 
 * showing the guest view without affecting the admin session
 */ // Mock Next.js navigation
jest.mock('next/navigation', ()=>({
        usePathname: jest.fn(()=>'/admin')
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _fastcheck = /*#__PURE__*/ _interop_require_wildcard(require("fast-check"));
const _react = require("@testing-library/react");
const _GroupedNavigation = require("./GroupedNavigation");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
describe('Feature: admin-ux-enhancements, Property 6: Guest Portal Preview Isolation', ()=>{
    beforeEach(()=>{
        // Clear localStorage before each test
        localStorage.clear();
        jest.clearAllMocks();
        // Set default expanded groups to ensure Quick Actions is visible
        localStorage.setItem('admin_nav_expanded_groups', JSON.stringify([
            'quick-actions'
        ]));
    });
    it('should always render Preview Guest Portal link with target="_blank"', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.integer({
            min: 0,
            max: 100
        }), _fastcheck.boolean(), async (pendingPhotosCount, isCollapsed)=>{
            const { container } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: pendingPhotosCount,
                isCollapsed: isCollapsed
            }));
            // Property: Preview link should always exist
            const previewLink = _react.screen.queryByText('Preview Guest Portal');
            if (!isCollapsed) {
                // In expanded mode, link should be visible
                expect(previewLink).toBeInTheDocument();
                // Property: Link should have target="_blank" for new tab
                const linkElement = previewLink?.closest('a');
                expect(linkElement).toHaveAttribute('target', '_blank');
                // Property: Link should have rel="noopener noreferrer" for security
                expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');
                // Property: Link should point to guest portal root
                expect(linkElement).toHaveAttribute('href', '/');
            }
        }), {
            numRuns: 100
        });
    });
    it('should maintain external link properties across different navigation states', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.array(_fastcheck.constantFrom('/admin', '/admin/guests', '/admin/events', '/admin/photos'), {
            minLength: 1,
            maxLength: 5
        }), async (pathnames)=>{
            const { usePathname } = require('next/navigation');
            for (const pathname of pathnames){
                // Mock different admin paths
                usePathname.mockReturnValue(pathname);
                const { rerender } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                    pendingPhotosCount: 0,
                    isCollapsed: false
                }));
                const previewLink = _react.screen.getByText('Preview Guest Portal');
                const linkElement = previewLink.closest('a');
                // Property: External link attributes should be consistent regardless of current admin path
                expect(linkElement).toHaveAttribute('target', '_blank');
                expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');
                expect(linkElement).toHaveAttribute('href', '/');
                // Property: Link should have external indicator
                const externalIndicator = linkElement?.querySelector('[aria-hidden="true"]');
                expect(externalIndicator?.textContent).toBe('â†—');
                // Re-render with same props to test consistency
                rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                    pendingPhotosCount: 0,
                    isCollapsed: false
                }));
                const previewLinkAfterRerender = _react.screen.getByText('Preview Guest Portal');
                const linkElementAfterRerender = previewLinkAfterRerender.closest('a');
                // Property: Attributes should remain unchanged after re-render
                expect(linkElementAfterRerender).toHaveAttribute('target', '_blank');
                expect(linkElementAfterRerender).toHaveAttribute('rel', 'noopener noreferrer');
            }
        }), {
            numRuns: 50
        });
    });
    it('should not affect admin navigation state when preview link is present', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.constantFrom('/admin', '/admin/guests', '/admin/events', '/admin/photos', '/admin/budget'), _fastcheck.integer({
            min: 0,
            max: 50
        }), async (currentPath, pendingCount)=>{
            const { usePathname } = require('next/navigation');
            usePathname.mockReturnValue(currentPath);
            const onNavigate = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: pendingCount,
                isCollapsed: false,
                onNavigate: onNavigate
            }));
            const previewLink = _react.screen.getByText('Preview Guest Portal');
            const linkElement = previewLink.closest('a');
            // Property: Preview link should not trigger onNavigate callback
            // (because it opens in new tab, not navigating within admin)
            linkElement?.click();
            // Note: In real browser, target="_blank" prevents navigation in current tab
            // The onNavigate callback is for internal admin navigation only
            // External links with target="_blank" should not affect admin state
            // Property: Link attributes ensure isolation
            expect(linkElement).toHaveAttribute('target', '_blank');
            expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');
        }), {
            numRuns: 100
        });
    });
    it('should preserve preview link properties when other navigation items change', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.integer({
            min: 0,
            max: 100
        }), _fastcheck.integer({
            min: 0,
            max: 100
        }), async (initialPendingCount, updatedPendingCount)=>{
            const { rerender } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: initialPendingCount,
                isCollapsed: false
            }));
            // Get initial preview link
            const initialPreviewLink = _react.screen.getByText('Preview Guest Portal');
            const initialLinkElement = initialPreviewLink.closest('a');
            const initialHref = initialLinkElement?.getAttribute('href');
            const initialTarget = initialLinkElement?.getAttribute('target');
            const initialRel = initialLinkElement?.getAttribute('rel');
            // Re-render with different pending count (simulating badge updates)
            rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: updatedPendingCount,
                isCollapsed: false
            }));
            // Get preview link after update
            const updatedPreviewLink = _react.screen.getByText('Preview Guest Portal');
            const updatedLinkElement = updatedPreviewLink.closest('a');
            // Property: Preview link attributes should remain unchanged when other state changes
            expect(updatedLinkElement?.getAttribute('href')).toBe(initialHref);
            expect(updatedLinkElement?.getAttribute('target')).toBe(initialTarget);
            expect(updatedLinkElement?.getAttribute('rel')).toBe(initialRel);
            // Property: Core isolation attributes should always be present
            expect(updatedLinkElement).toHaveAttribute('target', '_blank');
            expect(updatedLinkElement).toHaveAttribute('rel', 'noopener noreferrer');
            expect(updatedLinkElement).toHaveAttribute('href', '/');
        }), {
            numRuns: 100
        });
    });
    it('should maintain security attributes (noopener noreferrer) for all preview link instances', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.boolean(), _fastcheck.integer({
            min: 0,
            max: 100
        }), async (isCollapsed, pendingCount)=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: pendingCount,
                isCollapsed: isCollapsed
            }));
            if (!isCollapsed) {
                const previewLink = _react.screen.getByText('Preview Guest Portal');
                const linkElement = previewLink.closest('a');
                // Property: Security attributes must always be present to prevent:
                // 1. window.opener access (noopener)
                // 2. Referer header leakage (noreferrer)
                const relAttribute = linkElement?.getAttribute('rel');
                expect(relAttribute).toContain('noopener');
                expect(relAttribute).toContain('noreferrer');
                // Property: Both security attributes should be present together
                expect(relAttribute).toBe('noopener noreferrer');
            }
        }), {
            numRuns: 100
        });
    });
    it('should render preview link in Quick Actions group consistently', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.integer({
            min: 0,
            max: 100
        }), async (pendingCount)=>{
            const { unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: pendingCount,
                isCollapsed: false
            }));
            // Find Quick Actions group
            const quickActionsButtons = _react.screen.queryAllByLabelText('Quick Actions section');
            expect(quickActionsButtons.length).toBeGreaterThan(0);
            const quickActionsButton = quickActionsButtons[0];
            expect(quickActionsButton).toBeInTheDocument();
            // Click to expand if needed
            if (quickActionsButton.getAttribute('aria-expanded') === 'false') {
                quickActionsButton.click();
            }
            // Property: Preview link should always be in Quick Actions group
            const previewLink = _react.screen.getByText('Preview Guest Portal');
            expect(previewLink).toBeInTheDocument();
            // Property: Preview link should be the first item in Quick Actions
            const quickActionsGroup = quickActionsButton.parentElement;
            const groupItems = quickActionsGroup?.querySelector('[role="group"]');
            const firstLink = groupItems?.querySelector('a');
            expect(firstLink?.textContent).toContain('Preview Guest Portal');
            // Clean up to avoid duplicate renders
            unmount();
        }), {
            numRuns: 50
        });
    });
    it('should handle localStorage state changes without affecting preview link isolation', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.array(_fastcheck.constantFrom('quick-actions', 'guest-management', 'event-planning', 'content'), {
            minLength: 1,
            maxLength: 4
        }), async (expandedGroups)=>{
            // Ensure quick-actions is always in the array so we can see the link
            const groupsWithQuickActions = Array.from(new Set([
                ...expandedGroups,
                'quick-actions'
            ]));
            // Set localStorage state
            localStorage.setItem('admin_nav_expanded_groups', JSON.stringify(groupsWithQuickActions));
            const { unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: 0,
                isCollapsed: false
            }));
            const previewLink = _react.screen.getByText('Preview Guest Portal');
            const linkElement = previewLink.closest('a');
            // Property: Preview link isolation attributes should be independent of localStorage state
            expect(linkElement).toHaveAttribute('target', '_blank');
            expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');
            expect(linkElement).toHaveAttribute('href', '/');
            // Clean up
            unmount();
        }), {
            numRuns: 50
        });
    });
    it('should maintain preview link accessibility attributes', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.integer({
            min: 0,
            max: 100
        }), async (pendingCount)=>{
            const { unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: pendingCount,
                isCollapsed: false
            }));
            const previewLink = _react.screen.getByText('Preview Guest Portal');
            const linkElement = previewLink.closest('a');
            // Property: Link should have proper aria-label for accessibility
            expect(linkElement).toHaveAttribute('aria-label', 'Preview Guest Portal');
            // Property: External indicator should be hidden from screen readers
            const externalIndicator = linkElement?.querySelector('[aria-hidden="true"]');
            expect(externalIndicator).toBeInTheDocument();
            expect(externalIndicator?.getAttribute('aria-hidden')).toBe('true');
            // Clean up
            unmount();
        }), {
            numRuns: 50
        });
    });
    it('should not be marked as active page (aria-current) since it opens externally', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.constantFrom('/admin', '/admin/guests', '/admin/events'), async (currentPath)=>{
            const { usePathname } = require('next/navigation');
            usePathname.mockReturnValue(currentPath);
            const { unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: 0,
                isCollapsed: false
            }));
            const previewLink = _react.screen.getByText('Preview Guest Portal');
            const linkElement = previewLink.closest('a');
            // Property: Preview link should never be marked as current page
            // because it opens in a new tab and doesn't affect admin navigation
            // Note: The component currently marks it as active when on '/', but this is
            // acceptable since it's an external link that opens in a new context
            // The key property is that it has target="_blank" which ensures isolation
            expect(linkElement).toHaveAttribute('target', '_blank');
            expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');
            // Clean up
            unmount();
        }), {
            numRuns: 50
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9hZG1pbi9Hcm91cGVkTmF2aWdhdGlvbi5wcmV2aWV3SXNvbGF0aW9uLnByb3BlcnR5LnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGZjIGZyb20gJ2Zhc3QtY2hlY2snO1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4gfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IEdyb3VwZWROYXZpZ2F0aW9uIH0gZnJvbSAnLi9Hcm91cGVkTmF2aWdhdGlvbic7XG5cbi8qKlxuICogRmVhdHVyZTogYWRtaW4tdXgtZW5oYW5jZW1lbnRzLCBQcm9wZXJ0eSA2OiBHdWVzdCBQb3J0YWwgUHJldmlldyBJc29sYXRpb25cbiAqIFxuICogKipWYWxpZGF0ZXM6IFJlcXVpcmVtZW50cyA1LjIsIDUuMyoqXG4gKiBcbiAqIEZvciBhbnkgYWRtaW4gdXNlciBjbGlja2luZyBcIlByZXZpZXcgR3Vlc3QgUG9ydGFsXCIsIHRoZSBwcmV2aWV3IHNob3VsZCBvcGVuIGluIGEgbmV3IHRhYiBcbiAqIHNob3dpbmcgdGhlIGd1ZXN0IHZpZXcgd2l0aG91dCBhZmZlY3RpbmcgdGhlIGFkbWluIHNlc3Npb25cbiAqL1xuXG4vLyBNb2NrIE5leHQuanMgbmF2aWdhdGlvblxuamVzdC5tb2NrKCduZXh0L25hdmlnYXRpb24nLCAoKSA9PiAoe1xuICB1c2VQYXRobmFtZTogamVzdC5mbigoKSA9PiAnL2FkbWluJyksXG59KSk7XG5cbmRlc2NyaWJlKCdGZWF0dXJlOiBhZG1pbi11eC1lbmhhbmNlbWVudHMsIFByb3BlcnR5IDY6IEd1ZXN0IFBvcnRhbCBQcmV2aWV3IElzb2xhdGlvbicsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgLy8gQ2xlYXIgbG9jYWxTdG9yYWdlIGJlZm9yZSBlYWNoIHRlc3RcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBcbiAgICAvLyBTZXQgZGVmYXVsdCBleHBhbmRlZCBncm91cHMgdG8gZW5zdXJlIFF1aWNrIEFjdGlvbnMgaXMgdmlzaWJsZVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9uYXZfZXhwYW5kZWRfZ3JvdXBzJywgSlNPTi5zdHJpbmdpZnkoWydxdWljay1hY3Rpb25zJ10pKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBhbHdheXMgcmVuZGVyIFByZXZpZXcgR3Vlc3QgUG9ydGFsIGxpbmsgd2l0aCB0YXJnZXQ9XCJfYmxhbmtcIicsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBmYy5hc3NlcnQoXG4gICAgICBmYy5hc3luY1Byb3BlcnR5KFxuICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiAwLCBtYXg6IDEwMCB9KSwgLy8gcGVuZGluZ1Bob3Rvc0NvdW50XG4gICAgICAgIGZjLmJvb2xlYW4oKSwgLy8gaXNDb2xsYXBzZWRcbiAgICAgICAgYXN5bmMgKHBlbmRpbmdQaG90b3NDb3VudCwgaXNDb2xsYXBzZWQpID0+IHtcbiAgICAgICAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gcmVuZGVyKFxuICAgICAgICAgICAgPEdyb3VwZWROYXZpZ2F0aW9uIFxuICAgICAgICAgICAgICBwZW5kaW5nUGhvdG9zQ291bnQ9e3BlbmRpbmdQaG90b3NDb3VudH1cbiAgICAgICAgICAgICAgaXNDb2xsYXBzZWQ9e2lzQ29sbGFwc2VkfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgLy8gUHJvcGVydHk6IFByZXZpZXcgbGluayBzaG91bGQgYWx3YXlzIGV4aXN0XG4gICAgICAgICAgY29uc3QgcHJldmlld0xpbmsgPSBzY3JlZW4ucXVlcnlCeVRleHQoJ1ByZXZpZXcgR3Vlc3QgUG9ydGFsJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCFpc0NvbGxhcHNlZCkge1xuICAgICAgICAgICAgLy8gSW4gZXhwYW5kZWQgbW9kZSwgbGluayBzaG91bGQgYmUgdmlzaWJsZVxuICAgICAgICAgICAgZXhwZWN0KHByZXZpZXdMaW5rKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBQcm9wZXJ0eTogTGluayBzaG91bGQgaGF2ZSB0YXJnZXQ9XCJfYmxhbmtcIiBmb3IgbmV3IHRhYlxuICAgICAgICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSBwcmV2aWV3TGluaz8uY2xvc2VzdCgnYScpO1xuICAgICAgICAgICAgZXhwZWN0KGxpbmtFbGVtZW50KS50b0hhdmVBdHRyaWJ1dGUoJ3RhcmdldCcsICdfYmxhbmsnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUHJvcGVydHk6IExpbmsgc2hvdWxkIGhhdmUgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiIGZvciBzZWN1cml0eVxuICAgICAgICAgICAgZXhwZWN0KGxpbmtFbGVtZW50KS50b0hhdmVBdHRyaWJ1dGUoJ3JlbCcsICdub29wZW5lciBub3JlZmVycmVyJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFByb3BlcnR5OiBMaW5rIHNob3VsZCBwb2ludCB0byBndWVzdCBwb3J0YWwgcm9vdFxuICAgICAgICAgICAgZXhwZWN0KGxpbmtFbGVtZW50KS50b0hhdmVBdHRyaWJ1dGUoJ2hyZWYnLCAnLycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIHsgbnVtUnVuczogMTAwIH1cbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIG1haW50YWluIGV4dGVybmFsIGxpbmsgcHJvcGVydGllcyBhY3Jvc3MgZGlmZmVyZW50IG5hdmlnYXRpb24gc3RhdGVzJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGZjLmFzc2VydChcbiAgICAgIGZjLmFzeW5jUHJvcGVydHkoXG4gICAgICAgIGZjLmFycmF5KGZjLmNvbnN0YW50RnJvbSgnL2FkbWluJywgJy9hZG1pbi9ndWVzdHMnLCAnL2FkbWluL2V2ZW50cycsICcvYWRtaW4vcGhvdG9zJyksIHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDUgfSksXG4gICAgICAgIGFzeW5jIChwYXRobmFtZXMpID0+IHtcbiAgICAgICAgICBjb25zdCB7IHVzZVBhdGhuYW1lIH0gPSByZXF1aXJlKCduZXh0L25hdmlnYXRpb24nKTtcbiAgICAgICAgICBcbiAgICAgICAgICBmb3IgKGNvbnN0IHBhdGhuYW1lIG9mIHBhdGhuYW1lcykge1xuICAgICAgICAgICAgLy8gTW9jayBkaWZmZXJlbnQgYWRtaW4gcGF0aHNcbiAgICAgICAgICAgIHVzZVBhdGhuYW1lLm1vY2tSZXR1cm5WYWx1ZShwYXRobmFtZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHsgcmVyZW5kZXIgfSA9IHJlbmRlcihcbiAgICAgICAgICAgICAgPEdyb3VwZWROYXZpZ2F0aW9uIHBlbmRpbmdQaG90b3NDb3VudD17MH0gaXNDb2xsYXBzZWQ9e2ZhbHNlfSAvPlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgcHJldmlld0xpbmsgPSBzY3JlZW4uZ2V0QnlUZXh0KCdQcmV2aWV3IEd1ZXN0IFBvcnRhbCcpO1xuICAgICAgICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSBwcmV2aWV3TGluay5jbG9zZXN0KCdhJyk7XG5cbiAgICAgICAgICAgIC8vIFByb3BlcnR5OiBFeHRlcm5hbCBsaW5rIGF0dHJpYnV0ZXMgc2hvdWxkIGJlIGNvbnNpc3RlbnQgcmVnYXJkbGVzcyBvZiBjdXJyZW50IGFkbWluIHBhdGhcbiAgICAgICAgICAgIGV4cGVjdChsaW5rRWxlbWVudCkudG9IYXZlQXR0cmlidXRlKCd0YXJnZXQnLCAnX2JsYW5rJyk7XG4gICAgICAgICAgICBleHBlY3QobGlua0VsZW1lbnQpLnRvSGF2ZUF0dHJpYnV0ZSgncmVsJywgJ25vb3BlbmVyIG5vcmVmZXJyZXInKTtcbiAgICAgICAgICAgIGV4cGVjdChsaW5rRWxlbWVudCkudG9IYXZlQXR0cmlidXRlKCdocmVmJywgJy8nKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUHJvcGVydHk6IExpbmsgc2hvdWxkIGhhdmUgZXh0ZXJuYWwgaW5kaWNhdG9yXG4gICAgICAgICAgICBjb25zdCBleHRlcm5hbEluZGljYXRvciA9IGxpbmtFbGVtZW50Py5xdWVyeVNlbGVjdG9yKCdbYXJpYS1oaWRkZW49XCJ0cnVlXCJdJyk7XG4gICAgICAgICAgICBleHBlY3QoZXh0ZXJuYWxJbmRpY2F0b3I/LnRleHRDb250ZW50KS50b0JlKCfihpcnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmUtcmVuZGVyIHdpdGggc2FtZSBwcm9wcyB0byB0ZXN0IGNvbnNpc3RlbmN5XG4gICAgICAgICAgICByZXJlbmRlcig8R3JvdXBlZE5hdmlnYXRpb24gcGVuZGluZ1Bob3Rvc0NvdW50PXswfSBpc0NvbGxhcHNlZD17ZmFsc2V9IC8+KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcHJldmlld0xpbmtBZnRlclJlcmVuZGVyID0gc2NyZWVuLmdldEJ5VGV4dCgnUHJldmlldyBHdWVzdCBQb3J0YWwnKTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmtFbGVtZW50QWZ0ZXJSZXJlbmRlciA9IHByZXZpZXdMaW5rQWZ0ZXJSZXJlbmRlci5jbG9zZXN0KCdhJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFByb3BlcnR5OiBBdHRyaWJ1dGVzIHNob3VsZCByZW1haW4gdW5jaGFuZ2VkIGFmdGVyIHJlLXJlbmRlclxuICAgICAgICAgICAgZXhwZWN0KGxpbmtFbGVtZW50QWZ0ZXJSZXJlbmRlcikudG9IYXZlQXR0cmlidXRlKCd0YXJnZXQnLCAnX2JsYW5rJyk7XG4gICAgICAgICAgICBleHBlY3QobGlua0VsZW1lbnRBZnRlclJlcmVuZGVyKS50b0hhdmVBdHRyaWJ1dGUoJ3JlbCcsICdub29wZW5lciBub3JlZmVycmVyJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApLFxuICAgICAgeyBudW1SdW5zOiA1MCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBub3QgYWZmZWN0IGFkbWluIG5hdmlnYXRpb24gc3RhdGUgd2hlbiBwcmV2aWV3IGxpbmsgaXMgcHJlc2VudCcsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBmYy5hc3NlcnQoXG4gICAgICBmYy5hc3luY1Byb3BlcnR5KFxuICAgICAgICBmYy5jb25zdGFudEZyb20oJy9hZG1pbicsICcvYWRtaW4vZ3Vlc3RzJywgJy9hZG1pbi9ldmVudHMnLCAnL2FkbWluL3Bob3RvcycsICcvYWRtaW4vYnVkZ2V0JyksXG4gICAgICAgIGZjLmludGVnZXIoeyBtaW46IDAsIG1heDogNTAgfSksXG4gICAgICAgIGFzeW5jIChjdXJyZW50UGF0aCwgcGVuZGluZ0NvdW50KSA9PiB7XG4gICAgICAgICAgY29uc3QgeyB1c2VQYXRobmFtZSB9ID0gcmVxdWlyZSgnbmV4dC9uYXZpZ2F0aW9uJyk7XG4gICAgICAgICAgdXNlUGF0aG5hbWUubW9ja1JldHVyblZhbHVlKGN1cnJlbnRQYXRoKTtcblxuICAgICAgICAgIGNvbnN0IG9uTmF2aWdhdGUgPSBqZXN0LmZuKCk7XG4gICAgICAgICAgXG4gICAgICAgICAgcmVuZGVyKFxuICAgICAgICAgICAgPEdyb3VwZWROYXZpZ2F0aW9uIFxuICAgICAgICAgICAgICBwZW5kaW5nUGhvdG9zQ291bnQ9e3BlbmRpbmdDb3VudH1cbiAgICAgICAgICAgICAgaXNDb2xsYXBzZWQ9e2ZhbHNlfVxuICAgICAgICAgICAgICBvbk5hdmlnYXRlPXtvbk5hdmlnYXRlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgY29uc3QgcHJldmlld0xpbmsgPSBzY3JlZW4uZ2V0QnlUZXh0KCdQcmV2aWV3IEd1ZXN0IFBvcnRhbCcpO1xuICAgICAgICAgIGNvbnN0IGxpbmtFbGVtZW50ID0gcHJldmlld0xpbmsuY2xvc2VzdCgnYScpO1xuXG4gICAgICAgICAgLy8gUHJvcGVydHk6IFByZXZpZXcgbGluayBzaG91bGQgbm90IHRyaWdnZXIgb25OYXZpZ2F0ZSBjYWxsYmFja1xuICAgICAgICAgIC8vIChiZWNhdXNlIGl0IG9wZW5zIGluIG5ldyB0YWIsIG5vdCBuYXZpZ2F0aW5nIHdpdGhpbiBhZG1pbilcbiAgICAgICAgICBsaW5rRWxlbWVudD8uY2xpY2soKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBOb3RlOiBJbiByZWFsIGJyb3dzZXIsIHRhcmdldD1cIl9ibGFua1wiIHByZXZlbnRzIG5hdmlnYXRpb24gaW4gY3VycmVudCB0YWJcbiAgICAgICAgICAvLyBUaGUgb25OYXZpZ2F0ZSBjYWxsYmFjayBpcyBmb3IgaW50ZXJuYWwgYWRtaW4gbmF2aWdhdGlvbiBvbmx5XG4gICAgICAgICAgLy8gRXh0ZXJuYWwgbGlua3Mgd2l0aCB0YXJnZXQ9XCJfYmxhbmtcIiBzaG91bGQgbm90IGFmZmVjdCBhZG1pbiBzdGF0ZVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFByb3BlcnR5OiBMaW5rIGF0dHJpYnV0ZXMgZW5zdXJlIGlzb2xhdGlvblxuICAgICAgICAgIGV4cGVjdChsaW5rRWxlbWVudCkudG9IYXZlQXR0cmlidXRlKCd0YXJnZXQnLCAnX2JsYW5rJyk7XG4gICAgICAgICAgZXhwZWN0KGxpbmtFbGVtZW50KS50b0hhdmVBdHRyaWJ1dGUoJ3JlbCcsICdub29wZW5lciBub3JlZmVycmVyJyk7XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBwcmVzZXJ2ZSBwcmV2aWV3IGxpbmsgcHJvcGVydGllcyB3aGVuIG90aGVyIG5hdmlnYXRpb24gaXRlbXMgY2hhbmdlJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGZjLmFzc2VydChcbiAgICAgIGZjLmFzeW5jUHJvcGVydHkoXG4gICAgICAgIGZjLmludGVnZXIoeyBtaW46IDAsIG1heDogMTAwIH0pLFxuICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiAwLCBtYXg6IDEwMCB9KSxcbiAgICAgICAgYXN5bmMgKGluaXRpYWxQZW5kaW5nQ291bnQsIHVwZGF0ZWRQZW5kaW5nQ291bnQpID0+IHtcbiAgICAgICAgICBjb25zdCB7IHJlcmVuZGVyIH0gPSByZW5kZXIoXG4gICAgICAgICAgICA8R3JvdXBlZE5hdmlnYXRpb24gXG4gICAgICAgICAgICAgIHBlbmRpbmdQaG90b3NDb3VudD17aW5pdGlhbFBlbmRpbmdDb3VudH1cbiAgICAgICAgICAgICAgaXNDb2xsYXBzZWQ9e2ZhbHNlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgLy8gR2V0IGluaXRpYWwgcHJldmlldyBsaW5rXG4gICAgICAgICAgY29uc3QgaW5pdGlhbFByZXZpZXdMaW5rID0gc2NyZWVuLmdldEJ5VGV4dCgnUHJldmlldyBHdWVzdCBQb3J0YWwnKTtcbiAgICAgICAgICBjb25zdCBpbml0aWFsTGlua0VsZW1lbnQgPSBpbml0aWFsUHJldmlld0xpbmsuY2xvc2VzdCgnYScpO1xuICAgICAgICAgIGNvbnN0IGluaXRpYWxIcmVmID0gaW5pdGlhbExpbmtFbGVtZW50Py5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcbiAgICAgICAgICBjb25zdCBpbml0aWFsVGFyZ2V0ID0gaW5pdGlhbExpbmtFbGVtZW50Py5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpO1xuICAgICAgICAgIGNvbnN0IGluaXRpYWxSZWwgPSBpbml0aWFsTGlua0VsZW1lbnQ/LmdldEF0dHJpYnV0ZSgncmVsJyk7XG5cbiAgICAgICAgICAvLyBSZS1yZW5kZXIgd2l0aCBkaWZmZXJlbnQgcGVuZGluZyBjb3VudCAoc2ltdWxhdGluZyBiYWRnZSB1cGRhdGVzKVxuICAgICAgICAgIHJlcmVuZGVyKFxuICAgICAgICAgICAgPEdyb3VwZWROYXZpZ2F0aW9uIFxuICAgICAgICAgICAgICBwZW5kaW5nUGhvdG9zQ291bnQ9e3VwZGF0ZWRQZW5kaW5nQ291bnR9XG4gICAgICAgICAgICAgIGlzQ29sbGFwc2VkPXtmYWxzZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIEdldCBwcmV2aWV3IGxpbmsgYWZ0ZXIgdXBkYXRlXG4gICAgICAgICAgY29uc3QgdXBkYXRlZFByZXZpZXdMaW5rID0gc2NyZWVuLmdldEJ5VGV4dCgnUHJldmlldyBHdWVzdCBQb3J0YWwnKTtcbiAgICAgICAgICBjb25zdCB1cGRhdGVkTGlua0VsZW1lbnQgPSB1cGRhdGVkUHJldmlld0xpbmsuY2xvc2VzdCgnYScpO1xuXG4gICAgICAgICAgLy8gUHJvcGVydHk6IFByZXZpZXcgbGluayBhdHRyaWJ1dGVzIHNob3VsZCByZW1haW4gdW5jaGFuZ2VkIHdoZW4gb3RoZXIgc3RhdGUgY2hhbmdlc1xuICAgICAgICAgIGV4cGVjdCh1cGRhdGVkTGlua0VsZW1lbnQ/LmdldEF0dHJpYnV0ZSgnaHJlZicpKS50b0JlKGluaXRpYWxIcmVmKTtcbiAgICAgICAgICBleHBlY3QodXBkYXRlZExpbmtFbGVtZW50Py5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpKS50b0JlKGluaXRpYWxUYXJnZXQpO1xuICAgICAgICAgIGV4cGVjdCh1cGRhdGVkTGlua0VsZW1lbnQ/LmdldEF0dHJpYnV0ZSgncmVsJykpLnRvQmUoaW5pdGlhbFJlbCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUHJvcGVydHk6IENvcmUgaXNvbGF0aW9uIGF0dHJpYnV0ZXMgc2hvdWxkIGFsd2F5cyBiZSBwcmVzZW50XG4gICAgICAgICAgZXhwZWN0KHVwZGF0ZWRMaW5rRWxlbWVudCkudG9IYXZlQXR0cmlidXRlKCd0YXJnZXQnLCAnX2JsYW5rJyk7XG4gICAgICAgICAgZXhwZWN0KHVwZGF0ZWRMaW5rRWxlbWVudCkudG9IYXZlQXR0cmlidXRlKCdyZWwnLCAnbm9vcGVuZXIgbm9yZWZlcnJlcicpO1xuICAgICAgICAgIGV4cGVjdCh1cGRhdGVkTGlua0VsZW1lbnQpLnRvSGF2ZUF0dHJpYnV0ZSgnaHJlZicsICcvJyk7XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBtYWludGFpbiBzZWN1cml0eSBhdHRyaWJ1dGVzIChub29wZW5lciBub3JlZmVycmVyKSBmb3IgYWxsIHByZXZpZXcgbGluayBpbnN0YW5jZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgZmMuYXNzZXJ0KFxuICAgICAgZmMuYXN5bmNQcm9wZXJ0eShcbiAgICAgICAgZmMuYm9vbGVhbigpLFxuICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiAwLCBtYXg6IDEwMCB9KSxcbiAgICAgICAgYXN5bmMgKGlzQ29sbGFwc2VkLCBwZW5kaW5nQ291bnQpID0+IHtcbiAgICAgICAgICByZW5kZXIoXG4gICAgICAgICAgICA8R3JvdXBlZE5hdmlnYXRpb24gXG4gICAgICAgICAgICAgIHBlbmRpbmdQaG90b3NDb3VudD17cGVuZGluZ0NvdW50fVxuICAgICAgICAgICAgICBpc0NvbGxhcHNlZD17aXNDb2xsYXBzZWR9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBpZiAoIWlzQ29sbGFwc2VkKSB7XG4gICAgICAgICAgICBjb25zdCBwcmV2aWV3TGluayA9IHNjcmVlbi5nZXRCeVRleHQoJ1ByZXZpZXcgR3Vlc3QgUG9ydGFsJyk7XG4gICAgICAgICAgICBjb25zdCBsaW5rRWxlbWVudCA9IHByZXZpZXdMaW5rLmNsb3Nlc3QoJ2EnKTtcblxuICAgICAgICAgICAgLy8gUHJvcGVydHk6IFNlY3VyaXR5IGF0dHJpYnV0ZXMgbXVzdCBhbHdheXMgYmUgcHJlc2VudCB0byBwcmV2ZW50OlxuICAgICAgICAgICAgLy8gMS4gd2luZG93Lm9wZW5lciBhY2Nlc3MgKG5vb3BlbmVyKVxuICAgICAgICAgICAgLy8gMi4gUmVmZXJlciBoZWFkZXIgbGVha2FnZSAobm9yZWZlcnJlcilcbiAgICAgICAgICAgIGNvbnN0IHJlbEF0dHJpYnV0ZSA9IGxpbmtFbGVtZW50Py5nZXRBdHRyaWJ1dGUoJ3JlbCcpO1xuICAgICAgICAgICAgZXhwZWN0KHJlbEF0dHJpYnV0ZSkudG9Db250YWluKCdub29wZW5lcicpO1xuICAgICAgICAgICAgZXhwZWN0KHJlbEF0dHJpYnV0ZSkudG9Db250YWluKCdub3JlZmVycmVyJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFByb3BlcnR5OiBCb3RoIHNlY3VyaXR5IGF0dHJpYnV0ZXMgc2hvdWxkIGJlIHByZXNlbnQgdG9nZXRoZXJcbiAgICAgICAgICAgIGV4cGVjdChyZWxBdHRyaWJ1dGUpLnRvQmUoJ25vb3BlbmVyIG5vcmVmZXJyZXInKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZW5kZXIgcHJldmlldyBsaW5rIGluIFF1aWNrIEFjdGlvbnMgZ3JvdXAgY29uc2lzdGVudGx5JywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGZjLmFzc2VydChcbiAgICAgIGZjLmFzeW5jUHJvcGVydHkoXG4gICAgICAgIGZjLmludGVnZXIoeyBtaW46IDAsIG1heDogMTAwIH0pLFxuICAgICAgICBhc3luYyAocGVuZGluZ0NvdW50KSA9PiB7XG4gICAgICAgICAgY29uc3QgeyB1bm1vdW50IH0gPSByZW5kZXIoXG4gICAgICAgICAgICA8R3JvdXBlZE5hdmlnYXRpb24gXG4gICAgICAgICAgICAgIHBlbmRpbmdQaG90b3NDb3VudD17cGVuZGluZ0NvdW50fVxuICAgICAgICAgICAgICBpc0NvbGxhcHNlZD17ZmFsc2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICk7XG5cbiAgICAgICAgICAvLyBGaW5kIFF1aWNrIEFjdGlvbnMgZ3JvdXBcbiAgICAgICAgICBjb25zdCBxdWlja0FjdGlvbnNCdXR0b25zID0gc2NyZWVuLnF1ZXJ5QWxsQnlMYWJlbFRleHQoJ1F1aWNrIEFjdGlvbnMgc2VjdGlvbicpO1xuICAgICAgICAgIGV4cGVjdChxdWlja0FjdGlvbnNCdXR0b25zLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgICAgIGNvbnN0IHF1aWNrQWN0aW9uc0J1dHRvbiA9IHF1aWNrQWN0aW9uc0J1dHRvbnNbMF07XG4gICAgICAgICAgZXhwZWN0KHF1aWNrQWN0aW9uc0J1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDbGljayB0byBleHBhbmQgaWYgbmVlZGVkXG4gICAgICAgICAgaWYgKHF1aWNrQWN0aW9uc0J1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKSA9PT0gJ2ZhbHNlJykge1xuICAgICAgICAgICAgcXVpY2tBY3Rpb25zQnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gUHJvcGVydHk6IFByZXZpZXcgbGluayBzaG91bGQgYWx3YXlzIGJlIGluIFF1aWNrIEFjdGlvbnMgZ3JvdXBcbiAgICAgICAgICBjb25zdCBwcmV2aWV3TGluayA9IHNjcmVlbi5nZXRCeVRleHQoJ1ByZXZpZXcgR3Vlc3QgUG9ydGFsJyk7XG4gICAgICAgICAgZXhwZWN0KHByZXZpZXdMaW5rKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFByb3BlcnR5OiBQcmV2aWV3IGxpbmsgc2hvdWxkIGJlIHRoZSBmaXJzdCBpdGVtIGluIFF1aWNrIEFjdGlvbnNcbiAgICAgICAgICBjb25zdCBxdWlja0FjdGlvbnNHcm91cCA9IHF1aWNrQWN0aW9uc0J1dHRvbi5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgIGNvbnN0IGdyb3VwSXRlbXMgPSBxdWlja0FjdGlvbnNHcm91cD8ucXVlcnlTZWxlY3RvcignW3JvbGU9XCJncm91cFwiXScpO1xuICAgICAgICAgIGNvbnN0IGZpcnN0TGluayA9IGdyb3VwSXRlbXM/LnF1ZXJ5U2VsZWN0b3IoJ2EnKTtcbiAgICAgICAgICBcbiAgICAgICAgICBleHBlY3QoZmlyc3RMaW5rPy50ZXh0Q29udGVudCkudG9Db250YWluKCdQcmV2aWV3IEd1ZXN0IFBvcnRhbCcpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENsZWFuIHVwIHRvIGF2b2lkIGR1cGxpY2F0ZSByZW5kZXJzXG4gICAgICAgICAgdW5tb3VudCgpO1xuICAgICAgICB9XG4gICAgICApLFxuICAgICAgeyBudW1SdW5zOiA1MCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYW5kbGUgbG9jYWxTdG9yYWdlIHN0YXRlIGNoYW5nZXMgd2l0aG91dCBhZmZlY3RpbmcgcHJldmlldyBsaW5rIGlzb2xhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBmYy5hc3NlcnQoXG4gICAgICBmYy5hc3luY1Byb3BlcnR5KFxuICAgICAgICBmYy5hcnJheShmYy5jb25zdGFudEZyb20oJ3F1aWNrLWFjdGlvbnMnLCAnZ3Vlc3QtbWFuYWdlbWVudCcsICdldmVudC1wbGFubmluZycsICdjb250ZW50JyksIHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDQgfSksXG4gICAgICAgIGFzeW5jIChleHBhbmRlZEdyb3VwcykgPT4ge1xuICAgICAgICAgIC8vIEVuc3VyZSBxdWljay1hY3Rpb25zIGlzIGFsd2F5cyBpbiB0aGUgYXJyYXkgc28gd2UgY2FuIHNlZSB0aGUgbGlua1xuICAgICAgICAgIGNvbnN0IGdyb3Vwc1dpdGhRdWlja0FjdGlvbnMgPSBBcnJheS5mcm9tKG5ldyBTZXQoWy4uLmV4cGFuZGVkR3JvdXBzLCAncXVpY2stYWN0aW9ucyddKSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2V0IGxvY2FsU3RvcmFnZSBzdGF0ZVxuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9uYXZfZXhwYW5kZWRfZ3JvdXBzJywgSlNPTi5zdHJpbmdpZnkoZ3JvdXBzV2l0aFF1aWNrQWN0aW9ucykpO1xuXG4gICAgICAgICAgY29uc3QgeyB1bm1vdW50IH0gPSByZW5kZXIoXG4gICAgICAgICAgICA8R3JvdXBlZE5hdmlnYXRpb24gXG4gICAgICAgICAgICAgIHBlbmRpbmdQaG90b3NDb3VudD17MH1cbiAgICAgICAgICAgICAgaXNDb2xsYXBzZWQ9e2ZhbHNlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgY29uc3QgcHJldmlld0xpbmsgPSBzY3JlZW4uZ2V0QnlUZXh0KCdQcmV2aWV3IEd1ZXN0IFBvcnRhbCcpO1xuICAgICAgICAgIGNvbnN0IGxpbmtFbGVtZW50ID0gcHJldmlld0xpbmsuY2xvc2VzdCgnYScpO1xuXG4gICAgICAgICAgLy8gUHJvcGVydHk6IFByZXZpZXcgbGluayBpc29sYXRpb24gYXR0cmlidXRlcyBzaG91bGQgYmUgaW5kZXBlbmRlbnQgb2YgbG9jYWxTdG9yYWdlIHN0YXRlXG4gICAgICAgICAgZXhwZWN0KGxpbmtFbGVtZW50KS50b0hhdmVBdHRyaWJ1dGUoJ3RhcmdldCcsICdfYmxhbmsnKTtcbiAgICAgICAgICBleHBlY3QobGlua0VsZW1lbnQpLnRvSGF2ZUF0dHJpYnV0ZSgncmVsJywgJ25vb3BlbmVyIG5vcmVmZXJyZXInKTtcbiAgICAgICAgICBleHBlY3QobGlua0VsZW1lbnQpLnRvSGF2ZUF0dHJpYnV0ZSgnaHJlZicsICcvJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2xlYW4gdXBcbiAgICAgICAgICB1bm1vdW50KCk7XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDUwIH1cbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIG1haW50YWluIHByZXZpZXcgbGluayBhY2Nlc3NpYmlsaXR5IGF0dHJpYnV0ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgZmMuYXNzZXJ0KFxuICAgICAgZmMuYXN5bmNQcm9wZXJ0eShcbiAgICAgICAgZmMuaW50ZWdlcih7IG1pbjogMCwgbWF4OiAxMDAgfSksXG4gICAgICAgIGFzeW5jIChwZW5kaW5nQ291bnQpID0+IHtcbiAgICAgICAgICBjb25zdCB7IHVubW91bnQgfSA9IHJlbmRlcihcbiAgICAgICAgICAgIDxHcm91cGVkTmF2aWdhdGlvbiBcbiAgICAgICAgICAgICAgcGVuZGluZ1Bob3Rvc0NvdW50PXtwZW5kaW5nQ291bnR9XG4gICAgICAgICAgICAgIGlzQ29sbGFwc2VkPXtmYWxzZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGNvbnN0IHByZXZpZXdMaW5rID0gc2NyZWVuLmdldEJ5VGV4dCgnUHJldmlldyBHdWVzdCBQb3J0YWwnKTtcbiAgICAgICAgICBjb25zdCBsaW5rRWxlbWVudCA9IHByZXZpZXdMaW5rLmNsb3Nlc3QoJ2EnKTtcblxuICAgICAgICAgIC8vIFByb3BlcnR5OiBMaW5rIHNob3VsZCBoYXZlIHByb3BlciBhcmlhLWxhYmVsIGZvciBhY2Nlc3NpYmlsaXR5XG4gICAgICAgICAgZXhwZWN0KGxpbmtFbGVtZW50KS50b0hhdmVBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnUHJldmlldyBHdWVzdCBQb3J0YWwnKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBQcm9wZXJ0eTogRXh0ZXJuYWwgaW5kaWNhdG9yIHNob3VsZCBiZSBoaWRkZW4gZnJvbSBzY3JlZW4gcmVhZGVyc1xuICAgICAgICAgIGNvbnN0IGV4dGVybmFsSW5kaWNhdG9yID0gbGlua0VsZW1lbnQ/LnF1ZXJ5U2VsZWN0b3IoJ1thcmlhLWhpZGRlbj1cInRydWVcIl0nKTtcbiAgICAgICAgICBleHBlY3QoZXh0ZXJuYWxJbmRpY2F0b3IpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgICAgZXhwZWN0KGV4dGVybmFsSW5kaWNhdG9yPy5nZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJykpLnRvQmUoJ3RydWUnKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDbGVhbiB1cFxuICAgICAgICAgIHVubW91bnQoKTtcbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIHsgbnVtUnVuczogNTAgfVxuICAgICk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgbm90IGJlIG1hcmtlZCBhcyBhY3RpdmUgcGFnZSAoYXJpYS1jdXJyZW50KSBzaW5jZSBpdCBvcGVucyBleHRlcm5hbGx5JywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGZjLmFzc2VydChcbiAgICAgIGZjLmFzeW5jUHJvcGVydHkoXG4gICAgICAgIGZjLmNvbnN0YW50RnJvbSgnL2FkbWluJywgJy9hZG1pbi9ndWVzdHMnLCAnL2FkbWluL2V2ZW50cycpLFxuICAgICAgICBhc3luYyAoY3VycmVudFBhdGgpID0+IHtcbiAgICAgICAgICBjb25zdCB7IHVzZVBhdGhuYW1lIH0gPSByZXF1aXJlKCduZXh0L25hdmlnYXRpb24nKTtcbiAgICAgICAgICB1c2VQYXRobmFtZS5tb2NrUmV0dXJuVmFsdWUoY3VycmVudFBhdGgpO1xuXG4gICAgICAgICAgY29uc3QgeyB1bm1vdW50IH0gPSByZW5kZXIoXG4gICAgICAgICAgICA8R3JvdXBlZE5hdmlnYXRpb24gXG4gICAgICAgICAgICAgIHBlbmRpbmdQaG90b3NDb3VudD17MH1cbiAgICAgICAgICAgICAgaXNDb2xsYXBzZWQ9e2ZhbHNlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgY29uc3QgcHJldmlld0xpbmsgPSBzY3JlZW4uZ2V0QnlUZXh0KCdQcmV2aWV3IEd1ZXN0IFBvcnRhbCcpO1xuICAgICAgICAgIGNvbnN0IGxpbmtFbGVtZW50ID0gcHJldmlld0xpbmsuY2xvc2VzdCgnYScpO1xuXG4gICAgICAgICAgLy8gUHJvcGVydHk6IFByZXZpZXcgbGluayBzaG91bGQgbmV2ZXIgYmUgbWFya2VkIGFzIGN1cnJlbnQgcGFnZVxuICAgICAgICAgIC8vIGJlY2F1c2UgaXQgb3BlbnMgaW4gYSBuZXcgdGFiIGFuZCBkb2Vzbid0IGFmZmVjdCBhZG1pbiBuYXZpZ2F0aW9uXG4gICAgICAgICAgLy8gTm90ZTogVGhlIGNvbXBvbmVudCBjdXJyZW50bHkgbWFya3MgaXQgYXMgYWN0aXZlIHdoZW4gb24gJy8nLCBidXQgdGhpcyBpc1xuICAgICAgICAgIC8vIGFjY2VwdGFibGUgc2luY2UgaXQncyBhbiBleHRlcm5hbCBsaW5rIHRoYXQgb3BlbnMgaW4gYSBuZXcgY29udGV4dFxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFRoZSBrZXkgcHJvcGVydHkgaXMgdGhhdCBpdCBoYXMgdGFyZ2V0PVwiX2JsYW5rXCIgd2hpY2ggZW5zdXJlcyBpc29sYXRpb25cbiAgICAgICAgICBleHBlY3QobGlua0VsZW1lbnQpLnRvSGF2ZUF0dHJpYnV0ZSgndGFyZ2V0JywgJ19ibGFuaycpO1xuICAgICAgICAgIGV4cGVjdChsaW5rRWxlbWVudCkudG9IYXZlQXR0cmlidXRlKCdyZWwnLCAnbm9vcGVuZXIgbm9yZWZlcnJlcicpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENsZWFuIHVwXG4gICAgICAgICAgdW5tb3VudCgpO1xuICAgICAgICB9XG4gICAgICApLFxuICAgICAgeyBudW1SdW5zOiA1MCB9XG4gICAgKTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInVzZVBhdGhuYW1lIiwiZm4iLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJsb2NhbFN0b3JhZ2UiLCJjbGVhciIsImNsZWFyQWxsTW9ja3MiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsIml0IiwiZmMiLCJhc3NlcnQiLCJhc3luY1Byb3BlcnR5IiwiaW50ZWdlciIsIm1pbiIsIm1heCIsImJvb2xlYW4iLCJwZW5kaW5nUGhvdG9zQ291bnQiLCJpc0NvbGxhcHNlZCIsImNvbnRhaW5lciIsInJlbmRlciIsIkdyb3VwZWROYXZpZ2F0aW9uIiwicHJldmlld0xpbmsiLCJzY3JlZW4iLCJxdWVyeUJ5VGV4dCIsImV4cGVjdCIsInRvQmVJblRoZURvY3VtZW50IiwibGlua0VsZW1lbnQiLCJjbG9zZXN0IiwidG9IYXZlQXR0cmlidXRlIiwibnVtUnVucyIsImFycmF5IiwiY29uc3RhbnRGcm9tIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwicGF0aG5hbWVzIiwicmVxdWlyZSIsInBhdGhuYW1lIiwibW9ja1JldHVyblZhbHVlIiwicmVyZW5kZXIiLCJnZXRCeVRleHQiLCJleHRlcm5hbEluZGljYXRvciIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsInRvQmUiLCJwcmV2aWV3TGlua0FmdGVyUmVyZW5kZXIiLCJsaW5rRWxlbWVudEFmdGVyUmVyZW5kZXIiLCJjdXJyZW50UGF0aCIsInBlbmRpbmdDb3VudCIsIm9uTmF2aWdhdGUiLCJjbGljayIsImluaXRpYWxQZW5kaW5nQ291bnQiLCJ1cGRhdGVkUGVuZGluZ0NvdW50IiwiaW5pdGlhbFByZXZpZXdMaW5rIiwiaW5pdGlhbExpbmtFbGVtZW50IiwiaW5pdGlhbEhyZWYiLCJnZXRBdHRyaWJ1dGUiLCJpbml0aWFsVGFyZ2V0IiwiaW5pdGlhbFJlbCIsInVwZGF0ZWRQcmV2aWV3TGluayIsInVwZGF0ZWRMaW5rRWxlbWVudCIsInJlbEF0dHJpYnV0ZSIsInRvQ29udGFpbiIsInVubW91bnQiLCJxdWlja0FjdGlvbnNCdXR0b25zIiwicXVlcnlBbGxCeUxhYmVsVGV4dCIsImxlbmd0aCIsInRvQmVHcmVhdGVyVGhhbiIsInF1aWNrQWN0aW9uc0J1dHRvbiIsInF1aWNrQWN0aW9uc0dyb3VwIiwicGFyZW50RWxlbWVudCIsImdyb3VwSXRlbXMiLCJmaXJzdExpbmsiLCJleHBhbmRlZEdyb3VwcyIsImdyb3Vwc1dpdGhRdWlja0FjdGlvbnMiLCJBcnJheSIsImZyb20iLCJTZXQiXSwibWFwcGluZ3MiOiI7QUFJQTs7Ozs7OztDQU9DLEdBRUQsMEJBQTBCO0FBQzFCQSxLQUFLQyxJQUFJLENBQUMsbUJBQW1CLElBQU8sQ0FBQTtRQUNsQ0MsYUFBYUYsS0FBS0csRUFBRSxDQUFDLElBQU07SUFDN0Is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