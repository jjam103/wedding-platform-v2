70440a96d558214ddf55c9c52c90cdb6
"use strict";
// Mock external dependencies
jest.mock('@google/generative-ai');
jest.mock('../utils/sanitization', ()=>({
        sanitizeInput: jest.fn((input)=>{
            if (!input || typeof input !== 'string') return '';
            return input.replace(/<script[^>]*>.*?<\/script>/gi, '');
        }),
        sanitizeRichText: jest.fn((input)=>{
            if (!input || typeof input !== 'string') return '';
            return input.replace(/<script[^>]*>.*?<\/script>/gi, '');
        })
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _aiContentService = require("./aiContentService");
// Mock fetch globally
global.fetch = jest.fn();
describe('aiContentService', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        global.fetch.mockClear();
    });
    describe('sanitizeExtractedText', ()=>{
        it('should return sanitized text when valid input provided', ()=>{
            const result = (0, _aiContentService.sanitizeExtractedText)('Hello <script>alert("xss")</script>World');
            expect(result).toBe('Hello World');
        });
        it('should return empty string when input is null', ()=>{
            const result = (0, _aiContentService.sanitizeExtractedText)(null);
            expect(result).toBe('');
        });
        it('should return empty string when input is undefined', ()=>{
            const result = (0, _aiContentService.sanitizeExtractedText)(undefined);
            expect(result).toBe('');
        });
        it('should return empty string when input is not a string', ()=>{
            const result = (0, _aiContentService.sanitizeExtractedText)(123);
            expect(result).toBe('');
        });
    });
    describe('sanitizeExtractedRichText', ()=>{
        it('should return sanitized HTML when valid input provided', ()=>{
            const result = (0, _aiContentService.sanitizeExtractedRichText)('<p>Hello <script>alert("xss")</script>World</p>');
            expect(result).toBe('<p>Hello World</p>');
        });
        it('should return empty string when input is null', ()=>{
            const result = (0, _aiContentService.sanitizeExtractedRichText)(null);
            expect(result).toBe('');
        });
        it('should return empty string when input is undefined', ()=>{
            const result = (0, _aiContentService.sanitizeExtractedRichText)(undefined);
            expect(result).toBe('');
        });
        it('should return empty string when input is not a string', ()=>{
            const result = (0, _aiContentService.sanitizeExtractedRichText)(123);
            expect(result).toBe('');
        });
    });
    describe('validateExtractedContent', ()=>{
        it('should return success when valid activity data provided', ()=>{
            const validActivityData = {
                name: 'Beach Volleyball',
                description: 'Fun beach activity',
                activityType: 'activity',
                startTime: '2024-01-01T10:00:00Z',
                capacity: 20,
                costPerPerson: 25,
                adultsOnly: false,
                plusOneAllowed: true
            };
            const result = (0, _aiContentService.validateExtractedContent)('activity', validActivityData);
            expect(result.success).toBe(true);
        });
        it('should return VALIDATION_ERROR when invalid activity data provided', ()=>{
            const invalidActivityData = {
                name: '',
                activityType: 'activity'
            };
            const result = (0, _aiContentService.validateExtractedContent)('activity', invalidActivityData);
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        it('should return success when valid accommodation data provided', ()=>{
            const validAccommodationData = {
                name: 'Beach Resort',
                description: 'Luxury beachfront resort',
                address: '123 Beach Road, Costa Rica'
            };
            const result = (0, _aiContentService.validateExtractedContent)('accommodation', validAccommodationData);
            expect(result.success).toBe(true);
        });
        it('should return success when valid vendor data provided', ()=>{
            const validVendorData = {
                name: 'Costa Rica Photography',
                category: 'photography',
                contactName: 'John Doe',
                email: 'john@example.com',
                phone: '+1234567890',
                pricingModel: 'flat_rate',
                baseCost: 2500,
                notes: 'Professional wedding photography'
            };
            const result = (0, _aiContentService.validateExtractedContent)('vendor', validVendorData);
            expect(result.success).toBe(true);
        });
        it('should return INVALID_CONTENT_TYPE when unsupported content type provided', ()=>{
            const result = (0, _aiContentService.validateExtractedContent)('invalid', {});
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('INVALID_CONTENT_TYPE');
            }
        });
        it('should return VALIDATION_ERROR when validation throws error', ()=>{
            const result = (0, _aiContentService.validateExtractedContent)('activity', null);
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
    });
    describe('extractContentFromUrl', ()=>{
        beforeEach(()=>{
            // Mock environment variable
            process.env.GEMINI_API_KEY = 'test-api-key';
        });
        afterEach(()=>{
            delete process.env.GEMINI_API_KEY;
        });
        it('should return VALIDATION_ERROR when invalid URL provided', async ()=>{
            const result = await (0, _aiContentService.extractContentFromUrl)({
                url: 'invalid-url',
                contentType: 'activity'
            });
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        it('should return CONFIGURATION_ERROR when GEMINI_API_KEY not set', async ()=>{
            delete process.env.GEMINI_API_KEY;
            global.fetch.mockResolvedValueOnce({
                ok: true,
                headers: {
                    get: jest.fn().mockReturnValue('text/html')
                },
                text: jest.fn().mockResolvedValue('<html><body>Test content</body></html>')
            });
            const result = await (0, _aiContentService.extractContentFromUrl)({
                url: 'https://example.com',
                contentType: 'activity'
            });
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('CONFIGURATION_ERROR');
            }
        });
        it('should return FETCH_ERROR when URL fetch fails', async ()=>{
            global.fetch.mockResolvedValueOnce({
                ok: false,
                status: 404,
                statusText: 'Not Found'
            });
            const result = await (0, _aiContentService.extractContentFromUrl)({
                url: 'https://example.com',
                contentType: 'activity'
            });
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('FETCH_ERROR');
            }
        });
        it('should return INVALID_CONTENT_TYPE when non-HTML content returned', async ()=>{
            global.fetch.mockResolvedValueOnce({
                ok: true,
                headers: {
                    get: jest.fn().mockReturnValue('application/json')
                }
            });
            const result = await (0, _aiContentService.extractContentFromUrl)({
                url: 'https://example.com',
                contentType: 'activity'
            });
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('INVALID_CONTENT_TYPE');
            }
        });
        it('should return CONTENT_TOO_LARGE when content exceeds 1MB', async ()=>{
            const largeContent = 'x'.repeat(1024 * 1024 + 1); // 1MB + 1 byte
            global.fetch.mockResolvedValueOnce({
                ok: true,
                headers: {
                    get: jest.fn().mockReturnValue('text/html')
                },
                text: jest.fn().mockResolvedValue(largeContent)
            });
            const result = await (0, _aiContentService.extractContentFromUrl)({
                url: 'https://example.com',
                contentType: 'activity'
            });
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('CONTENT_TOO_LARGE');
            }
        });
        it('should return TIMEOUT when fetch times out', async ()=>{
            global.fetch.mockImplementationOnce(()=>{
                return new Promise((_, reject)=>{
                    setTimeout(()=>{
                        const error = new Error('Request timed out');
                        error.name = 'AbortError';
                        reject(error);
                    }, 100);
                });
            });
            const result = await (0, _aiContentService.extractContentFromUrl)({
                url: 'https://example.com',
                contentType: 'activity'
            });
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('TIMEOUT');
            }
        });
        it('should return EXTERNAL_SERVICE_ERROR when AI service fails', async ()=>{
            global.fetch.mockResolvedValueOnce({
                ok: true,
                headers: {
                    get: jest.fn().mockReturnValue('text/html')
                },
                text: jest.fn().mockResolvedValue('<html><body>Test content</body></html>')
            });
            // Mock GoogleGenerativeAI to throw error
            const { GoogleGenerativeAI } = require('@google/generative-ai');
            GoogleGenerativeAI.mockImplementation(()=>({
                    getGenerativeModel: ()=>({
                            generateContent: ()=>{
                                throw new Error('AI service error');
                            }
                        })
                }));
            const result = await (0, _aiContentService.extractContentFromUrl)({
                url: 'https://example.com',
                contentType: 'activity'
            });
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('EXTERNAL_SERVICE_ERROR');
            }
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvc2VydmljZXMvYWlDb250ZW50U2VydmljZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGV4dHJhY3RDb250ZW50RnJvbVVybCxcbiAgdmFsaWRhdGVFeHRyYWN0ZWRDb250ZW50LFxuICBzYW5pdGl6ZUV4dHJhY3RlZFRleHQsXG4gIHNhbml0aXplRXh0cmFjdGVkUmljaFRleHQsXG59IGZyb20gJy4vYWlDb250ZW50U2VydmljZSc7XG5pbXBvcnQgeyBjcmVhdGVNb2NrU3VwYWJhc2VDbGllbnQgfSBmcm9tICcuLi9fX3Rlc3RzX18vaGVscGVycy9tb2NrU3VwYWJhc2UnO1xuXG4vLyBNb2NrIGV4dGVybmFsIGRlcGVuZGVuY2llc1xuamVzdC5tb2NrKCdAZ29vZ2xlL2dlbmVyYXRpdmUtYWknKTtcbmplc3QubW9jaygnLi4vdXRpbHMvc2FuaXRpemF0aW9uJywgKCkgPT4gKHtcbiAgc2FuaXRpemVJbnB1dDogamVzdC5mbigoaW5wdXQpID0+IHtcbiAgICBpZiAoIWlucHV0IHx8IHR5cGVvZiBpbnB1dCAhPT0gJ3N0cmluZycpIHJldHVybiAnJztcbiAgICByZXR1cm4gaW5wdXQucmVwbGFjZSgvPHNjcmlwdFtePl0qPi4qPzxcXC9zY3JpcHQ+L2dpLCAnJyk7XG4gIH0pLFxuICBzYW5pdGl6ZVJpY2hUZXh0OiBqZXN0LmZuKChpbnB1dCkgPT4ge1xuICAgIGlmICghaW5wdXQgfHwgdHlwZW9mIGlucHV0ICE9PSAnc3RyaW5nJykgcmV0dXJuICcnO1xuICAgIHJldHVybiBpbnB1dC5yZXBsYWNlKC88c2NyaXB0W14+XSo+Lio/PFxcL3NjcmlwdD4vZ2ksICcnKTtcbiAgfSksXG59KSk7XG5cbi8vIE1vY2sgZmV0Y2ggZ2xvYmFsbHlcbmdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKTtcblxuZGVzY3JpYmUoJ2FpQ29udGVudFNlcnZpY2UnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrQ2xlYXIoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3Nhbml0aXplRXh0cmFjdGVkVGV4dCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBzYW5pdGl6ZWQgdGV4dCB3aGVuIHZhbGlkIGlucHV0IHByb3ZpZGVkJywgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gc2FuaXRpemVFeHRyYWN0ZWRUZXh0KCdIZWxsbyA8c2NyaXB0PmFsZXJ0KFwieHNzXCIpPC9zY3JpcHQ+V29ybGQnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ0hlbGxvIFdvcmxkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBzdHJpbmcgd2hlbiBpbnB1dCBpcyBudWxsJywgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gc2FuaXRpemVFeHRyYWN0ZWRUZXh0KG51bGwgYXMgYW55KTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZW1wdHkgc3RyaW5nIHdoZW4gaW5wdXQgaXMgdW5kZWZpbmVkJywgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gc2FuaXRpemVFeHRyYWN0ZWRUZXh0KHVuZGVmaW5lZCBhcyBhbnkpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBzdHJpbmcgd2hlbiBpbnB1dCBpcyBub3QgYSBzdHJpbmcnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBzYW5pdGl6ZUV4dHJhY3RlZFRleHQoMTIzIGFzIGFueSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKCcnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3Nhbml0aXplRXh0cmFjdGVkUmljaFRleHQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc2FuaXRpemVkIEhUTUwgd2hlbiB2YWxpZCBpbnB1dCBwcm92aWRlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHNhbml0aXplRXh0cmFjdGVkUmljaFRleHQoJzxwPkhlbGxvIDxzY3JpcHQ+YWxlcnQoXCJ4c3NcIik8L3NjcmlwdD5Xb3JsZDwvcD4nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJzxwPkhlbGxvIFdvcmxkPC9wPicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZW1wdHkgc3RyaW5nIHdoZW4gaW5wdXQgaXMgbnVsbCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHNhbml0aXplRXh0cmFjdGVkUmljaFRleHQobnVsbCBhcyBhbnkpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBzdHJpbmcgd2hlbiBpbnB1dCBpcyB1bmRlZmluZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBzYW5pdGl6ZUV4dHJhY3RlZFJpY2hUZXh0KHVuZGVmaW5lZCBhcyBhbnkpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBzdHJpbmcgd2hlbiBpbnB1dCBpcyBub3QgYSBzdHJpbmcnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBzYW5pdGl6ZUV4dHJhY3RlZFJpY2hUZXh0KDEyMyBhcyBhbnkpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd2YWxpZGF0ZUV4dHJhY3RlZENvbnRlbnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc3VjY2VzcyB3aGVuIHZhbGlkIGFjdGl2aXR5IGRhdGEgcHJvdmlkZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZEFjdGl2aXR5RGF0YSA9IHtcbiAgICAgICAgbmFtZTogJ0JlYWNoIFZvbGxleWJhbGwnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0Z1biBiZWFjaCBhY3Rpdml0eScsXG4gICAgICAgIGFjdGl2aXR5VHlwZTogJ2FjdGl2aXR5JyxcbiAgICAgICAgc3RhcnRUaW1lOiAnMjAyNC0wMS0wMVQxMDowMDowMFonLFxuICAgICAgICBjYXBhY2l0eTogMjAsXG4gICAgICAgIGNvc3RQZXJQZXJzb246IDI1LFxuICAgICAgICBhZHVsdHNPbmx5OiBmYWxzZSxcbiAgICAgICAgcGx1c09uZUFsbG93ZWQ6IHRydWUsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZUV4dHJhY3RlZENvbnRlbnQoJ2FjdGl2aXR5JywgdmFsaWRBY3Rpdml0eURhdGEpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIGludmFsaWQgYWN0aXZpdHkgZGF0YSBwcm92aWRlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRBY3Rpdml0eURhdGEgPSB7XG4gICAgICAgIG5hbWU6ICcnLCAvLyBJbnZhbGlkOiBlbXB0eSBuYW1lXG4gICAgICAgIGFjdGl2aXR5VHlwZTogJ2FjdGl2aXR5JyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlRXh0cmFjdGVkQ29udGVudCgnYWN0aXZpdHknLCBpbnZhbGlkQWN0aXZpdHlEYXRhKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc3VjY2VzcyB3aGVuIHZhbGlkIGFjY29tbW9kYXRpb24gZGF0YSBwcm92aWRlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkQWNjb21tb2RhdGlvbkRhdGEgPSB7XG4gICAgICAgIG5hbWU6ICdCZWFjaCBSZXNvcnQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0x1eHVyeSBiZWFjaGZyb250IHJlc29ydCcsXG4gICAgICAgIGFkZHJlc3M6ICcxMjMgQmVhY2ggUm9hZCwgQ29zdGEgUmljYScsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZUV4dHJhY3RlZENvbnRlbnQoJ2FjY29tbW9kYXRpb24nLCB2YWxpZEFjY29tbW9kYXRpb25EYXRhKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHN1Y2Nlc3Mgd2hlbiB2YWxpZCB2ZW5kb3IgZGF0YSBwcm92aWRlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkVmVuZG9yRGF0YSA9IHtcbiAgICAgICAgbmFtZTogJ0Nvc3RhIFJpY2EgUGhvdG9ncmFwaHknLFxuICAgICAgICBjYXRlZ29yeTogJ3Bob3RvZ3JhcGh5JyxcbiAgICAgICAgY29udGFjdE5hbWU6ICdKb2huIERvZScsXG4gICAgICAgIGVtYWlsOiAnam9obkBleGFtcGxlLmNvbScsXG4gICAgICAgIHBob25lOiAnKzEyMzQ1Njc4OTAnLFxuICAgICAgICBwcmljaW5nTW9kZWw6ICdmbGF0X3JhdGUnLFxuICAgICAgICBiYXNlQ29zdDogMjUwMCxcbiAgICAgICAgbm90ZXM6ICdQcm9mZXNzaW9uYWwgd2VkZGluZyBwaG90b2dyYXBoeScsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZUV4dHJhY3RlZENvbnRlbnQoJ3ZlbmRvcicsIHZhbGlkVmVuZG9yRGF0YSk7XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBJTlZBTElEX0NPTlRFTlRfVFlQRSB3aGVuIHVuc3VwcG9ydGVkIGNvbnRlbnQgdHlwZSBwcm92aWRlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlRXh0cmFjdGVkQ29udGVudCgnaW52YWxpZCcgYXMgYW55LCB7fSk7XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ0lOVkFMSURfQ09OVEVOVF9UWVBFJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBWQUxJREFUSU9OX0VSUk9SIHdoZW4gdmFsaWRhdGlvbiB0aHJvd3MgZXJyb3InLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZUV4dHJhY3RlZENvbnRlbnQoJ2FjdGl2aXR5JywgbnVsbCk7XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2V4dHJhY3RDb250ZW50RnJvbVVybCcsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIC8vIE1vY2sgZW52aXJvbm1lbnQgdmFyaWFibGVcbiAgICAgIHByb2Nlc3MuZW52LkdFTUlOSV9BUElfS0VZID0gJ3Rlc3QtYXBpLWtleSc7XG4gICAgfSk7XG5cbiAgICBhZnRlckVhY2goKCkgPT4ge1xuICAgICAgZGVsZXRlIHByb2Nlc3MuZW52LkdFTUlOSV9BUElfS0VZO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIGludmFsaWQgVVJMIHByb3ZpZGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXh0cmFjdENvbnRlbnRGcm9tVXJsKHtcbiAgICAgICAgdXJsOiAnaW52YWxpZC11cmwnLFxuICAgICAgICBjb250ZW50VHlwZTogJ2FjdGl2aXR5JyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIENPTkZJR1VSQVRJT05fRVJST1Igd2hlbiBHRU1JTklfQVBJX0tFWSBub3Qgc2V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgZGVsZXRlIHByb2Nlc3MuZW52LkdFTUlOSV9BUElfS0VZO1xuXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBnZXQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoJ3RleHQvaHRtbCcpLFxuICAgICAgICB9LFxuICAgICAgICB0ZXh0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoJzxodG1sPjxib2R5PlRlc3QgY29udGVudDwvYm9keT48L2h0bWw+JyksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXh0cmFjdENvbnRlbnRGcm9tVXJsKHtcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbScsXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYWN0aXZpdHknLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnQ09ORklHVVJBVElPTl9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gRkVUQ0hfRVJST1Igd2hlbiBVUkwgZmV0Y2ggZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICBzdGF0dXM6IDQwNCxcbiAgICAgICAgc3RhdHVzVGV4dDogJ05vdCBGb3VuZCcsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXh0cmFjdENvbnRlbnRGcm9tVXJsKHtcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbScsXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYWN0aXZpdHknLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnRkVUQ0hfRVJST1InKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIElOVkFMSURfQ09OVEVOVF9UWVBFIHdoZW4gbm9uLUhUTUwgY29udGVudCByZXR1cm5lZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIGdldDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSgnYXBwbGljYXRpb24vanNvbicpLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4dHJhY3RDb250ZW50RnJvbVVybCh7XG4gICAgICAgIHVybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20nLFxuICAgICAgICBjb250ZW50VHlwZTogJ2FjdGl2aXR5JyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ0lOVkFMSURfQ09OVEVOVF9UWVBFJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBDT05URU5UX1RPT19MQVJHRSB3aGVuIGNvbnRlbnQgZXhjZWVkcyAxTUInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBsYXJnZUNvbnRlbnQgPSAneCcucmVwZWF0KDEwMjQgKiAxMDI0ICsgMSk7IC8vIDFNQiArIDEgYnl0ZVxuXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBnZXQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoJ3RleHQvaHRtbCcpLFxuICAgICAgICB9LFxuICAgICAgICB0ZXh0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobGFyZ2VDb250ZW50KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBleHRyYWN0Q29udGVudEZyb21Vcmwoe1xuICAgICAgICB1cmw6ICdodHRwczovL2V4YW1wbGUuY29tJyxcbiAgICAgICAgY29udGVudFR5cGU6ICdhY3Rpdml0eScsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdDT05URU5UX1RPT19MQVJHRScpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVElNRU9VVCB3aGVuIGZldGNoIHRpbWVzIG91dCcsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb25PbmNlKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+IHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdSZXF1ZXN0IHRpbWVkIG91dCcpO1xuICAgICAgICAgICAgZXJyb3IubmFtZSA9ICdBYm9ydEVycm9yJztcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXh0cmFjdENvbnRlbnRGcm9tVXJsKHtcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbScsXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnYWN0aXZpdHknLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVElNRU9VVCcpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gRVhURVJOQUxfU0VSVklDRV9FUlJPUiB3aGVuIEFJIHNlcnZpY2UgZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBnZXQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoJ3RleHQvaHRtbCcpLFxuICAgICAgICB9LFxuICAgICAgICB0ZXh0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoJzxodG1sPjxib2R5PlRlc3QgY29udGVudDwvYm9keT48L2h0bWw+JyksXG4gICAgICB9KTtcblxuICAgICAgLy8gTW9jayBHb29nbGVHZW5lcmF0aXZlQUkgdG8gdGhyb3cgZXJyb3JcbiAgICAgIGNvbnN0IHsgR29vZ2xlR2VuZXJhdGl2ZUFJIH0gPSByZXF1aXJlKCdAZ29vZ2xlL2dlbmVyYXRpdmUtYWknKTtcbiAgICAgIEdvb2dsZUdlbmVyYXRpdmVBSS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gKHtcbiAgICAgICAgZ2V0R2VuZXJhdGl2ZU1vZGVsOiAoKSA9PiAoe1xuICAgICAgICAgIGdlbmVyYXRlQ29udGVudDogKCkgPT4ge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBSSBzZXJ2aWNlIGVycm9yJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSksXG4gICAgICB9KSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4dHJhY3RDb250ZW50RnJvbVVybCh7XG4gICAgICAgIHVybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20nLFxuICAgICAgICBjb250ZW50VHlwZTogJ2FjdGl2aXR5JyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ0VYVEVSTkFMX1NFUlZJQ0VfRVJST1InKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59KTsiXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJzYW5pdGl6ZUlucHV0IiwiZm4iLCJpbnB1dCIsInJlcGxhY2UiLCJzYW5pdGl6ZVJpY2hUZXh0IiwiZ2xvYmFsIiwiZmV0Y2giLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwibW9ja0NsZWFyIiwiaXQiLCJyZXN1bHQiLCJzYW5pdGl6ZUV4dHJhY3RlZFRleHQiLCJleHBlY3QiLCJ0b0JlIiwidW5kZWZpbmVkIiwic2FuaXRpemVFeHRyYWN0ZWRSaWNoVGV4dCIsInZhbGlkQWN0aXZpdHlEYXRhIiwibmFtZSIsImRlc2NyaXB0aW9uIiwiYWN0aXZpdHlUeXBlIiwic3RhcnRUaW1lIiwiY2FwYWNpdHkiLCJjb3N0UGVyUGVyc29uIiwiYWR1bHRzT25seSIsInBsdXNPbmVBbGxvd2VkIiwidmFsaWRhdGVFeHRyYWN0ZWRDb250ZW50Iiwic3VjY2VzcyIsImludmFsaWRBY3Rpdml0eURhdGEiLCJlcnJvciIsImNvZGUiLCJ2YWxpZEFjY29tbW9kYXRpb25EYXRhIiwiYWRkcmVzcyIsInZhbGlkVmVuZG9yRGF0YSIsImNhdGVnb3J5IiwiY29udGFjdE5hbWUiLCJlbWFpbCIsInBob25lIiwicHJpY2luZ01vZGVsIiwiYmFzZUNvc3QiLCJub3RlcyIsInByb2Nlc3MiLCJlbnYiLCJHRU1JTklfQVBJX0tFWSIsImFmdGVyRWFjaCIsImV4dHJhY3RDb250ZW50RnJvbVVybCIsInVybCIsImNvbnRlbnRUeXBlIiwibW9ja1Jlc29sdmVkVmFsdWVPbmNlIiwib2siLCJoZWFkZXJzIiwiZ2V0IiwibW9ja1JldHVyblZhbHVlIiwidGV4dCIsIm1vY2tSZXNvbHZlZFZhbHVlIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImxhcmdlQ29udGVudCIsInJlcGVhdCIsIm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UiLCJQcm9taXNlIiwiXyIsInJlamVjdCIsInNldFRpbWVvdXQiLCJFcnJvciIsIkdvb2dsZUdlbmVyYXRpdmVBSSIsInJlcXVpcmUiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJnZXRHZW5lcmF0aXZlTW9kZWwiLCJnZW5lcmF0ZUNvbnRlbnQiXSwibWFwcGluZ3MiOiI7QUFRQSw2QkFBNkI7QUFDN0JBLEtBQUtDLElBQUksQ0FBQztBQUNWRCxLQUFLQyxJQUFJLENBQUMseUJBQXlCLElBQU8sQ0FBQTtRQUN4Q0MsZUFBZUYsS0FBS0csRUFBRSxDQUFDLENBQUNDO1lBQ3RCLElBQUksQ0FBQ0EsU0FBUyxPQUFPQSxVQUFVLFVBQVUsT0FBTztZQUNoRCxPQUFPQSxNQUFNQyxPQUFPLENBQUMsZ0NBQWdDO1FBQ3ZEO1FBQ0FDLGtCQUFrQk4sS0FBS0csRUFBRSxDQUFDLENBQUNDO1lBQ3pCLElBQUksQ0FBQ0EsU0FBUyxPQUFPQSxVQUFVLFVBQVUsT0FBTztZQUNoRCxPQUFPQSxNQUFNQyxPQUFPLENBQUMsZ0NBQWdDO1FBQ3ZEO0lBQ0YsQ0FBQTs7OztrQ0FkTztBQWdCUCxzQkFBc0I7QUFDdEJFLE9BQU9DLEtBQUssR0FBR1IsS0FBS0csRUFBRTtBQUV0Qk0sU0FBUyxvQkFBb0I7SUFDM0JDLFdBQVc7UUFDVFYsS0FBS1csYUFBYTtRQUNqQkosT0FBT0MsS0FBSyxDQUFlSSxTQUFTO0lBQ3ZDO0lBRUFILFNBQVMseUJBQXlCO1FBQ2hDSSxHQUFHLDBEQUEwRDtZQUMzRCxNQUFNQyxTQUFTQyxJQUFBQSx1Q0FBcUIsRUFBQztZQUNyQ0MsT0FBT0YsUUFBUUcsSUFBSSxDQUFDO1FBQ3RCO1FBRUFKLEdBQUcsaURBQWlEO1lBQ2xELE1BQU1DLFNBQVNDLElBQUFBLHVDQUFxQixFQUFDO1lBQ3JDQyxPQUFPRixRQUFRRyxJQUFJLENBQUM7UUFDdEI7UUFFQUosR0FBRyxzREFBc0Q7WUFDdkQsTUFBTUMsU0FBU0MsSUFBQUEsdUNBQXFCLEVBQUNHO1lBQ3JDRixPQUFPRixRQUFRRyxJQUFJLENBQUM7UUFDdEI7UUFFQUosR0FBRyx5REFBeUQ7WUFDMUQsTUFBTUMsU0FBU0MsSUFBQUEsdUNBQXFCLEVBQUM7WUFDckNDLE9BQU9GLFFB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