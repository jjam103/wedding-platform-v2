{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/ReferencePreview.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\n\ninterface Reference {\n  type: 'event' | 'activity' | 'content_page' | 'accommodation' | 'location';\n  id: string;\n  name?: string;\n  description?: string;\n  metadata?: Record<string, any>;\n}\n\ninterface ReferencePreviewProps {\n  reference: Reference;\n  onRemove: () => void;\n}\n\ninterface ReferenceDetails {\n  name: string;\n  description?: string;\n  date?: string;\n  time?: string;\n  location?: string;\n  capacity?: number;\n  cost?: number;\n  slug?: string;\n  status?: string;\n  activity_type?: string;\n  event_date?: string;\n  address?: string;\n  city?: string;\n  room_count?: number;\n  [key: string]: any;\n}\n\nexport function ReferencePreview({ reference, onRemove }: ReferencePreviewProps) {\n  const router = useRouter();\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [details, setDetails] = useState<ReferenceDetails | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  // Fetch full details when expanded\n  useEffect(() => {\n    if (isExpanded && !details && !loading) {\n      fetchDetails();\n    }\n  }, [isExpanded]);\n\n  const fetchDetails = async () => {\n    setLoading(true);\n    try {\n      const response = await fetch(`/api/admin/references/${reference.type}/${reference.id}`);\n      const result = await response.json();\n      \n      if (result.success) {\n        setDetails(result.data);\n      }\n    } catch (error) {\n      console.error('Failed to fetch reference details:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getTypeBadge = () => {\n    const badges = {\n      event: { label: 'Event', color: 'bg-purple-100 text-purple-800' },\n      activity: { label: 'Activity', color: 'bg-blue-100 text-blue-800' },\n      content_page: { label: 'Page', color: 'bg-green-100 text-green-800' },\n      accommodation: { label: 'Accommodation', color: 'bg-orange-100 text-orange-800' },\n      location: { label: 'Location', color: 'bg-teal-100 text-teal-800' },\n    };\n\n    const badge = badges[reference.type];\n    return (\n      <span className={`inline-block px-2 py-1 text-xs font-medium ${badge.color} rounded`}>\n        {badge.label}\n      </span>\n    );\n  };\n\n  const getViewUrl = () => {\n    switch (reference.type) {\n      case 'event':\n        return `/admin/events`;\n      case 'activity':\n        return `/admin/activities`;\n      case 'content_page':\n        return `/admin/content-pages`;\n      case 'accommodation':\n        return `/admin/accommodations`;\n      case 'location':\n        return `/admin/locations`;\n      default:\n        return '#';\n    }\n  };\n\n  const handleNavigate = () => {\n    router.push(getViewUrl());\n  };\n\n  const renderQuickInfo = () => {\n    // Use fetched details if available, otherwise fall back to metadata\n    const data = details || reference.metadata || {};\n    const items: React.ReactElement[] = [];\n\n    // For events\n    if (data.date || data.startTime || data.details?.startTime) {\n      const dateStr = data.date || data.startTime || data.details?.startTime;\n      items.push(\n        <span key=\"date\" className=\"text-xs text-gray-500\">\n          üìÖ {new Date(dateStr).toLocaleDateString()}\n        </span>\n      );\n    }\n\n    // For activities - capacity\n    if (data.capacity || data.details?.capacity) {\n      const cap = data.capacity || data.details?.capacity;\n      items.push(\n        <span key=\"capacity\" className=\"text-xs text-gray-500\">\n          üë• {cap} guests\n        </span>\n      );\n    }\n\n    // Location\n    if (data.location || data.details?.location) {\n      const loc = data.location || data.details?.location;\n      items.push(\n        <span key=\"location\" className=\"text-xs text-gray-500 truncate max-w-[150px]\">\n          üìç {loc}\n        </span>\n      );\n    }\n\n    // For accommodations - room count\n    if (data.room_count || data.details?.roomTypeCount) {\n      const rooms = data.room_count || data.details?.roomTypeCount;\n      items.push(\n        <span key=\"rooms\" className=\"text-xs text-gray-500\">\n          üè† {rooms} rooms\n        </span>\n      );\n    }\n\n    return items.length > 0 ? (\n      <div className=\"flex items-center gap-2 text-xs text-gray-500\">\n        {items.map((item, idx) => (\n          <span key={idx} className=\"flex items-center gap-1\">\n            {idx > 0 && <span>‚Ä¢</span>}\n            {item}\n          </span>\n        ))}\n      </div>\n    ) : (\n      <div className=\"text-xs text-gray-400 italic\">\n        Click to view details\n      </div>\n    );\n  };\n\n  const renderExpandedDetails = () => {\n    if (!isExpanded) return null;\n\n    if (loading) {\n      return (\n        <div className=\"mt-3 pt-3 border-t border-gray-200\">\n          <div className=\"flex items-center justify-center py-4\">\n            <svg className=\"animate-spin h-5 w-5 text-emerald-600\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n              <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n              <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\n            </svg>\n            <span className=\"ml-2 text-sm text-gray-600\">Loading details...</span>\n          </div>\n        </div>\n      );\n    }\n\n    if (!details) return null;\n\n    const data = details;\n\n    return (\n      <div className=\"mt-3 pt-3 border-t border-gray-200 space-y-3\">\n        {data.description && (\n          <div>\n            <h5 className=\"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1\">Description</h5>\n            <p className=\"text-sm text-gray-700\">{data.description}</p>\n          </div>\n        )}\n\n        {/* Metadata grid */}\n        <div className=\"grid grid-cols-2 gap-3\">\n          {data.date && (\n            <div className=\"flex items-start gap-2\">\n              <svg className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n              </svg>\n              <div>\n                <div className=\"text-xs text-gray-500\">Date</div>\n                <div className=\"text-sm text-gray-900\">{new Date(data.date).toLocaleDateString()}</div>\n              </div>\n            </div>\n          )}\n\n          {data.time && (\n            <div className=\"flex items-start gap-2\">\n              <svg className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n              <div>\n                <div className=\"text-xs text-gray-500\">Time</div>\n                <div className=\"text-sm text-gray-900\">{data.time}</div>\n              </div>\n            </div>\n          )}\n\n          {data.location && (\n            <div className=\"flex items-start gap-2\">\n              <svg className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\n              </svg>\n              <div>\n                <div className=\"text-xs text-gray-500\">Location</div>\n                <div className=\"text-sm text-gray-900\">{data.location}</div>\n              </div>\n            </div>\n          )}\n\n          {data.capacity && (\n            <div className=\"flex items-start gap-2\">\n              <svg className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n              </svg>\n              <div>\n                <div className=\"text-xs text-gray-500\">Capacity</div>\n                <div className=\"text-sm text-gray-900\">{data.capacity} guests</div>\n              </div>\n            </div>\n          )}\n\n          {data.cost && (\n            <div className=\"flex items-start gap-2\">\n              <svg className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n              <div>\n                <div className=\"text-xs text-gray-500\">Cost</div>\n                <div className=\"text-sm text-gray-900\">${data.cost}</div>\n              </div>\n            </div>\n          )}\n\n          {data.slug && (\n            <div className=\"flex items-start gap-2\">\n              <svg className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\" />\n              </svg>\n              <div>\n                <div className=\"text-xs text-gray-500\">Slug</div>\n                <div className=\"text-sm text-gray-900 font-mono\">/{data.slug}</div>\n              </div>\n            </div>\n          )}\n\n          {data.room_count && (\n            <div className=\"flex items-start gap-2\">\n              <svg className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\n              </svg>\n              <div>\n                <div className=\"text-xs text-gray-500\">Rooms</div>\n                <div className=\"text-sm text-gray-900\">{data.room_count}</div>\n              </div>\n            </div>\n          )}\n\n          {data.status && (\n            <div className=\"flex items-start gap-2\">\n              <svg className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n              <div>\n                <div className=\"text-xs text-gray-500\">Status</div>\n                <div className=\"text-sm text-gray-900 capitalize\">{data.status}</div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Type-specific details */}\n        {reference.type === 'activity' && data.activity_type && (\n          <div>\n            <h5 className=\"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1\">Activity Type</h5>\n            <p className=\"text-sm text-gray-700 capitalize\">{data.activity_type.replace('_', ' ')}</p>\n          </div>\n        )}\n\n        {reference.type === 'event' && data.event_date && (\n          <div>\n            <h5 className=\"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1\">Event Date</h5>\n            <p className=\"text-sm text-gray-700\">{new Date(data.event_date).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</p>\n          </div>\n        )}\n\n        {reference.type === 'accommodation' && (data.address || data.city) && (\n          <div>\n            <h5 className=\"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1\">Address</h5>\n            <p className=\"text-sm text-gray-700\">\n              {data.address && <span>{data.address}</span>}\n              {data.city && <span>{data.address ? ', ' : ''}{data.city}</span>}\n            </p>\n          </div>\n        )}\n\n        {/* View button in expanded section */}\n        <div className=\"pt-2 border-t border-gray-100\">\n          <button\n            onClick={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              handleNavigate();\n            }}\n            className=\"w-full px-4 py-2 text-sm font-medium text-emerald-700 bg-emerald-50 hover:bg-emerald-100 rounded-md transition-colors flex items-center justify-center gap-2\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\n            </svg>\n            View {reference.type === 'content_page' ? 'Page' : reference.type.charAt(0).toUpperCase() + reference.type.slice(1)} in Admin\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"border-2 border-gray-300 rounded-lg bg-white hover:border-emerald-500 hover:shadow-md transition-all\">\n      {/* Collapsed header - clickable to expand */}\n      <button\n        onClick={(e) => {\n          e.preventDefault();\n          e.stopPropagation();\n          setIsExpanded(!isExpanded);\n        }}\n        className=\"w-full flex items-start justify-between gap-4 p-4 text-left hover:bg-gray-50 transition-colors rounded-lg group\"\n      >\n        {/* Left side - main content */}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            {getTypeBadge()}\n            <h4 className=\"font-semibold text-gray-900 truncate\">\n              {reference.name || details?.name || `${reference.type} (${reference.id.slice(0, 8)}...)`}\n            </h4>\n            {/* Expand/collapse indicator - more prominent */}\n            <svg \n              className={`w-5 h-5 text-gray-500 group-hover:text-emerald-600 transition-all flex-shrink-0 ${isExpanded ? 'rotate-180' : ''}`} \n              fill=\"none\" \n              stroke=\"currentColor\" \n              viewBox=\"0 0 24 24\"\n            >\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n            </svg>\n          </div>\n\n          {/* Quick info - always visible */}\n          {renderQuickInfo()}\n          \n          {/* Click to expand hint */}\n          {!isExpanded && (\n            <div className=\"mt-2 text-xs text-gray-500 group-hover:text-emerald-600 transition-colors flex items-center gap-1\">\n              <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n              Click to view details\n            </div>\n          )}\n        </div>\n\n        {/* Right side - action buttons */}\n        <div className=\"flex flex-col items-end gap-2 flex-shrink-0\">\n          {/* Navigate button */}\n          <button\n            onClick={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              handleNavigate();\n            }}\n            className=\"p-1.5 text-emerald-600 hover:text-emerald-700 hover:bg-emerald-100 rounded transition-colors\"\n            aria-label=\"Go to reference\"\n            title=\"View in admin\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\n            </svg>\n          </button>\n\n          {/* Remove button */}\n          <button\n            onClick={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              onRemove();\n            }}\n            className=\"p-1.5 text-red-600 hover:text-red-700 hover:bg-red-100 rounded transition-colors\"\n            aria-label=\"Remove reference\"\n            title=\"Remove reference\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n      </button>\n\n      {/* Expanded details */}\n      {renderExpandedDetails()}\n    </div>\n  );\n}\n"],"names":["ReferencePreview","reference","onRemove","router","useRouter","isExpanded","setIsExpanded","useState","details","setDetails","loading","setLoading","useEffect","fetchDetails","response","fetch","type","id","result","json","success","data","error","console","getTypeBadge","badges","event","label","color","activity","content_page","accommodation","location","badge","span","className","getViewUrl","handleNavigate","push","renderQuickInfo","metadata","items","date","startTime","dateStr","Date","toLocaleDateString","capacity","cap","loc","room_count","roomTypeCount","rooms","length","div","map","item","idx","renderExpandedDetails","svg","xmlns","fill","viewBox","circle","cx","cy","r","stroke","strokeWidth","path","d","description","h5","p","strokeLinecap","strokeLinejoin","time","cost","slug","status","activity_type","replace","event_date","weekday","year","month","day","address","city","button","onClick","e","preventDefault","stopPropagation","charAt","toUpperCase","slice","h4","name","aria-label","title"],"mappings":"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"}