5237db5f1709ed2ec9fff88b4d144723
"use strict";
// Mock next/navigation
jest.mock('next/navigation', ()=>({
        useRouter: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _ActivityPreviewModal = require("./ActivityPreviewModal");
const _navigation = require("next/navigation");
// Mock fetch
global.fetch = jest.fn();
describe('ActivityPreviewModal', ()=>{
    const mockRouter = {
        push: jest.fn()
    };
    const mockActivity = {
        id: 'activity-123',
        title: 'Beach Volleyball',
        date: '2024-06-14T10:00:00Z',
        time: '10:00 AM',
        location: 'Sunset Beach',
        description: 'Fun beach games and activities',
        capacity: 20,
        capacityRemaining: 8,
        cost: 50,
        hostSubsidy: 20,
        slug: 'beach-volleyball'
    };
    const mockRSVPStatus = {
        status: 'attending',
        guestCount: 2,
        dietaryRestrictions: 'Vegetarian'
    };
    beforeEach(()=>{
        jest.clearAllMocks();
        _navigation.useRouter.mockReturnValue(mockRouter);
        global.fetch.mockImplementation((url)=>{
            if (url.includes('/api/guest/activities/')) {
                return Promise.resolve({
                    ok: true,
                    json: ()=>Promise.resolve({
                            success: true,
                            data: mockActivity
                        })
                });
            }
            if (url.includes('/api/guest/rsvps')) {
                return Promise.resolve({
                    ok: true,
                    json: ()=>Promise.resolve({
                            success: true,
                            data: [
                                mockRSVPStatus
                            ]
                        })
                });
            }
            return Promise.reject(new Error('Unknown URL'));
        });
    });
    afterEach(()=>{
        jest.restoreAllMocks();
    });
    describe('Rendering', ()=>{
        it('should render loading state initially', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            expect(_react.screen.getByText('Activity Preview')).toBeInTheDocument();
            // Check for loading spinner by class name
            const spinner = document.querySelector('.animate-spin');
            expect(spinner).toBeInTheDocument();
        });
        it('should render activity details after loading', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            });
            expect(_react.screen.getByText('Sunset Beach')).toBeInTheDocument();
            expect(_react.screen.getByText('10:00 AM')).toBeInTheDocument();
            expect(_react.screen.getByText('Fun beach games and activities')).toBeInTheDocument();
        });
        it('should render capacity information', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/8 \/ 20 spots/)).toBeInTheDocument();
            });
        });
        it('should render cost information with subsidy', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('$30.00')).toBeInTheDocument(); // 50 - 20 = 30
                expect(_react.screen.getByText(/\$50\.00 - \$20\.00 host subsidy/)).toBeInTheDocument();
            });
        });
        it('should render RSVP status badge', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Attending')).toBeInTheDocument();
            });
            expect(_react.screen.getByText('Guest count: 2')).toBeInTheDocument();
        });
        it('should render dietary restrictions when present', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Your Dietary Restrictions')).toBeInTheDocument();
                expect(_react.screen.getByText('Vegetarian')).toBeInTheDocument();
            });
        });
        it('should not render optional fields when missing', async ()=>{
            const activityWithoutOptionals = {
                id: 'activity-123',
                title: 'Beach Volleyball',
                date: '2024-06-14T10:00:00Z'
            };
            global.fetch.mockImplementation((url)=>{
                if (url.includes('/api/guest/activities/')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: activityWithoutOptionals
                            })
                    });
                }
                if (url.includes('/api/guest/rsvps')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: []
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            });
            expect(_react.screen.queryByText('10:00 AM')).not.toBeInTheDocument();
            expect(_react.screen.queryByText('Sunset Beach')).not.toBeInTheDocument();
            expect(_react.screen.queryByText('Fun beach games and activities')).not.toBeInTheDocument();
            expect(_react.screen.queryByText(/spots/)).not.toBeInTheDocument();
            expect(_react.screen.queryByText(/\$/)).not.toBeInTheDocument();
        });
    });
    describe('Capacity Status Display', ()=>{
        it('should display "Available" status when capacity is not near full', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/8 \/ 20 spots Available/)).toBeInTheDocument();
            });
        });
        it('should display "Almost Full" status when capacity is 90% or more', async ()=>{
            const almostFullActivity = {
                ...mockActivity,
                capacity: 20,
                capacityRemaining: 1
            };
            global.fetch.mockImplementation((url)=>{
                if (url.includes('/api/guest/activities/')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: almostFullActivity
                            })
                    });
                }
                if (url.includes('/api/guest/rsvps')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: [
                                    mockRSVPStatus
                                ]
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/1 \/ 20 spots Almost Full/)).toBeInTheDocument();
            });
        });
        it('should display "Full" status when capacity is 0', async ()=>{
            const fullActivity = {
                ...mockActivity,
                capacity: 20,
                capacityRemaining: 0
            };
            global.fetch.mockImplementation((url)=>{
                if (url.includes('/api/guest/activities/')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: fullActivity
                            })
                    });
                }
                if (url.includes('/api/guest/rsvps')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: [
                                    mockRSVPStatus
                                ]
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/0 \/ 20 spots Full/)).toBeInTheDocument();
            });
        });
        it('should not display capacity status when capacity is not set', async ()=>{
            const activityWithoutCapacity = {
                ...mockActivity,
                capacity: undefined,
                capacityRemaining: undefined
            };
            global.fetch.mockImplementation((url)=>{
                if (url.includes('/api/guest/activities/')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: activityWithoutCapacity
                            })
                    });
                }
                if (url.includes('/api/guest/rsvps')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: [
                                    mockRSVPStatus
                                ]
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            });
            expect(_react.screen.queryByText(/spots/)).not.toBeInTheDocument();
        });
    });
    describe('Cost Calculation', ()=>{
        it('should calculate guest cost correctly with subsidy', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('$30.00')).toBeInTheDocument(); // 50 - 20 = 30
            });
        });
        it('should display full cost when no subsidy', async ()=>{
            const activityWithoutSubsidy = {
                ...mockActivity,
                cost: 50,
                hostSubsidy: 0
            };
            global.fetch.mockImplementation((url)=>{
                if (url.includes('/api/guest/activities/')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: activityWithoutSubsidy
                            })
                    });
                }
                if (url.includes('/api/guest/rsvps')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: [
                                    mockRSVPStatus
                                ]
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('$50.00')).toBeInTheDocument();
            });
            expect(_react.screen.queryByText(/host subsidy/)).not.toBeInTheDocument();
        });
        it('should not display cost when cost is 0', async ()=>{
            const freeActivity = {
                ...mockActivity,
                cost: 0
            };
            global.fetch.mockImplementation((url)=>{
                if (url.includes('/api/guest/activities/')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: freeActivity
                            })
                    });
                }
                if (url.includes('/api/guest/rsvps')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: [
                                    mockRSVPStatus
                                ]
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            });
            expect(_react.screen.queryByText(/Cost per Guest/)).not.toBeInTheDocument();
        });
        it('should not display cost when cost is undefined', async ()=>{
            const activityWithoutCost = {
                ...mockActivity,
                cost: undefined
            };
            global.fetch.mockImplementation((url)=>{
                if (url.includes('/api/guest/activities/')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: activityWithoutCost
                            })
                    });
                }
                if (url.includes('/api/guest/rsvps')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: [
                                    mockRSVPStatus
                                ]
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            });
            expect(_react.screen.queryByText(/Cost per Guest/)).not.toBeInTheDocument();
        });
    });
    describe('RSVP Status Display', ()=>{
        it('should display attending status with green badge', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                const badge = _react.screen.getByText('Attending');
                expect(badge).toHaveClass('bg-green-100', 'text-green-800');
            });
        });
        it('should display declined status with red badge', async ()=>{
            global.fetch.mockImplementation((url)=>{
                if (url.includes('/api/guest/activities/')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: mockActivity
                            })
                    });
                }
                if (url.includes('/api/guest/rsvps')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: [
                                    {
                                        status: 'declined'
                                    }
                                ]
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                const badge = _react.screen.getByText('Declined');
                expect(badge).toHaveClass('bg-red-100', 'text-red-800');
            });
        });
        it('should display maybe status with yellow badge', async ()=>{
            global.fetch.mockImplementation((url)=>{
                if (url.includes('/api/guest/activities/')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: mockActivity
                            })
                    });
                }
                if (url.includes('/api/guest/rsvps')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: [
                                    {
                                        status: 'maybe'
                                    }
                                ]
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                const badge = _react.screen.getByText('Maybe');
                expect(badge).toHaveClass('bg-yellow-100', 'text-yellow-800');
            });
        });
        it('should display pending status with gray badge', async ()=>{
            global.fetch.mockImplementation((url)=>{
                if (url.includes('/api/guest/activities/')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: mockActivity
                            })
                    });
                }
                if (url.includes('/api/guest/rsvps')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: [
                                    {
                                        status: 'pending'
                                    }
                                ]
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                const badge = _react.screen.getByText('Pending');
                expect(badge).toHaveClass('bg-gray-100', 'text-gray-800');
            });
        });
        it('should not display dietary restrictions when not present', async ()=>{
            global.fetch.mockImplementation((url)=>{
                if (url.includes('/api/guest/activities/')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: mockActivity
                            })
                    });
                }
                if (url.includes('/api/guest/rsvps')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: [
                                    {
                                        status: 'attending',
                                        guestCount: 2
                                    }
                                ]
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            });
            expect(_react.screen.queryByText('Your Dietary Restrictions')).not.toBeInTheDocument();
        });
    });
    describe('Error Handling', ()=>{
        it('should display error message when activity fetch fails', async ()=>{
            global.fetch.mockImplementation((url)=>{
                if (url.includes('/api/guest/activities/')) {
                    return Promise.resolve({
                        ok: false,
                        json: ()=>Promise.resolve({
                                success: false,
                                error: {
                                    message: 'Activity not found'
                                }
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Failed to load activity')).toBeInTheDocument();
            });
        });
        it('should handle network errors gracefully', async ()=>{
            global.fetch.mockRejectedValue(new Error('Network error'));
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                // The error message displayed is the actual error message from the catch block
                expect(_react.screen.getByText('Network error')).toBeInTheDocument();
            });
        });
    });
    describe('Modal Interactions', ()=>{
        it('should call onClose when close button is clicked', async ()=>{
            const onClose = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: onClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            });
            const closeButton = _react.screen.getByLabelText('Close');
            _react.fireEvent.click(closeButton);
            expect(onClose).toHaveBeenCalledTimes(1);
        });
        it('should call onClose when backdrop is clicked', async ()=>{
            const onClose = jest.fn();
            const { container } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: onClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            });
            const backdrop = container.firstChild;
            _react.fireEvent.click(backdrop);
            expect(onClose).toHaveBeenCalledTimes(1);
        });
        it('should call onClose when Escape key is pressed', async ()=>{
            const onClose = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: onClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            });
            _react.fireEvent.keyDown(document, {
                key: 'Escape'
            });
            expect(onClose).toHaveBeenCalledTimes(1);
        });
        it('should not call onClose when modal content is clicked', async ()=>{
            const onClose = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: onClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            });
            const modalContent = _react.screen.getByText('Beach Volleyball');
            _react.fireEvent.click(modalContent);
            expect(onClose).not.toHaveBeenCalled();
        });
    });
    describe('Navigation Actions', ()=>{
        it('should navigate to activity detail page with slug when View Full Details is clicked', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            });
            const viewDetailsButton = _react.screen.getByText('View Full Details');
            _react.fireEvent.click(viewDetailsButton);
            expect(mockRouter.push).toHaveBeenCalledWith('/activity/beach-volleyball');
        });
        it('should navigate to activity detail page with ID when slug is missing', async ()=>{
            const activityWithoutSlug = {
                ...mockActivity,
                slug: undefined
            };
            global.fetch.mockImplementation((url)=>{
                if (url.includes('/api/guest/activities/')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: activityWithoutSlug
                            })
                    });
                }
                if (url.includes('/api/guest/rsvps')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: [
                                    mockRSVPStatus
                                ]
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            });
            const viewDetailsButton = _react.screen.getByText('View Full Details');
            _react.fireEvent.click(viewDetailsButton);
            expect(mockRouter.push).toHaveBeenCalledWith('/activity/activity-123');
        });
        it('should navigate to RSVP page when RSVP Now is clicked', async ()=>{
            global.fetch.mockImplementation((url)=>{
                if (url.includes('/api/guest/activities/')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: mockActivity
                            })
                    });
                }
                if (url.includes('/api/guest/rsvps')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: [
                                    {
                                        status: 'pending'
                                    }
                                ]
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            });
            const rsvpButton = _react.screen.getByText('RSVP Now');
            _react.fireEvent.click(rsvpButton);
            expect(mockRouter.push).toHaveBeenCalledWith('/guest/rsvp?activityId=activity-123');
        });
        it('should not show RSVP Now button when already attending', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            });
            expect(_react.screen.queryByText('RSVP Now')).not.toBeInTheDocument();
        });
        it('should show RSVP Now button when status is pending', async ()=>{
            global.fetch.mockImplementation((url)=>{
                if (url.includes('/api/guest/activities/')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: mockActivity
                            })
                    });
                }
                if (url.includes('/api/guest/rsvps')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: [
                                    {
                                        status: 'pending'
                                    }
                                ]
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('RSVP Now')).toBeInTheDocument();
            });
        });
        it('should show RSVP Now button when no RSVP exists', async ()=>{
            global.fetch.mockImplementation((url)=>{
                if (url.includes('/api/guest/activities/')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: mockActivity
                            })
                    });
                }
                if (url.includes('/api/guest/rsvps')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: []
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('RSVP Now')).toBeInTheDocument();
            });
        });
    });
    describe('Accessibility', ()=>{
        it('should have proper ARIA labels', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: jest.fn()
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            });
            expect(_react.screen.getByLabelText('Close')).toBeInTheDocument();
        });
        it('should be keyboard navigable', async ()=>{
            const onClose = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ActivityPreviewModal.ActivityPreviewModal, {
                activityId: "activity-123",
                onClose: onClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            });
            // Tab to close button
            const closeButton = _react.screen.getByLabelText('Close');
            closeButton.focus();
            expect(document.activeElement).toBe(closeButton);
            // Press Enter to close
            _react.fireEvent.keyDown(closeButton, {
                key: 'Enter'
            });
            _react.fireEvent.click(closeButton);
            expect(onClose).toHaveBeenCalled();
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9ndWVzdC9BY3Rpdml0eVByZXZpZXdNb2RhbC50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgd2FpdEZvciwgZmlyZUV2ZW50IH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBBY3Rpdml0eVByZXZpZXdNb2RhbCB9IGZyb20gJy4vQWN0aXZpdHlQcmV2aWV3TW9kYWwnO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9uYXZpZ2F0aW9uJztcblxuLy8gTW9jayBuZXh0L25hdmlnYXRpb25cbmplc3QubW9jaygnbmV4dC9uYXZpZ2F0aW9uJywgKCkgPT4gKHtcbiAgdXNlUm91dGVyOiBqZXN0LmZuKCksXG59KSk7XG5cbi8vIE1vY2sgZmV0Y2hcbmdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKTtcblxuZGVzY3JpYmUoJ0FjdGl2aXR5UHJldmlld01vZGFsJywgKCkgPT4ge1xuICBjb25zdCBtb2NrUm91dGVyID0ge1xuICAgIHB1c2g6IGplc3QuZm4oKSxcbiAgfTtcblxuICBjb25zdCBtb2NrQWN0aXZpdHkgPSB7XG4gICAgaWQ6ICdhY3Rpdml0eS0xMjMnLFxuICAgIHRpdGxlOiAnQmVhY2ggVm9sbGV5YmFsbCcsXG4gICAgZGF0ZTogJzIwMjQtMDYtMTRUMTA6MDA6MDBaJyxcbiAgICB0aW1lOiAnMTA6MDAgQU0nLFxuICAgIGxvY2F0aW9uOiAnU3Vuc2V0IEJlYWNoJyxcbiAgICBkZXNjcmlwdGlvbjogJ0Z1biBiZWFjaCBnYW1lcyBhbmQgYWN0aXZpdGllcycsXG4gICAgY2FwYWNpdHk6IDIwLFxuICAgIGNhcGFjaXR5UmVtYWluaW5nOiA4LFxuICAgIGNvc3Q6IDUwLFxuICAgIGhvc3RTdWJzaWR5OiAyMCxcbiAgICBzbHVnOiAnYmVhY2gtdm9sbGV5YmFsbCcsXG4gIH07XG5cbiAgY29uc3QgbW9ja1JTVlBTdGF0dXMgPSB7XG4gICAgc3RhdHVzOiAnYXR0ZW5kaW5nJyBhcyBjb25zdCxcbiAgICBndWVzdENvdW50OiAyLFxuICAgIGRpZXRhcnlSZXN0cmljdGlvbnM6ICdWZWdldGFyaWFuJyxcbiAgfTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICAodXNlUm91dGVyIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKG1vY2tSb3V0ZXIpO1xuICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKHVybDogc3RyaW5nKSA9PiB7XG4gICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2d1ZXN0L2FjdGl2aXRpZXMvJykpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja0FjdGl2aXR5IH0pLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvZ3Vlc3QvcnN2cHMnKSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBbbW9ja1JTVlBTdGF0dXNdIH0pLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1Vua25vd24gVVJMJykpO1xuICAgIH0pO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QucmVzdG9yZUFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZW5kZXJpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgbG9hZGluZyBzdGF0ZSBpbml0aWFsbHknLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEFjdGl2aXR5UHJldmlld01vZGFsIGFjdGl2aXR5SWQ9XCJhY3Rpdml0eS0xMjNcIiBvbkNsb3NlPXtqZXN0LmZuKCl9IC8+KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0FjdGl2aXR5IFByZXZpZXcnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIC8vIENoZWNrIGZvciBsb2FkaW5nIHNwaW5uZXIgYnkgY2xhc3MgbmFtZVxuICAgICAgY29uc3Qgc3Bpbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbmltYXRlLXNwaW4nKTtcbiAgICAgIGV4cGVjdChzcGlubmVyKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgYWN0aXZpdHkgZGV0YWlscyBhZnRlciBsb2FkaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBY3Rpdml0eVByZXZpZXdNb2RhbCBhY3Rpdml0eUlkPVwiYWN0aXZpdHktMTIzXCIgb25DbG9zZT17amVzdC5mbigpfSAvPik7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQmVhY2ggVm9sbGV5YmFsbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTdW5zZXQgQmVhY2gnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcxMDowMCBBTScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0Z1biBiZWFjaCBnYW1lcyBhbmQgYWN0aXZpdGllcycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgY2FwYWNpdHkgaW5mb3JtYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPEFjdGl2aXR5UHJldmlld01vZGFsIGFjdGl2aXR5SWQ9XCJhY3Rpdml0eS0xMjNcIiBvbkNsb3NlPXtqZXN0LmZuKCl9IC8+KTtcbiAgICAgIFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC84IFxcLyAyMCBzcG90cy8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlbmRlciBjb3N0IGluZm9ybWF0aW9uIHdpdGggc3Vic2lkeScsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8QWN0aXZpdHlQcmV2aWV3TW9kYWwgYWN0aXZpdHlJZD1cImFjdGl2aXR5LTEyM1wiIG9uQ2xvc2U9e2plc3QuZm4oKX0gLz4pO1xuICAgICAgXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyQzMC4wMCcpKS50b0JlSW5UaGVEb2N1bWVudCgpOyAvLyA1MCAtIDIwID0gMzBcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL1xcJDUwXFwuMDAgLSBcXCQyMFxcLjAwIGhvc3Qgc3Vic2lkeS8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlbmRlciBSU1ZQIHN0YXR1cyBiYWRnZScsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8QWN0aXZpdHlQcmV2aWV3TW9kYWwgYWN0aXZpdHlJZD1cImFjdGl2aXR5LTEyM1wiIG9uQ2xvc2U9e2plc3QuZm4oKX0gLz4pO1xuICAgICAgXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0F0dGVuZGluZycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdHdWVzdCBjb3VudDogMicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgZGlldGFyeSByZXN0cmljdGlvbnMgd2hlbiBwcmVzZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBY3Rpdml0eVByZXZpZXdNb2RhbCBhY3Rpdml0eUlkPVwiYWN0aXZpdHktMTIzXCIgb25DbG9zZT17amVzdC5mbigpfSAvPik7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnWW91ciBEaWV0YXJ5IFJlc3RyaWN0aW9ucycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVmVnZXRhcmlhbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCByZW5kZXIgb3B0aW9uYWwgZmllbGRzIHdoZW4gbWlzc2luZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFjdGl2aXR5V2l0aG91dE9wdGlvbmFscyA9IHtcbiAgICAgICAgaWQ6ICdhY3Rpdml0eS0xMjMnLFxuICAgICAgICB0aXRsZTogJ0JlYWNoIFZvbGxleWJhbGwnLFxuICAgICAgICBkYXRlOiAnMjAyNC0wNi0xNFQxMDowMDowMFonLFxuICAgICAgfTtcblxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigodXJsOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9ndWVzdC9hY3Rpdml0aWVzLycpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGFjdGl2aXR5V2l0aG91dE9wdGlvbmFscyB9KSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2d1ZXN0L3JzdnBzJykpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogW10gfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignVW5rbm93biBVUkwnKSk7XG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxBY3Rpdml0eVByZXZpZXdNb2RhbCBhY3Rpdml0eUlkPVwiYWN0aXZpdHktMTIzXCIgb25DbG9zZT17amVzdC5mbigpfSAvPik7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQmVhY2ggVm9sbGV5YmFsbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJzEwOjAwIEFNJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnU3Vuc2V0IEJlYWNoJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnRnVuIGJlYWNoIGdhbWVzIGFuZCBhY3Rpdml0aWVzJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgvc3BvdHMvKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KC9cXCQvKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDYXBhY2l0eSBTdGF0dXMgRGlzcGxheScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgXCJBdmFpbGFibGVcIiBzdGF0dXMgd2hlbiBjYXBhY2l0eSBpcyBub3QgbmVhciBmdWxsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBY3Rpdml0eVByZXZpZXdNb2RhbCBhY3Rpdml0eUlkPVwiYWN0aXZpdHktMTIzXCIgb25DbG9zZT17amVzdC5mbigpfSAvPik7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvOCBcXC8gMjAgc3BvdHMgQXZhaWxhYmxlLykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBcIkFsbW9zdCBGdWxsXCIgc3RhdHVzIHdoZW4gY2FwYWNpdHkgaXMgOTAlIG9yIG1vcmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhbG1vc3RGdWxsQWN0aXZpdHkgPSB7XG4gICAgICAgIC4uLm1vY2tBY3Rpdml0eSxcbiAgICAgICAgY2FwYWNpdHk6IDIwLFxuICAgICAgICBjYXBhY2l0eVJlbWFpbmluZzogMSwgLy8gOTUlIGZ1bGxcbiAgICAgIH07XG5cbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKHVybDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvZ3Vlc3QvYWN0aXZpdGllcy8nKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBhbG1vc3RGdWxsQWN0aXZpdHkgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9ndWVzdC9yc3ZwcycpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IFttb2NrUlNWUFN0YXR1c10gfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignVW5rbm93biBVUkwnKSk7XG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxBY3Rpdml0eVByZXZpZXdNb2RhbCBhY3Rpdml0eUlkPVwiYWN0aXZpdHktMTIzXCIgb25DbG9zZT17amVzdC5mbigpfSAvPik7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvMSBcXC8gMjAgc3BvdHMgQWxtb3N0IEZ1bGwvKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IFwiRnVsbFwiIHN0YXR1cyB3aGVuIGNhcGFjaXR5IGlzIDAnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBmdWxsQWN0aXZpdHkgPSB7XG4gICAgICAgIC4uLm1vY2tBY3Rpdml0eSxcbiAgICAgICAgY2FwYWNpdHk6IDIwLFxuICAgICAgICBjYXBhY2l0eVJlbWFpbmluZzogMCxcbiAgICAgIH07XG5cbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKHVybDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvZ3Vlc3QvYWN0aXZpdGllcy8nKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBmdWxsQWN0aXZpdHkgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9ndWVzdC9yc3ZwcycpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IFttb2NrUlNWUFN0YXR1c10gfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignVW5rbm93biBVUkwnKSk7XG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxBY3Rpdml0eVByZXZpZXdNb2RhbCBhY3Rpdml0eUlkPVwiYWN0aXZpdHktMTIzXCIgb25DbG9zZT17amVzdC5mbigpfSAvPik7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvMCBcXC8gMjAgc3BvdHMgRnVsbC8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCBkaXNwbGF5IGNhcGFjaXR5IHN0YXR1cyB3aGVuIGNhcGFjaXR5IGlzIG5vdCBzZXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhY3Rpdml0eVdpdGhvdXRDYXBhY2l0eSA9IHtcbiAgICAgICAgLi4ubW9ja0FjdGl2aXR5LFxuICAgICAgICBjYXBhY2l0eTogdW5kZWZpbmVkLFxuICAgICAgICBjYXBhY2l0eVJlbWFpbmluZzogdW5kZWZpbmVkLFxuICAgICAgfTtcblxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigodXJsOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9ndWVzdC9hY3Rpdml0aWVzLycpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGFjdGl2aXR5V2l0aG91dENhcGFjaXR5IH0pLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvZ3Vlc3QvcnN2cHMnKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBbbW9ja1JTVlBTdGF0dXNdIH0pLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1Vua25vd24gVVJMJykpO1xuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8QWN0aXZpdHlQcmV2aWV3TW9kYWwgYWN0aXZpdHlJZD1cImFjdGl2aXR5LTEyM1wiIG9uQ2xvc2U9e2plc3QuZm4oKX0gLz4pO1xuICAgICAgXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0JlYWNoIFZvbGxleWJhbGwnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KC9zcG90cy8pKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Nvc3QgQ2FsY3VsYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgZ3Vlc3QgY29zdCBjb3JyZWN0bHkgd2l0aCBzdWJzaWR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBY3Rpdml0eVByZXZpZXdNb2RhbCBhY3Rpdml0eUlkPVwiYWN0aXZpdHktMTIzXCIgb25DbG9zZT17amVzdC5mbigpfSAvPik7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnJDMwLjAwJykpLnRvQmVJblRoZURvY3VtZW50KCk7IC8vIDUwIC0gMjAgPSAzMFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgZnVsbCBjb3N0IHdoZW4gbm8gc3Vic2lkeScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFjdGl2aXR5V2l0aG91dFN1YnNpZHkgPSB7XG4gICAgICAgIC4uLm1vY2tBY3Rpdml0eSxcbiAgICAgICAgY29zdDogNTAsXG4gICAgICAgIGhvc3RTdWJzaWR5OiAwLFxuICAgICAgfTtcblxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigodXJsOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9ndWVzdC9hY3Rpdml0aWVzLycpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGFjdGl2aXR5V2l0aG91dFN1YnNpZHkgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9ndWVzdC9yc3ZwcycpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IFttb2NrUlNWUFN0YXR1c10gfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignVW5rbm93biBVUkwnKSk7XG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxBY3Rpdml0eVByZXZpZXdNb2RhbCBhY3Rpdml0eUlkPVwiYWN0aXZpdHktMTIzXCIgb25DbG9zZT17amVzdC5mbigpfSAvPik7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnJDUwLjAwJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgvaG9zdCBzdWJzaWR5LykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgZGlzcGxheSBjb3N0IHdoZW4gY29zdCBpcyAwJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZnJlZUFjdGl2aXR5ID0ge1xuICAgICAgICAuLi5tb2NrQWN0aXZpdHksXG4gICAgICAgIGNvc3Q6IDAsXG4gICAgICB9O1xuXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCh1cmw6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2d1ZXN0L2FjdGl2aXRpZXMvJykpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogZnJlZUFjdGl2aXR5IH0pLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvZ3Vlc3QvcnN2cHMnKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBbbW9ja1JTVlBTdGF0dXNdIH0pLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1Vua25vd24gVVJMJykpO1xuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8QWN0aXZpdHlQcmV2aWV3TW9kYWwgYWN0aXZpdHlJZD1cImFjdGl2aXR5LTEyM1wiIG9uQ2xvc2U9e2plc3QuZm4oKX0gLz4pO1xuICAgICAgXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0JlYWNoIFZvbGxleWJhbGwnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KC9Db3N0IHBlciBHdWVzdC8pKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IGRpc3BsYXkgY29zdCB3aGVuIGNvc3QgaXMgdW5kZWZpbmVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYWN0aXZpdHlXaXRob3V0Q29zdCA9IHtcbiAgICAgICAgLi4ubW9ja0FjdGl2aXR5LFxuICAgICAgICBjb3N0OiB1bmRlZmluZWQsXG4gICAgICB9O1xuXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCh1cmw6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2d1ZXN0L2FjdGl2aXRpZXMvJykpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogYWN0aXZpdHlXaXRob3V0Q29zdCB9KSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2d1ZXN0L3JzdnBzJykpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogW21vY2tSU1ZQU3RhdHVzXSB9KSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdVbmtub3duIFVSTCcpKTtcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPEFjdGl2aXR5UHJldmlld01vZGFsIGFjdGl2aXR5SWQ9XCJhY3Rpdml0eS0xMjNcIiBvbkNsb3NlPXtqZXN0LmZuKCl9IC8+KTtcbiAgICAgIFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdCZWFjaCBWb2xsZXliYWxsJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgvQ29zdCBwZXIgR3Vlc3QvKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSU1ZQIFN0YXR1cyBEaXNwbGF5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGlzcGxheSBhdHRlbmRpbmcgc3RhdHVzIHdpdGggZ3JlZW4gYmFkZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPEFjdGl2aXR5UHJldmlld01vZGFsIGFjdGl2aXR5SWQ9XCJhY3Rpdml0eS0xMjNcIiBvbkNsb3NlPXtqZXN0LmZuKCl9IC8+KTtcbiAgICAgIFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGJhZGdlID0gc2NyZWVuLmdldEJ5VGV4dCgnQXR0ZW5kaW5nJyk7XG4gICAgICAgIGV4cGVjdChiYWRnZSkudG9IYXZlQ2xhc3MoJ2JnLWdyZWVuLTEwMCcsICd0ZXh0LWdyZWVuLTgwMCcpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgZGVjbGluZWQgc3RhdHVzIHdpdGggcmVkIGJhZGdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigodXJsOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9ndWVzdC9hY3Rpdml0aWVzLycpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tBY3Rpdml0eSB9KSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2d1ZXN0L3JzdnBzJykpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgZGF0YTogW3sgc3RhdHVzOiAnZGVjbGluZWQnIH1dLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignVW5rbm93biBVUkwnKSk7XG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxBY3Rpdml0eVByZXZpZXdNb2RhbCBhY3Rpdml0eUlkPVwiYWN0aXZpdHktMTIzXCIgb25DbG9zZT17amVzdC5mbigpfSAvPik7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBiYWRnZSA9IHNjcmVlbi5nZXRCeVRleHQoJ0RlY2xpbmVkJyk7XG4gICAgICAgIGV4cGVjdChiYWRnZSkudG9IYXZlQ2xhc3MoJ2JnLXJlZC0xMDAnLCAndGV4dC1yZWQtODAwJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBtYXliZSBzdGF0dXMgd2l0aCB5ZWxsb3cgYmFkZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCh1cmw6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2d1ZXN0L2FjdGl2aXRpZXMvJykpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja0FjdGl2aXR5IH0pLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvZ3Vlc3QvcnN2cHMnKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICBkYXRhOiBbeyBzdGF0dXM6ICdtYXliZScgfV0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdVbmtub3duIFVSTCcpKTtcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPEFjdGl2aXR5UHJldmlld01vZGFsIGFjdGl2aXR5SWQ9XCJhY3Rpdml0eS0xMjNcIiBvbkNsb3NlPXtqZXN0LmZuKCl9IC8+KTtcbiAgICAgIFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGJhZGdlID0gc2NyZWVuLmdldEJ5VGV4dCgnTWF5YmUnKTtcbiAgICAgICAgZXhwZWN0KGJhZGdlKS50b0hhdmVDbGFzcygnYmcteWVsbG93LTEwMCcsICd0ZXh0LXllbGxvdy04MDAnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHBlbmRpbmcgc3RhdHVzIHdpdGggZ3JheSBiYWRnZScsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKHVybDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvZ3Vlc3QvYWN0aXZpdGllcy8nKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrQWN0aXZpdHkgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9ndWVzdC9yc3ZwcycpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgIGRhdGE6IFt7IHN0YXR1czogJ3BlbmRpbmcnIH1dLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignVW5rbm93biBVUkwnKSk7XG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxBY3Rpdml0eVByZXZpZXdNb2RhbCBhY3Rpdml0eUlkPVwiYWN0aXZpdHktMTIzXCIgb25DbG9zZT17amVzdC5mbigpfSAvPik7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBiYWRnZSA9IHNjcmVlbi5nZXRCeVRleHQoJ1BlbmRpbmcnKTtcbiAgICAgICAgZXhwZWN0KGJhZGdlKS50b0hhdmVDbGFzcygnYmctZ3JheS0xMDAnLCAndGV4dC1ncmF5LTgwMCcpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCBkaXNwbGF5IGRpZXRhcnkgcmVzdHJpY3Rpb25zIHdoZW4gbm90IHByZXNlbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCh1cmw6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2d1ZXN0L2FjdGl2aXRpZXMvJykpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja0FjdGl2aXR5IH0pLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvZ3Vlc3QvcnN2cHMnKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICBkYXRhOiBbeyBzdGF0dXM6ICdhdHRlbmRpbmcnLCBndWVzdENvdW50OiAyIH1dLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignVW5rbm93biBVUkwnKSk7XG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxBY3Rpdml0eVByZXZpZXdNb2RhbCBhY3Rpdml0eUlkPVwiYWN0aXZpdHktMTIzXCIgb25DbG9zZT17amVzdC5mbigpfSAvPik7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQmVhY2ggVm9sbGV5YmFsbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ1lvdXIgRGlldGFyeSBSZXN0cmljdGlvbnMnKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgZXJyb3IgbWVzc2FnZSB3aGVuIGFjdGl2aXR5IGZldGNoIGZhaWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigodXJsOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9ndWVzdC9hY3Rpdml0aWVzLycpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogZmFsc2UsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IHsgbWVzc2FnZTogJ0FjdGl2aXR5IG5vdCBmb3VuZCcgfSB9KSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdVbmtub3duIFVSTCcpKTtcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPEFjdGl2aXR5UHJldmlld01vZGFsIGFjdGl2aXR5SWQ9XCJhY3Rpdml0eS0xMjNcIiBvbkNsb3NlPXtqZXN0LmZuKCl9IC8+KTtcbiAgICAgIFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdGYWlsZWQgdG8gbG9hZCBhY3Rpdml0eScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBuZXR3b3JrIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignTmV0d29yayBlcnJvcicpKTtcblxuICAgICAgcmVuZGVyKDxBY3Rpdml0eVByZXZpZXdNb2RhbCBhY3Rpdml0eUlkPVwiYWN0aXZpdHktMTIzXCIgb25DbG9zZT17amVzdC5mbigpfSAvPik7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAvLyBUaGUgZXJyb3IgbWVzc2FnZSBkaXNwbGF5ZWQgaXMgdGhlIGFjdHVhbCBlcnJvciBtZXNzYWdlIGZyb20gdGhlIGNhdGNoIGJsb2NrXG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdOZXR3b3JrIGVycm9yJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ01vZGFsIEludGVyYWN0aW9ucycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGwgb25DbG9zZSB3aGVuIGNsb3NlIGJ1dHRvbiBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgb25DbG9zZSA9IGplc3QuZm4oKTtcbiAgICAgIHJlbmRlcig8QWN0aXZpdHlQcmV2aWV3TW9kYWwgYWN0aXZpdHlJZD1cImFjdGl2aXR5LTEyM1wiIG9uQ2xvc2U9e29uQ2xvc2V9IC8+KTtcbiAgICAgIFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdCZWFjaCBWb2xsZXliYWxsJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ0Nsb3NlJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soY2xvc2VCdXR0b24pO1xuXG4gICAgICBleHBlY3Qob25DbG9zZSkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxsIG9uQ2xvc2Ugd2hlbiBiYWNrZHJvcCBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgb25DbG9zZSA9IGplc3QuZm4oKTtcbiAgICAgIGNvbnN0IHsgY29udGFpbmVyIH0gPSByZW5kZXIoPEFjdGl2aXR5UHJldmlld01vZGFsIGFjdGl2aXR5SWQ9XCJhY3Rpdml0eS0xMjNcIiBvbkNsb3NlPXtvbkNsb3NlfSAvPik7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQmVhY2ggVm9sbGV5YmFsbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGJhY2tkcm9wID0gY29udGFpbmVyLmZpcnN0Q2hpbGQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soYmFja2Ryb3ApO1xuXG4gICAgICBleHBlY3Qob25DbG9zZSkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxsIG9uQ2xvc2Ugd2hlbiBFc2NhcGUga2V5IGlzIHByZXNzZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBvbkNsb3NlID0gamVzdC5mbigpO1xuICAgICAgcmVuZGVyKDxBY3Rpdml0eVByZXZpZXdNb2RhbCBhY3Rpdml0eUlkPVwiYWN0aXZpdHktMTIzXCIgb25DbG9zZT17b25DbG9zZX0gLz4pO1xuICAgICAgXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0JlYWNoIFZvbGxleWJhbGwnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBmaXJlRXZlbnQua2V5RG93bihkb2N1bWVudCwgeyBrZXk6ICdFc2NhcGUnIH0pO1xuXG4gICAgICBleHBlY3Qob25DbG9zZSkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgY2FsbCBvbkNsb3NlIHdoZW4gbW9kYWwgY29udGVudCBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgb25DbG9zZSA9IGplc3QuZm4oKTtcbiAgICAgIHJlbmRlcig8QWN0aXZpdHlQcmV2aWV3TW9kYWwgYWN0aXZpdHlJZD1cImFjdGl2aXR5LTEyM1wiIG9uQ2xvc2U9e29uQ2xvc2V9IC8+KTtcbiAgICAgIFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdCZWFjaCBWb2xsZXliYWxsJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgbW9kYWxDb250ZW50ID0gc2NyZWVuLmdldEJ5VGV4dCgnQmVhY2ggVm9sbGV5YmFsbCcpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKG1vZGFsQ29udGVudCk7XG5cbiAgICAgIGV4cGVjdChvbkNsb3NlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTmF2aWdhdGlvbiBBY3Rpb25zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbmF2aWdhdGUgdG8gYWN0aXZpdHkgZGV0YWlsIHBhZ2Ugd2l0aCBzbHVnIHdoZW4gVmlldyBGdWxsIERldGFpbHMgaXMgY2xpY2tlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8QWN0aXZpdHlQcmV2aWV3TW9kYWwgYWN0aXZpdHlJZD1cImFjdGl2aXR5LTEyM1wiIG9uQ2xvc2U9e2plc3QuZm4oKX0gLz4pO1xuICAgICAgXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0JlYWNoIFZvbGxleWJhbGwnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB2aWV3RGV0YWlsc0J1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ1ZpZXcgRnVsbCBEZXRhaWxzJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sodmlld0RldGFpbHNCdXR0b24pO1xuXG4gICAgICBleHBlY3QobW9ja1JvdXRlci5wdXNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FjdGl2aXR5L2JlYWNoLXZvbGxleWJhbGwnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbmF2aWdhdGUgdG8gYWN0aXZpdHkgZGV0YWlsIHBhZ2Ugd2l0aCBJRCB3aGVuIHNsdWcgaXMgbWlzc2luZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFjdGl2aXR5V2l0aG91dFNsdWcgPSB7IC4uLm1vY2tBY3Rpdml0eSwgc2x1ZzogdW5kZWZpbmVkIH07XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCh1cmw6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2d1ZXN0L2FjdGl2aXRpZXMvJykpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogYWN0aXZpdHlXaXRob3V0U2x1ZyB9KSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2d1ZXN0L3JzdnBzJykpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogW21vY2tSU1ZQU3RhdHVzXSB9KSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdVbmtub3duIFVSTCcpKTtcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPEFjdGl2aXR5UHJldmlld01vZGFsIGFjdGl2aXR5SWQ9XCJhY3Rpdml0eS0xMjNcIiBvbkNsb3NlPXtqZXN0LmZuKCl9IC8+KTtcbiAgICAgIFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdCZWFjaCBWb2xsZXliYWxsJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgdmlld0RldGFpbHNCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdWaWV3IEZ1bGwgRGV0YWlscycpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHZpZXdEZXRhaWxzQnV0dG9uKTtcblxuICAgICAgZXhwZWN0KG1vY2tSb3V0ZXIucHVzaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hY3Rpdml0eS9hY3Rpdml0eS0xMjMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbmF2aWdhdGUgdG8gUlNWUCBwYWdlIHdoZW4gUlNWUCBOb3cgaXMgY2xpY2tlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKHVybDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvZ3Vlc3QvYWN0aXZpdGllcy8nKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrQWN0aXZpdHkgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9ndWVzdC9yc3ZwcycpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgIGRhdGE6IFt7IHN0YXR1czogJ3BlbmRpbmcnIH1dLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignVW5rbm93biBVUkwnKSk7XG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxBY3Rpdml0eVByZXZpZXdNb2RhbCBhY3Rpdml0eUlkPVwiYWN0aXZpdHktMTIzXCIgb25DbG9zZT17amVzdC5mbigpfSAvPik7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQmVhY2ggVm9sbGV5YmFsbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJzdnBCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdSU1ZQIE5vdycpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHJzdnBCdXR0b24pO1xuXG4gICAgICBleHBlY3QobW9ja1JvdXRlci5wdXNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2d1ZXN0L3JzdnA/YWN0aXZpdHlJZD1hY3Rpdml0eS0xMjMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IHNob3cgUlNWUCBOb3cgYnV0dG9uIHdoZW4gYWxyZWFkeSBhdHRlbmRpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPEFjdGl2aXR5UHJldmlld01vZGFsIGFjdGl2aXR5SWQ9XCJhY3Rpdml0eS0xMjNcIiBvbkNsb3NlPXtqZXN0LmZuKCl9IC8+KTtcbiAgICAgIFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdCZWFjaCBWb2xsZXliYWxsJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnUlNWUCBOb3cnKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNob3cgUlNWUCBOb3cgYnV0dG9uIHdoZW4gc3RhdHVzIGlzIHBlbmRpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCh1cmw6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2d1ZXN0L2FjdGl2aXRpZXMvJykpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja0FjdGl2aXR5IH0pLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvZ3Vlc3QvcnN2cHMnKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICBkYXRhOiBbeyBzdGF0dXM6ICdwZW5kaW5nJyB9XSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1Vua25vd24gVVJMJykpO1xuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8QWN0aXZpdHlQcmV2aWV3TW9kYWwgYWN0aXZpdHlJZD1cImFjdGl2aXR5LTEyM1wiIG9uQ2xvc2U9e2plc3QuZm4oKX0gLz4pO1xuICAgICAgXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1JTVlAgTm93JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2hvdyBSU1ZQIE5vdyBidXR0b24gd2hlbiBubyBSU1ZQIGV4aXN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKHVybDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvZ3Vlc3QvYWN0aXZpdGllcy8nKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrQWN0aXZpdHkgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9ndWVzdC9yc3ZwcycpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IFtdIH0pLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1Vua25vd24gVVJMJykpO1xuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8QWN0aXZpdHlQcmV2aWV3TW9kYWwgYWN0aXZpdHlJZD1cImFjdGl2aXR5LTEyM1wiIG9uQ2xvc2U9e2plc3QuZm4oKX0gLz4pO1xuICAgICAgXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1JTVlAgTm93JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FjY2Vzc2liaWxpdHknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYXZlIHByb3BlciBBUklBIGxhYmVscycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8QWN0aXZpdHlQcmV2aWV3TW9kYWwgYWN0aXZpdHlJZD1cImFjdGl2aXR5LTEyM1wiIG9uQ2xvc2U9e2plc3QuZm4oKX0gLz4pO1xuICAgICAgXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0JlYWNoIFZvbGxleWJhbGwnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdDbG9zZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBiZSBrZXlib2FyZCBuYXZpZ2FibGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBvbkNsb3NlID0gamVzdC5mbigpO1xuICAgICAgcmVuZGVyKDxBY3Rpdml0eVByZXZpZXdNb2RhbCBhY3Rpdml0eUlkPVwiYWN0aXZpdHktMTIzXCIgb25DbG9zZT17b25DbG9zZX0gLz4pO1xuICAgICAgXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0JlYWNoIFZvbGxleWJhbGwnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBUYWIgdG8gY2xvc2UgYnV0dG9uXG4gICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnQ2xvc2UnKTtcbiAgICAgIGNsb3NlQnV0dG9uLmZvY3VzKCk7XG4gICAgICBleHBlY3QoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkudG9CZShjbG9zZUJ1dHRvbik7XG5cbiAgICAgIC8vIFByZXNzIEVudGVyIHRvIGNsb3NlXG4gICAgICBmaXJlRXZlbnQua2V5RG93bihjbG9zZUJ1dHRvbiwgeyBrZXk6ICdFbnRlcicgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soY2xvc2VCdXR0b24pO1xuICAgICAgZXhwZWN0KG9uQ2xvc2UpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInVzZVJvdXRlciIsImZuIiwiZ2xvYmFsIiwiZmV0Y2giLCJkZXNjcmliZSIsIm1vY2tSb3V0ZXIiLCJwdXNoIiwibW9ja0FjdGl2aXR5IiwiaWQiLCJ0aXRsZSIsImRhdGUiLCJ0aW1lIiwibG9jYXRpb24iLCJkZXNjcmlwdGlvbiIsImNhcGFjaXR5IiwiY2FwYWNpdHlSZW1haW5pbmciLCJjb3N0IiwiaG9zdFN1YnNpZHkiLCJzbHVnIiwibW9ja1JTVlBTdGF0dXMiLCJzdGF0dXMiLCJndWVzdENvdW50IiwiZGlldGFyeVJlc3RyaWN0aW9ucyIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwibW9ja1JldHVyblZhbHVlIiwibW9ja0ltcGxlbWVudGF0aW9uIiwidXJsIiwiaW5jbHVkZXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsIm9rIiwianNvbiIsInN1Y2Nlc3MiLCJkYXRhIiwicmVqZWN0IiwiRXJyb3IiLCJhZnRlckVhY2giLCJyZXN0b3JlQWxsTW9ja3MiLCJpdCIsInJlbmRlciIsIkFjdGl2aXR5UHJldmlld01vZGFsIiwiYWN0aXZpdHlJZCIsIm9uQ2xvc2UiLCJleHBlY3QiLCJzY3JlZW4iLCJnZXRCeVRleHQiLCJ0b0JlSW5UaGVEb2N1bWVudCIsInNwaW5uZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ3YWl0Rm9yIiwiYWN0aXZpdHlXaXRob3V0T3B0aW9uYWxzIiwicXVlcnlCeVRleHQiLCJub3QiLCJhbG1vc3RGdWxsQWN0aXZpdHkiLCJmdWxsQWN0aXZpdHkiLCJhY3Rpdml0eVdpdGhvdXRDYXBhY2l0eSIsInVuZGVmaW5lZCIsImFjdGl2aXR5V2l0aG91dFN1YnNpZHkiLCJmcmVlQWN0aXZpdHkiLCJhY3Rpdml0eVdpdGhvdXRDb3N0IiwiYmFkZ2UiLCJ0b0hhdmVDbGFzcyIsImVycm9yIiwibWVzc2FnZSIsIm1vY2tSZWplY3RlZFZhbHVlIiwiY2xvc2VCdXR0b24iLCJnZXRCeUxhYmVsVGV4dCIsImZpcmVFdmVudCIsImNsaWNrIiwidG9IYXZlQmVlbkNhbGxlZFRpbWVzIiwiY29udGFpbmVyIiwiYmFja2Ryb3AiLCJmaXJzdENoaWxkIiwia2V5RG93biIsImtleSIsIm1vZGFsQ29udGVudCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJ2aWV3RGV0YWlsc0J1dHRvbiIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwiYWN0aXZpdHlXaXRob3V0U2x1ZyIsInJzdnBCdXR0b24iLCJmb2N1cyIsImFjdGl2ZUVsZW1lbnQiLCJ0b0JlIl0sIm1hcHBpbmdzIjoiO0FBSUEsdUJBQXVCO0FBQ3ZCQSxLQUFLQyxJQUFJLENBQUMsbUJBQW1CLElBQU8sQ0FBQTtRQUNsQ0MsV0FBV0YsS0FBS0csRUFBRTtJQUNwQixDQUFBOzs7Ozt1QkFQbUQ7c0NBQ2Q7NEJBQ1g7QUFPMUIsYUFBYTtBQUNiQyxPQUFPQyxLQUFLLEdBQUdMLEtBQUtHLEVBQUU7QUFFdEJHLFNBQVMsd0JBQXdCO0lBQy9CLE1BQU1DLGFBQWE7UUFDakJDLE1BQU1SLEtBQUtHLEVBQUU7SUFDZjtJQUVBLE1BQU1NLGVBQWU7UUFDbkJDLElBQUk7UUFDSkMsT0FBTztRQUNQQyxNQUFNO1FBQ05DLE1BQU07UUFDTkMsVUFBVTtRQUNWQyxhQUFhO1FBQ2JDLFVBQVU7UUFDVkMsbUJBQW1CO1FBQ25CQyxNQUFNO1FBQ05DLGFBQWE7UUFDYkMsTUFBTTtJQUNSO0lBRUEsTUFBTUMsaUJBQWlCO1FBQ3JCQyxRQUFRO1FBQ1JDLFlBQVk7UUFDWkMscUJBQXFCO0lBQ3ZCO0lBRUFDLFdBQVc7UUFDVHpCLEtBQUswQixhQUFhO1FBQ2pCeEIscUJBQVMsQ0FBZXlCLGVBQWUsQ0FBQ3BCO1FBQ3hDSCxPQUFPQyxLQUFLLENBQWV1QixrQkFBa0IsQ0FBQyxDQUFDQztZQUM5QyxJ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