{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/ui/ConfirmDialog.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useCallback, useState } from 'react';\nimport { Button } from './Button';\n\ninterface ConfirmDialogProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: () => Promise<void>;\n  title: string;\n  message: string;\n  confirmLabel?: string;\n  cancelLabel?: string;\n  variant?: 'danger' | 'warning';\n}\n\n/**\n * ConfirmDialog Component\n * \n * Modal dialog for confirming destructive actions.\n * Supports keyboard navigation (Escape to close) and click-outside-to-close.\n * Prevents body scroll when open.\n * Disables buttons during confirmation to prevent double-submission.\n * \n * @param isOpen - Whether the dialog is open\n * @param onClose - Callback when dialog is closed\n * @param onConfirm - Async callback when user confirms the action\n * @param title - Dialog title\n * @param message - Confirmation message describing what will happen\n * @param confirmLabel - Label for confirm button (default: \"Confirm\")\n * @param cancelLabel - Label for cancel button (default: \"Cancel\")\n * @param variant - Button variant for confirm button (default: \"danger\")\n */\nexport function ConfirmDialog({\n  isOpen,\n  onClose,\n  onConfirm,\n  title,\n  message,\n  confirmLabel = 'Confirm',\n  cancelLabel = 'Cancel',\n  variant = 'danger',\n}: ConfirmDialogProps) {\n  const [isConfirming, setIsConfirming] = useState(false);\n\n  // Handle Escape key press\n  const handleEscape = useCallback((event: KeyboardEvent) => {\n    if (event.key === 'Escape' && !isConfirming) {\n      onClose();\n    }\n  }, [onClose, isConfirming]);\n\n  // Handle backdrop click\n  const handleBackdropClick = useCallback((event: React.MouseEvent<HTMLDivElement>) => {\n    if (event.target === event.currentTarget && !isConfirming) {\n      onClose();\n    }\n  }, [onClose, isConfirming]);\n\n  // Handle confirm action\n  const handleConfirm = useCallback(async () => {\n    setIsConfirming(true);\n    try {\n      await onConfirm();\n      onClose();\n    } catch (error) {\n      // Error handling is done by the parent component via toast\n      console.error('Confirmation action failed:', error);\n    } finally {\n      setIsConfirming(false);\n    }\n  }, [onConfirm, onClose]);\n\n  // Prevent body scroll when modal is open\n  useEffect(() => {\n    if (isOpen) {\n      // Save current scroll position\n      const scrollY = window.scrollY;\n      \n      // Prevent body scroll\n      document.body.style.position = 'fixed';\n      document.body.style.top = `-${scrollY}px`;\n      document.body.style.width = '100%';\n      \n      // Add escape key listener\n      document.addEventListener('keydown', handleEscape);\n      \n      return () => {\n        // Restore body scroll\n        document.body.style.position = '';\n        document.body.style.top = '';\n        document.body.style.width = '';\n        window.scrollTo(0, scrollY);\n        \n        // Remove escape key listener\n        document.removeEventListener('keydown', handleEscape);\n      };\n    }\n  }, [isOpen, handleEscape]);\n\n  if (!isOpen) {\n    return null;\n  }\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 animate-fade-in\"\n      onClick={handleBackdropClick}\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-labelledby=\"confirm-dialog-title\"\n      aria-describedby=\"confirm-dialog-message\"\n    >\n      <div\n        className=\"bg-white rounded-xl shadow-2xl max-w-md w-full animate-scale-in\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Dialog Header */}\n        <div className=\"px-6 py-4 border-b border-sage-200\">\n          <h2 \n            id=\"confirm-dialog-title\" \n            className=\"text-xl font-semibold text-sage-900\"\n          >\n            {title}\n          </h2>\n        </div>\n\n        {/* Dialog Body */}\n        <div className=\"px-6 py-4\">\n          <p \n            id=\"confirm-dialog-message\" \n            className=\"text-sage-700 text-base leading-relaxed\"\n          >\n            {message}\n          </p>\n        </div>\n\n        {/* Dialog Footer */}\n        <div className=\"px-6 py-4 border-t border-sage-200 flex items-center justify-end gap-3\">\n          <Button\n            variant=\"secondary\"\n            onClick={onClose}\n            disabled={isConfirming}\n            aria-label={cancelLabel}\n          >\n            {cancelLabel}\n          </Button>\n          <Button\n            variant={variant === 'warning' ? 'secondary' : variant}\n            onClick={handleConfirm}\n            loading={isConfirming}\n            disabled={isConfirming}\n            aria-label={confirmLabel}\n          >\n            {confirmLabel}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["ConfirmDialog","isOpen","onClose","onConfirm","title","message","confirmLabel","cancelLabel","variant","isConfirming","setIsConfirming","useState","handleEscape","useCallback","event","key","handleBackdropClick","target","currentTarget","handleConfirm","error","console","useEffect","scrollY","window","document","body","style","position","top","width","addEventListener","scrollTo","removeEventListener","div","className","onClick","role","aria-modal","aria-labelledby","aria-describedby","e","stopPropagation","h2","id","p","Button","disabled","aria-label","loading"],"mappings":"AAAA;;;;;+BAiCgBA;;;eAAAA;;;;uBA/BiC;wBAC1B;AA8BhB,SAASA,cAAc,EAC5BC,MAAM,EACNC,OAAO,EACPC,SAAS,EACTC,KAAK,EACLC,OAAO,EACPC,eAAe,SAAS,EACxBC,cAAc,QAAQ,EACtBC,UAAU,QAAQ,EACC;IACnB,MAAM,CAACC,cAAcC,gBAAgB,GAAGC,IAAAA,eAAQ,EAAC;IAEjD,0BAA0B;IAC1B,MAAMC,eAAeC,IAAAA,kBAAW,EAAC,CAACC;QAChC,IAAIA,MAAMC,GAAG,KAAK,YAAY,CAACN,cAAc;YAC3CP;QACF;IACF,GAAG;QAACA;QAASO;KAAa;IAE1B,wBAAwB;IACxB,MAAMO,sBAAsBH,IAAAA,kBAAW,EAAC,CAACC;QACvC,IAAIA,MAAMG,MAAM,KAAKH,MAAMI,aAAa,IAAI,CAACT,cAAc;YACzDP;QACF;IACF,GAAG;QAACA;QAASO;KAAa;IAE1B,wBAAwB;IACxB,MAAMU,gBAAgBN,IAAAA,kBAAW,EAAC;QAChCH,gBAAgB;QAChB,IAAI;YACF,MAAMP;YACND;QACF,EAAE,OAAOkB,OAAO;YACd,2DAA2D;YAC3DC,QAAQD,KAAK,CAAC,+BAA+BA;QAC/C,SAAU;YACRV,gBAAgB;QAClB;IACF,GAAG;QAACP;QAAWD;KAAQ;IAEvB,yCAAyC;IACzCoB,IAAAA,gBAAS,EAAC;QACR,IAAIrB,QAAQ;YACV,+BAA+B;YAC/B,MAAMsB,UAAUC,OAAOD,OAAO;YAE9B,sBAAsB;YACtBE,SAASC,IAAI,CAACC,KAAK,CAACC,QAAQ,GAAG;YAC/BH,SAASC,IAAI,CAACC,KAAK,CAACE,GAAG,GAAG,CAAC,CAAC,EAAEN,QAAQ,EAAE,CAAC;YACzCE,SAASC,IAAI,CAACC,KAAK,CAACG,KAAK,GAAG;YAE5B,0BAA0B;YAC1BL,SAASM,gBAAgB,CAAC,WAAWnB;YAErC,OAAO;gBACL,sBAAsB;gBACtBa,SAASC,IAAI,CAACC,KAAK,CAACC,QAAQ,GAAG;gBAC/BH,SAASC,IAAI,CAACC,KAAK,CAACE,GAAG,GAAG;gBAC1BJ,SAASC,IAAI,CAACC,KAAK,CAACG,KAAK,GAAG;gBAC5BN,OAAOQ,QAAQ,CAAC,GAAGT;gBAEnB,6BAA6B;gBAC7BE,SAASQ,mBAAmB,CAAC,WAAWrB;YAC1C;QACF;IACF,GAAG;QAACX;QAAQW;KAAa;IAEzB,IAAI,CAACX,QAAQ;QACX,OAAO;IACT;IAEA,qBACE,qBAACiC;QACCC,WAAU;QACVC,SAASpB;QACTqB,MAAK;QACLC,cAAW;QACXC,mBAAgB;QAChBC,oBAAiB;kBAEjB,cAAA,sBAACN;YACCC,WAAU;YACVC,SAAS,CAACK,IAAMA,EAAEC,eAAe;;8BAGjC,qBAACR;oBAAIC,WAAU;8BACb,cAAA,qBAACQ;wBACCC,IAAG;wBACHT,WAAU;kCAET/B;;;8BAKL,qBAAC8B;oBAAIC,WAAU;8BACb,cAAA,qBAACU;wBACCD,IAAG;wBACHT,WAAU;kCAET9B;;;8BAKL,sBAAC6B;oBAAIC,WAAU;;sCACb,qBAACW,cAAM;4BACLtC,SAAQ;4BACR4B,SAASlC;4BACT6C,UAAUtC;4BACVuC,cAAYzC;sCAEXA;;sCAEH,qBAACuC,cAAM;4BACLtC,SAASA,YAAY,YAAY,cAAcA;4BAC/C4B,SAASjB;4BACT8B,SAASxC;4BACTsC,UAAUtC;4BACVuC,cAAY1C;sCAEXA;;;;;;;AAMb"}