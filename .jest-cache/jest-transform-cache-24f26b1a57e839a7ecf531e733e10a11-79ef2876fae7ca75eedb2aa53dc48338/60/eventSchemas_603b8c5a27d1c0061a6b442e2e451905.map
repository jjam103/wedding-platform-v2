{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/schemas/eventSchemas.ts"],"sourcesContent":["import { z } from 'zod';\n\n/**\n * Base schema for event data without refinements.\n */\nconst baseEventSchema = z.object({\n  name: z.string().trim().min(1, 'Event name is required').max(100, 'Event name must be 100 characters or less'),\n  description: z.string().max(2000, 'Description must be 2000 characters or less').nullable().optional(),\n  eventType: z.enum(['ceremony', 'reception', 'pre_wedding', 'post_wedding'], {\n    errorMap: () => ({ message: 'Event type must be ceremony, reception, pre_wedding, or post_wedding' }),\n  }),\n  locationId: z.string().uuid('Invalid location ID format').nullable().optional(),\n  startDate: z.string().datetime('Invalid start date format'),\n  endDate: z.string().datetime('Invalid end date format').nullable().optional(),\n  rsvpRequired: z.boolean().optional(),\n  rsvpDeadline: z.string().nullable().optional(),\n  visibility: z.array(z.string()).optional(),\n  status: z.enum(['draft', 'published']).optional(),\n});\n\n/**\n * Schema for creating a new event.\n * All required fields must be provided.\n */\nexport const createEventSchema = baseEventSchema.refine(\n  (data) => {\n    if (data.endDate && data.startDate) {\n      return new Date(data.startDate) <= new Date(data.endDate);\n    }\n    return true;\n  },\n  {\n    message: 'End date must be after or equal to start date',\n    path: ['endDate'],\n  }\n);\n\n/**\n * Schema for updating an existing event.\n * All fields are optional for partial updates.\n */\nexport const updateEventSchema = baseEventSchema.partial().refine(\n  (data) => {\n    if (data.endDate && data.startDate) {\n      return new Date(data.startDate) <= new Date(data.endDate);\n    }\n    return true;\n  },\n  {\n    message: 'End date must be after or equal to start date',\n    path: ['endDate'],\n  }\n);\n\n/**\n * Schema for event list filters.\n */\nexport const eventFilterSchema = z.object({\n  eventType: z.enum(['ceremony', 'reception', 'pre_wedding', 'post_wedding']).optional(),\n  status: z.enum(['draft', 'published']).optional(),\n  locationId: z.string().uuid().optional(),\n  startDateFrom: z.string().datetime().optional(),\n  startDateTo: z.string().datetime().optional(),\n  page: z.number().int().positive().optional(),\n  pageSize: z.number().int().positive().max(100).optional(),\n});\n\n/**\n * Schema for event search.\n */\nexport const eventSearchSchema = z.object({\n  query: z.string().min(1, 'Search query is required'),\n  page: z.number().int().positive().optional(),\n  pageSize: z.number().int().positive().max(100).optional(),\n});\n\n/**\n * Schema for scheduling conflict check.\n */\nexport const conflictCheckSchema = z.object({\n  locationId: z.string().uuid('Invalid location ID format'),\n  startDate: z.string().datetime('Invalid start date format'),\n  endDate: z.string().datetime('Invalid end date format').nullable().optional(),\n  excludeEventId: z.string().uuid().optional(), // For update operations\n});\n\n/**\n * Type definitions derived from schemas.\n */\nexport type CreateEventDTO = z.infer<typeof createEventSchema>;\nexport type UpdateEventDTO = z.infer<typeof updateEventSchema>;\nexport type EventFilterDTO = z.infer<typeof eventFilterSchema>;\nexport type EventSearchDTO = z.infer<typeof eventSearchSchema>;\nexport type ConflictCheckDTO = z.infer<typeof conflictCheckSchema>;\n\n/**\n * Event entity type matching database structure.\n */\nexport interface Event {\n  id: string;\n  name: string;\n  description: string | null;\n  eventType: 'ceremony' | 'reception' | 'pre_wedding' | 'post_wedding';\n  locationId: string | null;\n  startDate: string;\n  endDate: string | null;\n  rsvpRequired: boolean;\n  rsvpDeadline: string | null;\n  visibility: string[];\n  status: 'draft' | 'published';\n  createdAt: string;\n  updatedAt: string;\n}\n\n/**\n * Paginated event list response.\n */\nexport interface PaginatedEvents {\n  events: Event[];\n  total: number;\n  page: number;\n  pageSize: number;\n  totalPages: number;\n}\n\n/**\n * Scheduling conflict information.\n */\nexport interface SchedulingConflict {\n  hasConflict: boolean;\n  conflictingEvents: Array<{\n    id: string;\n    name: string;\n    startDate: string;\n    endDate: string | null;\n  }>;\n}\n"],"names":["conflictCheckSchema","createEventSchema","eventFilterSchema","eventSearchSchema","updateEventSchema","baseEventSchema","z","object","name","string","trim","min","max","description","nullable","optional","eventType","enum","errorMap","message","locationId","uuid","startDate","datetime","endDate","rsvpRequired","boolean","rsvpDeadline","visibility","array","status","refine","data","Date","path","partial","startDateFrom","startDateTo","page","number","int","positive","pageSize","query","excludeEventId"],"mappings":";;;;;;;;;;;QA+EaA;eAAAA;;QAvDAC;eAAAA;;QAiCAC;eAAAA;;QAaAC;eAAAA;;QA7BAC;eAAAA;;;qBAzCK;AAElB;;CAEC,GACD,MAAMC,kBAAkBC,MAAC,CAACC,MAAM,CAAC;IAC/BC,MAAMF,MAAC,CAACG,MAAM,GAAGC,IAAI,GAAGC,GAAG,CAAC,GAAG,0BAA0BC,GAAG,CAAC,KAAK;IAClEC,aAAaP,MAAC,CAACG,MAAM,GAAGG,GAAG,CAAC,MAAM,+CAA+CE,QAAQ,GAAGC,QAAQ;IACpGC,WAAWV,MAAC,CAACW,IAAI,CAAC;QAAC;QAAY;QAAa;QAAe;KAAe,EAAE;QAC1EC,UAAU,IAAO,CAAA;gBAAEC,SAAS;YAAuE,CAAA;IACrG;IACAC,YAAYd,MAAC,CAACG,MAAM,GAAGY,IAAI,CAAC,8BAA8BP,QAAQ,GAAGC,QAAQ;IAC7EO,WAAWhB,MAAC,CAACG,MAAM,GAAGc,QAAQ,CAAC;IAC/BC,SAASlB,MAAC,CAACG,MAAM,GAAGc,QAAQ,CAAC,2BAA2BT,QAAQ,GAAGC,QAAQ;IAC3EU,cAAcnB,MAAC,CAACoB,OAAO,GAAGX,QAAQ;IAClCY,cAAcrB,MAAC,CAACG,MAAM,GAAGK,QAAQ,GAAGC,QAAQ;IAC5Ca,YAAYtB,MAAC,CAACuB,KAAK,CAACvB,MAAC,CAACG,MAAM,IAAIM,QAAQ;IACxCe,QAAQxB,MAAC,CAACW,IAAI,CAAC;QAAC;QAAS;KAAY,EAAEF,QAAQ;AACjD;AAMO,MAAMd,oBAAoBI,gBAAgB0B,MAAM,CACrD,CAACC;IACC,IAAIA,KAAKR,OAAO,IAAIQ,KAAKV,SAAS,EAAE;QAClC,OAAO,IAAIW,KAAKD,KAAKV,SAAS,KAAK,IAAIW,KAAKD,KAAKR,OAAO;IAC1D;IACA,OAAO;AACT,GACA;IACEL,SAAS;IACTe,MAAM;QAAC;KAAU;AACnB;AAOK,MAAM9B,oBAAoBC,gBAAgB8B,OAAO,GAAGJ,MAAM,CAC/D,CAACC;IACC,IAAIA,KAAKR,OAAO,IAAIQ,KAAKV,SAAS,EAAE;QAClC,OAAO,IAAIW,KAAKD,KAAKV,SAAS,KAAK,IAAIW,KAAKD,KAAKR,OAAO;IAC1D;IACA,OAAO;AACT,GACA;IACEL,SAAS;IACTe,MAAM;QAAC;KAAU;AACnB;AAMK,MAAMhC,oBAAoBI,MAAC,CAACC,MAAM,CAAC;IACxCS,WAAWV,MAAC,CAACW,IAAI,CAAC;QAAC;QAAY;QAAa;QAAe;KAAe,EAAEF,QAAQ;IACpFe,QAAQxB,MAAC,CAACW,IAAI,CAAC;QAAC;QAAS;KAAY,EAAEF,QAAQ;IAC/CK,YAAYd,MAAC,CAACG,MAAM,GAAGY,IAAI,GAAGN,QAAQ;IACtCqB,eAAe9B,MAAC,CAACG,MAAM,GAAGc,QAAQ,GAAGR,QAAQ;IAC7CsB,aAAa/B,MAAC,CAACG,MAAM,GAAGc,QAAQ,GAAGR,QAAQ;IAC3CuB,MAAMhC,MAAC,CAACiC,MAAM,GAAGC,GAAG,GAAGC,QAAQ,GAAG1B,QAAQ;IAC1C2B,UAAUpC,MAAC,CAACiC,MAAM,GAAGC,GAAG,GAAGC,QAAQ,GAAG7B,GAAG,CAAC,KAAKG,QAAQ;AACzD;AAKO,MAAMZ,oBAAoBG,MAAC,CAACC,MAAM,CAAC;IACxCoC,OAAOrC,MAAC,CAACG,MAAM,GAAGE,GAAG,CAAC,GAAG;IACzB2B,MAAMhC,MAAC,CAACiC,MAAM,GAAGC,GAAG,GAAGC,QAAQ,GAAG1B,QAAQ;IAC1C2B,UAAUpC,MAAC,CAACiC,MAAM,GAAGC,GAAG,GAAGC,QAAQ,GAAG7B,GAAG,CAAC,KAAKG,QAAQ;AACzD;AAKO,MAAMf,sBAAsBM,MAAC,CAACC,MAAM,CAAC;IAC1Ca,YAAYd,MAAC,CAACG,MAAM,GAAGY,IAAI,CAAC;IAC5BC,WAAWhB,MAAC,CAACG,MAAM,GAAGc,QAAQ,CAAC;IAC/BC,SAASlB,MAAC,CAACG,MAAM,GAAGc,QAAQ,CAAC,2BAA2BT,QAAQ,GAAGC,QAAQ;IAC3E6B,gBAAgBtC,MAAC,CAACG,MAAM,GAAGY,IAAI,GAAGN,QAAQ;AAC5C"}