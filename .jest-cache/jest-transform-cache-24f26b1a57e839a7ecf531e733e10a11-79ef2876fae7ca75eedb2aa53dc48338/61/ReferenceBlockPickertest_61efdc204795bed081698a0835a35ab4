fd9b7549098c3eb01609e155676bc841
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _userevent = /*#__PURE__*/ _interop_require_default(require("@testing-library/user-event"));
const _ReferenceBlockPicker = require("./ReferenceBlockPicker");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock fetch
global.fetch = jest.fn();
describe('ReferenceBlockPicker', ()=>{
    const mockOnSelect = jest.fn();
    const mockOnClose = jest.fn();
    const defaultProps = {
        onSelect: mockOnSelect,
        onClose: mockOnClose,
        pageType: 'home',
        pageId: 'test-page-id'
    };
    beforeEach(()=>{
        jest.clearAllMocks();
        global.fetch.mockClear();
    });
    describe('Rendering', ()=>{
        it('should render the modal with title and search input', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ReferenceBlockPicker.ReferenceBlockPicker, {
                ...defaultProps
            }));
            expect(_react.screen.getByText('Add Reference Block')).toBeInTheDocument();
            expect(_react.screen.getByPlaceholderText(/Search events, activities/i)).toBeInTheDocument();
        });
        it('should render all type filter buttons', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ReferenceBlockPicker.ReferenceBlockPicker, {
                ...defaultProps
            }));
            expect(_react.screen.getByText('Events')).toBeInTheDocument();
            expect(_react.screen.getByText('Activities')).toBeInTheDocument();
            expect(_react.screen.getByText('Pages')).toBeInTheDocument();
            expect(_react.screen.getByText('Accommodations')).toBeInTheDocument();
        });
        it('should show empty state when no search query', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ReferenceBlockPicker.ReferenceBlockPicker, {
                ...defaultProps
            }));
            expect(_react.screen.getByText('Start typing to search')).toBeInTheDocument();
        });
        it('should render close button', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ReferenceBlockPicker.ReferenceBlockPicker, {
                ...defaultProps
            }));
            const closeButton = _react.screen.getByLabelText('Close');
            expect(closeButton).toBeInTheDocument();
        });
    });
    describe('Search Functionality', ()=>{
        it('should debounce search input and call API after 300ms', async ()=>{
            const mockResponse = {
                success: true,
                data: {
                    events: [
                        {
                            id: '1',
                            name: 'Test Event',
                            date: '2024-06-15',
                            location: 'Beach'
                        }
                    ],
                    activities: [],
                    content_pages: [],
                    accommodations: []
                }
            };
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockResponse
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ReferenceBlockPicker.ReferenceBlockPicker, {
                ...defaultProps
            }));
            const searchInput = _react.screen.getByPlaceholderText(/Search events, activities/i);
            await _userevent.default.type(searchInput, 'ceremony');
            // Should not call immediately
            expect(global.fetch).not.toHaveBeenCalled();
            // Should call after debounce delay
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('/api/admin/references/search?q=ceremony'));
            }, {
                timeout: 500
            });
        });
        it('should display search results grouped by type', async ()=>{
            const mockResponse = {
                success: true,
                data: {
                    events: [
                        {
                            id: '1',
                            name: 'Wedding Ceremony',
                            date: '2024-06-15',
                            location: 'Beach'
                        }
                    ],
                    activities: [
                        {
                            id: '2',
                            name: 'Beach Volleyball',
                            date: '2024-06-14',
                            capacity: 20
                        }
                    ],
                    content_pages: [
                        {
                            id: '3',
                            title: 'Our Story',
                            slug: 'our-story',
                            type: 'page'
                        }
                    ],
                    accommodations: [
                        {
                            id: '4',
                            name: 'Beach Resort',
                            location: 'Costa Rica',
                            room_count: 50
                        }
                    ]
                }
            };
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockResponse
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ReferenceBlockPicker.ReferenceBlockPicker, {
                ...defaultProps
            }));
            const searchInput = _react.screen.getByPlaceholderText(/Search events, activities/i);
            await _userevent.default.type(searchInput, 'test');
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Events (1)')).toBeInTheDocument();
                expect(_react.screen.getByText('Activities (1)')).toBeInTheDocument();
                expect(_react.screen.getByText('Content Pages (1)')).toBeInTheDocument();
                expect(_react.screen.getByText('Accommodations (1)')).toBeInTheDocument();
            });
            expect(_react.screen.getByText('Wedding Ceremony')).toBeInTheDocument();
            expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            expect(_react.screen.getByText('Our Story')).toBeInTheDocument();
            expect(_react.screen.getByText('Beach Resort')).toBeInTheDocument();
        });
        it('should show no results message when search returns empty', async ()=>{
            const mockResponse = {
                success: true,
                data: {
                    events: [],
                    activities: [],
                    content_pages: [],
                    accommodations: []
                }
            };
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockResponse
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ReferenceBlockPicker.ReferenceBlockPicker, {
                ...defaultProps
            }));
            const searchInput = _react.screen.getByPlaceholderText(/Search events, activities/i);
            await _userevent.default.type(searchInput, 'nonexistent');
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('No results found')).toBeInTheDocument();
            });
        });
        it('should show loading spinner during search', async ()=>{
            global.fetch.mockImplementationOnce(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            ok: true,
                            json: async ()=>({
                                    success: true,
                                    data: {
                                        events: [],
                                        activities: [],
                                        content_pages: [],
                                        accommodations: []
                                    }
                                })
                        }), 100)));
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ReferenceBlockPicker.ReferenceBlockPicker, {
                ...defaultProps
            }));
            const searchInput = _react.screen.getByPlaceholderText(/Search events, activities/i);
            await _userevent.default.type(searchInput, 'test');
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('status', {
                    hidden: true
                })).toBeInTheDocument();
            });
        });
        it('should display error message when search fails', async ()=>{
            global.fetch.mockRejectedValueOnce(new Error('Network error'));
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ReferenceBlockPicker.ReferenceBlockPicker, {
                ...defaultProps
            }));
            const searchInput = _react.screen.getByPlaceholderText(/Search events, activities/i);
            await _userevent.default.type(searchInput, 'test');
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Network error')).toBeInTheDocument();
            });
        });
    });
    describe('Type Filtering', ()=>{
        it('should toggle type filters when clicked', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ReferenceBlockPicker.ReferenceBlockPicker, {
                ...defaultProps
            }));
            const eventsButton = _react.screen.getByText('Events');
            // Initially selected (all types selected by default)
            expect(eventsButton).toHaveClass('border-purple-500');
            // Click to deselect
            await _userevent.default.click(eventsButton);
            expect(eventsButton).toHaveClass('border-transparent');
            // Click to select again
            await _userevent.default.click(eventsButton);
            expect(eventsButton).toHaveClass('border-purple-500');
        });
        it('should include selected types in search query', async ()=>{
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            events: [],
                            activities: [],
                            content_pages: [],
                            accommodations: []
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ReferenceBlockPicker.ReferenceBlockPicker, {
                ...defaultProps
            }));
            // Deselect activities and pages
            await _userevent.default.click(_react.screen.getByText('Activities'));
            await _userevent.default.click(_react.screen.getByText('Pages'));
            const searchInput = _react.screen.getByPlaceholderText(/Search events, activities/i);
            await _userevent.default.type(searchInput, 'test');
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('types=event,accommodation'));
            });
        });
    });
    describe('Reference Selection', ()=>{
        it('should call onSelect with event reference when event card clicked', async ()=>{
            const mockResponse = {
                success: true,
                data: {
                    events: [
                        {
                            id: 'event-1',
                            name: 'Wedding Ceremony',
                            date: '2024-06-15',
                            location: 'Beach'
                        }
                    ],
                    activities: [],
                    content_pages: [],
                    accommodations: []
                }
            };
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockResponse
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ReferenceBlockPicker.ReferenceBlockPicker, {
                ...defaultProps
            }));
            const searchInput = _react.screen.getByPlaceholderText(/Search events, activities/i);
            await _userevent.default.type(searchInput, 'ceremony');
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Wedding Ceremony')).toBeInTheDocument();
            });
            const eventCard = _react.screen.getByText('Wedding Ceremony').closest('div');
            await _userevent.default.click(eventCard);
            expect(mockOnSelect).toHaveBeenCalledWith({
                type: 'event',
                id: 'event-1',
                name: 'Wedding Ceremony',
                metadata: {
                    date: '2024-06-15',
                    location: 'Beach'
                }
            });
            expect(mockOnClose).toHaveBeenCalled();
        });
        it('should call onSelect with activity reference when activity card clicked', async ()=>{
            const mockResponse = {
                success: true,
                data: {
                    events: [],
                    activities: [
                        {
                            id: 'activity-1',
                            name: 'Beach Volleyball',
                            date: '2024-06-14',
                            capacity: 20
                        }
                    ],
                    content_pages: [],
                    accommodations: []
                }
            };
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockResponse
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ReferenceBlockPicker.ReferenceBlockPicker, {
                ...defaultProps
            }));
            const searchInput = _react.screen.getByPlaceholderText(/Search events, activities/i);
            await _userevent.default.type(searchInput, 'volleyball');
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
            });
            const activityCard = _react.screen.getByText('Beach Volleyball').closest('div');
            await _userevent.default.click(activityCard);
            expect(mockOnSelect).toHaveBeenCalledWith({
                type: 'activity',
                id: 'activity-1',
                name: 'Beach Volleyball',
                metadata: {
                    date: '2024-06-14',
                    capacity: 20
                }
            });
            expect(mockOnClose).toHaveBeenCalled();
        });
    });
    describe('Modal Interactions', ()=>{
        it('should call onClose when close button clicked', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ReferenceBlockPicker.ReferenceBlockPicker, {
                ...defaultProps
            }));
            const closeButton = _react.screen.getByLabelText('Close');
            await _userevent.default.click(closeButton);
            expect(mockOnClose).toHaveBeenCalled();
        });
        it('should call onClose when cancel button clicked', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ReferenceBlockPicker.ReferenceBlockPicker, {
                ...defaultProps
            }));
            const cancelButton = _react.screen.getByText('Cancel');
            await _userevent.default.click(cancelButton);
            expect(mockOnClose).toHaveBeenCalled();
        });
    });
    describe('Result Display', ()=>{
        it('should display event metadata correctly', async ()=>{
            const mockResponse = {
                success: true,
                data: {
                    events: [
                        {
                            id: '1',
                            name: 'Wedding Ceremony',
                            date: '2024-06-15',
                            location: 'Sunset Beach'
                        }
                    ],
                    activities: [],
                    content_pages: [],
                    accommodations: []
                }
            };
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockResponse
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ReferenceBlockPicker.ReferenceBlockPicker, {
                ...defaultProps
            }));
            const searchInput = _react.screen.getByPlaceholderText(/Search events, activities/i);
            await _userevent.default.type(searchInput, 'ceremony');
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Wedding Ceremony')).toBeInTheDocument();
                expect(_react.screen.getByText(/6\/15\/2024/)).toBeInTheDocument();
                expect(_react.screen.getByText(/Sunset Beach/)).toBeInTheDocument();
            });
        });
        it('should display activity capacity correctly', async ()=>{
            const mockResponse = {
                success: true,
                data: {
                    events: [],
                    activities: [
                        {
                            id: '1',
                            name: 'Beach Volleyball',
                            date: '2024-06-14',
                            capacity: 20
                        }
                    ],
                    content_pages: [],
                    accommodations: []
                }
            };
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockResponse
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ReferenceBlockPicker.ReferenceBlockPicker, {
                ...defaultProps
            }));
            const searchInput = _react.screen.getByPlaceholderText(/Search events, activities/i);
            await _userevent.default.type(searchInput, 'volleyball');
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
                expect(_react.screen.getByText(/Capacity: 20/)).toBeInTheDocument();
            });
        });
        it('should display content page slug correctly', async ()=>{
            const mockResponse = {
                success: true,
                data: {
                    events: [],
                    activities: [],
                    content_pages: [
                        {
                            id: '1',
                            title: 'Our Story',
                            slug: 'our-story',
                            type: 'page'
                        }
                    ],
                    accommodations: []
                }
            };
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>mockResponse
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_ReferenceBlockPicker.ReferenceBlockPicker, {
                ...defaultProps
            }));
            const searchInput = _react.screen.getByPlaceholderText(/Search events, activities/i);
            await _userevent.default.type(searchInput, 'story');
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Our Story')).toBeInTheDocument();
                expect(_react.screen.getByText(/\/our-story/)).toBeInTheDocument();
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9hZG1pbi9SZWZlcmVuY2VCbG9ja1BpY2tlci50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgdXNlckV2ZW50IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvdXNlci1ldmVudCc7XG5pbXBvcnQgeyBSZWZlcmVuY2VCbG9ja1BpY2tlciB9IGZyb20gJy4vUmVmZXJlbmNlQmxvY2tQaWNrZXInO1xuXG4vLyBNb2NrIGZldGNoXG5nbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCk7XG5cbmRlc2NyaWJlKCdSZWZlcmVuY2VCbG9ja1BpY2tlcicsICgpID0+IHtcbiAgY29uc3QgbW9ja09uU2VsZWN0ID0gamVzdC5mbigpO1xuICBjb25zdCBtb2NrT25DbG9zZSA9IGplc3QuZm4oKTtcbiAgY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICAgIG9uU2VsZWN0OiBtb2NrT25TZWxlY3QsXG4gICAgb25DbG9zZTogbW9ja09uQ2xvc2UsXG4gICAgcGFnZVR5cGU6ICdob21lJyxcbiAgICBwYWdlSWQ6ICd0ZXN0LXBhZ2UtaWQnLFxuICB9O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrQ2xlYXIoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1JlbmRlcmluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlbmRlciB0aGUgbW9kYWwgd2l0aCB0aXRsZSBhbmQgc2VhcmNoIGlucHV0JywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxSZWZlcmVuY2VCbG9ja1BpY2tlciB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdBZGQgUmVmZXJlbmNlIEJsb2NrJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KC9TZWFyY2ggZXZlbnRzLCBhY3Rpdml0aWVzL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgYWxsIHR5cGUgZmlsdGVyIGJ1dHRvbnMnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPFJlZmVyZW5jZUJsb2NrUGlja2VyIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0V2ZW50cycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0FjdGl2aXRpZXMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdQYWdlcycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0FjY29tbW9kYXRpb25zJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNob3cgZW1wdHkgc3RhdGUgd2hlbiBubyBzZWFyY2ggcXVlcnknLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPFJlZmVyZW5jZUJsb2NrUGlja2VyIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1N0YXJ0IHR5cGluZyB0byBzZWFyY2gnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVuZGVyIGNsb3NlIGJ1dHRvbicsICgpID0+IHtcbiAgICAgIHJlbmRlcig8UmVmZXJlbmNlQmxvY2tQaWNrZXIgey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnQ2xvc2UnKTtcbiAgICAgIGV4cGVjdChjbG9zZUJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NlYXJjaCBGdW5jdGlvbmFsaXR5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGVib3VuY2Ugc2VhcmNoIGlucHV0IGFuZCBjYWxsIEFQSSBhZnRlciAzMDBtcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGV2ZW50czogW3sgaWQ6ICcxJywgbmFtZTogJ1Rlc3QgRXZlbnQnLCBkYXRlOiAnMjAyNC0wNi0xNScsIGxvY2F0aW9uOiAnQmVhY2gnIH1dLFxuICAgICAgICAgIGFjdGl2aXRpZXM6IFtdLFxuICAgICAgICAgIGNvbnRlbnRfcGFnZXM6IFtdLFxuICAgICAgICAgIGFjY29tbW9kYXRpb25zOiBbXSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gbW9ja1Jlc3BvbnNlLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8UmVmZXJlbmNlQmxvY2tQaWNrZXIgey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBjb25zdCBzZWFyY2hJbnB1dCA9IHNjcmVlbi5nZXRCeVBsYWNlaG9sZGVyVGV4dCgvU2VhcmNoIGV2ZW50cywgYWN0aXZpdGllcy9pKTtcbiAgICAgIGF3YWl0IHVzZXJFdmVudC50eXBlKHNlYXJjaElucHV0LCAnY2VyZW1vbnknKTtcblxuICAgICAgLy8gU2hvdWxkIG5vdCBjYWxsIGltbWVkaWF0ZWx5XG4gICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuXG4gICAgICAvLyBTaG91bGQgY2FsbCBhZnRlciBkZWJvdW5jZSBkZWxheVxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCcvYXBpL2FkbWluL3JlZmVyZW5jZXMvc2VhcmNoP3E9Y2VyZW1vbnknKVxuICAgICAgICApO1xuICAgICAgfSwgeyB0aW1lb3V0OiA1MDAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgc2VhcmNoIHJlc3VsdHMgZ3JvdXBlZCBieSB0eXBlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Jlc3BvbnNlID0ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgZXZlbnRzOiBbeyBpZDogJzEnLCBuYW1lOiAnV2VkZGluZyBDZXJlbW9ueScsIGRhdGU6ICcyMDI0LTA2LTE1JywgbG9jYXRpb246ICdCZWFjaCcgfV0sXG4gICAgICAgICAgYWN0aXZpdGllczogW3sgaWQ6ICcyJywgbmFtZTogJ0JlYWNoIFZvbGxleWJhbGwnLCBkYXRlOiAnMjAyNC0wNi0xNCcsIGNhcGFjaXR5OiAyMCB9XSxcbiAgICAgICAgICBjb250ZW50X3BhZ2VzOiBbeyBpZDogJzMnLCB0aXRsZTogJ091ciBTdG9yeScsIHNsdWc6ICdvdXItc3RvcnknLCB0eXBlOiAncGFnZScgfV0sXG4gICAgICAgICAgYWNjb21tb2RhdGlvbnM6IFt7IGlkOiAnNCcsIG5hbWU6ICdCZWFjaCBSZXNvcnQnLCBsb2NhdGlvbjogJ0Nvc3RhIFJpY2EnLCByb29tX2NvdW50OiA1MCB9XSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gbW9ja1Jlc3BvbnNlLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8UmVmZXJlbmNlQmxvY2tQaWNrZXIgey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBjb25zdCBzZWFyY2hJbnB1dCA9IHNjcmVlbi5nZXRCeVBsYWNlaG9sZGVyVGV4dCgvU2VhcmNoIGV2ZW50cywgYWN0aXZpdGllcy9pKTtcbiAgICAgIGF3YWl0IHVzZXJFdmVudC50eXBlKHNlYXJjaElucHV0LCAndGVzdCcpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0V2ZW50cyAoMSknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0FjdGl2aXRpZXMgKDEpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDb250ZW50IFBhZ2VzICgxKScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQWNjb21tb2RhdGlvbnMgKDEpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1dlZGRpbmcgQ2VyZW1vbnknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdCZWFjaCBWb2xsZXliYWxsJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnT3VyIFN0b3J5JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQmVhY2ggUmVzb3J0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNob3cgbm8gcmVzdWx0cyBtZXNzYWdlIHdoZW4gc2VhcmNoIHJldHVybnMgZW1wdHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBldmVudHM6IFtdLFxuICAgICAgICAgIGFjdGl2aXRpZXM6IFtdLFxuICAgICAgICAgIGNvbnRlbnRfcGFnZXM6IFtdLFxuICAgICAgICAgIGFjY29tbW9kYXRpb25zOiBbXSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gbW9ja1Jlc3BvbnNlLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8UmVmZXJlbmNlQmxvY2tQaWNrZXIgey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBjb25zdCBzZWFyY2hJbnB1dCA9IHNjcmVlbi5nZXRCeVBsYWNlaG9sZGVyVGV4dCgvU2VhcmNoIGV2ZW50cywgYWN0aXZpdGllcy9pKTtcbiAgICAgIGF3YWl0IHVzZXJFdmVudC50eXBlKHNlYXJjaElucHV0LCAnbm9uZXhpc3RlbnQnKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdObyByZXN1bHRzIGZvdW5kJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2hvdyBsb2FkaW5nIHNwaW5uZXIgZHVyaW5nIHNlYXJjaCcsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb25PbmNlKFxuICAgICAgICAoKSA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogeyBldmVudHM6IFtdLCBhY3Rpdml0aWVzOiBbXSwgY29udGVudF9wYWdlczogW10sIGFjY29tbW9kYXRpb25zOiBbXSB9IH0pLFxuICAgICAgICB9KSwgMTAwKSlcbiAgICAgICk7XG5cbiAgICAgIHJlbmRlcig8UmVmZXJlbmNlQmxvY2tQaWNrZXIgey4uLmRlZmF1bHRQcm9wc30gLz4pO1xuXG4gICAgICBjb25zdCBzZWFyY2hJbnB1dCA9IHNjcmVlbi5nZXRCeVBsYWNlaG9sZGVyVGV4dCgvU2VhcmNoIGV2ZW50cywgYWN0aXZpdGllcy9pKTtcbiAgICAgIGF3YWl0IHVzZXJFdmVudC50eXBlKHNlYXJjaElucHV0LCAndGVzdCcpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ3N0YXR1cycsIHsgaGlkZGVuOiB0cnVlIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgZXJyb3IgbWVzc2FnZSB3aGVuIHNlYXJjaCBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdOZXR3b3JrIGVycm9yJykpO1xuXG4gICAgICByZW5kZXIoPFJlZmVyZW5jZUJsb2NrUGlja2VyIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoL1NlYXJjaCBldmVudHMsIGFjdGl2aXRpZXMvaSk7XG4gICAgICBhd2FpdCB1c2VyRXZlbnQudHlwZShzZWFyY2hJbnB1dCwgJ3Rlc3QnKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdOZXR3b3JrIGVycm9yJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1R5cGUgRmlsdGVyaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdG9nZ2xlIHR5cGUgZmlsdGVycyB3aGVuIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPFJlZmVyZW5jZUJsb2NrUGlja2VyIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgY29uc3QgZXZlbnRzQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgnRXZlbnRzJyk7XG4gICAgICBcbiAgICAgIC8vIEluaXRpYWxseSBzZWxlY3RlZCAoYWxsIHR5cGVzIHNlbGVjdGVkIGJ5IGRlZmF1bHQpXG4gICAgICBleHBlY3QoZXZlbnRzQnV0dG9uKS50b0hhdmVDbGFzcygnYm9yZGVyLXB1cnBsZS01MDAnKTtcblxuICAgICAgLy8gQ2xpY2sgdG8gZGVzZWxlY3RcbiAgICAgIGF3YWl0IHVzZXJFdmVudC5jbGljayhldmVudHNCdXR0b24pO1xuICAgICAgZXhwZWN0KGV2ZW50c0J1dHRvbikudG9IYXZlQ2xhc3MoJ2JvcmRlci10cmFuc3BhcmVudCcpO1xuXG4gICAgICAvLyBDbGljayB0byBzZWxlY3QgYWdhaW5cbiAgICAgIGF3YWl0IHVzZXJFdmVudC5jbGljayhldmVudHNCdXR0b24pO1xuICAgICAgZXhwZWN0KGV2ZW50c0J1dHRvbikudG9IYXZlQ2xhc3MoJ2JvcmRlci1wdXJwbGUtNTAwJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGluY2x1ZGUgc2VsZWN0ZWQgdHlwZXMgaW4gc2VhcmNoIHF1ZXJ5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB7IGV2ZW50czogW10sIGFjdGl2aXRpZXM6IFtdLCBjb250ZW50X3BhZ2VzOiBbXSwgYWNjb21tb2RhdGlvbnM6IFtdIH0gfSksXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxSZWZlcmVuY2VCbG9ja1BpY2tlciB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIC8vIERlc2VsZWN0IGFjdGl2aXRpZXMgYW5kIHBhZ2VzXG4gICAgICBhd2FpdCB1c2VyRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnQWN0aXZpdGllcycpKTtcbiAgICAgIGF3YWl0IHVzZXJFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCdQYWdlcycpKTtcblxuICAgICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoL1NlYXJjaCBldmVudHMsIGFjdGl2aXRpZXMvaSk7XG4gICAgICBhd2FpdCB1c2VyRXZlbnQudHlwZShzZWFyY2hJbnB1dCwgJ3Rlc3QnKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCd0eXBlcz1ldmVudCxhY2NvbW1vZGF0aW9uJylcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmVmZXJlbmNlIFNlbGVjdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGwgb25TZWxlY3Qgd2l0aCBldmVudCByZWZlcmVuY2Ugd2hlbiBldmVudCBjYXJkIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBldmVudHM6IFt7IGlkOiAnZXZlbnQtMScsIG5hbWU6ICdXZWRkaW5nIENlcmVtb255JywgZGF0ZTogJzIwMjQtMDYtMTUnLCBsb2NhdGlvbjogJ0JlYWNoJyB9XSxcbiAgICAgICAgICBhY3Rpdml0aWVzOiBbXSxcbiAgICAgICAgICBjb250ZW50X3BhZ2VzOiBbXSxcbiAgICAgICAgICBhY2NvbW1vZGF0aW9uczogW10sXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+IG1vY2tSZXNwb25zZSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPFJlZmVyZW5jZUJsb2NrUGlja2VyIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoL1NlYXJjaCBldmVudHMsIGFjdGl2aXRpZXMvaSk7XG4gICAgICBhd2FpdCB1c2VyRXZlbnQudHlwZShzZWFyY2hJbnB1dCwgJ2NlcmVtb255Jyk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnV2VkZGluZyBDZXJlbW9ueScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGV2ZW50Q2FyZCA9IHNjcmVlbi5nZXRCeVRleHQoJ1dlZGRpbmcgQ2VyZW1vbnknKS5jbG9zZXN0KCdkaXYnKTtcbiAgICAgIGF3YWl0IHVzZXJFdmVudC5jbGljayhldmVudENhcmQhKTtcblxuICAgICAgZXhwZWN0KG1vY2tPblNlbGVjdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB0eXBlOiAnZXZlbnQnLFxuICAgICAgICBpZDogJ2V2ZW50LTEnLFxuICAgICAgICBuYW1lOiAnV2VkZGluZyBDZXJlbW9ueScsXG4gICAgICAgIG1ldGFkYXRhOiB7IGRhdGU6ICcyMDI0LTA2LTE1JywgbG9jYXRpb246ICdCZWFjaCcgfSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KG1vY2tPbkNsb3NlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNhbGwgb25TZWxlY3Qgd2l0aCBhY3Rpdml0eSByZWZlcmVuY2Ugd2hlbiBhY3Rpdml0eSBjYXJkIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBldmVudHM6IFtdLFxuICAgICAgICAgIGFjdGl2aXRpZXM6IFt7IGlkOiAnYWN0aXZpdHktMScsIG5hbWU6ICdCZWFjaCBWb2xsZXliYWxsJywgZGF0ZTogJzIwMjQtMDYtMTQnLCBjYXBhY2l0eTogMjAgfV0sXG4gICAgICAgICAgY29udGVudF9wYWdlczogW10sXG4gICAgICAgICAgYWNjb21tb2RhdGlvbnM6IFtdLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiBtb2NrUmVzcG9uc2UsXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxSZWZlcmVuY2VCbG9ja1BpY2tlciB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGNvbnN0IHNlYXJjaElucHV0ID0gc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KC9TZWFyY2ggZXZlbnRzLCBhY3Rpdml0aWVzL2kpO1xuICAgICAgYXdhaXQgdXNlckV2ZW50LnR5cGUoc2VhcmNoSW5wdXQsICd2b2xsZXliYWxsJyk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQmVhY2ggVm9sbGV5YmFsbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGFjdGl2aXR5Q2FyZCA9IHNjcmVlbi5nZXRCeVRleHQoJ0JlYWNoIFZvbGxleWJhbGwnKS5jbG9zZXN0KCdkaXYnKTtcbiAgICAgIGF3YWl0IHVzZXJFdmVudC5jbGljayhhY3Rpdml0eUNhcmQhKTtcblxuICAgICAgZXhwZWN0KG1vY2tPblNlbGVjdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB0eXBlOiAnYWN0aXZpdHknLFxuICAgICAgICBpZDogJ2FjdGl2aXR5LTEnLFxuICAgICAgICBuYW1lOiAnQmVhY2ggVm9sbGV5YmFsbCcsXG4gICAgICAgIG1ldGFkYXRhOiB7IGRhdGU6ICcyMDI0LTA2LTE0JywgY2FwYWNpdHk6IDIwIH0sXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChtb2NrT25DbG9zZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTW9kYWwgSW50ZXJhY3Rpb25zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY2FsbCBvbkNsb3NlIHdoZW4gY2xvc2UgYnV0dG9uIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPFJlZmVyZW5jZUJsb2NrUGlja2VyIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ0Nsb3NlJyk7XG4gICAgICBhd2FpdCB1c2VyRXZlbnQuY2xpY2soY2xvc2VCdXR0b24pO1xuXG4gICAgICBleHBlY3QobW9ja09uQ2xvc2UpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsbCBvbkNsb3NlIHdoZW4gY2FuY2VsIGJ1dHRvbiBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxSZWZlcmVuY2VCbG9ja1BpY2tlciB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ0NhbmNlbCcpO1xuICAgICAgYXdhaXQgdXNlckV2ZW50LmNsaWNrKGNhbmNlbEJ1dHRvbik7XG5cbiAgICAgIGV4cGVjdChtb2NrT25DbG9zZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmVzdWx0IERpc3BsYXknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGV2ZW50IG1ldGFkYXRhIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGV2ZW50czogW3sgaWQ6ICcxJywgbmFtZTogJ1dlZGRpbmcgQ2VyZW1vbnknLCBkYXRlOiAnMjAyNC0wNi0xNScsIGxvY2F0aW9uOiAnU3Vuc2V0IEJlYWNoJyB9XSxcbiAgICAgICAgICBhY3Rpdml0aWVzOiBbXSxcbiAgICAgICAgICBjb250ZW50X3BhZ2VzOiBbXSxcbiAgICAgICAgICBhY2NvbW1vZGF0aW9uczogW10sXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+IG1vY2tSZXNwb25zZSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPFJlZmVyZW5jZUJsb2NrUGlja2VyIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoL1NlYXJjaCBldmVudHMsIGFjdGl2aXRpZXMvaSk7XG4gICAgICBhd2FpdCB1c2VyRXZlbnQudHlwZShzZWFyY2hJbnB1dCwgJ2NlcmVtb255Jyk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnV2VkZGluZyBDZXJlbW9ueScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvNlxcLzE1XFwvMjAyNC8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvU3Vuc2V0IEJlYWNoLykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBhY3Rpdml0eSBjYXBhY2l0eSBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBldmVudHM6IFtdLFxuICAgICAgICAgIGFjdGl2aXRpZXM6IFt7IGlkOiAnMScsIG5hbWU6ICdCZWFjaCBWb2xsZXliYWxsJywgZGF0ZTogJzIwMjQtMDYtMTQnLCBjYXBhY2l0eTogMjAgfV0sXG4gICAgICAgICAgY29udGVudF9wYWdlczogW10sXG4gICAgICAgICAgYWNjb21tb2RhdGlvbnM6IFtdLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiBtb2NrUmVzcG9uc2UsXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxSZWZlcmVuY2VCbG9ja1BpY2tlciB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG5cbiAgICAgIGNvbnN0IHNlYXJjaElucHV0ID0gc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KC9TZWFyY2ggZXZlbnRzLCBhY3Rpdml0aWVzL2kpO1xuICAgICAgYXdhaXQgdXNlckV2ZW50LnR5cGUoc2VhcmNoSW5wdXQsICd2b2xsZXliYWxsJyk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQmVhY2ggVm9sbGV5YmFsbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvQ2FwYWNpdHk6IDIwLykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBjb250ZW50IHBhZ2Ugc2x1ZyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBldmVudHM6IFtdLFxuICAgICAgICAgIGFjdGl2aXRpZXM6IFtdLFxuICAgICAgICAgIGNvbnRlbnRfcGFnZXM6IFt7IGlkOiAnMScsIHRpdGxlOiAnT3VyIFN0b3J5Jywgc2x1ZzogJ291ci1zdG9yeScsIHR5cGU6ICdwYWdlJyB9XSxcbiAgICAgICAgICBhY2NvbW1vZGF0aW9uczogW10sXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+IG1vY2tSZXNwb25zZSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPFJlZmVyZW5jZUJsb2NrUGlja2VyIHsuLi5kZWZhdWx0UHJvcHN9IC8+KTtcblxuICAgICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoL1NlYXJjaCBldmVudHMsIGFjdGl2aXRpZXMvaSk7XG4gICAgICBhd2FpdCB1c2VyRXZlbnQudHlwZShzZWFyY2hJbnB1dCwgJ3N0b3J5Jyk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnT3VyIFN0b3J5JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9cXC9vdXItc3RvcnkvKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImdsb2JhbCIsImZldGNoIiwiamVzdCIsImZuIiwiZGVzY3JpYmUiLCJtb2NrT25TZWxlY3QiLCJtb2NrT25DbG9zZSIsImRlZmF1bHRQcm9wcyIsIm9uU2VsZWN0Iiwib25DbG9zZSIsInBhZ2VUeXBlIiwicGFnZUlkIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJtb2NrQ2xlYXIiLCJpdCIsInJlbmRlciIsIlJlZmVyZW5jZUJsb2NrUGlja2VyIiwiZXhwZWN0Iiwic2NyZWVuIiwiZ2V0QnlUZXh0IiwidG9CZUluVGhlRG9jdW1lbnQiLCJnZXRCeVBsYWNlaG9sZGVyVGV4dCIsImNsb3NlQnV0dG9uIiwiZ2V0QnlMYWJlbFRleHQiLCJtb2NrUmVzcG9uc2UiLCJzdWNjZXNzIiwiZGF0YSIsImV2ZW50cyIsImlkIiwibmFtZSIsImRhdGUiLCJsb2NhdGlvbiIsImFjdGl2aXRpZXMiLCJjb250ZW50X3BhZ2VzIiwiYWNjb21tb2RhdGlvbnMiLCJtb2NrUmVzb2x2ZWRWYWx1ZU9uY2UiLCJvayIsImpzb24iLCJzZWFyY2hJbnB1dCIsInVzZXJFdmVudCIsInR5cGUiLCJub3QiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwid2FpdEZvciIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwic3RyaW5nQ29udGFpbmluZyIsInRpbWVvdXQiLCJjYXBhY2l0eSIsInRpdGxlIiwic2x1ZyIsInJvb21fY291bnQiLCJtb2NrSW1wbGVtZW50YXRpb25PbmNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiZ2V0QnlSb2xlIiwiaGlkZGVuIiwibW9ja1JlamVjdGVkVmFsdWVPbmNlIiwiRXJyb3IiLCJldmVudHNCdXR0b24iLCJ0b0hhdmVDbGFzcyIsImNsaWNrIiwiZXZlbnRDYXJkIiwiY2xvc2VzdCIsIm1ldGFkYXRhIiwiYWN0aXZpdHlDYXJkIiwiY2FuY2VsQnV0dG9uIl0sIm1hcHBpbmdzIjoiOzs7Ozt1QkFBbUQ7a0VBQzdCO3NDQUNlOzs7Ozs7QUFFckMsYUFBYTtBQUNiQSxPQUFPQyxLQUFLLEdBQUdDLEtBQUtDLEVBQUU7QUFFdEJDLFNBQVMsd0JBQXdCO0lBQy9CLE1BQU1DLGVBQWVILEtBQUtDLEVBQUU7SUFDNUIsTUFBTUcsY0FBY0osS0FBS0MsRUFBRTtJQUMzQixNQUFNSSxlQUFlO1FBQ25CQyxVQUFVSDtRQUNWSSxTQUFTSDtRQUNUSSxVQUFVO1FBQ1ZDLFFBQVE7SUFDVjtJQUVBQyxXQUFXO1FBQ1RWLEtBQUtXLGFBQWE7UUFDakJiLE9BQU9DLEtBQUssQ0FBZWEsU0FBUztJQUN2QztJQUVBVixTQUFTLGFBQWE7UUFDcEJXLEdBQUcsdURBQXVEO1lBQ3hEQyxJQUFBQSxhQUFNLGdCQUFDLHFCQUFDQywwQ0FBb0I7Z0JBQUUsR0FBR1YsWUFBWTs7WUFFN0NXLE9BQU9DLGFBQU0sQ0FBQ0MsU0FBUyxDQUFDLHdCQUF3QkMsaUJBQWlCO1lBQ2pFSCxPQUFPQyxhQUFNLENBQUNHLG9CQUFvQixDQUFDLCtCQUErQkQsaUJBQWlCO1FBQ3JGO1FBRUFOLEdBQUcseUNBQXlDO1lBQzFDQyxJQUFBQSxhQUFNLGdCQUFDLHFCQUFDQywwQ0FBb0I7Z0JBQUUsR0FBR1YsWUFBWTs7WUFFN0NXLE9BQU9DLGFBQU0sQ0FBQ0MsU0FBUyxDQUFDLFdBQVdDLGlCQUFpQjtZQUNwREgsT0FBT0MsYUFBTSxDQUFDQyxTQUFT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