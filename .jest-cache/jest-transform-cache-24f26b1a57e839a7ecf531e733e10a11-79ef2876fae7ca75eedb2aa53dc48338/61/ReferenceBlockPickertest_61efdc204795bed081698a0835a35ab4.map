{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/ReferenceBlockPicker.test.tsx"],"sourcesContent":["import { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { ReferenceBlockPicker } from './ReferenceBlockPicker';\n\n// Mock fetch\nglobal.fetch = jest.fn();\n\ndescribe('ReferenceBlockPicker', () => {\n  const mockOnSelect = jest.fn();\n  const mockOnClose = jest.fn();\n  const defaultProps = {\n    onSelect: mockOnSelect,\n    onClose: mockOnClose,\n    pageType: 'home',\n    pageId: 'test-page-id',\n  };\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    (global.fetch as jest.Mock).mockClear();\n  });\n\n  describe('Rendering', () => {\n    it('should render the modal with title and search input', () => {\n      render(<ReferenceBlockPicker {...defaultProps} />);\n\n      expect(screen.getByText('Add Reference Block')).toBeInTheDocument();\n      expect(screen.getByPlaceholderText(/Search events, activities/i)).toBeInTheDocument();\n    });\n\n    it('should render all type filter buttons', () => {\n      render(<ReferenceBlockPicker {...defaultProps} />);\n\n      expect(screen.getByText('Events')).toBeInTheDocument();\n      expect(screen.getByText('Activities')).toBeInTheDocument();\n      expect(screen.getByText('Pages')).toBeInTheDocument();\n      expect(screen.getByText('Accommodations')).toBeInTheDocument();\n    });\n\n    it('should show empty state when no search query', () => {\n      render(<ReferenceBlockPicker {...defaultProps} />);\n\n      expect(screen.getByText('Start typing to search')).toBeInTheDocument();\n    });\n\n    it('should render close button', () => {\n      render(<ReferenceBlockPicker {...defaultProps} />);\n\n      const closeButton = screen.getByLabelText('Close');\n      expect(closeButton).toBeInTheDocument();\n    });\n  });\n\n  describe('Search Functionality', () => {\n    it('should debounce search input and call API after 300ms', async () => {\n      const mockResponse = {\n        success: true,\n        data: {\n          events: [{ id: '1', name: 'Test Event', date: '2024-06-15', location: 'Beach' }],\n          activities: [],\n          content_pages: [],\n          accommodations: [],\n        },\n      };\n\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockResponse,\n      });\n\n      render(<ReferenceBlockPicker {...defaultProps} />);\n\n      const searchInput = screen.getByPlaceholderText(/Search events, activities/i);\n      await userEvent.type(searchInput, 'ceremony');\n\n      // Should not call immediately\n      expect(global.fetch).not.toHaveBeenCalled();\n\n      // Should call after debounce delay\n      await waitFor(() => {\n        expect(global.fetch).toHaveBeenCalledWith(\n          expect.stringContaining('/api/admin/references/search?q=ceremony')\n        );\n      }, { timeout: 500 });\n    });\n\n    it('should display search results grouped by type', async () => {\n      const mockResponse = {\n        success: true,\n        data: {\n          events: [{ id: '1', name: 'Wedding Ceremony', date: '2024-06-15', location: 'Beach' }],\n          activities: [{ id: '2', name: 'Beach Volleyball', date: '2024-06-14', capacity: 20 }],\n          content_pages: [{ id: '3', title: 'Our Story', slug: 'our-story', type: 'page' }],\n          accommodations: [{ id: '4', name: 'Beach Resort', location: 'Costa Rica', room_count: 50 }],\n        },\n      };\n\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockResponse,\n      });\n\n      render(<ReferenceBlockPicker {...defaultProps} />);\n\n      const searchInput = screen.getByPlaceholderText(/Search events, activities/i);\n      await userEvent.type(searchInput, 'test');\n\n      await waitFor(() => {\n        expect(screen.getByText('Events (1)')).toBeInTheDocument();\n        expect(screen.getByText('Activities (1)')).toBeInTheDocument();\n        expect(screen.getByText('Content Pages (1)')).toBeInTheDocument();\n        expect(screen.getByText('Accommodations (1)')).toBeInTheDocument();\n      });\n\n      expect(screen.getByText('Wedding Ceremony')).toBeInTheDocument();\n      expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n      expect(screen.getByText('Our Story')).toBeInTheDocument();\n      expect(screen.getByText('Beach Resort')).toBeInTheDocument();\n    });\n\n    it('should show no results message when search returns empty', async () => {\n      const mockResponse = {\n        success: true,\n        data: {\n          events: [],\n          activities: [],\n          content_pages: [],\n          accommodations: [],\n        },\n      };\n\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockResponse,\n      });\n\n      render(<ReferenceBlockPicker {...defaultProps} />);\n\n      const searchInput = screen.getByPlaceholderText(/Search events, activities/i);\n      await userEvent.type(searchInput, 'nonexistent');\n\n      await waitFor(() => {\n        expect(screen.getByText('No results found')).toBeInTheDocument();\n      });\n    });\n\n    it('should show loading spinner during search', async () => {\n      (global.fetch as jest.Mock).mockImplementationOnce(\n        () => new Promise(resolve => setTimeout(() => resolve({\n          ok: true,\n          json: async () => ({ success: true, data: { events: [], activities: [], content_pages: [], accommodations: [] } }),\n        }), 100))\n      );\n\n      render(<ReferenceBlockPicker {...defaultProps} />);\n\n      const searchInput = screen.getByPlaceholderText(/Search events, activities/i);\n      await userEvent.type(searchInput, 'test');\n\n      await waitFor(() => {\n        expect(screen.getByRole('status', { hidden: true })).toBeInTheDocument();\n      });\n    });\n\n    it('should display error message when search fails', async () => {\n      (global.fetch as jest.Mock).mockRejectedValueOnce(new Error('Network error'));\n\n      render(<ReferenceBlockPicker {...defaultProps} />);\n\n      const searchInput = screen.getByPlaceholderText(/Search events, activities/i);\n      await userEvent.type(searchInput, 'test');\n\n      await waitFor(() => {\n        expect(screen.getByText('Network error')).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Type Filtering', () => {\n    it('should toggle type filters when clicked', async () => {\n      render(<ReferenceBlockPicker {...defaultProps} />);\n\n      const eventsButton = screen.getByText('Events');\n      \n      // Initially selected (all types selected by default)\n      expect(eventsButton).toHaveClass('border-purple-500');\n\n      // Click to deselect\n      await userEvent.click(eventsButton);\n      expect(eventsButton).toHaveClass('border-transparent');\n\n      // Click to select again\n      await userEvent.click(eventsButton);\n      expect(eventsButton).toHaveClass('border-purple-500');\n    });\n\n    it('should include selected types in search query', async () => {\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: true, data: { events: [], activities: [], content_pages: [], accommodations: [] } }),\n      });\n\n      render(<ReferenceBlockPicker {...defaultProps} />);\n\n      // Deselect activities and pages\n      await userEvent.click(screen.getByText('Activities'));\n      await userEvent.click(screen.getByText('Pages'));\n\n      const searchInput = screen.getByPlaceholderText(/Search events, activities/i);\n      await userEvent.type(searchInput, 'test');\n\n      await waitFor(() => {\n        expect(global.fetch).toHaveBeenCalledWith(\n          expect.stringContaining('types=event,accommodation')\n        );\n      });\n    });\n  });\n\n  describe('Reference Selection', () => {\n    it('should call onSelect with event reference when event card clicked', async () => {\n      const mockResponse = {\n        success: true,\n        data: {\n          events: [{ id: 'event-1', name: 'Wedding Ceremony', date: '2024-06-15', location: 'Beach' }],\n          activities: [],\n          content_pages: [],\n          accommodations: [],\n        },\n      };\n\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockResponse,\n      });\n\n      render(<ReferenceBlockPicker {...defaultProps} />);\n\n      const searchInput = screen.getByPlaceholderText(/Search events, activities/i);\n      await userEvent.type(searchInput, 'ceremony');\n\n      await waitFor(() => {\n        expect(screen.getByText('Wedding Ceremony')).toBeInTheDocument();\n      });\n\n      const eventCard = screen.getByText('Wedding Ceremony').closest('div');\n      await userEvent.click(eventCard!);\n\n      expect(mockOnSelect).toHaveBeenCalledWith({\n        type: 'event',\n        id: 'event-1',\n        name: 'Wedding Ceremony',\n        metadata: { date: '2024-06-15', location: 'Beach' },\n      });\n      expect(mockOnClose).toHaveBeenCalled();\n    });\n\n    it('should call onSelect with activity reference when activity card clicked', async () => {\n      const mockResponse = {\n        success: true,\n        data: {\n          events: [],\n          activities: [{ id: 'activity-1', name: 'Beach Volleyball', date: '2024-06-14', capacity: 20 }],\n          content_pages: [],\n          accommodations: [],\n        },\n      };\n\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockResponse,\n      });\n\n      render(<ReferenceBlockPicker {...defaultProps} />);\n\n      const searchInput = screen.getByPlaceholderText(/Search events, activities/i);\n      await userEvent.type(searchInput, 'volleyball');\n\n      await waitFor(() => {\n        expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n      });\n\n      const activityCard = screen.getByText('Beach Volleyball').closest('div');\n      await userEvent.click(activityCard!);\n\n      expect(mockOnSelect).toHaveBeenCalledWith({\n        type: 'activity',\n        id: 'activity-1',\n        name: 'Beach Volleyball',\n        metadata: { date: '2024-06-14', capacity: 20 },\n      });\n      expect(mockOnClose).toHaveBeenCalled();\n    });\n  });\n\n  describe('Modal Interactions', () => {\n    it('should call onClose when close button clicked', async () => {\n      render(<ReferenceBlockPicker {...defaultProps} />);\n\n      const closeButton = screen.getByLabelText('Close');\n      await userEvent.click(closeButton);\n\n      expect(mockOnClose).toHaveBeenCalled();\n    });\n\n    it('should call onClose when cancel button clicked', async () => {\n      render(<ReferenceBlockPicker {...defaultProps} />);\n\n      const cancelButton = screen.getByText('Cancel');\n      await userEvent.click(cancelButton);\n\n      expect(mockOnClose).toHaveBeenCalled();\n    });\n  });\n\n  describe('Result Display', () => {\n    it('should display event metadata correctly', async () => {\n      const mockResponse = {\n        success: true,\n        data: {\n          events: [{ id: '1', name: 'Wedding Ceremony', date: '2024-06-15', location: 'Sunset Beach' }],\n          activities: [],\n          content_pages: [],\n          accommodations: [],\n        },\n      };\n\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockResponse,\n      });\n\n      render(<ReferenceBlockPicker {...defaultProps} />);\n\n      const searchInput = screen.getByPlaceholderText(/Search events, activities/i);\n      await userEvent.type(searchInput, 'ceremony');\n\n      await waitFor(() => {\n        expect(screen.getByText('Wedding Ceremony')).toBeInTheDocument();\n        expect(screen.getByText(/6\\/15\\/2024/)).toBeInTheDocument();\n        expect(screen.getByText(/Sunset Beach/)).toBeInTheDocument();\n      });\n    });\n\n    it('should display activity capacity correctly', async () => {\n      const mockResponse = {\n        success: true,\n        data: {\n          events: [],\n          activities: [{ id: '1', name: 'Beach Volleyball', date: '2024-06-14', capacity: 20 }],\n          content_pages: [],\n          accommodations: [],\n        },\n      };\n\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockResponse,\n      });\n\n      render(<ReferenceBlockPicker {...defaultProps} />);\n\n      const searchInput = screen.getByPlaceholderText(/Search events, activities/i);\n      await userEvent.type(searchInput, 'volleyball');\n\n      await waitFor(() => {\n        expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n        expect(screen.getByText(/Capacity: 20/)).toBeInTheDocument();\n      });\n    });\n\n    it('should display content page slug correctly', async () => {\n      const mockResponse = {\n        success: true,\n        data: {\n          events: [],\n          activities: [],\n          content_pages: [{ id: '1', title: 'Our Story', slug: 'our-story', type: 'page' }],\n          accommodations: [],\n        },\n      };\n\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        ok: true,\n        json: async () => mockResponse,\n      });\n\n      render(<ReferenceBlockPicker {...defaultProps} />);\n\n      const searchInput = screen.getByPlaceholderText(/Search events, activities/i);\n      await userEvent.type(searchInput, 'story');\n\n      await waitFor(() => {\n        expect(screen.getByText('Our Story')).toBeInTheDocument();\n        expect(screen.getByText(/\\/our-story/)).toBeInTheDocument();\n      });\n    });\n  });\n});\n"],"names":["global","fetch","jest","fn","describe","mockOnSelect","mockOnClose","defaultProps","onSelect","onClose","pageType","pageId","beforeEach","clearAllMocks","mockClear","it","render","ReferenceBlockPicker","expect","screen","getByText","toBeInTheDocument","getByPlaceholderText","closeButton","getByLabelText","mockResponse","success","data","events","id","name","date","location","activities","content_pages","accommodations","mockResolvedValueOnce","ok","json","searchInput","userEvent","type","not","toHaveBeenCalled","waitFor","toHaveBeenCalledWith","stringContaining","timeout","capacity","title","slug","room_count","mockImplementationOnce","Promise","resolve","setTimeout","getByRole","hidden","mockRejectedValueOnce","Error","eventsButton","toHaveClass","click","eventCard","closest","metadata","activityCard","cancelButton"],"mappings":"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"}