b15f487ceeb76e4e45fa589e6e7cd189
"use strict";
// Mock dependencies
jest.mock('@/services/rsvpManagementService');
jest.mock('@/lib/apiHelpers');
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _route = require("./route");
const _rsvpManagementService = /*#__PURE__*/ _interop_require_wildcard(require("../../../../services/rsvpManagementService"));
const _apiHelpers = /*#__PURE__*/ _interop_require_wildcard(require("../../../../lib/apiHelpers"));
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Helper to create test requests
function createTestRequest(url) {
    return new Request(url, {
        method: 'GET',
        headers: {
            'Content-Type': 'application/json'
        }
    });
}
describe('GET /api/admin/rsvps', ()=>{
    const mockListRSVPs = _rsvpManagementService.listRSVPs;
    const mockWithAuth = _apiHelpers.withAuth;
    beforeEach(()=>{
        jest.clearAllMocks();
        // Mock withAuth to call the handler directly
        mockWithAuth.mockImplementation(async (handler)=>{
            return handler('test-user-id');
        });
    });
    describe('Success Cases', ()=>{
        it('should return paginated RSVPs with statistics when called with valid parameters', async ()=>{
            // Arrange
            const mockResponse = {
                data: [
                    {
                        id: 'rsvp-1',
                        guestId: 'guest-1',
                        guestFirstName: 'John',
                        guestLastName: 'Doe',
                        guestEmail: 'john@example.com',
                        eventId: 'event-1',
                        eventName: 'Wedding Ceremony',
                        activityId: null,
                        activityName: null,
                        status: 'attending',
                        guestCount: 2,
                        dietaryNotes: null,
                        specialRequirements: null,
                        notes: null,
                        respondedAt: '2024-01-15T10:00:00Z',
                        createdAt: '2024-01-10T10:00:00Z',
                        updatedAt: '2024-01-15T10:00:00Z'
                    }
                ],
                pagination: {
                    page: 1,
                    limit: 50,
                    total: 1,
                    totalPages: 1
                },
                statistics: {
                    totalRSVPs: 1,
                    byStatus: {
                        attending: 1,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 2
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?page=1&limit=50');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(data.data).toEqual(mockResponse);
            expect(mockListRSVPs).toHaveBeenCalledWith({}, {
                page: 1,
                limit: 50
            });
        });
        it('should apply filters when provided in query parameters', async ()=>{
            // Arrange
            const mockResponse = {
                data: [],
                pagination: {
                    page: 1,
                    limit: 50,
                    total: 0,
                    totalPages: 0
                },
                statistics: {
                    totalRSVPs: 0,
                    byStatus: {
                        attending: 0,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 0
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?eventId=00000000-0000-0000-0000-000000000001&status=attending&searchQuery=John');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(mockListRSVPs).toHaveBeenCalledWith({
                eventId: '00000000-0000-0000-0000-000000000001',
                status: 'attending',
                searchQuery: 'John'
            }, {
                page: 1,
                limit: 50
            });
        });
        it('should use default pagination values when not provided', async ()=>{
            // Arrange
            const mockResponse = {
                data: [],
                pagination: {
                    page: 1,
                    limit: 50,
                    total: 0,
                    totalPages: 0
                },
                statistics: {
                    totalRSVPs: 0,
                    byStatus: {
                        attending: 0,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 0
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            const response = await (0, _route.GET)(request);
            // Assert
            expect(response.status).toBe(200);
            expect(mockListRSVPs).toHaveBeenCalledWith({}, {
                page: 1,
                limit: 50
            });
        });
        it('should handle multiple filters simultaneously', async ()=>{
            // Arrange
            const mockResponse = {
                data: [],
                pagination: {
                    page: 2,
                    limit: 25,
                    total: 0,
                    totalPages: 0
                },
                statistics: {
                    totalRSVPs: 0,
                    byStatus: {
                        attending: 0,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 0
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?eventId=00000000-0000-0000-0000-000000000001&activityId=00000000-0000-0000-0000-000000000002&status=pending&guestId=00000000-0000-0000-0000-000000000003&page=2&limit=25');
            // Act
            const response = await (0, _route.GET)(request);
            // Assert
            expect(response.status).toBe(200);
            expect(mockListRSVPs).toHaveBeenCalledWith({
                eventId: '00000000-0000-0000-0000-000000000001',
                activityId: '00000000-0000-0000-0000-000000000002',
                status: 'pending',
                guestId: '00000000-0000-0000-0000-000000000003'
            }, {
                page: 2,
                limit: 25
            });
        });
    });
    describe('Validation Errors', ()=>{
        it('should return 400 when eventId is not a valid UUID', async ()=>{
            // Arrange
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?eventId=invalid-uuid');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
            expect(data.error.message).toBe('Invalid query parameters');
            expect(mockListRSVPs).not.toHaveBeenCalled();
        });
        it('should return 400 when status is invalid', async ()=>{
            // Arrange
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?status=invalid-status');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
            expect(mockListRSVPs).not.toHaveBeenCalled();
        });
        it('should return 400 when page is not a positive integer', async ()=>{
            // Arrange
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?page=-1');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
            expect(mockListRSVPs).not.toHaveBeenCalled();
        });
        it('should return 400 when limit exceeds maximum', async ()=>{
            // Arrange
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?limit=150');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
            expect(mockListRSVPs).not.toHaveBeenCalled();
        });
        it('should return 400 when searchQuery exceeds maximum length', async ()=>{
            // Arrange
            const longQuery = 'a'.repeat(101);
            const request = createTestRequest(`http://localhost:3000/api/admin/rsvps?searchQuery=${longQuery}`);
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
            expect(mockListRSVPs).not.toHaveBeenCalled();
        });
    });
    describe('Service Errors', ()=>{
        it('should return 500 when service returns DATABASE_ERROR', async ()=>{
            // Arrange
            mockListRSVPs.mockResolvedValue({
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: 'Database connection failed'
                }
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(500);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('DATABASE_ERROR');
            expect(data.error.message).toBe('Database connection failed');
        });
        it('should return 400 when service returns VALIDATION_ERROR', async ()=>{
            // Arrange
            mockListRSVPs.mockResolvedValue({
                success: false,
                error: {
                    code: 'VALIDATION_ERROR',
                    message: 'Invalid filter parameters',
                    details: [
                        {
                            field: 'eventId',
                            message: 'Invalid UUID'
                        }
                    ]
                }
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
        });
        it('should return 500 when service returns UNKNOWN_ERROR', async ()=>{
            // Arrange
            mockListRSVPs.mockResolvedValue({
                success: false,
                error: {
                    code: 'UNKNOWN_ERROR',
                    message: 'An unexpected error occurred'
                }
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(500);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('UNKNOWN_ERROR');
        });
    });
    describe('Error Handling', ()=>{
        it('should return 500 when service throws an exception', async ()=>{
            // Arrange
            mockListRSVPs.mockRejectedValue(new Error('Unexpected service error'));
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(500);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('INTERNAL_ERROR');
            expect(data.error.message).toBe('Failed to fetch RSVPs');
        });
        it('should log error details when exception occurs', async ()=>{
            // Arrange
            const consoleErrorSpy = jest.spyOn(console, 'error').mockImplementation();
            mockListRSVPs.mockRejectedValue(new Error('Test error'));
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            await (0, _route.GET)(request);
            // Assert
            expect(consoleErrorSpy).toHaveBeenCalledWith('GET /api/admin/rsvps error:', expect.objectContaining({
                error: 'Test error',
                stack: expect.any(String)
            }));
            consoleErrorSpy.mockRestore();
        });
    });
    describe('Authentication', ()=>{
        it('should call withAuth wrapper', async ()=>{
            // Arrange
            const mockResponse = {
                data: [],
                pagination: {
                    page: 1,
                    limit: 50,
                    total: 0,
                    totalPages: 0
                },
                statistics: {
                    totalRSVPs: 0,
                    byStatus: {
                        attending: 0,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 0
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            await (0, _route.GET)(request);
            // Assert
            expect(_apiHelpers.withAuth).toHaveBeenCalled();
        });
    });
    describe('Edge Cases', ()=>{
        it('should handle empty result set', async ()=>{
            // Arrange
            const mockResponse = {
                data: [],
                pagination: {
                    page: 1,
                    limit: 50,
                    total: 0,
                    totalPages: 0
                },
                statistics: {
                    totalRSVPs: 0,
                    byStatus: {
                        attending: 0,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 0
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(data.data.data).toEqual([]);
            expect(data.data.pagination.total).toBe(0);
        });
        it('should handle large page numbers', async ()=>{
            // Arrange
            const mockResponse = {
                data: [],
                pagination: {
                    page: 999,
                    limit: 50,
                    total: 0,
                    totalPages: 0
                },
                statistics: {
                    totalRSVPs: 0,
                    byStatus: {
                        attending: 0,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 0
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?page=999');
            // Act
            const response = await (0, _route.GET)(request);
            // Assert
            expect(response.status).toBe(200);
            expect(mockListRSVPs).toHaveBeenCalledWith({}, {
                page: 999,
                limit: 50
            });
        });
        it('should handle all valid RSVP statuses', async ()=>{
            // Arrange
            const statuses = [
                'pending',
                'attending',
                'declined',
                'maybe'
            ];
            for (const status of statuses){
                mockListRSVPs.mockResolvedValue({
                    success: true,
                    data: {
                        data: [],
                        pagination: {
                            page: 1,
                            limit: 50,
                            total: 0,
                            totalPages: 0
                        },
                        statistics: {
                            totalRSVPs: 0,
                            byStatus: {
                                attending: 0,
                                declined: 0,
                                maybe: 0,
                                pending: 0
                            },
                            totalGuestCount: 0
                        }
                    }
                });
                const request = createTestRequest(`http://localhost:3000/api/admin/rsvps?status=${status}`);
                // Act
                const response = await (0, _route.GET)(request);
                // Assert
                expect(response.status).toBe(200);
                expect(mockListRSVPs).toHaveBeenCalledWith({
                    status
                }, {
                    page: 1,
                    limit: 50
                });
            }
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FwaS9hZG1pbi9yc3Zwcy9yb3V0ZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdFVCB9IGZyb20gJy4vcm91dGUnO1xuaW1wb3J0ICogYXMgcnN2cE1hbmFnZW1lbnRTZXJ2aWNlIGZyb20gJ0Avc2VydmljZXMvcnN2cE1hbmFnZW1lbnRTZXJ2aWNlJztcbmltcG9ydCAqIGFzIGFwaUhlbHBlcnMgZnJvbSAnQC9saWIvYXBpSGVscGVycyc7XG5cbi8vIEhlbHBlciB0byBjcmVhdGUgdGVzdCByZXF1ZXN0c1xuZnVuY3Rpb24gY3JlYXRlVGVzdFJlcXVlc3QodXJsOiBzdHJpbmcpOiBSZXF1ZXN0IHtcbiAgcmV0dXJuIG5ldyBSZXF1ZXN0KHVybCwge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gIH0pO1xufVxuXG4vLyBNb2NrIGRlcGVuZGVuY2llc1xuamVzdC5tb2NrKCdAL3NlcnZpY2VzL3JzdnBNYW5hZ2VtZW50U2VydmljZScpO1xuamVzdC5tb2NrKCdAL2xpYi9hcGlIZWxwZXJzJyk7XG5cbmRlc2NyaWJlKCdHRVQgL2FwaS9hZG1pbi9yc3ZwcycsICgpID0+IHtcbiAgY29uc3QgbW9ja0xpc3RSU1ZQcyA9IHJzdnBNYW5hZ2VtZW50U2VydmljZS5saXN0UlNWUHMgYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjxcbiAgICB0eXBlb2YgcnN2cE1hbmFnZW1lbnRTZXJ2aWNlLmxpc3RSU1ZQc1xuICA+O1xuICBjb25zdCBtb2NrV2l0aEF1dGggPSBhcGlIZWxwZXJzLndpdGhBdXRoIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIGFwaUhlbHBlcnMud2l0aEF1dGg+O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIFxuICAgIC8vIE1vY2sgd2l0aEF1dGggdG8gY2FsbCB0aGUgaGFuZGxlciBkaXJlY3RseVxuICAgIG1vY2tXaXRoQXV0aC5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKGhhbmRsZXIpID0+IHtcbiAgICAgIHJldHVybiBoYW5kbGVyKCd0ZXN0LXVzZXItaWQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1N1Y2Nlc3MgQ2FzZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcGFnaW5hdGVkIFJTVlBzIHdpdGggc3RhdGlzdGljcyB3aGVuIGNhbGxlZCB3aXRoIHZhbGlkIHBhcmFtZXRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSB7XG4gICAgICAgIGRhdGE6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ3JzdnAtMScsXG4gICAgICAgICAgICBndWVzdElkOiAnZ3Vlc3QtMScsXG4gICAgICAgICAgICBndWVzdEZpcnN0TmFtZTogJ0pvaG4nLFxuICAgICAgICAgICAgZ3Vlc3RMYXN0TmFtZTogJ0RvZScsXG4gICAgICAgICAgICBndWVzdEVtYWlsOiAnam9obkBleGFtcGxlLmNvbScsXG4gICAgICAgICAgICBldmVudElkOiAnZXZlbnQtMScsXG4gICAgICAgICAgICBldmVudE5hbWU6ICdXZWRkaW5nIENlcmVtb255JyxcbiAgICAgICAgICAgIGFjdGl2aXR5SWQ6IG51bGwsXG4gICAgICAgICAgICBhY3Rpdml0eU5hbWU6IG51bGwsXG4gICAgICAgICAgICBzdGF0dXM6ICdhdHRlbmRpbmcnIGFzIGNvbnN0LFxuICAgICAgICAgICAgZ3Vlc3RDb3VudDogMixcbiAgICAgICAgICAgIGRpZXRhcnlOb3RlczogbnVsbCxcbiAgICAgICAgICAgIHNwZWNpYWxSZXF1aXJlbWVudHM6IG51bGwsXG4gICAgICAgICAgICBub3RlczogbnVsbCxcbiAgICAgICAgICAgIHJlc3BvbmRlZEF0OiAnMjAyNC0wMS0xNVQxMDowMDowMFonLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiAnMjAyNC0wMS0xMFQxMDowMDowMFonLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiAnMjAyNC0wMS0xNVQxMDowMDowMFonLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICBwYWdlOiAxLFxuICAgICAgICAgIGxpbWl0OiA1MCxcbiAgICAgICAgICB0b3RhbDogMSxcbiAgICAgICAgICB0b3RhbFBhZ2VzOiAxLFxuICAgICAgICB9LFxuICAgICAgICBzdGF0aXN0aWNzOiB7XG4gICAgICAgICAgdG90YWxSU1ZQczogMSxcbiAgICAgICAgICBieVN0YXR1czoge1xuICAgICAgICAgICAgYXR0ZW5kaW5nOiAxLFxuICAgICAgICAgICAgZGVjbGluZWQ6IDAsXG4gICAgICAgICAgICBtYXliZTogMCxcbiAgICAgICAgICAgIHBlbmRpbmc6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0b3RhbEd1ZXN0Q291bnQ6IDIsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBtb2NrTGlzdFJTVlBzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogbW9ja1Jlc3BvbnNlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVUZXN0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9yc3Zwcz9wYWdlPTEmbGltaXQ9NTAnKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChkYXRhLmRhdGEpLnRvRXF1YWwobW9ja1Jlc3BvbnNlKTtcbiAgICAgIGV4cGVjdChtb2NrTGlzdFJTVlBzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAge30sXG4gICAgICAgIHsgcGFnZTogMSwgbGltaXQ6IDUwIH1cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFwcGx5IGZpbHRlcnMgd2hlbiBwcm92aWRlZCBpbiBxdWVyeSBwYXJhbWV0ZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgbW9ja1Jlc3BvbnNlID0ge1xuICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgcGFnaW5hdGlvbjogeyBwYWdlOiAxLCBsaW1pdDogNTAsIHRvdGFsOiAwLCB0b3RhbFBhZ2VzOiAwIH0sXG4gICAgICAgIHN0YXRpc3RpY3M6IHtcbiAgICAgICAgICB0b3RhbFJTVlBzOiAwLFxuICAgICAgICAgIGJ5U3RhdHVzOiB7IGF0dGVuZGluZzogMCwgZGVjbGluZWQ6IDAsIG1heWJlOiAwLCBwZW5kaW5nOiAwIH0sXG4gICAgICAgICAgdG90YWxHdWVzdENvdW50OiAwLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgbW9ja0xpc3RSU1ZQcy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IG1vY2tSZXNwb25zZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlVGVzdFJlcXVlc3QoXG4gICAgICAgICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3JzdnBzP2V2ZW50SWQ9MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAxJnN0YXR1cz1hdHRlbmRpbmcmc2VhcmNoUXVlcnk9Sm9obidcbiAgICAgICk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QobW9ja0xpc3RSU1ZQcykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIHtcbiAgICAgICAgICBldmVudElkOiAnMDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAxJyxcbiAgICAgICAgICBzdGF0dXM6ICdhdHRlbmRpbmcnLFxuICAgICAgICAgIHNlYXJjaFF1ZXJ5OiAnSm9obicsXG4gICAgICAgIH0sXG4gICAgICAgIHsgcGFnZTogMSwgbGltaXQ6IDUwIH1cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVzZSBkZWZhdWx0IHBhZ2luYXRpb24gdmFsdWVzIHdoZW4gbm90IHByb3ZpZGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgbW9ja1Jlc3BvbnNlID0ge1xuICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgcGFnaW5hdGlvbjogeyBwYWdlOiAxLCBsaW1pdDogNTAsIHRvdGFsOiAwLCB0b3RhbFBhZ2VzOiAwIH0sXG4gICAgICAgIHN0YXRpc3RpY3M6IHtcbiAgICAgICAgICB0b3RhbFJTVlBzOiAwLFxuICAgICAgICAgIGJ5U3RhdHVzOiB7IGF0dGVuZGluZzogMCwgZGVjbGluZWQ6IDAsIG1heWJlOiAwLCBwZW5kaW5nOiAwIH0sXG4gICAgICAgICAgdG90YWxHdWVzdENvdW50OiAwLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgbW9ja0xpc3RSU1ZQcy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IG1vY2tSZXNwb25zZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlVGVzdFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vcnN2cHMnKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QobW9ja0xpc3RSU1ZQcykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIHt9LFxuICAgICAgICB7IHBhZ2U6IDEsIGxpbWl0OiA1MCB9XG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbXVsdGlwbGUgZmlsdGVycyBzaW11bHRhbmVvdXNseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcbiAgICAgICAgZGF0YTogW10sXG4gICAgICAgIHBhZ2luYXRpb246IHsgcGFnZTogMiwgbGltaXQ6IDI1LCB0b3RhbDogMCwgdG90YWxQYWdlczogMCB9LFxuICAgICAgICBzdGF0aXN0aWNzOiB7XG4gICAgICAgICAgdG90YWxSU1ZQczogMCxcbiAgICAgICAgICBieVN0YXR1czogeyBhdHRlbmRpbmc6IDAsIGRlY2xpbmVkOiAwLCBtYXliZTogMCwgcGVuZGluZzogMCB9LFxuICAgICAgICAgIHRvdGFsR3Vlc3RDb3VudDogMCxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tMaXN0UlNWUHMubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiBtb2NrUmVzcG9uc2UsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZVRlc3RSZXF1ZXN0KFxuICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9yc3Zwcz9ldmVudElkPTAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMSZhY3Rpdml0eUlkPTAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMiZzdGF0dXM9cGVuZGluZyZndWVzdElkPTAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMyZwYWdlPTImbGltaXQ9MjUnXG4gICAgICApO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChtb2NrTGlzdFJTVlBzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAge1xuICAgICAgICAgIGV2ZW50SWQ6ICcwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDEnLFxuICAgICAgICAgIGFjdGl2aXR5SWQ6ICcwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDInLFxuICAgICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICAgIGd1ZXN0SWQ6ICcwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDMnLFxuICAgICAgICB9LFxuICAgICAgICB7IHBhZ2U6IDIsIGxpbWl0OiAyNSB9XG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVmFsaWRhdGlvbiBFcnJvcnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNDAwIHdoZW4gZXZlbnRJZCBpcyBub3QgYSB2YWxpZCBVVUlEJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZVRlc3RSZXF1ZXN0KFxuICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9yc3Zwcz9ldmVudElkPWludmFsaWQtdXVpZCdcbiAgICAgICk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IubWVzc2FnZSkudG9CZSgnSW52YWxpZCBxdWVyeSBwYXJhbWV0ZXJzJyk7XG4gICAgICBleHBlY3QobW9ja0xpc3RSU1ZQcykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwMCB3aGVuIHN0YXR1cyBpcyBpbnZhbGlkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZVRlc3RSZXF1ZXN0KFxuICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9yc3Zwcz9zdGF0dXM9aW52YWxpZC1zdGF0dXMnXG4gICAgICApO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgIGV4cGVjdChtb2NrTGlzdFJTVlBzKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNDAwIHdoZW4gcGFnZSBpcyBub3QgYSBwb3NpdGl2ZSBpbnRlZ2VyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZVRlc3RSZXF1ZXN0KFxuICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9yc3Zwcz9wYWdlPS0xJ1xuICAgICAgKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICBleHBlY3QobW9ja0xpc3RSU1ZQcykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwMCB3aGVuIGxpbWl0IGV4Y2VlZHMgbWF4aW11bScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVUZXN0UmVxdWVzdChcbiAgICAgICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vcnN2cHM/bGltaXQ9MTUwJ1xuICAgICAgKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICBleHBlY3QobW9ja0xpc3RSU1ZQcykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwMCB3aGVuIHNlYXJjaFF1ZXJ5IGV4Y2VlZHMgbWF4aW11bSBsZW5ndGgnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBsb25nUXVlcnkgPSAnYScucmVwZWF0KDEwMSk7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlVGVzdFJlcXVlc3QoXG4gICAgICAgIGBodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3JzdnBzP3NlYXJjaFF1ZXJ5PSR7bG9uZ1F1ZXJ5fWBcbiAgICAgICk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgZXhwZWN0KG1vY2tMaXN0UlNWUHMpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTZXJ2aWNlIEVycm9ycycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiA1MDAgd2hlbiBzZXJ2aWNlIHJldHVybnMgREFUQUJBU0VfRVJST1InLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrTGlzdFJTVlBzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ0RBVEFCQVNFX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVUZXN0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9yc3ZwcycpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDUwMCk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ0RBVEFCQVNFX0VSUk9SJyk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5tZXNzYWdlKS50b0JlKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNDAwIHdoZW4gc2VydmljZSByZXR1cm5zIFZBTElEQVRJT05fRVJST1InLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrTGlzdFJTVlBzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ1ZBTElEQVRJT05fRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGZpbHRlciBwYXJhbWV0ZXJzJyxcbiAgICAgICAgICBkZXRhaWxzOiBbeyBmaWVsZDogJ2V2ZW50SWQnLCBtZXNzYWdlOiAnSW52YWxpZCBVVUlEJyB9XSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlVGVzdFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vcnN2cHMnKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA1MDAgd2hlbiBzZXJ2aWNlIHJldHVybnMgVU5LTk9XTl9FUlJPUicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tMaXN0UlNWUHMubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnVU5LTk9XTl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0FuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVUZXN0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9yc3ZwcycpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDUwMCk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ1VOS05PV05fRVJST1InKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIDUwMCB3aGVuIHNlcnZpY2UgdGhyb3dzIGFuIGV4Y2VwdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tMaXN0UlNWUHMubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdVbmV4cGVjdGVkIHNlcnZpY2UgZXJyb3InKSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVUZXN0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9yc3ZwcycpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDUwMCk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ0lOVEVSTkFMX0VSUk9SJyk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5tZXNzYWdlKS50b0JlKCdGYWlsZWQgdG8gZmV0Y2ggUlNWUHMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbG9nIGVycm9yIGRldGFpbHMgd2hlbiBleGNlcHRpb24gb2NjdXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgY29uc29sZUVycm9yU3B5ID0gamVzdC5zcHlPbihjb25zb2xlLCAnZXJyb3InKS5tb2NrSW1wbGVtZW50YXRpb24oKTtcbiAgICAgIG1vY2tMaXN0UlNWUHMubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdUZXN0IGVycm9yJykpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlVGVzdFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vcnN2cHMnKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBhd2FpdCBHRVQocmVxdWVzdCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KGNvbnNvbGVFcnJvclNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICdHRVQgL2FwaS9hZG1pbi9yc3ZwcyBlcnJvcjonLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgZXJyb3I6ICdUZXN0IGVycm9yJyxcbiAgICAgICAgICBzdGFjazogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgY29uc29sZUVycm9yU3B5Lm1vY2tSZXN0b3JlKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBdXRoZW50aWNhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGwgd2l0aEF1dGggd3JhcHBlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcbiAgICAgICAgZGF0YTogW10sXG4gICAgICAgIHBhZ2luYXRpb246IHsgcGFnZTogMSwgbGltaXQ6IDUwLCB0b3RhbDogMCwgdG90YWxQYWdlczogMCB9LFxuICAgICAgICBzdGF0aXN0aWNzOiB7XG4gICAgICAgICAgdG90YWxSU1ZQczogMCxcbiAgICAgICAgICBieVN0YXR1czogeyBhdHRlbmRpbmc6IDAsIGRlY2xpbmVkOiAwLCBtYXliZTogMCwgcGVuZGluZzogMCB9LFxuICAgICAgICAgIHRvdGFsR3Vlc3RDb3VudDogMCxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tMaXN0UlNWUHMubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiBtb2NrUmVzcG9uc2UsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZVRlc3RSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3JzdnBzJyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgYXdhaXQgR0VUKHJlcXVlc3QpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChhcGlIZWxwZXJzLndpdGhBdXRoKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFZGdlIENhc2VzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHJlc3VsdCBzZXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSB7XG4gICAgICAgIGRhdGE6IFtdLFxuICAgICAgICBwYWdpbmF0aW9uOiB7IHBhZ2U6IDEsIGxpbWl0OiA1MCwgdG90YWw6IDAsIHRvdGFsUGFnZXM6IDAgfSxcbiAgICAgICAgc3RhdGlzdGljczoge1xuICAgICAgICAgIHRvdGFsUlNWUHM6IDAsXG4gICAgICAgICAgYnlTdGF0dXM6IHsgYXR0ZW5kaW5nOiAwLCBkZWNsaW5lZDogMCwgbWF5YmU6IDAsIHBlbmRpbmc6IDAgfSxcbiAgICAgICAgICB0b3RhbEd1ZXN0Q291bnQ6IDAsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBtb2NrTGlzdFJTVlBzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogbW9ja1Jlc3BvbnNlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVUZXN0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9yc3ZwcycpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGRhdGEuZGF0YS5kYXRhKS50b0VxdWFsKFtdKTtcbiAgICAgIGV4cGVjdChkYXRhLmRhdGEucGFnaW5hdGlvbi50b3RhbCkudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGxhcmdlIHBhZ2UgbnVtYmVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcbiAgICAgICAgZGF0YTogW10sXG4gICAgICAgIHBhZ2luYXRpb246IHsgcGFnZTogOTk5LCBsaW1pdDogNTAsIHRvdGFsOiAwLCB0b3RhbFBhZ2VzOiAwIH0sXG4gICAgICAgIHN0YXRpc3RpY3M6IHtcbiAgICAgICAgICB0b3RhbFJTVlBzOiAwLFxuICAgICAgICAgIGJ5U3RhdHVzOiB7IGF0dGVuZGluZzogMCwgZGVjbGluZWQ6IDAsIG1heWJlOiAwLCBwZW5kaW5nOiAwIH0sXG4gICAgICAgICAgdG90YWxHdWVzdENvdW50OiAwLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgbW9ja0xpc3RSU1ZQcy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IG1vY2tSZXNwb25zZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlVGVzdFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vcnN2cHM/cGFnZT05OTknKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QobW9ja0xpc3RSU1ZQcykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIHt9LFxuICAgICAgICB7IHBhZ2U6IDk5OSwgbGltaXQ6IDUwIH1cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBhbGwgdmFsaWQgUlNWUCBzdGF0dXNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHN0YXR1c2VzID0gWydwZW5kaW5nJywgJ2F0dGVuZGluZycsICdkZWNsaW5lZCcsICdtYXliZSddIGFzIGNvbnN0O1xuXG4gICAgICBmb3IgKGNvbnN0IHN0YXR1cyBvZiBzdGF0dXNlcykge1xuICAgICAgICBtb2NrTGlzdFJTVlBzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGRhdGE6IFtdLFxuICAgICAgICAgICAgcGFnaW5hdGlvbjogeyBwYWdlOiAxLCBsaW1pdDogNTAsIHRvdGFsOiAwLCB0b3RhbFBhZ2VzOiAwIH0sXG4gICAgICAgICAgICBzdGF0aXN0aWNzOiB7XG4gICAgICAgICAgICAgIHRvdGFsUlNWUHM6IDAsXG4gICAgICAgICAgICAgIGJ5U3RhdHVzOiB7IGF0dGVuZGluZzogMCwgZGVjbGluZWQ6IDAsIG1heWJlOiAwLCBwZW5kaW5nOiAwIH0sXG4gICAgICAgICAgICAgIHRvdGFsR3Vlc3RDb3VudDogMCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZVRlc3RSZXF1ZXN0KFxuICAgICAgICAgIGBodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3JzdnBzP3N0YXR1cz0ke3N0YXR1c31gXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gQWN0XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuXG4gICAgICAgIC8vIEFzc2VydFxuICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICAgIGV4cGVjdChtb2NrTGlzdFJTVlBzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICB7IHN0YXR1cyB9LFxuICAgICAgICAgIHsgcGFnZTogMSwgbGltaXQ6IDUwIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsImNyZWF0ZVRlc3RSZXF1ZXN0IiwidXJsIiwiUmVxdWVzdCIsIm1ldGhvZCIsImhlYWRlcnMiLCJkZXNjcmliZSIsIm1vY2tMaXN0UlNWUHMiLCJyc3ZwTWFuYWdlbWVudFNlcnZpY2UiLCJsaXN0UlNWUHMiLCJtb2NrV2l0aEF1dGgiLCJhcGlIZWxwZXJzIiwid2l0aEF1dGgiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsImhhbmRsZXIiLCJpdCIsIm1vY2tSZXNwb25zZSIsImRhdGEiLCJpZCIsImd1ZXN0SWQiLCJndWVzdEZpcnN0TmFtZSIsImd1ZXN0TGFzdE5hbWUiLCJndWVzdEVtYWlsIiwiZXZlbnRJZCIsImV2ZW50TmFtZSIsImFjdGl2aXR5SWQiLCJhY3Rpdml0eU5hbWUiLCJzdGF0dXMiLCJndWVzdENvdW50IiwiZGlldGFyeU5vdGVzIiwic3BlY2lhbFJlcXVpcmVtZW50cyIsIm5vdGVzIiwicmVzcG9uZGVkQXQiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJwYWdpbmF0aW9uIiwicGFnZSIsImxpbWl0IiwidG90YWwiLCJ0b3RhbFBhZ2VzIiwic3RhdGlzdGljcyIsInRvdGFsUlNWUHMiLCJieVN0YXR1cyIsImF0dGVuZGluZyIsImRlY2xpbmVkIiwibWF5YmUiLCJwZW5kaW5nIiwidG90YWxHdWVzdENvdW50IiwibW9ja1Jlc29sdmVkVmFsdWUiLCJzdWNjZXNzIiwicmVxdWVzdCIsInJlc3BvbnNlIiwiR0VUIiwianNvbiIsImV4cGVjdCIsInRvQmUiLCJ0b0VxdWFsIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJzZWFyY2hRdWVyeSIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJub3QiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwibG9uZ1F1ZXJ5IiwicmVwZWF0IiwiZGV0YWlscyIsImZpZWxkIiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciIsImNvbnNvbGVFcnJvclNweSIsInNweU9uIiwiY29uc29sZSIsIm9iamVjdENvbnRhaW5pbmciLCJzdGFjayIsImFueSIsIlN0cmluZyIsIm1vY2tSZXN0b3JlIiwic3RhdHVzZXMiXSwibWFwcGluZ3MiOiI7QUFZQSxvQkFBb0I7QUFDcEJBLEtBQUtDLElBQUksQ0FBQztBQUNWRCxLQUFLQyxJQUFJLENBQUM7Ozs7dUJBZFU7K0VBQ21CO29FQUNYOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFNUIsaUNBQWlDO0FBQ2pDLFNBQVNDLGtCQUFrQkMsR0FBVztJQUNwQyxPQUFPLElBQUlDLFFBQVFELEtBQUs7UUFDdEJFLFFBQVE7UUFDUkMsU0FBUztZQUFFLGdCQUFnQjtRQUFtQjtJQUNoRDtBQUNGO0FBTUFDLFNBQVMsd0JBQXdCO0lBQy9CLE1BQU1DLGdCQUFnQkMsdUJBQXNCQyxTQUFTO0lBR3JELE1BQU1D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