{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/app/guest/activities/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { ActivityCard } from '@/components/guest/ActivityCard';\nimport { ActivityPreviewModal } from '@/components/guest/ActivityPreviewModal';\nimport type { Activity } from '@/schemas/activitySchemas';\n\ninterface ActivityWithRSVP extends Activity {\n  rsvpStatus?: 'attending' | 'declined' | 'maybe' | 'pending';\n  capacityRemaining?: number;\n  netCost?: number;\n}\n\n/**\n * Guest Activities Page\n * \n * Displays list of activities guest is invited to with RSVP status, capacity, and filtering.\n * \n * Requirements: 9.3, 9.4, 9.5, 9.7\n */\nexport default function GuestActivitiesPage() {\n  const [activities, setActivities] = useState<ActivityWithRSVP[]>([]);\n  const [filteredActivities, setFilteredActivities] = useState<ActivityWithRSVP[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedActivity, setSelectedActivity] = useState<ActivityWithRSVP | null>(null);\n  const [showPreviewModal, setShowPreviewModal] = useState(false);\n  \n  // Filter state\n  const [activityType, setActivityType] = useState('');\n  const [dateFrom, setDateFrom] = useState('');\n  const [dateTo, setDateTo] = useState('');\n\n  // Fetch activities\n  const fetchActivities = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response = await fetch('/api/guest/activities');\n      const result = await response.json();\n\n      if (!result.success) {\n        throw new Error(result.error?.message || 'Failed to fetch activities');\n      }\n\n      setActivities(result.data || []);\n      setFilteredActivities(result.data || []);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'An error occurred');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchActivities();\n  }, [fetchActivities]);\n\n  // Apply filters\n  useEffect(() => {\n    let filtered = [...activities];\n\n    if (activityType) {\n      filtered = filtered.filter(activity => \n        activity.activityType === activityType\n      );\n    }\n\n    if (dateFrom) {\n      filtered = filtered.filter(activity => \n        new Date(activity.startTime) >= new Date(dateFrom)\n      );\n    }\n\n    if (dateTo) {\n      filtered = filtered.filter(activity => \n        new Date(activity.startTime) <= new Date(dateTo)\n      );\n    }\n\n    setFilteredActivities(filtered);\n  }, [activities, activityType, dateFrom, dateTo]);\n\n  // Handle activity card click\n  const handleActivityClick = useCallback((activity: ActivityWithRSVP) => {\n    setSelectedActivity(activity);\n    setShowPreviewModal(true);\n  }, []);\n\n  // Handle modal close\n  const handleCloseModal = useCallback(() => {\n    setShowPreviewModal(false);\n    setSelectedActivity(null);\n  }, []);\n\n  // Clear filters\n  const handleClearFilters = useCallback(() => {\n    setActivityType('');\n    setDateFrom('');\n    setDateTo('');\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 p-6\">\n        <div className=\"max-w-6xl mx-auto\">\n          <div className=\"flex items-center justify-center py-12\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600\"></div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 p-6\">\n        <div className=\"max-w-6xl mx-auto\">\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-6\">\n            <h2 className=\"text-xl font-semibold text-red-800 mb-2\">Error Loading Activities</h2>\n            <p className=\"text-red-600\">{error}</p>\n            <button\n              onClick={fetchActivities}\n              className=\"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\n            >\n              Try Again\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 p-6\">\n      <div className=\"max-w-6xl mx-auto\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <h1 className=\"text-4xl font-bold text-emerald-900 mb-2\">Activities</h1>\n          <p className=\"text-lg text-emerald-700\">\n            Browse all wedding activities and manage your participation\n          </p>\n        </div>\n\n        {/* Filters */}\n        <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\n          <h2 className=\"text-lg font-semibold text-emerald-900 mb-4\">Filter Activities</h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <div>\n              <label htmlFor=\"activityType\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Activity Type\n              </label>\n              <select\n                id=\"activityType\"\n                value={activityType}\n                onChange={(e) => setActivityType(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\n              >\n                <option value=\"\">All Types</option>\n                <option value=\"ceremony\">Ceremony</option>\n                <option value=\"reception\">Reception</option>\n                <option value=\"meal\">Meal</option>\n                <option value=\"transport\">Transport</option>\n                <option value=\"activity\">Activity</option>\n                <option value=\"other\">Other</option>\n              </select>\n            </div>\n            <div>\n              <label htmlFor=\"dateFrom\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                From Date\n              </label>\n              <input\n                type=\"date\"\n                id=\"dateFrom\"\n                value={dateFrom}\n                onChange={(e) => setDateFrom(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\n              />\n            </div>\n            <div>\n              <label htmlFor=\"dateTo\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                To Date\n              </label>\n              <input\n                type=\"date\"\n                id=\"dateTo\"\n                value={dateTo}\n                onChange={(e) => setDateTo(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\"\n              />\n            </div>\n            <div className=\"flex items-end\">\n              <button\n                onClick={handleClearFilters}\n                className=\"w-full px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors\"\n              >\n                Clear Filters\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Activities List */}\n        {filteredActivities.length === 0 ? (\n          <div className=\"bg-white rounded-lg shadow-md p-12 text-center\">\n            <p className=\"text-xl text-gray-600\">\n              {activities.length === 0 \n                ? \"No activities found. Check back later for updates!\"\n                : \"No activities match your filters. Try adjusting your criteria.\"}\n            </p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {filteredActivities.map((activity) => (\n              <ActivityCard\n                key={activity.id}\n                activity={activity}\n                onClick={() => handleActivityClick(activity)}\n              />\n            ))}\n          </div>\n        )}\n\n        {/* Activity Preview Modal */}\n        {selectedActivity && (\n          <ActivityPreviewModal\n            activityId={selectedActivity.id}\n            isOpen={showPreviewModal}\n            onClose={handleCloseModal}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["GuestActivitiesPage","activities","setActivities","useState","filteredActivities","setFilteredActivities","loading","setLoading","error","setError","selectedActivity","setSelectedActivity","showPreviewModal","setShowPreviewModal","activityType","setActivityType","dateFrom","setDateFrom","dateTo","setDateTo","fetchActivities","useCallback","response","fetch","result","json","success","Error","message","data","err","useEffect","filtered","filter","activity","Date","startTime","handleActivityClick","handleCloseModal","handleClearFilters","div","className","h2","p","button","onClick","h1","label","htmlFor","select","id","value","onChange","e","target","option","input","type","length","map","ActivityCard","ActivityPreviewModal","activityId","isOpen","onClose"],"mappings":"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"}