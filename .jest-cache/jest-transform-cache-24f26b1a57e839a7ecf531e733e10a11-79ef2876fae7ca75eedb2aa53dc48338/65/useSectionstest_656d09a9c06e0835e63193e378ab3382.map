{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/hooks/useSections.test.ts"],"sourcesContent":["import { renderHook, waitFor } from '@testing-library/react';\nimport { useSections } from './useSections';\n\n// Mock fetch globally\nglobal.fetch = jest.fn();\n\ndescribe('useSections', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    (global.fetch as jest.Mock).mockClear();\n  });\n\n  afterEach(() => {\n    jest.restoreAllMocks();\n  });\n\n  describe('loading states', () => {\n    it('should start with loading true when pageType and pageId provided', () => {\n      (global.fetch as jest.Mock).mockImplementation(() =>\n        new Promise(() => {}) // Never resolves\n      );\n\n      const { result } = renderHook(() =>\n        useSections({ pageType: 'custom', pageId: 'page-1' })\n      );\n\n      expect(result.current.loading).toBe(true);\n      expect(result.current.data).toEqual([]);\n      expect(result.current.error).toBeNull();\n    });\n\n    it('should not fetch when pageType or pageId is missing', async () => {\n      const { result } = renderHook(() =>\n        useSections({ pageType: '', pageId: '' })\n      );\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false);\n      });\n\n      expect(global.fetch).not.toHaveBeenCalled();\n      expect(result.current.data).toEqual([]);\n    });\n\n    it('should set loading false after successful fetch', async () => {\n      const mockData = [\n        {\n          id: 'section-1',\n          pageType: 'custom' as const,\n          pageId: 'page-1',\n          displayOrder: 1,\n          layout: 'two-column' as const,\n          columns: [],\n        },\n      ];\n\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: true, data: mockData }),\n      });\n\n      const { result } = renderHook(() =>\n        useSections({ pageType: 'custom', pageId: 'page-1' })\n      );\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false);\n      });\n\n      expect(result.current.data).toEqual(mockData);\n      expect(result.current.error).toBeNull();\n    });\n  });\n\n  describe('error handling', () => {\n    it('should handle network errors', async () => {\n      (global.fetch as jest.Mock).mockRejectedValueOnce(\n        new Error('Network error')\n      );\n\n      const { result } = renderHook(() =>\n        useSections({ pageType: 'custom', pageId: 'page-1' })\n      );\n\n      await waitFor(() => {\n        expect(result.current.error).toBeInstanceOf(Error);\n      });\n\n      expect(result.current.error?.message).toBe('Network error');\n      expect(result.current.loading).toBe(false);\n    });\n\n    it('should handle API error responses', async () => {\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        ok: false,\n        json: async () => ({\n          success: false,\n          error: { message: 'Not found' },\n        }),\n      });\n\n      const { result } = renderHook(() =>\n        useSections({ pageType: 'custom', pageId: 'page-1' })\n      );\n\n      await waitFor(() => {\n        expect(result.current.error).toBeInstanceOf(Error);\n      });\n\n      expect(result.current.error?.message).toBe('Not found');\n    });\n  });\n\n  describe('data refetching', () => {\n    it('should refetch data when refetch is called', async () => {\n      const initialData = [\n        {\n          id: 'section-1',\n          pageType: 'custom' as const,\n          pageId: 'page-1',\n          displayOrder: 1,\n          layout: 'one-column' as const,\n          columns: [],\n        },\n      ];\n\n      const updatedData = [\n        ...initialData,\n        {\n          id: 'section-2',\n          pageType: 'custom' as const,\n          pageId: 'page-1',\n          displayOrder: 2,\n          layout: 'two-column' as const,\n          columns: [],\n        },\n      ];\n\n      (global.fetch as jest.Mock)\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: initialData }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: updatedData }),\n        });\n\n      const { result } = renderHook(() =>\n        useSections({ pageType: 'custom', pageId: 'page-1' })\n      );\n\n      await waitFor(() => {\n        expect(result.current.data).toEqual(initialData);\n      });\n\n      await waitFor(async () => {\n        await result.current.refetch();\n      });\n\n      await waitFor(() => {\n        expect(result.current.data).toEqual(updatedData);\n      });\n    });\n\n    it('should reset error state on refetch', async () => {\n      (global.fetch as jest.Mock)\n        .mockRejectedValueOnce(new Error('Initial error'))\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: [] }),\n        });\n\n      const { result } = renderHook(() =>\n        useSections({ pageType: 'custom', pageId: 'page-1' })\n      );\n\n      await waitFor(() => {\n        expect(result.current.error).toBeInstanceOf(Error);\n      });\n\n      await waitFor(async () => {\n        await result.current.refetch();\n      });\n\n      await waitFor(() => {\n        expect(result.current.error).toBeNull();\n      });\n    });\n  });\n\n  describe('optimistic updates', () => {\n    it('should optimistically add new section on create', async () => {\n      const existingData = [\n        {\n          id: 'section-1',\n          pageType: 'custom' as const,\n          pageId: 'page-1',\n          displayOrder: 1,\n          layout: 'one-column' as const,\n          columns: [],\n        },\n      ];\n\n      const newSection = {\n        id: 'section-2',\n        pageType: 'custom' as const,\n        pageId: 'page-1',\n        displayOrder: 2,\n        layout: 'two-column' as const,\n        columns: [],\n      };\n\n      (global.fetch as jest.Mock)\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: existingData }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: newSection }),\n        });\n\n      const { result } = renderHook(() =>\n        useSections({ pageType: 'custom', pageId: 'page-1' })\n      );\n\n      await waitFor(() => {\n        expect(result.current.data).toEqual(existingData);\n      });\n\n      let createResult;\n      await waitFor(async () => {\n        createResult = await result.current.create({\n          layout: 'two-column',\n          displayOrder: 2,\n        });\n      });\n\n      expect(createResult.success).toBe(true);\n      \n      await waitFor(() => {\n        expect(result.current.data).toHaveLength(2);\n      });\n      \n      expect(result.current.data[1]).toEqual(newSection);\n    });\n\n    it('should sort sections by displayOrder after create', async () => {\n      const existingData = [\n        {\n          id: 'section-2',\n          pageType: 'custom' as const,\n          pageId: 'page-1',\n          displayOrder: 2,\n          layout: 'one-column' as const,\n          columns: [],\n        },\n      ];\n\n      const newSection = {\n        id: 'section-1',\n        pageType: 'custom' as const,\n        pageId: 'page-1',\n        displayOrder: 1,\n        layout: 'two-column' as const,\n        columns: [],\n      };\n\n      (global.fetch as jest.Mock)\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: existingData }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: newSection }),\n        });\n\n      const { result } = renderHook(() =>\n        useSections({ pageType: 'custom', pageId: 'page-1' })\n      );\n\n      await waitFor(() => {\n        expect(result.current.data).toEqual(existingData);\n      });\n\n      await waitFor(async () => {\n        await result.current.create({\n          layout: 'two-column',\n          displayOrder: 1,\n        });\n      });\n\n      await waitFor(() => {\n        expect(result.current.data[0].displayOrder).toBe(1);\n      });\n      \n      expect(result.current.data[1].displayOrder).toBe(2);\n    });\n\n    it('should optimistically update existing section', async () => {\n      const initialData = [\n        {\n          id: 'section-1',\n          pageType: 'custom' as const,\n          pageId: 'page-1',\n          displayOrder: 1,\n          layout: 'one-column' as const,\n          columns: [],\n        },\n      ];\n\n      const updatedSection = {\n        ...initialData[0],\n        layout: 'two-column' as const,\n      };\n\n      (global.fetch as jest.Mock)\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: initialData }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: updatedSection }),\n        });\n\n      const { result } = renderHook(() =>\n        useSections({ pageType: 'custom', pageId: 'page-1' })\n      );\n\n      await waitFor(() => {\n        expect(result.current.data[0].layout).toBe('one-column');\n      });\n\n      let updateResult;\n      await waitFor(async () => {\n        updateResult = await result.current.update('section-1', {\n          layout: 'two-column',\n        });\n      });\n\n      expect(updateResult.success).toBe(true);\n      \n      await waitFor(() => {\n        expect(result.current.data[0].layout).toBe('two-column');\n      });\n    });\n\n    it('should optimistically remove section on delete', async () => {\n      const initialData = [\n        {\n          id: 'section-1',\n          pageType: 'custom' as const,\n          pageId: 'page-1',\n          displayOrder: 1,\n          layout: 'one-column' as const,\n          columns: [],\n        },\n        {\n          id: 'section-2',\n          pageType: 'custom' as const,\n          pageId: 'page-1',\n          displayOrder: 2,\n          layout: 'two-column' as const,\n          columns: [],\n        },\n      ];\n\n      (global.fetch as jest.Mock)\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: initialData }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true }),\n        });\n\n      const { result } = renderHook(() =>\n        useSections({ pageType: 'custom', pageId: 'page-1' })\n      );\n\n      await waitFor(() => {\n        expect(result.current.data).toHaveLength(2);\n      });\n\n      let deleteResult;\n      await waitFor(async () => {\n        deleteResult = await result.current.remove('section-1');\n      });\n\n      expect(deleteResult.success).toBe(true);\n      \n      await waitFor(() => {\n        expect(result.current.data).toHaveLength(1);\n      });\n      \n      expect(result.current.data[0].id).toBe('section-2');\n    });\n\n    it('should optimistically reorder sections', async () => {\n      const initialData = [\n        {\n          id: 'section-1',\n          pageType: 'custom' as const,\n          pageId: 'page-1',\n          displayOrder: 1,\n          layout: 'one-column' as const,\n          columns: [],\n        },\n        {\n          id: 'section-2',\n          pageType: 'custom' as const,\n          pageId: 'page-1',\n          displayOrder: 2,\n          layout: 'two-column' as const,\n          columns: [],\n        },\n        {\n          id: 'section-3',\n          pageType: 'custom' as const,\n          pageId: 'page-1',\n          displayOrder: 3,\n          layout: 'one-column' as const,\n          columns: [],\n        },\n      ];\n\n      (global.fetch as jest.Mock)\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: initialData }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true }),\n        });\n\n      const { result } = renderHook(() =>\n        useSections({ pageType: 'custom', pageId: 'page-1' })\n      );\n\n      await waitFor(() => {\n        expect(result.current.data).toEqual(initialData);\n      });\n\n      let reorderResult;\n      await waitFor(async () => {\n        reorderResult = await result.current.reorder([\n          'section-3',\n          'section-1',\n          'section-2',\n        ]);\n      });\n\n      expect(reorderResult.success).toBe(true);\n      \n      await waitFor(() => {\n        expect(result.current.data[0].id).toBe('section-3');\n      });\n      \n      expect(result.current.data[1].id).toBe('section-1');\n      expect(result.current.data[2].id).toBe('section-2');\n    });\n  });\n});\n"],"names":["global","fetch","jest","fn","describe","beforeEach","clearAllMocks","mockClear","afterEach","restoreAllMocks","it","mockImplementation","Promise","result","renderHook","useSections","pageType","pageId","expect","current","loading","toBe","data","toEqual","error","toBeNull","waitFor","not","toHaveBeenCalled","mockData","id","displayOrder","layout","columns","mockResolvedValueOnce","ok","json","success","mockRejectedValueOnce","Error","toBeInstanceOf","message","initialData","updatedData","refetch","existingData","newSection","createResult","create","toHaveLength","updatedSection","updateResult","update","deleteResult","remove","reorderResult","reorder"],"mappings":"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"}