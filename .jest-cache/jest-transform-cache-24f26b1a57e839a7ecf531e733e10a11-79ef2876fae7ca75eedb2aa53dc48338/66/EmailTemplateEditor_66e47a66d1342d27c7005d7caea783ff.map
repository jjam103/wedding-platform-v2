{"version":3,"names":["EmailTemplateEditor","TEMPLATE_VARIABLES","cov_1kc7jbrevq","s","key","description","TEMPLATE_CATEGORIES","value","label","SAMPLE_DATA","guest_name","guest_first_name","guest_last_name","guest_email","event_name","event_date","event_time","event_location","activity_name","activity_date","activity_time","activity_location","rsvp_deadline","wedding_date","venue_name","venue_address","login_link","magic_link","onChange","onSave","onCancel","disabled","b","f","showVariablePicker","setShowVariablePicker","_react","useState","showPreview","setShowPreview","subjectCursorPosition","setSubjectCursorPosition","template","name","subject","body_html","category","handleNameChange","useCallback","e","_sanitization","sanitizeInput","target","handleSubjectChange","selectionStart","handleBodyChange","html","handleCategoryChange","insertVariable","variable","position","length","newSubject","slice","replaceVariables","text","result","Object","entries","forEach","replace","RegExp","previewSubject","previewBody","_jsxruntime","jsxs","className","jsx","htmlFor","id","type","placeholder","required","map","cat","onClick","_RichTextEditor","RichTextEditor","dangerouslySetInnerHTML","__html"],"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/EmailTemplateEditor.tsx"],"sourcesContent":["'use client';\n\n/**\n * EmailTemplateEditor Component\n * \n * Rich text editor for email templates with variable picker and preview\n * Requirements: 17.1, 17.2, 17.3\n */\n\nimport React, { useState, useCallback } from 'react';\nimport { RichTextEditor } from './RichTextEditor';\nimport { sanitizeInput } from '@/utils/sanitization';\n\ninterface EmailTemplateEditorProps {\n  value?: {\n    name: string;\n    subject: string;\n    body_html: string;\n    category?: string;\n  };\n  onChange: (template: {\n    name: string;\n    subject: string;\n    body_html: string;\n    category?: string;\n  }) => void;\n  onSave?: () => void;\n  onCancel?: () => void;\n  disabled?: boolean;\n}\n\n// Available template variables\nconst TEMPLATE_VARIABLES = [\n  { key: '{{guest_name}}', description: 'Guest full name' },\n  { key: '{{guest_first_name}}', description: 'Guest first name' },\n  { key: '{{guest_last_name}}', description: 'Guest last name' },\n  { key: '{{guest_email}}', description: 'Guest email address' },\n  { key: '{{event_name}}', description: 'Event name' },\n  { key: '{{event_date}}', description: 'Event date' },\n  { key: '{{event_time}}', description: 'Event time' },\n  { key: '{{event_location}}', description: 'Event location' },\n  { key: '{{activity_name}}', description: 'Activity name' },\n  { key: '{{activity_date}}', description: 'Activity date' },\n  { key: '{{activity_time}}', description: 'Activity time' },\n  { key: '{{activity_location}}', description: 'Activity location' },\n  { key: '{{rsvp_deadline}}', description: 'RSVP deadline date' },\n  { key: '{{wedding_date}}', description: 'Wedding date' },\n  { key: '{{venue_name}}', description: 'Venue name' },\n  { key: '{{venue_address}}', description: 'Venue address' },\n  { key: '{{login_link}}', description: 'Guest portal login link' },\n  { key: '{{magic_link}}', description: 'Magic link for authentication' },\n];\n\n// Template categories\nconst TEMPLATE_CATEGORIES = [\n  { value: 'invitation', label: 'Invitation' },\n  { value: 'rsvp', label: 'RSVP' },\n  { value: 'reminder', label: 'Reminder' },\n  { value: 'confirmation', label: 'Confirmation' },\n  { value: 'update', label: 'Update' },\n  { value: 'announcement', label: 'Announcement' },\n  { value: 'other', label: 'Other' },\n];\n\n// Sample data for preview\nconst SAMPLE_DATA = {\n  guest_name: 'John Doe',\n  guest_first_name: 'John',\n  guest_last_name: 'Doe',\n  guest_email: 'john.doe@example.com',\n  event_name: 'Wedding Ceremony',\n  event_date: 'June 15, 2024',\n  event_time: '4:00 PM',\n  event_location: 'Sunset Beach, Costa Rica',\n  activity_name: 'Welcome Dinner',\n  activity_date: 'June 14, 2024',\n  activity_time: '7:00 PM',\n  activity_location: 'Beachside Restaurant',\n  rsvp_deadline: 'May 1, 2024',\n  wedding_date: 'June 15, 2024',\n  venue_name: 'Paradise Resort',\n  venue_address: '123 Beach Road, Costa Rica',\n  login_link: 'https://example.com/auth/guest-login',\n  magic_link: 'https://example.com/auth/magic-link/verify?token=abc123',\n};\n\nexport function EmailTemplateEditor({\n  value,\n  onChange,\n  onSave,\n  onCancel,\n  disabled = false,\n}: EmailTemplateEditorProps) {\n  const [showVariablePicker, setShowVariablePicker] = useState(false);\n  const [showPreview, setShowPreview] = useState(false);\n  const [subjectCursorPosition, setSubjectCursorPosition] = useState<number | null>(null);\n\n  const template = value || {\n    name: '',\n    subject: '',\n    body_html: '',\n    category: 'other',\n  };\n\n  const handleNameChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      onChange({\n        ...template,\n        name: sanitizeInput(e.target.value),\n      });\n    },\n    [template, onChange]\n  );\n\n  const handleSubjectChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setSubjectCursorPosition(e.target.selectionStart);\n      onChange({\n        ...template,\n        subject: e.target.value, // Don't sanitize subject - allow variables\n      });\n    },\n    [template, onChange]\n  );\n\n  const handleBodyChange = useCallback(\n    (html: string) => {\n      onChange({\n        ...template,\n        body_html: html,\n      });\n    },\n    [template, onChange]\n  );\n\n  const handleCategoryChange = useCallback(\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\n      onChange({\n        ...template,\n        category: e.target.value,\n      });\n    },\n    [template, onChange]\n  );\n\n  const insertVariable = useCallback(\n    (variable: string, target: 'subject' | 'body') => {\n      if (target === 'subject') {\n        const position = subjectCursorPosition ?? template.subject.length;\n        const newSubject =\n          template.subject.slice(0, position) +\n          variable +\n          template.subject.slice(position);\n        onChange({\n          ...template,\n          subject: newSubject,\n        });\n      } else {\n        // For body, append variable at end (RichTextEditor handles cursor position)\n        onChange({\n          ...template,\n          body_html: template.body_html + variable,\n        });\n      }\n      setShowVariablePicker(false);\n    },\n    [template, onChange, subjectCursorPosition]\n  );\n\n  const replaceVariables = useCallback((text: string): string => {\n    let result = text;\n    Object.entries(SAMPLE_DATA).forEach(([key, value]) => {\n      result = result.replace(new RegExp(`{{${key}}}`, 'g'), value);\n    });\n    return result;\n  }, []);\n\n  const previewSubject = replaceVariables(template.subject);\n  const previewBody = replaceVariables(template.body_html);\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Template Name */}\n      <div>\n        <label htmlFor=\"template-name\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n          Template Name *\n        </label>\n        <input\n          id=\"template-name\"\n          type=\"text\"\n          value={template.name}\n          onChange={handleNameChange}\n          disabled={disabled}\n          placeholder=\"e.g., RSVP Confirmation\"\n          className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed\"\n          required\n        />\n      </div>\n\n      {/* Category */}\n      <div>\n        <label htmlFor=\"template-category\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n          Category\n        </label>\n        <select\n          id=\"template-category\"\n          value={template.category}\n          onChange={handleCategoryChange}\n          disabled={disabled}\n          className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed\"\n        >\n          {TEMPLATE_CATEGORIES.map((cat) => (\n            <option key={cat.value} value={cat.value}>\n              {cat.label}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      {/* Subject Line */}\n      <div>\n        <div className=\"flex items-center justify-between mb-2\">\n          <label htmlFor=\"template-subject\" className=\"block text-sm font-medium text-gray-700\">\n            Subject Line *\n          </label>\n          <button\n            type=\"button\"\n            onClick={() => setShowVariablePicker(!showVariablePicker)}\n            disabled={disabled}\n            className=\"text-sm text-emerald-600 hover:text-emerald-700 disabled:text-gray-400\"\n          >\n            Insert Variable\n          </button>\n        </div>\n        <input\n          id=\"template-subject\"\n          type=\"text\"\n          value={template.subject}\n          onChange={handleSubjectChange}\n          disabled={disabled}\n          placeholder=\"e.g., Your RSVP for {{event_name}}\"\n          className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed\"\n          required\n        />\n      </div>\n\n      {/* Variable Picker */}\n      {showVariablePicker && (\n        <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-gray-700 mb-3\">Available Variables</h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n            {TEMPLATE_VARIABLES.map((variable) => (\n              <button\n                key={variable.key}\n                type=\"button\"\n                onClick={() => insertVariable(variable.key, 'subject')}\n                disabled={disabled}\n                className=\"text-left px-3 py-2 bg-white border border-gray-200 rounded hover:bg-emerald-50 hover:border-emerald-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                <div className=\"font-mono text-sm text-emerald-600\">{variable.key}</div>\n                <div className=\"text-xs text-gray-500\">{variable.description}</div>\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Email Body */}\n      <div>\n        <div className=\"flex items-center justify-between mb-2\">\n          <label className=\"block text-sm font-medium text-gray-700\">Email Body *</label>\n          <button\n            type=\"button\"\n            onClick={() => setShowPreview(!showPreview)}\n            className=\"text-sm text-emerald-600 hover:text-emerald-700\"\n          >\n            {showPreview ? 'Hide Preview' : 'Show Preview'}\n          </button>\n        </div>\n\n        {!showPreview ? (\n          <div>\n            <RichTextEditor\n              value={template.body_html}\n              onChange={handleBodyChange}\n              disabled={disabled}\n              placeholder=\"Write your email content here. Use the variable picker to insert dynamic content.\"\n            />\n            <div className=\"mt-2\">\n              <button\n                type=\"button\"\n                onClick={() => setShowVariablePicker(!showVariablePicker)}\n                disabled={disabled}\n                className=\"text-sm text-emerald-600 hover:text-emerald-700 disabled:text-gray-400\"\n              >\n                Insert Variable in Body\n              </button>\n            </div>\n          </div>\n        ) : (\n          <div className=\"border border-gray-300 rounded-lg p-6 bg-white\">\n            <div className=\"mb-4 pb-4 border-b border-gray-200\">\n              <div className=\"text-sm text-gray-500 mb-1\">Subject:</div>\n              <div className=\"font-medium\">{previewSubject}</div>\n            </div>\n            <div\n              className=\"prose max-w-none\"\n              dangerouslySetInnerHTML={{ __html: previewBody }}\n            />\n            <div className=\"mt-4 pt-4 border-t border-gray-200 text-xs text-gray-500\">\n              Preview with sample data\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Action Buttons */}\n      {(onSave || onCancel) && (\n        <div className=\"flex items-center justify-end gap-3 pt-4 border-t border-gray-200\">\n          {onCancel && (\n            <button\n              type=\"button\"\n              onClick={onCancel}\n              disabled={disabled}\n              className=\"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              Cancel\n            </button>\n          )}\n          {onSave && (\n            <button\n              type=\"button\"\n              onClick={onSave}\n              disabled={disabled || !template.name || !template.subject || !template.body_html}\n              className=\"px-4 py-2 text-white bg-emerald-600 rounded-lg hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              Save Template\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+BAsFgB;;;;;;WAAAA,mBAAA;;;;;;;;yEA7E6B;;;kCACd;;;kCACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}