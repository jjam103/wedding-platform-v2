{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/ui/DataTable.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useMemo, useCallback } from 'react';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { Button } from './Button';\nimport { exportToCSV } from '@/utils/csvExport';\nimport { TableSkeleton } from './SkeletonLoaders';\n\n/**\n * Column definition for DataTable\n */\nexport interface ColumnDef<T> {\n  key: keyof T | string;\n  label: string;\n  sortable?: boolean;\n  filterable?: boolean;\n  filterType?: 'select' | 'text' | 'date';\n  filterOptions?: { label: string; value: any }[];\n  render?: (value: any, row: T) => React.ReactNode;\n  width?: string;\n  mobileHidden?: boolean;\n}\n\n/**\n * DataTable component props\n */\nexport interface DataTableProps<T extends Record<string, any>> {\n  data: T[];\n  columns: ColumnDef<T>[];\n  onSort?: (column: string, direction: 'asc' | 'desc') => void;\n  onFilter?: (filters: Record<string, any>) => void;\n  onSearch?: (query: string) => void;\n  onPageChange?: (page: number) => void;\n  onRowClick?: (row: T) => void;\n  onDelete?: (row: T) => void;\n  loading?: boolean;\n  totalCount?: number;\n  currentPage?: number;\n  pageSize?: number;\n  selectable?: boolean;\n  onSelectionChange?: (selectedIds: string[]) => void;\n  idField?: keyof T;\n  rowClassName?: (row: T) => string;\n  onBulkDelete?: (selectedIds: string[]) => Promise<void>;\n  onBulkExport?: () => void;\n  onBulkEmail?: (selectedIds: string[]) => void;\n  entityType?: string;\n  showBulkEmail?: boolean;\n}\n\n/**\n * DataTable Component\n * \n * Reusable table with sort, filter, search, and pagination functionality.\n * Supports responsive mobile layout and loading states.\n */\nexport function DataTable<T extends Record<string, any>>({\n  data,\n  columns,\n  onSort,\n  onFilter,\n  onSearch,\n  onPageChange,\n  onRowClick,\n  onDelete,\n  loading = false,\n  totalCount,\n  currentPage = 1,\n  pageSize = 25,\n  selectable = false,\n  onSelectionChange,\n  idField = 'id' as keyof T,\n  rowClassName,\n  onBulkDelete,\n  onBulkExport,\n  onBulkEmail,\n  entityType = 'items',\n  showBulkEmail = false,\n}: DataTableProps<T>) {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  \n  // State management\n  const [sortColumn, setSortColumn] = useState<string | null>(null);\n  const [sortDirection, setSortDirection] = useState<'asc' | 'desc'>('asc');\n  const [filters, setFilters] = useState<Record<string, any>>({});\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchDebounce, setSearchDebounce] = useState<NodeJS.Timeout | null>(null);\n  const [selectedIds, setSelectedIds] = useState<string[]>([]);\n  const [localPageSize, setLocalPageSize] = useState(pageSize);\n  const [localPage, setLocalPage] = useState(currentPage);\n  const [isBulkOperationInProgress, setIsBulkOperationInProgress] = useState(false);\n\n  // Initialize state from URL on mount\n  useEffect(() => {\n    const urlSort = searchParams.get('sort');\n    const urlDirection = searchParams.get('direction') as 'asc' | 'desc' | null;\n    const urlSearch = searchParams.get('search');\n    const urlPage = searchParams.get('page');\n    const urlPageSize = searchParams.get('pageSize');\n\n    if (urlSort) setSortColumn(urlSort);\n    if (urlDirection) setSortDirection(urlDirection);\n    if (urlSearch) setSearchQuery(urlSearch);\n    if (urlPage) setLocalPage(parseInt(urlPage));\n    if (urlPageSize) setLocalPageSize(parseInt(urlPageSize));\n\n    // Restore filters from URL\n    const urlFilters: Record<string, any> = {};\n    columns.forEach(col => {\n      if (col.filterable) {\n        const filterValue = searchParams.get(`filter_${String(col.key)}`);\n        if (filterValue) {\n          urlFilters[String(col.key)] = filterValue;\n        }\n      }\n    });\n    if (Object.keys(urlFilters).length > 0) {\n      setFilters(urlFilters);\n    }\n  }, []);\n\n  // Update URL when state changes\n  const updateURL = useCallback((updates: Record<string, string | null>) => {\n    const params = new URLSearchParams(searchParams.toString());\n    \n    Object.entries(updates).forEach(([key, value]) => {\n      if (value === null || value === '') {\n        params.delete(key);\n      } else {\n        params.set(key, value);\n      }\n    });\n\n    router.push(`?${params.toString()}`, { scroll: false });\n  }, [searchParams, router]);\n\n  // Handle sort\n  const handleSort = useCallback((column: string) => {\n    const newDirection = sortColumn === column && sortDirection === 'asc' ? 'desc' : 'asc';\n    setSortColumn(column);\n    setSortDirection(newDirection);\n    \n    updateURL({\n      sort: column,\n      direction: newDirection,\n    });\n\n    if (onSort) {\n      onSort(column, newDirection);\n    }\n  }, [sortColumn, sortDirection, onSort, updateURL]);\n\n  // Handle filter change\n  const handleFilterChange = useCallback((column: string, value: any) => {\n    const newFilters = { ...filters };\n    \n    if (value === '' || value === null) {\n      delete newFilters[column];\n    } else {\n      newFilters[column] = value;\n    }\n    \n    setFilters(newFilters);\n    \n    // Update URL with filter\n    updateURL({\n      [`filter_${column}`]: value || null,\n    });\n\n    if (onFilter) {\n      onFilter(newFilters);\n    }\n  }, [filters, onFilter, updateURL]);\n\n  // Handle search with debounce\n  const handleSearch = useCallback((query: string) => {\n    setSearchQuery(query);\n    \n    if (searchDebounce) {\n      clearTimeout(searchDebounce);\n    }\n\n    const timeout = setTimeout(() => {\n      updateURL({ search: query || null });\n      \n      if (onSearch) {\n        onSearch(query);\n      }\n    }, 300);\n\n    setSearchDebounce(timeout);\n  }, [searchDebounce, onSearch, updateURL]);\n\n  // Clear all filters\n  const handleClearFilters = useCallback(() => {\n    setFilters({});\n    setSearchQuery('');\n    \n    // Clear all filter params from URL\n    const updates: Record<string, null> = { search: null };\n    columns.forEach(col => {\n      if (col.filterable) {\n        updates[`filter_${String(col.key)}`] = null;\n      }\n    });\n    updateURL(updates);\n\n    if (onFilter) {\n      onFilter({});\n    }\n    if (onSearch) {\n      onSearch('');\n    }\n  }, [columns, onFilter, onSearch, updateURL]);\n\n  // Handle pagination\n  const handlePageChange = useCallback((page: number) => {\n    setLocalPage(page);\n    updateURL({ page: page.toString() });\n    \n    if (onPageChange) {\n      onPageChange(page);\n    }\n  }, [onPageChange, updateURL]);\n\n  const handlePageSizeChange = useCallback((size: number) => {\n    setLocalPageSize(size);\n    setLocalPage(1);\n    updateURL({ \n      pageSize: size.toString(),\n      page: '1',\n    });\n    \n    if (onPageChange) {\n      onPageChange(1);\n    }\n  }, [onPageChange, updateURL]);\n\n  // Handle row selection\n  const handleSelectAll = useCallback((checked: boolean) => {\n    if (checked) {\n      const allIds = data.map(row => String(row[idField]));\n      setSelectedIds(allIds);\n      if (onSelectionChange) {\n        onSelectionChange(allIds);\n      }\n    } else {\n      setSelectedIds([]);\n      if (onSelectionChange) {\n        onSelectionChange([]);\n      }\n    }\n  }, [data, idField, onSelectionChange]);\n\n  const handleSelectRow = useCallback((id: string, checked: boolean) => {\n    const newSelectedIds = checked\n      ? [...selectedIds, id]\n      : selectedIds.filter(selectedId => selectedId !== id);\n    \n    setSelectedIds(newSelectedIds);\n    if (onSelectionChange) {\n      onSelectionChange(newSelectedIds);\n    }\n  }, [selectedIds, onSelectionChange]);\n\n  // Handle bulk delete with progress indication\n  const handleBulkDelete = useCallback(async () => {\n    if (!onBulkDelete || selectedIds.length === 0) return;\n    \n    setIsBulkOperationInProgress(true);\n    try {\n      await onBulkDelete(selectedIds);\n      // Clear selection after successful delete\n      setSelectedIds([]);\n      if (onSelectionChange) {\n        onSelectionChange([]);\n      }\n    } finally {\n      setIsBulkOperationInProgress(false);\n    }\n  }, [onBulkDelete, selectedIds, onSelectionChange]);\n\n  // Handle CSV export\n  const handleExport = useCallback(() => {\n    if (onBulkExport) {\n      onBulkExport();\n    } else {\n      // Default export behavior - export current filtered data\n      exportToCSV(data, columns, entityType);\n    }\n  }, [onBulkExport, data, columns, entityType]);\n\n  // Calculate pagination\n  const totalPages = totalCount ? Math.ceil(totalCount / localPageSize) : Math.ceil(data.length / localPageSize);\n  const hasActiveFilters = Object.keys(filters).length > 0 || searchQuery !== '';\n\n  // Render loading skeleton\n  if (loading) {\n    return <TableSkeleton rows={pageSize} columns={columns.length} />;\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Search and Filters */}\n      <div className=\"flex flex-col gap-4\">\n        {/* Search */}\n        {onSearch && (\n          <div className=\"w-full\">\n            <label htmlFor=\"table-search\" className=\"sr-only\">Search {entityType}</label>\n            <input\n              id=\"table-search\"\n              type=\"search\"\n              placeholder=\"Search...\"\n              value={searchQuery}\n              onChange={(e) => handleSearch(e.target.value)}\n              className=\"w-full px-4 py-3 md:py-2 text-base md:text-sm border border-sage-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-jungle-500 min-h-[44px]\"\n              aria-label={`Search ${entityType}`}\n            />\n          </div>\n        )}\n\n        {/* Filter Controls and Export */}\n        <div className=\"flex flex-col md:flex-row gap-3 md:gap-2\">\n          {/* Filter Controls */}\n          {columns.some(col => col.filterable) && (\n            <div className=\"flex flex-col md:flex-row flex-wrap gap-2 flex-1\" role=\"group\" aria-label=\"Filter controls\">\n              {columns.filter(col => col.filterable).map(col => (\n                <div key={String(col.key)} className=\"w-full md:min-w-[150px] md:w-auto\">\n                  {col.filterType === 'select' && col.filterOptions ? (\n                    <>\n                      <label htmlFor={`filter-${String(col.key)}`} className=\"sr-only\">\n                        Filter by {col.label}\n                      </label>\n                      <select\n                        id={`filter-${String(col.key)}`}\n                        value={filters[String(col.key)] || ''}\n                        onChange={(e) => handleFilterChange(String(col.key), e.target.value)}\n                        className=\"w-full px-3 py-3 md:py-2 border border-sage-300 rounded-lg text-base md:text-sm focus:outline-none focus:ring-2 focus:ring-jungle-500 min-h-[44px]\"\n                        aria-label={`Filter by ${col.label}`}\n                      >\n                        <option value=\"\">All {col.label}</option>\n                        {col.filterOptions.map(opt => (\n                          <option key={opt.value} value={opt.value}>\n                            {opt.label}\n                          </option>\n                        ))}\n                      </select>\n                    </>\n                  ) : (\n                    <>\n                      <label htmlFor={`filter-${String(col.key)}`} className=\"sr-only\">\n                        Filter by {col.label}\n                      </label>\n                      <input\n                        id={`filter-${String(col.key)}`}\n                        type=\"text\"\n                        placeholder={`Filter ${col.label}`}\n                        value={filters[String(col.key)] || ''}\n                        onChange={(e) => handleFilterChange(String(col.key), e.target.value)}\n                        className=\"w-full px-3 py-3 md:py-2 border border-sage-300 rounded-lg text-base md:text-sm focus:outline-none focus:ring-2 focus:ring-jungle-500 min-h-[44px]\"\n                        aria-label={`Filter by ${col.label}`}\n                      />\n                    </>\n                  )}\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/* Export Button */}\n          <div className=\"w-full md:w-auto\">\n            <Button\n              variant=\"secondary\"\n              size=\"md\"\n              onClick={handleExport}\n              className=\"w-full md:w-auto\"\n              aria-label={`Export ${entityType} to CSV`}\n            >\n              Export\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {/* Active Filter Chips */}\n      {hasActiveFilters && (\n        <div className=\"flex flex-wrap gap-2 items-center\">\n          <span className=\"text-sm text-sage-600\">Active filters:</span>\n          {searchQuery && (\n            <div className=\"flex items-center gap-1 px-3 py-1 bg-ocean-100 text-ocean-800 rounded-full text-sm\">\n              <span>Search: {searchQuery}</span>\n              <button\n                onClick={() => handleSearch('')}\n                className=\"hover:text-ocean-900\"\n                aria-label=\"Remove search filter\"\n              >\n                ×\n              </button>\n            </div>\n          )}\n          {Object.entries(filters).map(([key, value]) => {\n            const column = columns.find(col => String(col.key) === key);\n            const label = column?.filterOptions?.find(opt => opt.value === value)?.label || value;\n            return (\n              <div key={key} className=\"flex items-center gap-1 px-3 py-1 bg-ocean-100 text-ocean-800 rounded-full text-sm\">\n                <span>{column?.label}: {label}</span>\n                <button\n                  onClick={() => handleFilterChange(key, null)}\n                  className=\"hover:text-ocean-900\"\n                  aria-label={`Remove ${column?.label} filter`}\n                >\n                  ×\n                </button>\n              </div>\n            );\n          })}\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={handleClearFilters}\n          >\n            Clear All\n          </Button>\n        </div>\n      )}\n\n      {/* Bulk Action Toolbar */}\n      {selectable && selectedIds.length > 0 && (\n        <div \n          className=\"bg-jungle-50 border border-jungle-200 rounded-lg px-6 py-4 flex flex-col md:flex-row items-center justify-between gap-4\"\n          role=\"region\"\n          aria-label=\"Bulk actions\"\n        >\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-sm font-medium text-jungle-900\" aria-live=\"polite\">\n              {selectedIds.length} {selectedIds.length === 1 ? 'item' : entityType} selected\n            </span>\n            {isBulkOperationInProgress && (\n              <div className=\"flex items-center gap-2 text-sm text-jungle-700\" role=\"status\" aria-live=\"polite\">\n                <div \n                  className=\"animate-spin h-4 w-4 border-2 border-jungle-500 border-t-transparent rounded-full\"\n                  aria-hidden=\"true\"\n                ></div>\n                <span>Processing...</span>\n              </div>\n            )}\n          </div>\n          <div className=\"flex flex-wrap gap-2\" role=\"group\" aria-label=\"Bulk action buttons\">\n            {showBulkEmail && onBulkEmail && (\n              <Button\n                variant=\"secondary\"\n                size=\"sm\"\n                onClick={() => onBulkEmail(selectedIds)}\n                disabled={isBulkOperationInProgress}\n                aria-label={`Send email to ${selectedIds.length} selected ${entityType}`}\n              >\n                Send Email\n              </Button>\n            )}\n            {onBulkExport && (\n              <Button\n                variant=\"secondary\"\n                size=\"sm\"\n                onClick={handleExport}\n                disabled={isBulkOperationInProgress}\n                aria-label={`Export ${selectedIds.length} selected ${entityType}`}\n              >\n                Export\n              </Button>\n            )}\n            {onBulkDelete && (\n              <Button\n                variant=\"danger\"\n                size=\"sm\"\n                onClick={handleBulkDelete}\n                disabled={isBulkOperationInProgress}\n                aria-label={`Delete ${selectedIds.length} selected ${entityType}`}\n              >\n                {isBulkOperationInProgress ? 'Deleting...' : 'Delete Selected'}\n              </Button>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Table */}\n      <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n        {/* Desktop Table View */}\n        <div className=\"hidden md:block overflow-x-auto\">\n          <table className=\"w-full\" role=\"table\" aria-label={`${entityType} data table`}>\n            <thead className=\"bg-sage-50 border-b border-sage-200\">\n              <tr>\n                {selectable && (\n                  <th className=\"px-6 py-3 text-left\" scope=\"col\">\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedIds.length === data.length && data.length > 0}\n                      onChange={(e) => handleSelectAll(e.target.checked)}\n                      className=\"rounded border-sage-300 text-jungle-500 focus:ring-jungle-500\"\n                      aria-label=\"Select all rows\"\n                    />\n                  </th>\n                )}\n                {columns.map(col => (\n                  <th\n                    key={String(col.key)}\n                    scope=\"col\"\n                    className={`px-6 py-3 text-left text-xs font-medium text-sage-700 uppercase tracking-wider ${\n                      col.sortable ? 'cursor-pointer hover:bg-sage-100' : ''\n                    }`}\n                    onClick={() => col.sortable && handleSort(String(col.key))}\n                    style={{ width: col.width }}\n                    aria-sort={\n                      col.sortable && sortColumn === String(col.key)\n                        ? sortDirection === 'asc'\n                          ? 'ascending'\n                          : 'descending'\n                        : undefined\n                    }\n                  >\n                    <div className=\"flex items-center gap-2\">\n                      <span>{col.label}</span>\n                      {col.sortable && sortColumn === String(col.key) && (\n                        <span className=\"text-jungle-500\" aria-hidden=\"true\">\n                          {sortDirection === 'asc' ? '↑' : '↓'}\n                        </span>\n                      )}\n                    </div>\n                  </th>\n                ))}\n                {onDelete && (\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-sage-700 uppercase tracking-wider\" scope=\"col\">\n                    Actions\n                  </th>\n                )}\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-sage-100\">\n              {data.length === 0 ? (\n                <tr>\n                  <td\n                    colSpan={columns.length + (selectable ? 1 : 0) + (onDelete ? 1 : 0)}\n                    className=\"px-6 py-8 text-center text-sage-500\"\n                  >\n                    No {entityType} found\n                  </td>\n                </tr>\n              ) : (\n                data.map((row, rowIndex) => {\n                  const rowId = String(row[idField]);\n                  const isSelected = selectedIds.includes(rowId);\n                  const customClassName = rowClassName ? rowClassName(row) : '';\n                  \n                  return (\n                    <tr\n                      key={rowId || rowIndex}\n                      className={`hover:bg-sage-50 transition-colors ${\n                        onRowClick ? 'cursor-pointer' : ''\n                      } ${isSelected ? 'bg-jungle-50' : ''} ${customClassName}`}\n                      onClick={() => onRowClick && onRowClick(row)}\n                      aria-selected={isSelected}\n                    >\n                      {selectable && (\n                        <td className=\"px-6 py-4\" onClick={(e) => e.stopPropagation()}>\n                          <input\n                            type=\"checkbox\"\n                            checked={isSelected}\n                            onChange={(e) => handleSelectRow(rowId, e.target.checked)}\n                            className=\"rounded border-sage-300 text-jungle-500 focus:ring-jungle-500\"\n                            aria-label={`Select row ${rowIndex + 1}`}\n                          />\n                        </td>\n                      )}\n                      {columns.map(col => (\n                        <td\n                          key={String(col.key)}\n                          className=\"px-6 py-4 text-sm text-sage-900\"\n                        >\n                          {col.render\n                            ? col.render(row[col.key as keyof T], row)\n                            : String(row[col.key as keyof T] ?? '')}\n                        </td>\n                      ))}\n                      {onDelete && (\n                        <td className=\"px-6 py-4 text-sm\" onClick={(e) => e.stopPropagation()}>\n                          <Button\n                            variant=\"danger\"\n                            size=\"sm\"\n                            onClick={() => onDelete(row)}\n                            aria-label={`Delete ${entityType.slice(0, -1)} ${rowIndex + 1}`}\n                          >\n                            Delete\n                          </Button>\n                        </td>\n                      )}\n                    </tr>\n                  );\n                })\n              )}\n            </tbody>\n          </table>\n        </div>\n\n        {/* Mobile Card View */}\n        <div className=\"md:hidden divide-y divide-sage-100\">\n          {data.length === 0 ? (\n            <div className=\"px-4 py-8 text-center text-sage-500\">\n              No {entityType} found\n            </div>\n          ) : (\n            data.map((row, rowIndex) => {\n              const rowId = String(row[idField]);\n              const isSelected = selectedIds.includes(rowId);\n              const customClassName = rowClassName ? rowClassName(row) : '';\n              \n              return (\n                <div\n                  key={rowId || rowIndex}\n                  className={`p-4 ${\n                    onRowClick ? 'cursor-pointer active:bg-sage-100' : ''\n                  } ${isSelected ? 'bg-jungle-50' : ''} ${customClassName}`}\n                  onClick={() => onRowClick && onRowClick(row)}\n                  role=\"button\"\n                  tabIndex={0}\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' || e.key === ' ') {\n                      e.preventDefault();\n                      onRowClick && onRowClick(row);\n                    }\n                  }}\n                  aria-label={`${entityType.slice(0, -1)} ${rowIndex + 1}`}\n                >\n                  {/* Selection checkbox */}\n                  {selectable && (\n                    <div className=\"mb-3 flex items-center\" onClick={(e) => e.stopPropagation()}>\n                      <input\n                        type=\"checkbox\"\n                        checked={isSelected}\n                        onChange={(e) => handleSelectRow(rowId, e.target.checked)}\n                        className=\"h-5 w-5 rounded border-sage-300 text-jungle-500 focus:ring-jungle-500\"\n                        aria-label={`Select ${entityType.slice(0, -1)} ${rowIndex + 1}`}\n                      />\n                      <span className=\"ml-2 text-sm text-sage-600\">Select</span>\n                    </div>\n                  )}\n                  \n                  {/* Stacked columns */}\n                  <div className=\"space-y-2\">\n                    {columns.filter(col => !col.mobileHidden).map(col => (\n                      <div key={String(col.key)} className=\"flex flex-col\">\n                        <span className=\"text-xs font-medium text-sage-600 uppercase tracking-wider\">\n                          {col.label}\n                        </span>\n                        <span className=\"mt-1 text-sm text-sage-900\">\n                          {col.render\n                            ? col.render(row[col.key as keyof T], row)\n                            : String(row[col.key as keyof T] ?? '')}\n                        </span>\n                      </div>\n                    ))}\n                  </div>\n                  \n                  {/* Actions */}\n                  {onDelete && (\n                    <div className=\"mt-3 pt-3 border-t border-sage-200\" onClick={(e) => e.stopPropagation()}>\n                      <Button\n                        variant=\"danger\"\n                        size=\"sm\"\n                        onClick={() => onDelete(row)}\n                        className=\"w-full min-h-[44px]\"\n                        aria-label={`Delete ${entityType.slice(0, -1)} ${rowIndex + 1}`}\n                      >\n                        Delete\n                      </Button>\n                    </div>\n                  )}\n                </div>\n              );\n            })\n          )}\n        </div>\n\n        {/* Pagination */}\n        {totalPages > 1 && (\n          <div \n            className=\"px-4 md:px-6 py-4 border-t border-sage-200 flex flex-col md:flex-row items-stretch md:items-center justify-between gap-4\"\n            role=\"navigation\"\n            aria-label=\"Pagination\"\n          >\n            <div className=\"flex items-center justify-center md:justify-start gap-2\">\n              <label htmlFor=\"page-size-select\" className=\"text-sm text-sage-600\">Rows per page:</label>\n              <select\n                id=\"page-size-select\"\n                value={localPageSize}\n                onChange={(e) => handlePageSizeChange(Number(e.target.value))}\n                className=\"px-3 py-2 border border-sage-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-jungle-500 min-h-[44px]\"\n                aria-label=\"Select number of rows per page\"\n              >\n                <option value={25}>25</option>\n                <option value={50}>50</option>\n                <option value={100}>100</option>\n              </select>\n            </div>\n\n            <div className=\"flex flex-col md:flex-row items-center gap-3\">\n              <span className=\"text-sm text-sage-600 text-center\" aria-live=\"polite\" aria-atomic=\"true\">\n                Page {localPage} of {totalPages}\n              </span>\n              <div className=\"flex gap-2 w-full md:w-auto\">\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => handlePageChange(localPage - 1)}\n                  disabled={localPage === 1}\n                  className=\"flex-1 md:flex-none\"\n                  aria-label=\"Go to previous page\"\n                >\n                  Previous\n                </Button>\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => handlePageChange(localPage + 1)}\n                  disabled={localPage === totalPages}\n                  className=\"flex-1 md:flex-none\"\n                  aria-label=\"Go to next page\"\n                >\n                  Next\n                </Button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["DataTable","data","columns","onSort","onFilter","onSearch","onPageChange","onRowClick","onDelete","loading","totalCount","currentPage","pageSize","selectable","onSelectionChange","idField","rowClassName","onBulkDelete","onBulkExport","onBulkEmail","entityType","showBulkEmail","router","useRouter","searchParams","useSearchParams","sortColumn","setSortColumn","useState","sortDirection","setSortDirection","filters","setFilters","searchQuery","setSearchQuery","searchDebounce","setSearchDebounce","selectedIds","setSelectedIds","localPageSize","setLocalPageSize","localPage","setLocalPage","isBulkOperationInProgress","setIsBulkOperationInProgress","useEffect","urlSort","get","urlDirection","urlSearch","urlPage","urlPageSize","parseInt","urlFilters","forEach","col","filterable","filterValue","String","key","Object","keys","length","updateURL","useCallback","updates","params","URLSearchParams","toString","entries","value","delete","set","push","scroll","handleSort","column","newDirection","sort","direction","handleFilterChange","newFilters","handleSearch","query","clearTimeout","timeout","setTimeout","search","handleClearFilters","handlePageChange","page","handlePageSizeChange","size","handleSelectAll","checked","allIds","map","row","handleSelectRow","id","newSelectedIds","filter","selectedId","handleBulkDelete","handleExport","exportToCSV","totalPages","Math","ceil","hasActiveFilters","TableSkeleton","rows","div","className","label","htmlFor","input","type","placeholder","onChange","e","target","aria-label","some","role","filterType","filterOptions","select","option","opt","Button","variant","onClick","span","button","find","aria-live","aria-hidden","disabled","table","thead","tr","th","scope","sortable","style","width","aria-sort","undefined","tbody","td","colSpan","rowIndex","rowId","isSelected","includes","customClassName","aria-selected","stopPropagation","render","slice","tabIndex","onKeyDown","preventDefault","mobileHidden","Number","aria-atomic"],"mappings":"AAAA;;;;;+BAwDgBA;;;eAAAA;;;;uBAtD0C;4BACf;wBACpB;2BACK;iCACE;AAkDvB,SAASA,UAAyC,EACvDC,IAAI,EACJC,OAAO,EACPC,MAAM,EACNC,QAAQ,EACRC,QAAQ,EACRC,YAAY,EACZC,UAAU,EACVC,QAAQ,EACRC,UAAU,KAAK,EACfC,UAAU,EACVC,cAAc,CAAC,EACfC,WAAW,EAAE,EACbC,aAAa,KAAK,EAClBC,iBAAiB,EACjBC,UAAU,IAAe,EACzBC,YAAY,EACZC,YAAY,EACZC,YAAY,EACZC,WAAW,EACXC,aAAa,OAAO,EACpBC,gBAAgB,KAAK,EACH;IAClB,MAAMC,SAASC,IAAAA,qBAAS;IACxB,MAAMC,eAAeC,IAAAA,2BAAe;IAEpC,mBAAmB;IACnB,MAAM,CAACC,YAAYC,cAAc,GAAGC,IAAAA,eAAQ,EAAgB;IAC5D,MAAM,CAACC,eAAeC,iBAAiB,GAAGF,IAAAA,eAAQ,EAAiB;IACnE,MAAM,CAACG,SAASC,WAAW,GAAGJ,IAAAA,eAAQ,EAAsB,CAAC;IAC7D,MAAM,CAACK,aAAaC,eAAe,GAAGN,IAAAA,eAAQ,EAAC;IAC/C,MAAM,CAACO,gBAAgBC,kBAAkB,GAAGR,IAAAA,eAAQ,EAAwB;IAC5E,MAAM,CAACS,aAAaC,eAAe,GAAGV,IAAAA,eAAQ,EAAW,EAAE;IAC3D,MAAM,CAACW,eAAeC,iBAAiB,GAAGZ,IAAAA,eAAQ,EAAChB;IACnD,MAAM,CAAC6B,WAAWC,aAAa,GAAGd,IAAAA,eAAQ,EAACjB;IAC3C,MAAM,CAACgC,2BAA2BC,6BAA6B,GAAGhB,IAAAA,eAAQ,EAAC;IAE3E,qCAAqC;IACrCiB,IAAAA,gBAAS,EAAC;QACR,MAAMC,UAAUtB,aAAauB,GAAG,CAAC;QACjC,MAAMC,eAAexB,aAAauB,GAAG,CAAC;QACtC,MAAME,YAAYzB,aAAauB,GAAG,CAAC;QACnC,MAAMG,UAAU1B,aAAauB,GAAG,CAAC;QACjC,MAAMI,cAAc3B,aAAauB,GAAG,CAAC;QAErC,IAAID,SAASnB,cAAcmB;QAC3B,IAAIE,cAAclB,iBAAiBkB;QACnC,IAAIC,WAAWf,eAAee;QAC9B,IAAIC,SAASR,aAAaU,SAASF;QACnC,IAAIC,aAAaX,iBAAiBY,SAASD;QAE3C,2BAA2B;QAC3B,MAAME,aAAkC,CAAC;QACzCnD,QAAQoD,OAAO,CAACC,CAAAA;YACd,IAAIA,IAAIC,UAAU,EAAE;gBAClB,MAAMC,cAAcjC,aAAauB,GAAG,CAAC,CAAC,OAAO,EAAEW,OAAOH,IAAII,GAAG,GAAG;gBAChE,IAAIF,aAAa;oBACfJ,UAAU,CAACK,OAAOH,IAAII,GAAG,EAAE,GAAGF;gBAChC;YACF;QACF;QACA,IAAIG,OAAOC,IAAI,CAACR,YAAYS,MAAM,GAAG,GAAG;YACtC9B,WAAWqB;QACb;IACF,GAAG,EAAE;IAEL,gCAAgC;IAChC,MAAMU,YAAYC,IAAAA,kBAAW,EAAC,CAACC;QAC7B,MAAMC,SAAS,IAAIC,gBAAgB3C,aAAa4C,QAAQ;QAExDR,OAAOS,OAAO,CAACJ,SAASX,OAAO,CAAC,CAAC,CAACK,KAAKW,MAAM;YAC3C,IAAIA,UAAU,QAAQA,UAAU,IAAI;gBAClCJ,OAAOK,MAAM,CAACZ;YAChB,OAAO;gBACLO,OAAOM,GAAG,CAACb,KAAKW;YAClB;QACF;QAEAhD,OAAOmD,IAAI,CAAC,CAAC,CAAC,EAAEP,OAAOE,QAAQ,IAAI,EAAE;YAAEM,QAAQ;QAAM;IACvD,GAAG;QAAClD;QAAcF;KAAO;IAEzB,cAAc;IACd,MAAMqD,aAAaX,IAAAA,kBAAW,EAAC,CAACY;QAC9B,MAAMC,eAAenD,eAAekD,UAAU/C,kBAAkB,QAAQ,SAAS;QACjFF,cAAciD;QACd9C,iBAAiB+C;QAEjBd,UAAU;YACRe,MAAMF;YACNG,WAAWF;QACb;QAEA,IAAI1E,QAAQ;YACVA,OAAOyE,QAAQC;QACjB;IACF,GAAG;QAACnD;QAAYG;QAAe1B;QAAQ4D;KAAU;IAEjD,uBAAuB;IACvB,MAAMiB,qBAAqBhB,IAAAA,kBAAW,EAAC,CAACY,QAAgBN;QACtD,MAAMW,aAAa;YAAE,GAAGlD,OAAO;QAAC;QAEhC,IAAIuC,UAAU,MAAMA,UAAU,MAAM;YAClC,OAAOW,UAAU,CAACL,OAAO;QAC3B,OAAO;YACLK,UAAU,CAACL,OAAO,GAAGN;QACvB;QAEAtC,WAAWiD;QAEX,yBAAyB;QACzBlB,UAAU;YACR,CAAC,CAAC,OAAO,EAAEa,QAAQ,CAAC,EAAEN,SAAS;QACjC;QAEA,IAAIlE,UAAU;YACZA,SAAS6E;QACX;IACF,GAAG;QAAClD;QAAS3B;QAAU2D;KAAU;IAEjC,8BAA8B;IAC9B,MAAMmB,eAAelB,IAAAA,kBAAW,EAAC,CAACmB;QAChCjD,eAAeiD;QAEf,IAAIhD,gBAAgB;YAClBiD,aAAajD;QACf;QAEA,MAAMkD,UAAUC,WAAW;YACzBvB,UAAU;gBAAEwB,QAAQJ,SAAS;YAAK;YAElC,IAAI9E,UAAU;gBACZA,SAAS8E;YACX;QACF,GAAG;QAEH/C,kBAAkBiD;IACpB,GAAG;QAAClD;QAAgB9B;QAAU0D;KAAU;IAExC,oBAAoB;IACpB,MAAMyB,qBAAqBxB,IAAAA,kBAAW,EAAC;QACrChC,WAAW,CAAC;QACZE,eAAe;QAEf,mCAAmC;QACnC,MAAM+B,UAAgC;YAAEsB,QAAQ;QAAK;QACrDrF,QAAQoD,OAAO,CAACC,CAAAA;YACd,IAAIA,IAAIC,UAAU,EAAE;gBAClBS,OAAO,CAAC,CAAC,OAAO,EAAEP,OAAOH,IAAII,GAAG,GAAG,CAAC,GAAG;YACzC;QACF;QACAI,UAAUE;QAEV,IAAI7D,UAAU;YACZA,SAAS,CAAC;QACZ;QACA,IAAIC,UAAU;YACZA,SAAS;QACX;IACF,GAAG;QAACH;QAASE;QAAUC;QAAU0D;KAAU;IAE3C,oBAAoB;IACpB,MAAM0B,mBAAmBzB,IAAAA,kBAAW,EAAC,CAAC0B;QACpChD,aAAagD;QACb3B,UAAU;YAAE2B,MAAMA,KAAKtB,QAAQ;QAAG;QAElC,IAAI9D,cAAc;YAChBA,aAAaoF;QACf;IACF,GAAG;QAACpF;QAAcyD;KAAU;IAE5B,MAAM4B,uBAAuB3B,IAAAA,kBAAW,EAAC,CAAC4B;QACxCpD,iBAAiBoD;QACjBlD,aAAa;QACbqB,UAAU;YACRnD,UAAUgF,KAAKxB,QAAQ;YACvBsB,MAAM;QACR;QAEA,IAAIpF,cAAc;YAChBA,aAAa;QACf;IACF,GAAG;QAACA;QAAcyD;KAAU;IAE5B,uBAAuB;IACvB,MAAM8B,kBAAkB7B,IAAAA,kBAAW,EAAC,CAAC8B;QACnC,IAAIA,SAAS;YACX,MAAMC,SAAS9F,KAAK+F,GAAG,CAACC,CAAAA,MAAOvC,OAAOuC,GAAG,CAAClF,QAAQ;YAClDuB,eAAeyD;YACf,IAAIjF,mBAAmB;gBACrBA,kBAAkBiF;YACpB;QACF,OAAO;YACLzD,eAAe,EAAE;YACjB,IAAIxB,mBAAmB;gBACrBA,kBAAkB,EAAE;YACtB;QACF;IACF,GAAG;QAACb;QAAMc;QAASD;KAAkB;IAErC,MAAMoF,kBAAkBlC,IAAAA,kBAAW,EAAC,CAACmC,IAAYL;QAC/C,MAAMM,iBAAiBN,UACnB;eAAIzD;YAAa8D;SAAG,GACpB9D,YAAYgE,MAAM,CAACC,CAAAA,aAAcA,eAAeH;QAEpD7D,eAAe8D;QACf,IAAItF,mBAAmB;YACrBA,kBAAkBsF;QACpB;IACF,GAAG;QAAC/D;QAAavB;KAAkB;IAEnC,8CAA8C;IAC9C,MAAMyF,mBAAmBvC,IAAAA,kBAAW,EAAC;QACnC,IAAI,CAAC/C,gBAAgBoB,YAAYyB,MAAM,KAAK,GAAG;QAE/ClB,6BAA6B;QAC7B,IAAI;YACF,MAAM3B,aAAaoB;YACnB,0CAA0C;YAC1CC,eAAe,EAAE;YACjB,IAAIxB,mBAAmB;gBACrBA,kBAAkB,EAAE;YACtB;QACF,SAAU;YACR8B,6BAA6B;QAC/B;IACF,GAAG;QAAC3B;QAAcoB;QAAavB;KAAkB;IAEjD,oBAAoB;IACpB,MAAM0F,eAAexC,IAAAA,kBAAW,EAAC;QAC/B,IAAI9C,cAAc;YAChBA;QACF,OAAO;YACL,yDAAyD;YACzDuF,IAAAA,sBAAW,EAACxG,MAAMC,SAASkB;QAC7B;IACF,GAAG;QAACF;QAAcjB;QAAMC;QAASkB;KAAW;IAE5C,uBAAuB;IACvB,MAAMsF,aAAahG,aAAaiG,KAAKC,IAAI,CAAClG,aAAa6B,iBAAiBoE,KAAKC,IAAI,CAAC3G,KAAK6D,MAAM,GAAGvB;IAChG,MAAMsE,mBAAmBjD,OAAOC,IAAI,CAAC9B,SAAS+B,MAAM,GAAG,KAAK7B,gBAAgB;IAE5E,0BAA0B;IAC1B,IAAIxB,SAAS;QACX,qBAAO,qBAACqG,8BAAa;YAACC,MAAMnG;YAAUV,SAASA,QAAQ4D,MAAM;;IAC/D;IAEA,qBACE,sBAACkD;QAAIC,WAAU;;0BAEb,sBAACD;gBAAIC,WAAU;;oBAEZ5G,0BACC,sBAAC2G;wBAAIC,WAAU;;0CACb,sBAACC;gCAAMC,SAAQ;gCAAeF,WAAU;;oCAAU;oCAAQ7F;;;0CAC1D,qBAACgG;gCACCjB,IAAG;gCACHkB,MAAK;gCACLC,aAAY;gCACZhD,OAAOrC;gCACPsF,UAAU,CAACC,IAAMtC,aAAasC,EAAEC,MAAM,CAACnD,KAAK;gCAC5C2C,WAAU;gCACVS,cAAY,CAAC,OAAO,EAAEtG,YAAY;;;;kCAMxC,sBAAC4F;wBAAIC,WAAU;;4BAEZ/G,QAAQyH,IAAI,CAACpE,CAAAA,MAAOA,IAAIC,UAAU,mBACjC,qBAACwD;gCAAIC,WAAU;gCAAmDW,MAAK;gCAAQF,cAAW;0CACvFxH,QAAQmG,MAAM,CAAC9C,CAAAA,MAAOA,IAAIC,UAAU,EAAEwC,GAAG,CAACzC,CAAAA,oBACzC,qBAACyD;wCAA0BC,WAAU;kDAClC1D,IAAIsE,UAAU,KAAK,YAAYtE,IAAIuE,aAAa,iBAC/C;;8DACE,sBAACZ;oDAAMC,SAAS,CAAC,OAAO,EAAEzD,OAAOH,IAAII,GAAG,GAAG;oDAAEsD,WAAU;;wDAAU;wDACpD1D,IAAI2D,KAAK;;;8DAEtB,sBAACa;oDACC5B,IAAI,CAAC,OAAO,EAAEzC,OAAOH,IAAII,GAAG,GAAG;oDAC/BW,OAAOvC,OAAO,CAAC2B,OAAOH,IAAII,GAAG,EAAE,IAAI;oDACnC4D,UAAU,CAACC,IAAMxC,mBAAmBtB,OAAOH,IAAII,GAAG,GAAG6D,EAAEC,MAAM,CAACnD,KAAK;oDACnE2C,WAAU;oDACVS,cAAY,CAAC,UAAU,EAAEnE,IAAI2D,KAAK,EAAE;;sEAEpC,sBAACc;4DAAO1D,OAAM;;gEAAG;gEAAKf,IAAI2D,KAAK;;;wDAC9B3D,IAAIuE,aAAa,CAAC9B,GAAG,CAACiC,CAAAA,oBACrB,qBAACD;gEAAuB1D,OAAO2D,IAAI3D,KAAK;0EACrC2D,IAAIf,KAAK;+DADCe,IAAI3D,KAAK;;;;2DAO5B;;8DACE,sBAAC4C;oDAAMC,SAAS,CAAC,OAAO,EAAEzD,OAAOH,IAAII,GAAG,GAAG;oDAAEsD,WAAU;;wDAAU;wDACpD1D,IAAI2D,KAAK;;;8DAEtB,qBAACE;oDACCjB,IAAI,CAAC,OAAO,EAAEzC,OAAOH,IAAII,GAAG,GAAG;oDAC/B0D,MAAK;oDACLC,aAAa,CAAC,OAAO,EAAE/D,IAAI2D,KAAK,EAAE;oDAClC5C,OAAOvC,OAAO,CAAC2B,OAAOH,IAAII,GAAG,EAAE,IAAI;oDACnC4D,UAAU,CAACC,IAAMxC,mBAAmBtB,OAAOH,IAAII,GAAG,GAAG6D,EAAEC,MAAM,CAACnD,KAAK;oDACnE2C,WAAU;oDACVS,cAAY,CAAC,UAAU,EAAEnE,IAAI2D,KAAK,EAAE;;;;uCAjClCxD,OAAOH,IAAII,GAAG;;0CA2C9B,qBAACqD;gCAAIC,WAAU;0CACb,cAAA,qBAACiB,cAAM;oCACLC,SAAQ;oCACRvC,MAAK;oCACLwC,SAAS5B;oCACTS,WAAU;oCACVS,cAAY,CAAC,OAAO,EAAEtG,WAAW,OAAO,CAAC;8CAC1C;;;;;;;YAQNyF,kCACC,sBAACG;gBAAIC,WAAU;;kCACb,qBAACoB;wBAAKpB,WAAU;kCAAwB;;oBACvChF,6BACC,sBAAC+E;wBAAIC,WAAU;;0CACb,sBAACoB;;oCAAK;oCAASpG;;;0CACf,qBAACqG;gCACCF,SAAS,IAAMlD,aAAa;gCAC5B+B,WAAU;gCACVS,cAAW;0CACZ;;;;oBAKJ9D,OAAOS,OAAO,CAACtC,SAASiE,GAAG,CAAC,CAAC,CAACrC,KAAKW,MAAM;wBACxC,MAAMM,SAAS1E,QAAQqI,IAAI,CAAChF,CAAAA,MAAOG,OAAOH,IAAII,GAAG,MAAMA;wBACvD,MAAMuD,QAAQtC,QAAQkD,eAAeS,KAAKN,CAAAA,MAAOA,IAAI3D,KAAK,KAAKA,QAAQ4C,SAAS5C;wBAChF,qBACE,sBAAC0C;4BAAcC,WAAU;;8CACvB,sBAACoB;;wCAAMzD,QAAQsC;wCAAM;wCAAGA;;;8CACxB,qBAACoB;oCACCF,SAAS,IAAMpD,mBAAmBrB,KAAK;oCACvCsD,WAAU;oCACVS,cAAY,CAAC,OAAO,EAAE9C,QAAQsC,MAAM,OAAO,CAAC;8CAC7C;;;2BANOvD;oBAWd;kCACA,qBAACuE,cAAM;wBACLC,SAAQ;wBACRvC,MAAK;wBACLwC,SAAS5C;kCACV;;;;YAOJ3E,cAAcwB,YAAYyB,MAAM,GAAG,mBAClC,sBAACkD;gBACCC,WAAU;gBACVW,MAAK;gBACLF,cAAW;;kCAEX,sBAACV;wBAAIC,WAAU;;0CACb,sBAACoB;gCAAKpB,WAAU;gCAAsCuB,aAAU;;oCAC7DnG,YAAYyB,MAAM;oCAAC;oCAAEzB,YAAYyB,MAAM,KAAK,IAAI,SAAS1C;oCAAW;;;4BAEtEuB,2CACC,sBAACqE;gCAAIC,WAAU;gCAAkDW,MAAK;gCAASY,aAAU;;kDACvF,qBAACxB;wCACCC,WAAU;wCACVwB,eAAY;;kDAEd,qBAACJ;kDAAK;;;;;;kCAIZ,sBAACrB;wBAAIC,WAAU;wBAAuBW,MAAK;wBAAQF,cAAW;;4BAC3DrG,iBAAiBF,6BAChB,qBAAC+G,cAAM;gCACLC,SAAQ;gCACRvC,MAAK;gCACLwC,SAAS,IAAMjH,YAAYkB;gCAC3BqG,UAAU/F;gCACV+E,cAAY,CAAC,cAAc,EAAErF,YAAYyB,MAAM,CAAC,UAAU,EAAE1C,YAAY;0CACzE;;4BAIFF,8BACC,qBAACgH,cAAM;gCACLC,SAAQ;gCACRvC,MAAK;gCACLwC,SAAS5B;gCACTkC,UAAU/F;gCACV+E,cAAY,CAAC,OAAO,EAAErF,YAAYyB,MAAM,CAAC,UAAU,EAAE1C,YAAY;0CAClE;;4BAIFH,8BACC,qBAACiH,cAAM;gCACLC,SAAQ;gCACRvC,MAAK;gCACLwC,SAAS7B;gCACTmC,UAAU/F;gCACV+E,cAAY,CAAC,OAAO,EAAErF,YAAYyB,MAAM,CAAC,UAAU,EAAE1C,YAAY;0CAEhEuB,4BAA4B,gBAAgB;;;;;;0BAQvD,sBAACqE;gBAAIC,WAAU;;kCAEb,qBAACD;wBAAIC,WAAU;kCACb,cAAA,sBAAC0B;4BAAM1B,WAAU;4BAASW,MAAK;4BAAQF,cAAY,GAAGtG,WAAW,WAAW,CAAC;;8CAC3E,qBAACwH;oCAAM3B,WAAU;8CACf,cAAA,sBAAC4B;;4CACEhI,4BACC,qBAACiI;gDAAG7B,WAAU;gDAAsB8B,OAAM;0DACxC,cAAA,qBAAC3B;oDACCC,MAAK;oDACLvB,SAASzD,YAAYyB,MAAM,KAAK7D,KAAK6D,MAAM,IAAI7D,KAAK6D,MAAM,GAAG;oDAC7DyD,UAAU,CAACC,IAAM3B,gBAAgB2B,EAAEC,MAAM,CAAC3B,OAAO;oDACjDmB,WAAU;oDACVS,cAAW;;;4CAIhBxH,QAAQ8F,GAAG,CAACzC,CAAAA,oBACX,qBAACuF;oDAECC,OAAM;oDACN9B,WAAW,CAAC,+EAA+E,EACzF1D,IAAIyF,QAAQ,GAAG,qCAAqC,IACpD;oDACFZ,SAAS,IAAM7E,IAAIyF,QAAQ,IAAIrE,WAAWjB,OAAOH,IAAII,GAAG;oDACxDsF,OAAO;wDAAEC,OAAO3F,IAAI2F,KAAK;oDAAC;oDAC1BC,aACE5F,IAAIyF,QAAQ,IAAItH,eAAegC,OAAOH,IAAII,GAAG,IACzC9B,kBAAkB,QAChB,cACA,eACFuH;8DAGN,cAAA,sBAACpC;wDAAIC,WAAU;;0EACb,qBAACoB;0EAAM9E,IAAI2D,KAAK;;4DACf3D,IAAIyF,QAAQ,IAAItH,eAAegC,OAAOH,IAAII,GAAG,mBAC5C,qBAAC0E;gEAAKpB,WAAU;gEAAkBwB,eAAY;0EAC3C5G,kBAAkB,QAAQ,MAAM;;;;mDAnBlC6B,OAAOH,IAAII,GAAG;4CAyBtBnD,0BACC,qBAACsI;gDAAG7B,WAAU;gDAAiF8B,OAAM;0DAAM;;;;;8CAMjH,qBAACM;oCAAMpC,WAAU;8CACdhH,KAAK6D,MAAM,KAAK,kBACf,qBAAC+E;kDACC,cAAA,sBAACS;4CACCC,SAASrJ,QAAQ4D,MAAM,GAAIjD,CAAAA,aAAa,IAAI,CAAA,IAAML,CAAAA,WAAW,IAAI,CAAA;4CACjEyG,WAAU;;gDACX;gDACK7F;gDAAW;;;yCAInBnB,KAAK+F,GAAG,CAAC,CAACC,KAAKuD;wCACb,MAAMC,QAAQ/F,OAAOuC,GAAG,CAAClF,QAAQ;wCACjC,MAAM2I,aAAarH,YAAYsH,QAAQ,CAACF;wCACxC,MAAMG,kBAAkB5I,eAAeA,aAAaiF,OAAO;wCAE3D,qBACE,sBAAC4C;4CAEC5B,WAAW,CAAC,mCAAmC,EAC7C1G,aAAa,mBAAmB,GACjC,CAAC,EAAEmJ,aAAa,iBAAiB,GAAG,CAAC,EAAEE,iBAAiB;4CACzDxB,SAAS,IAAM7H,cAAcA,WAAW0F;4CACxC4D,iBAAeH;;gDAEd7I,4BACC,qBAACyI;oDAAGrC,WAAU;oDAAYmB,SAAS,CAACZ,IAAMA,EAAEsC,eAAe;8DACzD,cAAA,qBAAC1C;wDACCC,MAAK;wDACLvB,SAAS4D;wDACTnC,UAAU,CAACC,IAAMtB,gBAAgBuD,OAAOjC,EAAEC,MAAM,CAAC3B,OAAO;wDACxDmB,WAAU;wDACVS,cAAY,CAAC,WAAW,EAAE8B,WAAW,GAAG;;;gDAI7CtJ,QAAQ8F,GAAG,CAACzC,CAAAA,oBACX,qBAAC+F;wDAECrC,WAAU;kEAET1D,IAAIwG,MAAM,GACPxG,IAAIwG,MAAM,CAAC9D,GAAG,CAAC1C,IAAII,GAAG,CAAY,EAAEsC,OACpCvC,OAAOuC,GAAG,CAAC1C,IAAII,GAAG,CAAY,IAAI;uDALjCD,OAAOH,IAAII,GAAG;gDAQtBnD,0BACC,qBAAC8I;oDAAGrC,WAAU;oDAAoBmB,SAAS,CAACZ,IAAMA,EAAEsC,eAAe;8DACjE,cAAA,qBAAC5B,cAAM;wDACLC,SAAQ;wDACRvC,MAAK;wDACLwC,SAAS,IAAM5H,SAASyF;wDACxByB,cAAY,CAAC,OAAO,EAAEtG,WAAW4I,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,EAAER,WAAW,GAAG;kEAChE;;;;2CAnCAC,SAASD;oCA0CpB;;;;;kCAOR,qBAACxC;wBAAIC,WAAU;kCACZhH,KAAK6D,MAAM,KAAK,kBACf,sBAACkD;4BAAIC,WAAU;;gCAAsC;gCAC/C7F;gCAAW;;6BAGjBnB,KAAK+F,GAAG,CAAC,CAACC,KAAKuD;4BACb,MAAMC,QAAQ/F,OAAOuC,GAAG,CAAClF,QAAQ;4BACjC,MAAM2I,aAAarH,YAAYsH,QAAQ,CAACF;4BACxC,MAAMG,kBAAkB5I,eAAeA,aAAaiF,OAAO;4BAE3D,qBACE,sBAACe;gCAECC,WAAW,CAAC,IAAI,EACd1G,aAAa,sCAAsC,GACpD,CAAC,EAAEmJ,aAAa,iBAAiB,GAAG,CAAC,EAAEE,iBAAiB;gCACzDxB,SAAS,IAAM7H,cAAcA,WAAW0F;gCACxC2B,MAAK;gCACLqC,UAAU;gCACVC,WAAW,CAAC1C;oCACV,IAAIA,EAAE7D,GAAG,KAAK,WAAW6D,EAAE7D,GAAG,KAAK,KAAK;wCACtC6D,EAAE2C,cAAc;wCAChB5J,cAAcA,WAAW0F;oCAC3B;gCACF;gCACAyB,cAAY,GAAGtG,WAAW4I,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,EAAER,WAAW,GAAG;;oCAGvD3I,4BACC,sBAACmG;wCAAIC,WAAU;wCAAyBmB,SAAS,CAACZ,IAAMA,EAAEsC,eAAe;;0DACvE,qBAAC1C;gDACCC,MAAK;gDACLvB,SAAS4D;gDACTnC,UAAU,CAACC,IAAMtB,gBAAgBuD,OAAOjC,EAAEC,MAAM,CAAC3B,OAAO;gDACxDmB,WAAU;gDACVS,cAAY,CAAC,OAAO,EAAEtG,WAAW4I,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,EAAER,WAAW,GAAG;;0DAEjE,qBAACnB;gDAAKpB,WAAU;0DAA6B;;;;kDAKjD,qBAACD;wCAAIC,WAAU;kDACZ/G,QAAQmG,MAAM,CAAC9C,CAAAA,MAAO,CAACA,IAAI6G,YAAY,EAAEpE,GAAG,CAACzC,CAAAA,oBAC5C,sBAACyD;gDAA0BC,WAAU;;kEACnC,qBAACoB;wDAAKpB,WAAU;kEACb1D,IAAI2D,KAAK;;kEAEZ,qBAACmB;wDAAKpB,WAAU;kEACb1D,IAAIwG,MAAM,GACPxG,IAAIwG,MAAM,CAAC9D,GAAG,CAAC1C,IAAII,GAAG,CAAY,EAAEsC,OACpCvC,OAAOuC,GAAG,CAAC1C,IAAII,GAAG,CAAY,IAAI;;;+CAPhCD,OAAOH,IAAII,GAAG;;oCAc3BnD,0BACC,qBAACwG;wCAAIC,WAAU;wCAAqCmB,SAAS,CAACZ,IAAMA,EAAEsC,eAAe;kDACnF,cAAA,qBAAC5B,cAAM;4CACLC,SAAQ;4CACRvC,MAAK;4CACLwC,SAAS,IAAM5H,SAASyF;4CACxBgB,WAAU;4CACVS,cAAY,CAAC,OAAO,EAAEtG,WAAW4I,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,EAAER,WAAW,GAAG;sDAChE;;;;+BAtDAC,SAASD;wBA6DpB;;oBAKH9C,aAAa,mBACZ,sBAACM;wBACCC,WAAU;wBACVW,MAAK;wBACLF,cAAW;;0CAEX,sBAACV;gCAAIC,WAAU;;kDACb,qBAACC;wCAAMC,SAAQ;wCAAmBF,WAAU;kDAAwB;;kDACpE,sBAACc;wCACC5B,IAAG;wCACH7B,OAAO/B;wCACPgF,UAAU,CAACC,IAAM7B,qBAAqB0E,OAAO7C,EAAEC,MAAM,CAACnD,KAAK;wCAC3D2C,WAAU;wCACVS,cAAW;;0DAEX,qBAACM;gDAAO1D,OAAO;0DAAI;;0DACnB,qBAAC0D;gDAAO1D,OAAO;0DAAI;;0DACnB,qBAAC0D;gDAAO1D,OAAO;0DAAK;;;;;;0CAIxB,sBAAC0C;gCAAIC,WAAU;;kDACb,sBAACoB;wCAAKpB,WAAU;wCAAoCuB,aAAU;wCAAS8B,eAAY;;4CAAO;4CAClF7H;4CAAU;4CAAKiE;;;kDAEvB,sBAACM;wCAAIC,WAAU;;0DACb,qBAACiB,cAAM;gDACLC,SAAQ;gDACRvC,MAAK;gDACLwC,SAAS,IAAM3C,iBAAiBhD,YAAY;gDAC5CiG,UAAUjG,cAAc;gDACxBwE,WAAU;gDACVS,cAAW;0DACZ;;0DAGD,qBAACQ,cAAM;gDACLC,SAAQ;gDACRvC,MAAK;gDACLwC,SAAS,IAAM3C,iBAAiBhD,YAAY;gDAC5CiG,UAAUjG,cAAciE;gDACxBO,WAAU;gDACVS,cAAW;0DACZ;;;;;;;;;;;;AAUjB"}