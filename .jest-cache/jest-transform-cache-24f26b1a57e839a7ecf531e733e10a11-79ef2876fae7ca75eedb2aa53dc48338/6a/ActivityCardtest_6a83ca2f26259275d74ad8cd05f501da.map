{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/guest/ActivityCard.test.tsx"],"sourcesContent":["/**\n * Unit Tests for ActivityCard Component\n * \n * Tests card rendering, capacity warnings, RSVP status badges, cost display, and interactions.\n * \n * Requirements: 9.3, 9.4\n */\n\nimport { render, screen } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { ActivityCard } from './ActivityCard';\nimport { createMockActivity } from '@/__tests__/helpers/factories';\n\ndescribe('ActivityCard', () => {\n  const mockOnClick = jest.fn();\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Card Rendering', () => {\n    it('should render activity name', () => {\n      const activity = createMockActivity({\n        name: 'Beach Volleyball',\n      });\n\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n    });\n\n    it('should render activity type badge', () => {\n      const activity = createMockActivity({\n        activityType: 'ceremony',\n      });\n\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      expect(screen.getByText('ceremony')).toBeInTheDocument();\n    });\n\n    it('should render date and time', () => {\n      const activity = createMockActivity({\n        startTime: '2025-06-15T14:30:00Z',\n      });\n\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      // Check for date (format: MMM d, yyyy)\n      expect(screen.getByText(/Jun 15, 2025/i)).toBeInTheDocument();\n      \n      // Check for time (format: h:mm a)\n      expect(screen.getByText(/2:30 PM/i)).toBeInTheDocument();\n    });\n\n    it('should render location indicator when locationId present', () => {\n      const activity = createMockActivity({\n        locationId: 'location-123',\n      });\n\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      expect(screen.getByText(/view location/i)).toBeInTheDocument();\n    });\n\n    it('should render capacity when provided', () => {\n      const activity = createMockActivity({\n        capacity: 50,\n      });\n\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      expect(screen.getByText(/50 capacity/i)).toBeInTheDocument();\n    });\n\n    it('should render cost when netCost > 0', () => {\n      const activity = createMockActivity({\n        netCost: 75.50,\n      });\n\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      expect(screen.getByText(/\\$75\\.50 per person/i)).toBeInTheDocument();\n    });\n\n    it('should not render cost when netCost is 0', () => {\n      const activity = createMockActivity({\n        netCost: 0,\n      });\n\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      expect(screen.queryByText(/per person/i)).not.toBeInTheDocument();\n    });\n  });\n\n  describe('Capacity Warnings', () => {\n    it('should display \"Full\" badge when at capacity', () => {\n      const activity = createMockActivity({\n        capacity: 50,\n        capacityRemaining: 0,\n      });\n\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      expect(screen.getByText(/⚠️ Full/i)).toBeInTheDocument();\n    });\n\n    it('should display \"Almost Full\" badge when < 10% capacity remaining', () => {\n      const activity = createMockActivity({\n        capacity: 100,\n        capacityRemaining: 5, // 5% remaining\n      });\n\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      expect(screen.getByText(/⚠️ Almost Full/i)).toBeInTheDocument();\n    });\n\n    it('should display spots left when capacity available', () => {\n      const activity = createMockActivity({\n        capacity: 50,\n        capacityRemaining: 25,\n      });\n\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      expect(screen.getByText(/25 spots left/i)).toBeInTheDocument();\n    });\n\n    it('should not display capacity badge when capacity is null', () => {\n      const activity = createMockActivity({\n        capacity: null,\n        capacityRemaining: undefined,\n      });\n\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      expect(screen.queryByText(/spots left/i)).not.toBeInTheDocument();\n      expect(screen.queryByText(/full/i)).not.toBeInTheDocument();\n    });\n  });\n\n  describe('RSVP Status Badges', () => {\n    it('should display \"Pending\" badge for pending status', () => {\n      const activity = createMockActivity({\n        rsvpStatus: 'pending',\n      });\n\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      expect(screen.getByText('Pending')).toBeInTheDocument();\n    });\n\n    it('should display \"Attending\" badge for attending status', () => {\n      const activity = createMockActivity({\n        rsvpStatus: 'attending',\n      });\n\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      expect(screen.getByText('Attending')).toBeInTheDocument();\n    });\n\n    it('should display \"Declined\" badge for declined status', () => {\n      const activity = createMockActivity({\n        rsvpStatus: 'declined',\n      });\n\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      expect(screen.getByText('Declined')).toBeInTheDocument();\n    });\n\n    it('should display \"Maybe\" badge for maybe status', () => {\n      const activity = createMockActivity({\n        rsvpStatus: 'maybe',\n      });\n\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      expect(screen.getByText('Maybe')).toBeInTheDocument();\n    });\n\n    it('should display \"Pending\" badge when rsvpStatus is undefined', () => {\n      const activity = createMockActivity({\n        rsvpStatus: undefined,\n      });\n\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      expect(screen.getByText('Pending')).toBeInTheDocument();\n    });\n  });\n\n  describe('Click Handler', () => {\n    it('should call onClick when card clicked', async () => {\n      const activity = createMockActivity({\n        name: 'Beach Volleyball',\n      });\n\n      const user = userEvent.setup();\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      const card = screen.getByText('Beach Volleyball').closest('div');\n      if (card) {\n        await user.click(card);\n      }\n\n      expect(mockOnClick).toHaveBeenCalledTimes(1);\n    });\n\n    it('should call onClick when \"View Details\" button clicked', async () => {\n      const activity = createMockActivity({\n        name: 'Beach Volleyball',\n      });\n\n      const user = userEvent.setup();\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      const viewDetailsButton = screen.getByText(/view details/i);\n      await user.click(viewDetailsButton);\n\n      expect(mockOnClick).toHaveBeenCalledTimes(1);\n    });\n  });\n\n  describe('Responsive Design', () => {\n    it('should render with proper styling classes', () => {\n      const activity = createMockActivity({\n        name: 'Beach Volleyball',\n      });\n\n      const { container } = render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      // Check for responsive and styling classes\n      const card = container.querySelector('.bg-white');\n      expect(card).toBeInTheDocument();\n      expect(card).toHaveClass('rounded-lg');\n      expect(card).toHaveClass('shadow-md');\n      expect(card).toHaveClass('cursor-pointer');\n    });\n\n    it('should have hover effect classes', () => {\n      const activity = createMockActivity({\n        name: 'Beach Volleyball',\n      });\n\n      const { container } = render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      const card = container.querySelector('.hover\\\\:shadow-lg');\n      expect(card).toBeInTheDocument();\n    });\n  });\n\n  describe('Edge Cases', () => {\n    it('should handle activity with all optional fields null', () => {\n      const activity = createMockActivity({\n        name: 'Minimal Activity',\n        description: null,\n        locationId: null,\n        capacity: null,\n        netCost: 0,\n        rsvpStatus: undefined,\n        capacityRemaining: undefined,\n      });\n\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      expect(screen.getByText('Minimal Activity')).toBeInTheDocument();\n      expect(screen.getByText('Pending')).toBeInTheDocument();\n    });\n\n    it('should handle very long activity names', () => {\n      const activity = createMockActivity({\n        name: 'This is a very long activity name that should be truncated or wrapped properly to fit within the card layout without breaking the design',\n      });\n\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      const nameElement = screen.getByText(/This is a very long activity name/i);\n      expect(nameElement).toBeInTheDocument();\n      expect(nameElement).toHaveClass('line-clamp-2');\n    });\n\n    it('should handle zero capacity remaining', () => {\n      const activity = createMockActivity({\n        capacity: 50,\n        capacityRemaining: 0,\n      });\n\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      expect(screen.getByText(/⚠️ Full/i)).toBeInTheDocument();\n    });\n\n    it('should handle negative capacity remaining (edge case)', () => {\n      const activity = createMockActivity({\n        capacity: 50,\n        capacityRemaining: -5, // Over capacity\n      });\n\n      render(<ActivityCard activity={activity} onClick={mockOnClick} />);\n\n      // Should still show as full\n      expect(screen.getByText(/⚠️ Full/i)).toBeInTheDocument();\n    });\n  });\n});\n"],"names":["describe","mockOnClick","jest","fn","beforeEach","clearAllMocks","it","activity","createMockActivity","name","render","ActivityCard","onClick","expect","screen","getByText","toBeInTheDocument","activityType","startTime","locationId","capacity","netCost","queryByText","not","capacityRemaining","undefined","rsvpStatus","user","userEvent","setup","card","closest","click","toHaveBeenCalledTimes","viewDetailsButton","container","querySelector","toHaveClass","description","nameElement"],"mappings":"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"}