{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/guest/RSVPForm.tsx"],"sourcesContent":["/**\n * RSVP Form Component\n * \n * Allows guests to submit or update their RSVP for activities.\n * Includes validation for deadlines, capacity, and guest counts.\n * \n * Requirements: 10.1, 10.2, 10.3, 10.4, 10.5, 10.6, 10.7, 10.8, 10.9, 10.10\n */\n\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport { z } from 'zod';\nimport { sanitizeInput } from '@/utils/sanitization';\nimport type { RSVP } from '@/types';\n\n// RSVP form schema\nconst rsvpFormSchema = z.object({\n  status: z.enum(['attending', 'declined', 'maybe']),\n  guestCount: z.number().int().positive('Guest count must be positive').optional(),\n  dietaryRestrictions: z.string().max(500, 'Dietary restrictions must be 500 characters or less').optional(),\n  plusOne: z.boolean().optional(),\n});\n\ntype RSVPFormData = z.infer<typeof rsvpFormSchema>;\n\ninterface RSVPFormProps {\n  activityId: string;\n  currentRsvp?: RSVP;\n  activityDetails?: {\n    name: string;\n    capacity: number | null;\n    capacityRemaining: number | null;\n    rsvpDeadline: string | null;\n    allowsPlusOnes: boolean;\n    isMeal: boolean;\n  };\n  onSuccess: () => void;\n  onCancel: () => void;\n}\n\nexport function RSVPForm({\n  activityId,\n  currentRsvp,\n  activityDetails,\n  onSuccess,\n  onCancel,\n}: RSVPFormProps) {\n  const [formData, setFormData] = useState<RSVPFormData>({\n    status: currentRsvp?.status === 'pending' ? 'attending' : (currentRsvp?.status as any) || 'attending',\n    guestCount: currentRsvp?.guestCount || 1,\n    dietaryRestrictions: currentRsvp?.dietaryRestrictions || '',\n    plusOne: currentRsvp?.plusOne || false,\n  });\n\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [loading, setLoading] = useState(false);\n  const [submitError, setSubmitError] = useState<string | null>(null);\n\n  // Check if deadline has passed\n  const isDeadlinePassed = activityDetails?.rsvpDeadline\n    ? new Date(activityDetails.rsvpDeadline) < new Date()\n    : false;\n\n  // Check if capacity is full\n  const isCapacityFull = activityDetails?.capacityRemaining !== null && activityDetails?.capacityRemaining !== undefined\n    ? activityDetails.capacityRemaining <= 0\n    : false;\n\n  // Check if capacity is almost full (< 10% remaining)\n  const isCapacityAlmostFull = activityDetails?.capacity && activityDetails?.capacityRemaining !== null && activityDetails?.capacityRemaining !== undefined\n    ? (activityDetails.capacityRemaining / activityDetails.capacity) < 0.1\n    : false;\n\n  // Validate form\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n\n    // Deadline validation\n    if (isDeadlinePassed) {\n      newErrors.deadline = 'The RSVP deadline for this activity has passed. You can no longer submit or update your RSVP.';\n      setErrors(newErrors);\n      return false;\n    }\n\n    // Capacity validation (only for \"attending\" status)\n    if (formData.status === 'attending') {\n      if (isCapacityFull) {\n        newErrors.capacity = 'This activity is at full capacity. You cannot RSVP as attending.';\n        setErrors(newErrors);\n        return false;\n      }\n\n      // Guest count validation\n      if (!formData.guestCount || formData.guestCount < 1) {\n        newErrors.guestCount = 'Guest count must be at least 1 when attending.';\n      }\n\n      // Check if guest count exceeds remaining capacity\n      if (activityDetails?.capacityRemaining !== null && activityDetails?.capacityRemaining !== undefined) {\n        const requestedCount = formData.guestCount || 1;\n        if (requestedCount > activityDetails.capacityRemaining) {\n          newErrors.guestCount = `Only ${activityDetails.capacityRemaining} spot(s) remaining. Please reduce your guest count.`;\n        }\n      }\n    }\n\n    // Zod validation\n    const validation = rsvpFormSchema.safeParse(formData);\n    if (!validation.success) {\n      validation.error.issues.forEach((issue) => {\n        if (issue.path[0]) {\n          newErrors[issue.path[0].toString()] = issue.message;\n        }\n      });\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Handle form submission\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setSubmitError(null);\n\n    if (!validateForm()) {\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      // Sanitize input\n      const sanitizedData = {\n        ...formData,\n        dietaryRestrictions: formData.dietaryRestrictions\n          ? sanitizeInput(formData.dietaryRestrictions)\n          : undefined,\n      };\n\n      // Determine API endpoint\n      const url = currentRsvp\n        ? `/api/guest/rsvps/${currentRsvp.id}`\n        : `/api/guest/rsvps`;\n\n      const method = currentRsvp ? 'PUT' : 'POST';\n\n      const body = currentRsvp\n        ? sanitizedData\n        : {\n            ...sanitizedData,\n            activityId,\n          };\n\n      const response = await fetch(url, {\n        method,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(body),\n      });\n\n      const result = await response.json();\n\n      if (!result.success) {\n        throw new Error(result.error?.message || 'Failed to submit RSVP');\n      }\n\n      // Show success message (could use toast here)\n      onSuccess();\n    } catch (error) {\n      setSubmitError(error instanceof Error ? error.message : 'An error occurred while submitting your RSVP');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle status change\n  const handleStatusChange = (status: 'attending' | 'declined' | 'maybe') => {\n    setFormData({ ...formData, status });\n    setErrors({});\n  };\n\n  // Handle guest count change\n  const handleGuestCountChange = (count: number) => {\n    setFormData({ ...formData, guestCount: count });\n    setErrors({ ...errors, guestCount: '' });\n  };\n\n  // Handle dietary restrictions change\n  const handleDietaryRestrictionsChange = (value: string) => {\n    setFormData({ ...formData, dietaryRestrictions: value });\n    setErrors({ ...errors, dietaryRestrictions: '' });\n  };\n\n  // Handle plus-one change\n  const handlePlusOneChange = (checked: boolean) => {\n    setFormData({ ...formData, plusOne: checked });\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\n      {/* Deadline Warning */}\n      {isDeadlinePassed && (\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n          <p className=\"text-sm text-red-800 font-medium\">\n            ⚠️ The RSVP deadline for this activity has passed. You can no longer submit or update your RSVP.\n          </p>\n        </div>\n      )}\n\n      {/* Capacity Warning */}\n      {!isDeadlinePassed && isCapacityAlmostFull && !isCapacityFull && (\n        <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n          <p className=\"text-sm text-yellow-800 font-medium\">\n            ⚠️ This activity is almost full! Only {activityDetails?.capacityRemaining} spot(s) remaining.\n          </p>\n        </div>\n      )}\n\n      {/* Status Selection */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n          RSVP Status *\n        </label>\n        <div className=\"grid grid-cols-3 gap-3\">\n          <button\n            type=\"button\"\n            onClick={() => handleStatusChange('attending')}\n            disabled={isDeadlinePassed || (isCapacityFull && formData.status !== 'attending')}\n            className={`px-4 py-3 rounded-lg border-2 font-medium transition-colors ${\n              formData.status === 'attending'\n                ? 'border-green-500 bg-green-50 text-green-700'\n                : 'border-gray-300 bg-white text-gray-700 hover:border-green-300'\n            } ${\n              (isDeadlinePassed || (isCapacityFull && formData.status !== 'attending'))\n                ? 'opacity-50 cursor-not-allowed'\n                : ''\n            }`}\n          >\n            Attending\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => handleStatusChange('maybe')}\n            disabled={isDeadlinePassed}\n            className={`px-4 py-3 rounded-lg border-2 font-medium transition-colors ${\n              formData.status === 'maybe'\n                ? 'border-yellow-500 bg-yellow-50 text-yellow-700'\n                : 'border-gray-300 bg-white text-gray-700 hover:border-yellow-300'\n            } ${isDeadlinePassed ? 'opacity-50 cursor-not-allowed' : ''}`}\n          >\n            Maybe\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => handleStatusChange('declined')}\n            disabled={isDeadlinePassed}\n            className={`px-4 py-3 rounded-lg border-2 font-medium transition-colors ${\n              formData.status === 'declined'\n                ? 'border-red-500 bg-red-50 text-red-700'\n                : 'border-gray-300 bg-white text-gray-700 hover:border-red-300'\n            } ${isDeadlinePassed ? 'opacity-50 cursor-not-allowed' : ''}`}\n          >\n            Declined\n          </button>\n        </div>\n        {errors.capacity && (\n          <p className=\"mt-2 text-sm text-red-600\">{errors.capacity}</p>\n        )}\n      </div>\n\n      {/* Guest Count (only for attending) */}\n      {formData.status === 'attending' && (\n        <div>\n          <label htmlFor=\"guestCount\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Number of Guests *\n          </label>\n          <input\n            type=\"number\"\n            id=\"guestCount\"\n            min=\"1\"\n            value={formData.guestCount || 1}\n            onChange={(e) => handleGuestCountChange(parseInt(e.target.value, 10))}\n            disabled={isDeadlinePassed}\n            className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${\n              errors.guestCount ? 'border-red-500' : 'border-gray-300'\n            } ${isDeadlinePassed ? 'opacity-50 cursor-not-allowed' : ''}`}\n          />\n          {errors.guestCount && (\n            <p className=\"mt-1 text-sm text-red-600\">{errors.guestCount}</p>\n          )}\n          {activityDetails?.capacityRemaining !== null && activityDetails?.capacityRemaining !== undefined && (\n            <p className=\"mt-1 text-sm text-gray-600\">\n              {activityDetails.capacityRemaining} spot(s) remaining\n            </p>\n          )}\n        </div>\n      )}\n\n      {/* Dietary Restrictions (only for meals and attending) */}\n      {formData.status === 'attending' && activityDetails?.isMeal && (\n        <div>\n          <label htmlFor=\"dietaryRestrictions\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Dietary Restrictions\n          </label>\n          <textarea\n            id=\"dietaryRestrictions\"\n            rows={3}\n            value={formData.dietaryRestrictions || ''}\n            onChange={(e) => handleDietaryRestrictionsChange(e.target.value)}\n            disabled={isDeadlinePassed}\n            placeholder=\"Please let us know about any dietary restrictions or allergies...\"\n            className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 ${\n              errors.dietaryRestrictions ? 'border-red-500' : 'border-gray-300'\n            } ${isDeadlinePassed ? 'opacity-50 cursor-not-allowed' : ''}`}\n          />\n          {errors.dietaryRestrictions && (\n            <p className=\"mt-1 text-sm text-red-600\">{errors.dietaryRestrictions}</p>\n          )}\n        </div>\n      )}\n\n      {/* Plus-One (if allowed and attending) */}\n      {formData.status === 'attending' && activityDetails?.allowsPlusOnes && (\n        <div className=\"flex items-center\">\n          <input\n            type=\"checkbox\"\n            id=\"plusOne\"\n            checked={formData.plusOne || false}\n            onChange={(e) => handlePlusOneChange(e.target.checked)}\n            disabled={isDeadlinePassed}\n            className=\"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded\"\n          />\n          <label htmlFor=\"plusOne\" className=\"ml-2 block text-sm text-gray-700\">\n            I will be bringing a plus-one\n          </label>\n        </div>\n      )}\n\n      {/* Submit Error */}\n      {submitError && (\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n          <p className=\"text-sm text-red-800\">{submitError}</p>\n        </div>\n      )}\n\n      {/* Form Actions */}\n      <div className=\"flex items-center justify-end gap-3 pt-4 border-t border-gray-200\">\n        <button\n          type=\"button\"\n          onClick={onCancel}\n          disabled={loading}\n          className=\"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          Cancel\n        </button>\n        <button\n          type=\"submit\"\n          disabled={loading || isDeadlinePassed || Object.keys(errors).length > 0}\n          className=\"px-4 py-2 text-white bg-emerald-600 rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n        >\n          {loading && (\n            <svg className=\"animate-spin h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n              <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n              <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n            </svg>\n          )}\n          {loading ? 'Submitting...' : currentRsvp ? 'Update RSVP' : 'Submit RSVP'}\n        </button>\n      </div>\n    </form>\n  );\n}\n"],"names":["RSVPForm","rsvpFormSchema","z","object","status","enum","guestCount","number","int","positive","optional","dietaryRestrictions","string","max","plusOne","boolean","activityId","currentRsvp","activityDetails","onSuccess","onCancel","formData","setFormData","useState","errors","setErrors","loading","setLoading","submitError","setSubmitError","isDeadlinePassed","rsvpDeadline","Date","isCapacityFull","capacityRemaining","undefined","isCapacityAlmostFull","capacity","validateForm","newErrors","deadline","requestedCount","validation","safeParse","success","error","issues","forEach","issue","path","toString","message","Object","keys","length","handleSubmit","e","preventDefault","sanitizedData","sanitizeInput","url","id","method","body","response","fetch","headers","JSON","stringify","result","json","Error","handleStatusChange","handleGuestCountChange","count","handleDietaryRestrictionsChange","value","handlePlusOneChange","checked","form","onSubmit","className","div","p","label","button","type","onClick","disabled","htmlFor","input","min","onChange","parseInt","target","isMeal","textarea","rows","placeholder","allowsPlusOnes","svg","xmlns","fill","viewBox","circle","cx","cy","r","stroke","strokeWidth","d"],"mappings":"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"}