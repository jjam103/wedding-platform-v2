{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/guest/EventPreviewModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { format } from 'date-fns';\nimport type { Event } from '@/schemas/eventSchemas';\n\ninterface EventPreviewModalProps {\n  event: Event & {\n    rsvpStatus?: 'attending' | 'declined' | 'maybe' | 'pending';\n    activityCount?: number;\n  };\n  isOpen: boolean;\n  onClose: () => void;\n}\n\ninterface Activity {\n  id: string;\n  name: string;\n  activityType: string;\n  startTime: string;\n  capacity?: number;\n  costPerPerson?: number;\n}\n\n/**\n * EventPreviewModal Component\n * \n * Displays detailed event information in a modal with activities list and RSVP actions.\n * \n * Requirements: 25.1, 25.2, 25.3, 25.4\n */\nexport function EventPreviewModal({ event, isOpen, onClose }: EventPreviewModalProps) {\n  const [activities, setActivities] = useState<Activity[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  // Fetch activities for this event\n  useEffect(() => {\n    if (isOpen && event.id) {\n      fetchActivities();\n    }\n  }, [isOpen, event.id]);\n\n  const fetchActivities = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch(`/api/guest/activities?eventId=${event.id}`);\n      const result = await response.json();\n\n      if (result.success) {\n        setActivities(result.data || []);\n      }\n    } catch (error) {\n      console.error('Failed to fetch activities:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle RSVP action\n  const handleRSVP = () => {\n    // Navigate to RSVP page or open RSVP form\n    window.location.href = `/guest/rsvp?eventId=${event.id}`;\n  };\n\n  // Handle view full details\n  const handleViewDetails = () => {\n    window.location.href = `/event/${event.slug || event.id}`;\n  };\n\n  if (!isOpen) return null;\n\n  // Format date and time\n  const eventDate = format(new Date(event.startDate), 'EEEE, MMMM d, yyyy');\n  const eventTime = format(new Date(event.startDate), 'h:mm a');\n  const endTime = event.endDate ? format(new Date(event.endDate), 'h:mm a') : null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\" aria-labelledby=\"modal-title\" role=\"dialog\" aria-modal=\"true\">\n      {/* Backdrop */}\n      <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" onClick={onClose}></div>\n\n      {/* Modal */}\n      <div className=\"flex min-h-full items-center justify-center p-4\">\n        <div className=\"relative transform overflow-hidden rounded-lg bg-white shadow-xl transition-all w-full max-w-2xl\">\n          {/* Header */}\n          <div className=\"bg-gradient-to-r from-emerald-500 to-teal-500 px-6 py-4\">\n            <div className=\"flex items-start justify-between\">\n              <h3 className=\"text-2xl font-bold text-white\" id=\"modal-title\">\n                {event.name}\n              </h3>\n              <button\n                onClick={onClose}\n                className=\"text-white hover:text-gray-200 transition-colors\"\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            <div className=\"mt-2\">\n              <span className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white bg-opacity-20 text-white\">\n                {event.eventType}\n              </span>\n            </div>\n          </div>\n\n          {/* Content */}\n          <div className=\"px-6 py-4 space-y-4\">\n            {/* Date and Time */}\n            <div className=\"flex items-start\">\n              <svg className=\"w-6 h-6 mr-3 text-emerald-600 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n              </svg>\n              <div>\n                <div className=\"font-semibold text-gray-900\">{eventDate}</div>\n                <div className=\"text-gray-600\">\n                  {eventTime}{endTime && ` - ${endTime}`}\n                </div>\n              </div>\n            </div>\n\n            {/* Location */}\n            {event.locationId && (\n              <div className=\"flex items-start\">\n                <svg className=\"w-6 h-6 mr-3 text-emerald-600 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\n                </svg>\n                <div>\n                  <div className=\"font-semibold text-gray-900\">Location</div>\n                  <div className=\"text-gray-600\">View location details</div>\n                </div>\n              </div>\n            )}\n\n            {/* Description */}\n            {event.description && (\n              <div>\n                <h4 className=\"font-semibold text-gray-900 mb-2\">Description</h4>\n                <div \n                  className=\"text-gray-600 prose prose-sm max-w-none\"\n                  dangerouslySetInnerHTML={{ __html: event.description }}\n                />\n              </div>\n            )}\n\n            {/* RSVP Status */}\n            <div className=\"bg-gray-50 rounded-lg p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <div className=\"font-semibold text-gray-900 mb-1\">Your RSVP Status</div>\n                  <div>\n                    {event.rsvpStatus === 'attending' && (\n                      <span className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800\">\n                        ✓ Attending\n                      </span>\n                    )}\n                    {event.rsvpStatus === 'declined' && (\n                      <span className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800\">\n                        ✗ Declined\n                      </span>\n                    )}\n                    {event.rsvpStatus === 'maybe' && (\n                      <span className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800\">\n                        ? Maybe\n                      </span>\n                    )}\n                    {!event.rsvpStatus || event.rsvpStatus === 'pending' && (\n                      <span className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800\">\n                        Pending\n                      </span>\n                    )}\n                  </div>\n                </div>\n                <button\n                  onClick={handleRSVP}\n                  className=\"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors font-medium\"\n                >\n                  {event.rsvpStatus && event.rsvpStatus !== 'pending' ? 'Update RSVP' : 'RSVP Now'}\n                </button>\n              </div>\n            </div>\n\n            {/* Activities */}\n            {loading ? (\n              <div className=\"flex items-center justify-center py-8\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600\"></div>\n              </div>\n            ) : activities.length > 0 && (\n              <div>\n                <h4 className=\"font-semibold text-gray-900 mb-3\">Activities ({activities.length})</h4>\n                <div className=\"space-y-2\">\n                  {activities.map((activity) => (\n                    <div key={activity.id} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                      <div>\n                        <div className=\"font-medium text-gray-900\">{activity.name}</div>\n                        <div className=\"text-sm text-gray-600\">\n                          {format(new Date(activity.startTime), 'h:mm a')}\n                          {activity.capacity && ` • Capacity: ${activity.capacity}`}\n                          {activity.costPerPerson && ` • $${activity.costPerPerson}/person`}\n                        </div>\n                      </div>\n                      <span className=\"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded\">\n                        {activity.activityType}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          <div className=\"bg-gray-50 px-6 py-4 flex items-center justify-between\">\n            <button\n              onClick={onClose}\n              className=\"px-4 py-2 text-gray-700 hover:text-gray-900 font-medium\"\n            >\n              Close\n            </button>\n            <button\n              onClick={handleViewDetails}\n              className=\"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors font-medium\"\n            >\n              View Full Details\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["EventPreviewModal","event","isOpen","onClose","activities","setActivities","useState","loading","setLoading","useEffect","id","fetchActivities","response","fetch","result","json","success","data","error","console","handleRSVP","window","location","href","handleViewDetails","slug","eventDate","format","Date","startDate","eventTime","endTime","endDate","div","className","aria-labelledby","role","aria-modal","onClick","h3","name","button","svg","fill","stroke","viewBox","path","strokeLinecap","strokeLinejoin","strokeWidth","d","span","eventType","locationId","description","h4","dangerouslySetInnerHTML","__html","rsvpStatus","length","map","activity","startTime","capacity","costPerPerson","activityType"],"mappings":"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"}