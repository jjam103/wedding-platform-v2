43905bc1065adef583090c932b6de964
/**
 * Regression Test Suite: Data Service Operations
 * 
 * Tests CRUD operations across all data services to prevent regressions in:
 * - Guest management
 * - Event management
 * - Activity management
 * - RSVP management
 * - Vendor management
 * - Accommodation management
 * 
 * Requirements: 21.1, 21.2
 */ "use strict";
jest.mock('@/lib/supabase', ()=>({
        createClient: jest.fn(()=>mockSupabase)
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _guestService = /*#__PURE__*/ _interop_require_wildcard(require("../../services/guestService"));
const _eventService = /*#__PURE__*/ _interop_require_wildcard(require("../../services/eventService"));
const _activityService = /*#__PURE__*/ _interop_require_wildcard(require("../../services/activityService"));
const _rsvpService = /*#__PURE__*/ _interop_require_wildcard(require("../../services/rsvpService"));
const _vendorService = /*#__PURE__*/ _interop_require_wildcard(require("../../services/vendorService"));
const _accommodationService = /*#__PURE__*/ _interop_require_wildcard(require("../../services/accommodationService"));
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Mock Supabase client
const mockSupabase = {
    from: jest.fn().mockReturnThis(),
    select: jest.fn().mockReturnThis(),
    insert: jest.fn().mockReturnThis(),
    update: jest.fn().mockReturnThis(),
    delete: jest.fn().mockReturnThis(),
    eq: jest.fn().mockReturnThis(),
    in: jest.fn().mockReturnThis(),
    single: jest.fn(),
    range: jest.fn().mockReturnThis()
};
describe('Regression: Data Service Operations', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    describe('Guest Service CRUD', ()=>{
        const validGuest = {
            firstName: 'John',
            lastName: 'Doe',
            email: 'john@example.com',
            groupId: '123e4567-e89b-12d3-a456-426614174000',
            ageType: 'adult',
            guestType: 'wedding_guest'
        };
        it('should create guest with valid data', async ()=>{
            mockSupabase.single.mockResolvedValue({
                data: {
                    id: 'guest-1',
                    ...validGuest
                },
                error: null
            });
            const result = await _guestService.create(validGuest);
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.id).toBe('guest-1');
                expect(result.data.firstName).toBe('John');
            }
        });
        it('should retrieve guest by ID', async ()=>{
            mockSupabase.single.mockResolvedValue({
                data: {
                    id: 'guest-1',
                    ...validGuest
                },
                error: null
            });
            const result = await _guestService.get('guest-1');
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.id).toBe('guest-1');
            }
        });
        it('should update guest data', async ()=>{
            mockSupabase.single.mockResolvedValue({
                data: {
                    id: 'guest-1',
                    ...validGuest,
                    firstName: 'Jane'
                },
                error: null
            });
            const result = await _guestService.update('guest-1', {
                firstName: 'Jane'
            });
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.firstName).toBe('Jane');
            }
        });
        it('should delete guest', async ()=>{
            mockSupabase.single.mockResolvedValue({
                data: null,
                error: null
            });
            const result = await _guestService.delete('guest-1');
            expect(result.success).toBe(true);
        });
        it('should list guests with pagination', async ()=>{
            mockSupabase.range.mockReturnThis();
            mockSupabase.select.mockResolvedValue({
                data: [
                    {
                        id: 'guest-1',
                        ...validGuest
                    },
                    {
                        id: 'guest-2',
                        ...validGuest,
                        firstName: 'Jane'
                    }
                ],
                error: null,
                count: 2
            });
            const result = await _guestService.list({
                page: 1,
                pageSize: 10
            });
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.length).toBe(2);
            }
        });
    });
    describe('Event Service CRUD', ()=>{
        const validEvent = {
            name: 'Wedding Ceremony',
            eventType: 'ceremony',
            startDate: new Date('2025-06-15T14:00:00Z'),
            rsvpRequired: true,
            visibility: [
                'wedding_party',
                'wedding_guest'
            ],
            status: 'published'
        };
        it('should create event with valid data', async ()=>{
            mockSupabase.single.mockResolvedValue({
                data: {
                    id: 'event-1',
                    ...validEvent
                },
                error: null
            });
            const result = await _eventService.create(validEvent);
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.id).toBe('event-1');
                expect(result.data.name).toBe('Wedding Ceremony');
            }
        });
        it('should detect scheduling conflicts', async ()=>{
            const conflictingEvent = {
                ...validEvent,
                name: 'Conflicting Event',
                locationId: 'location-1'
            };
            mockSupabase.select.mockResolvedValue({
                data: [
                    {
                        id: 'event-1',
                        ...validEvent,
                        locationId: 'location-1'
                    }
                ],
                error: null
            });
            const result = await _eventService.checkSchedulingConflict(conflictingEvent);
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.hasConflict).toBe(true);
            }
        });
    });
    describe('Activity Service CRUD', ()=>{
        const validActivity = {
            name: 'Beach Volleyball',
            activityType: 'activity',
            startTime: new Date('2025-06-16T10:00:00Z'),
            capacity: 20,
            costPerPerson: 25,
            hostSubsidy: 10,
            adultsOnly: false,
            plusOneAllowed: true,
            visibility: [
                'wedding_guest'
            ],
            status: 'published',
            displayOrder: 1
        };
        it('should create activity with valid data', async ()=>{
            mockSupabase.single.mockResolvedValue({
                data: {
                    id: 'activity-1',
                    ...validActivity
                },
                error: null
            });
            const result = await _activityService.create(validActivity);
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.id).toBe('activity-1');
                expect(result.data.capacity).toBe(20);
            }
        });
        it('should validate required fields', async ()=>{
            const invalidActivity = {
                activityType: 'activity'
            };
            const result = await _activityService.create(invalidActivity);
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
    });
    describe('RSVP Service CRUD', ()=>{
        const validRSVP = {
            guestId: 'guest-1',
            eventId: 'event-1',
            status: 'attending',
            guestCount: 2,
            dietaryNotes: 'Vegetarian'
        };
        it('should create RSVP with valid data', async ()=>{
            mockSupabase.single.mockResolvedValue({
                data: {
                    id: 'rsvp-1',
                    ...validRSVP
                },
                error: null
            });
            const result = await _rsvpService.create(validRSVP);
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.status).toBe('attending');
            }
        });
        it('should update RSVP status', async ()=>{
            mockSupabase.single.mockResolvedValue({
                data: {
                    id: 'rsvp-1',
                    ...validRSVP,
                    status: 'declined'
                },
                error: null
            });
            const result = await _rsvpService.update('rsvp-1', {
                status: 'declined'
            });
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.status).toBe('declined');
            }
        });
    });
    describe('Vendor Service CRUD', ()=>{
        const validVendor = {
            name: 'Perfect Photos',
            category: 'photography',
            pricingModel: 'flat_rate',
            baseCost: 2500,
            paymentStatus: 'unpaid',
            amountPaid: 0
        };
        it('should create vendor with valid data', async ()=>{
            mockSupabase.single.mockResolvedValue({
                data: {
                    id: 'vendor-1',
                    ...validVendor
                },
                error: null
            });
            const result = await _vendorService.create(validVendor);
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.category).toBe('photography');
            }
        });
        it('should update payment status', async ()=>{
            mockSupabase.single.mockResolvedValue({
                data: {
                    id: 'vendor-1',
                    ...validVendor,
                    paymentStatus: 'partial',
                    amountPaid: 1000
                },
                error: null
            });
            const result = await _vendorService.recordPayment('vendor-1', 1000);
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.paymentStatus).toBe('partial');
                expect(result.data.amountPaid).toBe(1000);
            }
        });
    });
    describe('Accommodation Service CRUD', ()=>{
        const validAccommodation = {
            name: 'Beach Resort',
            description: 'Luxury beachfront resort',
            status: 'published'
        };
        it('should create accommodation with valid data', async ()=>{
            mockSupabase.single.mockResolvedValue({
                data: {
                    id: 'accommodation-1',
                    ...validAccommodation
                },
                error: null
            });
            const result = await _accommodationService.create(validAccommodation);
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.name).toBe('Beach Resort');
            }
        });
    });
    describe('Data Integrity', ()=>{
        it('should maintain referential integrity on delete', async ()=>{
            // Mock event with activities
            mockSupabase.select.mockResolvedValue({
                data: [
                    {
                        id: 'activity-1',
                        eventId: 'event-1'
                    }
                ],
                error: null
            });
            mockSupabase.single.mockResolvedValue({
                data: null,
                error: null
            });
            // Deleting event should not cascade to independent activities
            const result = await _eventService.delete('event-1');
            expect(result.success).toBe(true);
        });
        it('should handle concurrent updates', async ()=>{
            mockSupabase.single.mockResolvedValue({
                data: {
                    id: 'guest-1',
                    firstName: 'Updated'
                },
                error: null
            });
            // Simulate concurrent updates
            const results = await Promise.all([
                _guestService.update('guest-1', {
                    firstName: 'Update1'
                }),
                _guestService.update('guest-1', {
                    firstName: 'Update2'
                }),
                _guestService.update('guest-1', {
                    firstName: 'Update3'
                })
            ]);
            // All should succeed (last write wins)
            results.forEach((result)=>{
                expect(result.success).toBe(true);
            });
        });
    });
    describe('Error Handling', ()=>{
        it('should handle database connection errors', async ()=>{
            mockSupabase.single.mockResolvedValue({
                data: null,
                error: {
                    message: 'Connection timeout'
                }
            });
            const result = await _guestService.get('guest-1');
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('DATABASE_ERROR');
            }
        });
        it('should handle not found errors', async ()=>{
            mockSupabase.single.mockResolvedValue({
                data: null,
                error: {
                    message: 'Not found',
                    code: 'PGRST116'
                }
            });
            const result = await _guestService.get('nonexistent-id');
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('NOT_FOUND');
            }
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvX190ZXN0c19fL3JlZ3Jlc3Npb24vZGF0YVNlcnZpY2VzLnJlZ3Jlc3Npb24udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFJlZ3Jlc3Npb24gVGVzdCBTdWl0ZTogRGF0YSBTZXJ2aWNlIE9wZXJhdGlvbnNcbiAqIFxuICogVGVzdHMgQ1JVRCBvcGVyYXRpb25zIGFjcm9zcyBhbGwgZGF0YSBzZXJ2aWNlcyB0byBwcmV2ZW50IHJlZ3Jlc3Npb25zIGluOlxuICogLSBHdWVzdCBtYW5hZ2VtZW50XG4gKiAtIEV2ZW50IG1hbmFnZW1lbnRcbiAqIC0gQWN0aXZpdHkgbWFuYWdlbWVudFxuICogLSBSU1ZQIG1hbmFnZW1lbnRcbiAqIC0gVmVuZG9yIG1hbmFnZW1lbnRcbiAqIC0gQWNjb21tb2RhdGlvbiBtYW5hZ2VtZW50XG4gKiBcbiAqIFJlcXVpcmVtZW50czogMjEuMSwgMjEuMlxuICovXG5cbmltcG9ydCAqIGFzIGd1ZXN0U2VydmljZSBmcm9tICdAL3NlcnZpY2VzL2d1ZXN0U2VydmljZSc7XG5pbXBvcnQgKiBhcyBldmVudFNlcnZpY2UgZnJvbSAnQC9zZXJ2aWNlcy9ldmVudFNlcnZpY2UnO1xuaW1wb3J0ICogYXMgYWN0aXZpdHlTZXJ2aWNlIGZyb20gJ0Avc2VydmljZXMvYWN0aXZpdHlTZXJ2aWNlJztcbmltcG9ydCAqIGFzIHJzdnBTZXJ2aWNlIGZyb20gJ0Avc2VydmljZXMvcnN2cFNlcnZpY2UnO1xuaW1wb3J0ICogYXMgdmVuZG9yU2VydmljZSBmcm9tICdAL3NlcnZpY2VzL3ZlbmRvclNlcnZpY2UnO1xuaW1wb3J0ICogYXMgYWNjb21tb2RhdGlvblNlcnZpY2UgZnJvbSAnQC9zZXJ2aWNlcy9hY2NvbW1vZGF0aW9uU2VydmljZSc7XG5cbi8vIE1vY2sgU3VwYWJhc2UgY2xpZW50XG5jb25zdCBtb2NrU3VwYWJhc2UgPSB7XG4gIGZyb206IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICBpbnNlcnQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICB1cGRhdGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICBkZWxldGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICBlcTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gIGluOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgc2luZ2xlOiBqZXN0LmZuKCksXG4gIHJhbmdlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbn07XG5cbmplc3QubW9jaygnQC9saWIvc3VwYWJhc2UnLCAoKSA9PiAoe1xuICBjcmVhdGVDbGllbnQ6IGplc3QuZm4oKCkgPT4gbW9ja1N1cGFiYXNlKSxcbn0pKTtcblxuZGVzY3JpYmUoJ1JlZ3Jlc3Npb246IERhdGEgU2VydmljZSBPcGVyYXRpb25zJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0d1ZXN0IFNlcnZpY2UgQ1JVRCcsICgpID0+IHtcbiAgICBjb25zdCB2YWxpZEd1ZXN0ID0ge1xuICAgICAgZmlyc3ROYW1lOiAnSm9obicsXG4gICAgICBsYXN0TmFtZTogJ0RvZScsXG4gICAgICBlbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nLFxuICAgICAgZ3JvdXBJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICBhZ2VUeXBlOiAnYWR1bHQnIGFzIGNvbnN0LFxuICAgICAgZ3Vlc3RUeXBlOiAnd2VkZGluZ19ndWVzdCcgYXMgY29uc3QsXG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgY3JlYXRlIGd1ZXN0IHdpdGggdmFsaWQgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZS5zaW5nbGUubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB7IGlkOiAnZ3Vlc3QtMScsIC4uLnZhbGlkR3Vlc3QgfSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlLmNyZWF0ZSh2YWxpZEd1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5pZCkudG9CZSgnZ3Vlc3QtMScpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuZmlyc3ROYW1lKS50b0JlKCdKb2huJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHJpZXZlIGd1ZXN0IGJ5IElEJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlLnNpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IHsgaWQ6ICdndWVzdC0xJywgLi4udmFsaWRHdWVzdCB9LFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2UuZ2V0KCdndWVzdC0xJyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuaWQpLnRvQmUoJ2d1ZXN0LTEnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXBkYXRlIGd1ZXN0IGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrU3VwYWJhc2Uuc2luZ2xlLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogeyBpZDogJ2d1ZXN0LTEnLCAuLi52YWxpZEd1ZXN0LCBmaXJzdE5hbWU6ICdKYW5lJyB9LFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2UudXBkYXRlKCdndWVzdC0xJywge1xuICAgICAgICBmaXJzdE5hbWU6ICdKYW5lJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmZpcnN0TmFtZSkudG9CZSgnSmFuZScpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkZWxldGUgZ3Vlc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrU3VwYWJhc2Uuc2luZ2xlLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlLmRlbGV0ZSgnZ3Vlc3QtMScpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxpc3QgZ3Vlc3RzIHdpdGggcGFnaW5hdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZS5yYW5nZS5tb2NrUmV0dXJuVGhpcygpO1xuICAgICAgbW9ja1N1cGFiYXNlLnNlbGVjdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IFtcbiAgICAgICAgICB7IGlkOiAnZ3Vlc3QtMScsIC4uLnZhbGlkR3Vlc3QgfSxcbiAgICAgICAgICB7IGlkOiAnZ3Vlc3QtMicsIC4uLnZhbGlkR3Vlc3QsIGZpcnN0TmFtZTogJ0phbmUnIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICBjb3VudDogMixcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2UubGlzdCh7IHBhZ2U6IDEsIHBhZ2VTaXplOiAxMCB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5sZW5ndGgpLnRvQmUoMik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFdmVudCBTZXJ2aWNlIENSVUQnLCAoKSA9PiB7XG4gICAgY29uc3QgdmFsaWRFdmVudCA9IHtcbiAgICAgIG5hbWU6ICdXZWRkaW5nIENlcmVtb255JyxcbiAgICAgIGV2ZW50VHlwZTogJ2NlcmVtb255JyBhcyBjb25zdCxcbiAgICAgIHN0YXJ0RGF0ZTogbmV3IERhdGUoJzIwMjUtMDYtMTVUMTQ6MDA6MDBaJyksXG4gICAgICByc3ZwUmVxdWlyZWQ6IHRydWUsXG4gICAgICB2aXNpYmlsaXR5OiBbJ3dlZGRpbmdfcGFydHknLCAnd2VkZGluZ19ndWVzdCddLFxuICAgICAgc3RhdHVzOiAncHVibGlzaGVkJyBhcyBjb25zdCxcbiAgICB9O1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgZXZlbnQgd2l0aCB2YWxpZCBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlLnNpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IHsgaWQ6ICdldmVudC0xJywgLi4udmFsaWRFdmVudCB9LFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBldmVudFNlcnZpY2UuY3JlYXRlKHZhbGlkRXZlbnQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmlkKS50b0JlKCdldmVudC0xJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5uYW1lKS50b0JlKCdXZWRkaW5nIENlcmVtb255Jyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRldGVjdCBzY2hlZHVsaW5nIGNvbmZsaWN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZsaWN0aW5nRXZlbnQgPSB7XG4gICAgICAgIC4uLnZhbGlkRXZlbnQsXG4gICAgICAgIG5hbWU6ICdDb25mbGljdGluZyBFdmVudCcsXG4gICAgICAgIGxvY2F0aW9uSWQ6ICdsb2NhdGlvbi0xJyxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tTdXBhYmFzZS5zZWxlY3QubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBbeyBpZDogJ2V2ZW50LTEnLCAuLi52YWxpZEV2ZW50LCBsb2NhdGlvbklkOiAnbG9jYXRpb24tMScgfV0sXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV2ZW50U2VydmljZS5jaGVja1NjaGVkdWxpbmdDb25mbGljdChcbiAgICAgICAgY29uZmxpY3RpbmdFdmVudFxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5oYXNDb25mbGljdCkudG9CZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FjdGl2aXR5IFNlcnZpY2UgQ1JVRCcsICgpID0+IHtcbiAgICBjb25zdCB2YWxpZEFjdGl2aXR5ID0ge1xuICAgICAgbmFtZTogJ0JlYWNoIFZvbGxleWJhbGwnLFxuICAgICAgYWN0aXZpdHlUeXBlOiAnYWN0aXZpdHknIGFzIGNvbnN0LFxuICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgnMjAyNS0wNi0xNlQxMDowMDowMFonKSxcbiAgICAgIGNhcGFjaXR5OiAyMCxcbiAgICAgIGNvc3RQZXJQZXJzb246IDI1LFxuICAgICAgaG9zdFN1YnNpZHk6IDEwLFxuICAgICAgYWR1bHRzT25seTogZmFsc2UsXG4gICAgICBwbHVzT25lQWxsb3dlZDogdHJ1ZSxcbiAgICAgIHZpc2liaWxpdHk6IFsnd2VkZGluZ19ndWVzdCddLFxuICAgICAgc3RhdHVzOiAncHVibGlzaGVkJyBhcyBjb25zdCxcbiAgICAgIGRpc3BsYXlPcmRlcjogMSxcbiAgICB9O1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgYWN0aXZpdHkgd2l0aCB2YWxpZCBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlLnNpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IHsgaWQ6ICdhY3Rpdml0eS0xJywgLi4udmFsaWRBY3Rpdml0eSB9LFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhY3Rpdml0eVNlcnZpY2UuY3JlYXRlKHZhbGlkQWN0aXZpdHkpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmlkKS50b0JlKCdhY3Rpdml0eS0xJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5jYXBhY2l0eSkudG9CZSgyMCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRBY3Rpdml0eSA9IHtcbiAgICAgICAgYWN0aXZpdHlUeXBlOiAnYWN0aXZpdHknIGFzIGNvbnN0LFxuICAgICAgICAvLyBNaXNzaW5nIG5hbWUgYW5kIHN0YXJ0VGltZVxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWN0aXZpdHlTZXJ2aWNlLmNyZWF0ZShpbnZhbGlkQWN0aXZpdHkgYXMgYW55KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSU1ZQIFNlcnZpY2UgQ1JVRCcsICgpID0+IHtcbiAgICBjb25zdCB2YWxpZFJTVlAgPSB7XG4gICAgICBndWVzdElkOiAnZ3Vlc3QtMScsXG4gICAgICBldmVudElkOiAnZXZlbnQtMScsXG4gICAgICBzdGF0dXM6ICdhdHRlbmRpbmcnIGFzIGNvbnN0LFxuICAgICAgZ3Vlc3RDb3VudDogMixcbiAgICAgIGRpZXRhcnlOb3RlczogJ1ZlZ2V0YXJpYW4nLFxuICAgIH07XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBSU1ZQIHdpdGggdmFsaWQgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZS5zaW5nbGUubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB7IGlkOiAncnN2cC0xJywgLi4udmFsaWRSU1ZQIH0sXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJzdnBTZXJ2aWNlLmNyZWF0ZSh2YWxpZFJTVlApO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnN0YXR1cykudG9CZSgnYXR0ZW5kaW5nJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSBSU1ZQIHN0YXR1cycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZS5zaW5nbGUubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB7IGlkOiAncnN2cC0xJywgLi4udmFsaWRSU1ZQLCBzdGF0dXM6ICdkZWNsaW5lZCcgfSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcnN2cFNlcnZpY2UudXBkYXRlKCdyc3ZwLTEnLCB7XG4gICAgICAgIHN0YXR1czogJ2RlY2xpbmVkJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnN0YXR1cykudG9CZSgnZGVjbGluZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1ZlbmRvciBTZXJ2aWNlIENSVUQnLCAoKSA9PiB7XG4gICAgY29uc3QgdmFsaWRWZW5kb3IgPSB7XG4gICAgICBuYW1lOiAnUGVyZmVjdCBQaG90b3MnLFxuICAgICAgY2F0ZWdvcnk6ICdwaG90b2dyYXBoeScgYXMgY29uc3QsXG4gICAgICBwcmljaW5nTW9kZWw6ICdmbGF0X3JhdGUnIGFzIGNvbnN0LFxuICAgICAgYmFzZUNvc3Q6IDI1MDAsXG4gICAgICBwYXltZW50U3RhdHVzOiAndW5wYWlkJyBhcyBjb25zdCxcbiAgICAgIGFtb3VudFBhaWQ6IDAsXG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgY3JlYXRlIHZlbmRvciB3aXRoIHZhbGlkIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrU3VwYWJhc2Uuc2luZ2xlLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogeyBpZDogJ3ZlbmRvci0xJywgLi4udmFsaWRWZW5kb3IgfSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdmVuZG9yU2VydmljZS5jcmVhdGUodmFsaWRWZW5kb3IpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmNhdGVnb3J5KS50b0JlKCdwaG90b2dyYXBoeScpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgcGF5bWVudCBzdGF0dXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrU3VwYWJhc2Uuc2luZ2xlLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGlkOiAndmVuZG9yLTEnLFxuICAgICAgICAgIC4uLnZhbGlkVmVuZG9yLFxuICAgICAgICAgIHBheW1lbnRTdGF0dXM6ICdwYXJ0aWFsJyxcbiAgICAgICAgICBhbW91bnRQYWlkOiAxMDAwLFxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB2ZW5kb3JTZXJ2aWNlLnJlY29yZFBheW1lbnQoJ3ZlbmRvci0xJywgMTAwMCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEucGF5bWVudFN0YXR1cykudG9CZSgncGFydGlhbCcpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuYW1vdW50UGFpZCkudG9CZSgxMDAwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FjY29tbW9kYXRpb24gU2VydmljZSBDUlVEJywgKCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkQWNjb21tb2RhdGlvbiA9IHtcbiAgICAgIG5hbWU6ICdCZWFjaCBSZXNvcnQnLFxuICAgICAgZGVzY3JpcHRpb246ICdMdXh1cnkgYmVhY2hmcm9udCByZXNvcnQnLFxuICAgICAgc3RhdHVzOiAncHVibGlzaGVkJyBhcyBjb25zdCxcbiAgICB9O1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgYWNjb21tb2RhdGlvbiB3aXRoIHZhbGlkIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrU3VwYWJhc2Uuc2luZ2xlLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogeyBpZDogJ2FjY29tbW9kYXRpb24tMScsIC4uLnZhbGlkQWNjb21tb2RhdGlvbiB9LFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhY2NvbW1vZGF0aW9uU2VydmljZS5jcmVhdGUodmFsaWRBY2NvbW1vZGF0aW9uKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5uYW1lKS50b0JlKCdCZWFjaCBSZXNvcnQnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0RhdGEgSW50ZWdyaXR5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbWFpbnRhaW4gcmVmZXJlbnRpYWwgaW50ZWdyaXR5IG9uIGRlbGV0ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgZXZlbnQgd2l0aCBhY3Rpdml0aWVzXG4gICAgICBtb2NrU3VwYWJhc2Uuc2VsZWN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogW3sgaWQ6ICdhY3Rpdml0eS0xJywgZXZlbnRJZDogJ2V2ZW50LTEnIH1dLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICBtb2NrU3VwYWJhc2Uuc2luZ2xlLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgLy8gRGVsZXRpbmcgZXZlbnQgc2hvdWxkIG5vdCBjYXNjYWRlIHRvIGluZGVwZW5kZW50IGFjdGl2aXRpZXNcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV2ZW50U2VydmljZS5kZWxldGUoJ2V2ZW50LTEnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29uY3VycmVudCB1cGRhdGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlLnNpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IHsgaWQ6ICdndWVzdC0xJywgZmlyc3ROYW1lOiAnVXBkYXRlZCcgfSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgLy8gU2ltdWxhdGUgY29uY3VycmVudCB1cGRhdGVzXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBndWVzdFNlcnZpY2UudXBkYXRlKCdndWVzdC0xJywgeyBmaXJzdE5hbWU6ICdVcGRhdGUxJyB9KSxcbiAgICAgICAgZ3Vlc3RTZXJ2aWNlLnVwZGF0ZSgnZ3Vlc3QtMScsIHsgZmlyc3ROYW1lOiAnVXBkYXRlMicgfSksXG4gICAgICAgIGd1ZXN0U2VydmljZS51cGRhdGUoJ2d1ZXN0LTEnLCB7IGZpcnN0TmFtZTogJ1VwZGF0ZTMnIH0pLFxuICAgICAgXSk7XG5cbiAgICAgIC8vIEFsbCBzaG91bGQgc3VjY2VlZCAobGFzdCB3cml0ZSB3aW5zKVxuICAgICAgcmVzdWx0cy5mb3JFYWNoKChyZXN1bHQpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkYXRhYmFzZSBjb25uZWN0aW9uIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZS5zaW5nbGUubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBlcnJvcjogeyBtZXNzYWdlOiAnQ29ubmVjdGlvbiB0aW1lb3V0JyB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1ZXN0U2VydmljZS5nZXQoJ2d1ZXN0LTEnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdEQVRBQkFTRV9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbm90IGZvdW5kIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZS5zaW5nbGUubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBlcnJvcjogeyBtZXNzYWdlOiAnTm90IGZvdW5kJywgY29kZTogJ1BHUlNUMTE2JyB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1ZXN0U2VydmljZS5nZXQoJ25vbmV4aXN0ZW50LWlkJyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnTk9UX0ZPVU5EJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJjcmVhdGVDbGllbnQiLCJmbiIsIm1vY2tTdXBhYmFzZSIsImZyb20iLCJtb2NrUmV0dXJuVGhpcyIsInNlbGVjdCIsImluc2VydCIsInVwZGF0ZSIsImRlbGV0ZSIsImVxIiwiaW4iLCJzaW5nbGUiLCJyYW5nZSIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJ2YWxpZEd1ZXN0IiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJlbWFpbCIsImdyb3VwSWQiLCJhZ2VUeXBlIiwiZ3Vlc3RUeXBlIiwiaXQiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImRhdGEiLCJpZCIsImVycm9yIiwicmVzdWx0IiwiZ3Vlc3RTZXJ2aWNlIiwiY3JlYXRlIiwiZXhwZWN0Iiwic3VjY2VzcyIsInRvQmUiLCJnZXQiLCJjb3VudCIsImxpc3QiLCJwYWdlIiwicGFnZVNpemUiLCJsZW5ndGgiLCJ2YWxpZEV2ZW50IiwibmFtZSIsImV2ZW50VHlwZSIsInN0YXJ0RGF0ZSIsIkRhdGUiLCJyc3ZwUmVxdWlyZWQiLCJ2aXNpYmlsaXR5Iiwic3RhdHVzIiwiZXZlbnRTZXJ2aWNlIiwiY29uZmxpY3RpbmdFdmVudCIsImxvY2F0aW9uSWQiLCJjaGVja1NjaGVkdWxpbmdDb25mbGljdCIsImhhc0NvbmZsaWN0IiwidmFsaWRBY3Rpdml0eSIsImFjdGl2aXR5VHlwZSIsInN0YXJ0VGltZSIsImNhcGFjaXR5IiwiY29zdFBlclBlcnNvbiIsImhvc3RTdWJzaWR5IiwiYWR1bHRzT25seSIsInBsdXNPbmVBbGxvd2VkIiwiZGlzcGxheU9yZGVyIiwiYWN0aXZpdHlTZXJ2aWNlIiwiaW52YWxpZEFjdGl2aXR5IiwiY29kZSIsInZhbGlkUlNWUCIsImd1ZXN0SWQiLCJldmVudElkIiwiZ3Vlc3RDb3VudCIsImRpZXRhcnlOb3RlcyIsInJzdnBTZXJ2aWNlIiwidmFsaWRWZW5kb3IiLCJjYXRlZ29yeSIsInByaWNpbmdNb2RlbCIsImJhc2VDb3N0IiwicGF5bWVudFN0YXR1cyIsImFtb3VudFBhaWQiLCJ2ZW5kb3JTZXJ2aWNlIiwicmVjb3JkUGF5bWVudCIsInZhbGlkQWNjb21tb2RhdGlvbiIsImRlc2NyaXB0aW9uIiwiYWNjb21tb2RhdGlvblNlcnZpY2UiLCJyZXN1bHRzIiwiUHJvbWlzZSIsImFsbCIsImZvckVhY2giLCJtZXNzYWdlIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7O0NBWUM7QUFzQkRBLEtBQUtDLElBQUksQ0FBQyxrQkFBa0IsSUFBTyxDQUFBO1FBQ2pDQyxjQUFjRixLQUFLRyxFQUFFLENBQUMsSUFBTUM7SUFDOUIsQ0FBQTs7OztzRUF0QjhCO3NFQUNBO3lFQUNHO3FFQUNKO3VFQUNFOzhFQUNPOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFdEMsdUJBQXVCO0FBQ3ZCLE1BQU1BLGVBQWU7SUFDbkJDLE1BQU1MLEtBQUtHLEVBQUUsR0FBR0csY0FBYztJQUM5QkMsUUFBUVAsS0FBS0csRUFBRSxHQUFHRyxjQUFjO0lBQ2hDRSxRQUFRUixLQUFLRyxFQUFFLEdBQUdHLGNBQWM7SUFDaENHLFFBQVFULEtBQUtHLEVBQUUsR0FBR0csY0FBYztJQUNoQ0ksUUFBUVYsS0FBS0csRUFBRSxHQUFHRyxjQUFjO0lBQ2hDSyxJQUFJWCxLQUFLRyxFQUFFLEdBQUdHLGNBQWM7SUFDNUJNLElBQUlaLEtBQUtHLEVBQUUsR0FBR0csY0FBYztJQUM1Qk8sUUFBUWIsS0FBS0csRUFBRTtJQUNmVyxPQUFPZCxLQUFLRyxFQUFFLEdBQUdHLGNBQWM7QUFDakM7QUFNQVMsU0FBUyx1Q0FBdUM7SUFDOUNDLFdBQVc7UUFDVGhCLEtBQUtpQixhQUFhO0lBQ3BCO0lBRUFGLFNBQVMsc0JBQXNCO1FBQzdCLE1BQU1HLGFBQWE7WUFDakJDLFdBQVc7WUFDWEMsVUFBVTtZQUNWQyxPQUFPO1lBQ1BDLFNBQVM7WUFDVEMsU0FBUztZQUNUQyxXQUFXO1FBQ2I7UUFFQUMsR0FBRyx1Q0FBdUM7WUFDeENyQixhQUFhUyxNQUFNLENBQUNhLGlCQUFpQixDQUFDO2dCQUNwQ0MsTUFBTTtvQkFBRUMsSUFBSTtvQkFBVyxHQUFHVixVQUFVO2dCQUFDO2dCQUNyQ1csT0FBTztZQUNUO1lB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