{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/__tests__/regression/dataServices.regression.test.ts"],"sourcesContent":["/**\n * Regression Test Suite: Data Service Operations\n * \n * Tests CRUD operations across all data services to prevent regressions in:\n * - Guest management\n * - Event management\n * - Activity management\n * - RSVP management\n * - Vendor management\n * - Accommodation management\n * \n * Requirements: 21.1, 21.2\n */\n\nimport * as guestService from '@/services/guestService';\nimport * as eventService from '@/services/eventService';\nimport * as activityService from '@/services/activityService';\nimport * as rsvpService from '@/services/rsvpService';\nimport * as vendorService from '@/services/vendorService';\nimport * as accommodationService from '@/services/accommodationService';\n\n// Mock Supabase client\nconst mockSupabase = {\n  from: jest.fn().mockReturnThis(),\n  select: jest.fn().mockReturnThis(),\n  insert: jest.fn().mockReturnThis(),\n  update: jest.fn().mockReturnThis(),\n  delete: jest.fn().mockReturnThis(),\n  eq: jest.fn().mockReturnThis(),\n  in: jest.fn().mockReturnThis(),\n  single: jest.fn(),\n  range: jest.fn().mockReturnThis(),\n};\n\njest.mock('@/lib/supabase', () => ({\n  createClient: jest.fn(() => mockSupabase),\n}));\n\ndescribe('Regression: Data Service Operations', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Guest Service CRUD', () => {\n    const validGuest = {\n      firstName: 'John',\n      lastName: 'Doe',\n      email: 'john@example.com',\n      groupId: '123e4567-e89b-12d3-a456-426614174000',\n      ageType: 'adult' as const,\n      guestType: 'wedding_guest' as const,\n    };\n\n    it('should create guest with valid data', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: { id: 'guest-1', ...validGuest },\n        error: null,\n      });\n\n      const result = await guestService.create(validGuest);\n\n      expect(result.success).toBe(true);\n      if (result.success) {\n        expect(result.data.id).toBe('guest-1');\n        expect(result.data.firstName).toBe('John');\n      }\n    });\n\n    it('should retrieve guest by ID', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: { id: 'guest-1', ...validGuest },\n        error: null,\n      });\n\n      const result = await guestService.get('guest-1');\n\n      expect(result.success).toBe(true);\n      if (result.success) {\n        expect(result.data.id).toBe('guest-1');\n      }\n    });\n\n    it('should update guest data', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: { id: 'guest-1', ...validGuest, firstName: 'Jane' },\n        error: null,\n      });\n\n      const result = await guestService.update('guest-1', {\n        firstName: 'Jane',\n      });\n\n      expect(result.success).toBe(true);\n      if (result.success) {\n        expect(result.data.firstName).toBe('Jane');\n      }\n    });\n\n    it('should delete guest', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: null,\n        error: null,\n      });\n\n      const result = await guestService.delete('guest-1');\n\n      expect(result.success).toBe(true);\n    });\n\n    it('should list guests with pagination', async () => {\n      mockSupabase.range.mockReturnThis();\n      mockSupabase.select.mockResolvedValue({\n        data: [\n          { id: 'guest-1', ...validGuest },\n          { id: 'guest-2', ...validGuest, firstName: 'Jane' },\n        ],\n        error: null,\n        count: 2,\n      });\n\n      const result = await guestService.list({ page: 1, pageSize: 10 });\n\n      expect(result.success).toBe(true);\n      if (result.success) {\n        expect(result.data.length).toBe(2);\n      }\n    });\n  });\n\n  describe('Event Service CRUD', () => {\n    const validEvent = {\n      name: 'Wedding Ceremony',\n      eventType: 'ceremony' as const,\n      startDate: new Date('2025-06-15T14:00:00Z'),\n      rsvpRequired: true,\n      visibility: ['wedding_party', 'wedding_guest'],\n      status: 'published' as const,\n    };\n\n    it('should create event with valid data', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: { id: 'event-1', ...validEvent },\n        error: null,\n      });\n\n      const result = await eventService.create(validEvent);\n\n      expect(result.success).toBe(true);\n      if (result.success) {\n        expect(result.data.id).toBe('event-1');\n        expect(result.data.name).toBe('Wedding Ceremony');\n      }\n    });\n\n    it('should detect scheduling conflicts', async () => {\n      const conflictingEvent = {\n        ...validEvent,\n        name: 'Conflicting Event',\n        locationId: 'location-1',\n      };\n\n      mockSupabase.select.mockResolvedValue({\n        data: [{ id: 'event-1', ...validEvent, locationId: 'location-1' }],\n        error: null,\n      });\n\n      const result = await eventService.checkSchedulingConflict(\n        conflictingEvent\n      );\n\n      expect(result.success).toBe(true);\n      if (result.success) {\n        expect(result.data.hasConflict).toBe(true);\n      }\n    });\n  });\n\n  describe('Activity Service CRUD', () => {\n    const validActivity = {\n      name: 'Beach Volleyball',\n      activityType: 'activity' as const,\n      startTime: new Date('2025-06-16T10:00:00Z'),\n      capacity: 20,\n      costPerPerson: 25,\n      hostSubsidy: 10,\n      adultsOnly: false,\n      plusOneAllowed: true,\n      visibility: ['wedding_guest'],\n      status: 'published' as const,\n      displayOrder: 1,\n    };\n\n    it('should create activity with valid data', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: { id: 'activity-1', ...validActivity },\n        error: null,\n      });\n\n      const result = await activityService.create(validActivity);\n\n      expect(result.success).toBe(true);\n      if (result.success) {\n        expect(result.data.id).toBe('activity-1');\n        expect(result.data.capacity).toBe(20);\n      }\n    });\n\n    it('should validate required fields', async () => {\n      const invalidActivity = {\n        activityType: 'activity' as const,\n        // Missing name and startTime\n      };\n\n      const result = await activityService.create(invalidActivity as any);\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.code).toBe('VALIDATION_ERROR');\n      }\n    });\n  });\n\n  describe('RSVP Service CRUD', () => {\n    const validRSVP = {\n      guestId: 'guest-1',\n      eventId: 'event-1',\n      status: 'attending' as const,\n      guestCount: 2,\n      dietaryNotes: 'Vegetarian',\n    };\n\n    it('should create RSVP with valid data', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: { id: 'rsvp-1', ...validRSVP },\n        error: null,\n      });\n\n      const result = await rsvpService.create(validRSVP);\n\n      expect(result.success).toBe(true);\n      if (result.success) {\n        expect(result.data.status).toBe('attending');\n      }\n    });\n\n    it('should update RSVP status', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: { id: 'rsvp-1', ...validRSVP, status: 'declined' },\n        error: null,\n      });\n\n      const result = await rsvpService.update('rsvp-1', {\n        status: 'declined',\n      });\n\n      expect(result.success).toBe(true);\n      if (result.success) {\n        expect(result.data.status).toBe('declined');\n      }\n    });\n  });\n\n  describe('Vendor Service CRUD', () => {\n    const validVendor = {\n      name: 'Perfect Photos',\n      category: 'photography' as const,\n      pricingModel: 'flat_rate' as const,\n      baseCost: 2500,\n      paymentStatus: 'unpaid' as const,\n      amountPaid: 0,\n    };\n\n    it('should create vendor with valid data', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: { id: 'vendor-1', ...validVendor },\n        error: null,\n      });\n\n      const result = await vendorService.create(validVendor);\n\n      expect(result.success).toBe(true);\n      if (result.success) {\n        expect(result.data.category).toBe('photography');\n      }\n    });\n\n    it('should update payment status', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: {\n          id: 'vendor-1',\n          ...validVendor,\n          paymentStatus: 'partial',\n          amountPaid: 1000,\n        },\n        error: null,\n      });\n\n      const result = await vendorService.recordPayment('vendor-1', 1000);\n\n      expect(result.success).toBe(true);\n      if (result.success) {\n        expect(result.data.paymentStatus).toBe('partial');\n        expect(result.data.amountPaid).toBe(1000);\n      }\n    });\n  });\n\n  describe('Accommodation Service CRUD', () => {\n    const validAccommodation = {\n      name: 'Beach Resort',\n      description: 'Luxury beachfront resort',\n      status: 'published' as const,\n    };\n\n    it('should create accommodation with valid data', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: { id: 'accommodation-1', ...validAccommodation },\n        error: null,\n      });\n\n      const result = await accommodationService.create(validAccommodation);\n\n      expect(result.success).toBe(true);\n      if (result.success) {\n        expect(result.data.name).toBe('Beach Resort');\n      }\n    });\n  });\n\n  describe('Data Integrity', () => {\n    it('should maintain referential integrity on delete', async () => {\n      // Mock event with activities\n      mockSupabase.select.mockResolvedValue({\n        data: [{ id: 'activity-1', eventId: 'event-1' }],\n        error: null,\n      });\n\n      mockSupabase.single.mockResolvedValue({\n        data: null,\n        error: null,\n      });\n\n      // Deleting event should not cascade to independent activities\n      const result = await eventService.delete('event-1');\n\n      expect(result.success).toBe(true);\n    });\n\n    it('should handle concurrent updates', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: { id: 'guest-1', firstName: 'Updated' },\n        error: null,\n      });\n\n      // Simulate concurrent updates\n      const results = await Promise.all([\n        guestService.update('guest-1', { firstName: 'Update1' }),\n        guestService.update('guest-1', { firstName: 'Update2' }),\n        guestService.update('guest-1', { firstName: 'Update3' }),\n      ]);\n\n      // All should succeed (last write wins)\n      results.forEach((result) => {\n        expect(result.success).toBe(true);\n      });\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle database connection errors', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: null,\n        error: { message: 'Connection timeout' },\n      });\n\n      const result = await guestService.get('guest-1');\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.code).toBe('DATABASE_ERROR');\n      }\n    });\n\n    it('should handle not found errors', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: null,\n        error: { message: 'Not found', code: 'PGRST116' },\n      });\n\n      const result = await guestService.get('nonexistent-id');\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.code).toBe('NOT_FOUND');\n      }\n    });\n  });\n});\n"],"names":["jest","mock","createClient","fn","mockSupabase","from","mockReturnThis","select","insert","update","delete","eq","in","single","range","describe","beforeEach","clearAllMocks","validGuest","firstName","lastName","email","groupId","ageType","guestType","it","mockResolvedValue","data","id","error","result","guestService","create","expect","success","toBe","get","count","list","page","pageSize","length","validEvent","name","eventType","startDate","Date","rsvpRequired","visibility","status","eventService","conflictingEvent","locationId","checkSchedulingConflict","hasConflict","validActivity","activityType","startTime","capacity","costPerPerson","hostSubsidy","adultsOnly","plusOneAllowed","displayOrder","activityService","invalidActivity","code","validRSVP","guestId","eventId","guestCount","dietaryNotes","rsvpService","validVendor","category","pricingModel","baseCost","paymentStatus","amountPaid","vendorService","recordPayment","validAccommodation","description","accommodationService","results","Promise","all","forEach","message"],"mappings":"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"}