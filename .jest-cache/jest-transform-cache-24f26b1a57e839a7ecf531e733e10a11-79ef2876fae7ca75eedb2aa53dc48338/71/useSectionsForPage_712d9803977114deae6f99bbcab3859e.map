{"version":3,"names":["cov_1xrs2oqi0k","actualCoverage","s","useSectionsForPage","pageType","pageId","f","sections","setSections","_react","useState","loading","setLoading","error","setError","fetchSections","b","response","fetch","ok","Error","statusText","result","json","success","sortedSections","data","sort","a","display_order","message","err","console","useEffect","refetch"],"sources":["/Users/jaron/Desktop/wedding-platform-v2/hooks/useSectionsForPage.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\n\ninterface Column {\n  id: string;\n  section_id: string;\n  column_number: 1 | 2;\n  content_type: 'rich_text' | 'photo_gallery' | 'references';\n  content_data: any;\n  created_at: string;\n  updated_at: string;\n}\n\ninterface Section {\n  id: string;\n  title?: string;\n  page_type: 'activity' | 'event' | 'accommodation' | 'room_type' | 'custom' | 'home';\n  page_id: string;\n  display_order: number;\n  created_at: string;\n  updated_at: string;\n  columns: Column[];\n}\n\ninterface UseSectionsForPageReturn {\n  sections: Section[];\n  loading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n}\n\n/**\n * Hook to fetch sections for a specific page\n * \n * @param pageType - Type of page (activity, event, accommodation, etc.)\n * @param pageId - ID of the page\n * @returns Sections data, loading state, error, and refetch function\n */\nexport function useSectionsForPage(\n  pageType: string,\n  pageId: string\n): UseSectionsForPageReturn {\n  const [sections, setSections] = useState<Section[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n\n  const fetchSections = async () => {\n    if (!pageType || !pageId) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response = await fetch(\n        `/api/admin/sections?pageType=${pageType}&pageId=${pageId}`\n      );\n\n      if (!response.ok) {\n        throw new Error(`Failed to fetch sections: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n\n      if (result.success) {\n        // Sort sections by display_order\n        const sortedSections = (result.data || []).sort(\n          (a: Section, b: Section) => a.display_order - b.display_order\n        );\n        setSections(sortedSections);\n      } else {\n        throw new Error(result.error?.message || 'Failed to fetch sections');\n      }\n    } catch (err) {\n      console.error('Error fetching sections:', err);\n      setError(err instanceof Error ? err : new Error('Unknown error'));\n      setSections([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchSections();\n  }, [pageType, pageId]);\n\n  return {\n    sections,\n    loading,\n    error,\n    refetch: fetchSections,\n  };\n}\n"],"mappings":"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","ignoreList":[]}