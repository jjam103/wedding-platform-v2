7a44b47824824edd3a52fd1963a87a36
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _PhotoPicker = require("./PhotoPicker");
// Mock fetch
global.fetch = jest.fn();
const mockPhotos = [
    {
        id: 'photo-1',
        photo_url: 'https://example.com/photo1.jpg',
        caption: 'Photo 1',
        alt_text: 'Alt text 1',
        moderation_status: 'approved',
        created_at: '2025-01-01T00:00:00Z'
    },
    {
        id: 'photo-2',
        photo_url: 'https://example.com/photo2.jpg',
        caption: 'Photo 2',
        alt_text: 'Alt text 2',
        moderation_status: 'approved',
        created_at: '2025-01-02T00:00:00Z'
    },
    {
        id: 'photo-3',
        photo_url: 'https://example.com/photo3.jpg',
        caption: 'Photo 3',
        alt_text: 'Alt text 3',
        moderation_status: 'approved',
        created_at: '2025-01-03T00:00:00Z'
    }
];
describe('PhotoPicker', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    describe('rendering', ()=>{
        it('should render add photos button', ()=>{
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [],
                onSelectionChange: onSelectionChange
            }));
            expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
        });
        it('should show selected photos count when photos are selected', ()=>{
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1',
                    'photo-2'
                ],
                onSelectionChange: onSelectionChange
            }));
            expect(_react.screen.getByText('Selected Photos (2)')).toBeInTheDocument();
        });
        it('should not show selected photos section when no photos selected', ()=>{
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [],
                onSelectionChange: onSelectionChange
            }));
            expect(_react.screen.queryByText(/Selected Photos/)).not.toBeInTheDocument();
        });
    });
    describe('photo picker modal', ()=>{
        it('should open modal when add photos button is clicked', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: {
                            photos: mockPhotos,
                            total: 3
                        }
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [],
                onSelectionChange: onSelectionChange
            }));
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Select Photos')).toBeInTheDocument();
            });
        });
        it('should fetch photos when modal opens', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: {
                            photos: mockPhotos,
                            total: 3
                        }
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [],
                onSelectionChange: onSelectionChange,
                pageType: "event",
                pageId: "event-123"
            }));
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('/api/admin/photos'));
                expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('page_type=event'));
                expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('page_id=event-123'));
            });
        });
        it('should display loading state while fetching photos', async ()=>{
            global.fetch.mockImplementationOnce(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            json: async ()=>({
                                    success: true,
                                    data: {
                                        photos: mockPhotos,
                                        total: 3
                                    }
                                })
                        }), 100)));
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [],
                onSelectionChange: onSelectionChange
            }));
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Loading photos...')).toBeInTheDocument();
            });
        });
        it('should display error message when fetch fails', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: false,
                        error: {
                            message: 'Failed to load photos'
                        }
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [],
                onSelectionChange: onSelectionChange
            }));
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Failed to load photos')).toBeInTheDocument();
            });
        });
        it('should display message when no photos available', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: {
                            photos: [],
                            total: 0
                        }
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [],
                onSelectionChange: onSelectionChange
            }));
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('No approved photos available.')).toBeInTheDocument();
            });
        });
        it('should close modal when close button is clicked', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: {
                            photos: mockPhotos,
                            total: 3
                        }
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [],
                onSelectionChange: onSelectionChange
            }));
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Select Photos')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByLabelText('Close photo picker'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Select Photos')).not.toBeInTheDocument();
            });
        });
        it('should close modal when done button is clicked', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: {
                            photos: mockPhotos,
                            total: 3
                        }
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [],
                onSelectionChange: onSelectionChange
            }));
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Select Photos')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByText('Done'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Select Photos')).not.toBeInTheDocument();
            });
        });
    });
    describe('photo selection', ()=>{
        it('should call onSelectionChange when photo is selected', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: {
                            photos: mockPhotos,
                            total: 3
                        }
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [],
                onSelectionChange: onSelectionChange
            }));
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Alt text 1')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByAltText('Alt text 1'));
            expect(onSelectionChange).toHaveBeenCalledWith([
                'photo-1'
            ]);
        });
        it('should call onSelectionChange when photo is deselected', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: {
                            photos: mockPhotos,
                            total: 3
                        }
                    })
            });
            const onSelectionChange = jest.fn();
            const { container } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1'
                ],
                onSelectionChange: onSelectionChange
            }));
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                const images = _react.screen.getAllByAltText('Alt text 1');
                expect(images.length).toBeGreaterThan(0);
            });
            // Click the photo in the modal (second instance)
            const images = _react.screen.getAllByAltText('Alt text 1');
            _react.fireEvent.click(images[images.length - 1]);
            expect(onSelectionChange).toHaveBeenCalledWith([]);
        });
        it('should support multiple photo selection', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: {
                            photos: mockPhotos,
                            total: 3
                        }
                    })
            });
            const onSelectionChange = jest.fn();
            const { unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [],
                onSelectionChange: onSelectionChange
            }));
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Alt text 1')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByAltText('Alt text 1'));
            expect(onSelectionChange).toHaveBeenCalledWith([
                'photo-1'
            ]);
            // Clean up first render
            unmount();
            // Simulate re-render with updated selection
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: {
                            photos: mockPhotos,
                            total: 3
                        }
                    })
            });
            onSelectionChange.mockClear();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1'
                ],
                onSelectionChange: onSelectionChange
            }));
            _react.fireEvent.click(_react.screen.getByLabelText('Add photos from gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Alt text 2')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByAltText('Alt text 2'));
            expect(onSelectionChange).toHaveBeenCalledWith([
                'photo-1',
                'photo-2'
            ]);
        });
        it('should display selected count in modal footer', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: {
                            photos: mockPhotos,
                            total: 3
                        }
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1',
                    'photo-2'
                ],
                onSelectionChange: onSelectionChange
            }));
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('2 photos selected')).toBeInTheDocument();
            });
        });
    });
    describe('clear all functionality', ()=>{
        it('should call onSelectionChange with empty array when clear all is clicked', ()=>{
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1',
                    'photo-2'
                ],
                onSelectionChange: onSelectionChange
            }));
            _react.fireEvent.click(_react.screen.getByText('Clear All'));
            expect(onSelectionChange).toHaveBeenCalledWith([]);
        });
    });
    describe('disabled state', ()=>{
        it('should disable add photos button when disabled prop is true', ()=>{
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [],
                onSelectionChange: onSelectionChange,
                disabled: true
            }));
            const button = _react.screen.getByText('+ Add Photos from Gallery');
            expect(button).toBeDisabled();
        });
        it('should disable clear all button when disabled prop is true', ()=>{
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1'
                ],
                onSelectionChange: onSelectionChange,
                disabled: true
            }));
            const button = _react.screen.getByText('Clear All');
            expect(button).toBeDisabled();
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9hZG1pbi9QaG90b1BpY2tlci50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBQaG90b1BpY2tlciB9IGZyb20gJy4vUGhvdG9QaWNrZXInO1xuXG4vLyBNb2NrIGZldGNoXG5nbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCk7XG5cbmNvbnN0IG1vY2tQaG90b3MgPSBbXG4gIHtcbiAgICBpZDogJ3Bob3RvLTEnLFxuICAgIHBob3RvX3VybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vcGhvdG8xLmpwZycsXG4gICAgY2FwdGlvbjogJ1Bob3RvIDEnLFxuICAgIGFsdF90ZXh0OiAnQWx0IHRleHQgMScsXG4gICAgbW9kZXJhdGlvbl9zdGF0dXM6ICdhcHByb3ZlZCcgYXMgY29uc3QsXG4gICAgY3JlYXRlZF9hdDogJzIwMjUtMDEtMDFUMDA6MDA6MDBaJyxcbiAgfSxcbiAge1xuICAgIGlkOiAncGhvdG8tMicsXG4gICAgcGhvdG9fdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9waG90bzIuanBnJyxcbiAgICBjYXB0aW9uOiAnUGhvdG8gMicsXG4gICAgYWx0X3RleHQ6ICdBbHQgdGV4dCAyJyxcbiAgICBtb2RlcmF0aW9uX3N0YXR1czogJ2FwcHJvdmVkJyBhcyBjb25zdCxcbiAgICBjcmVhdGVkX2F0OiAnMjAyNS0wMS0wMlQwMDowMDowMFonLFxuICB9LFxuICB7XG4gICAgaWQ6ICdwaG90by0zJyxcbiAgICBwaG90b191cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Bob3RvMy5qcGcnLFxuICAgIGNhcHRpb246ICdQaG90byAzJyxcbiAgICBhbHRfdGV4dDogJ0FsdCB0ZXh0IDMnLFxuICAgIG1vZGVyYXRpb25fc3RhdHVzOiAnYXBwcm92ZWQnIGFzIGNvbnN0LFxuICAgIGNyZWF0ZWRfYXQ6ICcyMDI1LTAxLTAzVDAwOjAwOjAwWicsXG4gIH0sXG5dO1xuXG5kZXNjcmliZSgnUGhvdG9QaWNrZXInLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgncmVuZGVyaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmVuZGVyIGFkZCBwaG90b3MgYnV0dG9uJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb25TZWxlY3Rpb25DaGFuZ2UgPSBqZXN0LmZuKCk7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxQaG90b1BpY2tlclxuICAgICAgICAgIHNlbGVjdGVkUGhvdG9JZHM9e1tdfVxuICAgICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlPXtvblNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcrIEFkZCBQaG90b3MgZnJvbSBHYWxsZXJ5JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNob3cgc2VsZWN0ZWQgcGhvdG9zIGNvdW50IHdoZW4gcGhvdG9zIGFyZSBzZWxlY3RlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG9uU2VsZWN0aW9uQ2hhbmdlID0gamVzdC5mbigpO1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8UGhvdG9QaWNrZXJcbiAgICAgICAgICBzZWxlY3RlZFBob3RvSWRzPXtbJ3Bob3RvLTEnLCAncGhvdG8tMiddfVxuICAgICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlPXtvblNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTZWxlY3RlZCBQaG90b3MgKDIpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCBzaG93IHNlbGVjdGVkIHBob3RvcyBzZWN0aW9uIHdoZW4gbm8gcGhvdG9zIHNlbGVjdGVkJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb25TZWxlY3Rpb25DaGFuZ2UgPSBqZXN0LmZuKCk7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxQaG90b1BpY2tlclxuICAgICAgICAgIHNlbGVjdGVkUGhvdG9JZHM9e1tdfVxuICAgICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlPXtvblNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoL1NlbGVjdGVkIFBob3Rvcy8pKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3Bob3RvIHBpY2tlciBtb2RhbCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIG9wZW4gbW9kYWwgd2hlbiBhZGQgcGhvdG9zIGJ1dHRvbiBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7IHBob3RvczogbW9ja1Bob3RvcywgdG90YWw6IDMgfSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgb25TZWxlY3Rpb25DaGFuZ2UgPSBqZXN0LmZuKCk7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxQaG90b1BpY2tlclxuICAgICAgICAgIHNlbGVjdGVkUGhvdG9JZHM9e1tdfVxuICAgICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlPXtvblNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCcrIEFkZCBQaG90b3MgZnJvbSBHYWxsZXJ5JykpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1NlbGVjdCBQaG90b3MnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmZXRjaCBwaG90b3Mgd2hlbiBtb2RhbCBvcGVucycsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YTogeyBwaG90b3M6IG1vY2tQaG90b3MsIHRvdGFsOiAzIH0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG9uU2VsZWN0aW9uQ2hhbmdlID0gamVzdC5mbigpO1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8UGhvdG9QaWNrZXJcbiAgICAgICAgICBzZWxlY3RlZFBob3RvSWRzPXtbXX1cbiAgICAgICAgICBvblNlbGVjdGlvbkNoYW5nZT17b25TZWxlY3Rpb25DaGFuZ2V9XG4gICAgICAgICAgcGFnZVR5cGU9XCJldmVudFwiXG4gICAgICAgICAgcGFnZUlkPVwiZXZlbnQtMTIzXCJcbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCcrIEFkZCBQaG90b3MgZnJvbSBHYWxsZXJ5JykpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJy9hcGkvYWRtaW4vcGhvdG9zJylcbiAgICAgICAgKTtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ3BhZ2VfdHlwZT1ldmVudCcpXG4gICAgICAgICk7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdwYWdlX2lkPWV2ZW50LTEyMycpXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBsb2FkaW5nIHN0YXRlIHdoaWxlIGZldGNoaW5nIHBob3RvcycsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb25PbmNlKFxuICAgICAgICAoKSA9PlxuICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICgpID0+XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IHBob3RvczogbW9ja1Bob3RvcywgdG90YWw6IDMgfSxcbiAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAxMDBcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICApO1xuXG4gICAgICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZSA9IGplc3QuZm4oKTtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFBob3RvUGlja2VyXG4gICAgICAgICAgc2VsZWN0ZWRQaG90b0lkcz17W119XG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJysgQWRkIFBob3RvcyBmcm9tIEdhbGxlcnknKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnTG9hZGluZyBwaG90b3MuLi4nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGVycm9yIG1lc3NhZ2Ugd2hlbiBmZXRjaCBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gbG9hZCBwaG90b3MnIH0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG9uU2VsZWN0aW9uQ2hhbmdlID0gamVzdC5mbigpO1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8UGhvdG9QaWNrZXJcbiAgICAgICAgICBzZWxlY3RlZFBob3RvSWRzPXtbXX1cbiAgICAgICAgICBvblNlbGVjdGlvbkNoYW5nZT17b25TZWxlY3Rpb25DaGFuZ2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdGYWlsZWQgdG8gbG9hZCBwaG90b3MnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IG1lc3NhZ2Ugd2hlbiBubyBwaG90b3MgYXZhaWxhYmxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7IHBob3RvczogW10sIHRvdGFsOiAwIH0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG9uU2VsZWN0aW9uQ2hhbmdlID0gamVzdC5mbigpO1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8UGhvdG9QaWNrZXJcbiAgICAgICAgICBzZWxlY3RlZFBob3RvSWRzPXtbXX1cbiAgICAgICAgICBvblNlbGVjdGlvbkNoYW5nZT17b25TZWxlY3Rpb25DaGFuZ2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdObyBhcHByb3ZlZCBwaG90b3MgYXZhaWxhYmxlLicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNsb3NlIG1vZGFsIHdoZW4gY2xvc2UgYnV0dG9uIGlzIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHsgcGhvdG9zOiBtb2NrUGhvdG9zLCB0b3RhbDogMyB9LFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZSA9IGplc3QuZm4oKTtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFBob3RvUGlja2VyXG4gICAgICAgICAgc2VsZWN0ZWRQaG90b0lkcz17W119XG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJysgQWRkIFBob3RvcyBmcm9tIEdhbGxlcnknKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU2VsZWN0IFBob3RvcycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ0Nsb3NlIHBob3RvIHBpY2tlcicpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ1NlbGVjdCBQaG90b3MnKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2xvc2UgbW9kYWwgd2hlbiBkb25lIGJ1dHRvbiBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7IHBob3RvczogbW9ja1Bob3RvcywgdG90YWw6IDMgfSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgb25TZWxlY3Rpb25DaGFuZ2UgPSBqZXN0LmZuKCk7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxQaG90b1BpY2tlclxuICAgICAgICAgIHNlbGVjdGVkUGhvdG9JZHM9e1tdfVxuICAgICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlPXtvblNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCcrIEFkZCBQaG90b3MgZnJvbSBHYWxsZXJ5JykpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1NlbGVjdCBQaG90b3MnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnRG9uZScpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ1NlbGVjdCBQaG90b3MnKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3Bob3RvIHNlbGVjdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGwgb25TZWxlY3Rpb25DaGFuZ2Ugd2hlbiBwaG90byBpcyBzZWxlY3RlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YTogeyBwaG90b3M6IG1vY2tQaG90b3MsIHRvdGFsOiAzIH0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG9uU2VsZWN0aW9uQ2hhbmdlID0gamVzdC5mbigpO1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8UGhvdG9QaWNrZXJcbiAgICAgICAgICBzZWxlY3RlZFBob3RvSWRzPXtbXX1cbiAgICAgICAgICBvblNlbGVjdGlvbkNoYW5nZT17b25TZWxlY3Rpb25DaGFuZ2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlBbHRUZXh0KCdBbHQgdGV4dCAxJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeUFsdFRleHQoJ0FsdCB0ZXh0IDEnKSk7XG5cbiAgICAgIGV4cGVjdChvblNlbGVjdGlvbkNoYW5nZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoWydwaG90by0xJ10pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxsIG9uU2VsZWN0aW9uQ2hhbmdlIHdoZW4gcGhvdG8gaXMgZGVzZWxlY3RlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YTogeyBwaG90b3M6IG1vY2tQaG90b3MsIHRvdGFsOiAzIH0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG9uU2VsZWN0aW9uQ2hhbmdlID0gamVzdC5mbigpO1xuICAgICAgY29uc3QgeyBjb250YWluZXIgfSA9IHJlbmRlcihcbiAgICAgICAgPFBob3RvUGlja2VyXG4gICAgICAgICAgc2VsZWN0ZWRQaG90b0lkcz17WydwaG90by0xJ119XG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJysgQWRkIFBob3RvcyBmcm9tIEdhbGxlcnknKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBpbWFnZXMgPSBzY3JlZW4uZ2V0QWxsQnlBbHRUZXh0KCdBbHQgdGV4dCAxJyk7XG4gICAgICAgIGV4cGVjdChpbWFnZXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgdGhlIHBob3RvIGluIHRoZSBtb2RhbCAoc2Vjb25kIGluc3RhbmNlKVxuICAgICAgY29uc3QgaW1hZ2VzID0gc2NyZWVuLmdldEFsbEJ5QWx0VGV4dCgnQWx0IHRleHQgMScpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGltYWdlc1tpbWFnZXMubGVuZ3RoIC0gMV0pO1xuXG4gICAgICBleHBlY3Qob25TZWxlY3Rpb25DaGFuZ2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFtdKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc3VwcG9ydCBtdWx0aXBsZSBwaG90byBzZWxlY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHsgcGhvdG9zOiBtb2NrUGhvdG9zLCB0b3RhbDogMyB9LFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZSA9IGplc3QuZm4oKTtcbiAgICAgIGNvbnN0IHsgdW5tb3VudCB9ID0gcmVuZGVyKFxuICAgICAgICA8UGhvdG9QaWNrZXJcbiAgICAgICAgICBzZWxlY3RlZFBob3RvSWRzPXtbXX1cbiAgICAgICAgICBvblNlbGVjdGlvbkNoYW5nZT17b25TZWxlY3Rpb25DaGFuZ2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlBbHRUZXh0KCdBbHQgdGV4dCAxJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeUFsdFRleHQoJ0FsdCB0ZXh0IDEnKSk7XG4gICAgICBleHBlY3Qob25TZWxlY3Rpb25DaGFuZ2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFsncGhvdG8tMSddKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgZmlyc3QgcmVuZGVyXG4gICAgICB1bm1vdW50KCk7XG5cbiAgICAgIC8vIFNpbXVsYXRlIHJlLXJlbmRlciB3aXRoIHVwZGF0ZWQgc2VsZWN0aW9uXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHsgcGhvdG9zOiBtb2NrUGhvdG9zLCB0b3RhbDogMyB9LFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBvblNlbGVjdGlvbkNoYW5nZS5tb2NrQ2xlYXIoKTtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFBob3RvUGlja2VyXG4gICAgICAgICAgc2VsZWN0ZWRQaG90b0lkcz17WydwaG90by0xJ119XG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnQWRkIHBob3RvcyBmcm9tIGdhbGxlcnknKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5QWx0VGV4dCgnQWx0IHRleHQgMicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlBbHRUZXh0KCdBbHQgdGV4dCAyJykpO1xuICAgICAgZXhwZWN0KG9uU2VsZWN0aW9uQ2hhbmdlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChbJ3Bob3RvLTEnLCAncGhvdG8tMiddKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBzZWxlY3RlZCBjb3VudCBpbiBtb2RhbCBmb290ZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHsgcGhvdG9zOiBtb2NrUGhvdG9zLCB0b3RhbDogMyB9LFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZSA9IGplc3QuZm4oKTtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFBob3RvUGlja2VyXG4gICAgICAgICAgc2VsZWN0ZWRQaG90b0lkcz17WydwaG90by0xJywgJ3Bob3RvLTInXX1cbiAgICAgICAgICBvblNlbGVjdGlvbkNoYW5nZT17b25TZWxlY3Rpb25DaGFuZ2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcyIHBob3RvcyBzZWxlY3RlZCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjbGVhciBhbGwgZnVuY3Rpb25hbGl0eScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGwgb25TZWxlY3Rpb25DaGFuZ2Ugd2l0aCBlbXB0eSBhcnJheSB3aGVuIGNsZWFyIGFsbCBpcyBjbGlja2VkJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb25TZWxlY3Rpb25DaGFuZ2UgPSBqZXN0LmZuKCk7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxQaG90b1BpY2tlclxuICAgICAgICAgIHNlbGVjdGVkUGhvdG9JZHM9e1sncGhvdG8tMScsICdwaG90by0yJ119XG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJ0NsZWFyIEFsbCcpKTtcblxuICAgICAgZXhwZWN0KG9uU2VsZWN0aW9uQ2hhbmdlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChbXSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdkaXNhYmxlZCBzdGF0ZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRpc2FibGUgYWRkIHBob3RvcyBidXR0b24gd2hlbiBkaXNhYmxlZCBwcm9wIGlzIHRydWUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZSA9IGplc3QuZm4oKTtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFBob3RvUGlja2VyXG4gICAgICAgICAgc2VsZWN0ZWRQaG90b0lkcz17W119XG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICAgIGRpc2FibGVkPXt0cnVlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpO1xuICAgICAgZXhwZWN0KGJ1dHRvbikudG9CZURpc2FibGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc2FibGUgY2xlYXIgYWxsIGJ1dHRvbiB3aGVuIGRpc2FibGVkIHByb3AgaXMgdHJ1ZScsICgpID0+IHtcbiAgICAgIGNvbnN0IG9uU2VsZWN0aW9uQ2hhbmdlID0gamVzdC5mbigpO1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8UGhvdG9QaWNrZXJcbiAgICAgICAgICBzZWxlY3RlZFBob3RvSWRzPXtbJ3Bob3RvLTEnXX1cbiAgICAgICAgICBvblNlbGVjdGlvbkNoYW5nZT17b25TZWxlY3Rpb25DaGFuZ2V9XG4gICAgICAgICAgZGlzYWJsZWQ9e3RydWV9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdDbGVhciBBbGwnKTtcbiAgICAgIGV4cGVjdChidXR0b24pLnRvQmVEaXNhYmxlZCgpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImdsb2JhbCIsImZldGNoIiwiamVzdCIsImZuIiwibW9ja1Bob3RvcyIsImlkIiwicGhvdG9fdXJsIiwiY2FwdGlvbiIsImFsdF90ZXh0IiwibW9kZXJhdGlvbl9zdGF0dXMiLCJjcmVhdGVkX2F0IiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIml0Iiwib25TZWxlY3Rpb25DaGFuZ2UiLCJyZW5kZXIiLCJQaG90b1BpY2tlciIsInNlbGVjdGVkUGhvdG9JZHMiLCJleHBlY3QiLCJzY3JlZW4iLCJnZXRCeVRleHQiLCJ0b0JlSW5UaGVEb2N1bWVudCIsInF1ZXJ5QnlUZXh0Iiwibm90IiwibW9ja1Jlc29sdmVkVmFsdWVPbmNlIiwianNvbiIsInN1Y2Nlc3MiLCJkYXRhIiwicGhvdG9zIiwidG90YWwiLCJmaXJlRXZlbnQiLCJjbGljayIsIndhaXRGb3IiLCJwYWdlVHlwZSIsInBhZ2VJZCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwic3RyaW5nQ29udGFpbmluZyIsIm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJlcnJvciIsIm1lc3NhZ2UiLCJnZXRCeUxhYmVsVGV4dCIsImdldEJ5QWx0VGV4dCIsImNvbnRhaW5lciIsImltYWdlcyIsImdldEFsbEJ5QWx0VGV4dCIsImxlbmd0aCIsInRvQmVHcmVhdGVyVGhhbiIsInVubW91bnQiLCJtb2NrQ2xlYXIiLCJkaXNhYmxlZCIsImJ1dHRvbiIsInRvQmVEaXNhYmxlZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7dUJBQW1EOzZCQUN2QjtBQUU1QixhQUFhO0FBQ2JBLE9BQU9DLEtBQUssR0FBR0MsS0FBS0MsRUFBRTtBQUV0QixNQUFNQyxhQUFhO0lBQ2pCO1FBQ0VDLElBQUk7UUFDSkMsV0FBVztRQUNYQyxTQUFTO1FBQ1RDLFVBQVU7UUFDVkMsbUJBQW1CO1FBQ25CQyxZQUFZO0lBQ2Q7SUFDQTtRQUNFTCxJQUFJO1FBQ0pDLFdBQVc7UUFDWEMsU0FBUztRQUNUQyxVQUFVO1FBQ1ZDLG1CQUFtQjtRQUNuQkMsWUFBWTtJQUNkO0lBQ0E7UUFDRUwsSUFBSTtRQUNKQyxXQUFXO1FBQ1hDLFNBQVM7UUFDVEMsVUFBVTtRQUNWQyxtQkFBbUI7UUFDbkJDLFlBQVk7SUFDZDtDQUNEO0FBRURDLFNBQVMsZUFBZTtJQUN0QkMsV0FBVztRQUNUVixLQUFLVyxhQUFhO0lBQ3BCO0lBRUFGLFNBQVMsYUFBYTtRQUNwQkcsR0FBRyxtQ0FBbUM7WUFDcEMsTUFBTUMsb0JBQW9CYixLQUFLQyxFQUFFO1lBQ2pDYSxJQUFBQSxhQUFNLGdCQUNKLHFCQUFDQyx3QkFBVztnQkFDVkMsa0JBQWtCLEVBQUU7Z0JBQ3BCSCxtQkFBbUJBOztZQUl2QkksT0FBT0MsYUFBTSxDQUFDQyxTQUFTLENBQUMsOEJBQThCQyxpQkFBaUI7UUFDekU7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