{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/__tests__/regression/performance.regression.test.ts"],"sourcesContent":["/**\n * Regression Test Suite: Performance Monitoring\n * \n * Tests performance benchmarks to prevent regressions in:\n * - Guest Portal page load times\n * - Admin Dashboard (Logistics) performance\n * - Database query performance\n * - API response times\n * - Bulk operation performance\n * \n * Requirements: 21.8\n */\n\nimport { createMockSupabaseClient, configureMockQuery, resetMockSupabaseClient } from '../helpers/mockSupabase';\nimport * as guestServiceModule from '@/services/guestService';\nimport * as rsvpServiceModule from '@/services/rsvpService';\nimport * as eventServiceModule from '@/services/eventService';\nimport * as activityServiceModule from '@/services/activityService';\n\nconst guestService = guestServiceModule;\nconst rsvpService = rsvpServiceModule;\nconst eventService = eventServiceModule;\nconst activityService = activityServiceModule;\n\n// Create properly configured mock\nconst mockSupabase = createMockSupabaseClient();\n\njest.mock('@/lib/supabase', () => ({\n  createClient: jest.fn(() => mockSupabase),\n  supabase: mockSupabase,\n}));\n\ndescribe('Regression: Performance Monitoring', () => {\n  beforeEach(() => {\n    resetMockSupabaseClient(mockSupabase);\n  });\n\n  describe('Guest Portal Performance', () => {\n    it('should load guest dashboard data within 200ms', async () => {\n      const mockGuest = {\n        id: 'guest-1',\n        first_name: 'John',\n        last_name: 'Doe',\n        email: 'john@example.com',\n        group_id: 'group-1',\n        age_type: 'adult' as const,\n        guest_type: 'wedding_guest' as const,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      const mockEvents = Array(10)\n        .fill(null)\n        .map((_, i) => ({\n          id: `event-${i}`,\n          name: `Event ${i}`,\n          start_date: new Date().toISOString(),\n        }));\n\n      const mockRSVPs = Array(10)\n        .fill(null)\n        .map((_, i) => ({\n          id: `rsvp-${i}`,\n          guest_id: 'guest-1',\n          event_id: `event-${i}`,\n          status: 'pending' as const,\n        }));\n\n      // Configure mock to return guest data\n      mockSupabase.single.mockResolvedValue({\n        data: mockGuest,\n        error: null,\n      });\n\n      // Configure mock to return events and RSVPs\n      mockSupabase.eq.mockResolvedValue({\n        data: mockEvents,\n        error: null,\n        count: mockEvents.length,\n      });\n\n      const startTime = performance.now();\n\n      // Simulate dashboard data loading\n      await Promise.all([\n        guestService.get('guest-1'),\n        eventService.list({ page: 1, pageSize: 10 }),\n        rsvpService.list({ guestId: 'guest-1' }),\n      ]);\n\n      const endTime = performance.now();\n      const duration = endTime - startTime;\n\n      expect(duration).toBeLessThan(200);\n    });\n\n    it('should load itinerary data within 150ms', async () => {\n      const mockItinerary = {\n        guestId: 'guest-1',\n        events: Array(5).fill({ id: 'event-1', name: 'Event' }),\n        activities: Array(10).fill({ id: 'activity-1', name: 'Activity' }),\n      };\n\n      mockSupabase.select.mockResolvedValue({\n        data: mockItinerary,\n        error: null,\n      });\n\n      const startTime = performance.now();\n\n      // Simulate itinerary loading\n      await mockSupabase.from('itineraries').select('*').eq('guest_id', 'guest-1').single();\n\n      const endTime = performance.now();\n      const duration = endTime - startTime;\n\n      expect(duration).toBeLessThan(150);\n    });\n\n    it('should handle RSVP submission within 100ms', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: {\n          id: 'rsvp-1',\n          guestId: 'guest-1',\n          eventId: 'event-1',\n          status: 'attending',\n        },\n        error: null,\n      });\n\n      const startTime = performance.now();\n\n      await rsvpService.create({\n        guestId: 'guest-1',\n        eventId: 'event-1',\n        status: 'attending',\n        guestCount: 2,\n      });\n\n      const endTime = performance.now();\n      const duration = endTime - startTime;\n\n      expect(duration).toBeLessThan(100);\n    });\n  });\n\n  describe('Admin Dashboard (Logistics) Performance', () => {\n    it('should load logistics dashboard within 300ms', async () => {\n      const mockGuests = Array(100)\n        .fill(null)\n        .map((_, i) => ({\n          id: `guest-${i}`,\n          firstName: `Guest${i}`,\n          lastName: 'Doe',\n          groupId: 'group-1',\n        }));\n\n      const mockEvents = Array(20)\n        .fill(null)\n        .map((_, i) => ({\n          id: `event-${i}`,\n          name: `Event ${i}`,\n        }));\n\n      const mockActivities = Array(50)\n        .fill(null)\n        .map((_, i) => ({\n          id: `activity-${i}`,\n          name: `Activity ${i}`,\n        }));\n\n      mockSupabase.select\n        .mockResolvedValueOnce({ data: mockGuests, error: null, count: 100 })\n        .mockResolvedValueOnce({ data: mockEvents, error: null, count: 20 })\n        .mockResolvedValueOnce({ data: mockActivities, error: null, count: 50 });\n\n      const startTime = performance.now();\n\n      // Simulate dashboard data loading\n      await Promise.all([\n        guestService.list({ page: 1, pageSize: 100 }),\n        eventService.list({ page: 1, pageSize: 20 }),\n        activityService.list({ page: 1, pageSize: 50 }),\n      ]);\n\n      const endTime = performance.now();\n      const duration = endTime - startTime;\n\n      expect(duration).toBeLessThan(300);\n    });\n\n    it('should calculate capacity metrics within 100ms', async () => {\n      const mockRSVPs = Array(90)\n        .fill(null)\n        .map(() => ({\n          status: 'attending',\n          guestCount: 1,\n        }));\n\n      mockSupabase.select.mockResolvedValue({\n        data: mockRSVPs,\n        error: null,\n      });\n\n      const startTime = performance.now();\n\n      // Simulate capacity calculation\n      const rsvps = await mockSupabase\n        .from('rsvps')\n        .select('*')\n        .eq('activity_id', 'activity-1');\n\n      const totalAttendees = rsvps.data.reduce(\n        (sum: number, rsvp: any) => sum + (rsvp.guestCount || 0),\n        0\n      );\n\n      const endTime = performance.now();\n      const duration = endTime - startTime;\n\n      expect(duration).toBeLessThan(100);\n      expect(totalAttendees).toBe(90);\n    });\n\n    it('should generate transportation manifest within 200ms', async () => {\n      const mockGuests = Array(50)\n        .fill(null)\n        .map((_, i) => ({\n          id: `guest-${i}`,\n          arrivalDate: new Date('2025-06-15T10:00:00Z'),\n          airportCode: 'SJO',\n        }));\n\n      mockSupabase.select.mockResolvedValue({\n        data: mockGuests,\n        error: null,\n      });\n\n      const startTime = performance.now();\n\n      // Simulate manifest generation\n      const guests = await mockSupabase\n        .from('guests')\n        .select('*')\n        .eq('airport_code', 'SJO');\n\n      // Group by time windows (simplified)\n      const grouped = guests.data.reduce((acc: any, guest: any) => {\n        const hour = new Date(guest.arrivalDate).getHours();\n        if (!acc[hour]) acc[hour] = [];\n        acc[hour].push(guest);\n        return acc;\n      }, {});\n\n      const endTime = performance.now();\n      const duration = endTime - startTime;\n\n      expect(duration).toBeLessThan(200);\n    });\n  });\n\n  describe('Database Query Performance', () => {\n    it('should execute simple SELECT within 50ms', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: { id: 'guest-1', firstName: 'John' },\n        error: null,\n      });\n\n      const startTime = performance.now();\n\n      await mockSupabase.from('guests').select('*').eq('id', 'guest-1').single();\n\n      const endTime = performance.now();\n      const duration = endTime - startTime;\n\n      expect(duration).toBeLessThan(50);\n    });\n\n    it('should execute paginated query within 100ms', async () => {\n      const mockData = Array(50)\n        .fill(null)\n        .map((_, i) => ({ id: `guest-${i}` }));\n\n      mockSupabase.select.mockResolvedValue({\n        data: mockData,\n        error: null,\n        count: 100,\n      });\n\n      const startTime = performance.now();\n\n      await mockSupabase\n        .from('guests')\n        .select('*', { count: 'exact' })\n        .range(0, 49);\n\n      const endTime = performance.now();\n      const duration = endTime - startTime;\n\n      expect(duration).toBeLessThan(100);\n    });\n\n    it('should execute filtered query within 75ms', async () => {\n      const mockData = Array(20)\n        .fill(null)\n        .map((_, i) => ({ id: `guest-${i}`, groupId: 'group-1' }));\n\n      mockSupabase.select.mockResolvedValue({\n        data: mockData,\n        error: null,\n      });\n\n      const startTime = performance.now();\n\n      await mockSupabase.from('guests').select('*').eq('group_id', 'group-1');\n\n      const endTime = performance.now();\n      const duration = endTime - startTime;\n\n      expect(duration).toBeLessThan(75);\n    });\n  });\n\n  describe('API Response Times', () => {\n    it('should respond to GET request within 200ms', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: { id: 'guest-1', firstName: 'John' },\n        error: null,\n      });\n\n      const startTime = performance.now();\n\n      await guestService.get('guest-1');\n\n      const endTime = performance.now();\n      const duration = endTime - startTime;\n\n      expect(duration).toBeLessThan(200);\n    });\n\n    it('should respond to POST request within 150ms', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: {\n          id: 'guest-1',\n          firstName: 'John',\n          lastName: 'Doe',\n          groupId: 'group-1',\n        },\n        error: null,\n      });\n\n      const startTime = performance.now();\n\n      await guestService.create({\n        firstName: 'John',\n        lastName: 'Doe',\n        email: 'john@example.com',\n        groupId: 'group-1',\n        ageType: 'adult',\n        guestType: 'wedding_guest',\n      });\n\n      const endTime = performance.now();\n      const duration = endTime - startTime;\n\n      expect(duration).toBeLessThan(150);\n    });\n\n    it('should respond to PUT request within 150ms', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: { id: 'guest-1', firstName: 'Jane' },\n        error: null,\n      });\n\n      const startTime = performance.now();\n\n      await guestService.update('guest-1', { firstName: 'Jane' });\n\n      const endTime = performance.now();\n      const duration = endTime - startTime;\n\n      expect(duration).toBeLessThan(150);\n    });\n\n    it('should respond to DELETE request within 100ms', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: null,\n        error: null,\n      });\n\n      const startTime = performance.now();\n\n      await guestService.delete('guest-1');\n\n      const endTime = performance.now();\n      const duration = endTime - startTime;\n\n      expect(duration).toBeLessThan(100);\n    });\n  });\n\n  describe('Bulk Operation Performance', () => {\n    it('should handle bulk guest creation within 500ms', async () => {\n      const guests = Array(50)\n        .fill(null)\n        .map((_, i) => ({\n          firstName: `Guest${i}`,\n          lastName: 'Doe',\n          email: `guest${i}@example.com`,\n          groupId: 'group-1',\n          ageType: 'adult' as const,\n          guestType: 'wedding_guest' as const,\n        }));\n\n      mockSupabase.select.mockResolvedValue({\n        data: guests.map((g, i) => ({ id: `guest-${i}`, ...g })),\n        error: null,\n      });\n\n      const startTime = performance.now();\n\n      await guestService.bulkCreate(guests);\n\n      const endTime = performance.now();\n      const duration = endTime - startTime;\n\n      expect(duration).toBeLessThan(500);\n    });\n\n    it('should handle bulk guest update within 400ms', async () => {\n      const updates = Array(30)\n        .fill(null)\n        .map((_, i) => ({\n          id: `guest-${i}`,\n          firstName: `Updated${i}`,\n        }));\n\n      mockSupabase.select.mockResolvedValue({\n        data: updates,\n        error: null,\n      });\n\n      const startTime = performance.now();\n\n      await guestService.bulkUpdate(updates);\n\n      const endTime = performance.now();\n      const duration = endTime - startTime;\n\n      expect(duration).toBeLessThan(400);\n    });\n\n    it('should handle CSV export within 300ms', async () => {\n      const guests = Array(100)\n        .fill(null)\n        .map((_, i) => ({\n          id: `guest-${i}`,\n          firstName: `Guest${i}`,\n          lastName: 'Doe',\n          email: `guest${i}@example.com`,\n          groupId: 'group-1',\n          ageType: 'adult' as const,\n          guestType: 'wedding_guest' as const,\n        }));\n\n      mockSupabase.select.mockResolvedValue({\n        data: guests,\n        error: null,\n      });\n\n      const startTime = performance.now();\n\n      // Simulate CSV export\n      const data = await mockSupabase.from('guests').select('*');\n      const csv = data.data\n        .map((g: any) => `${g.firstName},${g.lastName},${g.email}`)\n        .join('\\n');\n\n      const endTime = performance.now();\n      const duration = endTime - startTime;\n\n      expect(duration).toBeLessThan(300);\n      expect(csv.split('\\n').length).toBe(100);\n    });\n  });\n\n  describe('Memory Usage', () => {\n    it('should not leak memory on repeated operations', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: { id: 'guest-1', firstName: 'John' },\n        error: null,\n      });\n\n      const initialMemory = process.memoryUsage().heapUsed;\n\n      // Perform 100 operations\n      for (let i = 0; i < 100; i++) {\n        await guestService.get('guest-1');\n      }\n\n      const finalMemory = process.memoryUsage().heapUsed;\n      const memoryIncrease = finalMemory - initialMemory;\n\n      // Memory increase should be minimal (less than 10MB)\n      expect(memoryIncrease).toBeLessThan(10 * 1024 * 1024);\n    });\n\n    it('should handle large datasets without excessive memory', async () => {\n      const largeDataset = Array(1000)\n        .fill(null)\n        .map((_, i) => ({\n          id: `guest-${i}`,\n          firstName: `Guest${i}`,\n          lastName: 'Doe',\n        }));\n\n      mockSupabase.select.mockResolvedValue({\n        data: largeDataset,\n        error: null,\n      });\n\n      const initialMemory = process.memoryUsage().heapUsed;\n\n      await guestService.list({ page: 1, pageSize: 1000 });\n\n      const finalMemory = process.memoryUsage().heapUsed;\n      const memoryIncrease = finalMemory - initialMemory;\n\n      // Memory increase should be reasonable (less than 50MB)\n      expect(memoryIncrease).toBeLessThan(50 * 1024 * 1024);\n    });\n  });\n\n  describe('Performance Benchmarks', () => {\n    it('should maintain performance under load', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: { id: 'guest-1', firstName: 'John' },\n        error: null,\n      });\n\n      const iterations = 50;\n      const durations: number[] = [];\n\n      for (let i = 0; i < iterations; i++) {\n        const startTime = performance.now();\n        await guestService.get('guest-1');\n        const endTime = performance.now();\n        durations.push(endTime - startTime);\n      }\n\n      const averageDuration =\n        durations.reduce((sum, d) => sum + d, 0) / durations.length;\n      const maxDuration = Math.max(...durations);\n\n      // Average should be under 100ms\n      expect(averageDuration).toBeLessThan(100);\n      // Max should be under 200ms\n      expect(maxDuration).toBeLessThan(200);\n    });\n\n    it('should have consistent performance across operations', async () => {\n      mockSupabase.single.mockResolvedValue({\n        data: { id: 'guest-1' },\n        error: null,\n      });\n\n      const operations = [\n        () => guestService.get('guest-1'),\n        () => guestService.update('guest-1', { firstName: 'Jane' }),\n        () => guestService.delete('guest-1'),\n      ];\n\n      const durations: number[] = [];\n\n      for (const operation of operations) {\n        const startTime = performance.now();\n        await operation();\n        const endTime = performance.now();\n        durations.push(endTime - startTime);\n      }\n\n      // All operations should complete within 200ms\n      durations.forEach((duration) => {\n        expect(duration).toBeLessThan(200);\n      });\n\n      // Variance should be low (consistent performance)\n      const average = durations.reduce((sum, d) => sum + d, 0) / durations.length;\n      const variance =\n        durations.reduce((sum, d) => sum + Math.pow(d - average, 2), 0) /\n        durations.length;\n      const standardDeviation = Math.sqrt(variance);\n\n      // Standard deviation should be less than 50ms\n      expect(standardDeviation).toBeLessThan(50);\n    });\n  });\n});\n"],"names":["jest","mock","createClient","fn","mockSupabase","supabase","guestService","guestServiceModule","rsvpService","rsvpServiceModule","eventService","eventServiceModule","activityService","activityServiceModule","createMockSupabaseClient","describe","beforeEach","resetMockSupabaseClient","it","mockGuest","id","first_name","last_name","email","group_id","age_type","guest_type","created_at","Date","toISOString","updated_at","mockEvents","Array","fill","map","_","i","name","start_date","mockRSVPs","guest_id","event_id","status","single","mockResolvedValue","data","error","eq","count","length","startTime","performance","now","Promise","all","get","list","page","pageSize","guestId","endTime","duration","expect","toBeLessThan","mockItinerary","events","activities","select","from","eventId","create","guestCount","mockGuests","firstName","lastName","groupId","mockActivities","mockResolvedValueOnce","rsvps","totalAttendees","reduce","sum","rsvp","toBe","arrivalDate","airportCode","guests","grouped","acc","guest","hour","getHours","push","mockData","range","ageType","guestType","update","delete","g","bulkCreate","updates","bulkUpdate","csv","join","split","initialMemory","process","memoryUsage","heapUsed","finalMemory","memoryIncrease","largeDataset","iterations","durations","averageDuration","d","maxDuration","Math","max","operations","operation","forEach","average","variance","pow","standardDeviation","sqrt"],"mappings":"AAAA;;;;;;;;;;;CAWC;AAgBDA,KAAKC,IAAI,CAAC,kBAAkB,IAAO,CAAA;QACjCC,cAAcF,KAAKG,EAAE,CAAC,IAAMC;QAC5BC,UAAUD;IACZ,CAAA;;;;8BAjBsF;sEAClD;qEACD;sEACC;yEACG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEvC,MAAME,eAAeC;AACrB,MAAMC,cAAcC;AACpB,MAAMC,eAAeC;AACrB,MAAMC,kBAAkBC;AAExB,kCAAkC;AAClC,MAAMT,eAAeU,IAAAA,sCAAwB;AAO7CC,SAAS,sCAAsC;IAC7CC,WAAW;QACTC,IAAAA,qCAAuB,EAACb;IAC1B;IAEAW,SAAS,4BAA4B;QACnCG,GAAG,iDAAiD;YAClD,MAAMC,YAAY;gBAChBC,IAAI;gBACJC,YAAY;gBACZC,WAAW;gBACXC,OAAO;gBACPC,UAAU;gBACVC,UAAU;gBACVC,YAAY;gBACZC,YAAY,IAAIC,OAAOC,WAAW;gBAClCC,YAAY,IAAIF,OAAOC,WAAW;YACpC;YAEA,MAAME,aAAaC,MAAM,IACtBC,IAAI,CAAC,MACLC,GAAG,CAAC,CAACC,GAAGC,IAAO,CAAA;oBACdhB,IAAI,CAAC,MAAM,EAAEgB,GAAG;oBAChBC,MAAM,CAAC,MAAM,EAAED,GAAG;oBAClBE,YAAY,IAAIV,OAAOC,WAAW;gBACpC,CAAA;YAEF,MAAMU,YAAYP,MAAM,IACrBC,IAAI,CAAC,MACLC,GAAG,CAAC,CAACC,GAAGC,IAAO,CAAA;oBACdhB,IAAI,CAAC,KAAK,EAAEgB,GAAG;oBACfI,UAAU;oBACVC,UAAU,CAAC,MAAM,EAAEL,GAAG;oBACtBM,QAAQ;gBACV,CAAA;YAEF,sCAAsC;YACtCtC,aAAauC,MAAM,CAACC,iBAAiB,CAAC;gBACpCC,MAAM1B;gBACN2B,OAAO;YACT;YAEA,4CAA4C;YAC5C1C,aAAa2C,EAAE,CAACH,iBAAiB,CAAC;gBAChCC,MAAMd;gBACNe,OAAO;gBACPE,OAAOjB,WAAWkB,MAAM;YAC1B;YAEA,MAAMC,YAAYC,YAAYC,GAAG;YAEjC,kCAAkC;YAClC,MAAMC,QAAQC,GAAG,CAAC;gBAChBhD,aAAaiD,GAAG,CAAC;gBACjB7C,aAAa8C,IAAI,CAAC;oBAAEC,MAAM;oBAAGC,UAAU;gBAAG;gBAC1ClD,YAAYgD,IAAI,CAAC;oBAAEG,SAAS;gBAAU;aACvC;YAED,MAAMC,UAAUT,YAAYC,GAAG;YAC/B,MAAMS,WAAWD,UAAUV;YAE3BY,OAAOD,UAAUE,YAAY,CAAC;QAChC;QAEA7C,GAAG,2CAA2C;YAC5C,MAAM8C,gBAAgB;gBACpBL,SAAS;gBACTM,QAAQjC,MAAM,GAAGC,IAAI,CAAC;oBAAEb,IAAI;oBAAWiB,MAAM;gBAAQ;gBACrD6B,YAAYlC,MAAM,IAAIC,IAAI,CAAC;oBAAEb,IAAI;oBAAciB,MAAM;gBAAW;YAClE;YAEAjC,aAAa+D,MAAM,CAACvB,iBAAiB,CAAC;gBACpCC,MAAMmB;gBACNlB,OAAO;YACT;YAEA,MAAMI,YAAYC,YAAYC,GAAG;YAEjC,6BAA6B;YAC7B,MAAMhD,aAAagE,IAAI,CAAC,eAAeD,MAAM,CAAC,KAAKpB,EAAE,CAAC,YAAY,WAAWJ,MAAM;YAEnF,MAAMiB,UAAUT,YAAYC,GAAG;YAC/B,MAAMS,WAAWD,UAAUV;YAE3BY,OAAOD,UAAUE,YAAY,CAAC;QAChC;QAEA7C,GAAG,8CAA8C;YAC/Cd,aAAauC,MAAM,CAACC,iBAAiB,CAAC;gBACpCC,MAAM;oBACJzB,IAAI;oBACJuC,SAAS;oBACTU,SAAS;oBACT3B,QAAQ;gBACV;gBACAI,OAAO;YACT;YAEA,MAAMI,YAAYC,YAAYC,GAAG;YAEjC,MAAM5C,YAAY8D,MAAM,CAAC;gBACvBX,SAAS;gBACTU,SAAS;gBACT3B,QAAQ;gBACR6B,YAAY;YACd;YAEA,MAAMX,UAAUT,YAAYC,GAAG;YAC/B,MAAMS,WAAWD,UAAUV;YAE3BY,OAAOD,UAAUE,YAAY,CAAC;QAChC;IACF;IAEAhD,SAAS,2CAA2C;QAClDG,GAAG,gDAAgD;YACjD,MAAMsD,aAAaxC,MAAM,KACtBC,IAAI,CAAC,MACLC,GAAG,CAAC,CAACC,GAAGC,IAAO,CAAA;oBACdhB,IAAI,CAAC,MAAM,EAAEgB,GAAG;oBAChBqC,WAAW,CAAC,KAAK,EAAErC,GAAG;oBACtBsC,UAAU;oBACVC,SAAS;gBACX,CAAA;YAEF,MAAM5C,aAAaC,MAAM,IACtBC,IAAI,CAAC,MACLC,GAAG,CAAC,CAACC,GAAGC,IAAO,CAAA;oBACdhB,IAAI,CAAC,MAAM,EAAEgB,GAAG;oBAChBC,MAAM,CAAC,MAAM,EAAED,GAAG;gBACpB,CAAA;YAEF,MAAMwC,iBAAiB5C,MAAM,IAC1BC,IAAI,CAAC,MACLC,GAAG,CAAC,CAACC,GAAGC,IAAO,CAAA;oBACdhB,IAAI,CAAC,SAAS,EAAEgB,GAAG;oBACnBC,MAAM,CAAC,SAAS,EAAED,GAAG;gBACvB,CAAA;YAEFhC,aAAa+D,MAAM,CAChBU,qBAAqB,CAAC;gBAAEhC,MAAM2B;gBAAY1B,OAAO;gBAAME,OAAO;YAAI,GAClE6B,qBAAqB,CAAC;gBAAEhC,MAAMd;gBAAYe,OAAO;gBAAME,OAAO;YAAG,GACjE6B,qBAAqB,CAAC;gBAAEhC,MAAM+B;gBAAgB9B,OAAO;gBAAME,OAAO;YAAG;YAExE,MAAME,YAAYC,YAAYC,GAAG;YAEjC,kCAAkC;YAClC,MAAMC,QAAQC,GAAG,CAAC;gBAChBhD,aAAakD,IAAI,CAAC;oBAAEC,MAAM;oBAAGC,UAAU;gBAAI;gBAC3ChD,aAAa8C,IAAI,CAAC;oBAAEC,MAAM;oBAAGC,UAAU;gBAAG;gBAC1C9C,gBAAgB4C,IAAI,CAAC;oBAAEC,MAAM;oBAAGC,UAAU;gBAAG;aAC9C;YAED,MAAME,UAAUT,YAAYC,GAAG;YAC/B,MAAMS,WAAWD,UAAUV;YAE3BY,OAAOD,UAAUE,YAAY,CAAC;QAChC;QAEA7C,GAAG,kDAAkD;YACnD,MAAMqB,YAAYP,MAAM,IACrBC,IAAI,CAAC,MACLC,GAAG,CAAC,IAAO,CAAA;oBACVQ,QAAQ;oBACR6B,YAAY;gBACd,CAAA;YAEFnE,aAAa+D,MAAM,CAACvB,iBAAiB,CAAC;gBACpCC,MAAMN;gBACNO,OAAO;YACT;YAEA,MAAMI,YAAYC,YAAYC,GAAG;YAEjC,gCAAgC;YAChC,MAAM0B,QAAQ,MAAM1E,aACjBgE,IAAI,CAAC,SACLD,MAAM,CAAC,KACPpB,EAAE,CAAC,eAAe;YAErB,MAAMgC,iBAAiBD,MAAMjC,IAAI,CAACmC,MAAM,CACtC,CAACC,KAAaC,OAAcD,MAAOC,CAAAA,KAAKX,UAAU,IAAI,CAAA,GACtD;YAGF,MAAMX,UAAUT,YAAYC,GAAG;YAC/B,MAAMS,WAAWD,UAAUV;YAE3BY,OAAOD,UAAUE,YAAY,CAAC;YAC9BD,OAAOiB,gBAAgBI,IAAI,CAAC;QAC9B;QAEAjE,GAAG,wDAAwD;YACzD,MAAMsD,aAAaxC,MAAM,IACtBC,IAAI,CAAC,MACLC,GAAG,CAAC,CAACC,GAAGC,IAAO,CAAA;oBACdhB,IAAI,CAAC,MAAM,EAAEgB,GAAG;oBAChBgD,aAAa,IAAIxD,KAAK;oBACtByD,aAAa;gBACf,CAAA;YAEFjF,aAAa+D,MAAM,CAACvB,iBAAiB,CAAC;gBACpCC,MAAM2B;gBACN1B,OAAO;YACT;YAEA,MAAMI,YAAYC,YAAYC,GAAG;YAEjC,+BAA+B;YAC/B,MAAMkC,SAAS,MAAMlF,aAClBgE,IAAI,CAAC,UACLD,MAAM,CAAC,KACPpB,EAAE,CAAC,gBAAgB;YAEtB,qCAAqC;YACrC,MAAMwC,UAAUD,OAAOzC,IAAI,CAACmC,MAAM,CAAC,CAACQ,KAAUC;gBAC5C,MAAMC,OAAO,IAAI9D,KAAK6D,MAAML,WAAW,EAAEO,QAAQ;gBACjD,IAAI,CAACH,GAAG,CAACE,KAAK,EAAEF,GAAG,CAACE,KAAK,GAAG,EAAE;gBAC9BF,GAAG,CAACE,KAAK,CAACE,IAAI,CAACH;gBACf,OAAOD;YACT,GAAG,CAAC;YAEJ,MAAM5B,UAAUT,YAAYC,GAAG;YAC/B,MAAMS,WAAWD,UAAUV;YAE3BY,OAAOD,UAAUE,YAAY,CAAC;QAChC;IACF;IAEAhD,SAAS,8BAA8B;QACrCG,GAAG,4CAA4C;YAC7Cd,aAAauC,MAAM,CAACC,iBAAiB,CAAC;gBACpCC,MAAM;oBAAEzB,IAAI;oBAAWqD,WAAW;gBAAO;gBACzC3B,OAAO;YACT;YAEA,MAAMI,YAAYC,YAAYC,GAAG;YAEjC,MAAMhD,aAAagE,IAAI,CAAC,UAAUD,MAAM,CAAC,KAAKpB,EAAE,CAAC,MAAM,WAAWJ,MAAM;YAExE,MAAMiB,UAAUT,YAAYC,GAAG;YAC/B,MAAMS,WAAWD,UAAUV;YAE3BY,OAAOD,UAAUE,YAAY,CAAC;QAChC;QAEA7C,GAAG,+CAA+C;YAChD,MAAM2E,WAAW7D,MAAM,IACpBC,IAAI,CAAC,MACLC,GAAG,CAAC,CAACC,GAAGC,IAAO,CAAA;oBAAEhB,IAAI,CAAC,MAAM,EAAEgB,GAAG;gBAAC,CAAA;YAErChC,aAAa+D,MAAM,CAACvB,iBAAiB,CAAC;gBACpCC,MAAMgD;gBACN/C,OAAO;gBACPE,OAAO;YACT;YAEA,MAAME,YAAYC,YAAYC,GAAG;YAEjC,MAAMhD,aACHgE,IAAI,CAAC,UACLD,MAAM,CAAC,KAAK;gBAAEnB,OAAO;YAAQ,GAC7B8C,KAAK,CAAC,GAAG;YAEZ,MAAMlC,UAAUT,YAAYC,GAAG;YAC/B,MAAMS,WAAWD,UAAUV;YAE3BY,OAAOD,UAAUE,YAAY,CAAC;QAChC;QAEA7C,GAAG,6CAA6C;YAC9C,MAAM2E,WAAW7D,MAAM,IACpBC,IAAI,CAAC,MACLC,GAAG,CAAC,CAACC,GAAGC,IAAO,CAAA;oBAAEhB,IAAI,CAAC,MAAM,EAAEgB,GAAG;oBAAEuC,SAAS;gBAAU,CAAA;YAEzDvE,aAAa+D,MAAM,CAACvB,iBAAiB,CAAC;gBACpCC,MAAMgD;gBACN/C,OAAO;YACT;YAEA,MAAMI,YAAYC,YAAYC,GAAG;YAEjC,MAAMhD,aAAagE,IAAI,CAAC,UAAUD,MAAM,CAAC,KAAKpB,EAAE,CAAC,YAAY;YAE7D,MAAMa,UAAUT,YAAYC,GAAG;YAC/B,MAAMS,WAAWD,UAAUV;YAE3BY,OAAOD,UAAUE,YAAY,CAAC;QAChC;IACF;IAEAhD,SAAS,sBAAsB;QAC7BG,GAAG,8CAA8C;YAC/Cd,aAAauC,MAAM,CAACC,iBAAiB,CAAC;gBACpCC,MAAM;oBAAEzB,IAAI;oBAAWqD,WAAW;gBAAO;gBACzC3B,OAAO;YACT;YAEA,MAAMI,YAAYC,YAAYC,GAAG;YAEjC,MAAM9C,aAAaiD,GAAG,CAAC;YAEvB,MAAMK,UAAUT,YAAYC,GAAG;YAC/B,MAAMS,WAAWD,UAAUV;YAE3BY,OAAOD,UAAUE,YAAY,CAAC;QAChC;QAEA7C,GAAG,+CAA+C;YAChDd,aAAauC,MAAM,CAACC,iBAAiB,CAAC;gBACpCC,MAAM;oBACJzB,IAAI;oBACJqD,WAAW;oBACXC,UAAU;oBACVC,SAAS;gBACX;gBACA7B,OAAO;YACT;YAEA,MAAMI,YAAYC,YAAYC,GAAG;YAEjC,MAAM9C,aAAagE,MAAM,CAAC;gBACxBG,WAAW;gBACXC,UAAU;gBACVnD,OAAO;gBACPoD,SAAS;gBACToB,SAAS;gBACTC,WAAW;YACb;YAEA,MAAMpC,UAAUT,YAAYC,GAAG;YAC/B,MAAMS,WAAWD,UAAUV;YAE3BY,OAAOD,UAAUE,YAAY,CAAC;QAChC;QAEA7C,GAAG,8CAA8C;YAC/Cd,aAAauC,MAAM,CAACC,iBAAiB,CAAC;gBACpCC,MAAM;oBAAEzB,IAAI;oBAAWqD,WAAW;gBAAO;gBACzC3B,OAAO;YACT;YAEA,MAAMI,YAAYC,YAAYC,GAAG;YAEjC,MAAM9C,aAAa2F,MAAM,CAAC,WAAW;gBAAExB,WAAW;YAAO;YAEzD,MAAMb,UAAUT,YAAYC,GAAG;YAC/B,MAAMS,WAAWD,UAAUV;YAE3BY,OAAOD,UAAUE,YAAY,CAAC;QAChC;QAEA7C,GAAG,iDAAiD;YAClDd,aAAauC,MAAM,CAACC,iBAAiB,CAAC;gBACpCC,MAAM;gBACNC,OAAO;YACT;YAEA,MAAMI,YAAYC,YAAYC,GAAG;YAEjC,MAAM9C,aAAa4F,MAAM,CAAC;YAE1B,MAAMtC,UAAUT,YAAYC,GAAG;YAC/B,MAAMS,WAAWD,UAAUV;YAE3BY,OAAOD,UAAUE,YAAY,CAAC;QAChC;IACF;IAEAhD,SAAS,8BAA8B;QACrCG,GAAG,kDAAkD;YACnD,MAAMoE,SAAStD,MAAM,IAClBC,IAAI,CAAC,MACLC,GAAG,CAAC,CAACC,GAAGC,IAAO,CAAA;oBACdqC,WAAW,CAAC,KAAK,EAAErC,GAAG;oBACtBsC,UAAU;oBACVnD,OAAO,CAAC,KAAK,EAAEa,EAAE,YAAY,CAAC;oBAC9BuC,SAAS;oBACToB,SAAS;oBACTC,WAAW;gBACb,CAAA;YAEF5F,aAAa+D,MAAM,CAACvB,iBAAiB,CAAC;gBACpCC,MAAMyC,OAAOpD,GAAG,CAAC,CAACiE,GAAG/D,IAAO,CAAA;wBAAEhB,IAAI,CAAC,MAAM,EAAEgB,GAAG;wBAAE,GAAG+D,CAAC;oBAAC,CAAA;gBACrDrD,OAAO;YACT;YAEA,MAAMI,YAAYC,YAAYC,GAAG;YAEjC,MAAM9C,aAAa8F,UAAU,CAACd;YAE9B,MAAM1B,UAAUT,YAAYC,GAAG;YAC/B,MAAMS,WAAWD,UAAUV;YAE3BY,OAAOD,UAAUE,YAAY,CAAC;QAChC;QAEA7C,GAAG,gDAAgD;YACjD,MAAMmF,UAAUrE,MAAM,IACnBC,IAAI,CAAC,MACLC,GAAG,CAAC,CAACC,GAAGC,IAAO,CAAA;oBACdhB,IAAI,CAAC,MAAM,EAAEgB,GAAG;oBAChBqC,WAAW,CAAC,OAAO,EAAErC,GAAG;gBAC1B,CAAA;YAEFhC,aAAa+D,MAAM,CAACvB,iBAAiB,CAAC;gBACpCC,MAAMwD;gBACNvD,OAAO;YACT;YAEA,MAAMI,YAAYC,YAAYC,GAAG;YAEjC,MAAM9C,aAAagG,UAAU,CAACD;YAE9B,MAAMzC,UAAUT,YAAYC,GAAG;YAC/B,MAAMS,WAAWD,UAAUV;YAE3BY,OAAOD,UAAUE,YAAY,CAAC;QAChC;QAEA7C,GAAG,yCAAyC;YAC1C,MAAMoE,SAAStD,MAAM,KAClBC,IAAI,CAAC,MACLC,GAAG,CAAC,CAACC,GAAGC,IAAO,CAAA;oBACdhB,IAAI,CAAC,MAAM,EAAEgB,GAAG;oBAChBqC,WAAW,CAAC,KAAK,EAAErC,GAAG;oBACtBsC,UAAU;oBACVnD,OAAO,CAAC,KAAK,EAAEa,EAAE,YAAY,CAAC;oBAC9BuC,SAAS;oBACToB,SAAS;oBACTC,WAAW;gBACb,CAAA;YAEF5F,aAAa+D,MAAM,CAACvB,iBAAiB,CAAC;gBACpCC,MAAMyC;gBACNxC,OAAO;YACT;YAEA,MAAMI,YAAYC,YAAYC,GAAG;YAEjC,sBAAsB;YACtB,MAAMP,OAAO,MAAMzC,aAAagE,IAAI,CAAC,UAAUD,MAAM,CAAC;YACtD,MAAMoC,MAAM1D,KAAKA,IAAI,CAClBX,GAAG,CAAC,CAACiE,IAAW,GAAGA,EAAE1B,SAAS,CAAC,CAAC,EAAE0B,EAAEzB,QAAQ,CAAC,CAAC,EAAEyB,EAAE5E,KAAK,EAAE,EACzDiF,IAAI,CAAC;YAER,MAAM5C,UAAUT,YAAYC,GAAG;YAC/B,MAAMS,WAAWD,UAAUV;YAE3BY,OAAOD,UAAUE,YAAY,CAAC;YAC9BD,OAAOyC,IAAIE,KAAK,CAAC,MAAMxD,MAAM,EAAEkC,IAAI,CAAC;QACtC;IACF;IAEApE,SAAS,gBAAgB;QACvBG,GAAG,iDAAiD;YAClDd,aAAauC,MAAM,CAACC,iBAAiB,CAAC;gBACpCC,MAAM;oBAAEzB,IAAI;oBAAWqD,WAAW;gBAAO;gBACzC3B,OAAO;YACT;YAEA,MAAM4D,gBAAgBC,QAAQC,WAAW,GAAGC,QAAQ;YAEpD,yBAAyB;YACzB,IAAK,IAAIzE,IAAI,GAAGA,IAAI,KAAKA,IAAK;gBAC5B,MAAM9B,aAAaiD,GAAG,CAAC;YACzB;YAEA,MAAMuD,cAAcH,QAAQC,WAAW,GAAGC,QAAQ;YAClD,MAAME,iBAAiBD,cAAcJ;YAErC,qDAAqD;YACrD5C,OAAOiD,gBAAgBhD,YAAY,CAAC,KAAK,OAAO;QAClD;QAEA7C,GAAG,yDAAyD;YAC1D,MAAM8F,eAAehF,MAAM,MACxBC,IAAI,CAAC,MACLC,GAAG,CAAC,CAACC,GAAGC,IAAO,CAAA;oBACdhB,IAAI,CAAC,MAAM,EAAEgB,GAAG;oBAChBqC,WAAW,CAAC,KAAK,EAAErC,GAAG;oBACtBsC,UAAU;gBACZ,CAAA;YAEFtE,aAAa+D,MAAM,CAACvB,iBAAiB,CAAC;gBACpCC,MAAMmE;gBACNlE,OAAO;YACT;YAEA,MAAM4D,gBAAgBC,QAAQC,WAAW,GAAGC,QAAQ;YAEpD,MAAMvG,aAAakD,IAAI,CAAC;gBAAEC,MAAM;gBAAGC,UAAU;YAAK;YAElD,MAAMoD,cAAcH,QAAQC,WAAW,GAAGC,QAAQ;YAClD,MAAME,iBAAiBD,cAAcJ;YAErC,wDAAwD;YACxD5C,OAAOiD,gBAAgBhD,YAAY,CAAC,KAAK,OAAO;QAClD;IACF;IAEAhD,SAAS,0BAA0B;QACjCG,GAAG,0CAA0C;YAC3Cd,aAAauC,MAAM,CAACC,iBAAiB,CAAC;gBACpCC,MAAM;oBAAEzB,IAAI;oBAAWqD,WAAW;gBAAO;gBACzC3B,OAAO;YACT;YAEA,MAAMmE,aAAa;YACnB,MAAMC,YAAsB,EAAE;YAE9B,IAAK,IAAI9E,IAAI,GAAGA,IAAI6E,YAAY7E,IAAK;gBACnC,MAAMc,YAAYC,YAAYC,GAAG;gBACjC,MAAM9C,aAAaiD,GAAG,CAAC;gBACvB,MAAMK,UAAUT,YAAYC,GAAG;gBAC/B8D,UAAUtB,IAAI,CAAChC,UAAUV;YAC3B;YAEA,MAAMiE,kBACJD,UAAUlC,MAAM,CAAC,CAACC,KAAKmC,IAAMnC,MAAMmC,GAAG,KAAKF,UAAUjE,MAAM;YAC7D,MAAMoE,cAAcC,KAAKC,GAAG,IAAIL;YAEhC,gCAAgC;YAChCpD,OAAOqD,iBAAiBpD,YAAY,CAAC;YACrC,4BAA4B;YAC5BD,OAAOuD,aAAatD,YAAY,CAAC;QACnC;QAEA7C,GAAG,wDAAwD;YACzDd,aAAauC,MAAM,CAACC,iBAAiB,CAAC;gBACpCC,MAAM;oBAAEzB,IAAI;gBAAU;gBACtB0B,OAAO;YACT;YAEA,MAAM0E,aAAa;gBACjB,IAAMlH,aAAaiD,GAAG,CAAC;gBACvB,IAAMjD,aAAa2F,MAAM,CAAC,WAAW;wBAAExB,WAAW;oBAAO;gBACzD,IAAMnE,aAAa4F,MAAM,CAAC;aAC3B;YAED,MAAMgB,YAAsB,EAAE;YAE9B,KAAK,MAAMO,aAAaD,WAAY;gBAClC,MAAMtE,YAAYC,YAAYC,GAAG;gBACjC,MAAMqE;gBACN,MAAM7D,UAAUT,YAAYC,GAAG;gBAC/B8D,UAAUtB,IAAI,CAAChC,UAAUV;YAC3B;YAEA,8CAA8C;YAC9CgE,UAAUQ,OAAO,CAAC,CAAC7D;gBACjBC,OAAOD,UAAUE,YAAY,CAAC;YAChC;YAEA,kDAAkD;YAClD,MAAM4D,UAAUT,UAAUlC,MAAM,CAAC,CAACC,KAAKmC,IAAMnC,MAAMmC,GAAG,KAAKF,UAAUjE,MAAM;YAC3E,MAAM2E,WACJV,UAAUlC,MAAM,CAAC,CAACC,KAAKmC,IAAMnC,MAAMqC,KAAKO,GAAG,CAACT,IAAIO,SAAS,IAAI,KAC7DT,UAAUjE,MAAM;YAClB,MAAM6E,oBAAoBR,KAAKS,IAAI,CAACH;YAEpC,8CAA8C;YAC9C9D,OAAOgE,mBAAmB/D,YAAY,CAAC;QACzC;IACF;AACF"}