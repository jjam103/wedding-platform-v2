f75b22930c8ea797f4a32016ed777f31
/**
 * Property-Based Test: Guest Count Validation
 * 
 * Feature: guest-portal-and-admin-enhancements
 * Property 7: Guest Count Validation
 * 
 * Description:
 * For any activity RSVP with guest count, the guest count SHALL be less than
 * or equal to the activity's maximum guests per party setting
 * 
 * Validates: Requirements 10.3
 * 
 * Test Strategy:
 * - Generate activities with various max guests per party settings
 * - Generate RSVP scenarios with different guest counts
 * - Verify rejection when guest count exceeds maximum
 * - Verify acceptance when guest count is within limit
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _fastcheck = /*#__PURE__*/ _interop_require_wildcard(require("fast-check"));
const _arbitraries = require("../helpers/arbitraries");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
describe('Feature: guest-portal-and-admin-enhancements, Property 7: Guest Count Validation', ()=>{
    /**
   * Arbitrary for activity with max guests per party setting
   */ const activityWithMaxGuestsArbitrary = _fastcheck.record({
        id: _arbitraries.uuidArbitrary,
        name: _fastcheck.string({
            minLength: 1,
            maxLength: 100
        }),
        maxGuestsPerParty: _fastcheck.option(_fastcheck.integer({
            min: 1,
            max: 20
        }), {
            nil: null
        }),
        requiresGuestCount: _fastcheck.boolean()
    });
    /**
   * Arbitrary for RSVP with guest count
   */ const rsvpWithGuestCountArbitrary = _fastcheck.record({
        guestId: _arbitraries.uuidArbitrary,
        activityId: _arbitraries.uuidArbitrary,
        status: _fastcheck.constantFrom('pending', 'attending', 'maybe', 'declined'),
        guestCount: _fastcheck.integer({
            min: 1,
            max: 50
        })
    });
    /**
   * Validate guest count against activity's max guests per party
   */ function validateGuestCount(activity, rsvp) {
        // Only validate for attending status
        if (rsvp.status !== 'attending') {
            return {
                success: true
            };
        }
        // If no max guests per party set, accept any count
        if (activity.maxGuestsPerParty === null) {
            return {
                success: true
            };
        }
        // Validate guest count
        if (rsvp.guestCount > activity.maxGuestsPerParty) {
            return {
                success: false,
                error: {
                    code: 'GUEST_COUNT_EXCEEDED',
                    message: `Guest count (${rsvp.guestCount}) exceeds maximum allowed per party (${activity.maxGuestsPerParty})`
                }
            };
        }
        // Validate minimum guest count (must be at least 1)
        if (rsvp.guestCount < 1) {
            return {
                success: false,
                error: {
                    code: 'INVALID_GUEST_COUNT',
                    message: 'Guest count must be at least 1'
                }
            };
        }
        return {
            success: true
        };
    }
    it('should reject RSVP when guest count exceeds max guests per party', ()=>{
        _fastcheck.assert(_fastcheck.property(activityWithMaxGuestsArbitrary, rsvpWithGuestCountArbitrary, (activity, rsvp)=>{
            // Skip if no max guests per party set
            if (activity.maxGuestsPerParty === null) {
                return;
            }
            // Create scenario where guest count exceeds maximum
            const excessiveGuestCount = activity.maxGuestsPerParty + _fastcheck.sample(_fastcheck.integer({
                min: 1,
                max: 10
            }), 1)[0];
            const result = validateGuestCount(activity, {
                ...rsvp,
                status: 'attending',
                guestCount: excessiveGuestCount
            });
            // Should be rejected
            expect(result.success).toBe(false);
            expect(result.error).toBeDefined();
            expect(result.error?.code).toBe('GUEST_COUNT_EXCEEDED');
        }), {
            numRuns: 100
        });
    });
    it('should accept RSVP when guest count is within max guests per party', ()=>{
        _fastcheck.assert(_fastcheck.property(activityWithMaxGuestsArbitrary, rsvpWithGuestCountArbitrary, (activity, rsvp)=>{
            // Skip if no max guests per party set
            if (activity.maxGuestsPerParty === null) {
                return;
            }
            // Create scenario where guest count is within maximum
            const validGuestCount = _fastcheck.sample(_fastcheck.integer({
                min: 1,
                max: activity.maxGuestsPerParty
            }), 1)[0];
            const result = validateGuestCount(activity, {
                ...rsvp,
                status: 'attending',
                guestCount: validGuestCount
            });
            // Should be accepted
            expect(result.success).toBe(true);
            expect(result.error).toBeUndefined();
        }), {
            numRuns: 100
        });
    });
    it('should accept any guest count when max guests per party is not set', ()=>{
        _fastcheck.assert(_fastcheck.property(rsvpWithGuestCountArbitrary, _fastcheck.integer({
            min: 1,
            max: 100
        }), (rsvp, largeGuestCount)=>{
            const activity = {
                maxGuestsPerParty: null,
                requiresGuestCount: true
            };
            const result = validateGuestCount(activity, {
                ...rsvp,
                status: 'attending',
                guestCount: largeGuestCount
            });
            // Should be accepted regardless of count
            expect(result.success).toBe(true);
            expect(result.error).toBeUndefined();
        }), {
            numRuns: 100
        });
    });
    it('should not validate guest count for non-attending statuses', ()=>{
        _fastcheck.assert(_fastcheck.property(activityWithMaxGuestsArbitrary, rsvpWithGuestCountArbitrary, (activity, rsvp)=>{
            // Skip if no max guests per party set
            if (activity.maxGuestsPerParty === null) {
                return;
            }
            // Test with non-attending statuses and excessive guest count
            const nonAttendingStatuses = [
                'pending',
                'maybe',
                'declined'
            ];
            const excessiveGuestCount = activity.maxGuestsPerParty + 10;
            for (const status of nonAttendingStatuses){
                const result = validateGuestCount(activity, {
                    ...rsvp,
                    status,
                    guestCount: excessiveGuestCount
                });
                // Should be accepted regardless of guest count
                expect(result.success).toBe(true);
                expect(result.error).toBeUndefined();
            }
        }), {
            numRuns: 100
        });
    });
    it('should handle edge case: guest count exactly at maximum', ()=>{
        _fastcheck.assert(_fastcheck.property(_fastcheck.integer({
            min: 1,
            max: 20
        }), (maxGuestsPerParty)=>{
            const activity = {
                maxGuestsPerParty,
                requiresGuestCount: true
            };
            const result = validateGuestCount(activity, {
                status: 'attending',
                guestCount: maxGuestsPerParty
            });
            // Should be accepted
            expect(result.success).toBe(true);
            expect(result.error).toBeUndefined();
        }), {
            numRuns: 100
        });
    });
    it('should handle edge case: guest count one over maximum', ()=>{
        _fastcheck.assert(_fastcheck.property(_fastcheck.integer({
            min: 1,
            max: 20
        }), (maxGuestsPerParty)=>{
            const activity = {
                maxGuestsPerParty,
                requiresGuestCount: true
            };
            const result = validateGuestCount(activity, {
                status: 'attending',
                guestCount: maxGuestsPerParty + 1
            });
            // Should be rejected
            expect(result.success).toBe(false);
            expect(result.error?.code).toBe('GUEST_COUNT_EXCEEDED');
        }), {
            numRuns: 100
        });
    });
    it('should reject guest count of zero', ()=>{
        _fastcheck.assert(_fastcheck.property(activityWithMaxGuestsArbitrary, (activity)=>{
            const result = validateGuestCount(activity, {
                status: 'attending',
                guestCount: 0
            });
            // Should be rejected
            expect(result.success).toBe(false);
            expect(result.error?.code).toBe('INVALID_GUEST_COUNT');
        }), {
            numRuns: 100
        });
    });
    it('should reject negative guest count', ()=>{
        _fastcheck.assert(_fastcheck.property(activityWithMaxGuestsArbitrary, _fastcheck.integer({
            min: -100,
            max: -1
        }), (activity, negativeCount)=>{
            const result = validateGuestCount(activity, {
                status: 'attending',
                guestCount: negativeCount
            });
            // Should be rejected
            expect(result.success).toBe(false);
            expect(result.error?.code).toBe('INVALID_GUEST_COUNT');
        }), {
            numRuns: 100
        });
    });
    it('should provide clear error message with guest count details', ()=>{
        _fastcheck.assert(_fastcheck.property(_fastcheck.integer({
            min: 1,
            max: 20
        }), _fastcheck.integer({
            min: 1,
            max: 10
        }), (maxGuestsPerParty, excess)=>{
            const activity = {
                maxGuestsPerParty,
                requiresGuestCount: true
            };
            const excessiveGuestCount = maxGuestsPerParty + excess;
            const result = validateGuestCount(activity, {
                status: 'attending',
                guestCount: excessiveGuestCount
            });
            if (!result.success && result.error) {
                // Error message should include both counts
                expect(result.error.message).toContain(excessiveGuestCount.toString());
                expect(result.error.message).toContain(maxGuestsPerParty.toString());
            }
        }), {
            numRuns: 100
        });
    });
    it('should handle max guests per party of 1 (solo activities)', ()=>{
        const activity = {
            maxGuestsPerParty: 1,
            requiresGuestCount: true
        };
        // Guest count of 1 should be accepted
        const result1 = validateGuestCount(activity, {
            status: 'attending',
            guestCount: 1
        });
        expect(result1.success).toBe(true);
        // Guest count of 2 should be rejected
        const result2 = validateGuestCount(activity, {
            status: 'attending',
            guestCount: 2
        });
        expect(result2.success).toBe(false);
        expect(result2.error?.code).toBe('GUEST_COUNT_EXCEEDED');
    });
    it('should handle large max guests per party values', ()=>{
        _fastcheck.assert(_fastcheck.property(_fastcheck.integer({
            min: 50,
            max: 1000
        }), (largeMaxGuests)=>{
            const activity = {
                maxGuestsPerParty: largeMaxGuests,
                requiresGuestCount: true
            };
            // Any count up to max should be accepted
            const validCount = _fastcheck.sample(_fastcheck.integer({
                min: 1,
                max: largeMaxGuests
            }), 1)[0];
            const result = validateGuestCount(activity, {
                status: 'attending',
                guestCount: validCount
            });
            expect(result.success).toBe(true);
        }), {
            numRuns: 100
        });
    });
    it('should be idempotent - multiple validations with same input produce same result', ()=>{
        _fastcheck.assert(_fastcheck.property(activityWithMaxGuestsArbitrary, rsvpWithGuestCountArbitrary, (activity, rsvp)=>{
            const result1 = validateGuestCount(activity, rsvp);
            const result2 = validateGuestCount(activity, rsvp);
            // Results should be identical
            expect(result1.success).toBe(result2.success);
            expect(result1.error?.code).toBe(result2.error?.code);
        }), {
            numRuns: 100
        });
    });
    it('should validate guest count independently of capacity constraints', ()=>{
        _fastcheck.assert(_fastcheck.property(_fastcheck.integer({
            min: 1,
            max: 10
        }), _fastcheck.integer({
            min: 1,
            max: 100
        }), (maxGuestsPerParty, activityCapacity)=>{
            const activity = {
                maxGuestsPerParty,
                requiresGuestCount: true
            };
            // Guest count validation should not consider activity capacity
            // It only checks against max guests per party
            const validGuestCount = maxGuestsPerParty;
            const result = validateGuestCount(activity, {
                status: 'attending',
                guestCount: validGuestCount
            });
            // Should be accepted based on max guests per party alone
            expect(result.success).toBe(true);
        }), {
            numRuns: 100
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvX190ZXN0c19fL3Byb3BlcnR5L2d1ZXN0Q291bnRWYWxpZGF0aW9uLnByb3BlcnR5LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQcm9wZXJ0eS1CYXNlZCBUZXN0OiBHdWVzdCBDb3VudCBWYWxpZGF0aW9uXG4gKiBcbiAqIEZlYXR1cmU6IGd1ZXN0LXBvcnRhbC1hbmQtYWRtaW4tZW5oYW5jZW1lbnRzXG4gKiBQcm9wZXJ0eSA3OiBHdWVzdCBDb3VudCBWYWxpZGF0aW9uXG4gKiBcbiAqIERlc2NyaXB0aW9uOlxuICogRm9yIGFueSBhY3Rpdml0eSBSU1ZQIHdpdGggZ3Vlc3QgY291bnQsIHRoZSBndWVzdCBjb3VudCBTSEFMTCBiZSBsZXNzIHRoYW5cbiAqIG9yIGVxdWFsIHRvIHRoZSBhY3Rpdml0eSdzIG1heGltdW0gZ3Vlc3RzIHBlciBwYXJ0eSBzZXR0aW5nXG4gKiBcbiAqIFZhbGlkYXRlczogUmVxdWlyZW1lbnRzIDEwLjNcbiAqIFxuICogVGVzdCBTdHJhdGVneTpcbiAqIC0gR2VuZXJhdGUgYWN0aXZpdGllcyB3aXRoIHZhcmlvdXMgbWF4IGd1ZXN0cyBwZXIgcGFydHkgc2V0dGluZ3NcbiAqIC0gR2VuZXJhdGUgUlNWUCBzY2VuYXJpb3Mgd2l0aCBkaWZmZXJlbnQgZ3Vlc3QgY291bnRzXG4gKiAtIFZlcmlmeSByZWplY3Rpb24gd2hlbiBndWVzdCBjb3VudCBleGNlZWRzIG1heGltdW1cbiAqIC0gVmVyaWZ5IGFjY2VwdGFuY2Ugd2hlbiBndWVzdCBjb3VudCBpcyB3aXRoaW4gbGltaXRcbiAqL1xuXG5pbXBvcnQgKiBhcyBmYyBmcm9tICdmYXN0LWNoZWNrJztcbmltcG9ydCB7IHV1aWRBcmJpdHJhcnkgfSBmcm9tICcuLi9oZWxwZXJzL2FyYml0cmFyaWVzJztcblxuZGVzY3JpYmUoJ0ZlYXR1cmU6IGd1ZXN0LXBvcnRhbC1hbmQtYWRtaW4tZW5oYW5jZW1lbnRzLCBQcm9wZXJ0eSA3OiBHdWVzdCBDb3VudCBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAvKipcbiAgICogQXJiaXRyYXJ5IGZvciBhY3Rpdml0eSB3aXRoIG1heCBndWVzdHMgcGVyIHBhcnR5IHNldHRpbmdcbiAgICovXG4gIGNvbnN0IGFjdGl2aXR5V2l0aE1heEd1ZXN0c0FyYml0cmFyeSA9IGZjLnJlY29yZCh7XG4gICAgaWQ6IHV1aWRBcmJpdHJhcnksXG4gICAgbmFtZTogZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDEwMCB9KSxcbiAgICBtYXhHdWVzdHNQZXJQYXJ0eTogZmMub3B0aW9uKGZjLmludGVnZXIoeyBtaW46IDEsIG1heDogMjAgfSksIHsgbmlsOiBudWxsIH0pLFxuICAgIHJlcXVpcmVzR3Vlc3RDb3VudDogZmMuYm9vbGVhbigpLFxuICB9KTtcblxuICAvKipcbiAgICogQXJiaXRyYXJ5IGZvciBSU1ZQIHdpdGggZ3Vlc3QgY291bnRcbiAgICovXG4gIGNvbnN0IHJzdnBXaXRoR3Vlc3RDb3VudEFyYml0cmFyeSA9IGZjLnJlY29yZCh7XG4gICAgZ3Vlc3RJZDogdXVpZEFyYml0cmFyeSxcbiAgICBhY3Rpdml0eUlkOiB1dWlkQXJiaXRyYXJ5LFxuICAgIHN0YXR1czogZmMuY29uc3RhbnRGcm9tPCdwZW5kaW5nJyB8ICdhdHRlbmRpbmcnIHwgJ21heWJlJyB8ICdkZWNsaW5lZCc+KFxuICAgICAgJ3BlbmRpbmcnLFxuICAgICAgJ2F0dGVuZGluZycsXG4gICAgICAnbWF5YmUnLFxuICAgICAgJ2RlY2xpbmVkJ1xuICAgICksXG4gICAgZ3Vlc3RDb3VudDogZmMuaW50ZWdlcih7IG1pbjogMSwgbWF4OiA1MCB9KSxcbiAgfSk7XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIGd1ZXN0IGNvdW50IGFnYWluc3QgYWN0aXZpdHkncyBtYXggZ3Vlc3RzIHBlciBwYXJ0eVxuICAgKi9cbiAgZnVuY3Rpb24gdmFsaWRhdGVHdWVzdENvdW50KFxuICAgIGFjdGl2aXR5OiB7IG1heEd1ZXN0c1BlclBhcnR5OiBudW1iZXIgfCBudWxsOyByZXF1aXJlc0d1ZXN0Q291bnQ6IGJvb2xlYW4gfSxcbiAgICByc3ZwOiB7IHN0YXR1czogc3RyaW5nOyBndWVzdENvdW50OiBudW1iZXIgfVxuICApOiB7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogeyBjb2RlOiBzdHJpbmc7IG1lc3NhZ2U6IHN0cmluZyB9IH0ge1xuICAgIC8vIE9ubHkgdmFsaWRhdGUgZm9yIGF0dGVuZGluZyBzdGF0dXNcbiAgICBpZiAocnN2cC5zdGF0dXMgIT09ICdhdHRlbmRpbmcnKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gICAgfVxuXG4gICAgLy8gSWYgbm8gbWF4IGd1ZXN0cyBwZXIgcGFydHkgc2V0LCBhY2NlcHQgYW55IGNvdW50XG4gICAgaWYgKGFjdGl2aXR5Lm1heEd1ZXN0c1BlclBhcnR5ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgZ3Vlc3QgY291bnRcbiAgICBpZiAocnN2cC5ndWVzdENvdW50ID4gYWN0aXZpdHkubWF4R3Vlc3RzUGVyUGFydHkpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdHVUVTVF9DT1VOVF9FWENFRURFRCcsXG4gICAgICAgICAgbWVzc2FnZTogYEd1ZXN0IGNvdW50ICgke3JzdnAuZ3Vlc3RDb3VudH0pIGV4Y2VlZHMgbWF4aW11bSBhbGxvd2VkIHBlciBwYXJ0eSAoJHthY3Rpdml0eS5tYXhHdWVzdHNQZXJQYXJ0eX0pYCxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgbWluaW11bSBndWVzdCBjb3VudCAobXVzdCBiZSBhdCBsZWFzdCAxKVxuICAgIGlmIChyc3ZwLmd1ZXN0Q291bnQgPCAxKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnSU5WQUxJRF9HVUVTVF9DT1VOVCcsXG4gICAgICAgICAgbWVzc2FnZTogJ0d1ZXN0IGNvdW50IG11c3QgYmUgYXQgbGVhc3QgMScsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgfVxuXG4gIGl0KCdzaG91bGQgcmVqZWN0IFJTVlAgd2hlbiBndWVzdCBjb3VudCBleGNlZWRzIG1heCBndWVzdHMgcGVyIHBhcnR5JywgKCkgPT4ge1xuICAgIGZjLmFzc2VydChcbiAgICAgIGZjLnByb3BlcnR5KGFjdGl2aXR5V2l0aE1heEd1ZXN0c0FyYml0cmFyeSwgcnN2cFdpdGhHdWVzdENvdW50QXJiaXRyYXJ5LCAoYWN0aXZpdHksIHJzdnApID0+IHtcbiAgICAgICAgLy8gU2tpcCBpZiBubyBtYXggZ3Vlc3RzIHBlciBwYXJ0eSBzZXRcbiAgICAgICAgaWYgKGFjdGl2aXR5Lm1heEd1ZXN0c1BlclBhcnR5ID09PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlIHNjZW5hcmlvIHdoZXJlIGd1ZXN0IGNvdW50IGV4Y2VlZHMgbWF4aW11bVxuICAgICAgICBjb25zdCBleGNlc3NpdmVHdWVzdENvdW50ID0gYWN0aXZpdHkubWF4R3Vlc3RzUGVyUGFydHkgKyBmYy5zYW1wbGUoZmMuaW50ZWdlcih7IG1pbjogMSwgbWF4OiAxMCB9KSwgMSlbMF07XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVHdWVzdENvdW50KGFjdGl2aXR5LCB7XG4gICAgICAgICAgLi4ucnN2cCxcbiAgICAgICAgICBzdGF0dXM6ICdhdHRlbmRpbmcnLFxuICAgICAgICAgIGd1ZXN0Q291bnQ6IGV4Y2Vzc2l2ZUd1ZXN0Q291bnQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNob3VsZCBiZSByZWplY3RlZFxuICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yPy5jb2RlKS50b0JlKCdHVUVTVF9DT1VOVF9FWENFRURFRCcpO1xuICAgICAgfSksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBhY2NlcHQgUlNWUCB3aGVuIGd1ZXN0IGNvdW50IGlzIHdpdGhpbiBtYXggZ3Vlc3RzIHBlciBwYXJ0eScsICgpID0+IHtcbiAgICBmYy5hc3NlcnQoXG4gICAgICBmYy5wcm9wZXJ0eShhY3Rpdml0eVdpdGhNYXhHdWVzdHNBcmJpdHJhcnksIHJzdnBXaXRoR3Vlc3RDb3VudEFyYml0cmFyeSwgKGFjdGl2aXR5LCByc3ZwKSA9PiB7XG4gICAgICAgIC8vIFNraXAgaWYgbm8gbWF4IGd1ZXN0cyBwZXIgcGFydHkgc2V0XG4gICAgICAgIGlmIChhY3Rpdml0eS5tYXhHdWVzdHNQZXJQYXJ0eSA9PT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSBzY2VuYXJpbyB3aGVyZSBndWVzdCBjb3VudCBpcyB3aXRoaW4gbWF4aW11bVxuICAgICAgICBjb25zdCB2YWxpZEd1ZXN0Q291bnQgPSBmYy5zYW1wbGUoZmMuaW50ZWdlcih7IG1pbjogMSwgbWF4OiBhY3Rpdml0eS5tYXhHdWVzdHNQZXJQYXJ0eSB9KSwgMSlbMF07XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVHdWVzdENvdW50KGFjdGl2aXR5LCB7XG4gICAgICAgICAgLi4ucnN2cCxcbiAgICAgICAgICBzdGF0dXM6ICdhdHRlbmRpbmcnLFxuICAgICAgICAgIGd1ZXN0Q291bnQ6IHZhbGlkR3Vlc3RDb3VudCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2hvdWxkIGJlIGFjY2VwdGVkXG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZVVuZGVmaW5lZCgpO1xuICAgICAgfSksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBhY2NlcHQgYW55IGd1ZXN0IGNvdW50IHdoZW4gbWF4IGd1ZXN0cyBwZXIgcGFydHkgaXMgbm90IHNldCcsICgpID0+IHtcbiAgICBmYy5hc3NlcnQoXG4gICAgICBmYy5wcm9wZXJ0eShyc3ZwV2l0aEd1ZXN0Q291bnRBcmJpdHJhcnksIGZjLmludGVnZXIoeyBtaW46IDEsIG1heDogMTAwIH0pLCAocnN2cCwgbGFyZ2VHdWVzdENvdW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGFjdGl2aXR5ID0ge1xuICAgICAgICAgIG1heEd1ZXN0c1BlclBhcnR5OiBudWxsLFxuICAgICAgICAgIHJlcXVpcmVzR3Vlc3RDb3VudDogdHJ1ZSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZUd1ZXN0Q291bnQoYWN0aXZpdHksIHtcbiAgICAgICAgICAuLi5yc3ZwLFxuICAgICAgICAgIHN0YXR1czogJ2F0dGVuZGluZycsXG4gICAgICAgICAgZ3Vlc3RDb3VudDogbGFyZ2VHdWVzdENvdW50LFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTaG91bGQgYmUgYWNjZXB0ZWQgcmVnYXJkbGVzcyBvZiBjb3VudFxuICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgIH0pLFxuICAgICAgeyBudW1SdW5zOiAxMDAgfVxuICAgICk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgbm90IHZhbGlkYXRlIGd1ZXN0IGNvdW50IGZvciBub24tYXR0ZW5kaW5nIHN0YXR1c2VzJywgKCkgPT4ge1xuICAgIGZjLmFzc2VydChcbiAgICAgIGZjLnByb3BlcnR5KGFjdGl2aXR5V2l0aE1heEd1ZXN0c0FyYml0cmFyeSwgcnN2cFdpdGhHdWVzdENvdW50QXJiaXRyYXJ5LCAoYWN0aXZpdHksIHJzdnApID0+IHtcbiAgICAgICAgLy8gU2tpcCBpZiBubyBtYXggZ3Vlc3RzIHBlciBwYXJ0eSBzZXRcbiAgICAgICAgaWYgKGFjdGl2aXR5Lm1heEd1ZXN0c1BlclBhcnR5ID09PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGVzdCB3aXRoIG5vbi1hdHRlbmRpbmcgc3RhdHVzZXMgYW5kIGV4Y2Vzc2l2ZSBndWVzdCBjb3VudFxuICAgICAgICBjb25zdCBub25BdHRlbmRpbmdTdGF0dXNlczogQXJyYXk8J3BlbmRpbmcnIHwgJ21heWJlJyB8ICdkZWNsaW5lZCc+ID0gWydwZW5kaW5nJywgJ21heWJlJywgJ2RlY2xpbmVkJ107XG4gICAgICAgIGNvbnN0IGV4Y2Vzc2l2ZUd1ZXN0Q291bnQgPSBhY3Rpdml0eS5tYXhHdWVzdHNQZXJQYXJ0eSArIDEwO1xuXG4gICAgICAgIGZvciAoY29uc3Qgc3RhdHVzIG9mIG5vbkF0dGVuZGluZ1N0YXR1c2VzKSB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVHdWVzdENvdW50KGFjdGl2aXR5LCB7XG4gICAgICAgICAgICAuLi5yc3ZwLFxuICAgICAgICAgICAgc3RhdHVzLFxuICAgICAgICAgICAgZ3Vlc3RDb3VudDogZXhjZXNzaXZlR3Vlc3RDb3VudCxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIFNob3VsZCBiZSBhY2NlcHRlZCByZWdhcmRsZXNzIG9mIGd1ZXN0IGNvdW50XG4gICAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYW5kbGUgZWRnZSBjYXNlOiBndWVzdCBjb3VudCBleGFjdGx5IGF0IG1heGltdW0nLCAoKSA9PiB7XG4gICAgZmMuYXNzZXJ0KFxuICAgICAgZmMucHJvcGVydHkoZmMuaW50ZWdlcih7IG1pbjogMSwgbWF4OiAyMCB9KSwgKG1heEd1ZXN0c1BlclBhcnR5KSA9PiB7XG4gICAgICAgIGNvbnN0IGFjdGl2aXR5ID0ge1xuICAgICAgICAgIG1heEd1ZXN0c1BlclBhcnR5LFxuICAgICAgICAgIHJlcXVpcmVzR3Vlc3RDb3VudDogdHJ1ZSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZUd1ZXN0Q291bnQoYWN0aXZpdHksIHtcbiAgICAgICAgICBzdGF0dXM6ICdhdHRlbmRpbmcnLFxuICAgICAgICAgIGd1ZXN0Q291bnQ6IG1heEd1ZXN0c1BlclBhcnR5LFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTaG91bGQgYmUgYWNjZXB0ZWRcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgICB9KSxcbiAgICAgIHsgbnVtUnVuczogMTAwIH1cbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhbmRsZSBlZGdlIGNhc2U6IGd1ZXN0IGNvdW50IG9uZSBvdmVyIG1heGltdW0nLCAoKSA9PiB7XG4gICAgZmMuYXNzZXJ0KFxuICAgICAgZmMucHJvcGVydHkoZmMuaW50ZWdlcih7IG1pbjogMSwgbWF4OiAyMCB9KSwgKG1heEd1ZXN0c1BlclBhcnR5KSA9PiB7XG4gICAgICAgIGNvbnN0IGFjdGl2aXR5ID0ge1xuICAgICAgICAgIG1heEd1ZXN0c1BlclBhcnR5LFxuICAgICAgICAgIHJlcXVpcmVzR3Vlc3RDb3VudDogdHJ1ZSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZUd1ZXN0Q291bnQoYWN0aXZpdHksIHtcbiAgICAgICAgICBzdGF0dXM6ICdhdHRlbmRpbmcnLFxuICAgICAgICAgIGd1ZXN0Q291bnQ6IG1heEd1ZXN0c1BlclBhcnR5ICsgMSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2hvdWxkIGJlIHJlamVjdGVkXG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3I/LmNvZGUpLnRvQmUoJ0dVRVNUX0NPVU5UX0VYQ0VFREVEJyk7XG4gICAgICB9KSxcbiAgICAgIHsgbnVtUnVuczogMTAwIH1cbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJlamVjdCBndWVzdCBjb3VudCBvZiB6ZXJvJywgKCkgPT4ge1xuICAgIGZjLmFzc2VydChcbiAgICAgIGZjLnByb3BlcnR5KGFjdGl2aXR5V2l0aE1heEd1ZXN0c0FyYml0cmFyeSwgKGFjdGl2aXR5KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlR3Vlc3RDb3VudChhY3Rpdml0eSwge1xuICAgICAgICAgIHN0YXR1czogJ2F0dGVuZGluZycsXG4gICAgICAgICAgZ3Vlc3RDb3VudDogMCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2hvdWxkIGJlIHJlamVjdGVkXG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3I/LmNvZGUpLnRvQmUoJ0lOVkFMSURfR1VFU1RfQ09VTlQnKTtcbiAgICAgIH0pLFxuICAgICAgeyBudW1SdW5zOiAxMDAgfVxuICAgICk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVqZWN0IG5lZ2F0aXZlIGd1ZXN0IGNvdW50JywgKCkgPT4ge1xuICAgIGZjLmFzc2VydChcbiAgICAgIGZjLnByb3BlcnR5KGFjdGl2aXR5V2l0aE1heEd1ZXN0c0FyYml0cmFyeSwgZmMuaW50ZWdlcih7IG1pbjogLTEwMCwgbWF4OiAtMSB9KSwgKGFjdGl2aXR5LCBuZWdhdGl2ZUNvdW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlR3Vlc3RDb3VudChhY3Rpdml0eSwge1xuICAgICAgICAgIHN0YXR1czogJ2F0dGVuZGluZycsXG4gICAgICAgICAgZ3Vlc3RDb3VudDogbmVnYXRpdmVDb3VudCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2hvdWxkIGJlIHJlamVjdGVkXG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3I/LmNvZGUpLnRvQmUoJ0lOVkFMSURfR1VFU1RfQ09VTlQnKTtcbiAgICAgIH0pLFxuICAgICAgeyBudW1SdW5zOiAxMDAgfVxuICAgICk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcHJvdmlkZSBjbGVhciBlcnJvciBtZXNzYWdlIHdpdGggZ3Vlc3QgY291bnQgZGV0YWlscycsICgpID0+IHtcbiAgICBmYy5hc3NlcnQoXG4gICAgICBmYy5wcm9wZXJ0eShmYy5pbnRlZ2VyKHsgbWluOiAxLCBtYXg6IDIwIH0pLCBmYy5pbnRlZ2VyKHsgbWluOiAxLCBtYXg6IDEwIH0pLCAobWF4R3Vlc3RzUGVyUGFydHksIGV4Y2VzcykgPT4ge1xuICAgICAgICBjb25zdCBhY3Rpdml0eSA9IHtcbiAgICAgICAgICBtYXhHdWVzdHNQZXJQYXJ0eSxcbiAgICAgICAgICByZXF1aXJlc0d1ZXN0Q291bnQ6IHRydWUsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZXhjZXNzaXZlR3Vlc3RDb3VudCA9IG1heEd1ZXN0c1BlclBhcnR5ICsgZXhjZXNzO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlR3Vlc3RDb3VudChhY3Rpdml0eSwge1xuICAgICAgICAgIHN0YXR1czogJ2F0dGVuZGluZycsXG4gICAgICAgICAgZ3Vlc3RDb3VudDogZXhjZXNzaXZlR3Vlc3RDb3VudCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQuZXJyb3IpIHtcbiAgICAgICAgICAvLyBFcnJvciBtZXNzYWdlIHNob3VsZCBpbmNsdWRlIGJvdGggY291bnRzXG4gICAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oZXhjZXNzaXZlR3Vlc3RDb3VudC50b1N0cmluZygpKTtcbiAgICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbihtYXhHdWVzdHNQZXJQYXJ0eS50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYW5kbGUgbWF4IGd1ZXN0cyBwZXIgcGFydHkgb2YgMSAoc29sbyBhY3Rpdml0aWVzKScsICgpID0+IHtcbiAgICBjb25zdCBhY3Rpdml0eSA9IHtcbiAgICAgIG1heEd1ZXN0c1BlclBhcnR5OiAxLFxuICAgICAgcmVxdWlyZXNHdWVzdENvdW50OiB0cnVlLFxuICAgIH07XG5cbiAgICAvLyBHdWVzdCBjb3VudCBvZiAxIHNob3VsZCBiZSBhY2NlcHRlZFxuICAgIGNvbnN0IHJlc3VsdDEgPSB2YWxpZGF0ZUd1ZXN0Q291bnQoYWN0aXZpdHksIHtcbiAgICAgIHN0YXR1czogJ2F0dGVuZGluZycsXG4gICAgICBndWVzdENvdW50OiAxLFxuICAgIH0pO1xuICAgIGV4cGVjdChyZXN1bHQxLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG5cbiAgICAvLyBHdWVzdCBjb3VudCBvZiAyIHNob3VsZCBiZSByZWplY3RlZFxuICAgIGNvbnN0IHJlc3VsdDIgPSB2YWxpZGF0ZUd1ZXN0Q291bnQoYWN0aXZpdHksIHtcbiAgICAgIHN0YXR1czogJ2F0dGVuZGluZycsXG4gICAgICBndWVzdENvdW50OiAyLFxuICAgIH0pO1xuICAgIGV4cGVjdChyZXN1bHQyLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgIGV4cGVjdChyZXN1bHQyLmVycm9yPy5jb2RlKS50b0JlKCdHVUVTVF9DT1VOVF9FWENFRURFRCcpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhbmRsZSBsYXJnZSBtYXggZ3Vlc3RzIHBlciBwYXJ0eSB2YWx1ZXMnLCAoKSA9PiB7XG4gICAgZmMuYXNzZXJ0KFxuICAgICAgZmMucHJvcGVydHkoZmMuaW50ZWdlcih7IG1pbjogNTAsIG1heDogMTAwMCB9KSwgKGxhcmdlTWF4R3Vlc3RzKSA9PiB7XG4gICAgICAgIGNvbnN0IGFjdGl2aXR5ID0ge1xuICAgICAgICAgIG1heEd1ZXN0c1BlclBhcnR5OiBsYXJnZU1heEd1ZXN0cyxcbiAgICAgICAgICByZXF1aXJlc0d1ZXN0Q291bnQ6IHRydWUsXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQW55IGNvdW50IHVwIHRvIG1heCBzaG91bGQgYmUgYWNjZXB0ZWRcbiAgICAgICAgY29uc3QgdmFsaWRDb3VudCA9IGZjLnNhbXBsZShmYy5pbnRlZ2VyKHsgbWluOiAxLCBtYXg6IGxhcmdlTWF4R3Vlc3RzIH0pLCAxKVswXTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVHdWVzdENvdW50KGFjdGl2aXR5LCB7XG4gICAgICAgICAgc3RhdHVzOiAnYXR0ZW5kaW5nJyxcbiAgICAgICAgICBndWVzdENvdW50OiB2YWxpZENvdW50LFxuICAgICAgICB9KTtcblxuICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICB9KSxcbiAgICAgIHsgbnVtUnVuczogMTAwIH1cbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGJlIGlkZW1wb3RlbnQgLSBtdWx0aXBsZSB2YWxpZGF0aW9ucyB3aXRoIHNhbWUgaW5wdXQgcHJvZHVjZSBzYW1lIHJlc3VsdCcsICgpID0+IHtcbiAgICBmYy5hc3NlcnQoXG4gICAgICBmYy5wcm9wZXJ0eShhY3Rpdml0eVdpdGhNYXhHdWVzdHNBcmJpdHJhcnksIHJzdnBXaXRoR3Vlc3RDb3VudEFyYml0cmFyeSwgKGFjdGl2aXR5LCByc3ZwKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdDEgPSB2YWxpZGF0ZUd1ZXN0Q291bnQoYWN0aXZpdHksIHJzdnApO1xuICAgICAgICBjb25zdCByZXN1bHQyID0gdmFsaWRhdGVHdWVzdENvdW50KGFjdGl2aXR5LCByc3ZwKTtcblxuICAgICAgICAvLyBSZXN1bHRzIHNob3VsZCBiZSBpZGVudGljYWxcbiAgICAgICAgZXhwZWN0KHJlc3VsdDEuc3VjY2VzcykudG9CZShyZXN1bHQyLnN1Y2Nlc3MpO1xuICAgICAgICBleHBlY3QocmVzdWx0MS5lcnJvcj8uY29kZSkudG9CZShyZXN1bHQyLmVycm9yPy5jb2RlKTtcbiAgICAgIH0pLFxuICAgICAgeyBudW1SdW5zOiAxMDAgfVxuICAgICk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgdmFsaWRhdGUgZ3Vlc3QgY291bnQgaW5kZXBlbmRlbnRseSBvZiBjYXBhY2l0eSBjb25zdHJhaW50cycsICgpID0+IHtcbiAgICBmYy5hc3NlcnQoXG4gICAgICBmYy5wcm9wZXJ0eShcbiAgICAgICAgZmMuaW50ZWdlcih7IG1pbjogMSwgbWF4OiAxMCB9KSxcbiAgICAgICAgZmMuaW50ZWdlcih7IG1pbjogMSwgbWF4OiAxMDAgfSksXG4gICAgICAgIChtYXhHdWVzdHNQZXJQYXJ0eSwgYWN0aXZpdHlDYXBhY2l0eSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGFjdGl2aXR5ID0ge1xuICAgICAgICAgICAgbWF4R3Vlc3RzUGVyUGFydHksXG4gICAgICAgICAgICByZXF1aXJlc0d1ZXN0Q291bnQ6IHRydWUsXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIC8vIEd1ZXN0IGNvdW50IHZhbGlkYXRpb24gc2hvdWxkIG5vdCBjb25zaWRlciBhY3Rpdml0eSBjYXBhY2l0eVxuICAgICAgICAgIC8vIEl0IG9ubHkgY2hlY2tzIGFnYWluc3QgbWF4IGd1ZXN0cyBwZXIgcGFydHlcbiAgICAgICAgICBjb25zdCB2YWxpZEd1ZXN0Q291bnQgPSBtYXhHdWVzdHNQZXJQYXJ0eTtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZUd1ZXN0Q291bnQoYWN0aXZpdHksIHtcbiAgICAgICAgICAgIHN0YXR1czogJ2F0dGVuZGluZycsXG4gICAgICAgICAgICBndWVzdENvdW50OiB2YWxpZEd1ZXN0Q291bnQsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBTaG91bGQgYmUgYWNjZXB0ZWQgYmFzZWQgb24gbWF4IGd1ZXN0cyBwZXIgcGFydHkgYWxvbmVcbiAgICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJkZXNjcmliZSIsImFjdGl2aXR5V2l0aE1heEd1ZXN0c0FyYml0cmFyeSIsImZjIiwicmVjb3JkIiwiaWQiLCJ1dWlkQXJiaXRyYXJ5IiwibmFtZSIsInN0cmluZyIsIm1pbkxlbmd0aCIsIm1heExlbmd0aCIsIm1heEd1ZXN0c1BlclBhcnR5Iiwib3B0aW9uIiwiaW50ZWdlciIsIm1pbiIsIm1heCIsIm5pbCIsInJlcXVpcmVzR3Vlc3RDb3VudCIsImJvb2xlYW4iLCJyc3ZwV2l0aEd1ZXN0Q291bnRBcmJpdHJhcnkiLCJndWVzdElkIiwiYWN0aXZpdHlJZCIsInN0YXR1cyIsImNvbnN0YW50RnJvbSIsImd1ZXN0Q291bnQiLCJ2YWxpZGF0ZUd1ZXN0Q291bnQiLCJhY3Rpdml0eSIsInJzdnAiLCJzdWNjZXNzIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsIml0IiwiYXNzZXJ0IiwicHJvcGVydHkiLCJleGNlc3NpdmVHdWVzdENvdW50Iiwic2FtcGxlIiwicmVzdWx0IiwiZXhwZWN0IiwidG9CZSIsInRvQmVEZWZpbmVkIiwibnVtUnVucyIsInZhbGlkR3Vlc3RDb3VudCIsInRvQmVVbmRlZmluZWQiLCJsYXJnZUd1ZXN0Q291bnQiLCJub25BdHRlbmRpbmdTdGF0dXNlcyIsIm5lZ2F0aXZlQ291bnQiLCJleGNlc3MiLCJ0b0NvbnRhaW4iLCJ0b1N0cmluZyIsInJlc3VsdDEiLCJyZXN1bHQyIiwibGFyZ2VNYXhHdWVzdHMiLCJ2YWxpZENvdW50IiwiYWN0aXZpdHlDYXBhY2l0eSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBaUJDOzs7O21FQUVtQjs2QkFDVTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRTlCQSxTQUFTLG9GQUFvRjtJQUMzRjs7R0FFQyxHQUNELE1BQU1DLGlDQUFpQ0MsV0FBR0MsTUFBTSxDQUFDO1FBQy9DQyxJQUFJQywwQkFBYTtRQUNqQkMsTUFBTUosV0FBR0ssTUFBTSxDQUFDO1lBQUVDLFdBQVc7WUFBR0MsV0FBVztRQUFJO1FBQy9DQyxtQkFBbUJSLFdBQUdTLE1BQU0sQ0FBQ1QsV0FBR1UsT0FBTyxDQUFDO1lBQUVDLEtBQUs7WUFBR0MsS0FBSztRQUFHLElBQUk7WUFBRUMsS0FBSztRQUFLO1FBQzFFQyxvQkFBb0JkLFdBQUdlLE9BQU87SUFDaEM7SUFFQTs7R0FFQyxHQUNELE1BQU1DLDhCQUE4QmhCLFdBQUdDLE1BQU0sQ0FBQztRQUM1Q2dCLFNBQVNkLDBCQUFhO1FBQ3RCZSxZQUFZZiwwQkFBYTtRQUN6QmdCLFFBQVFuQixXQUFHb0IsWUFBWSxDQUNyQixXQUNBLGFBQ0EsU0FDQTtRQUVGQyxZQUFZckIsV0FBR1UsT0FBTyxDQUFDO1lBQUVDLEtBQUs7WUFBR0MsS0FBSztRQUFHO0lBQzNDO0lBRUE7O0dBRUMsR0FDRCxTQUFTVSxtQkFDUEMsUUFBMkUsRUFDM0VDLElBQTRDO1FBRTVDLHFDQUFxQztRQUNyQyxJQUFJQSxLQUFLTCxNQUFNLEtBQUssYUFB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