{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/__tests__/property/guestCountValidation.property.test.ts"],"sourcesContent":["/**\n * Property-Based Test: Guest Count Validation\n * \n * Feature: guest-portal-and-admin-enhancements\n * Property 7: Guest Count Validation\n * \n * Description:\n * For any activity RSVP with guest count, the guest count SHALL be less than\n * or equal to the activity's maximum guests per party setting\n * \n * Validates: Requirements 10.3\n * \n * Test Strategy:\n * - Generate activities with various max guests per party settings\n * - Generate RSVP scenarios with different guest counts\n * - Verify rejection when guest count exceeds maximum\n * - Verify acceptance when guest count is within limit\n */\n\nimport * as fc from 'fast-check';\nimport { uuidArbitrary } from '../helpers/arbitraries';\n\ndescribe('Feature: guest-portal-and-admin-enhancements, Property 7: Guest Count Validation', () => {\n  /**\n   * Arbitrary for activity with max guests per party setting\n   */\n  const activityWithMaxGuestsArbitrary = fc.record({\n    id: uuidArbitrary,\n    name: fc.string({ minLength: 1, maxLength: 100 }),\n    maxGuestsPerParty: fc.option(fc.integer({ min: 1, max: 20 }), { nil: null }),\n    requiresGuestCount: fc.boolean(),\n  });\n\n  /**\n   * Arbitrary for RSVP with guest count\n   */\n  const rsvpWithGuestCountArbitrary = fc.record({\n    guestId: uuidArbitrary,\n    activityId: uuidArbitrary,\n    status: fc.constantFrom<'pending' | 'attending' | 'maybe' | 'declined'>(\n      'pending',\n      'attending',\n      'maybe',\n      'declined'\n    ),\n    guestCount: fc.integer({ min: 1, max: 50 }),\n  });\n\n  /**\n   * Validate guest count against activity's max guests per party\n   */\n  function validateGuestCount(\n    activity: { maxGuestsPerParty: number | null; requiresGuestCount: boolean },\n    rsvp: { status: string; guestCount: number }\n  ): { success: boolean; error?: { code: string; message: string } } {\n    // Only validate for attending status\n    if (rsvp.status !== 'attending') {\n      return { success: true };\n    }\n\n    // If no max guests per party set, accept any count\n    if (activity.maxGuestsPerParty === null) {\n      return { success: true };\n    }\n\n    // Validate guest count\n    if (rsvp.guestCount > activity.maxGuestsPerParty) {\n      return {\n        success: false,\n        error: {\n          code: 'GUEST_COUNT_EXCEEDED',\n          message: `Guest count (${rsvp.guestCount}) exceeds maximum allowed per party (${activity.maxGuestsPerParty})`,\n        },\n      };\n    }\n\n    // Validate minimum guest count (must be at least 1)\n    if (rsvp.guestCount < 1) {\n      return {\n        success: false,\n        error: {\n          code: 'INVALID_GUEST_COUNT',\n          message: 'Guest count must be at least 1',\n        },\n      };\n    }\n\n    return { success: true };\n  }\n\n  it('should reject RSVP when guest count exceeds max guests per party', () => {\n    fc.assert(\n      fc.property(activityWithMaxGuestsArbitrary, rsvpWithGuestCountArbitrary, (activity, rsvp) => {\n        // Skip if no max guests per party set\n        if (activity.maxGuestsPerParty === null) {\n          return;\n        }\n\n        // Create scenario where guest count exceeds maximum\n        const excessiveGuestCount = activity.maxGuestsPerParty + fc.sample(fc.integer({ min: 1, max: 10 }), 1)[0];\n\n        const result = validateGuestCount(activity, {\n          ...rsvp,\n          status: 'attending',\n          guestCount: excessiveGuestCount,\n        });\n\n        // Should be rejected\n        expect(result.success).toBe(false);\n        expect(result.error).toBeDefined();\n        expect(result.error?.code).toBe('GUEST_COUNT_EXCEEDED');\n      }),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should accept RSVP when guest count is within max guests per party', () => {\n    fc.assert(\n      fc.property(activityWithMaxGuestsArbitrary, rsvpWithGuestCountArbitrary, (activity, rsvp) => {\n        // Skip if no max guests per party set\n        if (activity.maxGuestsPerParty === null) {\n          return;\n        }\n\n        // Create scenario where guest count is within maximum\n        const validGuestCount = fc.sample(fc.integer({ min: 1, max: activity.maxGuestsPerParty }), 1)[0];\n\n        const result = validateGuestCount(activity, {\n          ...rsvp,\n          status: 'attending',\n          guestCount: validGuestCount,\n        });\n\n        // Should be accepted\n        expect(result.success).toBe(true);\n        expect(result.error).toBeUndefined();\n      }),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should accept any guest count when max guests per party is not set', () => {\n    fc.assert(\n      fc.property(rsvpWithGuestCountArbitrary, fc.integer({ min: 1, max: 100 }), (rsvp, largeGuestCount) => {\n        const activity = {\n          maxGuestsPerParty: null,\n          requiresGuestCount: true,\n        };\n\n        const result = validateGuestCount(activity, {\n          ...rsvp,\n          status: 'attending',\n          guestCount: largeGuestCount,\n        });\n\n        // Should be accepted regardless of count\n        expect(result.success).toBe(true);\n        expect(result.error).toBeUndefined();\n      }),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should not validate guest count for non-attending statuses', () => {\n    fc.assert(\n      fc.property(activityWithMaxGuestsArbitrary, rsvpWithGuestCountArbitrary, (activity, rsvp) => {\n        // Skip if no max guests per party set\n        if (activity.maxGuestsPerParty === null) {\n          return;\n        }\n\n        // Test with non-attending statuses and excessive guest count\n        const nonAttendingStatuses: Array<'pending' | 'maybe' | 'declined'> = ['pending', 'maybe', 'declined'];\n        const excessiveGuestCount = activity.maxGuestsPerParty + 10;\n\n        for (const status of nonAttendingStatuses) {\n          const result = validateGuestCount(activity, {\n            ...rsvp,\n            status,\n            guestCount: excessiveGuestCount,\n          });\n\n          // Should be accepted regardless of guest count\n          expect(result.success).toBe(true);\n          expect(result.error).toBeUndefined();\n        }\n      }),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should handle edge case: guest count exactly at maximum', () => {\n    fc.assert(\n      fc.property(fc.integer({ min: 1, max: 20 }), (maxGuestsPerParty) => {\n        const activity = {\n          maxGuestsPerParty,\n          requiresGuestCount: true,\n        };\n\n        const result = validateGuestCount(activity, {\n          status: 'attending',\n          guestCount: maxGuestsPerParty,\n        });\n\n        // Should be accepted\n        expect(result.success).toBe(true);\n        expect(result.error).toBeUndefined();\n      }),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should handle edge case: guest count one over maximum', () => {\n    fc.assert(\n      fc.property(fc.integer({ min: 1, max: 20 }), (maxGuestsPerParty) => {\n        const activity = {\n          maxGuestsPerParty,\n          requiresGuestCount: true,\n        };\n\n        const result = validateGuestCount(activity, {\n          status: 'attending',\n          guestCount: maxGuestsPerParty + 1,\n        });\n\n        // Should be rejected\n        expect(result.success).toBe(false);\n        expect(result.error?.code).toBe('GUEST_COUNT_EXCEEDED');\n      }),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should reject guest count of zero', () => {\n    fc.assert(\n      fc.property(activityWithMaxGuestsArbitrary, (activity) => {\n        const result = validateGuestCount(activity, {\n          status: 'attending',\n          guestCount: 0,\n        });\n\n        // Should be rejected\n        expect(result.success).toBe(false);\n        expect(result.error?.code).toBe('INVALID_GUEST_COUNT');\n      }),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should reject negative guest count', () => {\n    fc.assert(\n      fc.property(activityWithMaxGuestsArbitrary, fc.integer({ min: -100, max: -1 }), (activity, negativeCount) => {\n        const result = validateGuestCount(activity, {\n          status: 'attending',\n          guestCount: negativeCount,\n        });\n\n        // Should be rejected\n        expect(result.success).toBe(false);\n        expect(result.error?.code).toBe('INVALID_GUEST_COUNT');\n      }),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should provide clear error message with guest count details', () => {\n    fc.assert(\n      fc.property(fc.integer({ min: 1, max: 20 }), fc.integer({ min: 1, max: 10 }), (maxGuestsPerParty, excess) => {\n        const activity = {\n          maxGuestsPerParty,\n          requiresGuestCount: true,\n        };\n\n        const excessiveGuestCount = maxGuestsPerParty + excess;\n\n        const result = validateGuestCount(activity, {\n          status: 'attending',\n          guestCount: excessiveGuestCount,\n        });\n\n        if (!result.success && result.error) {\n          // Error message should include both counts\n          expect(result.error.message).toContain(excessiveGuestCount.toString());\n          expect(result.error.message).toContain(maxGuestsPerParty.toString());\n        }\n      }),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should handle max guests per party of 1 (solo activities)', () => {\n    const activity = {\n      maxGuestsPerParty: 1,\n      requiresGuestCount: true,\n    };\n\n    // Guest count of 1 should be accepted\n    const result1 = validateGuestCount(activity, {\n      status: 'attending',\n      guestCount: 1,\n    });\n    expect(result1.success).toBe(true);\n\n    // Guest count of 2 should be rejected\n    const result2 = validateGuestCount(activity, {\n      status: 'attending',\n      guestCount: 2,\n    });\n    expect(result2.success).toBe(false);\n    expect(result2.error?.code).toBe('GUEST_COUNT_EXCEEDED');\n  });\n\n  it('should handle large max guests per party values', () => {\n    fc.assert(\n      fc.property(fc.integer({ min: 50, max: 1000 }), (largeMaxGuests) => {\n        const activity = {\n          maxGuestsPerParty: largeMaxGuests,\n          requiresGuestCount: true,\n        };\n\n        // Any count up to max should be accepted\n        const validCount = fc.sample(fc.integer({ min: 1, max: largeMaxGuests }), 1)[0];\n        const result = validateGuestCount(activity, {\n          status: 'attending',\n          guestCount: validCount,\n        });\n\n        expect(result.success).toBe(true);\n      }),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should be idempotent - multiple validations with same input produce same result', () => {\n    fc.assert(\n      fc.property(activityWithMaxGuestsArbitrary, rsvpWithGuestCountArbitrary, (activity, rsvp) => {\n        const result1 = validateGuestCount(activity, rsvp);\n        const result2 = validateGuestCount(activity, rsvp);\n\n        // Results should be identical\n        expect(result1.success).toBe(result2.success);\n        expect(result1.error?.code).toBe(result2.error?.code);\n      }),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should validate guest count independently of capacity constraints', () => {\n    fc.assert(\n      fc.property(\n        fc.integer({ min: 1, max: 10 }),\n        fc.integer({ min: 1, max: 100 }),\n        (maxGuestsPerParty, activityCapacity) => {\n          const activity = {\n            maxGuestsPerParty,\n            requiresGuestCount: true,\n          };\n\n          // Guest count validation should not consider activity capacity\n          // It only checks against max guests per party\n          const validGuestCount = maxGuestsPerParty;\n          const result = validateGuestCount(activity, {\n            status: 'attending',\n            guestCount: validGuestCount,\n          });\n\n          // Should be accepted based on max guests per party alone\n          expect(result.success).toBe(true);\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n});\n"],"names":["describe","activityWithMaxGuestsArbitrary","fc","record","id","uuidArbitrary","name","string","minLength","maxLength","maxGuestsPerParty","option","integer","min","max","nil","requiresGuestCount","boolean","rsvpWithGuestCountArbitrary","guestId","activityId","status","constantFrom","guestCount","validateGuestCount","activity","rsvp","success","error","code","message","it","assert","property","excessiveGuestCount","sample","result","expect","toBe","toBeDefined","numRuns","validGuestCount","toBeUndefined","largeGuestCount","nonAttendingStatuses","negativeCount","excess","toContain","toString","result1","result2","largeMaxGuests","validCount","activityCapacity"],"mappings":"AAAA;;;;;;;;;;;;;;;;;CAiBC;;;;mEAEmB;6BACU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAE9BA,SAAS,oFAAoF;IAC3F;;GAEC,GACD,MAAMC,iCAAiCC,WAAGC,MAAM,CAAC;QAC/CC,IAAIC,0BAAa;QACjBC,MAAMJ,WAAGK,MAAM,CAAC;YAAEC,WAAW;YAAGC,WAAW;QAAI;QAC/CC,mBAAmBR,WAAGS,MAAM,CAACT,WAAGU,OAAO,CAAC;YAAEC,KAAK;YAAGC,KAAK;QAAG,IAAI;YAAEC,KAAK;QAAK;QAC1EC,oBAAoBd,WAAGe,OAAO;IAChC;IAEA;;GAEC,GACD,MAAMC,8BAA8BhB,WAAGC,MAAM,CAAC;QAC5CgB,SAASd,0BAAa;QACtBe,YAAYf,0BAAa;QACzBgB,QAAQnB,WAAGoB,YAAY,CACrB,WACA,aACA,SACA;QAEFC,YAAYrB,WAAGU,OAAO,CAAC;YAAEC,KAAK;YAAGC,KAAK;QAAG;IAC3C;IAEA;;GAEC,GACD,SAASU,mBACPC,QAA2E,EAC3EC,IAA4C;QAE5C,qCAAqC;QACrC,IAAIA,KAAKL,MAAM,KAAK,aAAa;YAC/B,OAAO;gBAAEM,SAAS;YAAK;QACzB;QAEA,mDAAmD;QACnD,IAAIF,SAASf,iBAAiB,KAAK,MAAM;YACvC,OAAO;gBAAEiB,SAAS;YAAK;QACzB;QAEA,uBAAuB;QACvB,IAAID,KAAKH,UAAU,GAAGE,SAASf,iBAAiB,EAAE;YAChD,OAAO;gBACLiB,SAAS;gBACTC,OAAO;oBACLC,MAAM;oBACNC,SAAS,CAAC,aAAa,EAAEJ,KAAKH,UAAU,CAAC,qCAAqC,EAAEE,SAASf,iBAAiB,CAAC,CAAC,CAAC;gBAC/G;YACF;QACF;QAEA,oDAAoD;QACpD,IAAIgB,KAAKH,UAAU,GAAG,GAAG;YACvB,OAAO;gBACLI,SAAS;gBACTC,OAAO;oBACLC,MAAM;oBACNC,SAAS;gBACX;YACF;QACF;QAEA,OAAO;YAAEH,SAAS;QAAK;IACzB;IAEAI,GAAG,oEAAoE;QACrE7B,WAAG8B,MAAM,CACP9B,WAAG+B,QAAQ,CAAChC,gCAAgCiB,6BAA6B,CAACO,UAAUC;YAClF,sCAAsC;YACtC,IAAID,SAASf,iBAAiB,KAAK,MAAM;gBACvC;YACF;YAEA,oDAAoD;YACpD,MAAMwB,sBAAsBT,SAASf,iBAAiB,GAAGR,WAAGiC,MAAM,CAACjC,WAAGU,OAAO,CAAC;gBAAEC,KAAK;gBAAGC,KAAK;YAAG,IAAI,EAAE,CAAC,EAAE;YAEzG,MAAMsB,SAASZ,mBAAmBC,UAAU;gBAC1C,GAAGC,IAAI;gBACPL,QAAQ;gBACRE,YAAYW;YACd;YAEA,qBAAqB;YACrBG,OAAOD,OAAOT,OAAO,EAAEW,IAAI,CAAC;YAC5BD,OAAOD,OAAOR,KAAK,EAAEW,WAAW;YAChCF,OAAOD,OAAOR,KAAK,EAAEC,MAAMS,IAAI,CAAC;QAClC,IACA;YAAEE,SAAS;QAAI;IAEnB;IAEAT,GAAG,sEAAsE;QACvE7B,WAAG8B,MAAM,CACP9B,WAAG+B,QAAQ,CAAChC,gCAAgCiB,6BAA6B,CAACO,UAAUC;YAClF,sCAAsC;YACtC,IAAID,SAASf,iBAAiB,KAAK,MAAM;gBACvC;YACF;YAEA,sDAAsD;YACtD,MAAM+B,kBAAkBvC,WAAGiC,MAAM,CAACjC,WAAGU,OAAO,CAAC;gBAAEC,KAAK;gBAAGC,KAAKW,SAASf,iBAAiB;YAAC,IAAI,EAAE,CAAC,EAAE;YAEhG,MAAM0B,SAASZ,mBAAmBC,UAAU;gBAC1C,GAAGC,IAAI;gBACPL,QAAQ;gBACRE,YAAYkB;YACd;YAEA,qBAAqB;YACrBJ,OAAOD,OAAOT,OAAO,EAAEW,IAAI,CAAC;YAC5BD,OAAOD,OAAOR,KAAK,EAAEc,aAAa;QACpC,IACA;YAAEF,SAAS;QAAI;IAEnB;IAEAT,GAAG,sEAAsE;QACvE7B,WAAG8B,MAAM,CACP9B,WAAG+B,QAAQ,CAACf,6BAA6BhB,WAAGU,OAAO,CAAC;YAAEC,KAAK;YAAGC,KAAK;QAAI,IAAI,CAACY,MAAMiB;YAChF,MAAMlB,WAAW;gBACff,mBAAmB;gBACnBM,oBAAoB;YACtB;YAEA,MAAMoB,SAASZ,mBAAmBC,UAAU;gBAC1C,GAAGC,IAAI;gBACPL,QAAQ;gBACRE,YAAYoB;YACd;YAEA,yCAAyC;YACzCN,OAAOD,OAAOT,OAAO,EAAEW,IAAI,CAAC;YAC5BD,OAAOD,OAAOR,KAAK,EAAEc,aAAa;QACpC,IACA;YAAEF,SAAS;QAAI;IAEnB;IAEAT,GAAG,8DAA8D;QAC/D7B,WAAG8B,MAAM,CACP9B,WAAG+B,QAAQ,CAAChC,gCAAgCiB,6BAA6B,CAACO,UAAUC;YAClF,sCAAsC;YACtC,IAAID,SAASf,iBAAiB,KAAK,MAAM;gBACvC;YACF;YAEA,6DAA6D;YAC7D,MAAMkC,uBAAgE;gBAAC;gBAAW;gBAAS;aAAW;YACtG,MAAMV,sBAAsBT,SAASf,iBAAiB,GAAG;YAEzD,KAAK,MAAMW,UAAUuB,qBAAsB;gBACzC,MAAMR,SAASZ,mBAAmBC,UAAU;oBAC1C,GAAGC,IAAI;oBACPL;oBACAE,YAAYW;gBACd;gBAEA,+CAA+C;gBAC/CG,OAAOD,OAAOT,OAAO,EAAEW,IAAI,CAAC;gBAC5BD,OAAOD,OAAOR,KAAK,EAAEc,aAAa;YACpC;QACF,IACA;YAAEF,SAAS;QAAI;IAEnB;IAEAT,GAAG,2DAA2D;QAC5D7B,WAAG8B,MAAM,CACP9B,WAAG+B,QAAQ,CAAC/B,WAAGU,OAAO,CAAC;YAAEC,KAAK;YAAGC,KAAK;QAAG,IAAI,CAACJ;YAC5C,MAAMe,WAAW;gBACff;gBACAM,oBAAoB;YACtB;YAEA,MAAMoB,SAASZ,mBAAmBC,UAAU;gBAC1CJ,QAAQ;gBACRE,YAAYb;YACd;YAEA,qBAAqB;YACrB2B,OAAOD,OAAOT,OAAO,EAAEW,IAAI,CAAC;YAC5BD,OAAOD,OAAOR,KAAK,EAAEc,aAAa;QACpC,IACA;YAAEF,SAAS;QAAI;IAEnB;IAEAT,GAAG,yDAAyD;QAC1D7B,WAAG8B,MAAM,CACP9B,WAAG+B,QAAQ,CAAC/B,WAAGU,OAAO,CAAC;YAAEC,KAAK;YAAGC,KAAK;QAAG,IAAI,CAACJ;YAC5C,MAAMe,WAAW;gBACff;gBACAM,oBAAoB;YACtB;YAEA,MAAMoB,SAASZ,mBAAmBC,UAAU;gBAC1CJ,QAAQ;gBACRE,YAAYb,oBAAoB;YAClC;YAEA,qBAAqB;YACrB2B,OAAOD,OAAOT,OAAO,EAAEW,IAAI,CAAC;YAC5BD,OAAOD,OAAOR,KAAK,EAAEC,MAAMS,IAAI,CAAC;QAClC,IACA;YAAEE,SAAS;QAAI;IAEnB;IAEAT,GAAG,qCAAqC;QACtC7B,WAAG8B,MAAM,CACP9B,WAAG+B,QAAQ,CAAChC,gCAAgC,CAACwB;YAC3C,MAAMW,SAASZ,mBAAmBC,UAAU;gBAC1CJ,QAAQ;gBACRE,YAAY;YACd;YAEA,qBAAqB;YACrBc,OAAOD,OAAOT,OAAO,EAAEW,IAAI,CAAC;YAC5BD,OAAOD,OAAOR,KAAK,EAAEC,MAAMS,IAAI,CAAC;QAClC,IACA;YAAEE,SAAS;QAAI;IAEnB;IAEAT,GAAG,sCAAsC;QACvC7B,WAAG8B,MAAM,CACP9B,WAAG+B,QAAQ,CAAChC,gCAAgCC,WAAGU,OAAO,CAAC;YAAEC,KAAK,CAAC;YAAKC,KAAK,CAAC;QAAE,IAAI,CAACW,UAAUoB;YACzF,MAAMT,SAASZ,mBAAmBC,UAAU;gBAC1CJ,QAAQ;gBACRE,YAAYsB;YACd;YAEA,qBAAqB;YACrBR,OAAOD,OAAOT,OAAO,EAAEW,IAAI,CAAC;YAC5BD,OAAOD,OAAOR,KAAK,EAAEC,MAAMS,IAAI,CAAC;QAClC,IACA;YAAEE,SAAS;QAAI;IAEnB;IAEAT,GAAG,+DAA+D;QAChE7B,WAAG8B,MAAM,CACP9B,WAAG+B,QAAQ,CAAC/B,WAAGU,OAAO,CAAC;YAAEC,KAAK;YAAGC,KAAK;QAAG,IAAIZ,WAAGU,OAAO,CAAC;YAAEC,KAAK;YAAGC,KAAK;QAAG,IAAI,CAACJ,mBAAmBoC;YAChG,MAAMrB,WAAW;gBACff;gBACAM,oBAAoB;YACtB;YAEA,MAAMkB,sBAAsBxB,oBAAoBoC;YAEhD,MAAMV,SAASZ,mBAAmBC,UAAU;gBAC1CJ,QAAQ;gBACRE,YAAYW;YACd;YAEA,IAAI,CAACE,OAAOT,OAAO,IAAIS,OAAOR,KAAK,EAAE;gBACnC,2CAA2C;gBAC3CS,OAAOD,OAAOR,KAAK,CAACE,OAAO,EAAEiB,SAAS,CAACb,oBAAoBc,QAAQ;gBACnEX,OAAOD,OAAOR,KAAK,CAACE,OAAO,EAAEiB,SAAS,CAACrC,kBAAkBsC,QAAQ;YACnE;QACF,IACA;YAAER,SAAS;QAAI;IAEnB;IAEAT,GAAG,6DAA6D;QAC9D,MAAMN,WAAW;YACff,mBAAmB;YACnBM,oBAAoB;QACtB;QAEA,sCAAsC;QACtC,MAAMiC,UAAUzB,mBAAmBC,UAAU;YAC3CJ,QAAQ;YACRE,YAAY;QACd;QACAc,OAAOY,QAAQtB,OAAO,EAAEW,IAAI,CAAC;QAE7B,sCAAsC;QACtC,MAAMY,UAAU1B,mBAAmBC,UAAU;YAC3CJ,QAAQ;YACRE,YAAY;QACd;QACAc,OAAOa,QAAQvB,OAAO,EAAEW,IAAI,CAAC;QAC7BD,OAAOa,QAAQtB,KAAK,EAAEC,MAAMS,IAAI,CAAC;IACnC;IAEAP,GAAG,mDAAmD;QACpD7B,WAAG8B,MAAM,CACP9B,WAAG+B,QAAQ,CAAC/B,WAAGU,OAAO,CAAC;YAAEC,KAAK;YAAIC,KAAK;QAAK,IAAI,CAACqC;YAC/C,MAAM1B,WAAW;gBACff,mBAAmByC;gBACnBnC,oBAAoB;YACtB;YAEA,yCAAyC;YACzC,MAAMoC,aAAalD,WAAGiC,MAAM,CAACjC,WAAGU,OAAO,CAAC;gBAAEC,KAAK;gBAAGC,KAAKqC;YAAe,IAAI,EAAE,CAAC,EAAE;YAC/E,MAAMf,SAASZ,mBAAmBC,UAAU;gBAC1CJ,QAAQ;gBACRE,YAAY6B;YACd;YAEAf,OAAOD,OAAOT,OAAO,EAAEW,IAAI,CAAC;QAC9B,IACA;YAAEE,SAAS;QAAI;IAEnB;IAEAT,GAAG,mFAAmF;QACpF7B,WAAG8B,MAAM,CACP9B,WAAG+B,QAAQ,CAAChC,gCAAgCiB,6BAA6B,CAACO,UAAUC;YAClF,MAAMuB,UAAUzB,mBAAmBC,UAAUC;YAC7C,MAAMwB,UAAU1B,mBAAmBC,UAAUC;YAE7C,8BAA8B;YAC9BW,OAAOY,QAAQtB,OAAO,EAAEW,IAAI,CAACY,QAAQvB,OAAO;YAC5CU,OAAOY,QAAQrB,KAAK,EAAEC,MAAMS,IAAI,CAACY,QAAQtB,KAAK,EAAEC;QAClD,IACA;YAAEW,SAAS;QAAI;IAEnB;IAEAT,GAAG,qEAAqE;QACtE7B,WAAG8B,MAAM,CACP9B,WAAG+B,QAAQ,CACT/B,WAAGU,OAAO,CAAC;YAAEC,KAAK;YAAGC,KAAK;QAAG,IAC7BZ,WAAGU,OAAO,CAAC;YAAEC,KAAK;YAAGC,KAAK;QAAI,IAC9B,CAACJ,mBAAmB2C;YAClB,MAAM5B,WAAW;gBACff;gBACAM,oBAAoB;YACtB;YAEA,+DAA+D;YAC/D,8CAA8C;YAC9C,MAAMyB,kBAAkB/B;YACxB,MAAM0B,SAASZ,mBAAmBC,UAAU;gBAC1CJ,QAAQ;gBACRE,YAAYkB;YACd;YAEA,yDAAyD;YACzDJ,OAAOD,OAAOT,OAAO,EAAEW,IAAI,CAAC;QAC9B,IAEF;YAAEE,SAAS;QAAI;IAEnB;AACF"}