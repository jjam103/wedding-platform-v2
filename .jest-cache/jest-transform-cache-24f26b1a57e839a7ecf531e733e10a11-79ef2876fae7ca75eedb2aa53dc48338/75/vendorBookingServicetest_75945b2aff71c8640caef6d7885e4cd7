297dc27ff698b4aeb990bab75f04c53d
"use strict";
/**
 * Unit Tests for Vendor Booking Service
 * 
 * Tests vendor-to-activity/event booking functionality including:
 * - Vendor selection and booking creation
 * - Booking display on activity and vendor pages
 * - Cost propagation when vendor costs change
 */ // Mock Supabase
jest.mock('@supabase/supabase-js', ()=>{
    const mockFunctions = {
        from: jest.fn().mockReturnThis(),
        insert: jest.fn().mockReturnThis(),
        select: jest.fn().mockReturnThis(),
        single: jest.fn(),
        eq: jest.fn().mockReturnThis(),
        delete: jest.fn().mockReturnThis(),
        update: jest.fn().mockReturnThis(),
        order: jest.fn().mockReturnThis(),
        range: jest.fn().mockReturnThis()
    };
    return {
        createClient: jest.fn(()=>mockFunctions),
        __mockFunctions: mockFunctions
    };
});
// Mock sanitization
jest.mock('../utils/sanitization', ()=>({
        sanitizeInput: jest.fn((input)=>input)
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _vendorBookingService = /*#__PURE__*/ _interop_require_wildcard(require("./vendorBookingService"));
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Get the mock functions from the mocked module
const { __mockFunctions } = jest.requireMock('@supabase/supabase-js');
const mockFrom = __mockFunctions.from;
const mockInsert = __mockFunctions.insert;
const mockSelect = __mockFunctions.select;
const mockSingle = __mockFunctions.single;
const mockEq = __mockFunctions.eq;
const mockDelete = __mockFunctions.delete;
const mockUpdate = __mockFunctions.update;
const mockOrder = __mockFunctions.order;
const mockRange = __mockFunctions.range;
describe('vendorBookingService.create', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        // Reset mock implementations
        mockFrom.mockReturnThis();
        mockInsert.mockReturnThis();
        mockSelect.mockReturnThis();
        mockSingle.mockResolvedValue({
            data: null,
            error: null
        });
    });
    it('should create a vendor booking successfully', async ()=>{
        const bookingData = {
            vendorId: '123e4567-e89b-12d3-a456-426614174000',
            activityId: '123e4567-e89b-12d3-a456-426614174001',
            eventId: null,
            bookingDate: '2025-06-15'
        };
        const mockBooking = {
            id: 'booking-1',
            vendor_id: bookingData.vendorId,
            activity_id: bookingData.activityId,
            event_id: null,
            booking_date: bookingData.bookingDate,
            notes: null,
            created_at: '2025-01-01T00:00:00Z'
        };
        mockSingle.mockResolvedValue({
            data: mockBooking,
            error: null
        });
        const result = await _vendorBookingService.create(bookingData);
        expect(result.success).toBe(true);
        if (result.success) {
            expect(result.data.id).toBe('booking-1');
            expect(result.data.vendorId).toBe(bookingData.vendorId);
            expect(result.data.activityId).toBe(bookingData.activityId);
        }
    });
    it('should return VALIDATION_ERROR when vendor ID is missing', async ()=>{
        const invalidData = {
            activityId: '123e4567-e89b-12d3-a456-426614174001',
            eventId: null,
            bookingDate: '2025-06-15'
        };
        const result = await _vendorBookingService.create(invalidData);
        expect(result.success).toBe(false);
        if (!result.success) {
            expect(result.error.code).toBe('VALIDATION_ERROR');
        }
    });
    it('should return DATABASE_ERROR when insert fails', async ()=>{
        const bookingData = {
            vendorId: '123e4567-e89b-12d3-a456-426614174000',
            activityId: '123e4567-e89b-12d3-a456-426614174001',
            eventId: null,
            bookingDate: '2025-06-15'
        };
        mockSingle.mockResolvedValue({
            data: null,
            error: {
                message: 'Database error',
                code: 'DB_ERROR'
            }
        });
        const result = await _vendorBookingService.create(bookingData);
        expect(result.success).toBe(false);
        if (!result.success) {
            expect(result.error.code).toBe('DATABASE_ERROR');
        }
    });
    it('should sanitize notes input', async ()=>{
        const bookingData = {
            vendorId: '123e4567-e89b-12d3-a456-426614174000',
            activityId: '123e4567-e89b-12d3-a456-426614174001',
            eventId: null,
            bookingDate: '2025-06-15',
            notes: '<script>alert("xss")</script>Important notes'
        };
        const mockBooking = {
            id: 'booking-1',
            vendor_id: bookingData.vendorId,
            activity_id: bookingData.activityId,
            event_id: null,
            booking_date: bookingData.bookingDate,
            notes: bookingData.notes,
            created_at: '2025-01-01T00:00:00Z'
        };
        mockSingle.mockResolvedValue({
            data: mockBooking,
            error: null
        });
        const result = await _vendorBookingService.create(bookingData);
        expect(result.success).toBe(true);
    // Sanitization is mocked, but in real implementation it would remove script tags
    });
});
describe('vendorBookingService.get', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        // Reset mock implementations
        mockFrom.mockReturnThis();
        mockSelect.mockReturnThis();
        mockEq.mockReturnThis();
        mockSingle.mockResolvedValue({
            data: null,
            error: null
        });
    });
    it('should retrieve a vendor booking by ID', async ()=>{
        const mockBooking = {
            id: 'booking-1',
            vendor_id: '123e4567-e89b-12d3-a456-426614174000',
            activity_id: '123e4567-e89b-12d3-a456-426614174001',
            event_id: null,
            booking_date: '2025-06-15',
            notes: null,
            created_at: '2025-01-01T00:00:00Z'
        };
        mockSingle.mockResolvedValue({
            data: mockBooking,
            error: null
        });
        const result = await _vendorBookingService.get('booking-1');
        expect(result.success).toBe(true);
        if (result.success) {
            expect(result.data.id).toBe('booking-1');
            expect(result.data.vendorId).toBe('123e4567-e89b-12d3-a456-426614174000');
        }
    });
    it('should return NOT_FOUND when booking does not exist', async ()=>{
        mockSingle.mockResolvedValue({
            data: null,
            error: {
                code: 'PGRST116',
                message: 'Not found'
            }
        });
        const result = await _vendorBookingService.get('nonexistent-id');
        expect(result.success).toBe(false);
        if (!result.success) {
            expect(result.error.code).toBe('NOT_FOUND');
        }
    });
});
describe('vendorBookingService.listWithDetails', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        // Reset mock implementations
        mockFrom.mockReturnThis();
        mockSelect.mockReturnThis();
        mockEq.mockReturnThis();
        mockOrder.mockResolvedValue({
            data: [],
            error: null
        });
    });
    it('should retrieve bookings with vendor and activity details', async ()=>{
        const mockBookings = [
            {
                id: 'booking-1',
                vendor_id: '123e4567-e89b-12d3-a456-426614174000',
                activity_id: '123e4567-e89b-12d3-a456-426614174001',
                event_id: null,
                booking_date: '2025-06-15',
                notes: null,
                created_at: '2025-01-01T00:00:00Z',
                vendors: {
                    id: '123e4567-e89b-12d3-a456-426614174000',
                    name: 'Test Photographer',
                    category: 'photography'
                },
                activities: {
                    id: '123e4567-e89b-12d3-a456-426614174001',
                    name: 'Beach Ceremony'
                },
                events: null
            }
        ];
        mockOrder.mockResolvedValue({
            data: mockBookings,
            error: null
        });
        const result = await _vendorBookingService.listWithDetails({});
        expect(result.success).toBe(true);
        if (result.success) {
            expect(result.data).toHaveLength(1);
            expect(result.data[0].vendorName).toBe('Test Photographer');
            expect(result.data[0].activityName).toBe('Beach Ceremony');
        }
    });
    it('should filter bookings by vendor ID', async ()=>{
        mockOrder.mockResolvedValue({
            data: [],
            error: null
        });
        const result = await _vendorBookingService.listWithDetails({
            vendorId: '123e4567-e89b-12d3-a456-426614174000'
        });
        expect(result.success).toBe(true);
        expect(mockEq).toHaveBeenCalledWith('vendor_id', '123e4567-e89b-12d3-a456-426614174000');
    });
    it('should filter bookings by activity ID', async ()=>{
        mockOrder.mockResolvedValue({
            data: [],
            error: null
        });
        const result = await _vendorBookingService.listWithDetails({
            activityId: '123e4567-e89b-12d3-a456-426614174001'
        });
        expect(result.success).toBe(true);
        expect(mockEq).toHaveBeenCalledWith('activity_id', '123e4567-e89b-12d3-a456-426614174001');
    });
});
describe('vendorBookingService.getVendorBookings', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        // Reset mock implementations
        mockFrom.mockReturnThis();
        mockSelect.mockReturnThis();
        mockEq.mockReturnThis();
        mockOrder.mockResolvedValue({
            data: [],
            error: null
        });
    });
    it('should retrieve all bookings for a specific vendor', async ()=>{
        const mockBookings = [
            {
                id: 'booking-1',
                vendor_id: '123e4567-e89b-12d3-a456-426614174000',
                activity_id: '123e4567-e89b-12d3-a456-426614174001',
                event_id: null,
                booking_date: '2025-06-15',
                notes: null,
                created_at: '2025-01-01T00:00:00Z',
                vendors: {
                    id: '123e4567-e89b-12d3-a456-426614174000',
                    name: 'Test Photographer',
                    category: 'photography'
                },
                activities: {
                    id: '123e4567-e89b-12d3-a456-426614174001',
                    name: 'Beach Ceremony'
                },
                events: null
            },
            {
                id: 'booking-2',
                vendor_id: '123e4567-e89b-12d3-a456-426614174000',
                activity_id: '123e4567-e89b-12d3-a456-426614174002',
                event_id: null,
                booking_date: '2025-06-16',
                notes: null,
                created_at: '2025-01-01T00:00:00Z',
                vendors: {
                    id: '123e4567-e89b-12d3-a456-426614174000',
                    name: 'Test Photographer',
                    category: 'photography'
                },
                activities: {
                    id: '123e4567-e89b-12d3-a456-426614174002',
                    name: 'Reception'
                },
                events: null
            }
        ];
        mockOrder.mockResolvedValue({
            data: mockBookings,
            error: null
        });
        const result = await _vendorBookingService.getVendorBookings('123e4567-e89b-12d3-a456-426614174000');
        expect(result.success).toBe(true);
        if (result.success) {
            expect(result.data).toHaveLength(2);
            expect(result.data[0].vendorId).toBe('123e4567-e89b-12d3-a456-426614174000');
            expect(result.data[1].vendorId).toBe('123e4567-e89b-12d3-a456-426614174000');
        }
    });
});
describe('vendorBookingService.getActivityBookings', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        // Reset mock implementations
        mockFrom.mockReturnThis();
        mockSelect.mockReturnThis();
        mockEq.mockReturnThis();
        mockOrder.mockResolvedValue({
            data: [],
            error: null
        });
    });
    it('should retrieve all bookings for a specific activity', async ()=>{
        const mockBookings = [
            {
                id: 'booking-1',
                vendor_id: '123e4567-e89b-12d3-a456-426614174000',
                activity_id: '123e4567-e89b-12d3-a456-426614174001',
                event_id: null,
                booking_date: '2025-06-15',
                notes: null,
                created_at: '2025-01-01T00:00:00Z',
                vendors: {
                    id: '123e4567-e89b-12d3-a456-426614174000',
                    name: 'Test Photographer',
                    category: 'photography'
                },
                activities: {
                    id: '123e4567-e89b-12d3-a456-426614174001',
                    name: 'Beach Ceremony'
                },
                events: null
            },
            {
                id: 'booking-2',
                vendor_id: '123e4567-e89b-12d3-a456-426614174002',
                activity_id: '123e4567-e89b-12d3-a456-426614174001',
                event_id: null,
                booking_date: '2025-06-15',
                notes: null,
                created_at: '2025-01-01T00:00:00Z',
                vendors: {
                    id: '123e4567-e89b-12d3-a456-426614174002',
                    name: 'Test Florist',
                    category: 'flowers'
                },
                activities: {
                    id: '123e4567-e89b-12d3-a456-426614174001',
                    name: 'Beach Ceremony'
                },
                events: null
            }
        ];
        mockOrder.mockResolvedValue({
            data: mockBookings,
            error: null
        });
        const result = await _vendorBookingService.getActivityBookings('123e4567-e89b-12d3-a456-426614174001');
        expect(result.success).toBe(true);
        if (result.success) {
            expect(result.data).toHaveLength(2);
            expect(result.data[0].activityId).toBe('123e4567-e89b-12d3-a456-426614174001');
            expect(result.data[1].activityId).toBe('123e4567-e89b-12d3-a456-426614174001');
            expect(result.data[0].vendorName).toBe('Test Photographer');
            expect(result.data[1].vendorName).toBe('Test Florist');
        }
    });
});
describe('vendorBookingService.deleteBooking', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        // Reset mock implementations
        mockFrom.mockReturnThis();
        mockDelete.mockReturnThis();
        mockEq.mockResolvedValue({
            error: null
        });
    });
    it('should delete a vendor booking successfully', async ()=>{
        const result = await _vendorBookingService.deleteBooking('booking-1');
        expect(result.success).toBe(true);
        expect(mockFrom).toHaveBeenCalledWith('vendor_bookings');
        expect(mockDelete).toHaveBeenCalled();
        expect(mockEq).toHaveBeenCalledWith('id', 'booking-1');
    });
    it('should return DATABASE_ERROR when delete fails', async ()=>{
        mockEq.mockResolvedValue({
            error: {
                message: 'Delete failed',
                code: 'DB_ERROR'
            }
        });
        const result = await _vendorBookingService.deleteBooking('booking-1');
        expect(result.success).toBe(false);
        if (!result.success) {
            expect(result.error.code).toBe('DATABASE_ERROR');
        }
    });
});
describe('vendorBookingService.propagateVendorCostChange', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        // Reset mock implementations
        mockFrom.mockReturnThis();
        mockSelect.mockReturnThis();
        mockEq.mockReturnThis();
        mockOrder.mockResolvedValue({
            data: [],
            error: null
        });
    });
    it('should propagate vendor cost changes successfully', async ()=>{
        const mockBookings = [
            {
                id: 'booking-1',
                vendor_id: '123e4567-e89b-12d3-a456-426614174000',
                activity_id: '123e4567-e89b-12d3-a456-426614174001',
                event_id: null,
                booking_date: '2025-06-15',
                notes: null,
                created_at: '2025-01-01T00:00:00Z',
                vendors: {
                    id: '123e4567-e89b-12d3-a456-426614174000',
                    name: 'Test Photographer',
                    category: 'photography'
                },
                activities: {
                    id: '123e4567-e89b-12d3-a456-426614174001',
                    name: 'Beach Ceremony'
                },
                events: null
            }
        ];
        mockOrder.mockResolvedValue({
            data: mockBookings,
            error: null
        });
        const result = await _vendorBookingService.propagateVendorCostChange('123e4567-e89b-12d3-a456-426614174000');
        expect(result.success).toBe(true);
    // In real implementation, this would trigger budget recalculation
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvc2VydmljZXMvdmVuZG9yQm9va2luZ1NlcnZpY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVuaXQgVGVzdHMgZm9yIFZlbmRvciBCb29raW5nIFNlcnZpY2VcbiAqIFxuICogVGVzdHMgdmVuZG9yLXRvLWFjdGl2aXR5L2V2ZW50IGJvb2tpbmcgZnVuY3Rpb25hbGl0eSBpbmNsdWRpbmc6XG4gKiAtIFZlbmRvciBzZWxlY3Rpb24gYW5kIGJvb2tpbmcgY3JlYXRpb25cbiAqIC0gQm9va2luZyBkaXNwbGF5IG9uIGFjdGl2aXR5IGFuZCB2ZW5kb3IgcGFnZXNcbiAqIC0gQ29zdCBwcm9wYWdhdGlvbiB3aGVuIHZlbmRvciBjb3N0cyBjaGFuZ2VcbiAqL1xuXG4vLyBNb2NrIFN1cGFiYXNlXG5qZXN0Lm1vY2soJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcycsICgpID0+IHtcbiAgY29uc3QgbW9ja0Z1bmN0aW9ucyA9IHtcbiAgICBmcm9tOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICBpbnNlcnQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgc2luZ2xlOiBqZXN0LmZuKCksXG4gICAgZXE6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgIGRlbGV0ZTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgdXBkYXRlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICBvcmRlcjogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgcmFuZ2U6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICB9O1xuICBcbiAgcmV0dXJuIHtcbiAgICBjcmVhdGVDbGllbnQ6IGplc3QuZm4oKCkgPT4gbW9ja0Z1bmN0aW9ucyksXG4gICAgX19tb2NrRnVuY3Rpb25zOiBtb2NrRnVuY3Rpb25zLCAvLyBFeHBvcnQgZm9yIHRlc3QgYWNjZXNzXG4gIH07XG59KTtcblxuLy8gTW9jayBzYW5pdGl6YXRpb25cbmplc3QubW9jaygnLi4vdXRpbHMvc2FuaXRpemF0aW9uJywgKCkgPT4gKHtcbiAgc2FuaXRpemVJbnB1dDogamVzdC5mbigoaW5wdXQpID0+IGlucHV0KSxcbn0pKTtcblxuaW1wb3J0ICogYXMgdmVuZG9yQm9va2luZ1NlcnZpY2UgZnJvbSAnLi92ZW5kb3JCb29raW5nU2VydmljZSc7XG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuXG4vLyBHZXQgdGhlIG1vY2sgZnVuY3Rpb25zIGZyb20gdGhlIG1vY2tlZCBtb2R1bGVcbmNvbnN0IHsgX19tb2NrRnVuY3Rpb25zIH0gPSBqZXN0LnJlcXVpcmVNb2NrKCdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnKSBhcyBhbnk7XG5jb25zdCBtb2NrRnJvbSA9IF9fbW9ja0Z1bmN0aW9ucy5mcm9tO1xuY29uc3QgbW9ja0luc2VydCA9IF9fbW9ja0Z1bmN0aW9ucy5pbnNlcnQ7XG5jb25zdCBtb2NrU2VsZWN0ID0gX19tb2NrRnVuY3Rpb25zLnNlbGVjdDtcbmNvbnN0IG1vY2tTaW5nbGUgPSBfX21vY2tGdW5jdGlvbnMuc2luZ2xlO1xuY29uc3QgbW9ja0VxID0gX19tb2NrRnVuY3Rpb25zLmVxO1xuY29uc3QgbW9ja0RlbGV0ZSA9IF9fbW9ja0Z1bmN0aW9ucy5kZWxldGU7XG5jb25zdCBtb2NrVXBkYXRlID0gX19tb2NrRnVuY3Rpb25zLnVwZGF0ZTtcbmNvbnN0IG1vY2tPcmRlciA9IF9fbW9ja0Z1bmN0aW9ucy5vcmRlcjtcbmNvbnN0IG1vY2tSYW5nZSA9IF9fbW9ja0Z1bmN0aW9ucy5yYW5nZTtcblxuZGVzY3JpYmUoJ3ZlbmRvckJvb2tpbmdTZXJ2aWNlLmNyZWF0ZScsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgLy8gUmVzZXQgbW9jayBpbXBsZW1lbnRhdGlvbnNcbiAgICBtb2NrRnJvbS5tb2NrUmV0dXJuVGhpcygpO1xuICAgIG1vY2tJbnNlcnQubW9ja1JldHVyblRoaXMoKTtcbiAgICBtb2NrU2VsZWN0Lm1vY2tSZXR1cm5UaGlzKCk7XG4gICAgbW9ja1NpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IG51bGwsIGVycm9yOiBudWxsIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGNyZWF0ZSBhIHZlbmRvciBib29raW5nIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBib29raW5nRGF0YSA9IHtcbiAgICAgIHZlbmRvcklkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgIGFjdGl2aXR5SWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgICAgZXZlbnRJZDogbnVsbCxcbiAgICAgIGJvb2tpbmdEYXRlOiAnMjAyNS0wNi0xNScsXG4gICAgfTtcblxuICAgIGNvbnN0IG1vY2tCb29raW5nID0ge1xuICAgICAgaWQ6ICdib29raW5nLTEnLFxuICAgICAgdmVuZG9yX2lkOiBib29raW5nRGF0YS52ZW5kb3JJZCxcbiAgICAgIGFjdGl2aXR5X2lkOiBib29raW5nRGF0YS5hY3Rpdml0eUlkLFxuICAgICAgZXZlbnRfaWQ6IG51bGwsXG4gICAgICBib29raW5nX2RhdGU6IGJvb2tpbmdEYXRhLmJvb2tpbmdEYXRlLFxuICAgICAgbm90ZXM6IG51bGwsXG4gICAgICBjcmVhdGVkX2F0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgIH07XG5cbiAgICBtb2NrU2luZ2xlLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIGRhdGE6IG1vY2tCb29raW5nLFxuICAgICAgZXJyb3I6IG51bGwsXG4gICAgfSBhcyBhbnkpO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdmVuZG9yQm9va2luZ1NlcnZpY2UuY3JlYXRlKGJvb2tpbmdEYXRhKTtcblxuICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5pZCkudG9CZSgnYm9va2luZy0xJyk7XG4gICAgICBleHBlY3QocmVzdWx0LmRhdGEudmVuZG9ySWQpLnRvQmUoYm9va2luZ0RhdGEudmVuZG9ySWQpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmFjdGl2aXR5SWQpLnRvQmUoYm9va2luZ0RhdGEuYWN0aXZpdHlJZCk7XG4gICAgfVxuICB9KTtcblxuICBpdCgnc2hvdWxkIHJldHVybiBWQUxJREFUSU9OX0VSUk9SIHdoZW4gdmVuZG9yIElEIGlzIG1pc3NpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgaW52YWxpZERhdGEgPSB7XG4gICAgICBhY3Rpdml0eUlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJyxcbiAgICAgIGV2ZW50SWQ6IG51bGwsXG4gICAgICBib29raW5nRGF0ZTogJzIwMjUtMDYtMTUnLFxuICAgIH0gYXMgYW55O1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdmVuZG9yQm9va2luZ1NlcnZpY2UuY3JlYXRlKGludmFsaWREYXRhKTtcblxuICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgfVxuICB9KTtcblxuICBpdCgnc2hvdWxkIHJldHVybiBEQVRBQkFTRV9FUlJPUiB3aGVuIGluc2VydCBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBib29raW5nRGF0YSA9IHtcbiAgICAgIHZlbmRvcklkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgIGFjdGl2aXR5SWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgICAgZXZlbnRJZDogbnVsbCxcbiAgICAgIGJvb2tpbmdEYXRlOiAnMjAyNS0wNi0xNScsXG4gICAgfTtcblxuICAgIG1vY2tTaW5nbGUubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgZGF0YTogbnVsbCxcbiAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdEYXRhYmFzZSBlcnJvcicsIGNvZGU6ICdEQl9FUlJPUicgfSxcbiAgICB9IGFzIGFueSk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB2ZW5kb3JCb29raW5nU2VydmljZS5jcmVhdGUoYm9va2luZ0RhdGEpO1xuXG4gICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ0RBVEFCQVNFX0VSUk9SJyk7XG4gICAgfVxuICB9KTtcblxuICBpdCgnc2hvdWxkIHNhbml0aXplIG5vdGVzIGlucHV0JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGJvb2tpbmdEYXRhID0ge1xuICAgICAgdmVuZG9ySWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgYWN0aXZpdHlJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMScsXG4gICAgICBldmVudElkOiBudWxsLFxuICAgICAgYm9va2luZ0RhdGU6ICcyMDI1LTA2LTE1JyxcbiAgICAgIG5vdGVzOiAnPHNjcmlwdD5hbGVydChcInhzc1wiKTwvc2NyaXB0PkltcG9ydGFudCBub3RlcycsXG4gICAgfTtcblxuICAgIGNvbnN0IG1vY2tCb29raW5nID0ge1xuICAgICAgaWQ6ICdib29raW5nLTEnLFxuICAgICAgdmVuZG9yX2lkOiBib29raW5nRGF0YS52ZW5kb3JJZCxcbiAgICAgIGFjdGl2aXR5X2lkOiBib29raW5nRGF0YS5hY3Rpdml0eUlkLFxuICAgICAgZXZlbnRfaWQ6IG51bGwsXG4gICAgICBib29raW5nX2RhdGU6IGJvb2tpbmdEYXRhLmJvb2tpbmdEYXRlLFxuICAgICAgbm90ZXM6IGJvb2tpbmdEYXRhLm5vdGVzLFxuICAgICAgY3JlYXRlZF9hdDogJzIwMjUtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICB9O1xuXG4gICAgbW9ja1NpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBkYXRhOiBtb2NrQm9va2luZyxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgIH0gYXMgYW55KTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHZlbmRvckJvb2tpbmdTZXJ2aWNlLmNyZWF0ZShib29raW5nRGF0YSk7XG5cbiAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgLy8gU2FuaXRpemF0aW9uIGlzIG1vY2tlZCwgYnV0IGluIHJlYWwgaW1wbGVtZW50YXRpb24gaXQgd291bGQgcmVtb3ZlIHNjcmlwdCB0YWdzXG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCd2ZW5kb3JCb29raW5nU2VydmljZS5nZXQnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIC8vIFJlc2V0IG1vY2sgaW1wbGVtZW50YXRpb25zXG4gICAgbW9ja0Zyb20ubW9ja1JldHVyblRoaXMoKTtcbiAgICBtb2NrU2VsZWN0Lm1vY2tSZXR1cm5UaGlzKCk7XG4gICAgbW9ja0VxLm1vY2tSZXR1cm5UaGlzKCk7XG4gICAgbW9ja1NpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IG51bGwsIGVycm9yOiBudWxsIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJldHJpZXZlIGEgdmVuZG9yIGJvb2tpbmcgYnkgSUQnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9ja0Jvb2tpbmcgPSB7XG4gICAgICBpZDogJ2Jvb2tpbmctMScsXG4gICAgICB2ZW5kb3JfaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgYWN0aXZpdHlfaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgICAgZXZlbnRfaWQ6IG51bGwsXG4gICAgICBib29raW5nX2RhdGU6ICcyMDI1LTA2LTE1JyxcbiAgICAgIG5vdGVzOiBudWxsLFxuICAgICAgY3JlYXRlZF9hdDogJzIwMjUtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICB9O1xuXG4gICAgbW9ja1NpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBkYXRhOiBtb2NrQm9va2luZyxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgIH0gYXMgYW55KTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHZlbmRvckJvb2tpbmdTZXJ2aWNlLmdldCgnYm9va2luZy0xJyk7XG5cbiAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICBleHBlY3QocmVzdWx0LmRhdGEuaWQpLnRvQmUoJ2Jvb2tpbmctMScpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnZlbmRvcklkKS50b0JlKCcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnKTtcbiAgICB9XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmV0dXJuIE5PVF9GT1VORCB3aGVuIGJvb2tpbmcgZG9lcyBub3QgZXhpc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja1NpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBkYXRhOiBudWxsLFxuICAgICAgZXJyb3I6IHsgY29kZTogJ1BHUlNUMTE2JywgbWVzc2FnZTogJ05vdCBmb3VuZCcgfSxcbiAgICB9IGFzIGFueSk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB2ZW5kb3JCb29raW5nU2VydmljZS5nZXQoJ25vbmV4aXN0ZW50LWlkJyk7XG5cbiAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnTk9UX0ZPVU5EJyk7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgndmVuZG9yQm9va2luZ1NlcnZpY2UubGlzdFdpdGhEZXRhaWxzJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICAvLyBSZXNldCBtb2NrIGltcGxlbWVudGF0aW9uc1xuICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5UaGlzKCk7XG4gICAgbW9ja1NlbGVjdC5tb2NrUmV0dXJuVGhpcygpO1xuICAgIG1vY2tFcS5tb2NrUmV0dXJuVGhpcygpO1xuICAgIG1vY2tPcmRlci5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IFtdLCBlcnJvcjogbnVsbCB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBib29raW5ncyB3aXRoIHZlbmRvciBhbmQgYWN0aXZpdHkgZGV0YWlscycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2NrQm9va2luZ3MgPSBbXG4gICAgICB7XG4gICAgICAgIGlkOiAnYm9va2luZy0xJyxcbiAgICAgICAgdmVuZG9yX2lkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgYWN0aXZpdHlfaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgICAgICBldmVudF9pZDogbnVsbCxcbiAgICAgICAgYm9va2luZ19kYXRlOiAnMjAyNS0wNi0xNScsXG4gICAgICAgIG5vdGVzOiBudWxsLFxuICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB2ZW5kb3JzOiB7XG4gICAgICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICAgIG5hbWU6ICdUZXN0IFBob3RvZ3JhcGhlcicsXG4gICAgICAgICAgY2F0ZWdvcnk6ICdwaG90b2dyYXBoeScsXG4gICAgICAgIH0sXG4gICAgICAgIGFjdGl2aXRpZXM6IHtcbiAgICAgICAgICBpZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMScsXG4gICAgICAgICAgbmFtZTogJ0JlYWNoIENlcmVtb255JyxcbiAgICAgICAgfSxcbiAgICAgICAgZXZlbnRzOiBudWxsLFxuICAgICAgfSxcbiAgICBdO1xuXG4gICAgbW9ja09yZGVyLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIGRhdGE6IG1vY2tCb29raW5ncyxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgIH0gYXMgYW55KTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHZlbmRvckJvb2tpbmdTZXJ2aWNlLmxpc3RXaXRoRGV0YWlscyh7fSk7XG5cbiAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVswXS52ZW5kb3JOYW1lKS50b0JlKCdUZXN0IFBob3RvZ3JhcGhlcicpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhWzBdLmFjdGl2aXR5TmFtZSkudG9CZSgnQmVhY2ggQ2VyZW1vbnknKTtcbiAgICB9XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgZmlsdGVyIGJvb2tpbmdzIGJ5IHZlbmRvciBJRCcsIGFzeW5jICgpID0+IHtcbiAgICBtb2NrT3JkZXIubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgZGF0YTogW10sXG4gICAgICBlcnJvcjogbnVsbCxcbiAgICB9IGFzIGFueSk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB2ZW5kb3JCb29raW5nU2VydmljZS5saXN0V2l0aERldGFpbHMoeyB2ZW5kb3JJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcgfSk7XG5cbiAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KG1vY2tFcSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3ZlbmRvcl9pZCcsICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBmaWx0ZXIgYm9va2luZ3MgYnkgYWN0aXZpdHkgSUQnLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja09yZGVyLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIGRhdGE6IFtdLFxuICAgICAgZXJyb3I6IG51bGwsXG4gICAgfSBhcyBhbnkpO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdmVuZG9yQm9va2luZ1NlcnZpY2UubGlzdFdpdGhEZXRhaWxzKHsgYWN0aXZpdHlJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMScgfSk7XG5cbiAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KG1vY2tFcSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2FjdGl2aXR5X2lkJywgJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMScpO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgndmVuZG9yQm9va2luZ1NlcnZpY2UuZ2V0VmVuZG9yQm9va2luZ3MnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIC8vIFJlc2V0IG1vY2sgaW1wbGVtZW50YXRpb25zXG4gICAgbW9ja0Zyb20ubW9ja1JldHVyblRoaXMoKTtcbiAgICBtb2NrU2VsZWN0Lm1vY2tSZXR1cm5UaGlzKCk7XG4gICAgbW9ja0VxLm1vY2tSZXR1cm5UaGlzKCk7XG4gICAgbW9ja09yZGVyLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogW10sIGVycm9yOiBudWxsIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJldHJpZXZlIGFsbCBib29raW5ncyBmb3IgYSBzcGVjaWZpYyB2ZW5kb3InLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9ja0Jvb2tpbmdzID0gW1xuICAgICAge1xuICAgICAgICBpZDogJ2Jvb2tpbmctMScsXG4gICAgICAgIHZlbmRvcl9pZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgIGFjdGl2aXR5X2lkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJyxcbiAgICAgICAgZXZlbnRfaWQ6IG51bGwsXG4gICAgICAgIGJvb2tpbmdfZGF0ZTogJzIwMjUtMDYtMTUnLFxuICAgICAgICBub3RlczogbnVsbCxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjUtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgdmVuZG9yczoge1xuICAgICAgICAgIGlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgICBuYW1lOiAnVGVzdCBQaG90b2dyYXBoZXInLFxuICAgICAgICAgIGNhdGVnb3J5OiAncGhvdG9ncmFwaHknLFxuICAgICAgICB9LFxuICAgICAgICBhY3Rpdml0aWVzOiB7XG4gICAgICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgICAgICAgIG5hbWU6ICdCZWFjaCBDZXJlbW9ueScsXG4gICAgICAgIH0sXG4gICAgICAgIGV2ZW50czogbnVsbCxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAnYm9va2luZy0yJyxcbiAgICAgICAgdmVuZG9yX2lkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgYWN0aXZpdHlfaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDInLFxuICAgICAgICBldmVudF9pZDogbnVsbCxcbiAgICAgICAgYm9va2luZ19kYXRlOiAnMjAyNS0wNi0xNicsXG4gICAgICAgIG5vdGVzOiBudWxsLFxuICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB2ZW5kb3JzOiB7XG4gICAgICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICAgIG5hbWU6ICdUZXN0IFBob3RvZ3JhcGhlcicsXG4gICAgICAgICAgY2F0ZWdvcnk6ICdwaG90b2dyYXBoeScsXG4gICAgICAgIH0sXG4gICAgICAgIGFjdGl2aXRpZXM6IHtcbiAgICAgICAgICBpZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMicsXG4gICAgICAgICAgbmFtZTogJ1JlY2VwdGlvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGV2ZW50czogbnVsbCxcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIG1vY2tPcmRlci5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBkYXRhOiBtb2NrQm9va2luZ3MsXG4gICAgICBlcnJvcjogbnVsbCxcbiAgICB9IGFzIGFueSk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB2ZW5kb3JCb29raW5nU2VydmljZS5nZXRWZW5kb3JCb29raW5ncygnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyk7XG5cbiAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVswXS52ZW5kb3JJZCkudG9CZSgnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyk7XG4gICAgICBleHBlY3QocmVzdWx0LmRhdGFbMV0udmVuZG9ySWQpLnRvQmUoJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcpO1xuICAgIH1cbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ3ZlbmRvckJvb2tpbmdTZXJ2aWNlLmdldEFjdGl2aXR5Qm9va2luZ3MnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIC8vIFJlc2V0IG1vY2sgaW1wbGVtZW50YXRpb25zXG4gICAgbW9ja0Zyb20ubW9ja1JldHVyblRoaXMoKTtcbiAgICBtb2NrU2VsZWN0Lm1vY2tSZXR1cm5UaGlzKCk7XG4gICAgbW9ja0VxLm1vY2tSZXR1cm5UaGlzKCk7XG4gICAgbW9ja09yZGVyLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogW10sIGVycm9yOiBudWxsIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJldHJpZXZlIGFsbCBib29raW5ncyBmb3IgYSBzcGVjaWZpYyBhY3Rpdml0eScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2NrQm9va2luZ3MgPSBbXG4gICAgICB7XG4gICAgICAgIGlkOiAnYm9va2luZy0xJyxcbiAgICAgICAgdmVuZG9yX2lkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgYWN0aXZpdHlfaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgICAgICBldmVudF9pZDogbnVsbCxcbiAgICAgICAgYm9va2luZ19kYXRlOiAnMjAyNS0wNi0xNScsXG4gICAgICAgIG5vdGVzOiBudWxsLFxuICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB2ZW5kb3JzOiB7XG4gICAgICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICAgIG5hbWU6ICdUZXN0IFBob3RvZ3JhcGhlcicsXG4gICAgICAgICAgY2F0ZWdvcnk6ICdwaG90b2dyYXBoeScsXG4gICAgICAgIH0sXG4gICAgICAgIGFjdGl2aXRpZXM6IHtcbiAgICAgICAgICBpZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMScsXG4gICAgICAgICAgbmFtZTogJ0JlYWNoIENlcmVtb255JyxcbiAgICAgICAgfSxcbiAgICAgICAgZXZlbnRzOiBudWxsLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdib29raW5nLTInLFxuICAgICAgICB2ZW5kb3JfaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDInLFxuICAgICAgICBhY3Rpdml0eV9pZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMScsXG4gICAgICAgIGV2ZW50X2lkOiBudWxsLFxuICAgICAgICBib29raW5nX2RhdGU6ICcyMDI1LTA2LTE1JyxcbiAgICAgICAgbm90ZXM6IG51bGwsXG4gICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI1LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgIHZlbmRvcnM6IHtcbiAgICAgICAgICBpZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMicsXG4gICAgICAgICAgbmFtZTogJ1Rlc3QgRmxvcmlzdCcsXG4gICAgICAgICAgY2F0ZWdvcnk6ICdmbG93ZXJzJyxcbiAgICAgICAgfSxcbiAgICAgICAgYWN0aXZpdGllczoge1xuICAgICAgICAgIGlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJyxcbiAgICAgICAgICBuYW1lOiAnQmVhY2ggQ2VyZW1vbnknLFxuICAgICAgICB9LFxuICAgICAgICBldmVudHM6IG51bGwsXG4gICAgICB9LFxuICAgIF07XG5cbiAgICBtb2NrT3JkZXIubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgZGF0YTogbW9ja0Jvb2tpbmdzLFxuICAgICAgZXJyb3I6IG51bGwsXG4gICAgfSBhcyBhbnkpO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdmVuZG9yQm9va2luZ1NlcnZpY2UuZ2V0QWN0aXZpdHlCb29raW5ncygnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJyk7XG5cbiAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVswXS5hY3Rpdml0eUlkKS50b0JlKCcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVsxXS5hY3Rpdml0eUlkKS50b0JlKCcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVswXS52ZW5kb3JOYW1lKS50b0JlKCdUZXN0IFBob3RvZ3JhcGhlcicpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhWzFdLnZlbmRvck5hbWUpLnRvQmUoJ1Rlc3QgRmxvcmlzdCcpO1xuICAgIH1cbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ3ZlbmRvckJvb2tpbmdTZXJ2aWNlLmRlbGV0ZUJvb2tpbmcnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIC8vIFJlc2V0IG1vY2sgaW1wbGVtZW50YXRpb25zXG4gICAgbW9ja0Zyb20ubW9ja1JldHVyblRoaXMoKTtcbiAgICBtb2NrRGVsZXRlLm1vY2tSZXR1cm5UaGlzKCk7XG4gICAgbW9ja0VxLm1vY2tSZXNvbHZlZFZhbHVlKHsgZXJyb3I6IG51bGwgfSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgZGVsZXRlIGEgdmVuZG9yIGJvb2tpbmcgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHZlbmRvckJvb2tpbmdTZXJ2aWNlLmRlbGV0ZUJvb2tpbmcoJ2Jvb2tpbmctMScpO1xuXG4gICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChtb2NrRnJvbSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3ZlbmRvcl9ib29raW5ncycpO1xuICAgIGV4cGVjdChtb2NrRGVsZXRlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgZXhwZWN0KG1vY2tFcSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2lkJywgJ2Jvb2tpbmctMScpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJldHVybiBEQVRBQkFTRV9FUlJPUiB3aGVuIGRlbGV0ZSBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICBtb2NrRXEubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ0RlbGV0ZSBmYWlsZWQnLCBjb2RlOiAnREJfRVJST1InIH0sXG4gICAgfSBhcyBhbnkpO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdmVuZG9yQm9va2luZ1NlcnZpY2UuZGVsZXRlQm9va2luZygnYm9va2luZy0xJyk7XG5cbiAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnREFUQUJBU0VfRVJST1InKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCd2ZW5kb3JCb29raW5nU2VydmljZS5wcm9wYWdhdGVWZW5kb3JDb3N0Q2hhbmdlJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICAvLyBSZXNldCBtb2NrIGltcGxlbWVudGF0aW9uc1xuICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5UaGlzKCk7XG4gICAgbW9ja1NlbGVjdC5tb2NrUmV0dXJuVGhpcygpO1xuICAgIG1vY2tFcS5tb2NrUmV0dXJuVGhpcygpO1xuICAgIG1vY2tPcmRlci5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IFtdLCBlcnJvcjogbnVsbCB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBwcm9wYWdhdGUgdmVuZG9yIGNvc3QgY2hhbmdlcyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9ja0Jvb2tpbmdzID0gW1xuICAgICAge1xuICAgICAgICBpZDogJ2Jvb2tpbmctMScsXG4gICAgICAgIHZlbmRvcl9pZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgIGFjdGl2aXR5X2lkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJyxcbiAgICAgICAgZXZlbnRfaWQ6IG51bGwsXG4gICAgICAgIGJvb2tpbmdfZGF0ZTogJzIwMjUtMDYtMTUnLFxuICAgICAgICBub3RlczogbnVsbCxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjUtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgdmVuZG9yczoge1xuICAgICAgICAgIGlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgICBuYW1lOiAnVGVzdCBQaG90b2dyYXBoZXInLFxuICAgICAgICAgIGNhdGVnb3J5OiAncGhvdG9ncmFwaHknLFxuICAgICAgICB9LFxuICAgICAgICBhY3Rpdml0aWVzOiB7XG4gICAgICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgICAgICAgIG5hbWU6ICdCZWFjaCBDZXJlbW9ueScsXG4gICAgICAgIH0sXG4gICAgICAgIGV2ZW50czogbnVsbCxcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIG1vY2tPcmRlci5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBkYXRhOiBtb2NrQm9va2luZ3MsXG4gICAgICBlcnJvcjogbnVsbCxcbiAgICB9IGFzIGFueSk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB2ZW5kb3JCb29raW5nU2VydmljZS5wcm9wYWdhdGVWZW5kb3JDb3N0Q2hhbmdlKCcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnKTtcblxuICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAvLyBJbiByZWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdvdWxkIHRyaWdnZXIgYnVkZ2V0IHJlY2FsY3VsYXRpb25cbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsIm1vY2tGdW5jdGlvbnMiLCJmcm9tIiwiZm4iLCJtb2NrUmV0dXJuVGhpcyIsImluc2VydCIsInNlbGVjdCIsInNpbmdsZSIsImVxIiwiZGVsZXRlIiwidXBkYXRlIiwib3JkZXIiLCJyYW5nZSIsImNyZWF0ZUNsaWVudCIsIl9fbW9ja0Z1bmN0aW9ucyIsInNhbml0aXplSW5wdXQiLCJpbnB1dCIsInJlcXVpcmVNb2NrIiwibW9ja0Zyb20iLCJtb2NrSW5zZXJ0IiwibW9ja1NlbGVjdCIsIm1vY2tTaW5nbGUiLCJtb2NrRXEiLCJtb2NrRGVsZXRlIiwibW9ja1VwZGF0ZSIsIm1vY2tPcmRlciIsIm1vY2tSYW5nZSIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImRhdGEiLCJlcnJvciIsIml0IiwiYm9va2luZ0RhdGEiLCJ2ZW5kb3JJZCIsImFjdGl2aXR5SWQiLCJldmVudElkIiwiYm9va2luZ0RhdGUiLCJtb2NrQm9va2luZyIsImlkIiwidmVuZG9yX2lkIiwiYWN0aXZpdHlfaWQiLCJldmVudF9pZCIsImJvb2tpbmdfZGF0ZSIsIm5vdGVzIiwiY3JlYXRlZF9hdCIsInJlc3VsdCIsInZlbmRvckJvb2tpbmdTZXJ2aWNlIiwiY3JlYXRlIiwiZXhwZWN0Iiwic3VjY2VzcyIsInRvQmUiLCJpbnZhbGlkRGF0YSIsImNvZGUiLCJtZXNzYWdlIiwiZ2V0IiwibW9ja0Jvb2tpbmdzIiwidmVuZG9ycyIsIm5hbWUiLCJjYXRlZ29yeSIsImFjdGl2aXRpZXMiLCJldmVudHMiLCJsaXN0V2l0aERldGFpbHMiLCJ0b0hhdmVMZW5ndGgiLCJ2ZW5kb3JOYW1lIiwiYWN0aXZpdHlOYW1lIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJnZXRWZW5kb3JCb29raW5ncyIsImdldEFjdGl2aXR5Qm9va2luZ3MiLCJkZWxldGVCb29raW5nIiwidG9IYXZlQmVlbkNhbGxlZCIsInByb3BhZ2F0ZVZlbmRvckNvc3RDaGFuZ2UiXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7OztDQU9DLEdBRUQsZ0JBQWdCO0FBQ2hCQSxLQUFLQyxJQUFJLENBQUMseUJBQXlCO0lBQ2pDLE1BQU1DLGdCQUFnQjtRQUNwQkMsTUFBTUgsS0FBS0ksRUFBRSxHQUFHQyxjQUFjO1FBQzlCQyxRQUFRTixLQUFLSSxFQUFFLEdBQUdDLGNBQWM7UUFDaENFLFFBQVFQLEtBQUtJLEVBQUUsR0FBR0MsY0FBYztRQUNoQ0csUUFBUVIsS0FBS0ksRUFBRTtRQUNmSyxJQUFJVCxLQUFLSSxFQUFFLEdBQUdDLGNBQWM7UUFDNUJLLFFBQVFWLEtBQUtJLEVBQUUsR0FBR0MsY0FBYztRQUNoQ00sUUFBUVgsS0FBS0ksRUFBRSxHQUFHQyxjQUFjO1FBQ2hDTyxPQUFPWixLQUFLSSxFQUFFLEdBQUdDLGNBQWM7UUFDL0JRLE9BQU9iLEtBQUtJLEVBQUUsR0FBR0MsY0FBYztJQUNqQztJQUVBLE9BQU87UUFDTFMsY0FBY2QsS0FBS0ksRUFBRSxDQUFDLElBQU1GO1FBQzVCYSxpQkFBaUJiO0lBQ25CO0FBQ0Y7QUFFQSxvQkFBb0I7QUFDcEJGLEtBQUtDLElBQUksQ0FBQyx5QkFBeUIsSUFBTyxDQUFBO1FBQ3hDZSxlQUFlaEIsS0FBS0ksRUFBRSxDQUFDLENBQUNhLFFBQVVBO0lBQ3BDLENBQUE7Ozs7OEVBRXNDOzs7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