{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/AdminLayout.tsx"],"sourcesContent":["'use client';\n\nimport type { ReactNode } from 'react';\nimport { useState, useEffect, useCallback } from 'react';\nimport { Sidebar } from './Sidebar';\nimport { TopBar } from './TopBar';\nimport { KeyboardShortcutsDialog } from '@/components/ui/KeyboardShortcutsDialog';\nimport { useKeyboardShortcuts } from '@/hooks/useKeyboardShortcuts';\nimport type { KeyboardShortcut } from '@/hooks/useKeyboardShortcuts';\n\ninterface AdminLayoutProps {\n  children: ReactNode;\n  currentSection: string;\n}\n\n/**\n * AdminLayout Client Component\n * \n * Provides consistent layout structure for all admin pages with:\n * - Persistent sidebar navigation with pending photo count\n * - Top bar with user menu\n * - Responsive container with mobile breakpoint handling\n * - Content area for page-specific content\n */\nexport function AdminLayout({ children, currentSection }: AdminLayoutProps) {\n  const [pendingPhotosCount, setPendingPhotosCount] = useState(0);\n  const [showShortcutsDialog, setShowShortcutsDialog] = useState(false);\n\n  const fetchPendingCount = async () => {\n    try {\n      const response = await fetch('/api/admin/photos/pending-count');\n      const result = await response.json();\n      if (result.success) {\n        setPendingPhotosCount(result.data.count);\n      }\n    } catch (error) {\n      console.error('Failed to fetch pending photos count:', error);\n    }\n  };\n\n  // Focus search input handler\n  const focusSearch = useCallback(() => {\n    const searchInput = document.querySelector('input[type=\"search\"]') as HTMLInputElement;\n    if (searchInput) {\n      searchInput.focus();\n    }\n  }, []);\n\n  // Open new entity form handler\n  const openNewForm = useCallback(() => {\n    const addButton = document.querySelector('[data-action=\"add-new\"]') as HTMLButtonElement;\n    if (addButton) {\n      addButton.click();\n    }\n  }, []);\n\n  // Show keyboard shortcuts help\n  const showHelp = useCallback(() => {\n    setShowShortcutsDialog(true);\n  }, []);\n\n  // Define keyboard shortcuts\n  const shortcuts: KeyboardShortcut[] = [\n    {\n      key: '/',\n      description: 'Focus search input',\n      category: 'navigation',\n      handler: focusSearch,\n    },\n    {\n      key: 'n',\n      description: 'Open new entity form',\n      category: 'actions',\n      handler: openNewForm,\n    },\n    {\n      key: '?',\n      description: 'Show keyboard shortcuts',\n      category: 'general',\n      handler: showHelp,\n    },\n    {\n      key: 'Escape',\n      description: 'Close open modals',\n      category: 'general',\n      handler: () => {\n        // Escape is handled by individual modal components\n      },\n    },\n  ];\n\n  // Register keyboard shortcuts\n  useKeyboardShortcuts(shortcuts, !showShortcutsDialog);\n\n  useEffect(() => {\n    // Initial fetch\n    fetchPendingCount();\n\n    // Refresh count every 30 seconds\n    const interval = setInterval(fetchPendingCount, 30000);\n\n    // Listen for photo moderation events\n    const handlePhotoModerated = () => {\n      fetchPendingCount();\n    };\n    window.addEventListener('photoModerated', handlePhotoModerated);\n\n    return () => {\n      clearInterval(interval);\n      window.removeEventListener('photoModerated', handlePhotoModerated);\n    };\n  }, []);\n\n  return (\n    <div className=\"min-h-screen bg-cloud-100\">\n      {/* Sidebar - Fixed on desktop, collapsible on mobile */}\n      <Sidebar currentSection={currentSection} pendingPhotosCount={pendingPhotosCount} />\n\n      {/* Main content area with top bar */}\n      <div className=\"lg:pl-64\">\n        {/* Top bar */}\n        <TopBar />\n\n        {/* Page content */}\n        <main id=\"main-content\" role=\"main\" tabIndex={-1} className=\"p-4 sm:p-6 lg:p-8 focus:outline-none\">\n          <div className=\"max-w-7xl mx-auto\">\n            {children}\n          </div>\n        </main>\n      </div>\n\n      {/* Keyboard shortcuts help dialog */}\n      <KeyboardShortcutsDialog\n        isOpen={showShortcutsDialog}\n        onClose={() => setShowShortcutsDialog(false)}\n        shortcuts={shortcuts}\n      />\n    </div>\n  );\n}\n"],"names":["AdminLayout","children","currentSection","pendingPhotosCount","setPendingPhotosCount","useState","showShortcutsDialog","setShowShortcutsDialog","fetchPendingCount","response","fetch","result","json","success","data","count","error","console","focusSearch","useCallback","searchInput","document","querySelector","focus","openNewForm","addButton","click","showHelp","shortcuts","key","description","category","handler","useKeyboardShortcuts","useEffect","interval","setInterval","handlePhotoModerated","window","addEventListener","clearInterval","removeEventListener","div","className","Sidebar","TopBar","main","id","role","tabIndex","KeyboardShortcutsDialog","isOpen","onClose"],"mappings":"AAAA;;;;;+BAwBgBA;;;eAAAA;;;;uBArBiC;yBACzB;wBACD;yCACiB;sCACH;AAiB9B,SAASA,YAAY,EAAEC,QAAQ,EAAEC,cAAc,EAAoB;IACxE,MAAM,CAACC,oBAAoBC,sBAAsB,GAAGC,IAAAA,eAAQ,EAAC;IAC7D,MAAM,CAACC,qBAAqBC,uBAAuB,GAAGF,IAAAA,eAAQ,EAAC;IAE/D,MAAMG,oBAAoB;QACxB,IAAI;YACF,MAAMC,WAAW,MAAMC,MAAM;YAC7B,MAAMC,SAAS,MAAMF,SAASG,IAAI;YAClC,IAAID,OAAOE,OAAO,EAAE;gBAClBT,sBAAsBO,OAAOG,IAAI,CAACC,KAAK;YACzC;QACF,EAAE,OAAOC,OAAO;YACdC,QAAQD,KAAK,CAAC,yCAAyCA;QACzD;IACF;IAEA,6BAA6B;IAC7B,MAAME,cAAcC,IAAAA,kBAAW,EAAC;QAC9B,MAAMC,cAAcC,SAASC,aAAa,CAAC;QAC3C,IAAIF,aAAa;YACfA,YAAYG,KAAK;QACnB;IACF,GAAG,EAAE;IAEL,+BAA+B;IAC/B,MAAMC,cAAcL,IAAAA,kBAAW,EAAC;QAC9B,MAAMM,YAAYJ,SAASC,aAAa,CAAC;QACzC,IAAIG,WAAW;YACbA,UAAUC,KAAK;QACjB;IACF,GAAG,EAAE;IAEL,+BAA+B;IAC/B,MAAMC,WAAWR,IAAAA,kBAAW,EAAC;QAC3BZ,uBAAuB;IACzB,GAAG,EAAE;IAEL,4BAA4B;IAC5B,MAAMqB,YAAgC;QACpC;YACEC,KAAK;YACLC,aAAa;YACbC,UAAU;YACVC,SAASd;QACX;QACA;YACEW,KAAK;YACLC,aAAa;YACbC,UAAU;YACVC,SAASR;QACX;QACA;YACEK,KAAK;YACLC,aAAa;YACbC,UAAU;YACVC,SAASL;QACX;QACA;YACEE,KAAK;YACLC,aAAa;YACbC,UAAU;YACVC,SAAS;YACP,mDAAmD;YACrD;QACF;KACD;IAED,8BAA8B;IAC9BC,IAAAA,0CAAoB,EAACL,WAAW,CAACtB;IAEjC4B,IAAAA,gBAAS,EAAC;QACR,gBAAgB;QAChB1B;QAEA,iCAAiC;QACjC,MAAM2B,WAAWC,YAAY5B,mBAAmB;QAEhD,qCAAqC;QACrC,MAAM6B,uBAAuB;YAC3B7B;QACF;QACA8B,OAAOC,gBAAgB,CAAC,kBAAkBF;QAE1C,OAAO;YACLG,cAAcL;YACdG,OAAOG,mBAAmB,CAAC,kBAAkBJ;QAC/C;IACF,GAAG,EAAE;IAEL,qBACE,sBAACK;QAAIC,WAAU;;0BAEb,qBAACC,gBAAO;gBAAC1C,gBAAgBA;gBAAgBC,oBAAoBA;;0BAG7D,sBAACuC;gBAAIC,WAAU;;kCAEb,qBAACE,cAAM;kCAGP,qBAACC;wBAAKC,IAAG;wBAAeC,MAAK;wBAAOC,UAAU,CAAC;wBAAGN,WAAU;kCAC1D,cAAA,qBAACD;4BAAIC,WAAU;sCACZ1C;;;;;0BAMP,qBAACiD,gDAAuB;gBACtBC,QAAQ7C;gBACR8C,SAAS,IAAM7C,uBAAuB;gBACtCqB,WAAWA;;;;AAInB"}