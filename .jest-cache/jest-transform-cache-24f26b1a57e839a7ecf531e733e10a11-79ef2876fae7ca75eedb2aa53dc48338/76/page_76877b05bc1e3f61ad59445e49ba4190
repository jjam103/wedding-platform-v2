9d847d766eef051c8a2cddf7c036c58f
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get /**
 * Room Types Management Page
 * 
 * Provides CRUD interface for managing room types within an accommodation.
 * Features:
 * - Data table with sorting and capacity tracking
 * - Collapsible inline form for create/edit operations
 * - Occupancy percentage display
 * - Guest assignment interface
 * - Section editor integration
 * - Delete confirmation dialog
 * - Toast notifications for success/error feedback
 * - Real-time data refresh after operations
 * 
 * Requirements: 22.1-22.8
 */ default () {
        return RoomTypesPage;
    },
    get dynamic () {
        return dynamic;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const _DataTableWithSuspense = require("../../../../../components/ui/DataTableWithSuspense");
const _CollapsibleForm = require("../../../../../components/admin/CollapsibleForm");
const _InlineSectionEditor = require("../../../../../components/admin/InlineSectionEditor");
const _ConfirmDialog = require("../../../../../components/ui/ConfirmDialog");
const _Button = require("../../../../../components/ui/Button");
const _ToastContext = require("../../../../../components/ui/ToastContext");
const _accommodationSchemas = require("../../../../../schemas/accommodationSchemas");
const _navigation = require("next/navigation");
const dynamic = 'force-dynamic';
function RoomTypesPage({ params }) {
    const { addToast } = (0, _ToastContext.useToast)();
    const router = (0, _navigation.useRouter)();
    const [accommodationId, setAccommodationId] = (0, _react.useState)('');
    // State management
    const [roomTypes, setRoomTypes] = (0, _react.useState)([]);
    const [accommodationName, setAccommodationName] = (0, _react.useState)('');
    const [loading, setLoading] = (0, _react.useState)(true);
    const [isFormOpen, setIsFormOpen] = (0, _react.useState)(false);
    const [isDeleteDialogOpen, setIsDeleteDialogOpen] = (0, _react.useState)(false);
    const [selectedRoomType, setSelectedRoomType] = (0, _react.useState)(null);
    const [roomTypeToDelete, setRoomTypeToDelete] = (0, _react.useState)(null);
    // Ref for scrolling to newly created room type
    const newRoomTypeRef = (0, _react.useRef)(null);
    /**
   * Unwrap params Promise on mount
   */ (0, _react.useEffect)(()=>{
        params.then(({ id })=>{
            setAccommodationId(id);
        });
    }, [
        params
    ]);
    /**
   * Fetch accommodation details
   */ const fetchAccommodation = (0, _react.useCallback)(async ()=>{
        if (!accommodationId) return;
        try {
            const response = await fetch(`/api/admin/accommodations/${accommodationId}`);
            if (!response.ok) {
                throw new Error('Failed to fetch accommodation');
            }
            const result = await response.json();
            if (result.success) {
                setAccommodationName(result.data.name || 'Accommodation');
            }
        } catch (error) {
            console.error('Failed to fetch accommodation:', error);
        }
    }, [
        accommodationId
    ]);
    /**
   * Fetch room types from API
   */ const fetchRoomTypes = (0, _react.useCallback)(async ()=>{
        if (!accommodationId) return;
        try {
            setLoading(true);
            const response = await fetch(`/api/admin/accommodations/${accommodationId}/room-types`);
            if (!response.ok) {
                throw new Error('Failed to fetch room types');
            }
            const result = await response.json();
            if (result.success) {
                setRoomTypes(result.data || []);
            } else {
                addToast({
                    type: 'error',
                    message: result.error?.message || 'Failed to load room types'
                });
            }
        } catch (error) {
            addToast({
                type: 'error',
                message: error instanceof Error ? error.message : 'Failed to load room types'
            });
        } finally{
            setLoading(false);
        }
    }, [
        accommodationId,
        addToast
    ]);
    // Load data on mount only
    (0, _react.useEffect)(()=>{
        if (accommodationId) {
            fetchAccommodation();
            fetchRoomTypes();
        }
    // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [
        accommodationId
    ]);
    /**
   * Handle row click - open edit form
   */ const handleRowClick = (0, _react.useCallback)((roomType)=>{
        setSelectedRoomType(roomType);
        setIsFormOpen(true);
    }, []);
    /**
   * Handle add room type button click
   */ const handleAddRoomType = (0, _react.useCallback)(()=>{
        setSelectedRoomType(null);
        setIsFormOpen(true);
    }, []);
    /**
   * Handle delete button click
   */ const handleDeleteClick = (0, _react.useCallback)((roomType)=>{
        setRoomTypeToDelete(roomType);
        setIsDeleteDialogOpen(true);
    }, []);
    /**
   * Handle manage sections button click
   */ const handleManageSections = (0, _react.useCallback)((roomType)=>{
        // Navigate to section editor for this room type
        if (accommodationId) {
            router.push(`/admin/accommodations/${accommodationId}/room-types/${roomType.id}/sections`);
        }
    }, [
        router,
        accommodationId
    ]);
    /**
   * Handle back to accommodations
   */ const handleBackToAccommodations = (0, _react.useCallback)(()=>{
        router.push('/admin/accommodations');
    }, [
        router
    ]);
    /**
   * Handle form submission (create or update)
   */ const handleSubmit = (0, _react.useCallback)(async (data)=>{
        try {
            const isEdit = !!selectedRoomType;
            // Add accommodation ID to data
            const submitData = {
                ...data,
                accommodationId
            };
            const url = isEdit ? `/api/admin/room-types/${selectedRoomType.id}` : '/api/admin/room-types';
            const method = isEdit ? 'PUT' : 'POST';
            const response = await fetch(url, {
                method,
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(submitData)
            });
            const result = await response.json();
            if (result.success) {
                addToast({
                    type: 'success',
                    message: isEdit ? 'Room type updated successfully' : 'Room type created successfully'
                });
                // Store new room type ID for scrolling
                if (!isEdit && result.data?.id) {
                    newRoomTypeRef.current = result.data.id;
                }
                // Refresh room type list
                await fetchRoomTypes();
                // Close form
                setIsFormOpen(false);
                setSelectedRoomType(null);
                // Scroll to new room type after a short delay
                if (newRoomTypeRef.current) {
                    setTimeout(()=>{
                        const element = document.querySelector(`[data-row-id="${newRoomTypeRef.current}"]`);
                        if (element) {
                            element.scrollIntoView({
                                behavior: 'smooth',
                                block: 'center'
                            });
                        }
                        newRoomTypeRef.current = null;
                    }, 100);
                }
            } else {
                addToast({
                    type: 'error',
                    message: result.error?.message || 'Operation failed'
                });
            }
        } catch (error) {
            addToast({
                type: 'error',
                message: error instanceof Error ? error.message : 'Operation failed'
            });
        }
    }, [
        selectedRoomType,
        accommodationId,
        addToast,
        fetchRoomTypes
    ]);
    /**
   * Handle delete confirmation
   */ const handleDeleteConfirm = (0, _react.useCallback)(async ()=>{
        if (!roomTypeToDelete) return;
        try {
            const response = await fetch(`/api/admin/room-types/${roomTypeToDelete.id}`, {
                method: 'DELETE'
            });
            const result = await response.json();
            if (result.success) {
                addToast({
                    type: 'success',
                    message: 'Room type deleted successfully'
                });
                // Refresh room type list
                await fetchRoomTypes();
                // Close dialog
                setIsDeleteDialogOpen(false);
                setRoomTypeToDelete(null);
            } else {
                addToast({
                    type: 'error',
                    message: result.error?.message || 'Failed to delete room type'
                });
            }
        } catch (error) {
            addToast({
                type: 'error',
                message: error instanceof Error ? error.message : 'Failed to delete room type'
            });
        }
    }, [
        roomTypeToDelete,
        addToast,
        fetchRoomTypes
    ]);
    /**
   * Calculate occupancy percentage
   */ const calculateOccupancy = (roomType)=>{
        // This would need to fetch actual assignments
        // For now, return 0 as placeholder
        return 0;
    };
    /**
   * Format currency for display
   */ const formatCurrency = (amount)=>{
        return new Intl.NumberFormat('en-US', {
            style: 'currency',
            currency: 'USD'
        }).format(amount);
    };
    // Define table columns
    const columns = [
        {
            key: 'name',
            label: 'Name',
            sortable: true
        },
        {
            key: 'capacity',
            label: 'Capacity',
            sortable: true,
            render: (value)=>`${value} guests`
        },
        {
            key: 'totalRooms',
            label: 'Total Rooms',
            sortable: true
        },
        {
            key: 'pricePerNight',
            label: 'Price/Night',
            sortable: true,
            render: (value)=>formatCurrency(value)
        },
        {
            key: 'occupancy',
            label: 'Occupancy',
            sortable: false,
            render: (_, row)=>{
                const roomType = row;
                const occupancy = calculateOccupancy(roomType);
                const percentage = roomType.totalRooms > 0 ? occupancy / roomType.totalRooms * 100 : 0;
                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "flex items-center gap-2",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                            className: "text-sm text-sage-900",
                            children: [
                                occupancy,
                                "/",
                                roomType.totalRooms
                            ]
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                            className: "text-xs text-sage-600",
                            children: [
                                "(",
                                percentage.toFixed(0),
                                "%)"
                            ]
                        })
                    ]
                });
            }
        },
        {
            key: 'actions',
            label: 'Actions',
            sortable: false,
            render: (_, row)=>/*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                    variant: "secondary",
                    size: "sm",
                    onClick: (e)=>{
                        e.stopPropagation();
                        handleManageSections(row);
                    },
                    children: "Manage Sections"
                })
        }
    ];
    // Define form fields
    const formFields = [
        {
            name: 'name',
            label: 'Room Type Name',
            type: 'text',
            required: true,
            placeholder: 'Enter room type name (e.g., Ocean View Suite)'
        },
        {
            name: 'capacity',
            label: 'Capacity',
            type: 'number',
            required: true,
            placeholder: 'Maximum guests per room',
            helpText: 'Maximum number of guests that can stay in this room type'
        },
        {
            name: 'totalRooms',
            label: 'Total Rooms',
            type: 'number',
            required: true,
            placeholder: 'Number of rooms available',
            helpText: 'Total number of rooms of this type'
        },
        {
            name: 'pricePerNight',
            label: 'Price Per Night',
            type: 'number',
            required: true,
            placeholder: '0.00',
            helpText: 'Price per night in USD'
        },
        {
            name: 'hostSubsidyPerNight',
            label: 'Host Subsidy Per Night',
            type: 'number',
            required: false,
            placeholder: '0.00',
            helpText: 'Amount host will subsidize per night (optional)'
        },
        {
            name: 'description',
            label: 'Description',
            type: 'richtext',
            required: false,
            placeholder: 'Enter room type description',
            helpText: 'Rich text editor for detailed room type description'
        }
    ];
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: "space-y-6",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "flex items-center justify-between",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "flex items-center gap-2 mb-2",
                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                                    variant: "secondary",
                                    size: "sm",
                                    onClick: handleBackToAccommodations,
                                    children: "â† Back to Accommodations"
                                })
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("h1", {
                                className: "text-3xl font-bold text-sage-900",
                                children: [
                                    "Room Types: ",
                                    accommodationName
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                className: "text-sage-600 mt-1",
                                children: "Manage room types and guest assignments"
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                        variant: "primary",
                        onClick: handleAddRoomType,
                        "aria-label": "Create new room type",
                        "data-action": "add-new",
                        children: "+ Add Room Type"
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_CollapsibleForm.CollapsibleForm, {
                isOpen: isFormOpen,
                onToggle: ()=>{
                    setIsFormOpen(!isFormOpen);
                    if (isFormOpen) {
                        setSelectedRoomType(null);
                    }
                },
                title: selectedRoomType ? 'Edit Room Type' : 'Add New Room Type',
                fields: formFields,
                schema: selectedRoomType ? _accommodationSchemas.updateRoomTypeSchema : _accommodationSchemas.createRoomTypeSchema,
                onSubmit: handleSubmit,
                onCancel: ()=>{
                    setIsFormOpen(false);
                    setSelectedRoomType(null);
                },
                initialData: selectedRoomType || {},
                submitLabel: selectedRoomType ? 'Update Room Type' : 'Create Room Type'
            }),
            isFormOpen && selectedRoomType && /*#__PURE__*/ (0, _jsxruntime.jsx)(_InlineSectionEditor.InlineSectionEditor, {
                pageType: "room_type",
                pageId: selectedRoomType.id,
                entityName: selectedRoomType.name,
                defaultExpanded: false
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_DataTableWithSuspense.DataTableWithSuspense, {
                data: roomTypes,
                columns: columns,
                loading: loading,
                onRowClick: handleRowClick,
                onDelete: handleDeleteClick,
                totalCount: roomTypes.length,
                currentPage: 1,
                pageSize: 25,
                idField: "id"
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_ConfirmDialog.ConfirmDialog, {
                isOpen: isDeleteDialogOpen,
                onClose: ()=>{
                    setIsDeleteDialogOpen(false);
                    setRoomTypeToDelete(null);
                },
                onConfirm: handleDeleteConfirm,
                title: "Delete Room Type",
                message: `Are you sure you want to delete "${roomTypeToDelete?.name}"? This will unassign all guests from this room type. This action cannot be undone.`,
                confirmLabel: "Delete",
                cancelLabel: "Cancel",
                variant: "danger"
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FkbWluL2FjY29tbW9kYXRpb25zL1tpZF0vcm9vbS10eXBlcy9wYWdlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmV4cG9ydCBjb25zdCBkeW5hbWljID0gJ2ZvcmNlLWR5bmFtaWMnO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRGF0YVRhYmxlV2l0aFN1c3BlbnNlIGFzIERhdGFUYWJsZSwgdHlwZSBDb2x1bW5EZWYgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvRGF0YVRhYmxlV2l0aFN1c3BlbnNlJztcbmltcG9ydCB7IENvbGxhcHNpYmxlRm9ybSB9IGZyb20gJ0AvY29tcG9uZW50cy9hZG1pbi9Db2xsYXBzaWJsZUZvcm0nO1xuaW1wb3J0IHsgSW5saW5lU2VjdGlvbkVkaXRvciB9IGZyb20gJ0AvY29tcG9uZW50cy9hZG1pbi9JbmxpbmVTZWN0aW9uRWRpdG9yJztcbmltcG9ydCB7IENvbmZpcm1EaWFsb2cgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvQ29uZmlybURpYWxvZyc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvQnV0dG9uJztcbmltcG9ydCB7IHVzZVRvYXN0IH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL1RvYXN0Q29udGV4dCc7XG5pbXBvcnQgdHlwZSB7IFJvb21UeXBlIH0gZnJvbSAnQC9zY2hlbWFzL2FjY29tbW9kYXRpb25TY2hlbWFzJztcbmltcG9ydCB7IGNyZWF0ZVJvb21UeXBlU2NoZW1hLCB1cGRhdGVSb29tVHlwZVNjaGVtYSB9IGZyb20gJ0Avc2NoZW1hcy9hY2NvbW1vZGF0aW9uU2NoZW1hcyc7XG5pbXBvcnQgdHlwZSB7IEZvcm1GaWVsZCB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9EeW5hbWljRm9ybSc7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICduZXh0L25hdmlnYXRpb24nO1xuXG4vKipcbiAqIFJvb20gVHlwZXMgTWFuYWdlbWVudCBQYWdlXG4gKiBcbiAqIFByb3ZpZGVzIENSVUQgaW50ZXJmYWNlIGZvciBtYW5hZ2luZyByb29tIHR5cGVzIHdpdGhpbiBhbiBhY2NvbW1vZGF0aW9uLlxuICogRmVhdHVyZXM6XG4gKiAtIERhdGEgdGFibGUgd2l0aCBzb3J0aW5nIGFuZCBjYXBhY2l0eSB0cmFja2luZ1xuICogLSBDb2xsYXBzaWJsZSBpbmxpbmUgZm9ybSBmb3IgY3JlYXRlL2VkaXQgb3BlcmF0aW9uc1xuICogLSBPY2N1cGFuY3kgcGVyY2VudGFnZSBkaXNwbGF5XG4gKiAtIEd1ZXN0IGFzc2lnbm1lbnQgaW50ZXJmYWNlXG4gKiAtIFNlY3Rpb24gZWRpdG9yIGludGVncmF0aW9uXG4gKiAtIERlbGV0ZSBjb25maXJtYXRpb24gZGlhbG9nXG4gKiAtIFRvYXN0IG5vdGlmaWNhdGlvbnMgZm9yIHN1Y2Nlc3MvZXJyb3IgZmVlZGJhY2tcbiAqIC0gUmVhbC10aW1lIGRhdGEgcmVmcmVzaCBhZnRlciBvcGVyYXRpb25zXG4gKiBcbiAqIFJlcXVpcmVtZW50czogMjIuMS0yMi44XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJvb21UeXBlc1BhZ2UoeyBwYXJhbXMgfTogeyBwYXJhbXM6IFByb21pc2U8eyBpZDogc3RyaW5nIH0+IH0pIHtcbiAgY29uc3QgeyBhZGRUb2FzdCB9ID0gdXNlVG9hc3QoKTtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IFthY2NvbW1vZGF0aW9uSWQsIHNldEFjY29tbW9kYXRpb25JZF0gPSB1c2VTdGF0ZTxzdHJpbmc+KCcnKTtcbiAgXG4gIC8vIFN0YXRlIG1hbmFnZW1lbnRcbiAgY29uc3QgW3Jvb21UeXBlcywgc2V0Um9vbVR5cGVzXSA9IHVzZVN0YXRlPFJvb21UeXBlW10+KFtdKTtcbiAgY29uc3QgW2FjY29tbW9kYXRpb25OYW1lLCBzZXRBY2NvbW1vZGF0aW9uTmFtZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KCcnKTtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtpc0Zvcm1PcGVuLCBzZXRJc0Zvcm1PcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzRGVsZXRlRGlhbG9nT3Blbiwgc2V0SXNEZWxldGVEaWFsb2dPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NlbGVjdGVkUm9vbVR5cGUsIHNldFNlbGVjdGVkUm9vbVR5cGVdID0gdXNlU3RhdGU8Um9vbVR5cGUgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3Jvb21UeXBlVG9EZWxldGUsIHNldFJvb21UeXBlVG9EZWxldGVdID0gdXNlU3RhdGU8Um9vbVR5cGUgfCBudWxsPihudWxsKTtcbiAgXG4gIC8vIFJlZiBmb3Igc2Nyb2xsaW5nIHRvIG5ld2x5IGNyZWF0ZWQgcm9vbSB0eXBlXG4gIGNvbnN0IG5ld1Jvb21UeXBlUmVmID0gdXNlUmVmPHN0cmluZyB8IG51bGw+KG51bGwpO1xuXG4gIC8qKlxuICAgKiBVbndyYXAgcGFyYW1zIFByb21pc2Ugb24gbW91bnRcbiAgICovXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcGFyYW1zLnRoZW4oKHsgaWQgfSkgPT4ge1xuICAgICAgc2V0QWNjb21tb2RhdGlvbklkKGlkKTtcbiAgICB9KTtcbiAgfSwgW3BhcmFtc10pO1xuXG4gIC8qKlxuICAgKiBGZXRjaCBhY2NvbW1vZGF0aW9uIGRldGFpbHNcbiAgICovXG4gIGNvbnN0IGZldGNoQWNjb21tb2RhdGlvbiA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBpZiAoIWFjY29tbW9kYXRpb25JZCkgcmV0dXJuO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2FkbWluL2FjY29tbW9kYXRpb25zLyR7YWNjb21tb2RhdGlvbklkfWApO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBhY2NvbW1vZGF0aW9uJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBzZXRBY2NvbW1vZGF0aW9uTmFtZShyZXN1bHQuZGF0YS5uYW1lIHx8ICdBY2NvbW1vZGF0aW9uJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBhY2NvbW1vZGF0aW9uOicsIGVycm9yKTtcbiAgICB9XG4gIH0sIFthY2NvbW1vZGF0aW9uSWRdKTtcblxuICAvKipcbiAgICogRmV0Y2ggcm9vbSB0eXBlcyBmcm9tIEFQSVxuICAgKi9cbiAgY29uc3QgZmV0Y2hSb29tVHlwZXMgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFhY2NvbW1vZGF0aW9uSWQpIHJldHVybjtcbiAgICBcbiAgICB0cnkge1xuICAgICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9hZG1pbi9hY2NvbW1vZGF0aW9ucy8ke2FjY29tbW9kYXRpb25JZH0vcm9vbS10eXBlc2ApO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCByb29tIHR5cGVzJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBzZXRSb29tVHlwZXMocmVzdWx0LmRhdGEgfHwgW10pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWRkVG9hc3Qoe1xuICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgbWVzc2FnZTogcmVzdWx0LmVycm9yPy5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gbG9hZCByb29tIHR5cGVzJyxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFkZFRvYXN0KHtcbiAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGxvYWQgcm9vbSB0eXBlcycsXG4gICAgICB9KTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9LCBbYWNjb21tb2RhdGlvbklkLCBhZGRUb2FzdF0pO1xuXG4gIC8vIExvYWQgZGF0YSBvbiBtb3VudCBvbmx5XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFjY29tbW9kYXRpb25JZCkge1xuICAgICAgZmV0Y2hBY2NvbW1vZGF0aW9uKCk7XG4gICAgICBmZXRjaFJvb21UeXBlcygpO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIH0sIFthY2NvbW1vZGF0aW9uSWRdKTtcblxuICAvKipcbiAgICogSGFuZGxlIHJvdyBjbGljayAtIG9wZW4gZWRpdCBmb3JtXG4gICAqL1xuICBjb25zdCBoYW5kbGVSb3dDbGljayA9IHVzZUNhbGxiYWNrKChyb29tVHlwZTogUm9vbVR5cGUpID0+IHtcbiAgICBzZXRTZWxlY3RlZFJvb21UeXBlKHJvb21UeXBlKTtcbiAgICBzZXRJc0Zvcm1PcGVuKHRydWUpO1xuICB9LCBbXSk7XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBhZGQgcm9vbSB0eXBlIGJ1dHRvbiBjbGlja1xuICAgKi9cbiAgY29uc3QgaGFuZGxlQWRkUm9vbVR5cGUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0U2VsZWN0ZWRSb29tVHlwZShudWxsKTtcbiAgICBzZXRJc0Zvcm1PcGVuKHRydWUpO1xuICB9LCBbXSk7XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBkZWxldGUgYnV0dG9uIGNsaWNrXG4gICAqL1xuICBjb25zdCBoYW5kbGVEZWxldGVDbGljayA9IHVzZUNhbGxiYWNrKChyb29tVHlwZTogUm9vbVR5cGUpID0+IHtcbiAgICBzZXRSb29tVHlwZVRvRGVsZXRlKHJvb21UeXBlKTtcbiAgICBzZXRJc0RlbGV0ZURpYWxvZ09wZW4odHJ1ZSk7XG4gIH0sIFtdKTtcblxuICAvKipcbiAgICogSGFuZGxlIG1hbmFnZSBzZWN0aW9ucyBidXR0b24gY2xpY2tcbiAgICovXG4gIGNvbnN0IGhhbmRsZU1hbmFnZVNlY3Rpb25zID0gdXNlQ2FsbGJhY2soKHJvb21UeXBlOiBSb29tVHlwZSkgPT4ge1xuICAgIC8vIE5hdmlnYXRlIHRvIHNlY3Rpb24gZWRpdG9yIGZvciB0aGlzIHJvb20gdHlwZVxuICAgIGlmIChhY2NvbW1vZGF0aW9uSWQpIHtcbiAgICAgIHJvdXRlci5wdXNoKGAvYWRtaW4vYWNjb21tb2RhdGlvbnMvJHthY2NvbW1vZGF0aW9uSWR9L3Jvb20tdHlwZXMvJHtyb29tVHlwZS5pZH0vc2VjdGlvbnNgKTtcbiAgICB9XG4gIH0sIFtyb3V0ZXIsIGFjY29tbW9kYXRpb25JZF0pO1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgYmFjayB0byBhY2NvbW1vZGF0aW9uc1xuICAgKi9cbiAgY29uc3QgaGFuZGxlQmFja1RvQWNjb21tb2RhdGlvbnMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgcm91dGVyLnB1c2goJy9hZG1pbi9hY2NvbW1vZGF0aW9ucycpO1xuICB9LCBbcm91dGVyXSk7XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBmb3JtIHN1Ym1pc3Npb24gKGNyZWF0ZSBvciB1cGRhdGUpXG4gICAqL1xuICBjb25zdCBoYW5kbGVTdWJtaXQgPSB1c2VDYWxsYmFjayhhc3luYyAoZGF0YTogYW55KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGlzRWRpdCA9ICEhc2VsZWN0ZWRSb29tVHlwZTtcbiAgICAgIFxuICAgICAgLy8gQWRkIGFjY29tbW9kYXRpb24gSUQgdG8gZGF0YVxuICAgICAgY29uc3Qgc3VibWl0RGF0YSA9IHtcbiAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgYWNjb21tb2RhdGlvbklkLFxuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc3QgdXJsID0gaXNFZGl0ID8gYC9hcGkvYWRtaW4vcm9vbS10eXBlcy8ke3NlbGVjdGVkUm9vbVR5cGUuaWR9YCA6ICcvYXBpL2FkbWluL3Jvb20tdHlwZXMnO1xuICAgICAgY29uc3QgbWV0aG9kID0gaXNFZGl0ID8gJ1BVVCcgOiAnUE9TVCc7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZCxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHN1Ym1pdERhdGEpLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGFkZFRvYXN0KHtcbiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsXG4gICAgICAgICAgbWVzc2FnZTogaXNFZGl0ID8gJ1Jvb20gdHlwZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseScgOiAnUm9vbSB0eXBlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTdG9yZSBuZXcgcm9vbSB0eXBlIElEIGZvciBzY3JvbGxpbmdcbiAgICAgICAgaWYgKCFpc0VkaXQgJiYgcmVzdWx0LmRhdGE/LmlkKSB7XG4gICAgICAgICAgbmV3Um9vbVR5cGVSZWYuY3VycmVudCA9IHJlc3VsdC5kYXRhLmlkO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBSZWZyZXNoIHJvb20gdHlwZSBsaXN0XG4gICAgICAgIGF3YWl0IGZldGNoUm9vbVR5cGVzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBDbG9zZSBmb3JtXG4gICAgICAgIHNldElzRm9ybU9wZW4oZmFsc2UpO1xuICAgICAgICBzZXRTZWxlY3RlZFJvb21UeXBlKG51bGwpO1xuICAgICAgICBcbiAgICAgICAgLy8gU2Nyb2xsIHRvIG5ldyByb29tIHR5cGUgYWZ0ZXIgYSBzaG9ydCBkZWxheVxuICAgICAgICBpZiAobmV3Um9vbVR5cGVSZWYuY3VycmVudCkge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXJvdy1pZD1cIiR7bmV3Um9vbVR5cGVSZWYuY3VycmVudH1cIl1gKTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnY2VudGVyJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld1Jvb21UeXBlUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFkZFRvYXN0KHtcbiAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5lcnJvcj8ubWVzc2FnZSB8fCAnT3BlcmF0aW9uIGZhaWxlZCcsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhZGRUb2FzdCh7XG4gICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ09wZXJhdGlvbiBmYWlsZWQnLFxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbc2VsZWN0ZWRSb29tVHlwZSwgYWNjb21tb2RhdGlvbklkLCBhZGRUb2FzdCwgZmV0Y2hSb29tVHlwZXNdKTtcblxuICAvKipcbiAgICogSGFuZGxlIGRlbGV0ZSBjb25maXJtYXRpb25cbiAgICovXG4gIGNvbnN0IGhhbmRsZURlbGV0ZUNvbmZpcm0gPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFyb29tVHlwZVRvRGVsZXRlKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9hZG1pbi9yb29tLXR5cGVzLyR7cm9vbVR5cGVUb0RlbGV0ZS5pZH1gLCB7XG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgYWRkVG9hc3Qoe1xuICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICAgICAgICBtZXNzYWdlOiAnUm9vbSB0eXBlIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZWZyZXNoIHJvb20gdHlwZSBsaXN0XG4gICAgICAgIGF3YWl0IGZldGNoUm9vbVR5cGVzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBDbG9zZSBkaWFsb2dcbiAgICAgICAgc2V0SXNEZWxldGVEaWFsb2dPcGVuKGZhbHNlKTtcbiAgICAgICAgc2V0Um9vbVR5cGVUb0RlbGV0ZShudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFkZFRvYXN0KHtcbiAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5lcnJvcj8ubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGRlbGV0ZSByb29tIHR5cGUnLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYWRkVG9hc3Qoe1xuICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZGVsZXRlIHJvb20gdHlwZScsXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtyb29tVHlwZVRvRGVsZXRlLCBhZGRUb2FzdCwgZmV0Y2hSb29tVHlwZXNdKTtcblxuICAvKipcbiAgICogQ2FsY3VsYXRlIG9jY3VwYW5jeSBwZXJjZW50YWdlXG4gICAqL1xuICBjb25zdCBjYWxjdWxhdGVPY2N1cGFuY3kgPSAocm9vbVR5cGU6IFJvb21UeXBlKSA9PiB7XG4gICAgLy8gVGhpcyB3b3VsZCBuZWVkIHRvIGZldGNoIGFjdHVhbCBhc3NpZ25tZW50c1xuICAgIC8vIEZvciBub3csIHJldHVybiAwIGFzIHBsYWNlaG9sZGVyXG4gICAgcmV0dXJuIDA7XG4gIH07XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBjdXJyZW5jeSBmb3IgZGlzcGxheVxuICAgKi9cbiAgY29uc3QgZm9ybWF0Q3VycmVuY3kgPSAoYW1vdW50OiBudW1iZXIpID0+IHtcbiAgICByZXR1cm4gbmV3IEludGwuTnVtYmVyRm9ybWF0KCdlbi1VUycsIHtcbiAgICAgIHN0eWxlOiAnY3VycmVuY3knLFxuICAgICAgY3VycmVuY3k6ICdVU0QnLFxuICAgIH0pLmZvcm1hdChhbW91bnQpO1xuICB9O1xuXG4gIC8vIERlZmluZSB0YWJsZSBjb2x1bW5zXG4gIGNvbnN0IGNvbHVtbnM6IENvbHVtbkRlZjxSb29tVHlwZT5bXSA9IFtcbiAgICB7XG4gICAgICBrZXk6ICduYW1lJyxcbiAgICAgIGxhYmVsOiAnTmFtZScsXG4gICAgICBzb3J0YWJsZTogdHJ1ZSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGtleTogJ2NhcGFjaXR5JyxcbiAgICAgIGxhYmVsOiAnQ2FwYWNpdHknLFxuICAgICAgc29ydGFibGU6IHRydWUsXG4gICAgICByZW5kZXI6ICh2YWx1ZSkgPT4gYCR7dmFsdWV9IGd1ZXN0c2AsXG4gICAgfSxcbiAgICB7XG4gICAgICBrZXk6ICd0b3RhbFJvb21zJyxcbiAgICAgIGxhYmVsOiAnVG90YWwgUm9vbXMnLFxuICAgICAgc29ydGFibGU6IHRydWUsXG4gICAgfSxcbiAgICB7XG4gICAgICBrZXk6ICdwcmljZVBlck5pZ2h0JyxcbiAgICAgIGxhYmVsOiAnUHJpY2UvTmlnaHQnLFxuICAgICAgc29ydGFibGU6IHRydWUsXG4gICAgICByZW5kZXI6ICh2YWx1ZSkgPT4gZm9ybWF0Q3VycmVuY3kodmFsdWUgYXMgbnVtYmVyKSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGtleTogJ29jY3VwYW5jeScsXG4gICAgICBsYWJlbDogJ09jY3VwYW5jeScsXG4gICAgICBzb3J0YWJsZTogZmFsc2UsXG4gICAgICByZW5kZXI6IChfLCByb3cpID0+IHtcbiAgICAgICAgY29uc3Qgcm9vbVR5cGUgPSByb3cgYXMgUm9vbVR5cGU7XG4gICAgICAgIGNvbnN0IG9jY3VwYW5jeSA9IGNhbGN1bGF0ZU9jY3VwYW5jeShyb29tVHlwZSk7XG4gICAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSByb29tVHlwZS50b3RhbFJvb21zID4gMCA/IChvY2N1cGFuY3kgLyByb29tVHlwZS50b3RhbFJvb21zKSAqIDEwMCA6IDA7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1zYWdlLTkwMFwiPlxuICAgICAgICAgICAgICB7b2NjdXBhbmN5fS97cm9vbVR5cGUudG90YWxSb29tc31cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1zYWdlLTYwMFwiPlxuICAgICAgICAgICAgICAoe3BlcmNlbnRhZ2UudG9GaXhlZCgwKX0lKVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGtleTogJ2FjdGlvbnMnLFxuICAgICAgbGFiZWw6ICdBY3Rpb25zJyxcbiAgICAgIHNvcnRhYmxlOiBmYWxzZSxcbiAgICAgIHJlbmRlcjogKF8sIHJvdykgPT4gKFxuICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgdmFyaWFudD1cInNlY29uZGFyeVwiXG4gICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGhhbmRsZU1hbmFnZVNlY3Rpb25zKHJvdyBhcyBSb29tVHlwZSk7XG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIE1hbmFnZSBTZWN0aW9uc1xuICAgICAgICA8L0J1dHRvbj5cbiAgICAgICksXG4gICAgfSxcbiAgXTtcblxuICAvLyBEZWZpbmUgZm9ybSBmaWVsZHNcbiAgY29uc3QgZm9ybUZpZWxkczogRm9ybUZpZWxkW10gPSBbXG4gICAge1xuICAgICAgbmFtZTogJ25hbWUnLFxuICAgICAgbGFiZWw6ICdSb29tIFR5cGUgTmFtZScsXG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgIHBsYWNlaG9sZGVyOiAnRW50ZXIgcm9vbSB0eXBlIG5hbWUgKGUuZy4sIE9jZWFuIFZpZXcgU3VpdGUpJyxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdjYXBhY2l0eScsXG4gICAgICBsYWJlbDogJ0NhcGFjaXR5JyxcbiAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICBwbGFjZWhvbGRlcjogJ01heGltdW0gZ3Vlc3RzIHBlciByb29tJyxcbiAgICAgIGhlbHBUZXh0OiAnTWF4aW11bSBudW1iZXIgb2YgZ3Vlc3RzIHRoYXQgY2FuIHN0YXkgaW4gdGhpcyByb29tIHR5cGUnLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3RvdGFsUm9vbXMnLFxuICAgICAgbGFiZWw6ICdUb3RhbCBSb29tcycsXG4gICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgcGxhY2Vob2xkZXI6ICdOdW1iZXIgb2Ygcm9vbXMgYXZhaWxhYmxlJyxcbiAgICAgIGhlbHBUZXh0OiAnVG90YWwgbnVtYmVyIG9mIHJvb21zIG9mIHRoaXMgdHlwZScsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAncHJpY2VQZXJOaWdodCcsXG4gICAgICBsYWJlbDogJ1ByaWNlIFBlciBOaWdodCcsXG4gICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgcGxhY2Vob2xkZXI6ICcwLjAwJyxcbiAgICAgIGhlbHBUZXh0OiAnUHJpY2UgcGVyIG5pZ2h0IGluIFVTRCcsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnaG9zdFN1YnNpZHlQZXJOaWdodCcsXG4gICAgICBsYWJlbDogJ0hvc3QgU3Vic2lkeSBQZXIgTmlnaHQnLFxuICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICBwbGFjZWhvbGRlcjogJzAuMDAnLFxuICAgICAgaGVscFRleHQ6ICdBbW91bnQgaG9zdCB3aWxsIHN1YnNpZGl6ZSBwZXIgbmlnaHQgKG9wdGlvbmFsKScsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnZGVzY3JpcHRpb24nLFxuICAgICAgbGFiZWw6ICdEZXNjcmlwdGlvbicsXG4gICAgICB0eXBlOiAncmljaHRleHQnLFxuICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgcGxhY2Vob2xkZXI6ICdFbnRlciByb29tIHR5cGUgZGVzY3JpcHRpb24nLFxuICAgICAgaGVscFRleHQ6ICdSaWNoIHRleHQgZWRpdG9yIGZvciBkZXRhaWxlZCByb29tIHR5cGUgZGVzY3JpcHRpb24nLFxuICAgIH0sXG4gIF07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNlwiPlxuICAgICAgey8qIFBhZ2UgSGVhZGVyICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIG1iLTJcIj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdmFyaWFudD1cInNlY29uZGFyeVwiXG4gICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUJhY2tUb0FjY29tbW9kYXRpb25zfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICDihpAgQmFjayB0byBBY2NvbW1vZGF0aW9uc1xuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRleHQtM3hsIGZvbnQtYm9sZCB0ZXh0LXNhZ2UtOTAwXCI+Um9vbSBUeXBlczoge2FjY29tbW9kYXRpb25OYW1lfTwvaDE+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zYWdlLTYwMCBtdC0xXCI+TWFuYWdlIHJvb20gdHlwZXMgYW5kIGd1ZXN0IGFzc2lnbm1lbnRzPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPEJ1dHRvblxuICAgICAgICAgIHZhcmlhbnQ9XCJwcmltYXJ5XCJcbiAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVBZGRSb29tVHlwZX1cbiAgICAgICAgICBhcmlhLWxhYmVsPVwiQ3JlYXRlIG5ldyByb29tIHR5cGVcIlxuICAgICAgICAgIGRhdGEtYWN0aW9uPVwiYWRkLW5ld1wiXG4gICAgICAgID5cbiAgICAgICAgICArIEFkZCBSb29tIFR5cGVcbiAgICAgICAgPC9CdXR0b24+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIENvbGxhcHNpYmxlIEZvcm0gKi99XG4gICAgICA8Q29sbGFwc2libGVGb3JtXG4gICAgICAgIGlzT3Blbj17aXNGb3JtT3Blbn1cbiAgICAgICAgb25Ub2dnbGU9eygpID0+IHtcbiAgICAgICAgICBzZXRJc0Zvcm1PcGVuKCFpc0Zvcm1PcGVuKTtcbiAgICAgICAgICBpZiAoaXNGb3JtT3Blbikge1xuICAgICAgICAgICAgc2V0U2VsZWN0ZWRSb29tVHlwZShudWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH19XG4gICAgICAgIHRpdGxlPXtzZWxlY3RlZFJvb21UeXBlID8gJ0VkaXQgUm9vbSBUeXBlJyA6ICdBZGQgTmV3IFJvb20gVHlwZSd9XG4gICAgICAgIGZpZWxkcz17Zm9ybUZpZWxkc31cbiAgICAgICAgc2NoZW1hPXtzZWxlY3RlZFJvb21UeXBlID8gdXBkYXRlUm9vbVR5cGVTY2hlbWEgOiBjcmVhdGVSb29tVHlwZVNjaGVtYX1cbiAgICAgICAgb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH1cbiAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICBzZXRJc0Zvcm1PcGVuKGZhbHNlKTtcbiAgICAgICAgICBzZXRTZWxlY3RlZFJvb21UeXBlKG51bGwpO1xuICAgICAgICB9fVxuICAgICAgICBpbml0aWFsRGF0YT17c2VsZWN0ZWRSb29tVHlwZSB8fCB7fX1cbiAgICAgICAgc3VibWl0TGFiZWw9e3NlbGVjdGVkUm9vbVR5cGUgPyAnVXBkYXRlIFJvb20gVHlwZScgOiAnQ3JlYXRlIFJvb20gVHlwZSd9XG4gICAgICAvPlxuXG4gICAgICB7LyogSW5saW5lIFNlY3Rpb24gRWRpdG9yIC0gU2hvd3Mgd2hlbiBlZGl0aW5nIGFuIGV4aXN0aW5nIHJvb20gdHlwZSAqL31cbiAgICAgIHtpc0Zvcm1PcGVuICYmIHNlbGVjdGVkUm9vbVR5cGUgJiYgKFxuICAgICAgICA8SW5saW5lU2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwicm9vbV90eXBlXCJcbiAgICAgICAgICBwYWdlSWQ9e3NlbGVjdGVkUm9vbVR5cGUuaWR9XG4gICAgICAgICAgZW50aXR5TmFtZT17c2VsZWN0ZWRSb29tVHlwZS5uYW1lfVxuICAgICAgICAgIGRlZmF1bHRFeHBhbmRlZD17ZmFsc2V9XG4gICAgICAgIC8+XG4gICAgICApfVxuXG4gICAgICB7LyogRGF0YSBUYWJsZSAqL31cbiAgICAgIDxEYXRhVGFibGVcbiAgICAgICAgZGF0YT17cm9vbVR5cGVzfVxuICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICBsb2FkaW5nPXtsb2FkaW5nfVxuICAgICAgICBvblJvd0NsaWNrPXtoYW5kbGVSb3dDbGlja31cbiAgICAgICAgb25EZWxldGU9e2hhbmRsZURlbGV0ZUNsaWNrfVxuICAgICAgICB0b3RhbENvdW50PXtyb29tVHlwZXMubGVuZ3RofVxuICAgICAgICBjdXJyZW50UGFnZT17MX1cbiAgICAgICAgcGFnZVNpemU9ezI1fVxuICAgICAgICBpZEZpZWxkPVwiaWRcIlxuICAgICAgLz5cblxuICAgICAgey8qIERlbGV0ZSBDb25maXJtYXRpb24gRGlhbG9nICovfVxuICAgICAgPENvbmZpcm1EaWFsb2dcbiAgICAgICAgaXNPcGVuPXtpc0RlbGV0ZURpYWxvZ09wZW59XG4gICAgICAgIG9uQ2xvc2U9eygpID0+IHtcbiAgICAgICAgICBzZXRJc0RlbGV0ZURpYWxvZ09wZW4oZmFsc2UpO1xuICAgICAgICAgIHNldFJvb21UeXBlVG9EZWxldGUobnVsbCk7XG4gICAgICAgIH19XG4gICAgICAgIG9uQ29uZmlybT17aGFuZGxlRGVsZXRlQ29uZmlybX1cbiAgICAgICAgdGl0bGU9XCJEZWxldGUgUm9vbSBUeXBlXCJcbiAgICAgICAgbWVzc2FnZT17YEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgXCIke3Jvb21UeXBlVG9EZWxldGU/Lm5hbWV9XCI/IFRoaXMgd2lsbCB1bmFzc2lnbiBhbGwgZ3Vlc3RzIGZyb20gdGhpcyByb29tIHR5cGUuIFRoaXMgYWN0aW9uIGNhbm5vdCBiZSB1bmRvbmUuYH1cbiAgICAgICAgY29uZmlybUxhYmVsPVwiRGVsZXRlXCJcbiAgICAgICAgY2FuY2VsTGFiZWw9XCJDYW5jZWxcIlxuICAgICAgICB2YXJpYW50PVwiZGFuZ2VyXCJcbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsiUm9vbVR5cGVzUGFnZSIsImR5bmFtaWMiLCJwYXJhbXMiLCJhZGRUb2FzdCIsInVzZVRvYXN0Iiwicm91dGVyIiwidXNlUm91dGVyIiwiYWNjb21tb2RhdGlvbklkIiwic2V0QWNjb21tb2RhdGlvbklkIiwidXNlU3RhdGUiLCJyb29tVHlwZXMiLCJzZXRSb29tVHlwZXMiLCJhY2NvbW1vZGF0aW9uTmFtZSIsInNldEFjY29tbW9kYXRpb25OYW1lIiwibG9hZGluZyIsInNldExvYWRpbmciLCJpc0Zvcm1PcGVuIiwic2V0SXNGb3JtT3BlbiIsImlzRGVsZXRlRGlhbG9nT3BlbiIsInNldElzRGVsZXRlRGlhbG9nT3BlbiIsInNlbGVjdGVkUm9vbVR5cGUiLCJzZXRTZWxlY3RlZFJvb21UeXBlIiwicm9vbVR5cGVUb0RlbGV0ZSIsInNldFJvb21UeXBlVG9EZWxldGUiLCJuZXdSb29tVHlwZVJlZiIsInVzZVJlZiIsInVzZUVmZmVjdCIsInRoZW4iLCJpZCIsImZldGNoQWNjb21tb2RhdGlvbiIsInVzZUNhbGxiYWNrIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiRXJyb3IiLCJyZXN1bHQiLCJqc29uIiwic3VjY2VzcyIsImRhdGEiLCJuYW1lIiwiZXJyb3IiLCJjb25zb2xlIiwiZmV0Y2hSb29tVHlwZXMiLCJ0eXBlIiwibWVzc2FnZSIsImhhbmRsZVJvd0NsaWNrIiwicm9vbVR5cGUiLCJoYW5kbGVBZGRSb29tVHlwZSIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTWFuYWdlU2VjdGlvbnMiLCJwdXNoIiwiaGFuZGxlQmFja1RvQWNjb21tb2RhdGlvbnMiLCJoYW5kbGVTdWJtaXQiLCJpc0VkaXQiLCJzdWJtaXREYXRhIiwidXJsIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY3VycmVudCIsInNldFRpbWVvdXQiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic2Nyb2xsSW50b1ZpZXciLCJiZWhhdmlvciIsImJsb2NrIiwiaGFuZGxlRGVsZXRlQ29uZmlybSIsImNhbGN1bGF0ZU9jY3VwYW5jeSIsImZvcm1hdEN1cnJlbmN5IiwiYW1vdW50IiwiSW50bCIsIk51bWJlckZvcm1hdCIsInN0eWxlIiwiY3VycmVuY3kiLCJmb3JtYXQiLCJjb2x1bW5zIiwia2V5IiwibGFiZWwiLCJzb3J0YWJsZSIsInJlbmRlciIsInZhbHVlIiwiXyIsInJvdyIsIm9jY3VwYW5jeSIsInBlcmNlbnRhZ2UiLCJ0b3RhbFJvb21zIiwiZGl2IiwiY2xhc3NOYW1lIiwic3BhbiIsInRvRml4ZWQiLCJCdXR0b24iLCJ2YXJpYW50Iiwic2l6ZSIsIm9uQ2xpY2siLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwiZm9ybUZpZWxkcyIsInJlcXVpcmVkIiwicGxhY2Vob2xkZXIiLCJoZWxwVGV4dCIsImgxIiwicCIsImFyaWEtbGFiZWwiLCJkYXRhLWFjdGlvbiIsIkNvbGxhcHNpYmxlRm9ybSIsImlzT3BlbiIsIm9uVG9nZ2xlIiwidGl0bGUiLCJmaWVsZHMiLCJzY2hlbWEiLCJ1cGRhdGVSb29tVHlwZVNjaGVtYSIsImNyZWF0ZVJvb21UeXBlU2NoZW1hIiwib25TdWJtaXQiLCJvbkNhbmNlbCIsImluaXRpYWxEYXRhIiwic3VibWl0TGFiZWwiLCJJbmxpbmVTZWN0aW9uRWRpdG9yIiwicGFnZVR5cGUiLCJwYWdlSWQiLCJlbnRpdHlOYW1lIiwiZGVmYXVsdEV4cGFuZGVkIiwiRGF0YVRhYmxlIiwib25Sb3dDbGljayIsIm9uRGVsZXRlIiwidG90YWxDb3VudCIsImxlbmd0aCIsImN1cnJlbnRQYWdlIiwicGFnZVNpemUiLCJpZEZpZWxkIiwiQ29uZmlybURpYWxvZyIsIm9uQ2xvc2UiLCJvbkNvbmZpcm0iLCJjb25maXJtTGFiZWwiLCJjYW5jZWxMYWJlbCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7OztRQWdCQTs7Ozs7Ozs7Ozs7Ozs7O0NBZUMsR0FDRDtlQUF3QkE7O1FBOUJYQztlQUFBQTs7Ozt1QkFFNEM7dUNBQ1U7aUNBQ25DO3FDQUNJOytCQUNOO3dCQUNQOzhCQUNFO3NDQUVrQzs0QkFFakM7QUFabkIsTUFBTUEsVUFBVTtBQThCUixTQUFTRCxjQUFjLEVBQUVFLE1BQU0sRUFBdUM7SUFDbkYsTUFBTSxFQUFFQyxRQUFRLEVBQUUsR0FBR0MsSUFBQUEsc0JBQVE7SUFDN0IsTUFBTUMsU0FBU0MsSUFBQUEscUJBQVM7SUFDeEIsTUFBTSxDQUFDQyxpQkFBaUJDLG1CQUFtQixHQUFHQyxJQUFBQSxlQUFRLEVBQVM7SUFFL0QsbUJBQW1CO0lBQ25CLE1BQU0sQ0FBQ0MsV0FBV0MsYUFBYSxHQUFHRixJQUFBQSxlQUFRLEVBQWEsRUFBRTtJQUN6RCxNQUFNLENBQUNHLG1CQUFtQkMscUJBQXFCLEdBQUdKLElBQUFBLGVBQVEsRUFBUztJQUNuRSxNQUFNLENBQUNLLFNBQVNDLFdBQVcsR0FBR04sSUFBQUEsZUFBUSxFQUFDO0lBQ3ZDLE1BQU0sQ0FBQ08sWUFBWUMsY0FBYyxHQUFHUixJQUFBQSxlQUFRLEVBQUM7SUFDN0MsTUFBTSxDQUFDUyxvQkFBb0JDLHNCQUFzQixHQUFHVixJQUFBQSxlQUFRLEVBQUM7SUFDN0QsTUFBTSxDQUFDVyxrQkFBa0JDLG9CQUFvQixHQUFHWixJQUFBQSxlQUFRLEVBQWtCO0lBQzFFLE1BQU0sQ0FBQ2Esa0JBQWtCQyxvQkFBb0IsR0FBR2QsSUFBQUEsZUFBUSxFQUFrQjtJQUUxRSwrQ0FBK0M7SUFDL0MsTUFBTWUsaUJBQWlC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