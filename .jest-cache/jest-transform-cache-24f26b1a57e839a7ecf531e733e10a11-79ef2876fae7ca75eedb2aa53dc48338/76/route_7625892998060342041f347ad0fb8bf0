b8655562291c027e88de9b291bad021d
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get GET () {
        return GET;
    },
    get PUT () {
        return PUT;
    }
});
const _ssr = require("@supabase/ssr");
const _headers = require("next/headers");
const _server = require("next/server");
const _settingsService = require("../../../../services/settingsService");
const _settingsSchemas = require("../../../../schemas/settingsSchemas");
const _sanitization = require("../../../../utils/sanitization");
/**
 * Map error codes to HTTP status codes
 */ function getStatusCode(errorCode) {
    const statusMap = {
        VALIDATION_ERROR: 400,
        UNAUTHORIZED: 401,
        FORBIDDEN: 403,
        NOT_FOUND: 404,
        CONFLICT: 409,
        DATABASE_ERROR: 500,
        INTERNAL_ERROR: 500,
        UNKNOWN_ERROR: 500
    };
    return statusMap[errorCode] || 500;
}
async function GET() {
    try {
        // 1. Authenticate
        const cookieStore = await (0, _headers.cookies)();
        const supabase = (0, _ssr.createServerClient)(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY, {
            cookies: {
                getAll () {
                    return cookieStore.getAll();
                },
                setAll (cookiesToSet) {
                    cookiesToSet.forEach(({ name, value })=>{
                        cookieStore.set(name, value);
                    });
                }
            }
        });
        const { data: { session }, error: authError } = await supabase.auth.getSession();
        if (authError || !session) {
            return _server.NextResponse.json({
                success: false,
                error: {
                    code: 'UNAUTHORIZED',
                    message: 'Authentication required'
                }
            }, {
                status: 401
            });
        }
        // 2. Get individual home page settings
        const [titleResult, subtitleResult, welcomeMessageResult, heroImageResult] = await Promise.all([
            (0, _settingsService.getSetting)('home_page_title'),
            (0, _settingsService.getSetting)('home_page_subtitle'),
            (0, _settingsService.getSetting)('home_page_welcome_message'),
            (0, _settingsService.getSetting)('home_page_hero_image_url')
        ]);
        // 3. Build home page config (handle NOT_FOUND gracefully)
        const homePageConfig = {
            title: titleResult.success ? titleResult.data : null,
            subtitle: subtitleResult.success ? subtitleResult.data : null,
            welcomeMessage: welcomeMessageResult.success ? welcomeMessageResult.data : null,
            heroImageUrl: heroImageResult.success ? heroImageResult.data : null
        };
        return _server.NextResponse.json({
            success: true,
            data: homePageConfig
        });
    } catch (error) {
        return _server.NextResponse.json({
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        }, {
            status: 500
        });
    }
}
async function PUT(request) {
    try {
        // 1. AUTHENTICATION
        const cookieStore = await (0, _headers.cookies)();
        const supabase = (0, _ssr.createServerClient)(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY, {
            cookies: {
                getAll () {
                    return cookieStore.getAll();
                },
                setAll (cookiesToSet) {
                    cookiesToSet.forEach(({ name, value })=>{
                        cookieStore.set(name, value);
                    });
                }
            }
        });
        const { data: { session }, error: authError } = await supabase.auth.getSession();
        if (authError || !session) {
            return _server.NextResponse.json({
                success: false,
                error: {
                    code: 'UNAUTHORIZED',
                    message: 'Authentication required'
                }
            }, {
                status: 401
            });
        }
        // 2. VALIDATION
        const body = await request.json();
        const validation = _settingsSchemas.homePageConfigSchema.safeParse(body);
        if (!validation.success) {
            return _server.NextResponse.json({
                success: false,
                error: {
                    code: 'VALIDATION_ERROR',
                    message: 'Invalid home page configuration',
                    details: validation.error.issues
                }
            }, {
                status: 400
            });
        }
        // Sanitize rich text content
        const sanitizedConfig = {
            ...validation.data,
            welcomeMessage: validation.data.welcomeMessage ? (0, _sanitization.sanitizeRichText)(validation.data.welcomeMessage) : validation.data.welcomeMessage
        };
        // 3. SERVICE CALL - Use upsert pattern
        const result = await (0, _settingsService.upsertHomePageConfig)(sanitizedConfig);
        // 4. RESPONSE
        if (!result.success) {
            return _server.NextResponse.json(result, {
                status: getStatusCode(result.error.code)
            });
        }
        return _server.NextResponse.json(result, {
            status: 200
        });
    } catch (error) {
        console.error('Home page API error:', {
            path: request.url,
            method: request.method,
            error
        });
        return _server.NextResponse.json({
            success: false,
            error: {
                code: 'INTERNAL_ERROR',
                message: 'An unexpected error occurred'
            }
        }, {
            status: 500
        });
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FwaS9hZG1pbi9ob21lLXBhZ2Uvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlU2VydmVyQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3Nzcic7XG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJztcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGdldFNldHRpbmcsIHVwc2VydEhvbWVQYWdlQ29uZmlnIH0gZnJvbSAnQC9zZXJ2aWNlcy9zZXR0aW5nc1NlcnZpY2UnO1xuaW1wb3J0IHsgaG9tZVBhZ2VDb25maWdTY2hlbWEgfSBmcm9tICdAL3NjaGVtYXMvc2V0dGluZ3NTY2hlbWFzJztcbmltcG9ydCB7IHNhbml0aXplUmljaFRleHQgfSBmcm9tICdAL3V0aWxzL3Nhbml0aXphdGlvbic7XG5cbi8qKlxuICogTWFwIGVycm9yIGNvZGVzIHRvIEhUVFAgc3RhdHVzIGNvZGVzXG4gKi9cbmZ1bmN0aW9uIGdldFN0YXR1c0NvZGUoZXJyb3JDb2RlOiBzdHJpbmcpOiBudW1iZXIge1xuICBjb25zdCBzdGF0dXNNYXA6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7XG4gICAgVkFMSURBVElPTl9FUlJPUjogNDAwLFxuICAgIFVOQVVUSE9SSVpFRDogNDAxLFxuICAgIEZPUkJJRERFTjogNDAzLFxuICAgIE5PVF9GT1VORDogNDA0LFxuICAgIENPTkZMSUNUOiA0MDksXG4gICAgREFUQUJBU0VfRVJST1I6IDUwMCxcbiAgICBJTlRFUk5BTF9FUlJPUjogNTAwLFxuICAgIFVOS05PV05fRVJST1I6IDUwMCxcbiAgfTtcbiAgcmV0dXJuIHN0YXR1c01hcFtlcnJvckNvZGVdIHx8IDUwMDtcbn1cblxuLyoqXG4gKiBHRVQgL2FwaS9hZG1pbi9ob21lLXBhZ2VcbiAqIEdldCBob21lIHBhZ2UgY29uZmlndXJhdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xuICB0cnkge1xuICAgIC8vIDEuIEF1dGhlbnRpY2F0ZVxuICAgIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpO1xuICAgIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlU2VydmVyQ2xpZW50KFxuICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMISxcbiAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZISxcbiAgICAgIHtcbiAgICAgICAgY29va2llczoge1xuICAgICAgICAgIGdldEFsbCgpIHtcbiAgICAgICAgICAgIHJldHVybiBjb29raWVTdG9yZS5nZXRBbGwoKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldEFsbChjb29raWVzVG9TZXQpIHtcbiAgICAgICAgICAgIGNvb2tpZXNUb1NldC5mb3JFYWNoKCh7IG5hbWUsIHZhbHVlIH0pID0+IHtcbiAgICAgICAgICAgICAgY29va2llU3RvcmUuc2V0KG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zdCB7IGRhdGE6IHsgc2Vzc2lvbiB9LCBlcnJvcjogYXV0aEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFNlc3Npb24oKTtcbiAgICBcbiAgICBpZiAoYXV0aEVycm9yIHx8ICFzZXNzaW9uKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiB7IGNvZGU6ICdVTkFVVEhPUklaRUQnLCBtZXNzYWdlOiAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnIH0gfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICAvLyAyLiBHZXQgaW5kaXZpZHVhbCBob21lIHBhZ2Ugc2V0dGluZ3NcbiAgICBjb25zdCBbdGl0bGVSZXN1bHQsIHN1YnRpdGxlUmVzdWx0LCB3ZWxjb21lTWVzc2FnZVJlc3VsdCwgaGVyb0ltYWdlUmVzdWx0XSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIGdldFNldHRpbmcoJ2hvbWVfcGFnZV90aXRsZScpLFxuICAgICAgZ2V0U2V0dGluZygnaG9tZV9wYWdlX3N1YnRpdGxlJyksXG4gICAgICBnZXRTZXR0aW5nKCdob21lX3BhZ2Vfd2VsY29tZV9tZXNzYWdlJyksXG4gICAgICBnZXRTZXR0aW5nKCdob21lX3BhZ2VfaGVyb19pbWFnZV91cmwnKSxcbiAgICBdKTtcbiAgICBcbiAgICAvLyAzLiBCdWlsZCBob21lIHBhZ2UgY29uZmlnIChoYW5kbGUgTk9UX0ZPVU5EIGdyYWNlZnVsbHkpXG4gICAgY29uc3QgaG9tZVBhZ2VDb25maWcgPSB7XG4gICAgICB0aXRsZTogdGl0bGVSZXN1bHQuc3VjY2VzcyA/IHRpdGxlUmVzdWx0LmRhdGEgOiBudWxsLFxuICAgICAgc3VidGl0bGU6IHN1YnRpdGxlUmVzdWx0LnN1Y2Nlc3MgPyBzdWJ0aXRsZVJlc3VsdC5kYXRhIDogbnVsbCxcbiAgICAgIHdlbGNvbWVNZXNzYWdlOiB3ZWxjb21lTWVzc2FnZVJlc3VsdC5zdWNjZXNzID8gd2VsY29tZU1lc3NhZ2VSZXN1bHQuZGF0YSA6IG51bGwsXG4gICAgICBoZXJvSW1hZ2VVcmw6IGhlcm9JbWFnZVJlc3VsdC5zdWNjZXNzID8gaGVyb0ltYWdlUmVzdWx0LmRhdGEgOiBudWxsLFxuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogaG9tZVBhZ2VDb25maWcgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgICBlcnJvcjogeyBcbiAgICAgICAgICBjb2RlOiAnVU5LTk9XTl9FUlJPUicsIFxuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InIFxuICAgICAgICB9IFxuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBQVVQgL2FwaS9hZG1pbi9ob21lLXBhZ2VcbiAqIFVwZGF0ZSBob21lIHBhZ2UgY29uZmlndXJhdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUFVUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyAxLiBBVVRIRU5USUNBVElPTlxuICAgIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpO1xuICAgIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlU2VydmVyQ2xpZW50KFxuICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMISxcbiAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZISxcbiAgICAgIHtcbiAgICAgICAgY29va2llczoge1xuICAgICAgICAgIGdldEFsbCgpIHtcbiAgICAgICAgICAgIHJldHVybiBjb29raWVTdG9yZS5nZXRBbGwoKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldEFsbChjb29raWVzVG9TZXQpIHtcbiAgICAgICAgICAgIGNvb2tpZXNUb1NldC5mb3JFYWNoKCh7IG5hbWUsIHZhbHVlIH0pID0+IHtcbiAgICAgICAgICAgICAgY29va2llU3RvcmUuc2V0KG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zdCB7IGRhdGE6IHsgc2Vzc2lvbiB9LCBlcnJvcjogYXV0aEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFNlc3Npb24oKTtcbiAgICBcbiAgICBpZiAoYXV0aEVycm9yIHx8ICFzZXNzaW9uKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiB7IGNvZGU6ICdVTkFVVEhPUklaRUQnLCBtZXNzYWdlOiAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnIH0gfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICAvLyAyLiBWQUxJREFUSU9OXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnN0IHZhbGlkYXRpb24gPSBob21lUGFnZUNvbmZpZ1NjaGVtYS5zYWZlUGFyc2UoYm9keSk7XG4gICAgXG4gICAgaWYgKCF2YWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgICAgZXJyb3I6IHsgXG4gICAgICAgICAgICBjb2RlOiAnVkFMSURBVElPTl9FUlJPUicsIFxuICAgICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgaG9tZSBwYWdlIGNvbmZpZ3VyYXRpb24nLCBcbiAgICAgICAgICAgIGRldGFpbHM6IHZhbGlkYXRpb24uZXJyb3IuaXNzdWVzIFxuICAgICAgICAgIH0gXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG4gICAgXG4gICAgLy8gU2FuaXRpemUgcmljaCB0ZXh0IGNvbnRlbnRcbiAgICBjb25zdCBzYW5pdGl6ZWRDb25maWcgPSB7XG4gICAgICAuLi52YWxpZGF0aW9uLmRhdGEsXG4gICAgICB3ZWxjb21lTWVzc2FnZTogdmFsaWRhdGlvbi5kYXRhLndlbGNvbWVNZXNzYWdlIFxuICAgICAgICA/IHNhbml0aXplUmljaFRleHQodmFsaWRhdGlvbi5kYXRhLndlbGNvbWVNZXNzYWdlKSBcbiAgICAgICAgOiB2YWxpZGF0aW9uLmRhdGEud2VsY29tZU1lc3NhZ2UsXG4gICAgfTtcbiAgICBcbiAgICAvLyAzLiBTRVJWSUNFIENBTEwgLSBVc2UgdXBzZXJ0IHBhdHRlcm5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cHNlcnRIb21lUGFnZUNvbmZpZyhzYW5pdGl6ZWRDb25maWcpO1xuICAgIFxuICAgIC8vIDQuIFJFU1BPTlNFXG4gICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3VsdCwgeyBzdGF0dXM6IGdldFN0YXR1c0NvZGUocmVzdWx0LmVycm9yLmNvZGUpIH0pO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzdWx0LCB7IHN0YXR1czogMjAwIH0pO1xuICAgIFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0hvbWUgcGFnZSBBUEkgZXJyb3I6JywgeyBwYXRoOiByZXF1ZXN0LnVybCwgbWV0aG9kOiByZXF1ZXN0Lm1ldGhvZCwgZXJyb3IgfSk7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgICBlcnJvcjogeyBcbiAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfRVJST1InLCBcbiAgICAgICAgICBtZXNzYWdlOiAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCcgXG4gICAgICAgIH0gXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkdFVCIsIlBVVCIsImdldFN0YXR1c0NvZGUiLCJlcnJvckNvZGUiLCJzdGF0dXNNYXAiLCJWQUxJREFUSU9OX0VSUk9SIiwiVU5BVVRIT1JJWkVEIiwiRk9SQklEREVOIiwiTk9UX0ZPVU5EIiwiQ09ORkxJQ1QiLCJEQVRBQkFTRV9FUlJPUiIsIklOVEVSTkFMX0VSUk9SIiwiVU5LTk9XTl9FUlJPUiIsImNvb2tpZVN0b3JlIiwiY29va2llcyIsInN1cGFiYXNlIiwiY3JlYXRlU2VydmVyQ2xpZW50IiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiZ2V0QWxsIiwic2V0QWxsIiwiY29va2llc1RvU2V0IiwiZm9yRWFjaCIsIm5hbWUiLCJ2YWx1ZSIsInNldCIsImRhdGEiLCJzZXNzaW9uIiwiZXJyb3IiLCJhdXRoRXJyb3IiLCJhdXRoIiwiZ2V0U2Vzc2lvbiIsIk5leHRSZXNwb25zZSIsImpzb24iLCJzdWNjZXNzIiwiY29kZSIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJ0aXRsZVJlc3VsdCIsInN1YnRpdGxlUmVzdWx0Iiwid2VsY29tZU1lc3NhZ2VSZXN1bHQiLCJoZXJvSW1hZ2VSZXN1bHQiLCJQcm9taXNlIiwiYWxsIiwiZ2V0U2V0dGluZyIsImhvbWVQYWdlQ29uZmlnIiwidGl0bGUiLCJzdWJ0aXRsZSIsIndlbGNvbWVNZXNzYWdlIiwiaGVyb0ltYWdlVXJsIiwiRXJyb3IiLCJyZXF1ZXN0IiwiYm9keSIsInZhbGlkYXRpb24iLCJob21lUGFnZUNvbmZpZ1NjaGVtYSIsInNhZmVQYXJzZSIsImRldGFpbHMiLCJpc3N1ZXMiLCJzYW5pdGl6ZWRDb25maWciLCJzYW5pdGl6ZVJpY2hUZXh0IiwicmVzdWx0IiwidXBzZXJ0SG9tZVBhZ2VDb25maWciLCJjb25zb2xlIiwicGF0aCIsInVybCIsIm1ldGhvZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7UUE0QnNCQTtlQUFBQTs7UUFnRUFDO2VBQUFBOzs7cUJBNUZhO3lCQUNYO3dCQUNLO2lDQUNvQjtpQ0FDWjs4QkFDSjtBQUVqQzs7Q0FFQyxHQUNELFNBQVNDLGNBQWNDLFNBQWlCO0lBQ3RDLE1BQU1DLFlBQW9DO1FBQ3hDQyxrQkFBa0I7UUFDbEJDLGNBQWM7UUFDZEMsV0FBVztRQUNYQyxXQUFXO1FBQ1hDLFVB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