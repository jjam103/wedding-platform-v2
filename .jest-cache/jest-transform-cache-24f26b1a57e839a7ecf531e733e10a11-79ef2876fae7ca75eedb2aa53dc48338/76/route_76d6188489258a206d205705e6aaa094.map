{"version":3,"names":["GET","cov_epf3kcuqf","f","s","POST","request","_apiHelpers","withAuth","searchParams","URL","url","filters","parseFilters","status","b","errorResponse","result","_contentPagesService","listContentPages","undefined","success","error","code","message","details","successResponse","data","console","body","json","validation","validateBody","_cmsSchemas","createContentPageSchema","createContentPage","statusCode"],"sources":["/Users/jaron/Desktop/wedding-platform-v2/app/api/admin/content-pages/route.ts"],"sourcesContent":["import { NextRequest } from 'next/server';\nimport {\n  withAuth,\n  successResponse,\n  errorResponse,\n  validateBody,\n  parsePagination,\n  getPaginationRange,\n  parseFilters,\n} from '@/lib/apiHelpers';\nimport {\n  createContentPage,\n  listContentPages,\n} from '@/services/contentPagesService';\nimport { createContentPageSchema } from '@/schemas/cmsSchemas';\n\n/**\n * GET /api/admin/content-pages\n * \n * List all content pages with optional filtering by status\n */\nexport async function GET(request: NextRequest) {\n  return withAuth(async () => {\n    try {\n      const { searchParams } = new URL(request.url);\n\n      // Parse filters\n      const filters = parseFilters(searchParams, ['status']);\n      \n      // Validate status filter if provided\n      const status = filters.status as 'draft' | 'published' | undefined;\n      if (status && status !== 'draft' && status !== 'published') {\n        return errorResponse(\n          'VALIDATION_ERROR',\n          'Invalid status filter. Must be \"draft\" or \"published\"',\n          400\n        );\n      }\n\n      // Call service\n      const result = await listContentPages(status ? { status } : undefined);\n\n      if (!result.success) {\n        return errorResponse(\n          result.error.code,\n          result.error.message,\n          500,\n          result.error.details\n        );\n      }\n\n      return successResponse(result.data);\n    } catch (error) {\n      console.error('GET /api/admin/content-pages error:', error);\n      return errorResponse('INTERNAL_ERROR', 'Failed to fetch content pages', 500);\n    }\n  });\n}\n\n/**\n * POST /api/admin/content-pages\n * \n * Create a new content page\n */\nexport async function POST(request: NextRequest) {\n  return withAuth(async () => {\n    try {\n      const body = await request.json();\n\n      // Validate request body\n      const validation = validateBody(body, createContentPageSchema);\n      if (!validation.success) {\n        return errorResponse(\n          validation.error.code,\n          validation.error.message,\n          400,\n          validation.error.details\n        );\n      }\n\n      // Call service\n      const result = await createContentPage(validation.data);\n\n      if (!result.success) {\n        // Map error codes to appropriate HTTP status codes\n        const statusCode = result.error.code === 'VALIDATION_ERROR' ? 400 : 500;\n        return errorResponse(\n          result.error.code,\n          result.error.message,\n          statusCode,\n          result.error.details\n        );\n      }\n\n      return successResponse(result.data, 201);\n    } catch (error) {\n      console.error('POST /api/admin/content-pages error:', error);\n      return errorResponse('INTERNAL_ERROR', 'Failed to create content page', 500);\n    }\n  });\n}\n"],"mappings":"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","ignoreList":[]}