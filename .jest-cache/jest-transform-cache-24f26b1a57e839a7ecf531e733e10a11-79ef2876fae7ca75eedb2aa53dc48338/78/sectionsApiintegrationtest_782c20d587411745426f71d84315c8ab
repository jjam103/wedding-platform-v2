f767d44a288781e40883847626c1c43d
/**
 * Integration Test: Sections API
 * 
 * Tests section CRUD operations, reordering, reference validation,
 * and circular reference detection via API route handlers.
 * 
 * Validates: Requirements 15.1-15.7
 * 
 * Test Coverage:
 * - POST /api/admin/sections - Create section
 * - GET /api/admin/sections/by-page/:pageType/:pageId - List sections
 * - PUT /api/admin/sections/:id - Update section
 * - DELETE /api/admin/sections/:id - Delete section
 * - POST /api/admin/sections/reorder - Reorder sections
 * - POST /api/admin/sections/validate-refs - Validate references
 * - POST /api/admin/sections/check-circular - Check circular references
 * - Authentication checks (401 responses)
 * - Validation errors (400 responses)
 * - Not found errors (404 responses)
 * - Server errors (500 responses)
 */ // Polyfill Web APIs for Next.js server components
"use strict";
// Mock the sections service BEFORE importing route handlers
jest.mock('@/services/sectionsService', ()=>({
        createSection: jest.fn(),
        listSections: jest.fn(),
        updateSection: jest.fn(),
        deleteSection: jest.fn(),
        reorderSections: jest.fn(),
        validateReferences: jest.fn(),
        detectCircularReferences: jest.fn()
    }));
// Mock Next.js server module
jest.mock('next/server', ()=>({
        NextResponse: {
            json: (data, init)=>({
                    json: async ()=>data,
                    status: init?.status || 200
                })
        },
        NextRequest: jest.fn()
    }));
// Mock Next.js headers and cookies
jest.mock('next/headers', ()=>({
        cookies: jest.fn(()=>({
                get: jest.fn(),
                getAll: jest.fn(()=>[]),
                set: jest.fn(),
                delete: jest.fn()
            }))
    }));
jest.mock('@supabase/ssr', ()=>({
        createServerClient: jest.fn(()=>mockSupabaseClient)
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _util = require("util");
const _route = require("../../app/api/admin/sections/route");
const _route1 = require("../../app/api/admin/sections/by-page/[pageType]/[pageId]/route");
const _route2 = require("../../app/api/admin/sections/[id]/route");
const _route3 = require("../../app/api/admin/sections/reorder/route");
const _route4 = require("../../app/api/admin/sections/validate-refs/route");
const _route5 = require("../../app/api/admin/sections/check-circular/route");
const _sectionsService = /*#__PURE__*/ _interop_require_wildcard(require("../../services/sectionsService"));
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
global.TextEncoder = _util.TextEncoder;
global.TextDecoder = _util.TextDecoder;
// Mock Supabase SSR client
const mockGetUser = jest.fn();
const mockSupabaseClient = {
    auth: {
        getUser: mockGetUser,
        getSession: jest.fn()
    },
    from: jest.fn()
};
describe('Integration Test: Sections API', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        // Default: authenticated user
        mockGetUser.mockResolvedValue({
            data: {
                user: {
                    id: 'user-123',
                    email: 'test@example.com'
                }
            },
            error: null
        });
    });
    describe('POST /api/admin/sections - Create Section', ()=>{
        it('should create section with valid data when authenticated', async ()=>{
            const mockSection = {
                id: 'section-1',
                page_type: 'activity',
                page_id: 'page-1',
                display_order: 0,
                columns: [
                    {
                        id: 'col-1',
                        section_id: 'section-1',
                        column_number: 1,
                        content_type: 'rich_text',
                        content_data: {
                            html: '<p>Content</p>'
                        }
                    }
                ]
            };
            _sectionsService.createSection.mockResolvedValue({
                success: true,
                data: mockSection
            });
            const request = {
                json: async ()=>({
                        page_type: 'activity',
                        page_id: 'page-1',
                        display_order: 0,
                        columns: [
                            {
                                column_number: 1,
                                content_type: 'rich_text',
                                content_data: {
                                    html: '<p>Content</p>'
                                }
                            }
                        ]
                    }),
                url: 'http://localhost:3000/api/admin/sections'
            };
            const response = await (0, _route.POST)(request);
            const data = await response.json();
            expect(response.status).toBe(201);
            expect(data.success).toBe(true);
            expect(data.data.id).toBe('section-1');
            expect(data.data.page_type).toBe('activity');
            expect(_sectionsService.createSection).toHaveBeenCalled();
        });
        it('should return 401 when not authenticated', async ()=>{
            mockGetUser.mockResolvedValue({
                data: {
                    user: null
                },
                error: {
                    message: 'Not authenticated'
                }
            });
            const request = {
                json: async ()=>({
                        page_type: 'activity',
                        page_id: 'page-1',
                        display_order: 0,
                        columns: []
                    }),
                url: 'http://localhost:3000/api/admin/sections'
            };
            const response = await (0, _route.POST)(request);
            const data = await response.json();
            expect(response.status).toBe(401);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('UNAUTHORIZED');
        });
        it('should return 400 for invalid page_type', async ()=>{
            const request = {
                json: async ()=>({
                        page_type: 'invalid_type',
                        page_id: 'page-1',
                        display_order: 0,
                        columns: []
                    }),
                url: 'http://localhost:3000/api/admin/sections'
            };
            const response = await (0, _route.POST)(request);
            const data = await response.json();
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
        });
        it('should return 500 for database errors', async ()=>{
            _sectionsService.createSection.mockResolvedValue({
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: 'Database error'
                }
            });
            const request = {
                json: async ()=>({
                        page_type: 'activity',
                        page_id: '123e4567-e89b-12d3-a456-426614174000',
                        display_order: 0,
                        columns: [
                            {
                                column_number: 1,
                                content_type: 'rich_text',
                                content_data: {
                                    html: '<p>Test content</p>'
                                }
                            }
                        ]
                    }),
                url: 'http://localhost:3000/api/admin/sections'
            };
            const response = await (0, _route.POST)(request);
            const data = await response.json();
            expect(response.status).toBe(500);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('DATABASE_ERROR');
        });
    });
    describe('GET /api/admin/sections/by-page/:pageType/:pageId - List Sections', ()=>{
        it('should list sections for a page when authenticated', async ()=>{
            const mockSections = [
                {
                    id: 'section-1',
                    page_type: 'activity',
                    page_id: 'page-1',
                    display_order: 0,
                    columns: []
                },
                {
                    id: 'section-2',
                    page_type: 'activity',
                    page_id: 'page-1',
                    display_order: 1,
                    columns: []
                }
            ];
            _sectionsService.listSections.mockResolvedValue({
                success: true,
                data: mockSections
            });
            const request = {
                url: 'http://localhost:3000/api/admin/sections/by-page/activity/page-1'
            };
            const response = await (0, _route1.GET)(request, {
                params: Promise.resolve({
                    pageType: 'activity',
                    pageId: 'page-1'
                })
            });
            const data = await response.json();
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(data.data).toHaveLength(2);
            expect(data.data[0].display_order).toBe(0);
            expect(data.data[1].display_order).toBe(1);
            expect(_sectionsService.listSections).toHaveBeenCalledWith('activity', 'page-1');
        });
        it('should return empty array when no sections exist', async ()=>{
            _sectionsService.listSections.mockResolvedValue({
                success: true,
                data: []
            });
            const request = {
                url: 'http://localhost:3000/api/admin/sections/by-page/activity/page-1'
            };
            const response = await (0, _route1.GET)(request, {
                params: Promise.resolve({
                    pageType: 'activity',
                    pageId: 'page-1'
                })
            });
            const data = await response.json();
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(data.data).toHaveLength(0);
        });
        it('should return 401 when not authenticated', async ()=>{
            mockGetUser.mockResolvedValue({
                data: {
                    user: null
                },
                error: {
                    message: 'Not authenticated'
                }
            });
            const request = {
                url: 'http://localhost:3000/api/admin/sections/by-page/activity/page-1'
            };
            const response = await (0, _route1.GET)(request, {
                params: Promise.resolve({
                    pageType: 'activity',
                    pageId: 'page-1'
                })
            });
            const data = await response.json();
            expect(response.status).toBe(401);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('UNAUTHORIZED');
        });
        it('should return 500 for database errors', async ()=>{
            _sectionsService.listSections.mockResolvedValue({
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: 'Database error'
                }
            });
            const request = {
                url: 'http://localhost:3000/api/admin/sections/by-page/activity/page-1'
            };
            const response = await (0, _route1.GET)(request, {
                params: Promise.resolve({
                    pageType: 'activity',
                    pageId: 'page-1'
                })
            });
            const data = await response.json();
            expect(response.status).toBe(500);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('DATABASE_ERROR');
        });
    });
    describe('PUT /api/admin/sections/:id - Update Section', ()=>{
        it('should update section with valid data when authenticated', async ()=>{
            const mockSection = {
                id: 'section-1',
                page_type: 'activity',
                page_id: 'page-1',
                display_order: 1,
                columns: [
                    {
                        id: 'col-1',
                        section_id: 'section-1',
                        column_number: 1,
                        content_type: 'rich_text',
                        content_data: {
                            html: '<p>Updated content</p>'
                        }
                    }
                ]
            };
            _sectionsService.updateSection.mockResolvedValue({
                success: true,
                data: mockSection
            });
            const request = {
                json: async ()=>({
                        display_order: 1,
                        columns: [
                            {
                                column_number: 1,
                                content_type: 'rich_text',
                                content_data: {
                                    html: '<p>Updated content</p>'
                                }
                            }
                        ]
                    }),
                url: 'http://localhost:3000/api/admin/sections/section-1'
            };
            const response = await (0, _route2.PUT)(request, {
                params: Promise.resolve({
                    id: 'section-1'
                })
            });
            const data = await response.json();
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(data.data.display_order).toBe(1);
            expect(_sectionsService.updateSection).toHaveBeenCalledWith('section-1', expect.any(Object));
        });
        it('should return 401 when not authenticated', async ()=>{
            mockGetUser.mockResolvedValue({
                data: {
                    user: null
                },
                error: {
                    message: 'Not authenticated'
                }
            });
            const request = {
                json: async ()=>({
                        display_order: 1
                    }),
                url: 'http://localhost:3000/api/admin/sections/section-1'
            };
            const response = await (0, _route2.PUT)(request, {
                params: Promise.resolve({
                    id: 'section-1'
                })
            });
            const data = await response.json();
            expect(response.status).toBe(401);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('UNAUTHORIZED');
        });
        it('should return 400 for invalid data', async ()=>{
            const request = {
                json: async ()=>({
                        display_order: 'invalid'
                    }),
                url: 'http://localhost:3000/api/admin/sections/section-1'
            };
            const response = await (0, _route2.PUT)(request, {
                params: Promise.resolve({
                    id: 'section-1'
                })
            });
            const data = await response.json();
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
        });
        it('should return 404 when section not found', async ()=>{
            _sectionsService.updateSection.mockResolvedValue({
                success: false,
                error: {
                    code: 'NOT_FOUND',
                    message: 'Section not found'
                }
            });
            const request = {
                json: async ()=>({
                        display_order: 1
                    }),
                url: 'http://localhost:3000/api/admin/sections/nonexistent'
            };
            const response = await (0, _route2.PUT)(request, {
                params: Promise.resolve({
                    id: 'nonexistent'
                })
            });
            const data = await response.json();
            expect(response.status).toBe(404);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('NOT_FOUND');
        });
        it('should return 500 for database errors', async ()=>{
            _sectionsService.updateSection.mockResolvedValue({
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: 'Database error'
                }
            });
            const request = {
                json: async ()=>({
                        display_order: 1
                    }),
                url: 'http://localhost:3000/api/admin/sections/section-1'
            };
            const response = await (0, _route2.PUT)(request, {
                params: Promise.resolve({
                    id: 'section-1'
                })
            });
            const data = await response.json();
            expect(response.status).toBe(500);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('DATABASE_ERROR');
        });
    });
    describe('DELETE /api/admin/sections/:id - Delete Section', ()=>{
        it('should delete section when authenticated', async ()=>{
            _sectionsService.deleteSection.mockResolvedValue({
                success: true,
                data: {
                    message: 'Section deleted successfully'
                }
            });
            const request = {
                url: 'http://localhost:3000/api/admin/sections/section-1'
            };
            const response = await (0, _route2.DELETE)(request, {
                params: Promise.resolve({
                    id: 'section-1'
                })
            });
            const data = await response.json();
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(_sectionsService.deleteSection).toHaveBeenCalledWith('section-1');
        });
        it('should return 401 when not authenticated', async ()=>{
            mockGetUser.mockResolvedValue({
                data: {
                    user: null
                },
                error: {
                    message: 'Not authenticated'
                }
            });
            const request = {
                url: 'http://localhost:3000/api/admin/sections/section-1'
            };
            const response = await (0, _route2.DELETE)(request, {
                params: Promise.resolve({
                    id: 'section-1'
                })
            });
            const data = await response.json();
            expect(response.status).toBe(401);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('UNAUTHORIZED');
        });
        it('should return 500 for database errors', async ()=>{
            _sectionsService.deleteSection.mockResolvedValue({
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: 'Database error'
                }
            });
            const request = {
                url: 'http://localhost:3000/api/admin/sections/section-1'
            };
            const response = await (0, _route2.DELETE)(request, {
                params: Promise.resolve({
                    id: 'section-1'
                })
            });
            const data = await response.json();
            expect(response.status).toBe(500);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('DATABASE_ERROR');
        });
    });
    describe('POST /api/admin/sections/reorder - Reorder Sections', ()=>{
        it('should reorder sections with valid data when authenticated', async ()=>{
            _sectionsService.reorderSections.mockResolvedValue({
                success: true,
                data: {
                    message: 'Sections reordered successfully'
                }
            });
            const request = {
                json: async ()=>({
                        pageId: '123e4567-e89b-12d3-a456-426614174000',
                        sectionIds: [
                            '123e4567-e89b-12d3-a456-426614174001',
                            '123e4567-e89b-12d3-a456-426614174002',
                            '123e4567-e89b-12d3-a456-426614174003'
                        ]
                    }),
                url: 'http://localhost:3000/api/admin/sections/reorder'
            };
            const response = await (0, _route3.POST)(request);
            const data = await response.json();
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(_sectionsService.reorderSections).toHaveBeenCalledWith('123e4567-e89b-12d3-a456-426614174000', [
                '123e4567-e89b-12d3-a456-426614174001',
                '123e4567-e89b-12d3-a456-426614174002',
                '123e4567-e89b-12d3-a456-426614174003'
            ]);
        });
        it('should return 401 when not authenticated', async ()=>{
            mockGetUser.mockResolvedValue({
                data: {
                    user: null
                },
                error: {
                    message: 'Not authenticated'
                }
            });
            const request = {
                json: async ()=>({
                        pageId: 'page-1',
                        sectionIds: [
                            'section-1'
                        ]
                    }),
                url: 'http://localhost:3000/api/admin/sections/reorder'
            };
            const response = await (0, _route3.POST)(request);
            const data = await response.json();
            expect(response.status).toBe(401);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('UNAUTHORIZED');
        });
        it('should return 400 for empty section list', async ()=>{
            const request = {
                json: async ()=>({
                        pageId: '123e4567-e89b-12d3-a456-426614174000',
                        sectionIds: []
                    }),
                url: 'http://localhost:3000/api/admin/sections/reorder'
            };
            const response = await (0, _route3.POST)(request);
            const data = await response.json();
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
        });
        it('should return 500 for database errors', async ()=>{
            _sectionsService.reorderSections.mockResolvedValue({
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: 'Database error'
                }
            });
            const request = {
                json: async ()=>({
                        pageId: '123e4567-e89b-12d3-a456-426614174000',
                        sectionIds: [
                            '123e4567-e89b-12d3-a456-426614174001'
                        ]
                    }),
                url: 'http://localhost:3000/api/admin/sections/reorder'
            };
            const response = await (0, _route3.POST)(request);
            const data = await response.json();
            expect(response.status).toBe(500);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('DATABASE_ERROR');
        });
    });
    describe('POST /api/admin/sections/validate-refs - Validate References', ()=>{
        it('should validate references successfully with no broken refs', async ()=>{
            _sectionsService.validateReferences.mockResolvedValue({
                success: true,
                data: {
                    valid: true,
                    brokenReferences: []
                }
            });
            const request = {
                json: async ()=>({
                        references: [
                            {
                                id: '123e4567-e89b-12d3-a456-426614174000',
                                type: 'activity',
                                name: 'Beach Day'
                            },
                            {
                                id: '123e4567-e89b-12d3-a456-426614174001',
                                type: 'event',
                                name: 'Ceremony'
                            }
                        ]
                    }),
                url: 'http://localhost:3000/api/admin/sections/validate-refs'
            };
            const response = await (0, _route4.POST)(request);
            const data = await response.json();
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(data.data.valid).toBe(true);
            expect(data.data.brokenReferences).toHaveLength(0);
        });
        it('should detect broken references', async ()=>{
            _sectionsService.validateReferences.mockResolvedValue({
                success: true,
                data: {
                    valid: false,
                    brokenReferences: [
                        {
                            id: '123e4567-e89b-12d3-a456-426614174999',
                            type: 'activity'
                        }
                    ]
                }
            });
            const request = {
                json: async ()=>({
                        references: [
                            {
                                id: '123e4567-e89b-12d3-a456-426614174000',
                                type: 'activity'
                            },
                            {
                                id: '123e4567-e89b-12d3-a456-426614174999',
                                type: 'activity'
                            }
                        ]
                    }),
                url: 'http://localhost:3000/api/admin/sections/validate-refs'
            };
            const response = await (0, _route4.POST)(request);
            const data = await response.json();
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(data.data.valid).toBe(false);
            expect(data.data.brokenReferences).toHaveLength(1);
            expect(data.data.brokenReferences[0].id).toBe('123e4567-e89b-12d3-a456-426614174999');
        });
        it('should return 401 when not authenticated', async ()=>{
            mockGetUser.mockResolvedValue({
                data: {
                    user: null
                },
                error: {
                    message: 'Not authenticated'
                }
            });
            const request = {
                json: async ()=>({
                        references: [
                            {
                                id: '123e4567-e89b-12d3-a456-426614174000',
                                type: 'activity'
                            }
                        ]
                    }),
                url: 'http://localhost:3000/api/admin/sections/validate-refs'
            };
            const response = await (0, _route4.POST)(request);
            const data = await response.json();
            expect(response.status).toBe(401);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('UNAUTHORIZED');
        });
        it('should return 400 for invalid reference type', async ()=>{
            const request = {
                json: async ()=>({
                        references: [
                            {
                                id: 'invalid-1',
                                type: 'invalid_type'
                            }
                        ]
                    }),
                url: 'http://localhost:3000/api/admin/sections/validate-refs'
            };
            const response = await (0, _route4.POST)(request);
            const data = await response.json();
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
        });
        it('should return 500 for service errors', async ()=>{
            _sectionsService.validateReferences.mockResolvedValue({
                success: false,
                error: {
                    code: 'UNKNOWN_ERROR',
                    message: 'Database connection failed'
                }
            });
            const request = {
                json: async ()=>({
                        references: [
                            {
                                id: '123e4567-e89b-12d3-a456-426614174000',
                                type: 'activity'
                            }
                        ]
                    }),
                url: 'http://localhost:3000/api/admin/sections/validate-refs'
            };
            const response = await (0, _route4.POST)(request);
            const data = await response.json();
            expect(response.status).toBe(500);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('UNKNOWN_ERROR');
        });
    });
    describe('POST /api/admin/sections/check-circular - Check Circular References', ()=>{
        it('should detect direct self-reference', async ()=>{
            _sectionsService.detectCircularReferences.mockResolvedValue({
                success: true,
                data: true
            });
            const request = {
                json: async ()=>({
                        pageId: '123e4567-e89b-12d3-a456-426614174000',
                        references: [
                            {
                                id: '123e4567-e89b-12d3-a456-426614174000',
                                type: 'activity'
                            }
                        ]
                    }),
                url: 'http://localhost:3000/api/admin/sections/check-circular'
            };
            const response = await (0, _route5.POST)(request);
            const data = await response.json();
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(data.data.hasCircularReferences).toBe(true);
        });
        it('should return false when no circular references exist', async ()=>{
            _sectionsService.detectCircularReferences.mockResolvedValue({
                success: true,
                data: false
            });
            const request = {
                json: async ()=>({
                        pageId: '123e4567-e89b-12d3-a456-426614174000',
                        references: [
                            {
                                id: '123e4567-e89b-12d3-a456-426614174001',
                                type: 'activity'
                            }
                        ]
                    }),
                url: 'http://localhost:3000/api/admin/sections/check-circular'
            };
            const response = await (0, _route5.POST)(request);
            const data = await response.json();
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(data.data.hasCircularReferences).toBe(false);
        });
        it('should return 401 when not authenticated', async ()=>{
            mockGetUser.mockResolvedValue({
                data: {
                    user: null
                },
                error: {
                    message: 'Not authenticated'
                }
            });
            const request = {
                json: async ()=>({
                        pageId: '123e4567-e89b-12d3-a456-426614174000',
                        references: [
                            {
                                id: '123e4567-e89b-12d3-a456-426614174001',
                                type: 'activity'
                            }
                        ]
                    }),
                url: 'http://localhost:3000/api/admin/sections/check-circular'
            };
            const response = await (0, _route5.POST)(request);
            const data = await response.json();
            expect(response.status).toBe(401);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('UNAUTHORIZED');
        });
        it('should return 400 for missing required fields', async ()=>{
            const request = {
                json: async ()=>({
                        references: [
                            {
                                id: '123e4567-e89b-12d3-a456-426614174001',
                                type: 'activity'
                            }
                        ]
                    }),
                url: 'http://localhost:3000/api/admin/sections/check-circular'
            };
            const response = await (0, _route5.POST)(request);
            const data = await response.json();
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
        });
        it('should return 500 for service errors', async ()=>{
            _sectionsService.detectCircularReferences.mockResolvedValue({
                success: false,
                error: {
                    code: 'UNKNOWN_ERROR',
                    message: 'Database connection failed'
                }
            });
            const request = {
                json: async ()=>({
                        pageId: '123e4567-e89b-12d3-a456-426614174000',
                        references: [
                            {
                                id: '123e4567-e89b-12d3-a456-426614174001',
                                type: 'activity'
                            }
                        ]
                    }),
                url: 'http://localhost:3000/api/admin/sections/check-circular'
            };
            const response = await (0, _route5.POST)(request);
            const data = await response.json();
            expect(response.status).toBe(500);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('UNKNOWN_ERROR');
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvX190ZXN0c19fL2ludGVncmF0aW9uL3NlY3Rpb25zQXBpLmludGVncmF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBJbnRlZ3JhdGlvbiBUZXN0OiBTZWN0aW9ucyBBUElcbiAqIFxuICogVGVzdHMgc2VjdGlvbiBDUlVEIG9wZXJhdGlvbnMsIHJlb3JkZXJpbmcsIHJlZmVyZW5jZSB2YWxpZGF0aW9uLFxuICogYW5kIGNpcmN1bGFyIHJlZmVyZW5jZSBkZXRlY3Rpb24gdmlhIEFQSSByb3V0ZSBoYW5kbGVycy5cbiAqIFxuICogVmFsaWRhdGVzOiBSZXF1aXJlbWVudHMgMTUuMS0xNS43XG4gKiBcbiAqIFRlc3QgQ292ZXJhZ2U6XG4gKiAtIFBPU1QgL2FwaS9hZG1pbi9zZWN0aW9ucyAtIENyZWF0ZSBzZWN0aW9uXG4gKiAtIEdFVCAvYXBpL2FkbWluL3NlY3Rpb25zL2J5LXBhZ2UvOnBhZ2VUeXBlLzpwYWdlSWQgLSBMaXN0IHNlY3Rpb25zXG4gKiAtIFBVVCAvYXBpL2FkbWluL3NlY3Rpb25zLzppZCAtIFVwZGF0ZSBzZWN0aW9uXG4gKiAtIERFTEVURSAvYXBpL2FkbWluL3NlY3Rpb25zLzppZCAtIERlbGV0ZSBzZWN0aW9uXG4gKiAtIFBPU1QgL2FwaS9hZG1pbi9zZWN0aW9ucy9yZW9yZGVyIC0gUmVvcmRlciBzZWN0aW9uc1xuICogLSBQT1NUIC9hcGkvYWRtaW4vc2VjdGlvbnMvdmFsaWRhdGUtcmVmcyAtIFZhbGlkYXRlIHJlZmVyZW5jZXNcbiAqIC0gUE9TVCAvYXBpL2FkbWluL3NlY3Rpb25zL2NoZWNrLWNpcmN1bGFyIC0gQ2hlY2sgY2lyY3VsYXIgcmVmZXJlbmNlc1xuICogLSBBdXRoZW50aWNhdGlvbiBjaGVja3MgKDQwMSByZXNwb25zZXMpXG4gKiAtIFZhbGlkYXRpb24gZXJyb3JzICg0MDAgcmVzcG9uc2VzKVxuICogLSBOb3QgZm91bmQgZXJyb3JzICg0MDQgcmVzcG9uc2VzKVxuICogLSBTZXJ2ZXIgZXJyb3JzICg1MDAgcmVzcG9uc2VzKVxuICovXG5cbi8vIFBvbHlmaWxsIFdlYiBBUElzIGZvciBOZXh0LmpzIHNlcnZlciBjb21wb25lbnRzXG5pbXBvcnQgeyBUZXh0RW5jb2RlciwgVGV4dERlY29kZXIgfSBmcm9tICd1dGlsJztcbmdsb2JhbC5UZXh0RW5jb2RlciA9IFRleHRFbmNvZGVyO1xuZ2xvYmFsLlRleHREZWNvZGVyID0gVGV4dERlY29kZXIgYXMgYW55O1xuXG4vLyBNb2NrIHRoZSBzZWN0aW9ucyBzZXJ2aWNlIEJFRk9SRSBpbXBvcnRpbmcgcm91dGUgaGFuZGxlcnNcbmplc3QubW9jaygnQC9zZXJ2aWNlcy9zZWN0aW9uc1NlcnZpY2UnLCAoKSA9PiAoe1xuICBjcmVhdGVTZWN0aW9uOiBqZXN0LmZuKCksXG4gIGxpc3RTZWN0aW9uczogamVzdC5mbigpLFxuICB1cGRhdGVTZWN0aW9uOiBqZXN0LmZuKCksXG4gIGRlbGV0ZVNlY3Rpb246IGplc3QuZm4oKSxcbiAgcmVvcmRlclNlY3Rpb25zOiBqZXN0LmZuKCksXG4gIHZhbGlkYXRlUmVmZXJlbmNlczogamVzdC5mbigpLFxuICBkZXRlY3RDaXJjdWxhclJlZmVyZW5jZXM6IGplc3QuZm4oKSxcbn0pKTtcblxuLy8gTW9jayBOZXh0LmpzIHNlcnZlciBtb2R1bGVcbmplc3QubW9jaygnbmV4dC9zZXJ2ZXInLCAoKSA9PiAoe1xuICBOZXh0UmVzcG9uc2U6IHtcbiAgICBqc29uOiAoZGF0YTogYW55LCBpbml0PzogYW55KSA9PiAoe1xuICAgICAganNvbjogYXN5bmMgKCkgPT4gZGF0YSxcbiAgICAgIHN0YXR1czogaW5pdD8uc3RhdHVzIHx8IDIwMCxcbiAgICB9KSxcbiAgfSxcbiAgTmV4dFJlcXVlc3Q6IGplc3QuZm4oKSxcbn0pKTtcblxuLy8gTW9jayBOZXh0LmpzIGhlYWRlcnMgYW5kIGNvb2tpZXNcbmplc3QubW9jaygnbmV4dC9oZWFkZXJzJywgKCkgPT4gKHtcbiAgY29va2llczogamVzdC5mbigoKSA9PiAoe1xuICAgIGdldDogamVzdC5mbigpLFxuICAgIGdldEFsbDogamVzdC5mbigoKSA9PiBbXSksXG4gICAgc2V0OiBqZXN0LmZuKCksXG4gICAgZGVsZXRlOiBqZXN0LmZuKCksXG4gIH0pKSxcbn0pKTtcblxuLy8gTW9jayBTdXBhYmFzZSBTU1IgY2xpZW50XG5jb25zdCBtb2NrR2V0VXNlciA9IGplc3QuZm4oKTtcbmNvbnN0IG1vY2tTdXBhYmFzZUNsaWVudCA9IHtcbiAgYXV0aDoge1xuICAgIGdldFVzZXI6IG1vY2tHZXRVc2VyLFxuICAgIGdldFNlc3Npb246IGplc3QuZm4oKSxcbiAgfSxcbiAgZnJvbTogamVzdC5mbigpLFxufTtcblxuamVzdC5tb2NrKCdAc3VwYWJhc2Uvc3NyJywgKCkgPT4gKHtcbiAgY3JlYXRlU2VydmVyQ2xpZW50OiBqZXN0LmZuKCgpID0+IG1vY2tTdXBhYmFzZUNsaWVudCksXG59KSk7XG5cbmltcG9ydCB7IFBPU1QgYXMgY3JlYXRlU2VjdGlvblJvdXRlIH0gZnJvbSAnQC9hcHAvYXBpL2FkbWluL3NlY3Rpb25zL3JvdXRlJztcbmltcG9ydCB7IEdFVCBhcyBsaXN0U2VjdGlvbnNSb3V0ZSB9IGZyb20gJ0AvYXBwL2FwaS9hZG1pbi9zZWN0aW9ucy9ieS1wYWdlL1twYWdlVHlwZV0vW3BhZ2VJZF0vcm91dGUnO1xuaW1wb3J0IHsgUFVUIGFzIHVwZGF0ZVNlY3Rpb25Sb3V0ZSwgREVMRVRFIGFzIGRlbGV0ZVNlY3Rpb25Sb3V0ZSB9IGZyb20gJ0AvYXBwL2FwaS9hZG1pbi9zZWN0aW9ucy9baWRdL3JvdXRlJztcbmltcG9ydCB7IFBPU1QgYXMgcmVvcmRlclNlY3Rpb25zUm91dGUgfSBmcm9tICdAL2FwcC9hcGkvYWRtaW4vc2VjdGlvbnMvcmVvcmRlci9yb3V0ZSc7XG5pbXBvcnQgeyBQT1NUIGFzIHZhbGlkYXRlUmVmZXJlbmNlc1JvdXRlIH0gZnJvbSAnQC9hcHAvYXBpL2FkbWluL3NlY3Rpb25zL3ZhbGlkYXRlLXJlZnMvcm91dGUnO1xuaW1wb3J0IHsgUE9TVCBhcyBjaGVja0NpcmN1bGFyUm91dGUgfSBmcm9tICdAL2FwcC9hcGkvYWRtaW4vc2VjdGlvbnMvY2hlY2stY2lyY3VsYXIvcm91dGUnO1xuaW1wb3J0ICogYXMgc2VjdGlvbnNTZXJ2aWNlIGZyb20gJ0Avc2VydmljZXMvc2VjdGlvbnNTZXJ2aWNlJztcblxuZGVzY3JpYmUoJ0ludGVncmF0aW9uIFRlc3Q6IFNlY3Rpb25zIEFQSScsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgXG4gICAgLy8gRGVmYXVsdDogYXV0aGVudGljYXRlZCB1c2VyXG4gICAgbW9ja0dldFVzZXIubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgZGF0YToge1xuICAgICAgICB1c2VyOiB7IGlkOiAndXNlci0xMjMnLCBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nIH0sXG4gICAgICB9LFxuICAgICAgZXJyb3I6IG51bGwsXG4gICAgfSBhcyBhbnkpO1xuICB9KTtcblxuICBkZXNjcmliZSgnUE9TVCAvYXBpL2FkbWluL3NlY3Rpb25zIC0gQ3JlYXRlIFNlY3Rpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgc2VjdGlvbiB3aXRoIHZhbGlkIGRhdGEgd2hlbiBhdXRoZW50aWNhdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1NlY3Rpb24gPSB7XG4gICAgICAgIGlkOiAnc2VjdGlvbi0xJyxcbiAgICAgICAgcGFnZV90eXBlOiAnYWN0aXZpdHknLFxuICAgICAgICBwYWdlX2lkOiAncGFnZS0xJyxcbiAgICAgICAgZGlzcGxheV9vcmRlcjogMCxcbiAgICAgICAgY29sdW1uczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnY29sLTEnLFxuICAgICAgICAgICAgc2VjdGlvbl9pZDogJ3NlY3Rpb24tMScsXG4gICAgICAgICAgICBjb2x1bW5fbnVtYmVyOiAxLFxuICAgICAgICAgICAgY29udGVudF90eXBlOiAncmljaF90ZXh0JyxcbiAgICAgICAgICAgIGNvbnRlbnRfZGF0YTogeyBodG1sOiAnPHA+Q29udGVudDwvcD4nIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH07XG5cbiAgICAgIChzZWN0aW9uc1NlcnZpY2UuY3JlYXRlU2VjdGlvbiBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogbW9ja1NlY3Rpb24sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IHtcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICBwYWdlX3R5cGU6ICdhY3Rpdml0eScsXG4gICAgICAgICAgcGFnZV9pZDogJ3BhZ2UtMScsXG4gICAgICAgICAgZGlzcGxheV9vcmRlcjogMCxcbiAgICAgICAgICBjb2x1bW5zOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNvbHVtbl9udW1iZXI6IDEsXG4gICAgICAgICAgICAgIGNvbnRlbnRfdHlwZTogJ3JpY2hfdGV4dCcsXG4gICAgICAgICAgICAgIGNvbnRlbnRfZGF0YTogeyBodG1sOiAnPHA+Q29udGVudDwvcD4nIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pLFxuICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3NlY3Rpb25zJyxcbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNyZWF0ZVNlY3Rpb25Sb3V0ZShyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAxKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZGF0YS5kYXRhLmlkKS50b0JlKCdzZWN0aW9uLTEnKTtcbiAgICAgIGV4cGVjdChkYXRhLmRhdGEucGFnZV90eXBlKS50b0JlKCdhY3Rpdml0eScpO1xuICAgICAgZXhwZWN0KHNlY3Rpb25zU2VydmljZS5jcmVhdGVTZWN0aW9uKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDEgd2hlbiBub3QgYXV0aGVudGljYXRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tHZXRVc2VyLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogeyB1c2VyOiBudWxsIH0sXG4gICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdOb3QgYXV0aGVudGljYXRlZCcgfSxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IHtcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICBwYWdlX3R5cGU6ICdhY3Rpdml0eScsXG4gICAgICAgICAgcGFnZV9pZDogJ3BhZ2UtMScsXG4gICAgICAgICAgZGlzcGxheV9vcmRlcjogMCxcbiAgICAgICAgICBjb2x1bW5zOiBbXSxcbiAgICAgICAgfSksXG4gICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vc2VjdGlvbnMnLFxuICAgICAgfSBhcyBhbnk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY3JlYXRlU2VjdGlvblJvdXRlKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdVTkFVVEhPUklaRUQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwMCBmb3IgaW52YWxpZCBwYWdlX3R5cGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICAgIHBhZ2VfdHlwZTogJ2ludmFsaWRfdHlwZScsXG4gICAgICAgICAgcGFnZV9pZDogJ3BhZ2UtMScsXG4gICAgICAgICAgZGlzcGxheV9vcmRlcjogMCxcbiAgICAgICAgICBjb2x1bW5zOiBbXSxcbiAgICAgICAgfSksXG4gICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vc2VjdGlvbnMnLFxuICAgICAgfSBhcyBhbnk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY3JlYXRlU2VjdGlvblJvdXRlKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA1MDAgZm9yIGRhdGFiYXNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIChzZWN0aW9uc1NlcnZpY2UuY3JlYXRlU2VjdGlvbiBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ0RBVEFCQVNFX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnRGF0YWJhc2UgZXJyb3InLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgcGFnZV90eXBlOiAnYWN0aXZpdHknLFxuICAgICAgICAgIHBhZ2VfaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLCAvLyBWYWxpZCBVVUlEXG4gICAgICAgICAgZGlzcGxheV9vcmRlcjogMCxcbiAgICAgICAgICBjb2x1bW5zOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNvbHVtbl9udW1iZXI6IDEsXG4gICAgICAgICAgICAgIGNvbnRlbnRfdHlwZTogJ3JpY2hfdGV4dCcsXG4gICAgICAgICAgICAgIGNvbnRlbnRfZGF0YTogeyBodG1sOiAnPHA+VGVzdCBjb250ZW50PC9wPicgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSwgLy8gTXVzdCBoYXZlIGF0IGxlYXN0IDEgY29sdW1uXG4gICAgICAgIH0pLFxuICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3NlY3Rpb25zJyxcbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNyZWF0ZVNlY3Rpb25Sb3V0ZShyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnREFUQUJBU0VfRVJST1InKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0dFVCAvYXBpL2FkbWluL3NlY3Rpb25zL2J5LXBhZ2UvOnBhZ2VUeXBlLzpwYWdlSWQgLSBMaXN0IFNlY3Rpb25zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbGlzdCBzZWN0aW9ucyBmb3IgYSBwYWdlIHdoZW4gYXV0aGVudGljYXRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tTZWN0aW9ucyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnc2VjdGlvbi0xJyxcbiAgICAgICAgICBwYWdlX3R5cGU6ICdhY3Rpdml0eScsXG4gICAgICAgICAgcGFnZV9pZDogJ3BhZ2UtMScsXG4gICAgICAgICAgZGlzcGxheV9vcmRlcjogMCxcbiAgICAgICAgICBjb2x1bW5zOiBbXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnc2VjdGlvbi0yJyxcbiAgICAgICAgICBwYWdlX3R5cGU6ICdhY3Rpdml0eScsXG4gICAgICAgICAgcGFnZV9pZDogJ3BhZ2UtMScsXG4gICAgICAgICAgZGlzcGxheV9vcmRlcjogMSxcbiAgICAgICAgICBjb2x1bW5zOiBbXSxcbiAgICAgICAgfSxcbiAgICAgIF07XG5cbiAgICAgIChzZWN0aW9uc1NlcnZpY2UubGlzdFNlY3Rpb25zIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiBtb2NrU2VjdGlvbnMsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IHtcbiAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9zZWN0aW9ucy9ieS1wYWdlL2FjdGl2aXR5L3BhZ2UtMScsXG4gICAgICB9IGFzIGFueTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBsaXN0U2VjdGlvbnNSb3V0ZShcbiAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgeyBwYXJhbXM6IFByb21pc2UucmVzb2x2ZSh7IHBhZ2VUeXBlOiAnYWN0aXZpdHknLCBwYWdlSWQ6ICdwYWdlLTEnIH0pIH1cbiAgICAgICk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGRhdGEuZGF0YSkudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgZXhwZWN0KGRhdGEuZGF0YVswXS5kaXNwbGF5X29yZGVyKS50b0JlKDApO1xuICAgICAgZXhwZWN0KGRhdGEuZGF0YVsxXS5kaXNwbGF5X29yZGVyKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KHNlY3Rpb25zU2VydmljZS5saXN0U2VjdGlvbnMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdhY3Rpdml0eScsICdwYWdlLTEnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVtcHR5IGFycmF5IHdoZW4gbm8gc2VjdGlvbnMgZXhpc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoc2VjdGlvbnNTZXJ2aWNlLmxpc3RTZWN0aW9ucyBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogW10sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IHtcbiAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9zZWN0aW9ucy9ieS1wYWdlL2FjdGl2aXR5L3BhZ2UtMScsXG4gICAgICB9IGFzIGFueTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBsaXN0U2VjdGlvbnNSb3V0ZShcbiAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgeyBwYXJhbXM6IFByb21pc2UucmVzb2x2ZSh7IHBhZ2VUeXBlOiAnYWN0aXZpdHknLCBwYWdlSWQ6ICdwYWdlLTEnIH0pIH1cbiAgICAgICk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGRhdGEuZGF0YSkudG9IYXZlTGVuZ3RoKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNDAxIHdoZW4gbm90IGF1dGhlbnRpY2F0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrR2V0VXNlci5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IHsgdXNlcjogbnVsbCB9LFxuICAgICAgICBlcnJvcjogeyBtZXNzYWdlOiAnTm90IGF1dGhlbnRpY2F0ZWQnIH0sXG4gICAgICB9IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vc2VjdGlvbnMvYnktcGFnZS9hY3Rpdml0eS9wYWdlLTEnLFxuICAgICAgfSBhcyBhbnk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbGlzdFNlY3Rpb25zUm91dGUoXG4gICAgICAgIHJlcXVlc3QsXG4gICAgICAgIHsgcGFyYW1zOiBQcm9taXNlLnJlc29sdmUoeyBwYWdlVHlwZTogJ2FjdGl2aXR5JywgcGFnZUlkOiAncGFnZS0xJyB9KSB9XG4gICAgICApO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdVTkFVVEhPUklaRUQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDUwMCBmb3IgZGF0YWJhc2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKHNlY3Rpb25zU2VydmljZS5saXN0U2VjdGlvbnMgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdEQVRBQkFTRV9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0RhdGFiYXNlIGVycm9yJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3NlY3Rpb25zL2J5LXBhZ2UvYWN0aXZpdHkvcGFnZS0xJyxcbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGxpc3RTZWN0aW9uc1JvdXRlKFxuICAgICAgICByZXF1ZXN0LFxuICAgICAgICB7IHBhcmFtczogUHJvbWlzZS5yZXNvbHZlKHsgcGFnZVR5cGU6ICdhY3Rpdml0eScsIHBhZ2VJZDogJ3BhZ2UtMScgfSkgfVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnREFUQUJBU0VfRVJST1InKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BVVCAvYXBpL2FkbWluL3NlY3Rpb25zLzppZCAtIFVwZGF0ZSBTZWN0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdXBkYXRlIHNlY3Rpb24gd2l0aCB2YWxpZCBkYXRhIHdoZW4gYXV0aGVudGljYXRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tTZWN0aW9uID0ge1xuICAgICAgICBpZDogJ3NlY3Rpb24tMScsXG4gICAgICAgIHBhZ2VfdHlwZTogJ2FjdGl2aXR5JyxcbiAgICAgICAgcGFnZV9pZDogJ3BhZ2UtMScsXG4gICAgICAgIGRpc3BsYXlfb3JkZXI6IDEsXG4gICAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ2NvbC0xJyxcbiAgICAgICAgICAgIHNlY3Rpb25faWQ6ICdzZWN0aW9uLTEnLFxuICAgICAgICAgICAgY29sdW1uX251bWJlcjogMSxcbiAgICAgICAgICAgIGNvbnRlbnRfdHlwZTogJ3JpY2hfdGV4dCcsXG4gICAgICAgICAgICBjb250ZW50X2RhdGE6IHsgaHRtbDogJzxwPlVwZGF0ZWQgY29udGVudDwvcD4nIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH07XG5cbiAgICAgIChzZWN0aW9uc1NlcnZpY2UudXBkYXRlU2VjdGlvbiBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogbW9ja1NlY3Rpb24sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IHtcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICBkaXNwbGF5X29yZGVyOiAxLFxuICAgICAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY29sdW1uX251bWJlcjogMSxcbiAgICAgICAgICAgICAgY29udGVudF90eXBlOiAncmljaF90ZXh0JyxcbiAgICAgICAgICAgICAgY29udGVudF9kYXRhOiB7IGh0bWw6ICc8cD5VcGRhdGVkIGNvbnRlbnQ8L3A+JyB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9KSxcbiAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9zZWN0aW9ucy9zZWN0aW9uLTEnLFxuICAgICAgfSBhcyBhbnk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdXBkYXRlU2VjdGlvblJvdXRlKFxuICAgICAgICByZXF1ZXN0LFxuICAgICAgICB7IHBhcmFtczogUHJvbWlzZS5yZXNvbHZlKHsgaWQ6ICdzZWN0aW9uLTEnIH0pIH1cbiAgICAgICk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGRhdGEuZGF0YS5kaXNwbGF5X29yZGVyKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KHNlY3Rpb25zU2VydmljZS51cGRhdGVTZWN0aW9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnc2VjdGlvbi0xJywgZXhwZWN0LmFueShPYmplY3QpKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwMSB3aGVuIG5vdCBhdXRoZW50aWNhdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0dldFVzZXIubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB7IHVzZXI6IG51bGwgfSxcbiAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ05vdCBhdXRoZW50aWNhdGVkJyB9LFxuICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICAgIGRpc3BsYXlfb3JkZXI6IDEsXG4gICAgICAgIH0pLFxuICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3NlY3Rpb25zL3NlY3Rpb24tMScsXG4gICAgICB9IGFzIGFueTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1cGRhdGVTZWN0aW9uUm91dGUoXG4gICAgICAgIHJlcXVlc3QsXG4gICAgICAgIHsgcGFyYW1zOiBQcm9taXNlLnJlc29sdmUoeyBpZDogJ3NlY3Rpb24tMScgfSkgfVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAxKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnVU5BVVRIT1JJWkVEJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDAgZm9yIGludmFsaWQgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgZGlzcGxheV9vcmRlcjogJ2ludmFsaWQnLFxuICAgICAgICB9KSxcbiAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9zZWN0aW9ucy9zZWN0aW9uLTEnLFxuICAgICAgfSBhcyBhbnk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdXBkYXRlU2VjdGlvblJvdXRlKFxuICAgICAgICByZXF1ZXN0LFxuICAgICAgICB7IHBhcmFtczogUHJvbWlzZS5yZXNvbHZlKHsgaWQ6ICdzZWN0aW9uLTEnIH0pIH1cbiAgICAgICk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwNCB3aGVuIHNlY3Rpb24gbm90IGZvdW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKHNlY3Rpb25zU2VydmljZS51cGRhdGVTZWN0aW9uIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnTk9UX0ZPVU5EJyxcbiAgICAgICAgICBtZXNzYWdlOiAnU2VjdGlvbiBub3QgZm91bmQnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgZGlzcGxheV9vcmRlcjogMSxcbiAgICAgICAgfSksXG4gICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vc2VjdGlvbnMvbm9uZXhpc3RlbnQnLFxuICAgICAgfSBhcyBhbnk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdXBkYXRlU2VjdGlvblJvdXRlKFxuICAgICAgICByZXF1ZXN0LFxuICAgICAgICB7IHBhcmFtczogUHJvbWlzZS5yZXNvbHZlKHsgaWQ6ICdub25leGlzdGVudCcgfSkgfVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDA0KTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnTk9UX0ZPVU5EJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA1MDAgZm9yIGRhdGFiYXNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIChzZWN0aW9uc1NlcnZpY2UudXBkYXRlU2VjdGlvbiBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ0RBVEFCQVNFX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnRGF0YWJhc2UgZXJyb3InLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgZGlzcGxheV9vcmRlcjogMSxcbiAgICAgICAgfSksXG4gICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vc2VjdGlvbnMvc2VjdGlvbi0xJyxcbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHVwZGF0ZVNlY3Rpb25Sb3V0ZShcbiAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgeyBwYXJhbXM6IFByb21pc2UucmVzb2x2ZSh7IGlkOiAnc2VjdGlvbi0xJyB9KSB9XG4gICAgICApO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg1MDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdEQVRBQkFTRV9FUlJPUicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnREVMRVRFIC9hcGkvYWRtaW4vc2VjdGlvbnMvOmlkIC0gRGVsZXRlIFNlY3Rpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkZWxldGUgc2VjdGlvbiB3aGVuIGF1dGhlbnRpY2F0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoc2VjdGlvbnNTZXJ2aWNlLmRlbGV0ZVNlY3Rpb24gYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHsgbWVzc2FnZTogJ1NlY3Rpb24gZGVsZXRlZCBzdWNjZXNzZnVsbHknIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IHtcbiAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9zZWN0aW9ucy9zZWN0aW9uLTEnLFxuICAgICAgfSBhcyBhbnk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZGVsZXRlU2VjdGlvblJvdXRlKFxuICAgICAgICByZXF1ZXN0LFxuICAgICAgICB7IHBhcmFtczogUHJvbWlzZS5yZXNvbHZlKHsgaWQ6ICdzZWN0aW9uLTEnIH0pIH1cbiAgICAgICk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHNlY3Rpb25zU2VydmljZS5kZWxldGVTZWN0aW9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnc2VjdGlvbi0xJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDEgd2hlbiBub3QgYXV0aGVudGljYXRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tHZXRVc2VyLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogeyB1c2VyOiBudWxsIH0sXG4gICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdOb3QgYXV0aGVudGljYXRlZCcgfSxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IHtcbiAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9zZWN0aW9ucy9zZWN0aW9uLTEnLFxuICAgICAgfSBhcyBhbnk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZGVsZXRlU2VjdGlvblJvdXRlKFxuICAgICAgICByZXF1ZXN0LFxuICAgICAgICB7IHBhcmFtczogUHJvbWlzZS5yZXNvbHZlKHsgaWQ6ICdzZWN0aW9uLTEnIH0pIH1cbiAgICAgICk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMSk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ1VOQVVUSE9SSVpFRCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNTAwIGZvciBkYXRhYmFzZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoc2VjdGlvbnNTZXJ2aWNlLmRlbGV0ZVNlY3Rpb24gYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdEQVRBQkFTRV9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0RhdGFiYXNlIGVycm9yJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3NlY3Rpb25zL3NlY3Rpb24tMScsXG4gICAgICB9IGFzIGFueTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBkZWxldGVTZWN0aW9uUm91dGUoXG4gICAgICAgIHJlcXVlc3QsXG4gICAgICAgIHsgcGFyYW1zOiBQcm9taXNlLnJlc29sdmUoeyBpZDogJ3NlY3Rpb24tMScgfSkgfVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnREFUQUJBU0VfRVJST1InKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BPU1QgL2FwaS9hZG1pbi9zZWN0aW9ucy9yZW9yZGVyIC0gUmVvcmRlciBTZWN0aW9ucycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlb3JkZXIgc2VjdGlvbnMgd2l0aCB2YWxpZCBkYXRhIHdoZW4gYXV0aGVudGljYXRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIChzZWN0aW9uc1NlcnZpY2UucmVvcmRlclNlY3Rpb25zIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7IG1lc3NhZ2U6ICdTZWN0aW9ucyByZW9yZGVyZWQgc3VjY2Vzc2Z1bGx5JyB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgcGFnZUlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJywgLy8gVmFsaWQgVVVJRFxuICAgICAgICAgIHNlY3Rpb25JZHM6IFsnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJywgJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMicsICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDMnXSwgLy8gVmFsaWQgVVVJRHNcbiAgICAgICAgfSksXG4gICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vc2VjdGlvbnMvcmVvcmRlcicsXG4gICAgICB9IGFzIGFueTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZW9yZGVyU2VjdGlvbnNSb3V0ZShyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3Qoc2VjdGlvbnNTZXJ2aWNlLnJlb3JkZXJTZWN0aW9ucykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICBbJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMScsICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDInLCAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAzJ11cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDEgd2hlbiBub3QgYXV0aGVudGljYXRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tHZXRVc2VyLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogeyB1c2VyOiBudWxsIH0sXG4gICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdOb3QgYXV0aGVudGljYXRlZCcgfSxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IHtcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICBwYWdlSWQ6ICdwYWdlLTEnLFxuICAgICAgICAgIHNlY3Rpb25JZHM6IFsnc2VjdGlvbi0xJ10sXG4gICAgICAgIH0pLFxuICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3NlY3Rpb25zL3Jlb3JkZXInLFxuICAgICAgfSBhcyBhbnk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVvcmRlclNlY3Rpb25zUm91dGUocmVxdWVzdCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMSk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ1VOQVVUSE9SSVpFRCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNDAwIGZvciBlbXB0eSBzZWN0aW9uIGxpc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICAgIHBhZ2VJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsIC8vIFZhbGlkIFVVSURcbiAgICAgICAgICBzZWN0aW9uSWRzOiBbXSxcbiAgICAgICAgfSksXG4gICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vc2VjdGlvbnMvcmVvcmRlcicsXG4gICAgICB9IGFzIGFueTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZW9yZGVyU2VjdGlvbnNSb3V0ZShyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNTAwIGZvciBkYXRhYmFzZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoc2VjdGlvbnNTZXJ2aWNlLnJlb3JkZXJTZWN0aW9ucyBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ0RBVEFCQVNFX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnRGF0YWJhc2UgZXJyb3InLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgcGFnZUlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJywgLy8gVmFsaWQgVVVJRFxuICAgICAgICAgIHNlY3Rpb25JZHM6IFsnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJ10sIC8vIFZhbGlkIFVVSURcbiAgICAgICAgfSksXG4gICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vc2VjdGlvbnMvcmVvcmRlcicsXG4gICAgICB9IGFzIGFueTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZW9yZGVyU2VjdGlvbnNSb3V0ZShyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnREFUQUJBU0VfRVJST1InKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BPU1QgL2FwaS9hZG1pbi9zZWN0aW9ucy92YWxpZGF0ZS1yZWZzIC0gVmFsaWRhdGUgUmVmZXJlbmNlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHJlZmVyZW5jZXMgc3VjY2Vzc2Z1bGx5IHdpdGggbm8gYnJva2VuIHJlZnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoc2VjdGlvbnNTZXJ2aWNlLnZhbGlkYXRlUmVmZXJlbmNlcyBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHZhbGlkOiB0cnVlLFxuICAgICAgICAgIGJyb2tlblJlZmVyZW5jZXM6IFtdLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgcmVmZXJlbmNlczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsIC8vIFZhbGlkIFVVSURcbiAgICAgICAgICAgICAgdHlwZTogJ2FjdGl2aXR5JyxcbiAgICAgICAgICAgICAgbmFtZTogJ0JlYWNoIERheScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMScsIC8vIFZhbGlkIFVVSURcbiAgICAgICAgICAgICAgdHlwZTogJ2V2ZW50JyxcbiAgICAgICAgICAgICAgbmFtZTogJ0NlcmVtb255JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSksXG4gICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vc2VjdGlvbnMvdmFsaWRhdGUtcmVmcycsXG4gICAgICB9IGFzIGFueTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB2YWxpZGF0ZVJlZmVyZW5jZXNSb3V0ZShyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZGF0YS5kYXRhLnZhbGlkKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGRhdGEuZGF0YS5icm9rZW5SZWZlcmVuY2VzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRldGVjdCBicm9rZW4gcmVmZXJlbmNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIChzZWN0aW9uc1NlcnZpY2UudmFsaWRhdGVSZWZlcmVuY2VzIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIGJyb2tlblJlZmVyZW5jZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQ5OTknLCAvLyBWYWxpZCBVVUlEXG4gICAgICAgICAgICAgIHR5cGU6ICdhY3Rpdml0eScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IHtcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICByZWZlcmVuY2VzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJywgLy8gVmFsaWQgVVVJRFxuICAgICAgICAgICAgICB0eXBlOiAnYWN0aXZpdHknLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQ5OTknLCAvLyBWYWxpZCBVVUlEXG4gICAgICAgICAgICAgIHR5cGU6ICdhY3Rpdml0eScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pLFxuICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3NlY3Rpb25zL3ZhbGlkYXRlLXJlZnMnLFxuICAgICAgfSBhcyBhbnk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdmFsaWRhdGVSZWZlcmVuY2VzUm91dGUocmVxdWVzdCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGRhdGEuZGF0YS52YWxpZCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5kYXRhLmJyb2tlblJlZmVyZW5jZXMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChkYXRhLmRhdGEuYnJva2VuUmVmZXJlbmNlc1swXS5pZCkudG9CZSgnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0OTk5Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDEgd2hlbiBub3QgYXV0aGVudGljYXRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tHZXRVc2VyLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogeyB1c2VyOiBudWxsIH0sXG4gICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdOb3QgYXV0aGVudGljYXRlZCcgfSxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IHtcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICByZWZlcmVuY2VzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJywgLy8gVmFsaWQgVVVJRFxuICAgICAgICAgICAgICB0eXBlOiAnYWN0aXZpdHknLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9KSxcbiAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9zZWN0aW9ucy92YWxpZGF0ZS1yZWZzJyxcbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHZhbGlkYXRlUmVmZXJlbmNlc1JvdXRlKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdVTkFVVEhPUklaRUQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwMCBmb3IgaW52YWxpZCByZWZlcmVuY2UgdHlwZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgcmVmZXJlbmNlczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogJ2ludmFsaWQtMScsXG4gICAgICAgICAgICAgIHR5cGU6ICdpbnZhbGlkX3R5cGUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9KSxcbiAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9zZWN0aW9ucy92YWxpZGF0ZS1yZWZzJyxcbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHZhbGlkYXRlUmVmZXJlbmNlc1JvdXRlKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA1MDAgZm9yIHNlcnZpY2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKHNlY3Rpb25zU2VydmljZS52YWxpZGF0ZVJlZmVyZW5jZXMgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdVTktOT1dOX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgcmVmZXJlbmNlczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsIC8vIFZhbGlkIFVVSURcbiAgICAgICAgICAgICAgdHlwZTogJ2FjdGl2aXR5JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSksXG4gICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vc2VjdGlvbnMvdmFsaWRhdGUtcmVmcycsXG4gICAgICB9IGFzIGFueTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB2YWxpZGF0ZVJlZmVyZW5jZXNSb3V0ZShyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnVU5LTk9XTl9FUlJPUicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUE9TVCAvYXBpL2FkbWluL3NlY3Rpb25zL2NoZWNrLWNpcmN1bGFyIC0gQ2hlY2sgQ2lyY3VsYXIgUmVmZXJlbmNlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBkaXJlY3Qgc2VsZi1yZWZlcmVuY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoc2VjdGlvbnNTZXJ2aWNlLmRldGVjdENpcmN1bGFyUmVmZXJlbmNlcyBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICAgIHBhZ2VJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsIC8vIFZhbGlkIFVVSURcbiAgICAgICAgICByZWZlcmVuY2VzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJywgLy8gU2FtZSBhcyBwYWdlSWQgZm9yIHNlbGYtcmVmZXJlbmNlXG4gICAgICAgICAgICAgIHR5cGU6ICdhY3Rpdml0eScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pLFxuICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3NlY3Rpb25zL2NoZWNrLWNpcmN1bGFyJyxcbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNoZWNrQ2lyY3VsYXJSb3V0ZShyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZGF0YS5kYXRhLmhhc0NpcmN1bGFyUmVmZXJlbmNlcykudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIHdoZW4gbm8gY2lyY3VsYXIgcmVmZXJlbmNlcyBleGlzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIChzZWN0aW9uc1NlcnZpY2UuZGV0ZWN0Q2lyY3VsYXJSZWZlcmVuY2VzIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiBmYWxzZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICAgIHBhZ2VJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsIC8vIFZhbGlkIFVVSURcbiAgICAgICAgICByZWZlcmVuY2VzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJywgLy8gRGlmZmVyZW50IGZyb20gcGFnZUlkXG4gICAgICAgICAgICAgIHR5cGU6ICdhY3Rpdml0eScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pLFxuICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3NlY3Rpb25zL2NoZWNrLWNpcmN1bGFyJyxcbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNoZWNrQ2lyY3VsYXJSb3V0ZShyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZGF0YS5kYXRhLmhhc0NpcmN1bGFyUmVmZXJlbmNlcykudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDEgd2hlbiBub3QgYXV0aGVudGljYXRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tHZXRVc2VyLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogeyB1c2VyOiBudWxsIH0sXG4gICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdOb3QgYXV0aGVudGljYXRlZCcgfSxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IHtcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICBwYWdlSWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLCAvLyBWYWxpZCBVVUlEXG4gICAgICAgICAgcmVmZXJlbmNlczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMScsIC8vIFZhbGlkIFVVSURcbiAgICAgICAgICAgICAgdHlwZTogJ2FjdGl2aXR5JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSksXG4gICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vc2VjdGlvbnMvY2hlY2stY2lyY3VsYXInLFxuICAgICAgfSBhcyBhbnk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2hlY2tDaXJjdWxhclJvdXRlKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdVTkFVVEhPUklaRUQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwMCBmb3IgbWlzc2luZyByZXF1aXJlZCBmaWVsZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICAgIHJlZmVyZW5jZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLCAvLyBWYWxpZCBVVUlEXG4gICAgICAgICAgICAgIHR5cGU6ICdhY3Rpdml0eScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgLy8gTWlzc2luZyBwYWdlSWRcbiAgICAgICAgfSksXG4gICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vc2VjdGlvbnMvY2hlY2stY2lyY3VsYXInLFxuICAgICAgfSBhcyBhbnk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2hlY2tDaXJjdWxhclJvdXRlKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA1MDAgZm9yIHNlcnZpY2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKHNlY3Rpb25zU2VydmljZS5kZXRlY3RDaXJjdWxhclJlZmVyZW5jZXMgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdVTktOT1dOX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgcGFnZUlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJywgLy8gVmFsaWQgVVVJRFxuICAgICAgICAgIHJlZmVyZW5jZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLCAvLyBWYWxpZCBVVUlEXG4gICAgICAgICAgICAgIHR5cGU6ICdhY3Rpdml0eScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pLFxuICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3NlY3Rpb25zL2NoZWNrLWNpcmN1bGFyJyxcbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNoZWNrQ2lyY3VsYXJSb3V0ZShyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnVU5LTk9XTl9FUlJPUicpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwiY3JlYXRlU2VjdGlvbiIsImZuIiwibGlzdFNlY3Rpb25zIiwidXBkYXRlU2VjdGlvbiIsImRlbGV0ZVNlY3Rpb24iLCJyZW9yZGVyU2VjdGlvbnMiLCJ2YWxpZGF0ZVJlZmVyZW5jZXMiLCJkZXRlY3RDaXJjdWxhclJlZmVyZW5jZXMiLCJOZXh0UmVzcG9uc2UiLCJqc29uIiwiZGF0YSIsImluaXQiLCJzdGF0dXMiLCJOZXh0UmVxdWVzdCIsImNvb2tpZXMiLCJnZXQiLCJnZXRBbGwiLCJzZXQiLCJkZWxldGUiLCJjcmVhdGVTZXJ2ZXJDbGllbnQiLCJtb2NrU3VwYWJhc2VDbGllbnQiLCJnbG9iYWwiLCJUZXh0RW5jb2RlciIsIlRleHREZWNvZGVyIiwibW9ja0dldFVzZXIiLCJhdXRoIiwiZ2V0VXNlciIsImdldFNlc3Npb24iLCJmcm9tIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tSZXNvbHZlZFZhbHVlIiwidXNlciIsImlkIiwiZW1haWwiLCJlcnJvciIsIml0IiwibW9ja1NlY3Rpb24iLCJwYWdlX3R5cGUiLCJwYWdlX2lkIiwiZGlzcGxheV9vcmRlciIsImNvbHVtbnMiLCJzZWN0aW9uX2lkIiwiY29sdW1uX251bWJlciIsImNvbnRlbnRfdHlwZSIsImNvbnRlbnRfZGF0YSIsImh0bWwiLCJzZWN0aW9uc1NlcnZpY2UiLCJzdWNjZXNzIiwicmVxdWVzdCIsInVybCIsInJlc3BvbnNlIiwiY3JlYXRlU2VjdGlvblJvdXRlIiwiZXhwZWN0IiwidG9CZSIsInRvSGF2ZUJlZW5DYWxsZWQiLCJtZXNzYWdlIiwiY29kZSIsIm1vY2tTZWN0aW9ucyIsImxpc3RTZWN0aW9uc1JvdXRlIiwicGFyYW1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJwYWdlVHlwZSIsInBhZ2VJZCIsInRvSGF2ZUxlbmd0aCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwidXBkYXRlU2VjdGlvblJvdXRlIiwiYW55IiwiT2JqZWN0IiwiZGVsZXRlU2VjdGlvblJvdXRlIiwic2VjdGlvbklkcyIsInJlb3JkZXJTZWN0aW9uc1JvdXRlIiwidmFsaWQiLCJicm9rZW5SZWZlcmVuY2VzIiwicmVmZXJlbmNlcyIsInR5cGUiLCJuYW1lIiwidmFsaWRhdGVSZWZlcmVuY2VzUm91dGUiLCJjaGVja0NpcmN1bGFyUm91dGUiLCJoYXNDaXJjdWxhclJlZmVyZW5jZXMiXSwibWFwcGluZ3MiOiJBQUFB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