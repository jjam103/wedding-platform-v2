9750e5c9e0828ff3fabfd7378b49245a
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _fastcheck = /*#__PURE__*/ _interop_require_wildcard(require("fast-check"));
const _auditLogService = require("./auditLogService");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Feature: destination-wedding-platform, Property 22: Audit Log Creation
// Mock Supabase client factory
function createMockSupabaseClient() {
    const mockSelect = jest.fn().mockReturnThis();
    const mockInsert = jest.fn().mockReturnThis();
    const mockEq = jest.fn().mockReturnThis();
    const mockSingle = jest.fn();
    const mockFrom = jest.fn().mockReturnValue({
        select: mockSelect,
        insert: mockInsert,
        eq: mockEq,
        single: mockSingle
    });
    return {
        from: mockFrom,
        _mocks: {
            from: mockFrom,
            select: mockSelect,
            insert: mockInsert,
            eq: mockEq,
            single: mockSingle
        }
    };
}
// Arbitraries for property-based testing
const entityTypeArbitrary = _fastcheck.constantFrom('guest', 'event', 'activity', 'vendor', 'accommodation', 'photo', 'email', 'rsvp', 'room_assignment', 'location');
const operationTypeArbitrary = _fastcheck.constantFrom('create', 'update', 'delete');
const entityDataArbitrary = _fastcheck.record({
    id: _fastcheck.uuid(),
    name: _fastcheck.string({
        minLength: 1,
        maxLength: 100
    }),
    email: _fastcheck.option(_fastcheck.emailAddress()),
    created_at: _fastcheck.date().map((d)=>d.toISOString())
});
const auditLogInputArbitrary = _fastcheck.record({
    user_id: _fastcheck.option(_fastcheck.uuid()),
    user_email: _fastcheck.option(_fastcheck.emailAddress()),
    entity_type: entityTypeArbitrary,
    entity_id: _fastcheck.uuid(),
    operation_type: operationTypeArbitrary,
    old_data: _fastcheck.option(entityDataArbitrary),
    new_data: _fastcheck.option(entityDataArbitrary),
    ip_address: _fastcheck.option(_fastcheck.ipV4()),
    user_agent: _fastcheck.option(_fastcheck.string({
        minLength: 10,
        maxLength: 200
    }))
});
describe('Feature: destination-wedding-platform, Property 22: Audit Log Creation', ()=>{
    describe('Property: For any data modification operation, audit log should be created', ()=>{
        it('should create audit log entry for any valid modification operation', async ()=>{
            await _fastcheck.assert(_fastcheck.asyncProperty(auditLogInputArbitrary, async (input)=>{
                const mockSupabase = createMockSupabaseClient();
                // Mock successful insert
                const mockAuditLog = {
                    id: _fastcheck.sample(_fastcheck.uuid(), 1)[0],
                    user_id: input.user_id || null,
                    user_email: input.user_email || null,
                    entity_type: input.entity_type,
                    entity_id: input.entity_id,
                    operation_type: input.operation_type,
                    old_data: input.old_data || null,
                    new_data: input.new_data || null,
                    ip_address: input.ip_address || null,
                    user_agent: input.user_agent || null,
                    created_at: new Date().toISOString()
                };
                mockSupabase._mocks.single.mockResolvedValue({
                    data: mockAuditLog,
                    error: null
                });
                const result = await _auditLogService.auditLogService.create(mockSupabase, input);
                // Property: Audit log creation should succeed for valid inputs
                expect(result.success).toBe(true);
                if (result.success) {
                    // Property: Created audit log should contain all required fields
                    expect(result.data.entity_type).toBe(input.entity_type);
                    expect(result.data.entity_id).toBe(input.entity_id);
                    expect(result.data.operation_type).toBe(input.operation_type);
                    // Property: Audit log should have a timestamp
                    expect(result.data.created_at).toBeDefined();
                    expect(typeof result.data.created_at).toBe('string');
                    // Property: Audit log should have a unique ID
                    expect(result.data.id).toBeDefined();
                    expect(typeof result.data.id).toBe('string');
                }
            }), {
                numRuns: 100
            });
        });
    });
    describe('Property: Audit logs should capture operation type correctly', ()=>{
        it('should correctly record create, update, and delete operations', async ()=>{
            await _fastcheck.assert(_fastcheck.asyncProperty(entityTypeArbitrary, _fastcheck.uuid(), operationTypeArbitrary, entityDataArbitrary, async (entityType, entityId, operationType, entityData)=>{
                const mockSupabase = createMockSupabaseClient();
                const mockAuditLog = {
                    id: _fastcheck.sample(_fastcheck.uuid(), 1)[0],
                    user_id: null,
                    user_email: null,
                    entity_type: entityType,
                    entity_id: entityId,
                    operation_type: operationType,
                    old_data: operationType === 'create' ? null : entityData,
                    new_data: operationType === 'delete' ? null : entityData,
                    ip_address: null,
                    user_agent: null,
                    created_at: new Date().toISOString()
                };
                mockSupabase._mocks.single.mockResolvedValue({
                    data: mockAuditLog,
                    error: null
                });
                let result;
                if (operationType === 'create') {
                    result = await _auditLogService.auditLogService.logCreate(mockSupabase, entityType, entityId, entityData);
                } else if (operationType === 'update') {
                    result = await _auditLogService.auditLogService.logUpdate(mockSupabase, entityType, entityId, entityData, entityData);
                } else {
                    result = await _auditLogService.auditLogService.logDelete(mockSupabase, entityType, entityId, entityData);
                }
                // Property: Operation type should match the helper function used
                expect(result.success).toBe(true);
                if (result.success) {
                    expect(result.data.operation_type).toBe(operationType);
                }
            }), {
                numRuns: 100
            });
        });
    });
    describe('Property: Audit logs should preserve entity information', ()=>{
        it('should maintain entity type and ID integrity across all operations', async ()=>{
            await _fastcheck.assert(_fastcheck.asyncProperty(entityTypeArbitrary, _fastcheck.uuid(), operationTypeArbitrary, async (entityType, entityId, operationType)=>{
                const mockSupabase = createMockSupabaseClient();
                const mockAuditLog = {
                    id: _fastcheck.sample(_fastcheck.uuid(), 1)[0],
                    user_id: null,
                    user_email: null,
                    entity_type: entityType,
                    entity_id: entityId,
                    operation_type: operationType,
                    old_data: null,
                    new_data: null,
                    ip_address: null,
                    user_agent: null,
                    created_at: new Date().toISOString()
                };
                mockSupabase._mocks.single.mockResolvedValue({
                    data: mockAuditLog,
                    error: null
                });
                const result = await _auditLogService.auditLogService.create(mockSupabase, {
                    entity_type: entityType,
                    entity_id: entityId,
                    operation_type: operationType
                });
                // Property: Entity information should be preserved exactly
                expect(result.success).toBe(true);
                if (result.success) {
                    expect(result.data.entity_type).toBe(entityType);
                    expect(result.data.entity_id).toBe(entityId);
                }
            }), {
                numRuns: 100
            });
        });
    });
    describe('Property: Audit logs should capture user information when provided', ()=>{
        it('should record user ID and email when available', async ()=>{
            await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.uuid(), _fastcheck.emailAddress(), entityTypeArbitrary, _fastcheck.uuid(), operationTypeArbitrary, async (userId, userEmail, entityType, entityId, operationType)=>{
                const mockSupabase = createMockSupabaseClient();
                const mockAuditLog = {
                    id: _fastcheck.sample(_fastcheck.uuid(), 1)[0],
                    user_id: userId,
                    user_email: userEmail,
                    entity_type: entityType,
                    entity_id: entityId,
                    operation_type: operationType,
                    old_data: null,
                    new_data: null,
                    ip_address: null,
                    user_agent: null,
                    created_at: new Date().toISOString()
                };
                mockSupabase._mocks.single.mockResolvedValue({
                    data: mockAuditLog,
                    error: null
                });
                const result = await _auditLogService.auditLogService.create(mockSupabase, {
                    user_id: userId,
                    user_email: userEmail,
                    entity_type: entityType,
                    entity_id: entityId,
                    operation_type: operationType
                });
                // Property: User information should be captured when provided
                expect(result.success).toBe(true);
                if (result.success) {
                    expect(result.data.user_id).toBe(userId);
                    expect(result.data.user_email).toBe(userEmail);
                }
            }), {
                numRuns: 100
            });
        });
    });
    describe('Property: Audit logs should capture data changes for updates', ()=>{
        it('should record both old and new data for update operations', async ()=>{
            await _fastcheck.assert(_fastcheck.asyncProperty(entityTypeArbitrary, _fastcheck.uuid(), entityDataArbitrary, entityDataArbitrary, async (entityType, entityId, oldData, newData)=>{
                const mockSupabase = createMockSupabaseClient();
                const mockAuditLog = {
                    id: _fastcheck.sample(_fastcheck.uuid(), 1)[0],
                    user_id: null,
                    user_email: null,
                    entity_type: entityType,
                    entity_id: entityId,
                    operation_type: 'update',
                    old_data: oldData,
                    new_data: newData,
                    ip_address: null,
                    user_agent: null,
                    created_at: new Date().toISOString()
                };
                mockSupabase._mocks.single.mockResolvedValue({
                    data: mockAuditLog,
                    error: null
                });
                const result = await _auditLogService.auditLogService.logUpdate(mockSupabase, entityType, entityId, oldData, newData);
                // Property: Update operations should capture both old and new data
                expect(result.success).toBe(true);
                if (result.success) {
                    expect(result.data.old_data).toEqual(oldData);
                    expect(result.data.new_data).toEqual(newData);
                }
            }), {
                numRuns: 100
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvc2VydmljZXMvYXVkaXRMb2dDcmVhdGlvbi5wcm9wZXJ0eS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGZjIGZyb20gJ2Zhc3QtY2hlY2snO1xuaW1wb3J0IHsgYXVkaXRMb2dTZXJ2aWNlIH0gZnJvbSAnLi9hdWRpdExvZ1NlcnZpY2UnO1xuaW1wb3J0IHR5cGUgeyBTdXBhYmFzZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5cbi8vIEZlYXR1cmU6IGRlc3RpbmF0aW9uLXdlZGRpbmctcGxhdGZvcm0sIFByb3BlcnR5IDIyOiBBdWRpdCBMb2cgQ3JlYXRpb25cblxuLy8gTW9jayBTdXBhYmFzZSBjbGllbnQgZmFjdG9yeVxuZnVuY3Rpb24gY3JlYXRlTW9ja1N1cGFiYXNlQ2xpZW50KCkge1xuICBjb25zdCBtb2NrU2VsZWN0ID0gamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCk7XG4gIGNvbnN0IG1vY2tJbnNlcnQgPSBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKTtcbiAgY29uc3QgbW9ja0VxID0gamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCk7XG4gIGNvbnN0IG1vY2tTaW5nbGUgPSBqZXN0LmZuKCk7XG4gIGNvbnN0IG1vY2tGcm9tID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgc2VsZWN0OiBtb2NrU2VsZWN0LFxuICAgIGluc2VydDogbW9ja0luc2VydCxcbiAgICBlcTogbW9ja0VxLFxuICAgIHNpbmdsZTogbW9ja1NpbmdsZSxcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBmcm9tOiBtb2NrRnJvbSxcbiAgICBfbW9ja3M6IHtcbiAgICAgIGZyb206IG1vY2tGcm9tLFxuICAgICAgc2VsZWN0OiBtb2NrU2VsZWN0LFxuICAgICAgaW5zZXJ0OiBtb2NrSW5zZXJ0LFxuICAgICAgZXE6IG1vY2tFcSxcbiAgICAgIHNpbmdsZTogbW9ja1NpbmdsZSxcbiAgICB9LFxuICB9IGFzIHVua25vd24gYXMgU3VwYWJhc2VDbGllbnQgJiB7IF9tb2NrczogYW55IH07XG59XG5cbi8vIEFyYml0cmFyaWVzIGZvciBwcm9wZXJ0eS1iYXNlZCB0ZXN0aW5nXG5jb25zdCBlbnRpdHlUeXBlQXJiaXRyYXJ5ID0gZmMuY29uc3RhbnRGcm9tKFxuICAnZ3Vlc3QnLFxuICAnZXZlbnQnLFxuICAnYWN0aXZpdHknLFxuICAndmVuZG9yJyxcbiAgJ2FjY29tbW9kYXRpb24nLFxuICAncGhvdG8nLFxuICAnZW1haWwnLFxuICAncnN2cCcsXG4gICdyb29tX2Fzc2lnbm1lbnQnLFxuICAnbG9jYXRpb24nXG4pO1xuXG5jb25zdCBvcGVyYXRpb25UeXBlQXJiaXRyYXJ5ID0gZmMuY29uc3RhbnRGcm9tKCdjcmVhdGUnLCAndXBkYXRlJywgJ2RlbGV0ZScpO1xuXG5jb25zdCBlbnRpdHlEYXRhQXJiaXRyYXJ5ID0gZmMucmVjb3JkKHtcbiAgaWQ6IGZjLnV1aWQoKSxcbiAgbmFtZTogZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDEwMCB9KSxcbiAgZW1haWw6IGZjLm9wdGlvbihmYy5lbWFpbEFkZHJlc3MoKSksXG4gIGNyZWF0ZWRfYXQ6IGZjLmRhdGUoKS5tYXAoKGQpID0+IGQudG9JU09TdHJpbmcoKSksXG59KTtcblxuY29uc3QgYXVkaXRMb2dJbnB1dEFyYml0cmFyeSA9IGZjLnJlY29yZCh7XG4gIHVzZXJfaWQ6IGZjLm9wdGlvbihmYy51dWlkKCkpLFxuICB1c2VyX2VtYWlsOiBmYy5vcHRpb24oZmMuZW1haWxBZGRyZXNzKCkpLFxuICBlbnRpdHlfdHlwZTogZW50aXR5VHlwZUFyYml0cmFyeSxcbiAgZW50aXR5X2lkOiBmYy51dWlkKCksXG4gIG9wZXJhdGlvbl90eXBlOiBvcGVyYXRpb25UeXBlQXJiaXRyYXJ5LFxuICBvbGRfZGF0YTogZmMub3B0aW9uKGVudGl0eURhdGFBcmJpdHJhcnkpLFxuICBuZXdfZGF0YTogZmMub3B0aW9uKGVudGl0eURhdGFBcmJpdHJhcnkpLFxuICBpcF9hZGRyZXNzOiBmYy5vcHRpb24oZmMuaXBWNCgpKSxcbiAgdXNlcl9hZ2VudDogZmMub3B0aW9uKGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMTAsIG1heExlbmd0aDogMjAwIH0pKSxcbn0pO1xuXG5kZXNjcmliZSgnRmVhdHVyZTogZGVzdGluYXRpb24td2VkZGluZy1wbGF0Zm9ybSwgUHJvcGVydHkgMjI6IEF1ZGl0IExvZyBDcmVhdGlvbicsICgpID0+IHtcbiAgZGVzY3JpYmUoJ1Byb3BlcnR5OiBGb3IgYW55IGRhdGEgbW9kaWZpY2F0aW9uIG9wZXJhdGlvbiwgYXVkaXQgbG9nIHNob3VsZCBiZSBjcmVhdGVkJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY3JlYXRlIGF1ZGl0IGxvZyBlbnRyeSBmb3IgYW55IHZhbGlkIG1vZGlmaWNhdGlvbiBvcGVyYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBmYy5hc3NlcnQoXG4gICAgICAgIGZjLmFzeW5jUHJvcGVydHkoYXVkaXRMb2dJbnB1dEFyYml0cmFyeSwgYXN5bmMgKGlucHV0KSA9PiB7XG4gICAgICAgICAgY29uc3QgbW9ja1N1cGFiYXNlID0gY3JlYXRlTW9ja1N1cGFiYXNlQ2xpZW50KCk7XG5cbiAgICAgICAgICAvLyBNb2NrIHN1Y2Nlc3NmdWwgaW5zZXJ0XG4gICAgICAgICAgY29uc3QgbW9ja0F1ZGl0TG9nID0ge1xuICAgICAgICAgICAgaWQ6IGZjLnNhbXBsZShmYy51dWlkKCksIDEpWzBdLFxuICAgICAgICAgICAgdXNlcl9pZDogaW5wdXQudXNlcl9pZCB8fCBudWxsLFxuICAgICAgICAgICAgdXNlcl9lbWFpbDogaW5wdXQudXNlcl9lbWFpbCB8fCBudWxsLFxuICAgICAgICAgICAgZW50aXR5X3R5cGU6IGlucHV0LmVudGl0eV90eXBlLFxuICAgICAgICAgICAgZW50aXR5X2lkOiBpbnB1dC5lbnRpdHlfaWQsXG4gICAgICAgICAgICBvcGVyYXRpb25fdHlwZTogaW5wdXQub3BlcmF0aW9uX3R5cGUsXG4gICAgICAgICAgICBvbGRfZGF0YTogaW5wdXQub2xkX2RhdGEgfHwgbnVsbCxcbiAgICAgICAgICAgIG5ld19kYXRhOiBpbnB1dC5uZXdfZGF0YSB8fCBudWxsLFxuICAgICAgICAgICAgaXBfYWRkcmVzczogaW5wdXQuaXBfYWRkcmVzcyB8fCBudWxsLFxuICAgICAgICAgICAgdXNlcl9hZ2VudDogaW5wdXQudXNlcl9hZ2VudCB8fCBudWxsLFxuICAgICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBtb2NrU3VwYWJhc2UuX21vY2tzLnNpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICBkYXRhOiBtb2NrQXVkaXRMb2csXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICB9IGFzIGFueSk7XG5cbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhdWRpdExvZ1NlcnZpY2UuY3JlYXRlKG1vY2tTdXBhYmFzZSwgaW5wdXQpO1xuXG4gICAgICAgICAgLy8gUHJvcGVydHk6IEF1ZGl0IGxvZyBjcmVhdGlvbiBzaG91bGQgc3VjY2VlZCBmb3IgdmFsaWQgaW5wdXRzXG4gICAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuXG4gICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICAvLyBQcm9wZXJ0eTogQ3JlYXRlZCBhdWRpdCBsb2cgc2hvdWxkIGNvbnRhaW4gYWxsIHJlcXVpcmVkIGZpZWxkc1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmVudGl0eV90eXBlKS50b0JlKGlucHV0LmVudGl0eV90eXBlKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5lbnRpdHlfaWQpLnRvQmUoaW5wdXQuZW50aXR5X2lkKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5vcGVyYXRpb25fdHlwZSkudG9CZShpbnB1dC5vcGVyYXRpb25fdHlwZSk7XG5cbiAgICAgICAgICAgIC8vIFByb3BlcnR5OiBBdWRpdCBsb2cgc2hvdWxkIGhhdmUgYSB0aW1lc3RhbXBcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5jcmVhdGVkX2F0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuZGF0YS5jcmVhdGVkX2F0KS50b0JlKCdzdHJpbmcnKTtcblxuICAgICAgICAgICAgLy8gUHJvcGVydHk6IEF1ZGl0IGxvZyBzaG91bGQgaGF2ZSBhIHVuaXF1ZSBJRFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmlkKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuZGF0YS5pZCkudG9CZSgnc3RyaW5nJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgeyBudW1SdW5zOiAxMDAgfVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Byb3BlcnR5OiBBdWRpdCBsb2dzIHNob3VsZCBjYXB0dXJlIG9wZXJhdGlvbiB0eXBlIGNvcnJlY3RseScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNvcnJlY3RseSByZWNvcmQgY3JlYXRlLCB1cGRhdGUsIGFuZCBkZWxldGUgb3BlcmF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGZjLmFzc2VydChcbiAgICAgICAgZmMuYXN5bmNQcm9wZXJ0eShcbiAgICAgICAgICBlbnRpdHlUeXBlQXJiaXRyYXJ5LFxuICAgICAgICAgIGZjLnV1aWQoKSxcbiAgICAgICAgICBvcGVyYXRpb25UeXBlQXJiaXRyYXJ5LFxuICAgICAgICAgIGVudGl0eURhdGFBcmJpdHJhcnksXG4gICAgICAgICAgYXN5bmMgKGVudGl0eVR5cGUsIGVudGl0eUlkLCBvcGVyYXRpb25UeXBlLCBlbnRpdHlEYXRhKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtb2NrU3VwYWJhc2UgPSBjcmVhdGVNb2NrU3VwYWJhc2VDbGllbnQoKTtcblxuICAgICAgICAgICAgY29uc3QgbW9ja0F1ZGl0TG9nID0ge1xuICAgICAgICAgICAgICBpZDogZmMuc2FtcGxlKGZjLnV1aWQoKSwgMSlbMF0sXG4gICAgICAgICAgICAgIHVzZXJfaWQ6IG51bGwsXG4gICAgICAgICAgICAgIHVzZXJfZW1haWw6IG51bGwsXG4gICAgICAgICAgICAgIGVudGl0eV90eXBlOiBlbnRpdHlUeXBlLFxuICAgICAgICAgICAgICBlbnRpdHlfaWQ6IGVudGl0eUlkLFxuICAgICAgICAgICAgICBvcGVyYXRpb25fdHlwZTogb3BlcmF0aW9uVHlwZSxcbiAgICAgICAgICAgICAgb2xkX2RhdGE6IG9wZXJhdGlvblR5cGUgPT09ICdjcmVhdGUnID8gbnVsbCA6IGVudGl0eURhdGEsXG4gICAgICAgICAgICAgIG5ld19kYXRhOiBvcGVyYXRpb25UeXBlID09PSAnZGVsZXRlJyA/IG51bGwgOiBlbnRpdHlEYXRhLFxuICAgICAgICAgICAgICBpcF9hZGRyZXNzOiBudWxsLFxuICAgICAgICAgICAgICB1c2VyX2FnZW50OiBudWxsLFxuICAgICAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBtb2NrU3VwYWJhc2UuX21vY2tzLnNpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgIGRhdGE6IG1vY2tBdWRpdExvZyxcbiAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgICB9IGFzIGFueSk7XG5cbiAgICAgICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgICAgICBpZiAob3BlcmF0aW9uVHlwZSA9PT0gJ2NyZWF0ZScpIHtcbiAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgYXVkaXRMb2dTZXJ2aWNlLmxvZ0NyZWF0ZShcbiAgICAgICAgICAgICAgICBtb2NrU3VwYWJhc2UsXG4gICAgICAgICAgICAgICAgZW50aXR5VHlwZSxcbiAgICAgICAgICAgICAgICBlbnRpdHlJZCxcbiAgICAgICAgICAgICAgICBlbnRpdHlEYXRhXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9wZXJhdGlvblR5cGUgPT09ICd1cGRhdGUnKSB7XG4gICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGF1ZGl0TG9nU2VydmljZS5sb2dVcGRhdGUoXG4gICAgICAgICAgICAgICAgbW9ja1N1cGFiYXNlLFxuICAgICAgICAgICAgICAgIGVudGl0eVR5cGUsXG4gICAgICAgICAgICAgICAgZW50aXR5SWQsXG4gICAgICAgICAgICAgICAgZW50aXR5RGF0YSxcbiAgICAgICAgICAgICAgICBlbnRpdHlEYXRhXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBhdWRpdExvZ1NlcnZpY2UubG9nRGVsZXRlKFxuICAgICAgICAgICAgICAgIG1vY2tTdXBhYmFzZSxcbiAgICAgICAgICAgICAgICBlbnRpdHlUeXBlLFxuICAgICAgICAgICAgICAgIGVudGl0eUlkLFxuICAgICAgICAgICAgICAgIGVudGl0eURhdGFcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUHJvcGVydHk6IE9wZXJhdGlvbiB0eXBlIHNob3VsZCBtYXRjaCB0aGUgaGVscGVyIGZ1bmN0aW9uIHVzZWRcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEub3BlcmF0aW9uX3R5cGUpLnRvQmUob3BlcmF0aW9uVHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICApLFxuICAgICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUHJvcGVydHk6IEF1ZGl0IGxvZ3Mgc2hvdWxkIHByZXNlcnZlIGVudGl0eSBpbmZvcm1hdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIG1haW50YWluIGVudGl0eSB0eXBlIGFuZCBJRCBpbnRlZ3JpdHkgYWNyb3NzIGFsbCBvcGVyYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZmMuYXNzZXJ0KFxuICAgICAgICBmYy5hc3luY1Byb3BlcnR5KFxuICAgICAgICAgIGVudGl0eVR5cGVBcmJpdHJhcnksXG4gICAgICAgICAgZmMudXVpZCgpLFxuICAgICAgICAgIG9wZXJhdGlvblR5cGVBcmJpdHJhcnksXG4gICAgICAgICAgYXN5bmMgKGVudGl0eVR5cGUsIGVudGl0eUlkLCBvcGVyYXRpb25UeXBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtb2NrU3VwYWJhc2UgPSBjcmVhdGVNb2NrU3VwYWJhc2VDbGllbnQoKTtcblxuICAgICAgICAgICAgY29uc3QgbW9ja0F1ZGl0TG9nID0ge1xuICAgICAgICAgICAgICBpZDogZmMuc2FtcGxlKGZjLnV1aWQoKSwgMSlbMF0sXG4gICAgICAgICAgICAgIHVzZXJfaWQ6IG51bGwsXG4gICAgICAgICAgICAgIHVzZXJfZW1haWw6IG51bGwsXG4gICAgICAgICAgICAgIGVudGl0eV90eXBlOiBlbnRpdHlUeXBlLFxuICAgICAgICAgICAgICBlbnRpdHlfaWQ6IGVudGl0eUlkLFxuICAgICAgICAgICAgICBvcGVyYXRpb25fdHlwZTogb3BlcmF0aW9uVHlwZSxcbiAgICAgICAgICAgICAgb2xkX2RhdGE6IG51bGwsXG4gICAgICAgICAgICAgIG5ld19kYXRhOiBudWxsLFxuICAgICAgICAgICAgICBpcF9hZGRyZXNzOiBudWxsLFxuICAgICAgICAgICAgICB1c2VyX2FnZW50OiBudWxsLFxuICAgICAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBtb2NrU3VwYWJhc2UuX21vY2tzLnNpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgIGRhdGE6IG1vY2tBdWRpdExvZyxcbiAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgICB9IGFzIGFueSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGF1ZGl0TG9nU2VydmljZS5jcmVhdGUobW9ja1N1cGFiYXNlLCB7XG4gICAgICAgICAgICAgIGVudGl0eV90eXBlOiBlbnRpdHlUeXBlLFxuICAgICAgICAgICAgICBlbnRpdHlfaWQ6IGVudGl0eUlkLFxuICAgICAgICAgICAgICBvcGVyYXRpb25fdHlwZTogb3BlcmF0aW9uVHlwZSxcbiAgICAgICAgICAgIH0gYXMgYW55KTtcblxuICAgICAgICAgICAgLy8gUHJvcGVydHk6IEVudGl0eSBpbmZvcm1hdGlvbiBzaG91bGQgYmUgcHJlc2VydmVkIGV4YWN0bHlcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuZW50aXR5X3R5cGUpLnRvQmUoZW50aXR5VHlwZSk7XG4gICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5lbnRpdHlfaWQpLnRvQmUoZW50aXR5SWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKSxcbiAgICAgICAgeyBudW1SdW5zOiAxMDAgfVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Byb3BlcnR5OiBBdWRpdCBsb2dzIHNob3VsZCBjYXB0dXJlIHVzZXIgaW5mb3JtYXRpb24gd2hlbiBwcm92aWRlZCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlY29yZCB1c2VyIElEIGFuZCBlbWFpbCB3aGVuIGF2YWlsYWJsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGZjLmFzc2VydChcbiAgICAgICAgZmMuYXN5bmNQcm9wZXJ0eShcbiAgICAgICAgICBmYy51dWlkKCksXG4gICAgICAgICAgZmMuZW1haWxBZGRyZXNzKCksXG4gICAgICAgICAgZW50aXR5VHlwZUFyYml0cmFyeSxcbiAgICAgICAgICBmYy51dWlkKCksXG4gICAgICAgICAgb3BlcmF0aW9uVHlwZUFyYml0cmFyeSxcbiAgICAgICAgICBhc3luYyAodXNlcklkLCB1c2VyRW1haWwsIGVudGl0eVR5cGUsIGVudGl0eUlkLCBvcGVyYXRpb25UeXBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtb2NrU3VwYWJhc2UgPSBjcmVhdGVNb2NrU3VwYWJhc2VDbGllbnQoKTtcblxuICAgICAgICAgICAgY29uc3QgbW9ja0F1ZGl0TG9nID0ge1xuICAgICAgICAgICAgICBpZDogZmMuc2FtcGxlKGZjLnV1aWQoKSwgMSlbMF0sXG4gICAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgICAgICAgdXNlcl9lbWFpbDogdXNlckVtYWlsLFxuICAgICAgICAgICAgICBlbnRpdHlfdHlwZTogZW50aXR5VHlwZSxcbiAgICAgICAgICAgICAgZW50aXR5X2lkOiBlbnRpdHlJZCxcbiAgICAgICAgICAgICAgb3BlcmF0aW9uX3R5cGU6IG9wZXJhdGlvblR5cGUsXG4gICAgICAgICAgICAgIG9sZF9kYXRhOiBudWxsLFxuICAgICAgICAgICAgICBuZXdfZGF0YTogbnVsbCxcbiAgICAgICAgICAgICAgaXBfYWRkcmVzczogbnVsbCxcbiAgICAgICAgICAgICAgdXNlcl9hZ2VudDogbnVsbCxcbiAgICAgICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbW9ja1N1cGFiYXNlLl9tb2Nrcy5zaW5nbGUubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgICBkYXRhOiBtb2NrQXVkaXRMb2csXG4gICAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhdWRpdExvZ1NlcnZpY2UuY3JlYXRlKG1vY2tTdXBhYmFzZSwge1xuICAgICAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgICAgICAgIHVzZXJfZW1haWw6IHVzZXJFbWFpbCxcbiAgICAgICAgICAgICAgZW50aXR5X3R5cGU6IGVudGl0eVR5cGUsXG4gICAgICAgICAgICAgIGVudGl0eV9pZDogZW50aXR5SWQsXG4gICAgICAgICAgICAgIG9wZXJhdGlvbl90eXBlOiBvcGVyYXRpb25UeXBlLFxuICAgICAgICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICAgICAgICAvLyBQcm9wZXJ0eTogVXNlciBpbmZvcm1hdGlvbiBzaG91bGQgYmUgY2FwdHVyZWQgd2hlbiBwcm92aWRlZFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS51c2VyX2lkKS50b0JlKHVzZXJJZCk7XG4gICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS51c2VyX2VtYWlsKS50b0JlKHVzZXJFbWFpbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICApLFxuICAgICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUHJvcGVydHk6IEF1ZGl0IGxvZ3Mgc2hvdWxkIGNhcHR1cmUgZGF0YSBjaGFuZ2VzIGZvciB1cGRhdGVzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmVjb3JkIGJvdGggb2xkIGFuZCBuZXcgZGF0YSBmb3IgdXBkYXRlIG9wZXJhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBmYy5hc3NlcnQoXG4gICAgICAgIGZjLmFzeW5jUHJvcGVydHkoXG4gICAgICAgICAgZW50aXR5VHlwZUFyYml0cmFyeSxcbiAgICAgICAgICBmYy51dWlkKCksXG4gICAgICAgICAgZW50aXR5RGF0YUFyYml0cmFyeSxcbiAgICAgICAgICBlbnRpdHlEYXRhQXJiaXRyYXJ5LFxuICAgICAgICAgIGFzeW5jIChlbnRpdHlUeXBlLCBlbnRpdHlJZCwgb2xkRGF0YSwgbmV3RGF0YSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbW9ja1N1cGFiYXNlID0gY3JlYXRlTW9ja1N1cGFiYXNlQ2xpZW50KCk7XG5cbiAgICAgICAgICAgIGNvbnN0IG1vY2tBdWRpdExvZyA9IHtcbiAgICAgICAgICAgICAgaWQ6IGZjLnNhbXBsZShmYy51dWlkKCksIDEpWzBdLFxuICAgICAgICAgICAgICB1c2VyX2lkOiBudWxsLFxuICAgICAgICAgICAgICB1c2VyX2VtYWlsOiBudWxsLFxuICAgICAgICAgICAgICBlbnRpdHlfdHlwZTogZW50aXR5VHlwZSxcbiAgICAgICAgICAgICAgZW50aXR5X2lkOiBlbnRpdHlJZCxcbiAgICAgICAgICAgICAgb3BlcmF0aW9uX3R5cGU6ICd1cGRhdGUnIGFzIGNvbnN0LFxuICAgICAgICAgICAgICBvbGRfZGF0YTogb2xkRGF0YSxcbiAgICAgICAgICAgICAgbmV3X2RhdGE6IG5ld0RhdGEsXG4gICAgICAgICAgICAgIGlwX2FkZHJlc3M6IG51bGwsXG4gICAgICAgICAgICAgIHVzZXJfYWdlbnQ6IG51bGwsXG4gICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIG1vY2tTdXBhYmFzZS5fbW9ja3Muc2luZ2xlLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgICAgZGF0YTogbW9ja0F1ZGl0TG9nLFxuICAgICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICAgIH0gYXMgYW55KTtcblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXVkaXRMb2dTZXJ2aWNlLmxvZ1VwZGF0ZShcbiAgICAgICAgICAgICAgbW9ja1N1cGFiYXNlLFxuICAgICAgICAgICAgICBlbnRpdHlUeXBlLFxuICAgICAgICAgICAgICBlbnRpdHlJZCxcbiAgICAgICAgICAgICAgb2xkRGF0YSxcbiAgICAgICAgICAgICAgbmV3RGF0YVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gUHJvcGVydHk6IFVwZGF0ZSBvcGVyYXRpb25zIHNob3VsZCBjYXB0dXJlIGJvdGggb2xkIGFuZCBuZXcgZGF0YVxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5vbGRfZGF0YSkudG9FcXVhbChvbGREYXRhKTtcbiAgICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLm5ld19kYXRhKS50b0VxdWFsKG5ld0RhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKSxcbiAgICAgICAgeyBudW1SdW5zOiAxMDAgfVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJjcmVhdGVNb2NrU3VwYWJhc2VDbGllbnQiLCJtb2NrU2VsZWN0IiwiamVzdCIsImZuIiwibW9ja1JldHVyblRoaXMiLCJtb2NrSW5zZXJ0IiwibW9ja0VxIiwibW9ja1NpbmdsZSIsIm1vY2tGcm9tIiwibW9ja1JldHVyblZhbHVlIiwic2VsZWN0IiwiaW5zZXJ0IiwiZXEiLCJzaW5nbGUiLCJmcm9tIiwiX21vY2tzIiwiZW50aXR5VHlwZUFyYml0cmFyeSIsImZjIiwiY29uc3RhbnRGcm9tIiwib3BlcmF0aW9uVHlwZUFyYml0cmFyeSIsImVudGl0eURhdGFBcmJpdHJhcnkiLCJyZWNvcmQiLCJpZCIsInV1aWQiLCJuYW1lIiwic3RyaW5nIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwiZW1haWwiLCJvcHRpb24iLCJlbWFpbEFkZHJlc3MiLCJjcmVhdGVkX2F0IiwiZGF0ZSIsIm1hcCIsImQiLCJ0b0lTT1N0cmluZyIsImF1ZGl0TG9nSW5wdXRBcmJpdHJhcnkiLCJ1c2VyX2lkIiwidXNlcl9lbWFpbCIsImVudGl0eV90eXBlIiwiZW50aXR5X2lkIiwib3BlcmF0aW9uX3R5cGUiLCJvbGRfZGF0YSIsIm5ld19kYXRhIiwiaXBfYWRkcmVzcyIsImlwVjQiLCJ1c2VyX2FnZW50IiwiZGVzY3JpYmUiLCJpdCIsImFzc2VydCIsImFzeW5jUHJvcGVydHkiLCJpbnB1dCIsIm1vY2tTdXBhYmFzZSIsIm1vY2tBdWRpdExvZyIsInNhbXBsZSIsIkRhdGUiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImRhdGEiLCJlcnJvciIsInJlc3VsdCIsImF1ZGl0TG9nU2VydmljZSIsImNyZWF0ZSIsImV4cGVjdCIsInN1Y2Nlc3MiLCJ0b0JlIiwidG9CZURlZmluZWQiLCJudW1SdW5zIiwiZW50aXR5VHlwZSIsImVudGl0eUlkIiwib3BlcmF0aW9uVHlwZSIsImVudGl0eURhdGEiLCJsb2dDcmVhdGUiLCJsb2dVcGRhdGUiLCJsb2dEZWxldGUiLCJ1c2VySWQiLCJ1c2VyRW1haWwiLCJvbGREYXRhIiwibmV3RGF0YSIsInRvRXF1YWwiXSwibWFwcGluZ3MiOiI7Ozs7bUVBQW9CO2lDQUNZOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHaEMseUVBQXlFO0FBRXpFLCtCQUErQjtBQUMvQixTQUFTQTtJQUNQLE1BQU1DLGFBQWFDLEtBQUtDLEVBQUUsR0FBR0MsY0FBYztJQUMzQyxNQUFNQyxhQUFhSCxLQUFLQyxFQUFF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