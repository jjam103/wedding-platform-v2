8dc5a2649023d32b13c199121e06e5c1
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "InlineSectionEditor", {
    enumerable: true,
    get: function() {
        return InlineSectionEditor;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const _SectionEditor = require("./SectionEditor");
function InlineSectionEditor({ pageType, pageId, entityName, defaultExpanded = false }) {
    const [isExpanded, setIsExpanded] = (0, _react.useState)(defaultExpanded);
    const [sectionCount, setSectionCount] = (0, _react.useState)(0);
    const [loading, setLoading] = (0, _react.useState)(false);
    // Fetch section count
    const fetchSectionCount = (0, _react.useCallback)(async ()=>{
        if (!pageId) return;
        setLoading(true);
        try {
            const response = await fetch(`/api/admin/sections/by-page/${pageType}/${pageId}`);
            const result = await response.json();
            if (result.success) {
                setSectionCount(result.data?.length || 0);
            }
        } catch (error) {
            console.error('Failed to fetch section count:', error);
        } finally{
            setLoading(false);
        }
    }, [
        pageType,
        pageId
    ]);
    // Fetch count on mount and when pageId changes
    (0, _react.useEffect)(()=>{
        fetchSectionCount();
    }, [
        fetchSectionCount
    ]);
    const handleToggle = ()=>{
        setIsExpanded((prev)=>!prev);
    };
    const handleSectionSave = ()=>{
        // Refresh section count after save
        fetchSectionCount();
    };
    if (!pageId) {
        return null;
    }
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: "border border-gray-200 rounded-lg bg-white mt-6",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("button", {
                onClick: handleToggle,
                className: "w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors text-left",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center gap-3",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                className: "font-semibold text-gray-900",
                                children: [
                                    "Page Sections",
                                    entityName && /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                        className: "text-gray-500 font-normal ml-2",
                                        children: [
                                            "for ",
                                            entityName
                                        ]
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                className: "inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-jungle-100 text-jungle-800",
                                children: loading ? '...' : `${sectionCount} section${sectionCount !== 1 ? 's' : ''}`
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                        className: "text-gray-500",
                        children: isExpanded ? '▼' : '▶'
                    })
                ]
            }),
            isExpanded && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "border-t border-gray-200 p-6 bg-gray-50",
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                    pageType: pageType,
                    pageId: pageId,
                    onSave: handleSectionSave
                })
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9hZG1pbi9JbmxpbmVTZWN0aW9uRWRpdG9yLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU2VjdGlvbkVkaXRvciB9IGZyb20gJy4vU2VjdGlvbkVkaXRvcic7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvQnV0dG9uJztcblxuaW50ZXJmYWNlIElubGluZVNlY3Rpb25FZGl0b3JQcm9wcyB7XG4gIHBhZ2VUeXBlOiAnYWN0aXZpdHknIHwgJ2V2ZW50JyB8ICdhY2NvbW1vZGF0aW9uJyB8ICdyb29tX3R5cGUnIHwgJ2N1c3RvbScgfCAnaG9tZSc7XG4gIHBhZ2VJZDogc3RyaW5nO1xuICBlbnRpdHlOYW1lPzogc3RyaW5nO1xuICBkZWZhdWx0RXhwYW5kZWQ/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIElubGluZVNlY3Rpb25FZGl0b3IgLSBFbWJlZGRhYmxlIHNlY3Rpb24gZWRpdG9yIGZvciBhZG1pbiBwYWdlc1xuICogXG4gKiBEaXNwbGF5cyBzZWN0aW9uIG1hbmFnZW1lbnQgaW5saW5lIHVuZGVybmVhdGggdGhlIGVudGl0eSBiZWluZyBlZGl0ZWQuXG4gKiBcbiAqIEZlYXR1cmVzOlxuICogLSBDb2xsYXBzaWJsZS9leHBhbmRhYmxlIGludGVyZmFjZVxuICogLSBTaG93cyBzZWN0aW9uIGNvdW50XG4gKiAtIEVtYmVkZGVkIFNlY3Rpb25FZGl0b3IgY29tcG9uZW50XG4gKiAtIE1pbmltYWwgdmlzdWFsIGZvb3RwcmludCB3aGVuIGNvbGxhcHNlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gSW5saW5lU2VjdGlvbkVkaXRvcih7IFxuICBwYWdlVHlwZSwgXG4gIHBhZ2VJZCwgXG4gIGVudGl0eU5hbWUsXG4gIGRlZmF1bHRFeHBhbmRlZCA9IGZhbHNlIFxufTogSW5saW5lU2VjdGlvbkVkaXRvclByb3BzKSB7XG4gIGNvbnN0IFtpc0V4cGFuZGVkLCBzZXRJc0V4cGFuZGVkXSA9IHVzZVN0YXRlKGRlZmF1bHRFeHBhbmRlZCk7XG4gIGNvbnN0IFtzZWN0aW9uQ291bnQsIHNldFNlY3Rpb25Db3VudF0gPSB1c2VTdGF0ZTxudW1iZXI+KDApO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgLy8gRmV0Y2ggc2VjdGlvbiBjb3VudFxuICBjb25zdCBmZXRjaFNlY3Rpb25Db3VudCA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXBhZ2VJZCkgcmV0dXJuO1xuICAgIFxuICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvYWRtaW4vc2VjdGlvbnMvYnktcGFnZS8ke3BhZ2VUeXBlfS8ke3BhZ2VJZH1gKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHNldFNlY3Rpb25Db3VudChyZXN1bHQuZGF0YT8ubGVuZ3RoIHx8IDApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggc2VjdGlvbiBjb3VudDonLCBlcnJvcik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfSwgW3BhZ2VUeXBlLCBwYWdlSWRdKTtcblxuICAvLyBGZXRjaCBjb3VudCBvbiBtb3VudCBhbmQgd2hlbiBwYWdlSWQgY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoU2VjdGlvbkNvdW50KCk7XG4gIH0sIFtmZXRjaFNlY3Rpb25Db3VudF0pO1xuXG4gIGNvbnN0IGhhbmRsZVRvZ2dsZSA9ICgpID0+IHtcbiAgICBzZXRJc0V4cGFuZGVkKHByZXYgPT4gIXByZXYpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVNlY3Rpb25TYXZlID0gKCkgPT4ge1xuICAgIC8vIFJlZnJlc2ggc2VjdGlvbiBjb3VudCBhZnRlciBzYXZlXG4gICAgZmV0Y2hTZWN0aW9uQ291bnQoKTtcbiAgfTtcblxuICBpZiAoIXBhZ2VJZCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZC1sZyBiZy13aGl0ZSBtdC02XCI+XG4gICAgICB7LyogSGVhZGVyIC0gYWx3YXlzIHZpc2libGUgKi99XG4gICAgICA8YnV0dG9uXG4gICAgICAgIG9uQ2xpY2s9e2hhbmRsZVRvZ2dsZX1cbiAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBwLTQgaG92ZXI6YmctZ3JheS01MCB0cmFuc2l0aW9uLWNvbG9ycyB0ZXh0LWxlZnRcIlxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwXCI+XG4gICAgICAgICAgICBQYWdlIFNlY3Rpb25zXG4gICAgICAgICAgICB7ZW50aXR5TmFtZSAmJiA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNTAwIGZvbnQtbm9ybWFsIG1sLTJcIj5mb3Ige2VudGl0eU5hbWV9PC9zcGFuPn1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIHB4LTIuNSBweS0wLjUgcm91bmRlZC1mdWxsIHRleHQteHMgZm9udC1tZWRpdW0gYmctanVuZ2xlLTEwMCB0ZXh0LWp1bmdsZS04MDBcIj5cbiAgICAgICAgICAgIHtsb2FkaW5nID8gJy4uLicgOiBgJHtzZWN0aW9uQ291bnR9IHNlY3Rpb24ke3NlY3Rpb25Db3VudCAhPT0gMSA/ICdzJyA6ICcnfWB9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMFwiPntpc0V4cGFuZGVkID8gJ+KWvCcgOiAn4pa2J308L3NwYW4+XG4gICAgICA8L2J1dHRvbj5cblxuICAgICAgey8qIFNlY3Rpb24gRWRpdG9yIC0gc2hvd24gd2hlbiBleHBhbmRlZCAqL31cbiAgICAgIHtpc0V4cGFuZGVkICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItdCBib3JkZXItZ3JheS0yMDAgcC02IGJnLWdyYXktNTBcIj5cbiAgICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgICAgcGFnZVR5cGU9e3BhZ2VUeXBlfVxuICAgICAgICAgICAgcGFnZUlkPXtwYWdlSWR9XG4gICAgICAgICAgICBvblNhdmU9e2hhbmRsZVNlY3Rpb25TYXZlfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJJbmxpbmVTZWN0aW9uRWRpdG9yIiwicGFnZVR5cGUiLCJwYWdlSWQiLCJlbnRpdHlOYW1lIiwiZGVmYXVsdEV4cGFuZGVkIiwiaXNFeHBhbmRlZCIsInNldElzRXhwYW5kZWQiLCJ1c2VTdGF0ZSIsInNlY3Rpb25Db3VudCIsInNldFNlY3Rpb25Db3VudCIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwiZmV0Y2hTZWN0aW9uQ291bnQiLCJ1c2VDYWxsYmFjayIsInJlc3BvbnNlIiwiZmV0Y2giLCJyZXN1bHQiLCJqc29uIiwic3VjY2VzcyIsImRhdGEiLCJsZW5ndGgiLCJlcnJvciIsImNvbnNvbGUiLCJ1c2VFZmZlY3QiLCJoYW5kbGVUb2dnbGUiLCJwcmV2IiwiaGFuZGxlU2VjdGlvblNhdmUiLCJkaXYiLCJjbGFzc05hbWUiLCJidXR0b24iLCJvbkNsaWNrIiwic3BhbiIsIlNlY3Rpb25FZGl0b3IiLCJvblNhdmUiXSwibWFwcGluZ3MiOiJBQUFBOzs7OzsrQkF3QmdCQTs7O2VBQUFBOzs7O3VCQXRCaUM7K0JBQ25CO0FBcUJ2QixTQUFTQSxvQkFBb0IsRUFDbENDLFFBQVEsRUFDUkMsTUFBTSxFQUNOQyxVQUFVLEVBQ1ZDLGtCQUFrQixLQUFLLEVBQ0U7SUFDekIsTUFBTSxDQUFDQyxZQUFZQyxjQUFjLEdBQUdDLElBQUFBLGVBQVEsRUFBQ0g7SUFDN0MsTUFBTSxDQUFDSSxjQUFjQyxnQkFBZ0IsR0FBR0YsSUFBQUEsZUFBUSxFQUFTO0lBQ3pELE1BQU0sQ0FBQ0csU0FBU0MsV0FBVyxHQUFHSixJQUFBQSxlQUFRLEVBQUM7SUFFdkMsc0JBQXNCO0lBQ3RCLE1BQU1LLG9CQUFvQkMsSUFBQUEsa0JBQVcsRUFBQztRQUNwQyxJQUFJLENBQUNYLFFBQVE7UUFFYlMsV0FBVztRQUNYLElBQUk7WUFDRixNQUFNRyxXQUFXLE1BQU1DLE1BQU0sQ0FBQyw0QkFBNEIsRUFBRWQsU0FBUyxDQUFDLEVBQUVDLFFBQVE7WUFDaEYsTUFBTWMsU0FBUyxNQUFNRixTQUFTRyxJQUFJO1lBRWxDLElBQUlELE9BQU9FLE9BQU8sRUFBRTtnQkFDbEJULGdCQUFnQk8sT0FBT0csSUFBSSxFQUFFQyxVQUFVO1lBQ3pDO1FBQ0YsRUFBRSxPQUFPQyxPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyxrQ0FBa0NBO1FBQ2xELFNBQVU7WUFDUlYsV0FBVztRQUNiO0lBQ0YsR0FBRztRQUFDVjtRQUFVQztLQUFPO0lBRXJCLCtDQUErQztJQUMvQ3FCLElBQUFBLGdCQUFTLEVBQUM7UUFDUlg7SUFDRixHQUFHO1FBQUNBO0tBQWtCO0lBRXRCLE1BQU1ZLGVBQWU7UUFDbkJsQixjQUFjbUIsQ0FBQUEsT0FBUSxDQUFDQTtJQUN6QjtJQUVBLE1BQU1DLG9CQUFvQjtRQUN4QixtQ0FBbUM7UUFDbkNkO0lBQ0Y7SUFFQSxJQUFJLENBQUNWLFFBQVE7UUFDWCxPQUFPO0lBQ1Q7SUFFQSxxQkFDRSxzQkFBQ3lCO1FBQUlDLFdBQVU7OzBCQUViLHNCQUFDQztnQkFDQ0MsU0FBU047Z0JBQ1RJLFdBQVU7O2tDQUVWLHNCQUFDRDt3QkFBSUMsV0FBVTs7MENBQ2Isc0JBQUNHO2dDQUFLSCxXQUFVOztvQ0FBOEI7b0NBRTNDekIsNEJBQWMsc0JBQUM0Qjt3Q0FBS0gsV0FBVTs7NENBQWlDOzRDQUFLekI7Ozs7OzBDQUV2RSxxQkFBQzRCO2dDQUFLSCxXQUFVOzBDQUNibEIsVUFBVSxRQUFRLEdBQUdGLGFBQWEsUUFBUSxFQUFFQSxpQkFBaUIsSUFBSSxNQUFNLElBQUk7Ozs7a0NBR2hGLHFCQUFDdUI7d0JBQUtILFdBQVU7a0NBQWlCdkIsYUFBYSxNQUFNOzs7O1lBSXJEQSw0QkFDQyxxQkFBQ3NCO2dCQUFJQyxXQUFVOzBCQUNiLGNBQUEscUJBQUNJLDRCQUFhO29CQUNaL0IsVUFBVUE7b0JBQ1ZDLFFBQVFBO29CQUNSK0IsUUFBUVA7Ozs7O0FBTXBCIn0=