{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/InlineSectionEditor.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, useEffect } from 'react';\nimport { SectionEditor } from './SectionEditor';\nimport { Button } from '@/components/ui/Button';\n\ninterface InlineSectionEditorProps {\n  pageType: 'activity' | 'event' | 'accommodation' | 'room_type' | 'custom' | 'home';\n  pageId: string;\n  entityName?: string;\n  defaultExpanded?: boolean;\n}\n\n/**\n * InlineSectionEditor - Embeddable section editor for admin pages\n * \n * Displays section management inline underneath the entity being edited.\n * \n * Features:\n * - Collapsible/expandable interface\n * - Shows section count\n * - Embedded SectionEditor component\n * - Minimal visual footprint when collapsed\n */\nexport function InlineSectionEditor({ \n  pageType, \n  pageId, \n  entityName,\n  defaultExpanded = false \n}: InlineSectionEditorProps) {\n  const [isExpanded, setIsExpanded] = useState(defaultExpanded);\n  const [sectionCount, setSectionCount] = useState<number>(0);\n  const [loading, setLoading] = useState(false);\n\n  // Fetch section count\n  const fetchSectionCount = useCallback(async () => {\n    if (!pageId) return;\n    \n    setLoading(true);\n    try {\n      const response = await fetch(`/api/admin/sections/by-page/${pageType}/${pageId}`);\n      const result = await response.json();\n      \n      if (result.success) {\n        setSectionCount(result.data?.length || 0);\n      }\n    } catch (error) {\n      console.error('Failed to fetch section count:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [pageType, pageId]);\n\n  // Fetch count on mount and when pageId changes\n  useEffect(() => {\n    fetchSectionCount();\n  }, [fetchSectionCount]);\n\n  const handleToggle = () => {\n    setIsExpanded(prev => !prev);\n  };\n\n  const handleSectionSave = () => {\n    // Refresh section count after save\n    fetchSectionCount();\n  };\n\n  if (!pageId) {\n    return null;\n  }\n\n  return (\n    <div className=\"border border-gray-200 rounded-lg bg-white mt-6\">\n      {/* Header - always visible */}\n      <button\n        onClick={handleToggle}\n        className=\"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors text-left\"\n      >\n        <div className=\"flex items-center gap-3\">\n          <span className=\"font-semibold text-gray-900\">\n            Page Sections\n            {entityName && <span className=\"text-gray-500 font-normal ml-2\">for {entityName}</span>}\n          </span>\n          <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-jungle-100 text-jungle-800\">\n            {loading ? '...' : `${sectionCount} section${sectionCount !== 1 ? 's' : ''}`}\n          </span>\n        </div>\n        <span className=\"text-gray-500\">{isExpanded ? '▼' : '▶'}</span>\n      </button>\n\n      {/* Section Editor - shown when expanded */}\n      {isExpanded && (\n        <div className=\"border-t border-gray-200 p-6 bg-gray-50\">\n          <SectionEditor\n            pageType={pageType}\n            pageId={pageId}\n            onSave={handleSectionSave}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["InlineSectionEditor","pageType","pageId","entityName","defaultExpanded","isExpanded","setIsExpanded","useState","sectionCount","setSectionCount","loading","setLoading","fetchSectionCount","useCallback","response","fetch","result","json","success","data","length","error","console","useEffect","handleToggle","prev","handleSectionSave","div","className","button","onClick","span","SectionEditor","onSave"],"mappings":"AAAA;;;;;+BAwBgBA;;;eAAAA;;;;uBAtBiC;+BACnB;AAqBvB,SAASA,oBAAoB,EAClCC,QAAQ,EACRC,MAAM,EACNC,UAAU,EACVC,kBAAkB,KAAK,EACE;IACzB,MAAM,CAACC,YAAYC,cAAc,GAAGC,IAAAA,eAAQ,EAACH;IAC7C,MAAM,CAACI,cAAcC,gBAAgB,GAAGF,IAAAA,eAAQ,EAAS;IACzD,MAAM,CAACG,SAASC,WAAW,GAAGJ,IAAAA,eAAQ,EAAC;IAEvC,sBAAsB;IACtB,MAAMK,oBAAoBC,IAAAA,kBAAW,EAAC;QACpC,IAAI,CAACX,QAAQ;QAEbS,WAAW;QACX,IAAI;YACF,MAAMG,WAAW,MAAMC,MAAM,CAAC,4BAA4B,EAAEd,SAAS,CAAC,EAAEC,QAAQ;YAChF,MAAMc,SAAS,MAAMF,SAASG,IAAI;YAElC,IAAID,OAAOE,OAAO,EAAE;gBAClBT,gBAAgBO,OAAOG,IAAI,EAAEC,UAAU;YACzC;QACF,EAAE,OAAOC,OAAO;YACdC,QAAQD,KAAK,CAAC,kCAAkCA;QAClD,SAAU;YACRV,WAAW;QACb;IACF,GAAG;QAACV;QAAUC;KAAO;IAErB,+CAA+C;IAC/CqB,IAAAA,gBAAS,EAAC;QACRX;IACF,GAAG;QAACA;KAAkB;IAEtB,MAAMY,eAAe;QACnBlB,cAAcmB,CAAAA,OAAQ,CAACA;IACzB;IAEA,MAAMC,oBAAoB;QACxB,mCAAmC;QACnCd;IACF;IAEA,IAAI,CAACV,QAAQ;QACX,OAAO;IACT;IAEA,qBACE,sBAACyB;QAAIC,WAAU;;0BAEb,sBAACC;gBACCC,SAASN;gBACTI,WAAU;;kCAEV,sBAACD;wBAAIC,WAAU;;0CACb,sBAACG;gCAAKH,WAAU;;oCAA8B;oCAE3CzB,4BAAc,sBAAC4B;wCAAKH,WAAU;;4CAAiC;4CAAKzB;;;;;0CAEvE,qBAAC4B;gCAAKH,WAAU;0CACblB,UAAU,QAAQ,GAAGF,aAAa,QAAQ,EAAEA,iBAAiB,IAAI,MAAM,IAAI;;;;kCAGhF,qBAACuB;wBAAKH,WAAU;kCAAiBvB,aAAa,MAAM;;;;YAIrDA,4BACC,qBAACsB;gBAAIC,WAAU;0BACb,cAAA,qBAACI,4BAAa;oBACZ/B,UAAUA;oBACVC,QAAQA;oBACR+B,QAAQP;;;;;AAMpB"}