b13d99d409d363adbb7490e660fb19af
/**
 * Property-Based Tests for Activity Management Page
 * 
 * Tests universal properties that should hold across all valid inputs.
 * Uses fast-check for property-based testing.
 */ "use strict";
// Mock Next.js router
jest.mock('next/navigation', ()=>({
        useRouter: ()=>({
                push: jest.fn(),
                replace: jest.fn(),
                prefetch: jest.fn()
            }),
        useSearchParams: ()=>({
                get: jest.fn(()=>null)
            })
    }));
// Mock toast context
jest.mock('@/components/ui/ToastContext', ()=>({
        useToast: ()=>({
                addToast: jest.fn()
            })
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
require("@testing-library/jest-dom");
const _fastcheck = /*#__PURE__*/ _interop_require_wildcard(require("fast-check"));
const _page = /*#__PURE__*/ _interop_require_default(require("./page"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Mock fetch globally
global.fetch = jest.fn();
// Add proper cleanup
beforeEach(()=>{
    jest.clearAllMocks();
    // Clear any existing DOM
    document.body.innerHTML = '';
});
afterEach(()=>{
    jest.clearAllMocks();
    // Only cleanup timers if fake timers are being used
    if (jest.isMockFunction(setTimeout)) {
        jest.runOnlyPendingTimers();
        jest.useRealTimers();
    }
});
/**
 * Helper to create mock activity with capacity data
 */ function createMockActivity(overrides = {}) {
    return {
        id: overrides.id || 'activity-1',
        name: overrides.name || 'Test Activity',
        eventId: overrides.eventId || null,
        activityType: overrides.activityType || 'activity',
        startTime: overrides.startTime || '2025-06-15T10:00:00Z',
        endTime: overrides.endTime || null,
        capacity: overrides.capacity !== undefined ? overrides.capacity : 20,
        costPerPerson: overrides.costPerPerson || null,
        hostSubsidy: overrides.hostSubsidy || null,
        adultsOnly: overrides.adultsOnly || false,
        plusOneAllowed: overrides.plusOneAllowed || true,
        status: overrides.status || 'published',
        displayOrder: overrides.displayOrder || 0,
        currentRsvps: overrides.currentRsvps !== undefined ? overrides.currentRsvps : 0,
        utilizationPercentage: overrides.utilizationPercentage !== undefined ? overrides.utilizationPercentage : overrides.capacity && overrides.currentRsvps !== undefined ? overrides.currentRsvps / overrides.capacity * 100 : 0,
        description: overrides.description || null,
        locationId: overrides.locationId || null,
        visibility: overrides.visibility || [],
        createdAt: overrides.createdAt || '2025-01-01T00:00:00Z',
        updatedAt: overrides.updatedAt || '2025-01-01T00:00:00Z'
    };
}
/**
 * Helper to setup fetch mocks
 */ function setupFetchMocks(activities = []) {
    global.fetch.mockImplementation((url)=>{
        if (url.includes('/api/admin/activities') && !url.includes('/capacity')) {
            return Promise.resolve({
                ok: true,
                json: ()=>Promise.resolve({
                        success: true,
                        data: {
                            activities
                        }
                    })
            });
        }
        if (url.includes('/capacity')) {
            const activityId = url.split('/')[4];
            const activity = activities.find((a)=>a.id === activityId);
            if (activity) {
                return Promise.resolve({
                    ok: true,
                    json: ()=>Promise.resolve({
                            success: true,
                            data: {
                                currentAttendees: activity.currentRsvps || 0,
                                utilizationPercentage: activity.utilizationPercentage || 0
                            }
                        })
                });
            }
        }
        if (url.includes('/api/admin/events')) {
            return Promise.resolve({
                ok: true,
                json: ()=>Promise.resolve({
                        success: true,
                        data: {
                            events: []
                        }
                    })
            });
        }
        if (url.includes('/api/admin/locations')) {
            return Promise.resolve({
                ok: true,
                json: ()=>Promise.resolve({
                        success: true,
                        data: []
                    })
            });
        }
        return Promise.resolve({
            ok: false,
            json: ()=>Promise.resolve({
                    success: false,
                    error: {
                        message: 'Not found'
                    }
                })
        });
    });
}
describe('Feature: admin-ui-modernization, Property 10: Capacity warning highlighting', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    /**
   * Property 10: Capacity warning highlighting
   * 
   * For any activity with capacity utilization >= 90%, the activity row in the data table
   * should be styled with warning colors to indicate near-capacity status.
   * 
   * Validates: Requirements 5.3
   */ it('should highlight activities at 90%+ capacity with warning colors', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(// Generate capacity between 1 and 100
        _fastcheck.integer({
            min: 1,
            max: 100
        }), // Generate utilization percentage between 90 and 100
        _fastcheck.integer({
            min: 90,
            max: 100
        }), async (capacity, utilizationPercentage)=>{
            // Calculate current RSVPs based on utilization
            const currentRsvps = Math.floor(utilizationPercentage / 100 * capacity);
            const activity = createMockActivity({
                id: `activity-${capacity}-${utilizationPercentage}`,
                name: `Unique Activity ${capacity}-${utilizationPercentage}`,
                capacity,
                currentRsvps,
                utilizationPercentage
            });
            setupFetchMocks([
                activity
            ]);
            const { container, unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            try {
                // Wait for activities to load with increased timeout
                await (0, _react.waitFor)(()=>{
                    expect(_react.screen.queryByText('Loading...')).not.toBeInTheDocument();
                }, {
                    timeout: 2000
                });
                // Find the row for this activity - use getAllByText and get the first one
                await (0, _react.waitFor)(()=>{
                    const elements = _react.screen.getAllByText(activity.name);
                    expect(elements.length).toBeGreaterThan(0);
                }, {
                    timeout: 1000
                });
                // Check if the row has warning styling
                const elements = _react.screen.getAllByText(activity.name);
                const row = elements[0].closest('tr');
                expect(row).toBeInTheDocument();
                // The row should have volcano (warning) background color classes
                expect(row?.className).toMatch(/bg-volcano/);
            } finally{
                unmount();
            }
        }), {
            numRuns: 10
        } // Reduced runs for better performance
        );
    }, 15000); // Increased test timeout
    it('should NOT highlight activities below 90% capacity', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(// Generate capacity between 1 and 100
        _fastcheck.integer({
            min: 1,
            max: 100
        }), // Generate utilization percentage between 0 and 89
        _fastcheck.integer({
            min: 0,
            max: 89
        }), async (capacity, utilizationPercentage)=>{
            // Calculate current RSVPs based on utilization
            const currentRsvps = Math.floor(utilizationPercentage / 100 * capacity);
            const activity = createMockActivity({
                id: `activity-${capacity}-${utilizationPercentage}`,
                name: `Unique Activity ${capacity}-${utilizationPercentage}`,
                capacity,
                currentRsvps,
                utilizationPercentage
            });
            setupFetchMocks([
                activity
            ]);
            const { container, unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            try {
                // Wait for activities to load with increased timeout
                await (0, _react.waitFor)(()=>{
                    expect(_react.screen.queryByText('Loading...')).not.toBeInTheDocument();
                }, {
                    timeout: 2000
                });
                // Find the row for this activity
                await (0, _react.waitFor)(()=>{
                    const elements = _react.screen.getAllByText(activity.name);
                    expect(elements.length).toBeGreaterThan(0);
                }, {
                    timeout: 1000
                });
                // Check that the row does NOT have warning styling
                const elements = _react.screen.getAllByText(activity.name);
                const row = elements[0].closest('tr');
                expect(row).toBeInTheDocument();
                // The row should NOT have volcano (warning) background color classes
                expect(row?.className).not.toMatch(/bg-volcano/);
            } finally{
                unmount();
            }
        }), {
            numRuns: 10
        } // Reduced runs for better performance
        );
    }, 15000); // Increased test timeout
});
describe('Feature: admin-ui-modernization, Property 11: Capacity utilization display', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    /**
   * Property 11: Capacity utilization display
   * 
   * For any activity being edited that has existing RSVPs, the form modal should display
   * the current capacity utilization percentage.
   * 
   * Validates: Requirements 5.7
   */ it('should display capacity utilization percentage in edit form for activities with RSVPs', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(// Generate capacity between 1 and 100
        _fastcheck.integer({
            min: 1,
            max: 100
        }), // Generate current RSVPs between 0 and capacity
        _fastcheck.integer({
            min: 0,
            max: 100
        }), async (capacity, currentRsvps)=>{
            // Ensure currentRsvps doesn't exceed capacity
            const actualRsvps = Math.min(currentRsvps, capacity);
            const utilizationPercentage = actualRsvps / capacity * 100;
            const activity = createMockActivity({
                id: `activity-${capacity}-${actualRsvps}`,
                name: `Activity with ${actualRsvps} RSVPs`,
                capacity,
                currentRsvps: actualRsvps,
                utilizationPercentage
            });
            setupFetchMocks([
                activity
            ]);
            const { container, unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            try {
                // Wait for activities to load with increased timeout
                await (0, _react.waitFor)(()=>{
                    expect(_react.screen.queryByText('Loading...')).not.toBeInTheDocument();
                }, {
                    timeout: 2000
                });
                // Wait for the activity to appear
                await (0, _react.waitFor)(()=>{
                    const elements = _react.screen.getAllByText(activity.name);
                    expect(elements.length).toBeGreaterThan(0);
                }, {
                    timeout: 1000
                });
                // The capacity column should display the utilization percentage
                const capacityText = `${actualRsvps}/${capacity} (${Math.round(utilizationPercentage)}%)`;
                // Check if the capacity information is displayed in the table
                await (0, _react.waitFor)(()=>{
                    const tableContent = container.textContent;
                    expect(tableContent).toContain(`${actualRsvps}/${capacity}`);
                }, {
                    timeout: 1000
                });
            } finally{
                unmount();
            }
        }), {
            numRuns: 5
        } // Reduced runs for better performance
        );
    }, 15000); // Increased test timeout
    it('should display "Unlimited" for activities without capacity limits', async ()=>{
        const uniqueName = `Unlimited Activity ${Date.now()}`;
        const activity = createMockActivity({
            id: `unlimited-activity-${Date.now()}`,
            name: uniqueName,
            capacity: null,
            currentRsvps: 50,
            utilizationPercentage: null
        });
        setupFetchMocks([
            activity
        ]);
        const { unmount, container } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
        try {
            // Wait for activities to load with increased timeout
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Loading...')).not.toBeInTheDocument();
            }, {
                timeout: 2000
            });
            // Wait for the activity to appear using container query
            await (0, _react.waitFor)(()=>{
                const tableRows = container.querySelectorAll('tbody tr');
                const activityRow = Array.from(tableRows).find((row)=>row.textContent?.includes(activity.name));
                expect(activityRow).toBeTruthy();
            }, {
                timeout: 1000
            });
            // The capacity column should display "Unlimited" using getAllByText
            await (0, _react.waitFor)(()=>{
                const unlimitedElements = _react.screen.getAllByText('Unlimited');
                expect(unlimitedElements.length).toBeGreaterThan(0);
            }, {
                timeout: 1000
            });
        } finally{
            unmount();
        }
    }, 10000); // Increased test timeout
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FkbWluL2FjdGl2aXRpZXMvcGFnZS5wcm9wZXJ0eS50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFByb3BlcnR5LUJhc2VkIFRlc3RzIGZvciBBY3Rpdml0eSBNYW5hZ2VtZW50IFBhZ2VcbiAqIFxuICogVGVzdHMgdW5pdmVyc2FsIHByb3BlcnRpZXMgdGhhdCBzaG91bGQgaG9sZCBhY3Jvc3MgYWxsIHZhbGlkIGlucHV0cy5cbiAqIFVzZXMgZmFzdC1jaGVjayBmb3IgcHJvcGVydHktYmFzZWQgdGVzdGluZy5cbiAqL1xuXG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0ICdAdGVzdGluZy1saWJyYXJ5L2plc3QtZG9tJztcbmltcG9ydCAqIGFzIGZjIGZyb20gJ2Zhc3QtY2hlY2snO1xuaW1wb3J0IEFjdGl2aXRpZXNQYWdlIGZyb20gJy4vcGFnZSc7XG5cbi8vIE1vY2sgTmV4dC5qcyByb3V0ZXJcbmplc3QubW9jaygnbmV4dC9uYXZpZ2F0aW9uJywgKCkgPT4gKHtcbiAgdXNlUm91dGVyOiAoKSA9PiAoe1xuICAgIHB1c2g6IGplc3QuZm4oKSxcbiAgICByZXBsYWNlOiBqZXN0LmZuKCksXG4gICAgcHJlZmV0Y2g6IGplc3QuZm4oKSxcbiAgfSksXG4gIHVzZVNlYXJjaFBhcmFtczogKCkgPT4gKHtcbiAgICBnZXQ6IGplc3QuZm4oKCkgPT4gbnVsbCksXG4gIH0pLFxufSkpO1xuXG4vLyBNb2NrIHRvYXN0IGNvbnRleHRcbmplc3QubW9jaygnQC9jb21wb25lbnRzL3VpL1RvYXN0Q29udGV4dCcsICgpID0+ICh7XG4gIHVzZVRvYXN0OiAoKSA9PiAoe1xuICAgIGFkZFRvYXN0OiBqZXN0LmZuKCksXG4gIH0pLFxufSkpO1xuXG4vLyBNb2NrIGZldGNoIGdsb2JhbGx5XG5nbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCk7XG5cbi8vIEFkZCBwcm9wZXIgY2xlYW51cFxuYmVmb3JlRWFjaCgoKSA9PiB7XG4gIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAvLyBDbGVhciBhbnkgZXhpc3RpbmcgRE9NXG4gIGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gJyc7XG59KTtcblxuYWZ0ZXJFYWNoKCgpID0+IHtcbiAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIC8vIE9ubHkgY2xlYW51cCB0aW1lcnMgaWYgZmFrZSB0aW1lcnMgYXJlIGJlaW5nIHVzZWRcbiAgaWYgKGplc3QuaXNNb2NrRnVuY3Rpb24oc2V0VGltZW91dCkpIHtcbiAgICBqZXN0LnJ1bk9ubHlQZW5kaW5nVGltZXJzKCk7XG4gICAgamVzdC51c2VSZWFsVGltZXJzKCk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEhlbHBlciB0byBjcmVhdGUgbW9jayBhY3Rpdml0eSB3aXRoIGNhcGFjaXR5IGRhdGFcbiAqL1xuZnVuY3Rpb24gY3JlYXRlTW9ja0FjdGl2aXR5KG92ZXJyaWRlczogYW55ID0ge30pIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogb3ZlcnJpZGVzLmlkIHx8ICdhY3Rpdml0eS0xJyxcbiAgICBuYW1lOiBvdmVycmlkZXMubmFtZSB8fCAnVGVzdCBBY3Rpdml0eScsXG4gICAgZXZlbnRJZDogb3ZlcnJpZGVzLmV2ZW50SWQgfHwgbnVsbCxcbiAgICBhY3Rpdml0eVR5cGU6IG92ZXJyaWRlcy5hY3Rpdml0eVR5cGUgfHwgJ2FjdGl2aXR5JyxcbiAgICBzdGFydFRpbWU6IG92ZXJyaWRlcy5zdGFydFRpbWUgfHwgJzIwMjUtMDYtMTVUMTA6MDA6MDBaJyxcbiAgICBlbmRUaW1lOiBvdmVycmlkZXMuZW5kVGltZSB8fCBudWxsLFxuICAgIGNhcGFjaXR5OiBvdmVycmlkZXMuY2FwYWNpdHkgIT09IHVuZGVmaW5lZCA/IG92ZXJyaWRlcy5jYXBhY2l0eSA6IDIwLFxuICAgIGNvc3RQZXJQZXJzb246IG92ZXJyaWRlcy5jb3N0UGVyUGVyc29uIHx8IG51bGwsXG4gICAgaG9zdFN1YnNpZHk6IG92ZXJyaWRlcy5ob3N0U3Vic2lkeSB8fCBudWxsLFxuICAgIGFkdWx0c09ubHk6IG92ZXJyaWRlcy5hZHVsdHNPbmx5IHx8IGZhbHNlLFxuICAgIHBsdXNPbmVBbGxvd2VkOiBvdmVycmlkZXMucGx1c09uZUFsbG93ZWQgfHwgdHJ1ZSxcbiAgICBzdGF0dXM6IG92ZXJyaWRlcy5zdGF0dXMgfHwgJ3B1Ymxpc2hlZCcsXG4gICAgZGlzcGxheU9yZGVyOiBvdmVycmlkZXMuZGlzcGxheU9yZGVyIHx8IDAsXG4gICAgY3VycmVudFJzdnBzOiBvdmVycmlkZXMuY3VycmVudFJzdnBzICE9PSB1bmRlZmluZWQgPyBvdmVycmlkZXMuY3VycmVudFJzdnBzIDogMCxcbiAgICB1dGlsaXphdGlvblBlcmNlbnRhZ2U6IG92ZXJyaWRlcy51dGlsaXphdGlvblBlcmNlbnRhZ2UgIT09IHVuZGVmaW5lZCBcbiAgICAgID8gb3ZlcnJpZGVzLnV0aWxpemF0aW9uUGVyY2VudGFnZSBcbiAgICAgIDogKG92ZXJyaWRlcy5jYXBhY2l0eSAmJiBvdmVycmlkZXMuY3VycmVudFJzdnBzICE9PSB1bmRlZmluZWQgXG4gICAgICAgICAgPyAob3ZlcnJpZGVzLmN1cnJlbnRSc3ZwcyAvIG92ZXJyaWRlcy5jYXBhY2l0eSkgKiAxMDAgXG4gICAgICAgICAgOiAwKSxcbiAgICBkZXNjcmlwdGlvbjogb3ZlcnJpZGVzLmRlc2NyaXB0aW9uIHx8IG51bGwsXG4gICAgbG9jYXRpb25JZDogb3ZlcnJpZGVzLmxvY2F0aW9uSWQgfHwgbnVsbCxcbiAgICB2aXNpYmlsaXR5OiBvdmVycmlkZXMudmlzaWJpbGl0eSB8fCBbXSxcbiAgICBjcmVhdGVkQXQ6IG92ZXJyaWRlcy5jcmVhdGVkQXQgfHwgJzIwMjUtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICB1cGRhdGVkQXQ6IG92ZXJyaWRlcy51cGRhdGVkQXQgfHwgJzIwMjUtMDEtMDFUMDA6MDA6MDBaJyxcbiAgfTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gc2V0dXAgZmV0Y2ggbW9ja3NcbiAqL1xuZnVuY3Rpb24gc2V0dXBGZXRjaE1vY2tzKGFjdGl2aXRpZXM6IGFueVtdID0gW10pIHtcbiAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigodXJsOiBzdHJpbmcpID0+IHtcbiAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2FkbWluL2FjdGl2aXRpZXMnKSAmJiAhdXJsLmluY2x1ZGVzKCcvY2FwYWNpdHknKSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YTogeyBhY3Rpdml0aWVzIH0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh1cmwuaW5jbHVkZXMoJy9jYXBhY2l0eScpKSB7XG4gICAgICBjb25zdCBhY3Rpdml0eUlkID0gdXJsLnNwbGl0KCcvJylbNF07XG4gICAgICBjb25zdCBhY3Rpdml0eSA9IGFjdGl2aXRpZXMuZmluZChhID0+IGEuaWQgPT09IGFjdGl2aXR5SWQpO1xuICAgICAgaWYgKGFjdGl2aXR5KSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBjdXJyZW50QXR0ZW5kZWVzOiBhY3Rpdml0eS5jdXJyZW50UnN2cHMgfHwgMCxcbiAgICAgICAgICAgICAgdXRpbGl6YXRpb25QZXJjZW50YWdlOiBhY3Rpdml0eS51dGlsaXphdGlvblBlcmNlbnRhZ2UgfHwgMCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2FkbWluL2V2ZW50cycpKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7IGV2ZW50czogW10gfSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9hZG1pbi9sb2NhdGlvbnMnKSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YTogW10sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgb2s6IGZhbHNlLFxuICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiB7IG1lc3NhZ2U6ICdOb3QgZm91bmQnIH0gfSksXG4gICAgfSk7XG4gIH0pO1xufVxuXG5kZXNjcmliZSgnRmVhdHVyZTogYWRtaW4tdWktbW9kZXJuaXphdGlvbiwgUHJvcGVydHkgMTA6IENhcGFjaXR5IHdhcm5pbmcgaGlnaGxpZ2h0aW5nJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIFByb3BlcnR5IDEwOiBDYXBhY2l0eSB3YXJuaW5nIGhpZ2hsaWdodGluZ1xuICAgKiBcbiAgICogRm9yIGFueSBhY3Rpdml0eSB3aXRoIGNhcGFjaXR5IHV0aWxpemF0aW9uID49IDkwJSwgdGhlIGFjdGl2aXR5IHJvdyBpbiB0aGUgZGF0YSB0YWJsZVxuICAgKiBzaG91bGQgYmUgc3R5bGVkIHdpdGggd2FybmluZyBjb2xvcnMgdG8gaW5kaWNhdGUgbmVhci1jYXBhY2l0eSBzdGF0dXMuXG4gICAqIFxuICAgKiBWYWxpZGF0ZXM6IFJlcXVpcmVtZW50cyA1LjNcbiAgICovXG4gIGl0KCdzaG91bGQgaGlnaGxpZ2h0IGFjdGl2aXRpZXMgYXQgOTAlKyBjYXBhY2l0eSB3aXRoIHdhcm5pbmcgY29sb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGZjLmFzc2VydChcbiAgICAgIGZjLmFzeW5jUHJvcGVydHkoXG4gICAgICAgIC8vIEdlbmVyYXRlIGNhcGFjaXR5IGJldHdlZW4gMSBhbmQgMTAwXG4gICAgICAgIGZjLmludGVnZXIoeyBtaW46IDEsIG1heDogMTAwIH0pLFxuICAgICAgICAvLyBHZW5lcmF0ZSB1dGlsaXphdGlvbiBwZXJjZW50YWdlIGJldHdlZW4gOTAgYW5kIDEwMFxuICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiA5MCwgbWF4OiAxMDAgfSksXG4gICAgICAgIGFzeW5jIChjYXBhY2l0eSwgdXRpbGl6YXRpb25QZXJjZW50YWdlKSA9PiB7XG4gICAgICAgICAgLy8gQ2FsY3VsYXRlIGN1cnJlbnQgUlNWUHMgYmFzZWQgb24gdXRpbGl6YXRpb25cbiAgICAgICAgICBjb25zdCBjdXJyZW50UnN2cHMgPSBNYXRoLmZsb29yKCh1dGlsaXphdGlvblBlcmNlbnRhZ2UgLyAxMDApICogY2FwYWNpdHkpO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGFjdGl2aXR5ID0gY3JlYXRlTW9ja0FjdGl2aXR5KHtcbiAgICAgICAgICAgIGlkOiBgYWN0aXZpdHktJHtjYXBhY2l0eX0tJHt1dGlsaXphdGlvblBlcmNlbnRhZ2V9YCxcbiAgICAgICAgICAgIG5hbWU6IGBVbmlxdWUgQWN0aXZpdHkgJHtjYXBhY2l0eX0tJHt1dGlsaXphdGlvblBlcmNlbnRhZ2V9YCxcbiAgICAgICAgICAgIGNhcGFjaXR5LFxuICAgICAgICAgICAgY3VycmVudFJzdnBzLFxuICAgICAgICAgICAgdXRpbGl6YXRpb25QZXJjZW50YWdlLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgc2V0dXBGZXRjaE1vY2tzKFthY3Rpdml0eV0pO1xuXG4gICAgICAgICAgY29uc3QgeyBjb250YWluZXIsIHVubW91bnQgfSA9IHJlbmRlcig8QWN0aXZpdGllc1BhZ2UgLz4pO1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdhaXQgZm9yIGFjdGl2aXRpZXMgdG8gbG9hZCB3aXRoIGluY3JlYXNlZCB0aW1lb3V0XG4gICAgICAgICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnTG9hZGluZy4uLicpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgICAgIH0sIHsgdGltZW91dDogMjAwMCB9KTtcblxuICAgICAgICAgICAgLy8gRmluZCB0aGUgcm93IGZvciB0aGlzIGFjdGl2aXR5IC0gdXNlIGdldEFsbEJ5VGV4dCBhbmQgZ2V0IHRoZSBmaXJzdCBvbmVcbiAgICAgICAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoYWN0aXZpdHkubmFtZSk7XG4gICAgICAgICAgICAgIGV4cGVjdChlbGVtZW50cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgICAgIH0sIHsgdGltZW91dDogMTAwMCB9KTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHJvdyBoYXMgd2FybmluZyBzdHlsaW5nXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoYWN0aXZpdHkubmFtZSk7XG4gICAgICAgICAgICBjb25zdCByb3cgPSBlbGVtZW50c1swXS5jbG9zZXN0KCd0cicpO1xuICAgICAgICAgICAgZXhwZWN0KHJvdykudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVGhlIHJvdyBzaG91bGQgaGF2ZSB2b2xjYW5vICh3YXJuaW5nKSBiYWNrZ3JvdW5kIGNvbG9yIGNsYXNzZXNcbiAgICAgICAgICAgIGV4cGVjdChyb3c/LmNsYXNzTmFtZSkudG9NYXRjaCgvYmctdm9sY2Fuby8pO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB1bm1vdW50KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApLFxuICAgICAgeyBudW1SdW5zOiAxMCB9IC8vIFJlZHVjZWQgcnVucyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG4gICAgKTtcbiAgfSwgMTUwMDApOyAvLyBJbmNyZWFzZWQgdGVzdCB0aW1lb3V0XG5cbiAgaXQoJ3Nob3VsZCBOT1QgaGlnaGxpZ2h0IGFjdGl2aXRpZXMgYmVsb3cgOTAlIGNhcGFjaXR5JywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGZjLmFzc2VydChcbiAgICAgIGZjLmFzeW5jUHJvcGVydHkoXG4gICAgICAgIC8vIEdlbmVyYXRlIGNhcGFjaXR5IGJldHdlZW4gMSBhbmQgMTAwXG4gICAgICAgIGZjLmludGVnZXIoeyBtaW46IDEsIG1heDogMTAwIH0pLFxuICAgICAgICAvLyBHZW5lcmF0ZSB1dGlsaXphdGlvbiBwZXJjZW50YWdlIGJldHdlZW4gMCBhbmQgODlcbiAgICAgICAgZmMuaW50ZWdlcih7IG1pbjogMCwgbWF4OiA4OSB9KSxcbiAgICAgICAgYXN5bmMgKGNhcGFjaXR5LCB1dGlsaXphdGlvblBlcmNlbnRhZ2UpID0+IHtcbiAgICAgICAgICAvLyBDYWxjdWxhdGUgY3VycmVudCBSU1ZQcyBiYXNlZCBvbiB1dGlsaXphdGlvblxuICAgICAgICAgIGNvbnN0IGN1cnJlbnRSc3ZwcyA9IE1hdGguZmxvb3IoKHV0aWxpemF0aW9uUGVyY2VudGFnZSAvIDEwMCkgKiBjYXBhY2l0eSk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgYWN0aXZpdHkgPSBjcmVhdGVNb2NrQWN0aXZpdHkoe1xuICAgICAgICAgICAgaWQ6IGBhY3Rpdml0eS0ke2NhcGFjaXR5fS0ke3V0aWxpemF0aW9uUGVyY2VudGFnZX1gLFxuICAgICAgICAgICAgbmFtZTogYFVuaXF1ZSBBY3Rpdml0eSAke2NhcGFjaXR5fS0ke3V0aWxpemF0aW9uUGVyY2VudGFnZX1gLFxuICAgICAgICAgICAgY2FwYWNpdHksXG4gICAgICAgICAgICBjdXJyZW50UnN2cHMsXG4gICAgICAgICAgICB1dGlsaXphdGlvblBlcmNlbnRhZ2UsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBzZXR1cEZldGNoTW9ja3MoW2FjdGl2aXR5XSk7XG5cbiAgICAgICAgICBjb25zdCB7IGNvbnRhaW5lciwgdW5tb3VudCB9ID0gcmVuZGVyKDxBY3Rpdml0aWVzUGFnZSAvPik7XG5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2FpdCBmb3IgYWN0aXZpdGllcyB0byBsb2FkIHdpdGggaW5jcmVhc2VkIHRpbWVvdXRcbiAgICAgICAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAgICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdMb2FkaW5nLi4uJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICAgICAgfSwgeyB0aW1lb3V0OiAyMDAwIH0pO1xuXG4gICAgICAgICAgICAvLyBGaW5kIHRoZSByb3cgZm9yIHRoaXMgYWN0aXZpdHlcbiAgICAgICAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoYWN0aXZpdHkubmFtZSk7XG4gICAgICAgICAgICAgIGV4cGVjdChlbGVtZW50cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgICAgIH0sIHsgdGltZW91dDogMTAwMCB9KTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGUgcm93IGRvZXMgTk9UIGhhdmUgd2FybmluZyBzdHlsaW5nXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoYWN0aXZpdHkubmFtZSk7XG4gICAgICAgICAgICBjb25zdCByb3cgPSBlbGVtZW50c1swXS5jbG9zZXN0KCd0cicpO1xuICAgICAgICAgICAgZXhwZWN0KHJvdykudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVGhlIHJvdyBzaG91bGQgTk9UIGhhdmUgdm9sY2FubyAod2FybmluZykgYmFja2dyb3VuZCBjb2xvciBjbGFzc2VzXG4gICAgICAgICAgICBleHBlY3Qocm93Py5jbGFzc05hbWUpLm5vdC50b01hdGNoKC9iZy12b2xjYW5vLyk7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHVubW91bnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDEwIH0gLy8gUmVkdWNlZCBydW5zIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbiAgICApO1xuICB9LCAxNTAwMCk7IC8vIEluY3JlYXNlZCB0ZXN0IHRpbWVvdXRcbn0pO1xuXG5kZXNjcmliZSgnRmVhdHVyZTogYWRtaW4tdWktbW9kZXJuaXphdGlvbiwgUHJvcGVydHkgMTE6IENhcGFjaXR5IHV0aWxpemF0aW9uIGRpc3BsYXknLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICAvKipcbiAgICogUHJvcGVydHkgMTE6IENhcGFjaXR5IHV0aWxpemF0aW9uIGRpc3BsYXlcbiAgICogXG4gICAqIEZvciBhbnkgYWN0aXZpdHkgYmVpbmcgZWRpdGVkIHRoYXQgaGFzIGV4aXN0aW5nIFJTVlBzLCB0aGUgZm9ybSBtb2RhbCBzaG91bGQgZGlzcGxheVxuICAgKiB0aGUgY3VycmVudCBjYXBhY2l0eSB1dGlsaXphdGlvbiBwZXJjZW50YWdlLlxuICAgKiBcbiAgICogVmFsaWRhdGVzOiBSZXF1aXJlbWVudHMgNS43XG4gICAqL1xuICBpdCgnc2hvdWxkIGRpc3BsYXkgY2FwYWNpdHkgdXRpbGl6YXRpb24gcGVyY2VudGFnZSBpbiBlZGl0IGZvcm0gZm9yIGFjdGl2aXRpZXMgd2l0aCBSU1ZQcycsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBmYy5hc3NlcnQoXG4gICAgICBmYy5hc3luY1Byb3BlcnR5KFxuICAgICAgICAvLyBHZW5lcmF0ZSBjYXBhY2l0eSBiZXR3ZWVuIDEgYW5kIDEwMFxuICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiAxLCBtYXg6IDEwMCB9KSxcbiAgICAgICAgLy8gR2VuZXJhdGUgY3VycmVudCBSU1ZQcyBiZXR3ZWVuIDAgYW5kIGNhcGFjaXR5XG4gICAgICAgIGZjLmludGVnZXIoeyBtaW46IDAsIG1heDogMTAwIH0pLFxuICAgICAgICBhc3luYyAoY2FwYWNpdHksIGN1cnJlbnRSc3ZwcykgPT4ge1xuICAgICAgICAgIC8vIEVuc3VyZSBjdXJyZW50UnN2cHMgZG9lc24ndCBleGNlZWQgY2FwYWNpdHlcbiAgICAgICAgICBjb25zdCBhY3R1YWxSc3ZwcyA9IE1hdGgubWluKGN1cnJlbnRSc3ZwcywgY2FwYWNpdHkpO1xuICAgICAgICAgIGNvbnN0IHV0aWxpemF0aW9uUGVyY2VudGFnZSA9IChhY3R1YWxSc3ZwcyAvIGNhcGFjaXR5KSAqIDEwMDtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBhY3Rpdml0eSA9IGNyZWF0ZU1vY2tBY3Rpdml0eSh7XG4gICAgICAgICAgICBpZDogYGFjdGl2aXR5LSR7Y2FwYWNpdHl9LSR7YWN0dWFsUnN2cHN9YCxcbiAgICAgICAgICAgIG5hbWU6IGBBY3Rpdml0eSB3aXRoICR7YWN0dWFsUnN2cHN9IFJTVlBzYCxcbiAgICAgICAgICAgIGNhcGFjaXR5LFxuICAgICAgICAgICAgY3VycmVudFJzdnBzOiBhY3R1YWxSc3ZwcyxcbiAgICAgICAgICAgIHV0aWxpemF0aW9uUGVyY2VudGFnZSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHNldHVwRmV0Y2hNb2NrcyhbYWN0aXZpdHldKTtcblxuICAgICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCB1bm1vdW50IH0gPSByZW5kZXIoPEFjdGl2aXRpZXNQYWdlIC8+KTtcblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXYWl0IGZvciBhY3Rpdml0aWVzIHRvIGxvYWQgd2l0aCBpbmNyZWFzZWQgdGltZW91dFxuICAgICAgICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgICAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ0xvYWRpbmcuLi4nKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgICAgICB9LCB7IHRpbWVvdXQ6IDIwMDAgfSk7XG5cbiAgICAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSBhY3Rpdml0eSB0byBhcHBlYXJcbiAgICAgICAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoYWN0aXZpdHkubmFtZSk7XG4gICAgICAgICAgICAgIGV4cGVjdChlbGVtZW50cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgICAgIH0sIHsgdGltZW91dDogMTAwMCB9KTtcblxuICAgICAgICAgICAgLy8gVGhlIGNhcGFjaXR5IGNvbHVtbiBzaG91bGQgZGlzcGxheSB0aGUgdXRpbGl6YXRpb24gcGVyY2VudGFnZVxuICAgICAgICAgICAgY29uc3QgY2FwYWNpdHlUZXh0ID0gYCR7YWN0dWFsUnN2cHN9LyR7Y2FwYWNpdHl9ICgke01hdGgucm91bmQodXRpbGl6YXRpb25QZXJjZW50YWdlKX0lKWA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBjYXBhY2l0eSBpbmZvcm1hdGlvbiBpcyBkaXNwbGF5ZWQgaW4gdGhlIHRhYmxlXG4gICAgICAgICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgdGFibGVDb250ZW50ID0gY29udGFpbmVyLnRleHRDb250ZW50O1xuICAgICAgICAgICAgICBleHBlY3QodGFibGVDb250ZW50KS50b0NvbnRhaW4oYCR7YWN0dWFsUnN2cHN9LyR7Y2FwYWNpdHl9YCk7XG4gICAgICAgICAgICB9LCB7IHRpbWVvdXQ6IDEwMDAgfSk7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHVubW91bnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDUgfSAvLyBSZWR1Y2VkIHJ1bnMgZm9yIGJldHRlciBwZXJmb3JtYW5jZVxuICAgICk7XG4gIH0sIDE1MDAwKTsgLy8gSW5jcmVhc2VkIHRlc3QgdGltZW91dFxuXG4gIGl0KCdzaG91bGQgZGlzcGxheSBcIlVubGltaXRlZFwiIGZvciBhY3Rpdml0aWVzIHdpdGhvdXQgY2FwYWNpdHkgbGltaXRzJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHVuaXF1ZU5hbWUgPSBgVW5saW1pdGVkIEFjdGl2aXR5ICR7RGF0ZS5ub3coKX1gO1xuICAgIGNvbnN0IGFjdGl2aXR5ID0gY3JlYXRlTW9ja0FjdGl2aXR5KHtcbiAgICAgIGlkOiBgdW5saW1pdGVkLWFjdGl2aXR5LSR7RGF0ZS5ub3coKX1gLFxuICAgICAgbmFtZTogdW5pcXVlTmFtZSxcbiAgICAgIGNhcGFjaXR5OiBudWxsLFxuICAgICAgY3VycmVudFJzdnBzOiA1MCxcbiAgICAgIHV0aWxpemF0aW9uUGVyY2VudGFnZTogbnVsbCxcbiAgICB9KTtcblxuICAgIHNldHVwRmV0Y2hNb2NrcyhbYWN0aXZpdHldKTtcblxuICAgIGNvbnN0IHsgdW5tb3VudCwgY29udGFpbmVyIH0gPSByZW5kZXIoPEFjdGl2aXRpZXNQYWdlIC8+KTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBXYWl0IGZvciBhY3Rpdml0aWVzIHRvIGxvYWQgd2l0aCBpbmNyZWFzZWQgdGltZW91dFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ0xvYWRpbmcuLi4nKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9LCB7IHRpbWVvdXQ6IDIwMDAgfSk7XG5cbiAgICAgIC8vIFdhaXQgZm9yIHRoZSBhY3Rpdml0eSB0byBhcHBlYXIgdXNpbmcgY29udGFpbmVyIHF1ZXJ5XG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgdGFibGVSb3dzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ3Rib2R5IHRyJyk7XG4gICAgICAgIGNvbnN0IGFjdGl2aXR5Um93ID0gQXJyYXkuZnJvbSh0YWJsZVJvd3MpLmZpbmQocm93ID0+IFxuICAgICAgICAgIHJvdy50ZXh0Q29udGVudD8uaW5jbHVkZXMoYWN0aXZpdHkubmFtZSlcbiAgICAgICAgKTtcbiAgICAgICAgZXhwZWN0KGFjdGl2aXR5Um93KS50b0JlVHJ1dGh5KCk7XG4gICAgICB9LCB7IHRpbWVvdXQ6IDEwMDAgfSk7XG5cbiAgICAgIC8vIFRoZSBjYXBhY2l0eSBjb2x1bW4gc2hvdWxkIGRpc3BsYXkgXCJVbmxpbWl0ZWRcIiB1c2luZyBnZXRBbGxCeVRleHRcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCB1bmxpbWl0ZWRFbGVtZW50cyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoJ1VubGltaXRlZCcpO1xuICAgICAgICBleHBlY3QodW5saW1pdGVkRWxlbWVudHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICB9LCB7IHRpbWVvdXQ6IDEwMDAgfSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHVubW91bnQoKTtcbiAgICB9XG4gIH0sIDEwMDAwKTsgLy8gSW5jcmVhc2VkIHRlc3QgdGltZW91dFxufSk7XG4iXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJ1c2VSb3V0ZXIiLCJwdXNoIiwiZm4iLCJyZXBsYWNlIiwicHJlZmV0Y2giLCJ1c2VTZWFyY2hQYXJhbXMiLCJnZXQiLCJ1c2VUb2FzdCIsImFkZFRvYXN0IiwiZ2xvYmFsIiwiZmV0Y2giLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsImRvY3VtZW50IiwiYm9keSIsImlubmVySFRNTCIsImFmdGVyRWFjaCIsImlzTW9ja0Z1bmN0aW9uIiwic2V0VGltZW91dCIsInJ1bk9ubHlQZW5kaW5nVGltZXJzIiwidXNlUmVhbFRpbWVycyIsImNyZWF0ZU1vY2tBY3Rpdml0eSIsIm92ZXJyaWRlcyIsImlkIiwibmFtZSIsImV2ZW50SWQiLCJhY3Rpdml0eVR5cGUiLCJzdGFydFRpbWUiLCJlbmRUaW1lIiwiY2FwYWNpdHkiLCJ1bmRlZmluZWQiLCJjb3N0UGVyUGVyc29uIiwiaG9zdFN1YnNpZHkiLCJhZHVsdHNPbmx5IiwicGx1c09uZUFsbG93ZWQiLCJzdGF0dXMiLCJkaXNwbGF5T3JkZXIiLCJjdXJyZW50UnN2cHMiLCJ1dGlsaXphdGlvblBlcmNlbnRhZ2UiLCJkZXNjcmlwdGlvbiIsImxvY2F0aW9uSWQiLCJ2aXNpYmlsaXR5IiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0Iiwic2V0dXBGZXRjaE1vY2tzIiwiYWN0aXZpdGllcyIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsInVybCIsImluY2x1ZGVzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJvayIsImpzb24iLCJzdWNjZXNzIiwiZGF0YSIsImFjdGl2aXR5SWQiLCJzcGxpdCIsImFjdGl2aXR5IiwiZmluZCIsImEiLCJjdXJyZW50QXR0ZW5kZWVzIiwiZXZlbnRzIiwiZXJyb3IiLCJtZXNzYWdlIiwiZGVzY3JpYmUiLCJpdCIsImZjIiwiYXNzZXJ0IiwiYXN5bmNQcm9wZXJ0eSIsImludGVnZXIiLCJtaW4iLCJtYXgiLCJNYXRoIiwiZmxvb3IiLCJjb250YWluZXIiLCJ1bm1vdW50IiwicmVuZGVyIiwiQWN0aXZpdGllc1BhZ2UiLCJ3YWl0Rm9yIiwiZXhwZWN0Iiwic2NyZWVuIiwicXVlcnlCeVRleHQiLCJub3QiLCJ0b0JlSW5UaGVEb2N1bWVudCIsInRpbWVvdXQiLCJlbGVtZW50cyIsImdldEFsbEJ5VGV4dCIsImxlbmd0aCIsInRvQmVHcmVhdGVyVGhhbiIsInJvdyIsImNsb3Nlc3QiLCJjbGFzc05hbWUiLCJ0b01hdGNoIiwibnVtUnVucyIsImFjdHVhbFJzdnBzIiwiY2FwYWNpdHlUZXh0Iiwicm91bmQiLCJ0YWJsZUNvbnRlbnQiLCJ0ZXh0Q29udGVudCIsInRvQ29udGFpbiIsInVuaXF1ZU5hbWUiLCJEYXRlIiwibm93IiwidGFibGVSb3dzIiwicXVlcnlTZWxlY3RvckFsbCIsImFjdGl2aXR5Um93IiwiQXJyYXkiLCJmcm9tIiwidG9CZVRydXRoeSIsInVubGltaXRlZEVsZW1lbnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Q0FLQztBQU9ELHNCQUFzQjtBQUN0QkEsS0FBS0MsSUFBSSxDQUFDLG1CQUFtQixJQUFPLENBQUE7UUFDbENDLFdBQVcsSUFBTyxDQUFBO2dCQUNoQkMsTUFBTUgsS0FBS0ksRUFBRTtnQkFDYkMsU0FBU0wsS0FBS0ksRUFBRTtnQkFDaEJFLFVBQVVOLEtBQUtJLEVBQUU7WUFDbkIsQ0FBQTtRQUNBRyxpQkFBaUIsSUFBTyxDQUFBO2dCQUN0QkMsS0FBS1IsS0FBS0ksRUFBRSxDQUFDLElBQU07WUFDckIsQ0FBQTtJQUNGLENBQUE7QUFFQSxxQkFBcUI7QUFDckJKLEtBQUtDLElBQUksQ0FBQyxnQ0FBZ0MsSUFBTyxDQUFBO1FBQy9DUSxVQUFVLElBQU8sQ0FBQTtnQkFDZkMsVUFBVVYsS0FBS0ksRUFBRTtZQUNuQixDQUFBO0lBQ0YsQ0FBQTs7Ozs7dUJBdEJ3QztRQUNqQzttRUFDYTs2REFDTzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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