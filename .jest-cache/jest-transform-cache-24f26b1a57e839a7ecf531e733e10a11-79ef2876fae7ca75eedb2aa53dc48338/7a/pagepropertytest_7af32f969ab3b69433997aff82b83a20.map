{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/app/admin/activities/page.property.test.tsx"],"sourcesContent":["/**\n * Property-Based Tests for Activity Management Page\n * \n * Tests universal properties that should hold across all valid inputs.\n * Uses fast-check for property-based testing.\n */\n\nimport { render, screen, waitFor } from '@testing-library/react';\nimport '@testing-library/jest-dom';\nimport * as fc from 'fast-check';\nimport ActivitiesPage from './page';\n\n// Mock Next.js router\njest.mock('next/navigation', () => ({\n  useRouter: () => ({\n    push: jest.fn(),\n    replace: jest.fn(),\n    prefetch: jest.fn(),\n  }),\n  useSearchParams: () => ({\n    get: jest.fn(() => null),\n  }),\n}));\n\n// Mock toast context\njest.mock('@/components/ui/ToastContext', () => ({\n  useToast: () => ({\n    addToast: jest.fn(),\n  }),\n}));\n\n// Mock fetch globally\nglobal.fetch = jest.fn();\n\n// Add proper cleanup\nbeforeEach(() => {\n  jest.clearAllMocks();\n  // Clear any existing DOM\n  document.body.innerHTML = '';\n});\n\nafterEach(() => {\n  jest.clearAllMocks();\n  // Only cleanup timers if fake timers are being used\n  if (jest.isMockFunction(setTimeout)) {\n    jest.runOnlyPendingTimers();\n    jest.useRealTimers();\n  }\n});\n\n/**\n * Helper to create mock activity with capacity data\n */\nfunction createMockActivity(overrides: any = {}) {\n  return {\n    id: overrides.id || 'activity-1',\n    name: overrides.name || 'Test Activity',\n    eventId: overrides.eventId || null,\n    activityType: overrides.activityType || 'activity',\n    startTime: overrides.startTime || '2025-06-15T10:00:00Z',\n    endTime: overrides.endTime || null,\n    capacity: overrides.capacity !== undefined ? overrides.capacity : 20,\n    costPerPerson: overrides.costPerPerson || null,\n    hostSubsidy: overrides.hostSubsidy || null,\n    adultsOnly: overrides.adultsOnly || false,\n    plusOneAllowed: overrides.plusOneAllowed || true,\n    status: overrides.status || 'published',\n    displayOrder: overrides.displayOrder || 0,\n    currentRsvps: overrides.currentRsvps !== undefined ? overrides.currentRsvps : 0,\n    utilizationPercentage: overrides.utilizationPercentage !== undefined \n      ? overrides.utilizationPercentage \n      : (overrides.capacity && overrides.currentRsvps !== undefined \n          ? (overrides.currentRsvps / overrides.capacity) * 100 \n          : 0),\n    description: overrides.description || null,\n    locationId: overrides.locationId || null,\n    visibility: overrides.visibility || [],\n    createdAt: overrides.createdAt || '2025-01-01T00:00:00Z',\n    updatedAt: overrides.updatedAt || '2025-01-01T00:00:00Z',\n  };\n}\n\n/**\n * Helper to setup fetch mocks\n */\nfunction setupFetchMocks(activities: any[] = []) {\n  (global.fetch as jest.Mock).mockImplementation((url: string) => {\n    if (url.includes('/api/admin/activities') && !url.includes('/capacity')) {\n      return Promise.resolve({\n        ok: true,\n        json: () => Promise.resolve({\n          success: true,\n          data: { activities },\n        }),\n      });\n    }\n    if (url.includes('/capacity')) {\n      const activityId = url.split('/')[4];\n      const activity = activities.find(a => a.id === activityId);\n      if (activity) {\n        return Promise.resolve({\n          ok: true,\n          json: () => Promise.resolve({\n            success: true,\n            data: {\n              currentAttendees: activity.currentRsvps || 0,\n              utilizationPercentage: activity.utilizationPercentage || 0,\n            },\n          }),\n        });\n      }\n    }\n    if (url.includes('/api/admin/events')) {\n      return Promise.resolve({\n        ok: true,\n        json: () => Promise.resolve({\n          success: true,\n          data: { events: [] },\n        }),\n      });\n    }\n    if (url.includes('/api/admin/locations')) {\n      return Promise.resolve({\n        ok: true,\n        json: () => Promise.resolve({\n          success: true,\n          data: [],\n        }),\n      });\n    }\n    return Promise.resolve({\n      ok: false,\n      json: () => Promise.resolve({ success: false, error: { message: 'Not found' } }),\n    });\n  });\n}\n\ndescribe('Feature: admin-ui-modernization, Property 10: Capacity warning highlighting', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  /**\n   * Property 10: Capacity warning highlighting\n   * \n   * For any activity with capacity utilization >= 90%, the activity row in the data table\n   * should be styled with warning colors to indicate near-capacity status.\n   * \n   * Validates: Requirements 5.3\n   */\n  it('should highlight activities at 90%+ capacity with warning colors', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        // Generate capacity between 1 and 100\n        fc.integer({ min: 1, max: 100 }),\n        // Generate utilization percentage between 90 and 100\n        fc.integer({ min: 90, max: 100 }),\n        async (capacity, utilizationPercentage) => {\n          // Calculate current RSVPs based on utilization\n          const currentRsvps = Math.floor((utilizationPercentage / 100) * capacity);\n          \n          const activity = createMockActivity({\n            id: `activity-${capacity}-${utilizationPercentage}`,\n            name: `Unique Activity ${capacity}-${utilizationPercentage}`,\n            capacity,\n            currentRsvps,\n            utilizationPercentage,\n          });\n\n          setupFetchMocks([activity]);\n\n          const { container, unmount } = render(<ActivitiesPage />);\n\n          try {\n            // Wait for activities to load with increased timeout\n            await waitFor(() => {\n              expect(screen.queryByText('Loading...')).not.toBeInTheDocument();\n            }, { timeout: 2000 });\n\n            // Find the row for this activity - use getAllByText and get the first one\n            await waitFor(() => {\n              const elements = screen.getAllByText(activity.name);\n              expect(elements.length).toBeGreaterThan(0);\n            }, { timeout: 1000 });\n\n            // Check if the row has warning styling\n            const elements = screen.getAllByText(activity.name);\n            const row = elements[0].closest('tr');\n            expect(row).toBeInTheDocument();\n            \n            // The row should have volcano (warning) background color classes\n            expect(row?.className).toMatch(/bg-volcano/);\n          } finally {\n            unmount();\n          }\n        }\n      ),\n      { numRuns: 10 } // Reduced runs for better performance\n    );\n  }, 15000); // Increased test timeout\n\n  it('should NOT highlight activities below 90% capacity', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        // Generate capacity between 1 and 100\n        fc.integer({ min: 1, max: 100 }),\n        // Generate utilization percentage between 0 and 89\n        fc.integer({ min: 0, max: 89 }),\n        async (capacity, utilizationPercentage) => {\n          // Calculate current RSVPs based on utilization\n          const currentRsvps = Math.floor((utilizationPercentage / 100) * capacity);\n          \n          const activity = createMockActivity({\n            id: `activity-${capacity}-${utilizationPercentage}`,\n            name: `Unique Activity ${capacity}-${utilizationPercentage}`,\n            capacity,\n            currentRsvps,\n            utilizationPercentage,\n          });\n\n          setupFetchMocks([activity]);\n\n          const { container, unmount } = render(<ActivitiesPage />);\n\n          try {\n            // Wait for activities to load with increased timeout\n            await waitFor(() => {\n              expect(screen.queryByText('Loading...')).not.toBeInTheDocument();\n            }, { timeout: 2000 });\n\n            // Find the row for this activity\n            await waitFor(() => {\n              const elements = screen.getAllByText(activity.name);\n              expect(elements.length).toBeGreaterThan(0);\n            }, { timeout: 1000 });\n\n            // Check that the row does NOT have warning styling\n            const elements = screen.getAllByText(activity.name);\n            const row = elements[0].closest('tr');\n            expect(row).toBeInTheDocument();\n            \n            // The row should NOT have volcano (warning) background color classes\n            expect(row?.className).not.toMatch(/bg-volcano/);\n          } finally {\n            unmount();\n          }\n        }\n      ),\n      { numRuns: 10 } // Reduced runs for better performance\n    );\n  }, 15000); // Increased test timeout\n});\n\ndescribe('Feature: admin-ui-modernization, Property 11: Capacity utilization display', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  /**\n   * Property 11: Capacity utilization display\n   * \n   * For any activity being edited that has existing RSVPs, the form modal should display\n   * the current capacity utilization percentage.\n   * \n   * Validates: Requirements 5.7\n   */\n  it('should display capacity utilization percentage in edit form for activities with RSVPs', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        // Generate capacity between 1 and 100\n        fc.integer({ min: 1, max: 100 }),\n        // Generate current RSVPs between 0 and capacity\n        fc.integer({ min: 0, max: 100 }),\n        async (capacity, currentRsvps) => {\n          // Ensure currentRsvps doesn't exceed capacity\n          const actualRsvps = Math.min(currentRsvps, capacity);\n          const utilizationPercentage = (actualRsvps / capacity) * 100;\n          \n          const activity = createMockActivity({\n            id: `activity-${capacity}-${actualRsvps}`,\n            name: `Activity with ${actualRsvps} RSVPs`,\n            capacity,\n            currentRsvps: actualRsvps,\n            utilizationPercentage,\n          });\n\n          setupFetchMocks([activity]);\n\n          const { container, unmount } = render(<ActivitiesPage />);\n\n          try {\n            // Wait for activities to load with increased timeout\n            await waitFor(() => {\n              expect(screen.queryByText('Loading...')).not.toBeInTheDocument();\n            }, { timeout: 2000 });\n\n            // Wait for the activity to appear\n            await waitFor(() => {\n              const elements = screen.getAllByText(activity.name);\n              expect(elements.length).toBeGreaterThan(0);\n            }, { timeout: 1000 });\n\n            // The capacity column should display the utilization percentage\n            const capacityText = `${actualRsvps}/${capacity} (${Math.round(utilizationPercentage)}%)`;\n            \n            // Check if the capacity information is displayed in the table\n            await waitFor(() => {\n              const tableContent = container.textContent;\n              expect(tableContent).toContain(`${actualRsvps}/${capacity}`);\n            }, { timeout: 1000 });\n          } finally {\n            unmount();\n          }\n        }\n      ),\n      { numRuns: 5 } // Reduced runs for better performance\n    );\n  }, 15000); // Increased test timeout\n\n  it('should display \"Unlimited\" for activities without capacity limits', async () => {\n    const uniqueName = `Unlimited Activity ${Date.now()}`;\n    const activity = createMockActivity({\n      id: `unlimited-activity-${Date.now()}`,\n      name: uniqueName,\n      capacity: null,\n      currentRsvps: 50,\n      utilizationPercentage: null,\n    });\n\n    setupFetchMocks([activity]);\n\n    const { unmount, container } = render(<ActivitiesPage />);\n\n    try {\n      // Wait for activities to load with increased timeout\n      await waitFor(() => {\n        expect(screen.queryByText('Loading...')).not.toBeInTheDocument();\n      }, { timeout: 2000 });\n\n      // Wait for the activity to appear using container query\n      await waitFor(() => {\n        const tableRows = container.querySelectorAll('tbody tr');\n        const activityRow = Array.from(tableRows).find(row => \n          row.textContent?.includes(activity.name)\n        );\n        expect(activityRow).toBeTruthy();\n      }, { timeout: 1000 });\n\n      // The capacity column should display \"Unlimited\" using getAllByText\n      await waitFor(() => {\n        const unlimitedElements = screen.getAllByText('Unlimited');\n        expect(unlimitedElements.length).toBeGreaterThan(0);\n      }, { timeout: 1000 });\n    } finally {\n      unmount();\n    }\n  }, 10000); // Increased test timeout\n});\n"],"names":["jest","mock","useRouter","push","fn","replace","prefetch","useSearchParams","get","useToast","addToast","global","fetch","beforeEach","clearAllMocks","document","body","innerHTML","afterEach","isMockFunction","setTimeout","runOnlyPendingTimers","useRealTimers","createMockActivity","overrides","id","name","eventId","activityType","startTime","endTime","capacity","undefined","costPerPerson","hostSubsidy","adultsOnly","plusOneAllowed","status","displayOrder","currentRsvps","utilizationPercentage","description","locationId","visibility","createdAt","updatedAt","setupFetchMocks","activities","mockImplementation","url","includes","Promise","resolve","ok","json","success","data","activityId","split","activity","find","a","currentAttendees","events","error","message","describe","it","fc","assert","asyncProperty","integer","min","max","Math","floor","container","unmount","render","ActivitiesPage","waitFor","expect","screen","queryByText","not","toBeInTheDocument","timeout","elements","getAllByText","length","toBeGreaterThan","row","closest","className","toMatch","numRuns","actualRsvps","capacityText","round","tableContent","textContent","toContain","uniqueName","Date","now","tableRows","querySelectorAll","activityRow","Array","from","toBeTruthy","unlimitedElements"],"mappings":"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"}