{"version":3,"names":["default","cov_1qk6gn2m64","f","s","GuestLayout","metadata","title","description","children","cookieStore","_headers","cookies","supabase","_ssr","createServerClient","process","env","NEXT_PUBLIC_SUPABASE_URL","NEXT_PUBLIC_SUPABASE_ANON_KEY","getAll","setAll","cookiesToSet","forEach","name","value","options","set","data","session","auth","getSession","b","_navigation","redirect","guest","from","select","eq","user","email","single","_jsxruntime","jsxs","className","jsx","_GuestNavigation","GuestNavigation"],"sources":["/Users/jaron/Desktop/wedding-platform-v2/app/guest/layout.tsx"],"sourcesContent":["import { createServerClient } from '@supabase/ssr';\nimport { cookies } from 'next/headers';\nimport { redirect } from 'next/navigation';\nimport { GuestNavigation } from '@/components/guest/GuestNavigation';\n\nexport const metadata = {\n  title: 'Guest Portal - Costa Rica Wedding',\n  description: 'Manage your wedding attendance, view itinerary, and more',\n};\n\nexport default async function GuestLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const cookieStore = await cookies();\n  const supabase = createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return cookieStore.getAll();\n        },\n        setAll(cookiesToSet) {\n          cookiesToSet.forEach(({ name, value, options }) =>\n            cookieStore.set(name, value, options)\n          );\n        },\n      },\n    }\n  );\n\n  // Check authentication\n  const {\n    data: { session },\n  } = await supabase.auth.getSession();\n\n  if (!session) {\n    redirect('/auth/guest-login');\n  }\n\n  // Verify user is a guest (not admin)\n  const { data: guest } = await supabase\n    .from('guests')\n    .select('id, first_name, last_name, email')\n    .eq('email', session.user.email)\n    .single();\n\n  if (!guest) {\n    redirect('/auth/unauthorized');\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50\">\n      <GuestNavigation />\n      <main className=\"pt-16\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          {children}\n        </div>\n      </main>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]}