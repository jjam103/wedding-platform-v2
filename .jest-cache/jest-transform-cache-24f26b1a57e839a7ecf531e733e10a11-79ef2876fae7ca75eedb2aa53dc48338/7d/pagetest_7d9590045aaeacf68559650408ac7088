2c6183ee65b1953451250cb7cdc3b604
"use strict";
// Mock DataTable components
jest.mock('@/components/ui/DataTable', ()=>({
        DataTable: ({ data, columns, loading, onRowClick })=>{
            if (loading) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "Loading..."
            });
            if (data.length === 0) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "No items found"
            });
            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "data-table",
                children: data.map((item, index)=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        "data-testid": `location-row-${item.id}`,
                        onClick: ()=>onRowClick && onRowClick(item),
                        style: {
                            cursor: onRowClick ? 'pointer' : 'default'
                        },
                        children: columns.map((col)=>{
                            const value = item[col.key];
                            const displayValue = col.render ? col.render(value, item) : value;
                            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                "data-testid": `${col.key}-${item.id}`,
                                children: displayValue
                            }, col.key);
                        })
                    }, index))
            });
        }
    }));
jest.mock('@/components/ui/DataTableWithSuspense', ()=>({
        DataTableWithSuspense: ({ data, columns, loading, onRowClick })=>{
            if (loading) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "Loading..."
            });
            if (data.length === 0) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "No items found"
            });
            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "data-table",
                children: data.map((item, index)=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        "data-testid": `location-row-${item.id}`,
                        onClick: ()=>onRowClick && onRowClick(item),
                        style: {
                            cursor: onRowClick ? 'pointer' : 'default'
                        },
                        children: columns.map((col)=>{
                            const value = item[col.key];
                            const displayValue = col.render ? col.render(value, item) : value;
                            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                "data-testid": `${col.key}-${item.id}`,
                                children: displayValue
                            }, col.key);
                        })
                    }, index))
            });
        }
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _page = /*#__PURE__*/ _interop_require_default(require("./page"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock fetch
global.fetch = jest.fn();
describe('LocationManagementPage', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    const mockLocations = [
        {
            id: 'loc-1',
            name: 'Costa Rica',
            parentLocationId: null,
            address: null,
            coordinates: null,
            description: null,
            createdAt: '2025-01-01T00:00:00Z',
            children: [
                {
                    id: 'loc-2',
                    name: 'Guanacaste',
                    parentLocationId: 'loc-1',
                    address: null,
                    coordinates: null,
                    description: null,
                    createdAt: '2025-01-01T00:00:00Z',
                    children: [
                        {
                            id: 'loc-3',
                            name: 'Tamarindo',
                            parentLocationId: 'loc-2',
                            address: 'Tamarindo, Guanacaste',
                            coordinates: null,
                            description: null,
                            createdAt: '2025-01-01T00:00:00Z',
                            children: []
                        }
                    ]
                }
            ]
        }
    ];
    describe('Tree View Rendering', ()=>{
        it('should render location hierarchy', async ()=>{
            global.fetch.mockResolvedValueOnce({
                ok: true,
                status: 200,
                json: async ()=>({
                        success: true,
                        data: mockLocations
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            // Wait for the location name to appear (it appears in both select and tree)
            await (0, _react.waitFor)(()=>{
                const costaRicaElements = _react.screen.getAllByText('Costa Rica');
                expect(costaRicaElements.length).toBeGreaterThan(0);
            }, {
                timeout: 5000
            });
        });
        it('should expand and collapse nodes', async ()=>{
            global.fetch.mockResolvedValueOnce({
                ok: true,
                status: 200,
                json: async ()=>({
                        success: true,
                        data: mockLocations
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                const costaRicaElements = _react.screen.getAllByText('Costa Rica');
                expect(costaRicaElements.length).toBeGreaterThan(0);
            }, {
                timeout: 5000
            });
            // Click expand button
            const expandButton = _react.screen.getByLabelText('Expand');
            _react.fireEvent.click(expandButton);
            // Child should now be visible in tree (not just in select)
            await (0, _react.waitFor)(()=>{
                const guanacasteElements = _react.screen.getAllByText('Guanacaste');
                expect(guanacasteElements.length).toBeGreaterThan(1); // In select and tree
            });
            // Click collapse button
            const collapseButton = _react.screen.getByLabelText('Collapse');
            _react.fireEvent.click(collapseButton);
            // Child should be hidden from tree (but still in select)
            await (0, _react.waitFor)(()=>{
                const guanacasteElements = _react.screen.getAllByText('Guanacaste');
                expect(guanacasteElements.length).toBe(1); // Only in select
            });
        });
        it('should display location addresses', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockLocations
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            // Expand to show Tamarindo
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getAllByText('Costa Rica').length).toBeGreaterThan(0);
            });
            const expandButtons = _react.screen.getAllByLabelText('Expand');
            _react.fireEvent.click(expandButtons[0]); // Expand Costa Rica
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getAllByText('Guanacaste').length).toBeGreaterThan(1);
            });
            _react.fireEvent.click(_react.screen.getAllByLabelText('Expand')[0]); // Expand Guanacaste
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo, Guanacaste')).toBeInTheDocument();
            });
        });
    });
    describe('Location Creation', ()=>{
        it('should open form when Add Location clicked', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: []
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('+ Add Location')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByText('+ Add Location'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Add New Location')).toBeInTheDocument();
            });
        });
        it('should create location successfully', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: []
                    })
            }).mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'new-loc',
                            name: 'New Location',
                            parentLocationId: null,
                            address: null,
                            coordinates: null,
                            description: null,
                            createdAt: '2025-01-01T00:00:00Z'
                        }
                    })
            }).mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: []
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('+ Add Location')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByText('+ Add Location'));
            // Fill form
            const nameInput = _react.screen.getByPlaceholderText('e.g., Tamarindo Beach');
            _react.fireEvent.change(nameInput, {
                target: {
                    value: 'New Location'
                }
            });
            // Submit form
            const submitButton = _react.screen.getByRole('button', {
                name: /submit|create/i
            });
            _react.fireEvent.click(submitButton);
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/admin/locations', expect.objectContaining({
                    method: 'POST',
                    body: JSON.stringify({
                        name: 'New Location'
                    })
                }));
            });
        });
    });
    describe('Parent Assignment', ()=>{
        it('should allow selecting parent location', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockLocations
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('+ Add Location')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByText('+ Add Location'));
            // Parent selector should be available
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Parent Location')).toBeInTheDocument();
            });
        });
    });
    describe('Circular Reference Prevention', ()=>{
        it('should prevent creating circular reference', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockLocations
                    })
            }).mockResolvedValueOnce({
                json: async ()=>({
                        success: false,
                        error: {
                            code: 'CIRCULAR_REFERENCE',
                            message: 'This would create a circular reference'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getAllByText('Costa Rica').length).toBeGreaterThan(0);
            });
            // Expand and edit
            const expandButton = _react.screen.getByLabelText('Expand');
            _react.fireEvent.click(expandButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getAllByText('Guanacaste').length).toBeGreaterThan(1);
            });
            const editButtons = _react.screen.getAllByText('Edit');
            _react.fireEvent.click(editButtons[1]); // Edit Guanacaste
            // Form should open - just verify it's there
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Edit Location')).toBeInTheDocument();
            });
        });
    });
    describe('Search Functionality', ()=>{
        it.skip('should filter locations by search query', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockLocations
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getAllByText('Costa Rica').length).toBeGreaterThan(0);
            });
            // Expand to show all locations
            const expandButtons = _react.screen.getAllByLabelText('Expand');
            _react.fireEvent.click(expandButtons[0]);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getAllByText('Guanacaste').length).toBeGreaterThan(1);
            });
            // Search for Tamarindo
            const searchInput = _react.screen.getByPlaceholderText('Search locations...');
            _react.fireEvent.change(searchInput, {
                target: {
                    value: 'Tamarindo'
                }
            });
            // Tamarindo should be visible
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo')).toBeInTheDocument();
            });
        });
        it('should show no results message when search has no matches', async ()=>{
            global.fetch.mockResolvedValueOnce({
                ok: true,
                status: 200,
                json: async ()=>({
                        success: true,
                        data: mockLocations
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getAllByText('Costa Rica').length).toBeGreaterThan(0);
            }, {
                timeout: 3000
            });
            const searchInput = _react.screen.getByPlaceholderText('Search locations...');
            _react.fireEvent.change(searchInput, {
                target: {
                    value: 'NonexistentLocation'
                }
            });
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('No locations match your search')).toBeInTheDocument();
            }, {
                timeout: 3000
            });
        });
    });
    describe('Location Deletion', ()=>{
        it('should delete location with confirmation', async ()=>{
            global.confirm = jest.fn(()=>true);
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockLocations
                    })
            }).mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: undefined
                    })
            }).mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: []
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getAllByText('Costa Rica').length).toBeGreaterThan(0);
            });
            const deleteButton = _react.screen.getByText('Delete');
            _react.fireEvent.click(deleteButton);
            expect(global.confirm).toHaveBeenCalledWith(expect.stringContaining('Are you sure'));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('/api/admin/locations/'), expect.objectContaining({
                    method: 'DELETE'
                }));
            });
        });
        it.skip('should not delete if confirmation cancelled', async ()=>{
            global.confirm = jest.fn(()=>false);
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockLocations
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getAllByText('Costa Rica').length).toBeGreaterThan(0);
            });
            const deleteButton = _react.screen.getByText('Delete');
            _react.fireEvent.click(deleteButton);
            expect(global.confirm).toHaveBeenCalled();
            expect(global.fetch).toHaveBeenCalledTimes(1); // Only initial load
        });
    });
    describe('Error Handling', ()=>{
        it.skip('should display error message on load failure', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: false,
                        error: {
                            code: 'DATABASE_ERROR',
                            message: 'Failed to load locations'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            // Wait for loading to complete
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Loading locations...')).not.toBeInTheDocument();
            });
            // Error should be displayed
            expect(_react.screen.getByText(/Failed to load locations/i)).toBeInTheDocument();
        });
        it('should show empty state when no locations', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: []
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('No locations yet. Add your first location above.')).toBeInTheDocument();
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FkbWluL2xvY2F0aW9ucy9wYWdlLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCBmaXJlRXZlbnQsIHdhaXRGb3IgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCBMb2NhdGlvbk1hbmFnZW1lbnRQYWdlIGZyb20gJy4vcGFnZSc7XG5cbi8vIE1vY2sgRGF0YVRhYmxlIGNvbXBvbmVudHNcbmplc3QubW9jaygnQC9jb21wb25lbnRzL3VpL0RhdGFUYWJsZScsICgpID0+ICh7XG4gIERhdGFUYWJsZTogKHsgZGF0YSwgY29sdW1ucywgbG9hZGluZywgb25Sb3dDbGljayB9OiBhbnkpID0+IHtcbiAgICBpZiAobG9hZGluZykgcmV0dXJuIDxkaXY+TG9hZGluZy4uLjwvZGl2PjtcbiAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHJldHVybiA8ZGl2Pk5vIGl0ZW1zIGZvdW5kPC9kaXY+O1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiZGF0YS10YWJsZVwiPlxuICAgICAgICB7ZGF0YS5tYXAoKGl0ZW06IGFueSwgaW5kZXg6IG51bWJlcikgPT4gKFxuICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICBrZXk9e2luZGV4fSBcbiAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgbG9jYXRpb24tcm93LSR7aXRlbS5pZH1gfVxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gb25Sb3dDbGljayAmJiBvblJvd0NsaWNrKGl0ZW0pfVxuICAgICAgICAgICAgc3R5bGU9e3sgY3Vyc29yOiBvblJvd0NsaWNrID8gJ3BvaW50ZXInIDogJ2RlZmF1bHQnIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2NvbHVtbnMubWFwKChjb2w6IGFueSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGl0ZW1bY29sLmtleV07XG4gICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlWYWx1ZSA9IGNvbC5yZW5kZXIgPyBjb2wucmVuZGVyKHZhbHVlLCBpdGVtKSA6IHZhbHVlO1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYga2V5PXtjb2wua2V5fSBkYXRhLXRlc3RpZD17YCR7Y29sLmtleX0tJHtpdGVtLmlkfWB9PlxuICAgICAgICAgICAgICAgICAge2Rpc3BsYXlWYWx1ZX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApKX1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH0sXG59KSk7XG5cbmplc3QubW9jaygnQC9jb21wb25lbnRzL3VpL0RhdGFUYWJsZVdpdGhTdXNwZW5zZScsICgpID0+ICh7XG4gIERhdGFUYWJsZVdpdGhTdXNwZW5zZTogKHsgZGF0YSwgY29sdW1ucywgbG9hZGluZywgb25Sb3dDbGljayB9OiBhbnkpID0+IHtcbiAgICBpZiAobG9hZGluZykgcmV0dXJuIDxkaXY+TG9hZGluZy4uLjwvZGl2PjtcbiAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHJldHVybiA8ZGl2Pk5vIGl0ZW1zIGZvdW5kPC9kaXY+O1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiZGF0YS10YWJsZVwiPlxuICAgICAgICB7ZGF0YS5tYXAoKGl0ZW06IGFueSwgaW5kZXg6IG51bWJlcikgPT4gKFxuICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICBrZXk9e2luZGV4fSBcbiAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgbG9jYXRpb24tcm93LSR7aXRlbS5pZH1gfVxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gb25Sb3dDbGljayAmJiBvblJvd0NsaWNrKGl0ZW0pfVxuICAgICAgICAgICAgc3R5bGU9e3sgY3Vyc29yOiBvblJvd0NsaWNrID8gJ3BvaW50ZXInIDogJ2RlZmF1bHQnIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2NvbHVtbnMubWFwKChjb2w6IGFueSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGl0ZW1bY29sLmtleV07XG4gICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlWYWx1ZSA9IGNvbC5yZW5kZXIgPyBjb2wucmVuZGVyKHZhbHVlLCBpdGVtKSA6IHZhbHVlO1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYga2V5PXtjb2wua2V5fSBkYXRhLXRlc3RpZD17YCR7Y29sLmtleX0tJHtpdGVtLmlkfWB9PlxuICAgICAgICAgICAgICAgICAge2Rpc3BsYXlWYWx1ZX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApKX1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH0sXG59KSk7XG5cbi8vIE1vY2sgZmV0Y2hcbmdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKTtcblxuZGVzY3JpYmUoJ0xvY2F0aW9uTWFuYWdlbWVudFBhZ2UnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBjb25zdCBtb2NrTG9jYXRpb25zID0gW1xuICAgIHtcbiAgICAgIGlkOiAnbG9jLTEnLFxuICAgICAgbmFtZTogJ0Nvc3RhIFJpY2EnLFxuICAgICAgcGFyZW50TG9jYXRpb25JZDogbnVsbCxcbiAgICAgIGFkZHJlc3M6IG51bGwsXG4gICAgICBjb29yZGluYXRlczogbnVsbCxcbiAgICAgIGRlc2NyaXB0aW9uOiBudWxsLFxuICAgICAgY3JlYXRlZEF0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnbG9jLTInLFxuICAgICAgICAgIG5hbWU6ICdHdWFuYWNhc3RlJyxcbiAgICAgICAgICBwYXJlbnRMb2NhdGlvbklkOiAnbG9jLTEnLFxuICAgICAgICAgIGFkZHJlc3M6IG51bGwsXG4gICAgICAgICAgY29vcmRpbmF0ZXM6IG51bGwsXG4gICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsXG4gICAgICAgICAgY3JlYXRlZEF0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAnbG9jLTMnLFxuICAgICAgICAgICAgICBuYW1lOiAnVGFtYXJpbmRvJyxcbiAgICAgICAgICAgICAgcGFyZW50TG9jYXRpb25JZDogJ2xvYy0yJyxcbiAgICAgICAgICAgICAgYWRkcmVzczogJ1RhbWFyaW5kbywgR3VhbmFjYXN0ZScsXG4gICAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBudWxsLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCxcbiAgICAgICAgICAgICAgY3JlYXRlZEF0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogW10sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0sXG4gIF07XG5cbiAgZGVzY3JpYmUoJ1RyZWUgVmlldyBSZW5kZXJpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgbG9jYXRpb24gaGllcmFyY2h5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja0xvY2F0aW9ucyB9KSxcbiAgICAgIH0gYXMgUmVzcG9uc2UpO1xuXG4gICAgICByZW5kZXIoPExvY2F0aW9uTWFuYWdlbWVudFBhZ2UgLz4pO1xuXG4gICAgICAvLyBXYWl0IGZvciB0aGUgbG9jYXRpb24gbmFtZSB0byBhcHBlYXIgKGl0IGFwcGVhcnMgaW4gYm90aCBzZWxlY3QgYW5kIHRyZWUpXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgY29zdGFSaWNhRWxlbWVudHMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KCdDb3N0YSBSaWNhJyk7XG4gICAgICAgIGV4cGVjdChjb3N0YVJpY2FFbGVtZW50cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIH0sIHsgdGltZW91dDogNTAwMCB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZXhwYW5kIGFuZCBjb2xsYXBzZSBub2RlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tMb2NhdGlvbnMgfSksXG4gICAgICB9IGFzIFJlc3BvbnNlKTtcblxuICAgICAgcmVuZGVyKDxMb2NhdGlvbk1hbmFnZW1lbnRQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvc3RhUmljYUVsZW1lbnRzID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgnQ29zdGEgUmljYScpO1xuICAgICAgICBleHBlY3QoY29zdGFSaWNhRWxlbWVudHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICB9LCB7IHRpbWVvdXQ6IDUwMDAgfSk7XG5cbiAgICAgIC8vIENsaWNrIGV4cGFuZCBidXR0b25cbiAgICAgIGNvbnN0IGV4cGFuZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnRXhwYW5kJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soZXhwYW5kQnV0dG9uKTtcblxuICAgICAgLy8gQ2hpbGQgc2hvdWxkIG5vdyBiZSB2aXNpYmxlIGluIHRyZWUgKG5vdCBqdXN0IGluIHNlbGVjdClcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBndWFuYWNhc3RlRWxlbWVudHMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KCdHdWFuYWNhc3RlJyk7XG4gICAgICAgIGV4cGVjdChndWFuYWNhc3RlRWxlbWVudHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMSk7IC8vIEluIHNlbGVjdCBhbmQgdHJlZVxuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIGNvbGxhcHNlIGJ1dHRvblxuICAgICAgY29uc3QgY29sbGFwc2VCdXR0b24gPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ0NvbGxhcHNlJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soY29sbGFwc2VCdXR0b24pO1xuXG4gICAgICAvLyBDaGlsZCBzaG91bGQgYmUgaGlkZGVuIGZyb20gdHJlZSAoYnV0IHN0aWxsIGluIHNlbGVjdClcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBndWFuYWNhc3RlRWxlbWVudHMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KCdHdWFuYWNhc3RlJyk7XG4gICAgICAgIGV4cGVjdChndWFuYWNhc3RlRWxlbWVudHMubGVuZ3RoKS50b0JlKDEpOyAvLyBPbmx5IGluIHNlbGVjdFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgbG9jYXRpb24gYWRkcmVzc2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tMb2NhdGlvbnMgfSksXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxMb2NhdGlvbk1hbmFnZW1lbnRQYWdlIC8+KTtcblxuICAgICAgLy8gRXhwYW5kIHRvIHNob3cgVGFtYXJpbmRvXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRBbGxCeVRleHQoJ0Nvc3RhIFJpY2EnKS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBleHBhbmRCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5TGFiZWxUZXh0KCdFeHBhbmQnKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhleHBhbmRCdXR0b25zWzBdKTsgLy8gRXhwYW5kIENvc3RhIFJpY2FcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QWxsQnlUZXh0KCdHdWFuYWNhc3RlJykubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMSk7XG4gICAgICB9KTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRBbGxCeUxhYmVsVGV4dCgnRXhwYW5kJylbMF0pOyAvLyBFeHBhbmQgR3VhbmFjYXN0ZVxuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1RhbWFyaW5kbywgR3VhbmFjYXN0ZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdMb2NhdGlvbiBDcmVhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIG9wZW4gZm9ybSB3aGVuIEFkZCBMb2NhdGlvbiBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IFtdIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8TG9jYXRpb25NYW5hZ2VtZW50UGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgTG9jYXRpb24nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgTG9jYXRpb24nKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQWRkIE5ldyBMb2NhdGlvbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBsb2NhdGlvbiBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaylcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogW10gfSksXG4gICAgICAgIH0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBpZDogJ25ldy1sb2MnLFxuICAgICAgICAgICAgICBuYW1lOiAnTmV3IExvY2F0aW9uJyxcbiAgICAgICAgICAgICAgcGFyZW50TG9jYXRpb25JZDogbnVsbCxcbiAgICAgICAgICAgICAgYWRkcmVzczogbnVsbCxcbiAgICAgICAgICAgICAgY29vcmRpbmF0ZXM6IG51bGwsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLFxuICAgICAgICAgICAgICBjcmVhdGVkQXQ6ICcyMDI1LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBbXSB9KSxcbiAgICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8TG9jYXRpb25NYW5hZ2VtZW50UGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgTG9jYXRpb24nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgTG9jYXRpb24nKSk7XG5cbiAgICAgIC8vIEZpbGwgZm9ybVxuICAgICAgY29uc3QgbmFtZUlucHV0ID0gc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KCdlLmcuLCBUYW1hcmluZG8gQmVhY2gnKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UobmFtZUlucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJ05ldyBMb2NhdGlvbicgfSB9KTtcblxuICAgICAgLy8gU3VibWl0IGZvcm1cbiAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3N1Ym1pdHxjcmVhdGUvaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhzdWJtaXRCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgJy9hcGkvYWRtaW4vbG9jYXRpb25zJyxcbiAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZTogJ05ldyBMb2NhdGlvbicgfSksXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGFyZW50IEFzc2lnbm1lbnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBzZWxlY3RpbmcgcGFyZW50IGxvY2F0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tMb2NhdGlvbnMgfSksXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxMb2NhdGlvbk1hbmFnZW1lbnRQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcrIEFkZCBMb2NhdGlvbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCcrIEFkZCBMb2NhdGlvbicpKTtcblxuICAgICAgLy8gUGFyZW50IHNlbGVjdG9yIHNob3VsZCBiZSBhdmFpbGFibGVcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnUGFyZW50IExvY2F0aW9uJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NpcmN1bGFyIFJlZmVyZW5jZSBQcmV2ZW50aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcHJldmVudCBjcmVhdGluZyBjaXJjdWxhciByZWZlcmVuY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaylcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja0xvY2F0aW9ucyB9KSxcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgICAgY29kZTogJ0NJUkNVTEFSX1JFRkVSRU5DRScsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGlzIHdvdWxkIGNyZWF0ZSBhIGNpcmN1bGFyIHJlZmVyZW5jZScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxMb2NhdGlvbk1hbmFnZW1lbnRQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QWxsQnlUZXh0KCdDb3N0YSBSaWNhJykubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gRXhwYW5kIGFuZCBlZGl0XG4gICAgICBjb25zdCBleHBhbmRCdXR0b24gPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ0V4cGFuZCcpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGV4cGFuZEJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEFsbEJ5VGV4dCgnR3VhbmFjYXN0ZScpLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDEpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGVkaXRCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgnRWRpdCcpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGVkaXRCdXR0b25zWzFdKTsgLy8gRWRpdCBHdWFuYWNhc3RlXG5cbiAgICAgIC8vIEZvcm0gc2hvdWxkIG9wZW4gLSBqdXN0IHZlcmlmeSBpdCdzIHRoZXJlXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0VkaXQgTG9jYXRpb24nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU2VhcmNoIEZ1bmN0aW9uYWxpdHknLCAoKSA9PiB7XG4gICAgaXQuc2tpcCgnc2hvdWxkIGZpbHRlciBsb2NhdGlvbnMgYnkgc2VhcmNoIHF1ZXJ5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tMb2NhdGlvbnMgfSksXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxMb2NhdGlvbk1hbmFnZW1lbnRQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QWxsQnlUZXh0KCdDb3N0YSBSaWNhJykubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gRXhwYW5kIHRvIHNob3cgYWxsIGxvY2F0aW9uc1xuICAgICAgY29uc3QgZXhwYW5kQnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeUxhYmVsVGV4dCgnRXhwYW5kJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soZXhwYW5kQnV0dG9uc1swXSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEFsbEJ5VGV4dCgnR3VhbmFjYXN0ZScpLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDEpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNlYXJjaCBmb3IgVGFtYXJpbmRvXG4gICAgICBjb25zdCBzZWFyY2hJbnB1dCA9IHNjcmVlbi5nZXRCeVBsYWNlaG9sZGVyVGV4dCgnU2VhcmNoIGxvY2F0aW9ucy4uLicpO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShzZWFyY2hJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdUYW1hcmluZG8nIH0gfSk7XG5cbiAgICAgIC8vIFRhbWFyaW5kbyBzaG91bGQgYmUgdmlzaWJsZVxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdUYW1hcmluZG8nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzaG93IG5vIHJlc3VsdHMgbWVzc2FnZSB3aGVuIHNlYXJjaCBoYXMgbm8gbWF0Y2hlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tMb2NhdGlvbnMgfSksXG4gICAgICB9IGFzIFJlc3BvbnNlKTtcblxuICAgICAgcmVuZGVyKDxMb2NhdGlvbk1hbmFnZW1lbnRQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QWxsQnlUZXh0KCdDb3N0YSBSaWNhJykubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICB9LCB7IHRpbWVvdXQ6IDMwMDAgfSk7XG5cbiAgICAgIGNvbnN0IHNlYXJjaElucHV0ID0gc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KCdTZWFyY2ggbG9jYXRpb25zLi4uJyk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKHNlYXJjaElucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJ05vbmV4aXN0ZW50TG9jYXRpb24nIH0gfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnTm8gbG9jYXRpb25zIG1hdGNoIHlvdXIgc2VhcmNoJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9LCB7IHRpbWVvdXQ6IDMwMDAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdMb2NhdGlvbiBEZWxldGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRlbGV0ZSBsb2NhdGlvbiB3aXRoIGNvbmZpcm1hdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGdsb2JhbC5jb25maXJtID0gamVzdC5mbigoKSA9PiB0cnVlKTtcblxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tMb2NhdGlvbnMgfSksXG4gICAgICAgIH0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHVuZGVmaW5lZCB9KSxcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogW10gfSksXG4gICAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPExvY2F0aW9uTWFuYWdlbWVudFBhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRBbGxCeVRleHQoJ0Nvc3RhIFJpY2EnKS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdEZWxldGUnKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhkZWxldGVCdXR0b24pO1xuXG4gICAgICBleHBlY3QoZ2xvYmFsLmNvbmZpcm0pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnQXJlIHlvdSBzdXJlJylcbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnL2FwaS9hZG1pbi9sb2NhdGlvbnMvJyksXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoeyBtZXRob2Q6ICdERUxFVEUnIH0pXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0LnNraXAoJ3Nob3VsZCBub3QgZGVsZXRlIGlmIGNvbmZpcm1hdGlvbiBjYW5jZWxsZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBnbG9iYWwuY29uZmlybSA9IGplc3QuZm4oKCkgPT4gZmFsc2UpO1xuXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja0xvY2F0aW9ucyB9KSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPExvY2F0aW9uTWFuYWdlbWVudFBhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRBbGxCeVRleHQoJ0Nvc3RhIFJpY2EnKS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdEZWxldGUnKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhkZWxldGVCdXR0b24pO1xuXG4gICAgICBleHBlY3QoZ2xvYmFsLmNvbmZpcm0pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTsgLy8gT25seSBpbml0aWFsIGxvYWRcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIGl0LnNraXAoJ3Nob3VsZCBkaXNwbGF5IGVycm9yIG1lc3NhZ2Ugb24gbG9hZCBmYWlsdXJlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHsgY29kZTogJ0RBVEFCQVNFX0VSUk9SJywgbWVzc2FnZTogJ0ZhaWxlZCB0byBsb2FkIGxvY2F0aW9ucycgfSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxMb2NhdGlvbk1hbmFnZW1lbnRQYWdlIC8+KTtcblxuICAgICAgLy8gV2FpdCBmb3IgbG9hZGluZyB0byBjb21wbGV0ZVxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ0xvYWRpbmcgbG9jYXRpb25zLi4uJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEVycm9yIHNob3VsZCBiZSBkaXNwbGF5ZWRcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9GYWlsZWQgdG8gbG9hZCBsb2NhdGlvbnMvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNob3cgZW1wdHkgc3RhdGUgd2hlbiBubyBsb2NhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogW10gfSksXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxMb2NhdGlvbk1hbmFnZW1lbnRQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChcbiAgICAgICAgICBzY3JlZW4uZ2V0QnlUZXh0KCdObyBsb2NhdGlvbnMgeWV0LiBBZGQgeW91ciBmaXJzdCBsb2NhdGlvbiBhYm92ZS4nKVxuICAgICAgICApLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsIkRhdGFUYWJsZSIsImRhdGEiLCJjb2x1bW5zIiwibG9hZGluZyIsIm9uUm93Q2xpY2siLCJkaXYiLCJsZW5ndGgiLCJkYXRhLXRlc3RpZCIsIm1hcCIsIml0ZW0iLCJpbmRleCIsImlkIiwib25DbGljayIsInN0eWxlIiwiY3Vyc29yIiwiY29sIiwidmFsdWUiLCJrZXkiLCJkaXNwbGF5VmFsdWUiLCJyZW5kZXIiLCJEYXRhVGFibGVXaXRoU3VzcGVuc2UiLCJnbG9iYWwiLCJmZXRjaCIsImZuIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tMb2NhdGlvbnMiLCJuYW1lIiwicGFyZW50TG9jYXRpb25JZCIsImFkZHJlc3MiLCJjb29yZGluYXRlcyIsImRlc2NyaXB0aW9uIiwiY3JlYXRlZEF0IiwiY2hpbGRyZW4iLCJpdCIsIm1vY2tSZXNvbHZlZFZhbHVlT25jZSIsIm9rIiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJMb2NhdGlvbk1hbmFnZW1lbnRQYWdlIiwid2FpdEZvciIsImNvc3RhUmljYUVsZW1lbnRzIiwic2NyZWVuIiwiZ2V0QWxsQnlUZXh0IiwiZXhwZWN0IiwidG9CZUdyZWF0ZXJUaGFuIiwidGltZW91dCIsImV4cGFuZEJ1dHRvbiIsImdldEJ5TGFiZWxUZXh0IiwiZmlyZUV2ZW50IiwiY2xpY2siLCJndWFuYWNhc3RlRWxlbWVudHMiLCJjb2xsYXBzZUJ1dHRvbiIsInRvQmUiLCJleHBhbmRCdXR0b25zIiwiZ2V0QWxsQnlMYWJlbFRleHQiLCJnZXRCeVRleHQiLCJ0b0JlSW5UaGVEb2N1bWVudCIsIm5hbWVJbnB1dCIsImdldEJ5UGxhY2Vob2xkZXJUZXh0IiwiY2hhbmdlIiwidGFyZ2V0Iiwic3VibWl0QnV0dG9uIiwiZ2V0QnlSb2xlIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJvYmplY3RDb250YWluaW5nIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiZWRpdEJ1dHRvbnMiLCJza2lwIiwic2VhcmNoSW5wdXQiLCJjb25maXJtIiwidW5kZWZpbmVkIiwiZGVsZXRlQnV0dG9uIiwic3RyaW5nQ29udGFpbmluZyIsInRvSGF2ZUJlZW5DYWxsZWQiLCJ0b0hhdmVCZWVuQ2FsbGVkVGltZXMiLCJxdWVyeUJ5VGV4dCIsIm5vdCJdLCJtYXBwaW5ncyI6IjtBQUdBLDRCQUE0QjtBQUM1QkEsS0FBS0MsSUFBSSxDQUFDLDZCQUE2QixJQUFPLENBQUE7UUFDNUNDLFdBQVcsQ0FBQyxFQUFFQyxJQUFJLEVBQUVDLE9BQU8sRUFBRUMsT0FBTyxFQUFFQyxVQUFVLEVBQU87WUFDckQsSUFBSUQsU0FBUyxxQkFBTyxxQkFBQ0U7MEJBQUk7O1lBQ3pCLElBQUlKLEtBQUtLLE1BQU0sS0FBSyxHQUFHLHFCQUFPLHFCQUFDRDswQkFBSTs7WUFDbkMscUJBQ0UscUJB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