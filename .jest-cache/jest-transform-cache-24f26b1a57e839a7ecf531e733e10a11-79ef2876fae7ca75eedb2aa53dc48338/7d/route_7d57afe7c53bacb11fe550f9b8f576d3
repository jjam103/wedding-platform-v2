274543752641a724beafc3af317c0749
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "GET", {
    enumerable: true,
    get: function() {
        return GET;
    }
});
const _authhelpersnextjs = require("@supabase/auth-helpers-nextjs");
const _headers = require("next/headers");
const _server = require("next/server");
async function GET(request) {
    try {
        // 1. Auth check
        const cookieStore = (0, _headers.cookies)();
        const supabase = (0, _authhelpersnextjs.createRouteHandlerClient)({
            cookies: ()=>cookieStore
        });
        const { data: { session }, error: authError } = await supabase.auth.getSession();
        if (authError || !session) {
            return _server.NextResponse.json({
                success: false,
                error: {
                    code: 'UNAUTHORIZED',
                    message: 'Authentication required'
                }
            }, {
                status: 401
            });
        }
        // 2. Parse query parameters
        const { searchParams } = new URL(request.url);
        const query = searchParams.get('q') || '';
        const typesParam = searchParams.get('types') || 'event,activity,content_page,accommodation';
        const types = typesParam.split(',').filter(Boolean);
        if (!query.trim()) {
            return _server.NextResponse.json({
                success: true,
                data: {
                    events: [],
                    activities: [],
                    content_pages: [],
                    accommodations: []
                }
            });
        }
        // 3. Search across entity types
        const results = {
            events: [],
            activities: [],
            content_pages: [],
            accommodations: []
        };
        // Search events
        if (types.includes('event')) {
            try {
                const { data: events, error: eventsError } = await supabase.from('events').select('id, name, slug, date, location_id, locations(name)').or(`name.ilike.%${query}%,description.ilike.%${query}%`).is('deleted_at', null).order('date', {
                    ascending: true
                }).limit(10);
                if (eventsError) {
                    console.error('Events search error:', eventsError);
                } else if (events) {
                    results.events = events.map((event)=>({
                            id: event.id,
                            name: event.name,
                            slug: event.slug,
                            date: event.date,
                            location: event.locations?.name
                        }));
                }
            } catch (err) {
                console.error('Events search exception:', err);
            }
        }
        // Search activities
        if (types.includes('activity')) {
            try {
                const { data: activities, error: activitiesError } = await supabase.from('activities').select('id, name, slug, start_time, capacity, location_id, locations(name)').or(`name.ilike.%${query}%,description.ilike.%${query}%`).is('deleted_at', null).order('start_time', {
                    ascending: true
                }).limit(10);
                if (activitiesError) {
                    console.error('Activities search error:', activitiesError);
                } else if (activities) {
                    results.activities = activities.map((activity)=>({
                            id: activity.id,
                            name: activity.name,
                            slug: activity.slug,
                            date: activity.start_time,
                            capacity: activity.capacity,
                            location: activity.locations?.name
                        }));
                }
            } catch (err) {
                console.error('Activities search exception:', err);
            }
        }
        // Search content pages
        if (types.includes('content_page')) {
            try {
                const { data: pages, error: pagesError } = await supabase.from('content_pages').select('id, title, slug, type').or(`title.ilike.%${query}%,slug.ilike.%${query}%`).eq('status', 'published').is('deleted_at', null).order('title', {
                    ascending: true
                }).limit(10);
                if (pagesError) {
                    console.error('Content pages search error:', pagesError);
                } else if (pages) {
                    results.content_pages = pages.map((page)=>({
                            id: page.id,
                            title: page.title,
                            slug: page.slug,
                            type: page.type
                        }));
                }
            } catch (err) {
                console.error('Content pages search exception:', err);
            }
        }
        // Search accommodations (no deleted_at column)
        if (types.includes('accommodation')) {
            try {
                const { data: accommodations, error: accommodationsError } = await supabase.from('accommodations').select('id, name, slug, location_id, locations(name)').or(`name.ilike.%${query}%,description.ilike.%${query}%`).order('name', {
                    ascending: true
                }).limit(10);
                if (accommodationsError) {
                    console.error('Accommodations search error:', accommodationsError);
                } else if (accommodations) {
                    // Get room counts separately for each accommodation
                    const accommodationsWithRoomCounts = await Promise.all(accommodations.map(async (accommodation)=>{
                        try {
                            const { count } = await supabase.from('room_types').select('*', {
                                count: 'exact',
                                head: true
                            }).eq('accommodation_id', accommodation.id);
                            return {
                                id: accommodation.id,
                                name: accommodation.name,
                                slug: accommodation.slug,
                                location: accommodation.locations?.name,
                                room_count: count || 0
                            };
                        } catch (err) {
                            console.error(`Error fetching room count for accommodation ${accommodation.id}:`, err);
                            return {
                                id: accommodation.id,
                                name: accommodation.name,
                                slug: accommodation.slug,
                                location: accommodation.locations?.name,
                                room_count: 0
                            };
                        }
                    }));
                    results.accommodations = accommodationsWithRoomCounts;
                }
            } catch (err) {
                console.error('Accommodations search exception:', err);
            }
        }
        return _server.NextResponse.json({
            success: true,
            data: results
        });
    } catch (error) {
        console.error('Reference search error:', error);
        return _server.NextResponse.json({
            success: false,
            error: {
                code: 'INTERNAL_ERROR',
                message: error instanceof Error ? error.message : 'Search failed'
            }
        }, {
            status: 500
        });
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FwaS9hZG1pbi9yZWZlcmVuY2VzL3NlYXJjaC9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVSb3V0ZUhhbmRsZXJDbGllbnQgfSBmcm9tICdAc3VwYWJhc2UvYXV0aC1oZWxwZXJzLW5leHRqcyc7XG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJztcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gMS4gQXV0aCBjaGVja1xuICAgIGNvbnN0IGNvb2tpZVN0b3JlID0gY29va2llcygpO1xuICAgIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlUm91dGVIYW5kbGVyQ2xpZW50KHsgY29va2llczogKCkgPT4gY29va2llU3RvcmUgfSk7XG4gICAgY29uc3QgeyBkYXRhOiB7IHNlc3Npb24gfSwgZXJyb3I6IGF1dGhFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uKCk7XG5cbiAgICBpZiAoYXV0aEVycm9yIHx8ICFzZXNzaW9uKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogeyBjb2RlOiAnVU5BVVRIT1JJWkVEJywgbWVzc2FnZTogJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJyB9LFxuICAgICAgICB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gMi4gUGFyc2UgcXVlcnkgcGFyYW1ldGVyc1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCBxdWVyeSA9IHNlYXJjaFBhcmFtcy5nZXQoJ3EnKSB8fCAnJztcbiAgICBjb25zdCB0eXBlc1BhcmFtID0gc2VhcmNoUGFyYW1zLmdldCgndHlwZXMnKSB8fCAnZXZlbnQsYWN0aXZpdHksY29udGVudF9wYWdlLGFjY29tbW9kYXRpb24nO1xuICAgIGNvbnN0IHR5cGVzID0gdHlwZXNQYXJhbS5zcGxpdCgnLCcpLmZpbHRlcihCb29sZWFuKTtcblxuICAgIGlmICghcXVlcnkudHJpbSgpKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgZXZlbnRzOiBbXSxcbiAgICAgICAgICBhY3Rpdml0aWVzOiBbXSxcbiAgICAgICAgICBjb250ZW50X3BhZ2VzOiBbXSxcbiAgICAgICAgICBhY2NvbW1vZGF0aW9uczogW10sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyAzLiBTZWFyY2ggYWNyb3NzIGVudGl0eSB0eXBlc1xuICAgIGNvbnN0IHJlc3VsdHM6IHtcbiAgICAgIGV2ZW50czogYW55W107XG4gICAgICBhY3Rpdml0aWVzOiBhbnlbXTtcbiAgICAgIGNvbnRlbnRfcGFnZXM6IGFueVtdO1xuICAgICAgYWNjb21tb2RhdGlvbnM6IGFueVtdO1xuICAgIH0gPSB7XG4gICAgICBldmVudHM6IFtdLFxuICAgICAgYWN0aXZpdGllczogW10sXG4gICAgICBjb250ZW50X3BhZ2VzOiBbXSxcbiAgICAgIGFjY29tbW9kYXRpb25zOiBbXSxcbiAgICB9O1xuXG4gICAgLy8gU2VhcmNoIGV2ZW50c1xuICAgIGlmICh0eXBlcy5pbmNsdWRlcygnZXZlbnQnKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBkYXRhOiBldmVudHMsIGVycm9yOiBldmVudHNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAuZnJvbSgnZXZlbnRzJylcbiAgICAgICAgICAuc2VsZWN0KCdpZCwgbmFtZSwgc2x1ZywgZGF0ZSwgbG9jYXRpb25faWQsIGxvY2F0aW9ucyhuYW1lKScpXG4gICAgICAgICAgLm9yKGBuYW1lLmlsaWtlLiUke3F1ZXJ5fSUsZGVzY3JpcHRpb24uaWxpa2UuJSR7cXVlcnl9JWApXG4gICAgICAgICAgLmlzKCdkZWxldGVkX2F0JywgbnVsbClcbiAgICAgICAgICAub3JkZXIoJ2RhdGUnLCB7IGFzY2VuZGluZzogdHJ1ZSB9KVxuICAgICAgICAgIC5saW1pdCgxMCk7XG5cbiAgICAgICAgaWYgKGV2ZW50c0Vycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXZlbnRzIHNlYXJjaCBlcnJvcjonLCBldmVudHNFcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnRzKSB7XG4gICAgICAgICAgcmVzdWx0cy5ldmVudHMgPSBldmVudHMubWFwKChldmVudDogYW55KSA9PiAoe1xuICAgICAgICAgICAgaWQ6IGV2ZW50LmlkLFxuICAgICAgICAgICAgbmFtZTogZXZlbnQubmFtZSxcbiAgICAgICAgICAgIHNsdWc6IGV2ZW50LnNsdWcsXG4gICAgICAgICAgICBkYXRlOiBldmVudC5kYXRlLFxuICAgICAgICAgICAgbG9jYXRpb246IGV2ZW50LmxvY2F0aW9ucz8ubmFtZSxcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFdmVudHMgc2VhcmNoIGV4Y2VwdGlvbjonLCBlcnIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNlYXJjaCBhY3Rpdml0aWVzXG4gICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdhY3Rpdml0eScpKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGRhdGE6IGFjdGl2aXRpZXMsIGVycm9yOiBhY3Rpdml0aWVzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgLmZyb20oJ2FjdGl2aXRpZXMnKVxuICAgICAgICAgIC5zZWxlY3QoJ2lkLCBuYW1lLCBzbHVnLCBzdGFydF90aW1lLCBjYXBhY2l0eSwgbG9jYXRpb25faWQsIGxvY2F0aW9ucyhuYW1lKScpXG4gICAgICAgICAgLm9yKGBuYW1lLmlsaWtlLiUke3F1ZXJ5fSUsZGVzY3JpcHRpb24uaWxpa2UuJSR7cXVlcnl9JWApXG4gICAgICAgICAgLmlzKCdkZWxldGVkX2F0JywgbnVsbClcbiAgICAgICAgICAub3JkZXIoJ3N0YXJ0X3RpbWUnLCB7IGFzY2VuZGluZzogdHJ1ZSB9KVxuICAgICAgICAgIC5saW1pdCgxMCk7XG5cbiAgICAgICAgaWYgKGFjdGl2aXRpZXNFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FjdGl2aXRpZXMgc2VhcmNoIGVycm9yOicsIGFjdGl2aXRpZXNFcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aXZpdGllcykge1xuICAgICAgICAgIHJlc3VsdHMuYWN0aXZpdGllcyA9IGFjdGl2aXRpZXMubWFwKChhY3Rpdml0eTogYW55KSA9PiAoe1xuICAgICAgICAgICAgaWQ6IGFjdGl2aXR5LmlkLFxuICAgICAgICAgICAgbmFtZTogYWN0aXZpdHkubmFtZSxcbiAgICAgICAgICAgIHNsdWc6IGFjdGl2aXR5LnNsdWcsXG4gICAgICAgICAgICBkYXRlOiBhY3Rpdml0eS5zdGFydF90aW1lLFxuICAgICAgICAgICAgY2FwYWNpdHk6IGFjdGl2aXR5LmNhcGFjaXR5LFxuICAgICAgICAgICAgbG9jYXRpb246IGFjdGl2aXR5LmxvY2F0aW9ucz8ubmFtZSxcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdBY3Rpdml0aWVzIHNlYXJjaCBleGNlcHRpb246JywgZXJyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZWFyY2ggY29udGVudCBwYWdlc1xuICAgIGlmICh0eXBlcy5pbmNsdWRlcygnY29udGVudF9wYWdlJykpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YTogcGFnZXMsIGVycm9yOiBwYWdlc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgIC5mcm9tKCdjb250ZW50X3BhZ2VzJylcbiAgICAgICAgICAuc2VsZWN0KCdpZCwgdGl0bGUsIHNsdWcsIHR5cGUnKVxuICAgICAgICAgIC5vcihgdGl0bGUuaWxpa2UuJSR7cXVlcnl9JSxzbHVnLmlsaWtlLiUke3F1ZXJ5fSVgKVxuICAgICAgICAgIC5lcSgnc3RhdHVzJywgJ3B1Ymxpc2hlZCcpXG4gICAgICAgICAgLmlzKCdkZWxldGVkX2F0JywgbnVsbClcbiAgICAgICAgICAub3JkZXIoJ3RpdGxlJywgeyBhc2NlbmRpbmc6IHRydWUgfSlcbiAgICAgICAgICAubGltaXQoMTApO1xuXG4gICAgICAgIGlmIChwYWdlc0Vycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignQ29udGVudCBwYWdlcyBzZWFyY2ggZXJyb3I6JywgcGFnZXNFcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZiAocGFnZXMpIHtcbiAgICAgICAgICByZXN1bHRzLmNvbnRlbnRfcGFnZXMgPSBwYWdlcy5tYXAoKHBhZ2U6IGFueSkgPT4gKHtcbiAgICAgICAgICAgIGlkOiBwYWdlLmlkLFxuICAgICAgICAgICAgdGl0bGU6IHBhZ2UudGl0bGUsXG4gICAgICAgICAgICBzbHVnOiBwYWdlLnNsdWcsXG4gICAgICAgICAgICB0eXBlOiBwYWdlLnR5cGUsXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQ29udGVudCBwYWdlcyBzZWFyY2ggZXhjZXB0aW9uOicsIGVycik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2VhcmNoIGFjY29tbW9kYXRpb25zIChubyBkZWxldGVkX2F0IGNvbHVtbilcbiAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ2FjY29tbW9kYXRpb24nKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBkYXRhOiBhY2NvbW1vZGF0aW9ucywgZXJyb3I6IGFjY29tbW9kYXRpb25zRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgLmZyb20oJ2FjY29tbW9kYXRpb25zJylcbiAgICAgICAgICAuc2VsZWN0KCdpZCwgbmFtZSwgc2x1ZywgbG9jYXRpb25faWQsIGxvY2F0aW9ucyhuYW1lKScpXG4gICAgICAgICAgLm9yKGBuYW1lLmlsaWtlLiUke3F1ZXJ5fSUsZGVzY3JpcHRpb24uaWxpa2UuJSR7cXVlcnl9JWApXG4gICAgICAgICAgLm9yZGVyKCduYW1lJywgeyBhc2NlbmRpbmc6IHRydWUgfSlcbiAgICAgICAgICAubGltaXQoMTApO1xuXG4gICAgICAgIGlmIChhY2NvbW1vZGF0aW9uc0Vycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignQWNjb21tb2RhdGlvbnMgc2VhcmNoIGVycm9yOicsIGFjY29tbW9kYXRpb25zRXJyb3IpO1xuICAgICAgICB9IGVsc2UgaWYgKGFjY29tbW9kYXRpb25zKSB7XG4gICAgICAgICAgLy8gR2V0IHJvb20gY291bnRzIHNlcGFyYXRlbHkgZm9yIGVhY2ggYWNjb21tb2RhdGlvblxuICAgICAgICAgIGNvbnN0IGFjY29tbW9kYXRpb25zV2l0aFJvb21Db3VudHMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgICAgIGFjY29tbW9kYXRpb25zLm1hcChhc3luYyAoYWNjb21tb2RhdGlvbjogYW55KSA9PiB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBjb3VudCB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgICAgICAgIC5mcm9tKCdyb29tX3R5cGVzJylcbiAgICAgICAgICAgICAgICAgIC5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnLCBoZWFkOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgICAuZXEoJ2FjY29tbW9kYXRpb25faWQnLCBhY2NvbW1vZGF0aW9uLmlkKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgaWQ6IGFjY29tbW9kYXRpb24uaWQsXG4gICAgICAgICAgICAgICAgICBuYW1lOiBhY2NvbW1vZGF0aW9uLm5hbWUsXG4gICAgICAgICAgICAgICAgICBzbHVnOiBhY2NvbW1vZGF0aW9uLnNsdWcsXG4gICAgICAgICAgICAgICAgICBsb2NhdGlvbjogYWNjb21tb2RhdGlvbi5sb2NhdGlvbnM/Lm5hbWUsXG4gICAgICAgICAgICAgICAgICByb29tX2NvdW50OiBjb3VudCB8fCAwLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZldGNoaW5nIHJvb20gY291bnQgZm9yIGFjY29tbW9kYXRpb24gJHthY2NvbW1vZGF0aW9uLmlkfTpgLCBlcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICBpZDogYWNjb21tb2RhdGlvbi5pZCxcbiAgICAgICAgICAgICAgICAgIG5hbWU6IGFjY29tbW9kYXRpb24ubmFtZSxcbiAgICAgICAgICAgICAgICAgIHNsdWc6IGFjY29tbW9kYXRpb24uc2x1ZyxcbiAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBhY2NvbW1vZGF0aW9uLmxvY2F0aW9ucz8ubmFtZSxcbiAgICAgICAgICAgICAgICAgIHJvb21fY291bnQ6IDAsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIHJlc3VsdHMuYWNjb21tb2RhdGlvbnMgPSBhY2NvbW1vZGF0aW9uc1dpdGhSb29tQ291bnRzO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQWNjb21tb2RhdGlvbnMgc2VhcmNoIGV4Y2VwdGlvbjonLCBlcnIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YTogcmVzdWx0cyxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdSZWZlcmVuY2Ugc2VhcmNoIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdJTlRFUk5BTF9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnU2VhcmNoIGZhaWxlZCcsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkdFVCIsInJlcXVlc3QiLCJjb29raWVTdG9yZSIsImNvb2tpZXMiLCJzdXBhYmFzZSIsImNyZWF0ZVJvdXRlSGFuZGxlckNsaWVudCIsImRhdGEiLCJzZXNzaW9uIiwiZXJyb3IiLCJhdXRoRXJyb3IiLCJhdXRoIiwiZ2V0U2Vzc2lvbiIsIk5leHRSZXNwb25zZSIsImpzb24iLCJzdWNjZXNzIiwiY29kZSIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJxdWVyeSIsImdldCIsInR5cGVzUGFyYW0iLCJ0eXBlcyIsInNwbGl0IiwiZmlsdGVyIiwiQm9vbGVhbiIsInRyaW0iLCJldmVudHMiLCJhY3Rpdml0aWVzIiwiY29udGVudF9wYWdlcyIsImFjY29tbW9kYXRpb25zIiwicmVzdWx0cyIsImluY2x1ZGVzIiwiZXZlbnRzRXJyb3IiLCJmcm9tIiwic2VsZWN0Iiwib3IiLCJpcyIsIm9yZGVyIiwiYXNjZW5kaW5nIiwibGltaXQiLCJjb25zb2xlIiwibWFwIiwiZXZlbnQiLCJpZCIsIm5hbWUiLCJzbHVnIiwiZGF0ZSIsImxvY2F0aW9uIiwibG9jYXRpb25zIiwiZXJyIiwiYWN0aXZpdGllc0Vycm9yIiwiYWN0aXZpdHkiLCJzdGFydF90aW1lIiwiY2FwYWNpdHkiLCJwYWdlcyIsInBhZ2VzRXJyb3IiLCJlcSIsInBhZ2UiLCJ0aXRsZSIsInR5cGUiLCJhY2NvbW1vZGF0aW9uc0Vycm9yIiwiYWNjb21tb2RhdGlvbnNXaXRoUm9vbUNvdW50cyIsIlByb21pc2UiLCJhbGwiLCJhY2NvbW1vZGF0aW9uIiwiY291bnQiLCJoZWFkIiwicm9vbV9jb3VudCIsIkVycm9yIl0sIm1hcHBpbmdzIjoiOzs7OytCQUlzQkE7OztlQUFBQTs7O21DQUptQjt5QkFDakI7d0JBQ0s7QUFFdEIsZUFBZUEsSUFBSUMsT0FBZ0I7SUFDeEMsSUFBSTtRQUNGLGdCQUFnQjtRQUNoQixNQUFNQyxjQUFjQyxJQUFBQSxnQkFBTztRQUMzQixNQUFNQyxXQUFXQyxJQUFBQSwyQ0FBd0IsRUFBQztZQUFFRixTQUFTLElBQU1EO1FBQVk7UUFDdkUsTUFBTSxFQUFFSSxNQUFNLEVBQUVDLE9BQU8sRUFBRSxFQUFFQyxPQUFPQyxTQUFTLEVBQUUsR0FBRyxNQUFNTCxTQUFTTSxJQUFJLENBQUNDLFVBQVU7UUFFOUUsSUFBSUYsYUFBYSxDQUFDRixTQUFTO1lBQ3pCLE9BQU9LLG9CQUFZLENBQUNDLElBQUksQ0FDdEI7Z0JBQ0VDLFNBQVM7Z0JBQ1ROLE9BQU87b0JBQUVPLE1BQU07b0JBQWdCQyxTQUFTO2dCQUEwQjtZQUNwRSxHQUNBO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSw0QkFBNEI7UUFDNUIsTUFBTSxFQUFFQyxZQUFZLEVBQUUsR0FBRyxJQUFJQyxJQUFJbEIsUUFBUW1CLEdBQUc7UUFDNUMsTUFBTUMsUUFBUUgsYUFBYUksR0FBRyxDQUFDLFFBQVE7UUFDdkMs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