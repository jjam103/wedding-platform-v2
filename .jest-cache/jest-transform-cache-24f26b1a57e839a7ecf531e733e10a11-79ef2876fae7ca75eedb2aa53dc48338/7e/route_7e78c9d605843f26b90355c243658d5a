ef8194e792028ff0afbd733385f75970
"use strict";

/* istanbul ignore next */
function cov_2766fox2qw() {
  var path = "/Users/jaron/Desktop/wedding-platform-v2/app/api/admin/alerts/route.ts";
  var hash = "029f1181180576309a3334e6d6f53fc7de6a2cc0";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/jaron/Desktop/wedding-platform-v2/app/api/admin/alerts/route.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 5,
          column: 0
        },
        end: {
          line: 10,
          column: 3
        }
      },
      "2": {
        start: {
          line: 8,
          column: 8
        },
        end: {
          line: 8,
          column: 19
        }
      },
      "3": {
        start: {
          line: 11,
          column: 13
        },
        end: {
          line: 11,
          column: 37
        }
      },
      "4": {
        start: {
          line: 12,
          column: 17
        },
        end: {
          line: 12,
          column: 40
        }
      },
      "5": {
        start: {
          line: 13,
          column: 16
        },
        end: {
          line: 13,
          column: 38
        }
      },
      "6": {
        start: {
          line: 15,
          column: 4
        },
        end: {
          line: 140,
          column: 5
        }
      },
      "7": {
        start: {
          line: 17,
          column: 28
        },
        end: {
          line: 17,
          column: 57
        }
      },
      "8": {
        start: {
          line: 18,
          column: 25
        },
        end: {
          line: 29,
          column: 10
        }
      },
      "9": {
        start: {
          line: 21,
          column: 20
        },
        end: {
          line: 21,
          column: 48
        }
      },
      "10": {
        start: {
          line: 24,
          column: 20
        },
        end: {
          line: 26,
          column: 23
        }
      },
      "11": {
        start: {
          line: 25,
          column: 24
        },
        end: {
          line: 25,
          column: 62
        }
      },
      "12": {
        start: {
          line: 30,
          column: 53
        },
        end: {
          line: 30,
          column: 82
        }
      },
      "13": {
        start: {
          line: 31,
          column: 8
        },
        end: {
          line: 41,
          column: 9
        }
      },
      "14": {
        start: {
          line: 32,
          column: 12
        },
        end: {
          line: 40,
          column: 15
        }
      },
      "15": {
        start: {
          line: 43,
          column: 53
        },
        end: {
          line: 43,
          column: 123
        }
      },
      "16": {
        start: {
          line: 44,
          column: 8
        },
        end: {
          line: 57,
          column: 9
        }
      },
      "17": {
        start: {
          line: 48,
          column: 12
        },
        end: {
          line: 56,
          column: 15
        }
      },
      "18": {
        start: {
          line: 59,
          column: 23
        },
        end: {
          line: 59,
          column: 25
        }
      },
      "19": {
        start: {
          line: 61,
          column: 37
        },
        end: {
          line: 61,
          column: 127
        }
      },
      "20": {
        start: {
          line: 62,
          column: 8
        },
        end: {
          line: 77,
          column: 9
        }
      },
      "21": {
        start: {
          line: 63,
          column: 12
        },
        end: {
          line: 76,
          column: 13
        }
      },
      "22": {
        start: {
          line: 64,
          column: 45
        },
        end: {
          line: 67,
          column: 75
        }
      },
      "23": {
        start: {
          line: 68,
          column: 16
        },
        end: {
          line: 75,
          column: 17
        }
      },
      "24": {
        start: {
          line: 69,
          column: 20
        },
        end: {
          line: 74,
          column: 23
        }
      },
      "25": {
        start: {
          line: 79,
          column: 20
        },
        end: {
          line: 79,
          column: 30
        }
      },
      "26": {
        start: {
          line: 80,
          column: 33
        },
        end: {
          line: 80,
          column: 82
        }
      },
      "27": {
        start: {
          line: 81,
          column: 44
        },
        end: {
          line: 81,
          column: 233
        }
      },
      "28": {
        start: {
          line: 82,
          column: 8
        },
        end: {
          line: 92,
          column: 9
        }
      },
      "29": {
        start: {
          line: 83,
          column: 12
        },
        end: {
          line: 91,
          column: 13
        }
      },
      "30": {
        start: {
          line: 84,
          column: 34
        },
        end: {
          line: 84,
          column: 126
        }
      },
      "31": {
        start: {
          line: 85,
          column: 16
        },
        end: {
          line: 90,
          column: 19
        }
      },
      "32": {
        start: {
          line: 94,
          column: 41
        },
        end: {
          line: 97,
          column: 45
        }
      },
      "33": {
        start: {
          line: 98,
          column: 8
        },
        end: {
          line: 105,
          column: 9
        }
      },
      "34": {
        start: {
          line: 99,
          column: 12
        },
        end: {
          line: 104,
          column: 15
        }
      },
      "35": {
        start: {
          line: 107,
          column: 40
        },
        end: {
          line: 107,
          column: 144
        }
      },
      "36": {
        start: {
          line: 108,
          column: 8
        },
        end: {
          line: 116,
          column: 9
        }
      },
      "37": {
        start: {
          line: 109,
          column: 32
        },
        end: {
          line: 109,
          column: 102
        }
      },
      "38": {
        start: {
          line: 109,
          column: 63
        },
        end: {
          line: 109,
          column: 98
        }
      },
      "39": {
        start: {
          line: 110,
          column: 12
        },
        end: {
          line: 115,
          column: 15
        }
      },
      "40": {
        start: {
          line: 118,
          column: 29
        },
        end: {
          line: 122,
          column: 9
        }
      },
      "41": {
        start: {
          line: 123,
          column: 8
        },
        end: {
          line: 123,
          column: 73
        }
      },
      "42": {
        start: {
          line: 123,
          column: 28
        },
        end: {
          line: 123,
          column: 71
        }
      },
      "43": {
        start: {
          line: 124,
          column: 8
        },
        end: {
          line: 129,
          column: 11
        }
      },
      "44": {
        start: {
          line: 131,
          column: 8
        },
        end: {
          line: 139,
          column: 11
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 7,
            column: 9
          },
          end: {
            line: 7,
            column: 10
          }
        },
        loc: {
          start: {
            line: 7,
            column: 20
          },
          end: {
            line: 9,
            column: 5
          }
        },
        line: 7
      },
      "1": {
        name: "GET",
        decl: {
          start: {
            line: 14,
            column: 15
          },
          end: {
            line: 14,
            column: 18
          }
        },
        loc: {
          start: {
            line: 14,
            column: 28
          },
          end: {
            line: 141,
            column: 1
          }
        },
        line: 14
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 20,
            column: 16
          },
          end: {
            line: 20,
            column: 17
          }
        },
        loc: {
          start: {
            line: 20,
            column: 26
          },
          end: {
            line: 22,
            column: 17
          }
        },
        line: 20
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 23,
            column: 16
          },
          end: {
            line: 23,
            column: 17
          }
        },
        loc: {
          start: {
            line: 23,
            column: 38
          },
          end: {
            line: 27,
            column: 17
          }
        },
        line: 23
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 24,
            column: 41
          },
          end: {
            line: 24,
            column: 42
          }
        },
        loc: {
          start: {
            line: 24,
            column: 69
          },
          end: {
            line: 26,
            column: 21
          }
        },
        line: 24
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 109,
            column: 53
          },
          end: {
            line: 109,
            column: 54
          }
        },
        loc: {
          start: {
            line: 109,
            column: 63
          },
          end: {
            line: 109,
            column: 98
          }
        },
        line: 109
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 123,
            column: 20
          },
          end: {
            line: 123,
            column: 21
          }
        },
        loc: {
          start: {
            line: 123,
            column: 28
          },
          end: {
            line: 123,
            column: 71
          }
        },
        line: 123
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 31,
            column: 8
          },
          end: {
            line: 41,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 31,
            column: 8
          },
          end: {
            line: 41,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 31
      },
      "1": {
        loc: {
          start: {
            line: 31,
            column: 12
          },
          end: {
            line: 31,
            column: 30
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 31,
            column: 12
          },
          end: {
            line: 31,
            column: 21
          }
        }, {
          start: {
            line: 31,
            column: 25
          },
          end: {
            line: 31,
            column: 30
          }
        }],
        line: 31
      },
      "2": {
        loc: {
          start: {
            line: 44,
            column: 8
          },
          end: {
            line: 57,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 44,
            column: 8
          },
          end: {
            line: 57,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 44
      },
      "3": {
        loc: {
          start: {
            line: 44,
            column: 12
          },
          end: {
            line: 47,
            column: 33
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 44,
            column: 12
          },
          end: {
            line: 44,
            column: 21
          }
        }, {
          start: {
            line: 44,
            column: 25
          },
          end: {
            line: 44,
            column: 34
          }
        }, {
          start: {
            line: 44,
            column: 38
          },
          end: {
            line: 47,
            column: 33
          }
        }],
        line: 44
      },
      "4": {
        loc: {
          start: {
            line: 62,
            column: 8
          },
          end: {
            line: 77,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 62,
            column: 8
          },
          end: {
            line: 77,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 62
      },
      "5": {
        loc: {
          start: {
            line: 68,
            column: 16
          },
          end: {
            line: 75,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 68,
            column: 16
          },
          end: {
            line: 75,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 68
      },
      "6": {
        loc: {
          start: {
            line: 68,
            column: 20
          },
          end: {
            line: 68,
            column: 90
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 68,
            column: 20
          },
          end: {
            line: 68,
            column: 29
          }
        }, {
          start: {
            line: 68,
            column: 33
          },
          end: {
            line: 68,
            column: 50
          }
        }, {
          start: {
            line: 68,
            column: 54
          },
          end: {
            line: 68,
            column: 90
          }
        }],
        line: 68
      },
      "7": {
        loc: {
          start: {
            line: 82,
            column: 8
          },
          end: {
            line: 92,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 82,
            column: 8
          },
          end: {
            line: 92,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 82
      },
      "8": {
        loc: {
          start: {
            line: 98,
            column: 8
          },
          end: {
            line: 105,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 98,
            column: 8
          },
          end: {
            line: 105,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 98
      },
      "9": {
        loc: {
          start: {
            line: 98,
            column: 12
          },
          end: {
            line: 98,
            column: 46
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 98,
            column: 12
          },
          end: {
            line: 98,
            column: 25
          }
        }, {
          start: {
            line: 98,
            column: 29
          },
          end: {
            line: 98,
            column: 46
          }
        }],
        line: 98
      },
      "10": {
        loc: {
          start: {
            line: 102,
            column: 50
          },
          end: {
            line: 102,
            column: 78
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 102,
            column: 70
          },
          end: {
            line: 102,
            column: 73
          }
        }, {
          start: {
            line: 102,
            column: 76
          },
          end: {
            line: 102,
            column: 78
          }
        }],
        line: 102
      },
      "11": {
        loc: {
          start: {
            line: 108,
            column: 8
          },
          end: {
            line: 116,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 108,
            column: 8
          },
          end: {
            line: 116,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 108
      },
      "12": {
        loc: {
          start: {
            line: 108,
            column: 12
          },
          end: {
            line: 108,
            column: 53
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 108,
            column: 12
          },
          end: {
            line: 108,
            column: 25
          }
        }, {
          start: {
            line: 108,
            column: 29
          },
          end: {
            line: 108,
            column: 53
          }
        }],
        line: 108
      },
      "13": {
        loc: {
          start: {
            line: 113,
            column: 58
          },
          end: {
            line: 113,
            column: 93
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 113,
            column: 85
          },
          end: {
            line: 113,
            column: 88
          }
        }, {
          start: {
            line: 113,
            column: 91
          },
          end: {
            line: 113,
            column: 93
          }
        }],
        line: 113
      },
      "14": {
        loc: {
          start: {
            line: 135,
            column: 25
          },
          end: {
            line: 135,
            column: 81
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 135,
            column: 50
          },
          end: {
            line: 135,
            column: 63
          }
        }, {
          start: {
            line: 135,
            column: 66
          },
          end: {
            line: 135,
            column: 81
          }
        }],
        line: 135
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["/Users/jaron/Desktop/wedding-platform-v2/app/api/admin/alerts/route.ts"],
      sourcesContent: ["import { createServerClient } from '@supabase/ssr';\nimport { cookies } from 'next/headers';\nimport { NextResponse } from 'next/server';\n\ninterface Alert {\n  id: string;\n  type: 'warning' | 'error' | 'info';\n  message: string;\n  timestamp: Date;\n}\n\n/**\n * GET /api/admin/alerts\n * \n * Fetches real-time alerts for the admin dashboard including:\n * - Capacity warnings\n * - RSVP deadline reminders\n * - Pending moderation items\n * - Payment reminders\n */\nexport async function GET(request: Request): Promise<NextResponse> {\n  try {\n    // 1. Auth check\n    const cookieStore = await cookies();\n    const supabase = createServerClient(\n      process.env.NEXT_PUBLIC_SUPABASE_URL!,\n      process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n      {\n        cookies: {\n          getAll() {\n            return cookieStore.getAll();\n          },\n          setAll(cookiesToSet) {\n            cookiesToSet.forEach(({ name, value, options }) => {\n              cookieStore.set(name, value, options);\n            });\n          },\n        },\n      }\n    );\n\n    const { data: { user }, error: authError } = await supabase.auth.getUser();\n\n    if (authError || !user) {\n      return NextResponse.json(\n        { success: false, error: { code: 'UNAUTHORIZED', message: 'Authentication required' } },\n        { status: 401 }\n      );\n    }\n\n    // 2. Verify user is admin/host\n    const { data: userData, error: userError } = await supabase\n      .from('users')\n      .select('role')\n      .eq('id', user.id)\n      .single();\n\n    if (userError || !userData || !['super_admin', 'host'].includes(userData.role)) {\n      return NextResponse.json(\n        { success: false, error: { code: 'FORBIDDEN', message: 'Admin access required' } },\n        { status: 403 }\n      );\n    }\n\n    // 3. Generate alerts\n    const alerts: Alert[] = [];\n\n    // Check for capacity warnings\n    const { data: activities } = await supabase\n      .from('activities')\n      .select('id, name, capacity')\n      .not('capacity', 'is', null);\n\n    if (activities) {\n      for (const activity of activities) {\n        const { count: rsvpCount } = await supabase\n          .from('rsvps')\n          .select('*', { count: 'exact', head: true })\n          .eq('activity_id', activity.id)\n          .eq('status', 'attending');\n\n        if (rsvpCount && activity.capacity && rsvpCount >= activity.capacity * 0.9) {\n          alerts.push({\n            id: `capacity-${activity.id}`,\n            type: 'warning',\n            message: `Activity \"${activity.name}\" is at ${Math.round((rsvpCount / activity.capacity) * 100)}% capacity`,\n            timestamp: new Date(),\n          });\n        }\n      }\n    }\n\n    // Check for upcoming RSVP deadlines\n    const now = new Date();\n    const sevenDaysFromNow = new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000);\n\n    const { data: upcomingDeadlines } = await supabase\n      .from('events')\n      .select('id, name, rsvp_deadline')\n      .not('rsvp_deadline', 'is', null)\n      .gte('rsvp_deadline', now.toISOString())\n      .lte('rsvp_deadline', sevenDaysFromNow.toISOString());\n\n    if (upcomingDeadlines) {\n      for (const event of upcomingDeadlines) {\n        const daysUntil = Math.ceil(\n          (new Date(event.rsvp_deadline).getTime() - now.getTime()) / (24 * 60 * 60 * 1000)\n        );\n        alerts.push({\n          id: `deadline-${event.id}`,\n          type: 'info',\n          message: `RSVP deadline for \"${event.name}\" is in ${daysUntil} days`,\n          timestamp: new Date(),\n        });\n      }\n    }\n\n    // Check for pending photo moderation\n    const { count: pendingPhotos } = await supabase\n      .from('photos')\n      .select('*', { count: 'exact', head: true })\n      .eq('moderation_status', 'pending');\n\n    if (pendingPhotos && pendingPhotos > 0) {\n      alerts.push({\n        id: 'pending-photos',\n        type: 'info',\n        message: `${pendingPhotos} photo${pendingPhotos > 1 ? 's' : ''} pending moderation`,\n        timestamp: new Date(),\n      });\n    }\n\n    // Check for unpaid vendors\n    const { data: unpaidVendors } = await supabase\n      .from('vendors')\n      .select('id, name, base_cost, amount_paid')\n      .eq('payment_status', 'unpaid');\n\n    if (unpaidVendors && unpaidVendors.length > 0) {\n      const totalUnpaid = unpaidVendors.reduce((sum, v) => sum + (v.base_cost - v.amount_paid), 0);\n      alerts.push({\n        id: 'unpaid-vendors',\n        type: 'warning',\n        message: `${unpaidVendors.length} vendor${unpaidVendors.length > 1 ? 's' : ''} with outstanding payments ($${totalUnpaid.toLocaleString()})`,\n        timestamp: new Date(),\n      });\n    }\n\n    // Sort alerts by type priority (error > warning > info)\n    const typePriority = { error: 0, warning: 1, info: 2 };\n    alerts.sort((a, b) => typePriority[a.type] - typePriority[b.type]);\n\n    return NextResponse.json({ success: true, data: alerts }, { status: 200 });\n  } catch (error) {\n    return NextResponse.json(\n      {\n        success: false,\n        error: {\n          code: 'INTERNAL_ERROR',\n          message: error instanceof Error ? error.message : 'Unknown error',\n        },\n      },\n      { status: 500 }\n    );\n  }\n}\n"],
      names: ["GET", "request", "cookieStore", "cookies", "supabase", "createServerClient", "process", "env", "NEXT_PUBLIC_SUPABASE_URL", "NEXT_PUBLIC_SUPABASE_ANON_KEY", "getAll", "setAll", "cookiesToSet", "forEach", "name", "value", "options", "set", "data", "user", "error", "authError", "auth", "getUser", "NextResponse", "json", "success", "code", "message", "status", "userData", "userError", "from", "select", "eq", "id", "single", "includes", "role", "alerts", "activities", "not", "activity", "count", "rsvpCount", "head", "capacity", "push", "type", "Math", "round", "timestamp", "Date", "now", "sevenDaysFromNow", "getTime", "upcomingDeadlines", "gte", "toISOString", "lte", "event", "daysUntil", "ceil", "rsvp_deadline", "pendingPhotos", "unpaidVendors", "length", "totalUnpaid", "reduce", "sum", "v", "base_cost", "amount_paid", "toLocaleString", "typePriority", "warning", "info", "sort", "a", "b", "Error"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "029f1181180576309a3334e6d6f53fc7de6a2cc0"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2766fox2qw = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2766fox2qw();
cov_2766fox2qw().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_2766fox2qw().s[1]++;
Object.defineProperty(exports, "GET", {
  enumerable: true,
  get: function () {
    /* istanbul ignore next */
    cov_2766fox2qw().f[0]++;
    cov_2766fox2qw().s[2]++;
    return GET;
  }
});
const _ssr =
/* istanbul ignore next */
(cov_2766fox2qw().s[3]++, require("@supabase/ssr"));
const _headers =
/* istanbul ignore next */
(cov_2766fox2qw().s[4]++, require("next/headers"));
const _server =
/* istanbul ignore next */
(cov_2766fox2qw().s[5]++, require("next/server"));
async function GET(request) {
  /* istanbul ignore next */
  cov_2766fox2qw().f[1]++;
  cov_2766fox2qw().s[6]++;
  try {
    // 1. Auth check
    const cookieStore =
    /* istanbul ignore next */
    (cov_2766fox2qw().s[7]++, await (0, _headers.cookies)());
    const supabase =
    /* istanbul ignore next */
    (cov_2766fox2qw().s[8]++, (0, _ssr.createServerClient)(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY, {
      cookies: {
        getAll() {
          /* istanbul ignore next */
          cov_2766fox2qw().f[2]++;
          cov_2766fox2qw().s[9]++;
          return cookieStore.getAll();
        },
        setAll(cookiesToSet) {
          /* istanbul ignore next */
          cov_2766fox2qw().f[3]++;
          cov_2766fox2qw().s[10]++;
          cookiesToSet.forEach(({
            name,
            value,
            options
          }) => {
            /* istanbul ignore next */
            cov_2766fox2qw().f[4]++;
            cov_2766fox2qw().s[11]++;
            cookieStore.set(name, value, options);
          });
        }
      }
    }));
    const {
      data: {
        user
      },
      error: authError
    } =
    /* istanbul ignore next */
    (cov_2766fox2qw().s[12]++, await supabase.auth.getUser());
    /* istanbul ignore next */
    cov_2766fox2qw().s[13]++;
    if (
    /* istanbul ignore next */
    (cov_2766fox2qw().b[1][0]++, authError) ||
    /* istanbul ignore next */
    (cov_2766fox2qw().b[1][1]++, !user)) {
      /* istanbul ignore next */
      cov_2766fox2qw().b[0][0]++;
      cov_2766fox2qw().s[14]++;
      return _server.NextResponse.json({
        success: false,
        error: {
          code: 'UNAUTHORIZED',
          message: 'Authentication required'
        }
      }, {
        status: 401
      });
    } else
    /* istanbul ignore next */
    {
      cov_2766fox2qw().b[0][1]++;
    }
    // 2. Verify user is admin/host
    const {
      data: userData,
      error: userError
    } =
    /* istanbul ignore next */
    (cov_2766fox2qw().s[15]++, await supabase.from('users').select('role').eq('id', user.id).single());
    /* istanbul ignore next */
    cov_2766fox2qw().s[16]++;
    if (
    /* istanbul ignore next */
    (cov_2766fox2qw().b[3][0]++, userError) ||
    /* istanbul ignore next */
    (cov_2766fox2qw().b[3][1]++, !userData) ||
    /* istanbul ignore next */
    (cov_2766fox2qw().b[3][2]++, !['super_admin', 'host'].includes(userData.role))) {
      /* istanbul ignore next */
      cov_2766fox2qw().b[2][0]++;
      cov_2766fox2qw().s[17]++;
      return _server.NextResponse.json({
        success: false,
        error: {
          code: 'FORBIDDEN',
          message: 'Admin access required'
        }
      }, {
        status: 403
      });
    } else
    /* istanbul ignore next */
    {
      cov_2766fox2qw().b[2][1]++;
    }
    // 3. Generate alerts
    const alerts =
    /* istanbul ignore next */
    (cov_2766fox2qw().s[18]++, []);
    // Check for capacity warnings
    const {
      data: activities
    } =
    /* istanbul ignore next */
    (cov_2766fox2qw().s[19]++, await supabase.from('activities').select('id, name, capacity').not('capacity', 'is', null));
    /* istanbul ignore next */
    cov_2766fox2qw().s[20]++;
    if (activities) {
      /* istanbul ignore next */
      cov_2766fox2qw().b[4][0]++;
      cov_2766fox2qw().s[21]++;
      for (const activity of activities) {
        const {
          count: rsvpCount
        } =
        /* istanbul ignore next */
        (cov_2766fox2qw().s[22]++, await supabase.from('rsvps').select('*', {
          count: 'exact',
          head: true
        }).eq('activity_id', activity.id).eq('status', 'attending'));
        /* istanbul ignore next */
        cov_2766fox2qw().s[23]++;
        if (
        /* istanbul ignore next */
        (cov_2766fox2qw().b[6][0]++, rsvpCount) &&
        /* istanbul ignore next */
        (cov_2766fox2qw().b[6][1]++, activity.capacity) &&
        /* istanbul ignore next */
        (cov_2766fox2qw().b[6][2]++, rsvpCount >= activity.capacity * 0.9)) {
          /* istanbul ignore next */
          cov_2766fox2qw().b[5][0]++;
          cov_2766fox2qw().s[24]++;
          alerts.push({
            id: `capacity-${activity.id}`,
            type: 'warning',
            message: `Activity "${activity.name}" is at ${Math.round(rsvpCount / activity.capacity * 100)}% capacity`,
            timestamp: new Date()
          });
        } else
        /* istanbul ignore next */
        {
          cov_2766fox2qw().b[5][1]++;
        }
      }
    } else
    /* istanbul ignore next */
    {
      cov_2766fox2qw().b[4][1]++;
    }
    // Check for upcoming RSVP deadlines
    const now =
    /* istanbul ignore next */
    (cov_2766fox2qw().s[25]++, new Date());
    const sevenDaysFromNow =
    /* istanbul ignore next */
    (cov_2766fox2qw().s[26]++, new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000));
    const {
      data: upcomingDeadlines
    } =
    /* istanbul ignore next */
    (cov_2766fox2qw().s[27]++, await supabase.from('events').select('id, name, rsvp_deadline').not('rsvp_deadline', 'is', null).gte('rsvp_deadline', now.toISOString()).lte('rsvp_deadline', sevenDaysFromNow.toISOString()));
    /* istanbul ignore next */
    cov_2766fox2qw().s[28]++;
    if (upcomingDeadlines) {
      /* istanbul ignore next */
      cov_2766fox2qw().b[7][0]++;
      cov_2766fox2qw().s[29]++;
      for (const event of upcomingDeadlines) {
        const daysUntil =
        /* istanbul ignore next */
        (cov_2766fox2qw().s[30]++, Math.ceil((new Date(event.rsvp_deadline).getTime() - now.getTime()) / (24 * 60 * 60 * 1000)));
        /* istanbul ignore next */
        cov_2766fox2qw().s[31]++;
        alerts.push({
          id: `deadline-${event.id}`,
          type: 'info',
          message: `RSVP deadline for "${event.name}" is in ${daysUntil} days`,
          timestamp: new Date()
        });
      }
    } else
    /* istanbul ignore next */
    {
      cov_2766fox2qw().b[7][1]++;
    }
    // Check for pending photo moderation
    const {
      count: pendingPhotos
    } =
    /* istanbul ignore next */
    (cov_2766fox2qw().s[32]++, await supabase.from('photos').select('*', {
      count: 'exact',
      head: true
    }).eq('moderation_status', 'pending'));
    /* istanbul ignore next */
    cov_2766fox2qw().s[33]++;
    if (
    /* istanbul ignore next */
    (cov_2766fox2qw().b[9][0]++, pendingPhotos) &&
    /* istanbul ignore next */
    (cov_2766fox2qw().b[9][1]++, pendingPhotos > 0)) {
      /* istanbul ignore next */
      cov_2766fox2qw().b[8][0]++;
      cov_2766fox2qw().s[34]++;
      alerts.push({
        id: 'pending-photos',
        type: 'info',
        message: `${pendingPhotos} photo${pendingPhotos > 1 ?
        /* istanbul ignore next */
        (cov_2766fox2qw().b[10][0]++, 's') :
        /* istanbul ignore next */
        (cov_2766fox2qw().b[10][1]++, '')} pending moderation`,
        timestamp: new Date()
      });
    } else
    /* istanbul ignore next */
    {
      cov_2766fox2qw().b[8][1]++;
    }
    // Check for unpaid vendors
    const {
      data: unpaidVendors
    } =
    /* istanbul ignore next */
    (cov_2766fox2qw().s[35]++, await supabase.from('vendors').select('id, name, base_cost, amount_paid').eq('payment_status', 'unpaid'));
    /* istanbul ignore next */
    cov_2766fox2qw().s[36]++;
    if (
    /* istanbul ignore next */
    (cov_2766fox2qw().b[12][0]++, unpaidVendors) &&
    /* istanbul ignore next */
    (cov_2766fox2qw().b[12][1]++, unpaidVendors.length > 0)) {
      /* istanbul ignore next */
      cov_2766fox2qw().b[11][0]++;
      const totalUnpaid =
      /* istanbul ignore next */
      (cov_2766fox2qw().s[37]++, unpaidVendors.reduce((sum, v) => {
        /* istanbul ignore next */
        cov_2766fox2qw().f[5]++;
        cov_2766fox2qw().s[38]++;
        return sum + (v.base_cost - v.amount_paid);
      }, 0));
      /* istanbul ignore next */
      cov_2766fox2qw().s[39]++;
      alerts.push({
        id: 'unpaid-vendors',
        type: 'warning',
        message: `${unpaidVendors.length} vendor${unpaidVendors.length > 1 ?
        /* istanbul ignore next */
        (cov_2766fox2qw().b[13][0]++, 's') :
        /* istanbul ignore next */
        (cov_2766fox2qw().b[13][1]++, '')} with outstanding payments ($${totalUnpaid.toLocaleString()})`,
        timestamp: new Date()
      });
    } else
    /* istanbul ignore next */
    {
      cov_2766fox2qw().b[11][1]++;
    }
    // Sort alerts by type priority (error > warning > info)
    const typePriority =
    /* istanbul ignore next */
    (cov_2766fox2qw().s[40]++, {
      error: 0,
      warning: 1,
      info: 2
    });
    /* istanbul ignore next */
    cov_2766fox2qw().s[41]++;
    alerts.sort((a, b) => {
      /* istanbul ignore next */
      cov_2766fox2qw().f[6]++;
      cov_2766fox2qw().s[42]++;
      return typePriority[a.type] - typePriority[b.type];
    });
    /* istanbul ignore next */
    cov_2766fox2qw().s[43]++;
    return _server.NextResponse.json({
      success: true,
      data: alerts
    }, {
      status: 200
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_2766fox2qw().s[44]++;
    return _server.NextResponse.json({
      success: false,
      error: {
        code: 'INTERNAL_ERROR',
        message: error instanceof Error ?
        /* istanbul ignore next */
        (cov_2766fox2qw().b[14][0]++, error.message) :
        /* istanbul ignore next */
        (cov_2766fox2qw().b[14][1]++, 'Unknown error')
      }
    }, {
      status: 500
    });
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMjc2NmZveDJxdyIsImFjdHVhbENvdmVyYWdlIiwicyIsIkdFVCIsInJlcXVlc3QiLCJmIiwiY29va2llU3RvcmUiLCJfaGVhZGVycyIsImNvb2tpZXMiLCJzdXBhYmFzZSIsIl9zc3IiLCJjcmVhdGVTZXJ2ZXJDbGllbnQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJnZXRBbGwiLCJzZXRBbGwiLCJjb29raWVzVG9TZXQiLCJmb3JFYWNoIiwibmFtZSIsInZhbHVlIiwib3B0aW9ucyIsInNldCIsImRhdGEiLCJ1c2VyIiwiZXJyb3IiLCJhdXRoRXJyb3IiLCJhdXRoIiwiZ2V0VXNlciIsImIiLCJfc2VydmVyIiwiTmV4dFJlc3BvbnNlIiwianNvbiIsInN1Y2Nlc3MiLCJjb2RlIiwibWVzc2FnZSIsInN0YXR1cyIsInVzZXJEYXRhIiwidXNlckVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwiaWQiLCJzaW5nbGUiLCJpbmNsdWRlcyIsInJvbGUiLCJhbGVydHMiLCJhY3Rpdml0aWVzIiwibm90IiwiYWN0aXZpdHkiLCJjb3VudCIsInJzdnBDb3VudCIsImhlYWQiLCJjYXBhY2l0eSIsInB1c2giLCJ0eXBlIiwiTWF0aCIsInJvdW5kIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsInNldmVuRGF5c0Zyb21Ob3ciLCJnZXRUaW1lIiwidXBjb21pbmdEZWFkbGluZXMiLCJndGUiLCJ0b0lTT1N0cmluZyIsImx0ZSIsImV2ZW50IiwiZGF5c1VudGlsIiwiY2VpbCIsInJzdnBfZGVhZGxpbmUiLCJwZW5kaW5nUGhvdG9zIiwidW5wYWlkVmVuZG9ycyIsImxlbmd0aCIsInRvdGFsVW5wYWlkIiwicmVkdWNlIiwic3VtIiwidiIsImJhc2VfY29zdCIsImFtb3VudF9wYWlkIiwidG9Mb2NhbGVTdHJpbmciLCJ0eXBlUHJpb3JpdHkiLCJ3YXJuaW5nIiwiaW5mbyIsInNvcnQiLCJhIiwiRXJyb3IiXSwic291cmNlcyI6WyIvVXNlcnMvamFyb24vRGVza3RvcC93ZWRkaW5nLXBsYXRmb3JtLXYyL2FwcC9hcGkvYWRtaW4vYWxlcnRzL3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVNlcnZlckNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zc3InO1xuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5cbmludGVyZmFjZSBBbGVydCB7XG4gIGlkOiBzdHJpbmc7XG4gIHR5cGU6ICd3YXJuaW5nJyB8ICdlcnJvcicgfCAnaW5mbyc7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgdGltZXN0YW1wOiBEYXRlO1xufVxuXG4vKipcbiAqIEdFVCAvYXBpL2FkbWluL2FsZXJ0c1xuICogXG4gKiBGZXRjaGVzIHJlYWwtdGltZSBhbGVydHMgZm9yIHRoZSBhZG1pbiBkYXNoYm9hcmQgaW5jbHVkaW5nOlxuICogLSBDYXBhY2l0eSB3YXJuaW5nc1xuICogLSBSU1ZQIGRlYWRsaW5lIHJlbWluZGVyc1xuICogLSBQZW5kaW5nIG1vZGVyYXRpb24gaXRlbXNcbiAqIC0gUGF5bWVudCByZW1pbmRlcnNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBSZXF1ZXN0KTogUHJvbWlzZTxOZXh0UmVzcG9uc2U+IHtcbiAgdHJ5IHtcbiAgICAvLyAxLiBBdXRoIGNoZWNrXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVTZXJ2ZXJDbGllbnQoXG4gICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxuICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhLFxuICAgICAge1xuICAgICAgICBjb29raWVzOiB7XG4gICAgICAgICAgZ2V0QWxsKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvb2tpZVN0b3JlLmdldEFsbCgpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0QWxsKGNvb2tpZXNUb1NldCkge1xuICAgICAgICAgICAgY29va2llc1RvU2V0LmZvckVhY2goKHsgbmFtZSwgdmFsdWUsIG9wdGlvbnMgfSkgPT4ge1xuICAgICAgICAgICAgICBjb29raWVTdG9yZS5zZXQobmFtZSwgdmFsdWUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICApO1xuXG4gICAgY29uc3QgeyBkYXRhOiB7IHVzZXIgfSwgZXJyb3I6IGF1dGhFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKCk7XG5cbiAgICBpZiAoYXV0aEVycm9yIHx8ICF1c2VyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiB7IGNvZGU6ICdVTkFVVEhPUklaRUQnLCBtZXNzYWdlOiAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnIH0gfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIDIuIFZlcmlmeSB1c2VyIGlzIGFkbWluL2hvc3RcbiAgICBjb25zdCB7IGRhdGE6IHVzZXJEYXRhLCBlcnJvcjogdXNlckVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VzZXJzJylcbiAgICAgIC5zZWxlY3QoJ3JvbGUnKVxuICAgICAgLmVxKCdpZCcsIHVzZXIuaWQpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAodXNlckVycm9yIHx8ICF1c2VyRGF0YSB8fCAhWydzdXBlcl9hZG1pbicsICdob3N0J10uaW5jbHVkZXModXNlckRhdGEucm9sZSkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IHsgY29kZTogJ0ZPUkJJRERFTicsIG1lc3NhZ2U6ICdBZG1pbiBhY2Nlc3MgcmVxdWlyZWQnIH0gfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIDMuIEdlbmVyYXRlIGFsZXJ0c1xuICAgIGNvbnN0IGFsZXJ0czogQWxlcnRbXSA9IFtdO1xuXG4gICAgLy8gQ2hlY2sgZm9yIGNhcGFjaXR5IHdhcm5pbmdzXG4gICAgY29uc3QgeyBkYXRhOiBhY3Rpdml0aWVzIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2FjdGl2aXRpZXMnKVxuICAgICAgLnNlbGVjdCgnaWQsIG5hbWUsIGNhcGFjaXR5JylcbiAgICAgIC5ub3QoJ2NhcGFjaXR5JywgJ2lzJywgbnVsbCk7XG5cbiAgICBpZiAoYWN0aXZpdGllcykge1xuICAgICAgZm9yIChjb25zdCBhY3Rpdml0eSBvZiBhY3Rpdml0aWVzKSB7XG4gICAgICAgIGNvbnN0IHsgY291bnQ6IHJzdnBDb3VudCB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAuZnJvbSgncnN2cHMnKVxuICAgICAgICAgIC5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnLCBoZWFkOiB0cnVlIH0pXG4gICAgICAgICAgLmVxKCdhY3Rpdml0eV9pZCcsIGFjdGl2aXR5LmlkKVxuICAgICAgICAgIC5lcSgnc3RhdHVzJywgJ2F0dGVuZGluZycpO1xuXG4gICAgICAgIGlmIChyc3ZwQ291bnQgJiYgYWN0aXZpdHkuY2FwYWNpdHkgJiYgcnN2cENvdW50ID49IGFjdGl2aXR5LmNhcGFjaXR5ICogMC45KSB7XG4gICAgICAgICAgYWxlcnRzLnB1c2goe1xuICAgICAgICAgICAgaWQ6IGBjYXBhY2l0eS0ke2FjdGl2aXR5LmlkfWAsXG4gICAgICAgICAgICB0eXBlOiAnd2FybmluZycsXG4gICAgICAgICAgICBtZXNzYWdlOiBgQWN0aXZpdHkgXCIke2FjdGl2aXR5Lm5hbWV9XCIgaXMgYXQgJHtNYXRoLnJvdW5kKChyc3ZwQ291bnQgLyBhY3Rpdml0eS5jYXBhY2l0eSkgKiAxMDApfSUgY2FwYWNpdHlgLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIHVwY29taW5nIFJTVlAgZGVhZGxpbmVzXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBzZXZlbkRheXNGcm9tTm93ID0gbmV3IERhdGUobm93LmdldFRpbWUoKSArIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcblxuICAgIGNvbnN0IHsgZGF0YTogdXBjb21pbmdEZWFkbGluZXMgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnZXZlbnRzJylcbiAgICAgIC5zZWxlY3QoJ2lkLCBuYW1lLCByc3ZwX2RlYWRsaW5lJylcbiAgICAgIC5ub3QoJ3JzdnBfZGVhZGxpbmUnLCAnaXMnLCBudWxsKVxuICAgICAgLmd0ZSgncnN2cF9kZWFkbGluZScsIG5vdy50b0lTT1N0cmluZygpKVxuICAgICAgLmx0ZSgncnN2cF9kZWFkbGluZScsIHNldmVuRGF5c0Zyb21Ob3cudG9JU09TdHJpbmcoKSk7XG5cbiAgICBpZiAodXBjb21pbmdEZWFkbGluZXMpIHtcbiAgICAgIGZvciAoY29uc3QgZXZlbnQgb2YgdXBjb21pbmdEZWFkbGluZXMpIHtcbiAgICAgICAgY29uc3QgZGF5c1VudGlsID0gTWF0aC5jZWlsKFxuICAgICAgICAgIChuZXcgRGF0ZShldmVudC5yc3ZwX2RlYWRsaW5lKS5nZXRUaW1lKCkgLSBub3cuZ2V0VGltZSgpKSAvICgyNCAqIDYwICogNjAgKiAxMDAwKVxuICAgICAgICApO1xuICAgICAgICBhbGVydHMucHVzaCh7XG4gICAgICAgICAgaWQ6IGBkZWFkbGluZS0ke2V2ZW50LmlkfWAsXG4gICAgICAgICAgdHlwZTogJ2luZm8nLFxuICAgICAgICAgIG1lc3NhZ2U6IGBSU1ZQIGRlYWRsaW5lIGZvciBcIiR7ZXZlbnQubmFtZX1cIiBpcyBpbiAke2RheXNVbnRpbH0gZGF5c2AsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgcGVuZGluZyBwaG90byBtb2RlcmF0aW9uXG4gICAgY29uc3QgeyBjb3VudDogcGVuZGluZ1Bob3RvcyB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwaG90b3MnKVxuICAgICAgLnNlbGVjdCgnKicsIHsgY291bnQ6ICdleGFjdCcsIGhlYWQ6IHRydWUgfSlcbiAgICAgIC5lcSgnbW9kZXJhdGlvbl9zdGF0dXMnLCAncGVuZGluZycpO1xuXG4gICAgaWYgKHBlbmRpbmdQaG90b3MgJiYgcGVuZGluZ1Bob3RvcyA+IDApIHtcbiAgICAgIGFsZXJ0cy5wdXNoKHtcbiAgICAgICAgaWQ6ICdwZW5kaW5nLXBob3RvcycsXG4gICAgICAgIHR5cGU6ICdpbmZvJyxcbiAgICAgICAgbWVzc2FnZTogYCR7cGVuZGluZ1Bob3Rvc30gcGhvdG8ke3BlbmRpbmdQaG90b3MgPiAxID8gJ3MnIDogJyd9IHBlbmRpbmcgbW9kZXJhdGlvbmAsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciB1bnBhaWQgdmVuZG9yc1xuICAgIGNvbnN0IHsgZGF0YTogdW5wYWlkVmVuZG9ycyB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd2ZW5kb3JzJylcbiAgICAgIC5zZWxlY3QoJ2lkLCBuYW1lLCBiYXNlX2Nvc3QsIGFtb3VudF9wYWlkJylcbiAgICAgIC5lcSgncGF5bWVudF9zdGF0dXMnLCAndW5wYWlkJyk7XG5cbiAgICBpZiAodW5wYWlkVmVuZG9ycyAmJiB1bnBhaWRWZW5kb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHRvdGFsVW5wYWlkID0gdW5wYWlkVmVuZG9ycy5yZWR1Y2UoKHN1bSwgdikgPT4gc3VtICsgKHYuYmFzZV9jb3N0IC0gdi5hbW91bnRfcGFpZCksIDApO1xuICAgICAgYWxlcnRzLnB1c2goe1xuICAgICAgICBpZDogJ3VucGFpZC12ZW5kb3JzJyxcbiAgICAgICAgdHlwZTogJ3dhcm5pbmcnLFxuICAgICAgICBtZXNzYWdlOiBgJHt1bnBhaWRWZW5kb3JzLmxlbmd0aH0gdmVuZG9yJHt1bnBhaWRWZW5kb3JzLmxlbmd0aCA+IDEgPyAncycgOiAnJ30gd2l0aCBvdXRzdGFuZGluZyBwYXltZW50cyAoJCR7dG90YWxVbnBhaWQudG9Mb2NhbGVTdHJpbmcoKX0pYCxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU29ydCBhbGVydHMgYnkgdHlwZSBwcmlvcml0eSAoZXJyb3IgPiB3YXJuaW5nID4gaW5mbylcbiAgICBjb25zdCB0eXBlUHJpb3JpdHkgPSB7IGVycm9yOiAwLCB3YXJuaW5nOiAxLCBpbmZvOiAyIH07XG4gICAgYWxlcnRzLnNvcnQoKGEsIGIpID0+IHR5cGVQcmlvcml0eVthLnR5cGVdIC0gdHlwZVByaW9yaXR5W2IudHlwZV0pO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogYWxlcnRzIH0sIHsgc3RhdHVzOiAyMDAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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