{"version":3,"names":["GET","request","params","cov_t8767h0km","f","s","supabase","_supabaseServer","createAuthenticatedClient","data","session","error","authError","auth","getSession","b","_server","NextResponse","json","success","code","message","status","id","result","_activityService","getCapacityInfo","statusCode","Error"],"sources":["/Users/jaron/Desktop/wedding-platform-v2/app/api/admin/activities/[id]/capacity/route.ts"],"sourcesContent":["import { createAuthenticatedClient } from '@/lib/supabaseServer';\nimport { NextResponse } from 'next/server';\nimport * as activityService from '@/services/activityService';\n\n/**\n * GET /api/admin/activities/[id]/capacity\n * \n * Retrieves capacity information for an activity.\n * \n * Requirements: 5.3, 5.7\n */\nexport async function GET(\n  request: Request,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    // 1. Auth check\n    const supabase = await createAuthenticatedClient();\n    const { data: { session }, error: authError } = await supabase.auth.getSession();\n    \n    if (authError || !session) {\n      return NextResponse.json(\n        { success: false, error: { code: 'UNAUTHORIZED', message: 'Authentication required' } },\n        { status: 401 }\n      );\n    }\n\n    // 2. Await params\n    const { id } = await params;\n\n    // 3. Call service\n    const result = await activityService.getCapacityInfo(id);\n\n    // 3. Return response with proper status\n    if (!result.success) {\n      const statusCode = result.error.code === 'NOT_FOUND' ? 404 : 500;\n      return NextResponse.json(result, { status: statusCode });\n    }\n\n    return NextResponse.json(result, { status: 200 });\n  } catch (error) {\n    return NextResponse.json(\n      {\n        success: false,\n        error: {\n          code: 'INTERNAL_ERROR',\n          message: error instanceof Error ? error.message : 'Unknown error',\n        },\n      },\n      { status: 500 }\n    );\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}