38e1d9e5b99c1cc7b02717152e4cf97f
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "PhotoPicker", {
    enumerable: true,
    get: function() {
        return PhotoPicker;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
function PhotoPicker({ selectedPhotoIds, onSelectionChange, pageType, pageId, disabled = false }) {
    const [photos, setPhotos] = (0, _react.useState)([]);
    const [loading, setLoading] = (0, _react.useState)(true);
    const [error, setError] = (0, _react.useState)(null);
    const [showPicker, setShowPicker] = (0, _react.useState)(false);
    const [uploading, setUploading] = (0, _react.useState)(false);
    const [uploadError, setUploadError] = (0, _react.useState)(null);
    // Fetch approved photos
    (0, _react.useEffect)(()=>{
        if (showPicker) {
            fetchPhotos();
        }
    }, [
        showPicker,
        pageType,
        pageId
    ]);
    // Fetch selected photos on mount to display them
    (0, _react.useEffect)(()=>{
        if (selectedPhotoIds.length > 0) {
            fetchSelectedPhotos();
        }
    }, [
        selectedPhotoIds
    ]);
    const fetchSelectedPhotos = (0, _react.useCallback)(async ()=>{
        try {
            const photoPromises = selectedPhotoIds.map(async (id)=>{
                const response = await fetch(`/api/admin/photos/${id}`);
                if (!response.ok) return null;
                const result = await response.json();
                return result.success ? result.data : null;
            });
            const fetchedPhotos = await Promise.all(photoPromises);
            const validPhotos = fetchedPhotos.filter((p)=>p !== null);
            // Merge with existing photos, avoiding duplicates
            setPhotos((prevPhotos)=>{
                const existingIds = new Set(prevPhotos.map((p)=>p.id));
                const newPhotos = validPhotos.filter((p)=>!existingIds.has(p.id));
                return [
                    ...prevPhotos,
                    ...newPhotos
                ];
            });
        } catch (err) {
            console.error('Failed to fetch selected photos:', err);
        }
    }, [
        selectedPhotoIds
    ]);
    const fetchPhotos = (0, _react.useCallback)(async ()=>{
        setLoading(true);
        setError(null);
        try {
            const params = new URLSearchParams({
                moderation_status: 'approved',
                limit: '100',
                offset: '0'
            });
            if (pageType) {
                params.append('page_type', pageType);
            }
            if (pageId) {
                params.append('page_id', pageId);
            }
            const response = await fetch(`/api/admin/photos?${params.toString()}`);
            const result = await response.json();
            if (result.success) {
                setPhotos(result.data.photos || []);
            } else {
                setError(result.error?.message || 'Failed to load photos');
            }
        } catch (err) {
            setError('Failed to load photos');
        } finally{
            setLoading(false);
        }
    }, [
        pageType,
        pageId
    ]);
    const handleTogglePhoto = (0, _react.useCallback)((photoId)=>{
        if (selectedPhotoIds.includes(photoId)) {
            onSelectionChange(selectedPhotoIds.filter((id)=>id !== photoId));
        } else {
            onSelectionChange([
                ...selectedPhotoIds,
                photoId
            ]);
        }
    }, [
        selectedPhotoIds,
        onSelectionChange
    ]);
    const handleRemovePhoto = (0, _react.useCallback)((photoId)=>{
        onSelectionChange(selectedPhotoIds.filter((id)=>id !== photoId));
    }, [
        selectedPhotoIds,
        onSelectionChange
    ]);
    const handleFileUpload = (0, _react.useCallback)(async (event)=>{
        const files = event.target.files;
        if (!files || files.length === 0) return;
        setUploading(true);
        setUploadError(null);
        try {
            const uploadedPhotoIds = [];
            for (const file of Array.from(files)){
                const formData = new FormData();
                formData.append('file', file);
                const metadata = {
                    page_type: pageType || 'memory',
                    page_id: pageId || 'general',
                    caption: file.name.replace(/\.[^/.]+$/, ''),
                    alt_text: file.name.replace(/\.[^/.]+$/, '')
                };
                formData.append('metadata', JSON.stringify(metadata));
                const response = await fetch('/api/admin/photos', {
                    method: 'POST',
                    body: formData
                });
                const result = await response.json();
                if (result.success) {
                    uploadedPhotoIds.push(result.data.id);
                } else {
                    throw new Error(result.error?.message || 'Upload failed');
                }
            }
            // Add uploaded photos to selection
            onSelectionChange([
                ...selectedPhotoIds,
                ...uploadedPhotoIds
            ]);
            // Refresh photo list
            fetchPhotos();
        } catch (err) {
            setUploadError(err instanceof Error ? err.message : 'Upload failed');
        } finally{
            setUploading(false);
            // Reset file input
            event.target.value = '';
        }
    }, [
        pageType,
        pageId,
        selectedPhotoIds,
        onSelectionChange,
        fetchPhotos
    ]);
    const handleClearAll = (0, _react.useCallback)(()=>{
        onSelectionChange([]);
    }, [
        onSelectionChange
    ]);
    // Get selected photos in order
    const selectedPhotos = selectedPhotoIds.map((id)=>photos.find((p)=>p.id === id)).filter((p)=>p !== undefined);
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: "space-y-4",
        children: [
            selectedPhotoIds.length > 0 && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "border border-gray-200 rounded-lg p-4 bg-gray-50",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center justify-between mb-3",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("h4", {
                                className: "text-sm font-medium text-gray-900",
                                children: [
                                    "Selected Photos (",
                                    selectedPhotoIds.length,
                                    ")"
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                onClick: handleClearAll,
                                disabled: disabled,
                                className: "text-xs text-red-600 hover:text-red-800 disabled:opacity-50 disabled:cursor-not-allowed",
                                "aria-label": "Clear all selected photos",
                                children: "Clear All"
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "grid grid-cols-4 gap-3",
                        children: selectedPhotos.map((photo)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "relative group aspect-square rounded-lg overflow-hidden bg-gray-200",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("img", {
                                        src: photo.photo_url,
                                        alt: photo.alt_text || photo.caption || 'Selected photo',
                                        className: "w-full h-full object-cover"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                        onClick: ()=>handleRemovePhoto(photo.id),
                                        disabled: disabled,
                                        className: "absolute top-1 right-1 p-1 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",
                                        "aria-label": "Remove photo",
                                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)("svg", {
                                            className: "w-4 h-4",
                                            fill: "none",
                                            stroke: "currentColor",
                                            viewBox: "0 0 24 24",
                                            children: /*#__PURE__*/ (0, _jsxruntime.jsx)("path", {
                                                strokeLinecap: "round",
                                                strokeLinejoin: "round",
                                                strokeWidth: 2,
                                                d: "M6 18L18 6M6 6l12 12"
                                            })
                                        })
                                    }),
                                    photo.caption && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                        className: "absolute bottom-0 left-0 right-0 bg-black bg-opacity-60 text-white text-xs p-1 truncate",
                                        children: photo.caption
                                    })
                                ]
                            }, photo.id))
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                onClick: ()=>setShowPicker(true),
                disabled: disabled,
                className: "w-full px-4 py-3 text-sm font-medium text-blue-600 bg-blue-50 border-2 border-dashed border-blue-300 rounded-md hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",
                "aria-label": "Add photos from gallery",
                children: "+ Add Photos from Gallery"
            }),
            showPicker && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",
                onClick: ()=>setShowPicker(false),
                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",
                    onClick: (e)=>e.stopPropagation(),
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "flex items-center justify-between p-6 border-b border-gray-200",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "flex items-center gap-4",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("h3", {
                                            className: "text-lg font-semibold text-gray-900",
                                            children: "Select Photos"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("label", {
                                            className: "relative cursor-pointer",
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                                                    type: "file",
                                                    multiple: true,
                                                    accept: "image/*",
                                                    onChange: handleFileUpload,
                                                    disabled: uploading || disabled,
                                                    className: "sr-only",
                                                    "aria-label": "Upload photos"
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                                    className: "inline-flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-300 rounded-md hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",
                                                    children: [
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("svg", {
                                                            className: "w-4 h-4",
                                                            fill: "none",
                                                            stroke: "currentColor",
                                                            viewBox: "0 0 24 24",
                                                            children: /*#__PURE__*/ (0, _jsxruntime.jsx)("path", {
                                                                strokeLinecap: "round",
                                                                strokeLinejoin: "round",
                                                                strokeWidth: 2,
                                                                d: "M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"
                                                            })
                                                        }),
                                                        uploading ? 'Uploading...' : 'Upload Photos'
                                                    ]
                                                })
                                            ]
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                    onClick: ()=>setShowPicker(false),
                                    className: "text-gray-600 hover:text-gray-900",
                                    "aria-label": "Close photo picker",
                                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)("svg", {
                                        className: "w-6 h-6",
                                        fill: "none",
                                        stroke: "currentColor",
                                        viewBox: "0 0 24 24",
                                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)("path", {
                                            strokeLinecap: "round",
                                            strokeLinejoin: "round",
                                            strokeWidth: 2,
                                            d: "M6 18L18 6M6 6l12 12"
                                        })
                                    })
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "flex-1 overflow-auto p-6",
                            children: [
                                uploadError && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                    className: "mb-4 p-4 bg-red-50 border border-red-200 rounded-md",
                                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                        className: "text-sm text-red-800",
                                        children: uploadError
                                    })
                                }),
                                uploading && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                    className: "mb-4 p-4 bg-blue-50 border border-blue-200 rounded-md",
                                    children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                        className: "flex items-center gap-3",
                                        children: [
                                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("svg", {
                                                className: "animate-spin h-5 w-5 text-blue-600",
                                                xmlns: "http://www.w3.org/2000/svg",
                                                fill: "none",
                                                viewBox: "0 0 24 24",
                                                children: [
                                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("circle", {
                                                        className: "opacity-25",
                                                        cx: "12",
                                                        cy: "12",
                                                        r: "10",
                                                        stroke: "currentColor",
                                                        strokeWidth: "4"
                                                    }),
                                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("path", {
                                                        className: "opacity-75",
                                                        fill: "currentColor",
                                                        d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                                                    })
                                                ]
                                            }),
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                className: "text-sm text-blue-800",
                                                children: "Uploading photos..."
                                            })
                                        ]
                                    })
                                }),
                                loading ? /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                    className: "flex items-center justify-center py-12",
                                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                        className: "text-gray-600",
                                        children: "Loading photos..."
                                    })
                                }) : error ? /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                    className: "p-4 bg-red-50 border border-red-200 rounded-md",
                                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                        className: "text-sm text-red-800",
                                        children: error
                                    })
                                }) : photos.length === 0 ? /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "text-center py-12 text-gray-500",
                                    children: [
                                        "No approved photos available.",
                                        pageType && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                            className: "text-sm mt-2",
                                            children: [
                                                "Try uploading photos for this ",
                                                pageType,
                                                " first."
                                            ]
                                        })
                                    ]
                                }) : /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                    className: "grid grid-cols-4 gap-4",
                                    children: photos.map((photo)=>{
                                        const isSelected = selectedPhotoIds.includes(photo.id);
                                        return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                            className: `relative group aspect-square rounded-lg overflow-hidden cursor-pointer border-2 transition-all ${isSelected ? 'border-blue-500 ring-2 ring-blue-500 ring-offset-2' : 'border-transparent hover:border-gray-300'}`,
                                            onClick: ()=>handleTogglePhoto(photo.id),
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("img", {
                                                    src: photo.photo_url,
                                                    alt: photo.alt_text || photo.caption || 'Photo',
                                                    className: "w-full h-full object-cover"
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                                    className: `absolute top-2 right-2 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${isSelected ? 'bg-blue-500 border-blue-500' : 'bg-white border-gray-300 opacity-0 group-hover:opacity-100'}`,
                                                    children: isSelected && /*#__PURE__*/ (0, _jsxruntime.jsx)("svg", {
                                                        className: "w-4 h-4 text-white",
                                                        fill: "none",
                                                        stroke: "currentColor",
                                                        viewBox: "0 0 24 24",
                                                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)("path", {
                                                            strokeLinecap: "round",
                                                            strokeLinejoin: "round",
                                                            strokeWidth: 3,
                                                            d: "M5 13l4 4L19 7"
                                                        })
                                                    })
                                                }),
                                                photo.caption && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                                    className: "absolute bottom-0 left-0 right-0 bg-black bg-opacity-60 text-white text-xs p-2 truncate",
                                                    children: photo.caption
                                                })
                                            ]
                                        }, photo.id);
                                    })
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "text-sm text-gray-600",
                                    children: [
                                        selectedPhotoIds.length,
                                        " photo",
                                        selectedPhotoIds.length !== 1 ? 's' : '',
                                        " selected"
                                    ]
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "flex items-center gap-3",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                            onClick: ()=>setShowPicker(false),
                                            className: "px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",
                                            children: "Cancel"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                            onClick: ()=>setShowPicker(false),
                                            className: "px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",
                                            children: "Done"
                                        })
                                    ]
                                })
                            ]
                        })
                    ]
                })
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9hZG1pbi9QaG90b1BpY2tlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcblxuaW50ZXJmYWNlIFBob3RvIHtcbiAgaWQ6IHN0cmluZztcbiAgcGhvdG9fdXJsOiBzdHJpbmc7XG4gIGNhcHRpb24/OiBzdHJpbmc7XG4gIGFsdF90ZXh0Pzogc3RyaW5nO1xuICBtb2RlcmF0aW9uX3N0YXR1czogJ3BlbmRpbmcnIHwgJ2FwcHJvdmVkJyB8ICdyZWplY3RlZCc7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFBob3RvUGlja2VyUHJvcHMge1xuICBzZWxlY3RlZFBob3RvSWRzOiBzdHJpbmdbXTtcbiAgb25TZWxlY3Rpb25DaGFuZ2U6IChwaG90b0lkczogc3RyaW5nW10pID0+IHZvaWQ7XG4gIHBhZ2VUeXBlPzogJ2V2ZW50JyB8ICdhY3Rpdml0eScgfCAnYWNjb21tb2RhdGlvbicgfCAnbWVtb3J5JztcbiAgcGFnZUlkPzogc3RyaW5nO1xuICBkaXNhYmxlZD86IGJvb2xlYW47XG59XG5cbi8qKlxuICogUGhvdG9QaWNrZXIgY29tcG9uZW50IGZvciBzZWxlY3RpbmcgcGhvdG9zIGZyb20gdGhlIGdhbGxlcnlcbiAqIFxuICogRmVhdHVyZXM6XG4gKiAtIEJyb3dzZSBhcHByb3ZlZCBwaG90b3NcbiAqIC0gTXVsdGktc2VsZWN0IHdpdGggY2hlY2tib3hlc1xuICogLSBGaWx0ZXIgYnkgcGFnZSB0eXBlIGFuZCBwYWdlIElEXG4gKiAtIFByZXZpZXcgc2VsZWN0ZWQgcGhvdG9zXG4gKiAtIERyYWcgdG8gcmVvcmRlciBzZWxlY3RlZCBwaG90b3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFBob3RvUGlja2VyKHtcbiAgc2VsZWN0ZWRQaG90b0lkcyxcbiAgb25TZWxlY3Rpb25DaGFuZ2UsXG4gIHBhZ2VUeXBlLFxuICBwYWdlSWQsXG4gIGRpc2FibGVkID0gZmFsc2UsXG59OiBQaG90b1BpY2tlclByb3BzKSB7XG4gIGNvbnN0IFtwaG90b3MsIHNldFBob3Rvc10gPSB1c2VTdGF0ZTxQaG90b1tdPihbXSk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc2hvd1BpY2tlciwgc2V0U2hvd1BpY2tlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFt1cGxvYWRpbmcsIHNldFVwbG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFt1cGxvYWRFcnJvciwgc2V0VXBsb2FkRXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG5cbiAgLy8gRmV0Y2ggYXBwcm92ZWQgcGhvdG9zXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNob3dQaWNrZXIpIHtcbiAgICAgIGZldGNoUGhvdG9zKCk7XG4gICAgfVxuICB9LCBbc2hvd1BpY2tlciwgcGFnZVR5cGUsIHBhZ2VJZF0pO1xuXG4gIC8vIEZldGNoIHNlbGVjdGVkIHBob3RvcyBvbiBtb3VudCB0byBkaXNwbGF5IHRoZW1cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc2VsZWN0ZWRQaG90b0lkcy5sZW5ndGggPiAwKSB7XG4gICAgICBmZXRjaFNlbGVjdGVkUGhvdG9zKCk7XG4gICAgfVxuICB9LCBbc2VsZWN0ZWRQaG90b0lkc10pO1xuXG4gIGNvbnN0IGZldGNoU2VsZWN0ZWRQaG90b3MgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBob3RvUHJvbWlzZXMgPSBzZWxlY3RlZFBob3RvSWRzLm1hcChhc3luYyAoaWQpID0+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9hZG1pbi9waG90b3MvJHtpZH1gKTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5zdWNjZXNzID8gcmVzdWx0LmRhdGEgOiBudWxsO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGZldGNoZWRQaG90b3MgPSBhd2FpdCBQcm9taXNlLmFsbChwaG90b1Byb21pc2VzKTtcbiAgICAgIGNvbnN0IHZhbGlkUGhvdG9zID0gZmV0Y2hlZFBob3Rvcy5maWx0ZXIoKHApOiBwIGlzIFBob3RvID0+IHAgIT09IG51bGwpO1xuICAgICAgXG4gICAgICAvLyBNZXJnZSB3aXRoIGV4aXN0aW5nIHBob3RvcywgYXZvaWRpbmcgZHVwbGljYXRlc1xuICAgICAgc2V0UGhvdG9zKHByZXZQaG90b3MgPT4ge1xuICAgICAgICBjb25zdCBleGlzdGluZ0lkcyA9IG5ldyBTZXQocHJldlBob3Rvcy5tYXAocCA9PiBwLmlkKSk7XG4gICAgICAgIGNvbnN0IG5ld1Bob3RvcyA9IHZhbGlkUGhvdG9zLmZpbHRlcihwID0+ICFleGlzdGluZ0lkcy5oYXMocC5pZCkpO1xuICAgICAgICByZXR1cm4gWy4uLnByZXZQaG90b3MsIC4uLm5ld1Bob3Rvc107XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBzZWxlY3RlZCBwaG90b3M6JywgZXJyKTtcbiAgICB9XG4gIH0sIFtzZWxlY3RlZFBob3RvSWRzXSk7XG5cbiAgY29uc3QgZmV0Y2hQaG90b3MgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICBzZXRFcnJvcihudWxsKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgbW9kZXJhdGlvbl9zdGF0dXM6ICdhcHByb3ZlZCcsXG4gICAgICAgIGxpbWl0OiAnMTAwJyxcbiAgICAgICAgb2Zmc2V0OiAnMCcsXG4gICAgICB9KTtcblxuICAgICAgaWYgKHBhZ2VUeXBlKSB7XG4gICAgICAgIHBhcmFtcy5hcHBlbmQoJ3BhZ2VfdHlwZScsIHBhZ2VUeXBlKTtcbiAgICAgIH1cbiAgICAgIGlmIChwYWdlSWQpIHtcbiAgICAgICAgcGFyYW1zLmFwcGVuZCgncGFnZV9pZCcsIHBhZ2VJZCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvYWRtaW4vcGhvdG9zPyR7cGFyYW1zLnRvU3RyaW5nKCl9YCk7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBzZXRQaG90b3MocmVzdWx0LmRhdGEucGhvdG9zIHx8IFtdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldEVycm9yKHJlc3VsdC5lcnJvcj8ubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGxvYWQgcGhvdG9zJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBzZXRFcnJvcignRmFpbGVkIHRvIGxvYWQgcGhvdG9zJyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfSwgW3BhZ2VUeXBlLCBwYWdlSWRdKTtcblxuICBjb25zdCBoYW5kbGVUb2dnbGVQaG90byA9IHVzZUNhbGxiYWNrKFxuICAgIChwaG90b0lkOiBzdHJpbmcpID0+IHtcbiAgICAgIGlmIChzZWxlY3RlZFBob3RvSWRzLmluY2x1ZGVzKHBob3RvSWQpKSB7XG4gICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlKHNlbGVjdGVkUGhvdG9JZHMuZmlsdGVyKGlkID0+IGlkICE9PSBwaG90b0lkKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvblNlbGVjdGlvbkNoYW5nZShbLi4uc2VsZWN0ZWRQaG90b0lkcywgcGhvdG9JZF0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgW3NlbGVjdGVkUGhvdG9JZHMsIG9uU2VsZWN0aW9uQ2hhbmdlXVxuICApO1xuXG4gIGNvbnN0IGhhbmRsZVJlbW92ZVBob3RvID0gdXNlQ2FsbGJhY2soXG4gICAgKHBob3RvSWQ6IHN0cmluZykgPT4ge1xuICAgICAgb25TZWxlY3Rpb25DaGFuZ2Uoc2VsZWN0ZWRQaG90b0lkcy5maWx0ZXIoaWQgPT4gaWQgIT09IHBob3RvSWQpKTtcbiAgICB9LFxuICAgIFtzZWxlY3RlZFBob3RvSWRzLCBvblNlbGVjdGlvbkNoYW5nZV1cbiAgKTtcblxuICBjb25zdCBoYW5kbGVGaWxlVXBsb2FkID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKGV2ZW50OiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgICAgY29uc3QgZmlsZXMgPSBldmVudC50YXJnZXQuZmlsZXM7XG4gICAgICBpZiAoIWZpbGVzIHx8IGZpbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgICBzZXRVcGxvYWRpbmcodHJ1ZSk7XG4gICAgICBzZXRVcGxvYWRFcnJvcihudWxsKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBsb2FkZWRQaG90b0lkczogc3RyaW5nW10gPSBbXTtcblxuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgQXJyYXkuZnJvbShmaWxlcykpIHtcbiAgICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0ge1xuICAgICAgICAgICAgcGFnZV90eXBlOiBwYWdlVHlwZSB8fCAnbWVtb3J5JyxcbiAgICAgICAgICAgIHBhZ2VfaWQ6IHBhZ2VJZCB8fCAnZ2VuZXJhbCcsXG4gICAgICAgICAgICBjYXB0aW9uOiBmaWxlLm5hbWUucmVwbGFjZSgvXFwuW14vLl0rJC8sICcnKSwgLy8gUmVtb3ZlIGV4dGVuc2lvblxuICAgICAgICAgICAgYWx0X3RleHQ6IGZpbGUubmFtZS5yZXBsYWNlKC9cXC5bXi8uXSskLywgJycpLFxuICAgICAgICAgIH07XG4gICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdtZXRhZGF0YScsIEpTT04uc3RyaW5naWZ5KG1ldGFkYXRhKSk7XG5cbiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2FkbWluL3Bob3RvcycsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgYm9keTogZm9ybURhdGEsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHVwbG9hZGVkUGhvdG9JZHMucHVzaChyZXN1bHQuZGF0YS5pZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXN1bHQuZXJyb3I/Lm1lc3NhZ2UgfHwgJ1VwbG9hZCBmYWlsZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgdXBsb2FkZWQgcGhvdG9zIHRvIHNlbGVjdGlvblxuICAgICAgICBvblNlbGVjdGlvbkNoYW5nZShbLi4uc2VsZWN0ZWRQaG90b0lkcywgLi4udXBsb2FkZWRQaG90b0lkc10pO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVmcmVzaCBwaG90byBsaXN0XG4gICAgICAgIGZldGNoUGhvdG9zKCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgc2V0VXBsb2FkRXJyb3IoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdVcGxvYWQgZmFpbGVkJyk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzZXRVcGxvYWRpbmcoZmFsc2UpO1xuICAgICAgICAvLyBSZXNldCBmaWxlIGlucHV0XG4gICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9ICcnO1xuICAgICAgfVxuICAgIH0sXG4gICAgW3BhZ2VUeXBlLCBwYWdlSWQsIHNlbGVjdGVkUGhvdG9JZHMsIG9uU2VsZWN0aW9uQ2hhbmdlLCBmZXRjaFBob3Rvc11cbiAgKTtcblxuICBjb25zdCBoYW5kbGVDbGVhckFsbCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBvblNlbGVjdGlvbkNoYW5nZShbXSk7XG4gIH0sIFtvblNlbGVjdGlvbkNoYW5nZV0pO1xuXG4gIC8vIEdldCBzZWxlY3RlZCBwaG90b3MgaW4gb3JkZXJcbiAgY29uc3Qgc2VsZWN0ZWRQaG90b3MgPSBzZWxlY3RlZFBob3RvSWRzXG4gICAgLm1hcChpZCA9PiBwaG90b3MuZmluZChwID0+IHAuaWQgPT09IGlkKSlcbiAgICAuZmlsdGVyKChwKTogcCBpcyBQaG90byA9PiBwICE9PSB1bmRlZmluZWQpO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgIHsvKiBTZWxlY3RlZCBwaG90b3MgcHJldmlldyAqL31cbiAgICAgIHtzZWxlY3RlZFBob3RvSWRzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZC1sZyBwLTQgYmctZ3JheS01MFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTNcIj5cbiAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDBcIj5cbiAgICAgICAgICAgICAgU2VsZWN0ZWQgUGhvdG9zICh7c2VsZWN0ZWRQaG90b0lkcy5sZW5ndGh9KVxuICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQ2xlYXJBbGx9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXJlZC02MDAgaG92ZXI6dGV4dC1yZWQtODAwIGRpc2FibGVkOm9wYWNpdHktNTAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkXCJcbiAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIkNsZWFyIGFsbCBzZWxlY3RlZCBwaG90b3NcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBDbGVhciBBbGxcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtNCBnYXAtM1wiPlxuICAgICAgICAgICAge3NlbGVjdGVkUGhvdG9zLm1hcChwaG90byA9PiAoXG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBrZXk9e3Bob3RvLmlkfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJlbGF0aXZlIGdyb3VwIGFzcGVjdC1zcXVhcmUgcm91bmRlZC1sZyBvdmVyZmxvdy1oaWRkZW4gYmctZ3JheS0yMDBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgc3JjPXtwaG90by5waG90b191cmx9XG4gICAgICAgICAgICAgICAgICBhbHQ9e3Bob3RvLmFsdF90ZXh0IHx8IHBob3RvLmNhcHRpb24gfHwgJ1NlbGVjdGVkIHBob3RvJ31cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgb2JqZWN0LWNvdmVyXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZVJlbW92ZVBob3RvKHBob3RvLmlkKX1cbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0xIHJpZ2h0LTEgcC0xIGJnLXJlZC02MDAgdGV4dC13aGl0ZSByb3VuZGVkLWZ1bGwgb3BhY2l0eS0wIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwIHRyYW5zaXRpb24tb3BhY2l0eSBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiXG4gICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiUmVtb3ZlIHBob3RvXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctNCBoLTRcIlxuICAgICAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiXG4gICAgICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezJ9XG4gICAgICAgICAgICAgICAgICAgICAgZD1cIk02IDE4TDE4IDZNNiA2bDEyIDEyXCJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIHtwaG90by5jYXB0aW9uICYmIChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgYm90dG9tLTAgbGVmdC0wIHJpZ2h0LTAgYmctYmxhY2sgYmctb3BhY2l0eS02MCB0ZXh0LXdoaXRlIHRleHQteHMgcC0xIHRydW5jYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgIHtwaG90by5jYXB0aW9ufVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7LyogQWRkIHBob3RvcyBidXR0b24gKi99XG4gICAgICA8YnV0dG9uXG4gICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dQaWNrZXIodHJ1ZSl9XG4gICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTQgcHktMyB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtYmx1ZS02MDAgYmctYmx1ZS01MCBib3JkZXItMiBib3JkZXItZGFzaGVkIGJvcmRlci1ibHVlLTMwMCByb3VuZGVkLW1kIGhvdmVyOmJnLWJsdWUtMTAwIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1vZmZzZXQtMiBmb2N1czpyaW5nLWJsdWUtNTAwIGRpc2FibGVkOm9wYWNpdHktNTAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkXCJcbiAgICAgICAgYXJpYS1sYWJlbD1cIkFkZCBwaG90b3MgZnJvbSBnYWxsZXJ5XCJcbiAgICAgID5cbiAgICAgICAgKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeVxuICAgICAgPC9idXR0b24+XG5cbiAgICAgIHsvKiBQaG90byBwaWNrZXIgbW9kYWwgKi99XG4gICAgICB7c2hvd1BpY2tlciAmJiAoXG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIHotNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctYmxhY2sgYmctb3BhY2l0eS01MFwiXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd1BpY2tlcihmYWxzZSl9XG4gICAgICAgID5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLWxnIHNoYWRvdy14bCBtYXgtdy01eGwgdy1mdWxsIG1heC1oLVs5MHZoXSBvdmVyZmxvdy1oaWRkZW4gZmxleCBmbGV4LWNvbFwiXG4gICAgICAgICAgICBvbkNsaWNrPXtlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgey8qIEhlYWRlciAqL31cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtNiBib3JkZXItYiBib3JkZXItZ3JheS0yMDBcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNFwiPlxuICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMFwiPlxuICAgICAgICAgICAgICAgICAgU2VsZWN0IFBob3Rvc1xuICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgey8qIFVwbG9hZCBidXR0b24gKi99XG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cInJlbGF0aXZlIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cImZpbGVcIlxuICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZVxuICAgICAgICAgICAgICAgICAgICBhY2NlcHQ9XCJpbWFnZS8qXCJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUZpbGVVcGxvYWR9XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXt1cGxvYWRpbmcgfHwgZGlzYWJsZWR9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNyLW9ubHlcIlxuICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiVXBsb2FkIHBob3Rvc1wiXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHB4LTMgcHktMS41IHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ibHVlLTYwMCBiZy1ibHVlLTUwIGJvcmRlciBib3JkZXItYmx1ZS0zMDAgcm91bmRlZC1tZCBob3ZlcjpiZy1ibHVlLTEwMCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctb2Zmc2V0LTIgZm9jdXM6cmluZy1ibHVlLTUwMCBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiPlxuICAgICAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy00IGgtNFwiXG4gICAgICAgICAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIlxuICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiXG4gICAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlTGluZWNhcD1cInJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezJ9XG4gICAgICAgICAgICAgICAgICAgICAgICBkPVwiTTcgMTZhNCA0IDAgMDEtLjg4LTcuOTAzQTUgNSAwIDExMTUuOSA2TDE2IDZhNSA1IDAgMDExIDkuOU0xNSAxM2wtMy0zbTAgMGwtMyAzbTMtM3YxMlwiXG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICAgIHt1cGxvYWRpbmcgPyAnVXBsb2FkaW5nLi4uJyA6ICdVcGxvYWQgUGhvdG9zJ31cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93UGlja2VyKGZhbHNlKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNjAwIGhvdmVyOnRleHQtZ3JheS05MDBcIlxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJDbG9zZSBwaG90byBwaWNrZXJcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy02IGgtNlwiXG4gICAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiXG4gICAgICAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIlxuICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlTGluZWNhcD1cInJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPXsyfVxuICAgICAgICAgICAgICAgICAgICBkPVwiTTYgMThMMTggNk02IDZsMTIgMTJcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgey8qIENvbnRlbnQgKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBvdmVyZmxvdy1hdXRvIHAtNlwiPlxuICAgICAgICAgICAgICB7LyogVXBsb2FkIGVycm9yIG1lc3NhZ2UgKi99XG4gICAgICAgICAgICAgIHt1cGxvYWRFcnJvciAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi00IHAtNCBiZy1yZWQtNTAgYm9yZGVyIGJvcmRlci1yZWQtMjAwIHJvdW5kZWQtbWRcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1yZWQtODAwXCI+e3VwbG9hZEVycm9yfTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHsvKiBVcGxvYWRpbmcgaW5kaWNhdG9yICovfVxuICAgICAgICAgICAgICB7dXBsb2FkaW5nICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTQgcC00IGJnLWJsdWUtNTAgYm9yZGVyIGJvcmRlci1ibHVlLTIwMCByb3VuZGVkLW1kXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gaC01IHctNSB0ZXh0LWJsdWUtNjAwXCJcbiAgICAgICAgICAgICAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiXG4gICAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8Y2lyY2xlXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJvcGFjaXR5LTI1XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN4PVwiMTJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY3k9XCIxMlwiXG4gICAgICAgICAgICAgICAgICAgICAgICByPVwiMTBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPVwiNFwiXG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwib3BhY2l0eS03NVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsPVwiY3VycmVudENvbG9yXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQ9XCJNNCAxMmE4IDggMCAwMTgtOFYwQzUuMzczIDAgMCA1LjM3MyAwIDEyaDR6bTIgNS4yOTFBNy45NjIgNy45NjIgMCAwMTQgMTJIMGMwIDMuMDQyIDEuMTM1IDUuODI0IDMgNy45MzhsMy0yLjY0N3pcIlxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtYmx1ZS04MDBcIj5VcGxvYWRpbmcgcGhvdG9zLi4uPC9wPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB7bG9hZGluZyA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHB5LTEyXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtZ3JheS02MDBcIj5Mb2FkaW5nIHBob3Rvcy4uLjwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApIDogZXJyb3IgPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTQgYmctcmVkLTUwIGJvcmRlciBib3JkZXItcmVkLTIwMCByb3VuZGVkLW1kXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtcmVkLTgwMFwiPntlcnJvcn08L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkgOiBwaG90b3MubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgcHktMTIgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgTm8gYXBwcm92ZWQgcGhvdG9zIGF2YWlsYWJsZS5cbiAgICAgICAgICAgICAgICAgIHtwYWdlVHlwZSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBtdC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgVHJ5IHVwbG9hZGluZyBwaG90b3MgZm9yIHRoaXMge3BhZ2VUeXBlfSBmaXJzdC5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtNCBnYXAtNFwiPlxuICAgICAgICAgICAgICAgICAge3Bob3Rvcy5tYXAocGhvdG8gPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1NlbGVjdGVkID0gc2VsZWN0ZWRQaG90b0lkcy5pbmNsdWRlcyhwaG90by5pZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtwaG90by5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHJlbGF0aXZlIGdyb3VwIGFzcGVjdC1zcXVhcmUgcm91bmRlZC1sZyBvdmVyZmxvdy1oaWRkZW4gY3Vyc29yLXBvaW50ZXIgYm9yZGVyLTIgdHJhbnNpdGlvbi1hbGwgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTZWxlY3RlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JvcmRlci1ibHVlLTUwMCByaW5nLTIgcmluZy1ibHVlLTUwMCByaW5nLW9mZnNldC0yJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ2JvcmRlci10cmFuc3BhcmVudCBob3Zlcjpib3JkZXItZ3JheS0zMDAnXG4gICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZVRvZ2dsZVBob3RvKHBob3RvLmlkKX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17cGhvdG8ucGhvdG9fdXJsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9e3Bob3RvLmFsdF90ZXh0IHx8IHBob3RvLmNhcHRpb24gfHwgJ1Bob3RvJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBvYmplY3QtY292ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBDaGVja2JveCBvdmVybGF5ICovfVxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BhYnNvbHV0ZSB0b3AtMiByaWdodC0yIHctNiBoLTYgcm91bmRlZC1mdWxsIGJvcmRlci0yIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRyYW5zaXRpb24tYWxsICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTZWxlY3RlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnYmctYmx1ZS01MDAgYm9yZGVyLWJsdWUtNTAwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnYmctd2hpdGUgYm9yZGVyLWdyYXktMzAwIG9wYWNpdHktMCBncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtpc1NlbGVjdGVkICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTQgaC00IHRleHQtd2hpdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD17M31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZD1cIk01IDEzbDQgNEwxOSA3XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBDYXB0aW9uICovfVxuICAgICAgICAgICAgICAgICAgICAgICAge3Bob3RvLmNhcHRpb24gJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGJvdHRvbS0wIGxlZnQtMCByaWdodC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNjAgdGV4dC13aGl0ZSB0ZXh0LXhzIHAtMiB0cnVuY2F0ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwaG90by5jYXB0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICB7LyogRm9vdGVyICovfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC02IGJvcmRlci10IGJvcmRlci1ncmF5LTIwMCBiZy1ncmF5LTUwXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNjAwXCI+XG4gICAgICAgICAgICAgICAge3NlbGVjdGVkUGhvdG9JZHMubGVuZ3RofSBwaG90b3tzZWxlY3RlZFBob3RvSWRzLmxlbmd0aCAhPT0gMSA/ICdzJyA6ICcnfSBzZWxlY3RlZFxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtM1wiPlxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dQaWNrZXIoZmFsc2UpfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBiZy13aGl0ZSBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgaG92ZXI6YmctZ3JheS01MCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctb2Zmc2V0LTIgZm9jdXM6cmluZy1ncmF5LTUwMFwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgQ2FuY2VsXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd1BpY2tlcihmYWxzZSl9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC00IHB5LTIgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LXdoaXRlIGJnLWJsdWUtNjAwIGJvcmRlciBib3JkZXItdHJhbnNwYXJlbnQgcm91bmRlZC1tZCBob3ZlcjpiZy1ibHVlLTcwMCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctb2Zmc2V0LTIgZm9jdXM6cmluZy1ibHVlLTUwMFwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgRG9uZVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsiUGhvdG9QaWNrZXIiLCJzZWxlY3RlZFBob3RvSWRzIiwib25TZWxlY3Rpb25DaGFuZ2UiLCJwYWdlVHlwZSIsInBhZ2VJZCIsImRpc2FibGVkIiwicGhvdG9zIiwic2V0UGhvdG9zIiwidXNlU3RhdGUiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsImVycm9yIiwic2V0RXJyb3IiLCJzaG93UGlja2VyIiwic2V0U2hvd1BpY2tlciIsInVwbG9hZGluZyIsInNldFVwbG9hZGluZyIsInVwbG9hZEVycm9yIiwic2V0VXBsb2FkRXJyb3IiLCJ1c2VFZmZlY3QiLCJmZXRjaFBob3RvcyIsImxlbmd0aCIsImZldGNoU2VsZWN0ZWRQaG90b3MiLCJ1c2VDYWxsYmFjayIsInBob3RvUHJvbWlzZXMiLCJtYXAiLCJpZCIsInJlc3BvbnNlIiwiZmV0Y2giLCJvayIsInJlc3VsdCIsImpzb24iLCJzdWNjZXNzIiwiZGF0YSIsImZldGNoZWRQaG90b3MiLCJQcm9taXNlIiwiYWxsIiwidmFsaWRQaG90b3MiLCJmaWx0ZXIiLCJwIiwicHJldlBob3RvcyIsImV4aXN0aW5nSWRzIiwiU2V0IiwibmV3UGhvdG9zIiwiaGFzIiwiZXJyIiwiY29uc29sZSIsInBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsIm1vZGVyYXRpb25fc3RhdHVzIiwibGltaXQiLCJvZmZzZXQiLCJhcHBlbmQiLCJ0b1N0cmluZyIsIm1lc3NhZ2UiLCJoYW5kbGVUb2dnbGVQaG90byIsInBob3RvSWQiLCJpbmNsdWRlcyIsImhhbmRsZVJlbW92ZVBob3RvIiwiaGFuZGxlRmlsZVVwbG9hZCIsImV2ZW50IiwiZmlsZXMiLCJ0YXJnZXQiLCJ1cGxvYWRlZFBob3RvSWRzIiwiZmlsZSIsIkFycmF5IiwiZnJvbSIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJtZXRhZGF0YSIsInBhZ2VfdHlwZSIsInBhZ2VfaWQiLCJjYXB0aW9uIiwibmFtZSIsInJlcGxhY2UiLCJhbHRfdGV4dCIsIkpTT04iLCJzdHJpbmdpZnkiLCJtZXRob2QiLCJib2R5IiwicHVzaCIsIkVycm9yIiwidmFsdWUiLCJoYW5kbGVDbGVhckFsbCIsInNlbGVjdGVkUGhvdG9zIiwiZmluZCIsInVuZGVmaW5lZCIsImRpdiIsImNsYXNzTmFtZSIsImg0IiwiYnV0dG9uIiwib25DbGljayIsImFyaWEtbGFiZWwiLCJwaG90byIsImltZyIsInNyYyIsInBob3RvX3VybCIsImFsdCIsInN2ZyIsImZpbGwiLCJzdHJva2UiLCJ2aWV3Qm94IiwicGF0aCIsInN0cm9rZUxpbmVjYXAiLCJzdHJva2VMaW5lam9pbiIsInN0cm9rZVdpZHRoIiwiZCIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJoMyIsImxhYmVsIiwiaW5wdXQiLCJ0eXBlIiwibXVsdGlwbGUiLCJhY2NlcHQiLCJvbkNoYW5nZSIsInNwYW4iLCJ4bWxucyIsImNpcmNsZSIsImN4IiwiY3kiLCJyIiwiaXNTZWxlY3RlZCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OytCQStCZ0JBOzs7ZUFBQUE7Ozs7dUJBN0JpQztBQTZCMUMsU0FBU0EsWUFBWSxFQUMxQkMsZ0JBQWdCLEVBQ2hCQyxpQkFBaUIsRUFDakJDLFFBQVEsRUFDUkMsTUFBTSxFQUNOQyxXQUFXLEtBQUssRUFDQztJQUNqQixNQUFNLENBQUNDLFFBQVFDLFVBQVUsR0FBR0MsSUFBQUEsZUFBUSxFQUFVLEVBQUU7SUFDaEQsTUFBTSxDQUFDQyxTQUFTQyxXQUFXLEdBQUdGLElBQUFBLGVBQVEsRUFBQztJQUN2QyxNQUFNLENBQUNHLE9BQU9DLFNBQVMsR0FBR0osSUFBQUEsZUFBUSxFQUFnQjtJQUNs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