{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/PhotoPicker.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, useEffect } from 'react';\n\ninterface Photo {\n  id: string;\n  photo_url: string;\n  caption?: string;\n  alt_text?: string;\n  moderation_status: 'pending' | 'approved' | 'rejected';\n  created_at: string;\n}\n\ninterface PhotoPickerProps {\n  selectedPhotoIds: string[];\n  onSelectionChange: (photoIds: string[]) => void;\n  pageType?: 'event' | 'activity' | 'accommodation' | 'memory';\n  pageId?: string;\n  disabled?: boolean;\n}\n\n/**\n * PhotoPicker component for selecting photos from the gallery\n * \n * Features:\n * - Browse approved photos\n * - Multi-select with checkboxes\n * - Filter by page type and page ID\n * - Preview selected photos\n * - Drag to reorder selected photos\n */\nexport function PhotoPicker({\n  selectedPhotoIds,\n  onSelectionChange,\n  pageType,\n  pageId,\n  disabled = false,\n}: PhotoPickerProps) {\n  const [photos, setPhotos] = useState<Photo[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [showPicker, setShowPicker] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [uploadError, setUploadError] = useState<string | null>(null);\n\n  // Fetch approved photos\n  useEffect(() => {\n    if (showPicker) {\n      fetchPhotos();\n    }\n  }, [showPicker, pageType, pageId]);\n\n  // Fetch selected photos on mount to display them\n  useEffect(() => {\n    if (selectedPhotoIds.length > 0) {\n      fetchSelectedPhotos();\n    }\n  }, [selectedPhotoIds]);\n\n  const fetchSelectedPhotos = useCallback(async () => {\n    try {\n      const photoPromises = selectedPhotoIds.map(async (id) => {\n        const response = await fetch(`/api/admin/photos/${id}`);\n        if (!response.ok) return null;\n        const result = await response.json();\n        return result.success ? result.data : null;\n      });\n\n      const fetchedPhotos = await Promise.all(photoPromises);\n      const validPhotos = fetchedPhotos.filter((p): p is Photo => p !== null);\n      \n      // Merge with existing photos, avoiding duplicates\n      setPhotos(prevPhotos => {\n        const existingIds = new Set(prevPhotos.map(p => p.id));\n        const newPhotos = validPhotos.filter(p => !existingIds.has(p.id));\n        return [...prevPhotos, ...newPhotos];\n      });\n    } catch (err) {\n      console.error('Failed to fetch selected photos:', err);\n    }\n  }, [selectedPhotoIds]);\n\n  const fetchPhotos = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const params = new URLSearchParams({\n        moderation_status: 'approved',\n        limit: '100',\n        offset: '0',\n      });\n\n      if (pageType) {\n        params.append('page_type', pageType);\n      }\n      if (pageId) {\n        params.append('page_id', pageId);\n      }\n\n      const response = await fetch(`/api/admin/photos?${params.toString()}`);\n      const result = await response.json();\n\n      if (result.success) {\n        setPhotos(result.data.photos || []);\n      } else {\n        setError(result.error?.message || 'Failed to load photos');\n      }\n    } catch (err) {\n      setError('Failed to load photos');\n    } finally {\n      setLoading(false);\n    }\n  }, [pageType, pageId]);\n\n  const handleTogglePhoto = useCallback(\n    (photoId: string) => {\n      if (selectedPhotoIds.includes(photoId)) {\n        onSelectionChange(selectedPhotoIds.filter(id => id !== photoId));\n      } else {\n        onSelectionChange([...selectedPhotoIds, photoId]);\n      }\n    },\n    [selectedPhotoIds, onSelectionChange]\n  );\n\n  const handleRemovePhoto = useCallback(\n    (photoId: string) => {\n      onSelectionChange(selectedPhotoIds.filter(id => id !== photoId));\n    },\n    [selectedPhotoIds, onSelectionChange]\n  );\n\n  const handleFileUpload = useCallback(\n    async (event: React.ChangeEvent<HTMLInputElement>) => {\n      const files = event.target.files;\n      if (!files || files.length === 0) return;\n\n      setUploading(true);\n      setUploadError(null);\n\n      try {\n        const uploadedPhotoIds: string[] = [];\n\n        for (const file of Array.from(files)) {\n          const formData = new FormData();\n          formData.append('file', file);\n          \n          const metadata = {\n            page_type: pageType || 'memory',\n            page_id: pageId || 'general',\n            caption: file.name.replace(/\\.[^/.]+$/, ''), // Remove extension\n            alt_text: file.name.replace(/\\.[^/.]+$/, ''),\n          };\n          formData.append('metadata', JSON.stringify(metadata));\n\n          const response = await fetch('/api/admin/photos', {\n            method: 'POST',\n            body: formData,\n          });\n\n          const result = await response.json();\n\n          if (result.success) {\n            uploadedPhotoIds.push(result.data.id);\n          } else {\n            throw new Error(result.error?.message || 'Upload failed');\n          }\n        }\n\n        // Add uploaded photos to selection\n        onSelectionChange([...selectedPhotoIds, ...uploadedPhotoIds]);\n        \n        // Refresh photo list\n        fetchPhotos();\n      } catch (err) {\n        setUploadError(err instanceof Error ? err.message : 'Upload failed');\n      } finally {\n        setUploading(false);\n        // Reset file input\n        event.target.value = '';\n      }\n    },\n    [pageType, pageId, selectedPhotoIds, onSelectionChange, fetchPhotos]\n  );\n\n  const handleClearAll = useCallback(() => {\n    onSelectionChange([]);\n  }, [onSelectionChange]);\n\n  // Get selected photos in order\n  const selectedPhotos = selectedPhotoIds\n    .map(id => photos.find(p => p.id === id))\n    .filter((p): p is Photo => p !== undefined);\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Selected photos preview */}\n      {selectedPhotoIds.length > 0 && (\n        <div className=\"border border-gray-200 rounded-lg p-4 bg-gray-50\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <h4 className=\"text-sm font-medium text-gray-900\">\n              Selected Photos ({selectedPhotoIds.length})\n            </h4>\n            <button\n              onClick={handleClearAll}\n              disabled={disabled}\n              className=\"text-xs text-red-600 hover:text-red-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n              aria-label=\"Clear all selected photos\"\n            >\n              Clear All\n            </button>\n          </div>\n          <div className=\"grid grid-cols-4 gap-3\">\n            {selectedPhotos.map(photo => (\n              <div\n                key={photo.id}\n                className=\"relative group aspect-square rounded-lg overflow-hidden bg-gray-200\"\n              >\n                <img\n                  src={photo.photo_url}\n                  alt={photo.alt_text || photo.caption || 'Selected photo'}\n                  className=\"w-full h-full object-cover\"\n                />\n                <button\n                  onClick={() => handleRemovePhoto(photo.id)}\n                  disabled={disabled}\n                  className=\"absolute top-1 right-1 p-1 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed\"\n                  aria-label=\"Remove photo\"\n                >\n                  <svg\n                    className=\"w-4 h-4\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M6 18L18 6M6 6l12 12\"\n                    />\n                  </svg>\n                </button>\n                {photo.caption && (\n                  <div className=\"absolute bottom-0 left-0 right-0 bg-black bg-opacity-60 text-white text-xs p-1 truncate\">\n                    {photo.caption}\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Add photos button */}\n      <button\n        onClick={() => setShowPicker(true)}\n        disabled={disabled}\n        className=\"w-full px-4 py-3 text-sm font-medium text-blue-600 bg-blue-50 border-2 border-dashed border-blue-300 rounded-md hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n        aria-label=\"Add photos from gallery\"\n      >\n        + Add Photos from Gallery\n      </button>\n\n      {/* Photo picker modal */}\n      {showPicker && (\n        <div\n          className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\"\n          onClick={() => setShowPicker(false)}\n        >\n          <div\n            className=\"bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col\"\n            onClick={e => e.stopPropagation()}\n          >\n            {/* Header */}\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n              <div className=\"flex items-center gap-4\">\n                <h3 className=\"text-lg font-semibold text-gray-900\">\n                  Select Photos\n                </h3>\n                \n                {/* Upload button */}\n                <label className=\"relative cursor-pointer\">\n                  <input\n                    type=\"file\"\n                    multiple\n                    accept=\"image/*\"\n                    onChange={handleFileUpload}\n                    disabled={uploading || disabled}\n                    className=\"sr-only\"\n                    aria-label=\"Upload photos\"\n                  />\n                  <span className=\"inline-flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-300 rounded-md hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\">\n                    <svg\n                      className=\"w-4 h-4\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth={2}\n                        d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\"\n                      />\n                    </svg>\n                    {uploading ? 'Uploading...' : 'Upload Photos'}\n                  </span>\n                </label>\n              </div>\n              \n              <button\n                onClick={() => setShowPicker(false)}\n                className=\"text-gray-600 hover:text-gray-900\"\n                aria-label=\"Close photo picker\"\n              >\n                <svg\n                  className=\"w-6 h-6\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M6 18L18 6M6 6l12 12\"\n                  />\n                </svg>\n              </button>\n            </div>\n\n            {/* Content */}\n            <div className=\"flex-1 overflow-auto p-6\">\n              {/* Upload error message */}\n              {uploadError && (\n                <div className=\"mb-4 p-4 bg-red-50 border border-red-200 rounded-md\">\n                  <p className=\"text-sm text-red-800\">{uploadError}</p>\n                </div>\n              )}\n              \n              {/* Uploading indicator */}\n              {uploading && (\n                <div className=\"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-md\">\n                  <div className=\"flex items-center gap-3\">\n                    <svg\n                      className=\"animate-spin h-5 w-5 text-blue-600\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <circle\n                        className=\"opacity-25\"\n                        cx=\"12\"\n                        cy=\"12\"\n                        r=\"10\"\n                        stroke=\"currentColor\"\n                        strokeWidth=\"4\"\n                      />\n                      <path\n                        className=\"opacity-75\"\n                        fill=\"currentColor\"\n                        d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                      />\n                    </svg>\n                    <p className=\"text-sm text-blue-800\">Uploading photos...</p>\n                  </div>\n                </div>\n              )}\n              \n              {loading ? (\n                <div className=\"flex items-center justify-center py-12\">\n                  <div className=\"text-gray-600\">Loading photos...</div>\n                </div>\n              ) : error ? (\n                <div className=\"p-4 bg-red-50 border border-red-200 rounded-md\">\n                  <p className=\"text-sm text-red-800\">{error}</p>\n                </div>\n              ) : photos.length === 0 ? (\n                <div className=\"text-center py-12 text-gray-500\">\n                  No approved photos available.\n                  {pageType && (\n                    <div className=\"text-sm mt-2\">\n                      Try uploading photos for this {pageType} first.\n                    </div>\n                  )}\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-4 gap-4\">\n                  {photos.map(photo => {\n                    const isSelected = selectedPhotoIds.includes(photo.id);\n                    return (\n                      <div\n                        key={photo.id}\n                        className={`relative group aspect-square rounded-lg overflow-hidden cursor-pointer border-2 transition-all ${\n                          isSelected\n                            ? 'border-blue-500 ring-2 ring-blue-500 ring-offset-2'\n                            : 'border-transparent hover:border-gray-300'\n                        }`}\n                        onClick={() => handleTogglePhoto(photo.id)}\n                      >\n                        <img\n                          src={photo.photo_url}\n                          alt={photo.alt_text || photo.caption || 'Photo'}\n                          className=\"w-full h-full object-cover\"\n                        />\n                        {/* Checkbox overlay */}\n                        <div\n                          className={`absolute top-2 right-2 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${\n                            isSelected\n                              ? 'bg-blue-500 border-blue-500'\n                              : 'bg-white border-gray-300 opacity-0 group-hover:opacity-100'\n                          }`}\n                        >\n                          {isSelected && (\n                            <svg\n                              className=\"w-4 h-4 text-white\"\n                              fill=\"none\"\n                              stroke=\"currentColor\"\n                              viewBox=\"0 0 24 24\"\n                            >\n                              <path\n                                strokeLinecap=\"round\"\n                                strokeLinejoin=\"round\"\n                                strokeWidth={3}\n                                d=\"M5 13l4 4L19 7\"\n                              />\n                            </svg>\n                          )}\n                        </div>\n                        {/* Caption */}\n                        {photo.caption && (\n                          <div className=\"absolute bottom-0 left-0 right-0 bg-black bg-opacity-60 text-white text-xs p-2 truncate\">\n                            {photo.caption}\n                          </div>\n                        )}\n                      </div>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n\n            {/* Footer */}\n            <div className=\"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50\">\n              <div className=\"text-sm text-gray-600\">\n                {selectedPhotoIds.length} photo{selectedPhotoIds.length !== 1 ? 's' : ''} selected\n              </div>\n              <div className=\"flex items-center gap-3\">\n                <button\n                  onClick={() => setShowPicker(false)}\n                  className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={() => setShowPicker(false)}\n                  className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                >\n                  Done\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["PhotoPicker","selectedPhotoIds","onSelectionChange","pageType","pageId","disabled","photos","setPhotos","useState","loading","setLoading","error","setError","showPicker","setShowPicker","uploading","setUploading","uploadError","setUploadError","useEffect","fetchPhotos","length","fetchSelectedPhotos","useCallback","photoPromises","map","id","response","fetch","ok","result","json","success","data","fetchedPhotos","Promise","all","validPhotos","filter","p","prevPhotos","existingIds","Set","newPhotos","has","err","console","params","URLSearchParams","moderation_status","limit","offset","append","toString","message","handleTogglePhoto","photoId","includes","handleRemovePhoto","handleFileUpload","event","files","target","uploadedPhotoIds","file","Array","from","formData","FormData","metadata","page_type","page_id","caption","name","replace","alt_text","JSON","stringify","method","body","push","Error","value","handleClearAll","selectedPhotos","find","undefined","div","className","h4","button","onClick","aria-label","photo","img","src","photo_url","alt","svg","fill","stroke","viewBox","path","strokeLinecap","strokeLinejoin","strokeWidth","d","e","stopPropagation","h3","label","input","type","multiple","accept","onChange","span","xmlns","circle","cx","cy","r","isSelected"],"mappings":"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"}