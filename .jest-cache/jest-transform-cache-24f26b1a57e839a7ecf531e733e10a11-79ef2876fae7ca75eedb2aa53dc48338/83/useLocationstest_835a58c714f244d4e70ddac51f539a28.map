{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/hooks/useLocations.test.ts"],"sourcesContent":["import { renderHook, waitFor } from '@testing-library/react';\nimport { useLocations } from './useLocations';\n\n// Mock fetch globally\nglobal.fetch = jest.fn();\n\ndescribe('useLocations', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    (global.fetch as jest.Mock).mockClear();\n  });\n\n  afterEach(() => {\n    jest.restoreAllMocks();\n  });\n\n  describe('loading states', () => {\n    it('should start with loading true', () => {\n      (global.fetch as jest.Mock).mockImplementation(() =>\n        new Promise(() => {}) // Never resolves\n      );\n\n      const { result } = renderHook(() => useLocations());\n\n      expect(result.current.loading).toBe(true);\n      expect(result.current.data).toEqual([]);\n      expect(result.current.error).toBeNull();\n    });\n\n    it('should set loading false after successful fetch', async () => {\n      const mockData = [\n        {\n          id: 'loc-1',\n          name: 'Costa Rica',\n          address: '',\n          description: 'Country',\n          createdAt: '2025-01-01T00:00:00Z',\n          updatedAt: '2025-01-01T00:00:00Z',\n          children: [],\n        },\n      ];\n\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: true, data: mockData }),\n      });\n\n      const { result } = renderHook(() => useLocations());\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false);\n      });\n\n      expect(result.current.data).toEqual(mockData);\n      expect(result.current.error).toBeNull();\n    });\n\n    it('should set loading false after failed fetch', async () => {\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        ok: false,\n        json: async () => ({\n          success: false,\n          error: { message: 'Failed to fetch' },\n        }),\n      });\n\n      const { result } = renderHook(() => useLocations());\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false);\n      });\n\n      expect(result.current.data).toEqual([]);\n      expect(result.current.error).toBeInstanceOf(Error);\n    });\n  });\n\n  describe('error handling', () => {\n    it('should handle network errors', async () => {\n      (global.fetch as jest.Mock).mockRejectedValueOnce(\n        new Error('Network error')\n      );\n\n      const { result } = renderHook(() => useLocations());\n\n      await waitFor(() => {\n        expect(result.current.error).toBeInstanceOf(Error);\n      });\n\n      expect(result.current.error?.message).toBe('Network error');\n      expect(result.current.loading).toBe(false);\n      expect(result.current.data).toEqual([]);\n    });\n\n    it('should handle API error responses', async () => {\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        ok: false,\n        json: async () => ({\n          success: false,\n          error: { message: 'Unauthorized' },\n        }),\n      });\n\n      const { result } = renderHook(() => useLocations());\n\n      await waitFor(() => {\n        expect(result.current.error).toBeInstanceOf(Error);\n      });\n\n      expect(result.current.error?.message).toBe('Unauthorized');\n    });\n  });\n\n  describe('data refetching', () => {\n    it('should refetch data when refetch is called', async () => {\n      const initialData = [\n        {\n          id: 'loc-1',\n          name: 'Costa Rica',\n          createdAt: '2025-01-01T00:00:00Z',\n          updatedAt: '2025-01-01T00:00:00Z',\n          children: [],\n        },\n      ];\n\n      const updatedData = [\n        ...initialData,\n        {\n          id: 'loc-2',\n          name: 'Guanacaste',\n          parentLocationId: 'loc-1',\n          createdAt: '2025-01-02T00:00:00Z',\n          updatedAt: '2025-01-02T00:00:00Z',\n          children: [],\n        },\n      ];\n\n      (global.fetch as jest.Mock)\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: initialData }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: updatedData }),\n        });\n\n      const { result } = renderHook(() => useLocations());\n\n      await waitFor(() => {\n        expect(result.current.data).toEqual(initialData);\n      });\n\n      await waitFor(async () => {\n        await result.current.refetch();\n      });\n\n      await waitFor(() => {\n        expect(result.current.data).toEqual(updatedData);\n      });\n    });\n\n    it('should reset error state on refetch', async () => {\n      (global.fetch as jest.Mock)\n        .mockRejectedValueOnce(new Error('Initial error'))\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: [] }),\n        });\n\n      const { result } = renderHook(() => useLocations());\n\n      await waitFor(() => {\n        expect(result.current.error).toBeInstanceOf(Error);\n      });\n\n      await waitFor(async () => {\n        await result.current.refetch();\n      });\n\n      await waitFor(() => {\n        expect(result.current.error).toBeNull();\n      });\n    });\n\n    it('should refetch after successful create', async () => {\n      const initialData = [\n        {\n          id: 'loc-1',\n          name: 'Costa Rica',\n          createdAt: '2025-01-01T00:00:00Z',\n          updatedAt: '2025-01-01T00:00:00Z',\n          children: [],\n        },\n      ];\n\n      const updatedData = [\n        {\n          ...initialData[0],\n          children: [\n            {\n              id: 'loc-2',\n              name: 'Guanacaste',\n              parentLocationId: 'loc-1',\n              createdAt: '2025-01-02T00:00:00Z',\n              updatedAt: '2025-01-02T00:00:00Z',\n              children: [],\n            },\n          ],\n        },\n      ];\n\n      (global.fetch as jest.Mock)\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: initialData }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({\n            success: true,\n            data: { id: 'loc-2', name: 'Guanacaste' },\n          }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: updatedData }),\n        });\n\n      const { result } = renderHook(() => useLocations());\n\n      await waitFor(() => {\n        expect(result.current.data).toEqual(initialData);\n      });\n\n      let createResult;\n      await waitFor(async () => {\n        createResult = await result.current.create({\n          name: 'Guanacaste',\n          parentLocationId: 'loc-1',\n        });\n      });\n\n      expect(createResult.success).toBe(true);\n\n      await waitFor(() => {\n        expect(result.current.data).toEqual(updatedData);\n      });\n    });\n\n    it('should refetch after successful update', async () => {\n      const initialData = [\n        {\n          id: 'loc-1',\n          name: 'Costa Rica',\n          createdAt: '2025-01-01T00:00:00Z',\n          updatedAt: '2025-01-01T00:00:00Z',\n          children: [],\n        },\n      ];\n\n      const updatedData = [\n        {\n          ...initialData[0],\n          name: 'República de Costa Rica',\n          updatedAt: '2025-01-02T00:00:00Z',\n        },\n      ];\n\n      (global.fetch as jest.Mock)\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: initialData }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({\n            success: true,\n            data: updatedData[0],\n          }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: updatedData }),\n        });\n\n      const { result } = renderHook(() => useLocations());\n\n      await waitFor(() => {\n        expect(result.current.data[0].name).toBe('Costa Rica');\n      });\n\n      let updateResult;\n      await waitFor(async () => {\n        updateResult = await result.current.update('loc-1', {\n          name: 'República de Costa Rica',\n        });\n      });\n\n      expect(updateResult.success).toBe(true);\n\n      await waitFor(() => {\n        expect(result.current.data[0].name).toBe('República de Costa Rica');\n      });\n    });\n\n    it('should refetch after successful delete', async () => {\n      const initialData = [\n        {\n          id: 'loc-1',\n          name: 'Costa Rica',\n          createdAt: '2025-01-01T00:00:00Z',\n          updatedAt: '2025-01-01T00:00:00Z',\n          children: [\n            {\n              id: 'loc-2',\n              name: 'Guanacaste',\n              parentLocationId: 'loc-1',\n              createdAt: '2025-01-02T00:00:00Z',\n              updatedAt: '2025-01-02T00:00:00Z',\n              children: [],\n            },\n          ],\n        },\n      ];\n\n      const updatedData = [\n        {\n          ...initialData[0],\n          children: [],\n        },\n      ];\n\n      (global.fetch as jest.Mock)\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: initialData }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: updatedData }),\n        });\n\n      const { result } = renderHook(() => useLocations());\n\n      await waitFor(() => {\n        expect(result.current.data[0].children).toHaveLength(1);\n      });\n\n      let deleteResult;\n      await waitFor(async () => {\n        deleteResult = await result.current.remove('loc-2');\n      });\n\n      expect(deleteResult.success).toBe(true);\n\n      await waitFor(() => {\n        expect(result.current.data[0].children).toHaveLength(0);\n      });\n    });\n  });\n\n  describe('parent validation', () => {\n    it('should validate parent successfully', async () => {\n      const mockData = [\n        {\n          id: 'loc-1',\n          name: 'Costa Rica',\n          createdAt: '2025-01-01T00:00:00Z',\n          updatedAt: '2025-01-01T00:00:00Z',\n          children: [],\n        },\n      ];\n\n      (global.fetch as jest.Mock)\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: mockData }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true }),\n        });\n\n      const { result } = renderHook(() => useLocations());\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false);\n      });\n\n      let validationResult;\n      await waitFor(async () => {\n        validationResult = await result.current.validateParent(\n          'loc-2',\n          'loc-1'\n        );\n      });\n\n      expect(validationResult.success).toBe(true);\n      expect(global.fetch).toHaveBeenCalledWith(\n        '/api/admin/locations/loc-2/validate-parent',\n        expect.objectContaining({\n          method: 'POST',\n          body: JSON.stringify({ parentId: 'loc-1' }),\n        })\n      );\n    });\n\n    it('should handle circular reference validation error', async () => {\n      const mockData = [\n        {\n          id: 'loc-1',\n          name: 'Costa Rica',\n          createdAt: '2025-01-01T00:00:00Z',\n          updatedAt: '2025-01-01T00:00:00Z',\n          children: [],\n        },\n      ];\n\n      (global.fetch as jest.Mock)\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: mockData }),\n        })\n        .mockResolvedValueOnce({\n          ok: false,\n          json: async () => ({\n            success: false,\n            error: { message: 'Circular reference detected' },\n          }),\n        });\n\n      const { result } = renderHook(() => useLocations());\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false);\n      });\n\n      let validationResult;\n      await waitFor(async () => {\n        validationResult = await result.current.validateParent(\n          'loc-1',\n          'loc-2'\n        );\n      });\n\n      expect(validationResult.success).toBe(false);\n      expect(validationResult.error).toBe('Circular reference detected');\n    });\n\n    it('should handle validation network errors', async () => {\n      const mockData = [\n        {\n          id: 'loc-1',\n          name: 'Costa Rica',\n          createdAt: '2025-01-01T00:00:00Z',\n          updatedAt: '2025-01-01T00:00:00Z',\n          children: [],\n        },\n      ];\n\n      (global.fetch as jest.Mock)\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: mockData }),\n        })\n        .mockRejectedValueOnce(new Error('Network error'));\n\n      const { result } = renderHook(() => useLocations());\n\n      await waitFor(() => {\n        expect(result.current.loading).toBe(false);\n      });\n\n      let validationResult;\n      await waitFor(async () => {\n        validationResult = await result.current.validateParent(\n          'loc-2',\n          'loc-1'\n        );\n      });\n\n      expect(validationResult.success).toBe(false);\n      expect(validationResult.error).toBe('Network error');\n    });\n  });\n});\n"],"names":["global","fetch","jest","fn","describe","beforeEach","clearAllMocks","mockClear","afterEach","restoreAllMocks","it","mockImplementation","Promise","result","renderHook","useLocations","expect","current","loading","toBe","data","toEqual","error","toBeNull","mockData","id","name","address","description","createdAt","updatedAt","children","mockResolvedValueOnce","ok","json","success","waitFor","message","toBeInstanceOf","Error","mockRejectedValueOnce","initialData","updatedData","parentLocationId","refetch","createResult","create","updateResult","update","toHaveLength","deleteResult","remove","validationResult","validateParent","toHaveBeenCalledWith","objectContaining","method","body","JSON","stringify","parentId"],"mappings":"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"}