{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/__tests__/property/referencePreviewDataCompleteness.property.test.ts"],"sourcesContent":["import * as fc from 'fast-check';\nimport { describe, it, expect } from '@jest/globals';\n\n/**\n * Property 29: Reference Preview Data Completeness\n * \n * For any event or activity reference preview modal, the system SHALL display\n * all required fields to provide guests with complete information without\n * navigating away from the current page.\n * \n * Validates: Requirements 25.2, 25.3, 25.6, 25.7\n */\ndescribe('Feature: guest-portal-and-admin-enhancements, Property 29: Reference Preview Data Completeness', () => {\n  /**\n   * Test: Event preview data contains all required fields\n   * \n   * Requirements 25.2, 25.3:\n   * - Event name\n   * - Date\n   * - Time\n   * - Location\n   * - Description\n   * - List of activities\n   * - RSVP status\n   */\n  it('should include all required fields in event preview data structure', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.record({\n          id: fc.uuid(),\n          title: fc.string({ minLength: 1, maxLength: 100 }),\n          date: fc.date({ min: new Date('2024-01-01'), max: new Date('2025-12-31') }).map(d => d.toISOString()),\n          time: fc.option(fc.string({ minLength: 5, maxLength: 10 })),\n          location: fc.option(fc.string({ minLength: 1, maxLength: 200 })),\n          description: fc.option(fc.string({ minLength: 1, maxLength: 1000 })),\n          activities: fc.array(\n            fc.record({\n              id: fc.uuid(),\n              title: fc.string({ minLength: 1, maxLength: 100 }),\n            }),\n            { minLength: 0, maxLength: 10 }\n          ),\n          slug: fc.option(fc.string({ minLength: 1, maxLength: 100 })),\n        }),\n        fc.option(\n          fc.record({\n            status: fc.constantFrom('attending', 'declined', 'maybe', 'pending') as fc.Arbitrary<'attending' | 'declined' | 'maybe' | 'pending'>,\n            guestCount: fc.option(fc.integer({ min: 1, max: 10 })),\n          })\n        ),\n        async (event, rsvpStatus) => {\n          // Property: Event data must contain required fields\n          expect(event.id).toBeDefined();\n          expect(event.title).toBeDefined();\n          expect(event.title.length).toBeGreaterThan(0);\n          expect(event.date).toBeDefined();\n          expect(new Date(event.date)).toBeInstanceOf(Date);\n\n          // Property: Optional fields must be either defined or null/undefined\n          if (event.time !== null && event.time !== undefined) {\n            expect(typeof event.time).toBe('string');\n          }\n          if (event.location !== null && event.location !== undefined) {\n            expect(typeof event.location).toBe('string');\n          }\n          if (event.description !== null && event.description !== undefined) {\n            expect(typeof event.description).toBe('string');\n          }\n\n          // Property: Activities list must be an array\n          expect(Array.isArray(event.activities)).toBe(true);\n          \n          // Property: Each activity must have id and title\n          for (const activity of event.activities) {\n            expect(activity.id).toBeDefined();\n            expect(activity.title).toBeDefined();\n            expect(activity.title.length).toBeGreaterThan(0);\n          }\n\n          // Property: RSVP status must have valid status value if present\n          if (rsvpStatus) {\n            expect(['attending', 'declined', 'maybe', 'pending']).toContain(rsvpStatus.status);\n            \n            // Property: Guest count must be positive if present\n            if (rsvpStatus.guestCount !== null && rsvpStatus.guestCount !== undefined) {\n              expect(rsvpStatus.guestCount).toBeGreaterThan(0);\n            }\n          }\n\n          return true;\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  /**\n   * Test: Activity preview data contains all required fields\n   * \n   * Requirements 25.6, 25.7:\n   * - Activity name\n   * - Date\n   * - Time\n   * - Location\n   * - Capacity\n   * - Remaining capacity\n   * - Cost\n   * - Description\n   * - RSVP status\n   */\n  it('should include all required fields in activity preview data structure', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.record({\n          id: fc.uuid(),\n          title: fc.string({ minLength: 1, maxLength: 100 }),\n          date: fc.date({ min: new Date('2024-01-01'), max: new Date('2025-12-31') }).map(d => d.toISOString()),\n          time: fc.option(fc.string({ minLength: 5, maxLength: 10 })),\n          location: fc.option(fc.string({ minLength: 1, maxLength: 200 })),\n          description: fc.option(fc.string({ minLength: 1, maxLength: 1000 })),\n          capacity: fc.option(fc.integer({ min: 1, max: 200 })),\n          capacityRemaining: fc.option(fc.integer({ min: 0, max: 200 })),\n          cost: fc.option(fc.float({ min: 0, max: 1000, noNaN: true })),\n          hostSubsidy: fc.option(fc.float({ min: 0, max: 500, noNaN: true })),\n          slug: fc.option(fc.string({ minLength: 1, maxLength: 100 })),\n        }),\n        fc.option(\n          fc.record({\n            status: fc.constantFrom('attending', 'declined', 'maybe', 'pending') as fc.Arbitrary<'attending' | 'declined' | 'maybe' | 'pending'>,\n            guestCount: fc.option(fc.integer({ min: 1, max: 10 })),\n            dietaryRestrictions: fc.option(fc.string({ minLength: 1, maxLength: 500 })),\n          })\n        ),\n        async (activity, rsvpStatus) => {\n          // Ensure capacityRemaining is not greater than capacity\n          if (activity.capacity && activity.capacityRemaining) {\n            activity.capacityRemaining = Math.min(activity.capacityRemaining, activity.capacity);\n          }\n\n          // Ensure hostSubsidy is not greater than cost\n          if (activity.cost !== null && activity.cost !== undefined && \n              activity.hostSubsidy !== null && activity.hostSubsidy !== undefined) {\n            activity.hostSubsidy = Math.min(activity.hostSubsidy, activity.cost);\n          }\n\n          // Property: Activity data must contain required fields\n          expect(activity.id).toBeDefined();\n          expect(activity.title).toBeDefined();\n          expect(activity.title.length).toBeGreaterThan(0);\n          expect(activity.date).toBeDefined();\n          expect(new Date(activity.date)).toBeInstanceOf(Date);\n\n          // Property: Optional fields must be either defined or null/undefined\n          if (activity.time !== null && activity.time !== undefined) {\n            expect(typeof activity.time).toBe('string');\n          }\n          if (activity.location !== null && activity.location !== undefined) {\n            expect(typeof activity.location).toBe('string');\n          }\n          if (activity.description !== null && activity.description !== undefined) {\n            expect(typeof activity.description).toBe('string');\n          }\n\n          // Property: Capacity must be positive if present\n          if (activity.capacity !== null && activity.capacity !== undefined) {\n            expect(activity.capacity).toBeGreaterThan(0);\n          }\n\n          // Property: Remaining capacity must be non-negative and not exceed total capacity\n          if (activity.capacityRemaining !== null && activity.capacityRemaining !== undefined) {\n            expect(activity.capacityRemaining).toBeGreaterThanOrEqual(0);\n            if (activity.capacity) {\n              expect(activity.capacityRemaining).toBeLessThanOrEqual(activity.capacity);\n            }\n          }\n\n          // Property: Cost must be non-negative if present\n          if (activity.cost !== null && activity.cost !== undefined) {\n            expect(activity.cost).toBeGreaterThanOrEqual(0);\n          }\n\n          // Property: Host subsidy must be non-negative and not exceed cost\n          if (activity.hostSubsidy !== null && activity.hostSubsidy !== undefined) {\n            expect(activity.hostSubsidy).toBeGreaterThanOrEqual(0);\n            if (activity.cost !== null && activity.cost !== undefined && activity.cost > 0) {\n              expect(activity.hostSubsidy).toBeLessThanOrEqual(activity.cost);\n            }\n          }\n\n          // Property: RSVP status must have valid status value if present\n          if (rsvpStatus) {\n            expect(['attending', 'declined', 'maybe', 'pending']).toContain(rsvpStatus.status);\n            \n            // Property: Guest count must be positive if present\n            if (rsvpStatus.guestCount !== null && rsvpStatus.guestCount !== undefined) {\n              expect(rsvpStatus.guestCount).toBeGreaterThan(0);\n            }\n\n            // Property: Dietary restrictions must be string if present\n            if (rsvpStatus.dietaryRestrictions !== null && rsvpStatus.dietaryRestrictions !== undefined) {\n              expect(typeof rsvpStatus.dietaryRestrictions).toBe('string');\n            }\n          }\n\n          return true;\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  /**\n   * Test: Capacity status calculation is correct\n   */\n  it('should correctly calculate capacity status based on remaining capacity', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.integer({ min: 10, max: 100 }), // Total capacity\n        fc.float({ min: 0, max: 1, noNaN: true }), // Percentage full (0 = empty, 1 = full)\n        async (capacity, percentFull) => {\n          const remaining = Math.floor(capacity * (1 - percentFull));\n\n          // Property: Remaining capacity must be within valid range\n          expect(remaining).toBeGreaterThanOrEqual(0);\n          expect(remaining).toBeLessThanOrEqual(capacity);\n\n          // Property: Status determination must be consistent\n          let expectedStatus: 'Full' | 'Almost Full' | 'Available';\n          if (remaining === 0) {\n            expectedStatus = 'Full';\n          } else if (percentFull >= 0.9) {\n            expectedStatus = 'Almost Full';\n          } else {\n            expectedStatus = 'Available';\n          }\n\n          // Verify status logic\n          if (remaining === 0) {\n            expect(expectedStatus).toBe('Full');\n          } else if (percentFull >= 0.9) {\n            expect(expectedStatus).toBe('Almost Full');\n          } else {\n            expect(expectedStatus).toBe('Available');\n          }\n\n          return true;\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  /**\n   * Test: Guest cost calculation is correct\n   */\n  it('should correctly calculate guest cost after host subsidy', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.float({ min: 0, max: 1000, noNaN: true }), // Total cost\n        fc.float({ min: 0, max: 1, noNaN: true }), // Subsidy percentage (0-100%)\n        async (totalCost, subsidyPercent) => {\n          const hostSubsidy = totalCost * subsidyPercent;\n          const guestCost = totalCost - hostSubsidy;\n\n          // Property: Guest cost must be non-negative\n          expect(guestCost).toBeGreaterThanOrEqual(0);\n\n          // Property: Guest cost must not exceed total cost\n          expect(guestCost).toBeLessThanOrEqual(totalCost);\n\n          // Property: Guest cost + host subsidy must equal total cost (within floating point precision)\n          expect(Math.abs((guestCost + hostSubsidy) - totalCost)).toBeLessThan(0.01);\n\n          return true;\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  /**\n   * Test: Date formatting is consistent\n   */\n  it('should format dates consistently for display', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.date({ min: new Date('2024-01-01'), max: new Date('2025-12-31') }),\n        async (date) => {\n          const isoString = date.toISOString();\n          const parsedDate = new Date(isoString);\n\n          // Property: ISO string must be parseable back to a valid date\n          expect(parsedDate).toBeInstanceOf(Date);\n          expect(parsedDate.getTime()).toBe(date.getTime());\n\n          // Property: Formatted date string must contain expected components\n          const formatted = parsedDate.toLocaleDateString('en-US', {\n            weekday: 'long',\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric',\n          });\n\n          expect(formatted).toMatch(/\\w+,\\s+\\w+\\s+\\d+,\\s+\\d{4}/);\n\n          return true;\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n});\n"],"names":["describe","it","fc","assert","asyncProperty","record","id","uuid","title","string","minLength","maxLength","date","min","Date","max","map","d","toISOString","time","option","location","description","activities","array","slug","status","constantFrom","guestCount","integer","event","rsvpStatus","expect","toBeDefined","length","toBeGreaterThan","toBeInstanceOf","undefined","toBe","Array","isArray","activity","toContain","numRuns","capacity","capacityRemaining","cost","float","noNaN","hostSubsidy","dietaryRestrictions","Math","toBeGreaterThanOrEqual","toBeLessThanOrEqual","percentFull","remaining","floor","expectedStatus","totalCost","subsidyPercent","guestCost","abs","toBeLessThan","isoString","parsedDate","getTime","formatted","toLocaleDateString","weekday","year","month","day","toMatch"],"mappings":"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"}