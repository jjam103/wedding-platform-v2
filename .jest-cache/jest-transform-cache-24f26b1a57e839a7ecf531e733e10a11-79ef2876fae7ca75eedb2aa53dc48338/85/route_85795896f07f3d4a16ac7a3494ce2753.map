{"version":3,"names":["GET","cov_2qk7gcay12","f","s","PUT","request","supabase","_supabaseServer","createAuthenticatedClient","data","session","error","authError","auth","getSession","b","_server","NextResponse","json","success","code","message","status","result","_settingsService","getSettings","body","updateSettings","statusCode"],"sources":["/Users/jaron/Desktop/wedding-platform-v2/app/api/admin/settings/route.ts"],"sourcesContent":["import { createAuthenticatedClient } from '@/lib/supabaseServer';\nimport { NextResponse } from 'next/server';\nimport * as settingsService from '@/services/settingsService';\n\n/**\n * GET /api/admin/settings\n * \n * Retrieves system settings\n * \n * Requirements: 20.1, 20.2, 20.3, 20.4\n */\nexport async function GET(request: Request) {\n  // 1. Auth check\n  const supabase = await createAuthenticatedClient();\n  const {\n    data: { session },\n    error: authError,\n  } = await supabase.auth.getSession();\n\n  if (authError || !session) {\n    return NextResponse.json(\n      { success: false, error: { code: 'UNAUTHORIZED', message: 'Authentication required' } },\n      { status: 401 }\n    );\n  }\n\n  // 2. Get settings\n  const result = await settingsService.getSettings();\n\n  // 3. Return response\n  return NextResponse.json(result, { status: result.success ? 200 : 500 });\n}\n\n/**\n * PUT /api/admin/settings\n * \n * Updates system settings\n * \n * Requirements: 20.5\n */\nexport async function PUT(request: Request) {\n  // 1. Auth check\n  const supabase = await createAuthenticatedClient();\n  const {\n    data: { session },\n    error: authError,\n  } = await supabase.auth.getSession();\n\n  if (authError || !session) {\n    return NextResponse.json(\n      { success: false, error: { code: 'UNAUTHORIZED', message: 'Authentication required' } },\n      { status: 401 }\n    );\n  }\n\n  // 2. Parse and validate\n  const body = await request.json();\n\n  // 3. Update settings\n  const result = await settingsService.updateSettings(body);\n\n  // 4. Return response with proper status\n  if (!result.success) {\n    const statusCode = result.error.code === 'VALIDATION_ERROR' ? 400 : 500;\n    return NextResponse.json(result, { status: statusCode });\n  }\n\n  return NextResponse.json(result, { status: 200 });\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}