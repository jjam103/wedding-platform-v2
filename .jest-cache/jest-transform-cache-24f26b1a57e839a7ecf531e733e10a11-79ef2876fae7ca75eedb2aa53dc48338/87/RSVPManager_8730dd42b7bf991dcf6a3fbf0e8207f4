62d0db68e7fea957d45aa07e0733368f
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "RSVPManager", {
    enumerable: true,
    get: function() {
        return RSVPManager;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const _DataTable = require("../ui/DataTable");
const _Button = require("../ui/Button");
const _ToastContext = require("../ui/ToastContext");
function RSVPManager({ initialFilters = {} }) {
    const { addToast } = (0, _ToastContext.useToast)();
    // State management
    const [rsvps, setRsvps] = (0, _react.useState)([]);
    const [statistics, setStatistics] = (0, _react.useState)({
        totalRSVPs: 0,
        byStatus: {
            attending: 0,
            declined: 0,
            maybe: 0,
            pending: 0
        },
        totalGuestCount: 0
    });
    const [loading, setLoading] = (0, _react.useState)(true);
    const [currentPage, setCurrentPage] = (0, _react.useState)(1);
    const [totalCount, setTotalCount] = (0, _react.useState)(0);
    const [pageSize, setPageSize] = (0, _react.useState)(50);
    const [selectedIds, setSelectedIds] = (0, _react.useState)([]);
    const [isBulkUpdateInProgress, setIsBulkUpdateInProgress] = (0, _react.useState)(false);
    // Filter state
    const [filters, setFilters] = (0, _react.useState)(initialFilters);
    const [searchQuery, setSearchQuery] = (0, _react.useState)('');
    // Reference data for filters
    const [events, setEvents] = (0, _react.useState)([]);
    const [activities, setActivities] = (0, _react.useState)([]);
    /**
   * Fetch RSVPs from API with current filters and pagination
   */ const fetchRSVPs = (0, _react.useCallback)(async ()=>{
        try {
            setLoading(true);
            // Build query parameters
            const params = new URLSearchParams({
                page: currentPage.toString(),
                limit: pageSize.toString()
            });
            if (filters.eventId) params.append('eventId', filters.eventId);
            if (filters.activityId) params.append('activityId', filters.activityId);
            if (filters.status) params.append('status', filters.status);
            if (filters.guestId) params.append('guestId', filters.guestId);
            if (searchQuery) params.append('search', searchQuery);
            const response = await fetch(`/api/admin/rsvps?${params.toString()}`);
            if (!response.ok) {
                throw new Error('Failed to fetch RSVPs');
            }
            const result = await response.json();
            if (result.success) {
                setRsvps(result.data.data || []);
                setTotalCount(result.data.pagination.total);
                setStatistics(result.data.statistics);
            } else {
                addToast({
                    type: 'error',
                    message: result.error?.message || 'Failed to load RSVPs'
                });
            }
        } catch (error) {
            addToast({
                type: 'error',
                message: error instanceof Error ? error.message : 'Failed to load RSVPs'
            });
        } finally{
            setLoading(false);
        }
    }, [
        currentPage,
        pageSize,
        filters,
        searchQuery,
        addToast
    ]);
    /**
   * Fetch events for filter dropdown
   */ const fetchEvents = (0, _react.useCallback)(async ()=>{
        try {
            const response = await fetch('/api/admin/events');
            if (!response.ok) return;
            const result = await response.json();
            if (result.success) {
                const eventsData = result.data?.events || result.data || [];
                setEvents(Array.isArray(eventsData) ? eventsData : []);
            }
        } catch (error) {
            console.error('Failed to fetch events:', error);
        }
    }, []);
    /**
   * Fetch activities for filter dropdown
   */ const fetchActivities = (0, _react.useCallback)(async ()=>{
        try {
            const response = await fetch('/api/admin/activities');
            if (!response.ok) return;
            const result = await response.json();
            if (result.success) {
                const activitiesData = result.data?.activities || result.data || [];
                setActivities(Array.isArray(activitiesData) ? activitiesData : []);
            }
        } catch (error) {
            console.error('Failed to fetch activities:', error);
        }
    }, []);
    // Load data on mount and when filters/pagination change
    (0, _react.useEffect)(()=>{
        fetchRSVPs();
    }, [
        fetchRSVPs
    ]);
    // Load reference data on mount
    (0, _react.useEffect)(()=>{
        fetchEvents();
        fetchActivities();
    }, [
        fetchEvents,
        fetchActivities
    ]);
    /**
   * Handle filter change
   */ const handleFilterChange = (0, _react.useCallback)((key, value)=>{
        setFilters((prev)=>({
                ...prev,
                [key]: value || undefined
            }));
        setCurrentPage(1); // Reset to first page when filters change
    }, []);
    /**
   * Handle search
   */ const handleSearch = (0, _react.useCallback)((query)=>{
        setSearchQuery(query);
        setCurrentPage(1); // Reset to first page when search changes
    }, []);
    /**
   * Handle page change
   */ const handlePageChange = (0, _react.useCallback)((page)=>{
        setCurrentPage(page);
    }, []);
    /**
   * Handle selection change
   */ const handleSelectionChange = (0, _react.useCallback)((ids)=>{
        setSelectedIds(ids);
    }, []);
    /**
   * Handle bulk status update
   */ const handleBulkStatusUpdate = (0, _react.useCallback)(async (status)=>{
        if (selectedIds.length === 0) {
            addToast({
                type: 'warning',
                message: 'Please select RSVPs to update'
            });
            return;
        }
        try {
            setIsBulkUpdateInProgress(true);
            const response = await fetch('/api/admin/rsvps/bulk', {
                method: 'PATCH',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    rsvpIds: selectedIds,
                    status
                })
            });
            const result = await response.json();
            if (result.success) {
                addToast({
                    type: 'success',
                    message: `Successfully updated ${result.data.updatedCount} RSVP${result.data.updatedCount !== 1 ? 's' : ''}`
                });
                // Refresh RSVP list
                await fetchRSVPs();
                // Clear selection
                setSelectedIds([]);
            } else {
                addToast({
                    type: 'error',
                    message: result.error?.message || 'Failed to update RSVPs'
                });
            }
        } catch (error) {
            addToast({
                type: 'error',
                message: error instanceof Error ? error.message : 'Failed to update RSVPs'
            });
        } finally{
            setIsBulkUpdateInProgress(false);
        }
    }, [
        selectedIds,
        addToast,
        fetchRSVPs
    ]);
    /**
   * Handle CSV export
   */ const handleExport = (0, _react.useCallback)(async ()=>{
        try {
            // Build query parameters with current filters
            const params = new URLSearchParams();
            if (filters.eventId) params.append('eventId', filters.eventId);
            if (filters.activityId) params.append('activityId', filters.activityId);
            if (filters.status) params.append('status', filters.status);
            if (filters.guestId) params.append('guestId', filters.guestId);
            if (searchQuery) params.append('search', searchQuery);
            const response = await fetch(`/api/admin/rsvps/export?${params.toString()}`);
            if (!response.ok) {
                throw new Error('Failed to export RSVPs');
            }
            // Get CSV content
            const csv = await response.text();
            // Create blob and download
            const blob = new Blob([
                csv
            ], {
                type: 'text/csv;charset=utf-8;'
            });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `rsvps-${new Date().toISOString().split('T')[0]}.csv`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            addToast({
                type: 'success',
                message: 'RSVPs exported successfully'
            });
        } catch (error) {
            addToast({
                type: 'error',
                message: error instanceof Error ? error.message : 'Failed to export RSVPs'
            });
        }
    }, [
        filters,
        searchQuery,
        addToast
    ]);
    /**
   * Handle row click - could open inline editor in future
   */ const handleRowClick = (0, _react.useCallback)((rsvp)=>{
        // TODO: Implement inline RSVP editing
        console.log('RSVP clicked:', rsvp);
    }, []);
    // Define table columns
    const columns = (0, _react.useMemo)(()=>[
            {
                key: 'guestFirstName',
                label: 'Guest Name',
                sortable: true,
                render: (_, rsvp)=>`${rsvp.guestFirstName} ${rsvp.guestLastName}`
            },
            {
                key: 'guestEmail',
                label: 'Email',
                sortable: true,
                render: (value)=>value || '-',
                mobileHidden: true
            },
            {
                key: 'eventName',
                label: 'Event',
                sortable: true,
                filterable: true,
                filterType: 'select',
                filterOptions: events.map((e)=>({
                        label: e.name,
                        value: e.id
                    })),
                render: (value)=>value || '-'
            },
            {
                key: 'activityName',
                label: 'Activity',
                sortable: true,
                filterable: true,
                filterType: 'select',
                filterOptions: activities.map((a)=>({
                        label: a.name,
                        value: a.id
                    })),
                render: (value)=>value || '-'
            },
            {
                key: 'status',
                label: 'Status',
                sortable: true,
                filterable: true,
                filterType: 'select',
                filterOptions: [
                    {
                        label: 'Pending',
                        value: 'pending'
                    },
                    {
                        label: 'Attending',
                        value: 'attending'
                    },
                    {
                        label: 'Declined',
                        value: 'declined'
                    },
                    {
                        label: 'Maybe',
                        value: 'maybe'
                    }
                ],
                render: (value)=>{
                    const statusColors = {
                        pending: 'bg-sage-100 text-sage-800',
                        attending: 'bg-jungle-100 text-jungle-800',
                        declined: 'bg-volcano-100 text-volcano-800',
                        maybe: 'bg-sunset-100 text-sunset-800'
                    };
                    const statusLabels = {
                        pending: 'Pending',
                        attending: 'Attending',
                        declined: 'Declined',
                        maybe: 'Maybe'
                    };
                    return /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                        className: `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${statusColors[value] || 'bg-sage-100 text-sage-800'}`,
                        children: statusLabels[value] || value
                    });
                }
            },
            {
                key: 'guestCount',
                label: 'Guest Count',
                sortable: true,
                render: (value)=>value?.toString() || '1',
                mobileHidden: true
            },
            {
                key: 'respondedAt',
                label: 'Responded',
                sortable: true,
                render: (value)=>{
                    if (!value) return '-';
                    const date = new Date(value);
                    return date.toLocaleDateString();
                },
                mobileHidden: true
            }
        ], [
        events,
        activities
    ]);
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: "space-y-6",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "bg-white rounded-lg shadow-sm border border-sage-200 p-4",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "text-sm font-medium text-sage-600",
                                children: "Total RSVPs"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "mt-2 text-3xl font-bold text-sage-900",
                                children: statistics.totalRSVPs
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "bg-white rounded-lg shadow-sm border border-jungle-200 p-4",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "text-sm font-medium text-jungle-600",
                                children: "Attending"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "mt-2 text-3xl font-bold text-jungle-900",
                                children: statistics.byStatus.attending
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "mt-1 text-xs text-sage-600",
                                children: [
                                    statistics.totalGuestCount,
                                    " total guests"
                                ]
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "bg-white rounded-lg shadow-sm border border-volcano-200 p-4",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "text-sm font-medium text-volcano-600",
                                children: "Declined"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "mt-2 text-3xl font-bold text-volcano-900",
                                children: statistics.byStatus.declined
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "bg-white rounded-lg shadow-sm border border-sunset-200 p-4",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "text-sm font-medium text-sunset-600",
                                children: "Maybe"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "mt-2 text-3xl font-bold text-sunset-900",
                                children: statistics.byStatus.maybe
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "bg-white rounded-lg shadow-sm border border-sage-200 p-4",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "text-sm font-medium text-sage-600",
                                children: "Pending"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "mt-2 text-3xl font-bold text-sage-900",
                                children: statistics.byStatus.pending
                            })
                        ]
                    })
                ]
            }),
            selectedIds.length > 0 && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "bg-jungle-50 border border-jungle-200 rounded-lg px-6 py-4 flex flex-col md:flex-row items-center justify-between gap-4",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "flex items-center gap-2",
                        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                            className: "text-sm font-medium text-jungle-900",
                            children: [
                                selectedIds.length,
                                " RSVP",
                                selectedIds.length !== 1 ? 's' : '',
                                " selected"
                            ]
                        })
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex flex-wrap gap-2",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                                variant: "primary",
                                size: "sm",
                                onClick: ()=>handleBulkStatusUpdate('attending'),
                                disabled: isBulkUpdateInProgress,
                                children: "Mark Attending"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                                variant: "secondary",
                                size: "sm",
                                onClick: ()=>handleBulkStatusUpdate('maybe'),
                                disabled: isBulkUpdateInProgress,
                                children: "Mark Maybe"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                                variant: "danger",
                                size: "sm",
                                onClick: ()=>handleBulkStatusUpdate('declined'),
                                disabled: isBulkUpdateInProgress,
                                children: "Mark Declined"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                                variant: "ghost",
                                size: "sm",
                                onClick: ()=>handleBulkStatusUpdate('pending'),
                                disabled: isBulkUpdateInProgress,
                                children: "Mark Pending"
                            })
                        ]
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_DataTable.DataTable, {
                data: rsvps,
                columns: columns,
                loading: loading,
                totalCount: totalCount,
                currentPage: currentPage,
                pageSize: pageSize,
                onPageChange: handlePageChange,
                onSearch: handleSearch,
                onRowClick: handleRowClick,
                selectable: true,
                onSelectionChange: handleSelectionChange,
                idField: "id",
                entityType: "RSVPs",
                onBulkExport: handleExport
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9hZG1pbi9SU1ZQTWFuYWdlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IERhdGFUYWJsZSwgdHlwZSBDb2x1bW5EZWYgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvRGF0YVRhYmxlJztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9CdXR0b24nO1xuaW1wb3J0IHsgdXNlVG9hc3QgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvVG9hc3RDb250ZXh0JztcbmltcG9ydCB0eXBlIHsgUlNWUFZpZXdNb2RlbCwgUlNWUFN0YXRpc3RpY3MsIFJTVlBGaWx0ZXJzIH0gZnJvbSAnQC9zZXJ2aWNlcy9yc3ZwTWFuYWdlbWVudFNlcnZpY2UnO1xuXG4vKipcbiAqIFJTVlBNYW5hZ2VyIENvbXBvbmVudCBQcm9wc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFJTVlBNYW5hZ2VyUHJvcHMge1xuICBpbml0aWFsRmlsdGVycz86IFJTVlBGaWx0ZXJzO1xufVxuXG4vKipcbiAqIFJTVlBNYW5hZ2VyIENvbXBvbmVudFxuICogXG4gKiBDb21wcmVoZW5zaXZlIFJTVlAgbWFuYWdlbWVudCBpbnRlcmZhY2UgZm9yIGFkbWlucy5cbiAqIFxuICogRmVhdHVyZXM6XG4gKiAtIFRhYnVsYXIgdmlldyB3aXRoIERhdGFUYWJsZVxuICogLSBNdWx0aS1sZXZlbCBmaWx0ZXJpbmcgKGV2ZW50LCBhY3Rpdml0eSwgc3RhdHVzLCBndWVzdClcbiAqIC0gU2VhcmNoIGZ1bmN0aW9uYWxpdHlcbiAqIC0gQnVsayBzZWxlY3Rpb24gYW5kIHN0YXR1cyB1cGRhdGVzXG4gKiAtIENTViBleHBvcnRcbiAqIC0gUmVhbC10aW1lIHN0YXRpc3RpY3MgZGFzaGJvYXJkXG4gKiAtIElubGluZSBSU1ZQIGVkaXRpbmdcbiAqIFxuICogKipWYWxpZGF0ZXM6IFJlcXVpcmVtZW50cyA2LjIsIDYuMywgNi40LCA2LjUqKlxuICovXG5leHBvcnQgZnVuY3Rpb24gUlNWUE1hbmFnZXIoeyBpbml0aWFsRmlsdGVycyA9IHt9IH06IFJTVlBNYW5hZ2VyUHJvcHMpIHtcbiAgY29uc3QgeyBhZGRUb2FzdCB9ID0gdXNlVG9hc3QoKTtcblxuICAvLyBTdGF0ZSBtYW5hZ2VtZW50XG4gIGNvbnN0IFtyc3Zwcywgc2V0UnN2cHNdID0gdXNlU3RhdGU8UlNWUFZpZXdNb2RlbFtdPihbXSk7XG4gIGNvbnN0IFtzdGF0aXN0aWNzLCBzZXRTdGF0aXN0aWNzXSA9IHVzZVN0YXRlPFJTVlBTdGF0aXN0aWNzPih7XG4gICAgdG90YWxSU1ZQczogMCxcbiAgICBieVN0YXR1czogeyBhdHRlbmRpbmc6IDAsIGRlY2xpbmVkOiAwLCBtYXliZTogMCwgcGVuZGluZzogMCB9LFxuICAgIHRvdGFsR3Vlc3RDb3VudDogMCxcbiAgfSk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbY3VycmVudFBhZ2UsIHNldEN1cnJlbnRQYWdlXSA9IHVzZVN0YXRlKDEpO1xuICBjb25zdCBbdG90YWxDb3VudCwgc2V0VG90YWxDb3VudF0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW3BhZ2VTaXplLCBzZXRQYWdlU2l6ZV0gPSB1c2VTdGF0ZSg1MCk7XG4gIGNvbnN0IFtzZWxlY3RlZElkcywgc2V0U2VsZWN0ZWRJZHNdID0gdXNlU3RhdGU8c3RyaW5nW10+KFtdKTtcbiAgY29uc3QgW2lzQnVsa1VwZGF0ZUluUHJvZ3Jlc3MsIHNldElzQnVsa1VwZGF0ZUluUHJvZ3Jlc3NdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIC8vIEZpbHRlciBzdGF0ZVxuICBjb25zdCBbZmlsdGVycywgc2V0RmlsdGVyc10gPSB1c2VTdGF0ZTxSU1ZQRmlsdGVycz4oaW5pdGlhbEZpbHRlcnMpO1xuICBjb25zdCBbc2VhcmNoUXVlcnksIHNldFNlYXJjaFF1ZXJ5XSA9IHVzZVN0YXRlKCcnKTtcblxuICAvLyBSZWZlcmVuY2UgZGF0YSBmb3IgZmlsdGVyc1xuICBjb25zdCBbZXZlbnRzLCBzZXRFdmVudHNdID0gdXNlU3RhdGU8QXJyYXk8eyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfT4+KFtdKTtcbiAgY29uc3QgW2FjdGl2aXRpZXMsIHNldEFjdGl2aXRpZXNdID0gdXNlU3RhdGU8QXJyYXk8eyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfT4+KFtdKTtcblxuICAvKipcbiAgICogRmV0Y2ggUlNWUHMgZnJvbSBBUEkgd2l0aCBjdXJyZW50IGZpbHRlcnMgYW5kIHBhZ2luYXRpb25cbiAgICovXG4gIGNvbnN0IGZldGNoUlNWUHMgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHNldExvYWRpbmcodHJ1ZSk7XG5cbiAgICAgIC8vIEJ1aWxkIHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICBwYWdlOiBjdXJyZW50UGFnZS50b1N0cmluZygpLFxuICAgICAgICBsaW1pdDogcGFnZVNpemUudG9TdHJpbmcoKSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZmlsdGVycy5ldmVudElkKSBwYXJhbXMuYXBwZW5kKCdldmVudElkJywgZmlsdGVycy5ldmVudElkKTtcbiAgICAgIGlmIChmaWx0ZXJzLmFjdGl2aXR5SWQpIHBhcmFtcy5hcHBlbmQoJ2FjdGl2aXR5SWQnLCBmaWx0ZXJzLmFjdGl2aXR5SWQpO1xuICAgICAgaWYgKGZpbHRlcnMuc3RhdHVzKSBwYXJhbXMuYXBwZW5kKCdzdGF0dXMnLCBmaWx0ZXJzLnN0YXR1cyk7XG4gICAgICBpZiAoZmlsdGVycy5ndWVzdElkKSBwYXJhbXMuYXBwZW5kKCdndWVzdElkJywgZmlsdGVycy5ndWVzdElkKTtcbiAgICAgIGlmIChzZWFyY2hRdWVyeSkgcGFyYW1zLmFwcGVuZCgnc2VhcmNoJywgc2VhcmNoUXVlcnkpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2FkbWluL3JzdnBzPyR7cGFyYW1zLnRvU3RyaW5nKCl9YCk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggUlNWUHMnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgc2V0UnN2cHMocmVzdWx0LmRhdGEuZGF0YSB8fCBbXSk7XG4gICAgICAgIHNldFRvdGFsQ291bnQocmVzdWx0LmRhdGEucGFnaW5hdGlvbi50b3RhbCk7XG4gICAgICAgIHNldFN0YXRpc3RpY3MocmVzdWx0LmRhdGEuc3RhdGlzdGljcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhZGRUb2FzdCh7XG4gICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICBtZXNzYWdlOiByZXN1bHQuZXJyb3I/Lm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBsb2FkIFJTVlBzJyxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFkZFRvYXN0KHtcbiAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGxvYWQgUlNWUHMnLFxuICAgICAgfSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfSwgW2N1cnJlbnRQYWdlLCBwYWdlU2l6ZSwgZmlsdGVycywgc2VhcmNoUXVlcnksIGFkZFRvYXN0XSk7XG5cbiAgLyoqXG4gICAqIEZldGNoIGV2ZW50cyBmb3IgZmlsdGVyIGRyb3Bkb3duXG4gICAqL1xuICBjb25zdCBmZXRjaEV2ZW50cyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9hZG1pbi9ldmVudHMnKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHJldHVybjtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50c0RhdGEgPSByZXN1bHQuZGF0YT8uZXZlbnRzIHx8IHJlc3VsdC5kYXRhIHx8IFtdO1xuICAgICAgICBzZXRFdmVudHMoQXJyYXkuaXNBcnJheShldmVudHNEYXRhKSA/IGV2ZW50c0RhdGEgOiBbXSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBldmVudHM6JywgZXJyb3IpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIC8qKlxuICAgKiBGZXRjaCBhY3Rpdml0aWVzIGZvciBmaWx0ZXIgZHJvcGRvd25cbiAgICovXG4gIGNvbnN0IGZldGNoQWN0aXZpdGllcyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9hZG1pbi9hY3Rpdml0aWVzJyk7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSByZXR1cm47XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBjb25zdCBhY3Rpdml0aWVzRGF0YSA9IHJlc3VsdC5kYXRhPy5hY3Rpdml0aWVzIHx8IHJlc3VsdC5kYXRhIHx8IFtdO1xuICAgICAgICBzZXRBY3Rpdml0aWVzKEFycmF5LmlzQXJyYXkoYWN0aXZpdGllc0RhdGEpID8gYWN0aXZpdGllc0RhdGEgOiBbXSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBhY3Rpdml0aWVzOicsIGVycm9yKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICAvLyBMb2FkIGRhdGEgb24gbW91bnQgYW5kIHdoZW4gZmlsdGVycy9wYWdpbmF0aW9uIGNoYW5nZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoUlNWUHMoKTtcbiAgfSwgW2ZldGNoUlNWUHNdKTtcblxuICAvLyBMb2FkIHJlZmVyZW5jZSBkYXRhIG9uIG1vdW50XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZmV0Y2hFdmVudHMoKTtcbiAgICBmZXRjaEFjdGl2aXRpZXMoKTtcbiAgfSwgW2ZldGNoRXZlbnRzLCBmZXRjaEFjdGl2aXRpZXNdKTtcblxuICAvKipcbiAgICogSGFuZGxlIGZpbHRlciBjaGFuZ2VcbiAgICovXG4gIGNvbnN0IGhhbmRsZUZpbHRlckNoYW5nZSA9IHVzZUNhbGxiYWNrKChrZXk6IGtleW9mIFJTVlBGaWx0ZXJzLCB2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgc2V0RmlsdGVycygocHJldikgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBba2V5XTogdmFsdWUgfHwgdW5kZWZpbmVkLFxuICAgIH0pKTtcbiAgICBzZXRDdXJyZW50UGFnZSgxKTsgLy8gUmVzZXQgdG8gZmlyc3QgcGFnZSB3aGVuIGZpbHRlcnMgY2hhbmdlXG4gIH0sIFtdKTtcblxuICAvKipcbiAgICogSGFuZGxlIHNlYXJjaFxuICAgKi9cbiAgY29uc3QgaGFuZGxlU2VhcmNoID0gdXNlQ2FsbGJhY2soKHF1ZXJ5OiBzdHJpbmcpID0+IHtcbiAgICBzZXRTZWFyY2hRdWVyeShxdWVyeSk7XG4gICAgc2V0Q3VycmVudFBhZ2UoMSk7IC8vIFJlc2V0IHRvIGZpcnN0IHBhZ2Ugd2hlbiBzZWFyY2ggY2hhbmdlc1xuICB9LCBbXSk7XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwYWdlIGNoYW5nZVxuICAgKi9cbiAgY29uc3QgaGFuZGxlUGFnZUNoYW5nZSA9IHVzZUNhbGxiYWNrKChwYWdlOiBudW1iZXIpID0+IHtcbiAgICBzZXRDdXJyZW50UGFnZShwYWdlKTtcbiAgfSwgW10pO1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgc2VsZWN0aW9uIGNoYW5nZVxuICAgKi9cbiAgY29uc3QgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlID0gdXNlQ2FsbGJhY2soKGlkczogc3RyaW5nW10pID0+IHtcbiAgICBzZXRTZWxlY3RlZElkcyhpZHMpO1xuICB9LCBbXSk7XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBidWxrIHN0YXR1cyB1cGRhdGVcbiAgICovXG4gIGNvbnN0IGhhbmRsZUJ1bGtTdGF0dXNVcGRhdGUgPSB1c2VDYWxsYmFjayhcbiAgICBhc3luYyAoc3RhdHVzOiAncGVuZGluZycgfCAnYXR0ZW5kaW5nJyB8ICdkZWNsaW5lZCcgfCAnbWF5YmUnKSA9PiB7XG4gICAgICBpZiAoc2VsZWN0ZWRJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGFkZFRvYXN0KHtcbiAgICAgICAgICB0eXBlOiAnd2FybmluZycsXG4gICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBzZWxlY3QgUlNWUHMgdG8gdXBkYXRlJyxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0SXNCdWxrVXBkYXRlSW5Qcm9ncmVzcyh0cnVlKTtcblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2FkbWluL3JzdnBzL2J1bGsnLCB7XG4gICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHJzdnBJZHM6IHNlbGVjdGVkSWRzLFxuICAgICAgICAgICAgc3RhdHVzLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgYWRkVG9hc3Qoe1xuICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgbWVzc2FnZTogYFN1Y2Nlc3NmdWxseSB1cGRhdGVkICR7cmVzdWx0LmRhdGEudXBkYXRlZENvdW50fSBSU1ZQJHtcbiAgICAgICAgICAgICAgcmVzdWx0LmRhdGEudXBkYXRlZENvdW50ICE9PSAxID8gJ3MnIDogJydcbiAgICAgICAgICAgIH1gLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gUmVmcmVzaCBSU1ZQIGxpc3RcbiAgICAgICAgICBhd2FpdCBmZXRjaFJTVlBzKCk7XG5cbiAgICAgICAgICAvLyBDbGVhciBzZWxlY3Rpb25cbiAgICAgICAgICBzZXRTZWxlY3RlZElkcyhbXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWRkVG9hc3Qoe1xuICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5lcnJvcj8ubWVzc2FnZSB8fCAnRmFpbGVkIHRvIHVwZGF0ZSBSU1ZQcycsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGFkZFRvYXN0KHtcbiAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byB1cGRhdGUgUlNWUHMnLFxuICAgICAgICB9KTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNldElzQnVsa1VwZGF0ZUluUHJvZ3Jlc3MoZmFsc2UpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW3NlbGVjdGVkSWRzLCBhZGRUb2FzdCwgZmV0Y2hSU1ZQc11cbiAgKTtcblxuICAvKipcbiAgICogSGFuZGxlIENTViBleHBvcnRcbiAgICovXG4gIGNvbnN0IGhhbmRsZUV4cG9ydCA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQnVpbGQgcXVlcnkgcGFyYW1ldGVycyB3aXRoIGN1cnJlbnQgZmlsdGVyc1xuICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICAgICAgaWYgKGZpbHRlcnMuZXZlbnRJZCkgcGFyYW1zLmFwcGVuZCgnZXZlbnRJZCcsIGZpbHRlcnMuZXZlbnRJZCk7XG4gICAgICBpZiAoZmlsdGVycy5hY3Rpdml0eUlkKSBwYXJhbXMuYXBwZW5kKCdhY3Rpdml0eUlkJywgZmlsdGVycy5hY3Rpdml0eUlkKTtcbiAgICAgIGlmIChmaWx0ZXJzLnN0YXR1cykgcGFyYW1zLmFwcGVuZCgnc3RhdHVzJywgZmlsdGVycy5zdGF0dXMpO1xuICAgICAgaWYgKGZpbHRlcnMuZ3Vlc3RJZCkgcGFyYW1zLmFwcGVuZCgnZ3Vlc3RJZCcsIGZpbHRlcnMuZ3Vlc3RJZCk7XG4gICAgICBpZiAoc2VhcmNoUXVlcnkpIHBhcmFtcy5hcHBlbmQoJ3NlYXJjaCcsIHNlYXJjaFF1ZXJ5KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9hZG1pbi9yc3Zwcy9leHBvcnQ/JHtwYXJhbXMudG9TdHJpbmcoKX1gKTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBleHBvcnQgUlNWUHMnKTtcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IENTViBjb250ZW50XG4gICAgICBjb25zdCBjc3YgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG5cbiAgICAgIC8vIENyZWF0ZSBibG9iIGFuZCBkb3dubG9hZFxuICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtjc3ZdLCB7IHR5cGU6ICd0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04OycgfSk7XG4gICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgIGxpbmsuaHJlZiA9IHVybDtcbiAgICAgIGxpbmsuZG93bmxvYWQgPSBgcnN2cHMtJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXX0uY3N2YDtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICBsaW5rLmNsaWNrKCk7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspO1xuICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuXG4gICAgICBhZGRUb2FzdCh7XG4gICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICAgICAgbWVzc2FnZTogJ1JTVlBzIGV4cG9ydGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYWRkVG9hc3Qoe1xuICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZXhwb3J0IFJTVlBzJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2ZpbHRlcnMsIHNlYXJjaFF1ZXJ5LCBhZGRUb2FzdF0pO1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgcm93IGNsaWNrIC0gY291bGQgb3BlbiBpbmxpbmUgZWRpdG9yIGluIGZ1dHVyZVxuICAgKi9cbiAgY29uc3QgaGFuZGxlUm93Q2xpY2sgPSB1c2VDYWxsYmFjaygocnN2cDogUlNWUFZpZXdNb2RlbCkgPT4ge1xuICAgIC8vIFRPRE86IEltcGxlbWVudCBpbmxpbmUgUlNWUCBlZGl0aW5nXG4gICAgY29uc29sZS5sb2coJ1JTVlAgY2xpY2tlZDonLCByc3ZwKTtcbiAgfSwgW10pO1xuXG4gIC8vIERlZmluZSB0YWJsZSBjb2x1bW5zXG4gIGNvbnN0IGNvbHVtbnM6IENvbHVtbkRlZjxSU1ZQVmlld01vZGVsPltdID0gdXNlTWVtbyhcbiAgICAoKSA9PiBbXG4gICAgICB7XG4gICAgICAgIGtleTogJ2d1ZXN0Rmlyc3ROYW1lJyxcbiAgICAgICAgbGFiZWw6ICdHdWVzdCBOYW1lJyxcbiAgICAgICAgc29ydGFibGU6IHRydWUsXG4gICAgICAgIHJlbmRlcjogKF8sIHJzdnApID0+IGAke3JzdnAuZ3Vlc3RGaXJzdE5hbWV9ICR7cnN2cC5ndWVzdExhc3ROYW1lfWAsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBrZXk6ICdndWVzdEVtYWlsJyxcbiAgICAgICAgbGFiZWw6ICdFbWFpbCcsXG4gICAgICAgIHNvcnRhYmxlOiB0cnVlLFxuICAgICAgICByZW5kZXI6ICh2YWx1ZSkgPT4gdmFsdWUgfHwgJy0nLFxuICAgICAgICBtb2JpbGVIaWRkZW46IHRydWUsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBrZXk6ICdldmVudE5hbWUnLFxuICAgICAgICBsYWJlbDogJ0V2ZW50JyxcbiAgICAgICAgc29ydGFibGU6IHRydWUsXG4gICAgICAgIGZpbHRlcmFibGU6IHRydWUsXG4gICAgICAgIGZpbHRlclR5cGU6ICdzZWxlY3QnLFxuICAgICAgICBmaWx0ZXJPcHRpb25zOiBldmVudHMubWFwKChlKSA9PiAoeyBsYWJlbDogZS5uYW1lLCB2YWx1ZTogZS5pZCB9KSksXG4gICAgICAgIHJlbmRlcjogKHZhbHVlKSA9PiB2YWx1ZSB8fCAnLScsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBrZXk6ICdhY3Rpdml0eU5hbWUnLFxuICAgICAgICBsYWJlbDogJ0FjdGl2aXR5JyxcbiAgICAgICAgc29ydGFibGU6IHRydWUsXG4gICAgICAgIGZpbHRlcmFibGU6IHRydWUsXG4gICAgICAgIGZpbHRlclR5cGU6ICdzZWxlY3QnLFxuICAgICAgICBmaWx0ZXJPcHRpb25zOiBhY3Rpdml0aWVzLm1hcCgoYSkgPT4gKHsgbGFiZWw6IGEubmFtZSwgdmFsdWU6IGEuaWQgfSkpLFxuICAgICAgICByZW5kZXI6ICh2YWx1ZSkgPT4gdmFsdWUgfHwgJy0nLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiAnc3RhdHVzJyxcbiAgICAgICAgbGFiZWw6ICdTdGF0dXMnLFxuICAgICAgICBzb3J0YWJsZTogdHJ1ZSxcbiAgICAgICAgZmlsdGVyYWJsZTogdHJ1ZSxcbiAgICAgICAgZmlsdGVyVHlwZTogJ3NlbGVjdCcsXG4gICAgICAgIGZpbHRlck9wdGlvbnM6IFtcbiAgICAgICAgICB7IGxhYmVsOiAnUGVuZGluZycsIHZhbHVlOiAncGVuZGluZycgfSxcbiAgICAgICAgICB7IGxhYmVsOiAnQXR0ZW5kaW5nJywgdmFsdWU6ICdhdHRlbmRpbmcnIH0sXG4gICAgICAgICAgeyBsYWJlbDogJ0RlY2xpbmVkJywgdmFsdWU6ICdkZWNsaW5lZCcgfSxcbiAgICAgICAgICB7IGxhYmVsOiAnTWF5YmUnLCB2YWx1ZTogJ21heWJlJyB9LFxuICAgICAgICBdLFxuICAgICAgICByZW5kZXI6ICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHN0YXR1c0NvbG9yczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICAgICAgIHBlbmRpbmc6ICdiZy1zYWdlLTEwMCB0ZXh0LXNhZ2UtODAwJyxcbiAgICAgICAgICAgIGF0dGVuZGluZzogJ2JnLWp1bmdsZS0xMDAgdGV4dC1qdW5nbGUtODAwJyxcbiAgICAgICAgICAgIGRlY2xpbmVkOiAnYmctdm9sY2Fuby0xMDAgdGV4dC12b2xjYW5vLTgwMCcsXG4gICAgICAgICAgICBtYXliZTogJ2JnLXN1bnNldC0xMDAgdGV4dC1zdW5zZXQtODAwJyxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGNvbnN0IHN0YXR1c0xhYmVsczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICAgICAgIHBlbmRpbmc6ICdQZW5kaW5nJyxcbiAgICAgICAgICAgIGF0dGVuZGluZzogJ0F0dGVuZGluZycsXG4gICAgICAgICAgICBkZWNsaW5lZDogJ0RlY2xpbmVkJyxcbiAgICAgICAgICAgIG1heWJlOiAnTWF5YmUnLFxuICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBweC0yLjUgcHktMC41IHJvdW5kZWQtZnVsbCB0ZXh0LXhzIGZvbnQtbWVkaXVtICR7XG4gICAgICAgICAgICAgICAgc3RhdHVzQ29sb3JzW3ZhbHVlXSB8fCAnYmctc2FnZS0xMDAgdGV4dC1zYWdlLTgwMCdcbiAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtzdGF0dXNMYWJlbHNbdmFsdWVdIHx8IHZhbHVlfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICk7XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBrZXk6ICdndWVzdENvdW50JyxcbiAgICAgICAgbGFiZWw6ICdHdWVzdCBDb3VudCcsXG4gICAgICAgIHNvcnRhYmxlOiB0cnVlLFxuICAgICAgICByZW5kZXI6ICh2YWx1ZSkgPT4gdmFsdWU/LnRvU3RyaW5nKCkgfHwgJzEnLFxuICAgICAgICBtb2JpbGVIaWRkZW46IHRydWUsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBrZXk6ICdyZXNwb25kZWRBdCcsXG4gICAgICAgIGxhYmVsOiAnUmVzcG9uZGVkJyxcbiAgICAgICAgc29ydGFibGU6IHRydWUsXG4gICAgICAgIHJlbmRlcjogKHZhbHVlKSA9PiB7XG4gICAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuICctJztcbiAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodmFsdWUpO1xuICAgICAgICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuICAgICAgICB9LFxuICAgICAgICBtb2JpbGVIaWRkZW46IHRydWUsXG4gICAgICB9LFxuICAgIF0sXG4gICAgW2V2ZW50cywgYWN0aXZpdGllc11cbiAgKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS02XCI+XG4gICAgICB7LyogU3RhdGlzdGljcyBEYXNoYm9hcmQgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgbGc6Z3JpZC1jb2xzLTUgZ2FwLTRcIj5cbiAgICAgICAgey8qIFRvdGFsIFJTVlBzICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93LXNtIGJvcmRlciBib3JkZXItc2FnZS0yMDAgcC00XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtc2FnZS02MDBcIj5Ub3RhbCBSU1ZQczwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiB0ZXh0LTN4bCBmb250LWJvbGQgdGV4dC1zYWdlLTkwMFwiPlxuICAgICAgICAgICAge3N0YXRpc3RpY3MudG90YWxSU1ZQc31cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIEF0dGVuZGluZyAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLWxnIHNoYWRvdy1zbSBib3JkZXIgYm9yZGVyLWp1bmdsZS0yMDAgcC00XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtanVuZ2xlLTYwMFwiPkF0dGVuZGluZzwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiB0ZXh0LTN4bCBmb250LWJvbGQgdGV4dC1qdW5nbGUtOTAwXCI+XG4gICAgICAgICAgICB7c3RhdGlzdGljcy5ieVN0YXR1cy5hdHRlbmRpbmd9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0xIHRleHQteHMgdGV4dC1zYWdlLTYwMFwiPlxuICAgICAgICAgICAge3N0YXRpc3RpY3MudG90YWxHdWVzdENvdW50fSB0b3RhbCBndWVzdHNcbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIERlY2xpbmVkICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93LXNtIGJvcmRlciBib3JkZXItdm9sY2Fuby0yMDAgcC00XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtdm9sY2Fuby02MDBcIj5EZWNsaW5lZDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiB0ZXh0LTN4bCBmb250LWJvbGQgdGV4dC12b2xjYW5vLTkwMFwiPlxuICAgICAgICAgICAge3N0YXRpc3RpY3MuYnlTdGF0dXMuZGVjbGluZWR9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBNYXliZSAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLWxnIHNoYWRvdy1zbSBib3JkZXIgYm9yZGVyLXN1bnNldC0yMDAgcC00XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtc3Vuc2V0LTYwMFwiPk1heWJlPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIHRleHQtM3hsIGZvbnQtYm9sZCB0ZXh0LXN1bnNldC05MDBcIj5cbiAgICAgICAgICAgIHtzdGF0aXN0aWNzLmJ5U3RhdHVzLm1heWJlfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogUGVuZGluZyAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLWxnIHNoYWRvdy1zbSBib3JkZXIgYm9yZGVyLXNhZ2UtMjAwIHAtNFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LXNhZ2UtNjAwXCI+UGVuZGluZzwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiB0ZXh0LTN4bCBmb250LWJvbGQgdGV4dC1zYWdlLTkwMFwiPlxuICAgICAgICAgICAge3N0YXRpc3RpY3MuYnlTdGF0dXMucGVuZGluZ31cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIEJ1bGsgQWN0aW9ucyBUb29sYmFyICovfVxuICAgICAge3NlbGVjdGVkSWRzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWp1bmdsZS01MCBib3JkZXIgYm9yZGVyLWp1bmdsZS0yMDAgcm91bmRlZC1sZyBweC02IHB5LTQgZmxleCBmbGV4LWNvbCBtZDpmbGV4LXJvdyBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGdhcC00XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWp1bmdsZS05MDBcIj5cbiAgICAgICAgICAgICAge3NlbGVjdGVkSWRzLmxlbmd0aH0gUlNWUHtzZWxlY3RlZElkcy5sZW5ndGggIT09IDEgPyAncycgOiAnJ30gc2VsZWN0ZWRcbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC13cmFwIGdhcC0yXCI+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHZhcmlhbnQ9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlQnVsa1N0YXR1c1VwZGF0ZSgnYXR0ZW5kaW5nJyl9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtpc0J1bGtVcGRhdGVJblByb2dyZXNzfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBNYXJrIEF0dGVuZGluZ1xuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHZhcmlhbnQ9XCJzZWNvbmRhcnlcIlxuICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVCdWxrU3RhdHVzVXBkYXRlKCdtYXliZScpfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17aXNCdWxrVXBkYXRlSW5Qcm9ncmVzc31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgTWFyayBNYXliZVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHZhcmlhbnQ9XCJkYW5nZXJcIlxuICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVCdWxrU3RhdHVzVXBkYXRlKCdkZWNsaW5lZCcpfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17aXNCdWxrVXBkYXRlSW5Qcm9ncmVzc31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgTWFyayBEZWNsaW5lZFxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHZhcmlhbnQ9XCJnaG9zdFwiXG4gICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZUJ1bGtTdGF0dXNVcGRhdGUoJ3BlbmRpbmcnKX1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzQnVsa1VwZGF0ZUluUHJvZ3Jlc3N9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIE1hcmsgUGVuZGluZ1xuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgey8qIERhdGEgVGFibGUgKi99XG4gICAgICA8RGF0YVRhYmxlXG4gICAgICAgIGRhdGE9e3JzdnBzfVxuICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICBsb2FkaW5nPXtsb2FkaW5nfVxuICAgICAgICB0b3RhbENvdW50PXt0b3RhbENvdW50fVxuICAgICAgICBjdXJyZW50UGFnZT17Y3VycmVudFBhZ2V9XG4gICAgICAgIHBhZ2VTaXplPXtwYWdlU2l6ZX1cbiAgICAgICAgb25QYWdlQ2hhbmdlPXtoYW5kbGVQYWdlQ2hhbmdlfVxuICAgICAgICBvblNlYXJjaD17aGFuZGxlU2VhcmNofVxuICAgICAgICBvblJvd0NsaWNrPXtoYW5kbGVSb3dDbGlja31cbiAgICAgICAgc2VsZWN0YWJsZT17dHJ1ZX1cbiAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e2hhbmRsZVNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgaWRGaWVsZD1cImlkXCJcbiAgICAgICAgZW50aXR5VHlwZT1cIlJTVlBzXCJcbiAgICAgICAgb25CdWxrRXhwb3J0PXtoYW5kbGVFeHBvcnR9XG4gICAgICAvPlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbIlJTVlBNYW5hZ2VyIiwiaW5pdGlhbEZpbHRlcnMiLCJhZGRUb2FzdCIsInVzZVRvYXN0IiwicnN2cHMiLCJzZXRSc3ZwcyIsInVzZVN0YXRlIiwic3RhdGlzdGljcyIsInNldFN0YXRpc3RpY3MiLCJ0b3RhbFJTVlBzIiwiYnlTdGF0dXMiLCJhdHRlbmRpbmciLCJkZWNsaW5lZCIsIm1heWJlIiwicGVuZGluZyIsInRvdGFsR3Vlc3RDb3VudCIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwiY3VycmVudFBhZ2UiLCJzZXRDdXJyZW50UGFnZSIsInRvdGFsQ291bnQiLCJzZXRUb3RhbENvdW50IiwicGFnZVNpemUiLCJzZXRQYWdlU2l6ZSIsInNlbGVjdGVkSWRzIiwic2V0U2VsZWN0ZWRJZHMiLCJpc0J1bGtVcGRhdGVJblByb2dyZXNzIiwic2V0SXNCdWxrVXBkYXRlSW5Qcm9ncmVzcyIsImZpbHRlcnMiLCJzZXRGaWx0ZXJzIiwic2VhcmNoUXVlcnkiLCJzZXRTZWFyY2hRdWVyeSIsImV2ZW50cyIsInNldEV2ZW50cyIsImFjdGl2aXRpZXMiLCJzZXRBY3Rpdml0aWVzIiwiZmV0Y2hSU1ZQcyIsInVzZUNhbGxiYWNrIiwicGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwicGFnZSIsInRvU3RyaW5nIiwibGltaXQiLCJldmVudElkIiwiYXBwZW5kIiwiYWN0aXZpdHlJZCIsInN0YXR1cyIsImd1ZXN0SWQiLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJFcnJvciIsInJlc3VsdCIsImpzb24iLCJzdWNjZXNzIiwiZGF0YSIsInBhZ2luYXRpb24iLCJ0b3RhbCIsInR5cGUiLCJtZXNzYWdlIiwiZXJyb3IiLCJmZXRjaEV2ZW50cyIsImV2ZW50c0RhdGEiLCJBcnJheSIsImlzQXJyYXkiLCJjb25zb2xlIiwiZmV0Y2hBY3Rpdml0aWVzIiwiYWN0aXZpdGllc0RhdGEiLCJ1c2VFZmZlY3QiLCJoYW5kbGVGaWx0ZXJDaGFuZ2UiLCJrZXkiLCJ2YWx1ZSIsInByZXYiLCJ1bmRlZmluZWQiLCJoYW5kbGVTZWFyY2giLCJxdWVyeSIsImhhbmRsZVBhZ2VDaGFuZ2UiLCJoYW5kbGVTZWxlY3Rpb25DaGFuZ2UiLCJpZHMiLCJoYW5kbGVCdWxrU3RhdHVzVXBkYXRlIiwibGVuZ3RoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicnN2cElkcyIsInVwZGF0ZWRDb3VudCIsImhhbmRsZUV4cG9ydCIsImNzdiIsInRleHQiLCJibG9iIiwiQmxvYiIsInVybCIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsImxpbmsiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwiZG93bmxvYWQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzcGxpdCIsImFwcGVuZENoaWxkIiwiY2xpY2siLCJyZW1vdmVDaGlsZCIsInJldm9rZU9iamVjdFVSTCIsImhhbmRsZVJvd0NsaWNrIiwicnN2cCIsImxvZyIsImNvbHVtbnMiLCJ1c2VNZW1vIiwibGFiZWwiLCJzb3J0YWJsZSIsInJlbmRlciIsIl8iLCJndWVzdEZpcnN0TmFtZSIsImd1ZXN0TGFzdE5hbWUiLCJtb2JpbGVIaWRkZW4iLCJmaWx0ZXJhYmxlIiwiZmlsdGVyVHlwZSIsImZpbHRlck9wdGlvbnMiLCJtYXAiLCJlIiwibmFtZSIsImlkIiwiYSIsInN0YXR1c0NvbG9ycyIsInN0YXR1c0xhYmVscyIsInNwYW4iLCJjbGFzc05hbWUiLCJkYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwiZGl2IiwiQnV0dG9uIiwidmFyaWFudCIsInNpemUiLCJvbkNsaWNrIiwiZGlzYWJsZWQiLCJEYXRhVGFibGUiLCJvblBhZ2VDaGFuZ2UiLCJvblNlYXJjaCIsIm9uUm93Q2xpY2siLCJzZWxlY3RhYmxlIiwib25TZWxlY3Rpb25DaGFuZ2UiLCJpZEZpZWxkIiwiZW50aXR5VHlwZSIsIm9uQnVsa0V4cG9ydCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OytCQStCZ0JBOzs7ZUFBQUE7Ozs7dUJBN0IwQzsyQkFDaEI7d0JBQ25COzhCQUNFO0FBMEJsQixTQUFTQSxZQUFZLEVBQUVDLGlCQUFpQixDQUFDLENBQUMsRUFBb0I7SUFDbkUsTUFBTSxFQUFFQyxRQUFRLEVBQUUsR0FBR0MsSUFBQUEsc0JBQVE7SUFFN0IsbUJBQW1CO0lBQ25CLE1BQU0sQ0FBQ0MsT0FBT0MsU0FBUyxHQUFHQyxJQUFBQSxlQUFRLEVBQWtCLEVBQUU7SUFDdEQsTUFBTSxDQUFDQyxZQUFZQyxjQUFjLEdBQUdGLElBQUFBLGVBQVEsRUFBaUI7UUFDM0RHLFlBQVk7UUFDWkMsVUFBVTtZQUFFQyxXQUFXO1lBQUdDLFVBQVU7WUFBR0MsT0FBTztZQUFHQyxTQUFTO1FBQUU7UUFDNURDLGlCQUFpQjtJQUNuQjtJQUNBLE1BQU0sQ0FBQ0MsU0FBU0MsV0FBVyxHQUFHWCxJQUFBQSxlQUFRLEVBQUM7SUFDdkMsTUFBTSxDQUFDWSxhQUFhQyxlQUFlLEdBQUdiLElBQUFBLGVBQVEsRUFBQztJQUMvQyxNQUFNLENBQUNjLFlBQVlDLGNBQWMsR0FBR2YsSUFBQUEsZUFBUSxFQUFDO0lBQzdDLE1BQU0sQ0FBQ2dCLFVBQVVDLFlBQVksR0FBR2pCLElBQUFBLGVBQVEsRUFBQztJQUN6QyxNQUFNLENBQUNrQixhQUFhQyxlQUFlLEdBQUduQixJQUFBQSxlQUFRLEVBQVcsRUFBRTtJQUMzRCxNQUFNLENBQUNvQix3QkFBd0JDLDBCQUEwQixHQUFHckIsSUFBQUEsZUFBUSxFQUFDO0lBRXJFLGVBQWU7SUFDZixNQUFNLENBQUNzQixTQUFTQyxXQUFXLEdBQUd2QixJQUFBQSxlQUFRLEVBQWNMO0lBQ3BELE1BQU0sQ0FBQzZCLGFBQWFDLGVBQWUsR0FBR3pCLElBQUFBLGVBQVEsRUFBQztJQUUvQyw2QkFBNkI7SUFDN0IsTUFBTSxDQUFDMEIsUUFBUUMsVUFBVSxHQUFHM0IsSUFBQUEsZUFBUSxFQUFzQyxFQUFFO0lBQzVFLE1BQU0sQ0FBQzRCLFlBQVlDLGNBQWMsR0FBRzdCLElBQUFBLGVBQVEsRUFBc0MsRUFBRTtJQUVwRjs7R0FFQyxHQUNELE1BQU04QixhQUFhQyxJQUFBQSxrQkFBVyxFQUFDO1FBQzdCLElBQUk7WUFDRnBCLFdBQVc7WUFFWCx5QkFBeUI7WUFDekIsTUFBTXFCLFNBQVMsSUFBSUMsZ0JBQWdCO2dCQUNqQ0MsTUFBTXRCLFlBQVl1QixRQUFRO2dCQUMxQkMsT0FBT3BCLFNBQVNtQixRQUFRO1lBQzFCO1lBRUEsSUFBSWIsUUFBUWUsT0FBTyxFQUFFTCxPQUFPTSxNQUFNLENBQUMsV0FBV2hCLFFBQVFlLE9BQU87WUFDN0QsSUFBSWYsUUFBUWlCLFVBQVUsRUFBRVAsT0FBT00sTUFBTSxDQUFDLGNBQWNoQixRQUFRaUIsVUFBVTtZQUN0RSxJQUFJakIsUUFBUWtCLE1BQU0sRUFBRVIsT0FBT00sTUFBTSxDQUFDLFVBQVVoQixRQUFRa0IsTUFBTTtZQUMxRCxJQUFJbEIsUUFBUW1CLE9BQU8sRUFBRVQsT0FBT00sTUFBTSxDQUFDLFdBQVdoQixRQUFRbUIsT0FBTztZQUM3RCxJQUFJakIsYUFBYVEsT0FBT00sTUFBTSxDQUFDLFVBQVVkO1lBRXpDLE1BQU1rQixXQUFXLE1BQU1DLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRVgsT0FBT0csUUFBUSxJQUFJO1lBRXBFLElBQUksQ0FBQ08sU0FBU0UsRUFBRSxFQUFFO2dCQUNoQixNQUFNLElBQUlDLE1BQU07WUFDbEI7WUFFQSxNQUFNQyxTQUFTLE1BQU1KLFNBQVNLLElBQUk7WUFFbEMsSUFBSUQsT0FBT0UsT0FBTyxFQUFFO2dCQUNsQmpELFNBQVMrQyxPQUFPRyxJQUFJLENBQUNBLElBQUksSUFBSSxFQUFFO2dCQUMvQmxDLGNBQWMrQixPQUFPRyxJQUFJLENBQUNDLFVBQVUsQ0FBQ0MsS0FBSztnQkFDMUNqRCxjQUFjNEMsT0FBT0csSUFBSSxDQUFDaEQsVUFBVTtZQUN0QyxPQUFPO2dCQUNMTCxTQUFTO29CQUNQd0QsTUFBTTtvQkFDTkMsU0FBU1AsT0FBT1EsS0FBSyxFQUFFRCxXQUFXO2dCQUNwQztZQUNGO1FBQ0YsRUFBRSxPQUFPQyxPQUFPO1lBQ2QxRCxTQUFTO2dCQUNQd0QsTUFBTTtnQkFDTkMsU0FBU0MsaUJBQWlCVCxRQUFRUyxNQUFNRCxPQUFPLEdBQUc7WUFDcEQ7UUFDRixTQUFVO1lBQ1IxQyxXQUFXO1FBQ2I7SUFDRixHQUFHO1FBQUNDO1FBQWFJO1FBQVVNO1FBQVNFO1FBQWE1QjtLQUFTO0lBRTFEOztHQUVDLEdBQ0QsTUFBTTJELGNBQWN4QixJQUFBQSxrQkFBVyxFQUFDO1FBQzlCLElBQUk7WUFDRixNQUFNVyxXQUFXLE1BQU1DLE1BQU07WUFDN0IsSUFBSSxDQUFDRCxTQUFTRSxFQUFFLEVBQUU7WUFFbEIsTUFBTUUsU0FBUyxNQUFNSixTQUFTSyxJQUFJO1lBQ2xDLElBQUlELE9BQU9FLE9BQU8sRUFBRTtnQkFDbEIsTUFBTVEsYUFBYVYsT0FBT0csSUFBSSxFQUFFdkIsVUFBVW9CLE9BQU9HLElBQUksSUFBSSxFQUFFO2dCQUMzRHRCLFVBQVU4QixNQUFNQyxPQUFPLENBQUNGLGNBQWNBLGFBQWEsRUFBRTtZQUN2RDtRQUNGLEVBQUUsT0FBT0YsT0FBTztZQUNkSyxRQUFRTCxLQUFLLENBQUMsMkJBQTJCQTtRQUMzQztJQUNGLEdBQUcsRUFBRTtJQUVMOztHQUVDLEdBQ0QsTUFBTU0sa0JBQWtCN0IsSUFBQUEsa0JBQVcsRUFBQztRQUNsQyxJQUFJO1lBQ0YsTUFBTVcsV0FBVyxNQUFNQyxNQUFNO1lBQzdCLElBQUksQ0FBQ0QsU0FBU0UsRUFBRSxFQUFFO1lBRWxCLE1BQU1FLFNBQVMsTUFBTUosU0FBU0ssSUFBSTtZQUNsQyxJQUFJRCxPQUFPRSxPQUFPLEVBQUU7Z0JBQ2xCLE1BQU1hLGlCQUFpQmYsT0FBT0csSUFBSSxFQUFFckIsY0FBY2tCLE9BQU9HLElBQUksSUFBSSxFQUFFO2dCQUNuRXBCLGNBQWM0QixNQUFNQyxPQUFPLENBQUNHLGtCQUFrQkEsaUJBQWlCLEVBQUU7WUFDbkU7UUFDRixFQUFFLE9BQU9QLE9BQU87WUFDZEssUUFBUUwsS0FBSyxDQUFDLCtCQUErQkE7UUFDL0M7SUFDRixHQUFHLEVBQUU7SUFFTCx3REFBd0Q7SUFDeERRLElBQUFBLGdCQUFTLEVBQUM7UUFDUmhDO0lBQ0YsR0FBRztRQUFDQTtLQUFXO0lBRWYsK0JBQStCO0lBQy9CZ0MsSUFBQUEsZ0JBQVMsRUFBQztRQUNSUDtRQUNBSztJQUNGLEdBQUc7UUFBQ0w7UUFBYUs7S0FBZ0I7SUFFakM7O0dBRUMsR0FDRCxNQUFNRyxxQkFBcUJoQyxJQUFBQSxrQkFBVyxFQUFDLENBQUNpQyxLQUF3QkM7UUFDOUQxQyxXQUFXLENBQUMyQyxPQUFVLENBQUE7Z0JBQ3BCLEdBQUdBLElBQUk7Z0JBQ1AsQ0FBQ0YsSUFBSSxFQUFFQyxTQUFTRTtZQUNsQixDQUFBO1FBQ0F0RCxlQUFlLElBQUksMENBQTBDO0lBQy9ELEdBQUcsRUFBRTtJQUVMOztHQUVDLEdBQ0QsTUFBTXVELGVBQWVyQyxJQUFBQSxrQkFBVyxFQUFDLENBQUNzQztRQUNoQzVDLGVBQWU0QztRQUNmeEQsZUFBZSxJQUFJLDBDQUEwQztJQUMvRCxHQUFHLEVBQUU7SUFFTDs7R0FFQyxHQUNELE1BQU15RCxtQkFBbUJ2QyxJQUFBQSxrQkFBVyxFQUFDLENBQUNHO1FBQ3BDckIsZUFBZXFCO0lBQ2pCLEdBQUcsRUFBRTtJQUVMOztHQUVDLEdBQ0QsTUFBTXFDLHdCQUF3QnhDLElBQUFBLGtCQUFXLEVBQUMsQ0FBQ3lDO1FBQ3pDckQsZUFBZXFEO0lBQ2pCLEdBQUcsRUFBRTtJQUVMOztHQUVDLEdBQ0QsTUFBTUMseUJBQXlCMUMsSUFBQUEsa0JBQVcsRUFDeEMsT0FBT1M7UUFDTCxJQUFJdEIsWUFBWXdELE1BQU0sS0FBSyxHQUFHO1lBQzVCOUUsU0FBUztnQkFDUHdELE1BQU07Z0JBQ05DLFNBQVM7WUFDWDtZQUNBO1FBQ0Y7UUFFQSxJQUFJO1lBQ0ZoQywwQkFBMEI7WUFFMUIsTUFBTXFCLFdBQVcsTUFBTUMsTUFBTSx5QkFBeUI7Z0JBQ3BEZ0MsUUFBUTtnQkFDUkMsU0FBUztvQkFBRSxnQkFBZ0I7Z0JBQW1CO2dCQUM5Q0MsTUFBTUMsS0FBS0MsU0FBUyxDQUFDO29CQUNuQkMsU0FBUzlEO29CQUNUc0I7Z0JBQ0Y7WUFDRjtZQUVBLE1BQU1NLFNBQVMsTUFBTUosU0FBU0ssSUFBSTtZQUVsQyxJQUFJRCxPQUFPRSxPQUFPLEVBQUU7Z0JBQ2xCcEQsU0FBUztvQkFDUHdELE1BQU07b0JBQ05DLFNBQVMsQ0FBQyxxQkFBcUIsRUFBRVAsT0FBT0csSUFBSSxDQUFDZ0MsWUFBWSxDQUFDLEtBQUssRUFDN0RuQyxPQUFPRyxJQUFJLENBQUNnQyxZQUFZLEtBQUssSUFBSSxNQUFNLElBQ3ZDO2dCQUNKO2dCQUVBLG9CQUFvQjtnQkFDcEIsTUFBTW5EO2dCQUVOLGtCQUFrQjtnQkFDbEJYLGVBQWUsRUFBRTtZQUNuQixPQUFPO2dCQUNMdkIsU0FBUztvQkFDUHdELE1BQU07b0JBQ05DLFNBQVNQLE9BQU9RLEtBQUssRUFBRUQsV0FBVztnQkFDcEM7WUFDRjtRQUNGLEVBQUUsT0FBT0MsT0FBTztZQUNkMUQsU0FBUztnQkFDUHdELE1BQU07Z0JBQ05DLFNBQVNDLGlCQUFpQlQsUUFBUVMsTUFBTUQsT0FBTyxHQUFHO1lBQ3BEO1FBQ0YsU0FBVTtZQUNSaEMsMEJBQTBCO1FBQzVCO0lBQ0YsR0FDQTtRQUFDSDtRQUFhdEI7UUFBVWtDO0tBQVc7SUFHckM7O0dBRUMsR0FDRCxNQUFNb0QsZUFBZW5ELElBQUFBLGtCQUFXLEVBQUM7UUFDL0IsSUFBSTtZQUNGLDhDQUE4QztZQUM5QyxNQUFNQyxTQUFTLElBQUlDO1lBQ25CLElBQUlYLFFBQVFlLE9BQU8sRUFBRUwsT0FBT00sTUFBTSxDQUFDLFdBQVdoQixRQUFRZSxPQUFPO1lBQzdELElBQUlmLFFBQVFpQixVQUFVLEVBQUVQLE9BQU9NLE1BQU0sQ0FBQyxjQUFjaEIsUUFBUWlCLFVBQVU7WUFDdEUsSUFBSWpCLFFBQVFrQixNQUFNLEVBQUVSLE9BQU9NLE1BQU0sQ0FBQyxVQUFVaEIsUUFBUWtCLE1BQU07WUFDMUQsSUFBSWxCLFFBQVFtQixPQUFPLEVBQUVULE9BQU9NLE1BQU0sQ0FBQyxXQUFXaEIsUUFBUW1CLE9BQU87WUFDN0QsSUFBSWpCLGFBQWFRLE9BQU9NLE1BQU0sQ0FBQyxVQUFVZDtZQUV6QyxNQUFNa0IsV0FBVyxNQUFNQyxNQUFNLENBQUMsd0JBQXdCLEVBQUVYLE9BQU9HLFFBQVEsSUFBSTtZQUUzRSxJQUFJLENBQUNPLFNBQVNFLEVBQUUsRUFBRTtnQkFDaEIsTUFBTSxJQUFJQyxNQUFNO1lBQ2xCO1lBRUEsa0JBQWtCO1lBQ2xCLE1BQU1zQyxNQUFNLE1BQU16QyxTQUFTMEMsSUFBSTtZQUUvQiwyQkFBMkI7WUFDM0IsTUFBTUMsT0FBTyxJQUFJQyxLQUFLO2dCQUFDSDthQUFJLEVBQUU7Z0JBQUUvQixNQUFNO1lBQTBCO1lBQy9ELE1BQU1tQyxNQUFNQyxJQUFJQyxlQUFlLENBQUNKO1lBQ2hDLE1BQU1LLE9BQU9DLFNBQVNDLGFBQWEsQ0FBQztZQUNwQ0YsS0FBS0csSUFBSSxHQUFHTjtZQUNaRyxLQUFLSSxRQUFRLEdBQUcsQ0FBQyxNQUFNLEVBQUUsSUFBSUMsT0FBT0MsV0FBVyxHQUFHQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUM7WUFDckVOLFNBQVNkLElBQUksQ0FBQ3FCLFdBQVcsQ0FBQ1I7WUFDMUJBLEtBQUtTLEtBQUs7WUFDVlIsU0FBU2QsSUFBSSxDQUFDdUIsV0FBVyxDQUFDVjtZQUMxQkYsSUFBSWEsZUFBZSxDQUFDZDtZQUVwQjNGLFNBQVM7Z0JBQ1B3RCxNQUFNO2dCQUNOQyxTQUFTO1lBQ1g7UUFDRixFQUFFLE9BQU9DLE9BQU87WUFDZDFELFNBQVM7Z0JBQ1B3RCxNQUFNO2dCQUNOQyxTQUFTQyxpQkFBaUJULFFBQVFTLE1BQU1ELE9BQU8sR0FBRztZQUNwRDtRQUNGO0lBQ0YsR0FBRztRQUFDL0I7UUFBU0U7UUFBYTVCO0tBQVM7SUFFbkM7O0dBRUMsR0FDRCxNQUFNMEcsaUJBQWlCdkUsSUFBQUEsa0JBQVcsRUFBQyxDQUFDd0U7UUFDbEMsc0NBQXNDO1FBQ3RDNUMsUUFBUTZDLEdBQUcsQ0FBQyxpQkFBaUJEO0lBQy9CLEdBQUcsRUFBRTtJQUVMLHVCQUF1QjtJQUN2QixNQUFNRSxVQUFzQ0MsSUFBQUEsY0FBTyxFQUNqRCxJQUFNO1lBQ0o7Z0JBQ0UxQyxLQUFLO2dCQUNMMkMsT0FBTztnQkFDUEMsVUFBVTtnQkFDVkMsUUFBUSxDQUFDQyxHQUFHUCxPQUFTLEdBQUdBLEtBQUtRLGNBQWMsQ0FBQyxDQUFDLEVBQUVSLEtBQUtTLGFBQWEsRUFBRTtZQUNyRTtZQUNBO2dCQUNFaEQsS0FBSztnQkFDTDJDLE9BQU87Z0JBQ1BDLFVBQVU7Z0JBQ1ZDLFFBQVEsQ0FBQzVDLFFBQVVBLFNBQVM7Z0JBQzVCZ0QsY0FBYztZQUNoQjtZQUNBO2dCQUNFakQsS0FBSztnQkFDTDJDLE9BQU87Z0JBQ1BDLFVBQVU7Z0JBQ1ZNLFlBQVk7Z0JBQ1pDLFlBQVk7Z0JBQ1pDLGVBQWUxRixPQUFPMkYsR0FBRyxDQUFDLENBQUNDLElBQU8sQ0FBQTt3QkFBRVgsT0FBT1csRUFBRUMsSUFBSTt3QkFBRXRELE9BQU9xRCxFQUFFRSxFQUFFO29CQUFDLENBQUE7Z0JBQy9EWCxRQUFRLENBQUM1QyxRQUFVQSxTQUFTO1lBQzlCO1lBQ0E7Z0JBQ0VELEtBQUs7Z0JBQ0wyQyxPQUFPO2dCQUNQQyxVQUFVO2dCQUNWTSxZQUFZO2dCQUNaQyxZQUFZO2dCQUNaQyxlQUFleEYsV0FBV3lGLEdBQUcsQ0FBQyxDQUFDSSxJQUFPLENBQUE7d0JBQUVkLE9BQU9jLEVBQUVGLElBQUk7d0JBQUV0RCxPQUFPd0QsRUFBRUQsRUFBRTtvQkFBQyxDQUFBO2dCQUNuRVgsUUFBUSxDQUFDNUMsUUFBVUEsU0FBUztZQUM5QjtZQUNBO2dCQUNFRCxLQUFLO2dCQUNMMkMsT0FBTztnQkFDUEMsVUFBVTtnQkFDVk0sWUFBWTtnQkFDWkMsWUFBWTtnQkFDWkMsZUFBZTtvQkFDYjt3QkFBRVQsT0FBTzt3QkFBVzFDLE9BQU87b0JBQVU7b0JBQ3JDO3dCQUFFMEMsT0FBTzt3QkFBYTFDLE9BQU87b0JBQVk7b0JBQ3pDO3dCQUFFMEMsT0FBTzt3QkFBWTFDLE9BQU87b0JBQVc7b0JBQ3ZDO3dCQUFFMEMsT0FBTzt3QkFBUzFDLE9BQU87b0JBQVE7aUJBQ2xDO2dCQUNENEMsUUFBUSxDQUFDNUM7b0JBQ1AsTUFBTXlELGVBQXVDO3dCQUMzQ2xILFNBQVM7d0JBQ1RILFdBQVc7d0JBQ1hDLFVBQVU7d0JBQ1ZDLE9BQU87b0JBQ1Q7b0JBQ0EsTUFBTW9ILGVBQXVDO3dCQUMzQ25ILFNBQVM7d0JBQ1RILFdBQVc7d0JBQ1hDLFVBQVU7d0JBQ1ZDLE9BQU87b0JBQ1Q7b0JBQ0EscUJBQ0UscUJBQUNxSDt3QkFDQ0MsV0FBVyxDQUFDLHdFQUF3RSxFQUNsRkgsWUFBWSxDQUFDekQsTUFBTSxJQUFJLDZCQUN2QjtrQ0FFRDBELFlBQVksQ0FBQzFELE1BQU0sSUFBSUE7O2dCQUc5QjtZQUNGO1lBQ0E7Z0JBQ0VELEtBQUs7Z0JBQ0wyQyxPQUFPO2dCQUNQQyxVQUFVO2dCQUNWQyxRQUFRLENBQUM1QyxRQUFVQSxPQUFPOUIsY0FBYztnQkFDeEM4RSxjQUFjO1lBQ2hCO1lBQ0E7Z0JBQ0VqRCxLQUFLO2dCQUNMMkMsT0FBTztnQkFDUEMsVUFBVTtnQkFDVkMsUUFBUSxDQUFDNUM7b0JBQ1AsSUFBSSxDQUFDQSxPQUFPLE9BQU87b0JBQ25CLE1BQU02RCxPQUFPLElBQUkvQixLQUFLOUI7b0JBQ3RCLE9BQU82RCxLQUFLQyxrQkFBa0I7Z0JBQ2hDO2dCQUNBZCxjQUFjO1lBQ2hCO1NBQ0QsRUFDRDtRQUFDdkY7UUFBUUU7S0FBVztJQUd0QixxQkFDRSxzQkFBQ29HO1FBQUlILFdBQVU7OzBCQUViLHNCQUFDRztnQkFBSUgsV0FBVTs7a0NBRWIsc0JBQUNHO3dCQUFJSCxXQUFVOzswQ0FDYixxQkFBQ0c7Z0NBQUlILFdBQVU7MENBQW9DOzswQ0FDbkQscUJBQUNHO2dDQUFJSCxXQUFVOzBDQUNaNUgsV0FBV0UsVUFBVTs7OztrQ0FLMUIsc0JBQUM2SDt3QkFBSUgsV0FBVTs7MENBQ2IscUJBQUNHO2dDQUFJSCxXQUFVOzBDQUFzQzs7MENBQ3JELHFCQUFDRztnQ0FBSUgsV0FBVTswQ0FDWjVILFdBQVdHLFFBQVEsQ0FBQ0MsU0FBUzs7MENBRWhDLHNCQUFDMkg7Z0NBQUlILFdBQVU7O29DQUNaNUgsV0FBV1EsZUFBZTtvQ0FBQzs7Ozs7a0NBS2hDLHNCQUFDdUg7d0JBQUlILFdBQVU7OzBDQUNiLHFCQUFDRztnQ0FBSUgsV0FBVTswQ0FBdUM7OzBDQUN0RCxxQkFBQ0c7Z0NBQUlILFdBQVU7MENBQ1o1SCxXQUFXRyxRQUFRLENBQUNFLFFBQVE7Ozs7a0NBS2pDLHNCQUFDMEg7d0JBQUlILFdBQVU7OzBDQUNiLHFCQUFDRztnQ0FBSUgsV0FBVTswQ0FBc0M7OzBDQUNyRCxxQkFBQ0c7Z0NBQUlILFdBQVU7MENBQ1o1SCxXQUFXRyxRQUFRLENBQUNHLEtBQUs7Ozs7a0NBSzlCLHNCQUFDeUg7d0JBQUlILFdBQVU7OzBDQUNiLHFCQUFDRztnQ0FBSUgsV0FBVTswQ0FBb0M7OzBDQUNuRCxxQkFBQ0c7Z0NBQUlILFdBQVU7MENBQ1o1SCxXQUFXRyxRQUFRLENBQUNJLE9BQU87Ozs7OztZQU1qQ1UsWUFBWXdELE1BQU0sR0FBRyxtQkFDcEIsc0JBQUNzRDtnQkFBSUgsV0FBVTs7a0NBQ2IscUJBQUNHO3dCQUFJSCxXQUFVO2tDQUNiLGNBQUEsc0JBQUNEOzRCQUFLQyxXQUFVOztnQ0FDYjNHLFlBQVl3RCxNQUFNO2dDQUFDO2dDQUFNeEQsWUFBWXdELE1BQU0sS0FBSyxJQUFJLE1BQU07Z0NBQUc7Ozs7a0NBR2xFLHNCQUFDc0Q7d0JBQUlILFdBQVU7OzBDQUNiLHFCQUFDSSxjQUFNO2dDQUNMQyxTQUFRO2dDQUNSQyxNQUFLO2dDQUNMQyxTQUFTLElBQU0zRCx1QkFBdUI7Z0NBQ3RDNEQsVUFBVWpIOzBDQUNYOzswQ0FHRCxxQkFBQzZHLGNBQU07Z0NBQ0xDLFNBQVE7Z0NBQ1JDLE1BQUs7Z0NBQ0xDLFNBQVMsSUFBTTNELHVCQUF1QjtnQ0FDdEM0RCxVQUFVakg7MENBQ1g7OzBDQUdELHFCQUFDNkcsY0FBTTtnQ0FDTEMsU0FBUTtnQ0FDUkMsTUFBSztnQ0FDTEMsU0FBUyxJQUFNM0QsdUJBQXVCO2dDQUN0QzRELFVBQVVqSDswQ0FDWDs7MENBR0QscUJBQUM2RyxjQUFNO2dDQUNMQyxTQUFRO2dDQUNSQyxNQUFLO2dDQUNMQyxTQUFTLElBQU0zRCx1QkFBdUI7Z0NBQ3RDNEQsVUFBVWpIOzBDQUNYOzs7Ozs7MEJBUVAscUJBQUNrSCxvQkFBUztnQkFDUnJGLE1BQU1uRDtnQkFDTjJHLFNBQVNBO2dCQUNUL0YsU0FBU0E7Z0JBQ1RJLFlBQVlBO2dCQUNaRixhQUFhQTtnQkFDYkksVUFBVUE7Z0JBQ1Z1SCxjQUFjakU7Z0JBQ2RrRSxVQUFVcEU7Z0JBQ1ZxRSxZQUFZbkM7Z0JBQ1pvQyxZQUFZO2dCQUNaQyxtQkFBbUJwRTtnQkFDbkJxRSxTQUFRO2dCQUNSQyxZQUFXO2dCQUNYQyxjQUFjNUQ7Ozs7QUFJdEIifQ==