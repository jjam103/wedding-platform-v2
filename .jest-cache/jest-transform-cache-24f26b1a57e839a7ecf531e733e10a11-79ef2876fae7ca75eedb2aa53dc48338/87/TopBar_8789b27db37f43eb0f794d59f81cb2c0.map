{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/TopBar.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, useRef, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\n\n/**\n * TopBar Client Component\n * \n * Top navigation bar with:\n * - User menu with logout functionality\n * - Notification bell (placeholder for now)\n * - Responsive design\n */\nexport function TopBar() {\n  const router = useRouter();\n  const [isUserMenuOpen, setIsUserMenuOpen] = useState(false);\n  const [isLoggingOut, setIsLoggingOut] = useState(false);\n  const userMenuRef = useRef<HTMLDivElement>(null);\n\n  // Close user menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (userMenuRef.current && !userMenuRef.current.contains(event.target as Node)) {\n        setIsUserMenuOpen(false);\n      }\n    };\n\n    if (isUserMenuOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => document.removeEventListener('mousedown', handleClickOutside);\n    }\n  }, [isUserMenuOpen]);\n\n  const toggleUserMenu = useCallback(() => {\n    setIsUserMenuOpen((prev) => !prev);\n  }, []);\n\n  const handleLogout = useCallback(async () => {\n    try {\n      setIsLoggingOut(true);\n      \n      // Call logout API\n      const response = await fetch('/api/auth/logout', {\n        method: 'POST',\n      });\n\n      if (response.ok) {\n        // Redirect to login page\n        router.push('/auth/login');\n      } else {\n        console.error('Logout failed');\n        setIsLoggingOut(false);\n      }\n    } catch (error) {\n      console.error('Logout error:', error);\n      setIsLoggingOut(false);\n    }\n  }, [router]);\n\n  const handleProfile = useCallback(() => {\n    setIsUserMenuOpen(false);\n    router.push('/admin/settings');\n  }, [router]);\n\n  return (\n    <header className=\"h-16 bg-white border-b border-sage-200 shadow-sm sticky top-0 z-30\" role=\"banner\">\n      <div className=\"h-full px-4 sm:px-6 lg:px-8 flex items-center justify-between\">\n        {/* Left side - Page title or breadcrumbs */}\n        <div className=\"flex items-center gap-4\">\n          <h1 className=\"text-lg font-semibold text-sage-900 hidden sm:block\">\n            Wedding Admin\n          </h1>\n        </div>\n\n        {/* Right side - Actions */}\n        <div className=\"flex items-center gap-3\" role=\"toolbar\" aria-label=\"User actions\">\n          {/* Notification bell (placeholder) */}\n          <button\n            className=\"p-2 text-sage-600 hover:text-sage-900 hover:bg-sage-100 rounded-lg transition-colors relative\"\n            aria-label=\"Notifications (coming soon)\"\n            title=\"Notifications (coming soon)\"\n          >\n            <span className=\"text-xl\" aria-hidden=\"true\">üîî</span>\n            {/* Notification badge - placeholder */}\n            {/* <span className=\"absolute top-1 right-1 w-2 h-2 bg-volcano-500 rounded-full\"></span> */}\n          </button>\n\n          {/* User menu */}\n          <div className=\"relative\" ref={userMenuRef}>\n            <button\n              onClick={toggleUserMenu}\n              className=\"flex items-center gap-2 p-2 text-sage-700 hover:text-sage-900 hover:bg-sage-100 rounded-lg transition-colors\"\n              aria-label=\"User menu\"\n              aria-expanded={isUserMenuOpen}\n              aria-haspopup=\"true\"\n              aria-controls=\"user-menu-dropdown\"\n            >\n              <div className=\"w-8 h-8 bg-jungle-500 text-white rounded-full flex items-center justify-center font-medium\" aria-hidden=\"true\">\n                A\n              </div>\n              <span className=\"hidden sm:inline text-sm font-medium\">Admin</span>\n              <span className=\"text-xs\" aria-hidden=\"true\">{isUserMenuOpen ? '‚ñ≤' : '‚ñº'}</span>\n            </button>\n\n            {/* Dropdown menu */}\n            {isUserMenuOpen && (\n              <div \n                id=\"user-menu-dropdown\"\n                className=\"absolute right-0 mt-2 w-48 bg-white border border-sage-200 rounded-lg shadow-lg py-1 z-50 animate-slide-down\"\n                role=\"menu\"\n                aria-label=\"User menu options\"\n              >\n                <button\n                  onClick={handleProfile}\n                  className=\"w-full px-4 py-2 text-left text-sm text-sage-700 hover:bg-sage-50 transition-colors flex items-center gap-2\"\n                  role=\"menuitem\"\n                >\n                  <span aria-hidden=\"true\">‚öôÔ∏è</span>\n                  <span>Settings</span>\n                </button>\n                <div className=\"border-t border-sage-200 my-1\" role=\"separator\"></div>\n                <button\n                  onClick={handleLogout}\n                  disabled={isLoggingOut}\n                  className=\"w-full px-4 py-2 text-left text-sm text-volcano-600 hover:bg-volcano-50 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  role=\"menuitem\"\n                  aria-busy={isLoggingOut}\n                >\n                  {isLoggingOut ? (\n                    <>\n                      <div \n                        className=\"animate-spin rounded-full h-4 w-4 border-2 border-volcano-600 border-t-transparent\"\n                        role=\"status\"\n                        aria-label=\"Logging out\"\n                      ></div>\n                      <span>Logging out...</span>\n                    </>\n                  ) : (\n                    <>\n                      <span aria-hidden=\"true\">üö™</span>\n                      <span>Logout</span>\n                    </>\n                  )}\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n}\n"],"names":["TopBar","router","useRouter","isUserMenuOpen","setIsUserMenuOpen","useState","isLoggingOut","setIsLoggingOut","userMenuRef","useRef","useEffect","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","toggleUserMenu","useCallback","prev","handleLogout","response","fetch","method","ok","push","console","error","handleProfile","header","className","role","div","h1","aria-label","button","title","span","aria-hidden","ref","onClick","aria-expanded","aria-haspopup","aria-controls","id","disabled","aria-busy"],"mappings":"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"}