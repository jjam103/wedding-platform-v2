8a4de96649e613fb3619f775a31c5d7f
/**
 * Unit Tests for SectionEditor Photo Integration
 * 
 * Tests:
 * - Photo selection
 * - Multiple photo handling
 * - Photo preview
 * 
 * Requirements: 2.4
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _SectionEditor = require("./SectionEditor");
// Mock fetch globally
global.fetch = jest.fn();
// Mock window.confirm
const originalConfirm = window.confirm;
// Mock scrollIntoView
Element.prototype.scrollIntoView = jest.fn();
// Mock photo data
const mockPhotos = [
    {
        id: 'photo-1',
        photo_url: 'https://example.com/photo1.jpg',
        caption: 'Beach sunset',
        alt_text: 'Beautiful sunset at the beach',
        moderation_status: 'approved',
        created_at: '2025-01-01T00:00:00Z'
    },
    {
        id: 'photo-2',
        photo_url: 'https://example.com/photo2.jpg',
        caption: 'Wedding ceremony',
        alt_text: 'Ceremony at the venue',
        moderation_status: 'approved',
        created_at: '2025-01-02T00:00:00Z'
    },
    {
        id: 'photo-3',
        photo_url: 'https://example.com/photo3.jpg',
        caption: 'Reception dinner',
        alt_text: 'Dinner reception',
        moderation_status: 'approved',
        created_at: '2025-01-03T00:00:00Z'
    }
];
// Mock section with photo gallery column
const mockPhotoSection = {
    id: 'section-1',
    page_type: 'custom',
    page_id: 'page-1',
    display_order: 0,
    created_at: '2024-01-01T00:00:00Z',
    updated_at: '2024-01-01T00:00:00Z',
    columns: [
        {
            id: 'column-1',
            section_id: 'section-1',
            column_number: 1,
            content_type: 'photo_gallery',
            content_data: {
                photo_ids: []
            },
            created_at: '2024-01-01T00:00:00Z',
            updated_at: '2024-01-01T00:00:00Z'
        }
    ]
};
const mockPhotoSectionWithPhotos = {
    ...mockPhotoSection,
    columns: [
        {
            ...mockPhotoSection.columns[0],
            content_data: {
                photo_ids: [
                    'photo-1',
                    'photo-2'
                ]
            }
        }
    ]
};
describe('SectionEditor - Photo Integration', ()=>{
    let mockOnSave;
    let mockOnClose;
    beforeEach(()=>{
        mockOnSave = jest.fn();
        mockOnClose = jest.fn();
        window.confirm = jest.fn().mockReturnValue(true);
        global.fetch.mockReset();
        jest.clearAllMocks();
    });
    afterEach(()=>{
        (0, _react.cleanup)();
        window.confirm = originalConfirm;
    });
    const mockFetchSuccess = (data)=>{
        global.fetch.mockResolvedValueOnce({
            ok: true,
            json: async ()=>({
                    success: true,
                    data
                })
        });
    };
    describe('Photo Selection', ()=>{
        it('should display PhotoPicker component for photo_gallery column type', async ()=>{
            mockFetchSuccess([
                mockPhotoSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                // PhotoPicker should render the "Add Photos from Gallery" button
                expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
            });
        });
        it('should open photo picker modal when add photos button is clicked', async ()=>{
            mockFetchSuccess([
                mockPhotoSection
            ]);
            mockFetchSuccess({
                photos: mockPhotos,
                total: 3
            }); // Photos API response
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Select Photos')).toBeInTheDocument();
            });
        });
        it('should fetch photos when photo picker opens', async ()=>{
            mockFetchSuccess([
                mockPhotoSection
            ]);
            mockFetchSuccess({
                photos: mockPhotos,
                total: 3
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('/api/admin/photos'));
            });
        });
        it('should update section when photo is selected', async ()=>{
            mockFetchSuccess([
                mockPhotoSection
            ]);
            mockFetchSuccess({
                photos: mockPhotos,
                total: 3
            }); // Photos API
            mockFetchSuccess(mockPhotoSectionWithPhotos); // Update section API
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Beautiful sunset at the beach')).toBeInTheDocument();
            });
            // Select a photo
            _react.fireEvent.click(_react.screen.getByAltText('Beautiful sunset at the beach'));
            // Close the modal
            _react.fireEvent.click(_react.screen.getByText('Done'));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('/api/admin/sections/section-1'), expect.objectContaining({
                    method: 'PUT',
                    body: expect.stringContaining('photo_ids')
                }));
            });
        });
        it('should pass correct pageType to PhotoPicker', async ()=>{
            mockFetchSuccess([
                mockPhotoSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "event",
                pageId: "event-123",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                // The PhotoPicker should be rendered with the correct pageType
                // This is verified by checking that the component renders
                expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
            });
        });
        it('should pass correct pageId to PhotoPicker', async ()=>{
            mockFetchSuccess([
                mockPhotoSection
            ]);
            mockFetchSuccess({
                photos: mockPhotos,
                total: 3
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-456",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('page_id=activity-456'));
            });
        });
        it('should disable photo picker when section is saving', async ()=>{
            mockFetchSuccess([
                mockPhotoSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
            });
            // Mock a delayed response for section update
            global.fetch.mockImplementationOnce(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            ok: true,
                            json: async ()=>({
                                    success: true,
                                    data: mockPhotoSection
                                })
                        }), 100)));
            // Trigger a save operation by toggling layout
            const layoutSelect = _react.screen.getAllByRole('combobox')[0]; // First select is layout
            _react.fireEvent.change(layoutSelect, {
                target: {
                    value: 'two-column'
                }
            });
            // Photo picker button should be disabled during save
            await (0, _react.waitFor)(()=>{
                const addPhotosButton = _react.screen.getByText('+ Add Photos from Gallery');
                expect(addPhotosButton).toBeDisabled();
            });
        });
    });
    describe('Multiple Photo Handling', ()=>{
        it('should display selected photos count', async ()=>{
            mockFetchSuccess([
                mockPhotoSectionWithPhotos
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Selected Photos (2)')).toBeInTheDocument();
            });
        });
        it('should display all selected photos in preview grid', async ()=>{
            mockFetchSuccess([
                mockPhotoSectionWithPhotos
            ]);
            mockFetchSuccess({
                photos: mockPhotos,
                total: 3
            }); // For PhotoPicker
            // Mock individual photo fetches for selected photos
            mockFetchSuccess(mockPhotos[0]); // photo-1
            mockFetchSuccess(mockPhotos[1]); // photo-2
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Selected Photos (2)')).toBeInTheDocument();
            });
            // Verify the photo grid container exists
            const photoGrid = _react.screen.getByText('Selected Photos (2)').closest('.border');
            expect(photoGrid).toBeInTheDocument();
            // The grid should have the correct class
            const gridElement = photoGrid?.querySelector('.grid.grid-cols-4');
            expect(gridElement).toBeInTheDocument();
        });
        it('should allow selecting multiple photos', async ()=>{
            mockFetchSuccess([
                mockPhotoSection
            ]);
            mockFetchSuccess({
                photos: mockPhotos,
                total: 3
            }); // Photos API
            mockFetchSuccess(mockPhotoSection); // First update with 1 photo
            mockFetchSuccess(mockPhotoSectionWithPhotos); // Second update with 2 photos
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
            });
            _react.fireEvent.click(_react.screen.getByText('+ Add Photos from Gallery'));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Beautiful sunset at the beach')).toBeInTheDocument();
            });
            // Select first photo
            _react.fireEvent.click(_react.screen.getByAltText('Beautiful sunset at the beach'));
            // Wait for first update
            await (0, _react.waitFor)(()=>{
                const firstUpdateCall = global.fetch.mock.calls.find((call)=>call[0].includes('/api/admin/sections/section-1') && call[1]?.method === 'PUT');
                expect(firstUpdateCall).toBeDefined();
            });
            // Select second photo
            _react.fireEvent.click(_react.screen.getByAltText('Ceremony at the venue'));
            // Close modal
            _react.fireEvent.click(_react.screen.getByText('Done'));
            await (0, _react.waitFor)(()=>{
                // Should have made at least 2 update calls (one for each photo selection)
                const updateCalls = global.fetch.mock.calls.filter((call)=>call[0].includes('/api/admin/sections/section-1') && call[1]?.method === 'PUT');
                expect(updateCalls.length).toBeGreaterThanOrEqual(1);
                // The last update should contain both photos
                const lastUpdateCall = updateCalls[updateCalls.length - 1];
                if (lastUpdateCall) {
                    const body = JSON.parse(lastUpdateCall[1].body);
                    // Should have at least one photo selected
                    expect(body.columns[0].content_data.photo_ids.length).toBeGreaterThan(0);
                }
            });
        });
        it('should allow removing individual photos from selection', async ()=>{
            mockFetchSuccess([
                mockPhotoSectionWithPhotos
            ]);
            // Mock individual photo fetches for selected photos
            mockFetchSuccess(mockPhotos[0]); // photo-1
            mockFetchSuccess(mockPhotos[1]); // photo-2
            mockFetchSuccess(mockPhotoSection); // Update with 1 photo after removal
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Selected Photos (2)')).toBeInTheDocument();
            });
            // Wait for photos to be fetched and displayed
            await (0, _react.waitFor)(()=>{
                const removeButtons = _react.screen.getAllByLabelText('Remove photo');
                expect(removeButtons.length).toBeGreaterThan(0);
                _react.fireEvent.click(removeButtons[0]);
            }, {
                timeout: 3000
            });
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('/api/admin/sections/section-1'), expect.objectContaining({
                    method: 'PUT'
                }));
            });
        });
        it('should allow clearing all selected photos', async ()=>{
            mockFetchSuccess([
                mockPhotoSectionWithPhotos
            ]);
            mockFetchSuccess(mockPhotoSection); // Update with 0 photos
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Selected Photos (2)')).toBeInTheDocument();
            });
            // Click "Clear All" button
            _react.fireEvent.click(_react.screen.getByText('Clear All'));
            await (0, _react.waitFor)(()=>{
                const updateCall = global.fetch.mock.calls.find((call)=>call[0].includes('/api/admin/sections/section-1') && call[1]?.method === 'PUT');
                expect(updateCall).toBeDefined();
                const body = JSON.parse(updateCall[1].body);
                expect(body.columns[0].content_data.photo_ids).toHaveLength(0);
            });
        });
        it('should maintain photo order in selection', async ()=>{
            const orderedPhotoSection = {
                ...mockPhotoSection,
                columns: [
                    {
                        ...mockPhotoSection.columns[0],
                        content_data: {
                            photo_ids: [
                                'photo-3',
                                'photo-1',
                                'photo-2'
                            ]
                        }
                    }
                ]
            };
            mockFetchSuccess([
                orderedPhotoSection
            ]);
            // Mock individual photo fetches in order
            mockFetchSuccess(mockPhotos[2]); // photo-3
            mockFetchSuccess(mockPhotos[0]); // photo-1
            mockFetchSuccess(mockPhotos[1]); // photo-2
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Selected Photos (3)')).toBeInTheDocument();
            });
            // Wait for photos to be fetched and displayed
            await (0, _react.waitFor)(()=>{
                const photoGrid = _react.screen.getByText('Selected Photos (3)').closest('.border');
                const images = photoGrid?.querySelectorAll('img');
                expect(images?.length).toBe(3);
            }, {
                timeout: 3000
            });
        });
        it('should handle empty photo selection', async ()=>{
            mockFetchSuccess([
                mockPhotoSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                // Should not show "Selected Photos" section when no photos selected
                expect(_react.screen.queryByText(/Selected Photos/)).not.toBeInTheDocument();
                // Should show the add photos button
                expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
            });
        });
    });
    describe('Photo Preview', ()=>{
        it('should display photo thumbnails in selected photos section', async ()=>{
            mockFetchSuccess([
                mockPhotoSectionWithPhotos
            ]);
            // Mock individual photo fetches for selected photos
            mockFetchSuccess(mockPhotos[0]); // photo-1
            mockFetchSuccess(mockPhotos[1]); // photo-2
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Selected Photos (2)')).toBeInTheDocument();
            });
            // Wait for photos to be fetched and displayed
            await (0, _react.waitFor)(()=>{
                const photoGrid = _react.screen.getByText('Selected Photos (2)').closest('.border');
                const images = photoGrid?.querySelectorAll('img');
                expect(images?.length).toBe(2);
            }, {
                timeout: 3000
            });
        });
        it('should display photo captions in preview', async ()=>{
            mockFetchSuccess([
                mockPhotoSectionWithPhotos
            ]);
            mockFetchSuccess({
                photos: mockPhotos,
                total: 3
            }); // For PhotoPicker to resolve photo details
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Selected Photos (2)')).toBeInTheDocument();
            });
            // Captions should be visible in the preview grid
            const photoGrid = _react.screen.getByText('Selected Photos (2)').closest('.border');
            expect(photoGrid).toBeInTheDocument();
        });
        it('should show photos in guest preview modal', async ()=>{
            mockFetchSuccess([
                mockPhotoSectionWithPhotos
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Open preview modal by clicking Guest Preview button
            _react.fireEvent.click(_react.screen.getByText('Guest Preview'));
            await (0, _react.waitFor)(()=>{
                // Preview should show photo placeholders
                const previewSection = _react.screen.getByText('Guest Preview').closest('.border');
                expect(previewSection).toBeInTheDocument();
                // The preview will show photo content or loading state
                expect(previewSection?.textContent).toContain('photo');
            }, {
                timeout: 3000
            });
        });
        it('should show "No photos selected" message in preview when empty', async ()=>{
            mockFetchSuccess([
                mockPhotoSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Open preview by clicking Guest Preview button
            _react.fireEvent.click(_react.screen.getByText('Guest Preview'));
            await (0, _react.waitFor)(()=>{
                // Should show empty state message
                expect(_react.screen.getByText('No photos selected')).toBeInTheDocument();
            });
        });
        it('should display photo grid layout in preview', async ()=>{
            const multiPhotoSection = {
                ...mockPhotoSection,
                columns: [
                    {
                        ...mockPhotoSection.columns[0],
                        content_data: {
                            photo_ids: [
                                'photo-1',
                                'photo-2',
                                'photo-3'
                            ]
                        }
                    }
                ]
            };
            mockFetchSuccess([
                multiPhotoSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Open preview by clicking Guest Preview button
            _react.fireEvent.click(_react.screen.getByText('Guest Preview'));
            await (0, _react.waitFor)(()=>{
                // Preview should use grid layout for photos
                const previewSection = _react.screen.getByText('Guest Preview').closest('.border');
                const photoGrid = previewSection?.querySelector('.grid.grid-cols-2');
                expect(photoGrid).toBeInTheDocument();
            });
        });
        it('should show hover effects on photo thumbnails', async ()=>{
            mockFetchSuccess([
                mockPhotoSectionWithPhotos
            ]);
            // Mock individual photo fetches for selected photos
            mockFetchSuccess(mockPhotos[0]); // photo-1
            mockFetchSuccess(mockPhotos[1]); // photo-2
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Selected Photos (2)')).toBeInTheDocument();
            });
            // Wait for photos to be fetched and displayed
            await (0, _react.waitFor)(()=>{
                const photoGrid = _react.screen.getByText('Selected Photos (2)').closest('.border');
                const photoContainers = photoGrid?.querySelectorAll('.group');
                expect(photoContainers?.length).toBeGreaterThan(0);
            }, {
                timeout: 3000
            });
        });
        it('should display remove button on hover', async ()=>{
            mockFetchSuccess([
                mockPhotoSectionWithPhotos
            ]);
            // Mock individual photo fetches for selected photos
            mockFetchSuccess(mockPhotos[0]); // photo-1
            mockFetchSuccess(mockPhotos[1]); // photo-2
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Selected Photos (2)')).toBeInTheDocument();
            });
            // Wait for photos to be fetched and displayed
            await (0, _react.waitFor)(()=>{
                const removeButtons = _react.screen.getAllByLabelText('Remove photo');
                expect(removeButtons.length).toBe(2);
                // Buttons should have group-hover:opacity-100 class
                removeButtons.forEach((button)=>{
                    expect(button.className).toContain('group-hover:opacity-100');
                });
            }, {
                timeout: 3000
            });
        });
    });
    describe('Column Type Change to Photo Gallery', ()=>{
        it('should initialize empty photo_ids when changing to photo_gallery type', async ()=>{
            const richTextSection = {
                ...mockPhotoSection,
                columns: [
                    {
                        ...mockPhotoSection.columns[0],
                        content_type: 'rich_text',
                        content_data: {
                            html: '<p>Some text</p>'
                        }
                    }
                ]
            };
            mockFetchSuccess([
                richTextSection
            ]);
            mockFetchSuccess(mockPhotoSection); // Updated to photo_gallery
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                // Find the column type selector (second combobox - first is layout selector)
                const selects = _react.screen.getAllByRole('combobox');
                expect(selects.length).toBeGreaterThan(1);
            });
            // Change column type to photo_gallery (second combobox)
            const selects = _react.screen.getAllByRole('combobox');
            const columnTypeSelect = selects[1]; // Second select is column type
            _react.fireEvent.change(columnTypeSelect, {
                target: {
                    value: 'photo_gallery'
                }
            });
            await (0, _react.waitFor)(()=>{
                const updateCall = global.fetch.mock.calls.find((call)=>call[0].includes('/api/admin/sections/section-1') && call[1]?.method === 'PUT');
                expect(updateCall).toBeDefined();
                const body = JSON.parse(updateCall[1].body);
                expect(body.columns[0].content_type).toBe('photo_gallery');
                expect(body.columns[0].content_data).toEqual({
                    photo_ids: [],
                    display_mode: 'gallery'
                });
            });
        });
        it('should display PhotoPicker after changing column type to photo_gallery', async ()=>{
            const richTextSection = {
                ...mockPhotoSection,
                columns: [
                    {
                        ...mockPhotoSection.columns[0],
                        content_type: 'rich_text',
                        content_data: {
                            html: '<p>Some text</p>'
                        }
                    }
                ]
            };
            mockFetchSuccess([
                richTextSection
            ]);
            mockFetchSuccess(mockPhotoSection); // Updated to photo_gallery
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1')).toBeInTheDocument();
            });
            // Click Edit button to expand section
            _react.fireEvent.click(_react.screen.getByRole('button', {
                name: /edit/i
            }));
            await (0, _react.waitFor)(()=>{
                // Find the column type selector (second combobox)
                const selects = _react.screen.getAllByRole('combobox');
                expect(selects.length).toBeGreaterThan(1);
            });
            // Change column type to photo_gallery (second combobox)
            const selects = _react.screen.getAllByRole('combobox');
            const columnTypeSelect = selects[1]; // Second select is column type
            _react.fireEvent.change(columnTypeSelect, {
                target: {
                    value: 'photo_gallery'
                }
            });
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9hZG1pbi9TZWN0aW9uRWRpdG9yLnBob3RvSW50ZWdyYXRpb24udGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVbml0IFRlc3RzIGZvciBTZWN0aW9uRWRpdG9yIFBob3RvIEludGVncmF0aW9uXG4gKiBcbiAqIFRlc3RzOlxuICogLSBQaG90byBzZWxlY3Rpb25cbiAqIC0gTXVsdGlwbGUgcGhvdG8gaGFuZGxpbmdcbiAqIC0gUGhvdG8gcHJldmlld1xuICogXG4gKiBSZXF1aXJlbWVudHM6IDIuNFxuICovXG5cbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCBmaXJlRXZlbnQsIHdhaXRGb3IsIGNsZWFudXAgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IFNlY3Rpb25FZGl0b3IgfSBmcm9tICcuL1NlY3Rpb25FZGl0b3InO1xuXG4vLyBNb2NrIGZldGNoIGdsb2JhbGx5XG5nbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCk7XG5cbi8vIE1vY2sgd2luZG93LmNvbmZpcm1cbmNvbnN0IG9yaWdpbmFsQ29uZmlybSA9IHdpbmRvdy5jb25maXJtO1xuXG4vLyBNb2NrIHNjcm9sbEludG9WaWV3XG5FbGVtZW50LnByb3RvdHlwZS5zY3JvbGxJbnRvVmlldyA9IGplc3QuZm4oKTtcblxuLy8gTW9jayBwaG90byBkYXRhXG5jb25zdCBtb2NrUGhvdG9zID0gW1xuICB7XG4gICAgaWQ6ICdwaG90by0xJyxcbiAgICBwaG90b191cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Bob3RvMS5qcGcnLFxuICAgIGNhcHRpb246ICdCZWFjaCBzdW5zZXQnLFxuICAgIGFsdF90ZXh0OiAnQmVhdXRpZnVsIHN1bnNldCBhdCB0aGUgYmVhY2gnLFxuICAgIG1vZGVyYXRpb25fc3RhdHVzOiAnYXBwcm92ZWQnIGFzIGNvbnN0LFxuICAgIGNyZWF0ZWRfYXQ6ICcyMDI1LTAxLTAxVDAwOjAwOjAwWicsXG4gIH0sXG4gIHtcbiAgICBpZDogJ3Bob3RvLTInLFxuICAgIHBob3RvX3VybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vcGhvdG8yLmpwZycsXG4gICAgY2FwdGlvbjogJ1dlZGRpbmcgY2VyZW1vbnknLFxuICAgIGFsdF90ZXh0OiAnQ2VyZW1vbnkgYXQgdGhlIHZlbnVlJyxcbiAgICBtb2RlcmF0aW9uX3N0YXR1czogJ2FwcHJvdmVkJyBhcyBjb25zdCxcbiAgICBjcmVhdGVkX2F0OiAnMjAyNS0wMS0wMlQwMDowMDowMFonLFxuICB9LFxuICB7XG4gICAgaWQ6ICdwaG90by0zJyxcbiAgICBwaG90b191cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Bob3RvMy5qcGcnLFxuICAgIGNhcHRpb246ICdSZWNlcHRpb24gZGlubmVyJyxcbiAgICBhbHRfdGV4dDogJ0Rpbm5lciByZWNlcHRpb24nLFxuICAgIG1vZGVyYXRpb25fc3RhdHVzOiAnYXBwcm92ZWQnIGFzIGNvbnN0LFxuICAgIGNyZWF0ZWRfYXQ6ICcyMDI1LTAxLTAzVDAwOjAwOjAwWicsXG4gIH0sXG5dO1xuXG4vLyBNb2NrIHNlY3Rpb24gd2l0aCBwaG90byBnYWxsZXJ5IGNvbHVtblxuY29uc3QgbW9ja1Bob3RvU2VjdGlvbiA9IHtcbiAgaWQ6ICdzZWN0aW9uLTEnLFxuICBwYWdlX3R5cGU6ICdjdXN0b20nIGFzIGNvbnN0LFxuICBwYWdlX2lkOiAncGFnZS0xJyxcbiAgZGlzcGxheV9vcmRlcjogMCxcbiAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgY29sdW1uczogW1xuICAgIHtcbiAgICAgIGlkOiAnY29sdW1uLTEnLFxuICAgICAgc2VjdGlvbl9pZDogJ3NlY3Rpb24tMScsXG4gICAgICBjb2x1bW5fbnVtYmVyOiAxIGFzIGNvbnN0LFxuICAgICAgY29udGVudF90eXBlOiAncGhvdG9fZ2FsbGVyeScgYXMgY29uc3QsXG4gICAgICBjb250ZW50X2RhdGE6IHsgcGhvdG9faWRzOiBbXSB9LFxuICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgfSxcbiAgXSxcbn07XG5cbmNvbnN0IG1vY2tQaG90b1NlY3Rpb25XaXRoUGhvdG9zID0ge1xuICAuLi5tb2NrUGhvdG9TZWN0aW9uLFxuICBjb2x1bW5zOiBbXG4gICAge1xuICAgICAgLi4ubW9ja1Bob3RvU2VjdGlvbi5jb2x1bW5zWzBdLFxuICAgICAgY29udGVudF9kYXRhOiB7IHBob3RvX2lkczogWydwaG90by0xJywgJ3Bob3RvLTInXSB9LFxuICAgIH0sXG4gIF0sXG59O1xuXG5kZXNjcmliZSgnU2VjdGlvbkVkaXRvciAtIFBob3RvIEludGVncmF0aW9uJywgKCkgPT4ge1xuICBsZXQgbW9ja09uU2F2ZTogamVzdC5Nb2NrO1xuICBsZXQgbW9ja09uQ2xvc2U6IGplc3QuTW9jaztcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBtb2NrT25TYXZlID0gamVzdC5mbigpO1xuICAgIG1vY2tPbkNsb3NlID0gamVzdC5mbigpO1xuICAgIHdpbmRvdy5jb25maXJtID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcbiAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc2V0KCk7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgY2xlYW51cCgpO1xuICAgIHdpbmRvdy5jb25maXJtID0gb3JpZ2luYWxDb25maXJtO1xuICB9KTtcblxuICBjb25zdCBtb2NrRmV0Y2hTdWNjZXNzID0gKGRhdGE6IGFueSkgPT4ge1xuICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgb2s6IHRydWUsXG4gICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhIH0pLFxuICAgIH0pO1xuICB9O1xuXG4gIGRlc2NyaWJlKCdQaG90byBTZWxlY3Rpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IFBob3RvUGlja2VyIGNvbXBvbmVudCBmb3IgcGhvdG9fZ2FsbGVyeSBjb2x1bW4gdHlwZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tQaG90b1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBFZGl0IGJ1dHRvbiB0byBleHBhbmQgc2VjdGlvblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2VkaXQvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAvLyBQaG90b1BpY2tlciBzaG91bGQgcmVuZGVyIHRoZSBcIkFkZCBQaG90b3MgZnJvbSBHYWxsZXJ5XCIgYnV0dG9uXG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcrIEFkZCBQaG90b3MgZnJvbSBHYWxsZXJ5JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgb3BlbiBwaG90byBwaWNrZXIgbW9kYWwgd2hlbiBhZGQgcGhvdG9zIGJ1dHRvbiBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1Bob3RvU2VjdGlvbl0pO1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyh7IHBob3RvczogbW9ja1Bob3RvcywgdG90YWw6IDMgfSk7IC8vIFBob3RvcyBBUEkgcmVzcG9uc2VcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBFZGl0IGJ1dHRvbiB0byBleHBhbmQgc2VjdGlvblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2VkaXQvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCcrIEFkZCBQaG90b3MgZnJvbSBHYWxsZXJ5JykpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1NlbGVjdCBQaG90b3MnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmZXRjaCBwaG90b3Mgd2hlbiBwaG90byBwaWNrZXIgb3BlbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrUGhvdG9TZWN0aW9uXSk7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKHsgcGhvdG9zOiBtb2NrUGhvdG9zLCB0b3RhbDogMyB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBFZGl0IGJ1dHRvbiB0byBleHBhbmQgc2VjdGlvblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2VkaXQvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCcrIEFkZCBQaG90b3MgZnJvbSBHYWxsZXJ5JykpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJy9hcGkvYWRtaW4vcGhvdG9zJylcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgc2VjdGlvbiB3aGVuIHBob3RvIGlzIHNlbGVjdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1Bob3RvU2VjdGlvbl0pO1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyh7IHBob3RvczogbW9ja1Bob3RvcywgdG90YWw6IDMgfSk7IC8vIFBob3RvcyBBUElcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MobW9ja1Bob3RvU2VjdGlvbldpdGhQaG90b3MpOyAvLyBVcGRhdGUgc2VjdGlvbiBBUElcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBFZGl0IGJ1dHRvbiB0byBleHBhbmQgc2VjdGlvblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2VkaXQvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCcrIEFkZCBQaG90b3MgZnJvbSBHYWxsZXJ5JykpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUFsdFRleHQoJ0JlYXV0aWZ1bCBzdW5zZXQgYXQgdGhlIGJlYWNoJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2VsZWN0IGEgcGhvdG9cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlBbHRUZXh0KCdCZWF1dGlmdWwgc3Vuc2V0IGF0IHRoZSBiZWFjaCcpKTtcblxuICAgICAgLy8gQ2xvc2UgdGhlIG1vZGFsXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnRG9uZScpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCcvYXBpL2FkbWluL3NlY3Rpb25zL3NlY3Rpb24tMScpLFxuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICBib2R5OiBleHBlY3Quc3RyaW5nQ29udGFpbmluZygncGhvdG9faWRzJyksXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwYXNzIGNvcnJlY3QgcGFnZVR5cGUgdG8gUGhvdG9QaWNrZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrUGhvdG9TZWN0aW9uXSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImV2ZW50XCJcbiAgICAgICAgICBwYWdlSWQ9XCJldmVudC0xMjNcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBFZGl0IGJ1dHRvbiB0byBleHBhbmQgc2VjdGlvblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2VkaXQvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAvLyBUaGUgUGhvdG9QaWNrZXIgc2hvdWxkIGJlIHJlbmRlcmVkIHdpdGggdGhlIGNvcnJlY3QgcGFnZVR5cGVcbiAgICAgICAgLy8gVGhpcyBpcyB2ZXJpZmllZCBieSBjaGVja2luZyB0aGF0IHRoZSBjb21wb25lbnQgcmVuZGVyc1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHBhc3MgY29ycmVjdCBwYWdlSWQgdG8gUGhvdG9QaWNrZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrUGhvdG9TZWN0aW9uXSk7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKHsgcGhvdG9zOiBtb2NrUGhvdG9zLCB0b3RhbDogMyB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiYWN0aXZpdHlcIlxuICAgICAgICAgIHBhZ2VJZD1cImFjdGl2aXR5LTQ1NlwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIEVkaXQgYnV0dG9uIHRvIGV4cGFuZCBzZWN0aW9uXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZWRpdC9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcrIEFkZCBQaG90b3MgZnJvbSBHYWxsZXJ5JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJysgQWRkIFBob3RvcyBmcm9tIEdhbGxlcnknKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygncGFnZV9pZD1hY3Rpdml0eS00NTYnKVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc2FibGUgcGhvdG8gcGlja2VyIHdoZW4gc2VjdGlvbiBpcyBzYXZpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrUGhvdG9TZWN0aW9uXSk7XG4gICAgICBcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgRWRpdCBidXR0b24gdG8gZXhwYW5kIHNlY3Rpb25cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9lZGl0L2kgfSkpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJysgQWRkIFBob3RvcyBmcm9tIEdhbGxlcnknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBNb2NrIGEgZGVsYXllZCByZXNwb25zZSBmb3Igc2VjdGlvbiB1cGRhdGVcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb25PbmNlKCgpID0+XG4gICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dCgoKSA9PiByZXNvbHZlKHtcbiAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrUGhvdG9TZWN0aW9uIH0pLFxuICAgICAgICB9KSwgMTAwKSlcbiAgICAgICk7XG5cbiAgICAgIC8vIFRyaWdnZXIgYSBzYXZlIG9wZXJhdGlvbiBieSB0b2dnbGluZyBsYXlvdXRcbiAgICAgIGNvbnN0IGxheW91dFNlbGVjdCA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2NvbWJvYm94JylbMF07IC8vIEZpcnN0IHNlbGVjdCBpcyBsYXlvdXRcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UobGF5b3V0U2VsZWN0LCB7IHRhcmdldDogeyB2YWx1ZTogJ3R3by1jb2x1bW4nIH0gfSk7XG5cbiAgICAgIC8vIFBob3RvIHBpY2tlciBidXR0b24gc2hvdWxkIGJlIGRpc2FibGVkIGR1cmluZyBzYXZlXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgYWRkUGhvdG9zQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpO1xuICAgICAgICBleHBlY3QoYWRkUGhvdG9zQnV0dG9uKS50b0JlRGlzYWJsZWQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTXVsdGlwbGUgUGhvdG8gSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHNlbGVjdGVkIHBob3RvcyBjb3VudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tQaG90b1NlY3Rpb25XaXRoUGhvdG9zXSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgRWRpdCBidXR0b24gdG8gZXhwYW5kIHNlY3Rpb25cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9lZGl0L2kgfSkpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1NlbGVjdGVkIFBob3RvcyAoMiknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGFsbCBzZWxlY3RlZCBwaG90b3MgaW4gcHJldmlldyBncmlkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1Bob3RvU2VjdGlvbldpdGhQaG90b3NdKTtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoeyBwaG90b3M6IG1vY2tQaG90b3MsIHRvdGFsOiAzIH0pOyAvLyBGb3IgUGhvdG9QaWNrZXJcbiAgICAgIC8vIE1vY2sgaW5kaXZpZHVhbCBwaG90byBmZXRjaGVzIGZvciBzZWxlY3RlZCBwaG90b3NcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MobW9ja1Bob3Rvc1swXSk7IC8vIHBob3RvLTFcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MobW9ja1Bob3Rvc1sxXSk7IC8vIHBob3RvLTJcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBFZGl0IGJ1dHRvbiB0byBleHBhbmQgc2VjdGlvblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2VkaXQvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU2VsZWN0ZWQgUGhvdG9zICgyKScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFZlcmlmeSB0aGUgcGhvdG8gZ3JpZCBjb250YWluZXIgZXhpc3RzXG4gICAgICBjb25zdCBwaG90b0dyaWQgPSBzY3JlZW4uZ2V0QnlUZXh0KCdTZWxlY3RlZCBQaG90b3MgKDIpJykuY2xvc2VzdCgnLmJvcmRlcicpO1xuICAgICAgZXhwZWN0KHBob3RvR3JpZCkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIFxuICAgICAgLy8gVGhlIGdyaWQgc2hvdWxkIGhhdmUgdGhlIGNvcnJlY3QgY2xhc3NcbiAgICAgIGNvbnN0IGdyaWRFbGVtZW50ID0gcGhvdG9HcmlkPy5xdWVyeVNlbGVjdG9yKCcuZ3JpZC5ncmlkLWNvbHMtNCcpO1xuICAgICAgZXhwZWN0KGdyaWRFbGVtZW50KS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBzZWxlY3RpbmcgbXVsdGlwbGUgcGhvdG9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1Bob3RvU2VjdGlvbl0pO1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyh7IHBob3RvczogbW9ja1Bob3RvcywgdG90YWw6IDMgfSk7IC8vIFBob3RvcyBBUElcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MobW9ja1Bob3RvU2VjdGlvbik7IC8vIEZpcnN0IHVwZGF0ZSB3aXRoIDEgcGhvdG9cbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MobW9ja1Bob3RvU2VjdGlvbldpdGhQaG90b3MpOyAvLyBTZWNvbmQgdXBkYXRlIHdpdGggMiBwaG90b3NcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBFZGl0IGJ1dHRvbiB0byBleHBhbmQgc2VjdGlvblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2VkaXQvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnKyBBZGQgUGhvdG9zIGZyb20gR2FsbGVyeScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCcrIEFkZCBQaG90b3MgZnJvbSBHYWxsZXJ5JykpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUFsdFRleHQoJ0JlYXV0aWZ1bCBzdW5zZXQgYXQgdGhlIGJlYWNoJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2VsZWN0IGZpcnN0IHBob3RvXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5QWx0VGV4dCgnQmVhdXRpZnVsIHN1bnNldCBhdCB0aGUgYmVhY2gnKSk7XG4gICAgICBcbiAgICAgIC8vIFdhaXQgZm9yIGZpcnN0IHVwZGF0ZVxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZpcnN0VXBkYXRlQ2FsbCA9IChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgICAgY2FsbCA9PiBjYWxsWzBdLmluY2x1ZGVzKCcvYXBpL2FkbWluL3NlY3Rpb25zL3NlY3Rpb24tMScpICYmIGNhbGxbMV0/Lm1ldGhvZCA9PT0gJ1BVVCdcbiAgICAgICAgKTtcbiAgICAgICAgZXhwZWN0KGZpcnN0VXBkYXRlQ2FsbCkudG9CZURlZmluZWQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTZWxlY3Qgc2Vjb25kIHBob3RvXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5QWx0VGV4dCgnQ2VyZW1vbnkgYXQgdGhlIHZlbnVlJykpO1xuXG4gICAgICAvLyBDbG9zZSBtb2RhbFxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJ0RvbmUnKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAvLyBTaG91bGQgaGF2ZSBtYWRlIGF0IGxlYXN0IDIgdXBkYXRlIGNhbGxzIChvbmUgZm9yIGVhY2ggcGhvdG8gc2VsZWN0aW9uKVxuICAgICAgICBjb25zdCB1cGRhdGVDYWxscyA9IChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzLmZpbHRlcihcbiAgICAgICAgICBjYWxsID0+IGNhbGxbMF0uaW5jbHVkZXMoJy9hcGkvYWRtaW4vc2VjdGlvbnMvc2VjdGlvbi0xJykgJiYgY2FsbFsxXT8ubWV0aG9kID09PSAnUFVUJ1xuICAgICAgICApO1xuICAgICAgICBleHBlY3QodXBkYXRlQ2FsbHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDEpO1xuICAgICAgICBcbiAgICAgICAgLy8gVGhlIGxhc3QgdXBkYXRlIHNob3VsZCBjb250YWluIGJvdGggcGhvdG9zXG4gICAgICAgIGNvbnN0IGxhc3RVcGRhdGVDYWxsID0gdXBkYXRlQ2FsbHNbdXBkYXRlQ2FsbHMubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChsYXN0VXBkYXRlQ2FsbCkge1xuICAgICAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKGxhc3RVcGRhdGVDYWxsWzFdLmJvZHkpO1xuICAgICAgICAgIC8vIFNob3VsZCBoYXZlIGF0IGxlYXN0IG9uZSBwaG90byBzZWxlY3RlZFxuICAgICAgICAgIGV4cGVjdChib2R5LmNvbHVtbnNbMF0uY29udGVudF9kYXRhLnBob3RvX2lkcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFsbG93IHJlbW92aW5nIGluZGl2aWR1YWwgcGhvdG9zIGZyb20gc2VsZWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1Bob3RvU2VjdGlvbldpdGhQaG90b3NdKTtcbiAgICAgIC8vIE1vY2sgaW5kaXZpZHVhbCBwaG90byBmZXRjaGVzIGZvciBzZWxlY3RlZCBwaG90b3NcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MobW9ja1Bob3Rvc1swXSk7IC8vIHBob3RvLTFcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MobW9ja1Bob3Rvc1sxXSk7IC8vIHBob3RvLTJcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MobW9ja1Bob3RvU2VjdGlvbik7IC8vIFVwZGF0ZSB3aXRoIDEgcGhvdG8gYWZ0ZXIgcmVtb3ZhbFxuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIEVkaXQgYnV0dG9uIHRvIGV4cGFuZCBzZWN0aW9uXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZWRpdC9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTZWxlY3RlZCBQaG90b3MgKDIpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gV2FpdCBmb3IgcGhvdG9zIHRvIGJlIGZldGNoZWQgYW5kIGRpc3BsYXllZFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlbW92ZUJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlMYWJlbFRleHQoJ1JlbW92ZSBwaG90bycpO1xuICAgICAgICBleHBlY3QocmVtb3ZlQnV0dG9ucy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHJlbW92ZUJ1dHRvbnNbMF0pO1xuICAgICAgfSwgeyB0aW1lb3V0OiAzMDAwIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJy9hcGkvYWRtaW4vc2VjdGlvbnMvc2VjdGlvbi0xJyksXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFsbG93IGNsZWFyaW5nIGFsbCBzZWxlY3RlZCBwaG90b3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrUGhvdG9TZWN0aW9uV2l0aFBob3Rvc10pO1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyhtb2NrUGhvdG9TZWN0aW9uKTsgLy8gVXBkYXRlIHdpdGggMCBwaG90b3NcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBFZGl0IGJ1dHRvbiB0byBleHBhbmQgc2VjdGlvblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2VkaXQvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU2VsZWN0ZWQgUGhvdG9zICgyKScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIFwiQ2xlYXIgQWxsXCIgYnV0dG9uXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnQ2xlYXIgQWxsJykpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgdXBkYXRlQ2FsbCA9IChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgICAgY2FsbCA9PiBjYWxsWzBdLmluY2x1ZGVzKCcvYXBpL2FkbWluL3NlY3Rpb25zL3NlY3Rpb24tMScpICYmIGNhbGxbMV0/Lm1ldGhvZCA9PT0gJ1BVVCdcbiAgICAgICAgKTtcbiAgICAgICAgZXhwZWN0KHVwZGF0ZUNhbGwpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHVwZGF0ZUNhbGxbMV0uYm9keSk7XG4gICAgICAgIGV4cGVjdChib2R5LmNvbHVtbnNbMF0uY29udGVudF9kYXRhLnBob3RvX2lkcykudG9IYXZlTGVuZ3RoKDApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG1haW50YWluIHBob3RvIG9yZGVyIGluIHNlbGVjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG9yZGVyZWRQaG90b1NlY3Rpb24gPSB7XG4gICAgICAgIC4uLm1vY2tQaG90b1NlY3Rpb24sXG4gICAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICAuLi5tb2NrUGhvdG9TZWN0aW9uLmNvbHVtbnNbMF0sXG4gICAgICAgICAgICBjb250ZW50X2RhdGE6IHsgcGhvdG9faWRzOiBbJ3Bob3RvLTMnLCAncGhvdG8tMScsICdwaG90by0yJ10gfSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfTtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW29yZGVyZWRQaG90b1NlY3Rpb25dKTtcbiAgICAgIC8vIE1vY2sgaW5kaXZpZHVhbCBwaG90byBmZXRjaGVzIGluIG9yZGVyXG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKG1vY2tQaG90b3NbMl0pOyAvLyBwaG90by0zXG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKG1vY2tQaG90b3NbMF0pOyAvLyBwaG90by0xXG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKG1vY2tQaG90b3NbMV0pOyAvLyBwaG90by0yXG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgRWRpdCBidXR0b24gdG8gZXhwYW5kIHNlY3Rpb25cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9lZGl0L2kgfSkpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1NlbGVjdGVkIFBob3RvcyAoMyknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBXYWl0IGZvciBwaG90b3MgdG8gYmUgZmV0Y2hlZCBhbmQgZGlzcGxheWVkXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgcGhvdG9HcmlkID0gc2NyZWVuLmdldEJ5VGV4dCgnU2VsZWN0ZWQgUGhvdG9zICgzKScpLmNsb3Nlc3QoJy5ib3JkZXInKTtcbiAgICAgICAgY29uc3QgaW1hZ2VzID0gcGhvdG9HcmlkPy5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKTtcbiAgICAgICAgZXhwZWN0KGltYWdlcz8ubGVuZ3RoKS50b0JlKDMpO1xuICAgICAgfSwgeyB0aW1lb3V0OiAzMDAwIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgcGhvdG8gc2VsZWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1Bob3RvU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIEVkaXQgYnV0dG9uIHRvIGV4cGFuZCBzZWN0aW9uXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZWRpdC9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIC8vIFNob3VsZCBub3Qgc2hvdyBcIlNlbGVjdGVkIFBob3Rvc1wiIHNlY3Rpb24gd2hlbiBubyBwaG90b3Mgc2VsZWN0ZWRcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgvU2VsZWN0ZWQgUGhvdG9zLykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gU2hvdWxkIHNob3cgdGhlIGFkZCBwaG90b3MgYnV0dG9uXG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcrIEFkZCBQaG90b3MgZnJvbSBHYWxsZXJ5JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Bob3RvIFByZXZpZXcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHBob3RvIHRodW1ibmFpbHMgaW4gc2VsZWN0ZWQgcGhvdG9zIHNlY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrUGhvdG9TZWN0aW9uV2l0aFBob3Rvc10pO1xuICAgICAgLy8gTW9jayBpbmRpdmlkdWFsIHBob3RvIGZldGNoZXMgZm9yIHNlbGVjdGVkIHBob3Rvc1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyhtb2NrUGhvdG9zWzBdKTsgLy8gcGhvdG8tMVxuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyhtb2NrUGhvdG9zWzFdKTsgLy8gcGhvdG8tMlxuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIEVkaXQgYnV0dG9uIHRvIGV4cGFuZCBzZWN0aW9uXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZWRpdC9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTZWxlY3RlZCBQaG90b3MgKDIpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gV2FpdCBmb3IgcGhvdG9zIHRvIGJlIGZldGNoZWQgYW5kIGRpc3BsYXllZFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IHBob3RvR3JpZCA9IHNjcmVlbi5nZXRCeVRleHQoJ1NlbGVjdGVkIFBob3RvcyAoMiknKS5jbG9zZXN0KCcuYm9yZGVyJyk7XG4gICAgICAgIGNvbnN0IGltYWdlcyA9IHBob3RvR3JpZD8ucXVlcnlTZWxlY3RvckFsbCgnaW1nJyk7XG4gICAgICAgIGV4cGVjdChpbWFnZXM/Lmxlbmd0aCkudG9CZSgyKTtcbiAgICAgIH0sIHsgdGltZW91dDogMzAwMCB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBwaG90byBjYXB0aW9ucyBpbiBwcmV2aWV3JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1Bob3RvU2VjdGlvbldpdGhQaG90b3NdKTtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoeyBwaG90b3M6IG1vY2tQaG90b3MsIHRvdGFsOiAzIH0pOyAvLyBGb3IgUGhvdG9QaWNrZXIgdG8gcmVzb2x2ZSBwaG90byBkZXRhaWxzXG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgRWRpdCBidXR0b24gdG8gZXhwYW5kIHNlY3Rpb25cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9lZGl0L2kgfSkpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1NlbGVjdGVkIFBob3RvcyAoMiknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDYXB0aW9ucyBzaG91bGQgYmUgdmlzaWJsZSBpbiB0aGUgcHJldmlldyBncmlkXG4gICAgICBjb25zdCBwaG90b0dyaWQgPSBzY3JlZW4uZ2V0QnlUZXh0KCdTZWxlY3RlZCBQaG90b3MgKDIpJykuY2xvc2VzdCgnLmJvcmRlcicpO1xuICAgICAgZXhwZWN0KHBob3RvR3JpZCkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2hvdyBwaG90b3MgaW4gZ3Vlc3QgcHJldmlldyBtb2RhbCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tQaG90b1NlY3Rpb25XaXRoUGhvdG9zXSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gT3BlbiBwcmV2aWV3IG1vZGFsIGJ5IGNsaWNraW5nIEd1ZXN0IFByZXZpZXcgYnV0dG9uXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnR3Vlc3QgUHJldmlldycpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIC8vIFByZXZpZXcgc2hvdWxkIHNob3cgcGhvdG8gcGxhY2Vob2xkZXJzXG4gICAgICAgIGNvbnN0IHByZXZpZXdTZWN0aW9uID0gc2NyZWVuLmdldEJ5VGV4dCgnR3Vlc3QgUHJldmlldycpLmNsb3Nlc3QoJy5ib3JkZXInKTtcbiAgICAgICAgZXhwZWN0KHByZXZpZXdTZWN0aW9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gVGhlIHByZXZpZXcgd2lsbCBzaG93IHBob3RvIGNvbnRlbnQgb3IgbG9hZGluZyBzdGF0ZVxuICAgICAgICBleHBlY3QocHJldmlld1NlY3Rpb24/LnRleHRDb250ZW50KS50b0NvbnRhaW4oJ3Bob3RvJyk7XG4gICAgICB9LCB7IHRpbWVvdXQ6IDMwMDAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNob3cgXCJObyBwaG90b3Mgc2VsZWN0ZWRcIiBtZXNzYWdlIGluIHByZXZpZXcgd2hlbiBlbXB0eScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tQaG90b1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBPcGVuIHByZXZpZXcgYnkgY2xpY2tpbmcgR3Vlc3QgUHJldmlldyBidXR0b25cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCdHdWVzdCBQcmV2aWV3JykpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgLy8gU2hvdWxkIHNob3cgZW1wdHkgc3RhdGUgbWVzc2FnZVxuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnTm8gcGhvdG9zIHNlbGVjdGVkJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBwaG90byBncmlkIGxheW91dCBpbiBwcmV2aWV3JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbXVsdGlQaG90b1NlY3Rpb24gPSB7XG4gICAgICAgIC4uLm1vY2tQaG90b1NlY3Rpb24sXG4gICAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICAuLi5tb2NrUGhvdG9TZWN0aW9uLmNvbHVtbnNbMF0sXG4gICAgICAgICAgICBjb250ZW50X2RhdGE6IHsgcGhvdG9faWRzOiBbJ3Bob3RvLTEnLCAncGhvdG8tMicsICdwaG90by0zJ10gfSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfTtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW211bHRpUGhvdG9TZWN0aW9uXSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gT3BlbiBwcmV2aWV3IGJ5IGNsaWNraW5nIEd1ZXN0IFByZXZpZXcgYnV0dG9uXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnR3Vlc3QgUHJldmlldycpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIC8vIFByZXZpZXcgc2hvdWxkIHVzZSBncmlkIGxheW91dCBmb3IgcGhvdG9zXG4gICAgICAgIGNvbnN0IHByZXZpZXdTZWN0aW9uID0gc2NyZWVuLmdldEJ5VGV4dCgnR3Vlc3QgUHJldmlldycpLmNsb3Nlc3QoJy5ib3JkZXInKTtcbiAgICAgICAgY29uc3QgcGhvdG9HcmlkID0gcHJldmlld1NlY3Rpb24/LnF1ZXJ5U2VsZWN0b3IoJy5ncmlkLmdyaWQtY29scy0yJyk7XG4gICAgICAgIGV4cGVjdChwaG90b0dyaWQpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2hvdyBob3ZlciBlZmZlY3RzIG9uIHBob3RvIHRodW1ibmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrUGhvdG9TZWN0aW9uV2l0aFBob3Rvc10pO1xuICAgICAgLy8gTW9jayBpbmRpdmlkdWFsIHBob3RvIGZldGNoZXMgZm9yIHNlbGVjdGVkIHBob3Rvc1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyhtb2NrUGhvdG9zWzBdKTsgLy8gcGhvdG8tMVxuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyhtb2NrUGhvdG9zWzFdKTsgLy8gcGhvdG8tMlxuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIEVkaXQgYnV0dG9uIHRvIGV4cGFuZCBzZWN0aW9uXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZWRpdC9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTZWxlY3RlZCBQaG90b3MgKDIpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gV2FpdCBmb3IgcGhvdG9zIHRvIGJlIGZldGNoZWQgYW5kIGRpc3BsYXllZFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IHBob3RvR3JpZCA9IHNjcmVlbi5nZXRCeVRleHQoJ1NlbGVjdGVkIFBob3RvcyAoMiknKS5jbG9zZXN0KCcuYm9yZGVyJyk7XG4gICAgICAgIGNvbnN0IHBob3RvQ29udGFpbmVycyA9IHBob3RvR3JpZD8ucXVlcnlTZWxlY3RvckFsbCgnLmdyb3VwJyk7XG4gICAgICAgIGV4cGVjdChwaG90b0NvbnRhaW5lcnM/Lmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgfSwgeyB0aW1lb3V0OiAzMDAwIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHJlbW92ZSBidXR0b24gb24gaG92ZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrUGhvdG9TZWN0aW9uV2l0aFBob3Rvc10pO1xuICAgICAgLy8gTW9jayBpbmRpdmlkdWFsIHBob3RvIGZldGNoZXMgZm9yIHNlbGVjdGVkIHBob3Rvc1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyhtb2NrUGhvdG9zWzBdKTsgLy8gcGhvdG8tMVxuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyhtb2NrUGhvdG9zWzFdKTsgLy8gcGhvdG8tMlxuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIEVkaXQgYnV0dG9uIHRvIGV4cGFuZCBzZWN0aW9uXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZWRpdC9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTZWxlY3RlZCBQaG90b3MgKDIpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gV2FpdCBmb3IgcGhvdG9zIHRvIGJlIGZldGNoZWQgYW5kIGRpc3BsYXllZFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlbW92ZUJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlMYWJlbFRleHQoJ1JlbW92ZSBwaG90bycpO1xuICAgICAgICBleHBlY3QocmVtb3ZlQnV0dG9ucy5sZW5ndGgpLnRvQmUoMik7XG4gICAgICAgIFxuICAgICAgICAvLyBCdXR0b25zIHNob3VsZCBoYXZlIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwIGNsYXNzXG4gICAgICAgIHJlbW92ZUJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgICAgIGV4cGVjdChidXR0b24uY2xhc3NOYW1lKS50b0NvbnRhaW4oJ2dyb3VwLWhvdmVyOm9wYWNpdHktMTAwJyk7XG4gICAgICAgIH0pO1xuICAgICAgfSwgeyB0aW1lb3V0OiAzMDAwIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29sdW1uIFR5cGUgQ2hhbmdlIHRvIFBob3RvIEdhbGxlcnknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIGVtcHR5IHBob3RvX2lkcyB3aGVuIGNoYW5naW5nIHRvIHBob3RvX2dhbGxlcnkgdHlwZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJpY2hUZXh0U2VjdGlvbiA9IHtcbiAgICAgICAgLi4ubW9ja1Bob3RvU2VjdGlvbixcbiAgICAgICAgY29sdW1uczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIC4uLm1vY2tQaG90b1NlY3Rpb24uY29sdW1uc1swXSxcbiAgICAgICAgICAgIGNvbnRlbnRfdHlwZTogJ3JpY2hfdGV4dCcgYXMgY29uc3QsXG4gICAgICAgICAgICBjb250ZW50X2RhdGE6IHsgaHRtbDogJzxwPlNvbWUgdGV4dDwvcD4nIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH07XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFtyaWNoVGV4dFNlY3Rpb25dKTtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MobW9ja1Bob3RvU2VjdGlvbik7IC8vIFVwZGF0ZWQgdG8gcGhvdG9fZ2FsbGVyeVxuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIEVkaXQgYnV0dG9uIHRvIGV4cGFuZCBzZWN0aW9uXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZWRpdC9pIH0pKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIC8vIEZpbmQgdGhlIGNvbHVtbiB0eXBlIHNlbGVjdG9yIChzZWNvbmQgY29tYm9ib3ggLSBmaXJzdCBpcyBsYXlvdXQgc2VsZWN0b3IpXG4gICAgICAgIGNvbnN0IHNlbGVjdHMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdjb21ib2JveCcpO1xuICAgICAgICBleHBlY3Qoc2VsZWN0cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigxKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDaGFuZ2UgY29sdW1uIHR5cGUgdG8gcGhvdG9fZ2FsbGVyeSAoc2Vjb25kIGNvbWJvYm94KVxuICAgICAgY29uc3Qgc2VsZWN0cyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2NvbWJvYm94Jyk7XG4gICAgICBjb25zdCBjb2x1bW5UeXBlU2VsZWN0ID0gc2VsZWN0c1sxXTsgLy8gU2Vjb25kIHNlbGVjdCBpcyBjb2x1bW4gdHlwZVxuICAgICAgZmlyZUV2ZW50LmNoYW5nZShjb2x1bW5UeXBlU2VsZWN0LCB7IHRhcmdldDogeyB2YWx1ZTogJ3Bob3RvX2dhbGxlcnknIH0gfSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCB1cGRhdGVDYWxsID0gKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgICBjYWxsID0+IGNhbGxbMF0uaW5jbHVkZXMoJy9hcGkvYWRtaW4vc2VjdGlvbnMvc2VjdGlvbi0xJykgJiYgY2FsbFsxXT8ubWV0aG9kID09PSAnUFVUJ1xuICAgICAgICApO1xuICAgICAgICBleHBlY3QodXBkYXRlQ2FsbCkudG9CZURlZmluZWQoKTtcbiAgICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UodXBkYXRlQ2FsbFsxXS5ib2R5KTtcbiAgICAgICAgZXhwZWN0KGJvZHkuY29sdW1uc1swXS5jb250ZW50X3R5cGUpLnRvQmUoJ3Bob3RvX2dhbGxlcnknKTtcbiAgICAgICAgZXhwZWN0KGJvZHkuY29sdW1uc1swXS5jb250ZW50X2RhdGEpLnRvRXF1YWwoeyBwaG90b19pZHM6IFtdLCBkaXNwbGF5X21vZGU6ICdnYWxsZXJ5JyB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IFBob3RvUGlja2VyIGFmdGVyIGNoYW5naW5nIGNvbHVtbiB0eXBlIHRvIHBob3RvX2dhbGxlcnknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByaWNoVGV4dFNlY3Rpb24gPSB7XG4gICAgICAgIC4uLm1vY2tQaG90b1NlY3Rpb24sXG4gICAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICAuLi5tb2NrUGhvdG9TZWN0aW9uLmNvbHVtbnNbMF0sXG4gICAgICAgICAgICBjb250ZW50X3R5cGU6ICdyaWNoX3RleHQnIGFzIGNvbnN0LFxuICAgICAgICAgICAgY29udGVudF9kYXRhOiB7IGh0bWw6ICc8cD5Tb21lIHRleHQ8L3A+JyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbcmljaFRleHRTZWN0aW9uXSk7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKG1vY2tQaG90b1NlY3Rpb24pOyAvLyBVcGRhdGVkIHRvIHBob3RvX2dhbGxlcnlcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBFZGl0IGJ1dHRvbiB0byBleHBhbmQgc2VjdGlvblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2VkaXQvaSB9KSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAvLyBGaW5kIHRoZSBjb2x1bW4gdHlwZSBzZWxlY3RvciAoc2Vjb25kIGNvbWJvYm94KVxuICAgICAgICBjb25zdCBzZWxlY3RzID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnY29tYm9ib3gnKTtcbiAgICAgICAgZXhwZWN0KHNlbGVjdHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2hhbmdlIGNvbHVtbiB0eXBlIHRvIHBob3RvX2dhbGxlcnkgKHNlY29uZCBjb21ib2JveClcbiAgICAgIGNvbnN0IHNlbGVjdHMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdjb21ib2JveCcpO1xuICAgICAgY29uc3QgY29sdW1uVHlwZVNlbGVjdCA9IHNlbGVjdHNbMV07IC8vIFNlY29uZCBzZWxlY3QgaXMgY29sdW1uIHR5cGVcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoY29sdW1uVHlwZVNlbGVjdCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdwaG90b19nYWxsZXJ5JyB9IH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJysgQWRkIFBob3RvcyBmcm9tIEdhbGxlcnknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImdsb2JhbCIsImZldGNoIiwiamVzdCIsImZuIiwib3JpZ2luYWxDb25maXJtIiwid2luZG93IiwiY29uZmlybSIsIkVsZW1lbnQiLCJwcm90b3R5cGUiLCJzY3JvbGxJbnRvVmlldyIsIm1vY2tQaG90b3MiLCJpZCIsInBob3RvX3VybCIsImNhcHRpb24iLCJhbHRfdGV4dCIsIm1vZGVyYXRpb25fc3RhdHVzIiwiY3JlYXRlZF9hdCIsIm1vY2tQaG90b1NlY3Rpb24iLCJwYWdlX3R5cGUiLCJwYWdlX2lkIiwiZGlzcGxheV9vcmRlciIsInVwZGF0ZWRfYXQiLCJjb2x1bW5zIiwic2VjdGlvbl9pZCIsImNvbHVtbl9udW1iZXIiLCJjb250ZW50X3R5cGUiLCJjb250ZW50X2RhdGEiLCJwaG90b19pZHMiLCJtb2NrUGhvdG9TZWN0aW9uV2l0aFBob3RvcyIsImRlc2NyaWJlIiwibW9ja09uU2F2ZSIsIm1vY2tPbkNsb3NlIiwiYmVmb3JlRWFjaCIsIm1vY2tSZXR1cm5WYWx1ZSIsIm1vY2tSZXNldCIsImNsZWFyQWxsTW9ja3MiLCJhZnRlckVhY2giLCJjbGVhbnVwIiwibW9ja0ZldGNoU3VjY2VzcyIsImRhdGEiLCJtb2NrUmVzb2x2ZWRWYWx1ZU9uY2UiLCJvayIsImpzb24iLCJzdWNjZXNzIiwiaXQiLCJyZW5kZXIiLCJTZWN0aW9uRWRpdG9yIiwicGFnZVR5cGUiLCJwYWdlSWQiLCJvblNhdmUiLCJvbkNsb3NlIiwid2FpdEZvciIsImV4cGVjdCIsInNjcmVlbiIsImdldEJ5VGV4dCIsInRvQmVJblRoZURvY3VtZW50IiwiZmlyZUV2ZW50IiwiY2xpY2siLCJnZXRCeVJvbGUiLCJuYW1lIiwicGhvdG9zIiwidG90YWwiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsInN0cmluZ0NvbnRhaW5pbmciLCJnZXRCeUFsdFRleHQiLCJvYmplY3RDb250YWluaW5nIiwibWV0aG9kIiwiYm9keSIsIm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJsYXlvdXRTZWxlY3QiLCJnZXRBbGxCeVJvbGUiLCJjaGFuZ2UiLCJ0YXJnZXQiLCJ2YWx1ZSIsImFkZFBob3Rvc0J1dHRvbiIsInRvQmVEaXNhYmxlZCIsInBob3RvR3JpZCIsImNsb3Nlc3QiLCJncmlkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJmaXJzdFVwZGF0ZUNhbGwiLCJtb2NrIiwiY2FsbHMiLCJmaW5kIiwiY2FsbCIsImluY2x1ZGVzIiwidG9CZURlZmluZWQiLCJ1cGRhdGVDYWxscyIsImZpbHRlciIsImxlbmd0aCIsInRvQmVHcmVhdGVyVGhhbk9yRXF1YWwiLCJsYXN0VXBkYXRlQ2FsbCIsIkpTT04iLCJwYXJzZSIsInRvQmVHcmVhdGVyVGhhbiIsInJlbW92ZUJ1dHRvbnMiLCJnZXRBbGxCeUxhYmVsVGV4dCIsInRpbWVvdXQiLCJ1cGRhdGVDYWxsIiwidG9IYXZlTGVuZ3RoIiwib3JkZXJlZFBob3RvU2VjdGlvbiIsImltYWdlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0b0JlIiwicXVlcnlCeVRleHQiLCJub3QiLCJwcmV2aWV3U2VjdGlvbiIsInRleHRDb250ZW50IiwidG9Db250YWluIiwibXVsdGlQaG90b1NlY3Rpb24iLCJwaG90b0NvbnRhaW5lcnMiLCJmb3JFYWNoIiwiYnV0dG9uIiwiY2xhc3NOYW1lIiwicmljaFRleHRTZWN0aW9uIiwiaHRtbCIsInNlbGVjdHMiLCJjb2x1bW5UeXBlU2VsZWN0IiwidG9FcXVhbCIsImRpc3BsYXlfbW9kZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7OztDQVNDOzs7Ozt1QkFFMkQ7K0JBQzlCO0FBRTlCLHNCQUFzQjtBQUN0QkEsT0FBT0MsS0FBSyxHQUFHQyxLQUFLQyxFQUFFO0FBRXRCLHNCQUFzQjtBQUN0QixNQUFNQyxrQkFBa0JDLE9BQU9DLE9BQU87QUFFdEMsc0JBQXNCO0FBQ3RCQyxRQUFRQyxTQUFTLENBQUNDLGNBQWMsR0FBR1AsS0FBS0MsRUFBRTtBQUUxQyxrQkFBa0I7QUFDbEIsTUFBTU8sYUFBYTtJQUNqQjtRQUNFQyxJQUFJO1FBQ0pDLFdBQVc7UUFDWEMsU0FBUztRQUNUQyxVQUFVO1FBQ1ZDLG1CQUFtQjtRQUNuQkMsWUFBWTtJQUNkO0lBQ0E7UUFDRUwsSUFBSTtRQUNKQyxXQUFXO1FBQ1hDLFNBQVM7UUFDVEMsVUFBVTtRQUNWQyxtQkFBbUI7UUFDbkJDLFlBQVk7SUFDZDtJQUNBO1FBQ0VMLElBQUk7UUFD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