22be65b5fafb6f55dd35758f0370d029
/**
 * Property-Based Test: Search Result Relevance Ordering
 * 
 * Feature: destination-wedding-platform
 * Property 17: Search Result Relevance Ordering
 * 
 * **Validates: Requirements 16.7**
 * 
 * This property test validates that search results are ordered by relevance:
 * 1. Exact matches appear before partial matches
 * 2. Within the same relevance level, results are sorted alphabetically
 * 3. The ordering is consistent across all entity types
 * 
 * The test generates random search queries and entity names to verify
 * that the ordering algorithm works correctly for all possible inputs.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _fastcheck = /*#__PURE__*/ _interop_require_wildcard(require("fast-check"));
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
/**
 * Sort search results by relevance
 * This implements the same logic as the API route
 */ function sortSearchResults(results, query) {
    // Add index to each result for stable sorting
    const indexedResults = results.map((result, index)=>({
            result,
            index
        }));
    indexedResults.sort((a, b)=>{
        const aExact = a.result.name.toLowerCase() === query.toLowerCase();
        const bExact = b.result.name.toLowerCase() === query.toLowerCase();
        // Exact matches first
        if (aExact && !bExact) return -1;
        if (!aExact && bExact) return 1;
        // Then sort alphabetically with normalization for consistent ordering
        // Trim whitespace for comparison
        const aName = a.result.name.trim().toLowerCase();
        const bName = b.result.name.trim().toLowerCase();
        // Handle empty strings after trimming - sort them to the end
        if (aName === '' && bName !== '') return 1;
        if (aName !== '' && bName === '') return -1;
        // Use simple string comparison for deterministic ordering
        // This is more predictable than localeCompare for special characters
        if (aName < bName) return -1;
        if (aName > bName) return 1;
        // If names are equal after normalization, maintain original order (stable sort)
        return a.index - b.index;
    });
    return indexedResults.map(({ result })=>result);
}
// Arbitraries for generating test data
const searchResultArbitrary = _fastcheck.record({
    id: _fastcheck.uuid(),
    name: _fastcheck.string({
        minLength: 1,
        maxLength: 50
    }),
    type: _fastcheck.constantFrom('event', 'activity', 'accommodation', 'room_type', 'content_page'),
    slug: _fastcheck.option(_fastcheck.string({
        minLength: 1,
        maxLength: 50
    }), {
        nil: undefined
    }),
    status: _fastcheck.option(_fastcheck.constantFrom('active', 'inactive', 'published', 'draft'), {
        nil: undefined
    }),
    preview: _fastcheck.option(_fastcheck.string({
        minLength: 1,
        maxLength: 100
    }), {
        nil: undefined
    })
});
describe('Feature: destination-wedding-platform, Property 17: Search Result Relevance Ordering', ()=>{
    it('should place exact matches before partial matches', ()=>{
        _fastcheck.assert(_fastcheck.property(_fastcheck.string({
            minLength: 1,
            maxLength: 20
        }), _fastcheck.array(searchResultArbitrary, {
            minLength: 2,
            maxLength: 20
        }), (query, results)=>{
            // Ensure we have at least one exact match and one partial match
            if (results.length < 2) return true;
            // Create an exact match
            const exactMatch = {
                ...results[0],
                name: query
            };
            // Create a partial match
            const partialMatch = {
                ...results[1],
                name: `${query} extra`
            };
            const testResults = [
                partialMatch,
                exactMatch,
                ...results.slice(2)
            ];
            const sorted = sortSearchResults(testResults, query);
            // Find positions
            const exactIndex = sorted.findIndex((r)=>r.name.toLowerCase() === query.toLowerCase());
            const partialIndex = sorted.findIndex((r)=>r.name.toLowerCase().includes(query.toLowerCase()) && r.name.toLowerCase() !== query.toLowerCase());
            // Exact match should come before partial match
            if (exactIndex !== -1 && partialIndex !== -1) {
                return exactIndex < partialIndex;
            }
            return true;
        }), {
            numRuns: 100
        });
    });
    it('should sort alphabetically within same relevance level', ()=>{
        _fastcheck.assert(_fastcheck.property(_fastcheck.string({
            minLength: 1,
            maxLength: 20
        }), _fastcheck.array(_fastcheck.string({
            minLength: 1,
            maxLength: 50
        }), {
            minLength: 3,
            maxLength: 10
        }), (query, names)=>{
            // Create results with names that all partially match
            const results = names.map((name, index)=>({
                    id: `id-${index}`,
                    name: `${query} ${name}`,
                    type: 'event'
                }));
            const sorted = sortSearchResults(results, query);
            // All results are partial matches (same relevance level)
            // They should be sorted alphabetically with empty strings at the end
            for(let i = 0; i < sorted.length - 1; i++){
                // Compare using the same normalization as the sorting function
                const current = sorted[i].name.trim().toLowerCase();
                const next = sorted[i + 1].name.trim().toLowerCase();
                // Empty strings should be at the end
                if (current === '' && next !== '') {
                    return false; // Empty string should not come before non-empty
                }
                // For non-empty strings, check alphabetical order (allow equal values)
                if (current !== '' && next !== '' && current > next) {
                    return false;
                }
            }
            return true;
        }), {
            numRuns: 100
        });
    });
    it('should maintain consistent ordering across multiple sorts', ()=>{
        _fastcheck.assert(_fastcheck.property(_fastcheck.string({
            minLength: 1,
            maxLength: 20
        }), _fastcheck.array(searchResultArbitrary, {
            minLength: 5,
            maxLength: 20
        }), (query, results)=>{
            const sorted1 = sortSearchResults([
                ...results
            ], query);
            const sorted2 = sortSearchResults([
                ...results
            ], query);
            // The ordering should be deterministic
            return JSON.stringify(sorted1) === JSON.stringify(sorted2);
        }), {
            numRuns: 100
        });
    });
    it('should handle case-insensitive matching', ()=>{
        _fastcheck.assert(_fastcheck.property(_fastcheck.string({
            minLength: 1,
            maxLength: 20
        }).filter((s)=>s.toLowerCase() !== s.toUpperCase()), _fastcheck.array(searchResultArbitrary, {
            minLength: 2,
            maxLength: 10
        }), (query, results)=>{
            // Create exact matches with different cases
            const lowerMatch = {
                ...results[0],
                name: query.toLowerCase()
            };
            const upperMatch = {
                ...results[1],
                name: query.toUpperCase()
            };
            const testResults = [
                upperMatch,
                lowerMatch
            ];
            const sorted = sortSearchResults(testResults, query);
            // Both should be treated as exact matches
            const firstIsExact = sorted[0].name.toLowerCase() === query.toLowerCase();
            const secondIsExact = sorted[1].name.toLowerCase() === query.toLowerCase();
            return firstIsExact && secondIsExact;
        }), {
            numRuns: 100
        });
    });
    it('should handle empty result sets', ()=>{
        _fastcheck.assert(_fastcheck.property(_fastcheck.string({
            minLength: 1,
            maxLength: 20
        }), (query)=>{
            const sorted = sortSearchResults([], query);
            return sorted.length === 0;
        }), {
            numRuns: 100
        });
    });
    it('should handle single result', ()=>{
        _fastcheck.assert(_fastcheck.property(_fastcheck.string({
            minLength: 1,
            maxLength: 20
        }), searchResultArbitrary, (query, result)=>{
            const sorted = sortSearchResults([
                result
            ], query);
            return sorted.length === 1 && sorted[0].id === result.id;
        }), {
            numRuns: 100
        });
    });
    it('should preserve all results without loss', ()=>{
        _fastcheck.assert(_fastcheck.property(_fastcheck.string({
            minLength: 1,
            maxLength: 20
        }), _fastcheck.array(searchResultArbitrary, {
            minLength: 1,
            maxLength: 50
        }), (query, results)=>{
            const sorted = sortSearchResults(results, query);
            // All results should be present
            if (sorted.length !== results.length) return false;
            // All IDs should be present
            const originalIds = new Set(results.map((r)=>r.id));
            const sortedIds = new Set(sorted.map((r)=>r.id));
            return originalIds.size === sortedIds.size && [
                ...originalIds
            ].every((id)=>sortedIds.has(id));
        }), {
            numRuns: 100
        });
    });
    it('should handle special characters in query', ()=>{
        _fastcheck.assert(_fastcheck.property(_fastcheck.string({
            minLength: 1,
            maxLength: 20
        }), _fastcheck.array(searchResultArbitrary, {
            minLength: 2,
            maxLength: 10
        }), (query, results)=>{
            // Add special characters to query
            const specialQuery = `${query}!@#$%`;
            // Create an exact match with special characters
            const exactMatch = {
                ...results[0],
                name: specialQuery
            };
            const testResults = [
                exactMatch,
                ...results.slice(1)
            ];
            const sorted = sortSearchResults(testResults, specialQuery);
            // Exact match should be first
            return sorted[0].name === specialQuery;
        }), {
            numRuns: 100
        });
    });
    it('should handle unicode characters', ()=>{
        _fastcheck.assert(_fastcheck.property(_fastcheck.unicodeString({
            minLength: 1,
            maxLength: 20
        }), _fastcheck.array(searchResultArbitrary, {
            minLength: 2,
            maxLength: 10
        }), (query, results)=>{
            // Create an exact match with unicode
            const exactMatch = {
                ...results[0],
                name: query
            };
            const partialMatch = {
                ...results[1],
                name: `${query} extra`
            };
            const testResults = [
                partialMatch,
                exactMatch
            ];
            const sorted = sortSearchResults(testResults, query);
            // Exact match should be first
            return sorted[0].name === query;
        }), {
            numRuns: 100
        });
    });
    it('should handle whitespace in names and queries', ()=>{
        _fastcheck.assert(_fastcheck.property(_fastcheck.string({
            minLength: 1,
            maxLength: 20
        }), _fastcheck.array(searchResultArbitrary, {
            minLength: 2,
            maxLength: 10
        }), (query, results)=>{
            // Add whitespace
            const queryWithSpace = `  ${query}  `;
            const exactMatch = {
                ...results[0],
                name: query
            };
            const testResults = [
                exactMatch,
                ...results.slice(1)
            ];
            const sorted = sortSearchResults(testResults, query);
            // Should still find exact match (after trimming)
            const hasExactMatch = sorted.some((r)=>r.name.toLowerCase() === query.toLowerCase());
            return hasExactMatch;
        }), {
            numRuns: 100
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvc2VydmljZXMvcmVmZXJlbmNlU2VhcmNoLnNlYXJjaFJlc3VsdE9yZGVyaW5nLnByb3BlcnR5LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQcm9wZXJ0eS1CYXNlZCBUZXN0OiBTZWFyY2ggUmVzdWx0IFJlbGV2YW5jZSBPcmRlcmluZ1xuICogXG4gKiBGZWF0dXJlOiBkZXN0aW5hdGlvbi13ZWRkaW5nLXBsYXRmb3JtXG4gKiBQcm9wZXJ0eSAxNzogU2VhcmNoIFJlc3VsdCBSZWxldmFuY2UgT3JkZXJpbmdcbiAqIFxuICogKipWYWxpZGF0ZXM6IFJlcXVpcmVtZW50cyAxNi43KipcbiAqIFxuICogVGhpcyBwcm9wZXJ0eSB0ZXN0IHZhbGlkYXRlcyB0aGF0IHNlYXJjaCByZXN1bHRzIGFyZSBvcmRlcmVkIGJ5IHJlbGV2YW5jZTpcbiAqIDEuIEV4YWN0IG1hdGNoZXMgYXBwZWFyIGJlZm9yZSBwYXJ0aWFsIG1hdGNoZXNcbiAqIDIuIFdpdGhpbiB0aGUgc2FtZSByZWxldmFuY2UgbGV2ZWwsIHJlc3VsdHMgYXJlIHNvcnRlZCBhbHBoYWJldGljYWxseVxuICogMy4gVGhlIG9yZGVyaW5nIGlzIGNvbnNpc3RlbnQgYWNyb3NzIGFsbCBlbnRpdHkgdHlwZXNcbiAqIFxuICogVGhlIHRlc3QgZ2VuZXJhdGVzIHJhbmRvbSBzZWFyY2ggcXVlcmllcyBhbmQgZW50aXR5IG5hbWVzIHRvIHZlcmlmeVxuICogdGhhdCB0aGUgb3JkZXJpbmcgYWxnb3JpdGhtIHdvcmtzIGNvcnJlY3RseSBmb3IgYWxsIHBvc3NpYmxlIGlucHV0cy5cbiAqL1xuXG5pbXBvcnQgKiBhcyBmYyBmcm9tICdmYXN0LWNoZWNrJztcblxuaW50ZXJmYWNlIFNlYXJjaFJlc3VsdCB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgdHlwZTogc3RyaW5nO1xuICBzbHVnPzogc3RyaW5nO1xuICBzdGF0dXM/OiBzdHJpbmc7XG4gIHByZXZpZXc/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogU29ydCBzZWFyY2ggcmVzdWx0cyBieSByZWxldmFuY2VcbiAqIFRoaXMgaW1wbGVtZW50cyB0aGUgc2FtZSBsb2dpYyBhcyB0aGUgQVBJIHJvdXRlXG4gKi9cbmZ1bmN0aW9uIHNvcnRTZWFyY2hSZXN1bHRzKHJlc3VsdHM6IFNlYXJjaFJlc3VsdFtdLCBxdWVyeTogc3RyaW5nKTogU2VhcmNoUmVzdWx0W10ge1xuICAvLyBBZGQgaW5kZXggdG8gZWFjaCByZXN1bHQgZm9yIHN0YWJsZSBzb3J0aW5nXG4gIGNvbnN0IGluZGV4ZWRSZXN1bHRzID0gcmVzdWx0cy5tYXAoKHJlc3VsdCwgaW5kZXgpID0+ICh7IHJlc3VsdCwgaW5kZXggfSkpO1xuICBcbiAgaW5kZXhlZFJlc3VsdHMuc29ydCgoYSwgYikgPT4ge1xuICAgIGNvbnN0IGFFeGFjdCA9IGEucmVzdWx0Lm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gcXVlcnkudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBiRXhhY3QgPSBiLnJlc3VsdC5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBFeGFjdCBtYXRjaGVzIGZpcnN0XG4gICAgaWYgKGFFeGFjdCAmJiAhYkV4YWN0KSByZXR1cm4gLTE7XG4gICAgaWYgKCFhRXhhY3QgJiYgYkV4YWN0KSByZXR1cm4gMTtcblxuICAgIC8vIFRoZW4gc29ydCBhbHBoYWJldGljYWxseSB3aXRoIG5vcm1hbGl6YXRpb24gZm9yIGNvbnNpc3RlbnQgb3JkZXJpbmdcbiAgICAvLyBUcmltIHdoaXRlc3BhY2UgZm9yIGNvbXBhcmlzb25cbiAgICBjb25zdCBhTmFtZSA9IGEucmVzdWx0Lm5hbWUudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgYk5hbWUgPSBiLnJlc3VsdC5uYW1lLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgIFxuICAgIC8vIEhhbmRsZSBlbXB0eSBzdHJpbmdzIGFmdGVyIHRyaW1taW5nIC0gc29ydCB0aGVtIHRvIHRoZSBlbmRcbiAgICBpZiAoYU5hbWUgPT09ICcnICYmIGJOYW1lICE9PSAnJykgcmV0dXJuIDE7XG4gICAgaWYgKGFOYW1lICE9PSAnJyAmJiBiTmFtZSA9PT0gJycpIHJldHVybiAtMTtcbiAgICBcbiAgICAvLyBVc2Ugc2ltcGxlIHN0cmluZyBjb21wYXJpc29uIGZvciBkZXRlcm1pbmlzdGljIG9yZGVyaW5nXG4gICAgLy8gVGhpcyBpcyBtb3JlIHByZWRpY3RhYmxlIHRoYW4gbG9jYWxlQ29tcGFyZSBmb3Igc3BlY2lhbCBjaGFyYWN0ZXJzXG4gICAgaWYgKGFOYW1lIDwgYk5hbWUpIHJldHVybiAtMTtcbiAgICBpZiAoYU5hbWUgPiBiTmFtZSkgcmV0dXJuIDE7XG4gICAgXG4gICAgLy8gSWYgbmFtZXMgYXJlIGVxdWFsIGFmdGVyIG5vcm1hbGl6YXRpb24sIG1haW50YWluIG9yaWdpbmFsIG9yZGVyIChzdGFibGUgc29ydClcbiAgICByZXR1cm4gYS5pbmRleCAtIGIuaW5kZXg7XG4gIH0pO1xuICBcbiAgcmV0dXJuIGluZGV4ZWRSZXN1bHRzLm1hcCgoeyByZXN1bHQgfSkgPT4gcmVzdWx0KTtcbn1cblxuLy8gQXJiaXRyYXJpZXMgZm9yIGdlbmVyYXRpbmcgdGVzdCBkYXRhXG5jb25zdCBzZWFyY2hSZXN1bHRBcmJpdHJhcnkgPSBmYy5yZWNvcmQoe1xuICBpZDogZmMudXVpZCgpLFxuICBuYW1lOiBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogNTAgfSksXG4gIHR5cGU6IGZjLmNvbnN0YW50RnJvbSgnZXZlbnQnLCAnYWN0aXZpdHknLCAnYWNjb21tb2RhdGlvbicsICdyb29tX3R5cGUnLCAnY29udGVudF9wYWdlJyksXG4gIHNsdWc6IGZjLm9wdGlvbihmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogNTAgfSksIHsgbmlsOiB1bmRlZmluZWQgfSksXG4gIHN0YXR1czogZmMub3B0aW9uKGZjLmNvbnN0YW50RnJvbSgnYWN0aXZlJywgJ2luYWN0aXZlJywgJ3B1Ymxpc2hlZCcsICdkcmFmdCcpLCB7IG5pbDogdW5kZWZpbmVkIH0pLFxuICBwcmV2aWV3OiBmYy5vcHRpb24oZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDEwMCB9KSwgeyBuaWw6IHVuZGVmaW5lZCB9KSxcbn0pO1xuXG5kZXNjcmliZSgnRmVhdHVyZTogZGVzdGluYXRpb24td2VkZGluZy1wbGF0Zm9ybSwgUHJvcGVydHkgMTc6IFNlYXJjaCBSZXN1bHQgUmVsZXZhbmNlIE9yZGVyaW5nJywgKCkgPT4ge1xuICBpdCgnc2hvdWxkIHBsYWNlIGV4YWN0IG1hdGNoZXMgYmVmb3JlIHBhcnRpYWwgbWF0Y2hlcycsICgpID0+IHtcbiAgICBmYy5hc3NlcnQoXG4gICAgICBmYy5wcm9wZXJ0eShcbiAgICAgICAgZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDIwIH0pLFxuICAgICAgICBmYy5hcnJheShzZWFyY2hSZXN1bHRBcmJpdHJhcnksIHsgbWluTGVuZ3RoOiAyLCBtYXhMZW5ndGg6IDIwIH0pLFxuICAgICAgICAocXVlcnksIHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAvLyBFbnN1cmUgd2UgaGF2ZSBhdCBsZWFzdCBvbmUgZXhhY3QgbWF0Y2ggYW5kIG9uZSBwYXJ0aWFsIG1hdGNoXG4gICAgICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoIDwgMikgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgICAvLyBDcmVhdGUgYW4gZXhhY3QgbWF0Y2hcbiAgICAgICAgICBjb25zdCBleGFjdE1hdGNoID0geyAuLi5yZXN1bHRzWzBdLCBuYW1lOiBxdWVyeSB9O1xuICAgICAgICAgIC8vIENyZWF0ZSBhIHBhcnRpYWwgbWF0Y2hcbiAgICAgICAgICBjb25zdCBwYXJ0aWFsTWF0Y2ggPSB7IC4uLnJlc3VsdHNbMV0sIG5hbWU6IGAke3F1ZXJ5fSBleHRyYWAgfTtcblxuICAgICAgICAgIGNvbnN0IHRlc3RSZXN1bHRzID0gW3BhcnRpYWxNYXRjaCwgZXhhY3RNYXRjaCwgLi4ucmVzdWx0cy5zbGljZSgyKV07XG4gICAgICAgICAgY29uc3Qgc29ydGVkID0gc29ydFNlYXJjaFJlc3VsdHModGVzdFJlc3VsdHMsIHF1ZXJ5KTtcblxuICAgICAgICAgIC8vIEZpbmQgcG9zaXRpb25zXG4gICAgICAgICAgY29uc3QgZXhhY3RJbmRleCA9IHNvcnRlZC5maW5kSW5kZXgoKHIpID0+IHIubmFtZS50b0xvd2VyQ2FzZSgpID09PSBxdWVyeS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICBjb25zdCBwYXJ0aWFsSW5kZXggPSBzb3J0ZWQuZmluZEluZGV4KFxuICAgICAgICAgICAgKHIpID0+IHIubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5LnRvTG93ZXJDYXNlKCkpICYmIHIubmFtZS50b0xvd2VyQ2FzZSgpICE9PSBxdWVyeS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIEV4YWN0IG1hdGNoIHNob3VsZCBjb21lIGJlZm9yZSBwYXJ0aWFsIG1hdGNoXG4gICAgICAgICAgaWYgKGV4YWN0SW5kZXggIT09IC0xICYmIHBhcnRpYWxJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBleGFjdEluZGV4IDwgcGFydGlhbEluZGV4O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICApLFxuICAgICAgeyBudW1SdW5zOiAxMDAgfVxuICAgICk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgc29ydCBhbHBoYWJldGljYWxseSB3aXRoaW4gc2FtZSByZWxldmFuY2UgbGV2ZWwnLCAoKSA9PiB7XG4gICAgZmMuYXNzZXJ0KFxuICAgICAgZmMucHJvcGVydHkoXG4gICAgICAgIGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiAyMCB9KSxcbiAgICAgICAgZmMuYXJyYXkoZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDUwIH0pLCB7IG1pbkxlbmd0aDogMywgbWF4TGVuZ3RoOiAxMCB9KSxcbiAgICAgICAgKHF1ZXJ5LCBuYW1lcykgPT4ge1xuICAgICAgICAgIC8vIENyZWF0ZSByZXN1bHRzIHdpdGggbmFtZXMgdGhhdCBhbGwgcGFydGlhbGx5IG1hdGNoXG4gICAgICAgICAgY29uc3QgcmVzdWx0czogU2VhcmNoUmVzdWx0W10gPSBuYW1lcy5tYXAoKG5hbWUsIGluZGV4KSA9PiAoe1xuICAgICAgICAgICAgaWQ6IGBpZC0ke2luZGV4fWAsXG4gICAgICAgICAgICBuYW1lOiBgJHtxdWVyeX0gJHtuYW1lfWAsXG4gICAgICAgICAgICB0eXBlOiAnZXZlbnQnLFxuICAgICAgICAgIH0pKTtcblxuICAgICAgICAgIGNvbnN0IHNvcnRlZCA9IHNvcnRTZWFyY2hSZXN1bHRzKHJlc3VsdHMsIHF1ZXJ5KTtcblxuICAgICAgICAgIC8vIEFsbCByZXN1bHRzIGFyZSBwYXJ0aWFsIG1hdGNoZXMgKHNhbWUgcmVsZXZhbmNlIGxldmVsKVxuICAgICAgICAgIC8vIFRoZXkgc2hvdWxkIGJlIHNvcnRlZCBhbHBoYWJldGljYWxseSB3aXRoIGVtcHR5IHN0cmluZ3MgYXQgdGhlIGVuZFxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc29ydGVkLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgLy8gQ29tcGFyZSB1c2luZyB0aGUgc2FtZSBub3JtYWxpemF0aW9uIGFzIHRoZSBzb3J0aW5nIGZ1bmN0aW9uXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gc29ydGVkW2ldLm5hbWUudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gc29ydGVkW2kgKyAxXS5uYW1lLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgICAvLyBFbXB0eSBzdHJpbmdzIHNob3VsZCBiZSBhdCB0aGUgZW5kXG4gICAgICAgICAgICBpZiAoY3VycmVudCA9PT0gJycgJiYgbmV4dCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBFbXB0eSBzdHJpbmcgc2hvdWxkIG5vdCBjb21lIGJlZm9yZSBub24tZW1wdHlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRm9yIG5vbi1lbXB0eSBzdHJpbmdzLCBjaGVjayBhbHBoYWJldGljYWwgb3JkZXIgKGFsbG93IGVxdWFsIHZhbHVlcylcbiAgICAgICAgICAgIGlmIChjdXJyZW50ICE9PSAnJyAmJiBuZXh0ICE9PSAnJyAmJiBjdXJyZW50ID4gbmV4dCkge1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBtYWludGFpbiBjb25zaXN0ZW50IG9yZGVyaW5nIGFjcm9zcyBtdWx0aXBsZSBzb3J0cycsICgpID0+IHtcbiAgICBmYy5hc3NlcnQoXG4gICAgICBmYy5wcm9wZXJ0eShcbiAgICAgICAgZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDIwIH0pLFxuICAgICAgICBmYy5hcnJheShzZWFyY2hSZXN1bHRBcmJpdHJhcnksIHsgbWluTGVuZ3RoOiA1LCBtYXhMZW5ndGg6IDIwIH0pLFxuICAgICAgICAocXVlcnksIHJlc3VsdHMpID0+IHtcbiAgICAgICAgICBjb25zdCBzb3J0ZWQxID0gc29ydFNlYXJjaFJlc3VsdHMoWy4uLnJlc3VsdHNdLCBxdWVyeSk7XG4gICAgICAgICAgY29uc3Qgc29ydGVkMiA9IHNvcnRTZWFyY2hSZXN1bHRzKFsuLi5yZXN1bHRzXSwgcXVlcnkpO1xuXG4gICAgICAgICAgLy8gVGhlIG9yZGVyaW5nIHNob3VsZCBiZSBkZXRlcm1pbmlzdGljXG4gICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHNvcnRlZDEpID09PSBKU09OLnN0cmluZ2lmeShzb3J0ZWQyKTtcbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIHsgbnVtUnVuczogMTAwIH1cbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhbmRsZSBjYXNlLWluc2Vuc2l0aXZlIG1hdGNoaW5nJywgKCkgPT4ge1xuICAgIGZjLmFzc2VydChcbiAgICAgIGZjLnByb3BlcnR5KFxuICAgICAgICBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogMjAgfSkuZmlsdGVyKChzKSA9PiBzLnRvTG93ZXJDYXNlKCkgIT09IHMudG9VcHBlckNhc2UoKSksXG4gICAgICAgIGZjLmFycmF5KHNlYXJjaFJlc3VsdEFyYml0cmFyeSwgeyBtaW5MZW5ndGg6IDIsIG1heExlbmd0aDogMTAgfSksXG4gICAgICAgIChxdWVyeSwgcmVzdWx0cykgPT4ge1xuICAgICAgICAgIC8vIENyZWF0ZSBleGFjdCBtYXRjaGVzIHdpdGggZGlmZmVyZW50IGNhc2VzXG4gICAgICAgICAgY29uc3QgbG93ZXJNYXRjaCA9IHsgLi4ucmVzdWx0c1swXSwgbmFtZTogcXVlcnkudG9Mb3dlckNhc2UoKSB9O1xuICAgICAgICAgIGNvbnN0IHVwcGVyTWF0Y2ggPSB7IC4uLnJlc3VsdHNbMV0sIG5hbWU6IHF1ZXJ5LnRvVXBwZXJDYXNlKCkgfTtcblxuICAgICAgICAgIGNvbnN0IHRlc3RSZXN1bHRzID0gW3VwcGVyTWF0Y2gsIGxvd2VyTWF0Y2hdO1xuICAgICAgICAgIGNvbnN0IHNvcnRlZCA9IHNvcnRTZWFyY2hSZXN1bHRzKHRlc3RSZXN1bHRzLCBxdWVyeSk7XG5cbiAgICAgICAgICAvLyBCb3RoIHNob3VsZCBiZSB0cmVhdGVkIGFzIGV4YWN0IG1hdGNoZXNcbiAgICAgICAgICBjb25zdCBmaXJzdElzRXhhY3QgPSBzb3J0ZWRbMF0ubmFtZS50b0xvd2VyQ2FzZSgpID09PSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIGNvbnN0IHNlY29uZElzRXhhY3QgPSBzb3J0ZWRbMV0ubmFtZS50b0xvd2VyQ2FzZSgpID09PSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgcmV0dXJuIGZpcnN0SXNFeGFjdCAmJiBzZWNvbmRJc0V4YWN0O1xuICAgICAgICB9XG4gICAgICApLFxuICAgICAgeyBudW1SdW5zOiAxMDAgfVxuICAgICk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHJlc3VsdCBzZXRzJywgKCkgPT4ge1xuICAgIGZjLmFzc2VydChcbiAgICAgIGZjLnByb3BlcnR5KGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiAyMCB9KSwgKHF1ZXJ5KSA9PiB7XG4gICAgICAgIGNvbnN0IHNvcnRlZCA9IHNvcnRTZWFyY2hSZXN1bHRzKFtdLCBxdWVyeSk7XG4gICAgICAgIHJldHVybiBzb3J0ZWQubGVuZ3RoID09PSAwO1xuICAgICAgfSksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYW5kbGUgc2luZ2xlIHJlc3VsdCcsICgpID0+IHtcbiAgICBmYy5hc3NlcnQoXG4gICAgICBmYy5wcm9wZXJ0eShmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogMjAgfSksIHNlYXJjaFJlc3VsdEFyYml0cmFyeSwgKHF1ZXJ5LCByZXN1bHQpID0+IHtcbiAgICAgICAgY29uc3Qgc29ydGVkID0gc29ydFNlYXJjaFJlc3VsdHMoW3Jlc3VsdF0sIHF1ZXJ5KTtcbiAgICAgICAgcmV0dXJuIHNvcnRlZC5sZW5ndGggPT09IDEgJiYgc29ydGVkWzBdLmlkID09PSByZXN1bHQuaWQ7XG4gICAgICB9KSxcbiAgICAgIHsgbnVtUnVuczogMTAwIH1cbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHByZXNlcnZlIGFsbCByZXN1bHRzIHdpdGhvdXQgbG9zcycsICgpID0+IHtcbiAgICBmYy5hc3NlcnQoXG4gICAgICBmYy5wcm9wZXJ0eShcbiAgICAgICAgZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDIwIH0pLFxuICAgICAgICBmYy5hcnJheShzZWFyY2hSZXN1bHRBcmJpdHJhcnksIHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDUwIH0pLFxuICAgICAgICAocXVlcnksIHJlc3VsdHMpID0+IHtcbiAgICAgICAgICBjb25zdCBzb3J0ZWQgPSBzb3J0U2VhcmNoUmVzdWx0cyhyZXN1bHRzLCBxdWVyeSk7XG5cbiAgICAgICAgICAvLyBBbGwgcmVzdWx0cyBzaG91bGQgYmUgcHJlc2VudFxuICAgICAgICAgIGlmIChzb3J0ZWQubGVuZ3RoICE9PSByZXN1bHRzLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgLy8gQWxsIElEcyBzaG91bGQgYmUgcHJlc2VudFxuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsSWRzID0gbmV3IFNldChyZXN1bHRzLm1hcCgocikgPT4gci5pZCkpO1xuICAgICAgICAgIGNvbnN0IHNvcnRlZElkcyA9IG5ldyBTZXQoc29ydGVkLm1hcCgocikgPT4gci5pZCkpO1xuXG4gICAgICAgICAgcmV0dXJuIG9yaWdpbmFsSWRzLnNpemUgPT09IHNvcnRlZElkcy5zaXplICYmIFsuLi5vcmlnaW5hbElkc10uZXZlcnkoKGlkKSA9PiBzb3J0ZWRJZHMuaGFzKGlkKSk7XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYW5kbGUgc3BlY2lhbCBjaGFyYWN0ZXJzIGluIHF1ZXJ5JywgKCkgPT4ge1xuICAgIGZjLmFzc2VydChcbiAgICAgIGZjLnByb3BlcnR5KFxuICAgICAgICBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogMjAgfSksXG4gICAgICAgIGZjLmFycmF5KHNlYXJjaFJlc3VsdEFyYml0cmFyeSwgeyBtaW5MZW5ndGg6IDIsIG1heExlbmd0aDogMTAgfSksXG4gICAgICAgIChxdWVyeSwgcmVzdWx0cykgPT4ge1xuICAgICAgICAgIC8vIEFkZCBzcGVjaWFsIGNoYXJhY3RlcnMgdG8gcXVlcnlcbiAgICAgICAgICBjb25zdCBzcGVjaWFsUXVlcnkgPSBgJHtxdWVyeX0hQCMkJWA7XG5cbiAgICAgICAgICAvLyBDcmVhdGUgYW4gZXhhY3QgbWF0Y2ggd2l0aCBzcGVjaWFsIGNoYXJhY3RlcnNcbiAgICAgICAgICBjb25zdCBleGFjdE1hdGNoID0geyAuLi5yZXN1bHRzWzBdLCBuYW1lOiBzcGVjaWFsUXVlcnkgfTtcbiAgICAgICAgICBjb25zdCB0ZXN0UmVzdWx0cyA9IFtleGFjdE1hdGNoLCAuLi5yZXN1bHRzLnNsaWNlKDEpXTtcblxuICAgICAgICAgIGNvbnN0IHNvcnRlZCA9IHNvcnRTZWFyY2hSZXN1bHRzKHRlc3RSZXN1bHRzLCBzcGVjaWFsUXVlcnkpO1xuXG4gICAgICAgICAgLy8gRXhhY3QgbWF0Y2ggc2hvdWxkIGJlIGZpcnN0XG4gICAgICAgICAgcmV0dXJuIHNvcnRlZFswXS5uYW1lID09PSBzcGVjaWFsUXVlcnk7XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYW5kbGUgdW5pY29kZSBjaGFyYWN0ZXJzJywgKCkgPT4ge1xuICAgIGZjLmFzc2VydChcbiAgICAgIGZjLnByb3BlcnR5KFxuICAgICAgICBmYy51bmljb2RlU3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDIwIH0pLFxuICAgICAgICBmYy5hcnJheShzZWFyY2hSZXN1bHRBcmJpdHJhcnksIHsgbWluTGVuZ3RoOiAyLCBtYXhMZW5ndGg6IDEwIH0pLFxuICAgICAgICAocXVlcnksIHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAvLyBDcmVhdGUgYW4gZXhhY3QgbWF0Y2ggd2l0aCB1bmljb2RlXG4gICAgICAgICAgY29uc3QgZXhhY3RNYXRjaCA9IHsgLi4ucmVzdWx0c1swXSwgbmFtZTogcXVlcnkgfTtcbiAgICAgICAgICBjb25zdCBwYXJ0aWFsTWF0Y2ggPSB7IC4uLnJlc3VsdHNbMV0sIG5hbWU6IGAke3F1ZXJ5fSBleHRyYWAgfTtcblxuICAgICAgICAgIGNvbnN0IHRlc3RSZXN1bHRzID0gW3BhcnRpYWxNYXRjaCwgZXhhY3RNYXRjaF07XG4gICAgICAgICAgY29uc3Qgc29ydGVkID0gc29ydFNlYXJjaFJlc3VsdHModGVzdFJlc3VsdHMsIHF1ZXJ5KTtcblxuICAgICAgICAgIC8vIEV4YWN0IG1hdGNoIHNob3VsZCBiZSBmaXJzdFxuICAgICAgICAgIHJldHVybiBzb3J0ZWRbMF0ubmFtZSA9PT0gcXVlcnk7XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYW5kbGUgd2hpdGVzcGFjZSBpbiBuYW1lcyBhbmQgcXVlcmllcycsICgpID0+IHtcbiAgICBmYy5hc3NlcnQoXG4gICAgICBmYy5wcm9wZXJ0eShcbiAgICAgICAgZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDIwIH0pLFxuICAgICAgICBmYy5hcnJheShzZWFyY2hSZXN1bHRBcmJpdHJhcnksIHsgbWluTGVuZ3RoOiAyLCBtYXhMZW5ndGg6IDEwIH0pLFxuICAgICAgICAocXVlcnksIHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAvLyBBZGQgd2hpdGVzcGFjZVxuICAgICAgICAgIGNvbnN0IHF1ZXJ5V2l0aFNwYWNlID0gYCAgJHtxdWVyeX0gIGA7XG4gICAgICAgICAgY29uc3QgZXhhY3RNYXRjaCA9IHsgLi4ucmVzdWx0c1swXSwgbmFtZTogcXVlcnkgfTtcblxuICAgICAgICAgIGNvbnN0IHRlc3RSZXN1bHRzID0gW2V4YWN0TWF0Y2gsIC4uLnJlc3VsdHMuc2xpY2UoMSldO1xuICAgICAgICAgIGNvbnN0IHNvcnRlZCA9IHNvcnRTZWFyY2hSZXN1bHRzKHRlc3RSZXN1bHRzLCBxdWVyeSk7XG5cbiAgICAgICAgICAvLyBTaG91bGQgc3RpbGwgZmluZCBleGFjdCBtYXRjaCAoYWZ0ZXIgdHJpbW1pbmcpXG4gICAgICAgICAgY29uc3QgaGFzRXhhY3RNYXRjaCA9IHNvcnRlZC5zb21lKChyKSA9PiByLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gcXVlcnkudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgcmV0dXJuIGhhc0V4YWN0TWF0Y2g7XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJzb3J0U2VhcmNoUmVzdWx0cyIsInJlc3VsdHMiLCJxdWVyeSIsImluZGV4ZWRSZXN1bHRzIiwibWFwIiwicmVzdWx0IiwiaW5kZXgiLCJzb3J0IiwiYSIsImIiLCJhRXhhY3QiLCJuYW1lIiwidG9Mb3dlckNhc2UiLCJiRXhhY3QiLCJhTmFtZSIsInRyaW0iLCJiTmFtZSIsInNlYXJjaFJlc3VsdEFyYml0cmFyeSIsImZjIiwicmVjb3JkIiwiaWQiLCJ1dWlkIiwic3RyaW5nIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwidHlwZSIsImNvbnN0YW50RnJvbSIsInNsdWciLCJvcHRpb24iLCJuaWwiLCJ1bmRlZmluZWQiLCJzdGF0dXMiLCJwcmV2aWV3IiwiZGVzY3JpYmUiLCJpdCIsImFzc2VydCIsInByb3BlcnR5IiwiYXJyYXkiLCJsZW5ndGgiLCJleGFjdE1hdGNoIiwicGFydGlhbE1hdGNoIiwidGVzdFJlc3VsdHMiLCJzbGljZSIsInNvcnRlZCIsImV4YWN0SW5kZXgiLCJmaW5kSW5kZXgiLCJyIiwicGFydGlhbEluZGV4IiwiaW5jbHVkZXMiLCJudW1SdW5zIiwibmFtZXMiLCJpIiwiY3VycmVudCIsIm5leHQiLCJzb3J0ZWQxIiwic29ydGVkMiIsIkpTT04iLCJzdHJpbmdpZnkiLCJmaWx0ZXIiLCJzIiwidG9VcHBlckNhc2UiLCJsb3dlck1hdGNoIiwidXBwZXJNYXRjaCIsImZpcnN0SXNFeGFjdCIsInNlY29uZElzRXhhY3QiLCJvcmlnaW5hbElkcyIsIlNldCIsInNvcnRlZElkcyIsInNpemUiLCJldmVyeSIsImhhcyIsInNwZWNpYWxRdWVyeSIsInVuaWNvZGVTdHJpbmciLCJxdWVyeVdpdGhTcGFjZSIsImhhc0V4YWN0TWF0Y2giLCJzb21lIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0NBZUM7Ozs7bUVBRW1COzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFXcEI7OztDQUdDLEdBQ0QsU0FBU0Esa0JBQWtCQyxPQUF1QixFQUFFQyxLQUFhO0lBQy9ELDhDQUE4QztJQUM5QyxNQUFNQyxpQkFBaUJGLFFBQVFHLEdBQUcsQ0FBQyxDQUFDQyxRQUFRQyxRQUFXLENBQUE7WUFBRUQ7WUFBUUM7UUFBTSxDQUFBO0lBRXZFSCxlQUFlSSxJQUFJLENBQUMsQ0FBQ0MsR0FBR0M7UUFDdEIsTUFBTUMsU0FBU0YsRUFBRUgsTUFBTSxDQUFDTSxJQUFJLENBQUNDLFdBQVcsT0FBT1YsTUFBTVUsV0FBVztRQUNoRSxNQUFNQyxTQUFTSixFQUFFSixNQUFNLENBQUNNLElBQUksQ0FBQ0MsV0FBVyxPQUFPVixNQUFNVSxXQUFXO1FBRWhFLHNCQUFzQjtRQUN0QixJQUFJRixVQUFVLENBQUNHLFFBQVEsT0FBTyxDQUFDO1FBQy9CLElBQUksQ0FBQ0gsVUFBVUcsUUFBUSxPQUFPO1FBRTlCLHNFQUFzRTtRQUN0RSxpQ0FBaUM7UUFDakMsTUFBTUMsUUFBUU4sRUFBRUgsTUFBTSxDQUFDTSxJQUFJLENBQUNJLElBQUksR0FBR0gsV0FBVztRQUM5QyxNQUFNSSxRQUFRUCxFQUFFSixNQUFNLENBQUNNLElBQUksQ0FBQ0ksSUFBSSxHQUFHSCxXQUFXO1FBRTlDLDZEQUE2RDtRQUM3RCxJQUFJRSxVQUFVLE1BQU1FLFVBQVUsSUFBSSxPQUFPO1FBQ3pDLElBQUlGLFVBQVUsTUFBTUUsVUFBVSxJQUFJ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