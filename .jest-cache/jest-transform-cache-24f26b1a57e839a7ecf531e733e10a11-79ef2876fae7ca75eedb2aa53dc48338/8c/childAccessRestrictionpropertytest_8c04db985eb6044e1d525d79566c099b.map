{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/services/childAccessRestriction.property.test.ts"],"sourcesContent":["import * as fc from 'fast-check';\n\n/**\n * Property 19: Child Access Restriction\n * \n * For any child/dependent family member in a guest group, they should only have\n * read and edit access to their own information, not to their parents' or siblings' information.\n * \n * Validates: Requirements 14.4\n * Feature: destination-wedding-platform, Property 19: Child Access Restriction\n */\n\n// Mock Supabase client for testing\nfunction createMockSupabaseClient() {\n  const mockData = {\n    groups: new Map<string, any>(),\n    guests: new Map<string, any>(),\n    users: new Map<string, any>(),\n  };\n\n  return {\n    from: (table: string) => ({\n      select: (columns: string = '*') => ({\n        eq: (column: string, value: any) => ({\n          single: async () => {\n            if (table === 'guests') {\n              const guest = Array.from(mockData.guests.values()).find(\n                (g: any) => g[column] === value\n              );\n              return guest\n                ? { data: guest, error: null }\n                : { data: null, error: { message: 'Not found' } };\n            }\n            return { data: null, error: { message: 'Not found' } };\n          },\n          then: async (resolve: any) => {\n            if (table === 'guests') {\n              const guests = Array.from(mockData.guests.values()).filter(\n                (g: any) => g[column] === value\n              );\n              resolve({ data: guests, error: null });\n            } else {\n              resolve({ data: [], error: null });\n            }\n          },\n        }),\n      }),\n      update: (data: any) => ({\n        eq: (column: string, value: any) => ({\n          select: () => ({\n            single: async () => {\n              if (table === 'guests') {\n                const guest = mockData.guests.get(value);\n                if (guest) {\n                  const updated = { ...guest, ...data };\n                  mockData.guests.set(value, updated);\n                  return { data: updated, error: null };\n                }\n              }\n              return { data: null, error: { message: 'Not found' } };\n            },\n          }),\n        }),\n      }),\n      insert: (data: any) => ({\n        select: () => ({\n          single: async () => {\n            const id = `${table}-${Date.now()}-${Math.random()}`;\n            const record = { ...data, id };\n            if (table === 'guests') {\n              mockData.guests.set(id, record);\n            } else if (table === 'groups') {\n              mockData.groups.set(id, record);\n            }\n            return { data: record, error: null };\n          },\n        }),\n      }),\n    }),\n    auth: {\n      getSession: async () => ({\n        data: { session: { user: { email: 'test@example.com' } } },\n        error: null,\n      }),\n    },\n    _mockData: mockData,\n  };\n}\n\n// Arbitraries for property-based testing\nconst groupIdArbitrary = fc.uuid();\n\nconst childGuestArbitrary = fc.record({\n  id: fc.uuid(),\n  group_id: fc.uuid(),\n  first_name: fc.string({ minLength: 1, maxLength: 50 }),\n  last_name: fc.string({ minLength: 1, maxLength: 50 }),\n  email: fc.option(fc.emailAddress(), { nil: undefined }),\n  age_type: fc.constant('child' as const),\n  guest_type: fc.constantFrom(\n    'wedding_party',\n    'wedding_guest',\n    'prewedding_only',\n    'postwedding_only'\n  ),\n  created_at: fc.date().map((d) => d.toISOString()),\n  updated_at: fc.date().map((d) => d.toISOString()),\n});\n\nconst familyMemberArbitrary = fc.record({\n  id: fc.uuid(),\n  first_name: fc.string({ minLength: 1, maxLength: 50 }),\n  last_name: fc.string({ minLength: 1, maxLength: 50 }),\n  email: fc.option(fc.emailAddress(), { nil: undefined }),\n  age_type: fc.constantFrom('adult', 'child', 'senior'),\n  guest_type: fc.constantFrom(\n    'wedding_party',\n    'wedding_guest',\n    'prewedding_only',\n    'postwedding_only'\n  ),\n  created_at: fc.date().map((d) => d.toISOString()),\n  updated_at: fc.date().map((d) => d.toISOString()),\n});\n\n/**\n * Simulates access control check for child guests\n * Children can only access their own record\n */\nfunction canChildAccess(childId: string, targetId: string): boolean {\n  return childId === targetId;\n}\n\ndescribe('Feature: destination-wedding-platform, Property 19: Child Access Restriction', () => {\n  it('should only allow children to read their own information', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        groupIdArbitrary,\n        childGuestArbitrary,\n        fc.array(familyMemberArbitrary, { minLength: 1, maxLength: 5 }),\n        async (groupId, childGuest, otherFamilyMembers) => {\n          // Arrange: Create mock client and setup data\n          const mockClient = createMockSupabaseClient();\n          const mockData = mockClient._mockData;\n\n          // Set child guest with group\n          const child = { ...childGuest, group_id: groupId };\n          mockData.guests.set(child.id, child);\n\n          // Set other family members with same group\n          otherFamilyMembers.forEach((member) => {\n            const familyMember = { ...member, group_id: groupId };\n            mockData.guests.set(familyMember.id, familyMember);\n          });\n\n          // Act: Simulate access control - child should only see themselves\n          const accessibleMembers = Array.from(mockData.guests.values()).filter(\n            (guest: any) =>\n              guest.group_id === groupId && canChildAccess(child.id, guest.id)\n          );\n\n          // Assert: Child should only access their own record\n          expect(accessibleMembers).toHaveLength(1);\n          expect(accessibleMembers[0].id).toBe(child.id);\n\n          // Verify child cannot access other family members\n          otherFamilyMembers.forEach((member) => {\n            const canAccess = canChildAccess(child.id, member.id);\n            expect(canAccess).toBe(false);\n          });\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should only allow children to edit their own information', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        groupIdArbitrary,\n        childGuestArbitrary,\n        familyMemberArbitrary,\n        fc.string({ minLength: 1, maxLength: 50 }),\n        async (groupId, childGuest, otherMember, newFirstName) => {\n          // Ensure other member is different from child\n          fc.pre(childGuest.id !== otherMember.id);\n\n          // Arrange: Create mock client and setup data\n          const mockClient = createMockSupabaseClient();\n          const mockData = mockClient._mockData;\n\n          // Set child guest with group\n          const child = { ...childGuest, group_id: groupId };\n          mockData.guests.set(child.id, child);\n\n          // Set other family member with same group\n          const other = { ...otherMember, group_id: groupId };\n          mockData.guests.set(other.id, other);\n\n          // Act & Assert: Child can edit themselves\n          const canEditSelf = canChildAccess(child.id, child.id);\n          expect(canEditSelf).toBe(true);\n\n          if (canEditSelf) {\n            const selfUpdateResult = await mockClient\n              .from('guests')\n              .update({ first_name: newFirstName })\n              .eq('id', child.id)\n              .select()\n              .single();\n\n            expect(selfUpdateResult.data).toBeDefined();\n            expect(selfUpdateResult.data.first_name).toBe(newFirstName);\n          }\n\n          // Act & Assert: Child cannot edit other family members\n          const canEditOther = canChildAccess(child.id, other.id);\n          expect(canEditOther).toBe(false);\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should restrict children from accessing parent information', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        groupIdArbitrary,\n        childGuestArbitrary,\n        fc.record({\n          id: fc.uuid(),\n          first_name: fc.string({ minLength: 1, maxLength: 50 }),\n          last_name: fc.string({ minLength: 1, maxLength: 50 }),\n          email: fc.emailAddress(),\n          age_type: fc.constant('adult' as const),\n          guest_type: fc.constantFrom('wedding_party', 'wedding_guest'),\n          created_at: fc.date().map((d) => d.toISOString()),\n          updated_at: fc.date().map((d) => d.toISOString()),\n        }),\n        async (groupId, childGuest, parentGuest) => {\n          // Ensure parent is different from child\n          fc.pre(childGuest.id !== parentGuest.id);\n\n          // Arrange: Create mock client and setup data\n          const mockClient = createMockSupabaseClient();\n          const mockData = mockClient._mockData;\n\n          // Set child guest with group\n          const child = { ...childGuest, group_id: groupId };\n          mockData.guests.set(child.id, child);\n\n          // Set parent with same group\n          const parent = { ...parentGuest, group_id: groupId };\n          mockData.guests.set(parent.id, parent);\n\n          // Act: Check if child can access parent\n          const canAccessParent = canChildAccess(child.id, parent.id);\n\n          // Assert: Child should not be able to access parent information\n          expect(canAccessParent).toBe(false);\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should restrict children from accessing sibling information', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        groupIdArbitrary,\n        childGuestArbitrary,\n        fc.record({\n          id: fc.uuid(),\n          first_name: fc.string({ minLength: 1, maxLength: 50 }),\n          last_name: fc.string({ minLength: 1, maxLength: 50 }),\n          email: fc.option(fc.emailAddress(), { nil: undefined }),\n          age_type: fc.constant('child' as const),\n          guest_type: fc.constantFrom('wedding_party', 'wedding_guest'),\n          created_at: fc.date().map((d) => d.toISOString()),\n          updated_at: fc.date().map((d) => d.toISOString()),\n        }),\n        async (groupId, childGuest1, childGuest2) => {\n          // Ensure siblings are different\n          fc.pre(childGuest1.id !== childGuest2.id);\n\n          // Arrange: Create mock client and setup data\n          const mockClient = createMockSupabaseClient();\n          const mockData = mockClient._mockData;\n\n          // Set first child with group\n          const child1 = { ...childGuest1, group_id: groupId };\n          mockData.guests.set(child1.id, child1);\n\n          // Set sibling with same group\n          const child2 = { ...childGuest2, group_id: groupId };\n          mockData.guests.set(child2.id, child2);\n\n          // Act: Check if child can access sibling\n          const canAccessSibling = canChildAccess(child1.id, child2.id);\n\n          // Assert: Child should not be able to access sibling information\n          expect(canAccessSibling).toBe(false);\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should allow children to access only themselves in a family with multiple members', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        groupIdArbitrary,\n        childGuestArbitrary,\n        fc.array(\n          fc.record({\n            id: fc.uuid(),\n            first_name: fc.string({ minLength: 1, maxLength: 50 }),\n            last_name: fc.string({ minLength: 1, maxLength: 50 }),\n            age_type: fc.constantFrom('adult', 'child', 'senior'),\n            guest_type: fc.constantFrom('wedding_party', 'wedding_guest'),\n            created_at: fc.date().map((d) => d.toISOString()),\n            updated_at: fc.date().map((d) => d.toISOString()),\n          }),\n          { minLength: 2, maxLength: 6 }\n        ),\n        async (groupId, childGuest, otherMembers) => {\n          // Ensure other members are different from child\n          const uniqueOthers = otherMembers.filter((m) => m.id !== childGuest.id);\n          fc.pre(uniqueOthers.length >= 2);\n\n          // Arrange: Create mock client and setup data\n          const mockClient = createMockSupabaseClient();\n          const mockData = mockClient._mockData;\n\n          // Set child guest with group\n          const child = { ...childGuest, group_id: groupId };\n          mockData.guests.set(child.id, child);\n\n          // Set other family members with same group\n          uniqueOthers.forEach((member) => {\n            const familyMember = { ...member, group_id: groupId };\n            mockData.guests.set(familyMember.id, familyMember);\n          });\n\n          // Act: Count accessible members for child\n          const accessibleCount = Array.from(mockData.guests.values()).filter(\n            (guest: any) =>\n              guest.group_id === groupId && canChildAccess(child.id, guest.id)\n          ).length;\n\n          // Assert: Child should only access exactly 1 member (themselves)\n          expect(accessibleCount).toBe(1);\n\n          // Verify child cannot access any other member\n          uniqueOthers.forEach((member) => {\n            const canAccess = canChildAccess(child.id, member.id);\n            expect(canAccess).toBe(false);\n          });\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n});\n"],"names":["createMockSupabaseClient","mockData","groups","Map","guests","users","from","table","select","columns","eq","column","value","single","guest","Array","values","find","g","data","error","message","then","resolve","filter","update","get","updated","set","insert","id","Date","now","Math","random","record","auth","getSession","session","user","email","_mockData","groupIdArbitrary","fc","uuid","childGuestArbitrary","group_id","first_name","string","minLength","maxLength","last_name","option","emailAddress","nil","undefined","age_type","constant","guest_type","constantFrom","created_at","date","map","d","toISOString","updated_at","familyMemberArbitrary","canChildAccess","childId","targetId","describe","it","assert","asyncProperty","array","groupId","childGuest","otherFamilyMembers","mockClient","child","forEach","member","familyMember","accessibleMembers","expect","toHaveLength","toBe","canAccess","numRuns","otherMember","newFirstName","pre","other","canEditSelf","selfUpdateResult","toBeDefined","canEditOther","parentGuest","parent","canAccessParent","childGuest1","childGuest2","child1","child2","canAccessSibling","otherMembers","uniqueOthers","m","length","accessibleCount"],"mappings":"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"}