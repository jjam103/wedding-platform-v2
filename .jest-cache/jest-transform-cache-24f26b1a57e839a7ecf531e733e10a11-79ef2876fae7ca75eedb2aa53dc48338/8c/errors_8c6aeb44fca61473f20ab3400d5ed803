6798e31c43889ba7ded763710cec329b
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get databaseError () {
        return databaseError;
    },
    get error () {
        return error;
    },
    get getErrorCodeFromStatus () {
        return getErrorCodeFromStatus;
    },
    get getStatusFromErrorCode () {
        return getStatusFromErrorCode;
    },
    get notFoundError () {
        return notFoundError;
    },
    get success () {
        return success;
    },
    get unauthorizedError () {
        return unauthorizedError;
    },
    get unknownError () {
        return unknownError;
    },
    get validationError () {
        return validationError;
    }
});
const _types = require("../types");
function success(data) {
    return {
        success: true,
        data
    };
}
function error(code, message, details) {
    return {
        success: false,
        error: {
            code,
            message,
            details
        }
    };
}
function validationError(message = 'Validation failed', details) {
    return error(_types.ERROR_CODES.VALIDATION_ERROR, message, details);
}
function databaseError(message = 'Database operation failed', details) {
    return error(_types.ERROR_CODES.DATABASE_ERROR, message, details);
}
function unauthorizedError(message = 'Authentication required') {
    return error(_types.ERROR_CODES.UNAUTHORIZED, message);
}
function notFoundError(resource = 'Resource') {
    return error(_types.ERROR_CODES.NOT_FOUND, `${resource} not found`);
}
function unknownError(err) {
    const message = err instanceof Error ? err.message : 'Unknown error occurred';
    return error(_types.ERROR_CODES.UNKNOWN_ERROR, message, err);
}
function getErrorCodeFromStatus(status) {
    switch(status){
        case 400:
            return _types.ERROR_CODES.VALIDATION_ERROR;
        case 401:
            return _types.ERROR_CODES.UNAUTHORIZED;
        case 403:
            return _types.ERROR_CODES.FORBIDDEN;
        case 404:
            return _types.ERROR_CODES.NOT_FOUND;
        case 409:
            return _types.ERROR_CODES.CONFLICT;
        case 502:
        case 503:
            return _types.ERROR_CODES.EXTERNAL_SERVICE_ERROR;
        default:
            return _types.ERROR_CODES.UNKNOWN_ERROR;
    }
}
function getStatusFromErrorCode(code) {
    switch(code){
        case _types.ERROR_CODES.VALIDATION_ERROR:
        case _types.ERROR_CODES.INVALID_INPUT:
        case _types.ERROR_CODES.MISSING_REQUIRED_FIELD:
            return 400;
        case _types.ERROR_CODES.UNAUTHORIZED:
        case _types.ERROR_CODES.INVALID_CREDENTIALS:
        case _types.ERROR_CODES.SESSION_EXPIRED:
            return 401;
        case _types.ERROR_CODES.FORBIDDEN:
        case _types.ERROR_CODES.INSUFFICIENT_PERMISSIONS:
            return 403;
        case _types.ERROR_CODES.NOT_FOUND:
        case _types.ERROR_CODES.GUEST_NOT_FOUND:
        case _types.ERROR_CODES.EVENT_NOT_FOUND:
            return 404;
        case _types.ERROR_CODES.CONFLICT:
        case _types.ERROR_CODES.DUPLICATE_ENTRY:
        case _types.ERROR_CODES.CAPACITY_EXCEEDED:
            return 409;
        case _types.ERROR_CODES.EXTERNAL_SERVICE_ERROR:
        case _types.ERROR_CODES.STORAGE_UNAVAILABLE:
        case _types.ERROR_CODES.EMAIL_SERVICE_ERROR:
            return 503;
        default:
            return 500;
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvdXRpbHMvZXJyb3JzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgUmVzdWx0LCBFcnJvckRldGFpbHMsIEVycm9yQ29kZSB9IGZyb20gJ0AvdHlwZXMnO1xuaW1wb3J0IHsgRVJST1JfQ09ERVMgfSBmcm9tICdAL3R5cGVzJztcblxuLyoqXG4gKiBDcmVhdGVzIGEgc3VjY2VzcyBSZXN1bHQuXG4gKiBcbiAqIEBwYXJhbSBkYXRhIC0gVGhlIHN1Y2Nlc3NmdWwgb3BlcmF0aW9uIGRhdGFcbiAqIEByZXR1cm5zIFN1Y2Nlc3MgUmVzdWx0IGNvbnRhaW5pbmcgdGhlIGRhdGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN1Y2Nlc3M8VD4oZGF0YTogVCk6IFJlc3VsdDxUPiB7XG4gIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGEgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGVycm9yIFJlc3VsdC5cbiAqIFxuICogQHBhcmFtIGNvZGUgLSBTdGFuZGFyZCBlcnJvciBjb2RlXG4gKiBAcGFyYW0gbWVzc2FnZSAtIEh1bWFuLXJlYWRhYmxlIGVycm9yIG1lc3NhZ2VcbiAqIEBwYXJhbSBkZXRhaWxzIC0gT3B0aW9uYWwgYWRkaXRpb25hbCBlcnJvciBkZXRhaWxzXG4gKiBAcmV0dXJucyBFcnJvciBSZXN1bHQgY29udGFpbmluZyBlcnJvciBpbmZvcm1hdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gZXJyb3I8VD4oXG4gIGNvZGU6IEVycm9yQ29kZSxcbiAgbWVzc2FnZTogc3RyaW5nLFxuICBkZXRhaWxzPzogdW5rbm93blxuKTogUmVzdWx0PFQ+IHtcbiAgcmV0dXJuIHtcbiAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICBlcnJvcjogeyBjb2RlLCBtZXNzYWdlLCBkZXRhaWxzIH0sXG4gIH07XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHZhbGlkYXRpb24gZXJyb3IgUmVzdWx0LlxuICogXG4gKiBAcGFyYW0gbWVzc2FnZSAtIFZhbGlkYXRpb24gZXJyb3IgbWVzc2FnZVxuICogQHBhcmFtIGRldGFpbHMgLSBPcHRpb25hbCB2YWxpZGF0aW9uIGVycm9yIGRldGFpbHMgKGUuZy4sIFpvZCBpc3N1ZXMpXG4gKiBAcmV0dXJucyBWYWxpZGF0aW9uIGVycm9yIFJlc3VsdFxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGlvbkVycm9yPFQ+KFxuICBtZXNzYWdlOiBzdHJpbmcgPSAnVmFsaWRhdGlvbiBmYWlsZWQnLFxuICBkZXRhaWxzPzogdW5rbm93blxuKTogUmVzdWx0PFQ+IHtcbiAgcmV0dXJuIGVycm9yKEVSUk9SX0NPREVTLlZBTElEQVRJT05fRVJST1IsIG1lc3NhZ2UsIGRldGFpbHMpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBkYXRhYmFzZSBlcnJvciBSZXN1bHQuXG4gKiBcbiAqIEBwYXJhbSBtZXNzYWdlIC0gRGF0YWJhc2UgZXJyb3IgbWVzc2FnZVxuICogQHBhcmFtIGRldGFpbHMgLSBPcHRpb25hbCBkYXRhYmFzZSBlcnJvciBkZXRhaWxzXG4gKiBAcmV0dXJucyBEYXRhYmFzZSBlcnJvciBSZXN1bHRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRhdGFiYXNlRXJyb3I8VD4oXG4gIG1lc3NhZ2U6IHN0cmluZyA9ICdEYXRhYmFzZSBvcGVyYXRpb24gZmFpbGVkJyxcbiAgZGV0YWlscz86IHVua25vd25cbik6IFJlc3VsdDxUPiB7XG4gIHJldHVybiBlcnJvcihFUlJPUl9DT0RFUy5EQVRBQkFTRV9FUlJPUiwgbWVzc2FnZSwgZGV0YWlscyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiB1bmF1dGhvcml6ZWQgZXJyb3IgUmVzdWx0LlxuICogXG4gKiBAcGFyYW0gbWVzc2FnZSAtIEF1dGhvcml6YXRpb24gZXJyb3IgbWVzc2FnZVxuICogQHJldHVybnMgVW5hdXRob3JpemVkIGVycm9yIFJlc3VsdFxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5hdXRob3JpemVkRXJyb3I8VD4oXG4gIG1lc3NhZ2U6IHN0cmluZyA9ICdBdXRoZW50aWNhdGlvbiByZXF1aXJlZCdcbik6IFJlc3VsdDxUPiB7XG4gIHJldHVybiBlcnJvcihFUlJPUl9DT0RFUy5VTkFVVEhPUklaRUQsIG1lc3NhZ2UpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBub3QgZm91bmQgZXJyb3IgUmVzdWx0LlxuICogXG4gKiBAcGFyYW0gcmVzb3VyY2UgLSBUaGUgcmVzb3VyY2UgdGhhdCB3YXMgbm90IGZvdW5kXG4gKiBAcmV0dXJucyBOb3QgZm91bmQgZXJyb3IgUmVzdWx0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub3RGb3VuZEVycm9yPFQ+KHJlc291cmNlOiBzdHJpbmcgPSAnUmVzb3VyY2UnKTogUmVzdWx0PFQ+IHtcbiAgcmV0dXJuIGVycm9yKEVSUk9SX0NPREVTLk5PVF9GT1VORCwgYCR7cmVzb3VyY2V9IG5vdCBmb3VuZGApO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gdW5rbm93biBlcnJvciBSZXN1bHQgZnJvbSBhIGNhdWdodCBleGNlcHRpb24uXG4gKiBcbiAqIEBwYXJhbSBlcnIgLSBUaGUgY2F1Z2h0IGVycm9yXG4gKiBAcmV0dXJucyBVbmtub3duIGVycm9yIFJlc3VsdFxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5rbm93bkVycm9yPFQ+KGVycjogdW5rbm93bik6IFJlc3VsdDxUPiB7XG4gIGNvbnN0IG1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQnO1xuICByZXR1cm4gZXJyb3IoRVJST1JfQ09ERVMuVU5LTk9XTl9FUlJPUiwgbWVzc2FnZSwgZXJyKTtcbn1cblxuLyoqXG4gKiBNYXBzIEhUVFAgc3RhdHVzIGNvZGVzIHRvIGFwcHJvcHJpYXRlIGVycm9yIGNvZGVzLlxuICogXG4gKiBAcGFyYW0gc3RhdHVzIC0gSFRUUCBzdGF0dXMgY29kZVxuICogQHJldHVybnMgQ29ycmVzcG9uZGluZyBlcnJvciBjb2RlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFcnJvckNvZGVGcm9tU3RhdHVzKHN0YXR1czogbnVtYmVyKTogRXJyb3JDb2RlIHtcbiAgc3dpdGNoIChzdGF0dXMpIHtcbiAgICBjYXNlIDQwMDpcbiAgICAgIHJldHVybiBFUlJPUl9DT0RFUy5WQUxJREFUSU9OX0VSUk9SO1xuICAgIGNhc2UgNDAxOlxuICAgICAgcmV0dXJuIEVSUk9SX0NPREVTLlVOQVVUSE9SSVpFRDtcbiAgICBjYXNlIDQwMzpcbiAgICAgIHJldHVybiBFUlJPUl9DT0RFUy5GT1JCSURERU47XG4gICAgY2FzZSA0MDQ6XG4gICAgICByZXR1cm4gRVJST1JfQ09ERVMuTk9UX0ZPVU5EO1xuICAgIGNhc2UgNDA5OlxuICAgICAgcmV0dXJuIEVSUk9SX0NPREVTLkNPTkZMSUNUO1xuICAgIGNhc2UgNTAyOlxuICAgIGNhc2UgNTAzOlxuICAgICAgcmV0dXJuIEVSUk9SX0NPREVTLkVYVEVSTkFMX1NFUlZJQ0VfRVJST1I7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBFUlJPUl9DT0RFUy5VTktOT1dOX0VSUk9SO1xuICB9XG59XG5cbi8qKlxuICogTWFwcyBlcnJvciBjb2RlcyB0byBIVFRQIHN0YXR1cyBjb2Rlcy5cbiAqIFxuICogQHBhcmFtIGNvZGUgLSBFcnJvciBjb2RlXG4gKiBAcmV0dXJucyBDb3JyZXNwb25kaW5nIEhUVFAgc3RhdHVzIGNvZGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFN0YXR1c0Zyb21FcnJvckNvZGUoY29kZTogRXJyb3JDb2RlKTogbnVtYmVyIHtcbiAgc3dpdGNoIChjb2RlKSB7XG4gICAgY2FzZSBFUlJPUl9DT0RFUy5WQUxJREFUSU9OX0VSUk9SOlxuICAgIGNhc2UgRVJST1JfQ09ERVMuSU5WQUxJRF9JTlBVVDpcbiAgICBjYXNlIEVSUk9SX0NPREVTLk1JU1NJTkdfUkVRVUlSRURfRklFTEQ6XG4gICAgICByZXR1cm4gNDAwO1xuICAgIGNhc2UgRVJST1JfQ09ERVMuVU5BVVRIT1JJWkVEOlxuICAgIGNhc2UgRVJST1JfQ09ERVMuSU5WQUxJRF9DUkVERU5USUFMUzpcbiAgICBjYXNlIEVSUk9SX0NPREVTLlNFU1NJT05fRVhQSVJFRDpcbiAgICAgIHJldHVybiA0MDE7XG4gICAgY2FzZSBFUlJPUl9DT0RFUy5GT1JCSURERU46XG4gICAgY2FzZSBFUlJPUl9DT0RFUy5JTlNVRkZJQ0lFTlRfUEVSTUlTU0lPTlM6XG4gICAgICByZXR1cm4gNDAzO1xuICAgIGNhc2UgRVJST1JfQ09ERVMuTk9UX0ZPVU5EOlxuICAgIGNhc2UgRVJST1JfQ09ERVMuR1VFU1RfTk9UX0ZPVU5EOlxuICAgIGNhc2UgRVJST1JfQ09ERVMuRVZFTlRfTk9UX0ZPVU5EOlxuICAgICAgcmV0dXJuIDQwNDtcbiAgICBjYXNlIEVSUk9SX0NPREVTLkNPTkZMSUNUOlxuICAgIGNhc2UgRVJST1JfQ09ERVMuRFVQTElDQVRFX0VOVFJZOlxuICAgIGNhc2UgRVJST1JfQ09ERVMuQ0FQQUNJVFlfRVhDRUVERUQ6XG4gICAgICByZXR1cm4gNDA5O1xuICAgIGNhc2UgRVJST1JfQ09ERVMuRVhURVJOQUxfU0VSVklDRV9FUlJPUjpcbiAgICBjYXNlIEVSUk9SX0NPREVTLlNUT1JBR0VfVU5BVkFJTEFCTEU6XG4gICAgY2FzZSBFUlJPUl9DT0RFUy5FTUFJTF9TRVJWSUNFX0VSUk9SOlxuICAgICAgcmV0dXJuIDUwMztcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIDUwMDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImRhdGFiYXNlRXJyb3IiLCJlcnJvciIsImdldEVycm9yQ29kZUZyb21TdGF0dXMiLCJnZXRTdGF0dXNGcm9tRXJyb3JDb2RlIiwibm90Rm91bmRFcnJvciIsInN1Y2Nlc3MiLCJ1bmF1dGhvcml6ZWRFcnJvciIsInVua25vd25FcnJvciIsInZhbGlkYXRpb25FcnJvciIsImRhdGEiLCJjb2RlIiwibWVzc2FnZSIsImRldGFpbHMiLCJFUlJPUl9DT0RFUyIsIlZBTElEQVRJT05fRVJST1IiLCJEQVRBQkFTRV9FUlJPUiIsIlVOQVVUSE9SSVpFRCIsInJlc291cmNlIiwiTk9UX0ZPVU5EIiwiZXJyIiwiRXJyb3IiLCJVTktOT1dOX0VSUk9SIiwic3RhdHVzIiwiRk9SQklEREVOIiwiQ09ORkxJQ1QiLCJFWFRFUk5BTF9TRVJWSUNFX0VSUk9SIiwiSU5WQUxJRF9JTlBVVCIsIk1JU1NJTkdfUkVRVUlSRURfRklFTEQiLCJJTlZBTElEX0NSRURFTlRJQUxTIiwiU0VTU0lPTl9FWFBJUkVEIiwiSU5TVUZGSUNJRU5UX1BFUk1JU1NJT05TIiwiR1VFU1RfTk9UX0ZPVU5EIiwiRVZFTlRfTk9UX0ZPVU5EIiwiRFVQTElDQVRFX0VOVFJZIiwiQ0FQQUNJVFlfRVhDRUVERUQiLCJTVE9SQUdFX1VOQVZBSUxBQkxFIiwiRU1BSUxfU0VSVklDRV9FUlJPUiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7UUFxRGdCQTtlQUFBQTs7UUFoQ0FDO2VBQUFBOztRQThFQUM7ZUFBQUE7O1FBMEJBQztlQUFBQTs7UUEvQ0FDO2VBQUFBOztRQXJFQUM7ZUFBQUE7O1FBeURBQztlQUFBQTs7UUFzQkFDO2VBQUFBOztRQWpEQUM7ZUFBQUE7Ozt1QkF0Q1k7QUFRckIsU0FBU0gsUUFBV0ksSUFBTztJQUNoQyxPQUFPO1FBQUVKLFNBQVM7UUFBTUk7SUFBSztBQUMvQjtBQVVPLFNBQVNSLE1BQ2RTLElBQWUsRUFDZkMsT0FBZSxFQUNmQyxPQUFpQjtJQUVqQixPQUFPO1FBQ0xQLFNBQVM7UUFDVEosT0FBTztZQUFFUztZQUFNQztZQUFTQztRQUFRO0lBQ2xDO0FBQ0Y7QUFTTyxTQUFTSixnQkFDZEcsVUFBa0IsbUJBQW1CLEVBQ3JDQyxPQUFpQjtJQUVqQixPQUFPWCxNQUFNWSxrQkFBVyxDQUFDQyxnQkFBZ0IsRUFBRUgsU0FBU0M7QUFDdEQ7QUFTTyxTQUFTWixjQUNkVyxVQUFrQiwyQkFBMkIsRUFDN0NDLE9BQWlCO0lBRWpCLE9BQU9YLE1BQU1ZLGtCQUFXLENBQUNFLGNBQWMsRUFBRUosU0FBU0M7QUFDcEQ7QUFRTyxTQUFTTixrQkFDZEssVUFBa0IseUJBQXlCO0lBRTNDLE9BQU9WLE1BQU1ZLGtCQUFXLENBQUNHLFlBQVksRUFBRUw7QUFDekM7QUFRTyxTQUFTUCxjQUFpQmEsV0FBbUIsVUFBVTtJQUM1RCxPQUFPaEIsTUFBTVksa0JBQVcsQ0FBQ0ssU0FBUyxFQUFFLEdBQUdELFNBQVMsVUFBVSxDQUFDO0FBQzdEO0FBUU8sU0FBU1YsYUFBZ0JZLEdBQVk7SUFDMUMsTUFBTVIsVUFBVVEsZUFBZUMsUUFBUUQsSUFBSVIsT0FBTyxHQUFHO0lBQ3JELE9BQU9WLE1BQU1ZLGtCQUFXLENBQUNRLGFBQWEsRUFBRVYsU0FBU1E7QUFDbkQ7QUFRTyxTQUFTakIsdUJBQXVCb0IsTUFBYztJQUNuRCxPQUFRQTtRQUNOLEtBQUs7WUFDSCxPQUFPVCxrQkFBVyxDQUFDQyxnQkFBZ0I7UUFDckMsS0FBSztZQUNILE9BQU9ELGtCQUFXLENBQUNHLFlBQVk7UUFDakMsS0FBSztZQUNILE9BQU9ILGtCQUFXLENBQUNVLFNBQVM7UUFDOUIsS0FBSztZQUNILE9BQU9WLGtCQUFXLENBQUNLLFNBQVM7UUFDOUIsS0FBSztZQUNILE9BQU9MLGtCQUFXLENBQUNXLFFBQVE7UUFDN0IsS0FBSztRQUNMLEtBQUs7WUFDSCxPQUFPWCxrQkFBVyxDQUFDWSxzQkFBc0I7UUFDM0M7WUFDRSxPQUFPWixrQkFBVyxDQUFDUSxhQUFhO0lBQ3BDO0FBQ0Y7QUFRTyxTQUFTbEIsdUJBQXVCTyxJQUFlO0lBQ3BELE9BQVFBO1FBQ04sS0FBS0csa0JBQVcsQ0FBQ0MsZ0JBQWdCO1FBQ2pDLEtBQUtELGtCQUFXLENBQUNhLGFBQWE7UUFDOUIsS0FBS2Isa0JBQVcsQ0FBQ2Msc0JBQXNCO1lBQ3JDLE9BQU87UUFDVCxLQUFLZCxrQkFBVyxDQUFDRyxZQUFZO1FBQzdCLEtBQUtILGtCQUFXLENBQUNlLG1CQUFtQjtRQUNwQyxLQUFLZixrQkFBVyxDQUFDZ0IsZUFBZTtZQUM5QixPQUFPO1FBQ1QsS0FBS2hCLGtCQUFXLENBQUNVLFNBQVM7UUFDMUIsS0FBS1Ysa0JBQVcsQ0FBQ2lCLHdCQUF3QjtZQUN2QyxPQUFPO1FBQ1QsS0FBS2pCLGtCQUFXLENBQUNLLFNBQVM7UUFDMUIsS0FBS0wsa0JBQVcsQ0FBQ2tCLGVBQWU7UUFDaEMsS0FBS2xCLGtCQUFXLENBQUNtQixlQUFlO1lBQzlCLE9BQU87UUFDVCxLQUFLbkIsa0JBQVcsQ0FBQ1csUUFBUTtRQUN6QixLQUFLWCxrQkFBVyxDQUFDb0IsZUFBZTtRQUNoQyxLQUFLcEIsa0JBQVcsQ0FBQ3FCLGlCQUFpQjtZQUNoQyxPQUFPO1FBQ1QsS0FBS3JCLGtCQUFXLENBQUNZLHNCQUFzQjtRQUN2QyxLQUFLWixrQkFBVyxDQUFDc0IsbUJBQW1CO1FBQ3BDLEtBQUt0QixrQkFBVyxDQUFDdUIsbUJBQW1CO1lBQ2xDLE9BQU87UUFDVDtZQUNFLE9BQU87SUFDWDtBQUNGIn0=