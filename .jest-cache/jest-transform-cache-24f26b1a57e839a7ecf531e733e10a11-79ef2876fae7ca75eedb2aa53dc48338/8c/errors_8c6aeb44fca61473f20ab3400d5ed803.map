{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/utils/errors.ts"],"sourcesContent":["import type { Result, ErrorDetails, ErrorCode } from '@/types';\nimport { ERROR_CODES } from '@/types';\n\n/**\n * Creates a success Result.\n * \n * @param data - The successful operation data\n * @returns Success Result containing the data\n */\nexport function success<T>(data: T): Result<T> {\n  return { success: true, data };\n}\n\n/**\n * Creates an error Result.\n * \n * @param code - Standard error code\n * @param message - Human-readable error message\n * @param details - Optional additional error details\n * @returns Error Result containing error information\n */\nexport function error<T>(\n  code: ErrorCode,\n  message: string,\n  details?: unknown\n): Result<T> {\n  return {\n    success: false,\n    error: { code, message, details },\n  };\n}\n\n/**\n * Creates a validation error Result.\n * \n * @param message - Validation error message\n * @param details - Optional validation error details (e.g., Zod issues)\n * @returns Validation error Result\n */\nexport function validationError<T>(\n  message: string = 'Validation failed',\n  details?: unknown\n): Result<T> {\n  return error(ERROR_CODES.VALIDATION_ERROR, message, details);\n}\n\n/**\n * Creates a database error Result.\n * \n * @param message - Database error message\n * @param details - Optional database error details\n * @returns Database error Result\n */\nexport function databaseError<T>(\n  message: string = 'Database operation failed',\n  details?: unknown\n): Result<T> {\n  return error(ERROR_CODES.DATABASE_ERROR, message, details);\n}\n\n/**\n * Creates an unauthorized error Result.\n * \n * @param message - Authorization error message\n * @returns Unauthorized error Result\n */\nexport function unauthorizedError<T>(\n  message: string = 'Authentication required'\n): Result<T> {\n  return error(ERROR_CODES.UNAUTHORIZED, message);\n}\n\n/**\n * Creates a not found error Result.\n * \n * @param resource - The resource that was not found\n * @returns Not found error Result\n */\nexport function notFoundError<T>(resource: string = 'Resource'): Result<T> {\n  return error(ERROR_CODES.NOT_FOUND, `${resource} not found`);\n}\n\n/**\n * Creates an unknown error Result from a caught exception.\n * \n * @param err - The caught error\n * @returns Unknown error Result\n */\nexport function unknownError<T>(err: unknown): Result<T> {\n  const message = err instanceof Error ? err.message : 'Unknown error occurred';\n  return error(ERROR_CODES.UNKNOWN_ERROR, message, err);\n}\n\n/**\n * Maps HTTP status codes to appropriate error codes.\n * \n * @param status - HTTP status code\n * @returns Corresponding error code\n */\nexport function getErrorCodeFromStatus(status: number): ErrorCode {\n  switch (status) {\n    case 400:\n      return ERROR_CODES.VALIDATION_ERROR;\n    case 401:\n      return ERROR_CODES.UNAUTHORIZED;\n    case 403:\n      return ERROR_CODES.FORBIDDEN;\n    case 404:\n      return ERROR_CODES.NOT_FOUND;\n    case 409:\n      return ERROR_CODES.CONFLICT;\n    case 502:\n    case 503:\n      return ERROR_CODES.EXTERNAL_SERVICE_ERROR;\n    default:\n      return ERROR_CODES.UNKNOWN_ERROR;\n  }\n}\n\n/**\n * Maps error codes to HTTP status codes.\n * \n * @param code - Error code\n * @returns Corresponding HTTP status code\n */\nexport function getStatusFromErrorCode(code: ErrorCode): number {\n  switch (code) {\n    case ERROR_CODES.VALIDATION_ERROR:\n    case ERROR_CODES.INVALID_INPUT:\n    case ERROR_CODES.MISSING_REQUIRED_FIELD:\n      return 400;\n    case ERROR_CODES.UNAUTHORIZED:\n    case ERROR_CODES.INVALID_CREDENTIALS:\n    case ERROR_CODES.SESSION_EXPIRED:\n      return 401;\n    case ERROR_CODES.FORBIDDEN:\n    case ERROR_CODES.INSUFFICIENT_PERMISSIONS:\n      return 403;\n    case ERROR_CODES.NOT_FOUND:\n    case ERROR_CODES.GUEST_NOT_FOUND:\n    case ERROR_CODES.EVENT_NOT_FOUND:\n      return 404;\n    case ERROR_CODES.CONFLICT:\n    case ERROR_CODES.DUPLICATE_ENTRY:\n    case ERROR_CODES.CAPACITY_EXCEEDED:\n      return 409;\n    case ERROR_CODES.EXTERNAL_SERVICE_ERROR:\n    case ERROR_CODES.STORAGE_UNAVAILABLE:\n    case ERROR_CODES.EMAIL_SERVICE_ERROR:\n      return 503;\n    default:\n      return 500;\n  }\n}\n"],"names":["databaseError","error","getErrorCodeFromStatus","getStatusFromErrorCode","notFoundError","success","unauthorizedError","unknownError","validationError","data","code","message","details","ERROR_CODES","VALIDATION_ERROR","DATABASE_ERROR","UNAUTHORIZED","resource","NOT_FOUND","err","Error","UNKNOWN_ERROR","status","FORBIDDEN","CONFLICT","EXTERNAL_SERVICE_ERROR","INVALID_INPUT","MISSING_REQUIRED_FIELD","INVALID_CREDENTIALS","SESSION_EXPIRED","INSUFFICIENT_PERMISSIONS","GUEST_NOT_FOUND","EVENT_NOT_FOUND","DUPLICATE_ENTRY","CAPACITY_EXCEEDED","STORAGE_UNAVAILABLE","EMAIL_SERVICE_ERROR"],"mappings":";;;;;;;;;;;QAqDgBA;eAAAA;;QAhCAC;eAAAA;;QA8EAC;eAAAA;;QA0BAC;eAAAA;;QA/CAC;eAAAA;;QArEAC;eAAAA;;QAyDAC;eAAAA;;QAsBAC;eAAAA;;QAjDAC;eAAAA;;;uBAtCY;AAQrB,SAASH,QAAWI,IAAO;IAChC,OAAO;QAAEJ,SAAS;QAAMI;IAAK;AAC/B;AAUO,SAASR,MACdS,IAAe,EACfC,OAAe,EACfC,OAAiB;IAEjB,OAAO;QACLP,SAAS;QACTJ,OAAO;YAAES;YAAMC;YAASC;QAAQ;IAClC;AACF;AASO,SAASJ,gBACdG,UAAkB,mBAAmB,EACrCC,OAAiB;IAEjB,OAAOX,MAAMY,kBAAW,CAACC,gBAAgB,EAAEH,SAASC;AACtD;AASO,SAASZ,cACdW,UAAkB,2BAA2B,EAC7CC,OAAiB;IAEjB,OAAOX,MAAMY,kBAAW,CAACE,cAAc,EAAEJ,SAASC;AACpD;AAQO,SAASN,kBACdK,UAAkB,yBAAyB;IAE3C,OAAOV,MAAMY,kBAAW,CAACG,YAAY,EAAEL;AACzC;AAQO,SAASP,cAAiBa,WAAmB,UAAU;IAC5D,OAAOhB,MAAMY,kBAAW,CAACK,SAAS,EAAE,GAAGD,SAAS,UAAU,CAAC;AAC7D;AAQO,SAASV,aAAgBY,GAAY;IAC1C,MAAMR,UAAUQ,eAAeC,QAAQD,IAAIR,OAAO,GAAG;IACrD,OAAOV,MAAMY,kBAAW,CAACQ,aAAa,EAAEV,SAASQ;AACnD;AAQO,SAASjB,uBAAuBoB,MAAc;IACnD,OAAQA;QACN,KAAK;YACH,OAAOT,kBAAW,CAACC,gBAAgB;QACrC,KAAK;YACH,OAAOD,kBAAW,CAACG,YAAY;QACjC,KAAK;YACH,OAAOH,kBAAW,CAACU,SAAS;QAC9B,KAAK;YACH,OAAOV,kBAAW,CAACK,SAAS;QAC9B,KAAK;YACH,OAAOL,kBAAW,CAACW,QAAQ;QAC7B,KAAK;QACL,KAAK;YACH,OAAOX,kBAAW,CAACY,sBAAsB;QAC3C;YACE,OAAOZ,kBAAW,CAACQ,aAAa;IACpC;AACF;AAQO,SAASlB,uBAAuBO,IAAe;IACpD,OAAQA;QACN,KAAKG,kBAAW,CAACC,gBAAgB;QACjC,KAAKD,kBAAW,CAACa,aAAa;QAC9B,KAAKb,kBAAW,CAACc,sBAAsB;YACrC,OAAO;QACT,KAAKd,kBAAW,CAACG,YAAY;QAC7B,KAAKH,kBAAW,CAACe,mBAAmB;QACpC,KAAKf,kBAAW,CAACgB,eAAe;YAC9B,OAAO;QACT,KAAKhB,kBAAW,CAACU,SAAS;QAC1B,KAAKV,kBAAW,CAACiB,wBAAwB;YACvC,OAAO;QACT,KAAKjB,kBAAW,CAACK,SAAS;QAC1B,KAAKL,kBAAW,CAACkB,eAAe;QAChC,KAAKlB,kBAAW,CAACmB,eAAe;YAC9B,OAAO;QACT,KAAKnB,kBAAW,CAACW,QAAQ;QACzB,KAAKX,kBAAW,CAACoB,eAAe;QAChC,KAAKpB,kBAAW,CAACqB,iBAAiB;YAChC,OAAO;QACT,KAAKrB,kBAAW,CAACY,sBAAsB;QACvC,KAAKZ,kBAAW,CAACsB,mBAAmB;QACpC,KAAKtB,kBAAW,CAACuB,mBAAmB;YAClC,OAAO;QACT;YACE,OAAO;IACX;AACF"}