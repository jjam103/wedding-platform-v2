5f96b97f728ebe2c3c9122d275581ac0
"use strict";
/**
 * Property-Based Test for Email Template Validation
 * Feature: destination-wedding-platform, Property 17: Email Template Validation
 * 
 * Property: For any email template with invalid syntax (unclosed tags, malformed HTML) 
 * or undefined variable references (variables not in the allowed list), the validation 
 * function should reject the template and return specific errors.
 * 
 * Validates: Requirements 13.8
 */ // Mock Supabase client
jest.mock('@supabase/supabase-js', ()=>({
        createClient: jest.fn(()=>({
                from: jest.fn(()=>({
                        insert: jest.fn((data)=>({
                                select: jest.fn(()=>({
                                        single: jest.fn(()=>Promise.resolve({
                                                data: {
                                                    id: 'test-id',
                                                    ...data,
                                                    created_at: new Date().toISOString(),
                                                    updated_at: new Date().toISOString()
                                                },
                                                error: null
                                            }))
                                    }))
                            }))
                    }))
            }))
    }));
// Mock Resend
jest.mock('resend', ()=>({
        Resend: jest.fn(()=>({}))
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _fastcheck = /*#__PURE__*/ _interop_require_wildcard(require("fast-check"));
const _emailService = require("./emailService");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
describe('Feature: destination-wedding-platform, Property 17: Email Template Validation', ()=>{
    // Arbitrary for valid template data
    const validTemplateArbitrary = _fastcheck.record({
        name: _fastcheck.string({
            minLength: 1,
            maxLength: 100
        }).filter((s)=>s.trim().length > 0),
        subject: _fastcheck.string({
            minLength: 1,
            maxLength: 200
        }).filter((s)=>s.trim().length > 0),
        body_html: _fastcheck.string({
            minLength: 1,
            maxLength: 500
        }).filter((s)=>s.trim().length > 0),
        body_text: _fastcheck.string({
            minLength: 1,
            maxLength: 500
        }).filter((s)=>s.trim().length > 0),
        variables: _fastcheck.array(_fastcheck.string({
            minLength: 1,
            maxLength: 20
        }).filter((s)=>/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(s)), {
            maxLength: 10
        })
    });
    // Arbitrary for templates with undefined variables
    const undefinedVariableArbitrary = _fastcheck.record({
        name: _fastcheck.string({
            minLength: 1,
            maxLength: 100
        }),
        subject: _fastcheck.string({
            minLength: 1,
            maxLength: 200
        }),
        body_html: _fastcheck.constantFrom('Hello {{undefined_var}}', 'Welcome {{missing_var}} to our wedding', 'RSVP by {{unknown_date}}', '{{bad_var}} is not defined'),
        body_text: _fastcheck.string({
            minLength: 1,
            maxLength: 500
        }),
        variables: _fastcheck.constant([
            'guest_name',
            'event_name'
        ])
    });
    // Arbitrary for templates with malformed HTML
    const malformedHTMLArbitrary = _fastcheck.record({
        name: _fastcheck.string({
            minLength: 1,
            maxLength: 100
        }).filter((s)=>s.trim().length > 0),
        subject: _fastcheck.string({
            minLength: 1,
            maxLength: 200
        }).filter((s)=>s.trim().length > 0),
        body_html: _fastcheck.constantFrom('<p>Unclosed paragraph', '<div><span>Unclosed span</div>', '<strong>Bold <em>italic</strong></em>', '<a href="test">Link without closing', '<script>alert("xss")</script>'),
        body_text: _fastcheck.string({
            minLength: 1,
            maxLength: 500
        }).filter((s)=>s.trim().length > 0),
        variables: _fastcheck.array(_fastcheck.string({
            minLength: 1,
            maxLength: 20
        }).filter((s)=>/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(s)), {
            maxLength: 5
        })
    });
    it('should reject templates with undefined variable references', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(undefinedVariableArbitrary, async (templateData)=>{
            const result = await (0, _emailService.createTemplate)(templateData);
            // Should fail validation
            expect(result.success).toBe(false);
            if (!result.success) {
                // Should return VALIDATION_ERROR
                expect(result.error.code).toBe('VALIDATION_ERROR');
                // Should mention undefined variables
                expect(result.error.message.toLowerCase().includes('undefined') || result.error.message.toLowerCase().includes('variable')).toBe(true);
                // Should provide details about which variables are undefined
                expect(result.error.details).toBeDefined();
            }
        }), {
            numRuns: 100
        });
    });
    it('should accept templates with all variables properly defined', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(validTemplateArbitrary, async (templateData)=>{
            // Create template with variables that are all used in the body
            const variables = templateData.variables;
            const body_html = `<p>Hello {{${variables[0] || 'guest_name'}}}</p>`;
            const body_text = `Hello {{${variables[0] || 'guest_name'}}}`;
            const result = await (0, _emailService.createTemplate)({
                ...templateData,
                body_html,
                body_text,
                variables: variables.length > 0 ? variables : [
                    'guest_name'
                ]
            });
            // Should succeed
            expect(result.success).toBe(true);
        }), {
            numRuns: 100
        });
    });
    it('should sanitize malformed HTML but still accept template', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(malformedHTMLArbitrary, async (templateData)=>{
            const result = await (0, _emailService.createTemplate)(templateData);
            // Malformed HTML should be sanitized, not rejected
            // (DOMPurify will clean it up)
            expect(result.success).toBe(true);
            if (result.success) {
                // Script tags should be removed
                expect(result.data.body_html).not.toContain('<script>');
                expect(result.data.body_html).not.toContain('alert');
            }
        }), {
            numRuns: 100
        });
    });
    it('should reject templates with variables in body but not in variables array', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.record({
            name: _fastcheck.string({
                minLength: 1,
                maxLength: 100
            }),
            subject: _fastcheck.string({
                minLength: 1,
                maxLength: 200
            }),
            body_html: _fastcheck.constant('<p>Hello {{guest_name}}, welcome to {{event_name}}</p>'),
            body_text: _fastcheck.constant('Hello {{guest_name}}, welcome to {{event_name}}'),
            variables: _fastcheck.constant([
                'guest_name'
            ])
        }), async (templateData)=>{
            const result = await (0, _emailService.createTemplate)(templateData);
            // Should fail because event_name is not in variables array
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
                expect(result.error.details).toBeDefined();
                // Should identify event_name as undefined
                const details = result.error.details;
                if (details.undefinedVariables) {
                    expect(details.undefinedVariables).toContain('event_name');
                }
            }
        }), {
            numRuns: 100
        });
    });
    it('should validate both HTML and text bodies for undefined variables', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.record({
            name: _fastcheck.string({
                minLength: 1,
                maxLength: 100
            }),
            subject: _fastcheck.string({
                minLength: 1,
                maxLength: 200
            }),
            body_html: _fastcheck.constant('<p>Hello {{guest_name}}</p>'),
            body_text: _fastcheck.constant('Hello {{undefined_var}}'),
            variables: _fastcheck.constant([
                'guest_name'
            ])
        }), async (templateData)=>{
            const result = await (0, _emailService.createTemplate)(templateData);
            // Should fail because text body has undefined variable
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
            }
        }), {
            numRuns: 100
        });
    });
    it('should handle templates with no variables', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.record({
            name: _fastcheck.string({
                minLength: 1,
                maxLength: 100
            }),
            subject: _fastcheck.string({
                minLength: 1,
                maxLength: 200
            }),
            body_html: _fastcheck.string({
                minLength: 1,
                maxLength: 500
            }).filter((s)=>!s.includes('{{')),
            body_text: _fastcheck.string({
                minLength: 1,
                maxLength: 500
            }).filter((s)=>!s.includes('{{')),
            variables: _fastcheck.constant([])
        }), async (templateData)=>{
            const result = await (0, _emailService.createTemplate)(templateData);
            // Should succeed - no variables to validate
            expect(result.success).toBe(true);
        }), {
            numRuns: 100
        });
    });
    it('should reject templates with missing required fields', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.oneof(_fastcheck.record({
            name: _fastcheck.constant(''),
            subject: _fastcheck.string({
                minLength: 1,
                maxLength: 200
            }),
            body_html: _fastcheck.string({
                minLength: 1,
                maxLength: 500
            }),
            body_text: _fastcheck.string({
                minLength: 1,
                maxLength: 500
            }),
            variables: _fastcheck.array(_fastcheck.string())
        }), _fastcheck.record({
            name: _fastcheck.string({
                minLength: 1,
                maxLength: 100
            }),
            subject: _fastcheck.constant(''),
            body_html: _fastcheck.string({
                minLength: 1,
                maxLength: 500
            }),
            body_text: _fastcheck.string({
                minLength: 1,
                maxLength: 500
            }),
            variables: _fastcheck.array(_fastcheck.string())
        }), _fastcheck.record({
            name: _fastcheck.string({
                minLength: 1,
                maxLength: 100
            }),
            subject: _fastcheck.string({
                minLength: 1,
                maxLength: 200
            }),
            body_html: _fastcheck.constant(''),
            body_text: _fastcheck.string({
                minLength: 1,
                maxLength: 500
            }),
            variables: _fastcheck.array(_fastcheck.string())
        })), async (templateData)=>{
            const result = await (0, _emailService.createTemplate)(templateData);
            // Should fail validation for missing required fields
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
            }
        }), {
            numRuns: 100
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvc2VydmljZXMvZW1haWxUZW1wbGF0ZVZhbGlkYXRpb24ucHJvcGVydHkudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBmYyBmcm9tICdmYXN0LWNoZWNrJztcbmltcG9ydCB7IGNyZWF0ZVRlbXBsYXRlIH0gZnJvbSAnLi9lbWFpbFNlcnZpY2UnO1xuaW1wb3J0IHR5cGUgeyBDcmVhdGVFbWFpbFRlbXBsYXRlRFRPIH0gZnJvbSAnQC9zY2hlbWFzL2VtYWlsU2NoZW1hcyc7XG5cbi8qKlxuICogUHJvcGVydHktQmFzZWQgVGVzdCBmb3IgRW1haWwgVGVtcGxhdGUgVmFsaWRhdGlvblxuICogRmVhdHVyZTogZGVzdGluYXRpb24td2VkZGluZy1wbGF0Zm9ybSwgUHJvcGVydHkgMTc6IEVtYWlsIFRlbXBsYXRlIFZhbGlkYXRpb25cbiAqIFxuICogUHJvcGVydHk6IEZvciBhbnkgZW1haWwgdGVtcGxhdGUgd2l0aCBpbnZhbGlkIHN5bnRheCAodW5jbG9zZWQgdGFncywgbWFsZm9ybWVkIEhUTUwpIFxuICogb3IgdW5kZWZpbmVkIHZhcmlhYmxlIHJlZmVyZW5jZXMgKHZhcmlhYmxlcyBub3QgaW4gdGhlIGFsbG93ZWQgbGlzdCksIHRoZSB2YWxpZGF0aW9uIFxuICogZnVuY3Rpb24gc2hvdWxkIHJlamVjdCB0aGUgdGVtcGxhdGUgYW5kIHJldHVybiBzcGVjaWZpYyBlcnJvcnMuXG4gKiBcbiAqIFZhbGlkYXRlczogUmVxdWlyZW1lbnRzIDEzLjhcbiAqL1xuXG4vLyBNb2NrIFN1cGFiYXNlIGNsaWVudFxuamVzdC5tb2NrKCdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnLCAoKSA9PiAoe1xuICBjcmVhdGVDbGllbnQ6IGplc3QuZm4oKCkgPT4gKHtcbiAgICBmcm9tOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICBpbnNlcnQ6IGplc3QuZm4oKGRhdGEpID0+ICh7XG4gICAgICAgIHNlbGVjdDogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICAgIHNpbmdsZTogamVzdC5mbigoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBcbiAgICAgICAgICAgIGRhdGE6IHsgXG4gICAgICAgICAgICAgIGlkOiAndGVzdC1pZCcsIFxuICAgICAgICAgICAgICAuLi5kYXRhLFxuICAgICAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgfSwgXG4gICAgICAgICAgICBlcnJvcjogbnVsbCBcbiAgICAgICAgICB9KSksXG4gICAgICAgIH0pKSxcbiAgICAgIH0pKSxcbiAgICB9KSksXG4gIH0pKSxcbn0pKTtcblxuLy8gTW9jayBSZXNlbmRcbmplc3QubW9jaygncmVzZW5kJywgKCkgPT4gKHtcbiAgUmVzZW5kOiBqZXN0LmZuKCgpID0+ICh7fSkpLFxufSkpO1xuXG5kZXNjcmliZSgnRmVhdHVyZTogZGVzdGluYXRpb24td2VkZGluZy1wbGF0Zm9ybSwgUHJvcGVydHkgMTc6IEVtYWlsIFRlbXBsYXRlIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gIC8vIEFyYml0cmFyeSBmb3IgdmFsaWQgdGVtcGxhdGUgZGF0YVxuICBjb25zdCB2YWxpZFRlbXBsYXRlQXJiaXRyYXJ5ID0gZmMucmVjb3JkKHtcbiAgICBuYW1lOiBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogMTAwIH0pLmZpbHRlcihzID0+IHMudHJpbSgpLmxlbmd0aCA+IDApLFxuICAgIHN1YmplY3Q6IGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiAyMDAgfSkuZmlsdGVyKHMgPT4gcy50cmltKCkubGVuZ3RoID4gMCksXG4gICAgYm9keV9odG1sOiBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogNTAwIH0pLmZpbHRlcihzID0+IHMudHJpbSgpLmxlbmd0aCA+IDApLFxuICAgIGJvZHlfdGV4dDogZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDUwMCB9KS5maWx0ZXIocyA9PiBzLnRyaW0oKS5sZW5ndGggPiAwKSxcbiAgICB2YXJpYWJsZXM6IGZjLmFycmF5KFxuICAgICAgZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDIwIH0pXG4gICAgICAgIC5maWx0ZXIocyA9PiAvXlthLXpBLVpfXVthLXpBLVowLTlfXSokLy50ZXN0KHMpKSwgLy8gVmFsaWQgdmFyaWFibGUgbmFtZXMgb25seVxuICAgICAgeyBtYXhMZW5ndGg6IDEwIH1cbiAgICApLFxuICB9KTtcblxuICAvLyBBcmJpdHJhcnkgZm9yIHRlbXBsYXRlcyB3aXRoIHVuZGVmaW5lZCB2YXJpYWJsZXNcbiAgY29uc3QgdW5kZWZpbmVkVmFyaWFibGVBcmJpdHJhcnkgPSBmYy5yZWNvcmQoe1xuICAgIG5hbWU6IGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiAxMDAgfSksXG4gICAgc3ViamVjdDogZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDIwMCB9KSxcbiAgICBib2R5X2h0bWw6IGZjLmNvbnN0YW50RnJvbShcbiAgICAgICdIZWxsbyB7e3VuZGVmaW5lZF92YXJ9fScsXG4gICAgICAnV2VsY29tZSB7e21pc3NpbmdfdmFyfX0gdG8gb3VyIHdlZGRpbmcnLFxuICAgICAgJ1JTVlAgYnkge3t1bmtub3duX2RhdGV9fScsXG4gICAgICAne3tiYWRfdmFyfX0gaXMgbm90IGRlZmluZWQnXG4gICAgKSxcbiAgICBib2R5X3RleHQ6IGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiA1MDAgfSksXG4gICAgdmFyaWFibGVzOiBmYy5jb25zdGFudChbJ2d1ZXN0X25hbWUnLCAnZXZlbnRfbmFtZSddKSwgLy8gRGVmaW5lZCB2YXJpYWJsZXNcbiAgfSk7XG5cbiAgLy8gQXJiaXRyYXJ5IGZvciB0ZW1wbGF0ZXMgd2l0aCBtYWxmb3JtZWQgSFRNTFxuICBjb25zdCBtYWxmb3JtZWRIVE1MQXJiaXRyYXJ5ID0gZmMucmVjb3JkKHtcbiAgICBuYW1lOiBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogMTAwIH0pLmZpbHRlcihzID0+IHMudHJpbSgpLmxlbmd0aCA+IDApLFxuICAgIHN1YmplY3Q6IGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiAyMDAgfSkuZmlsdGVyKHMgPT4gcy50cmltKCkubGVuZ3RoID4gMCksXG4gICAgYm9keV9odG1sOiBmYy5jb25zdGFudEZyb20oXG4gICAgICAnPHA+VW5jbG9zZWQgcGFyYWdyYXBoJyxcbiAgICAgICc8ZGl2PjxzcGFuPlVuY2xvc2VkIHNwYW48L2Rpdj4nLFxuICAgICAgJzxzdHJvbmc+Qm9sZCA8ZW0+aXRhbGljPC9zdHJvbmc+PC9lbT4nLFxuICAgICAgJzxhIGhyZWY9XCJ0ZXN0XCI+TGluayB3aXRob3V0IGNsb3NpbmcnLFxuICAgICAgJzxzY3JpcHQ+YWxlcnQoXCJ4c3NcIik8L3NjcmlwdD4nLCAvLyBTaG91bGQgYmUgc2FuaXRpemVkXG4gICAgKSxcbiAgICBib2R5X3RleHQ6IGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiA1MDAgfSkuZmlsdGVyKHMgPT4gcy50cmltKCkubGVuZ3RoID4gMCksXG4gICAgdmFyaWFibGVzOiBmYy5hcnJheShcbiAgICAgIGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiAyMCB9KVxuICAgICAgICAuZmlsdGVyKHMgPT4gL15bYS16QS1aX11bYS16QS1aMC05X10qJC8udGVzdChzKSksXG4gICAgICB7IG1heExlbmd0aDogNSB9XG4gICAgKSxcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZWplY3QgdGVtcGxhdGVzIHdpdGggdW5kZWZpbmVkIHZhcmlhYmxlIHJlZmVyZW5jZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgZmMuYXNzZXJ0KFxuICAgICAgZmMuYXN5bmNQcm9wZXJ0eSh1bmRlZmluZWRWYXJpYWJsZUFyYml0cmFyeSwgYXN5bmMgKHRlbXBsYXRlRGF0YSkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVUZW1wbGF0ZSh0ZW1wbGF0ZURhdGEpO1xuXG4gICAgICAgIC8vIFNob3VsZCBmYWlsIHZhbGlkYXRpb25cbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAvLyBTaG91bGQgcmV0dXJuIFZBTElEQVRJT05fRVJST1JcbiAgICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTaG91bGQgbWVudGlvbiB1bmRlZmluZWQgdmFyaWFibGVzXG4gICAgICAgICAgZXhwZWN0KFxuICAgICAgICAgICAgcmVzdWx0LmVycm9yLm1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygndW5kZWZpbmVkJykgfHxcbiAgICAgICAgICAgIHJlc3VsdC5lcnJvci5tZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3ZhcmlhYmxlJylcbiAgICAgICAgICApLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2hvdWxkIHByb3ZpZGUgZGV0YWlscyBhYm91dCB3aGljaCB2YXJpYWJsZXMgYXJlIHVuZGVmaW5lZFxuICAgICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuZGV0YWlscykudG9CZURlZmluZWQoKTtcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBhY2NlcHQgdGVtcGxhdGVzIHdpdGggYWxsIHZhcmlhYmxlcyBwcm9wZXJseSBkZWZpbmVkJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGZjLmFzc2VydChcbiAgICAgIGZjLmFzeW5jUHJvcGVydHkodmFsaWRUZW1wbGF0ZUFyYml0cmFyeSwgYXN5bmMgKHRlbXBsYXRlRGF0YSkgPT4ge1xuICAgICAgICAvLyBDcmVhdGUgdGVtcGxhdGUgd2l0aCB2YXJpYWJsZXMgdGhhdCBhcmUgYWxsIHVzZWQgaW4gdGhlIGJvZHlcbiAgICAgICAgY29uc3QgdmFyaWFibGVzID0gdGVtcGxhdGVEYXRhLnZhcmlhYmxlcztcbiAgICAgICAgY29uc3QgYm9keV9odG1sID0gYDxwPkhlbGxvIHt7JHt2YXJpYWJsZXNbMF0gfHwgJ2d1ZXN0X25hbWUnfX19PC9wPmA7XG4gICAgICAgIGNvbnN0IGJvZHlfdGV4dCA9IGBIZWxsbyB7eyR7dmFyaWFibGVzWzBdIHx8ICdndWVzdF9uYW1lJ319fWA7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3JlYXRlVGVtcGxhdGUoe1xuICAgICAgICAgIC4uLnRlbXBsYXRlRGF0YSxcbiAgICAgICAgICBib2R5X2h0bWwsXG4gICAgICAgICAgYm9keV90ZXh0LFxuICAgICAgICAgIHZhcmlhYmxlczogdmFyaWFibGVzLmxlbmd0aCA+IDAgPyB2YXJpYWJsZXMgOiBbJ2d1ZXN0X25hbWUnXSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2hvdWxkIHN1Y2NlZWRcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgfSksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBzYW5pdGl6ZSBtYWxmb3JtZWQgSFRNTCBidXQgc3RpbGwgYWNjZXB0IHRlbXBsYXRlJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGZjLmFzc2VydChcbiAgICAgIGZjLmFzeW5jUHJvcGVydHkobWFsZm9ybWVkSFRNTEFyYml0cmFyeSwgYXN5bmMgKHRlbXBsYXRlRGF0YSkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVUZW1wbGF0ZSh0ZW1wbGF0ZURhdGEpO1xuXG4gICAgICAgIC8vIE1hbGZvcm1lZCBIVE1MIHNob3VsZCBiZSBzYW5pdGl6ZWQsIG5vdCByZWplY3RlZFxuICAgICAgICAvLyAoRE9NUHVyaWZ5IHdpbGwgY2xlYW4gaXQgdXApXG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgIC8vIFNjcmlwdCB0YWdzIHNob3VsZCBiZSByZW1vdmVkXG4gICAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmJvZHlfaHRtbCkubm90LnRvQ29udGFpbignPHNjcmlwdD4nKTtcbiAgICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuYm9keV9odG1sKS5ub3QudG9Db250YWluKCdhbGVydCcpO1xuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIHsgbnVtUnVuczogMTAwIH1cbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJlamVjdCB0ZW1wbGF0ZXMgd2l0aCB2YXJpYWJsZXMgaW4gYm9keSBidXQgbm90IGluIHZhcmlhYmxlcyBhcnJheScsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBmYy5hc3NlcnQoXG4gICAgICBmYy5hc3luY1Byb3BlcnR5KFxuICAgICAgICBmYy5yZWNvcmQoe1xuICAgICAgICAgIG5hbWU6IGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiAxMDAgfSksXG4gICAgICAgICAgc3ViamVjdDogZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDIwMCB9KSxcbiAgICAgICAgICBib2R5X2h0bWw6IGZjLmNvbnN0YW50KCc8cD5IZWxsbyB7e2d1ZXN0X25hbWV9fSwgd2VsY29tZSB0byB7e2V2ZW50X25hbWV9fTwvcD4nKSxcbiAgICAgICAgICBib2R5X3RleHQ6IGZjLmNvbnN0YW50KCdIZWxsbyB7e2d1ZXN0X25hbWV9fSwgd2VsY29tZSB0byB7e2V2ZW50X25hbWV9fScpLFxuICAgICAgICAgIHZhcmlhYmxlczogZmMuY29uc3RhbnQoWydndWVzdF9uYW1lJ10pLCAvLyBNaXNzaW5nIGV2ZW50X25hbWVcbiAgICAgICAgfSksXG4gICAgICAgIGFzeW5jICh0ZW1wbGF0ZURhdGEpID0+IHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVUZW1wbGF0ZSh0ZW1wbGF0ZURhdGEpO1xuXG4gICAgICAgICAgLy8gU2hvdWxkIGZhaWwgYmVjYXVzZSBldmVudF9uYW1lIGlzIG5vdCBpbiB2YXJpYWJsZXMgYXJyYXlcbiAgICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5kZXRhaWxzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTaG91bGQgaWRlbnRpZnkgZXZlbnRfbmFtZSBhcyB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbnN0IGRldGFpbHMgPSByZXN1bHQuZXJyb3IuZGV0YWlscyBhcyBhbnk7XG4gICAgICAgICAgICBpZiAoZGV0YWlscy51bmRlZmluZWRWYXJpYWJsZXMpIHtcbiAgICAgICAgICAgICAgZXhwZWN0KGRldGFpbHMudW5kZWZpbmVkVmFyaWFibGVzKS50b0NvbnRhaW4oJ2V2ZW50X25hbWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBib3RoIEhUTUwgYW5kIHRleHQgYm9kaWVzIGZvciB1bmRlZmluZWQgdmFyaWFibGVzJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGZjLmFzc2VydChcbiAgICAgIGZjLmFzeW5jUHJvcGVydHkoXG4gICAgICAgIGZjLnJlY29yZCh7XG4gICAgICAgICAgbmFtZTogZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDEwMCB9KSxcbiAgICAgICAgICBzdWJqZWN0OiBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogMjAwIH0pLFxuICAgICAgICAgIGJvZHlfaHRtbDogZmMuY29uc3RhbnQoJzxwPkhlbGxvIHt7Z3Vlc3RfbmFtZX19PC9wPicpLFxuICAgICAgICAgIGJvZHlfdGV4dDogZmMuY29uc3RhbnQoJ0hlbGxvIHt7dW5kZWZpbmVkX3Zhcn19JyksIC8vIFVuZGVmaW5lZCBpbiB0ZXh0XG4gICAgICAgICAgdmFyaWFibGVzOiBmYy5jb25zdGFudChbJ2d1ZXN0X25hbWUnXSksXG4gICAgICAgIH0pLFxuICAgICAgICBhc3luYyAodGVtcGxhdGVEYXRhKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3JlYXRlVGVtcGxhdGUodGVtcGxhdGVEYXRhKTtcblxuICAgICAgICAgIC8vIFNob3VsZCBmYWlsIGJlY2F1c2UgdGV4dCBib2R5IGhhcyB1bmRlZmluZWQgdmFyaWFibGVcbiAgICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIHsgbnVtUnVuczogMTAwIH1cbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhbmRsZSB0ZW1wbGF0ZXMgd2l0aCBubyB2YXJpYWJsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgZmMuYXNzZXJ0KFxuICAgICAgZmMuYXN5bmNQcm9wZXJ0eShcbiAgICAgICAgZmMucmVjb3JkKHtcbiAgICAgICAgICBuYW1lOiBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogMTAwIH0pLFxuICAgICAgICAgIHN1YmplY3Q6IGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiAyMDAgfSksXG4gICAgICAgICAgYm9keV9odG1sOiBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogNTAwIH0pLmZpbHRlcihzID0+ICFzLmluY2x1ZGVzKCd7eycpKSxcbiAgICAgICAgICBib2R5X3RleHQ6IGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiA1MDAgfSkuZmlsdGVyKHMgPT4gIXMuaW5jbHVkZXMoJ3t7JykpLFxuICAgICAgICAgIHZhcmlhYmxlczogZmMuY29uc3RhbnQoW10pLFxuICAgICAgICB9KSxcbiAgICAgICAgYXN5bmMgKHRlbXBsYXRlRGF0YSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNyZWF0ZVRlbXBsYXRlKHRlbXBsYXRlRGF0YSk7XG5cbiAgICAgICAgICAvLyBTaG91bGQgc3VjY2VlZCAtIG5vIHZhcmlhYmxlcyB0byB2YWxpZGF0ZVxuICAgICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIHsgbnVtUnVuczogMTAwIH1cbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJlamVjdCB0ZW1wbGF0ZXMgd2l0aCBtaXNzaW5nIHJlcXVpcmVkIGZpZWxkcycsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBmYy5hc3NlcnQoXG4gICAgICBmYy5hc3luY1Byb3BlcnR5KFxuICAgICAgICBmYy5vbmVvZihcbiAgICAgICAgICBmYy5yZWNvcmQoe1xuICAgICAgICAgICAgbmFtZTogZmMuY29uc3RhbnQoJycpLFxuICAgICAgICAgICAgc3ViamVjdDogZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDIwMCB9KSxcbiAgICAgICAgICAgIGJvZHlfaHRtbDogZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDUwMCB9KSxcbiAgICAgICAgICAgIGJvZHlfdGV4dDogZmMuc3RyaW5nKHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDUwMCB9KSxcbiAgICAgICAgICAgIHZhcmlhYmxlczogZmMuYXJyYXkoZmMuc3RyaW5nKCkpLFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGZjLnJlY29yZCh7XG4gICAgICAgICAgICBuYW1lOiBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogMTAwIH0pLFxuICAgICAgICAgICAgc3ViamVjdDogZmMuY29uc3RhbnQoJycpLFxuICAgICAgICAgICAgYm9keV9odG1sOiBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogNTAwIH0pLFxuICAgICAgICAgICAgYm9keV90ZXh0OiBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogNTAwIH0pLFxuICAgICAgICAgICAgdmFyaWFibGVzOiBmYy5hcnJheShmYy5zdHJpbmcoKSksXG4gICAgICAgICAgfSksXG4gICAgICAgICAgZmMucmVjb3JkKHtcbiAgICAgICAgICAgIG5hbWU6IGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiAxMDAgfSksXG4gICAgICAgICAgICBzdWJqZWN0OiBmYy5zdHJpbmcoeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogMjAwIH0pLFxuICAgICAgICAgICAgYm9keV9odG1sOiBmYy5jb25zdGFudCgnJyksXG4gICAgICAgICAgICBib2R5X3RleHQ6IGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiA1MDAgfSksXG4gICAgICAgICAgICB2YXJpYWJsZXM6IGZjLmFycmF5KGZjLnN0cmluZygpKSxcbiAgICAgICAgICB9KVxuICAgICAgICApLFxuICAgICAgICBhc3luYyAodGVtcGxhdGVEYXRhKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3JlYXRlVGVtcGxhdGUodGVtcGxhdGVEYXRhIGFzIENyZWF0ZUVtYWlsVGVtcGxhdGVEVE8pO1xuXG4gICAgICAgICAgLy8gU2hvdWxkIGZhaWwgdmFsaWRhdGlvbiBmb3IgbWlzc2luZyByZXF1aXJlZCBmaWVsZHNcbiAgICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIHsgbnVtUnVuczogMTAwIH1cbiAgICApO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwiY3JlYXRlQ2xpZW50IiwiZm4iLCJmcm9tIiwiaW5zZXJ0IiwiZGF0YSIsInNlbGVjdCIsInNpbmdsZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiaWQiLCJjcmVhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidXBkYXRlZF9hdCIsImVycm9yIiwiUmVzZW5kIiwiZGVzY3JpYmUiLCJ2YWxpZFRlbXBsYXRlQXJiaXRyYXJ5IiwiZmMiLCJyZWNvcmQiLCJuYW1lIiwic3RyaW5nIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwiZmlsdGVyIiwicyIsInRyaW0iLCJsZW5ndGgiLCJzdWJqZWN0IiwiYm9keV9odG1sIiwiYm9keV90ZXh0IiwidmFyaWFibGVzIiwiYXJyYXkiLCJ0ZXN0IiwidW5kZWZpbmVkVmFyaWFibGVBcmJpdHJhcnkiLCJjb25zdGFudEZyb20iLCJjb25zdGFudCIsIm1hbGZvcm1lZEhUTUxBcmJpdHJhcnkiLCJpdCIsImFzc2VydCIsImFzeW5jUHJvcGVydHkiLCJ0ZW1wbGF0ZURhdGEiLCJyZXN1bHQiLCJjcmVhdGVUZW1wbGF0ZSIsImV4cGVjdCIsInN1Y2Nlc3MiLCJ0b0JlIiwiY29kZSIsIm1lc3NhZ2UiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiZGV0YWlscyIsInRvQmVEZWZpbmVkIiwibnVtUnVucyIsIm5vdCIsInRvQ29udGFpbiIsInVuZGVmaW5lZFZhcmlhYmxlcyIsIm9uZW9mIl0sIm1hcHBpbmdzIjoiO0FBSUE7Ozs7Ozs7OztDQVNDLEdBRUQsdUJBQXVCO0FBQ3ZCQSxLQUFLQyxJQUFJLENBQUMseUJBQXlCLElBQU8sQ0FBQTtRQUN4Q0MsY0FBY0YsS0FBS0csRUFBRSxDQUFDLElBQU8sQ0FBQTtnQkFDM0JDLE1BQU1KLEtBQUtHLEVBQUUsQ0FBQyxJQUFPLENBQUE7d0JBQ25CRSxRQUFRTCxLQUFLRyxFQUFFLENBQUMsQ0FBQ0csT0FBVSxDQUFBO2dDQUN6QkMsUUFBUVAsS0FBS0csRUFBRSxDQUFDLElBQU8sQ0FBQTt3Q0FDckJLLFFBQVFSLEtBQUtHLEVBQUUsQ0FBQyxJQUFNTSxRQUFRQyxPQUFPLENBQUM7Z0RBQ3BDSixNQUFNO29EQUNKSyxJQUFJO29EQUNKLEdBQUdMLElBQUk7b0RBQ1BNLFlBQVksSUFBSUMsT0FBT0MsV0FBVztvREFDbENDLFlBQVksSUFBSUYsT0FBT0MsV0FBVztnREFDcEM7Z0RBQ0FFLE9BQU87NENBQ1Q7b0NBQ0YsQ0FBQTs0QkFDRixDQUFBO29CQUNGLENBQUE7WUFDRixDQUFBO0lBQ0YsQ0FBQTtBQUVBLGNBQWM7QUFDZGhCLEtBQUtDLElBQUksQ0FBQyxVQUFVLElBQU8sQ0FBQTtRQUN6QmdCLFFBQVFqQixLQUFLRyxFQUFFLENBQUMsSUFBTyxDQUFBLENBQUMsQ0FBQTtJQUMxQixDQUFBOzs7O21FQXZDb0I7OEJBQ1c7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztB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