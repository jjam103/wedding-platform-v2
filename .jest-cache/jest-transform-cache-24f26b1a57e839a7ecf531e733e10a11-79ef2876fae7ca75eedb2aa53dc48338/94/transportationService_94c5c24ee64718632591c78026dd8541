9d142655b5c0ae105d7f53647d5f9c4e
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get _resetSupabaseForTesting () {
        return _resetSupabaseForTesting;
    },
    get _setSupabaseForTesting () {
        return _setSupabaseForTesting;
    },
    get assignGuestsToShuttle () {
        return assignGuestsToShuttle;
    },
    get calculateShuttleCosts () {
        return calculateShuttleCosts;
    },
    get calculateVehicleRequirements () {
        return calculateVehicleRequirements;
    },
    get createManifest () {
        return createManifest;
    },
    get generateArrivalManifest () {
        return generateArrivalManifest;
    },
    get generateDepartureManifest () {
        return generateDepartureManifest;
    },
    get generateDriverSheet () {
        return generateDriverSheet;
    },
    get getFlightsByAirport () {
        return getFlightsByAirport;
    },
    get updateFlightInfo () {
        return updateFlightInfo;
    }
});
const _sanitization = require("../utils/sanitization");
const _types = require("../types");
const _transportationSchemas = require("../schemas/transportationSchemas");
// Supabase client - can be overridden for testing
let _supabase = null;
/**
 * Gets the Supabase client instance.
 * Lazy loads the client to avoid initialization issues in tests.
 */ function getSupabase() {
    if (!_supabase) {
        const { supabase } = require('@/lib/supabase');
        _supabase = supabase;
    }
    return _supabase;
}
function _setSupabaseForTesting(client) {
    _supabase = client;
}
function _resetSupabaseForTesting() {
    _supabase = null;
}
async function updateFlightInfo(guestId, flightInfo) {
    try {
        // 1. Validate
        const validation = _transportationSchemas.flightInfoSchema.safeParse(flightInfo);
        if (!validation.success) {
            return {
                success: false,
                error: {
                    code: _types.ERROR_CODES.VALIDATION_ERROR,
                    message: 'Invalid flight information',
                    details: validation.error.issues
                }
            };
        }
        // 2. Sanitize
        const sanitized = {
            ...validation.data,
            flight_number: validation.data.flight_number ? (0, _sanitization.sanitizeInput)(validation.data.flight_number) : undefined,
            airline: validation.data.airline ? (0, _sanitization.sanitizeInput)(validation.data.airline) : undefined
        };
        // 3. Update guest record
        const supabase = getSupabase();
        // Extract date and time components from datetime strings
        const arrivalDate = sanitized.arrival_time ? new Date(sanitized.arrival_time).toISOString().split('T')[0] : undefined;
        const arrivalTime = sanitized.arrival_time ? new Date(sanitized.arrival_time).toISOString().split('T')[1].substring(0, 8) : undefined;
        const departureDate = sanitized.departure_time ? new Date(sanitized.departure_time).toISOString().split('T')[0] : undefined;
        const departureTime = sanitized.departure_time ? new Date(sanitized.departure_time).toISOString().split('T')[1].substring(0, 8) : undefined;
        const { error } = await supabase.from('guests').update({
            airport_code: sanitized.airport_code,
            flight_number: sanitized.flight_number,
            arrival_date: arrivalDate,
            arrival_time: arrivalTime,
            departure_date: departureDate,
            departure_time: departureTime,
            updated_at: new Date().toISOString()
        }).eq('id', guestId);
        if (error) {
            return {
                success: false,
                error: {
                    code: _types.ERROR_CODES.DATABASE_ERROR,
                    message: error.message,
                    details: error
                }
            };
        }
        return {
            success: true,
            data: undefined
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: _types.ERROR_CODES.UNKNOWN_ERROR,
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function getFlightsByAirport(airportCode) {
    try {
        const supabase = getSupabase();
        const { data, error } = await supabase.from('guests').select('id, airport_code, flight_number, arrival_date, departure_date').eq('airport_code', airportCode).not('flight_number', 'is', null);
        if (error) {
            return {
                success: false,
                error: {
                    code: _types.ERROR_CODES.DATABASE_ERROR,
                    message: error.message,
                    details: error
                }
            };
        }
        const flights = data.map((guest)=>({
                guest_id: guest.id,
                airport_code: guest.airport_code,
                flight_number: guest.flight_number || undefined,
                arrival_time: guest.arrival_date || undefined,
                departure_time: guest.departure_date || undefined
            }));
        return {
            success: true,
            data: flights
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: _types.ERROR_CODES.UNKNOWN_ERROR,
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function generateArrivalManifest(date, timeWindowHours = 2) {
    try {
        const dateStr = date.toISOString().split('T')[0];
        // Get all guests arriving on this date
        const supabase = getSupabase();
        const { data: guests, error } = await supabase.from('guests').select('id, first_name, last_name, arrival_date, arrival_time, airport_code, flight_number').eq('arrival_date', dateStr).not('airport_code', 'is', null);
        if (error) {
            return {
                success: false,
                error: {
                    code: _types.ERROR_CODES.DATABASE_ERROR,
                    message: error.message,
                    details: error
                }
            };
        }
        if (!guests || guests.length === 0) {
            return {
                success: true,
                data: []
            };
        }
        // Group guests by time windows based on their arrival times
        const timeWindows = new Map();
        guests.forEach((guest)=>{
            // Parse arrival time or default to noon if not specified
            let hour = 12; // Default to noon
            if (guest.arrival_time) {
                const timeParts = guest.arrival_time.split(':');
                hour = parseInt(timeParts[0], 10);
            }
            // Calculate which time window this guest belongs to
            const windowStart = Math.floor(hour / timeWindowHours) * timeWindowHours;
            const windowEnd = windowStart + timeWindowHours;
            const windowKey = `${String(windowStart).padStart(2, '0')}:00:00-${String(windowEnd).padStart(2, '0')}:00:00`;
            if (!timeWindows.has(windowKey)) {
                timeWindows.set(windowKey, []);
            }
            timeWindows.get(windowKey).push(guest.id);
        });
        // Create manifests for each time window
        const manifests = [];
        for (const [windowKey, guestIds] of timeWindows.entries()){
            const [startTime, endTime] = windowKey.split('-');
            const manifestData = {
                manifest_type: 'arrival',
                date: dateStr,
                time_window_start: startTime,
                time_window_end: endTime,
                guest_ids: guestIds
            };
            const createResult = await createManifest(manifestData);
            if (createResult.success) {
                manifests.push(createResult.data);
            }
        }
        return {
            success: true,
            data: manifests
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: _types.ERROR_CODES.UNKNOWN_ERROR,
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function generateDepartureManifest(date, timeWindowHours = 2) {
    try {
        const dateStr = date.toISOString().split('T')[0];
        // Get all guests departing on this date
        const supabase = getSupabase();
        const { data: guests, error } = await supabase.from('guests').select('id, first_name, last_name, departure_date, departure_time, airport_code, flight_number').eq('departure_date', dateStr).not('airport_code', 'is', null);
        if (error) {
            return {
                success: false,
                error: {
                    code: _types.ERROR_CODES.DATABASE_ERROR,
                    message: error.message,
                    details: error
                }
            };
        }
        if (!guests || guests.length === 0) {
            return {
                success: true,
                data: []
            };
        }
        // Group guests by time windows based on their departure times
        const timeWindows = new Map();
        guests.forEach((guest)=>{
            // Parse departure time or default to 2 PM if not specified
            let hour = 14; // Default to 2 PM
            if (guest.departure_time) {
                const timeParts = guest.departure_time.split(':');
                hour = parseInt(timeParts[0], 10);
            }
            // Calculate which time window this guest belongs to
            const windowStart = Math.floor(hour / timeWindowHours) * timeWindowHours;
            const windowEnd = windowStart + timeWindowHours;
            const windowKey = `${String(windowStart).padStart(2, '0')}:00:00-${String(windowEnd).padStart(2, '0')}:00:00`;
            if (!timeWindows.has(windowKey)) {
                timeWindows.set(windowKey, []);
            }
            timeWindows.get(windowKey).push(guest.id);
        });
        // Create manifests for each time window
        const manifests = [];
        for (const [windowKey, guestIds] of timeWindows.entries()){
            const [startTime, endTime] = windowKey.split('-');
            const manifestData = {
                manifest_type: 'departure',
                date: dateStr,
                time_window_start: startTime,
                time_window_end: endTime,
                guest_ids: guestIds
            };
            const createResult = await createManifest(manifestData);
            if (createResult.success) {
                manifests.push(createResult.data);
            }
        }
        return {
            success: true,
            data: manifests
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: _types.ERROR_CODES.UNKNOWN_ERROR,
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function createManifest(data) {
    try {
        // 1. Validate
        const validation = _transportationSchemas.createTransportationManifestSchema.safeParse(data);
        if (!validation.success) {
            return {
                success: false,
                error: {
                    code: _types.ERROR_CODES.VALIDATION_ERROR,
                    message: 'Invalid manifest data',
                    details: validation.error.issues
                }
            };
        }
        // 2. Sanitize
        const sanitized = {
            ...validation.data,
            vehicle_type: validation.data.vehicle_type ? (0, _sanitization.sanitizeInput)(validation.data.vehicle_type) : undefined,
            driver_name: validation.data.driver_name ? (0, _sanitization.sanitizeInput)(validation.data.driver_name) : undefined,
            driver_phone: validation.data.driver_phone ? (0, _sanitization.sanitizeInput)(validation.data.driver_phone) : undefined,
            notes: validation.data.notes ? (0, _sanitization.sanitizeInput)(validation.data.notes) : undefined
        };
        // 3. Insert into database
        const supabase = getSupabase();
        const { data: manifest, error } = await supabase.from('transportation_manifests').insert(sanitized).select().single();
        if (error) {
            return {
                success: false,
                error: {
                    code: _types.ERROR_CODES.DATABASE_ERROR,
                    message: error.message,
                    details: error
                }
            };
        }
        return {
            success: true,
            data: manifest
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: _types.ERROR_CODES.UNKNOWN_ERROR,
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function assignGuestsToShuttle(manifestId, guestIds) {
    try {
        // Get current manifest
        const supabase = getSupabase();
        const { data: manifest, error: fetchError } = await supabase.from('transportation_manifests').select('guest_ids').eq('id', manifestId).single();
        if (fetchError) {
            return {
                success: false,
                error: {
                    code: _types.ERROR_CODES.DATABASE_ERROR,
                    message: fetchError.message,
                    details: fetchError
                }
            };
        }
        // Merge guest IDs (avoid duplicates)
        const currentGuestIds = manifest.guest_ids || [];
        const updatedGuestIds = Array.from(new Set([
            ...currentGuestIds,
            ...guestIds
        ]));
        // Update manifest
        const { error: updateError } = await supabase.from('transportation_manifests').update({
            guest_ids: updatedGuestIds,
            updated_at: new Date().toISOString()
        }).eq('id', manifestId);
        if (updateError) {
            return {
                success: false,
                error: {
                    code: _types.ERROR_CODES.DATABASE_ERROR,
                    message: updateError.message,
                    details: updateError
                }
            };
        }
        return {
            success: true,
            data: undefined
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: _types.ERROR_CODES.UNKNOWN_ERROR,
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function calculateVehicleRequirements(guestCount) {
    try {
        if (guestCount < 0) {
            return {
                success: false,
                error: {
                    code: _types.ERROR_CODES.VALIDATION_ERROR,
                    message: 'Guest count must be non-negative'
                }
            };
        }
        // Vehicle capacity definitions
        const vehicles = [
            {
                type: 'sedan',
                capacity: 4,
                cost: 50
            },
            {
                type: 'van',
                capacity: 8,
                cost: 80
            },
            {
                type: 'minibus',
                capacity: 15,
                cost: 120
            },
            {
                type: 'bus',
                capacity: 50,
                cost: 300
            }
        ];
        // Calculate optimal vehicle mix (greedy algorithm - largest first)
        const requirements = [];
        let remainingGuests = guestCount;
        for(let i = vehicles.length - 1; i >= 0; i--){
            const vehicle = vehicles[i];
            if (remainingGuests >= vehicle.capacity) {
                const quantity = Math.floor(remainingGuests / vehicle.capacity);
                requirements.push({
                    vehicle_type: vehicle.type,
                    capacity: vehicle.capacity,
                    quantity_needed: quantity,
                    estimated_cost: quantity * vehicle.cost
                });
                remainingGuests -= quantity * vehicle.capacity;
            }
        }
        // Handle remaining guests with smallest vehicle
        if (remainingGuests > 0) {
            const smallestVehicle = vehicles[0];
            requirements.push({
                vehicle_type: smallestVehicle.type,
                capacity: smallestVehicle.capacity,
                quantity_needed: 1,
                estimated_cost: smallestVehicle.cost
            });
        }
        return {
            success: true,
            data: requirements
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: _types.ERROR_CODES.UNKNOWN_ERROR,
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function generateDriverSheet(manifestId) {
    try {
        // Get manifest
        const supabase = getSupabase();
        const { data: manifest, error: manifestError } = await supabase.from('transportation_manifests').select('*').eq('id', manifestId).single();
        if (manifestError) {
            return {
                success: false,
                error: {
                    code: _types.ERROR_CODES.DATABASE_ERROR,
                    message: manifestError.message,
                    details: manifestError
                }
            };
        }
        // Get guest details
        const { data: guests, error: guestsError } = await supabase.from('guests').select('id, first_name, last_name, flight_number, phone, notes').in('id', manifest.guest_ids);
        if (guestsError) {
            return {
                success: false,
                error: {
                    code: _types.ERROR_CODES.DATABASE_ERROR,
                    message: guestsError.message,
                    details: guestsError
                }
            };
        }
        // Build driver sheet
        const driverSheet = {
            manifest_id: manifest.id,
            date: manifest.date,
            time_window: `${manifest.time_window_start} - ${manifest.time_window_end}`,
            vehicle_type: manifest.vehicle_type,
            driver_name: manifest.driver_name,
            driver_phone: manifest.driver_phone,
            guests: guests.map((guest)=>({
                    name: `${guest.first_name} ${guest.last_name}`,
                    flight_number: guest.flight_number || undefined,
                    phone: guest.phone || undefined,
                    special_requests: guest.notes || undefined
                })),
            total_guests: guests.length,
            pickup_location: manifest.manifest_type === 'arrival' ? 'Airport' : 'Hotel',
            dropoff_locations: manifest.manifest_type === 'arrival' ? [
                'Hotel'
            ] : [
                'Airport'
            ]
        };
        return {
            success: true,
            data: driverSheet
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: _types.ERROR_CODES.UNKNOWN_ERROR,
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}
async function calculateShuttleCosts(manifests) {
    try {
        let totalCost = 0;
        for (const manifest of manifests){
            const guestCount = manifest.guest_ids.length;
            const vehicleResult = await calculateVehicleRequirements(guestCount);
            if (vehicleResult.success) {
                const manifestCost = vehicleResult.data.reduce((sum, req)=>sum + req.estimated_cost, 0);
                totalCost += manifestCost;
            }
        }
        return {
            success: true,
            data: totalCost
        };
    } catch (error) {
        return {
            success: false,
            error: {
                code: _types.ERROR_CODES.UNKNOWN_ERROR,
                message: error instanceof Error ? error.message : 'Unknown error'
            }
        };
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvc2VydmljZXMvdHJhbnNwb3J0YXRpb25TZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNhbml0aXplSW5wdXQsIHNhbml0aXplUmljaFRleHQgfSBmcm9tIFwiLi4vdXRpbHMvc2FuaXRpemF0aW9uXCI7XG5pbXBvcnQgdHlwZSB7IFJlc3VsdCB9IGZyb20gJ0AvdHlwZXMnO1xuaW1wb3J0IHsgRVJST1JfQ09ERVMgfSBmcm9tICdAL3R5cGVzJztcbmltcG9ydCB7XG4gIGZsaWdodEluZm9TY2hlbWEsXG4gIGNyZWF0ZVRyYW5zcG9ydGF0aW9uTWFuaWZlc3RTY2hlbWEsXG4gIHVwZGF0ZVRyYW5zcG9ydGF0aW9uTWFuaWZlc3RTY2hlbWEsXG4gIHR5cGUgRmxpZ2h0SW5mb0RUTyxcbiAgdHlwZSBDcmVhdGVUcmFuc3BvcnRhdGlvbk1hbmlmZXN0RFRPLFxuICB0eXBlIFVwZGF0ZVRyYW5zcG9ydGF0aW9uTWFuaWZlc3REVE8sXG4gIHR5cGUgVmVoaWNsZVJlcXVpcmVtZW50RFRPLFxuICB0eXBlIERyaXZlclNoZWV0RFRPLFxufSBmcm9tICdAL3NjaGVtYXMvdHJhbnNwb3J0YXRpb25TY2hlbWFzJztcblxuLy8gU3VwYWJhc2UgY2xpZW50IC0gY2FuIGJlIG92ZXJyaWRkZW4gZm9yIHRlc3RpbmdcbmxldCBfc3VwYWJhc2U6IGFueSA9IG51bGw7XG5cbi8qKlxuICogR2V0cyB0aGUgU3VwYWJhc2UgY2xpZW50IGluc3RhbmNlLlxuICogTGF6eSBsb2FkcyB0aGUgY2xpZW50IHRvIGF2b2lkIGluaXRpYWxpemF0aW9uIGlzc3VlcyBpbiB0ZXN0cy5cbiAqL1xuZnVuY3Rpb24gZ2V0U3VwYWJhc2UoKSB7XG4gIGlmICghX3N1cGFiYXNlKSB7XG4gICAgY29uc3QgeyBzdXBhYmFzZSB9ID0gcmVxdWlyZSgnQC9saWIvc3VwYWJhc2UnKTtcbiAgICBfc3VwYWJhc2UgPSBzdXBhYmFzZTtcbiAgfVxuICByZXR1cm4gX3N1cGFiYXNlO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIFN1cGFiYXNlIGNsaWVudCBpbnN0YW5jZSAoZm9yIHRlc3RpbmcpLlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfc2V0U3VwYWJhc2VGb3JUZXN0aW5nKGNsaWVudDogYW55KSB7XG4gIF9zdXBhYmFzZSA9IGNsaWVudDtcbn1cblxuLyoqXG4gKiBSZXNldHMgdGhlIFN1cGFiYXNlIGNsaWVudCBpbnN0YW5jZSAoZm9yIHRlc3RpbmcpLlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfcmVzZXRTdXBhYmFzZUZvclRlc3RpbmcoKSB7XG4gIF9zdXBhYmFzZSA9IG51bGw7XG59XG5cbi8qKlxuICogVHJhbnNwb3J0YXRpb24gbWFuaWZlc3QgZW50aXR5XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNwb3J0YXRpb25NYW5pZmVzdCB7XG4gIGlkOiBzdHJpbmc7XG4gIG1hbmlmZXN0X3R5cGU6ICdhcnJpdmFsJyB8ICdkZXBhcnR1cmUnO1xuICBkYXRlOiBzdHJpbmc7XG4gIHRpbWVfd2luZG93X3N0YXJ0OiBzdHJpbmc7XG4gIHRpbWVfd2luZG93X2VuZDogc3RyaW5nO1xuICB2ZWhpY2xlX3R5cGU/OiBzdHJpbmc7XG4gIGRyaXZlcl9uYW1lPzogc3RyaW5nO1xuICBkcml2ZXJfcGhvbmU/OiBzdHJpbmc7XG4gIGd1ZXN0X2lkczogc3RyaW5nW107XG4gIG5vdGVzPzogc3RyaW5nO1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcbn1cblxuLyoqXG4gKiBGbGlnaHQgaW5mb3JtYXRpb24gZW50aXR5XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmxpZ2h0SW5mbyB7XG4gIGd1ZXN0X2lkOiBzdHJpbmc7XG4gIGFpcnBvcnRfY29kZTogJ1NKTycgfCAnTElSJyB8ICdPdGhlcic7XG4gIGZsaWdodF9udW1iZXI/OiBzdHJpbmc7XG4gIGFpcmxpbmU/OiBzdHJpbmc7XG4gIGFycml2YWxfdGltZT86IHN0cmluZztcbiAgZGVwYXJ0dXJlX3RpbWU/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogVmVoaWNsZSByZXF1aXJlbWVudCBlbnRpdHlcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBWZWhpY2xlUmVxdWlyZW1lbnQge1xuICB2ZWhpY2xlX3R5cGU6IHN0cmluZztcbiAgY2FwYWNpdHk6IG51bWJlcjtcbiAgcXVhbnRpdHlfbmVlZGVkOiBudW1iZXI7XG4gIGVzdGltYXRlZF9jb3N0OiBudW1iZXI7XG59XG5cbi8qKlxuICogRHJpdmVyIHNoZWV0IGVudGl0eVxuICovXG5leHBvcnQgaW50ZXJmYWNlIERyaXZlclNoZWV0IHtcbiAgbWFuaWZlc3RfaWQ6IHN0cmluZztcbiAgZGF0ZTogc3RyaW5nO1xuICB0aW1lX3dpbmRvdzogc3RyaW5nO1xuICB2ZWhpY2xlX3R5cGU/OiBzdHJpbmc7XG4gIGRyaXZlcl9uYW1lPzogc3RyaW5nO1xuICBkcml2ZXJfcGhvbmU/OiBzdHJpbmc7XG4gIGd1ZXN0czogQXJyYXk8e1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBmbGlnaHRfbnVtYmVyPzogc3RyaW5nO1xuICAgIHBob25lPzogc3RyaW5nO1xuICAgIHNwZWNpYWxfcmVxdWVzdHM/OiBzdHJpbmc7XG4gIH0+O1xuICB0b3RhbF9ndWVzdHM6IG51bWJlcjtcbiAgcGlja3VwX2xvY2F0aW9uOiBzdHJpbmc7XG4gIGRyb3BvZmZfbG9jYXRpb25zOiBzdHJpbmdbXTtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIGZsaWdodCBpbmZvcm1hdGlvbiBmb3IgYSBndWVzdC5cbiAqIFxuICogQHBhcmFtIGd1ZXN0SWQgLSBUaGUgZ3Vlc3QncyBJRFxuICogQHBhcmFtIGZsaWdodEluZm8gLSBGbGlnaHQgaW5mb3JtYXRpb24gdG8gdXBkYXRlXG4gKiBAcmV0dXJucyBSZXN1bHQgY29udGFpbmluZyB2b2lkIG9yIGVycm9yIGRldGFpbHNcbiAqIFxuICogQGV4YW1wbGVcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRyYW5zcG9ydGF0aW9uU2VydmljZS51cGRhdGVGbGlnaHRJbmZvKCdndWVzdC0xMjMnLCB7XG4gKiAgIGd1ZXN0X2lkOiAnZ3Vlc3QtMTIzJyxcbiAqICAgYWlycG9ydF9jb2RlOiAnU0pPJyxcbiAqICAgZmxpZ2h0X251bWJlcjogJ0FBMTIzJyxcbiAqICAgYXJyaXZhbF90aW1lOiAnMjAyNS0wNi0wMVQxNDozMDowMFonLFxuICogfSk7XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVGbGlnaHRJbmZvKFxuICBndWVzdElkOiBzdHJpbmcsXG4gIGZsaWdodEluZm86IEZsaWdodEluZm9EVE9cbik6IFByb21pc2U8UmVzdWx0PHZvaWQ+PiB7XG4gIHRyeSB7XG4gICAgLy8gMS4gVmFsaWRhdGVcbiAgICBjb25zdCB2YWxpZGF0aW9uID0gZmxpZ2h0SW5mb1NjaGVtYS5zYWZlUGFyc2UoZmxpZ2h0SW5mbyk7XG4gICAgaWYgKCF2YWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6IEVSUk9SX0NPREVTLlZBTElEQVRJT05fRVJST1IsXG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgZmxpZ2h0IGluZm9ybWF0aW9uJyxcbiAgICAgICAgICBkZXRhaWxzOiB2YWxpZGF0aW9uLmVycm9yLmlzc3VlcyxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gMi4gU2FuaXRpemVcbiAgICBjb25zdCBzYW5pdGl6ZWQgPSB7XG4gICAgICAuLi52YWxpZGF0aW9uLmRhdGEsXG4gICAgICBmbGlnaHRfbnVtYmVyOiB2YWxpZGF0aW9uLmRhdGEuZmxpZ2h0X251bWJlclxuICAgICAgICA/IHNhbml0aXplSW5wdXQodmFsaWRhdGlvbi5kYXRhLmZsaWdodF9udW1iZXIpXG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgYWlybGluZTogdmFsaWRhdGlvbi5kYXRhLmFpcmxpbmVcbiAgICAgICAgPyBzYW5pdGl6ZUlucHV0KHZhbGlkYXRpb24uZGF0YS5haXJsaW5lKVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICB9O1xuXG4gICAgLy8gMy4gVXBkYXRlIGd1ZXN0IHJlY29yZFxuICAgIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2UoKTtcbiAgICBcbiAgICAvLyBFeHRyYWN0IGRhdGUgYW5kIHRpbWUgY29tcG9uZW50cyBmcm9tIGRhdGV0aW1lIHN0cmluZ3NcbiAgICBjb25zdCBhcnJpdmFsRGF0ZSA9IHNhbml0aXplZC5hcnJpdmFsX3RpbWVcbiAgICAgID8gbmV3IERhdGUoc2FuaXRpemVkLmFycml2YWxfdGltZSkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdXG4gICAgICA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBhcnJpdmFsVGltZSA9IHNhbml0aXplZC5hcnJpdmFsX3RpbWVcbiAgICAgID8gbmV3IERhdGUoc2FuaXRpemVkLmFycml2YWxfdGltZSkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzFdLnN1YnN0cmluZygwLCA4KVxuICAgICAgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgZGVwYXJ0dXJlRGF0ZSA9IHNhbml0aXplZC5kZXBhcnR1cmVfdGltZVxuICAgICAgPyBuZXcgRGF0ZShzYW5pdGl6ZWQuZGVwYXJ0dXJlX3RpbWUpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXVxuICAgICAgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgZGVwYXJ0dXJlVGltZSA9IHNhbml0aXplZC5kZXBhcnR1cmVfdGltZVxuICAgICAgPyBuZXcgRGF0ZShzYW5pdGl6ZWQuZGVwYXJ0dXJlX3RpbWUpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVsxXS5zdWJzdHJpbmcoMCwgOClcbiAgICAgIDogdW5kZWZpbmVkO1xuICAgIFxuICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnZ3Vlc3RzJylcbiAgICAgIC51cGRhdGUoe1xuICAgICAgICBhaXJwb3J0X2NvZGU6IHNhbml0aXplZC5haXJwb3J0X2NvZGUsXG4gICAgICAgIGZsaWdodF9udW1iZXI6IHNhbml0aXplZC5mbGlnaHRfbnVtYmVyLFxuICAgICAgICBhcnJpdmFsX2RhdGU6IGFycml2YWxEYXRlLFxuICAgICAgICBhcnJpdmFsX3RpbWU6IGFycml2YWxUaW1lLFxuICAgICAgICBkZXBhcnR1cmVfZGF0ZTogZGVwYXJ0dXJlRGF0ZSxcbiAgICAgICAgZGVwYXJ0dXJlX3RpbWU6IGRlcGFydHVyZVRpbWUsXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIH0pXG4gICAgICAuZXEoJ2lkJywgZ3Vlc3RJZCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6IEVSUk9SX0NPREVTLkRBVEFCQVNFX0VSUk9SLFxuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgZGV0YWlsczogZXJyb3IsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHVuZGVmaW5lZCB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IEVSUk9SX0NPREVTLlVOS05PV05fRVJST1IsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogR2V0cyBmbGlnaHRzIGJ5IGFpcnBvcnQgY29kZS5cbiAqIFxuICogQHBhcmFtIGFpcnBvcnRDb2RlIC0gQWlycG9ydCBjb2RlIHRvIGZpbHRlciBieVxuICogQHJldHVybnMgUmVzdWx0IGNvbnRhaW5pbmcgZmxpZ2h0IGluZm9ybWF0aW9uIGFycmF5IG9yIGVycm9yIGRldGFpbHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEZsaWdodHNCeUFpcnBvcnQoXG4gIGFpcnBvcnRDb2RlOiAnU0pPJyB8ICdMSVInIHwgJ090aGVyJ1xuKTogUHJvbWlzZTxSZXN1bHQ8RmxpZ2h0SW5mb1tdPj4ge1xuICB0cnkge1xuICAgIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2UoKTtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2d1ZXN0cycpXG4gICAgICAuc2VsZWN0KCdpZCwgYWlycG9ydF9jb2RlLCBmbGlnaHRfbnVtYmVyLCBhcnJpdmFsX2RhdGUsIGRlcGFydHVyZV9kYXRlJylcbiAgICAgIC5lcSgnYWlycG9ydF9jb2RlJywgYWlycG9ydENvZGUpXG4gICAgICAubm90KCdmbGlnaHRfbnVtYmVyJywgJ2lzJywgbnVsbCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6IEVSUk9SX0NPREVTLkRBVEFCQVNFX0VSUk9SLFxuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgZGV0YWlsczogZXJyb3IsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IGZsaWdodHM6IEZsaWdodEluZm9bXSA9IGRhdGEubWFwKChndWVzdDogYW55KSA9PiAoe1xuICAgICAgZ3Vlc3RfaWQ6IGd1ZXN0LmlkLFxuICAgICAgYWlycG9ydF9jb2RlOiBndWVzdC5haXJwb3J0X2NvZGUgYXMgJ1NKTycgfCAnTElSJyB8ICdPdGhlcicsXG4gICAgICBmbGlnaHRfbnVtYmVyOiBndWVzdC5mbGlnaHRfbnVtYmVyIHx8IHVuZGVmaW5lZCxcbiAgICAgIGFycml2YWxfdGltZTogZ3Vlc3QuYXJyaXZhbF9kYXRlIHx8IHVuZGVmaW5lZCxcbiAgICAgIGRlcGFydHVyZV90aW1lOiBndWVzdC5kZXBhcnR1cmVfZGF0ZSB8fCB1bmRlZmluZWQsXG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogZmxpZ2h0cyB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IEVSUk9SX0NPREVTLlVOS05PV05fRVJST1IsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogR2VuZXJhdGVzIGFycml2YWwgbWFuaWZlc3RzIGZvciBhIHNwZWNpZmljIGRhdGUsIGdyb3VwaW5nIGd1ZXN0cyBieSB0aW1lIHdpbmRvd3MuXG4gKiBcbiAqIEBwYXJhbSBkYXRlIC0gRGF0ZSB0byBnZW5lcmF0ZSBtYW5pZmVzdHMgZm9yXG4gKiBAcGFyYW0gdGltZVdpbmRvd0hvdXJzIC0gSG91cnMgZm9yIHRpbWUgd2luZG93IGdyb3VwaW5nIChkZWZhdWx0OiAyKVxuICogQHJldHVybnMgUmVzdWx0IGNvbnRhaW5pbmcgdHJhbnNwb3J0YXRpb24gbWFuaWZlc3RzIG9yIGVycm9yIGRldGFpbHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQXJyaXZhbE1hbmlmZXN0KFxuICBkYXRlOiBEYXRlLFxuICB0aW1lV2luZG93SG91cnM6IG51bWJlciA9IDJcbik6IFByb21pc2U8UmVzdWx0PFRyYW5zcG9ydGF0aW9uTWFuaWZlc3RbXT4+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRlU3RyID0gZGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG5cbiAgICAvLyBHZXQgYWxsIGd1ZXN0cyBhcnJpdmluZyBvbiB0aGlzIGRhdGVcbiAgICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlKCk7XG4gICAgY29uc3QgeyBkYXRhOiBndWVzdHMsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2d1ZXN0cycpXG4gICAgICAuc2VsZWN0KCdpZCwgZmlyc3RfbmFtZSwgbGFzdF9uYW1lLCBhcnJpdmFsX2RhdGUsIGFycml2YWxfdGltZSwgYWlycG9ydF9jb2RlLCBmbGlnaHRfbnVtYmVyJylcbiAgICAgIC5lcSgnYXJyaXZhbF9kYXRlJywgZGF0ZVN0cilcbiAgICAgIC5ub3QoJ2FpcnBvcnRfY29kZScsICdpcycsIG51bGwpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiBFUlJPUl9DT0RFUy5EQVRBQkFTRV9FUlJPUixcbiAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgIGRldGFpbHM6IGVycm9yLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoIWd1ZXN0cyB8fCBndWVzdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBbXSB9O1xuICAgIH1cblxuICAgIC8vIEdyb3VwIGd1ZXN0cyBieSB0aW1lIHdpbmRvd3MgYmFzZWQgb24gdGhlaXIgYXJyaXZhbCB0aW1lc1xuICAgIGNvbnN0IHRpbWVXaW5kb3dzID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZ1tdPigpO1xuICAgIFxuICAgIGd1ZXN0cy5mb3JFYWNoKChndWVzdDogeyBpZDogc3RyaW5nOyBhcnJpdmFsX3RpbWU/OiBzdHJpbmcgfSkgPT4ge1xuICAgICAgLy8gUGFyc2UgYXJyaXZhbCB0aW1lIG9yIGRlZmF1bHQgdG8gbm9vbiBpZiBub3Qgc3BlY2lmaWVkXG4gICAgICBsZXQgaG91ciA9IDEyOyAvLyBEZWZhdWx0IHRvIG5vb25cbiAgICAgIGlmIChndWVzdC5hcnJpdmFsX3RpbWUpIHtcbiAgICAgICAgY29uc3QgdGltZVBhcnRzID0gZ3Vlc3QuYXJyaXZhbF90aW1lLnNwbGl0KCc6Jyk7XG4gICAgICAgIGhvdXIgPSBwYXJzZUludCh0aW1lUGFydHNbMF0sIDEwKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2FsY3VsYXRlIHdoaWNoIHRpbWUgd2luZG93IHRoaXMgZ3Vlc3QgYmVsb25ncyB0b1xuICAgICAgY29uc3Qgd2luZG93U3RhcnQgPSBNYXRoLmZsb29yKGhvdXIgLyB0aW1lV2luZG93SG91cnMpICogdGltZVdpbmRvd0hvdXJzO1xuICAgICAgY29uc3Qgd2luZG93RW5kID0gd2luZG93U3RhcnQgKyB0aW1lV2luZG93SG91cnM7XG4gICAgICBcbiAgICAgIGNvbnN0IHdpbmRvd0tleSA9IGAke1N0cmluZyh3aW5kb3dTdGFydCkucGFkU3RhcnQoMiwgJzAnKX06MDA6MDAtJHtTdHJpbmcod2luZG93RW5kKS5wYWRTdGFydCgyLCAnMCcpfTowMDowMGA7XG4gICAgICBcbiAgICAgIGlmICghdGltZVdpbmRvd3MuaGFzKHdpbmRvd0tleSkpIHtcbiAgICAgICAgdGltZVdpbmRvd3Muc2V0KHdpbmRvd0tleSwgW10pO1xuICAgICAgfVxuICAgICAgdGltZVdpbmRvd3MuZ2V0KHdpbmRvd0tleSkhLnB1c2goZ3Vlc3QuaWQpO1xuICAgIH0pO1xuXG4gICAgLy8gQ3JlYXRlIG1hbmlmZXN0cyBmb3IgZWFjaCB0aW1lIHdpbmRvd1xuICAgIGNvbnN0IG1hbmlmZXN0czogVHJhbnNwb3J0YXRpb25NYW5pZmVzdFtdID0gW107XG4gICAgXG4gICAgZm9yIChjb25zdCBbd2luZG93S2V5LCBndWVzdElkc10gb2YgdGltZVdpbmRvd3MuZW50cmllcygpKSB7XG4gICAgICBjb25zdCBbc3RhcnRUaW1lLCBlbmRUaW1lXSA9IHdpbmRvd0tleS5zcGxpdCgnLScpO1xuICAgICAgXG4gICAgICBjb25zdCBtYW5pZmVzdERhdGE6IENyZWF0ZVRyYW5zcG9ydGF0aW9uTWFuaWZlc3REVE8gPSB7XG4gICAgICAgIG1hbmlmZXN0X3R5cGU6ICdhcnJpdmFsJyxcbiAgICAgICAgZGF0ZTogZGF0ZVN0cixcbiAgICAgICAgdGltZV93aW5kb3dfc3RhcnQ6IHN0YXJ0VGltZSxcbiAgICAgICAgdGltZV93aW5kb3dfZW5kOiBlbmRUaW1lLFxuICAgICAgICBndWVzdF9pZHM6IGd1ZXN0SWRzLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgY3JlYXRlUmVzdWx0ID0gYXdhaXQgY3JlYXRlTWFuaWZlc3QobWFuaWZlc3REYXRhKTtcbiAgICAgIGlmIChjcmVhdGVSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBtYW5pZmVzdHMucHVzaChjcmVhdGVSZXN1bHQuZGF0YSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbWFuaWZlc3RzIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogRVJST1JfQ09ERVMuVU5LTk9XTl9FUlJPUixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgZGVwYXJ0dXJlIG1hbmlmZXN0cyBmb3IgYSBzcGVjaWZpYyBkYXRlLCBncm91cGluZyBndWVzdHMgYnkgdGltZSB3aW5kb3dzLlxuICogXG4gKiBAcGFyYW0gZGF0ZSAtIERhdGUgdG8gZ2VuZXJhdGUgbWFuaWZlc3RzIGZvclxuICogQHBhcmFtIHRpbWVXaW5kb3dIb3VycyAtIEhvdXJzIGZvciB0aW1lIHdpbmRvdyBncm91cGluZyAoZGVmYXVsdDogMilcbiAqIEByZXR1cm5zIFJlc3VsdCBjb250YWluaW5nIHRyYW5zcG9ydGF0aW9uIG1hbmlmZXN0cyBvciBlcnJvciBkZXRhaWxzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZURlcGFydHVyZU1hbmlmZXN0KFxuICBkYXRlOiBEYXRlLFxuICB0aW1lV2luZG93SG91cnM6IG51bWJlciA9IDJcbik6IFByb21pc2U8UmVzdWx0PFRyYW5zcG9ydGF0aW9uTWFuaWZlc3RbXT4+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRlU3RyID0gZGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG5cbiAgICAvLyBHZXQgYWxsIGd1ZXN0cyBkZXBhcnRpbmcgb24gdGhpcyBkYXRlXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZSgpO1xuICAgIGNvbnN0IHsgZGF0YTogZ3Vlc3RzLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdndWVzdHMnKVxuICAgICAgLnNlbGVjdCgnaWQsIGZpcnN0X25hbWUsIGxhc3RfbmFtZSwgZGVwYXJ0dXJlX2RhdGUsIGRlcGFydHVyZV90aW1lLCBhaXJwb3J0X2NvZGUsIGZsaWdodF9udW1iZXInKVxuICAgICAgLmVxKCdkZXBhcnR1cmVfZGF0ZScsIGRhdGVTdHIpXG4gICAgICAubm90KCdhaXJwb3J0X2NvZGUnLCAnaXMnLCBudWxsKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogRVJST1JfQ09ERVMuREFUQUJBU0VfRVJST1IsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBkZXRhaWxzOiBlcnJvcixcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKCFndWVzdHMgfHwgZ3Vlc3RzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogW10gfTtcbiAgICB9XG5cbiAgICAvLyBHcm91cCBndWVzdHMgYnkgdGltZSB3aW5kb3dzIGJhc2VkIG9uIHRoZWlyIGRlcGFydHVyZSB0aW1lc1xuICAgIGNvbnN0IHRpbWVXaW5kb3dzID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZ1tdPigpO1xuICAgIFxuICAgIGd1ZXN0cy5mb3JFYWNoKChndWVzdDogeyBpZDogc3RyaW5nOyBkZXBhcnR1cmVfdGltZT86IHN0cmluZyB9KSA9PiB7XG4gICAgICAvLyBQYXJzZSBkZXBhcnR1cmUgdGltZSBvciBkZWZhdWx0IHRvIDIgUE0gaWYgbm90IHNwZWNpZmllZFxuICAgICAgbGV0IGhvdXIgPSAxNDsgLy8gRGVmYXVsdCB0byAyIFBNXG4gICAgICBpZiAoZ3Vlc3QuZGVwYXJ0dXJlX3RpbWUpIHtcbiAgICAgICAgY29uc3QgdGltZVBhcnRzID0gZ3Vlc3QuZGVwYXJ0dXJlX3RpbWUuc3BsaXQoJzonKTtcbiAgICAgICAgaG91ciA9IHBhcnNlSW50KHRpbWVQYXJ0c1swXSwgMTApO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgd2hpY2ggdGltZSB3aW5kb3cgdGhpcyBndWVzdCBiZWxvbmdzIHRvXG4gICAgICBjb25zdCB3aW5kb3dTdGFydCA9IE1hdGguZmxvb3IoaG91ciAvIHRpbWVXaW5kb3dIb3VycykgKiB0aW1lV2luZG93SG91cnM7XG4gICAgICBjb25zdCB3aW5kb3dFbmQgPSB3aW5kb3dTdGFydCArIHRpbWVXaW5kb3dIb3VycztcbiAgICAgIFxuICAgICAgY29uc3Qgd2luZG93S2V5ID0gYCR7U3RyaW5nKHdpbmRvd1N0YXJ0KS5wYWRTdGFydCgyLCAnMCcpfTowMDowMC0ke1N0cmluZyh3aW5kb3dFbmQpLnBhZFN0YXJ0KDIsICcwJyl9OjAwOjAwYDtcbiAgICAgIFxuICAgICAgaWYgKCF0aW1lV2luZG93cy5oYXMod2luZG93S2V5KSkge1xuICAgICAgICB0aW1lV2luZG93cy5zZXQod2luZG93S2V5LCBbXSk7XG4gICAgICB9XG4gICAgICB0aW1lV2luZG93cy5nZXQod2luZG93S2V5KSEucHVzaChndWVzdC5pZCk7XG4gICAgfSk7XG5cbiAgICAvLyBDcmVhdGUgbWFuaWZlc3RzIGZvciBlYWNoIHRpbWUgd2luZG93XG4gICAgY29uc3QgbWFuaWZlc3RzOiBUcmFuc3BvcnRhdGlvbk1hbmlmZXN0W10gPSBbXTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IFt3aW5kb3dLZXksIGd1ZXN0SWRzXSBvZiB0aW1lV2luZG93cy5lbnRyaWVzKCkpIHtcbiAgICAgIGNvbnN0IFtzdGFydFRpbWUsIGVuZFRpbWVdID0gd2luZG93S2V5LnNwbGl0KCctJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IG1hbmlmZXN0RGF0YTogQ3JlYXRlVHJhbnNwb3J0YXRpb25NYW5pZmVzdERUTyA9IHtcbiAgICAgICAgbWFuaWZlc3RfdHlwZTogJ2RlcGFydHVyZScsXG4gICAgICAgIGRhdGU6IGRhdGVTdHIsXG4gICAgICAgIHRpbWVfd2luZG93X3N0YXJ0OiBzdGFydFRpbWUsXG4gICAgICAgIHRpbWVfd2luZG93X2VuZDogZW5kVGltZSxcbiAgICAgICAgZ3Vlc3RfaWRzOiBndWVzdElkcyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNyZWF0ZVJlc3VsdCA9IGF3YWl0IGNyZWF0ZU1hbmlmZXN0KG1hbmlmZXN0RGF0YSk7XG4gICAgICBpZiAoY3JlYXRlUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgbWFuaWZlc3RzLnB1c2goY3JlYXRlUmVzdWx0LmRhdGEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1hbmlmZXN0cyB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IEVSUk9SX0NPREVTLlVOS05PV05fRVJST1IsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHRyYW5zcG9ydGF0aW9uIG1hbmlmZXN0LlxuICogXG4gKiBAcGFyYW0gZGF0YSAtIE1hbmlmZXN0IGRhdGFcbiAqIEByZXR1cm5zIFJlc3VsdCBjb250YWluaW5nIGNyZWF0ZWQgbWFuaWZlc3Qgb3IgZXJyb3IgZGV0YWlsc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlTWFuaWZlc3QoXG4gIGRhdGE6IENyZWF0ZVRyYW5zcG9ydGF0aW9uTWFuaWZlc3REVE9cbik6IFByb21pc2U8UmVzdWx0PFRyYW5zcG9ydGF0aW9uTWFuaWZlc3Q+PiB7XG4gIHRyeSB7XG4gICAgLy8gMS4gVmFsaWRhdGVcbiAgICBjb25zdCB2YWxpZGF0aW9uID0gY3JlYXRlVHJhbnNwb3J0YXRpb25NYW5pZmVzdFNjaGVtYS5zYWZlUGFyc2UoZGF0YSk7XG4gICAgaWYgKCF2YWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6IEVSUk9SX0NPREVTLlZBTElEQVRJT05fRVJST1IsXG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgbWFuaWZlc3QgZGF0YScsXG4gICAgICAgICAgZGV0YWlsczogdmFsaWRhdGlvbi5lcnJvci5pc3N1ZXMsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIDIuIFNhbml0aXplXG4gICAgY29uc3Qgc2FuaXRpemVkID0ge1xuICAgICAgLi4udmFsaWRhdGlvbi5kYXRhLFxuICAgICAgdmVoaWNsZV90eXBlOiB2YWxpZGF0aW9uLmRhdGEudmVoaWNsZV90eXBlXG4gICAgICAgID8gc2FuaXRpemVJbnB1dCh2YWxpZGF0aW9uLmRhdGEudmVoaWNsZV90eXBlKVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgIGRyaXZlcl9uYW1lOiB2YWxpZGF0aW9uLmRhdGEuZHJpdmVyX25hbWVcbiAgICAgICAgPyBzYW5pdGl6ZUlucHV0KHZhbGlkYXRpb24uZGF0YS5kcml2ZXJfbmFtZSlcbiAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICBkcml2ZXJfcGhvbmU6IHZhbGlkYXRpb24uZGF0YS5kcml2ZXJfcGhvbmVcbiAgICAgICAgPyBzYW5pdGl6ZUlucHV0KHZhbGlkYXRpb24uZGF0YS5kcml2ZXJfcGhvbmUpXG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgbm90ZXM6IHZhbGlkYXRpb24uZGF0YS5ub3Rlc1xuICAgICAgICA/IHNhbml0aXplSW5wdXQodmFsaWRhdGlvbi5kYXRhLm5vdGVzKVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICB9O1xuXG4gICAgLy8gMy4gSW5zZXJ0IGludG8gZGF0YWJhc2VcbiAgICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlKCk7XG4gICAgY29uc3QgeyBkYXRhOiBtYW5pZmVzdCwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndHJhbnNwb3J0YXRpb25fbWFuaWZlc3RzJylcbiAgICAgIC5pbnNlcnQoc2FuaXRpemVkKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6IEVSUk9SX0NPREVTLkRBVEFCQVNFX0VSUk9SLFxuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgZGV0YWlsczogZXJyb3IsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1hbmlmZXN0IH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogRVJST1JfQ09ERVMuVU5LTk9XTl9FUlJPUixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBBc3NpZ25zIGd1ZXN0cyB0byBhIHNodXR0bGUgbWFuaWZlc3QuXG4gKiBcbiAqIEBwYXJhbSBtYW5pZmVzdElkIC0gTWFuaWZlc3QgSURcbiAqIEBwYXJhbSBndWVzdElkcyAtIEFycmF5IG9mIGd1ZXN0IElEcyB0byBhc3NpZ25cbiAqIEByZXR1cm5zIFJlc3VsdCBjb250YWluaW5nIHZvaWQgb3IgZXJyb3IgZGV0YWlsc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXNzaWduR3Vlc3RzVG9TaHV0dGxlKFxuICBtYW5pZmVzdElkOiBzdHJpbmcsXG4gIGd1ZXN0SWRzOiBzdHJpbmdbXVxuKTogUHJvbWlzZTxSZXN1bHQ8dm9pZD4+IHtcbiAgdHJ5IHtcbiAgICAvLyBHZXQgY3VycmVudCBtYW5pZmVzdFxuICAgIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2UoKTtcbiAgICBjb25zdCB7IGRhdGE6IG1hbmlmZXN0LCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd0cmFuc3BvcnRhdGlvbl9tYW5pZmVzdHMnKVxuICAgICAgLnNlbGVjdCgnZ3Vlc3RfaWRzJylcbiAgICAgIC5lcSgnaWQnLCBtYW5pZmVzdElkKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGZldGNoRXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6IEVSUk9SX0NPREVTLkRBVEFCQVNFX0VSUk9SLFxuICAgICAgICAgIG1lc3NhZ2U6IGZldGNoRXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBkZXRhaWxzOiBmZXRjaEVycm9yLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBNZXJnZSBndWVzdCBJRHMgKGF2b2lkIGR1cGxpY2F0ZXMpXG4gICAgY29uc3QgY3VycmVudEd1ZXN0SWRzID0gbWFuaWZlc3QuZ3Vlc3RfaWRzIHx8IFtdO1xuICAgIGNvbnN0IHVwZGF0ZWRHdWVzdElkcyA9IEFycmF5LmZyb20obmV3IFNldChbLi4uY3VycmVudEd1ZXN0SWRzLCAuLi5ndWVzdElkc10pKTtcblxuICAgIC8vIFVwZGF0ZSBtYW5pZmVzdFxuICAgIGNvbnN0IHsgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3RyYW5zcG9ydGF0aW9uX21hbmlmZXN0cycpXG4gICAgICAudXBkYXRlKHtcbiAgICAgICAgZ3Vlc3RfaWRzOiB1cGRhdGVkR3Vlc3RJZHMsXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIH0pXG4gICAgICAuZXEoJ2lkJywgbWFuaWZlc3RJZCk7XG5cbiAgICBpZiAodXBkYXRlRXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6IEVSUk9SX0NPREVTLkRBVEFCQVNFX0VSUk9SLFxuICAgICAgICAgIG1lc3NhZ2U6IHVwZGF0ZUVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgZGV0YWlsczogdXBkYXRlRXJyb3IsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHVuZGVmaW5lZCB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IEVSUk9SX0NPREVTLlVOS05PV05fRVJST1IsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB2ZWhpY2xlIHJlcXVpcmVtZW50cyBiYXNlZCBvbiBndWVzdCBjb3VudC5cbiAqIFxuICogQHBhcmFtIGd1ZXN0Q291bnQgLSBUb3RhbCBudW1iZXIgb2YgZ3Vlc3RzXG4gKiBAcmV0dXJucyBSZXN1bHQgY29udGFpbmluZyB2ZWhpY2xlIHJlcXVpcmVtZW50cyBvciBlcnJvciBkZXRhaWxzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjYWxjdWxhdGVWZWhpY2xlUmVxdWlyZW1lbnRzKFxuICBndWVzdENvdW50OiBudW1iZXJcbik6IFByb21pc2U8UmVzdWx0PFZlaGljbGVSZXF1aXJlbWVudFtdPj4ge1xuICB0cnkge1xuICAgIGlmIChndWVzdENvdW50IDwgMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogRVJST1JfQ09ERVMuVkFMSURBVElPTl9FUlJPUixcbiAgICAgICAgICBtZXNzYWdlOiAnR3Vlc3QgY291bnQgbXVzdCBiZSBub24tbmVnYXRpdmUnLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBWZWhpY2xlIGNhcGFjaXR5IGRlZmluaXRpb25zXG4gICAgY29uc3QgdmVoaWNsZXMgPSBbXG4gICAgICB7IHR5cGU6ICdzZWRhbicsIGNhcGFjaXR5OiA0LCBjb3N0OiA1MCB9LFxuICAgICAgeyB0eXBlOiAndmFuJywgY2FwYWNpdHk6IDgsIGNvc3Q6IDgwIH0sXG4gICAgICB7IHR5cGU6ICdtaW5pYnVzJywgY2FwYWNpdHk6IDE1LCBjb3N0OiAxMjAgfSxcbiAgICAgIHsgdHlwZTogJ2J1cycsIGNhcGFjaXR5OiA1MCwgY29zdDogMzAwIH0sXG4gICAgXTtcblxuICAgIC8vIENhbGN1bGF0ZSBvcHRpbWFsIHZlaGljbGUgbWl4IChncmVlZHkgYWxnb3JpdGhtIC0gbGFyZ2VzdCBmaXJzdClcbiAgICBjb25zdCByZXF1aXJlbWVudHM6IFZlaGljbGVSZXF1aXJlbWVudFtdID0gW107XG4gICAgbGV0IHJlbWFpbmluZ0d1ZXN0cyA9IGd1ZXN0Q291bnQ7XG5cbiAgICBmb3IgKGxldCBpID0gdmVoaWNsZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IHZlaGljbGUgPSB2ZWhpY2xlc1tpXTtcbiAgICAgIGlmIChyZW1haW5pbmdHdWVzdHMgPj0gdmVoaWNsZS5jYXBhY2l0eSkge1xuICAgICAgICBjb25zdCBxdWFudGl0eSA9IE1hdGguZmxvb3IocmVtYWluaW5nR3Vlc3RzIC8gdmVoaWNsZS5jYXBhY2l0eSk7XG4gICAgICAgIHJlcXVpcmVtZW50cy5wdXNoKHtcbiAgICAgICAgICB2ZWhpY2xlX3R5cGU6IHZlaGljbGUudHlwZSxcbiAgICAgICAgICBjYXBhY2l0eTogdmVoaWNsZS5jYXBhY2l0eSxcbiAgICAgICAgICBxdWFudGl0eV9uZWVkZWQ6IHF1YW50aXR5LFxuICAgICAgICAgIGVzdGltYXRlZF9jb3N0OiBxdWFudGl0eSAqIHZlaGljbGUuY29zdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlbWFpbmluZ0d1ZXN0cyAtPSBxdWFudGl0eSAqIHZlaGljbGUuY2FwYWNpdHk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHJlbWFpbmluZyBndWVzdHMgd2l0aCBzbWFsbGVzdCB2ZWhpY2xlXG4gICAgaWYgKHJlbWFpbmluZ0d1ZXN0cyA+IDApIHtcbiAgICAgIGNvbnN0IHNtYWxsZXN0VmVoaWNsZSA9IHZlaGljbGVzWzBdO1xuICAgICAgcmVxdWlyZW1lbnRzLnB1c2goe1xuICAgICAgICB2ZWhpY2xlX3R5cGU6IHNtYWxsZXN0VmVoaWNsZS50eXBlLFxuICAgICAgICBjYXBhY2l0eTogc21hbGxlc3RWZWhpY2xlLmNhcGFjaXR5LFxuICAgICAgICBxdWFudGl0eV9uZWVkZWQ6IDEsXG4gICAgICAgIGVzdGltYXRlZF9jb3N0OiBzbWFsbGVzdFZlaGljbGUuY29zdCxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlcXVpcmVtZW50cyB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IEVSUk9SX0NPREVTLlVOS05PV05fRVJST1IsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgZHJpdmVyIHNoZWV0IGZvciBhIG1hbmlmZXN0LlxuICogXG4gKiBAcGFyYW0gbWFuaWZlc3RJZCAtIE1hbmlmZXN0IElEXG4gKiBAcmV0dXJucyBSZXN1bHQgY29udGFpbmluZyBkcml2ZXIgc2hlZXQgb3IgZXJyb3IgZGV0YWlsc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVEcml2ZXJTaGVldChcbiAgbWFuaWZlc3RJZDogc3RyaW5nXG4pOiBQcm9taXNlPFJlc3VsdDxEcml2ZXJTaGVldD4+IHtcbiAgdHJ5IHtcbiAgICAvLyBHZXQgbWFuaWZlc3RcbiAgICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlKCk7XG4gICAgY29uc3QgeyBkYXRhOiBtYW5pZmVzdCwgZXJyb3I6IG1hbmlmZXN0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndHJhbnNwb3J0YXRpb25fbWFuaWZlc3RzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmVxKCdpZCcsIG1hbmlmZXN0SWQpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAobWFuaWZlc3RFcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogRVJST1JfQ09ERVMuREFUQUJBU0VfRVJST1IsXG4gICAgICAgICAgbWVzc2FnZTogbWFuaWZlc3RFcnJvci5tZXNzYWdlLFxuICAgICAgICAgIGRldGFpbHM6IG1hbmlmZXN0RXJyb3IsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIEdldCBndWVzdCBkZXRhaWxzXG4gICAgY29uc3QgeyBkYXRhOiBndWVzdHMsIGVycm9yOiBndWVzdHNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdndWVzdHMnKVxuICAgICAgLnNlbGVjdCgnaWQsIGZpcnN0X25hbWUsIGxhc3RfbmFtZSwgZmxpZ2h0X251bWJlciwgcGhvbmUsIG5vdGVzJylcbiAgICAgIC5pbignaWQnLCBtYW5pZmVzdC5ndWVzdF9pZHMpO1xuXG4gICAgaWYgKGd1ZXN0c0Vycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiBFUlJPUl9DT0RFUy5EQVRBQkFTRV9FUlJPUixcbiAgICAgICAgICBtZXNzYWdlOiBndWVzdHNFcnJvci5tZXNzYWdlLFxuICAgICAgICAgIGRldGFpbHM6IGd1ZXN0c0Vycm9yLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBCdWlsZCBkcml2ZXIgc2hlZXRcbiAgICBjb25zdCBkcml2ZXJTaGVldDogRHJpdmVyU2hlZXQgPSB7XG4gICAgICBtYW5pZmVzdF9pZDogbWFuaWZlc3QuaWQsXG4gICAgICBkYXRlOiBtYW5pZmVzdC5kYXRlLFxuICAgICAgdGltZV93aW5kb3c6IGAke21hbmlmZXN0LnRpbWVfd2luZG93X3N0YXJ0fSAtICR7bWFuaWZlc3QudGltZV93aW5kb3dfZW5kfWAsXG4gICAgICB2ZWhpY2xlX3R5cGU6IG1hbmlmZXN0LnZlaGljbGVfdHlwZSxcbiAgICAgIGRyaXZlcl9uYW1lOiBtYW5pZmVzdC5kcml2ZXJfbmFtZSxcbiAgICAgIGRyaXZlcl9waG9uZTogbWFuaWZlc3QuZHJpdmVyX3Bob25lLFxuICAgICAgZ3Vlc3RzOiBndWVzdHMubWFwKChndWVzdDogYW55KSA9PiAoe1xuICAgICAgICBuYW1lOiBgJHtndWVzdC5maXJzdF9uYW1lfSAke2d1ZXN0Lmxhc3RfbmFtZX1gLFxuICAgICAgICBmbGlnaHRfbnVtYmVyOiBndWVzdC5mbGlnaHRfbnVtYmVyIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgcGhvbmU6IGd1ZXN0LnBob25lIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgc3BlY2lhbF9yZXF1ZXN0czogZ3Vlc3Qubm90ZXMgfHwgdW5kZWZpbmVkLFxuICAgICAgfSkpLFxuICAgICAgdG90YWxfZ3Vlc3RzOiBndWVzdHMubGVuZ3RoLFxuICAgICAgcGlja3VwX2xvY2F0aW9uOiBtYW5pZmVzdC5tYW5pZmVzdF90eXBlID09PSAnYXJyaXZhbCcgPyAnQWlycG9ydCcgOiAnSG90ZWwnLFxuICAgICAgZHJvcG9mZl9sb2NhdGlvbnM6IG1hbmlmZXN0Lm1hbmlmZXN0X3R5cGUgPT09ICdhcnJpdmFsJyA/IFsnSG90ZWwnXSA6IFsnQWlycG9ydCddLFxuICAgIH07XG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBkcml2ZXJTaGVldCB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IEVSUk9SX0NPREVTLlVOS05PV05fRVJST1IsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0b3RhbCBzaHV0dGxlIGNvc3RzIGZvciBtYW5pZmVzdHMuXG4gKiBcbiAqIEBwYXJhbSBtYW5pZmVzdHMgLSBBcnJheSBvZiB0cmFuc3BvcnRhdGlvbiBtYW5pZmVzdHNcbiAqIEByZXR1cm5zIFJlc3VsdCBjb250YWluaW5nIHRvdGFsIGNvc3Qgb3IgZXJyb3IgZGV0YWlsc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2FsY3VsYXRlU2h1dHRsZUNvc3RzKFxuICBtYW5pZmVzdHM6IFRyYW5zcG9ydGF0aW9uTWFuaWZlc3RbXVxuKTogUHJvbWlzZTxSZXN1bHQ8bnVtYmVyPj4ge1xuICB0cnkge1xuICAgIGxldCB0b3RhbENvc3QgPSAwO1xuXG4gICAgZm9yIChjb25zdCBtYW5pZmVzdCBvZiBtYW5pZmVzdHMpIHtcbiAgICAgIGNvbnN0IGd1ZXN0Q291bnQgPSBtYW5pZmVzdC5ndWVzdF9pZHMubGVuZ3RoO1xuICAgICAgY29uc3QgdmVoaWNsZVJlc3VsdCA9IGF3YWl0IGNhbGN1bGF0ZVZlaGljbGVSZXF1aXJlbWVudHMoZ3Vlc3RDb3VudCk7XG4gICAgICBcbiAgICAgIGlmICh2ZWhpY2xlUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc3QgbWFuaWZlc3RDb3N0ID0gdmVoaWNsZVJlc3VsdC5kYXRhLnJlZHVjZShcbiAgICAgICAgICAoc3VtLCByZXEpID0+IHN1bSArIHJlcS5lc3RpbWF0ZWRfY29zdCxcbiAgICAgICAgICAwXG4gICAgICAgICk7XG4gICAgICAgIHRvdGFsQ29zdCArPSBtYW5pZmVzdENvc3Q7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogdG90YWxDb3N0IH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogRVJST1JfQ09ERVMuVU5LTk9XTl9FUlJPUixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJfcmVzZXRTdXBhYmFzZUZvclRlc3RpbmciLCJfc2V0U3VwYWJhc2VGb3JUZXN0aW5nIiwiYXNzaWduR3Vlc3RzVG9TaHV0dGxlIiwiY2FsY3VsYXRlU2h1dHRsZUNvc3RzIiwiY2FsY3VsYXRlVmVoaWNsZVJlcXVpcmVtZW50cyIsImNyZWF0ZU1hbmlmZXN0IiwiZ2VuZXJhdGVBcnJpdmFsTWFuaWZlc3QiLCJnZW5lcmF0ZURlcGFydHVyZU1hbmlmZXN0IiwiZ2VuZXJhdGVEcml2ZXJTaGVldCIsImdldEZsaWdodHNCeUFpcnBvcnQiLCJ1cGRhdGVGbGlnaHRJbmZvIiwiX3N1cGFiYXNlIiwiZ2V0U3VwYWJhc2UiLCJzdXBhYmFzZSIsInJlcXVpcmUiLCJjbGllbnQiLCJndWVzdElkIiwiZmxpZ2h0SW5mbyIsInZhbGlkYXRpb24iLCJmbGlnaHRJbmZvU2NoZW1hIiwic2FmZVBhcnNlIiwic3VjY2VzcyIsImVycm9yIiwiY29kZSIsIkVSUk9SX0NPREVTIiwiVkFMSURBVElPTl9FUlJPUiIsIm1lc3NhZ2UiLCJkZXRhaWxzIiwiaXNzdWVzIiwic2FuaXRpemVkIiwiZGF0YSIsImZsaWdodF9udW1iZXIiLCJzYW5pdGl6ZUlucHV0IiwidW5kZWZpbmVkIiwiYWlybGluZSIsImFycml2YWxEYXRlIiwiYXJyaXZhbF90aW1lIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic3BsaXQiLCJhcnJpdmFsVGltZSIsInN1YnN0cmluZyIsImRlcGFydHVyZURhdGUiLCJkZXBhcnR1cmVfdGltZSIsImRlcGFydHVyZVRpbWUiLCJmcm9tIiwidXBkYXRlIiwiYWlycG9ydF9jb2RlIiwiYXJyaXZhbF9kYXRlIiwiZGVwYXJ0dXJlX2RhdGUiLCJ1cGRhdGVkX2F0IiwiZXEiLCJEQVRBQkFTRV9FUlJPUiIsIlVOS05PV05fRVJST1IiLCJFcnJvciIsImFpcnBvcnRDb2RlIiwic2VsZWN0Iiwibm90IiwiZmxpZ2h0cyIsIm1hcCIsImd1ZXN0IiwiZ3Vlc3RfaWQiLCJpZCIsImRhdGUiLCJ0aW1lV2luZG93SG91cnMiLCJkYXRlU3RyIiwiZ3Vlc3RzIiwibGVuZ3RoIiwidGltZVdpbmRvd3MiLCJNYXAiLCJmb3JFYWNoIiwiaG91ciIsInRpbWVQYXJ0cyIsInBhcnNlSW50Iiwid2luZG93U3RhcnQiLCJNYXRoIiwiZmxvb3IiLCJ3aW5kb3dFbmQiLCJ3aW5kb3dLZXkiLCJTdHJpbmciLCJwYWRTdGFydCIsImhhcyIsInNldCIsImdldCIsInB1c2giLCJtYW5pZmVzdHMiLCJndWVzdElkcyIsImVudHJpZXMiLCJzdGFydFRpbWUiLCJlbmRUaW1lIiwibWFuaWZlc3REYXRhIiwibWFuaWZlc3RfdHlwZSIsInRpbWVfd2luZG93X3N0YXJ0IiwidGltZV93aW5kb3dfZW5kIiwiZ3Vlc3RfaWRzIiwiY3JlYXRlUmVzdWx0IiwiY3JlYXRlVHJhbnNwb3J0YXRpb25NYW5pZmVzdFNjaGVtYSIsInZlaGljbGVfdHlwZSIsImRyaXZlcl9uYW1lIiwiZHJpdmVyX3Bob25lIiwibm90ZXMiLCJtYW5pZmVzdCIsImluc2VydCIsInNpbmdsZSIsIm1hbmlmZXN0SWQiLCJmZXRjaEVycm9yIiwiY3VycmVudEd1ZXN0SWRzIiwidXBkYXRlZEd1ZXN0SWRzIiwiQXJyYXkiLCJTZXQiLCJ1cGRhdGVFcnJvciIsImd1ZXN0Q291bnQiLCJ2ZWhpY2xlcyIsInR5cGUiLCJjYXBhY2l0eSIsImNvc3QiLCJyZXF1aXJlbWVudHMiLCJyZW1haW5pbmdHdWVzdHMiLCJpIiwidmVoaWNsZSIsInF1YW50aXR5IiwicXVhbnRpdHlfbmVlZGVkIiwiZXN0aW1hdGVkX2Nvc3QiLCJzbWFsbGVzdFZlaGljbGUiLCJtYW5pZmVzdEVycm9yIiwiZ3Vlc3RzRXJyb3IiLCJpbiIsImRyaXZlclNoZWV0IiwibWFuaWZlc3RfaWQiLCJ0aW1lX3dpbmRvdyIsIm5hbWUiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwicGhvbmUiLCJzcGVjaWFsX3JlcXVlc3RzIiwidG90YWxfZ3Vlc3RzIiwicGlja3VwX2xvY2F0aW9uIiwiZHJvcG9mZl9sb2NhdGlvbnMiLCJ0b3RhbENvc3QiLCJ2ZWhpY2xlUmVzdWx0IiwibWFuaWZlc3RDb3N0IiwicmVkdWNlIiwic3VtIiwicmVxIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztRQXlDZ0JBO2VBQUFBOztRQVJBQztlQUFBQTs7UUFnZU1DO2VBQUFBOztRQW9OQUM7ZUFBQUE7O1FBbEpBQztlQUFBQTs7UUExSUFDO2VBQUFBOztRQXZMQUM7ZUFBQUE7O1FBNEZBQztlQUFBQTs7UUEwU0FDO2VBQUFBOztRQXZiQUM7ZUFBQUE7O1FBeEZBQztlQUFBQTs7OzhCQXpIMEI7dUJBRXBCO3VDQVVyQjtBQUVQLGtEQUFrRDtBQUNsRCxJQUFJQyxZQUFpQjtBQUVyQjs7O0NBR0MsR0FDRCxTQUFTQztJQUNQLElBQUksQ0FBQ0QsV0FBVztRQUNkLE1BQU0sRUFBRUUsUUFBUSxFQUFFLEdBQUdDLFFBQVE7UUFDN0JILFlBQVlFO0lBQ2Q7SUFDQSxPQUFPRjtBQUNUO0FBTU8sU0FBU1YsdUJBQXVCYyxNQUFXO0lBQ2hESixZQUFZSTtBQUNkO0FBTU8sU0FBU2Y7SUFDZFcsWUFBWTtBQUNkO0FBOEVPLGVBQWVELGlCQUNwQk0sT0FBZSxFQUNmQyxVQUF5QjtJQUV6QixJQUFJO1FBQ0YsY0FBYztRQUNkLE1BQU1DLGFBQWFDLHVDQUFnQixDQUFDQyxTQUFTLENBQUNIO1FBQzlDLElBQUksQ0FBQ0MsV0FBV0csT0FBTyxFQUFFO1lBQ3ZCLE9BQU87Z0JBQ0xBLFNBQVM7Z0JBQ1RDLE9BQU87b0JBQ0xDLE1BQU1DLGtCQUFXLENBQUND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