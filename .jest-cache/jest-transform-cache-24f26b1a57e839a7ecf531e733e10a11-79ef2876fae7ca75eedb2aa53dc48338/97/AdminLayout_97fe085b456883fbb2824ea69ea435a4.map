{"version":3,"names":["AdminLayout","children","currentSection","cov_19pr1umssv","f","pendingPhotosCount","setPendingPhotosCount","s","_react","useState","showShortcutsDialog","setShowShortcutsDialog","fetchPendingCount","response","fetch","result","json","success","b","data","count","error","console","focusSearch","useCallback","searchInput","document","querySelector","focus","openNewForm","addButton","click","showHelp","shortcuts","key","description","category","handler","_useKeyboardShortcuts","useKeyboardShortcuts","useEffect","interval","setInterval","handlePhotoModerated","window","addEventListener","clearInterval","removeEventListener","_jsxruntime","jsxs","className","jsx","_Sidebar","Sidebar","_TopBar","TopBar","id","role","tabIndex","_KeyboardShortcutsDialog","KeyboardShortcutsDialog","isOpen","onClose"],"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/AdminLayout.tsx"],"sourcesContent":["'use client';\n\nimport type { ReactNode } from 'react';\nimport { useState, useEffect, useCallback } from 'react';\nimport { Sidebar } from './Sidebar';\nimport { TopBar } from './TopBar';\nimport { KeyboardShortcutsDialog } from '@/components/ui/KeyboardShortcutsDialog';\nimport { useKeyboardShortcuts } from '@/hooks/useKeyboardShortcuts';\nimport type { KeyboardShortcut } from '@/hooks/useKeyboardShortcuts';\n\ninterface AdminLayoutProps {\n  children: ReactNode;\n  currentSection: string;\n}\n\n/**\n * AdminLayout Client Component\n * \n * Provides consistent layout structure for all admin pages with:\n * - Persistent sidebar navigation with pending photo count\n * - Top bar with user menu\n * - Responsive container with mobile breakpoint handling\n * - Content area for page-specific content\n */\nexport function AdminLayout({ children, currentSection }: AdminLayoutProps) {\n  const [pendingPhotosCount, setPendingPhotosCount] = useState(0);\n  const [showShortcutsDialog, setShowShortcutsDialog] = useState(false);\n\n  const fetchPendingCount = async () => {\n    try {\n      const response = await fetch('/api/admin/photos/pending-count');\n      const result = await response.json();\n      if (result.success) {\n        setPendingPhotosCount(result.data.count);\n      }\n    } catch (error) {\n      console.error('Failed to fetch pending photos count:', error);\n    }\n  };\n\n  // Focus search input handler\n  const focusSearch = useCallback(() => {\n    const searchInput = document.querySelector('input[type=\"search\"]') as HTMLInputElement;\n    if (searchInput) {\n      searchInput.focus();\n    }\n  }, []);\n\n  // Open new entity form handler\n  const openNewForm = useCallback(() => {\n    const addButton = document.querySelector('[data-action=\"add-new\"]') as HTMLButtonElement;\n    if (addButton) {\n      addButton.click();\n    }\n  }, []);\n\n  // Show keyboard shortcuts help\n  const showHelp = useCallback(() => {\n    setShowShortcutsDialog(true);\n  }, []);\n\n  // Define keyboard shortcuts\n  const shortcuts: KeyboardShortcut[] = [\n    {\n      key: '/',\n      description: 'Focus search input',\n      category: 'navigation',\n      handler: focusSearch,\n    },\n    {\n      key: 'n',\n      description: 'Open new entity form',\n      category: 'actions',\n      handler: openNewForm,\n    },\n    {\n      key: '?',\n      description: 'Show keyboard shortcuts',\n      category: 'general',\n      handler: showHelp,\n    },\n    {\n      key: 'Escape',\n      description: 'Close open modals',\n      category: 'general',\n      handler: () => {\n        // Escape is handled by individual modal components\n      },\n    },\n  ];\n\n  // Register keyboard shortcuts\n  useKeyboardShortcuts(shortcuts, !showShortcutsDialog);\n\n  useEffect(() => {\n    // Initial fetch\n    fetchPendingCount();\n\n    // Refresh count every 30 seconds\n    const interval = setInterval(fetchPendingCount, 30000);\n\n    // Listen for photo moderation events\n    const handlePhotoModerated = () => {\n      fetchPendingCount();\n    };\n    window.addEventListener('photoModerated', handlePhotoModerated);\n\n    return () => {\n      clearInterval(interval);\n      window.removeEventListener('photoModerated', handlePhotoModerated);\n    };\n  }, []);\n\n  return (\n    <div className=\"min-h-screen bg-cloud-100\">\n      {/* Sidebar - Fixed on desktop, collapsible on mobile */}\n      <Sidebar currentSection={currentSection} pendingPhotosCount={pendingPhotosCount} />\n\n      {/* Main content area with top bar */}\n      <div className=\"lg:pl-64\">\n        {/* Top bar */}\n        <TopBar />\n\n        {/* Page content */}\n        <main id=\"main-content\" role=\"main\" tabIndex={-1} className=\"p-4 sm:p-6 lg:p-8 focus:outline-none\">\n          <div className=\"max-w-7xl mx-auto\">\n            {children}\n          </div>\n        </main>\n      </div>\n\n      {/* Keyboard shortcuts help dialog */}\n      <KeyboardShortcutsDialog\n        isOpen={showShortcutsDialog}\n        onClose={() => setShowShortcutsDialog(false)}\n        shortcuts={shortcuts}\n      />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]}