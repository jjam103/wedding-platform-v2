{"version":3,"names":["EnhancedPhotoGallery","photoIds","displayMode","cov_1qnct6gwqn","b","autoplayInterval","showThumbnails","className","f","photos","setPhotos","s","_react","useState","loading","setLoading","error","setError","currentIndex","setCurrentIndex","isLightboxOpen","setIsLightboxOpen","isPaused","setIsPaused","userInteracting","setUserInteracting","offset","setOffset","animationRef","useRef","inactivityTimeoutRef","isFlowMode","shouldAutoAdvance","useEffect","fetchPhotos","length","photoPromises","map","id","response","fetch","ok","result","json","success","data","fetchedPhotos","Promise","all","validPhotos","filter","p","sort","a","display_order","err","console","current","cancelAnimationFrame","speed","lastTime","Date","now","animate","deltaTime","prev","newOffset","requestAnimationFrame","interval","setInterval","clearInterval","handleKeyDown","e","key","preventDefault","goToPrevious","goToNext","window","addEventListener","removeEventListener","handleUserInteraction","clearTimeout","setTimeout","currentPhotoIndex","Math","floor","prevIndex","nextIndex","openLightbox","index","_jsxruntime","jsx","visiblePhotoIndex","duplicatedPhotos","photo","jsxs","onClick","_image","default","src","photo_url","alt","alt_text","caption","fill","sizes","onMouseEnter","onMouseLeave","style","transform","width","Fragment"],"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/guest/EnhancedPhotoGallery.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport Image from 'next/image';\n\ninterface Photo {\n  id: string;\n  photo_url: string;\n  caption?: string;\n  alt_text?: string;\n  display_order?: number;\n}\n\ninterface EnhancedPhotoGalleryProps {\n  photoIds: string[];\n  displayMode?: 'gallery' | 'carousel' | 'loop' | 'flow';\n  autoplayInterval?: number;\n  showThumbnails?: boolean;\n  className?: string;\n}\n\n/**\n * Enhanced Photo Gallery Component\n * \n * Advanced photo display with multiple modes:\n * - gallery: Static grid layout\n * - carousel: Discrete slide transitions with navigation\n * - loop: Auto-playing slideshow\n * - flow: Continuous scrolling animation\n * \n * Features:\n * - Thumbnail grid (optional)\n * - Lightbox mode\n * - User interaction pause/resume\n * - Seamless infinite loop\n * - Keyboard navigation\n */\nexport function EnhancedPhotoGallery({\n  photoIds,\n  displayMode = 'gallery',\n  autoplayInterval = 4000,\n  showThumbnails = false,\n  className = '',\n}: EnhancedPhotoGalleryProps) {\n  const [photos, setPhotos] = useState<Photo[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [isLightboxOpen, setIsLightboxOpen] = useState(false);\n  const [isPaused, setIsPaused] = useState(false);\n  const [userInteracting, setUserInteracting] = useState(false);\n  const [offset, setOffset] = useState(0);\n\n  const animationRef = useRef<number | null>(null);\n  const inactivityTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  const isFlowMode = displayMode === 'flow';\n  const shouldAutoAdvance = displayMode === 'loop' || displayMode === 'flow';\n\n  // Fetch photos\n  useEffect(() => {\n    async function fetchPhotos() {\n      if (!photoIds || photoIds.length === 0) {\n        setLoading(false);\n        return;\n      }\n\n      try {\n        setLoading(true);\n        setError(null);\n\n        const photoPromises = photoIds.map(async (id) => {\n          const response = await fetch(`/api/admin/photos/${id}`);\n          if (!response.ok) return null;\n          const result = await response.json();\n          return result.success ? result.data : null;\n        });\n\n        const fetchedPhotos = await Promise.all(photoPromises);\n        const validPhotos = fetchedPhotos\n          .filter((p): p is Photo => p !== null)\n          .sort((a, b) => (a.display_order || 0) - (b.display_order || 0));\n        \n        setPhotos(validPhotos);\n      } catch (err) {\n        console.error('Error fetching photos:', err);\n        setError('Failed to load photos');\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchPhotos();\n  }, [photoIds]);\n\n  // Flow carousel - continuous scrolling animation\n  useEffect(() => {\n    if (!isFlowMode || photos.length <= 1 || isPaused || isLightboxOpen || userInteracting) {\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n      return;\n    }\n\n    const speed = 20 / autoplayInterval;\n    let lastTime = Date.now();\n\n    const animate = () => {\n      const now = Date.now();\n      const deltaTime = now - lastTime;\n      lastTime = now;\n\n      setOffset((prev) => {\n        const newOffset = prev + speed * deltaTime;\n        return newOffset >= photos.length * 100 ? 0 : newOffset;\n      });\n\n      animationRef.current = requestAnimationFrame(animate);\n    };\n\n    animationRef.current = requestAnimationFrame(animate);\n\n    return () => {\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n    };\n  }, [isFlowMode, photos.length, isPaused, isLightboxOpen, autoplayInterval, userInteracting]);\n\n  // Discrete slide animation (loop mode)\n  useEffect(() => {\n    if (displayMode !== 'loop' || photos.length <= 1 || isPaused || isLightboxOpen || userInteracting) {\n      return;\n    }\n\n    const interval = setInterval(() => {\n      setCurrentIndex((prev) => (prev + 1) % photos.length);\n    }, autoplayInterval);\n\n    return () => clearInterval(interval);\n  }, [displayMode, photos.length, isPaused, isLightboxOpen, autoplayInterval, userInteracting]);\n\n  // Keyboard navigation\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (isLightboxOpen || displayMode === 'carousel') {\n        if (e.key === 'ArrowLeft') {\n          e.preventDefault();\n          goToPrevious();\n        } else if (e.key === 'ArrowRight') {\n          e.preventDefault();\n          goToNext();\n        } else if (e.key === 'Escape' && isLightboxOpen) {\n          setIsLightboxOpen(false);\n        }\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [isLightboxOpen, displayMode, photos.length]);\n\n  const handleUserInteraction = () => {\n    setUserInteracting(true);\n    if (inactivityTimeoutRef.current) {\n      clearTimeout(inactivityTimeoutRef.current);\n    }\n    inactivityTimeoutRef.current = setTimeout(() => {\n      setUserInteracting(false);\n    }, 3000);\n  };\n\n  const goToPrevious = () => {\n    handleUserInteraction();\n    if (isFlowMode) {\n      const currentPhotoIndex = Math.floor(offset / 100);\n      const prevIndex = currentPhotoIndex === 0 ? photos.length - 1 : currentPhotoIndex - 1;\n      setOffset(prevIndex * 100);\n    } else {\n      setCurrentIndex((prev) => (prev - 1 + photos.length) % photos.length);\n    }\n  };\n\n  const goToNext = () => {\n    handleUserInteraction();\n    if (isFlowMode) {\n      const currentPhotoIndex = Math.floor(offset / 100);\n      const nextIndex = (currentPhotoIndex + 1) % photos.length;\n      setOffset(nextIndex * 100);\n    } else {\n      setCurrentIndex((prev) => (prev + 1) % photos.length);\n    }\n  };\n\n  const openLightbox = (index: number) => {\n    setCurrentIndex(index);\n    setIsLightboxOpen(true);\n  };\n\n  if (loading) {\n    return (\n      <div className={`animate-pulse ${className}`}>\n        <div className=\"bg-sage-200 rounded-lg h-64 w-full\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className={`text-volcano-600 p-4 bg-volcano-50 rounded-lg ${className}`}>\n        {error}\n      </div>\n    );\n  }\n\n  if (photos.length === 0) {\n    return null;\n  }\n\n  const visiblePhotoIndex = isFlowMode ? Math.floor(offset / 100) % photos.length : currentIndex;\n  const duplicatedPhotos = isFlowMode ? [...photos, ...photos] : photos;\n\n  // Gallery Grid Mode\n  if (displayMode === 'gallery') {\n    return (\n      <div className={className}>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">\n          {photos.map((photo, index) => (\n            <div\n              key={photo.id}\n              className=\"relative aspect-square overflow-hidden rounded-lg bg-sage-100 cursor-pointer group\"\n              onClick={() => openLightbox(index)}\n            >\n              <Image\n                src={photo.photo_url}\n                alt={photo.alt_text || photo.caption || 'Wedding photo'}\n                fill\n                className=\"object-cover group-hover:scale-105 transition-transform duration-300\"\n                sizes=\"(max-width: 640px) 100vw, (max-width: 768px) 50vw, 33vw\"\n              />\n              {photo.caption && (\n                <div className=\"absolute bottom-0 left-0 right-0 bg-black/60 text-white p-2 text-sm\">\n                  {photo.caption}\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  // Carousel/Loop/Flow Modes\n  return (\n    <div className={className}>\n      {/* Thumbnail Grid */}\n      {showThumbnails && (\n        <div className=\"grid grid-cols-3 md:grid-cols-5 gap-2 mb-4\">\n          {photos.map((photo, index) => (\n            <div\n              key={photo.id}\n              className={`aspect-[4/3] rounded-lg overflow-hidden cursor-pointer transition-all ${\n                index === visiblePhotoIndex\n                  ? 'ring-2 ring-jungle-500 shadow-lg'\n                  : 'hover:opacity-80'\n              }`}\n              onClick={() => {\n                if (isFlowMode) {\n                  setOffset(index * 100);\n                } else {\n                  setCurrentIndex(index);\n                }\n                handleUserInteraction();\n              }}\n            >\n              <img\n                src={photo.photo_url}\n                alt={photo.alt_text || photo.caption || `Photo ${index + 1}`}\n                className=\"w-full h-full object-cover\"\n              />\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Main Display */}\n      <div\n        className=\"relative bg-sage-100 rounded-lg overflow-hidden shadow-lg\"\n        onMouseEnter={() => setIsPaused(true)}\n        onMouseLeave={() => setIsPaused(false)}\n      >\n        <div className=\"aspect-video relative overflow-hidden\">\n          {isFlowMode ? (\n            // Flow Carousel - Continuous scrolling\n            <div\n              className=\"flex h-full\"\n              style={{ transform: `translateX(-${offset}%)` }}\n            >\n              {duplicatedPhotos.map((photo, index) => (\n                <div\n                  key={`${photo.id}-${index}`}\n                  className=\"h-full flex-shrink-0\"\n                  style={{ width: '100%' }}\n                >\n                  <img\n                    src={photo.photo_url}\n                    alt={photo.alt_text || photo.caption || ''}\n                    className=\"w-full h-full object-cover\"\n                  />\n                </div>\n              ))}\n            </div>\n          ) : (\n            // Discrete transitions\n            <div\n              className=\"flex h-full transition-transform duration-500 ease-in-out\"\n              style={{ transform: `translateX(-${currentIndex * 100}%)` }}\n            >\n              {photos.map((photo) => (\n                <div key={photo.id} className=\"w-full h-full flex-shrink-0\">\n                  <img\n                    src={photo.photo_url}\n                    alt={photo.alt_text || photo.caption || ''}\n                    className=\"w-full h-full object-contain bg-sage-50\"\n                  />\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/* Navigation Arrows */}\n          {photos.length > 1 && (\n            <>\n              <button\n                onClick={goToPrevious}\n                className=\"absolute left-4 top-1/2 -translate-y-1/2 bg-black/70 text-white p-3 rounded-full hover:bg-black/90 transition z-10\"\n                aria-label=\"Previous photo\"\n              >\n                ←\n              </button>\n              <button\n                onClick={goToNext}\n                className=\"absolute right-4 top-1/2 -translate-y-1/2 bg-black/70 text-white p-3 rounded-full hover:bg-black/90 transition z-10\"\n                aria-label=\"Next photo\"\n              >\n                →\n              </button>\n            </>\n          )}\n        </div>\n\n        {/* Caption */}\n        {photos[visiblePhotoIndex]?.caption && (\n          <div className=\"p-4 bg-white\">\n            <p className=\"text-sage-700 text-center\">\n              {photos[visiblePhotoIndex].caption}\n            </p>\n          </div>\n        )}\n      </div>\n\n      {/* Lightbox */}\n      {isLightboxOpen && (\n        <div className=\"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4\">\n          <div className=\"relative max-w-4xl max-h-full\">\n            <img\n              src={photos[currentIndex].photo_url}\n              alt={photos[currentIndex].alt_text || photos[currentIndex].caption || ''}\n              className=\"max-w-full max-h-full object-contain\"\n            />\n\n            {/* Close Button */}\n            <button\n              onClick={() => setIsLightboxOpen(false)}\n              className=\"absolute top-4 right-4 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition\"\n              aria-label=\"Close lightbox\"\n            >\n              ✕\n            </button>\n\n            {/* Navigation in Lightbox */}\n            {photos.length > 1 && (\n              <>\n                <button\n                  onClick={goToPrevious}\n                  className=\"absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 text-white p-3 rounded-full hover:bg-black/70 transition\"\n                  aria-label=\"Previous photo\"\n                >\n                  ←\n                </button>\n                <button\n                  onClick={goToNext}\n                  className=\"absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 text-white p-3 rounded-full hover:bg-black/70 transition\"\n                  aria-label=\"Next photo\"\n                >\n                  →\n                </button>\n              </>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}