{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/app/api/admin/sections/by-page/[pageType]/[pageId]/route.ts"],"sourcesContent":["/**\n * API Route: GET /api/admin/sections/by-page/:pageType/:pageId\n * \n * Lists all sections for a given page\n * \n * Validates: Requirements 15.2\n */\n\nimport { NextResponse } from 'next/server';\nimport { verifyAuth, errorResponse, successResponse } from '@/lib/apiHelpers';\nimport { listSections } from '@/services/sectionsService';\n\nexport async function GET(\n  request: Request,\n  { params }: { params: Promise<{ pageType: string; pageId: string }> }\n) {\n  try {\n    // 1. Verify authentication\n    const authResult = await verifyAuth();\n    if (!authResult.success) {\n      return errorResponse('UNAUTHORIZED', 'Authentication required', 401);\n    }\n\n    // 2. Get sections\n    const resolvedParams = await params;\n\n    const result = await listSections(resolvedParams.pageType, resolvedParams.pageId);\n\n    // 3. Return response\n    if (!result.success) {\n      const statusCode = result.error.code === 'NOT_FOUND' ? 404 : 500;\n      return errorResponse(\n        result.error.code,\n        result.error.message,\n        statusCode,\n        result.error.details\n      );\n    }\n\n    return successResponse(result.data);\n  } catch (error) {\n    return errorResponse(\n      'INTERNAL_ERROR',\n      error instanceof Error ? error.message : 'Unknown error',\n      500\n    );\n  }\n}\n"],"names":["GET","request","params","authResult","verifyAuth","success","errorResponse","resolvedParams","result","listSections","pageType","pageId","statusCode","error","code","message","details","successResponse","data","Error"],"mappings":"AAAA;;;;;;CAMC;;;;+BAMqBA;;;eAAAA;;;4BAHqC;iCAC9B;AAEtB,eAAeA,IACpBC,OAAgB,EAChB,EAAEC,MAAM,EAA6D;IAErE,IAAI;QACF,2BAA2B;QAC3B,MAAMC,aAAa,MAAMC,IAAAA,sBAAU;QACnC,IAAI,CAACD,WAAWE,OAAO,EAAE;YACvB,OAAOC,IAAAA,yBAAa,EAAC,gBAAgB,2BAA2B;QAClE;QAEA,kBAAkB;QAClB,MAAMC,iBAAiB,MAAML;QAE7B,MAAMM,SAAS,MAAMC,IAAAA,6BAAY,EAACF,eAAeG,QAAQ,EAAEH,eAAeI,MAAM;QAEhF,qBAAqB;QACrB,IAAI,CAACH,OAAOH,OAAO,EAAE;YACnB,MAAMO,aAAaJ,OAAOK,KAAK,CAACC,IAAI,KAAK,cAAc,MAAM;YAC7D,OAAOR,IAAAA,yBAAa,EAClBE,OAAOK,KAAK,CAACC,IAAI,EACjBN,OAAOK,KAAK,CAACE,OAAO,EACpBH,YACAJ,OAAOK,KAAK,CAACG,OAAO;QAExB;QAEA,OAAOC,IAAAA,2BAAe,EAACT,OAAOU,IAAI;IACpC,EAAE,OAAOL,OAAO;QACd,OAAOP,IAAAA,yBAAa,EAClB,kBACAO,iBAAiBM,QAAQN,MAAME,OAAO,GAAG,iBACzC;IAEJ;AACF"}