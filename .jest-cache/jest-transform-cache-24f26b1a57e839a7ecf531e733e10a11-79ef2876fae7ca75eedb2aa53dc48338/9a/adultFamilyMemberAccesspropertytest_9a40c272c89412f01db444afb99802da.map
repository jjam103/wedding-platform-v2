{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/services/adultFamilyMemberAccess.property.test.ts"],"sourcesContent":["import * as fc from 'fast-check';\nimport { createClient } from '@supabase/supabase-js';\n\n/**\n * Property 18: Adult Family Member Access\n * \n * For any adult family member in a guest group, they should have read and edit access\n * to all other members in their family group, including their spouse and children.\n * \n * Validates: Requirements 14.3\n * Feature: destination-wedding-platform, Property 18: Adult Family Member Access\n */\n\n// Mock Supabase client for testing\nfunction createMockSupabaseClient() {\n  const mockData = {\n    groups: new Map<string, any>(),\n    guests: new Map<string, any>(),\n    users: new Map<string, any>(),\n  };\n\n  return {\n    from: (table: string) => ({\n      select: (columns: string = '*') => ({\n        eq: (column: string, value: any) => ({\n          single: async () => {\n            if (table === 'guests') {\n              const guest = Array.from(mockData.guests.values()).find(\n                (g: any) => g[column] === value\n              );\n              return guest\n                ? { data: guest, error: null }\n                : { data: null, error: { message: 'Not found' } };\n            }\n            return { data: null, error: { message: 'Not found' } };\n          },\n          then: async (resolve: any) => {\n            if (table === 'guests') {\n              const guests = Array.from(mockData.guests.values()).filter(\n                (g: any) => g[column] === value\n              );\n              resolve({ data: guests, error: null });\n            } else {\n              resolve({ data: [], error: null });\n            }\n          },\n        }),\n      }),\n      update: (data: any) => ({\n        eq: (column: string, value: any) => ({\n          select: () => ({\n            single: async () => {\n              if (table === 'guests') {\n                const guest = mockData.guests.get(value);\n                if (guest) {\n                  const updated = { ...guest, ...data };\n                  mockData.guests.set(value, updated);\n                  return { data: updated, error: null };\n                }\n              }\n              return { data: null, error: { message: 'Not found' } };\n            },\n          }),\n        }),\n      }),\n      insert: (data: any) => ({\n        select: () => ({\n          single: async () => {\n            const id = `${table}-${Date.now()}-${Math.random()}`;\n            const record = { ...data, id };\n            if (table === 'guests') {\n              mockData.guests.set(id, record);\n            } else if (table === 'groups') {\n              mockData.groups.set(id, record);\n            }\n            return { data: record, error: null };\n          },\n        }),\n      }),\n    }),\n    auth: {\n      getSession: async () => ({\n        data: { session: { user: { email: 'test@example.com' } } },\n        error: null,\n      }),\n    },\n    _mockData: mockData,\n  };\n}\n\n// Arbitraries for property-based testing\nconst groupIdArbitrary = fc.uuid();\n\nconst adultGuestArbitrary = fc.record({\n  id: fc.uuid(),\n  group_id: fc.uuid(),\n  first_name: fc.string({ minLength: 1, maxLength: 50 }),\n  last_name: fc.string({ minLength: 1, maxLength: 50 }),\n  email: fc.emailAddress(),\n  age_type: fc.constant('adult' as const),\n  guest_type: fc.constantFrom(\n    'wedding_party',\n    'wedding_guest',\n    'prewedding_only',\n    'postwedding_only'\n  ),\n  created_at: fc.date().map((d) => d.toISOString()),\n  updated_at: fc.date().map((d) => d.toISOString()),\n});\n\nconst familyMemberArbitrary = fc.record({\n  id: fc.uuid(),\n  first_name: fc.string({ minLength: 1, maxLength: 50 }),\n  last_name: fc.string({ minLength: 1, maxLength: 50 }),\n  email: fc.option(fc.emailAddress(), { nil: undefined }),\n  age_type: fc.constantFrom('adult', 'child', 'senior'),\n  guest_type: fc.constantFrom(\n    'wedding_party',\n    'wedding_guest',\n    'prewedding_only',\n    'postwedding_only'\n  ),\n  created_at: fc.date().map((d) => d.toISOString()),\n  updated_at: fc.date().map((d) => d.toISOString()),\n});\n\ndescribe('Feature: destination-wedding-platform, Property 18: Adult Family Member Access', () => {\n  it('should allow adults to read all family members in their group', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        groupIdArbitrary,\n        adultGuestArbitrary,\n        fc.array(familyMemberArbitrary, { minLength: 1, maxLength: 5 }),\n        async (groupId, adultGuest, familyMembers) => {\n          // Arrange: Create mock client and setup data\n          const mockClient = createMockSupabaseClient();\n          const mockData = mockClient._mockData;\n\n          // Set adult guest with group\n          const adult = { ...adultGuest, group_id: groupId };\n          mockData.guests.set(adult.id, adult);\n\n          // Set family members with same group\n          familyMembers.forEach((member) => {\n            const familyMember = { ...member, group_id: groupId };\n            mockData.guests.set(familyMember.id, familyMember);\n          });\n\n          // Act: Query for family members as adult\n          const result = await mockClient\n            .from('guests')\n            .select('*')\n            .eq('group_id', groupId);\n\n          // Assert: Adult should be able to read all family members\n          expect(result.data).toBeDefined();\n          expect(result.error).toBeNull();\n          expect(result.data.length).toBeGreaterThanOrEqual(familyMembers.length);\n\n          // Verify all family members are accessible\n          const accessibleIds = result.data.map((g: any) => g.id);\n          familyMembers.forEach((member) => {\n            expect(accessibleIds).toContain(member.id);\n          });\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should allow adults to edit all family members in their group', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        groupIdArbitrary,\n        adultGuestArbitrary,\n        familyMemberArbitrary,\n        fc.string({ minLength: 1, maxLength: 50 }),\n        async (groupId, adultGuest, familyMember, newFirstName) => {\n          // Arrange: Create mock client and setup data\n          const mockClient = createMockSupabaseClient();\n          const mockData = mockClient._mockData;\n\n          // Set adult guest with group\n          const adult = { ...adultGuest, group_id: groupId };\n          mockData.guests.set(adult.id, adult);\n\n          // Set family member with same group\n          const member = { ...familyMember, group_id: groupId };\n          mockData.guests.set(member.id, member);\n\n          // Act: Update family member as adult\n          const updateResult = await mockClient\n            .from('guests')\n            .update({ first_name: newFirstName })\n            .eq('id', member.id)\n            .select()\n            .single();\n\n          // Assert: Adult should be able to edit family member\n          expect(updateResult.data).toBeDefined();\n          expect(updateResult.error).toBeNull();\n          expect(updateResult.data.first_name).toBe(newFirstName);\n          expect(updateResult.data.id).toBe(member.id);\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should allow adults to access family members regardless of age type', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        groupIdArbitrary,\n        adultGuestArbitrary,\n        fc.array(\n          fc.record({\n            id: fc.uuid(),\n            first_name: fc.string({ minLength: 1, maxLength: 50 }),\n            last_name: fc.string({ minLength: 1, maxLength: 50 }),\n            age_type: fc.constantFrom('adult', 'child', 'senior'),\n            guest_type: fc.constantFrom('wedding_party', 'wedding_guest'),\n            created_at: fc.date().map((d) => d.toISOString()),\n            updated_at: fc.date().map((d) => d.toISOString()),\n          }),\n          { minLength: 2, maxLength: 6 }\n        ),\n        async (groupId, adultGuest, mixedAgeMembers) => {\n          // Arrange: Create mock client and setup data\n          const mockClient = createMockSupabaseClient();\n          const mockData = mockClient._mockData;\n\n          // Set adult guest with group\n          const adult = { ...adultGuest, group_id: groupId };\n          mockData.guests.set(adult.id, adult);\n\n          // Set family members with mixed ages\n          mixedAgeMembers.forEach((member) => {\n            const familyMember = { ...member, group_id: groupId };\n            mockData.guests.set(familyMember.id, familyMember);\n          });\n\n          // Act: Query for all family members\n          const result = await mockClient\n            .from('guests')\n            .select('*')\n            .eq('group_id', groupId);\n\n          // Assert: Adult should access all members regardless of age\n          expect(result.data).toBeDefined();\n          expect(result.error).toBeNull();\n\n          const childMembers = mixedAgeMembers.filter((m) => m.age_type === 'child');\n          const adultMembers = mixedAgeMembers.filter((m) => m.age_type === 'adult');\n          const seniorMembers = mixedAgeMembers.filter((m) => m.age_type === 'senior');\n\n          const accessibleIds = result.data.map((g: any) => g.id);\n\n          // Verify access to children\n          childMembers.forEach((child) => {\n            expect(accessibleIds).toContain(child.id);\n          });\n\n          // Verify access to other adults\n          adultMembers.forEach((otherAdult) => {\n            expect(accessibleIds).toContain(otherAdult.id);\n          });\n\n          // Verify access to seniors\n          seniorMembers.forEach((senior) => {\n            expect(accessibleIds).toContain(senior.id);\n          });\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should not allow adults to access family members from different groups', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.uuid(),\n        fc.uuid(),\n        adultGuestArbitrary,\n        familyMemberArbitrary,\n        async (groupId1, groupId2, adultGuest, otherFamilyMember) => {\n          // Ensure different groups\n          fc.pre(groupId1 !== groupId2);\n\n          // Arrange: Create mock client and setup data\n          const mockClient = createMockSupabaseClient();\n          const mockData = mockClient._mockData;\n\n          // Set adult guest in group 1\n          const adult = { ...adultGuest, group_id: groupId1 };\n          mockData.guests.set(adult.id, adult);\n\n          // Set other family member in group 2\n          const otherMember = { ...otherFamilyMember, group_id: groupId2 };\n          mockData.guests.set(otherMember.id, otherMember);\n\n          // Act: Query for adult's family members (group 1)\n          const result = await mockClient\n            .from('guests')\n            .select('*')\n            .eq('group_id', groupId1);\n\n          // Assert: Adult should not see members from other groups\n          expect(result.data).toBeDefined();\n          const accessibleIds = result.data.map((g: any) => g.id);\n          expect(accessibleIds).not.toContain(otherMember.id);\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n});\n"],"names":["createMockSupabaseClient","mockData","groups","Map","guests","users","from","table","select","columns","eq","column","value","single","guest","Array","values","find","g","data","error","message","then","resolve","filter","update","get","updated","set","insert","id","Date","now","Math","random","record","auth","getSession","session","user","email","_mockData","groupIdArbitrary","fc","uuid","adultGuestArbitrary","group_id","first_name","string","minLength","maxLength","last_name","emailAddress","age_type","constant","guest_type","constantFrom","created_at","date","map","d","toISOString","updated_at","familyMemberArbitrary","option","nil","undefined","describe","it","assert","asyncProperty","array","groupId","adultGuest","familyMembers","mockClient","adult","forEach","member","familyMember","result","expect","toBeDefined","toBeNull","length","toBeGreaterThanOrEqual","accessibleIds","toContain","numRuns","newFirstName","updateResult","toBe","mixedAgeMembers","childMembers","m","adultMembers","seniorMembers","child","otherAdult","senior","groupId1","groupId2","otherFamilyMember","pre","otherMember","not"],"mappings":"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"}