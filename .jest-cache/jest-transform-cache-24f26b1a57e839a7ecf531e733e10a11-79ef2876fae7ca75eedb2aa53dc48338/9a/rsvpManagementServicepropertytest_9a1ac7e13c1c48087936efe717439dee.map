{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/services/rsvpManagementService.property.test.ts"],"sourcesContent":["/**\n * Property-Based Tests for RSVP Management Service\n * \n * Tests universal properties that should hold across all valid inputs.\n * Uses fast-check for property-based testing.\n * \n * **Feature: admin-ux-enhancements**\n * **Validates: Requirements 6.2, 6.4, 6.5**\n */\n\nimport * as fc from 'fast-check';\nimport { createClient } from '@supabase/supabase-js';\nimport {\n  listRSVPs,\n  getRSVPStatistics,\n  bulkUpdateRSVPs,\n  type RSVPFilters,\n  type RSVPViewModel,\n} from './rsvpManagementService';\nimport { uuidArbitrary, isoDateTimeArbitrary, nameArbitrary, emailArbitrary } from '../__tests__/helpers/arbitraries';\n\n// Test database client\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY!;\nconst testDb = createClient(supabaseUrl, supabaseServiceKey);\n\n/**\n * Arbitrary for RSVP status\n */\nconst rsvpStatusArbitrary = fc.constantFrom('pending', 'attending', 'declined', 'maybe');\n\n/**\n * Arbitrary for RSVP filters\n * Generates valid filter combinations\n */\nconst rsvpFiltersArbitrary = fc.record({\n  eventId: fc.option(uuidArbitrary, { nil: undefined }),\n  activityId: fc.option(uuidArbitrary, { nil: undefined }),\n  status: fc.option(rsvpStatusArbitrary, { nil: undefined }),\n  guestId: fc.option(uuidArbitrary, { nil: undefined }),\n  searchQuery: fc.option(fc.string({ minLength: 1, maxLength: 50 }), { nil: undefined }),\n});\n\n/**\n * Helper: Create test guest\n */\nasync function createTestGuest(groupId: string, overrides: Partial<any> = {}) {\n  const { data, error } = await testDb\n    .from('guests')\n    .insert({\n      first_name: 'Test',\n      last_name: 'Guest',\n      email: `test-${Date.now()}-${Math.random()}@example.com`,\n      age_type: 'adult',\n      guest_type: 'wedding_guest',\n      group_id: groupId,\n      auth_method: 'email_matching',\n      ...overrides,\n    })\n    .select()\n    .single();\n\n  if (error) {\n    console.error('Failed to create test guest:', error);\n    throw error;\n  }\n  return data;\n}\n\n/**\n * Helper: Create test event\n */\nasync function createTestEvent(overrides: Partial<any> = {}) {\n  const { data, error } = await testDb\n    .from('events')\n    .insert({\n      name: `Test Event ${Date.now()}`,\n      event_type: 'ceremony',\n      start_date: new Date().toISOString(),\n      status: 'published',\n      ...overrides,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\n/**\n * Helper: Create test activity\n */\nasync function createTestActivity(overrides: Partial<any> = {}) {\n  const { data, error } = await testDb\n    .from('activities')\n    .insert({\n      name: `Test Activity ${Date.now()}`,\n      activity_type: 'activity',\n      start_time: new Date().toISOString(),\n      status: 'published',\n      display_order: 0,\n      ...overrides,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\n/**\n * Helper: Create test RSVP\n */\nasync function createTestRSVP(guestId: string, overrides: Partial<any> = {}) {\n  const { data, error } = await testDb\n    .from('rsvps')\n    .insert({\n      guest_id: guestId,\n      status: 'pending',\n      ...overrides,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\n/**\n * Helper: Cleanup test data\n */\nasync function cleanupTestData(ids: { rsvpIds?: string[]; guestIds?: string[]; eventIds?: string[]; activityIds?: string[] }) {\n  if (ids.rsvpIds?.length) {\n    await testDb.from('rsvps').delete().in('id', ids.rsvpIds);\n  }\n  if (ids.guestIds?.length) {\n    await testDb.from('guests').delete().in('id', ids.guestIds);\n  }\n  if (ids.activityIds?.length) {\n    await testDb.from('activities').delete().in('id', ids.activityIds);\n  }\n  if (ids.eventIds?.length) {\n    await testDb.from('events').delete().in('id', ids.eventIds);\n  }\n}\n\ndescribe('Feature: admin-ux-enhancements, RSVP Management Service Property Tests', () => {\n  let testGroupId: string;\n\n  beforeAll(async () => {\n    // Create a test group for all tests\n    const { data, error } = await testDb\n      .from('guest_groups')\n      .insert({\n        name: 'Test Group for RSVP Tests',\n      })\n      .select()\n      .single();\n\n    if (error) {\n      console.error('Failed to create test group:', error);\n      throw error;\n    }\n    testGroupId = data.id;\n  });\n\n  afterAll(async () => {\n    // Clean up test group\n    if (testGroupId) {\n      await testDb.from('guest_groups').delete().eq('id', testGroupId);\n    }\n  });\n  /**\n   * Property 7: RSVP Filter Composition\n   * \n   * For any combination of RSVP filters (event, activity, status, guest),\n   * the results should only include RSVPs matching ALL specified criteria.\n   * \n   * **Validates: Requirements 6.2**\n   */\n  describe('Property 7: RSVP Filter Composition', () => {\n    it('should return only RSVPs matching ALL specified filter criteria', async () => {\n      // Create test data\n      const guest1 = await createTestGuest(testGroupId, { first_name: 'Alice', last_name: 'Smith' });\n      const guest2 = await createTestGuest(testGroupId, { first_name: 'Bob', last_name: 'Jones' });\n      const event1 = await createTestEvent({ name: 'Wedding Ceremony' });\n      const event2 = await createTestEvent({ name: 'Reception' });\n      const activity1 = await createTestActivity({ event_id: event1.id, name: 'Ceremony' });\n      const activity2 = await createTestActivity({ event_id: event2.id, name: 'Dinner' });\n\n      // Create RSVPs with different combinations\n      const rsvp1 = await createTestRSVP(guest1.id, { event_id: event1.id, activity_id: activity1.id, status: 'attending' });\n      const rsvp2 = await createTestRSVP(guest1.id, { event_id: event2.id, activity_id: activity2.id, status: 'declined' });\n      const rsvp3 = await createTestRSVP(guest2.id, { event_id: event1.id, activity_id: activity1.id, status: 'pending' });\n      const rsvp4 = await createTestRSVP(guest2.id, { event_id: event2.id, activity_id: activity2.id, status: 'attending' });\n\n      try {\n        // Test 1: Filter by event only\n        const result1 = await listRSVPs({ eventId: event1.id }, { page: 1, limit: 50 });\n        expect(result1.success).toBe(true);\n        if (result1.success) {\n          const rsvpIds = result1.data.data.map(r => r.id);\n          expect(rsvpIds).toContain(rsvp1.id);\n          expect(rsvpIds).toContain(rsvp3.id);\n          expect(rsvpIds).not.toContain(rsvp2.id);\n          expect(rsvpIds).not.toContain(rsvp4.id);\n        }\n\n        // Test 2: Filter by event AND status\n        const result2 = await listRSVPs({ eventId: event1.id, status: 'attending' }, { page: 1, limit: 50 });\n        expect(result2.success).toBe(true);\n        if (result2.success) {\n          const rsvpIds = result2.data.data.map(r => r.id);\n          expect(rsvpIds).toContain(rsvp1.id);\n          expect(rsvpIds).not.toContain(rsvp2.id);\n          expect(rsvpIds).not.toContain(rsvp3.id);\n          expect(rsvpIds).not.toContain(rsvp4.id);\n        }\n\n        // Test 3: Filter by event AND activity AND status\n        const result3 = await listRSVPs(\n          { eventId: event2.id, activityId: activity2.id, status: 'attending' },\n          { page: 1, limit: 50 }\n        );\n        expect(result3.success).toBe(true);\n        if (result3.success) {\n          const rsvpIds = result3.data.data.map(r => r.id);\n          expect(rsvpIds).toContain(rsvp4.id);\n          expect(rsvpIds).not.toContain(rsvp1.id);\n          expect(rsvpIds).not.toContain(rsvp2.id);\n          expect(rsvpIds).not.toContain(rsvp3.id);\n        }\n\n        // Test 4: Filter by guest\n        const result4 = await listRSVPs({ guestId: guest1.id }, { page: 1, limit: 50 });\n        expect(result4.success).toBe(true);\n        if (result4.success) {\n          const rsvpIds = result4.data.data.map(r => r.id);\n          expect(rsvpIds).toContain(rsvp1.id);\n          expect(rsvpIds).toContain(rsvp2.id);\n          expect(rsvpIds).not.toContain(rsvp3.id);\n          expect(rsvpIds).not.toContain(rsvp4.id);\n        }\n\n        // Test 5: Filter by guest AND status\n        const result5 = await listRSVPs({ guestId: guest2.id, status: 'attending' }, { page: 1, limit: 50 });\n        expect(result5.success).toBe(true);\n        if (result5.success) {\n          const rsvpIds = result5.data.data.map(r => r.id);\n          expect(rsvpIds).toContain(rsvp4.id);\n          expect(rsvpIds).not.toContain(rsvp1.id);\n          expect(rsvpIds).not.toContain(rsvp2.id);\n          expect(rsvpIds).not.toContain(rsvp3.id);\n        }\n      } finally {\n        // Cleanup\n        await cleanupTestData({\n          rsvpIds: [rsvp1.id, rsvp2.id, rsvp3.id, rsvp4.id],\n          guestIds: [guest1.id, guest2.id],\n          activityIds: [activity1.id, activity2.id],\n          eventIds: [event1.id, event2.id],\n        });\n      }\n    }, 30000);\n  });\n\n  /**\n   * Property 8: RSVP Statistics Accuracy\n   * \n   * For any set of RSVPs, the statistics dashboard should accurately reflect\n   * the count of RSVPs by status and total guest count.\n   * \n   * **Validates: Requirements 6.5**\n   */\n  describe('Property 8: RSVP Statistics Accuracy', () => {\n    it('should accurately calculate RSVP statistics for any set of RSVPs', async () => {\n      await fc.assert(\n        fc.asyncProperty(\n          fc.array(\n            fc.record({\n              status: rsvpStatusArbitrary,\n              guestCount: fc.option(fc.integer({ min: 1, max: 10 }), { nil: null }),\n            }),\n            { minLength: 1, maxLength: 20 }\n          ),\n          async (rsvpConfigs) => {\n            // Create test data\n            const guest = await createTestGuest(testGroupId);\n            const event = await createTestEvent();\n            \n            const createdRsvps = [];\n            for (const config of rsvpConfigs) {\n              const rsvp = await createTestRSVP(guest.id, {\n                event_id: event.id,\n                status: config.status,\n                guest_count: config.guestCount,\n              });\n              createdRsvps.push(rsvp);\n            }\n\n            try {\n              // Get statistics\n              const result = await getRSVPStatistics({ eventId: event.id });\n              \n              expect(result.success).toBe(true);\n              \n              if (result.success) {\n                const stats = result.data;\n                \n                // Calculate expected statistics\n                const expectedByStatus = {\n                  attending: 0,\n                  declined: 0,\n                  maybe: 0,\n                  pending: 0,\n                };\n                let expectedGuestCount = 0;\n                \n                for (const config of rsvpConfigs) {\n                  expectedByStatus[config.status]++;\n                  if (config.status === 'attending') {\n                    expectedGuestCount += config.guestCount || 1;\n                  }\n                }\n                \n                // Verify statistics match expected values\n                expect(stats.totalRSVPs).toBe(rsvpConfigs.length);\n                expect(stats.byStatus.attending).toBe(expectedByStatus.attending);\n                expect(stats.byStatus.declined).toBe(expectedByStatus.declined);\n                expect(stats.byStatus.maybe).toBe(expectedByStatus.maybe);\n                expect(stats.byStatus.pending).toBe(expectedByStatus.pending);\n                expect(stats.totalGuestCount).toBe(expectedGuestCount);\n              }\n            } finally {\n              // Cleanup\n              await cleanupTestData({\n                rsvpIds: createdRsvps.map(r => r.id),\n                guestIds: [guest.id],\n                eventIds: [event.id],\n              });\n            }\n          }\n        ),\n        { numRuns: 20 }\n      );\n    }, 60000);\n\n    it('should handle edge case: all RSVPs with same status', async () => {\n      const guest = await createTestGuest(testGroupId);\n      const event = await createTestEvent();\n      \n      // Create 5 RSVPs all with 'attending' status\n      const rsvps = [];\n      for (let i = 0; i < 5; i++) {\n        const rsvp = await createTestRSVP(guest.id, {\n          event_id: event.id,\n          status: 'attending',\n          guest_count: 2,\n        });\n        rsvps.push(rsvp);\n      }\n\n      try {\n        const result = await getRSVPStatistics({ eventId: event.id });\n        \n        expect(result.success).toBe(true);\n        if (result.success) {\n          expect(result.data.totalRSVPs).toBe(5);\n          expect(result.data.byStatus.attending).toBe(5);\n          expect(result.data.byStatus.declined).toBe(0);\n          expect(result.data.byStatus.maybe).toBe(0);\n          expect(result.data.byStatus.pending).toBe(0);\n          expect(result.data.totalGuestCount).toBe(10); // 5 RSVPs * 2 guests each\n        }\n      } finally {\n        await cleanupTestData({\n          rsvpIds: rsvps.map(r => r.id),\n          guestIds: [guest.id],\n          eventIds: [event.id],\n        });\n      }\n    }, 30000);\n\n    it('should handle edge case: RSVPs with null guest_count default to 1', async () => {\n      const guest = await createTestGuest(testGroupId);\n      const event = await createTestEvent();\n      \n      // Create RSVPs with null guest_count\n      const rsvp1 = await createTestRSVP(guest.id, {\n        event_id: event.id,\n        status: 'attending',\n        guest_count: null,\n      });\n      const rsvp2 = await createTestRSVP(guest.id, {\n        event_id: event.id,\n        status: 'attending',\n        guest_count: null,\n      });\n\n      try {\n        const result = await getRSVPStatistics({ eventId: event.id });\n        \n        expect(result.success).toBe(true);\n        if (result.success) {\n          expect(result.data.totalRSVPs).toBe(2);\n          expect(result.data.totalGuestCount).toBe(2); // Each null defaults to 1\n        }\n      } finally {\n        await cleanupTestData({\n          rsvpIds: [rsvp1.id, rsvp2.id],\n          guestIds: [guest.id],\n          eventIds: [event.id],\n        });\n      }\n    }, 30000);\n  });\n\n  /**\n   * Property 9: Bulk RSVP Update Atomicity\n   * \n   * For any bulk RSVP status update operation, either all specified RSVPs\n   * should be updated successfully, or none should be updated (atomic operation).\n   * \n   * **Validates: Requirements 6.4**\n   */\n  describe('Property 9: Bulk RSVP Update Atomicity', () => {\n    it('should update all specified RSVPs or none (atomicity)', async () => {\n      await fc.assert(\n        fc.asyncProperty(\n          fc.array(fc.constant(null), { minLength: 2, maxLength: 10 }),\n          rsvpStatusArbitrary,\n          async (rsvpPlaceholders, newStatus) => {\n            // Create test data\n            const guest = await createTestGuest(testGroupId);\n            const event = await createTestEvent();\n            \n            const createdRsvps = [];\n            for (const _ of rsvpPlaceholders) {\n              const rsvp = await createTestRSVP(guest.id, {\n                event_id: event.id,\n                status: 'pending',\n              });\n              createdRsvps.push(rsvp);\n            }\n\n            const rsvpIds = createdRsvps.map(r => r.id);\n\n            try {\n              // Perform bulk update\n              const result = await bulkUpdateRSVPs(rsvpIds, newStatus, 'Bulk update test');\n              \n              expect(result.success).toBe(true);\n              \n              if (result.success) {\n                expect(result.data.updatedCount).toBe(rsvpIds.length);\n                \n                // Verify all RSVPs were updated\n                const { data: updatedRsvps, error } = await testDb\n                  .from('rsvps')\n                  .select('id, status')\n                  .in('id', rsvpIds);\n                \n                expect(error).toBeNull();\n                expect(updatedRsvps).toHaveLength(rsvpIds.length);\n                \n                // All RSVPs should have the new status\n                for (const rsvp of updatedRsvps!) {\n                  expect(rsvp.status).toBe(newStatus);\n                }\n              }\n            } finally {\n              // Cleanup\n              await cleanupTestData({\n                rsvpIds: createdRsvps.map(r => r.id),\n                guestIds: [guest.id],\n                eventIds: [event.id],\n              });\n            }\n          }\n        ),\n        { numRuns: 20 }\n      );\n    }, 60000);\n\n    it('should handle partial failure gracefully (some RSVPs do not exist)', async () => {\n      const guest = await createTestGuest(testGroupId);\n      const event = await createTestEvent();\n      \n      // Create 3 real RSVPs\n      const rsvp1 = await createTestRSVP(guest.id, { event_id: event.id, status: 'pending' });\n      const rsvp2 = await createTestRSVP(guest.id, { event_id: event.id, status: 'pending' });\n      const rsvp3 = await createTestRSVP(guest.id, { event_id: event.id, status: 'pending' });\n      \n      // Mix real and fake IDs\n      const mixedIds = [\n        rsvp1.id,\n        rsvp2.id,\n        '00000000-0000-0000-0000-000000000099', // Fake ID\n        rsvp3.id,\n      ];\n\n      try {\n        const result = await bulkUpdateRSVPs(mixedIds, 'attending');\n        \n        expect(result.success).toBe(true);\n        if (result.success) {\n          // Should update only the 3 real RSVPs\n          expect(result.data.updatedCount).toBe(3);\n          \n          // Verify the real RSVPs were updated\n          const { data: updatedRsvps } = await testDb\n            .from('rsvps')\n            .select('id, status')\n            .in('id', [rsvp1.id, rsvp2.id, rsvp3.id]);\n          \n          expect(updatedRsvps).toHaveLength(3);\n          for (const rsvp of updatedRsvps!) {\n            expect(rsvp.status).toBe('attending');\n          }\n        }\n      } finally {\n        await cleanupTestData({\n          rsvpIds: [rsvp1.id, rsvp2.id, rsvp3.id],\n          guestIds: [guest.id],\n          eventIds: [event.id],\n        });\n      }\n    }, 30000);\n\n    it('should validate input and reject invalid RSVP IDs', async () => {\n      const result = await bulkUpdateRSVPs(\n        ['not-a-uuid', 'also-invalid'],\n        'attending'\n      );\n      \n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.code).toBe('VALIDATION_ERROR');\n      }\n    });\n\n    it('should validate input and reject invalid status', async () => {\n      const guest = await createTestGuest(testGroupId);\n      const rsvp = await createTestRSVP(guest.id, { status: 'pending' });\n\n      try {\n        // @ts-expect-error Testing invalid status\n        const result = await bulkUpdateRSVPs([rsvp.id], 'invalid_status');\n        \n        expect(result.success).toBe(false);\n        if (!result.success) {\n          expect(result.error.code).toBe('VALIDATION_ERROR');\n        }\n      } finally {\n        await cleanupTestData({\n          rsvpIds: [rsvp.id],\n          guestIds: [guest.id],\n        });\n      }\n    });\n\n    it('should enforce maximum batch size of 100 RSVPs', async () => {\n      // Generate 101 UUIDs\n      const tooManyIds = Array.from({ length: 101 }, () => \n        '00000000-0000-0000-0000-' + Math.random().toString(16).slice(2, 14).padStart(12, '0')\n      );\n      \n      const result = await bulkUpdateRSVPs(tooManyIds, 'attending');\n      \n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.code).toBe('VALIDATION_ERROR');\n      }\n    });\n\n    it('should update responded_at timestamp when status changes from pending', async () => {\n      const guest = await createTestGuest(testGroupId);\n      const rsvp = await createTestRSVP(guest.id, { status: 'pending', responded_at: null });\n\n      try {\n        const result = await bulkUpdateRSVPs([rsvp.id], 'attending');\n        \n        expect(result.success).toBe(true);\n        \n        // Verify responded_at was set\n        const { data: updatedRsvp } = await testDb\n          .from('rsvps')\n          .select('responded_at')\n          .eq('id', rsvp.id)\n          .single();\n        \n        expect(updatedRsvp?.responded_at).not.toBeNull();\n      } finally {\n        await cleanupTestData({\n          rsvpIds: [rsvp.id],\n          guestIds: [guest.id],\n        });\n      }\n    }, 30000);\n  });\n});\n"],"names":["supabaseUrl","process","env","NEXT_PUBLIC_SUPABASE_URL","supabaseServiceKey","SUPABASE_SERVICE_ROLE_KEY","testDb","createClient","rsvpStatusArbitrary","fc","constantFrom","rsvpFiltersArbitrary","record","eventId","option","uuidArbitrary","nil","undefined","activityId","status","guestId","searchQuery","string","minLength","maxLength","createTestGuest","groupId","overrides","data","error","from","insert","first_name","last_name","email","Date","now","Math","random","age_type","guest_type","group_id","auth_method","select","single","console","createTestEvent","name","event_type","start_date","toISOString","createTestActivity","activity_type","start_time","display_order","createTestRSVP","guest_id","cleanupTestData","ids","rsvpIds","length","delete","in","guestIds","activityIds","eventIds","describe","testGroupId","beforeAll","id","afterAll","eq","it","guest1","guest2","event1","event2","activity1","event_id","activity2","rsvp1","activity_id","rsvp2","rsvp3","rsvp4","result1","listRSVPs","page","limit","expect","success","toBe","map","r","toContain","not","result2","result3","result4","result5","assert","asyncProperty","array","guestCount","integer","min","max","rsvpConfigs","guest","event","createdRsvps","config","rsvp","guest_count","push","result","getRSVPStatistics","stats","expectedByStatus","attending","declined","maybe","pending","expectedGuestCount","totalRSVPs","byStatus","totalGuestCount","numRuns","rsvps","i","constant","rsvpPlaceholders","newStatus","_","bulkUpdateRSVPs","updatedCount","updatedRsvps","toBeNull","toHaveLength","mixedIds","code","tooManyIds","Array","toString","slice","padStart","responded_at","updatedRsvp"],"mappings":"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"}