{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/ui/ConfirmDialog.property.test.tsx"],"sourcesContent":["/**\n * Property-Based Tests for ConfirmDialog Component\n * \n * Feature: admin-ui-modernization\n * Tests universal properties of the ConfirmDialog component across various inputs.\n */\n\nimport { render, screen, fireEvent, waitFor, cleanup } from '@testing-library/react';\nimport * as fc from 'fast-check';\nimport { ConfirmDialog } from './ConfirmDialog';\n\n// Helper to generate clean entity names for testing\nconst cleanEntityNameArbitrary = fc.string({ minLength: 1, maxLength: 100 })\n  .filter(s => s.trim().length > 0)\n  .filter(s => !/[<>\"'&!]/.test(s)) // Filter out HTML/XML special characters and exclamation\n  .map(s => s.replace(/[^\\w\\s-]/g, '').trim()) // Remove special chars, keep alphanumeric, spaces, hyphens\n  .filter(s => s.length > 0)\n  .map(s => s || 'Test Entity'); // Fallback if empty after filtering\n\ndescribe('ConfirmDialog Property Tests', () => {\n  // Clean up after each test to prevent DOM pollution\n  afterEach(() => {\n    cleanup();\n  });\n\n  /**\n   * Property 4: Delete confirmation requirement\n   * Validates: Requirements 3.9, 13.1\n   * \n   * For any entity delete action, clicking the delete button should display\n   * a confirmation dialog before executing the deletion.\n   */\n  describe('Feature: admin-ui-modernization, Property 4: Delete confirmation requirement', () => {\n    it('should display confirmation dialog when delete action is triggered', async () => {\n      await fc.assert(\n        fc.asyncProperty(\n          fc.record({\n            entityName: cleanEntityNameArbitrary,\n            entityType: fc.constantFrom('guest', 'event', 'activity', 'vendor', 'photo'),\n          }),\n          async ({ entityName, entityType }) => {\n            const onConfirm = jest.fn().mockResolvedValue(undefined);\n            const onClose = jest.fn();\n            const title = `Delete ${entityType}`;\n            const message = `Are you sure you want to delete \"${entityName}\"? This action cannot be undone.`;\n\n            const { unmount } = render(\n              <ConfirmDialog\n                isOpen={true}\n                onClose={onClose}\n                onConfirm={onConfirm}\n                title={title}\n                message={message}\n                variant=\"danger\"\n              />\n            );\n\n            try {\n              // Verify dialog is displayed\n              expect(screen.getByRole('dialog')).toBeInTheDocument();\n              \n              // Verify title is displayed\n              expect(screen.getByText(title)).toBeInTheDocument();\n              \n              // Verify message is displayed\n              expect(screen.getByText(message)).toBeInTheDocument();\n              \n              // Verify both cancel and confirm buttons are present\n              expect(screen.getByRole('button', { name: /cancel/i })).toBeInTheDocument();\n              expect(screen.getByRole('button', { name: /confirm/i })).toBeInTheDocument();\n              \n              // Verify onConfirm has not been called yet (confirmation required)\n              expect(onConfirm).not.toHaveBeenCalled();\n            } finally {\n              unmount();\n            }\n          }\n        ),\n        { numRuns: 50 }\n      );\n    });\n\n    it('should not execute delete action when cancel button is clicked', async () => {\n      await fc.assert(\n        fc.asyncProperty(\n          fc.record({\n            entityName: cleanEntityNameArbitrary,\n          }),\n          async ({ entityName }) => {\n            const onConfirm = jest.fn().mockResolvedValue(undefined);\n            const onClose = jest.fn();\n            const message = `Are you sure you want to delete \"${entityName}\"?`;\n\n            const { unmount } = render(\n              <ConfirmDialog\n                isOpen={true}\n                onClose={onClose}\n                onConfirm={onConfirm}\n                title=\"Delete Item\"\n                message={message}\n                variant=\"danger\"\n              />\n            );\n\n            try {\n              // Click cancel button\n              const cancelButton = screen.getByRole('button', { name: /cancel/i });\n              fireEvent.click(cancelButton);\n\n              // Verify onConfirm was not called\n              expect(onConfirm).not.toHaveBeenCalled();\n              \n              // Verify onClose was called\n              expect(onClose).toHaveBeenCalled();\n            } finally {\n              unmount();\n            }\n          }\n        ),\n        { numRuns: 50 }\n      );\n    });\n\n    it('should close dialog on Escape key without executing action', async () => {\n      await fc.assert(\n        fc.asyncProperty(\n          fc.record({\n            entityName: cleanEntityNameArbitrary,\n          }),\n          async ({ entityName }) => {\n            const onConfirm = jest.fn().mockResolvedValue(undefined);\n            const onClose = jest.fn();\n            const message = `Are you sure you want to delete \"${entityName}\"?`;\n\n            const { unmount } = render(\n              <ConfirmDialog\n                isOpen={true}\n                onClose={onClose}\n                onConfirm={onConfirm}\n                title=\"Delete Item\"\n                message={message}\n                variant=\"danger\"\n              />\n            );\n\n            try {\n              // Press Escape key\n              fireEvent.keyDown(document, { key: 'Escape' });\n\n              // Verify onConfirm was not called\n              expect(onConfirm).not.toHaveBeenCalled();\n              \n              // Verify onClose was called\n              await waitFor(() => {\n                expect(onClose).toHaveBeenCalled();\n              });\n            } finally {\n              unmount();\n            }\n          }\n        ),\n        { numRuns: 50 }\n      );\n    });\n  });\n\n  /**\n   * Property 35: Confirmation dialog content\n   * Validates: Requirements 13.2\n   * \n   * For any confirmation dialog displayed, the dialog should clearly state\n   * what entity or data will be deleted, including the entity name or identifier.\n   */\n  describe('Feature: admin-ui-modernization, Property 35: Confirmation dialog content', () => {\n    it('should clearly display entity name and action in dialog content', async () => {\n      await fc.assert(\n        fc.asyncProperty(\n          fc.record({\n            entityName: cleanEntityNameArbitrary,\n            entityType: fc.constantFrom('guest', 'event', 'activity', 'vendor', 'photo', 'email'),\n            entityId: fc.uuid(),\n          }),\n          async ({ entityName, entityType, entityId }) => {\n            const onConfirm = jest.fn().mockResolvedValue(undefined);\n            const onClose = jest.fn();\n            const title = `Delete ${entityType.charAt(0).toUpperCase() + entityType.slice(1)}`;\n            const message = `Are you sure you want to delete \"${entityName}\" (ID: ${entityId})? This action cannot be undone.`;\n\n            const { unmount } = render(\n              <ConfirmDialog\n                isOpen={true}\n                onClose={onClose}\n                onConfirm={onConfirm}\n                title={title}\n                message={message}\n                variant=\"danger\"\n              />\n            );\n\n            try {\n              // Verify title contains entity type\n              const titleElement = screen.getByText(title);\n              expect(titleElement).toBeInTheDocument();\n              expect(titleElement.textContent).toContain(entityType.charAt(0).toUpperCase() + entityType.slice(1));\n              \n              // Verify message contains entity name using ID-based query\n              const messageElement = screen.getByRole('dialog').querySelector('#confirm-dialog-message');\n              expect(messageElement).toBeTruthy();\n              expect(messageElement?.textContent).toContain(entityName);\n              expect(messageElement?.textContent).toContain(entityId);\n              \n              // Verify message contains entity ID\n              expect(messageElement.textContent).toContain(entityId);\n              \n              // Verify warning about irreversibility\n              expect(messageElement.textContent).toMatch(/cannot be undone|irreversible|permanent/i);\n            } finally {\n              unmount();\n            }\n          }\n        ),\n        { numRuns: 50 }\n      );\n    });\n\n    it('should display different content for different entity types', async () => {\n      await fc.assert(\n        fc.asyncProperty(\n          fc.record({\n            entityType: fc.constantFrom('guest', 'event', 'activity', 'vendor'),\n            entityName: fc.string({ minLength: 1, maxLength: 50 }).filter(s => s.trim().length > 0),\n            additionalInfo: fc.string({ minLength: 0, maxLength: 100 }).filter(s => s.trim().length >= 0),\n          }),\n          async ({ entityType, entityName, additionalInfo }) => {\n            const onConfirm = jest.fn().mockResolvedValue(undefined);\n            const onClose = jest.fn();\n            const title = `Delete ${entityType}`;\n            const message = additionalInfo \n              ? `Delete \"${entityName}\"? ${additionalInfo}`\n              : `Delete \"${entityName}\"?`;\n\n            const { unmount } = render(\n              <ConfirmDialog\n                isOpen={true}\n                onClose={onClose}\n                onConfirm={onConfirm}\n                title={title}\n                message={message}\n                variant=\"danger\"\n              />\n            );\n\n            try {\n              // Verify entity-specific content is displayed\n              expect(screen.getByText(title)).toBeInTheDocument();\n              \n              // Use a more flexible matcher for the message to handle whitespace variations\n              const messageElement = screen.getByText((content, element) => {\n                // Normalize whitespace for comparison\n                const normalizedContent = content.replace(/\\s+/g, ' ').trim();\n                const normalizedMessage = message.replace(/\\s+/g, ' ').trim();\n                return normalizedContent === normalizedMessage;\n              });\n              expect(messageElement).toBeInTheDocument();\n              \n              // Verify entity name is in the message\n              expect(messageElement.textContent).toContain(entityName);\n              \n              // If additional info provided, verify it's displayed\n              if (additionalInfo.trim()) {\n                expect(messageElement.textContent).toContain(additionalInfo);\n              }\n            } finally {\n              unmount();\n            }\n          }\n        ),\n        { numRuns: 50 }\n      );\n    });\n  });\n\n  /**\n   * Property 36: Confirmed delete execution\n   * Validates: Requirements 13.5\n   * \n   * For any delete confirmation, clicking the confirm button should call\n   * the appropriate delete service method and display a toast notification\n   * with the result.\n   */\n  describe('Feature: admin-ui-modernization, Property 36: Confirmed delete execution', () => {\n    it('should execute delete action when confirm button is clicked', async () => {\n      await fc.assert(\n        fc.asyncProperty(\n          fc.record({\n            entityName: cleanEntityNameArbitrary,\n            entityId: fc.uuid(),\n          }),\n          async ({ entityName, entityId }) => {\n            const onConfirm = jest.fn().mockResolvedValue(undefined);\n            const onClose = jest.fn();\n            const message = `Delete \"${entityName}\" (${entityId})?`;\n\n            const { unmount } = render(\n              <ConfirmDialog\n                isOpen={true}\n                onClose={onClose}\n                onConfirm={onConfirm}\n                title=\"Delete Item\"\n                message={message}\n                variant=\"danger\"\n              />\n            );\n\n            try {\n              // Click confirm button\n              const confirmButton = screen.getByRole('button', { name: /confirm/i });\n              fireEvent.click(confirmButton);\n\n              // Verify onConfirm was called\n              await waitFor(() => {\n                expect(onConfirm).toHaveBeenCalled();\n              });\n              \n              // Verify onConfirm was called exactly once\n              expect(onConfirm).toHaveBeenCalledTimes(1);\n              \n              // Verify onClose was called after successful confirmation\n              await waitFor(() => {\n                expect(onClose).toHaveBeenCalled();\n              });\n            } finally {\n              unmount();\n            }\n          }\n        ),\n        { numRuns: 50 }\n      );\n    });\n\n    it('should disable buttons during confirmation to prevent double-submission', async () => {\n      await fc.assert(\n        fc.asyncProperty(\n          fc.record({\n            entityName: cleanEntityNameArbitrary,\n          }),\n          async ({ entityName }) => {\n            // Create a promise that we can control\n            let resolveConfirm: () => void;\n            const confirmPromise = new Promise<void>((resolve) => {\n              resolveConfirm = resolve;\n            });\n\n            const onConfirm = jest.fn().mockReturnValue(confirmPromise);\n            const onClose = jest.fn();\n            const message = `Delete \"${entityName}\"?`;\n\n            const { unmount } = render(\n              <ConfirmDialog\n                isOpen={true}\n                onClose={onClose}\n                onConfirm={onConfirm}\n                title=\"Delete Item\"\n                message={message}\n                variant=\"danger\"\n              />\n            );\n\n            try {\n              const confirmButton = screen.getByRole('button', { name: /confirm/i });\n              const cancelButton = screen.getByRole('button', { name: /cancel/i });\n              \n              // Click confirm\n              fireEvent.click(confirmButton);\n\n              // Wait for buttons to be disabled\n              await waitFor(() => {\n                expect(confirmButton).toBeDisabled();\n                expect(cancelButton).toBeDisabled();\n              });\n\n              // Verify loading state is shown using aria-label\n              expect(screen.getByLabelText(/loading/i)).toBeInTheDocument();\n\n              // Try to click again (should not trigger another call)\n              fireEvent.click(confirmButton);\n              \n              // Verify onConfirm was called only once\n              expect(onConfirm).toHaveBeenCalledTimes(1);\n\n              // Resolve the confirmation\n              resolveConfirm!();\n\n              // Wait for completion\n              await waitFor(() => {\n                expect(onClose).toHaveBeenCalled();\n              });\n            } finally {\n              unmount();\n            }\n          }\n        ),\n        { numRuns: 30 } // Fewer runs for async operations\n      );\n    });\n\n    it('should handle confirmation errors gracefully', async () => {\n      await fc.assert(\n        fc.asyncProperty(\n          fc.record({\n            entityName: cleanEntityNameArbitrary,\n            errorMessage: fc.string({ minLength: 10, maxLength: 100 }),\n          }),\n          async ({ entityName, errorMessage }) => {\n            const onConfirm = jest.fn().mockRejectedValue(new Error(errorMessage));\n            const onClose = jest.fn();\n            const message = `Delete \"${entityName}\"?`;\n\n            // Spy on console.error to verify error logging\n            const consoleErrorSpy = jest.spyOn(console, 'error').mockImplementation(() => {});\n\n            const { unmount } = render(\n              <ConfirmDialog\n                isOpen={true}\n                onClose={onClose}\n                onConfirm={onConfirm}\n                title=\"Delete Item\"\n                message={message}\n                variant=\"danger\"\n              />\n            );\n\n            try {\n              const confirmButton = screen.getByRole('button', { name: /confirm/i });\n              \n              // Click confirm\n              fireEvent.click(confirmButton);\n\n              // Wait for error to be handled\n              await waitFor(() => {\n                expect(onConfirm).toHaveBeenCalled();\n              });\n\n              // Verify error was logged\n              await waitFor(() => {\n                expect(consoleErrorSpy).toHaveBeenCalled();\n              });\n\n              // Verify buttons are re-enabled after error\n              await waitFor(() => {\n                expect(confirmButton).not.toBeDisabled();\n              });\n            } finally {\n              unmount();\n              consoleErrorSpy.mockRestore();\n            }\n          }\n        ),\n        { numRuns: 30 } // Fewer runs for async operations\n      );\n    });\n\n    it('should style confirm button based on variant', async () => {\n      await fc.assert(\n        fc.asyncProperty(\n          fc.record({\n            variant: fc.constantFrom('danger'),\n            entityName: fc.string({ minLength: 1, maxLength: 100 }).filter(s => s.trim().length > 0),\n          }),\n          async ({ variant, entityName }) => {\n            const onConfirm = jest.fn().mockResolvedValue(undefined);\n            const onClose = jest.fn();\n            const message = `Delete \"${entityName}\"?`;\n\n            const { unmount } = render(\n              <ConfirmDialog\n                isOpen={true}\n                onClose={onClose}\n                onConfirm={onConfirm}\n                title=\"Delete Item\"\n                message={message}\n                variant={variant}\n              />\n            );\n\n            try {\n              const confirmButton = screen.getByRole('button', { name: /confirm/i });\n              \n              // Verify button has appropriate styling based on variant\n              const buttonClasses = confirmButton.className;\n              \n              // Should have volcano (red) color classes for danger variant\n              expect(buttonClasses).toMatch(/volcano/);\n            } finally {\n              unmount();\n            }\n          }\n        ),\n        { numRuns: 50 }\n      );\n    });\n  });\n});\n"],"names":["cleanEntityNameArbitrary","fc","string","minLength","maxLength","filter","s","trim","length","test","map","replace","describe","afterEach","cleanup","it","assert","asyncProperty","record","entityName","entityType","constantFrom","onConfirm","jest","fn","mockResolvedValue","undefined","onClose","title","message","unmount","render","ConfirmDialog","isOpen","variant","expect","screen","getByRole","toBeInTheDocument","getByText","name","not","toHaveBeenCalled","numRuns","cancelButton","fireEvent","click","keyDown","document","key","waitFor","entityId","uuid","charAt","toUpperCase","slice","titleElement","textContent","toContain","messageElement","querySelector","toBeTruthy","toMatch","additionalInfo","content","element","normalizedContent","normalizedMessage","confirmButton","toHaveBeenCalledTimes","resolveConfirm","confirmPromise","Promise","resolve","mockReturnValue","toBeDisabled","getByLabelText","errorMessage","mockRejectedValue","Error","consoleErrorSpy","spyOn","console","mockImplementation","mockRestore","buttonClasses","className"],"mappings":"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"}