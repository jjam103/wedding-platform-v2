d9663933aa61c93aa6388bcadc22a35a
/**
 * Unit Tests for SectionEditor Component
 * 
 * Tests:
 * - Section creation
 * - Section reordering
 * - Layout toggle
 * - Column editing
 * 
 * Requirements: 2.1-2.6
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _SectionEditor = require("./SectionEditor");
// Mock fetch globally
global.fetch = jest.fn();
// Mock window.confirm
const originalConfirm = window.confirm;
// Mock scrollIntoView
Element.prototype.scrollIntoView = jest.fn();
// Mock section data
const mockSection = {
    id: 'section-1',
    page_type: 'custom',
    page_id: 'page-1',
    display_order: 0,
    created_at: '2024-01-01T00:00:00Z',
    updated_at: '2024-01-01T00:00:00Z',
    columns: [
        {
            id: 'column-1',
            section_id: 'section-1',
            column_number: 1,
            content_type: 'rich_text',
            content_data: {
                html: '<p>Test content</p>'
            },
            created_at: '2024-01-01T00:00:00Z',
            updated_at: '2024-01-01T00:00:00Z'
        }
    ]
};
const mockTwoColumnSection = {
    ...mockSection,
    id: 'section-2',
    display_order: 1,
    columns: [
        {
            id: 'column-2',
            section_id: 'section-2',
            column_number: 1,
            content_type: 'rich_text',
            content_data: {
                html: '<p>Column 1</p>'
            },
            created_at: '2024-01-01T00:00:00Z',
            updated_at: '2024-01-01T00:00:00Z'
        },
        {
            id: 'column-3',
            section_id: 'section-2',
            column_number: 2,
            content_type: 'rich_text',
            content_data: {
                html: '<p>Column 2</p>'
            },
            created_at: '2024-01-01T00:00:00Z',
            updated_at: '2024-01-01T00:00:00Z'
        }
    ]
};
describe('SectionEditor', ()=>{
    let mockOnSave;
    let mockOnClose;
    beforeEach(()=>{
        mockOnSave = jest.fn();
        mockOnClose = jest.fn();
        window.confirm = jest.fn().mockReturnValue(true);
        global.fetch.mockReset();
        jest.clearAllMocks();
    });
    afterEach(()=>{
        (0, _react.cleanup)();
        window.confirm = originalConfirm;
    });
    const mockFetchSuccess = (data)=>{
        global.fetch.mockResolvedValueOnce({
            ok: true,
            json: async ()=>({
                    success: true,
                    data
                })
        });
    };
    const mockFetchError = (message)=>{
        global.fetch.mockResolvedValueOnce({
            ok: true,
            json: async ()=>({
                    success: false,
                    error: {
                        message
                    }
                })
        });
    };
    describe('Section Creation', ()=>{
        it('should display "Add Section" button', async ()=>{
            mockFetchSuccess([]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /add new section/i
                })).toBeInTheDocument();
            });
        });
        it('should create new section when "Add Section" is clicked', async ()=>{
            mockFetchSuccess([]); // Initial fetch
            mockFetchSuccess(mockSection); // Create section
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /add new section/i
                })).toBeInTheDocument();
            });
            const addButton = _react.screen.getByRole('button', {
                name: /add new section/i
            });
            _react.fireEvent.click(addButton);
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/admin/sections', expect.objectContaining({
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: expect.stringContaining('"page_id":"page-1"')
                }));
            });
        });
        it('should add new section to the list after creation', async ()=>{
            mockFetchSuccess([]); // Initial fetch
            mockFetchSuccess(mockSection); // Create section
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/no sections yet/i)).toBeInTheDocument();
            });
            const addButton = _react.screen.getByRole('button', {
                name: /add new section/i
            });
            _react.fireEvent.click(addButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
        });
        it('should create section with one column by default', async ()=>{
            mockFetchSuccess([]); // Initial fetch
            mockFetchSuccess(mockSection); // Create section
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /add new section/i
                })).toBeInTheDocument();
            });
            const addButton = _react.screen.getByRole('button', {
                name: /add new section/i
            });
            _react.fireEvent.click(addButton);
            await (0, _react.waitFor)(()=>{
                const createCall = global.fetch.mock.calls.find((call)=>call[0] === '/api/admin/sections' && call[1]?.method === 'POST');
                expect(createCall).toBeDefined();
                const body = JSON.parse(createCall[1].body);
                expect(body.columns).toHaveLength(1);
                expect(body.columns[0].column_number).toBe(1);
            });
        });
        it('should display error message when section creation fails', async ()=>{
            mockFetchSuccess([]); // Initial fetch
            mockFetchError('Failed to create section'); // Create section error
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /add new section/i
                })).toBeInTheDocument();
            });
            const addButton = _react.screen.getByRole('button', {
                name: /add new section/i
            });
            _react.fireEvent.click(addButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Failed to create section')).toBeInTheDocument();
            });
        });
        it('should disable "Add Section" button while saving', async ()=>{
            mockFetchSuccess([]); // Initial fetch
            // Mock a delayed response
            global.fetch.mockImplementationOnce(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            ok: true,
                            json: async ()=>({
                                    success: true,
                                    data: mockSection
                                })
                        }), 100)));
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /add new section/i
                })).toBeInTheDocument();
            });
            const addButton = _react.screen.getByRole('button', {
                name: /add new section/i
            });
            _react.fireEvent.click(addButton);
            // Button should be disabled during save
            expect(addButton).toBeDisabled();
        });
    });
    describe('Section Reordering', ()=>{
        it('should display move up and move down buttons for sections', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const moveUpButtons = _react.screen.getAllByRole('button', {
                name: /move section up/i
            });
            const moveDownButtons = _react.screen.getAllByRole('button', {
                name: /move section down/i
            });
            expect(moveUpButtons).toHaveLength(2);
            expect(moveDownButtons).toHaveLength(2);
        });
        it('should disable move up button for first section', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const moveUpButtons = _react.screen.getAllByRole('button', {
                name: /move section up/i
            });
            expect(moveUpButtons[0]).toBeDisabled();
            expect(moveUpButtons[1]).not.toBeDisabled();
        });
        it('should disable move down button for last section', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const moveDownButtons = _react.screen.getAllByRole('button', {
                name: /move section down/i
            });
            expect(moveDownButtons[0]).not.toBeDisabled();
            expect(moveDownButtons[1]).toBeDisabled();
        });
        it('should move section up when move up button is clicked', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            mockFetchSuccess({
                success: true
            }); // Reorder API call
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#2', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            // Click move up on second section
            const moveUpButtons = _react.screen.getAllByRole('button', {
                name: /move section up/i
            });
            _react.fireEvent.click(moveUpButtons[1]);
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/admin/sections/reorder', expect.objectContaining({
                    method: 'POST',
                    body: expect.stringContaining('"pageId":"page-1"')
                }));
            });
        });
        it('should move section down when move down button is clicked', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            mockFetchSuccess({
                success: true
            }); // Reorder API call
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            // Click move down on first section
            const moveDownButtons = _react.screen.getAllByRole('button', {
                name: /move section down/i
            });
            _react.fireEvent.click(moveDownButtons[0]);
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/admin/sections/reorder', expect.objectContaining({
                    method: 'POST'
                }));
            });
        });
        it('should support drag and drop reordering', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            mockFetchSuccess({
                success: true
            }); // Reorder API call
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const sections = _react.screen.getAllByText(/#\d+/, {
                selector: 'span'
            });
            const firstSection = sections[0].closest('div[draggable="true"]');
            const secondSection = sections[1].closest('div[draggable="true"]');
            // Simulate drag and drop
            if (firstSection && secondSection) {
                _react.fireEvent.dragStart(firstSection);
                _react.fireEvent.dragOver(secondSection);
                _react.fireEvent.drop(secondSection);
            }
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/admin/sections/reorder', expect.objectContaining({
                    method: 'POST'
                }));
            });
        });
        it('should apply opacity style to dragged section', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const sections = _react.screen.getAllByText(/#\d+/, {
                selector: 'span'
            });
            const firstSection = sections[0].closest('div[draggable="true"]');
            if (firstSection) {
                _react.fireEvent.dragStart(firstSection);
                expect(firstSection.className).toContain('opacity-50');
            }
        });
        it('should call reorder API when moving section', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]); // Initial fetch
            mockFetchSuccess({
                success: true
            }); // Reorder API success
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const moveDownButtons = _react.screen.getAllByRole('button', {
                name: /move section down/i
            });
            _react.fireEvent.click(moveDownButtons[0]);
            // Should call reorder API
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/admin/sections/reorder', expect.objectContaining({
                    method: 'POST'
                }));
            });
        });
        it('should not reorder when dragging section onto itself', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const sections = _react.screen.getAllByText(/#\d+/, {
                selector: 'span'
            });
            const firstSection = sections[0].closest('div[draggable="true"]');
            if (firstSection) {
                _react.fireEvent.dragStart(firstSection);
                _react.fireEvent.drop(firstSection);
            }
            // Should not call reorder API
            expect(global.fetch).not.toHaveBeenCalledWith('/api/admin/sections/reorder', expect.anything());
        });
    });
    describe('Layout Toggle', ()=>{
        it('should display layout toggle button for each section', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const layoutButton = _react.screen.getByRole('button', {
                name: /toggle to two column layout/i
            });
            expect(layoutButton).toBeInTheDocument();
            expect(layoutButton).toHaveTextContent('1 Col');
        });
        it('should show "1 Col" for one-column layout', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const layoutButton = _react.screen.getByRole('button', {
                name: /toggle to two column layout/i
            });
            expect(layoutButton).toHaveTextContent('1 Col');
        });
        it('should show "2 Col" for two-column layout', async ()=>{
            mockFetchSuccess([
                mockTwoColumnSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const layoutButton = _react.screen.getByRole('button', {
                name: /toggle to one column layout/i
            });
            expect(layoutButton).toHaveTextContent('2 Col');
        });
        it('should toggle from one column to two columns', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            mockFetchSuccess(mockTwoColumnSection); // Updated section with 2 columns
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const layoutButton = _react.screen.getByRole('button', {
                name: /toggle to two column layout/i
            });
            _react.fireEvent.click(layoutButton);
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(`/api/admin/sections/${mockSection.id}`, expect.objectContaining({
                    method: 'PUT',
                    body: expect.stringContaining('"columns"')
                }));
            });
        });
        it('should toggle from two columns to one column', async ()=>{
            mockFetchSuccess([
                mockTwoColumnSection
            ]);
            mockFetchSuccess(mockSection); // Updated section with 1 column
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const layoutButton = _react.screen.getByRole('button', {
                name: /toggle to one column layout/i
            });
            _react.fireEvent.click(layoutButton);
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(`/api/admin/sections/${mockTwoColumnSection.id}`, expect.objectContaining({
                    method: 'PUT'
                }));
            });
        });
        it('should add second column when toggling to two columns', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            mockFetchSuccess(mockTwoColumnSection);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const layoutButton = _react.screen.getByRole('button', {
                name: /toggle to two column layout/i
            });
            _react.fireEvent.click(layoutButton);
            await (0, _react.waitFor)(()=>{
                const updateCall = global.fetch.mock.calls.find((call)=>call[0].includes('/api/admin/sections/section-') && call[1]?.method === 'PUT');
                expect(updateCall).toBeDefined();
                const body = JSON.parse(updateCall[1].body);
                expect(body.columns).toHaveLength(2);
                expect(body.columns[1].column_number).toBe(2);
            });
        });
        it('should keep only first column when toggling to one column', async ()=>{
            mockFetchSuccess([
                mockTwoColumnSection
            ]);
            mockFetchSuccess(mockSection);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const layoutButton = _react.screen.getByRole('button', {
                name: /toggle to one column layout/i
            });
            _react.fireEvent.click(layoutButton);
            await (0, _react.waitFor)(()=>{
                const updateCall = global.fetch.mock.calls.find((call)=>call[0].includes('/api/admin/sections/section-') && call[1]?.method === 'PUT');
                expect(updateCall).toBeDefined();
                const body = JSON.parse(updateCall[1].body);
                expect(body.columns).toHaveLength(1);
            });
        });
        it('should display error when layout toggle fails', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            mockFetchError('Failed to update layout');
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const layoutButton = _react.screen.getByRole('button', {
                name: /toggle to two column layout/i
            });
            _react.fireEvent.click(layoutButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('alert')).toHaveTextContent('Failed to update layout');
            });
        });
        it('should render columns in grid layout based on column count', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const sections = _react.screen.getAllByText(/#\d+/, {
                selector: 'span'
            }).map((el)=>el.closest('div[draggable="true"]'));
            // First section should have grid-cols-1
            const firstSectionContent = sections[0]?.querySelector('.grid');
            expect(firstSectionContent?.className).toContain('grid-cols-1');
            // Second section should have grid-cols-2
            const secondSectionContent = sections[1]?.querySelector('.grid');
            expect(secondSectionContent?.className).toContain('grid-cols-2');
        });
    });
    describe('Column Editing', ()=>{
        it('should display column content for rich text', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Column 1')).toBeInTheDocument();
            });
            // Rich text content should be displayed (as escaped HTML)
            expect(_react.screen.getByText(/<p>Test content<\/p>/)).toBeInTheDocument();
        });
        it('should display column number label', async ()=>{
            mockFetchSuccess([
                mockTwoColumnSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            // Check for column labels specifically (not content)
            const columnLabels = _react.screen.getAllByText(/^Column \d$/);
            expect(columnLabels).toHaveLength(2);
            expect(columnLabels[0]).toHaveTextContent('Column 1');
            expect(columnLabels[1]).toHaveTextContent('Column 2');
        });
        it('should display empty content placeholder for empty rich text', async ()=>{
            const emptySection = {
                ...mockSection,
                columns: [
                    {
                        ...mockSection.columns[0],
                        content_data: {
                            html: ''
                        }
                    }
                ]
            };
            mockFetchSuccess([
                emptySection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            expect(_react.screen.getByText('Empty content')).toBeInTheDocument();
        });
        it('should display photo gallery content type', async ()=>{
            const photoSection = {
                ...mockSection,
                columns: [
                    {
                        ...mockSection.columns[0],
                        content_type: 'photo_gallery',
                        content_data: {
                            photo_ids: [
                                'photo-1',
                                'photo-2',
                                'photo-3'
                            ]
                        }
                    }
                ]
            };
            mockFetchSuccess([
                photoSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            expect(_react.screen.getByText('Photo Gallery (3 photos)')).toBeInTheDocument();
        });
        it('should display references content type', async ()=>{
            const referenceSection = {
                ...mockSection,
                columns: [
                    {
                        ...mockSection.columns[0],
                        content_type: 'references',
                        content_data: {
                            references: [
                                {
                                    id: 'ref-1',
                                    type: 'event',
                                    name: 'Ceremony'
                                }
                            ]
                        }
                    }
                ]
            };
            mockFetchSuccess([
                referenceSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            expect(_react.screen.getByText('References (1 items)')).toBeInTheDocument();
        });
        it('should display zero count for empty photo gallery', async ()=>{
            const emptyPhotoSection = {
                ...mockSection,
                columns: [
                    {
                        ...mockSection.columns[0],
                        content_type: 'photo_gallery',
                        content_data: {}
                    }
                ]
            };
            mockFetchSuccess([
                emptyPhotoSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            expect(_react.screen.getByText('Photo Gallery (0 photos)')).toBeInTheDocument();
        });
    });
    describe('Section Deletion', ()=>{
        it('should display delete button for each section', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            expect(_react.screen.getByRole('button', {
                name: /delete section/i
            })).toBeInTheDocument();
        });
        it('should show confirmation dialog when delete is clicked', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const deleteButton = _react.screen.getByRole('button', {
                name: /delete section/i
            });
            _react.fireEvent.click(deleteButton);
            expect(window.confirm).toHaveBeenCalledWith('Are you sure you want to delete this section?');
        });
        it('should delete section when confirmed', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            mockFetchSuccess({
                success: true
            }); // Delete API call
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const deleteButton = _react.screen.getByRole('button', {
                name: /delete section/i
            });
            _react.fireEvent.click(deleteButton);
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(`/api/admin/sections/${mockSection.id}`, expect.objectContaining({
                    method: 'DELETE'
                }));
            });
        });
        it('should not delete section when confirmation is cancelled', async ()=>{
            window.confirm = jest.fn().mockReturnValue(false);
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const deleteButton = _react.screen.getByRole('button', {
                name: /delete section/i
            });
            _react.fireEvent.click(deleteButton);
            // Should not call delete API
            expect(global.fetch).not.toHaveBeenCalledWith(expect.stringContaining('/api/admin/sections/'), expect.objectContaining({
                method: 'DELETE'
            }));
        });
        it('should remove section from list after successful deletion', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            mockFetchSuccess({
                success: true
            }); // Delete API call
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
                expect(_react.screen.getByText('#2', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const deleteButtons = _react.screen.getAllByRole('button', {
                name: /delete section/i
            });
            _react.fireEvent.click(deleteButtons[0]);
            await (0, _react.waitFor)(()=>{
                // After deletion, only one section should remain
                const sections = _react.screen.getAllByText(/#\d+/, {
                    selector: 'span'
                });
                expect(sections).toHaveLength(1);
            });
        });
        it('should display error when deletion fails', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            mockFetchError('Failed to delete section');
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const deleteButton = _react.screen.getByRole('button', {
                name: /delete section/i
            });
            _react.fireEvent.click(deleteButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('alert')).toHaveTextContent('Failed to delete section');
            });
        });
    });
    describe('Loading and Error States', ()=>{
        it('should display loading state while fetching sections', ()=>{
            global.fetch.mockImplementationOnce(()=>new Promise(()=>{}) // Never resolves
            );
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            expect(_react.screen.getByText('Loading sections...')).toBeInTheDocument();
        });
        it('should display error message when fetch fails', async ()=>{
            mockFetchError('Failed to load sections');
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('alert')).toHaveTextContent('Failed to load sections');
            });
        });
        it('should display empty state when no sections exist', async ()=>{
            mockFetchSuccess([]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/no sections yet/i)).toBeInTheDocument();
            });
        });
        it('should have error alert with proper role', async ()=>{
            mockFetchError('Test error message');
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                const alert = _react.screen.getByRole('alert');
                expect(alert).toBeInTheDocument();
                expect(alert).toHaveTextContent('Test error message');
            });
        });
    });
    describe('Header Actions', ()=>{
        it('should display "Save All" button', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /save all sections/i
                })).toBeInTheDocument();
            });
        });
        it('should call onSave when "Save All" is clicked', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const saveButton = _react.screen.getByRole('button', {
                name: /save all sections/i
            });
            _react.fireEvent.click(saveButton);
            expect(mockOnSave).toHaveBeenCalledTimes(1);
        });
        it('should display "Guest Preview" button', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /guest preview/i
                })).toBeInTheDocument();
            });
        });
        it('should open preview modal when "Guest Preview" is clicked', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /guest preview/i
                })).toBeInTheDocument();
            });
            const previewButton = _react.screen.getByRole('button', {
                name: /guest preview/i
            });
            _react.fireEvent.click(previewButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Guest Preview')).toBeInTheDocument();
            });
        });
        it('should display "Close" button when onClose is provided', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /close section editor/i
                })).toBeInTheDocument();
            });
        });
        it('should not display "Close" button when onClose is not provided', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            expect(_react.screen.queryByRole('button', {
                name: /close section editor/i
            })).not.toBeInTheDocument();
        });
        it('should call onClose when "Close" button is clicked', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /close section editor/i
                })).toBeInTheDocument();
            });
            const closeButton = _react.screen.getByRole('button', {
                name: /close section editor/i
            });
            _react.fireEvent.click(closeButton);
            expect(mockOnClose).toHaveBeenCalledTimes(1);
        });
        it('should disable "Save All" button while saving', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            // Mock a delayed response
            global.fetch.mockImplementationOnce(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            ok: true,
                            json: async ()=>({
                                    success: true,
                                    data: mockSection
                                })
                        }), 100)));
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /add new section/i
                })).toBeInTheDocument();
            });
            const addButton = _react.screen.getByRole('button', {
                name: /add new section/i
            });
            _react.fireEvent.click(addButton);
            // Save button should be disabled during save
            const saveButton = _react.screen.getByRole('button', {
                name: /save all sections/i
            });
            expect(saveButton).toBeDisabled();
        });
    });
    describe('Preview Modal', ()=>{
        it('should close preview modal when close button is clicked', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /guest preview/i
                })).toBeInTheDocument();
            });
            const previewButton = _react.screen.getByRole('button', {
                name: /guest preview/i
            });
            _react.fireEvent.click(previewButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Guest Preview')).toBeInTheDocument();
            });
            const closePreviewButton = _react.screen.getByRole('button', {
                name: /close preview/i
            });
            _react.fireEvent.click(closePreviewButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Guest Preview')).not.toBeInTheDocument();
            });
        });
        it('should close preview modal when backdrop is clicked', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /guest preview/i
                })).toBeInTheDocument();
            });
            const previewButton = _react.screen.getByRole('button', {
                name: /guest preview/i
            });
            _react.fireEvent.click(previewButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Guest Preview')).toBeInTheDocument();
            });
            // Click backdrop (the fixed inset-0 div)
            const backdrop = _react.screen.getByText('Guest Preview').closest('.fixed');
            if (backdrop) {
                _react.fireEvent.click(backdrop);
            }
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Guest Preview')).not.toBeInTheDocument();
            });
        });
        it('should render sections in preview modal', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /guest preview/i
                })).toBeInTheDocument();
            });
            const previewButton = _react.screen.getByRole('button', {
                name: /guest preview/i
            });
            _react.fireEvent.click(previewButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Guest Preview')).toBeInTheDocument();
            });
            // Content should be rendered in preview
            const previewContent = _react.screen.getAllByText('Test content');
            expect(previewContent.length).toBeGreaterThan(0);
        });
    });
    describe('Accessibility', ()=>{
        it('should have proper aria labels on all buttons', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            expect(_react.screen.getByRole('button', {
                name: /add new section/i
            })).toBeInTheDocument();
            expect(_react.screen.getByRole('button', {
                name: /save all sections/i
            })).toBeInTheDocument();
            expect(_react.screen.getByRole('button', {
                name: /guest preview/i
            })).toBeInTheDocument();
            expect(_react.screen.getByRole('button', {
                name: /close section editor/i
            })).toBeInTheDocument();
            expect(_react.screen.getByRole('button', {
                name: /move section up/i
            })).toBeInTheDocument();
            expect(_react.screen.getByRole('button', {
                name: /move section down/i
            })).toBeInTheDocument();
            expect(_react.screen.getByRole('button', {
                name: /delete section/i
            })).toBeInTheDocument();
            expect(_react.screen.getByRole('button', {
                name: /toggle to two column layout/i
            })).toBeInTheDocument();
        });
        it('should have proper role for error messages', async ()=>{
            mockFetchError('Test error');
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                const alert = _react.screen.getByRole('alert');
                expect(alert).toHaveTextContent('Test error');
            });
        });
        it('should support keyboard navigation for draggable sections', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const sections = _react.screen.getAllByText(/#\d+/, {
                selector: 'span'
            }).map((el)=>el.closest('div[draggable="true"]'));
            sections.forEach((section)=>{
                expect(section).toHaveAttribute('draggable', 'true');
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9hZG1pbi9TZWN0aW9uRWRpdG9yLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5pdCBUZXN0cyBmb3IgU2VjdGlvbkVkaXRvciBDb21wb25lbnRcbiAqIFxuICogVGVzdHM6XG4gKiAtIFNlY3Rpb24gY3JlYXRpb25cbiAqIC0gU2VjdGlvbiByZW9yZGVyaW5nXG4gKiAtIExheW91dCB0b2dnbGVcbiAqIC0gQ29sdW1uIGVkaXRpbmdcbiAqIFxuICogUmVxdWlyZW1lbnRzOiAyLjEtMi42XG4gKi9cblxuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIGZpcmVFdmVudCwgd2FpdEZvciwgY2xlYW51cCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHsgU2VjdGlvbkVkaXRvciB9IGZyb20gJy4vU2VjdGlvbkVkaXRvcic7XG5cbi8vIE1vY2sgZmV0Y2ggZ2xvYmFsbHlcbmdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKTtcblxuLy8gTW9jayB3aW5kb3cuY29uZmlybVxuY29uc3Qgb3JpZ2luYWxDb25maXJtID0gd2luZG93LmNvbmZpcm07XG5cbi8vIE1vY2sgc2Nyb2xsSW50b1ZpZXdcbkVsZW1lbnQucHJvdG90eXBlLnNjcm9sbEludG9WaWV3ID0gamVzdC5mbigpO1xuXG4vLyBNb2NrIHNlY3Rpb24gZGF0YVxuY29uc3QgbW9ja1NlY3Rpb24gPSB7XG4gIGlkOiAnc2VjdGlvbi0xJyxcbiAgcGFnZV90eXBlOiAnY3VzdG9tJyBhcyBjb25zdCxcbiAgcGFnZV9pZDogJ3BhZ2UtMScsXG4gIGRpc3BsYXlfb3JkZXI6IDAsXG4gIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gIGNvbHVtbnM6IFtcbiAgICB7XG4gICAgICBpZDogJ2NvbHVtbi0xJyxcbiAgICAgIHNlY3Rpb25faWQ6ICdzZWN0aW9uLTEnLFxuICAgICAgY29sdW1uX251bWJlcjogMSBhcyBjb25zdCxcbiAgICAgIGNvbnRlbnRfdHlwZTogJ3JpY2hfdGV4dCcgYXMgY29uc3QsXG4gICAgICBjb250ZW50X2RhdGE6IHsgaHRtbDogJzxwPlRlc3QgY29udGVudDwvcD4nIH0sXG4gICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICB9LFxuICBdLFxufTtcblxuY29uc3QgbW9ja1R3b0NvbHVtblNlY3Rpb24gPSB7XG4gIC4uLm1vY2tTZWN0aW9uLFxuICBpZDogJ3NlY3Rpb24tMicsXG4gIGRpc3BsYXlfb3JkZXI6IDEsXG4gIGNvbHVtbnM6IFtcbiAgICB7XG4gICAgICBpZDogJ2NvbHVtbi0yJyxcbiAgICAgIHNlY3Rpb25faWQ6ICdzZWN0aW9uLTInLFxuICAgICAgY29sdW1uX251bWJlcjogMSBhcyBjb25zdCxcbiAgICAgIGNvbnRlbnRfdHlwZTogJ3JpY2hfdGV4dCcgYXMgY29uc3QsXG4gICAgICBjb250ZW50X2RhdGE6IHsgaHRtbDogJzxwPkNvbHVtbiAxPC9wPicgfSxcbiAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICdjb2x1bW4tMycsXG4gICAgICBzZWN0aW9uX2lkOiAnc2VjdGlvbi0yJyxcbiAgICAgIGNvbHVtbl9udW1iZXI6IDIgYXMgY29uc3QsXG4gICAgICBjb250ZW50X3R5cGU6ICdyaWNoX3RleHQnIGFzIGNvbnN0LFxuICAgICAgY29udGVudF9kYXRhOiB7IGh0bWw6ICc8cD5Db2x1bW4gMjwvcD4nIH0sXG4gICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICB9LFxuICBdLFxufTtcblxuZGVzY3JpYmUoJ1NlY3Rpb25FZGl0b3InLCAoKSA9PiB7XG4gIGxldCBtb2NrT25TYXZlOiBqZXN0Lk1vY2s7XG4gIGxldCBtb2NrT25DbG9zZTogamVzdC5Nb2NrO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIG1vY2tPblNhdmUgPSBqZXN0LmZuKCk7XG4gICAgbW9ja09uQ2xvc2UgPSBqZXN0LmZuKCk7XG4gICAgd2luZG93LmNvbmZpcm0gPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHRydWUpO1xuICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzZXQoKTtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBjbGVhbnVwKCk7XG4gICAgd2luZG93LmNvbmZpcm0gPSBvcmlnaW5hbENvbmZpcm07XG4gIH0pO1xuXG4gIGNvbnN0IG1vY2tGZXRjaFN1Y2Nlc3MgPSAoZGF0YTogYW55KSA9PiB7XG4gICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICBvazogdHJ1ZSxcbiAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGEgfSksXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgbW9ja0ZldGNoRXJyb3IgPSAobWVzc2FnZTogc3RyaW5nKSA9PiB7XG4gICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICBvazogdHJ1ZSxcbiAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogeyBtZXNzYWdlIH0gfSksXG4gICAgfSk7XG4gIH07XG5cbiAgZGVzY3JpYmUoJ1NlY3Rpb24gQ3JlYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IFwiQWRkIFNlY3Rpb25cIiBidXR0b24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFtdKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvYWRkIG5ldyBzZWN0aW9uL2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY3JlYXRlIG5ldyBzZWN0aW9uIHdoZW4gXCJBZGQgU2VjdGlvblwiIGlzIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFtdKTsgLy8gSW5pdGlhbCBmZXRjaFxuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyhtb2NrU2VjdGlvbik7IC8vIENyZWF0ZSBzZWN0aW9uXG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2FkZCBuZXcgc2VjdGlvbi9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2FkZCBuZXcgc2VjdGlvbi9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGFkZEJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICAnL2FwaS9hZG1pbi9zZWN0aW9ucycsXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgIGJvZHk6IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdcInBhZ2VfaWRcIjpcInBhZ2UtMVwiJyksXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhZGQgbmV3IHNlY3Rpb24gdG8gdGhlIGxpc3QgYWZ0ZXIgY3JlYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFtdKTsgLy8gSW5pdGlhbCBmZXRjaFxuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyhtb2NrU2VjdGlvbik7IC8vIENyZWF0ZSBzZWN0aW9uXG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL25vIHNlY3Rpb25zIHlldC9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBhZGRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9hZGQgbmV3IHNlY3Rpb24vaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhhZGRCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBzZWN0aW9uIHdpdGggb25lIGNvbHVtbiBieSBkZWZhdWx0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbXSk7IC8vIEluaXRpYWwgZmV0Y2hcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MobW9ja1NlY3Rpb24pOyAvLyBDcmVhdGUgc2VjdGlvblxuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9hZGQgbmV3IHNlY3Rpb24vaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBhZGRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9hZGQgbmV3IHNlY3Rpb24vaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhhZGRCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgY3JlYXRlQ2FsbCA9IChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgICAgY2FsbCA9PiBjYWxsWzBdID09PSAnL2FwaS9hZG1pbi9zZWN0aW9ucycgJiYgY2FsbFsxXT8ubWV0aG9kID09PSAnUE9TVCdcbiAgICAgICAgKTtcbiAgICAgICAgZXhwZWN0KGNyZWF0ZUNhbGwpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKGNyZWF0ZUNhbGxbMV0uYm9keSk7XG4gICAgICAgIGV4cGVjdChib2R5LmNvbHVtbnMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgICAgZXhwZWN0KGJvZHkuY29sdW1uc1swXS5jb2x1bW5fbnVtYmVyKS50b0JlKDEpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgZXJyb3IgbWVzc2FnZSB3aGVuIHNlY3Rpb24gY3JlYXRpb24gZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFtdKTsgLy8gSW5pdGlhbCBmZXRjaFxuICAgICAgbW9ja0ZldGNoRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgc2VjdGlvbicpOyAvLyBDcmVhdGUgc2VjdGlvbiBlcnJvclxuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9hZGQgbmV3IHNlY3Rpb24vaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBhZGRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9hZGQgbmV3IHNlY3Rpb24vaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhhZGRCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0ZhaWxlZCB0byBjcmVhdGUgc2VjdGlvbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc2FibGUgXCJBZGQgU2VjdGlvblwiIGJ1dHRvbiB3aGlsZSBzYXZpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFtdKTsgLy8gSW5pdGlhbCBmZXRjaFxuICAgICAgXG4gICAgICAvLyBNb2NrIGEgZGVsYXllZCByZXNwb25zZVxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UoKCkgPT5cbiAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tTZWN0aW9uIH0pLFxuICAgICAgICB9KSwgMTAwKSlcbiAgICAgICk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2FkZCBuZXcgc2VjdGlvbi9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2FkZCBuZXcgc2VjdGlvbi9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGFkZEJ1dHRvbik7XG5cbiAgICAgIC8vIEJ1dHRvbiBzaG91bGQgYmUgZGlzYWJsZWQgZHVyaW5nIHNhdmVcbiAgICAgIGV4cGVjdChhZGRCdXR0b24pLnRvQmVEaXNhYmxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU2VjdGlvbiBSZW9yZGVyaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGlzcGxheSBtb3ZlIHVwIGFuZCBtb3ZlIGRvd24gYnV0dG9ucyBmb3Igc2VjdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbiwgbW9ja1R3b0NvbHVtblNlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgbW92ZVVwQnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL21vdmUgc2VjdGlvbiB1cC9pIH0pO1xuICAgICAgY29uc3QgbW92ZURvd25CdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvbW92ZSBzZWN0aW9uIGRvd24vaSB9KTtcblxuICAgICAgZXhwZWN0KG1vdmVVcEJ1dHRvbnMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIGV4cGVjdChtb3ZlRG93bkJ1dHRvbnMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzYWJsZSBtb3ZlIHVwIGJ1dHRvbiBmb3IgZmlyc3Qgc2VjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tTZWN0aW9uLCBtb2NrVHdvQ29sdW1uU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBtb3ZlVXBCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvbW92ZSBzZWN0aW9uIHVwL2kgfSk7XG4gICAgICBleHBlY3QobW92ZVVwQnV0dG9uc1swXSkudG9CZURpc2FibGVkKCk7XG4gICAgICBleHBlY3QobW92ZVVwQnV0dG9uc1sxXSkubm90LnRvQmVEaXNhYmxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNhYmxlIG1vdmUgZG93biBidXR0b24gZm9yIGxhc3Qgc2VjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tTZWN0aW9uLCBtb2NrVHdvQ29sdW1uU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBtb3ZlRG93bkJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9tb3ZlIHNlY3Rpb24gZG93bi9pIH0pO1xuICAgICAgZXhwZWN0KG1vdmVEb3duQnV0dG9uc1swXSkubm90LnRvQmVEaXNhYmxlZCgpO1xuICAgICAgZXhwZWN0KG1vdmVEb3duQnV0dG9uc1sxXSkudG9CZURpc2FibGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG1vdmUgc2VjdGlvbiB1cCB3aGVuIG1vdmUgdXAgYnV0dG9uIGlzIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbiwgbW9ja1R3b0NvbHVtblNlY3Rpb25dKTtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoeyBzdWNjZXNzOiB0cnVlIH0pOyAvLyBSZW9yZGVyIEFQSSBjYWxsXG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMyJywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIG1vdmUgdXAgb24gc2Vjb25kIHNlY3Rpb25cbiAgICAgIGNvbnN0IG1vdmVVcEJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9tb3ZlIHNlY3Rpb24gdXAvaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhtb3ZlVXBCdXR0b25zWzFdKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgICcvYXBpL2FkbWluL3NlY3Rpb25zL3Jlb3JkZXInLFxuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgYm9keTogZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1wicGFnZUlkXCI6XCJwYWdlLTFcIicpLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbW92ZSBzZWN0aW9uIGRvd24gd2hlbiBtb3ZlIGRvd24gYnV0dG9uIGlzIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbiwgbW9ja1R3b0NvbHVtblNlY3Rpb25dKTtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoeyBzdWNjZXNzOiB0cnVlIH0pOyAvLyBSZW9yZGVyIEFQSSBjYWxsXG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIG1vdmUgZG93biBvbiBmaXJzdCBzZWN0aW9uXG4gICAgICBjb25zdCBtb3ZlRG93bkJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9tb3ZlIHNlY3Rpb24gZG93bi9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKG1vdmVEb3duQnV0dG9uc1swXSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICAnL2FwaS9hZG1pbi9zZWN0aW9ucy9yZW9yZGVyJyxcbiAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgZHJhZyBhbmQgZHJvcCByZW9yZGVyaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1NlY3Rpb24sIG1vY2tUd29Db2x1bW5TZWN0aW9uXSk7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKHsgc3VjY2VzczogdHJ1ZSB9KTsgLy8gUmVvcmRlciBBUEkgY2FsbFxuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBzZWN0aW9ucyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoLyNcXGQrLywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pO1xuICAgICAgY29uc3QgZmlyc3RTZWN0aW9uID0gc2VjdGlvbnNbMF0uY2xvc2VzdCgnZGl2W2RyYWdnYWJsZT1cInRydWVcIl0nKTtcbiAgICAgIGNvbnN0IHNlY29uZFNlY3Rpb24gPSBzZWN0aW9uc1sxXS5jbG9zZXN0KCdkaXZbZHJhZ2dhYmxlPVwidHJ1ZVwiXScpO1xuXG4gICAgICAvLyBTaW11bGF0ZSBkcmFnIGFuZCBkcm9wXG4gICAgICBpZiAoZmlyc3RTZWN0aW9uICYmIHNlY29uZFNlY3Rpb24pIHtcbiAgICAgICAgZmlyZUV2ZW50LmRyYWdTdGFydChmaXJzdFNlY3Rpb24pO1xuICAgICAgICBmaXJlRXZlbnQuZHJhZ092ZXIoc2Vjb25kU2VjdGlvbik7XG4gICAgICAgIGZpcmVFdmVudC5kcm9wKHNlY29uZFNlY3Rpb24pO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgJy9hcGkvYWRtaW4vc2VjdGlvbnMvcmVvcmRlcicsXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhcHBseSBvcGFjaXR5IHN0eWxlIHRvIGRyYWdnZWQgc2VjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tTZWN0aW9uLCBtb2NrVHdvQ29sdW1uU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBzZWN0aW9ucyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoLyNcXGQrLywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pO1xuICAgICAgY29uc3QgZmlyc3RTZWN0aW9uID0gc2VjdGlvbnNbMF0uY2xvc2VzdCgnZGl2W2RyYWdnYWJsZT1cInRydWVcIl0nKTtcblxuICAgICAgaWYgKGZpcnN0U2VjdGlvbikge1xuICAgICAgICBmaXJlRXZlbnQuZHJhZ1N0YXJ0KGZpcnN0U2VjdGlvbik7XG4gICAgICAgIGV4cGVjdChmaXJzdFNlY3Rpb24uY2xhc3NOYW1lKS50b0NvbnRhaW4oJ29wYWNpdHktNTAnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsbCByZW9yZGVyIEFQSSB3aGVuIG1vdmluZyBzZWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1NlY3Rpb24sIG1vY2tUd29Db2x1bW5TZWN0aW9uXSk7IC8vIEluaXRpYWwgZmV0Y2hcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoeyBzdWNjZXNzOiB0cnVlIH0pOyAvLyBSZW9yZGVyIEFQSSBzdWNjZXNzXG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG1vdmVEb3duQnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL21vdmUgc2VjdGlvbiBkb3duL2kgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sobW92ZURvd25CdXR0b25zWzBdKTtcblxuICAgICAgLy8gU2hvdWxkIGNhbGwgcmVvcmRlciBBUElcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICAnL2FwaS9hZG1pbi9zZWN0aW9ucy9yZW9yZGVyJyxcbiAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCByZW9yZGVyIHdoZW4gZHJhZ2dpbmcgc2VjdGlvbiBvbnRvIGl0c2VsZicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tTZWN0aW9uLCBtb2NrVHdvQ29sdW1uU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBzZWN0aW9ucyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoLyNcXGQrLywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pO1xuICAgICAgY29uc3QgZmlyc3RTZWN0aW9uID0gc2VjdGlvbnNbMF0uY2xvc2VzdCgnZGl2W2RyYWdnYWJsZT1cInRydWVcIl0nKTtcblxuICAgICAgaWYgKGZpcnN0U2VjdGlvbikge1xuICAgICAgICBmaXJlRXZlbnQuZHJhZ1N0YXJ0KGZpcnN0U2VjdGlvbik7XG4gICAgICAgIGZpcmVFdmVudC5kcm9wKGZpcnN0U2VjdGlvbik7XG4gICAgICB9XG5cbiAgICAgIC8vIFNob3VsZCBub3QgY2FsbCByZW9yZGVyIEFQSVxuICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkubm90LnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnL2FwaS9hZG1pbi9zZWN0aW9ucy9yZW9yZGVyJyxcbiAgICAgICAgZXhwZWN0LmFueXRoaW5nKClcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdMYXlvdXQgVG9nZ2xlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGlzcGxheSBsYXlvdXQgdG9nZ2xlIGJ1dHRvbiBmb3IgZWFjaCBzZWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgbGF5b3V0QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvdG9nZ2xlIHRvIHR3byBjb2x1bW4gbGF5b3V0L2kgfSk7XG4gICAgICBleHBlY3QobGF5b3V0QnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KGxheW91dEJ1dHRvbikudG9IYXZlVGV4dENvbnRlbnQoJzEgQ29sJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNob3cgXCIxIENvbFwiIGZvciBvbmUtY29sdW1uIGxheW91dCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tTZWN0aW9uXSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGxheW91dEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3RvZ2dsZSB0byB0d28gY29sdW1uIGxheW91dC9pIH0pO1xuICAgICAgZXhwZWN0KGxheW91dEJ1dHRvbikudG9IYXZlVGV4dENvbnRlbnQoJzEgQ29sJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNob3cgXCIyIENvbFwiIGZvciB0d28tY29sdW1uIGxheW91dCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tUd29Db2x1bW5TZWN0aW9uXSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGxheW91dEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3RvZ2dsZSB0byBvbmUgY29sdW1uIGxheW91dC9pIH0pO1xuICAgICAgZXhwZWN0KGxheW91dEJ1dHRvbikudG9IYXZlVGV4dENvbnRlbnQoJzIgQ29sJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRvZ2dsZSBmcm9tIG9uZSBjb2x1bW4gdG8gdHdvIGNvbHVtbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyhtb2NrVHdvQ29sdW1uU2VjdGlvbik7IC8vIFVwZGF0ZWQgc2VjdGlvbiB3aXRoIDIgY29sdW1uc1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBsYXlvdXRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC90b2dnbGUgdG8gdHdvIGNvbHVtbiBsYXlvdXQvaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhsYXlvdXRCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgYC9hcGkvYWRtaW4vc2VjdGlvbnMvJHttb2NrU2VjdGlvbi5pZH1gLFxuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICBib2R5OiBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnXCJjb2x1bW5zXCInKSxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRvZ2dsZSBmcm9tIHR3byBjb2x1bW5zIHRvIG9uZSBjb2x1bW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrVHdvQ29sdW1uU2VjdGlvbl0pO1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyhtb2NrU2VjdGlvbik7IC8vIFVwZGF0ZWQgc2VjdGlvbiB3aXRoIDEgY29sdW1uXG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGxheW91dEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3RvZ2dsZSB0byBvbmUgY29sdW1uIGxheW91dC9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGxheW91dEJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBgL2FwaS9hZG1pbi9zZWN0aW9ucy8ke21vY2tUd29Db2x1bW5TZWN0aW9uLmlkfWAsXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFkZCBzZWNvbmQgY29sdW1uIHdoZW4gdG9nZ2xpbmcgdG8gdHdvIGNvbHVtbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyhtb2NrVHdvQ29sdW1uU2VjdGlvbik7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGxheW91dEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3RvZ2dsZSB0byB0d28gY29sdW1uIGxheW91dC9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGxheW91dEJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCB1cGRhdGVDYWxsID0gKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgICBjYWxsID0+IGNhbGxbMF0uaW5jbHVkZXMoJy9hcGkvYWRtaW4vc2VjdGlvbnMvc2VjdGlvbi0nKSAmJiBjYWxsWzFdPy5tZXRob2QgPT09ICdQVVQnXG4gICAgICAgICk7XG4gICAgICAgIGV4cGVjdCh1cGRhdGVDYWxsKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZSh1cGRhdGVDYWxsWzFdLmJvZHkpO1xuICAgICAgICBleHBlY3QoYm9keS5jb2x1bW5zKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICAgIGV4cGVjdChib2R5LmNvbHVtbnNbMV0uY29sdW1uX251bWJlcikudG9CZSgyKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBrZWVwIG9ubHkgZmlyc3QgY29sdW1uIHdoZW4gdG9nZ2xpbmcgdG8gb25lIGNvbHVtbicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tUd29Db2x1bW5TZWN0aW9uXSk7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKG1vY2tTZWN0aW9uKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgbGF5b3V0QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvdG9nZ2xlIHRvIG9uZSBjb2x1bW4gbGF5b3V0L2kgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sobGF5b3V0QnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZUNhbGwgPSAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9jay5jYWxscy5maW5kKFxuICAgICAgICAgIGNhbGwgPT4gY2FsbFswXS5pbmNsdWRlcygnL2FwaS9hZG1pbi9zZWN0aW9ucy9zZWN0aW9uLScpICYmIGNhbGxbMV0/Lm1ldGhvZCA9PT0gJ1BVVCdcbiAgICAgICAgKTtcbiAgICAgICAgZXhwZWN0KHVwZGF0ZUNhbGwpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHVwZGF0ZUNhbGxbMV0uYm9keSk7XG4gICAgICAgIGV4cGVjdChib2R5LmNvbHVtbnMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGVycm9yIHdoZW4gbGF5b3V0IHRvZ2dsZSBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tTZWN0aW9uXSk7XG4gICAgICBtb2NrRmV0Y2hFcnJvcignRmFpbGVkIHRvIHVwZGF0ZSBsYXlvdXQnKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgbGF5b3V0QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvdG9nZ2xlIHRvIHR3byBjb2x1bW4gbGF5b3V0L2kgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sobGF5b3V0QnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdhbGVydCcpKS50b0hhdmVUZXh0Q29udGVudCgnRmFpbGVkIHRvIHVwZGF0ZSBsYXlvdXQnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgY29sdW1ucyBpbiBncmlkIGxheW91dCBiYXNlZCBvbiBjb2x1bW4gY291bnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbiwgbW9ja1R3b0NvbHVtblNlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc2VjdGlvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC8jXFxkKy8sIHsgc2VsZWN0b3I6ICdzcGFuJyB9KS5tYXAoZWwgPT4gZWwuY2xvc2VzdCgnZGl2W2RyYWdnYWJsZT1cInRydWVcIl0nKSk7XG4gICAgICBcbiAgICAgIC8vIEZpcnN0IHNlY3Rpb24gc2hvdWxkIGhhdmUgZ3JpZC1jb2xzLTFcbiAgICAgIGNvbnN0IGZpcnN0U2VjdGlvbkNvbnRlbnQgPSBzZWN0aW9uc1swXT8ucXVlcnlTZWxlY3RvcignLmdyaWQnKTtcbiAgICAgIGV4cGVjdChmaXJzdFNlY3Rpb25Db250ZW50Py5jbGFzc05hbWUpLnRvQ29udGFpbignZ3JpZC1jb2xzLTEnKTtcblxuICAgICAgLy8gU2Vjb25kIHNlY3Rpb24gc2hvdWxkIGhhdmUgZ3JpZC1jb2xzLTJcbiAgICAgIGNvbnN0IHNlY29uZFNlY3Rpb25Db250ZW50ID0gc2VjdGlvbnNbMV0/LnF1ZXJ5U2VsZWN0b3IoJy5ncmlkJyk7XG4gICAgICBleHBlY3Qoc2Vjb25kU2VjdGlvbkNvbnRlbnQ/LmNsYXNzTmFtZSkudG9Db250YWluKCdncmlkLWNvbHMtMicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29sdW1uIEVkaXRpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGNvbHVtbiBjb250ZW50IGZvciByaWNoIHRleHQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDb2x1bW4gMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFJpY2ggdGV4dCBjb250ZW50IHNob3VsZCBiZSBkaXNwbGF5ZWQgKGFzIGVzY2FwZWQgSFRNTClcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC88cD5UZXN0IGNvbnRlbnQ8XFwvcD4vKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBjb2x1bW4gbnVtYmVyIGxhYmVsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1R3b0NvbHVtblNlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2hlY2sgZm9yIGNvbHVtbiBsYWJlbHMgc3BlY2lmaWNhbGx5IChub3QgY29udGVudClcbiAgICAgIGNvbnN0IGNvbHVtbkxhYmVscyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoL15Db2x1bW4gXFxkJC8pO1xuICAgICAgZXhwZWN0KGNvbHVtbkxhYmVscykudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgZXhwZWN0KGNvbHVtbkxhYmVsc1swXSkudG9IYXZlVGV4dENvbnRlbnQoJ0NvbHVtbiAxJyk7XG4gICAgICBleHBlY3QoY29sdW1uTGFiZWxzWzFdKS50b0hhdmVUZXh0Q29udGVudCgnQ29sdW1uIDInKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBlbXB0eSBjb250ZW50IHBsYWNlaG9sZGVyIGZvciBlbXB0eSByaWNoIHRleHQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBlbXB0eVNlY3Rpb24gPSB7XG4gICAgICAgIC4uLm1vY2tTZWN0aW9uLFxuICAgICAgICBjb2x1bW5zOiBbe1xuICAgICAgICAgIC4uLm1vY2tTZWN0aW9uLmNvbHVtbnNbMF0sXG4gICAgICAgICAgY29udGVudF9kYXRhOiB7IGh0bWw6ICcnIH0sXG4gICAgICAgIH1dLFxuICAgICAgfTtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW2VtcHR5U2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnRW1wdHkgY29udGVudCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHBob3RvIGdhbGxlcnkgY29udGVudCB0eXBlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcGhvdG9TZWN0aW9uID0ge1xuICAgICAgICAuLi5tb2NrU2VjdGlvbixcbiAgICAgICAgY29sdW1uczogW3tcbiAgICAgICAgICAuLi5tb2NrU2VjdGlvbi5jb2x1bW5zWzBdLFxuICAgICAgICAgIGNvbnRlbnRfdHlwZTogJ3Bob3RvX2dhbGxlcnknIGFzIGNvbnN0LFxuICAgICAgICAgIGNvbnRlbnRfZGF0YTogeyBwaG90b19pZHM6IFsncGhvdG8tMScsICdwaG90by0yJywgJ3Bob3RvLTMnXSB9LFxuICAgICAgICB9XSxcbiAgICAgIH07XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFtwaG90b1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1Bob3RvIEdhbGxlcnkgKDMgcGhvdG9zKScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHJlZmVyZW5jZXMgY29udGVudCB0eXBlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVmZXJlbmNlU2VjdGlvbiA9IHtcbiAgICAgICAgLi4ubW9ja1NlY3Rpb24sXG4gICAgICAgIGNvbHVtbnM6IFt7XG4gICAgICAgICAgLi4ubW9ja1NlY3Rpb24uY29sdW1uc1swXSxcbiAgICAgICAgICBjb250ZW50X3R5cGU6ICdyZWZlcmVuY2VzJyBhcyBjb25zdCxcbiAgICAgICAgICBjb250ZW50X2RhdGE6IHsgcmVmZXJlbmNlczogW3sgaWQ6ICdyZWYtMScsIHR5cGU6ICdldmVudCcsIG5hbWU6ICdDZXJlbW9ueScgfV0gfSxcbiAgICAgICAgfV0sXG4gICAgICB9O1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbcmVmZXJlbmNlU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnUmVmZXJlbmNlcyAoMSBpdGVtcyknKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSB6ZXJvIGNvdW50IGZvciBlbXB0eSBwaG90byBnYWxsZXJ5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZW1wdHlQaG90b1NlY3Rpb24gPSB7XG4gICAgICAgIC4uLm1vY2tTZWN0aW9uLFxuICAgICAgICBjb2x1bW5zOiBbe1xuICAgICAgICAgIC4uLm1vY2tTZWN0aW9uLmNvbHVtbnNbMF0sXG4gICAgICAgICAgY29udGVudF90eXBlOiAncGhvdG9fZ2FsbGVyeScgYXMgY29uc3QsXG4gICAgICAgICAgY29udGVudF9kYXRhOiB7fSxcbiAgICAgICAgfV0sXG4gICAgICB9O1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbZW1wdHlQaG90b1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1Bob3RvIEdhbGxlcnkgKDAgcGhvdG9zKScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU2VjdGlvbiBEZWxldGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgZGVsZXRlIGJ1dHRvbiBmb3IgZWFjaCBzZWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2RlbGV0ZSBzZWN0aW9uL2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNob3cgY29uZmlybWF0aW9uIGRpYWxvZyB3aGVuIGRlbGV0ZSBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZGVsZXRlIHNlY3Rpb24vaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhkZWxldGVCdXR0b24pO1xuXG4gICAgICBleHBlY3Qod2luZG93LmNvbmZpcm0pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgc2VjdGlvbj8nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGVsZXRlIHNlY3Rpb24gd2hlbiBjb25maXJtZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyh7IHN1Y2Nlc3M6IHRydWUgfSk7IC8vIERlbGV0ZSBBUEkgY2FsbFxuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9kZWxldGUgc2VjdGlvbi9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGRlbGV0ZUJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBgL2FwaS9hZG1pbi9zZWN0aW9ucy8ke21vY2tTZWN0aW9uLmlkfWAsXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCBkZWxldGUgc2VjdGlvbiB3aGVuIGNvbmZpcm1hdGlvbiBpcyBjYW5jZWxsZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICB3aW5kb3cuY29uZmlybSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoZmFsc2UpO1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZGVsZXRlIHNlY3Rpb24vaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhkZWxldGVCdXR0b24pO1xuXG4gICAgICAvLyBTaG91bGQgbm90IGNhbGwgZGVsZXRlIEFQSVxuICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkubm90LnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnL2FwaS9hZG1pbi9zZWN0aW9ucy8nKSxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoeyBtZXRob2Q6ICdERUxFVEUnIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZW1vdmUgc2VjdGlvbiBmcm9tIGxpc3QgYWZ0ZXIgc3VjY2Vzc2Z1bCBkZWxldGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tTZWN0aW9uLCBtb2NrVHdvQ29sdW1uU2VjdGlvbl0pO1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyh7IHN1Y2Nlc3M6IHRydWUgfSk7IC8vIERlbGV0ZSBBUEkgY2FsbFxuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMyJywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9kZWxldGUgc2VjdGlvbi9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGRlbGV0ZUJ1dHRvbnNbMF0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgLy8gQWZ0ZXIgZGVsZXRpb24sIG9ubHkgb25lIHNlY3Rpb24gc2hvdWxkIHJlbWFpblxuICAgICAgICBjb25zdCBzZWN0aW9ucyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoLyNcXGQrLywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pO1xuICAgICAgICBleHBlY3Qoc2VjdGlvbnMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGVycm9yIHdoZW4gZGVsZXRpb24gZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuICAgICAgbW9ja0ZldGNoRXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgc2VjdGlvbicpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9kZWxldGUgc2VjdGlvbi9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGRlbGV0ZUJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnYWxlcnQnKSkudG9IYXZlVGV4dENvbnRlbnQoJ0ZhaWxlZCB0byBkZWxldGUgc2VjdGlvbicpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdMb2FkaW5nIGFuZCBFcnJvciBTdGF0ZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGxvYWRpbmcgc3RhdGUgd2hpbGUgZmV0Y2hpbmcgc2VjdGlvbnMnLCAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uT25jZSgoKSA9PlxuICAgICAgICBuZXcgUHJvbWlzZSgoKSA9PiB7fSkgLy8gTmV2ZXIgcmVzb2x2ZXNcbiAgICAgICk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnTG9hZGluZyBzZWN0aW9ucy4uLicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGVycm9yIG1lc3NhZ2Ugd2hlbiBmZXRjaCBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaEVycm9yKCdGYWlsZWQgdG8gbG9hZCBzZWN0aW9ucycpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdhbGVydCcpKS50b0hhdmVUZXh0Q29udGVudCgnRmFpbGVkIHRvIGxvYWQgc2VjdGlvbnMnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGVtcHR5IHN0YXRlIHdoZW4gbm8gc2VjdGlvbnMgZXhpc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFtdKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvbm8gc2VjdGlvbnMgeWV0L2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgZXJyb3IgYWxlcnQgd2l0aCBwcm9wZXIgcm9sZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaEVycm9yKCdUZXN0IGVycm9yIG1lc3NhZ2UnKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBhbGVydCA9IHNjcmVlbi5nZXRCeVJvbGUoJ2FsZXJ0Jyk7XG4gICAgICAgIGV4cGVjdChhbGVydCkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgZXhwZWN0KGFsZXJ0KS50b0hhdmVUZXh0Q29udGVudCgnVGVzdCBlcnJvciBtZXNzYWdlJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0hlYWRlciBBY3Rpb25zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGlzcGxheSBcIlNhdmUgQWxsXCIgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvc2F2ZSBhbGwgc2VjdGlvbnMvaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxsIG9uU2F2ZSB3aGVuIFwiU2F2ZSBBbGxcIiBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3NhdmUgYWxsIHNlY3Rpb25zL2kgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2F2ZUJ1dHRvbik7XG5cbiAgICAgIGV4cGVjdChtb2NrT25TYXZlKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgXCJHdWVzdCBQcmV2aWV3XCIgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZ3Vlc3QgcHJldmlldy9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG9wZW4gcHJldmlldyBtb2RhbCB3aGVuIFwiR3Vlc3QgUHJldmlld1wiIGlzIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9ndWVzdCBwcmV2aWV3L2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcHJldmlld0J1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2d1ZXN0IHByZXZpZXcvaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhwcmV2aWV3QnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdHdWVzdCBQcmV2aWV3JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBcIkNsb3NlXCIgYnV0dG9uIHdoZW4gb25DbG9zZSBpcyBwcm92aWRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tTZWN0aW9uXSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2Nsb3NlIHNlY3Rpb24gZWRpdG9yL2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IGRpc3BsYXkgXCJDbG9zZVwiIGJ1dHRvbiB3aGVuIG9uQ2xvc2UgaXMgbm90IHByb3ZpZGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvY2xvc2Ugc2VjdGlvbiBlZGl0b3IvaSB9KSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNhbGwgb25DbG9zZSB3aGVuIFwiQ2xvc2VcIiBidXR0b24gaXMgY2xpY2tlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tTZWN0aW9uXSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2Nsb3NlIHNlY3Rpb24gZWRpdG9yL2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9jbG9zZSBzZWN0aW9uIGVkaXRvci9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGNsb3NlQnV0dG9uKTtcblxuICAgICAgZXhwZWN0KG1vY2tPbkNsb3NlKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc2FibGUgXCJTYXZlIEFsbFwiIGJ1dHRvbiB3aGlsZSBzYXZpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuICAgICAgXG4gICAgICAvLyBNb2NrIGEgZGVsYXllZCByZXNwb25zZVxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UoKCkgPT5cbiAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tTZWN0aW9uIH0pLFxuICAgICAgICB9KSwgMTAwKSlcbiAgICAgICk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2FkZCBuZXcgc2VjdGlvbi9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2FkZCBuZXcgc2VjdGlvbi9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGFkZEJ1dHRvbik7XG5cbiAgICAgIC8vIFNhdmUgYnV0dG9uIHNob3VsZCBiZSBkaXNhYmxlZCBkdXJpbmcgc2F2ZVxuICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3NhdmUgYWxsIHNlY3Rpb25zL2kgfSk7XG4gICAgICBleHBlY3Qoc2F2ZUJ1dHRvbikudG9CZURpc2FibGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQcmV2aWV3IE1vZGFsJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY2xvc2UgcHJldmlldyBtb2RhbCB3aGVuIGNsb3NlIGJ1dHRvbiBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZ3Vlc3QgcHJldmlldy9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHByZXZpZXdCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9ndWVzdCBwcmV2aWV3L2kgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2socHJldmlld0J1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnR3Vlc3QgUHJldmlldycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNsb3NlUHJldmlld0J1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2Nsb3NlIHByZXZpZXcvaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhjbG9zZVByZXZpZXdCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnR3Vlc3QgUHJldmlldycpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjbG9zZSBwcmV2aWV3IG1vZGFsIHdoZW4gYmFja2Ryb3AgaXMgY2xpY2tlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tTZWN0aW9uXSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2d1ZXN0IHByZXZpZXcvaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBwcmV2aWV3QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZ3Vlc3QgcHJldmlldy9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHByZXZpZXdCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0d1ZXN0IFByZXZpZXcnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBiYWNrZHJvcCAodGhlIGZpeGVkIGluc2V0LTAgZGl2KVxuICAgICAgY29uc3QgYmFja2Ryb3AgPSBzY3JlZW4uZ2V0QnlUZXh0KCdHdWVzdCBQcmV2aWV3JykuY2xvc2VzdCgnLmZpeGVkJyk7XG4gICAgICBpZiAoYmFja2Ryb3ApIHtcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKGJhY2tkcm9wKTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ0d1ZXN0IFByZXZpZXcnKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVuZGVyIHNlY3Rpb25zIGluIHByZXZpZXcgbW9kYWwnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9ndWVzdCBwcmV2aWV3L2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcHJldmlld0J1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2d1ZXN0IHByZXZpZXcvaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhwcmV2aWV3QnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdHdWVzdCBQcmV2aWV3JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ29udGVudCBzaG91bGQgYmUgcmVuZGVyZWQgaW4gcHJldmlld1xuICAgICAgY29uc3QgcHJldmlld0NvbnRlbnQgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KCdUZXN0IGNvbnRlbnQnKTtcbiAgICAgIGV4cGVjdChwcmV2aWV3Q29udGVudC5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FjY2Vzc2liaWxpdHknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYXZlIHByb3BlciBhcmlhIGxhYmVscyBvbiBhbGwgYnV0dG9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tTZWN0aW9uXSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9hZGQgbmV3IHNlY3Rpb24vaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9zYXZlIGFsbCBzZWN0aW9ucy9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2d1ZXN0IHByZXZpZXcvaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9jbG9zZSBzZWN0aW9uIGVkaXRvci9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL21vdmUgc2VjdGlvbiB1cC9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL21vdmUgc2VjdGlvbiBkb3duL2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZGVsZXRlIHNlY3Rpb24vaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC90b2dnbGUgdG8gdHdvIGNvbHVtbiBsYXlvdXQvaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBwcm9wZXIgcm9sZSBmb3IgZXJyb3IgbWVzc2FnZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hFcnJvcignVGVzdCBlcnJvcicpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGFsZXJ0ID0gc2NyZWVuLmdldEJ5Um9sZSgnYWxlcnQnKTtcbiAgICAgICAgZXhwZWN0KGFsZXJ0KS50b0hhdmVUZXh0Q29udGVudCgnVGVzdCBlcnJvcicpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQga2V5Ym9hcmQgbmF2aWdhdGlvbiBmb3IgZHJhZ2dhYmxlIHNlY3Rpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1NlY3Rpb24sIG1vY2tUd29Db2x1bW5TZWN0aW9uXSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHNlY3Rpb25zID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgvI1xcZCsvLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkubWFwKGVsID0+IGVsLmNsb3Nlc3QoJ2RpdltkcmFnZ2FibGU9XCJ0cnVlXCJdJykpO1xuICAgICAgXG4gICAgICBzZWN0aW9ucy5mb3JFYWNoKHNlY3Rpb24gPT4ge1xuICAgICAgICBleHBlY3Qoc2VjdGlvbikudG9IYXZlQXR0cmlidXRlKCdkcmFnZ2FibGUnLCAndHJ1ZScpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiZ2xvYmFsIiwiZmV0Y2giLCJqZXN0IiwiZm4iLCJvcmlnaW5hbENvbmZpcm0iLCJ3aW5kb3ciLCJjb25maXJtIiwiRWxlbWVudCIsInByb3RvdHlwZSIsInNjcm9sbEludG9WaWV3IiwibW9ja1NlY3Rpb24iLCJpZCIsInBhZ2VfdHlwZSIsInBhZ2VfaWQiLCJkaXNwbGF5X29yZGVyIiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRfYXQiLCJjb2x1bW5zIiwic2VjdGlvbl9pZCIsImNvbHVtbl9udW1iZXIiLCJjb250ZW50X3R5cGUiLCJjb250ZW50X2RhdGEiLCJodG1sIiwibW9ja1R3b0NvbHVtblNlY3Rpb24iLCJkZXNjcmliZSIsIm1vY2tPblNhdmUiLCJtb2NrT25DbG9zZSIsImJlZm9yZUVhY2giLCJtb2NrUmV0dXJuVmFsdWUiLCJtb2NrUmVzZXQiLCJjbGVhckFsbE1vY2tzIiwiYWZ0ZXJFYWNoIiwiY2xlYW51cCIsIm1vY2tGZXRjaFN1Y2Nlc3MiLCJkYXRhIiwibW9ja1Jlc29sdmVkVmFsdWVPbmNlIiwib2siLCJqc29uIiwic3VjY2VzcyIsIm1vY2tGZXRjaEVycm9yIiwibWVzc2FnZSIsImVycm9yIiwiaXQiLCJyZW5kZXIiLCJTZWN0aW9uRWRpdG9yIiwicGFnZVR5cGUiLCJwYWdlSWQiLCJvblNhdmUiLCJvbkNsb3NlIiwid2FpdEZvciIsImV4cGVjdCIsInNjcmVlbiIsImdldEJ5Um9sZSIsIm5hbWUiLCJ0b0JlSW5UaGVEb2N1bWVudCIsImFkZEJ1dHRvbiIsImZpcmVFdmVudCIsImNsaWNrIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJvYmplY3RDb250YWluaW5nIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJzdHJpbmdDb250YWluaW5nIiwiZ2V0QnlUZXh0Iiwic2VsZWN0b3IiLCJjcmVhdGVDYWxsIiwibW9jayIsImNhbGxzIiwiZmluZCIsImNhbGwiLCJ0b0JlRGVmaW5lZCIsIkpTT04iLCJwYXJzZSIsInRvSGF2ZUxlbmd0aCIsInRvQmUiLCJtb2NrSW1wbGVtZW50YXRpb25PbmNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwidG9CZURpc2FibGVkIiwibW92ZVVwQnV0dG9ucyIsImdldEFsbEJ5Um9sZSIsIm1vdmVEb3duQnV0dG9ucyIsIm5vdCIsInNlY3Rpb25zIiwiZ2V0QWxsQnlUZXh0IiwiZmlyc3RTZWN0aW9uIiwiY2xvc2VzdCIsInNlY29uZFNlY3Rpb24iLCJkcmFnU3RhcnQiLCJkcmFnT3ZlciIsImRyb3AiLCJjbGFzc05hbWUiLCJ0b0NvbnRhaW4iLCJhbnl0aGluZyIsImxheW91dEJ1dHRvbiIsInRvSGF2ZVRleHRDb250ZW50IiwidXBkYXRlQ2FsbCIsImluY2x1ZGVzIiwibWFwIiwiZWwiLCJmaXJzdFNlY3Rpb25Db250ZW50IiwicXVlcnlTZWxlY3RvciIsInNlY29uZFNlY3Rpb25Db250ZW50IiwiY29sdW1uTGFiZWxzIiwiZW1wdHlTZWN0aW9uIiwicGhvdG9TZWN0aW9uIiwicGhvdG9faWRzIiwicmVmZXJlbmNlU2VjdGlvbiIsInJlZmVyZW5jZXMiLCJ0eXBlIiwiZW1wdHlQaG90b1NlY3Rpb24iLCJkZWxldGVCdXR0b24iLCJkZWxldGVCdXR0b25zIiwiYWxlcnQiLCJzYXZlQnV0dG9uIiwidG9IYXZlQmVlbkNhbGxlZFRpbWVzIiwicHJldmlld0J1dHRvbiIsInF1ZXJ5QnlSb2xlIiwiY2xvc2VCdXR0b24iLCJjbG9zZVByZXZpZXdCdXR0b24iLCJxdWVyeUJ5VGV4dCIsImJhY2tkcm9wIiwicHJldmlld0NvbnRlbnQiLCJsZW5ndGgiLCJ0b0JlR3JlYXRlclRoYW4iLCJmb3JFYWNoIiwic2VjdGlvbiIsInRvSGF2ZUF0dHJpYnV0ZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Q0FVQzs7Ozs7dUJBRTJEOytCQUM5QjtBQUU5QixzQkFBc0I7QUFDdEJBLE9BQU9DLEtBQUssR0FBR0MsS0FBS0MsRUFBRTtBQUV0QixzQkFBc0I7QUFDdEIsTUFBTUMsa0JBQWtCQyxPQUFPQyxPQUFPO0FBRXRDLHNCQUFzQjtBQUN0QkMsUUFBUUMsU0FBUyxDQUFDQyxj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