9db4a150c033a02f2aa1a2f82304d9dd
"use strict";

/* istanbul ignore next */
function cov_2jglnple3y() {
  var path = "/Users/jaron/Desktop/wedding-platform-v2/app/api/guest/rsvp/route.ts";
  var hash = "d138873a682749d53a73ac390911e6156f75866d";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/jaron/Desktop/wedding-platform-v2/app/api/guest/rsvp/route.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 5,
          column: 0
        },
        end: {
          line: 10,
          column: 3
        }
      },
      "2": {
        start: {
          line: 8,
          column: 8
        },
        end: {
          line: 8,
          column: 20
        }
      },
      "3": {
        start: {
          line: 11,
          column: 17
        },
        end: {
          line: 11,
          column: 51
        }
      },
      "4": {
        start: {
          line: 12,
          column: 16
        },
        end: {
          line: 12,
          column: 38
        }
      },
      "5": {
        start: {
          line: 13,
          column: 13
        },
        end: {
          line: 13,
          column: 27
        }
      },
      "6": {
        start: {
          line: 14,
          column: 22
        },
        end: {
          line: 14,
          column: 63
        }
      },
      "7": {
        start: {
          line: 15,
          column: 25
        },
        end: {
          line: 30,
          column: 2
        }
      },
      "8": {
        start: {
          line: 28,
          column: 18
        },
        end: {
          line: 28,
          column: 51
        }
      },
      "9": {
        start: {
          line: 32,
          column: 4
        },
        end: {
          line: 180,
          column: 5
        }
      },
      "10": {
        start: {
          line: 33,
          column: 21
        },
        end: {
          line: 33,
          column: 63
        }
      },
      "11": {
        start: {
          line: 34,
          column: 8
        },
        end: {
          line: 44,
          column: 9
        }
      },
      "12": {
        start: {
          line: 35,
          column: 12
        },
        end: {
          line: 43,
          column: 15
        }
      },
      "13": {
        start: {
          line: 45,
          column: 35
        },
        end: {
          line: 45,
          column: 39
        }
      },
      "14": {
        start: {
          line: 47,
          column: 65
        },
        end: {
          line: 47,
          column: 140
        }
      },
      "15": {
        start: {
          line: 48,
          column: 8
        },
        end: {
          line: 58,
          column: 9
        }
      },
      "16": {
        start: {
          line: 49,
          column: 12
        },
        end: {
          line: 57,
          column: 15
        }
      },
      "17": {
        start: {
          line: 60,
          column: 21
        },
        end: {
          line: 60,
          column: 41
        }
      },
      "18": {
        start: {
          line: 61,
          column: 27
        },
        end: {
          line: 61,
          column: 59
        }
      },
      "19": {
        start: {
          line: 62,
          column: 8
        },
        end: {
          line: 73,
          column: 9
        }
      },
      "20": {
        start: {
          line: 63,
          column: 12
        },
        end: {
          line: 72,
          column: 15
        }
      },
      "21": {
        start: {
          line: 75,
          column: 8
        },
        end: {
          line: 85,
          column: 9
        }
      },
      "22": {
        start: {
          line: 76,
          column: 12
        },
        end: {
          line: 84,
          column: 15
        }
      },
      "23": {
        start: {
          line: 87,
          column: 26
        },
        end: {
          line: 91,
          column: 9
        }
      },
      "24": {
        start: {
          line: 92,
          column: 8
        },
        end: {
          line: 94,
          column: 9
        }
      },
      "25": {
        start: {
          line: 93,
          column: 12
        },
        end: {
          line: 93,
          column: 58
        }
      },
      "26": {
        start: {
          line: 95,
          column: 8
        },
        end: {
          line: 97,
          column: 9
        }
      },
      "27": {
        start: {
          line: 96,
          column: 12
        },
        end: {
          line: 96,
          column: 64
        }
      },
      "28": {
        start: {
          line: 98,
          column: 8
        },
        end: {
          line: 100,
          column: 9
        }
      },
      "29": {
        start: {
          line: 99,
          column: 12
        },
        end: {
          line: 99,
          column: 64
        }
      },
      "30": {
        start: {
          line: 101,
          column: 8
        },
        end: {
          line: 103,
          column: 9
        }
      },
      "31": {
        start: {
          line: 102,
          column: 12
        },
        end: {
          line: 102,
          column: 102
        }
      },
      "32": {
        start: {
          line: 104,
          column: 8
        },
        end: {
          line: 106,
          column: 9
        }
      },
      "33": {
        start: {
          line: 105,
          column: 12
        },
        end: {
          line: 105,
          column: 116
        }
      },
      "34": {
        start: {
          line: 108,
          column: 28
        },
        end: {
          line: 110,
          column: 9
        }
      },
      "35": {
        start: {
          line: 111,
          column: 8
        },
        end: {
          line: 113,
          column: 9
        }
      },
      "36": {
        start: {
          line: 112,
          column: 12
        },
        end: {
          line: 112,
          column: 54
        }
      },
      "37": {
        start: {
          line: 114,
          column: 8
        },
        end: {
          line: 116,
          column: 9
        }
      },
      "38": {
        start: {
          line: 115,
          column: 12
        },
        end: {
          line: 115,
          column: 60
        }
      },
      "39": {
        start: {
          line: 117,
          column: 20
        },
        end: {
          line: 117,
          column: 90
        }
      },
      "40": {
        start: {
          line: 118,
          column: 8
        },
        end: {
          line: 120,
          column: 9
        }
      },
      "41": {
        start: {
          line: 119,
          column: 12
        },
        end: {
          line: 119,
          column: 61
        }
      },
      "42": {
        start: {
          line: 121,
          column: 8
        },
        end: {
          line: 123,
          column: 9
        }
      },
      "43": {
        start: {
          line: 122,
          column: 12
        },
        end: {
          line: 122,
          column: 67
        }
      },
      "44": {
        start: {
          line: 124,
          column: 35
        },
        end: {
          line: 124,
          column: 60
        }
      },
      "45": {
        start: {
          line: 126,
          column: 8
        },
        end: {
          line: 163,
          column: 9
        }
      },
      "46": {
        start: {
          line: 128,
          column: 58
        },
        end: {
          line: 131,
          column: 54
        }
      },
      "47": {
        start: {
          line: 132,
          column: 12
        },
        end: {
          line: 142,
          column: 13
        }
      },
      "48": {
        start: {
          line: 133,
          column: 16
        },
        end: {
          line: 141,
          column: 19
        }
      },
      "49": {
        start: {
          line: 143,
          column: 12
        },
        end: {
          line: 143,
          column: 29
        }
      },
      "50": {
        start: {
          line: 146,
          column: 58
        },
        end: {
          line: 150,
          column: 32
        }
      },
      "51": {
        start: {
          line: 151,
          column: 12
        },
        end: {
          line: 161,
          column: 13
        }
      },
      "52": {
        start: {
          line: 152,
          column: 16
        },
        end: {
          line: 160,
          column: 19
        }
      },
      "53": {
        start: {
          line: 162,
          column: 12
        },
        end: {
          line: 162,
          column: 29
        }
      },
      "54": {
        start: {
          line: 164,
          column: 8
        },
        end: {
          line: 169,
          column: 11
        }
      },
      "55": {
        start: {
          line: 171,
          column: 8
        },
        end: {
          line: 179,
          column: 11
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 7,
            column: 9
          },
          end: {
            line: 7,
            column: 10
          }
        },
        loc: {
          start: {
            line: 7,
            column: 20
          },
          end: {
            line: 9,
            column: 5
          }
        },
        line: 7
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 28,
            column: 10
          },
          end: {
            line: 28,
            column: 11
          }
        },
        loc: {
          start: {
            line: 28,
            column: 18
          },
          end: {
            line: 28,
            column: 51
          }
        },
        line: 28
      },
      "2": {
        name: "POST",
        decl: {
          start: {
            line: 31,
            column: 15
          },
          end: {
            line: 31,
            column: 19
          }
        },
        loc: {
          start: {
            line: 31,
            column: 29
          },
          end: {
            line: 181,
            column: 1
          }
        },
        line: 31
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 28,
            column: 18
          },
          end: {
            line: 28,
            column: 51
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 28,
            column: 18
          },
          end: {
            line: 28,
            column: 31
          }
        }, {
          start: {
            line: 28,
            column: 35
          },
          end: {
            line: 28,
            column: 51
          }
        }],
        line: 28
      },
      "1": {
        loc: {
          start: {
            line: 34,
            column: 8
          },
          end: {
            line: 44,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 34,
            column: 8
          },
          end: {
            line: 44,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 34
      },
      "2": {
        loc: {
          start: {
            line: 48,
            column: 8
          },
          end: {
            line: 58,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 48,
            column: 8
          },
          end: {
            line: 58,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 48
      },
      "3": {
        loc: {
          start: {
            line: 48,
            column: 12
          },
          end: {
            line: 48,
            column: 46
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 48,
            column: 12
          },
          end: {
            line: 48,
            column: 29
          }
        }, {
          start: {
            line: 48,
            column: 33
          },
          end: {
            line: 48,
            column: 46
          }
        }],
        line: 48
      },
      "4": {
        loc: {
          start: {
            line: 62,
            column: 8
          },
          end: {
            line: 73,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 62,
            column: 8
          },
          end: {
            line: 73,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 62
      },
      "5": {
        loc: {
          start: {
            line: 75,
            column: 8
          },
          end: {
            line: 85,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 75,
            column: 8
          },
          end: {
            line: 85,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 75
      },
      "6": {
        loc: {
          start: {
            line: 92,
            column: 8
          },
          end: {
            line: 94,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 92,
            column: 8
          },
          end: {
            line: 94,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 92
      },
      "7": {
        loc: {
          start: {
            line: 95,
            column: 8
          },
          end: {
            line: 97,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 95,
            column: 8
          },
          end: {
            line: 97,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 95
      },
      "8": {
        loc: {
          start: {
            line: 98,
            column: 8
          },
          end: {
            line: 100,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 98,
            column: 8
          },
          end: {
            line: 100,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 98
      },
      "9": {
        loc: {
          start: {
            line: 101,
            column: 8
          },
          end: {
            line: 103,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 101,
            column: 8
          },
          end: {
            line: 103,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 101
      },
      "10": {
        loc: {
          start: {
            line: 104,
            column: 8
          },
          end: {
            line: 106,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 104,
            column: 8
          },
          end: {
            line: 106,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 104
      },
      "11": {
        loc: {
          start: {
            line: 111,
            column: 8
          },
          end: {
            line: 113,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 111,
            column: 8
          },
          end: {
            line: 113,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 111
      },
      "12": {
        loc: {
          start: {
            line: 114,
            column: 8
          },
          end: {
            line: 116,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 114,
            column: 8
          },
          end: {
            line: 116,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 114
      },
      "13": {
        loc: {
          start: {
            line: 118,
            column: 8
          },
          end: {
            line: 120,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 118,
            column: 8
          },
          end: {
            line: 120,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 118
      },
      "14": {
        loc: {
          start: {
            line: 121,
            column: 8
          },
          end: {
            line: 123,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 121,
            column: 8
          },
          end: {
            line: 123,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 121
      },
      "15": {
        loc: {
          start: {
            line: 126,
            column: 8
          },
          end: {
            line: 163,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 126,
            column: 8
          },
          end: {
            line: 163,
            column: 9
          }
        }, {
          start: {
            line: 144,
            column: 15
          },
          end: {
            line: 163,
            column: 9
          }
        }],
        line: 126
      },
      "16": {
        loc: {
          start: {
            line: 132,
            column: 12
          },
          end: {
            line: 142,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 132,
            column: 12
          },
          end: {
            line: 142,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 132
      },
      "17": {
        loc: {
          start: {
            line: 151,
            column: 12
          },
          end: {
            line: 161,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 151,
            column: 12
          },
          end: {
            line: 161,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 151
      },
      "18": {
        loc: {
          start: {
            line: 168,
            column: 20
          },
          end: {
            line: 168,
            column: 40
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 168,
            column: 31
          },
          end: {
            line: 168,
            column: 34
          }
        }, {
          start: {
            line: 168,
            column: 37
          },
          end: {
            line: 168,
            column: 40
          }
        }],
        line: 168
      },
      "19": {
        loc: {
          start: {
            line: 175,
            column: 25
          },
          end: {
            line: 175,
            column: 81
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 175,
            column: 50
          },
          end: {
            line: 175,
            column: 63
          }
        }, {
          start: {
            line: 175,
            column: 66
          },
          end: {
            line: 175,
            column: 81
          }
        }],
        line: 175
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0],
      "18": [0, 0],
      "19": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["/Users/jaron/Desktop/wedding-platform-v2/app/api/guest/rsvp/route.ts"],
      sourcesContent: ["import { getAuthenticatedUser } from '@/lib/apiAuth';\nimport { NextResponse } from 'next/server';\nimport { z } from 'zod';\nimport { sanitizeInput } from '@/utils/sanitization';\n\nconst createRSVPSchema = z.object({\n  guest_id: z.string().uuid(),\n  event_id: z.string().uuid().optional(),\n  activity_id: z.string().uuid().optional(),\n  status: z.enum(['pending', 'attending', 'declined', 'maybe']),\n  guest_count: z.number().int().positive().optional(),\n  dietary_notes: z.string().max(500).optional(),\n  special_requirements: z.string().max(500).optional(),\n}).refine(data => data.event_id || data.activity_id, {\n  message: 'Either event_id or activity_id must be provided',\n});\n\n/**\n * POST /api/guest/rsvp\n * \n * Creates or updates an RSVP for an event or activity.\n * \n * Requirements: 13.6, 6.1-6.8\n */\nexport async function POST(request: Request) {\n  try {\n    const auth = await getAuthenticatedUser();\n    \n    if (!auth) {\n      return NextResponse.json(\n        { success: false, error: { code: 'UNAUTHORIZED', message: 'Authentication required' } },\n        { status: 401 }\n      );\n    }\n\n    const { user, supabase } = auth;\n    \n    // Get current guest\n    const { data: currentGuest, error: currentGuestError } = await supabase\n      .from('guests')\n      .select('id')\n      .eq('email', user.email)\n      .single();\n    \n    if (currentGuestError || !currentGuest) {\n      return NextResponse.json(\n        { success: false, error: { code: 'GUEST_NOT_FOUND', message: 'Guest not found' } },\n        { status: 404 }\n      );\n    }\n    \n    // Parse and validate request body\n    const body = await request.json();\n    const validation = createRSVPSchema.safeParse(body);\n    \n    if (!validation.success) {\n      return NextResponse.json(\n        {\n          success: false,\n          error: {\n            code: 'VALIDATION_ERROR',\n            message: 'Invalid request data',\n            details: validation.error.issues,\n          },\n        },\n        { status: 400 }\n      );\n    }\n    \n    // Verify guest can only RSVP for themselves\n    if (validation.data.guest_id !== currentGuest.id) {\n      return NextResponse.json(\n        {\n          success: false,\n          error: {\n            code: 'FORBIDDEN',\n            message: 'You can only RSVP for yourself',\n          },\n        },\n        { status: 403 }\n      );\n    }\n    \n    // Sanitize input\n    const sanitized: any = {\n      guest_id: validation.data.guest_id,\n      status: validation.data.status,\n      responded_at: new Date().toISOString(),\n    };\n    \n    if (validation.data.event_id) {\n      sanitized.event_id = validation.data.event_id;\n    }\n    if (validation.data.activity_id) {\n      sanitized.activity_id = validation.data.activity_id;\n    }\n    if (validation.data.guest_count) {\n      sanitized.guest_count = validation.data.guest_count;\n    }\n    if (validation.data.dietary_notes) {\n      sanitized.dietary_notes = sanitizeInput(validation.data.dietary_notes);\n    }\n    if (validation.data.special_requirements) {\n      sanitized.special_requirements = sanitizeInput(validation.data.special_requirements);\n    }\n    \n    // Check if RSVP already exists\n    const whereClause: any = { guest_id: sanitized.guest_id };\n    if (sanitized.event_id) {\n      whereClause.event_id = sanitized.event_id;\n    }\n    if (sanitized.activity_id) {\n      whereClause.activity_id = sanitized.activity_id;\n    }\n    \n    let query = supabase.from('rsvps').select('id').eq('guest_id', sanitized.guest_id);\n    \n    if (sanitized.event_id) {\n      query = query.eq('event_id', sanitized.event_id);\n    }\n    if (sanitized.activity_id) {\n      query = query.eq('activity_id', sanitized.activity_id);\n    }\n    \n    const { data: existing } = await query.maybeSingle();\n    \n    let result;\n    if (existing) {\n      // Update existing RSVP\n      const { data: updated, error: updateError } = await supabase\n        .from('rsvps')\n        .update({\n          ...sanitized,\n          updated_at: new Date().toISOString(),\n        })\n        .eq('id', existing.id)\n        .select()\n        .single();\n      \n      if (updateError) {\n        return NextResponse.json(\n          { success: false, error: { code: 'DATABASE_ERROR', message: updateError.message } },\n          { status: 500 }\n        );\n      }\n      \n      result = updated;\n    } else {\n      // Create new RSVP\n      const { data: created, error: createError } = await supabase\n        .from('rsvps')\n        .insert({\n          ...sanitized,\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString(),\n        })\n        .select()\n        .single();\n      \n      if (createError) {\n        return NextResponse.json(\n          { success: false, error: { code: 'DATABASE_ERROR', message: createError.message } },\n          { status: 500 }\n        );\n      }\n      \n      result = created;\n    }\n    \n    return NextResponse.json({ success: true, data: result }, { status: existing ? 200 : 201 });\n  } catch (error) {\n    return NextResponse.json(\n      {\n        success: false,\n        error: {\n          code: 'UNKNOWN_ERROR',\n          message: error instanceof Error ? error.message : 'Unknown error',\n        },\n      },\n      { status: 500 }\n    );\n  }\n}\n"],
      names: ["POST", "createRSVPSchema", "z", "object", "guest_id", "string", "uuid", "event_id", "optional", "activity_id", "status", "enum", "guest_count", "number", "int", "positive", "dietary_notes", "max", "special_requirements", "refine", "data", "message", "request", "auth", "getAuthenticatedUser", "NextResponse", "json", "success", "error", "code", "user", "supabase", "currentGuest", "currentGuestError", "from", "select", "eq", "email", "single", "body", "validation", "safeParse", "details", "issues", "id", "sanitized", "responded_at", "Date", "toISOString", "sanitizeInput", "whereClause", "query", "existing", "maybeSingle", "result", "updated", "updateError", "update", "updated_at", "created", "createError", "insert", "created_at", "Error"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "d138873a682749d53a73ac390911e6156f75866d"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2jglnple3y = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2jglnple3y();
cov_2jglnple3y().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_2jglnple3y().s[1]++;
Object.defineProperty(exports, "POST", {
  enumerable: true,
  get: function () {
    /* istanbul ignore next */
    cov_2jglnple3y().f[0]++;
    cov_2jglnple3y().s[2]++;
    return POST;
  }
});
const _apiAuth =
/* istanbul ignore next */
(cov_2jglnple3y().s[3]++, require("../../../../lib/apiAuth"));
const _server =
/* istanbul ignore next */
(cov_2jglnple3y().s[4]++, require("next/server"));
const _zod =
/* istanbul ignore next */
(cov_2jglnple3y().s[5]++, require("zod"));
const _sanitization =
/* istanbul ignore next */
(cov_2jglnple3y().s[6]++, require("../../../../utils/sanitization"));
const createRSVPSchema =
/* istanbul ignore next */
(cov_2jglnple3y().s[7]++, _zod.z.object({
  guest_id: _zod.z.string().uuid(),
  event_id: _zod.z.string().uuid().optional(),
  activity_id: _zod.z.string().uuid().optional(),
  status: _zod.z.enum(['pending', 'attending', 'declined', 'maybe']),
  guest_count: _zod.z.number().int().positive().optional(),
  dietary_notes: _zod.z.string().max(500).optional(),
  special_requirements: _zod.z.string().max(500).optional()
}).refine(data => {
  /* istanbul ignore next */
  cov_2jglnple3y().f[1]++;
  cov_2jglnple3y().s[8]++;
  return /* istanbul ignore next */(cov_2jglnple3y().b[0][0]++, data.event_id) ||
  /* istanbul ignore next */
  (cov_2jglnple3y().b[0][1]++, data.activity_id);
}, {
  message: 'Either event_id or activity_id must be provided'
}));
async function POST(request) {
  /* istanbul ignore next */
  cov_2jglnple3y().f[2]++;
  cov_2jglnple3y().s[9]++;
  try {
    const auth =
    /* istanbul ignore next */
    (cov_2jglnple3y().s[10]++, await (0, _apiAuth.getAuthenticatedUser)());
    /* istanbul ignore next */
    cov_2jglnple3y().s[11]++;
    if (!auth) {
      /* istanbul ignore next */
      cov_2jglnple3y().b[1][0]++;
      cov_2jglnple3y().s[12]++;
      return _server.NextResponse.json({
        success: false,
        error: {
          code: 'UNAUTHORIZED',
          message: 'Authentication required'
        }
      }, {
        status: 401
      });
    } else
    /* istanbul ignore next */
    {
      cov_2jglnple3y().b[1][1]++;
    }
    const {
      user,
      supabase
    } =
    /* istanbul ignore next */
    (cov_2jglnple3y().s[13]++, auth);
    // Get current guest
    const {
      data: currentGuest,
      error: currentGuestError
    } =
    /* istanbul ignore next */
    (cov_2jglnple3y().s[14]++, await supabase.from('guests').select('id').eq('email', user.email).single());
    /* istanbul ignore next */
    cov_2jglnple3y().s[15]++;
    if (
    /* istanbul ignore next */
    (cov_2jglnple3y().b[3][0]++, currentGuestError) ||
    /* istanbul ignore next */
    (cov_2jglnple3y().b[3][1]++, !currentGuest)) {
      /* istanbul ignore next */
      cov_2jglnple3y().b[2][0]++;
      cov_2jglnple3y().s[16]++;
      return _server.NextResponse.json({
        success: false,
        error: {
          code: 'GUEST_NOT_FOUND',
          message: 'Guest not found'
        }
      }, {
        status: 404
      });
    } else
    /* istanbul ignore next */
    {
      cov_2jglnple3y().b[2][1]++;
    }
    // Parse and validate request body
    const body =
    /* istanbul ignore next */
    (cov_2jglnple3y().s[17]++, await request.json());
    const validation =
    /* istanbul ignore next */
    (cov_2jglnple3y().s[18]++, createRSVPSchema.safeParse(body));
    /* istanbul ignore next */
    cov_2jglnple3y().s[19]++;
    if (!validation.success) {
      /* istanbul ignore next */
      cov_2jglnple3y().b[4][0]++;
      cov_2jglnple3y().s[20]++;
      return _server.NextResponse.json({
        success: false,
        error: {
          code: 'VALIDATION_ERROR',
          message: 'Invalid request data',
          details: validation.error.issues
        }
      }, {
        status: 400
      });
    } else
    /* istanbul ignore next */
    {
      cov_2jglnple3y().b[4][1]++;
    }
    // Verify guest can only RSVP for themselves
    cov_2jglnple3y().s[21]++;
    if (validation.data.guest_id !== currentGuest.id) {
      /* istanbul ignore next */
      cov_2jglnple3y().b[5][0]++;
      cov_2jglnple3y().s[22]++;
      return _server.NextResponse.json({
        success: false,
        error: {
          code: 'FORBIDDEN',
          message: 'You can only RSVP for yourself'
        }
      }, {
        status: 403
      });
    } else
    /* istanbul ignore next */
    {
      cov_2jglnple3y().b[5][1]++;
    }
    // Sanitize input
    const sanitized =
    /* istanbul ignore next */
    (cov_2jglnple3y().s[23]++, {
      guest_id: validation.data.guest_id,
      status: validation.data.status,
      responded_at: new Date().toISOString()
    });
    /* istanbul ignore next */
    cov_2jglnple3y().s[24]++;
    if (validation.data.event_id) {
      /* istanbul ignore next */
      cov_2jglnple3y().b[6][0]++;
      cov_2jglnple3y().s[25]++;
      sanitized.event_id = validation.data.event_id;
    } else
    /* istanbul ignore next */
    {
      cov_2jglnple3y().b[6][1]++;
    }
    cov_2jglnple3y().s[26]++;
    if (validation.data.activity_id) {
      /* istanbul ignore next */
      cov_2jglnple3y().b[7][0]++;
      cov_2jglnple3y().s[27]++;
      sanitized.activity_id = validation.data.activity_id;
    } else
    /* istanbul ignore next */
    {
      cov_2jglnple3y().b[7][1]++;
    }
    cov_2jglnple3y().s[28]++;
    if (validation.data.guest_count) {
      /* istanbul ignore next */
      cov_2jglnple3y().b[8][0]++;
      cov_2jglnple3y().s[29]++;
      sanitized.guest_count = validation.data.guest_count;
    } else
    /* istanbul ignore next */
    {
      cov_2jglnple3y().b[8][1]++;
    }
    cov_2jglnple3y().s[30]++;
    if (validation.data.dietary_notes) {
      /* istanbul ignore next */
      cov_2jglnple3y().b[9][0]++;
      cov_2jglnple3y().s[31]++;
      sanitized.dietary_notes = (0, _sanitization.sanitizeInput)(validation.data.dietary_notes);
    } else
    /* istanbul ignore next */
    {
      cov_2jglnple3y().b[9][1]++;
    }
    cov_2jglnple3y().s[32]++;
    if (validation.data.special_requirements) {
      /* istanbul ignore next */
      cov_2jglnple3y().b[10][0]++;
      cov_2jglnple3y().s[33]++;
      sanitized.special_requirements = (0, _sanitization.sanitizeInput)(validation.data.special_requirements);
    } else
    /* istanbul ignore next */
    {
      cov_2jglnple3y().b[10][1]++;
    }
    // Check if RSVP already exists
    const whereClause =
    /* istanbul ignore next */
    (cov_2jglnple3y().s[34]++, {
      guest_id: sanitized.guest_id
    });
    /* istanbul ignore next */
    cov_2jglnple3y().s[35]++;
    if (sanitized.event_id) {
      /* istanbul ignore next */
      cov_2jglnple3y().b[11][0]++;
      cov_2jglnple3y().s[36]++;
      whereClause.event_id = sanitized.event_id;
    } else
    /* istanbul ignore next */
    {
      cov_2jglnple3y().b[11][1]++;
    }
    cov_2jglnple3y().s[37]++;
    if (sanitized.activity_id) {
      /* istanbul ignore next */
      cov_2jglnple3y().b[12][0]++;
      cov_2jglnple3y().s[38]++;
      whereClause.activity_id = sanitized.activity_id;
    } else
    /* istanbul ignore next */
    {
      cov_2jglnple3y().b[12][1]++;
    }
    let query =
    /* istanbul ignore next */
    (cov_2jglnple3y().s[39]++, supabase.from('rsvps').select('id').eq('guest_id', sanitized.guest_id));
    /* istanbul ignore next */
    cov_2jglnple3y().s[40]++;
    if (sanitized.event_id) {
      /* istanbul ignore next */
      cov_2jglnple3y().b[13][0]++;
      cov_2jglnple3y().s[41]++;
      query = query.eq('event_id', sanitized.event_id);
    } else
    /* istanbul ignore next */
    {
      cov_2jglnple3y().b[13][1]++;
    }
    cov_2jglnple3y().s[42]++;
    if (sanitized.activity_id) {
      /* istanbul ignore next */
      cov_2jglnple3y().b[14][0]++;
      cov_2jglnple3y().s[43]++;
      query = query.eq('activity_id', sanitized.activity_id);
    } else
    /* istanbul ignore next */
    {
      cov_2jglnple3y().b[14][1]++;
    }
    const {
      data: existing
    } =
    /* istanbul ignore next */
    (cov_2jglnple3y().s[44]++, await query.maybeSingle());
    let result;
    /* istanbul ignore next */
    cov_2jglnple3y().s[45]++;
    if (existing) {
      /* istanbul ignore next */
      cov_2jglnple3y().b[15][0]++;
      // Update existing RSVP
      const {
        data: updated,
        error: updateError
      } =
      /* istanbul ignore next */
      (cov_2jglnple3y().s[46]++, await supabase.from('rsvps').update({
        ...sanitized,
        updated_at: new Date().toISOString()
      }).eq('id', existing.id).select().single());
      /* istanbul ignore next */
      cov_2jglnple3y().s[47]++;
      if (updateError) {
        /* istanbul ignore next */
        cov_2jglnple3y().b[16][0]++;
        cov_2jglnple3y().s[48]++;
        return _server.NextResponse.json({
          success: false,
          error: {
            code: 'DATABASE_ERROR',
            message: updateError.message
          }
        }, {
          status: 500
        });
      } else
      /* istanbul ignore next */
      {
        cov_2jglnple3y().b[16][1]++;
      }
      cov_2jglnple3y().s[49]++;
      result = updated;
    } else {
      /* istanbul ignore next */
      cov_2jglnple3y().b[15][1]++;
      // Create new RSVP
      const {
        data: created,
        error: createError
      } =
      /* istanbul ignore next */
      (cov_2jglnple3y().s[50]++, await supabase.from('rsvps').insert({
        ...sanitized,
        created_at: new Date().toISOString(),
        updated_at: new Date().toISOString()
      }).select().single());
      /* istanbul ignore next */
      cov_2jglnple3y().s[51]++;
      if (createError) {
        /* istanbul ignore next */
        cov_2jglnple3y().b[17][0]++;
        cov_2jglnple3y().s[52]++;
        return _server.NextResponse.json({
          success: false,
          error: {
            code: 'DATABASE_ERROR',
            message: createError.message
          }
        }, {
          status: 500
        });
      } else
      /* istanbul ignore next */
      {
        cov_2jglnple3y().b[17][1]++;
      }
      cov_2jglnple3y().s[53]++;
      result = created;
    }
    /* istanbul ignore next */
    cov_2jglnple3y().s[54]++;
    return _server.NextResponse.json({
      success: true,
      data: result
    }, {
      status: existing ?
      /* istanbul ignore next */
      (cov_2jglnple3y().b[18][0]++, 200) :
      /* istanbul ignore next */
      (cov_2jglnple3y().b[18][1]++, 201)
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_2jglnple3y().s[55]++;
    return _server.NextResponse.json({
      success: false,
      error: {
        code: 'UNKNOWN_ERROR',
        message: error instanceof Error ?
        /* istanbul ignore next */
        (cov_2jglnple3y().b[19][0]++, error.message) :
        /* istanbul ignore next */
        (cov_2jglnple3y().b[19][1]++, 'Unknown error')
      }
    }, {
      status: 500
    });
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmpnbG5wbGUzeSIsImFjdHVhbENvdmVyYWdlIiwicyIsIlBPU1QiLCJjcmVhdGVSU1ZQU2NoZW1hIiwiX3pvZCIsInoiLCJvYmplY3QiLCJndWVzdF9pZCIsInN0cmluZyIsInV1aWQiLCJldmVudF9pZCIsIm9wdGlvbmFsIiwiYWN0aXZpdHlfaWQiLCJzdGF0dXMiLCJlbnVtIiwiZ3Vlc3RfY291bnQiLCJudW1iZXIiLCJpbnQiLCJwb3NpdGl2ZSIsImRpZXRhcnlfbm90ZXMiLCJtYXgiLCJzcGVjaWFsX3JlcXVpcmVtZW50cyIsInJlZmluZSIsImRhdGEiLCJmIiwiYiIsIm1lc3NhZ2UiLCJyZXF1ZXN0IiwiYXV0aCIsIl9hcGlBdXRoIiwiZ2V0QXV0aGVudGljYXRlZFVzZXIiLCJfc2VydmVyIiwiTmV4dFJlc3BvbnNlIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsImNvZGUiLCJ1c2VyIiwic3VwYWJhc2UiLCJjdXJyZW50R3Vlc3QiLCJjdXJyZW50R3Vlc3RFcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsImVtYWlsIiwic2luZ2xlIiwiYm9keSIsInZhbGlkYXRpb24iLCJzYWZlUGFyc2UiLCJkZXRhaWxzIiwiaXNzdWVzIiwiaWQiLCJzYW5pdGl6ZWQiLCJyZXNwb25kZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJfc2FuaXRpemF0aW9uIiwic2FuaXRpemVJbnB1dCIsIndoZXJlQ2xhdXNlIiwicXVlcnkiLCJleGlzdGluZyIsIm1heWJlU2luZ2xlIiwicmVzdWx0IiwidXBkYXRlZCIsInVwZGF0ZUVycm9yIiwidXBkYXRlIiwidXBkYXRlZF9hdCIsImNyZWF0ZWQiLCJjcmVhdGVFcnJvciIsImluc2VydCIsImNyZWF0ZWRfYXQiLCJFcnJvciJdLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FwaS9ndWVzdC9yc3ZwL3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEF1dGhlbnRpY2F0ZWRVc2VyIH0gZnJvbSAnQC9saWIvYXBpQXV0aCc7XG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7IHNhbml0aXplSW5wdXQgfSBmcm9tICdAL3V0aWxzL3Nhbml0aXphdGlvbic7XG5cbmNvbnN0IGNyZWF0ZVJTVlBTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGd1ZXN0X2lkOiB6LnN0cmluZygpLnV1aWQoKSxcbiAgZXZlbnRfaWQ6IHouc3RyaW5nKCkudXVpZCgpLm9wdGlvbmFsKCksXG4gIGFjdGl2aXR5X2lkOiB6LnN0cmluZygpLnV1aWQoKS5vcHRpb25hbCgpLFxuICBzdGF0dXM6IHouZW51bShbJ3BlbmRpbmcnLCAnYXR0ZW5kaW5nJywgJ2RlY2xpbmVkJywgJ21heWJlJ10pLFxuICBndWVzdF9jb3VudDogei5udW1iZXIoKS5pbnQoKS5wb3NpdGl2ZSgpLm9wdGlvbmFsKCksXG4gIGRpZXRhcnlfbm90ZXM6IHouc3RyaW5nKCkubWF4KDUwMCkub3B0aW9uYWwoKSxcbiAgc3BlY2lhbF9yZXF1aXJlbWVudHM6IHouc3RyaW5nKCkubWF4KDUwMCkub3B0aW9uYWwoKSxcbn0pLnJlZmluZShkYXRhID0+IGRhdGEuZXZlbnRfaWQgfHwgZGF0YS5hY3Rpdml0eV9pZCwge1xuICBtZXNzYWdlOiAnRWl0aGVyIGV2ZW50X2lkIG9yIGFjdGl2aXR5X2lkIG11c3QgYmUgcHJvdmlkZWQnLFxufSk7XG5cbi8qKlxuICogUE9TVCAvYXBpL2d1ZXN0L3JzdnBcbiAqIFxuICogQ3JlYXRlcyBvciB1cGRhdGVzIGFuIFJTVlAgZm9yIGFuIGV2ZW50IG9yIGFjdGl2aXR5LlxuICogXG4gKiBSZXF1aXJlbWVudHM6IDEzLjYsIDYuMS02LjhcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGF1dGggPSBhd2FpdCBnZXRBdXRoZW50aWNhdGVkVXNlcigpO1xuICAgIFxuICAgIGlmICghYXV0aCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogeyBjb2RlOiAnVU5BVVRIT1JJWkVEJywgbWVzc2FnZTogJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJyB9IH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHVzZXIsIHN1cGFiYXNlIH0gPSBhdXRoO1xuICAgIFxuICAgIC8vIEdldCBjdXJyZW50IGd1ZXN0XG4gICAgY29uc3QgeyBkYXRhOiBjdXJyZW50R3Vlc3QsIGVycm9yOiBjdXJyZW50R3Vlc3RFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdndWVzdHMnKVxuICAgICAgLnNlbGVjdCgnaWQnKVxuICAgICAgLmVxKCdlbWFpbCcsIHVzZXIuZW1haWwpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgXG4gICAgaWYgKGN1cnJlbnRHdWVzdEVycm9yIHx8ICFjdXJyZW50R3Vlc3QpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IHsgY29kZTogJ0dVRVNUX05PVF9GT1VORCcsIG1lc3NhZ2U6ICdHdWVzdCBub3QgZm91bmQnIH0gfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICAvLyBQYXJzZSBhbmQgdmFsaWRhdGUgcmVxdWVzdCBib2R5XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnN0IHZhbGlkYXRpb24gPSBjcmVhdGVSU1ZQU2NoZW1hLnNhZmVQYXJzZShib2R5KTtcbiAgICBcbiAgICBpZiAoIXZhbGlkYXRpb24uc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgIGNvZGU6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIHJlcXVlc3QgZGF0YScsXG4gICAgICAgICAgICBkZXRhaWxzOiB2YWxpZGF0aW9uLmVycm9yLmlzc3VlcyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIC8vIFZlcmlmeSBndWVzdCBjYW4gb25seSBSU1ZQIGZvciB0aGVtc2VsdmVzXG4gICAgaWYgKHZhbGlkYXRpb24uZGF0YS5ndWVzdF9pZCAhPT0gY3VycmVudEd1ZXN0LmlkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgY29kZTogJ0ZPUkJJRERFTicsXG4gICAgICAgICAgICBtZXNzYWdlOiAnWW91IGNhbiBvbmx5IFJTVlAgZm9yIHlvdXJzZWxmJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB7IHN0YXR1czogNDAzIH1cbiAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIC8vIFNhbml0aXplIGlucHV0XG4gICAgY29uc3Qgc2FuaXRpemVkOiBhbnkgPSB7XG4gICAgICBndWVzdF9pZDogdmFsaWRhdGlvbi5kYXRhLmd1ZXN0X2lkLFxuICAgICAgc3RhdHVzOiB2YWxpZGF0aW9uLmRhdGEuc3RhdHVzLFxuICAgICAgcmVzcG9uZGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgfTtcbiAgICBcbiAgICBpZiAodmFsaWRhdGlvbi5kYXRhLmV2ZW50X2lkKSB7XG4gICAgICBzYW5pdGl6ZWQuZXZlbnRfaWQgPSB2YWxpZGF0aW9uLmRhdGEuZXZlbnRfaWQ7XG4gICAgfVxuICAgIGlmICh2YWxpZGF0aW9uLmRhdGEuYWN0aXZpdHlfaWQpIHtcbiAgICAgIHNhbml0aXplZC5hY3Rpdml0eV9pZCA9IHZhbGlkYXRpb24uZGF0YS5hY3Rpdml0eV9pZDtcbiAgICB9XG4gICAgaWYgKHZhbGlkYXRpb24uZGF0YS5ndWVzdF9jb3VudCkge1xuICAgICAgc2FuaXRpemVkLmd1ZXN0X2NvdW50ID0gdmFsaWRhdGlvbi5kYXRhLmd1ZXN0X2NvdW50O1xuICAgIH1cbiAgICBpZiAodmFsaWRhdGlvbi5kYXRhLmRpZXRhcnlfbm90ZXMpIHtcbiAgICAgIHNhbml0aXplZC5kaWV0YXJ5X25vdGVzID0gc2FuaXRpemVJbnB1dCh2YWxpZGF0aW9uLmRhdGEuZGlldGFyeV9ub3Rlcyk7XG4gICAgfVxuICAgIGlmICh2YWxpZGF0aW9uLmRhdGEuc3BlY2lhbF9yZXF1aXJlbWVudHMpIHtcbiAgICAgIHNhbml0aXplZC5zcGVjaWFsX3JlcXVpcmVtZW50cyA9IHNhbml0aXplSW5wdXQodmFsaWRhdGlvbi5kYXRhLnNwZWNpYWxfcmVxdWlyZW1lbnRzKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgUlNWUCBhbHJlYWR5IGV4aXN0c1xuICAgIGNvbnN0IHdoZXJlQ2xhdXNlOiBhbnkgPSB7IGd1ZXN0X2lkOiBzYW5pdGl6ZWQuZ3Vlc3RfaWQgfTtcbiAgICBpZiAoc2FuaXRpemVkLmV2ZW50X2lkKSB7XG4gICAgICB3aGVyZUNsYXVzZS5ldmVudF9pZCA9IHNhbml0aXplZC5ldmVudF9pZDtcbiAgICB9XG4gICAgaWYgKHNhbml0aXplZC5hY3Rpdml0eV9pZCkge1xuICAgICAgd2hlcmVDbGF1c2UuYWN0aXZpdHlfaWQgPSBzYW5pdGl6ZWQuYWN0aXZpdHlfaWQ7XG4gICAgfVxuICAgIFxuICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlLmZyb20oJ3JzdnBzJykuc2VsZWN0KCdpZCcpLmVxKCdndWVzdF9pZCcsIHNhbml0aXplZC5ndWVzdF9pZCk7XG4gICAgXG4gICAgaWYgKHNhbml0aXplZC5ldmVudF9pZCkge1xuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnZXZlbnRfaWQnLCBzYW5pdGl6ZWQuZXZlbnRfaWQpO1xuICAgIH1cbiAgICBpZiAoc2FuaXRpemVkLmFjdGl2aXR5X2lkKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdhY3Rpdml0eV9pZCcsIHNhbml0aXplZC5hY3Rpdml0eV9pZCk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmcgfSA9IGF3YWl0IHF1ZXJ5Lm1heWJlU2luZ2xlKCk7XG4gICAgXG4gICAgbGV0IHJlc3VsdDtcbiAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBSU1ZQXG4gICAgICBjb25zdCB7IGRhdGE6IHVwZGF0ZWQsIGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3JzdnBzJylcbiAgICAgICAgLnVwZGF0ZSh7XG4gICAgICAgICAgLi4uc2FuaXRpemVkLFxuICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSlcbiAgICAgICAgLmVxKCdpZCcsIGV4aXN0aW5nLmlkKVxuICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgLnNpbmdsZSgpO1xuICAgICAgXG4gICAgICBpZiAodXBkYXRlRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiB7IGNvZGU6ICdEQVRBQkFTRV9FUlJPUicsIG1lc3NhZ2U6IHVwZGF0ZUVycm9yLm1lc3NhZ2UgfSB9LFxuICAgICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXN1bHQgPSB1cGRhdGVkO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDcmVhdGUgbmV3IFJTVlBcbiAgICAgIGNvbnN0IHsgZGF0YTogY3JlYXRlZCwgZXJyb3I6IGNyZWF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgncnN2cHMnKVxuICAgICAgICAuaW5zZXJ0KHtcbiAgICAgICAgICAuLi5zYW5pdGl6ZWQsXG4gICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSlcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKTtcbiAgICAgIFxuICAgICAgaWYgKGNyZWF0ZUVycm9yKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogeyBjb2RlOiAnREFUQUJBU0VfRVJST1InLCBtZXNzYWdlOiBjcmVhdGVFcnJvci5tZXNzYWdlIH0gfSxcbiAgICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmVzdWx0ID0gY3JlYXRlZDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH0sIHsgc3RhdHVzOiBleGlzdGluZyA/IDIwMCA6IDIwMSB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdVTktOT1dOX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBTUU7SUFBQUEsY0FBQSxZQUFBQSxDQUFBO01BQUEsT0FBQUMsY0FBQTtJQUFBO0VBQUE7RUFBQSxPQUFBQSxjQUFBO0FBQUE7QUFBQUQsY0FBQTtBQUFBQSxjQUFBLEdBQUFFLENBQUE7Ozs7OzsrQkFrQm9COzs7Ozs7V0FBQUMsSUFBQTs7Ozs7a0NBeEJlOzs7a0NBQ1I7OztrQ0FDWDs7O2tDQUNZO0FBRTlCLE1BQU1DLGdCQUFBO0FBQUE7QUFBQSxDQUFBSixjQUFBLEdBQUFFLENBQUEsT0FBbUJHLElBQUEsQ0FBQUMsQ0FBQyxDQUFDQyxNQUFNLENBQUM7RUFDaENDLFFBQUEsRUFBVUgsSUFBQSxDQUFBQyxDQUFDLENBQUNHLE1BQU0sR0FBR0MsSUFBSTtFQUN6QkMsUUFBQSxFQUFVTixJQUFBLENBQUFDLENBQUMsQ0FBQ0csTUFBTSxHQUFHQyxJQUFJLEdBQUdFLFFBQVE7RUFDcENDLFdBQUEsRUFBYVIsSUFBQSxDQUFBQyxDQUFDLENBQUNHLE1BQU0sR0FBR0MsSUFBSSxHQUFHRSxRQUFRO0VBQ3ZDRSxNQUFBLEVBQVFULElBQUEsQ0FBQUMsQ0FBQyxDQUFDUyxJQUFJLENBQUMsQ0FBQyxXQUFXLGFBQWEsWUFBWSxRQUFRO0VBQzVEQyxXQUFBLEVBQWFYLElBQUEsQ0FBQUMsQ0FBQyxDQUFDVyxNQUFNLEdBQUdDLEdBQUcsR0FBR0MsUUFBUSxHQUFHUCxRQUFRO0VBQ2pEUSxhQUFBLEVBQWVmLElBQUEsQ0FBQUMsQ0FBQyxDQUFDRyxNQUFNLEdBQUdZLEdBQUcsQ0FBQyxLQUFLVCxRQUFRO0VBQzNDVSxvQkFBQSxFQUFzQmpCLElBQUEsQ0FBQUMsQ0FBQyxDQUFDRyxNQUFNLEdBQUdZLEdBQUcsQ0FBQyxLQUFLVCxRQUFRO0FBQ3BELEdBQUdXLE1BQU0sQ0FBQ0MsSUFBQSxJQUFRO0VBQUE7RUFBQXhCLGNBQUEsR0FBQXlCLENBQUE7RUFBQXpCLGNBQUEsR0FBQUUsQ0FBQTtFQUFBLGtDQUFBRixjQUFBLEdBQUEwQixDQUFBLFVBQUFGLElBQUEsQ0FBS2IsUUFBUTtFQUFBO0VBQUEsQ0FBQVgsY0FBQSxHQUFBMEIsQ0FBQSxVQUFJRixJQUFBLENBQUtYLFdBQVc7QUFBWCxDQUFXLEVBQUU7RUFDbkRjLE9BQUEsRUFBUztBQUNYO0FBU08sZUFBZXhCLEtBQUt5QixPQUFnQjtFQUFBO0VBQUE1QixjQUFBLEdBQUF5QixDQUFBO0VBQUF6QixjQUFBLEdBQUFFLENBQUE7RUFDekMsSUFBSTtJQUNGLE1BQU0yQixJQUFBO0lBQUE7SUFBQSxDQUFBN0IsY0FBQSxHQUFBRSxDQUFBLFFBQU8sTUFBTSxJQUFBNEIsUUFBQSxDQUFBQyxvQkFBb0I7SUFBQTtJQUFBL0IsY0FBQSxHQUFBRSxDQUFBO0lBRXZDLElBQUksQ0FBQzJCLElBQUEsRUFBTTtNQUFBO01BQUE3QixjQUFBLEdBQUEwQixDQUFBO01BQUExQixjQUFBLEdBQUFFLENBQUE7TUFDVCxPQUFPOEIsT0FBQSxDQUFBQyxZQUFZLENBQUNDLElBQUksQ0FDdEI7UUFBRUMsT0FBQSxFQUFTO1FBQU9DLEtBQUEsRUFBTztVQUFFQyxJQUFBLEVBQU07VUFBZ0JWLE9BQUEsRUFBUztRQUEwQjtNQUFFLEdBQ3RGO1FBQUViLE1BQUEsRUFBUTtNQUFJO0lBRWxCO0lBQUE7SUFBQTtNQUFBZCxjQUFBLEdBQUEwQixDQUFBO0lBQUE7SUFFQSxNQUFNO01BQUVZLElBQUk7TUFBRUM7SUFBUSxDQUFFO0lBQUE7SUFBQSxDQUFBdkMsY0FBQSxHQUFBRSxDQUFBLFFBQUcyQixJQUFBO0lBRTNCO0lBQ0EsTUFBTTtNQUFFTCxJQUFBLEVBQU1nQixZQUFZO01BQUVKLEtBQUEsRUFBT0s7SUFBaUIsQ0FBRTtJQUFBO0lBQUEsQ0FBQXpDLGNBQUEsR0FBQUUsQ0FBQSxRQUFHLE1BQU1xQyxRQUFBLENBQzVERyxJQUFJLENBQUMsVUFDTEMsTUFBTSxDQUFDLE1BQ1BDLEVBQUUsQ0FBQyxTQUFTTixJQUFBLENBQUtPLEtBQUssRUFDdEJDLE1BQU07SUFBQTtJQUFBOUMsY0FBQSxHQUFBRSxDQUFBO0lBRVQ7SUFBSTtJQUFBLENBQUFGLGNBQUEsR0FBQTBCLENBQUEsVUFBQWUsaUJBQUE7SUFBQTtJQUFBLENBQUF6QyxjQUFBLEdBQUEwQixDQUFBLFVBQXFCLENBQUNjLFlBQUEsR0FBYztNQUFBO01BQUF4QyxjQUFBLEdBQUEwQixDQUFBO01BQUExQixjQUFBLEdBQUFFLENBQUE7TUFDdEMsT0FBTzhCLE9BQUEsQ0FBQUMsWUFBWSxDQUFDQyxJQUFJLENBQ3RCO1FBQUVDLE9BQUEsRUFBUztRQUFPQyxLQUFBLEVBQU87VUFBRUMsSUFBQSxFQUFNO1VBQW1CVixPQUFBLEVBQVM7UUFBa0I7TUFBRSxHQUNqRjtRQUFFYixNQUFBLEVBQVE7TUFBSTtJQUVsQjtJQUFBO0lBQUE7TUFBQWQsY0FBQSxHQUFBMEIsQ0FBQTtJQUFBO0lBRUE7SUFDQSxNQUFNcUIsSUFBQTtJQUFBO0lBQUEsQ0FBQS9DLGNBQUEsR0FBQUUsQ0FBQSxRQUFPLE1BQU0wQixPQUFBLENBQVFNLElBQUk7SUFDL0IsTUFBTWMsVUFBQTtJQUFBO0lBQUEsQ0FBQWhELGNBQUEsR0FBQUUsQ0FBQSxRQUFhRSxnQkFBQSxDQUFpQjZDLFNBQVMsQ0FBQ0YsSUFBQTtJQUFBO0lBQUEvQyxjQUFBLEdBQUFFLENBQUE7SUFFOUMsSUFBSSxDQUFDOEMsVUFBQSxDQUFXYixPQUFPLEVBQUU7TUFBQTtNQUFBbkMsY0FBQSxHQUFBMEIsQ0FBQTtNQUFBMUIsY0FBQSxHQUFBRSxDQUFBO01BQ3ZCLE9BQU84QixPQUFBLENBQUFDLFlBQVksQ0FBQ0MsSUFBSSxDQUN0QjtRQUNFQyxPQUFBLEVBQVM7UUFDVEMsS0FBQSxFQUFPO1VBQ0xDLElBQUEsRUFBTTtVQUNOVixPQUFBLEVBQVM7VUFDVHVCLE9BQUEsRUFBU0YsVUFBQSxDQUFXWixLQUFLLENBQUNlO1FBQzVCO01BQ0YsR0FDQTtRQUFFckMsTUFBQSxFQUFRO01BQUk7SUFFbEI7SUFBQTtJQUFBO01BQUFkLGNBQUEsR0FBQTBCLENBQUE7SUFBQTtJQUVBO0lBQUExQixjQUFBLEdBQUFFLENBQUE7SUFDQSxJQUFJOEMsVUFBQSxDQUFXeEIsSUFBSSxDQUFDaEIsUUFBUSxLQUFLZ0MsWUFBQSxDQUFhWSxFQUFFLEVBQUU7TUFBQTtNQUFBcEQsY0FBQSxHQUFBMEIsQ0FBQTtNQUFBMUIsY0FBQSxHQUFBRSxDQUFBO01BQ2hELE9BQU84QixPQUFBLENBQUFDLFlBQVksQ0FBQ0MsSUFBSSxDQUN0QjtRQUNFQyxPQUFBLEVBQVM7UUFDVEMsS0FBQSxFQUFPO1VBQ0xDLElBQUEsRUFBTTtVQUNOVixPQUFBLEVBQVM7UUFDWDtNQUNGLEdBQ0E7UUFBRWIsTUFBQSxFQUFRO01BQUk7SUFFbEI7SUFBQTtJQUFBO01BQUFkLGNBQUEsR0FBQTBCLENBQUE7SUFBQTtJQUVBO0lBQ0EsTUFBTTJCLFNBQUE7SUFBQTtJQUFBLENBQUFyRCxjQUFBLEdBQUFFLENBQUEsUUFBaUI7TUFDckJNLFFBQUEsRUFBVXdDLFVBQUEsQ0FBV3hCLElBQUksQ0FBQ2hCLFFBQVE7TUFDbENNLE1BQUEsRUFBUWtDLFVBQUEsQ0FBV3hCLElBQUksQ0FBQ1YsTUFBTTtNQUM5QndDLFlBQUEsRUFBYyxJQUFJQyxJQUFBLEdBQU9DLFdBQVc7SUFDdEM7SUFBQTtJQUFBeEQsY0FBQSxHQUFBRSxDQUFBO0lBRUEsSUFBSThDLFVBQUEsQ0FBV3hCLElBQUksQ0FBQ2IsUUFBUSxFQUFFO01BQUE7TUFBQVgsY0FBQSxHQUFBMEIsQ0FBQTtNQUFBMUIsY0FBQSxHQUFBRSxDQUFBO01BQzVCbUQsU0FBQSxDQUFVMUMsUUFBUSxHQUFHcUMsVUFBQSxDQUFXeEIsSUFBSSxDQUFDYixRQUFRO0lBQy9DO0lBQUE7SUFBQTtNQUFBWCxjQUFBLEdBQUEwQixDQUFBO0lBQUE7SUFBQTFCLGNBQUEsR0FBQUUsQ0FBQTtJQUNBLElBQUk4QyxVQUFBLENBQVd4QixJQUFJLENBQUNYLFdBQVcsRUFBRTtNQUFBO01BQUFiLGNBQUEsR0FBQTBCLENBQUE7TUFBQTFCLGNBQUEsR0FBQUUsQ0FBQTtNQUMvQm1ELFNBQUEsQ0FBVXhDLFdBQVcsR0FBR21DLFVBQUEsQ0FBV3hCLElBQUksQ0FBQ1gsV0FBVztJQUNyRDtJQUFBO0lBQUE7TUFBQWIsY0FBQSxHQUFBMEIsQ0FBQTtJQUFBO0lBQUExQixjQUFBLEdBQUFFLENBQUE7SUFDQSxJQUFJOEMsVUFBQSxDQUFXeEIsSUFBSSxDQUFDUixXQUFXLEVBQUU7TUFBQTtNQUFBaEIsY0FBQSxHQUFBMEIsQ0FBQTtNQUFBMUIsY0FBQSxHQUFBRSxDQUFBO01BQy9CbUQsU0FBQSxDQUFVckMsV0FBVyxHQUFHZ0MsVUFBQSxDQUFXeEIsSUFBSSxDQUFDUixXQUFXO0lBQ3JEO0lBQUE7SUFBQTtNQUFBaEIsY0FBQSxHQUFBMEIsQ0FBQTtJQUFBO0lBQUExQixjQUFBLEdBQUFFLENBQUE7SUFDQSxJQUFJOEMsVUFBQSxDQUFXeEIsSUFBSSxDQUFDSixhQUFhLEVBQUU7TUFBQTtNQUFBcEIsY0FBQSxHQUFBMEIsQ0FBQTtNQUFBMUIsY0FBQSxHQUFBRSxDQUFBO01BQ2pDbUQsU0FBQSxDQUFVakMsYUFBYSxHQUFHLElBQUFxQyxhQUFBLENBQUFDLGFBQWEsRUFBQ1YsVUFBQSxDQUFXeEIsSUFBSSxDQUFDSixhQUFhO0lBQ3ZFO0lBQUE7SUFBQTtNQUFBcEIsY0FBQSxHQUFBMEIsQ0FBQTtJQUFBO0lBQUExQixjQUFBLEdBQUFFLENBQUE7SUFDQSxJQUFJOEMsVUFBQSxDQUFXeEIsSUFBSSxDQUFDRixvQkFBb0IsRUFBRTtNQUFBO01BQUF0QixjQUFBLEdBQUEwQixDQUFBO01BQUExQixjQUFBLEdBQUFFLENBQUE7TUFDeENtRCxTQUFBLENBQVUvQixvQkFBb0IsR0FBRyxJQUFBbUMsYUFBQSxDQUFBQyxhQUFhLEVBQUNWLFVBQUEsQ0FBV3hCLElBQUksQ0FBQ0Ysb0JBQW9CO0lBQ3JGO0lBQUE7SUFBQTtNQUFBdEIsY0FBQSxHQUFBMEIsQ0FBQTtJQUFBO0lBRUE7SUFDQSxNQUFNaUMsV0FBQTtJQUFBO0lBQUEsQ0FBQTNELGNBQUEsR0FBQUUsQ0FBQSxRQUFtQjtNQUFFTSxRQUFBLEVBQVU2QyxTQUFBLENBQVU3QztJQUFTO0lBQUE7SUFBQVIsY0FBQSxHQUFBRSxDQUFBO0lBQ3hELElBQUltRCxTQUFBLENBQVUxQyxRQUFRLEVBQUU7TUFBQTtNQUFBWCxjQUFBLEdBQUEwQixDQUFBO01BQUExQixjQUFBLEdBQUFFLENBQUE7TUFDdEJ5RCxXQUFBLENBQVloRCxRQUFRLEdBQUcwQyxTQUFBLENBQVUxQyxRQUFRO0lBQzNDO0lBQUE7SUFBQTtNQUFBWCxjQUFBLEdBQUEwQixDQUFBO0lBQUE7SUFBQTFCLGNBQUEsR0FBQUUsQ0FBQTtJQUNBLElBQUltRCxTQUFBLENBQVV4QyxXQUFXLEVBQUU7TUFBQTtNQUFBYixjQUFBLEdBQUEwQixDQUFBO01BQUExQixjQUFBLEdBQUFFLENBQUE7TUFDekJ5RCxXQUFBLENBQVk5QyxXQUFXLEdBQUd3QyxTQUFBLENBQVV4QyxXQUFXO0lBQ2pEO0lBQUE7SUFBQTtNQUFBYixjQUFBLEdBQUEwQixDQUFBO0lBQUE7SUFFQSxJQUFJa0MsS0FBQTtJQUFBO0lBQUEsQ0FBQTVELGNBQUEsR0FBQUUsQ0FBQSxRQUFRcUMsUUFBQSxDQUFTRyxJQUFJLENBQUMsU0FBU0MsTUFBTSxDQUFDLE1BQU1DLEVBQUUsQ0FBQyxZQUFZUyxTQUFBLENBQVU3QyxRQUFRO0lBQUE7SUFBQVIsY0FBQSxHQUFBRSxDQUFBO0lBRWpGLElBQUltRCxTQUFBLENBQVUxQyxRQUFRLEVBQUU7TUFBQTtNQUFBWCxjQUFBLEdBQUEwQixDQUFBO01BQUExQixjQUFBLEdBQUFFLENBQUE7TUFDdEIwRCxLQUFBLEdBQVFBLEtBQUEsQ0FBTWhCLEVBQUUsQ0FBQyxZQUFZUyxTQUFBLENBQVUxQyxRQUFRO0lBQ2pEO0lBQUE7SUFBQTtNQUFBWCxjQUFBLEdBQUEwQixDQUFBO0lBQUE7SUFBQTFCLGNBQUEsR0FBQUUsQ0FBQTtJQUNBLElBQUltRCxTQUFBLENBQVV4QyxXQUFXLEVBQUU7TUFBQTtNQUFBYixjQUFBLEdBQUEwQixDQUFBO01BQUExQixjQUFBLEdBQUFFLENBQUE7TUFDekIwRCxLQUFBLEdBQVFBLEtBQUEsQ0FBTWhCLEVBQUUsQ0FBQyxlQUFlUyxTQUFBLENBQVV4QyxXQUFXO0lBQ3ZEO0lBQUE7SUFBQTtNQUFBYixjQUFBLEdBQUEwQixDQUFBO0lBQUE7SUFFQSxNQUFNO01BQUVGLElBQUEsRUFBTXFDO0lBQVEsQ0FBRTtJQUFBO0lBQUEsQ0FBQTdELGNBQUEsR0FBQUUsQ0FBQSxRQUFHLE1BQU0wRCxLQUFBLENBQU1FLFdBQVc7SUFFbEQsSUFBSUMsTUFBQTtJQUFBO0lBQUEvRCxjQUFBLEdBQUFFLENBQUE7SUFDSixJQUFJMkQsUUFBQSxFQUFVO01BQUE7TUFBQTdELGNBQUEsR0FBQTBCLENBQUE7TUFDWjtNQUNBLE1BQU07UUFBRUYsSUFBQSxFQUFNd0MsT0FBTztRQUFFNUIsS0FBQSxFQUFPNkI7TUFBVyxDQUFFO01BQUE7TUFBQSxDQUFBakUsY0FBQSxHQUFBRSxDQUFBLFFBQUcsTUFBTXFDLFFBQUEsQ0FDakRHLElBQUksQ0FBQyxTQUNMd0IsTUFBTSxDQUFDO1FBQ04sR0FBR2IsU0FBUztRQUNaYyxVQUFBLEVBQVksSUFBSVosSUFBQSxHQUFPQyxXQUFXO01BQ3BDLEdBQ0NaLEVBQUUsQ0FBQyxNQUFNaUIsUUFBQSxDQUFTVCxFQUFFLEVBQ3BCVCxNQUFNLEdBQ05HLE1BQU07TUFBQTtNQUFBOUMsY0FBQSxHQUFBRSxDQUFBO01BRVQsSUFBSStELFdBQUEsRUFBYTtRQUFBO1FBQUFqRSxjQUFBLEdBQUEwQixDQUFBO1FBQUExQixjQUFBLEdBQUFFLENBQUE7UUFDZixPQUFPOEIsT0FBQSxDQUFBQyxZQUFZLENBQUNDLElBQUksQ0FDdEI7VUFBRUMsT0FBQSxFQUFTO1VBQU9DLEtBQUEsRUFBTztZQUFFQyxJQUFBLEVBQU07WUFBa0JWLE9BQUEsRUFBU3NDLFdBQUEsQ0FBWXRDO1VBQVE7UUFBRSxHQUNsRjtVQUFFYixNQUFBLEVBQVE7UUFBSTtNQUVsQjtNQUFBO01BQUE7UUFBQWQsY0FBQSxHQUFBMEIsQ0FBQTtNQUFBO01BQUExQixjQUFBLEdBQUFFLENBQUE7TUFFQTZELE1BQUEsR0FBU0MsT0FBQTtJQUNYLE9BQU87TUFBQTtNQUFBaEUsY0FBQSxHQUFBMEIsQ0FBQTtNQUNMO01BQ0EsTUFBTTtRQUFFRixJQUFBLEVBQU00QyxPQUFPO1FBQUVoQyxLQUFBLEVBQU9pQztNQUFXLENBQUU7TUFBQTtNQUFBLENBQUFyRSxjQUFBLEdBQUFFLENBQUEsUUFBRyxNQUFNcUMsUUFBQSxDQUNqREcsSUFBSSxDQUFDLFNBQ0w0QixNQUFNLENBQUM7UUFDTixHQUFHakIsU0FBUztRQUNaa0IsVUFBQSxFQUFZLElBQUloQixJQUFBLEdBQU9DLFdBQVc7UUFDbENXLFVBQUEsRUFBWSxJQUFJWixJQUFBLEdBQU9DLFdBQVc7TUFDcEMsR0FDQ2IsTUFBTSxHQUNORyxNQUFNO01BQUE7TUFBQTlDLGNBQUEsR0FBQUUsQ0FBQTtNQUVULElBQUltRSxXQUFBLEVBQWE7UUFBQTtRQUFBckUsY0FBQSxHQUFBMEIsQ0FBQTtRQUFBMUIsY0FBQSxHQUFBRSxDQUFBO1FBQ2YsT0FBTzhCLE9BQUEsQ0FBQUMsWUFBWSxDQUFDQyxJQUFJLENBQ3RCO1VBQUVDLE9BQUEsRUFBUztVQUFPQyxLQUFBLEVBQU87WUFBRUMsSUFBQSxFQUFNO1lBQWtCVixPQUFBLEVBQVMwQyxXQUFBLENBQVkxQztVQUFRO1FBQUUsR0FDbEY7VUFBRWIsTUFBQSxFQUFRO1FBQUk7TUFFbEI7TUFBQTtNQUFBO1FBQUFkLGNBQUEsR0FBQTBCLENBQUE7TUFBQTtNQUFBMUIsY0FBQSxHQUFBRSxDQUFBO01BRUE2RCxNQUFBLEdBQVNLLE9BQUE7SUFDWDtJQUFBO0lBQUFwRSxjQUFBLEdBQUFFLENBQUE7SUFFQSxPQUFPOEIsT0FBQSxDQUFBQyxZQUFZLENBQUNDLElBQUksQ0FBQztNQUFFQyxPQUFBLEVBQVM7TUFBTVgsSUFBQSxFQUFNdUM7SUFBTyxHQUFHO01BQUVqRCxNQUFBLEVBQVErQyxRQUFBO01BQUE7TUFBQSxDQUFBN0QsY0FBQSxHQUFBMEIsQ0FBQSxXQUFXO01BQUE7TUFBQSxDQUFBMUIsY0FBQSxHQUFBMEIsQ0FBQSxXQUFNO0lBQUk7RUFDM0YsRUFBRSxPQUFPVSxLQUFBLEVBQU87SUFBQTtJQUFBcEMsY0FBQSxHQUFBRSxDQUFBO0lBQ2QsT0FBTzhCLE9BQUEsQ0FBQUMsWUFBWSxDQUFDQyxJQUFJLENBQ3RCO01BQ0VDLE9BQUEsRUFBUztNQUNUQyxLQUFBLEVBQU87UUFDTEMsSUFBQSxFQUFNO1FBQ05WLE9BQUEsRUFBU1MsS0FBQSxZQUFpQm9DLEtBQUE7UUFBQTtRQUFBLENBQUF4RSxjQUFBLEdBQUEwQixDQUFBLFdBQVFVLEtBQUEsQ0FBTVQsT0FBTztRQUFBO1FBQUEsQ0FBQTNCLGNBQUEsR0FBQTBCLENBQUEsV0FBRztNQUNwRDtJQUNGLEdBQ0E7TUFBRVosTUFBQSxFQUFRO0lBQUk7RUFFbEI7QUFDRiIsImlnbm9yZUxpc3QiOltdfQ==