4b6aad2610d5958931160e60a65ee4a6
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "ReferenceLookup", {
    enumerable: true,
    get: function() {
        return ReferenceLookup;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const ENTITY_TYPE_LABELS = {
    event: 'EVENT',
    activity: 'ACTIVITY',
    accommodation: 'ACCOMMODATION',
    room_type: 'ROOM TYPE',
    content_page: 'PAGE'
};
const ENTITY_TYPE_COLORS = {
    event: 'bg-blue-100 text-blue-800',
    activity: 'bg-green-100 text-green-800',
    accommodation: 'bg-purple-100 text-purple-800',
    room_type: 'bg-orange-100 text-orange-800',
    content_page: 'bg-gray-100 text-gray-800'
};
function ReferenceLookup({ entityTypes, onSelect, placeholder = 'Search for events, activities, pages...', excludeIds = [] }) {
    const [query, setQuery] = (0, _react.useState)('');
    const [results, setResults] = (0, _react.useState)([]);
    const [loading, setLoading] = (0, _react.useState)(false);
    const [isOpen, setIsOpen] = (0, _react.useState)(false);
    const [selectedIndex, setSelectedIndex] = (0, _react.useState)(-1);
    const [hoveredResult, setHoveredResult] = (0, _react.useState)(null);
    const inputRef = (0, _react.useRef)(null);
    const dropdownRef = (0, _react.useRef)(null);
    const debounceTimerRef = (0, _react.useRef)(null);
    // Debounced search function
    const performSearch = (0, _react.useCallback)(async (searchQuery)=>{
        if (!searchQuery.trim()) {
            setResults([]);
            setIsOpen(false);
            return;
        }
        setLoading(true);
        try {
            const typeParam = entityTypes.join(',');
            const response = await fetch(`/api/admin/references/search?q=${encodeURIComponent(searchQuery)}&type=${typeParam}`);
            const data = await response.json();
            if (data.success) {
                // Filter out excluded IDs
                const filteredResults = data.data.results.filter((result)=>!excludeIds.includes(result.id));
                setResults(filteredResults);
                setIsOpen(filteredResults.length > 0);
                setSelectedIndex(-1);
            } else {
                setResults([]);
                setIsOpen(false);
            }
        } catch (error) {
            console.error('Search error:', error);
            setResults([]);
            setIsOpen(false);
        } finally{
            setLoading(false);
        }
    }, [
        entityTypes,
        excludeIds
    ]);
    // Handle input change with debouncing
    const handleInputChange = (0, _react.useCallback)((e)=>{
        const value = e.target.value;
        setQuery(value);
        // Clear existing timer
        if (debounceTimerRef.current) {
            clearTimeout(debounceTimerRef.current);
        }
        // Set new timer for debounced search (300ms)
        debounceTimerRef.current = setTimeout(()=>{
            performSearch(value);
        }, 300);
    }, [
        performSearch
    ]);
    // Handle result selection
    const handleSelect = (0, _react.useCallback)((result)=>{
        onSelect({
            id: result.id,
            type: result.type,
            name: result.name,
            slug: result.slug
        });
        setQuery('');
        setResults([]);
        setIsOpen(false);
        setSelectedIndex(-1);
    }, [
        onSelect
    ]);
    // Keyboard navigation
    const handleKeyDown = (0, _react.useCallback)((e)=>{
        if (!isOpen || results.length === 0) {
            if (e.key === 'Escape') {
                setQuery('');
                setResults([]);
                setIsOpen(false);
            }
            return;
        }
        switch(e.key){
            case 'ArrowDown':
                e.preventDefault();
                setSelectedIndex((prev)=>prev < results.length - 1 ? prev + 1 : prev);
                break;
            case 'ArrowUp':
                e.preventDefault();
                setSelectedIndex((prev)=>prev > 0 ? prev - 1 : -1);
                break;
            case 'Enter':
                e.preventDefault();
                if (selectedIndex >= 0 && selectedIndex < results.length) {
                    handleSelect(results[selectedIndex]);
                }
                break;
            case 'Escape':
                e.preventDefault();
                setQuery('');
                setResults([]);
                setIsOpen(false);
                setSelectedIndex(-1);
                break;
        }
    }, [
        isOpen,
        results,
        selectedIndex,
        handleSelect
    ]);
    // Close dropdown when clicking outside
    (0, _react.useEffect)(()=>{
        const handleClickOutside = (event)=>{
            if (dropdownRef.current && !dropdownRef.current.contains(event.target) && inputRef.current && !inputRef.current.contains(event.target)) {
                setIsOpen(false);
                setSelectedIndex(-1);
            }
        };
        document.addEventListener('mousedown', handleClickOutside);
        return ()=>document.removeEventListener('mousedown', handleClickOutside);
    }, []);
    // Cleanup debounce timer on unmount
    (0, _react.useEffect)(()=>{
        return ()=>{
            if (debounceTimerRef.current) {
                clearTimeout(debounceTimerRef.current);
            }
        };
    }, []);
    // Scroll selected item into view
    (0, _react.useEffect)(()=>{
        if (selectedIndex >= 0 && dropdownRef.current) {
            const selectedElement = dropdownRef.current.querySelector(`[data-index="${selectedIndex}"]`);
            if (selectedElement) {
                selectedElement.scrollIntoView({
                    block: 'nearest',
                    behavior: 'smooth'
                });
            }
        }
    }, [
        selectedIndex
    ]);
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: "relative w-full",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "relative",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                        ref: inputRef,
                        type: "text",
                        value: query,
                        onChange: handleInputChange,
                        onKeyDown: handleKeyDown,
                        onFocus: ()=>{
                            if (results.length > 0) {
                                setIsOpen(true);
                            }
                        },
                        placeholder: placeholder,
                        className: "w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                        "aria-label": "Search for references",
                        "aria-autocomplete": "list",
                        "aria-controls": "reference-results",
                        "aria-expanded": isOpen,
                        role: "combobox"
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",
                        children: loading ? /*#__PURE__*/ (0, _jsxruntime.jsxs)("svg", {
                            className: "animate-spin h-5 w-5 text-gray-400",
                            xmlns: "http://www.w3.org/2000/svg",
                            fill: "none",
                            viewBox: "0 0 24 24",
                            "aria-hidden": "true",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("circle", {
                                    className: "opacity-25",
                                    cx: "12",
                                    cy: "12",
                                    r: "10",
                                    stroke: "currentColor",
                                    strokeWidth: "4"
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("path", {
                                    className: "opacity-75",
                                    fill: "currentColor",
                                    d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                                })
                            ]
                        }) : /*#__PURE__*/ (0, _jsxruntime.jsx)("svg", {
                            className: "h-5 w-5 text-gray-400",
                            xmlns: "http://www.w3.org/2000/svg",
                            fill: "none",
                            viewBox: "0 0 24 24",
                            stroke: "currentColor",
                            "aria-hidden": "true",
                            children: /*#__PURE__*/ (0, _jsxruntime.jsx)("path", {
                                strokeLinecap: "round",
                                strokeLinejoin: "round",
                                strokeWidth: 2,
                                d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                            })
                        })
                    })
                ]
            }),
            isOpen && results.length > 0 && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                ref: dropdownRef,
                id: "reference-results",
                role: "listbox",
                className: "absolute z-50 w-full mt-2 bg-white border border-gray-300 rounded-lg shadow-lg max-h-96 overflow-y-auto",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "px-4 py-2 bg-gray-50 border-b border-gray-200 text-sm text-gray-600 font-medium",
                        children: [
                            "Search Results (",
                            results.length,
                            ")"
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("ul", {
                        className: "py-1",
                        children: results.map((result, index)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("li", {
                                "data-index": index,
                                role: "option",
                                "aria-selected": index === selectedIndex,
                                className: `px-4 py-3 cursor-pointer transition-colors ${index === selectedIndex ? 'bg-blue-50 border-l-4 border-blue-500' : 'hover:bg-gray-50 border-l-4 border-transparent'}`,
                                onClick: ()=>handleSelect(result),
                                onMouseEnter: ()=>setHoveredResult(result),
                                onMouseLeave: ()=>setHoveredResult(null),
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                        className: "flex items-start gap-3",
                                        children: [
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                className: `inline-flex items-center px-2 py-1 rounded text-xs font-semibold ${ENTITY_TYPE_COLORS[result.type] || 'bg-gray-100 text-gray-800'}`,
                                                children: ENTITY_TYPE_LABELS[result.type] || result.type.toUpperCase()
                                            }),
                                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                className: "flex-1 min-w-0",
                                                children: [
                                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                                        className: "font-medium text-gray-900 truncate",
                                                        children: result.name
                                                    }),
                                                    result.preview && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                        className: "text-sm text-gray-600 mt-1 flex items-center gap-2",
                                                        children: [
                                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                                children: "â†’"
                                                            }),
                                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                                className: "truncate",
                                                                children: result.preview
                                                            })
                                                        ]
                                                    }),
                                                    result.slug && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                        className: "text-xs text-gray-500 mt-1",
                                                        children: [
                                                            "/",
                                                            result.slug
                                                        ]
                                                    }),
                                                    result.status && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                                        className: "text-xs text-gray-500 mt-1 capitalize",
                                                        children: result.status
                                                    })
                                                ]
                                            })
                                        ]
                                    }),
                                    hoveredResult?.id === result.id && result.preview && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                        className: "mt-2 p-2 bg-gray-50 rounded text-sm text-gray-700 border border-gray-200",
                                        children: result.preview
                                    })
                                ]
                            }, result.id))
                    })
                ]
            }),
            isOpen && results.length === 0 && query.trim() && !loading && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "absolute z-50 w-full mt-2 bg-white border border-gray-300 rounded-lg shadow-lg p-4 text-center text-gray-500",
                role: "status",
                children: [
                    'No results found for "',
                    query,
                    '"'
                ]
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9hZG1pbi9SZWZlcmVuY2VMb29rdXAudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2ssIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcblxuaW50ZXJmYWNlIFJlZmVyZW5jZSB7XG4gIGlkOiBzdHJpbmc7XG4gIHR5cGU6ICdldmVudCcgfCAnYWN0aXZpdHknIHwgJ2FjY29tbW9kYXRpb24nIHwgJ3Jvb21fdHlwZScgfCAnY29udGVudF9wYWdlJztcbiAgbmFtZTogc3RyaW5nO1xuICBzbHVnPzogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgU2VhcmNoUmVzdWx0IHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICB0eXBlOiBzdHJpbmc7XG4gIHNsdWc/OiBzdHJpbmc7XG4gIHN0YXR1cz86IHN0cmluZztcbiAgcHJldmlldz86IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFJlZmVyZW5jZUxvb2t1cFByb3BzIHtcbiAgZW50aXR5VHlwZXM6IEFycmF5PCdldmVudCcgfCAnYWN0aXZpdHknIHwgJ2FjY29tbW9kYXRpb24nIHwgJ3Jvb21fdHlwZScgfCAnY29udGVudF9wYWdlJz47XG4gIG9uU2VsZWN0OiAocmVmZXJlbmNlOiBSZWZlcmVuY2UpID0+IHZvaWQ7XG4gIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICBleGNsdWRlSWRzPzogc3RyaW5nW107XG59XG5cbmNvbnN0IEVOVElUWV9UWVBFX0xBQkVMUzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgZXZlbnQ6ICdFVkVOVCcsXG4gIGFjdGl2aXR5OiAnQUNUSVZJVFknLFxuICBhY2NvbW1vZGF0aW9uOiAnQUNDT01NT0RBVElPTicsXG4gIHJvb21fdHlwZTogJ1JPT00gVFlQRScsXG4gIGNvbnRlbnRfcGFnZTogJ1BBR0UnLFxufTtcblxuY29uc3QgRU5USVRZX1RZUEVfQ09MT1JTOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBldmVudDogJ2JnLWJsdWUtMTAwIHRleHQtYmx1ZS04MDAnLFxuICBhY3Rpdml0eTogJ2JnLWdyZWVuLTEwMCB0ZXh0LWdyZWVuLTgwMCcsXG4gIGFjY29tbW9kYXRpb246ICdiZy1wdXJwbGUtMTAwIHRleHQtcHVycGxlLTgwMCcsXG4gIHJvb21fdHlwZTogJ2JnLW9yYW5nZS0xMDAgdGV4dC1vcmFuZ2UtODAwJyxcbiAgY29udGVudF9wYWdlOiAnYmctZ3JheS0xMDAgdGV4dC1ncmF5LTgwMCcsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gUmVmZXJlbmNlTG9va3VwKHtcbiAgZW50aXR5VHlwZXMsXG4gIG9uU2VsZWN0LFxuICBwbGFjZWhvbGRlciA9ICdTZWFyY2ggZm9yIGV2ZW50cywgYWN0aXZpdGllcywgcGFnZXMuLi4nLFxuICBleGNsdWRlSWRzID0gW10sXG59OiBSZWZlcmVuY2VMb29rdXBQcm9wcyk6IFJlYWN0LkpTWC5FbGVtZW50IHtcbiAgY29uc3QgW3F1ZXJ5LCBzZXRRdWVyeV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtyZXN1bHRzLCBzZXRSZXN1bHRzXSA9IHVzZVN0YXRlPFNlYXJjaFJlc3VsdFtdPihbXSk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzT3Blbiwgc2V0SXNPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NlbGVjdGVkSW5kZXgsIHNldFNlbGVjdGVkSW5kZXhdID0gdXNlU3RhdGUoLTEpO1xuICBjb25zdCBbaG92ZXJlZFJlc3VsdCwgc2V0SG92ZXJlZFJlc3VsdF0gPSB1c2VTdGF0ZTxTZWFyY2hSZXN1bHQgfCBudWxsPihudWxsKTtcblxuICBjb25zdCBpbnB1dFJlZiA9IHVzZVJlZjxIVE1MSW5wdXRFbGVtZW50PihudWxsKTtcbiAgY29uc3QgZHJvcGRvd25SZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICBjb25zdCBkZWJvdW5jZVRpbWVyUmVmID0gdXNlUmVmPE5vZGVKUy5UaW1lb3V0IHwgbnVsbD4obnVsbCk7XG5cbiAgLy8gRGVib3VuY2VkIHNlYXJjaCBmdW5jdGlvblxuICBjb25zdCBwZXJmb3JtU2VhcmNoID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKHNlYXJjaFF1ZXJ5OiBzdHJpbmcpID0+IHtcbiAgICAgIGlmICghc2VhcmNoUXVlcnkudHJpbSgpKSB7XG4gICAgICAgIHNldFJlc3VsdHMoW10pO1xuICAgICAgICBzZXRJc09wZW4oZmFsc2UpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB0eXBlUGFyYW0gPSBlbnRpdHlUeXBlcy5qb2luKCcsJyk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgICAgYC9hcGkvYWRtaW4vcmVmZXJlbmNlcy9zZWFyY2g/cT0ke2VuY29kZVVSSUNvbXBvbmVudChzZWFyY2hRdWVyeSl9JnR5cGU9JHt0eXBlUGFyYW19YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAvLyBGaWx0ZXIgb3V0IGV4Y2x1ZGVkIElEc1xuICAgICAgICAgIGNvbnN0IGZpbHRlcmVkUmVzdWx0cyA9IGRhdGEuZGF0YS5yZXN1bHRzLmZpbHRlcihcbiAgICAgICAgICAgIChyZXN1bHQ6IFNlYXJjaFJlc3VsdCkgPT4gIWV4Y2x1ZGVJZHMuaW5jbHVkZXMocmVzdWx0LmlkKVxuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0UmVzdWx0cyhmaWx0ZXJlZFJlc3VsdHMpO1xuICAgICAgICAgIHNldElzT3BlbihmaWx0ZXJlZFJlc3VsdHMubGVuZ3RoID4gMCk7XG4gICAgICAgICAgc2V0U2VsZWN0ZWRJbmRleCgtMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0UmVzdWx0cyhbXSk7XG4gICAgICAgICAgc2V0SXNPcGVuKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignU2VhcmNoIGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgc2V0UmVzdWx0cyhbXSk7XG4gICAgICAgIHNldElzT3BlbihmYWxzZSk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtlbnRpdHlUeXBlcywgZXhjbHVkZUlkc11cbiAgKTtcblxuICAvLyBIYW5kbGUgaW5wdXQgY2hhbmdlIHdpdGggZGVib3VuY2luZ1xuICBjb25zdCBoYW5kbGVJbnB1dENoYW5nZSA9IHVzZUNhbGxiYWNrKFxuICAgIChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgIHNldFF1ZXJ5KHZhbHVlKTtcblxuICAgICAgLy8gQ2xlYXIgZXhpc3RpbmcgdGltZXJcbiAgICAgIGlmIChkZWJvdW5jZVRpbWVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGRlYm91bmNlVGltZXJSZWYuY3VycmVudCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNldCBuZXcgdGltZXIgZm9yIGRlYm91bmNlZCBzZWFyY2ggKDMwMG1zKVxuICAgICAgZGVib3VuY2VUaW1lclJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHBlcmZvcm1TZWFyY2godmFsdWUpO1xuICAgICAgfSwgMzAwKTtcbiAgICB9LFxuICAgIFtwZXJmb3JtU2VhcmNoXVxuICApO1xuXG4gIC8vIEhhbmRsZSByZXN1bHQgc2VsZWN0aW9uXG4gIGNvbnN0IGhhbmRsZVNlbGVjdCA9IHVzZUNhbGxiYWNrKFxuICAgIChyZXN1bHQ6IFNlYXJjaFJlc3VsdCkgPT4ge1xuICAgICAgb25TZWxlY3Qoe1xuICAgICAgICBpZDogcmVzdWx0LmlkLFxuICAgICAgICB0eXBlOiByZXN1bHQudHlwZSBhcyBSZWZlcmVuY2VbJ3R5cGUnXSxcbiAgICAgICAgbmFtZTogcmVzdWx0Lm5hbWUsXG4gICAgICAgIHNsdWc6IHJlc3VsdC5zbHVnLFxuICAgICAgfSk7XG4gICAgICBzZXRRdWVyeSgnJyk7XG4gICAgICBzZXRSZXN1bHRzKFtdKTtcbiAgICAgIHNldElzT3BlbihmYWxzZSk7XG4gICAgICBzZXRTZWxlY3RlZEluZGV4KC0xKTtcbiAgICB9LFxuICAgIFtvblNlbGVjdF1cbiAgKTtcblxuICAvLyBLZXlib2FyZCBuYXZpZ2F0aW9uXG4gIGNvbnN0IGhhbmRsZUtleURvd24gPSB1c2VDYWxsYmFjayhcbiAgICAoZTogUmVhY3QuS2V5Ym9hcmRFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgICAgaWYgKCFpc09wZW4gfHwgcmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgIHNldFF1ZXJ5KCcnKTtcbiAgICAgICAgICBzZXRSZXN1bHRzKFtdKTtcbiAgICAgICAgICBzZXRJc09wZW4oZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICBjYXNlICdBcnJvd0Rvd24nOlxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBzZXRTZWxlY3RlZEluZGV4KChwcmV2KSA9PiAocHJldiA8IHJlc3VsdHMubGVuZ3RoIC0gMSA/IHByZXYgKyAxIDogcHJldikpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdBcnJvd1VwJzpcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgc2V0U2VsZWN0ZWRJbmRleCgocHJldikgPT4gKHByZXYgPiAwID8gcHJldiAtIDEgOiAtMSkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdFbnRlcic6XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGlmIChzZWxlY3RlZEluZGV4ID49IDAgJiYgc2VsZWN0ZWRJbmRleCA8IHJlc3VsdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBoYW5kbGVTZWxlY3QocmVzdWx0c1tzZWxlY3RlZEluZGV4XSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdFc2NhcGUnOlxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBzZXRRdWVyeSgnJyk7XG4gICAgICAgICAgc2V0UmVzdWx0cyhbXSk7XG4gICAgICAgICAgc2V0SXNPcGVuKGZhbHNlKTtcbiAgICAgICAgICBzZXRTZWxlY3RlZEluZGV4KC0xKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9LFxuICAgIFtpc09wZW4sIHJlc3VsdHMsIHNlbGVjdGVkSW5kZXgsIGhhbmRsZVNlbGVjdF1cbiAgKTtcblxuICAvLyBDbG9zZSBkcm9wZG93biB3aGVuIGNsaWNraW5nIG91dHNpZGVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVDbGlja091dHNpZGUgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZHJvcGRvd25SZWYuY3VycmVudCAmJlxuICAgICAgICAhZHJvcGRvd25SZWYuY3VycmVudC5jb250YWlucyhldmVudC50YXJnZXQgYXMgTm9kZSkgJiZcbiAgICAgICAgaW5wdXRSZWYuY3VycmVudCAmJlxuICAgICAgICAhaW5wdXRSZWYuY3VycmVudC5jb250YWlucyhldmVudC50YXJnZXQgYXMgTm9kZSlcbiAgICAgICkge1xuICAgICAgICBzZXRJc09wZW4oZmFsc2UpO1xuICAgICAgICBzZXRTZWxlY3RlZEluZGV4KC0xKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlQ2xpY2tPdXRzaWRlKTtcbiAgICByZXR1cm4gKCkgPT4gZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlQ2xpY2tPdXRzaWRlKTtcbiAgfSwgW10pO1xuXG4gIC8vIENsZWFudXAgZGVib3VuY2UgdGltZXIgb24gdW5tb3VudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoZGVib3VuY2VUaW1lclJlZi5jdXJyZW50KSB7XG4gICAgICAgIGNsZWFyVGltZW91dChkZWJvdW5jZVRpbWVyUmVmLmN1cnJlbnQpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtdKTtcblxuICAvLyBTY3JvbGwgc2VsZWN0ZWQgaXRlbSBpbnRvIHZpZXdcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc2VsZWN0ZWRJbmRleCA+PSAwICYmIGRyb3Bkb3duUmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkRWxlbWVudCA9IGRyb3Bkb3duUmVmLmN1cnJlbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYFtkYXRhLWluZGV4PVwiJHtzZWxlY3RlZEluZGV4fVwiXWBcbiAgICAgICk7XG4gICAgICBpZiAoc2VsZWN0ZWRFbGVtZW50KSB7XG4gICAgICAgIHNlbGVjdGVkRWxlbWVudC5zY3JvbGxJbnRvVmlldyh7IGJsb2NrOiAnbmVhcmVzdCcsIGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtzZWxlY3RlZEluZGV4XSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIHctZnVsbFwiPlxuICAgICAgey8qIFNlYXJjaCBJbnB1dCAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgcmVmPXtpbnB1dFJlZn1cbiAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgdmFsdWU9e3F1ZXJ5fVxuICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICBvbktleURvd249e2hhbmRsZUtleURvd259XG4gICAgICAgICAgb25Gb2N1cz17KCkgPT4ge1xuICAgICAgICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBzZXRJc09wZW4odHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfX1cbiAgICAgICAgICBwbGFjZWhvbGRlcj17cGxhY2Vob2xkZXJ9XG4gICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTQgcHktMiBwci0xMCBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctYmx1ZS01MDAgZm9jdXM6Ym9yZGVyLXRyYW5zcGFyZW50XCJcbiAgICAgICAgICBhcmlhLWxhYmVsPVwiU2VhcmNoIGZvciByZWZlcmVuY2VzXCJcbiAgICAgICAgICBhcmlhLWF1dG9jb21wbGV0ZT1cImxpc3RcIlxuICAgICAgICAgIGFyaWEtY29udHJvbHM9XCJyZWZlcmVuY2UtcmVzdWx0c1wiXG4gICAgICAgICAgYXJpYS1leHBhbmRlZD17aXNPcGVufVxuICAgICAgICAgIHJvbGU9XCJjb21ib2JveFwiXG4gICAgICAgIC8+XG4gICAgICAgIHsvKiBTZWFyY2ggSWNvbiAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSByaWdodC0zIHRvcC0xLzIgLXRyYW5zbGF0ZS15LTEvMiBwb2ludGVyLWV2ZW50cy1ub25lXCI+XG4gICAgICAgICAge2xvYWRpbmcgPyAoXG4gICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiBoLTUgdy01IHRleHQtZ3JheS00MDBcIlxuICAgICAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIlxuICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcbiAgICAgICAgICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGNpcmNsZVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm9wYWNpdHktMjVcIlxuICAgICAgICAgICAgICAgIGN4PVwiMTJcIlxuICAgICAgICAgICAgICAgIGN5PVwiMTJcIlxuICAgICAgICAgICAgICAgIHI9XCIxMFwiXG4gICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCJcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD1cIjRcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm9wYWNpdHktNzVcIlxuICAgICAgICAgICAgICAgIGZpbGw9XCJjdXJyZW50Q29sb3JcIlxuICAgICAgICAgICAgICAgIGQ9XCJNNCAxMmE4IDggMCAwMTgtOFYwQzUuMzczIDAgMCA1LjM3MyAwIDEyaDR6bTIgNS4yOTFBNy45NjIgNy45NjIgMCAwMTQgMTJIMGMwIDMuMDQyIDEuMTM1IDUuODI0IDMgNy45MzhsMy0yLjY0N3pcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC01IHctNSB0ZXh0LWdyYXktNDAwXCJcbiAgICAgICAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgICAgICAgICAgIGZpbGw9XCJub25lXCJcbiAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiXG4gICAgICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgc3Ryb2tlTGluZWNhcD1cInJvdW5kXCJcbiAgICAgICAgICAgICAgICBzdHJva2VMaW5lam9pbj1cInJvdW5kXCJcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD17Mn1cbiAgICAgICAgICAgICAgICBkPVwiTTIxIDIxbC02LTZtMi01YTcgNyAwIDExLTE0IDAgNyA3IDAgMDExNCAwelwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogUmVzdWx0cyBEcm9wZG93biAqL31cbiAgICAgIHtpc09wZW4gJiYgcmVzdWx0cy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgPGRpdlxuICAgICAgICAgIHJlZj17ZHJvcGRvd25SZWZ9XG4gICAgICAgICAgaWQ9XCJyZWZlcmVuY2UtcmVzdWx0c1wiXG4gICAgICAgICAgcm9sZT1cImxpc3Rib3hcIlxuICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHotNTAgdy1mdWxsIG10LTIgYmctd2hpdGUgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHNoYWRvdy1sZyBtYXgtaC05NiBvdmVyZmxvdy15LWF1dG9cIlxuICAgICAgICA+XG4gICAgICAgICAgey8qIFJlc3VsdHMgSGVhZGVyICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtNCBweS0yIGJnLWdyYXktNTAgYm9yZGVyLWIgYm9yZGVyLWdyYXktMjAwIHRleHQtc20gdGV4dC1ncmF5LTYwMCBmb250LW1lZGl1bVwiPlxuICAgICAgICAgICAgU2VhcmNoIFJlc3VsdHMgKHtyZXN1bHRzLmxlbmd0aH0pXG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogUmVzdWx0cyBMaXN0ICovfVxuICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJweS0xXCI+XG4gICAgICAgICAgICB7cmVzdWx0cy5tYXAoKHJlc3VsdCwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgPGxpXG4gICAgICAgICAgICAgICAga2V5PXtyZXN1bHQuaWR9XG4gICAgICAgICAgICAgICAgZGF0YS1pbmRleD17aW5kZXh9XG4gICAgICAgICAgICAgICAgcm9sZT1cIm9wdGlvblwiXG4gICAgICAgICAgICAgICAgYXJpYS1zZWxlY3RlZD17aW5kZXggPT09IHNlbGVjdGVkSW5kZXh9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcHgtNCBweS0zIGN1cnNvci1wb2ludGVyIHRyYW5zaXRpb24tY29sb3JzICR7XG4gICAgICAgICAgICAgICAgICBpbmRleCA9PT0gc2VsZWN0ZWRJbmRleFxuICAgICAgICAgICAgICAgICAgICA/ICdiZy1ibHVlLTUwIGJvcmRlci1sLTQgYm9yZGVyLWJsdWUtNTAwJ1xuICAgICAgICAgICAgICAgICAgICA6ICdob3ZlcjpiZy1ncmF5LTUwIGJvcmRlci1sLTQgYm9yZGVyLXRyYW5zcGFyZW50J1xuICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZVNlbGVjdChyZXN1bHQpfVxuICAgICAgICAgICAgICAgIG9uTW91c2VFbnRlcj17KCkgPT4gc2V0SG92ZXJlZFJlc3VsdChyZXN1bHQpfVxuICAgICAgICAgICAgICAgIG9uTW91c2VMZWF2ZT17KCkgPT4gc2V0SG92ZXJlZFJlc3VsdChudWxsKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1zdGFydCBnYXAtM1wiPlxuICAgICAgICAgICAgICAgICAgey8qIEVudGl0eSBUeXBlIEJhZGdlICovfVxuICAgICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIHB4LTIgcHktMSByb3VuZGVkIHRleHQteHMgZm9udC1zZW1pYm9sZCAke1xuICAgICAgICAgICAgICAgICAgICAgIEVOVElUWV9UWVBFX0NPTE9SU1tyZXN1bHQudHlwZV0gfHwgJ2JnLWdyYXktMTAwIHRleHQtZ3JheS04MDAnXG4gICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7RU5USVRZX1RZUEVfTEFCRUxTW3Jlc3VsdC50eXBlXSB8fCByZXN1bHQudHlwZS50b1VwcGVyQ2FzZSgpfVxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuXG4gICAgICAgICAgICAgICAgICB7LyogUmVzdWx0IERldGFpbHMgKi99XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBtaW4tdy0wXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMCB0cnVuY2F0ZVwiPntyZXN1bHQubmFtZX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAge3Jlc3VsdC5wcmV2aWV3ICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTYwMCBtdC0xIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj7ihpI8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0cnVuY2F0ZVwiPntyZXN1bHQucHJldmlld308L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIHtyZXN1bHQuc2x1ZyAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgbXQtMVwiPi97cmVzdWx0LnNsdWd9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIHtyZXN1bHQuc3RhdHVzICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMCBtdC0xIGNhcGl0YWxpemVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtyZXN1bHQuc3RhdHVzfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICB7LyogSG92ZXIgUHJldmlldyAoaWYgYXZhaWxhYmxlKSAqL31cbiAgICAgICAgICAgICAgICB7aG92ZXJlZFJlc3VsdD8uaWQgPT09IHJlc3VsdC5pZCAmJiByZXN1bHQucHJldmlldyAmJiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgcC0yIGJnLWdyYXktNTAgcm91bmRlZCB0ZXh0LXNtIHRleHQtZ3JheS03MDAgYm9yZGVyIGJvcmRlci1ncmF5LTIwMFwiPlxuICAgICAgICAgICAgICAgICAgICB7cmVzdWx0LnByZXZpZXd9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC91bD5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7LyogTm8gUmVzdWx0cyBNZXNzYWdlICovfVxuICAgICAge2lzT3BlbiAmJiByZXN1bHRzLmxlbmd0aCA9PT0gMCAmJiBxdWVyeS50cmltKCkgJiYgIWxvYWRpbmcgJiYgKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgei01MCB3LWZ1bGwgbXQtMiBiZy13aGl0ZSBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgc2hhZG93LWxnIHAtNCB0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNTAwXCJcbiAgICAgICAgICByb2xlPVwic3RhdHVzXCJcbiAgICAgICAgPlxuICAgICAgICAgIE5vIHJlc3VsdHMgZm91bmQgZm9yICZxdW90O3txdWVyeX0mcXVvdDtcbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbIlJlZmVyZW5jZUxvb2t1cCIsIkVOVElUWV9UWVBFX0xBQkVMUyIsImV2ZW50IiwiYWN0aXZpdHkiLCJhY2NvbW1vZGF0aW9uIiwicm9vbV90eXBlIiwiY29udGVudF9wYWdlIiwiRU5USVRZX1RZUEVfQ09MT1JTIiwiZW50aXR5VHlwZXMiLCJvblNlbGVjdCIsInBsYWNlaG9sZGVyIiwiZXhjbHVkZUlkcyIsInF1ZXJ5Iiwic2V0UXVlcnkiLCJ1c2VTdGF0ZSIsInJlc3VsdHMiLCJzZXRSZXN1bHRzIiwibG9hZGluZyIsInNldExvYWRpbmciLCJpc09wZW4iLCJzZXRJc09wZW4iLCJzZWxlY3RlZEluZGV4Iiwic2V0U2VsZWN0ZWRJbmRleCIsImhvdmVyZWRSZXN1bHQiLCJzZXRIb3ZlcmVkUmVzdWx0IiwiaW5wdXRSZWYiLCJ1c2VSZWYiLCJkcm9wZG93blJlZiIsImRlYm91bmNlVGltZXJSZWYiLCJwZXJmb3JtU2VhcmNoIiwidXNlQ2FsbGJhY2siLCJzZWFyY2hRdWVyeSIsInRyaW0iLCJ0eXBlUGFyYW0iLCJqb2luIiwicmVzcG9uc2UiLCJmZXRjaCIsImVuY29kZVVSSUNvbXBvbmVudCIsImRhdGEiLCJqc29uIiwic3VjY2VzcyIsImZpbHRlcmVkUmVzdWx0cyIsImZpbHRlciIsInJlc3VsdCIsImluY2x1ZGVzIiwiaWQiLCJsZW5ndGgiLCJlcnJvciIsImNvbnNvbGUiLCJoYW5kbGVJbnB1dENoYW5nZSIsImUiLCJ2YWx1ZSIsInRhcmdldCIsImN1cnJlbnQiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiaGFuZGxlU2VsZWN0IiwidHlwZSIsIm5hbWUiLCJzbHVnIiwiaGFuZGxlS2V5RG93biIsImtleSIsInByZXZlbnREZWZhdWx0IiwicHJldiIsInVzZUVmZmVjdCIsImhhbmRsZUNsaWNrT3V0c2lkZSIsImNvbnRhaW5zIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNlbGVjdGVkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzY3JvbGxJbnRvVmlldyIsImJsb2NrIiwiYmVoYXZpb3IiLCJkaXYiLCJjbGFzc05hbWUiLCJpbnB1dCIsInJlZiIsIm9uQ2hhbmdlIiwib25LZXlEb3duIiwib25Gb2N1cyIsImFyaWEtbGFiZWwiLCJhcmlhLWF1dG9jb21wbGV0ZSIsImFyaWEtY29udHJvbHMiLCJhcmlhLWV4cGFuZGVkIiwicm9sZSIsInN2ZyIsInhtbG5zIiwiZmlsbCIsInZpZXdCb3giLCJhcmlhLWhpZGRlbiIsImNpcmNsZSIsImN4IiwiY3kiLCJyIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJwYXRoIiwiZCIsInN0cm9rZUxpbmVjYXAiLCJzdHJva2VMaW5lam9pbiIsInVsIiwibWFwIiwiaW5kZXgiLCJsaSIsImRhdGEtaW5kZXgiLCJhcmlhLXNlbGVjdGVkIiwib25DbGljayIsIm9uTW91c2VFbnRlciIsIm9uTW91c2VMZWF2ZSIsInNwYW4iLCJ0b1VwcGVyQ2FzZSIsInByZXZpZXciLCJzdGF0dXMiXSwibWFwcGluZ3MiOiJBQUFBOzs7OzsrQkEyQ2dCQTs7O2VBQUFBOzs7O3VCQXpDeUM7QUF5QnpELE1BQU1DLHFCQUE2QztJQUNqREMsT0FBTztJQUNQQyxVQUFVO0lBQ1ZDLGVBQWU7SUFDZkMsV0FBVztJQUNY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