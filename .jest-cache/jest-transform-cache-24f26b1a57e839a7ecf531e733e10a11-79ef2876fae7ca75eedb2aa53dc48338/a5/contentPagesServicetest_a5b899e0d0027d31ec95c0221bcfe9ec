b0e7b84bc6b0f0056316d7346ed2dfee
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
const _slugs = require("../utils/slugs");
const _contentPagesService = /*#__PURE__*/ _interop_require_wildcard(require("./contentPagesService"));
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Mock Supabase before importing contentPagesService
const mockFrom = _globals.jest.fn();
_globals.jest.mock('@/lib/supabase', ()=>({
        supabase: {
            from: mockFrom
        }
    }));
(0, _globals.describe)('contentPagesService', ()=>{
    (0, _globals.beforeEach)(()=>{
        _globals.jest.clearAllMocks();
    });
    (0, _globals.describe)('generateSlug', ()=>{
        (0, _globals.it)('should convert title to lowercase slug', ()=>{
            const slug = (0, _slugs.generateSlug)('Our Story');
            (0, _globals.expect)(slug).toBe('our-story');
        });
        (0, _globals.it)('should replace spaces with hyphens', ()=>{
            const slug = (0, _slugs.generateSlug)('Travel Information Guide');
            (0, _globals.expect)(slug).toBe('travel-information-guide');
        });
        (0, _globals.it)('should remove special characters', ()=>{
            const slug = (0, _slugs.generateSlug)('FAQ & Questions!');
            (0, _globals.expect)(slug).toBe('faq-questions');
        });
        (0, _globals.it)('should handle multiple consecutive spaces', ()=>{
            const slug = (0, _slugs.generateSlug)('Our   Story   Page');
            (0, _globals.expect)(slug).toBe('our-story-page');
        });
        (0, _globals.it)('should remove leading and trailing hyphens', ()=>{
            const slug = (0, _slugs.generateSlug)('  Our Story  ');
            (0, _globals.expect)(slug).toBe('our-story');
        });
        (0, _globals.it)('should handle empty string', ()=>{
            const slug = (0, _slugs.generateSlug)('');
            (0, _globals.expect)(slug).toBe('');
        });
        (0, _globals.it)('should handle string with only special characters', ()=>{
            const slug = (0, _slugs.generateSlug)('!@#$%^&*()');
            (0, _globals.expect)(slug).toBe('');
        });
    });
    (0, _globals.describe)('createContentPage', ()=>{
        const validData = {
            title: 'Our Story',
            slug: 'our-story',
            status: 'draft'
        };
        (0, _globals.it)('should return success with content page data when valid input provided', async ()=>{
            const mockContentPage = {
                id: 'page-1',
                title: validData.title,
                slug: validData.slug,
                status: validData.status,
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            // Mock slug uniqueness check (no existing page)
            const mockSingle1 = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    code: 'PGRST116'
                }
            });
            const mockEq1 = _globals.jest.fn().mockReturnValue({
                single: mockSingle1
            });
            const mockSelect1 = _globals.jest.fn().mockReturnValue({
                eq: mockEq1
            });
            mockFrom.mockReturnValueOnce({
                select: mockSelect1
            });
            // Mock insert
            const mockSingle2 = _globals.jest.fn().mockResolvedValue({
                data: mockContentPage,
                error: null
            });
            const mockSelect2 = _globals.jest.fn().mockReturnValue({
                single: mockSingle2
            });
            const mockInsert = _globals.jest.fn().mockReturnValue({
                select: mockSelect2
            });
            mockFrom.mockReturnValueOnce({
                insert: mockInsert
            });
            const result = await _contentPagesService.createContentPage(validData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.id).toBe('page-1');
                (0, _globals.expect)(result.data.title).toBe('Our Story');
                (0, _globals.expect)(result.data.slug).toBe('our-story');
                (0, _globals.expect)(result.data.status).toBe('draft');
            }
        });
        (0, _globals.it)('should auto-generate slug from title when slug not provided', async ()=>{
            const dataWithoutSlug = {
                title: 'Travel Information',
                status: 'draft'
            };
            const mockContentPage = {
                id: 'page-2',
                title: dataWithoutSlug.title,
                slug: 'travel-information',
                status: dataWithoutSlug.status,
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            // Mock slug uniqueness check
            const mockSingle1 = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    code: 'PGRST116'
                }
            });
            const mockEq1 = _globals.jest.fn().mockReturnValue({
                single: mockSingle1
            });
            const mockSelect1 = _globals.jest.fn().mockReturnValue({
                eq: mockEq1
            });
            mockFrom.mockReturnValueOnce({
                select: mockSelect1
            });
            // Mock insert
            const mockSingle2 = _globals.jest.fn().mockResolvedValue({
                data: mockContentPage,
                error: null
            });
            const mockSelect2 = _globals.jest.fn().mockReturnValue({
                single: mockSingle2
            });
            const mockInsert = _globals.jest.fn().mockReturnValue({
                select: mockSelect2
            });
            mockFrom.mockReturnValueOnce({
                insert: mockInsert
            });
            const result = await _contentPagesService.createContentPage(dataWithoutSlug);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.slug).toBe('travel-information');
            }
        });
        (0, _globals.it)('should ensure unique slug by appending number when slug exists', async ()=>{
            const mockContentPage = {
                id: 'page-3',
                title: validData.title,
                slug: 'our-story-2',
                status: validData.status,
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            // Mock first slug check - slug exists
            const mockSingle1 = _globals.jest.fn().mockResolvedValue({
                data: {
                    id: 'existing-page'
                },
                error: null
            });
            const mockEq1 = _globals.jest.fn().mockReturnValue({
                single: mockSingle1
            });
            const mockSelect1 = _globals.jest.fn().mockReturnValue({
                eq: mockEq1
            });
            mockFrom.mockReturnValueOnce({
                select: mockSelect1
            });
            // Mock second slug check - slug-2 is unique
            const mockSingle2 = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    code: 'PGRST116'
                }
            });
            const mockEq2 = _globals.jest.fn().mockReturnValue({
                single: mockSingle2
            });
            const mockSelect2 = _globals.jest.fn().mockReturnValue({
                eq: mockEq2
            });
            mockFrom.mockReturnValueOnce({
                select: mockSelect2
            });
            // Mock insert
            const mockSingle3 = _globals.jest.fn().mockResolvedValue({
                data: mockContentPage,
                error: null
            });
            const mockSelect3 = _globals.jest.fn().mockReturnValue({
                single: mockSingle3
            });
            const mockInsert = _globals.jest.fn().mockReturnValue({
                select: mockSelect3
            });
            mockFrom.mockReturnValueOnce({
                insert: mockInsert
            });
            const result = await _contentPagesService.createContentPage(validData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.slug).toBe('our-story-2');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when title is missing', async ()=>{
            const invalidData = {
                ...validData,
                title: ''
            };
            const result = await _contentPagesService.createContentPage(invalidData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when slug contains invalid characters', async ()=>{
            const invalidData = {
                ...validData,
                slug: 'Our Story!'
            };
            const result = await _contentPagesService.createContentPage(invalidData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when slug contains uppercase letters', async ()=>{
            const invalidData = {
                ...validData,
                slug: 'Our-Story'
            };
            const result = await _contentPagesService.createContentPage(invalidData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when status is invalid', async ()=>{
            const invalidData = {
                ...validData,
                status: 'invalid'
            };
            const result = await _contentPagesService.createContentPage(invalidData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        (0, _globals.it)('should return DATABASE_ERROR when insert fails', async ()=>{
            // Mock slug uniqueness check
            const mockSingle1 = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    code: 'PGRST116'
                }
            });
            const mockEq1 = _globals.jest.fn().mockReturnValue({
                single: mockSingle1
            });
            const mockSelect1 = _globals.jest.fn().mockReturnValue({
                eq: mockEq1
            });
            mockFrom.mockReturnValueOnce({
                select: mockSelect1
            });
            // Mock insert failure
            const mockSingle2 = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    message: 'Connection failed',
                    code: 'DB_ERROR'
                }
            });
            const mockSelect2 = _globals.jest.fn().mockReturnValue({
                single: mockSingle2
            });
            const mockInsert = _globals.jest.fn().mockReturnValue({
                select: mockSelect2
            });
            mockFrom.mockReturnValueOnce({
                insert: mockInsert
            });
            const result = await _contentPagesService.createContentPage(validData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('DATABASE_ERROR');
            }
        });
        (0, _globals.it)('should sanitize title to prevent XSS attacks', async ()=>{
            const maliciousData = {
                ...validData,
                title: '<script>alert("xss")</script>Our Story'
            };
            const mockContentPage = {
                id: 'page-4',
                title: 'Our Story',
                slug: validData.slug,
                status: validData.status,
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            // Mock slug uniqueness check
            const mockSingle1 = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    code: 'PGRST116'
                }
            });
            const mockEq1 = _globals.jest.fn().mockReturnValue({
                single: mockSingle1
            });
            const mockSelect1 = _globals.jest.fn().mockReturnValue({
                eq: mockEq1
            });
            mockFrom.mockReturnValueOnce({
                select: mockSelect1
            });
            // Mock insert
            const mockSingle2 = _globals.jest.fn().mockResolvedValue({
                data: mockContentPage,
                error: null
            });
            const mockSelect2 = _globals.jest.fn().mockReturnValue({
                single: mockSingle2
            });
            const mockInsert = _globals.jest.fn().mockReturnValue({
                select: mockSelect2
            });
            mockFrom.mockReturnValueOnce({
                insert: mockInsert
            });
            const result = await _contentPagesService.createContentPage(maliciousData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.title).not.toContain('<script>');
                (0, _globals.expect)(result.data.title).not.toContain('alert');
            }
        });
    });
    (0, _globals.describe)('updateContentPage', ()=>{
        const pageId = 'page-1';
        const updateData = {
            title: 'Updated Story',
            status: 'published'
        };
        (0, _globals.it)('should return success with updated content page data', async ()=>{
            const mockUpdatedPage = {
                id: pageId,
                title: updateData.title,
                slug: 'our-story',
                status: updateData.status,
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-02T00:00:00Z'
            };
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: mockUpdatedPage,
                error: null
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockEq = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            const mockUpdate = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValue({
                update: mockUpdate
            });
            const result = await _contentPagesService.updateContentPage(pageId, updateData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.title).toBe('Updated Story');
                (0, _globals.expect)(result.data.status).toBe('published');
            }
        });
        (0, _globals.it)('should update only status when provided', async ()=>{
            const updateWithStatus = {
                status: 'published'
            };
            const mockUpdatedPage = {
                id: pageId,
                title: 'Our Story',
                slug: 'our-story',
                status: 'published',
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-02T00:00:00Z'
            };
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: mockUpdatedPage,
                error: null
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockEq = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            const mockUpdate = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValue({
                update: mockUpdate
            });
            const result = await _contentPagesService.updateContentPage(pageId, updateWithStatus);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.status).toBe('published');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when title is empty', async ()=>{
            const invalidData = {
                title: ''
            };
            const result = await _contentPagesService.updateContentPage(pageId, invalidData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when slug contains invalid characters', async ()=>{
            const invalidData = {
                slug: 'Invalid Slug!'
            };
            const result = await _contentPagesService.updateContentPage(pageId, invalidData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        (0, _globals.it)('should return DATABASE_ERROR when page does not exist', async ()=>{
            const updateWithTitle = {
                title: 'Updated Story'
            };
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    code: 'PGRST116',
                    message: 'Not found'
                }
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockEq = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            const mockUpdate = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValue({
                update: mockUpdate
            });
            const result = await _contentPagesService.updateContentPage(pageId, updateWithTitle);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('NOT_FOUND');
            }
        });
        (0, _globals.it)('should return DATABASE_ERROR when update fails', async ()=>{
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    message: 'Connection failed',
                    code: 'DB_ERROR'
                }
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockEq = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            const mockUpdate = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValue({
                update: mockUpdate
            });
            const result = await _contentPagesService.updateContentPage(pageId, updateData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('DATABASE_ERROR');
            }
        });
        (0, _globals.it)('should sanitize title to prevent XSS attacks', async ()=>{
            const maliciousData = {
                title: '<img src=x onerror=alert(1)>Updated Story'
            };
            const mockUpdatedPage = {
                id: pageId,
                title: 'Updated Story',
                slug: 'our-story',
                status: 'draft',
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-02T00:00:00Z'
            };
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: mockUpdatedPage,
                error: null
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockEq = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            const mockUpdate = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValue({
                update: mockUpdate
            });
            const result = await _contentPagesService.updateContentPage(pageId, maliciousData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.title).not.toContain('<img');
                (0, _globals.expect)(result.data.title).not.toContain('onerror');
            }
        });
    });
    (0, _globals.describe)('deleteContentPage', ()=>{
        const pageId = 'page-1';
        (0, _globals.it)('should return success when page is deleted', async ()=>{
            // Mock delete sections
            const mockEq1 = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: null
            });
            const mockEq2 = _globals.jest.fn().mockReturnValue({
                eq: mockEq1
            });
            const mockDelete1 = _globals.jest.fn().mockReturnValue({
                eq: mockEq2
            });
            mockFrom.mockReturnValueOnce({
                delete: mockDelete1
            });
            // Mock delete content page
            const mockEq3 = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: null
            });
            const mockDelete2 = _globals.jest.fn().mockReturnValue({
                eq: mockEq3
            });
            mockFrom.mockReturnValueOnce({
                delete: mockDelete2
            });
            const result = await _contentPagesService.deleteContentPage(pageId);
            (0, _globals.expect)(result.success).toBe(true);
        });
        (0, _globals.it)('should delete associated sections before deleting page', async ()=>{
            const mockEq1 = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: null
            });
            const mockEq2 = _globals.jest.fn().mockReturnValue({
                eq: mockEq1
            });
            const mockDeleteSections = _globals.jest.fn().mockReturnValue({
                eq: mockEq2
            });
            const mockEq3 = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: null
            });
            const mockDeletePage = _globals.jest.fn().mockReturnValue({
                eq: mockEq3
            });
            // Mock delete sections
            mockFrom.mockReturnValueOnce({
                delete: mockDeleteSections
            });
            // Mock delete content page
            mockFrom.mockReturnValueOnce({
                delete: mockDeletePage
            });
            await _contentPagesService.deleteContentPage(pageId);
            // Verify sections were deleted first
            (0, _globals.expect)(mockDeleteSections).toHaveBeenCalled();
            (0, _globals.expect)(mockDeletePage).toHaveBeenCalled();
        });
        (0, _globals.it)('should return DATABASE_ERROR when delete fails', async ()=>{
            // Mock delete sections success
            const mockEq1 = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: null
            });
            const mockEq2 = _globals.jest.fn().mockReturnValue({
                eq: mockEq1
            });
            const mockDelete1 = _globals.jest.fn().mockReturnValue({
                eq: mockEq2
            });
            mockFrom.mockReturnValueOnce({
                delete: mockDelete1
            });
            // Mock delete content page failure
            const mockEq3 = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    message: 'Connection failed',
                    code: 'DB_ERROR'
                }
            });
            const mockDelete2 = _globals.jest.fn().mockReturnValue({
                eq: mockEq3
            });
            mockFrom.mockReturnValueOnce({
                delete: mockDelete2
            });
            const result = await _contentPagesService.deleteContentPage(pageId);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('DATABASE_ERROR');
            }
        });
    });
    (0, _globals.describe)('getContentPage', ()=>{
        const pageId = 'page-1';
        (0, _globals.it)('should return success with content page data', async ()=>{
            const mockContentPage = {
                id: pageId,
                title: 'Our Story',
                slug: 'our-story',
                status: 'published',
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: mockContentPage,
                error: null
            });
            const mockEq = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValue({
                select: mockSelect
            });
            const result = await _contentPagesService.getContentPage(pageId);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.id).toBe(pageId);
                (0, _globals.expect)(result.data.title).toBe('Our Story');
            }
        });
        (0, _globals.it)('should return NOT_FOUND when page does not exist', async ()=>{
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    code: 'PGRST116',
                    message: 'Not found'
                }
            });
            const mockEq = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValue({
                select: mockSelect
            });
            const result = await _contentPagesService.getContentPage(pageId);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('NOT_FOUND');
            }
        });
    });
    (0, _globals.describe)('getContentPageBySlug', ()=>{
        const slug = 'our-story';
        (0, _globals.it)('should return success with content page data', async ()=>{
            const mockContentPage = {
                id: 'page-1',
                title: 'Our Story',
                slug: slug,
                status: 'published',
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: mockContentPage,
                error: null
            });
            const mockEq = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValue({
                select: mockSelect
            });
            const result = await _contentPagesService.getContentPageBySlug(slug);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.slug).toBe(slug);
                (0, _globals.expect)(result.data.title).toBe('Our Story');
            }
        });
        (0, _globals.it)('should return NOT_FOUND when slug does not exist', async ()=>{
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    code: 'PGRST116',
                    message: 'Not found'
                }
            });
            const mockEq = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValue({
                select: mockSelect
            });
            const result = await _contentPagesService.getContentPageBySlug(slug);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('NOT_FOUND');
            }
        });
    });
    (0, _globals.describe)('listContentPages', ()=>{
        (0, _globals.it)('should return success with all content pages', async ()=>{
            const mockPages = [
                {
                    id: 'page-1',
                    title: 'Our Story',
                    slug: 'our-story',
                    status: 'published',
                    created_at: '2024-01-01T00:00:00Z',
                    updated_at: '2024-01-01T00:00:00Z'
                },
                {
                    id: 'page-2',
                    title: 'Travel Info',
                    slug: 'travel-info',
                    status: 'draft',
                    created_at: '2024-01-02T00:00:00Z',
                    updated_at: '2024-01-02T00:00:00Z'
                }
            ];
            const mockOrder = _globals.jest.fn().mockResolvedValue({
                data: mockPages,
                error: null
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                order: mockOrder
            });
            mockFrom.mockReturnValue({
                select: mockSelect
            });
            const result = await _contentPagesService.listContentPages();
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data).toHaveLength(2);
                (0, _globals.expect)(result.data[0].title).toBe('Our Story');
                (0, _globals.expect)(result.data[1].title).toBe('Travel Info');
            }
        });
        (0, _globals.it)('should filter by status when provided', async ()=>{
            const mockPages = [
                {
                    id: 'page-1',
                    title: 'Our Story',
                    slug: 'our-story',
                    status: 'published',
                    created_at: '2024-01-01T00:00:00Z',
                    updated_at: '2024-01-01T00:00:00Z'
                }
            ];
            const mockEq = _globals.jest.fn().mockResolvedValue({
                data: mockPages,
                error: null
            });
            const mockOrder = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                order: mockOrder
            });
            mockFrom.mockReturnValue({
                select: mockSelect
            });
            const result = await _contentPagesService.listContentPages({
                status: 'published'
            });
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data).toHaveLength(1);
                (0, _globals.expect)(result.data[0].status).toBe('published');
            }
        });
        (0, _globals.it)('should return empty array when no pages exist', async ()=>{
            const mockOrder = _globals.jest.fn().mockResolvedValue({
                data: [],
                error: null
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                order: mockOrder
            });
            mockFrom.mockReturnValue({
                select: mockSelect
            });
            const result = await _contentPagesService.listContentPages();
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data).toHaveLength(0);
            }
        });
        (0, _globals.it)('should return DATABASE_ERROR when query fails', async ()=>{
            const mockOrder = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    message: 'Connection failed',
                    code: 'DB_ERROR'
                }
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                order: mockOrder
            });
            mockFrom.mockReturnValue({
                select: mockSelect
            });
            const result = await _contentPagesService.listContentPages();
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('DATABASE_ERROR');
            }
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvc2VydmljZXMvY29udGVudFBhZ2VzU2VydmljZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCBqZXN0LCBiZWZvcmVFYWNoIH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgdHlwZSB7IENyZWF0ZUNvbnRlbnRQYWdlRFRPLCBVcGRhdGVDb250ZW50UGFnZURUTyB9IGZyb20gJ0Avc2NoZW1hcy9jbXNTY2hlbWFzJztcbmltcG9ydCB7IGdlbmVyYXRlU2x1ZyB9IGZyb20gJ0AvdXRpbHMvc2x1Z3MnO1xuXG4vLyBNb2NrIFN1cGFiYXNlIGJlZm9yZSBpbXBvcnRpbmcgY29udGVudFBhZ2VzU2VydmljZVxuY29uc3QgbW9ja0Zyb20gPSBqZXN0LmZuKCk7XG5qZXN0Lm1vY2soJ0AvbGliL3N1cGFiYXNlJywgKCkgPT4gKHtcbiAgc3VwYWJhc2U6IHtcbiAgICBmcm9tOiBtb2NrRnJvbSxcbiAgfSxcbn0pKTtcblxuLy8gSW1wb3J0IGFmdGVyIG1vY2tpbmdcbmltcG9ydCAqIGFzIGNvbnRlbnRQYWdlc1NlcnZpY2UgZnJvbSAnLi9jb250ZW50UGFnZXNTZXJ2aWNlJztcblxuZGVzY3JpYmUoJ2NvbnRlbnRQYWdlc1NlcnZpY2UnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2VuZXJhdGVTbHVnJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY29udmVydCB0aXRsZSB0byBsb3dlcmNhc2Ugc2x1ZycsICgpID0+IHtcbiAgICAgIGNvbnN0IHNsdWcgPSBnZW5lcmF0ZVNsdWcoJ091ciBTdG9yeScpO1xuICAgICAgZXhwZWN0KHNsdWcpLnRvQmUoJ291ci1zdG9yeScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXBsYWNlIHNwYWNlcyB3aXRoIGh5cGhlbnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzbHVnID0gZ2VuZXJhdGVTbHVnKCdUcmF2ZWwgSW5mb3JtYXRpb24gR3VpZGUnKTtcbiAgICAgIGV4cGVjdChzbHVnKS50b0JlKCd0cmF2ZWwtaW5mb3JtYXRpb24tZ3VpZGUnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVtb3ZlIHNwZWNpYWwgY2hhcmFjdGVycycsICgpID0+IHtcbiAgICAgIGNvbnN0IHNsdWcgPSBnZW5lcmF0ZVNsdWcoJ0ZBUSAmIFF1ZXN0aW9ucyEnKTtcbiAgICAgIGV4cGVjdChzbHVnKS50b0JlKCdmYXEtcXVlc3Rpb25zJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtdWx0aXBsZSBjb25zZWN1dGl2ZSBzcGFjZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzbHVnID0gZ2VuZXJhdGVTbHVnKCdPdXIgICBTdG9yeSAgIFBhZ2UnKTtcbiAgICAgIGV4cGVjdChzbHVnKS50b0JlKCdvdXItc3RvcnktcGFnZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZW1vdmUgbGVhZGluZyBhbmQgdHJhaWxpbmcgaHlwaGVucycsICgpID0+IHtcbiAgICAgIGNvbnN0IHNsdWcgPSBnZW5lcmF0ZVNsdWcoJyAgT3VyIFN0b3J5ICAnKTtcbiAgICAgIGV4cGVjdChzbHVnKS50b0JlKCdvdXItc3RvcnknKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHN0cmluZycsICgpID0+IHtcbiAgICAgIGNvbnN0IHNsdWcgPSBnZW5lcmF0ZVNsdWcoJycpO1xuICAgICAgZXhwZWN0KHNsdWcpLnRvQmUoJycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc3RyaW5nIHdpdGggb25seSBzcGVjaWFsIGNoYXJhY3RlcnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzbHVnID0gZ2VuZXJhdGVTbHVnKCchQCMkJV4mKigpJyk7XG4gICAgICBleHBlY3Qoc2x1ZykudG9CZSgnJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjcmVhdGVDb250ZW50UGFnZScsICgpID0+IHtcbiAgICBjb25zdCB2YWxpZERhdGE6IENyZWF0ZUNvbnRlbnRQYWdlRFRPID0ge1xuICAgICAgdGl0bGU6ICdPdXIgU3RvcnknLFxuICAgICAgc2x1ZzogJ291ci1zdG9yeScsXG4gICAgICBzdGF0dXM6ICdkcmFmdCcsXG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHN1Y2Nlc3Mgd2l0aCBjb250ZW50IHBhZ2UgZGF0YSB3aGVuIHZhbGlkIGlucHV0IHByb3ZpZGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0NvbnRlbnRQYWdlID0ge1xuICAgICAgICBpZDogJ3BhZ2UtMScsXG4gICAgICAgIHRpdGxlOiB2YWxpZERhdGEudGl0bGUsXG4gICAgICAgIHNsdWc6IHZhbGlkRGF0YS5zbHVnLFxuICAgICAgICBzdGF0dXM6IHZhbGlkRGF0YS5zdGF0dXMsXG4gICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICB9O1xuXG4gICAgICAvLyBNb2NrIHNsdWcgdW5pcXVlbmVzcyBjaGVjayAobm8gZXhpc3RpbmcgcGFnZSlcbiAgICAgIGNvbnN0IG1vY2tTaW5nbGUxID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgZXJyb3I6IHsgY29kZTogJ1BHUlNUMTE2JyB9LCAvLyBOb3QgZm91bmQgLSBzbHVnIGlzIHVuaXF1ZVxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgY29uc3QgbW9ja0VxMSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBzaW5nbGU6IG1vY2tTaW5nbGUxIH0pO1xuICAgICAgY29uc3QgbW9ja1NlbGVjdDEgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgZXE6IG1vY2tFcTEgfSk7XG4gICAgICBtb2NrRnJvbS5tb2NrUmV0dXJuVmFsdWVPbmNlKHsgc2VsZWN0OiBtb2NrU2VsZWN0MSB9KTtcblxuICAgICAgLy8gTW9jayBpbnNlcnRcbiAgICAgIGNvbnN0IG1vY2tTaW5nbGUyID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbW9ja0NvbnRlbnRQYWdlLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0gYXMgYW55KTtcbiAgICAgIGNvbnN0IG1vY2tTZWxlY3QyID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IHNpbmdsZTogbW9ja1NpbmdsZTIgfSk7XG4gICAgICBjb25zdCBtb2NrSW5zZXJ0ID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IHNlbGVjdDogbW9ja1NlbGVjdDIgfSk7XG4gICAgICBtb2NrRnJvbS5tb2NrUmV0dXJuVmFsdWVPbmNlKHsgaW5zZXJ0OiBtb2NrSW5zZXJ0IH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250ZW50UGFnZXNTZXJ2aWNlLmNyZWF0ZUNvbnRlbnRQYWdlKHZhbGlkRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuaWQpLnRvQmUoJ3BhZ2UtMScpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEudGl0bGUpLnRvQmUoJ091ciBTdG9yeScpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuc2x1ZykudG9CZSgnb3VyLXN0b3J5Jyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5zdGF0dXMpLnRvQmUoJ2RyYWZ0Jyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGF1dG8tZ2VuZXJhdGUgc2x1ZyBmcm9tIHRpdGxlIHdoZW4gc2x1ZyBub3QgcHJvdmlkZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBkYXRhV2l0aG91dFNsdWcgPSB7XG4gICAgICAgIHRpdGxlOiAnVHJhdmVsIEluZm9ybWF0aW9uJyxcbiAgICAgICAgc3RhdHVzOiAnZHJhZnQnIGFzIGNvbnN0LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja0NvbnRlbnRQYWdlID0ge1xuICAgICAgICBpZDogJ3BhZ2UtMicsXG4gICAgICAgIHRpdGxlOiBkYXRhV2l0aG91dFNsdWcudGl0bGUsXG4gICAgICAgIHNsdWc6ICd0cmF2ZWwtaW5mb3JtYXRpb24nLFxuICAgICAgICBzdGF0dXM6IGRhdGFXaXRob3V0U2x1Zy5zdGF0dXMsXG4gICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICB9O1xuXG4gICAgICAvLyBNb2NrIHNsdWcgdW5pcXVlbmVzcyBjaGVja1xuICAgICAgY29uc3QgbW9ja1NpbmdsZTEgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBlcnJvcjogeyBjb2RlOiAnUEdSU1QxMTYnIH0sXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrRXExID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IHNpbmdsZTogbW9ja1NpbmdsZTEgfSk7XG4gICAgICBjb25zdCBtb2NrU2VsZWN0MSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBlcTogbW9ja0VxMSB9KTtcbiAgICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5WYWx1ZU9uY2UoeyBzZWxlY3Q6IG1vY2tTZWxlY3QxIH0pO1xuXG4gICAgICAvLyBNb2NrIGluc2VydFxuICAgICAgY29uc3QgbW9ja1NpbmdsZTIgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBtb2NrQ29udGVudFBhZ2UsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgY29uc3QgbW9ja1NlbGVjdDIgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgc2luZ2xlOiBtb2NrU2luZ2xlMiB9KTtcbiAgICAgIGNvbnN0IG1vY2tJbnNlcnQgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgc2VsZWN0OiBtb2NrU2VsZWN0MiB9KTtcbiAgICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5WYWx1ZU9uY2UoeyBpbnNlcnQ6IG1vY2tJbnNlcnQgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRlbnRQYWdlc1NlcnZpY2UuY3JlYXRlQ29udGVudFBhZ2UoZGF0YVdpdGhvdXRTbHVnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5zbHVnKS50b0JlKCd0cmF2ZWwtaW5mb3JtYXRpb24nKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZW5zdXJlIHVuaXF1ZSBzbHVnIGJ5IGFwcGVuZGluZyBudW1iZXIgd2hlbiBzbHVnIGV4aXN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tDb250ZW50UGFnZSA9IHtcbiAgICAgICAgaWQ6ICdwYWdlLTMnLFxuICAgICAgICB0aXRsZTogdmFsaWREYXRhLnRpdGxlLFxuICAgICAgICBzbHVnOiAnb3VyLXN0b3J5LTInLFxuICAgICAgICBzdGF0dXM6IHZhbGlkRGF0YS5zdGF0dXMsXG4gICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICB9O1xuXG4gICAgICAvLyBNb2NrIGZpcnN0IHNsdWcgY2hlY2sgLSBzbHVnIGV4aXN0c1xuICAgICAgY29uc3QgbW9ja1NpbmdsZTEgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB7IGlkOiAnZXhpc3RpbmctcGFnZScgfSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrRXExID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IHNpbmdsZTogbW9ja1NpbmdsZTEgfSk7XG4gICAgICBjb25zdCBtb2NrU2VsZWN0MSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBlcTogbW9ja0VxMSB9KTtcbiAgICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5WYWx1ZU9uY2UoeyBzZWxlY3Q6IG1vY2tTZWxlY3QxIH0pO1xuXG4gICAgICAvLyBNb2NrIHNlY29uZCBzbHVnIGNoZWNrIC0gc2x1Zy0yIGlzIHVuaXF1ZVxuICAgICAgY29uc3QgbW9ja1NpbmdsZTIgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBlcnJvcjogeyBjb2RlOiAnUEdSU1QxMTYnIH0sXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrRXEyID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IHNpbmdsZTogbW9ja1NpbmdsZTIgfSk7XG4gICAgICBjb25zdCBtb2NrU2VsZWN0MiA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBlcTogbW9ja0VxMiB9KTtcbiAgICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5WYWx1ZU9uY2UoeyBzZWxlY3Q6IG1vY2tTZWxlY3QyIH0pO1xuXG4gICAgICAvLyBNb2NrIGluc2VydFxuICAgICAgY29uc3QgbW9ja1NpbmdsZTMgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBtb2NrQ29udGVudFBhZ2UsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgY29uc3QgbW9ja1NlbGVjdDMgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgc2luZ2xlOiBtb2NrU2luZ2xlMyB9KTtcbiAgICAgIGNvbnN0IG1vY2tJbnNlcnQgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgc2VsZWN0OiBtb2NrU2VsZWN0MyB9KTtcbiAgICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5WYWx1ZU9uY2UoeyBpbnNlcnQ6IG1vY2tJbnNlcnQgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRlbnRQYWdlc1NlcnZpY2UuY3JlYXRlQ29udGVudFBhZ2UodmFsaWREYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5zbHVnKS50b0JlKCdvdXItc3RvcnktMicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIHRpdGxlIGlzIG1pc3NpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkRGF0YSA9IHsgLi4udmFsaWREYXRhLCB0aXRsZTogJycgfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRlbnRQYWdlc1NlcnZpY2UuY3JlYXRlQ29udGVudFBhZ2UoaW52YWxpZERhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIFZBTElEQVRJT05fRVJST1Igd2hlbiBzbHVnIGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWREYXRhID0geyAuLi52YWxpZERhdGEsIHNsdWc6ICdPdXIgU3RvcnkhJyB9O1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udGVudFBhZ2VzU2VydmljZS5jcmVhdGVDb250ZW50UGFnZShpbnZhbGlkRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIHNsdWcgY29udGFpbnMgdXBwZXJjYXNlIGxldHRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkRGF0YSA9IHsgLi4udmFsaWREYXRhLCBzbHVnOiAnT3VyLVN0b3J5JyB9O1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udGVudFBhZ2VzU2VydmljZS5jcmVhdGVDb250ZW50UGFnZShpbnZhbGlkRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIHN0YXR1cyBpcyBpbnZhbGlkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZERhdGEgPSB7IC4uLnZhbGlkRGF0YSwgc3RhdHVzOiAnaW52YWxpZCcgYXMgYW55IH07XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250ZW50UGFnZXNTZXJ2aWNlLmNyZWF0ZUNvbnRlbnRQYWdlKGludmFsaWREYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBEQVRBQkFTRV9FUlJPUiB3aGVuIGluc2VydCBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgc2x1ZyB1bmlxdWVuZXNzIGNoZWNrXG4gICAgICBjb25zdCBtb2NrU2luZ2xlMSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGVycm9yOiB7IGNvZGU6ICdQR1JTVDExNicgfSxcbiAgICAgIH0gYXMgYW55KTtcbiAgICAgIGNvbnN0IG1vY2tFcTEgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgc2luZ2xlOiBtb2NrU2luZ2xlMSB9KTtcbiAgICAgIGNvbnN0IG1vY2tTZWxlY3QxID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IGVxOiBtb2NrRXExIH0pO1xuICAgICAgbW9ja0Zyb20ubW9ja1JldHVyblZhbHVlT25jZSh7IHNlbGVjdDogbW9ja1NlbGVjdDEgfSk7XG5cbiAgICAgIC8vIE1vY2sgaW5zZXJ0IGZhaWx1cmVcbiAgICAgIGNvbnN0IG1vY2tTaW5nbGUyID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ0Nvbm5lY3Rpb24gZmFpbGVkJywgY29kZTogJ0RCX0VSUk9SJyB9LFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgY29uc3QgbW9ja1NlbGVjdDIgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgc2luZ2xlOiBtb2NrU2luZ2xlMiB9KTtcbiAgICAgIGNvbnN0IG1vY2tJbnNlcnQgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgc2VsZWN0OiBtb2NrU2VsZWN0MiB9KTtcbiAgICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5WYWx1ZU9uY2UoeyBpbnNlcnQ6IG1vY2tJbnNlcnQgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRlbnRQYWdlc1NlcnZpY2UuY3JlYXRlQ29udGVudFBhZ2UodmFsaWREYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdEQVRBQkFTRV9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzYW5pdGl6ZSB0aXRsZSB0byBwcmV2ZW50IFhTUyBhdHRhY2tzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWFsaWNpb3VzRGF0YSA9IHtcbiAgICAgICAgLi4udmFsaWREYXRhLFxuICAgICAgICB0aXRsZTogJzxzY3JpcHQ+YWxlcnQoXCJ4c3NcIik8L3NjcmlwdD5PdXIgU3RvcnknLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja0NvbnRlbnRQYWdlID0ge1xuICAgICAgICBpZDogJ3BhZ2UtNCcsXG4gICAgICAgIHRpdGxlOiAnT3VyIFN0b3J5JyxcbiAgICAgICAgc2x1ZzogdmFsaWREYXRhLnNsdWcsXG4gICAgICAgIHN0YXR1czogdmFsaWREYXRhLnN0YXR1cyxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgIH07XG5cbiAgICAgIC8vIE1vY2sgc2x1ZyB1bmlxdWVuZXNzIGNoZWNrXG4gICAgICBjb25zdCBtb2NrU2luZ2xlMSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGVycm9yOiB7IGNvZGU6ICdQR1JTVDExNicgfSxcbiAgICAgIH0gYXMgYW55KTtcbiAgICAgIGNvbnN0IG1vY2tFcTEgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgc2luZ2xlOiBtb2NrU2luZ2xlMSB9KTtcbiAgICAgIGNvbnN0IG1vY2tTZWxlY3QxID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IGVxOiBtb2NrRXExIH0pO1xuICAgICAgbW9ja0Zyb20ubW9ja1JldHVyblZhbHVlT25jZSh7IHNlbGVjdDogbW9ja1NlbGVjdDEgfSk7XG5cbiAgICAgIC8vIE1vY2sgaW5zZXJ0XG4gICAgICBjb25zdCBtb2NrU2luZ2xlMiA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG1vY2tDb250ZW50UGFnZSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrU2VsZWN0MiA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBzaW5nbGU6IG1vY2tTaW5nbGUyIH0pO1xuICAgICAgY29uc3QgbW9ja0luc2VydCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBzZWxlY3Q6IG1vY2tTZWxlY3QyIH0pO1xuICAgICAgbW9ja0Zyb20ubW9ja1JldHVyblZhbHVlT25jZSh7IGluc2VydDogbW9ja0luc2VydCB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udGVudFBhZ2VzU2VydmljZS5jcmVhdGVDb250ZW50UGFnZShtYWxpY2lvdXNEYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS50aXRsZSkubm90LnRvQ29udGFpbignPHNjcmlwdD4nKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnRpdGxlKS5ub3QudG9Db250YWluKCdhbGVydCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndXBkYXRlQ29udGVudFBhZ2UnLCAoKSA9PiB7XG4gICAgY29uc3QgcGFnZUlkID0gJ3BhZ2UtMSc7XG4gICAgY29uc3QgdXBkYXRlRGF0YTogVXBkYXRlQ29udGVudFBhZ2VEVE8gPSB7XG4gICAgICB0aXRsZTogJ1VwZGF0ZWQgU3RvcnknLFxuICAgICAgc3RhdHVzOiAncHVibGlzaGVkJyxcbiAgICB9O1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc3VjY2VzcyB3aXRoIHVwZGF0ZWQgY29udGVudCBwYWdlIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrVXBkYXRlZFBhZ2UgPSB7XG4gICAgICAgIGlkOiBwYWdlSWQsXG4gICAgICAgIHRpdGxlOiB1cGRhdGVEYXRhLnRpdGxlLFxuICAgICAgICBzbHVnOiAnb3VyLXN0b3J5JyxcbiAgICAgICAgc3RhdHVzOiB1cGRhdGVEYXRhLnN0YXR1cyxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDJUMDA6MDA6MDBaJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tTaW5nbGUgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBtb2NrVXBkYXRlZFBhZ2UsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgY29uc3QgbW9ja1NlbGVjdCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBzaW5nbGU6IG1vY2tTaW5nbGUgfSk7XG4gICAgICBjb25zdCBtb2NrRXEgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgc2VsZWN0OiBtb2NrU2VsZWN0IH0pO1xuICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBlcTogbW9ja0VxIH0pO1xuICAgICAgbW9ja0Zyb20ubW9ja1JldHVyblZhbHVlKHsgdXBkYXRlOiBtb2NrVXBkYXRlIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250ZW50UGFnZXNTZXJ2aWNlLnVwZGF0ZUNvbnRlbnRQYWdlKHBhZ2VJZCwgdXBkYXRlRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEudGl0bGUpLnRvQmUoJ1VwZGF0ZWQgU3RvcnknKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnN0YXR1cykudG9CZSgncHVibGlzaGVkJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSBvbmx5IHN0YXR1cyB3aGVuIHByb3ZpZGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXBkYXRlV2l0aFN0YXR1cyA9IHtcbiAgICAgICAgc3RhdHVzOiAncHVibGlzaGVkJyBhcyBjb25zdCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tVcGRhdGVkUGFnZSA9IHtcbiAgICAgICAgaWQ6IHBhZ2VJZCxcbiAgICAgICAgdGl0bGU6ICdPdXIgU3RvcnknLFxuICAgICAgICBzbHVnOiAnb3VyLXN0b3J5JyxcbiAgICAgICAgc3RhdHVzOiAncHVibGlzaGVkJyxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDJUMDA6MDA6MDBaJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tTaW5nbGUgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBtb2NrVXBkYXRlZFBhZ2UsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgY29uc3QgbW9ja1NlbGVjdCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBzaW5nbGU6IG1vY2tTaW5nbGUgfSk7XG4gICAgICBjb25zdCBtb2NrRXEgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgc2VsZWN0OiBtb2NrU2VsZWN0IH0pO1xuICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBlcTogbW9ja0VxIH0pO1xuICAgICAgbW9ja0Zyb20ubW9ja1JldHVyblZhbHVlKHsgdXBkYXRlOiBtb2NrVXBkYXRlIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250ZW50UGFnZXNTZXJ2aWNlLnVwZGF0ZUNvbnRlbnRQYWdlKHBhZ2VJZCwgdXBkYXRlV2l0aFN0YXR1cyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuc3RhdHVzKS50b0JlKCdwdWJsaXNoZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIFZBTElEQVRJT05fRVJST1Igd2hlbiB0aXRsZSBpcyBlbXB0eScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWREYXRhID0geyB0aXRsZTogJycgfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRlbnRQYWdlc1NlcnZpY2UudXBkYXRlQ29udGVudFBhZ2UocGFnZUlkLCBpbnZhbGlkRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIHNsdWcgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZERhdGEgPSB7IHNsdWc6ICdJbnZhbGlkIFNsdWchJyB9O1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udGVudFBhZ2VzU2VydmljZS51cGRhdGVDb250ZW50UGFnZShwYWdlSWQsIGludmFsaWREYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBEQVRBQkFTRV9FUlJPUiB3aGVuIHBhZ2UgZG9lcyBub3QgZXhpc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1cGRhdGVXaXRoVGl0bGUgPSB7IHRpdGxlOiAnVXBkYXRlZCBTdG9yeScgfTtcbiAgICAgIFxuICAgICAgY29uc3QgbW9ja1NpbmdsZSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGVycm9yOiB7IGNvZGU6ICdQR1JTVDExNicsIG1lc3NhZ2U6ICdOb3QgZm91bmQnIH0sXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrU2VsZWN0ID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IHNpbmdsZTogbW9ja1NpbmdsZSB9KTtcbiAgICAgIGNvbnN0IG1vY2tFcSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBzZWxlY3Q6IG1vY2tTZWxlY3QgfSk7XG4gICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IGVxOiBtb2NrRXEgfSk7XG4gICAgICBtb2NrRnJvbS5tb2NrUmV0dXJuVmFsdWUoeyB1cGRhdGU6IG1vY2tVcGRhdGUgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRlbnRQYWdlc1NlcnZpY2UudXBkYXRlQ29udGVudFBhZ2UocGFnZUlkLCB1cGRhdGVXaXRoVGl0bGUpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ05PVF9GT1VORCcpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gREFUQUJBU0VfRVJST1Igd2hlbiB1cGRhdGUgZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrU2luZ2xlID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ0Nvbm5lY3Rpb24gZmFpbGVkJywgY29kZTogJ0RCX0VSUk9SJyB9LFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgY29uc3QgbW9ja1NlbGVjdCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBzaW5nbGU6IG1vY2tTaW5nbGUgfSk7XG4gICAgICBjb25zdCBtb2NrRXEgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgc2VsZWN0OiBtb2NrU2VsZWN0IH0pO1xuICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBlcTogbW9ja0VxIH0pO1xuICAgICAgbW9ja0Zyb20ubW9ja1JldHVyblZhbHVlKHsgdXBkYXRlOiBtb2NrVXBkYXRlIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250ZW50UGFnZXNTZXJ2aWNlLnVwZGF0ZUNvbnRlbnRQYWdlKHBhZ2VJZCwgdXBkYXRlRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnREFUQUJBU0VfRVJST1InKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2FuaXRpemUgdGl0bGUgdG8gcHJldmVudCBYU1MgYXR0YWNrcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1hbGljaW91c0RhdGEgPSB7XG4gICAgICAgIHRpdGxlOiAnPGltZyBzcmM9eCBvbmVycm9yPWFsZXJ0KDEpPlVwZGF0ZWQgU3RvcnknLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja1VwZGF0ZWRQYWdlID0ge1xuICAgICAgICBpZDogcGFnZUlkLFxuICAgICAgICB0aXRsZTogJ1VwZGF0ZWQgU3RvcnknLFxuICAgICAgICBzbHVnOiAnb3VyLXN0b3J5JyxcbiAgICAgICAgc3RhdHVzOiAnZHJhZnQnLFxuICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMlQwMDowMDowMFonLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja1NpbmdsZSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG1vY2tVcGRhdGVkUGFnZSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrU2VsZWN0ID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IHNpbmdsZTogbW9ja1NpbmdsZSB9KTtcbiAgICAgIGNvbnN0IG1vY2tFcSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBzZWxlY3Q6IG1vY2tTZWxlY3QgfSk7XG4gICAgICBjb25zdCBtb2NrVXBkYXRlID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IGVxOiBtb2NrRXEgfSk7XG4gICAgICBtb2NrRnJvbS5tb2NrUmV0dXJuVmFsdWUoeyB1cGRhdGU6IG1vY2tVcGRhdGUgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRlbnRQYWdlc1NlcnZpY2UudXBkYXRlQ29udGVudFBhZ2UocGFnZUlkLCBtYWxpY2lvdXNEYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS50aXRsZSkubm90LnRvQ29udGFpbignPGltZycpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEudGl0bGUpLm5vdC50b0NvbnRhaW4oJ29uZXJyb3InKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2RlbGV0ZUNvbnRlbnRQYWdlJywgKCkgPT4ge1xuICAgIGNvbnN0IHBhZ2VJZCA9ICdwYWdlLTEnO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc3VjY2VzcyB3aGVuIHBhZ2UgaXMgZGVsZXRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgZGVsZXRlIHNlY3Rpb25zXG4gICAgICBjb25zdCBtb2NrRXExID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrRXEyID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IGVxOiBtb2NrRXExIH0pO1xuICAgICAgY29uc3QgbW9ja0RlbGV0ZTEgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgZXE6IG1vY2tFcTIgfSk7XG4gICAgICBtb2NrRnJvbS5tb2NrUmV0dXJuVmFsdWVPbmNlKHsgZGVsZXRlOiBtb2NrRGVsZXRlMSB9KTtcblxuICAgICAgLy8gTW9jayBkZWxldGUgY29udGVudCBwYWdlXG4gICAgICBjb25zdCBtb2NrRXEzID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrRGVsZXRlMiA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBlcTogbW9ja0VxMyB9KTtcbiAgICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5WYWx1ZU9uY2UoeyBkZWxldGU6IG1vY2tEZWxldGUyIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250ZW50UGFnZXNTZXJ2aWNlLmRlbGV0ZUNvbnRlbnRQYWdlKHBhZ2VJZCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGVsZXRlIGFzc29jaWF0ZWQgc2VjdGlvbnMgYmVmb3JlIGRlbGV0aW5nIHBhZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRXExID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrRXEyID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IGVxOiBtb2NrRXExIH0pO1xuICAgICAgY29uc3QgbW9ja0RlbGV0ZVNlY3Rpb25zID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IGVxOiBtb2NrRXEyIH0pO1xuXG4gICAgICBjb25zdCBtb2NrRXEzID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrRGVsZXRlUGFnZSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBlcTogbW9ja0VxMyB9KTtcblxuICAgICAgLy8gTW9jayBkZWxldGUgc2VjdGlvbnNcbiAgICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5WYWx1ZU9uY2UoeyBkZWxldGU6IG1vY2tEZWxldGVTZWN0aW9ucyB9KTtcblxuICAgICAgLy8gTW9jayBkZWxldGUgY29udGVudCBwYWdlXG4gICAgICBtb2NrRnJvbS5tb2NrUmV0dXJuVmFsdWVPbmNlKHsgZGVsZXRlOiBtb2NrRGVsZXRlUGFnZSB9KTtcblxuICAgICAgYXdhaXQgY29udGVudFBhZ2VzU2VydmljZS5kZWxldGVDb250ZW50UGFnZShwYWdlSWQpO1xuXG4gICAgICAvLyBWZXJpZnkgc2VjdGlvbnMgd2VyZSBkZWxldGVkIGZpcnN0XG4gICAgICBleHBlY3QobW9ja0RlbGV0ZVNlY3Rpb25zKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja0RlbGV0ZVBhZ2UpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIERBVEFCQVNFX0VSUk9SIHdoZW4gZGVsZXRlIGZhaWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBkZWxldGUgc2VjdGlvbnMgc3VjY2Vzc1xuICAgICAgY29uc3QgbW9ja0VxMSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgY29uc3QgbW9ja0VxMiA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBlcTogbW9ja0VxMSB9KTtcbiAgICAgIGNvbnN0IG1vY2tEZWxldGUxID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IGVxOiBtb2NrRXEyIH0pO1xuICAgICAgbW9ja0Zyb20ubW9ja1JldHVyblZhbHVlT25jZSh7IGRlbGV0ZTogbW9ja0RlbGV0ZTEgfSk7XG5cbiAgICAgIC8vIE1vY2sgZGVsZXRlIGNvbnRlbnQgcGFnZSBmYWlsdXJlXG4gICAgICBjb25zdCBtb2NrRXEzID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ0Nvbm5lY3Rpb24gZmFpbGVkJywgY29kZTogJ0RCX0VSUk9SJyB9LFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgY29uc3QgbW9ja0RlbGV0ZTIgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgZXE6IG1vY2tFcTMgfSk7XG4gICAgICBtb2NrRnJvbS5tb2NrUmV0dXJuVmFsdWVPbmNlKHsgZGVsZXRlOiBtb2NrRGVsZXRlMiB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udGVudFBhZ2VzU2VydmljZS5kZWxldGVDb250ZW50UGFnZShwYWdlSWQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ0RBVEFCQVNFX0VSUk9SJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRDb250ZW50UGFnZScsICgpID0+IHtcbiAgICBjb25zdCBwYWdlSWQgPSAncGFnZS0xJztcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHN1Y2Nlc3Mgd2l0aCBjb250ZW50IHBhZ2UgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tDb250ZW50UGFnZSA9IHtcbiAgICAgICAgaWQ6IHBhZ2VJZCxcbiAgICAgICAgdGl0bGU6ICdPdXIgU3RvcnknLFxuICAgICAgICBzbHVnOiAnb3VyLXN0b3J5JyxcbiAgICAgICAgc3RhdHVzOiAncHVibGlzaGVkJyxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tTaW5nbGUgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBtb2NrQ29udGVudFBhZ2UsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgY29uc3QgbW9ja0VxID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IHNpbmdsZTogbW9ja1NpbmdsZSB9KTtcbiAgICAgIGNvbnN0IG1vY2tTZWxlY3QgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgZXE6IG1vY2tFcSB9KTtcbiAgICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5WYWx1ZSh7IHNlbGVjdDogbW9ja1NlbGVjdCB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udGVudFBhZ2VzU2VydmljZS5nZXRDb250ZW50UGFnZShwYWdlSWQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmlkKS50b0JlKHBhZ2VJZCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS50aXRsZSkudG9CZSgnT3VyIFN0b3J5Jyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBOT1RfRk9VTkQgd2hlbiBwYWdlIGRvZXMgbm90IGV4aXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1NpbmdsZSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGVycm9yOiB7IGNvZGU6ICdQR1JTVDExNicsIG1lc3NhZ2U6ICdOb3QgZm91bmQnIH0sXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrRXEgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgc2luZ2xlOiBtb2NrU2luZ2xlIH0pO1xuICAgICAgY29uc3QgbW9ja1NlbGVjdCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBlcTogbW9ja0VxIH0pO1xuICAgICAgbW9ja0Zyb20ubW9ja1JldHVyblZhbHVlKHsgc2VsZWN0OiBtb2NrU2VsZWN0IH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250ZW50UGFnZXNTZXJ2aWNlLmdldENvbnRlbnRQYWdlKHBhZ2VJZCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnTk9UX0ZPVU5EJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRDb250ZW50UGFnZUJ5U2x1ZycsICgpID0+IHtcbiAgICBjb25zdCBzbHVnID0gJ291ci1zdG9yeSc7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBzdWNjZXNzIHdpdGggY29udGVudCBwYWdlIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQ29udGVudFBhZ2UgPSB7XG4gICAgICAgIGlkOiAncGFnZS0xJyxcbiAgICAgICAgdGl0bGU6ICdPdXIgU3RvcnknLFxuICAgICAgICBzbHVnOiBzbHVnLFxuICAgICAgICBzdGF0dXM6ICdwdWJsaXNoZWQnLFxuICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja1NpbmdsZSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG1vY2tDb250ZW50UGFnZSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrRXEgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgc2luZ2xlOiBtb2NrU2luZ2xlIH0pO1xuICAgICAgY29uc3QgbW9ja1NlbGVjdCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBlcTogbW9ja0VxIH0pO1xuICAgICAgbW9ja0Zyb20ubW9ja1JldHVyblZhbHVlKHsgc2VsZWN0OiBtb2NrU2VsZWN0IH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250ZW50UGFnZXNTZXJ2aWNlLmdldENvbnRlbnRQYWdlQnlTbHVnKHNsdWcpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnNsdWcpLnRvQmUoc2x1Zyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS50aXRsZSkudG9CZSgnT3VyIFN0b3J5Jyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBOT1RfRk9VTkQgd2hlbiBzbHVnIGRvZXMgbm90IGV4aXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1NpbmdsZSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGVycm9yOiB7IGNvZGU6ICdQR1JTVDExNicsIG1lc3NhZ2U6ICdOb3QgZm91bmQnIH0sXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrRXEgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgc2luZ2xlOiBtb2NrU2luZ2xlIH0pO1xuICAgICAgY29uc3QgbW9ja1NlbGVjdCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBlcTogbW9ja0VxIH0pO1xuICAgICAgbW9ja0Zyb20ubW9ja1JldHVyblZhbHVlKHsgc2VsZWN0OiBtb2NrU2VsZWN0IH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250ZW50UGFnZXNTZXJ2aWNlLmdldENvbnRlbnRQYWdlQnlTbHVnKHNsdWcpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ05PVF9GT1VORCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbGlzdENvbnRlbnRQYWdlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBzdWNjZXNzIHdpdGggYWxsIGNvbnRlbnQgcGFnZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUGFnZXMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3BhZ2UtMScsXG4gICAgICAgICAgdGl0bGU6ICdPdXIgU3RvcnknLFxuICAgICAgICAgIHNsdWc6ICdvdXItc3RvcnknLFxuICAgICAgICAgIHN0YXR1czogJ3B1Ymxpc2hlZCcsXG4gICAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdwYWdlLTInLFxuICAgICAgICAgIHRpdGxlOiAnVHJhdmVsIEluZm8nLFxuICAgICAgICAgIHNsdWc6ICd0cmF2ZWwtaW5mbycsXG4gICAgICAgICAgc3RhdHVzOiAnZHJhZnQnLFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAyVDAwOjAwOjAwWicsXG4gICAgICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDJUMDA6MDA6MDBaJyxcbiAgICAgICAgfSxcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IG1vY2tPcmRlciA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG1vY2tQYWdlcyxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrU2VsZWN0ID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IG9yZGVyOiBtb2NrT3JkZXIgfSk7XG4gICAgICBtb2NrRnJvbS5tb2NrUmV0dXJuVmFsdWUoeyBzZWxlY3Q6IG1vY2tTZWxlY3QgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRlbnRQYWdlc1NlcnZpY2UubGlzdENvbnRlbnRQYWdlcygpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVswXS50aXRsZSkudG9CZSgnT3VyIFN0b3J5Jyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVsxXS50aXRsZSkudG9CZSgnVHJhdmVsIEluZm8nKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmlsdGVyIGJ5IHN0YXR1cyB3aGVuIHByb3ZpZGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1BhZ2VzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdwYWdlLTEnLFxuICAgICAgICAgIHRpdGxlOiAnT3VyIFN0b3J5JyxcbiAgICAgICAgICBzbHVnOiAnb3VyLXN0b3J5JyxcbiAgICAgICAgICBzdGF0dXM6ICdwdWJsaXNoZWQnLFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgfSxcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IG1vY2tFcSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG1vY2tQYWdlcyxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrT3JkZXIgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgZXE6IG1vY2tFcSB9KTtcbiAgICAgIGNvbnN0IG1vY2tTZWxlY3QgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgb3JkZXI6IG1vY2tPcmRlciB9KTtcbiAgICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5WYWx1ZSh7IHNlbGVjdDogbW9ja1NlbGVjdCB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udGVudFBhZ2VzU2VydmljZS5saXN0Q29udGVudFBhZ2VzKHsgc3RhdHVzOiAncHVibGlzaGVkJyB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGFbMF0uc3RhdHVzKS50b0JlKCdwdWJsaXNoZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVtcHR5IGFycmF5IHdoZW4gbm8gcGFnZXMgZXhpc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrT3JkZXIgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrU2VsZWN0ID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IG9yZGVyOiBtb2NrT3JkZXIgfSk7XG4gICAgICBtb2NrRnJvbS5tb2NrUmV0dXJuVmFsdWUoeyBzZWxlY3Q6IG1vY2tTZWxlY3QgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRlbnRQYWdlc1NlcnZpY2UubGlzdENvbnRlbnRQYWdlcygpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBEQVRBQkFTRV9FUlJPUiB3aGVuIHF1ZXJ5IGZhaWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja09yZGVyID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ0Nvbm5lY3Rpb24gZmFpbGVkJywgY29kZTogJ0RCX0VSUk9SJyB9LFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgY29uc3QgbW9ja1NlbGVjdCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBvcmRlcjogbW9ja09yZGVyIH0pO1xuICAgICAgbW9ja0Zyb20ubW9ja1JldHVyblZhbHVlKHsgc2VsZWN0OiBtb2NrU2VsZWN0IH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250ZW50UGFnZXNTZXJ2aWNlLmxpc3RDb250ZW50UGFnZXMoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdEQVRBQkFTRV9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbIm1vY2tGcm9tIiwiamVzdCIsImZuIiwibW9jayIsInN1cGFiYXNlIiwiZnJvbSIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsInNsdWciLCJnZW5lcmF0ZVNsdWciLCJleHBlY3QiLCJ0b0JlIiwidmFsaWREYXRhIiwidGl0bGUiLCJzdGF0dXMiLCJtb2NrQ29udGVudFBhZ2UiLCJpZCIsImNyZWF0ZWRfYXQiLCJ1cGRhdGVkX2F0IiwibW9ja1NpbmdsZTEiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImRhdGEiLCJlcnJvciIsImNvZGUiLCJtb2NrRXExIiwibW9ja1JldHVyblZhbHVlIiwic2luZ2xlIiwibW9ja1NlbGVjdDEiLCJlcSIsIm1vY2tSZXR1cm5WYWx1ZU9uY2UiLCJzZWxlY3QiLCJtb2NrU2luZ2xlMiIsIm1vY2tTZWxlY3QyIiwibW9ja0luc2VydCIsImluc2VydCIsInJlc3VsdCIsImNvbnRlbnRQYWdlc1NlcnZpY2UiLCJjcmVhdGVDb250ZW50UGFnZSIsInN1Y2Nlc3MiLCJkYXRhV2l0aG91dFNsdWciLCJtb2NrRXEyIiwibW9ja1NpbmdsZTMiLCJtb2NrU2VsZWN0MyIsImludmFsaWREYXRhIiwibWVzc2FnZSIsIm1hbGljaW91c0RhdGEiLCJub3QiLCJ0b0NvbnRhaW4iLCJwYWdlSWQiLCJ1cGRhdGVEYXRhIiwibW9ja1VwZGF0ZWRQYWdlIiwibW9ja1NpbmdsZSIsIm1vY2tTZWxlY3QiLCJtb2NrRXEiLCJtb2NrVXBkYXRlIiwidXBkYXRlIiwidXBkYXRlQ29udGVudFBhZ2UiLCJ1cGRhdGVXaXRoU3RhdHVzIiwidXBkYXRlV2l0aFRpdGxlIiwibW9ja0RlbGV0ZTEiLCJkZWxldGUiLCJtb2NrRXEzIiwibW9ja0RlbGV0ZTIiLCJkZWxldGVDb250ZW50UGFnZSIsIm1vY2tEZWxldGVTZWN0aW9ucyIsIm1vY2tEZWxldGVQYWdlIiwidG9IYXZlQmVlbkNhbGxlZCIsImdldENvbnRlbnRQYWdlIiwiZ2V0Q29udGVudFBhZ2VCeVNsdWciLCJtb2NrUGFnZXMiLCJtb2NrT3JkZXIiLCJvcmRlciIsImxpc3RDb250ZW50UGFnZXMiLCJ0b0hhdmVMZW5n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