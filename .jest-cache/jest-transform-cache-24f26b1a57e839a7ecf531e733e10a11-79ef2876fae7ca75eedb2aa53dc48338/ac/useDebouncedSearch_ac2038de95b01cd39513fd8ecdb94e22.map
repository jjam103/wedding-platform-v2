{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/hooks/useDebouncedSearch.ts"],"sourcesContent":["import { useState, useEffect, useCallback, useRef } from 'react';\n\n/**\n * Custom hook for debounced search with loading indicator\n * \n * Features:\n * - 300ms debounce delay\n * - Loading state during debounce\n * - Cancels pending searches on unmount\n * - Provides immediate value for controlled input\n * \n * @param initialValue - Initial search value\n * @param delay - Debounce delay in milliseconds (default: 300)\n * @returns Object with value, debouncedValue, isSearching, and setValue\n */\nexport function useDebouncedSearch(initialValue: string = '', delay: number = 300) {\n  const [value, setValue] = useState(initialValue);\n  const [debouncedValue, setDebouncedValue] = useState(initialValue);\n  const [isSearching, setIsSearching] = useState(false);\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  useEffect(() => {\n    // Clear any existing timeout\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n\n    // Set loading state if value is different from debounced value\n    if (value !== debouncedValue) {\n      setIsSearching(true);\n    }\n\n    // Set new timeout\n    timeoutRef.current = setTimeout(() => {\n      setDebouncedValue(value);\n      setIsSearching(false);\n    }, delay);\n\n    // Cleanup on unmount or when value changes\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, [value, delay, debouncedValue]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, []);\n\n  const handleChange = useCallback((newValue: string) => {\n    setValue(newValue);\n  }, []);\n\n  const reset = useCallback(() => {\n    setValue('');\n    setDebouncedValue('');\n    setIsSearching(false);\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n  }, []);\n\n  return {\n    value,\n    debouncedValue,\n    isSearching,\n    setValue: handleChange,\n    reset,\n  };\n}\n\n/**\n * Custom hook for debounced value (generic)\n * \n * @param value - Value to debounce\n * @param delay - Debounce delay in milliseconds (default: 300)\n * @returns Debounced value\n */\nexport function useDebounce<T>(value: T, delay: number = 300): T {\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\n/**\n * Custom hook for debounced callback\n * \n * @param callback - Function to debounce\n * @param delay - Debounce delay in milliseconds (default: 300)\n * @returns Debounced callback function\n */\nexport function useDebouncedCallback<T extends (...args: any[]) => any>(\n  callback: T,\n  delay: number = 300\n): (...args: Parameters<T>) => void {\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const callbackRef = useRef(callback);\n\n  // Update callback ref when callback changes\n  useEffect(() => {\n    callbackRef.current = callback;\n  }, [callback]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, []);\n\n  return useCallback(\n    (...args: Parameters<T>) => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n\n      timeoutRef.current = setTimeout(() => {\n        callbackRef.current(...args);\n      }, delay);\n    },\n    [delay]\n  );\n}\n"],"names":["useDebounce","useDebouncedCallback","useDebouncedSearch","initialValue","delay","value","setValue","useState","debouncedValue","setDebouncedValue","isSearching","setIsSearching","timeoutRef","useRef","useEffect","current","clearTimeout","setTimeout","handleChange","useCallback","newValue","reset","handler","callback","callbackRef","args"],"mappings":";;;;;;;;;;;QAoFgBA;eAAAA;;QAuBAC;eAAAA;;QA5FAC;eAAAA;;;uBAfyC;AAelD,SAASA,mBAAmBC,eAAuB,EAAE,EAAEC,QAAgB,GAAG;IAC/E,MAAM,CAACC,OAAOC,SAAS,GAAGC,IAAAA,eAAQ,EAACJ;IACnC,MAAM,CAACK,gBAAgBC,kBAAkB,GAAGF,IAAAA,eAAQ,EAACJ;IACrD,MAAM,CAACO,aAAaC,eAAe,GAAGJ,IAAAA,eAAQ,EAAC;IAC/C,MAAMK,aAAaC,IAAAA,aAAM,EAAwB;IAEjDC,IAAAA,gBAAS,EAAC;QACR,6BAA6B;QAC7B,IAAIF,WAAWG,OAAO,EAAE;YACtBC,aAAaJ,WAAWG,OAAO;QACjC;QAEA,+DAA+D;QAC/D,IAAIV,UAAUG,gBAAgB;YAC5BG,eAAe;QACjB;QAEA,kBAAkB;QAClBC,WAAWG,OAAO,GAAGE,WAAW;YAC9BR,kBAAkBJ;YAClBM,eAAe;QACjB,GAAGP;QAEH,2CAA2C;QAC3C,OAAO;YACL,IAAIQ,WAAWG,OAAO,EAAE;gBACtBC,aAAaJ,WAAWG,OAAO;YACjC;QACF;IACF,GAAG;QAACV;QAAOD;QAAOI;KAAe;IAEjC,qBAAqB;IACrBM,IAAAA,gBAAS,EAAC;QACR,OAAO;YACL,IAAIF,WAAWG,OAAO,EAAE;gBACtBC,aAAaJ,WAAWG,OAAO;YACjC;QACF;IACF,GAAG,EAAE;IAEL,MAAMG,eAAeC,IAAAA,kBAAW,EAAC,CAACC;QAChCd,SAASc;IACX,GAAG,EAAE;IAEL,MAAMC,QAAQF,IAAAA,kBAAW,EAAC;QACxBb,SAAS;QACTG,kBAAkB;QAClBE,eAAe;QACf,IAAIC,WAAWG,OAAO,EAAE;YACtBC,aAAaJ,WAAWG,OAAO;QACjC;IACF,GAAG,EAAE;IAEL,OAAO;QACLV;QACAG;QACAE;QACAJ,UAAUY;QACVG;IACF;AACF;AASO,SAASrB,YAAeK,KAAQ,EAAED,QAAgB,GAAG;IAC1D,MAAM,CAACI,gBAAgBC,kBAAkB,GAAGF,IAAAA,eAAQ,EAAIF;IAExDS,IAAAA,gBAAS,EAAC;QACR,MAAMQ,UAAUL,WAAW;YACzBR,kBAAkBJ;QACpB,GAAGD;QAEH,OAAO;YACLY,aAAaM;QACf;IACF,GAAG;QAACjB;QAAOD;KAAM;IAEjB,OAAOI;AACT;AASO,SAASP,qBACdsB,QAAW,EACXnB,QAAgB,GAAG;IAEnB,MAAMQ,aAAaC,IAAAA,aAAM,EAAwB;IACjD,MAAMW,cAAcX,IAAAA,aAAM,EAACU;IAE3B,4CAA4C;IAC5CT,IAAAA,gBAAS,EAAC;QACRU,YAAYT,OAAO,GAAGQ;IACxB,GAAG;QAACA;KAAS;IAEb,qBAAqB;IACrBT,IAAAA,gBAAS,EAAC;QACR,OAAO;YACL,IAAIF,WAAWG,OAAO,EAAE;gBACtBC,aAAaJ,WAAWG,OAAO;YACjC;QACF;IACF,GAAG,EAAE;IAEL,OAAOI,IAAAA,kBAAW,EAChB,CAAC,GAAGM;QACF,IAAIb,WAAWG,OAAO,EAAE;YACtBC,aAAaJ,WAAWG,OAAO;QACjC;QAEAH,WAAWG,OAAO,GAAGE,WAAW;YAC9BO,YAAYT,OAAO,IAAIU;QACzB,GAAGrB;IACL,GACA;QAACA;KAAM;AAEX"}