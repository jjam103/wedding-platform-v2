d763f6e23c9729c97b0d5e3b16510a5b
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "ActivityPreviewModal", {
    enumerable: true,
    get: function() {
        return ActivityPreviewModal;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const _navigation = require("next/navigation");
const _Button = require("../ui/Button");
function ActivityPreviewModal({ activityId, onClose }) {
    const router = (0, _navigation.useRouter)();
    const [activity, setActivity] = (0, _react.useState)(null);
    const [rsvpStatus, setRsvpStatus] = (0, _react.useState)(null);
    const [loading, setLoading] = (0, _react.useState)(true);
    const [error, setError] = (0, _react.useState)(null);
    (0, _react.useEffect)(()=>{
        async function fetchActivityData() {
            try {
                setLoading(true);
                setError(null);
                // Fetch activity details
                const activityResponse = await fetch(`/api/guest/activities/${activityId}`);
                if (!activityResponse.ok) {
                    throw new Error('Failed to load activity');
                }
                const activityResult = await activityResponse.json();
                if (!activityResult.success) {
                    throw new Error(activityResult.error?.message || 'Failed to load activity');
                }
                setActivity(activityResult.data);
                // Fetch RSVP status
                const rsvpResponse = await fetch(`/api/guest/rsvps?activityId=${activityId}`);
                if (rsvpResponse.ok) {
                    const rsvpResult = await rsvpResponse.json();
                    if (rsvpResult.success && rsvpResult.data.length > 0) {
                        setRsvpStatus(rsvpResult.data[0]);
                    }
                }
            } catch (err) {
                setError(err instanceof Error ? err.message : 'Failed to load activity');
            } finally{
                setLoading(false);
            }
        }
        fetchActivityData();
    }, [
        activityId
    ]);
    const handleViewFullDetails = ()=>{
        if (activity?.slug) {
            router.push(`/activity/${activity.slug}`);
        } else {
            router.push(`/activity/${activityId}`);
        }
        onClose();
    };
    const handleRSVPNow = ()=>{
        router.push(`/guest/rsvp?activityId=${activityId}`);
        onClose();
    };
    const getStatusBadge = ()=>{
        if (!rsvpStatus) return null;
        const badges = {
            attending: {
                label: 'Attending',
                color: 'green'
            },
            declined: {
                label: 'Declined',
                color: 'red'
            },
            maybe: {
                label: 'Maybe',
                color: 'yellow'
            },
            pending: {
                label: 'Pending',
                color: 'gray'
            }
        };
        const badge = badges[rsvpStatus.status];
        return /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
            className: `inline-block px-3 py-1 text-sm font-medium bg-${badge.color}-100 text-${badge.color}-800 rounded-full`,
            children: badge.label
        });
    };
    const getCapacityStatus = ()=>{
        if (!activity?.capacity) return null;
        const remaining = activity.capacityRemaining ?? activity.capacity;
        const percentFull = (activity.capacity - remaining) / activity.capacity * 100;
        let statusColor = 'green';
        let statusText = 'Available';
        if (remaining === 0) {
            statusColor = 'red';
            statusText = 'Full';
        } else if (percentFull >= 90) {
            statusColor = 'yellow';
            statusText = 'Almost Full';
        }
        return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
            className: "flex items-center gap-2",
            children: [
                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                    className: `inline-block w-2 h-2 rounded-full bg-${statusColor}-500`
                }),
                /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                    className: "text-sm font-medium text-gray-700",
                    children: [
                        remaining,
                        " / ",
                        activity.capacity,
                        " spots ",
                        statusText
                    ]
                })
            ]
        });
    };
    const getGuestCost = ()=>{
        if (!activity?.cost) return null;
        const subsidy = activity.hostSubsidy || 0;
        const guestCost = activity.cost - subsidy;
        return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
            children: [
                /*#__PURE__*/ (0, _jsxruntime.jsxs)("p", {
                    className: "text-2xl font-bold text-gray-900",
                    children: [
                        "$",
                        guestCost.toFixed(2)
                    ]
                }),
                subsidy > 0 && /*#__PURE__*/ (0, _jsxruntime.jsxs)("p", {
                    className: "text-sm text-gray-500",
                    children: [
                        "($",
                        activity.cost.toFixed(2),
                        " - $",
                        subsidy.toFixed(2),
                        " host subsidy)"
                    ]
                })
            ]
        });
    };
    // Handle click outside modal
    const handleBackdropClick = (e)=>{
        if (e.target === e.currentTarget) {
            onClose();
        }
    };
    // Handle escape key
    (0, _react.useEffect)(()=>{
        const handleEscape = (e)=>{
            if (e.key === 'Escape') {
                onClose();
            }
        };
        document.addEventListener('keydown', handleEscape);
        return ()=>document.removeEventListener('keydown', handleEscape);
    }, [
        onClose
    ]);
    return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
        className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 animate-fadeIn",
        onClick: handleBackdropClick,
        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
            className: "bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-slideUp",
            children: [
                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                            className: "text-2xl font-bold text-gray-900",
                            children: "Activity Preview"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                            onClick: onClose,
                            className: "text-gray-400 hover:text-gray-600 transition-colors",
                            "aria-label": "Close",
                            children: /*#__PURE__*/ (0, _jsxruntime.jsx)("svg", {
                                className: "w-6 h-6",
                                fill: "none",
                                stroke: "currentColor",
                                viewBox: "0 0 24 24",
                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("path", {
                                    strokeLinecap: "round",
                                    strokeLinejoin: "round",
                                    strokeWidth: 2,
                                    d: "M6 18L18 6M6 6l12 12"
                                })
                            })
                        })
                    ]
                }),
                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "p-6",
                    children: [
                        loading && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            className: "flex items-center justify-center py-12",
                            children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"
                            })
                        }),
                        error && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            className: "bg-red-50 border border-red-200 rounded-lg p-4 text-red-800",
                            children: error
                        }),
                        !loading && !error && activity && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "space-y-6",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                            className: "flex items-start justify-between gap-4 mb-2",
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("h3", {
                                                    className: "text-3xl font-bold text-gray-900",
                                                    children: activity.title
                                                }),
                                                getStatusBadge()
                                            ]
                                        }),
                                        rsvpStatus?.guestCount && /*#__PURE__*/ (0, _jsxruntime.jsxs)("p", {
                                            className: "text-sm text-gray-600",
                                            children: [
                                                "Guest count: ",
                                                rsvpStatus.guestCount
                                            ]
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "space-y-3",
                                    children: [
                                        activity.date && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                            className: "flex items-center gap-3",
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                    className: "text-2xl",
                                                    children: "\uD83D\uDCC5"
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                    children: [
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                            className: "text-sm font-medium text-gray-500",
                                                            children: "Date"
                                                        }),
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                            className: "text-lg text-gray-900",
                                                            children: new Date(activity.date).toLocaleDateString('en-US', {
                                                                weekday: 'long',
                                                                year: 'numeric',
                                                                month: 'long',
                                                                day: 'numeric'
                                                            })
                                                        })
                                                    ]
                                                })
                                            ]
                                        }),
                                        activity.time && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                            className: "flex items-center gap-3",
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                    className: "text-2xl",
                                                    children: "\uD83D\uDD50"
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                    children: [
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                            className: "text-sm font-medium text-gray-500",
                                                            children: "Time"
                                                        }),
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                            className: "text-lg text-gray-900",
                                                            children: activity.time
                                                        })
                                                    ]
                                                })
                                            ]
                                        }),
                                        activity.location && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                            className: "flex items-center gap-3",
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                    className: "text-2xl",
                                                    children: "\uD83D\uDCCD"
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                    children: [
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                            className: "text-sm font-medium text-gray-500",
                                                            children: "Location"
                                                        }),
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                            className: "text-lg text-gray-900",
                                                            children: activity.location
                                                        })
                                                    ]
                                                })
                                            ]
                                        }),
                                        activity.capacity && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                            className: "flex items-center gap-3",
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                    className: "text-2xl",
                                                    children: "\uD83D\uDC65"
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                    children: [
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                            className: "text-sm font-medium text-gray-500",
                                                            children: "Capacity"
                                                        }),
                                                        getCapacityStatus()
                                                    ]
                                                })
                                            ]
                                        }),
                                        activity.cost !== undefined && activity.cost > 0 && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                            className: "flex items-center gap-3",
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                    className: "text-2xl",
                                                    children: "\uD83D\uDCB0"
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                                    children: [
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                            className: "text-sm font-medium text-gray-500",
                                                            children: "Cost per Guest"
                                                        }),
                                                        getGuestCost()
                                                    ]
                                                })
                                            ]
                                        })
                                    ]
                                }),
                                activity.description && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("h4", {
                                            className: "text-lg font-semibold text-gray-900 mb-2",
                                            children: "Description"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                            className: "text-gray-700 leading-relaxed",
                                            children: activity.description
                                        })
                                    ]
                                }),
                                rsvpStatus && rsvpStatus.dietaryRestrictions && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("h4", {
                                            className: "text-lg font-semibold text-gray-900 mb-2",
                                            children: "Your Dietary Restrictions"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                            className: "text-gray-700",
                                            children: rsvpStatus.dietaryRestrictions
                                        })
                                    ]
                                })
                            ]
                        })
                    ]
                }),
                !loading && !error && activity && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex items-center justify-end gap-3",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                            variant: "secondary",
                            onClick: onClose,
                            children: "Close"
                        }),
                        (!rsvpStatus || rsvpStatus.status === 'pending') && /*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                            onClick: handleRSVPNow,
                            children: "RSVP Now"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                            variant: "primary",
                            onClick: handleViewFullDetails,
                            children: "View Full Details"
                        })
                    ]
                })
            ]
        })
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9ndWVzdC9BY3Rpdml0eVByZXZpZXdNb2RhbC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9uYXZpZ2F0aW9uJztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9CdXR0b24nO1xuXG5pbnRlcmZhY2UgQWN0aXZpdHkge1xuICBpZDogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICBkYXRlOiBzdHJpbmc7XG4gIHRpbWU/OiBzdHJpbmc7XG4gIGxvY2F0aW9uPzogc3RyaW5nO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgY2FwYWNpdHk/OiBudW1iZXI7XG4gIGNhcGFjaXR5UmVtYWluaW5nPzogbnVtYmVyO1xuICBjb3N0PzogbnVtYmVyO1xuICBob3N0U3Vic2lkeT86IG51bWJlcjtcbiAgc2x1Zz86IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFJTVlBTdGF0dXMge1xuICBzdGF0dXM6ICdhdHRlbmRpbmcnIHwgJ2RlY2xpbmVkJyB8ICdtYXliZScgfCAncGVuZGluZyc7XG4gIGd1ZXN0Q291bnQ/OiBudW1iZXI7XG4gIGRpZXRhcnlSZXN0cmljdGlvbnM/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBBY3Rpdml0eVByZXZpZXdNb2RhbFByb3BzIHtcbiAgYWN0aXZpdHlJZDogc3RyaW5nO1xuICBvbkNsb3NlOiAoKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQWN0aXZpdHlQcmV2aWV3TW9kYWwoeyBhY3Rpdml0eUlkLCBvbkNsb3NlIH06IEFjdGl2aXR5UHJldmlld01vZGFsUHJvcHMpIHtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IFthY3Rpdml0eSwgc2V0QWN0aXZpdHldID0gdXNlU3RhdGU8QWN0aXZpdHkgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3JzdnBTdGF0dXMsIHNldFJzdnBTdGF0dXNdID0gdXNlU3RhdGU8UlNWUFN0YXR1cyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGFzeW5jIGZ1bmN0aW9uIGZldGNoQWN0aXZpdHlEYXRhKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgICAgc2V0RXJyb3IobnVsbCk7XG5cbiAgICAgICAgLy8gRmV0Y2ggYWN0aXZpdHkgZGV0YWlsc1xuICAgICAgICBjb25zdCBhY3Rpdml0eVJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvZ3Vlc3QvYWN0aXZpdGllcy8ke2FjdGl2aXR5SWR9YCk7XG4gICAgICAgIGlmICghYWN0aXZpdHlSZXNwb25zZS5vaykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGxvYWQgYWN0aXZpdHknKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhY3Rpdml0eVJlc3VsdCA9IGF3YWl0IGFjdGl2aXR5UmVzcG9uc2UuanNvbigpO1xuICAgICAgICBpZiAoIWFjdGl2aXR5UmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYWN0aXZpdHlSZXN1bHQuZXJyb3I/Lm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBsb2FkIGFjdGl2aXR5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0QWN0aXZpdHkoYWN0aXZpdHlSZXN1bHQuZGF0YSk7XG5cbiAgICAgICAgLy8gRmV0Y2ggUlNWUCBzdGF0dXNcbiAgICAgICAgY29uc3QgcnN2cFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvZ3Vlc3QvcnN2cHM/YWN0aXZpdHlJZD0ke2FjdGl2aXR5SWR9YCk7XG4gICAgICAgIGlmIChyc3ZwUmVzcG9uc2Uub2spIHtcbiAgICAgICAgICBjb25zdCByc3ZwUmVzdWx0ID0gYXdhaXQgcnN2cFJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICBpZiAocnN2cFJlc3VsdC5zdWNjZXNzICYmIHJzdnBSZXN1bHQuZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBzZXRSc3ZwU3RhdHVzKHJzdnBSZXN1bHQuZGF0YVswXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgc2V0RXJyb3IoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdGYWlsZWQgdG8gbG9hZCBhY3Rpdml0eScpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZmV0Y2hBY3Rpdml0eURhdGEoKTtcbiAgfSwgW2FjdGl2aXR5SWRdKTtcblxuICBjb25zdCBoYW5kbGVWaWV3RnVsbERldGFpbHMgPSAoKSA9PiB7XG4gICAgaWYgKGFjdGl2aXR5Py5zbHVnKSB7XG4gICAgICByb3V0ZXIucHVzaChgL2FjdGl2aXR5LyR7YWN0aXZpdHkuc2x1Z31gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcm91dGVyLnB1c2goYC9hY3Rpdml0eS8ke2FjdGl2aXR5SWR9YCk7XG4gICAgfVxuICAgIG9uQ2xvc2UoKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVSU1ZQTm93ID0gKCkgPT4ge1xuICAgIHJvdXRlci5wdXNoKGAvZ3Vlc3QvcnN2cD9hY3Rpdml0eUlkPSR7YWN0aXZpdHlJZH1gKTtcbiAgICBvbkNsb3NlKCk7XG4gIH07XG5cbiAgY29uc3QgZ2V0U3RhdHVzQmFkZ2UgPSAoKSA9PiB7XG4gICAgaWYgKCFyc3ZwU3RhdHVzKSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IGJhZGdlcyA9IHtcbiAgICAgIGF0dGVuZGluZzogeyBsYWJlbDogJ0F0dGVuZGluZycsIGNvbG9yOiAnZ3JlZW4nIH0sXG4gICAgICBkZWNsaW5lZDogeyBsYWJlbDogJ0RlY2xpbmVkJywgY29sb3I6ICdyZWQnIH0sXG4gICAgICBtYXliZTogeyBsYWJlbDogJ01heWJlJywgY29sb3I6ICd5ZWxsb3cnIH0sXG4gICAgICBwZW5kaW5nOiB7IGxhYmVsOiAnUGVuZGluZycsIGNvbG9yOiAnZ3JheScgfSxcbiAgICB9O1xuXG4gICAgY29uc3QgYmFkZ2UgPSBiYWRnZXNbcnN2cFN0YXR1cy5zdGF0dXNdO1xuICAgIHJldHVybiAoXG4gICAgICA8c3BhbiBjbGFzc05hbWU9e2BpbmxpbmUtYmxvY2sgcHgtMyBweS0xIHRleHQtc20gZm9udC1tZWRpdW0gYmctJHtiYWRnZS5jb2xvcn0tMTAwIHRleHQtJHtiYWRnZS5jb2xvcn0tODAwIHJvdW5kZWQtZnVsbGB9PlxuICAgICAgICB7YmFkZ2UubGFiZWx9XG4gICAgICA8L3NwYW4+XG4gICAgKTtcbiAgfTtcblxuICBjb25zdCBnZXRDYXBhY2l0eVN0YXR1cyA9ICgpID0+IHtcbiAgICBpZiAoIWFjdGl2aXR5Py5jYXBhY2l0eSkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCByZW1haW5pbmcgPSBhY3Rpdml0eS5jYXBhY2l0eVJlbWFpbmluZyA/PyBhY3Rpdml0eS5jYXBhY2l0eTtcbiAgICBjb25zdCBwZXJjZW50RnVsbCA9ICgoYWN0aXZpdHkuY2FwYWNpdHkgLSByZW1haW5pbmcpIC8gYWN0aXZpdHkuY2FwYWNpdHkpICogMTAwO1xuXG4gICAgbGV0IHN0YXR1c0NvbG9yID0gJ2dyZWVuJztcbiAgICBsZXQgc3RhdHVzVGV4dCA9ICdBdmFpbGFibGUnO1xuXG4gICAgaWYgKHJlbWFpbmluZyA9PT0gMCkge1xuICAgICAgc3RhdHVzQ29sb3IgPSAncmVkJztcbiAgICAgIHN0YXR1c1RleHQgPSAnRnVsbCc7XG4gICAgfSBlbHNlIGlmIChwZXJjZW50RnVsbCA+PSA5MCkge1xuICAgICAgc3RhdHVzQ29sb3IgPSAneWVsbG93JztcbiAgICAgIHN0YXR1c1RleHQgPSAnQWxtb3N0IEZ1bGwnO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT17YGlubGluZS1ibG9jayB3LTIgaC0yIHJvdW5kZWQtZnVsbCBiZy0ke3N0YXR1c0NvbG9yfS01MDBgfT48L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgIHtyZW1haW5pbmd9IC8ge2FjdGl2aXR5LmNhcGFjaXR5fSBzcG90cyB7c3RhdHVzVGV4dH1cbiAgICAgICAgPC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcblxuICBjb25zdCBnZXRHdWVzdENvc3QgPSAoKSA9PiB7XG4gICAgaWYgKCFhY3Rpdml0eT8uY29zdCkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCBzdWJzaWR5ID0gYWN0aXZpdHkuaG9zdFN1YnNpZHkgfHwgMDtcbiAgICBjb25zdCBndWVzdENvc3QgPSBhY3Rpdml0eS5jb3N0IC0gc3Vic2lkeTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2PlxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1ncmF5LTkwMFwiPiR7Z3Vlc3RDb3N0LnRvRml4ZWQoMil9PC9wPlxuICAgICAgICB7c3Vic2lkeSA+IDAgJiYgKFxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgKCR7YWN0aXZpdHkuY29zdC50b0ZpeGVkKDIpfSAtICR7c3Vic2lkeS50b0ZpeGVkKDIpfSBob3N0IHN1YnNpZHkpXG4gICAgICAgICAgPC9wPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcblxuICAvLyBIYW5kbGUgY2xpY2sgb3V0c2lkZSBtb2RhbFxuICBjb25zdCBoYW5kbGVCYWNrZHJvcENsaWNrID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIG9uQ2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gSGFuZGxlIGVzY2FwZSBrZXlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVFc2NhcGUgPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICBvbkNsb3NlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVFc2NhcGUpO1xuICAgIHJldHVybiAoKSA9PiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlRXNjYXBlKTtcbiAgfSwgW29uQ2xvc2VdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT1cImZpeGVkIGluc2V0LTAgYmctYmxhY2svNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgei01MCBwLTQgYW5pbWF0ZS1mYWRlSW5cIlxuICAgICAgb25DbGljaz17aGFuZGxlQmFja2Ryb3BDbGlja31cbiAgICA+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93LXhsIG1heC13LTJ4bCB3LWZ1bGwgbWF4LWgtWzkwdmhdIG92ZXJmbG93LXktYXV0byBhbmltYXRlLXNsaWRlVXBcIj5cbiAgICAgICAgey8qIEhlYWRlciAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdGlja3kgdG9wLTAgYmctd2hpdGUgYm9yZGVyLWIgYm9yZGVyLWdyYXktMjAwIHB4LTYgcHktNCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtZ3JheS05MDBcIj5BY3Rpdml0eSBQcmV2aWV3PC9oMj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXtvbkNsb3NlfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LWdyYXktNjAwIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJDbG9zZVwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTYgaC02XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk02IDE4TDE4IDZNNiA2bDEyIDEyXCIgLz5cbiAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogQ29udGVudCAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTZcIj5cbiAgICAgICAgICB7bG9hZGluZyAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHB5LTEyXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTEyIHctMTIgYm9yZGVyLWItMiBib3JkZXItZW1lcmFsZC02MDBcIj48L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG5cbiAgICAgICAgICB7ZXJyb3IgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1yZWQtNTAgYm9yZGVyIGJvcmRlci1yZWQtMjAwIHJvdW5kZWQtbGcgcC00IHRleHQtcmVkLTgwMFwiPlxuICAgICAgICAgICAgICB7ZXJyb3J9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuXG4gICAgICAgICAgeyFsb2FkaW5nICYmICFlcnJvciAmJiBhY3Rpdml0eSAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNlwiPlxuICAgICAgICAgICAgICB7LyogQWN0aXZpdHkgVGl0bGUgYW5kIFN0YXR1cyAqL31cbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtc3RhcnQganVzdGlmeS1iZXR3ZWVuIGdhcC00IG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LTN4bCBmb250LWJvbGQgdGV4dC1ncmF5LTkwMFwiPnthY3Rpdml0eS50aXRsZX08L2gzPlxuICAgICAgICAgICAgICAgICAge2dldFN0YXR1c0JhZGdlKCl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAge3JzdnBTdGF0dXM/Lmd1ZXN0Q291bnQgJiYgKFxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNjAwXCI+XG4gICAgICAgICAgICAgICAgICAgIEd1ZXN0IGNvdW50OiB7cnN2cFN0YXR1cy5ndWVzdENvdW50fVxuICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIHsvKiBBY3Rpdml0eSBEZXRhaWxzICovfVxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktM1wiPlxuICAgICAgICAgICAgICAgIHthY3Rpdml0eS5kYXRlICYmIChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC0yeGxcIj7wn5OFPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMFwiPkRhdGU8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1sZyB0ZXh0LWdyYXktOTAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bmV3IERhdGUoYWN0aXZpdHkuZGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2Vla2RheTogJ2xvbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiAnbnVtZXJpYycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoOiAnbG9uZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRheTogJ251bWVyaWMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICB7YWN0aXZpdHkudGltZSAmJiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtMnhsXCI+8J+VkDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDBcIj5UaW1lPC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtbGcgdGV4dC1ncmF5LTkwMFwiPnthY3Rpdml0eS50aW1lfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAge2FjdGl2aXR5LmxvY2F0aW9uICYmIChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC0yeGxcIj7wn5ONPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMFwiPkxvY2F0aW9uPC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtbGcgdGV4dC1ncmF5LTkwMFwiPnthY3Rpdml0eS5sb2NhdGlvbn08L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICAgIHthY3Rpdml0eS5jYXBhY2l0eSAmJiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtMnhsXCI+8J+RpTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDBcIj5DYXBhY2l0eTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICB7Z2V0Q2FwYWNpdHlTdGF0dXMoKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAge2FjdGl2aXR5LmNvc3QgIT09IHVuZGVmaW5lZCAmJiBhY3Rpdml0eS5jb3N0ID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtMnhsXCI+8J+SsDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDBcIj5Db3N0IHBlciBHdWVzdDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICB7Z2V0R3Vlc3RDb3N0KCl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgey8qIERlc2NyaXB0aW9uICovfVxuICAgICAgICAgICAgICB7YWN0aXZpdHkuZGVzY3JpcHRpb24gJiYgKFxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAgbWItMlwiPkRlc2NyaXB0aW9uPC9oND5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS03MDAgbGVhZGluZy1yZWxheGVkXCI+e2FjdGl2aXR5LmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICB7LyogUlNWUCBEZXRhaWxzICovfVxuICAgICAgICAgICAgICB7cnN2cFN0YXR1cyAmJiByc3ZwU3RhdHVzLmRpZXRhcnlSZXN0cmljdGlvbnMgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAgbWItMlwiPllvdXIgRGlldGFyeSBSZXN0cmljdGlvbnM8L2g0PlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTcwMFwiPntyc3ZwU3RhdHVzLmRpZXRhcnlSZXN0cmljdGlvbnN9PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIEZvb3RlciAqL31cbiAgICAgICAgeyFsb2FkaW5nICYmICFlcnJvciAmJiBhY3Rpdml0eSAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdGlja3kgYm90dG9tLTAgYmctZ3JheS01MCBib3JkZXItdCBib3JkZXItZ3JheS0yMDAgcHgtNiBweS00IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktZW5kIGdhcC0zXCI+XG4gICAgICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9XCJzZWNvbmRhcnlcIiBvbkNsaWNrPXtvbkNsb3NlfT5cbiAgICAgICAgICAgICAgQ2xvc2VcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgeyghcnN2cFN0YXR1cyB8fCByc3ZwU3RhdHVzLnN0YXR1cyA9PT0gJ3BlbmRpbmcnKSAmJiAoXG4gICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17aGFuZGxlUlNWUE5vd30+XG4gICAgICAgICAgICAgICAgUlNWUCBOb3dcbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PVwicHJpbWFyeVwiIG9uQ2xpY2s9e2hhbmRsZVZpZXdGdWxsRGV0YWlsc30+XG4gICAgICAgICAgICAgIFZpZXcgRnVsbCBEZXRhaWxzXG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbIkFjdGl2aXR5UHJldmlld01vZGFsIiwiYWN0aXZpdHlJZCIsIm9uQ2xvc2UiLCJyb3V0ZXIiLCJ1c2VSb3V0ZXIiLCJhY3Rpdml0eSIsInNldEFjdGl2aXR5IiwidXNlU3RhdGUiLCJyc3ZwU3RhdHVzIiwic2V0UnN2cFN0YXR1cyIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwiZXJyb3IiLCJzZXRFcnJvciIsInVzZUVmZmVjdCIsImZldGNoQWN0aXZpdHlEYXRhIiwiYWN0aXZpdHlSZXNwb25zZSIsImZldGNoIiwib2siLCJFcnJvciIsImFjdGl2aXR5UmVzdWx0IiwianNvbiIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiZGF0YSIsInJzdnBSZXNwb25zZSIsInJzdnBSZXN1bHQiLCJsZW5ndGgiLCJlcnIiLCJoYW5kbGVWaWV3RnVsbERldGFpbHMiLCJzbHVnIiwicHVzaCIsImhhbmRsZVJTVlBOb3ciLCJnZXRTdGF0dXNCYWRnZSIsImJhZGdlcyIsImF0dGVuZGluZyIsImxhYmVsIiwiY29sb3IiLCJkZWNsaW5lZCIsIm1heWJlIiwicGVuZGluZyIsImJhZGdlIiwic3RhdHVzIiwic3BhbiIsImNsYXNzTmFtZSIsImdldENhcGFjaXR5U3RhdHVzIiwiY2FwYWNpdHkiLCJyZW1haW5pbmciLCJjYXBhY2l0eVJlbWFpbmluZyIsInBlcmNlbnRGdWxsIiwic3RhdHVzQ29sb3IiLCJzdGF0dXNUZXh0IiwiZGl2IiwiZ2V0R3Vlc3RDb3N0IiwiY29zdCIsInN1YnNpZHkiLCJob3N0U3Vic2lkeSIsImd1ZXN0Q29zdCIsInAiLCJ0b0ZpeGVkIiwiaGFuZGxlQmFja2Ryb3BDbGljayIsImUiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiaGFuZGxlRXNjYXBlIiwia2V5IiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9uQ2xpY2siLCJoMiIsImJ1dHRvbiIsImFyaWEtbGFiZWwiLCJzdmciLCJmaWxsIiwic3Ryb2tlIiwidmlld0JveCIsInBhdGgiLCJzdHJva2VMaW5lY2FwIiwic3Ryb2tlTGluZWpvaW4iLCJzdHJva2VXaWR0aCIsImQiLCJoMyIsInRpdGxlIiwiZ3Vlc3RDb3VudCIsImRhdGUiLCJEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwid2Vla2RheSIsInllYXIiLCJtb250aCIsImRheSIsInRpbWUiLCJsb2NhdGlvbiIsInVuZGVmaW5lZCIsImRlc2NyaXB0aW9uIiwiaDQiLCJkaWV0YXJ5UmVzdHJpY3Rpb25zIiwiQnV0dG9uIiwidmFyaWFudCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OytCQStCZ0JBOzs7ZUFBQUE7Ozs7dUJBN0JvQjs0QkFDVjt3QkFDSDtBQTJCaEIsU0FBU0EscUJBQXFCLEVBQUVDLFVBQVUsRUFBRUMsT0FBTyxFQUE2QjtJQUNyRixNQUFNQyxTQUFTQyxJQUFBQSxxQkFBUztJQUN4QixNQUFNLENBQUNDLFVBQVVDLFlBQVksR0FBR0MsSUFBQUEsZUFBUSxFQUFrQjtJQUMxRCxNQUFNLENBQUNDLFlBQVlDLGNBQWMsR0FBR0YsSUFBQUEsZUFBUSxFQUFvQjtJQUNoRSxNQUFNLENBQUNHLFNBQVNDLFdBQVcsR0FBR0osSUFBQUEsZUFBUSxFQUFDO0lBQ3ZDLE1BQU0sQ0FBQ0ssT0FBT0MsU0FBUyxHQUFHTixJQUFBQSxlQUFRLEVBQWdCO0lBRWxETyxJQUFBQSxnQkFBUyxFQUFDO1FBQ1IsZUFB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