8020c9d89f08569eaac0accb23847ac0
/**
 * Integration Test: Budget API
 * 
 * Tests budget calculation, payment status reporting, and subsidy tracking
 * for budget management API endpoints.
 */ // Polyfill Web APIs for Next.js server components
"use strict";
// Mock budget service BEFORE importing route handlers
jest.mock('@/services/budgetService', ()=>({
        calculateTotal: jest.fn(),
        getSummary: jest.fn(),
        getPaymentStatusReport: jest.fn(),
        trackSubsidies: jest.fn(),
        generateReport: jest.fn()
    }));
// Mock Next.js server module
jest.mock('next/server', ()=>({
        NextResponse: {
            json: (data, init)=>({
                    json: async ()=>data,
                    status: init?.status || 200
                })
        },
        NextRequest: jest.fn()
    }));
// Mock Next.js headers and cookies
jest.mock('next/headers', ()=>({
        cookies: jest.fn(()=>({
                get: jest.fn(),
                getAll: jest.fn(()=>[]),
                set: jest.fn(),
                delete: jest.fn()
            }))
    }));
jest.mock('@supabase/ssr', ()=>({
        createServerClient: jest.fn(()=>mockSupabaseClient)
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _util = require("util");
const _route = require("../../app/api/admin/budget/breakdown/route");
const _route1 = require("../../app/api/admin/budget/payment-status/route");
const _route2 = require("../../app/api/admin/budget/subsidies/route");
const _budgetService = /*#__PURE__*/ _interop_require_wildcard(require("../../services/budgetService"));
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
global.TextEncoder = _util.TextEncoder;
global.TextDecoder = _util.TextDecoder;
// Mock Supabase SSR client
const mockGetSession = jest.fn();
const mockSupabaseClient = {
    auth: {
        getSession: mockGetSession
    },
    from: jest.fn()
};
describe('Budget API Integration Tests', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        // Default: valid session
        mockGetSession.mockResolvedValue({
            data: {
                session: {
                    user: {
                        id: 'user-1',
                        email: 'admin@example.com'
                    }
                }
            },
            error: null
        });
    });
    describe('Budget Breakdown', ()=>{
        describe('GET /api/admin/budget/breakdown', ()=>{
            it('should return comprehensive budget breakdown', async ()=>{
                const mockBreakdown = {
                    vendors: [
                        {
                            category: 'photography',
                            totalCost: 2500,
                            amountPaid: 1000,
                            balanceDue: 1500,
                            vendors: [
                                {
                                    id: 'vendor-1',
                                    name: 'Costa Rica Photography',
                                    cost: 2500,
                                    paid: 1000,
                                    balance: 1500,
                                    paymentStatus: 'partial'
                                }
                            ]
                        }
                    ],
                    activities: {
                        totalCost: 5000,
                        totalSubsidy: 1000,
                        netCost: 4000,
                        activities: [
                            {
                                id: 'activity-1',
                                name: 'Beach Volleyball',
                                costPerPerson: 25,
                                hostSubsidy: 5,
                                estimatedAttendees: 20,
                                totalCost: 500,
                                netCost: 400
                            }
                        ]
                    },
                    accommodations: {
                        totalCost: 0,
                        totalSubsidy: 0,
                        netCost: 0,
                        accommodations: []
                    },
                    totals: {
                        grossTotal: 7500,
                        totalSubsidies: 1000,
                        totalPaid: 1000,
                        netTotal: 6500,
                        balanceDue: 5500
                    }
                };
                _budgetService.calculateTotal.mockResolvedValue({
                    success: true,
                    data: mockBreakdown
                });
                const request = {
                    url: 'http://localhost:3000/api/admin/budget/breakdown'
                };
                const response = await (0, _route.GET)();
                const data = await response.json();
                expect(response.status).toBe(200);
                expect(data.success).toBe(true);
                expect(data.data).toEqual(mockBreakdown);
                expect(_budgetService.calculateTotal).toHaveBeenCalledWith({
                    includeVendors: true,
                    includeActivities: true,
                    includeAccommodations: true
                });
            });
            it('should return 401 when not authenticated', async ()=>{
                mockGetSession.mockResolvedValue({
                    data: {
                        session: null
                    },
                    error: null
                });
                const response = await (0, _route.GET)();
                const data = await response.json();
                expect(response.status).toBe(401);
                expect(data.success).toBe(false);
                expect(data.error.code).toBe('UNAUTHORIZED');
            });
            it('should return 500 for service errors', async ()=>{
                _budgetService.calculateTotal.mockResolvedValue({
                    success: false,
                    error: {
                        code: 'DATABASE_ERROR',
                        message: 'Database connection failed'
                    }
                });
                const response = await (0, _route.GET)();
                const data = await response.json();
                expect(response.status).toBe(500);
                expect(data.success).toBe(false);
                expect(data.error.code).toBe('DATABASE_ERROR');
            });
        });
    });
    describe('Payment Status Report', ()=>{
        describe('GET /api/admin/budget/payment-status', ()=>{
            it('should return payment status report', async ()=>{
                const mockReport = {
                    unpaidVendors: [
                        {
                            id: 'vendor-1',
                            name: 'DJ Services',
                            category: 'music',
                            baseCost: 1500
                        }
                    ],
                    partiallyPaidVendors: [
                        {
                            id: 'vendor-2',
                            name: 'Costa Rica Photography',
                            category: 'photography',
                            baseCost: 2500,
                            amountPaid: 1000,
                            balanceDue: 1500
                        }
                    ],
                    paidVendors: [
                        {
                            id: 'vendor-3',
                            name: 'Catering Services',
                            category: 'catering',
                            amountPaid: 3000
                        }
                    ],
                    totalUnpaid: 1500,
                    totalPartial: 1500,
                    totalPaid: 3000
                };
                _budgetService.getPaymentStatusReport.mockResolvedValue({
                    success: true,
                    data: mockReport
                });
                const response = await (0, _route1.GET)();
                const data = await response.json();
                expect(response.status).toBe(200);
                expect(data.success).toBe(true);
                expect(data.data).toEqual(mockReport);
                expect(_budgetService.getPaymentStatusReport).toHaveBeenCalled();
            });
            it('should return 401 when not authenticated', async ()=>{
                mockGetSession.mockResolvedValue({
                    data: {
                        session: null
                    },
                    error: null
                });
                const response = await (0, _route1.GET)();
                const data = await response.json();
                expect(response.status).toBe(401);
                expect(data.success).toBe(false);
                expect(data.error.code).toBe('UNAUTHORIZED');
            });
            it('should return 500 for service errors', async ()=>{
                _budgetService.getPaymentStatusReport.mockResolvedValue({
                    success: false,
                    error: {
                        code: 'DATABASE_ERROR',
                        message: 'Failed to fetch payment status'
                    }
                });
                const response = await (0, _route1.GET)();
                const data = await response.json();
                expect(response.status).toBe(500);
                expect(data.success).toBe(false);
                expect(data.error.code).toBe('DATABASE_ERROR');
            });
        });
    });
    describe('Subsidy Tracking', ()=>{
        describe('GET /api/admin/budget/subsidies', ()=>{
            it('should return subsidy tracking information', async ()=>{
                const mockSubsidies = {
                    activitySubsidies: [
                        {
                            activityId: 'activity-1',
                            activityName: 'Beach Volleyball',
                            subsidyPerPerson: 5,
                            estimatedAttendees: 20,
                            totalSubsidy: 100
                        },
                        {
                            activityId: 'activity-2',
                            activityName: 'Sunset Dinner',
                            subsidyPerPerson: 15,
                            estimatedAttendees: 50,
                            totalSubsidy: 750
                        }
                    ],
                    accommodationSubsidies: [],
                    totalActivitySubsidies: 850,
                    totalAccommodationSubsidies: 0,
                    grandTotalSubsidies: 850
                };
                _budgetService.trackSubsidies.mockResolvedValue({
                    success: true,
                    data: mockSubsidies
                });
                const response = await (0, _route2.GET)();
                const data = await response.json();
                expect(response.status).toBe(200);
                expect(data.success).toBe(true);
                expect(data.data).toEqual(mockSubsidies);
                expect(_budgetService.trackSubsidies).toHaveBeenCalled();
            });
            it('should return 401 when not authenticated', async ()=>{
                mockGetSession.mockResolvedValue({
                    data: {
                        session: null
                    },
                    error: null
                });
                const response = await (0, _route2.GET)();
                const data = await response.json();
                expect(response.status).toBe(401);
                expect(data.success).toBe(false);
                expect(data.error.code).toBe('UNAUTHORIZED');
            });
            it('should return 500 for service errors', async ()=>{
                _budgetService.trackSubsidies.mockResolvedValue({
                    success: false,
                    error: {
                        code: 'DATABASE_ERROR',
                        message: 'Failed to track subsidies'
                    }
                });
                const response = await (0, _route2.GET)();
                const data = await response.json();
                expect(response.status).toBe(500);
                expect(data.success).toBe(false);
                expect(data.error.code).toBe('DATABASE_ERROR');
            });
        });
    });
    describe('Authentication and Authorization', ()=>{
        it('should return 401 for all endpoints when not authenticated', async ()=>{
            mockGetSession.mockResolvedValue({
                data: {
                    session: null
                },
                error: null
            });
            const endpoints = [
                {
                    handler: _route.GET
                },
                {
                    handler: _route1.GET
                },
                {
                    handler: _route2.GET
                }
            ];
            for (const endpoint of endpoints){
                const response = await endpoint.handler();
                const data = await response.json();
                expect(response.status).toBe(401);
                expect(data.success).toBe(false);
                expect(data.error.code).toBe('UNAUTHORIZED');
            }
        });
        it('should return 401 when session has error', async ()=>{
            mockGetSession.mockResolvedValue({
                data: {
                    session: null
                },
                error: {
                    message: 'Session expired'
                }
            });
            const response = await (0, _route.GET)();
            const data = await response.json();
            expect(response.status).toBe(401);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('UNAUTHORIZED');
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvX190ZXN0c19fL2ludGVncmF0aW9uL2J1ZGdldEFwaS5pbnRlZ3JhdGlvbi50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSW50ZWdyYXRpb24gVGVzdDogQnVkZ2V0IEFQSVxuICogXG4gKiBUZXN0cyBidWRnZXQgY2FsY3VsYXRpb24sIHBheW1lbnQgc3RhdHVzIHJlcG9ydGluZywgYW5kIHN1YnNpZHkgdHJhY2tpbmdcbiAqIGZvciBidWRnZXQgbWFuYWdlbWVudCBBUEkgZW5kcG9pbnRzLlxuICovXG5cbi8vIFBvbHlmaWxsIFdlYiBBUElzIGZvciBOZXh0LmpzIHNlcnZlciBjb21wb25lbnRzXG5pbXBvcnQgeyBUZXh0RW5jb2RlciwgVGV4dERlY29kZXIgfSBmcm9tICd1dGlsJztcbmdsb2JhbC5UZXh0RW5jb2RlciA9IFRleHRFbmNvZGVyO1xuZ2xvYmFsLlRleHREZWNvZGVyID0gVGV4dERlY29kZXIgYXMgYW55O1xuXG4vLyBNb2NrIGJ1ZGdldCBzZXJ2aWNlIEJFRk9SRSBpbXBvcnRpbmcgcm91dGUgaGFuZGxlcnNcbmplc3QubW9jaygnQC9zZXJ2aWNlcy9idWRnZXRTZXJ2aWNlJywgKCkgPT4gKHtcbiAgY2FsY3VsYXRlVG90YWw6IGplc3QuZm4oKSxcbiAgZ2V0U3VtbWFyeTogamVzdC5mbigpLFxuICBnZXRQYXltZW50U3RhdHVzUmVwb3J0OiBqZXN0LmZuKCksXG4gIHRyYWNrU3Vic2lkaWVzOiBqZXN0LmZuKCksXG4gIGdlbmVyYXRlUmVwb3J0OiBqZXN0LmZuKCksXG59KSk7XG5cbi8vIE1vY2sgTmV4dC5qcyBzZXJ2ZXIgbW9kdWxlXG5qZXN0Lm1vY2soJ25leHQvc2VydmVyJywgKCkgPT4gKHtcbiAgTmV4dFJlc3BvbnNlOiB7XG4gICAganNvbjogKGRhdGE6IGFueSwgaW5pdD86IGFueSkgPT4gKHtcbiAgICAgIGpzb246IGFzeW5jICgpID0+IGRhdGEsXG4gICAgICBzdGF0dXM6IGluaXQ/LnN0YXR1cyB8fCAyMDAsXG4gICAgfSksXG4gIH0sXG4gIE5leHRSZXF1ZXN0OiBqZXN0LmZuKCksXG59KSk7XG5cbi8vIE1vY2sgTmV4dC5qcyBoZWFkZXJzIGFuZCBjb29raWVzXG5qZXN0Lm1vY2soJ25leHQvaGVhZGVycycsICgpID0+ICh7XG4gIGNvb2tpZXM6IGplc3QuZm4oKCkgPT4gKHtcbiAgICBnZXQ6IGplc3QuZm4oKSxcbiAgICBnZXRBbGw6IGplc3QuZm4oKCkgPT4gW10pLFxuICAgIHNldDogamVzdC5mbigpLFxuICAgIGRlbGV0ZTogamVzdC5mbigpLFxuICB9KSksXG59KSk7XG5cbi8vIE1vY2sgU3VwYWJhc2UgU1NSIGNsaWVudFxuY29uc3QgbW9ja0dldFNlc3Npb24gPSBqZXN0LmZuKCk7XG5jb25zdCBtb2NrU3VwYWJhc2VDbGllbnQgPSB7XG4gIGF1dGg6IHtcbiAgICBnZXRTZXNzaW9uOiBtb2NrR2V0U2Vzc2lvbixcbiAgfSxcbiAgZnJvbTogamVzdC5mbigpLFxufTtcblxuamVzdC5tb2NrKCdAc3VwYWJhc2Uvc3NyJywgKCkgPT4gKHtcbiAgY3JlYXRlU2VydmVyQ2xpZW50OiBqZXN0LmZuKCgpID0+IG1vY2tTdXBhYmFzZUNsaWVudCksXG59KSk7XG5cbmltcG9ydCB7IEdFVCBhcyBHRVRfQlVER0VUX0JSRUFLRE9XTiB9IGZyb20gJ0AvYXBwL2FwaS9hZG1pbi9idWRnZXQvYnJlYWtkb3duL3JvdXRlJztcbmltcG9ydCB7IEdFVCBhcyBHRVRfUEFZTUVOVF9TVEFUVVMgfSBmcm9tICdAL2FwcC9hcGkvYWRtaW4vYnVkZ2V0L3BheW1lbnQtc3RhdHVzL3JvdXRlJztcbmltcG9ydCB7IEdFVCBhcyBHRVRfU1VCU0lESUVTIH0gZnJvbSAnQC9hcHAvYXBpL2FkbWluL2J1ZGdldC9zdWJzaWRpZXMvcm91dGUnO1xuaW1wb3J0ICogYXMgYnVkZ2V0U2VydmljZSBmcm9tICdAL3NlcnZpY2VzL2J1ZGdldFNlcnZpY2UnO1xuXG5kZXNjcmliZSgnQnVkZ2V0IEFQSSBJbnRlZ3JhdGlvbiBUZXN0cycsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgXG4gICAgLy8gRGVmYXVsdDogdmFsaWQgc2Vzc2lvblxuICAgIG1vY2tHZXRTZXNzaW9uLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgc2Vzc2lvbjogeyB1c2VyOiB7IGlkOiAndXNlci0xJywgZW1haWw6ICdhZG1pbkBleGFtcGxlLmNvbScgfSB9LFxuICAgICAgfSxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgIH0gYXMgYW55KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0J1ZGdldCBCcmVha2Rvd24nLCAoKSA9PiB7XG4gICAgZGVzY3JpYmUoJ0dFVCAvYXBpL2FkbWluL2J1ZGdldC9icmVha2Rvd24nLCAoKSA9PiB7XG4gICAgICBpdCgnc2hvdWxkIHJldHVybiBjb21wcmVoZW5zaXZlIGJ1ZGdldCBicmVha2Rvd24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1vY2tCcmVha2Rvd24gPSB7XG4gICAgICAgICAgdmVuZG9yczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjYXRlZ29yeTogJ3Bob3RvZ3JhcGh5JyxcbiAgICAgICAgICAgICAgdG90YWxDb3N0OiAyNTAwLFxuICAgICAgICAgICAgICBhbW91bnRQYWlkOiAxMDAwLFxuICAgICAgICAgICAgICBiYWxhbmNlRHVlOiAxNTAwLFxuICAgICAgICAgICAgICB2ZW5kb3JzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgaWQ6ICd2ZW5kb3ItMScsXG4gICAgICAgICAgICAgICAgICBuYW1lOiAnQ29zdGEgUmljYSBQaG90b2dyYXBoeScsXG4gICAgICAgICAgICAgICAgICBjb3N0OiAyNTAwLFxuICAgICAgICAgICAgICAgICAgcGFpZDogMTAwMCxcbiAgICAgICAgICAgICAgICAgIGJhbGFuY2U6IDE1MDAsXG4gICAgICAgICAgICAgICAgICBwYXltZW50U3RhdHVzOiAncGFydGlhbCcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICBhY3Rpdml0aWVzOiB7XG4gICAgICAgICAgICB0b3RhbENvc3Q6IDUwMDAsXG4gICAgICAgICAgICB0b3RhbFN1YnNpZHk6IDEwMDAsXG4gICAgICAgICAgICBuZXRDb3N0OiA0MDAwLFxuICAgICAgICAgICAgYWN0aXZpdGllczogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQ6ICdhY3Rpdml0eS0xJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnQmVhY2ggVm9sbGV5YmFsbCcsXG4gICAgICAgICAgICAgICAgY29zdFBlclBlcnNvbjogMjUsXG4gICAgICAgICAgICAgICAgaG9zdFN1YnNpZHk6IDUsXG4gICAgICAgICAgICAgICAgZXN0aW1hdGVkQXR0ZW5kZWVzOiAyMCxcbiAgICAgICAgICAgICAgICB0b3RhbENvc3Q6IDUwMCxcbiAgICAgICAgICAgICAgICBuZXRDb3N0OiA0MDAsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYWNjb21tb2RhdGlvbnM6IHtcbiAgICAgICAgICAgIHRvdGFsQ29zdDogMCxcbiAgICAgICAgICAgIHRvdGFsU3Vic2lkeTogMCxcbiAgICAgICAgICAgIG5ldENvc3Q6IDAsXG4gICAgICAgICAgICBhY2NvbW1vZGF0aW9uczogW10sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0b3RhbHM6IHtcbiAgICAgICAgICAgIGdyb3NzVG90YWw6IDc1MDAsXG4gICAgICAgICAgICB0b3RhbFN1YnNpZGllczogMTAwMCxcbiAgICAgICAgICAgIHRvdGFsUGFpZDogMTAwMCxcbiAgICAgICAgICAgIG5ldFRvdGFsOiA2NTAwLFxuICAgICAgICAgICAgYmFsYW5jZUR1ZTogNTUwMCxcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIChidWRnZXRTZXJ2aWNlLmNhbGN1bGF0ZVRvdGFsIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YTogbW9ja0JyZWFrZG93bixcbiAgICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9idWRnZXQvYnJlYWtkb3duJyxcbiAgICAgICAgfSBhcyBhbnk7XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVRfQlVER0VUX0JSRUFLRE9XTigpO1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGRhdGEuZGF0YSkudG9FcXVhbChtb2NrQnJlYWtkb3duKTtcbiAgICAgICAgZXhwZWN0KGJ1ZGdldFNlcnZpY2UuY2FsY3VsYXRlVG90YWwpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICBpbmNsdWRlVmVuZG9yczogdHJ1ZSxcbiAgICAgICAgICBpbmNsdWRlQWN0aXZpdGllczogdHJ1ZSxcbiAgICAgICAgICBpbmNsdWRlQWNjb21tb2RhdGlvbnM6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwMSB3aGVuIG5vdCBhdXRoZW50aWNhdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBtb2NrR2V0U2Vzc2lvbi5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgZGF0YTogeyBzZXNzaW9uOiBudWxsIH0sXG4gICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIH0gYXMgYW55KTtcblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVF9CVURHRVRfQlJFQUtET1dOKCk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xuICAgICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnVU5BVVRIT1JJWkVEJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gNTAwIGZvciBzZXJ2aWNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgKGJ1ZGdldFNlcnZpY2UuY2FsY3VsYXRlVG90YWwgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgIGNvZGU6ICdEQVRBQkFTRV9FUlJPUicsXG4gICAgICAgICAgICBtZXNzYWdlOiAnRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0gYXMgYW55KTtcblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVF9CVURHRVRfQlJFQUtET1dOKCk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg1MDApO1xuICAgICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnREFUQUJBU0VfRVJST1InKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGF5bWVudCBTdGF0dXMgUmVwb3J0JywgKCkgPT4ge1xuICAgIGRlc2NyaWJlKCdHRVQgL2FwaS9hZG1pbi9idWRnZXQvcGF5bWVudC1zdGF0dXMnLCAoKSA9PiB7XG4gICAgICBpdCgnc2hvdWxkIHJldHVybiBwYXltZW50IHN0YXR1cyByZXBvcnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1vY2tSZXBvcnQgPSB7XG4gICAgICAgICAgdW5wYWlkVmVuZG9yczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogJ3ZlbmRvci0xJyxcbiAgICAgICAgICAgICAgbmFtZTogJ0RKIFNlcnZpY2VzJyxcbiAgICAgICAgICAgICAgY2F0ZWdvcnk6ICdtdXNpYycsXG4gICAgICAgICAgICAgIGJhc2VDb3N0OiAxNTAwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIHBhcnRpYWxseVBhaWRWZW5kb3JzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAndmVuZG9yLTInLFxuICAgICAgICAgICAgICBuYW1lOiAnQ29zdGEgUmljYSBQaG90b2dyYXBoeScsXG4gICAgICAgICAgICAgIGNhdGVnb3J5OiAncGhvdG9ncmFwaHknLFxuICAgICAgICAgICAgICBiYXNlQ29zdDogMjUwMCxcbiAgICAgICAgICAgICAgYW1vdW50UGFpZDogMTAwMCxcbiAgICAgICAgICAgICAgYmFsYW5jZUR1ZTogMTUwMCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICBwYWlkVmVuZG9yczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogJ3ZlbmRvci0zJyxcbiAgICAgICAgICAgICAgbmFtZTogJ0NhdGVyaW5nIFNlcnZpY2VzJyxcbiAgICAgICAgICAgICAgY2F0ZWdvcnk6ICdjYXRlcmluZycsXG4gICAgICAgICAgICAgIGFtb3VudFBhaWQ6IDMwMDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgdG90YWxVbnBhaWQ6IDE1MDAsXG4gICAgICAgICAgdG90YWxQYXJ0aWFsOiAxNTAwLFxuICAgICAgICAgIHRvdGFsUGFpZDogMzAwMCxcbiAgICAgICAgfTtcblxuICAgICAgICAoYnVkZ2V0U2VydmljZS5nZXRQYXltZW50U3RhdHVzUmVwb3J0IGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YTogbW9ja1JlcG9ydCxcbiAgICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUX1BBWU1FTlRfU1RBVFVTKCk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoZGF0YS5kYXRhKS50b0VxdWFsKG1vY2tSZXBvcnQpO1xuICAgICAgICBleHBlY3QoYnVkZ2V0U2VydmljZS5nZXRQYXltZW50U3RhdHVzUmVwb3J0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gNDAxIHdoZW4gbm90IGF1dGhlbnRpY2F0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIG1vY2tHZXRTZXNzaW9uLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICBkYXRhOiB7IHNlc3Npb246IG51bGwgfSxcbiAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUX1BBWU1FTlRfU1RBVFVTKCk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xuICAgICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnVU5BVVRIT1JJWkVEJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gNTAwIGZvciBzZXJ2aWNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgKGJ1ZGdldFNlcnZpY2UuZ2V0UGF5bWVudFN0YXR1c1JlcG9ydCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgY29kZTogJ0RBVEFCQVNFX0VSUk9SJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggcGF5bWVudCBzdGF0dXMnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0gYXMgYW55KTtcblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVF9QQVlNRU5UX1NUQVRVUygpO1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ0RBVEFCQVNFX0VSUk9SJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1N1YnNpZHkgVHJhY2tpbmcnLCAoKSA9PiB7XG4gICAgZGVzY3JpYmUoJ0dFVCAvYXBpL2FkbWluL2J1ZGdldC9zdWJzaWRpZXMnLCAoKSA9PiB7XG4gICAgICBpdCgnc2hvdWxkIHJldHVybiBzdWJzaWR5IHRyYWNraW5nIGluZm9ybWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBtb2NrU3Vic2lkaWVzID0ge1xuICAgICAgICAgIGFjdGl2aXR5U3Vic2lkaWVzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGFjdGl2aXR5SWQ6ICdhY3Rpdml0eS0xJyxcbiAgICAgICAgICAgICAgYWN0aXZpdHlOYW1lOiAnQmVhY2ggVm9sbGV5YmFsbCcsXG4gICAgICAgICAgICAgIHN1YnNpZHlQZXJQZXJzb246IDUsXG4gICAgICAgICAgICAgIGVzdGltYXRlZEF0dGVuZGVlczogMjAsXG4gICAgICAgICAgICAgIHRvdGFsU3Vic2lkeTogMTAwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgYWN0aXZpdHlJZDogJ2FjdGl2aXR5LTInLFxuICAgICAgICAgICAgICBhY3Rpdml0eU5hbWU6ICdTdW5zZXQgRGlubmVyJyxcbiAgICAgICAgICAgICAgc3Vic2lkeVBlclBlcnNvbjogMTUsXG4gICAgICAgICAgICAgIGVzdGltYXRlZEF0dGVuZGVlczogNTAsXG4gICAgICAgICAgICAgIHRvdGFsU3Vic2lkeTogNzUwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIGFjY29tbW9kYXRpb25TdWJzaWRpZXM6IFtdLFxuICAgICAgICAgIHRvdGFsQWN0aXZpdHlTdWJzaWRpZXM6IDg1MCxcbiAgICAgICAgICB0b3RhbEFjY29tbW9kYXRpb25TdWJzaWRpZXM6IDAsXG4gICAgICAgICAgZ3JhbmRUb3RhbFN1YnNpZGllczogODUwLFxuICAgICAgICB9O1xuXG4gICAgICAgIChidWRnZXRTZXJ2aWNlLnRyYWNrU3Vic2lkaWVzIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YTogbW9ja1N1YnNpZGllcyxcbiAgICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUX1NVQlNJRElFUygpO1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGRhdGEuZGF0YSkudG9FcXVhbChtb2NrU3Vic2lkaWVzKTtcbiAgICAgICAgZXhwZWN0KGJ1ZGdldFNlcnZpY2UudHJhY2tTdWJzaWRpZXMpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHJldHVybiA0MDEgd2hlbiBub3QgYXV0aGVudGljYXRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbW9ja0dldFNlc3Npb24ubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgIGRhdGE6IHsgc2Vzc2lvbjogbnVsbCB9LFxuICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICB9IGFzIGFueSk7XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVRfU1VCU0lESUVTKCk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xuICAgICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnVU5BVVRIT1JJWkVEJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gNTAwIGZvciBzZXJ2aWNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgKGJ1ZGdldFNlcnZpY2UudHJhY2tTdWJzaWRpZXMgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgIGNvZGU6ICdEQVRBQkFTRV9FUlJPUicsXG4gICAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHRyYWNrIHN1YnNpZGllcycsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUX1NVQlNJRElFUygpO1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ0RBVEFCQVNFX0VSUk9SJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0F1dGhlbnRpY2F0aW9uIGFuZCBBdXRob3JpemF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwMSBmb3IgYWxsIGVuZHBvaW50cyB3aGVuIG5vdCBhdXRoZW50aWNhdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0dldFNlc3Npb24ubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB7IHNlc3Npb246IG51bGwgfSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IGVuZHBvaW50cyA9IFtcbiAgICAgICAgeyBoYW5kbGVyOiBHRVRfQlVER0VUX0JSRUFLRE9XTiB9LFxuICAgICAgICB7IGhhbmRsZXI6IEdFVF9QQVlNRU5UX1NUQVRVUyB9LFxuICAgICAgICB7IGhhbmRsZXI6IEdFVF9TVUJTSURJRVMgfSxcbiAgICAgIF07XG5cbiAgICAgIGZvciAoY29uc3QgZW5kcG9pbnQgb2YgZW5kcG9pbnRzKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZW5kcG9pbnQuaGFuZGxlcigpO1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAxKTtcbiAgICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ1VOQVVUSE9SSVpFRCcpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNDAxIHdoZW4gc2Vzc2lvbiBoYXMgZXJyb3InLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrR2V0U2Vzc2lvbi5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IHsgc2Vzc2lvbjogbnVsbCB9LFxuICAgICAgICBlcnJvcjogeyBtZXNzYWdlOiAnU2Vzc2lvbiBleHBpcmVkJyB9LFxuICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVF9CVURHRVRfQlJFQUtET1dOKCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMSk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ1VOQVVUSE9SSVpFRCcpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsImNhbGN1bGF0ZVRvdGFsIiwiZm4iLCJnZXRTdW1tYXJ5IiwiZ2V0UGF5bWVudFN0YXR1c1JlcG9ydCIsInRyYWNrU3Vic2lkaWVzIiwiZ2VuZXJhdGVSZXBvcnQiLCJOZXh0UmVzcG9uc2UiLCJqc29uIiwiZGF0YSIsImluaXQiLCJzdGF0dXMiLCJOZXh0UmVxdWVzdCIsImNvb2tpZXMiLCJnZXQiLCJnZXRBbGwiLCJzZXQiLCJkZWxldGUiLCJjcmVhdGVTZXJ2ZXJDbGllbnQiLCJtb2NrU3VwYWJhc2VDbGllbnQiLCJnbG9iYWwiLCJUZXh0RW5jb2RlciIsIlRleHREZWNvZGVyIiwibW9ja0dldFNlc3Npb24iLCJhdXRoIiwiZ2V0U2Vzc2lvbiIsImZyb20iLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJzZXNzaW9uIiwidXNlciIsImlkIiwiZW1haWwiLCJlcnJvciIsIml0IiwibW9ja0JyZWFrZG93biIsInZlbmRvcnMiLCJjYXRlZ29yeSIsInRvdGFsQ29zdCIsImFtb3VudFBhaWQiLCJiYWxhbmNlRHVlIiwibmFtZSIsImNvc3QiLCJwYWlkIiwiYmFsYW5jZSIsInBheW1lbnRTdGF0dXMiLCJhY3Rpdml0aWVzIiwidG90YWxTdWJzaWR5IiwibmV0Q29zdCIsImNvc3RQZXJQZXJzb24iLCJob3N0U3Vic2lkeSIsImVzdGltYXRlZEF0dGVuZGVlcyIsImFjY29tbW9kYXRpb25zIiwidG90YWxzIiwiZ3Jvc3NUb3RhbCIsInRvdGFsU3Vic2lkaWVzIiwidG90YWxQYWlkIiwibmV0VG90YWwiLCJidWRnZXRTZXJ2aWNlIiwic3VjY2VzcyIsInJlcXVlc3QiLCJ1cmwiLCJyZXNwb25zZSIsIkdFVF9CVURHRVRfQlJFQUtET1dOIiwiZXhwZWN0IiwidG9CZSIsInRvRXF1YWwiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsImluY2x1ZGVWZW5kb3JzIiwiaW5jbHVkZUFjdGl2aXRpZXMiLCJpbmNsdWRlQWNjb21tb2RhdGlvbnMiLCJjb2RlIiwibWVzc2FnZSIsIm1vY2tSZXBvcnQiLCJ1bnBhaWRWZW5kb3JzIiwiYmFzZUNvc3QiLCJwYXJ0aWFsbHlQYWlkVmVuZG9ycyIsInBhaWRWZW5kb3JzIiwidG90YWxVbnBhaWQiLCJ0b3RhbFBhcnRpYWwiLCJHRVRfUEFZTUVOVF9TVEFUVVMiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwibW9ja1N1YnNpZGllcyIsImFjdGl2aXR5U3Vic2lkaWVzIiwiYWN0aXZpdHlJZCIsImFjdGl2aXR5TmFtZSIsInN1YnNpZHlQZXJQZXJzb24iLCJhY2NvbW1vZGF0aW9uU3Vic2lkaWVzIiwidG90YWxBY3Rpdml0eVN1YnNpZGllcyIsInRvdGFsQWNjb21tb2RhdGlvblN1YnNpZGllcyIsImdyYW5kVG90YWxTdWJzaWRpZXMiLCJHRVRfU1VCU0lESUVTIiwiZW5kcG9pbnRzIiwiaGFuZGxlciIsImVuZHBvaW50Il0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Q0FLQyxHQUVELGtEQUFrRDs7QUFLbEQsc0RBQXNEO0FBQ3REQSxLQUFLQyxJQUFJLENBQUMsNEJBQTRCLElBQU8sQ0FBQTtRQUMzQ0MsZ0JBQWdCRixLQUFLRyxFQUFFO1FBQ3ZCQyxZQUFZSixLQUFLRyxFQUFFO1FBQ25CRSx3QkFBd0JMLEtBQUtHLEVBQUU7UUFDL0JHLGdCQUFnQk4sS0FBS0csRUFBRTtRQUN2QkksZ0JBQWdCUCxLQUFLRyxFQUFFO0lBQ3pCLENBQUE7QUFFQSw2QkFBNkI7QUFDN0JILEtBQUtDLElBQUksQ0FBQyxlQUFlLElBQU8sQ0FBQTtRQUM5Qk8sY0FBYztZQUNaQyxNQUFNLENBQUNDLE1BQVdDLE9BQWdCLENBQUE7b0JBQ2hDRixNQUFNLFVBQVlDO29CQUNsQkUsUUFBUUQsTUFBTUMsVUFBVTtnQkFDMUIsQ0FBQTtRQUNGO1FBQ0FDLGFBQWFiLEtBQUtHLEVBQUU7SUFDdEIsQ0FBQTtBQUVBLG1DQUFtQztBQUNuQ0gsS0FBS0MsSUFBSSxDQUFDLGdCQUFnQixJQUFPLENBQUE7UUFDL0JhLFNBQVNkLEtBQUtHLEVBQUUsQ0FBQyxJQUFPLENBQUE7Z0JBQ3RCWSxLQUFLZixLQUFLRyxFQUFFO2dCQUNaYSxRQUFRaEIsS0FBS0csRUFBRSxDQUFDLElBQU0sRUFBRTtnQkFDeEJjLEtBQUtqQixLQUFLRyxFQUFFO2dCQUNaZSxRQUFRbEIsS0FBS0csRUFBRTtZQUNqQixDQUFBO0lBQ0YsQ0FBQTtBQVdBSCxLQUFLQyxJQUFJLENBQUMs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