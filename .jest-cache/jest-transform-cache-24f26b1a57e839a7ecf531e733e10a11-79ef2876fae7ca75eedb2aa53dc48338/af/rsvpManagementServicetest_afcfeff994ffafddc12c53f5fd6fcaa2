4d0b5d761f6ed3d374ed8992101e6a96
"use strict";
// Mock Supabase
jest.mock('@supabase/supabase-js', ()=>({
        createClient: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _mockSupabase = require("../__tests__/helpers/mockSupabase");
const _rsvpManagementService = /*#__PURE__*/ _interop_require_wildcard(require("./rsvpManagementService"));
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
describe('rsvpManagementService', ()=>{
    let mockSupabase;
    beforeEach(()=>{
        jest.clearAllMocks();
        jest.restoreAllMocks();
        mockSupabase = (0, _mockSupabase.createMockSupabaseClient)();
        (0, _mockSupabase.resetMockSupabaseClient)(mockSupabase);
        const { createClient } = require('@supabase/supabase-js');
        createClient.mockReturnValue(mockSupabase);
    });
    afterEach(()=>{
        jest.restoreAllMocks();
    });
    describe('listRSVPs', ()=>{
        const mockRSVPData = [
            {
                id: 'rsvp-1',
                guest_id: 'guest-1',
                event_id: 'event-1',
                activity_id: null,
                status: 'attending',
                guest_count: 2,
                dietary_notes: 'Vegetarian',
                special_requirements: null,
                notes: null,
                responded_at: '2024-01-15T10:00:00Z',
                created_at: '2024-01-10T10:00:00Z',
                updated_at: '2024-01-15T10:00:00Z',
                guests: {
                    first_name: 'John',
                    last_name: 'Doe',
                    email: 'john@example.com'
                },
                events: {
                    name: 'Wedding Ceremony'
                },
                activities: null
            },
            {
                id: 'rsvp-2',
                guest_id: 'guest-2',
                event_id: null,
                activity_id: 'activity-1',
                status: 'pending',
                guest_count: 1,
                dietary_notes: null,
                special_requirements: null,
                notes: null,
                responded_at: null,
                created_at: '2024-01-12T10:00:00Z',
                updated_at: '2024-01-12T10:00:00Z',
                guests: {
                    first_name: 'Jane',
                    last_name: 'Smith',
                    email: 'jane@example.com'
                },
                events: null,
                activities: {
                    name: 'Beach Activity'
                }
            }
        ];
        it('should return success with RSVPs when valid filters and pagination', async ()=>{
            // Mock the query chain for listRSVPs
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.select.mockReturnValue(mockSupabase);
            mockSupabase.eq.mockReturnValue(mockSupabase);
            mockSupabase.range.mockReturnValue(mockSupabase);
            mockSupabase.order.mockResolvedValue({
                data: mockRSVPData,
                error: null,
                count: 2
            });
            const filters = {
                eventId: 'event-1'
            };
            const pagination = {
                page: 1,
                limit: 50
            };
            const result = await _rsvpManagementService.listRSVPs(filters, pagination);
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.data).toHaveLength(2);
                expect(result.data.data[0].guestFirstName).toBe('John');
                expect(result.data.data[0].eventName).toBe('Wedding Ceremony');
                expect(result.data.pagination.page).toBe(1);
                expect(result.data.pagination.limit).toBe(50);
                expect(result.data.pagination.total).toBe(2);
                expect(result.data.pagination.totalPages).toBe(1);
                // Statistics should be calculated
                expect(result.data.statistics.totalRSVPs).toBeGreaterThanOrEqual(0);
                expect(result.data.statistics.byStatus).toBeDefined();
            }
        });
        it('should filter by event ID', async ()=>{
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.select.mockReturnValue(mockSupabase);
            mockSupabase.eq.mockReturnValue(mockSupabase);
            mockSupabase.range.mockReturnValue(mockSupabase);
            mockSupabase.order.mockResolvedValue({
                data: [
                    mockRSVPData[0]
                ],
                error: null,
                count: 1
            });
            const result = await _rsvpManagementService.listRSVPs({
                eventId: 'event-1'
            }, {
                page: 1,
                limit: 50
            });
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.data).toHaveLength(1);
                expect(result.data.data[0].eventId).toBe('event-1');
            }
            // Verify eq was called with event_id
            expect(mockSupabase.eq).toHaveBeenCalledWith('event_id', 'event-1');
        });
        it('should filter by activity ID', async ()=>{
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.select.mockReturnValue(mockSupabase);
            mockSupabase.eq.mockReturnValue(mockSupabase);
            mockSupabase.range.mockReturnValue(mockSupabase);
            mockSupabase.order.mockResolvedValue({
                data: [
                    mockRSVPData[1]
                ],
                error: null,
                count: 1
            });
            const result = await _rsvpManagementService.listRSVPs({
                activityId: 'activity-1'
            }, {
                page: 1,
                limit: 50
            });
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.data).toHaveLength(1);
                expect(result.data.data[0].activityId).toBe('activity-1');
            }
            // Verify eq was called with activity_id
            expect(mockSupabase.eq).toHaveBeenCalledWith('activity_id', 'activity-1');
        });
        it('should filter by status', async ()=>{
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.select.mockReturnValue(mockSupabase);
            mockSupabase.eq.mockReturnValue(mockSupabase);
            mockSupabase.range.mockReturnValue(mockSupabase);
            mockSupabase.order.mockResolvedValue({
                data: [
                    mockRSVPData[0]
                ],
                error: null,
                count: 1
            });
            const result = await _rsvpManagementService.listRSVPs({
                status: 'attending'
            }, {
                page: 1,
                limit: 50
            });
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.data).toHaveLength(1);
                expect(result.data.data[0].status).toBe('attending');
            }
            // Verify eq was called with status
            expect(mockSupabase.eq).toHaveBeenCalledWith('status', 'attending');
        });
        it('should filter by guest ID', async ()=>{
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.select.mockReturnValue(mockSupabase);
            mockSupabase.eq.mockReturnValue(mockSupabase);
            mockSupabase.range.mockReturnValue(mockSupabase);
            mockSupabase.order.mockResolvedValue({
                data: [
                    mockRSVPData[0]
                ],
                error: null,
                count: 1
            });
            // Mock getRSVPStatistics
            jest.spyOn(_rsvpManagementService, 'getRSVPStatistics').mockResolvedValue({
                success: true,
                data: {
                    totalRSVPs: 1,
                    byStatus: {
                        attending: 1,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 2
                }
            });
            const result = await _rsvpManagementService.listRSVPs({
                guestId: 'guest-1'
            }, {
                page: 1,
                limit: 50
            });
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.data).toHaveLength(1);
                expect(result.data.data[0].guestId).toBe('guest-1');
            }
            // Verify eq was called with guest_id
            expect(mockSupabase.eq).toHaveBeenCalledWith('guest_id', 'guest-1');
        });
        it('should apply pagination correctly', async ()=>{
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.select.mockReturnValue(mockSupabase);
            mockSupabase.range.mockReturnValue(mockSupabase);
            mockSupabase.order.mockResolvedValue({
                data: mockRSVPData,
                error: null,
                count: 100
            });
            // Mock getRSVPStatistics
            jest.spyOn(_rsvpManagementService, 'getRSVPStatistics').mockResolvedValue({
                success: true,
                data: {
                    totalRSVPs: 100,
                    byStatus: {
                        attending: 50,
                        declined: 25,
                        maybe: 15,
                        pending: 10
                    },
                    totalGuestCount: 50
                }
            });
            const result = await _rsvpManagementService.listRSVPs({}, {
                page: 2,
                limit: 25
            });
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.pagination.page).toBe(2);
                expect(result.data.pagination.limit).toBe(25);
                expect(result.data.pagination.total).toBe(100);
                expect(result.data.pagination.totalPages).toBe(4);
            }
            // Verify range was called with correct values (page 2, limit 25 = from 25 to 49)
            expect(mockSupabase.range).toHaveBeenCalledWith(25, 49);
        });
        it('should return VALIDATION_ERROR when invalid filter parameters', async ()=>{
            const result = await _rsvpManagementService.listRSVPs({
                eventId: 'invalid-uuid'
            }, {
                page: 1,
                limit: 50
            });
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        it('should return VALIDATION_ERROR when invalid pagination parameters', async ()=>{
            const result = await _rsvpManagementService.listRSVPs({}, {
                page: -1,
                limit: 50
            });
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        it('should return DATABASE_ERROR when database query fails', async ()=>{
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.select.mockReturnValue(mockSupabase);
            mockSupabase.range.mockReturnValue(mockSupabase);
            mockSupabase.order.mockResolvedValue({
                data: null,
                error: {
                    message: 'Database connection failed'
                },
                count: null
            });
            const result = await _rsvpManagementService.listRSVPs({}, {
                page: 1,
                limit: 50
            });
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('DATABASE_ERROR');
                expect(result.error.message).toBe('Database connection failed');
            }
        });
        it('should apply multiple filters together', async ()=>{
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.select.mockReturnValue(mockSupabase);
            mockSupabase.eq.mockReturnValue(mockSupabase);
            mockSupabase.range.mockReturnValue(mockSupabase);
            mockSupabase.order.mockResolvedValue({
                data: [
                    mockRSVPData[0]
                ],
                error: null,
                count: 1
            });
            // Mock getRSVPStatistics
            jest.spyOn(_rsvpManagementService, 'getRSVPStatistics').mockResolvedValue({
                success: true,
                data: {
                    totalRSVPs: 1,
                    byStatus: {
                        attending: 1,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 2
                }
            });
            const result = await _rsvpManagementService.listRSVPs({
                eventId: 'event-1',
                status: 'attending',
                guestId: 'guest-1'
            }, {
                page: 1,
                limit: 50
            });
            expect(result.success).toBe(true);
            // Verify all filters were applied
            expect(mockSupabase.eq).toHaveBeenCalledWith('event_id', 'event-1');
            expect(mockSupabase.eq).toHaveBeenCalledWith('status', 'attending');
            expect(mockSupabase.eq).toHaveBeenCalledWith('guest_id', 'guest-1');
        });
        it('should handle search query filter', async ()=>{
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.select.mockReturnValue(mockSupabase);
            mockSupabase.or.mockReturnValue(mockSupabase);
            mockSupabase.range.mockReturnValue(mockSupabase);
            mockSupabase.order.mockResolvedValue({
                data: [
                    mockRSVPData[0]
                ],
                error: null,
                count: 1
            });
            // Mock getRSVPStatistics
            jest.spyOn(_rsvpManagementService, 'getRSVPStatistics').mockResolvedValue({
                success: true,
                data: {
                    totalRSVPs: 1,
                    byStatus: {
                        attending: 1,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 2
                }
            });
            const result = await _rsvpManagementService.listRSVPs({
                searchQuery: 'John'
            }, {
                page: 1,
                limit: 50
            });
            expect(result.success).toBe(true);
            // Verify or was called for search
            expect(mockSupabase.or).toHaveBeenCalled();
        });
        it('should default to page 1 and limit 50 when not specified', async ()=>{
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.select.mockReturnValue(mockSupabase);
            mockSupabase.range.mockReturnValue(mockSupabase);
            mockSupabase.order.mockResolvedValue({
                data: mockRSVPData,
                error: null,
                count: 2
            });
            // Mock getRSVPStatistics
            jest.spyOn(_rsvpManagementService, 'getRSVPStatistics').mockResolvedValue({
                success: true,
                data: {
                    totalRSVPs: 2,
                    byStatus: {
                        attending: 1,
                        declined: 0,
                        maybe: 0,
                        pending: 1
                    },
                    totalGuestCount: 2
                }
            });
            const result = await _rsvpManagementService.listRSVPs();
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.pagination.page).toBe(1);
                expect(result.data.pagination.limit).toBe(50);
            }
            // Verify range was called with default values (page 1, limit 50 = from 0 to 49)
            expect(mockSupabase.range).toHaveBeenCalledWith(0, 49);
        });
    });
    describe('getRSVPStatistics', ()=>{
        const mockStatisticsData = [
            {
                status: 'attending',
                guest_count: 2
            },
            {
                status: 'attending',
                guest_count: 1
            },
            {
                status: 'declined',
                guest_count: 1
            },
            {
                status: 'maybe',
                guest_count: null
            },
            {
                status: 'pending',
                guest_count: 1
            }
        ];
        it('should return success with accurate statistics', async ()=>{
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.select.mockResolvedValue({
                data: mockStatisticsData,
                error: null
            });
            const result = await _rsvpManagementService.getRSVPStatistics({});
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.totalRSVPs).toBe(5);
                expect(result.data.byStatus.attending).toBe(2);
                expect(result.data.byStatus.declined).toBe(1);
                expect(result.data.byStatus.maybe).toBe(1);
                expect(result.data.byStatus.pending).toBe(1);
                expect(result.data.totalGuestCount).toBe(3); // 2 + 1 from attending
            }
        });
        it('should filter statistics by event ID', async ()=>{
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.select.mockReturnValue(mockSupabase);
            mockSupabase.eq.mockResolvedValue({
                data: [
                    mockStatisticsData[0],
                    mockStatisticsData[1]
                ],
                error: null
            });
            const result = await _rsvpManagementService.getRSVPStatistics({
                eventId: 'event-1'
            });
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.totalRSVPs).toBe(2);
                expect(result.data.byStatus.attending).toBe(2);
            }
            // Verify eq was called with event_id
            expect(mockSupabase.eq).toHaveBeenCalledWith('event_id', 'event-1');
        });
        it('should handle empty results', async ()=>{
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.select.mockResolvedValue({
                data: [],
                error: null
            });
            const result = await _rsvpManagementService.getRSVPStatistics({});
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.totalRSVPs).toBe(0);
                expect(result.data.byStatus.attending).toBe(0);
                expect(result.data.totalGuestCount).toBe(0);
            }
        });
        it('should return VALIDATION_ERROR when invalid filter parameters', async ()=>{
            const result = await _rsvpManagementService.getRSVPStatistics({
                eventId: 'invalid-uuid'
            });
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        it('should return DATABASE_ERROR when database query fails', async ()=>{
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.select.mockResolvedValue({
                data: null,
                error: {
                    message: 'Database connection failed'
                }
            });
            const result = await _rsvpManagementService.getRSVPStatistics({});
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('DATABASE_ERROR');
                expect(result.error.message).toBe('Database connection failed');
            }
        });
        it('should filter statistics by multiple criteria', async ()=>{
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.select.mockReturnValue(mockSupabase);
            mockSupabase.eq.mockResolvedValue({
                data: [
                    mockStatisticsData[0]
                ],
                error: null
            });
            const result = await _rsvpManagementService.getRSVPStatistics({
                eventId: 'event-1',
                status: 'attending'
            });
            expect(result.success).toBe(true);
            // Verify both filters were applied
            expect(mockSupabase.eq).toHaveBeenCalledWith('event_id', 'event-1');
            expect(mockSupabase.eq).toHaveBeenCalledWith('status', 'attending');
        });
        it('should default guest_count to 1 when null for attending RSVPs', async ()=>{
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.select.mockResolvedValue({
                data: [
                    {
                        status: 'attending',
                        guest_count: null
                    },
                    {
                        status: 'attending',
                        guest_count: 2
                    }
                ],
                error: null
            });
            const result = await _rsvpManagementService.getRSVPStatistics({});
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.totalGuestCount).toBe(3); // 1 (default) + 2
            }
        });
    });
    describe('bulkUpdateRSVPs', ()=>{
        it('should return success with updated count when valid input', async ()=>{
            const rsvpIds = [
                'rsvp-1',
                'rsvp-2',
                'rsvp-3'
            ];
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.update.mockReturnValue(mockSupabase);
            mockSupabase.in.mockReturnValue(mockSupabase);
            mockSupabase.select.mockResolvedValue({
                data: [
                    {
                        id: 'rsvp-1'
                    },
                    {
                        id: 'rsvp-2'
                    },
                    {
                        id: 'rsvp-3'
                    }
                ],
                error: null
            });
            const result = await _rsvpManagementService.bulkUpdateRSVPs(rsvpIds, 'attending', 'Bulk approved');
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.updatedCount).toBe(3);
            }
            // Verify update was called with correct data
            expect(mockSupabase.update).toHaveBeenCalledWith(expect.objectContaining({
                status: 'attending',
                notes: 'Bulk approved',
                responded_at: expect.any(String),
                updated_at: expect.any(String)
            }));
            // Verify in was called with correct IDs
            expect(mockSupabase.in).toHaveBeenCalledWith('id', rsvpIds);
        });
        it('should update status and set responded_at for non-pending status', async ()=>{
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.update.mockReturnValue(mockSupabase);
            mockSupabase.in.mockReturnValue(mockSupabase);
            mockSupabase.select.mockResolvedValue({
                data: [
                    {
                        id: 'rsvp-1'
                    }
                ],
                error: null
            });
            await _rsvpManagementService.bulkUpdateRSVPs([
                'rsvp-1'
            ], 'attending');
            expect(mockSupabase.update).toHaveBeenCalledWith(expect.objectContaining({
                status: 'attending',
                responded_at: expect.any(String)
            }));
        });
        it('should include notes when provided', async ()=>{
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.update.mockReturnValue(mockSupabase);
            mockSupabase.in.mockReturnValue(mockSupabase);
            mockSupabase.select.mockResolvedValue({
                data: [
                    {
                        id: 'rsvp-1'
                    }
                ],
                error: null
            });
            await _rsvpManagementService.bulkUpdateRSVPs([
                'rsvp-1'
            ], 'attending', 'Admin approved');
            expect(mockSupabase.update).toHaveBeenCalledWith(expect.objectContaining({
                notes: 'Admin approved'
            }));
        });
        it('should handle partial updates when some RSVPs not found', async ()=>{
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.update.mockReturnValue(mockSupabase);
            mockSupabase.in.mockReturnValue(mockSupabase);
            mockSupabase.select.mockResolvedValue({
                data: [
                    {
                        id: 'rsvp-1'
                    },
                    {
                        id: 'rsvp-2'
                    }
                ],
                error: null
            });
            const result = await _rsvpManagementService.bulkUpdateRSVPs([
                'rsvp-1',
                'rsvp-2',
                'rsvp-3'
            ], 'attending');
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.updatedCount).toBe(2);
            }
        });
        it('should return VALIDATION_ERROR when empty rsvpIds array', async ()=>{
            const result = await _rsvpManagementService.bulkUpdateRSVPs([], 'attending');
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        it('should return VALIDATION_ERROR when too many rsvpIds (>100)', async ()=>{
            const tooManyIds = Array.from({
                length: 101
            }, (_, i)=>`rsvp-${i}`);
            const result = await _rsvpManagementService.bulkUpdateRSVPs(tooManyIds, 'attending');
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        it('should return VALIDATION_ERROR when invalid status', async ()=>{
            const result = await _rsvpManagementService.bulkUpdateRSVPs([
                'rsvp-1'
            ], 'invalid-status');
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        it('should return DATABASE_ERROR when database update fails', async ()=>{
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.update.mockReturnValue(mockSupabase);
            mockSupabase.in.mockReturnValue(mockSupabase);
            mockSupabase.select.mockResolvedValue({
                data: null,
                error: {
                    message: 'Database connection failed'
                }
            });
            const result = await _rsvpManagementService.bulkUpdateRSVPs([
                'rsvp-1'
            ], 'attending');
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('DATABASE_ERROR');
                expect(result.error.message).toBe('Database connection failed');
            }
        });
        it('should not set responded_at when status is pending', async ()=>{
            mockSupabase.from.mockReturnValue(mockSupabase);
            mockSupabase.update.mockReturnValue(mockSupabase);
            mockSupabase.in.mockReturnValue(mockSupabase);
            mockSupabase.select.mockResolvedValue({
                data: [
                    {
                        id: 'rsvp-1'
                    }
                ],
                error: null
            });
            await _rsvpManagementService.bulkUpdateRSVPs([
                'rsvp-1'
            ], 'pending');
            expect(mockSupabase.update).toHaveBeenCalledWith(expect.objectContaining({
                status: 'pending'
            }));
            // Verify responded_at is NOT in the update data
            const updateCall = mockSupabase.update.mock.calls[0][0];
            expect(updateCall.responded_at).toBeUndefined();
        });
        it('should handle all valid status values', async ()=>{
            const statuses = [
                'pending',
                'attending',
                'declined',
                'maybe'
            ];
            for (const status of statuses){
                // Reset mocks for each iteration
                jest.clearAllMocks();
                (0, _mockSupabase.resetMockSupabaseClient)(mockSupabase);
                mockSupabase.from.mockReturnValue(mockSupabase);
                mockSupabase.update.mockReturnValue(mockSupabase);
                mockSupabase.in.mockReturnValue(mockSupabase);
                mockSupabase.select.mockResolvedValue({
                    data: [
                        {
                            id: 'rsvp-1'
                        }
                    ],
                    error: null
                });
                const result = await _rsvpManagementService.bulkUpdateRSVPs([
                    'rsvp-1'
                ], status);
                expect(result.success).toBe(true);
                if (result.success) {
                    expect(result.data.updatedCount).toBe(1);
                }
                expect(mockSupabase.update).toHaveBeenCalledWith(expect.objectContaining({
                    status
                }));
            }
        });
    });
    describe('exportRSVPsToCSV', ()=>{
        it('should return success with CSV string when valid filters', async ()=>{
            const mockRSVPs = [
                {
                    id: 'rsvp-1',
                    guestFirstName: 'John',
                    guestLastName: 'Doe',
                    guestEmail: 'john@example.com',
                    eventName: 'Wedding Ceremony',
                    activityName: null,
                    status: 'attending',
                    guestCount: 2,
                    dietaryNotes: 'Vegetarian',
                    specialRequirements: null,
                    notes: null,
                    respondedAt: '2024-01-15T10:00:00Z',
                    createdAt: '2024-01-10T10:00:00Z',
                    updatedAt: '2024-01-15T10:00:00Z',
                    guestId: 'guest-1',
                    eventId: 'event-1',
                    activityId: null
                }
            ];
            // Mock listRSVPs to return test data
            jest.spyOn(_rsvpManagementService, 'listRSVPs').mockResolvedValue({
                success: true,
                data: {
                    data: mockRSVPs,
                    pagination: {
                        page: 1,
                        limit: 10000,
                        total: 1,
                        totalPages: 1
                    },
                    statistics: {
                        totalRSVPs: 1,
                        byStatus: {
                            attending: 1,
                            declined: 0,
                            maybe: 0,
                            pending: 0
                        },
                        totalGuestCount: 2
                    }
                }
            });
            const result = await _rsvpManagementService.exportRSVPsToCSV({});
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data).toContain('RSVP ID,Guest First Name,Guest Last Name');
                expect(result.data).toContain('rsvp-1,John,Doe');
                expect(result.data).toContain('Wedding Ceremony');
                expect(result.data).toContain('attending');
                expect(result.data).toContain('Vegetarian');
            }
            // Verify listRSVPs was called with correct parameters
            expect(_rsvpManagementService.listRSVPs).toHaveBeenCalledWith({}, {
                page: 1,
                limit: 10000
            });
        });
        it('should escape CSV values with commas', async ()=>{
            const mockRSVPs = [
                {
                    id: 'rsvp-1',
                    guestFirstName: 'John',
                    guestLastName: 'Doe, Jr.',
                    guestEmail: 'john@example.com',
                    eventName: 'Wedding Ceremony',
                    activityName: null,
                    status: 'attending',
                    guestCount: 1,
                    dietaryNotes: 'No nuts, no dairy',
                    specialRequirements: null,
                    notes: null,
                    respondedAt: '2024-01-15T10:00:00Z',
                    createdAt: '2024-01-10T10:00:00Z',
                    updatedAt: '2024-01-15T10:00:00Z',
                    guestId: 'guest-1',
                    eventId: 'event-1',
                    activityId: null
                }
            ];
            jest.spyOn(_rsvpManagementService, 'listRSVPs').mockResolvedValue({
                success: true,
                data: {
                    data: mockRSVPs,
                    pagination: {
                        page: 1,
                        limit: 10000,
                        total: 1,
                        totalPages: 1
                    },
                    statistics: {
                        totalRSVPs: 1,
                        byStatus: {
                            attending: 1,
                            declined: 0,
                            maybe: 0,
                            pending: 0
                        },
                        totalGuestCount: 1
                    }
                }
            });
            const result = await _rsvpManagementService.exportRSVPsToCSV({});
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data).toContain('"Doe, Jr."');
                expect(result.data).toContain('"No nuts, no dairy"');
            }
        });
        it('should escape CSV values with quotes', async ()=>{
            const mockRSVPs = [
                {
                    id: 'rsvp-1',
                    guestFirstName: 'John',
                    guestLastName: 'Doe',
                    guestEmail: 'john@example.com',
                    eventName: 'Wedding Ceremony',
                    activityName: null,
                    status: 'attending',
                    guestCount: 1,
                    dietaryNotes: null,
                    specialRequirements: null,
                    notes: 'Guest said "excited to attend"',
                    respondedAt: '2024-01-15T10:00:00Z',
                    createdAt: '2024-01-10T10:00:00Z',
                    updatedAt: '2024-01-15T10:00:00Z',
                    guestId: 'guest-1',
                    eventId: 'event-1',
                    activityId: null
                }
            ];
            jest.spyOn(_rsvpManagementService, 'listRSVPs').mockResolvedValue({
                success: true,
                data: {
                    data: mockRSVPs,
                    pagination: {
                        page: 1,
                        limit: 10000,
                        total: 1,
                        totalPages: 1
                    },
                    statistics: {
                        totalRSVPs: 1,
                        byStatus: {
                            attending: 1,
                            declined: 0,
                            maybe: 0,
                            pending: 0
                        },
                        totalGuestCount: 1
                    }
                }
            });
            const result = await _rsvpManagementService.exportRSVPsToCSV({});
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data).toContain('""excited to attend""');
            }
        });
        it('should handle empty results', async ()=>{
            jest.spyOn(_rsvpManagementService, 'listRSVPs').mockResolvedValue({
                success: true,
                data: {
                    data: [],
                    pagination: {
                        page: 1,
                        limit: 10000,
                        total: 0,
                        totalPages: 0
                    },
                    statistics: {
                        totalRSVPs: 0,
                        byStatus: {
                            attending: 0,
                            declined: 0,
                            maybe: 0,
                            pending: 0
                        },
                        totalGuestCount: 0
                    }
                }
            });
            const result = await _rsvpManagementService.exportRSVPsToCSV({});
            expect(result.success).toBe(true);
            if (result.success) {
                // Should only have header row
                const lines = result.data.split('\n');
                expect(lines.length).toBe(1);
                expect(lines[0]).toContain('RSVP ID,Guest First Name');
            }
        });
        it('should return VALIDATION_ERROR when invalid filter parameters', async ()=>{
            const result = await _rsvpManagementService.exportRSVPsToCSV({
                eventId: 'invalid-uuid'
            });
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        it('should propagate errors from listRSVPs', async ()=>{
            jest.spyOn(_rsvpManagementService, 'listRSVPs').mockResolvedValue({
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: 'Database connection failed'
                }
            });
            const result = await _rsvpManagementService.exportRSVPsToCSV({});
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('DATABASE_ERROR');
                expect(result.error.message).toBe('Database connection failed');
            }
        });
        it('should apply filters when exporting', async ()=>{
            jest.spyOn(_rsvpManagementService, 'listRSVPs').mockResolvedValue({
                success: true,
                data: {
                    data: [],
                    pagination: {
                        page: 1,
                        limit: 10000,
                        total: 0,
                        totalPages: 0
                    },
                    statistics: {
                        totalRSVPs: 0,
                        byStatus: {
                            attending: 0,
                            declined: 0,
                            maybe: 0,
                            pending: 0
                        },
                        totalGuestCount: 0
                    }
                }
            });
            const filters = {
                eventId: 'event-1',
                status: 'attending'
            };
            await _rsvpManagementService.exportRSVPsToCSV(filters);
            // Verify listRSVPs was called with the filters
            expect(_rsvpManagementService.listRSVPs).toHaveBeenCalledWith(filters, {
                page: 1,
                limit: 10000
            });
        });
        it('should handle newlines in CSV values', async ()=>{
            const mockRSVPs = [
                {
                    id: 'rsvp-1',
                    guestFirstName: 'John',
                    guestLastName: 'Doe',
                    guestEmail: 'john@example.com',
                    eventName: 'Wedding Ceremony',
                    activityName: null,
                    status: 'attending',
                    guestCount: 1,
                    dietaryNotes: null,
                    specialRequirements: null,
                    notes: 'Line 1\nLine 2',
                    respondedAt: '2024-01-15T10:00:00Z',
                    createdAt: '2024-01-10T10:00:00Z',
                    updatedAt: '2024-01-15T10:00:00Z',
                    guestId: 'guest-1',
                    eventId: 'event-1',
                    activityId: null
                }
            ];
            jest.spyOn(_rsvpManagementService, 'listRSVPs').mockResolvedValue({
                success: true,
                data: {
                    data: mockRSVPs,
                    pagination: {
                        page: 1,
                        limit: 10000,
                        total: 1,
                        totalPages: 1
                    },
                    statistics: {
                        totalRSVPs: 1,
                        byStatus: {
                            attending: 1,
                            declined: 0,
                            maybe: 0,
                            pending: 0
                        },
                        totalGuestCount: 1
                    }
                }
            });
            const result = await _rsvpManagementService.exportRSVPsToCSV({});
            expect(result.success).toBe(true);
            if (result.success) {
                // Newlines should be wrapped in quotes
                expect(result.data).toContain('"Line 1\nLine 2"');
            }
        });
        it('should handle null values in CSV', async ()=>{
            const mockRSVPs = [
                {
                    id: 'rsvp-1',
                    guestFirstName: 'John',
                    guestLastName: 'Doe',
                    guestEmail: null,
                    eventName: null,
                    activityName: null,
                    status: 'pending',
                    guestCount: null,
                    dietaryNotes: null,
                    specialRequirements: null,
                    notes: null,
                    respondedAt: null,
                    createdAt: '2024-01-10T10:00:00Z',
                    updatedAt: '2024-01-10T10:00:00Z',
                    guestId: 'guest-1',
                    eventId: null,
                    activityId: null
                }
            ];
            jest.spyOn(_rsvpManagementService, 'listRSVPs').mockResolvedValue({
                success: true,
                data: {
                    data: mockRSVPs,
                    pagination: {
                        page: 1,
                        limit: 10000,
                        total: 1,
                        totalPages: 1
                    },
                    statistics: {
                        totalRSVPs: 1,
                        byStatus: {
                            attending: 0,
                            declined: 0,
                            maybe: 0,
                            pending: 1
                        },
                        totalGuestCount: 0
                    }
                }
            });
            const result = await _rsvpManagementService.exportRSVPsToCSV({});
            expect(result.success).toBe(true);
            if (result.success) {
                // Null values should be empty strings
                const lines = result.data.split('\n');
                expect(lines[1]).toContain('rsvp-1,John,Doe,,,');
                // Guest count should default to 1
                expect(lines[1]).toContain(',1,');
            }
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvc2VydmljZXMvcnN2cE1hbmFnZW1lbnRTZXJ2aWNlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlTW9ja1N1cGFiYXNlQ2xpZW50LCByZXNldE1vY2tTdXBhYmFzZUNsaWVudCB9IGZyb20gJ0AvX190ZXN0c19fL2hlbHBlcnMvbW9ja1N1cGFiYXNlJztcbmltcG9ydCAqIGFzIHJzdnBNYW5hZ2VtZW50U2VydmljZSBmcm9tICcuL3JzdnBNYW5hZ2VtZW50U2VydmljZSc7XG5pbXBvcnQgdHlwZSB7IFJTVlBGaWx0ZXJzLCBQYWdpbmF0aW9uUGFyYW1zIH0gZnJvbSAnLi9yc3ZwTWFuYWdlbWVudFNlcnZpY2UnO1xuXG4vLyBNb2NrIFN1cGFiYXNlXG5qZXN0Lm1vY2soJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcycsICgpID0+ICh7XG4gIGNyZWF0ZUNsaWVudDogamVzdC5mbigpLFxufSkpO1xuXG5kZXNjcmliZSgncnN2cE1hbmFnZW1lbnRTZXJ2aWNlJywgKCkgPT4ge1xuICBsZXQgbW9ja1N1cGFiYXNlOiBSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVNb2NrU3VwYWJhc2VDbGllbnQ+O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIGplc3QucmVzdG9yZUFsbE1vY2tzKCk7XG4gICAgbW9ja1N1cGFiYXNlID0gY3JlYXRlTW9ja1N1cGFiYXNlQ2xpZW50KCk7XG4gICAgcmVzZXRNb2NrU3VwYWJhc2VDbGllbnQobW9ja1N1cGFiYXNlKTtcbiAgICBjb25zdCB7IGNyZWF0ZUNsaWVudCB9ID0gcmVxdWlyZSgnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJyk7XG4gICAgY3JlYXRlQ2xpZW50Lm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QucmVzdG9yZUFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsaXN0UlNWUHMnLCAoKSA9PiB7XG4gICAgY29uc3QgbW9ja1JTVlBEYXRhID0gW1xuICAgICAge1xuICAgICAgICBpZDogJ3JzdnAtMScsXG4gICAgICAgIGd1ZXN0X2lkOiAnZ3Vlc3QtMScsXG4gICAgICAgIGV2ZW50X2lkOiAnZXZlbnQtMScsXG4gICAgICAgIGFjdGl2aXR5X2lkOiBudWxsLFxuICAgICAgICBzdGF0dXM6ICdhdHRlbmRpbmcnLFxuICAgICAgICBndWVzdF9jb3VudDogMixcbiAgICAgICAgZGlldGFyeV9ub3RlczogJ1ZlZ2V0YXJpYW4nLFxuICAgICAgICBzcGVjaWFsX3JlcXVpcmVtZW50czogbnVsbCxcbiAgICAgICAgbm90ZXM6IG51bGwsXG4gICAgICAgIHJlc3BvbmRlZF9hdDogJzIwMjQtMDEtMTVUMTA6MDA6MDBaJyxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMTBUMTA6MDA6MDBaJyxcbiAgICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMTVUMTA6MDA6MDBaJyxcbiAgICAgICAgZ3Vlc3RzOiB7XG4gICAgICAgICAgZmlyc3RfbmFtZTogJ0pvaG4nLFxuICAgICAgICAgIGxhc3RfbmFtZTogJ0RvZScsXG4gICAgICAgICAgZW1haWw6ICdqb2huQGV4YW1wbGUuY29tJyxcbiAgICAgICAgfSxcbiAgICAgICAgZXZlbnRzOiB7XG4gICAgICAgICAgbmFtZTogJ1dlZGRpbmcgQ2VyZW1vbnknLFxuICAgICAgICB9LFxuICAgICAgICBhY3Rpdml0aWVzOiBudWxsLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdyc3ZwLTInLFxuICAgICAgICBndWVzdF9pZDogJ2d1ZXN0LTInLFxuICAgICAgICBldmVudF9pZDogbnVsbCxcbiAgICAgICAgYWN0aXZpdHlfaWQ6ICdhY3Rpdml0eS0xJyxcbiAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgIGd1ZXN0X2NvdW50OiAxLFxuICAgICAgICBkaWV0YXJ5X25vdGVzOiBudWxsLFxuICAgICAgICBzcGVjaWFsX3JlcXVpcmVtZW50czogbnVsbCxcbiAgICAgICAgbm90ZXM6IG51bGwsXG4gICAgICAgIHJlc3BvbmRlZF9hdDogbnVsbCxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMTJUMTA6MDA6MDBaJyxcbiAgICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMTJUMTA6MDA6MDBaJyxcbiAgICAgICAgZ3Vlc3RzOiB7XG4gICAgICAgICAgZmlyc3RfbmFtZTogJ0phbmUnLFxuICAgICAgICAgIGxhc3RfbmFtZTogJ1NtaXRoJyxcbiAgICAgICAgICBlbWFpbDogJ2phbmVAZXhhbXBsZS5jb20nLFxuICAgICAgICB9LFxuICAgICAgICBldmVudHM6IG51bGwsXG4gICAgICAgIGFjdGl2aXRpZXM6IHtcbiAgICAgICAgICBuYW1lOiAnQmVhY2ggQWN0aXZpdHknLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICBdO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc3VjY2VzcyB3aXRoIFJTVlBzIHdoZW4gdmFsaWQgZmlsdGVycyBhbmQgcGFnaW5hdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgdGhlIHF1ZXJ5IGNoYWluIGZvciBsaXN0UlNWUHNcbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICAgICAgbW9ja1N1cGFiYXNlLnNlbGVjdC5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5lcS5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5yYW5nZS5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5vcmRlci5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG1vY2tSU1ZQRGF0YSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIGNvdW50OiAyLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGZpbHRlcnM6IFJTVlBGaWx0ZXJzID0geyBldmVudElkOiAnZXZlbnQtMScgfTtcbiAgICAgIGNvbnN0IHBhZ2luYXRpb246IFBhZ2luYXRpb25QYXJhbXMgPSB7IHBhZ2U6IDEsIGxpbWl0OiA1MCB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByc3ZwTWFuYWdlbWVudFNlcnZpY2UubGlzdFJTVlBzKGZpbHRlcnMsIHBhZ2luYXRpb24pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmRhdGEpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmRhdGFbMF0uZ3Vlc3RGaXJzdE5hbWUpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmRhdGFbMF0uZXZlbnROYW1lKS50b0JlKCdXZWRkaW5nIENlcmVtb255Jyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5wYWdpbmF0aW9uLnBhZ2UpLnRvQmUoMSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5wYWdpbmF0aW9uLmxpbWl0KS50b0JlKDUwKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnBhZ2luYXRpb24udG90YWwpLnRvQmUoMik7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5wYWdpbmF0aW9uLnRvdGFsUGFnZXMpLnRvQmUoMSk7XG4gICAgICAgIC8vIFN0YXRpc3RpY3Mgc2hvdWxkIGJlIGNhbGN1bGF0ZWRcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnN0YXRpc3RpY3MudG90YWxSU1ZQcykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnN0YXRpc3RpY3MuYnlTdGF0dXMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpbHRlciBieSBldmVudCBJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICAgICAgbW9ja1N1cGFiYXNlLnNlbGVjdC5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5lcS5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5yYW5nZS5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5vcmRlci5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IFttb2NrUlNWUERhdGFbMF1dLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgY291bnQ6IDEsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcnN2cE1hbmFnZW1lbnRTZXJ2aWNlLmxpc3RSU1ZQcyhcbiAgICAgICAgeyBldmVudElkOiAnZXZlbnQtMScgfSxcbiAgICAgICAgeyBwYWdlOiAxLCBsaW1pdDogNTAgfVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5kYXRhKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5kYXRhWzBdLmV2ZW50SWQpLnRvQmUoJ2V2ZW50LTEnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IGVxIHdhcyBjYWxsZWQgd2l0aCBldmVudF9pZFxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZS5lcSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2V2ZW50X2lkJywgJ2V2ZW50LTEnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmlsdGVyIGJ5IGFjdGl2aXR5IElEJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICBtb2NrU3VwYWJhc2Uuc2VsZWN0Lm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICAgICAgbW9ja1N1cGFiYXNlLmVxLm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICAgICAgbW9ja1N1cGFiYXNlLnJhbmdlLm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICAgICAgbW9ja1N1cGFiYXNlLm9yZGVyLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogW21vY2tSU1ZQRGF0YVsxXV0sXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICBjb3VudDogMSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByc3ZwTWFuYWdlbWVudFNlcnZpY2UubGlzdFJTVlBzKFxuICAgICAgICB7IGFjdGl2aXR5SWQ6ICdhY3Rpdml0eS0xJyB9LFxuICAgICAgICB7IHBhZ2U6IDEsIGxpbWl0OiA1MCB9XG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmRhdGEpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmRhdGFbMF0uYWN0aXZpdHlJZCkudG9CZSgnYWN0aXZpdHktMScpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBWZXJpZnkgZXEgd2FzIGNhbGxlZCB3aXRoIGFjdGl2aXR5X2lkXG4gICAgICBleHBlY3QobW9ja1N1cGFiYXNlLmVxKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnYWN0aXZpdHlfaWQnLCAnYWN0aXZpdHktMScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmaWx0ZXIgYnkgc3RhdHVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICBtb2NrU3VwYWJhc2Uuc2VsZWN0Lm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICAgICAgbW9ja1N1cGFiYXNlLmVxLm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICAgICAgbW9ja1N1cGFiYXNlLnJhbmdlLm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICAgICAgbW9ja1N1cGFiYXNlLm9yZGVyLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogW21vY2tSU1ZQRGF0YVswXV0sXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICBjb3VudDogMSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByc3ZwTWFuYWdlbWVudFNlcnZpY2UubGlzdFJTVlBzKFxuICAgICAgICB7IHN0YXR1czogJ2F0dGVuZGluZycgfSxcbiAgICAgICAgeyBwYWdlOiAxLCBsaW1pdDogNTAgfVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5kYXRhKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5kYXRhWzBdLnN0YXR1cykudG9CZSgnYXR0ZW5kaW5nJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBlcSB3YXMgY2FsbGVkIHdpdGggc3RhdHVzXG4gICAgICBleHBlY3QobW9ja1N1cGFiYXNlLmVxKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnc3RhdHVzJywgJ2F0dGVuZGluZycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmaWx0ZXIgYnkgZ3Vlc3QgSUQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrU3VwYWJhc2UuZnJvbS5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5zZWxlY3QubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICBtb2NrU3VwYWJhc2UuZXEubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICBtb2NrU3VwYWJhc2UucmFuZ2UubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICBtb2NrU3VwYWJhc2Uub3JkZXIubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBbbW9ja1JTVlBEYXRhWzBdXSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIGNvdW50OiAxLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIE1vY2sgZ2V0UlNWUFN0YXRpc3RpY3NcbiAgICAgIGplc3Quc3B5T24ocnN2cE1hbmFnZW1lbnRTZXJ2aWNlLCAnZ2V0UlNWUFN0YXRpc3RpY3MnKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB0b3RhbFJTVlBzOiAxLFxuICAgICAgICAgIGJ5U3RhdHVzOiB7IGF0dGVuZGluZzogMSwgZGVjbGluZWQ6IDAsIG1heWJlOiAwLCBwZW5kaW5nOiAwIH0sXG4gICAgICAgICAgdG90YWxHdWVzdENvdW50OiAyLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJzdnBNYW5hZ2VtZW50U2VydmljZS5saXN0UlNWUHMoXG4gICAgICAgIHsgZ3Vlc3RJZDogJ2d1ZXN0LTEnIH0sXG4gICAgICAgIHsgcGFnZTogMSwgbGltaXQ6IDUwIH1cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuZGF0YSkudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuZGF0YVswXS5ndWVzdElkKS50b0JlKCdndWVzdC0xJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBlcSB3YXMgY2FsbGVkIHdpdGggZ3Vlc3RfaWRcbiAgICAgIGV4cGVjdChtb2NrU3VwYWJhc2UuZXEpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdndWVzdF9pZCcsICdndWVzdC0xJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFwcGx5IHBhZ2luYXRpb24gY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICBtb2NrU3VwYWJhc2Uuc2VsZWN0Lm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICAgICAgbW9ja1N1cGFiYXNlLnJhbmdlLm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICAgICAgbW9ja1N1cGFiYXNlLm9yZGVyLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbW9ja1JTVlBEYXRhLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgY291bnQ6IDEwMCxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBNb2NrIGdldFJTVlBTdGF0aXN0aWNzXG4gICAgICBqZXN0LnNweU9uKHJzdnBNYW5hZ2VtZW50U2VydmljZSwgJ2dldFJTVlBTdGF0aXN0aWNzJykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdG90YWxSU1ZQczogMTAwLFxuICAgICAgICAgIGJ5U3RhdHVzOiB7IGF0dGVuZGluZzogNTAsIGRlY2xpbmVkOiAyNSwgbWF5YmU6IDE1LCBwZW5kaW5nOiAxMCB9LFxuICAgICAgICAgIHRvdGFsR3Vlc3RDb3VudDogNTAsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcnN2cE1hbmFnZW1lbnRTZXJ2aWNlLmxpc3RSU1ZQcyhcbiAgICAgICAge30sXG4gICAgICAgIHsgcGFnZTogMiwgbGltaXQ6IDI1IH1cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEucGFnaW5hdGlvbi5wYWdlKS50b0JlKDIpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEucGFnaW5hdGlvbi5saW1pdCkudG9CZSgyNSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5wYWdpbmF0aW9uLnRvdGFsKS50b0JlKDEwMCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5wYWdpbmF0aW9uLnRvdGFsUGFnZXMpLnRvQmUoNCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSByYW5nZSB3YXMgY2FsbGVkIHdpdGggY29ycmVjdCB2YWx1ZXMgKHBhZ2UgMiwgbGltaXQgMjUgPSBmcm9tIDI1IHRvIDQ5KVxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZS5yYW5nZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoMjUsIDQ5KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIFZBTElEQVRJT05fRVJST1Igd2hlbiBpbnZhbGlkIGZpbHRlciBwYXJhbWV0ZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcnN2cE1hbmFnZW1lbnRTZXJ2aWNlLmxpc3RSU1ZQcyhcbiAgICAgICAgeyBldmVudElkOiAnaW52YWxpZC11dWlkJyB9IGFzIGFueSxcbiAgICAgICAgeyBwYWdlOiAxLCBsaW1pdDogNTAgfVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBWQUxJREFUSU9OX0VSUk9SIHdoZW4gaW52YWxpZCBwYWdpbmF0aW9uIHBhcmFtZXRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByc3ZwTWFuYWdlbWVudFNlcnZpY2UubGlzdFJTVlBzKFxuICAgICAgICB7fSxcbiAgICAgICAgeyBwYWdlOiAtMSwgbGltaXQ6IDUwIH0gYXMgYW55XG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIERBVEFCQVNFX0VSUk9SIHdoZW4gZGF0YWJhc2UgcXVlcnkgZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrU3VwYWJhc2UuZnJvbS5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5zZWxlY3QubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICBtb2NrU3VwYWJhc2UucmFuZ2UubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICBtb2NrU3VwYWJhc2Uub3JkZXIubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBlcnJvcjogeyBtZXNzYWdlOiAnRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnIH0sXG4gICAgICAgIGNvdW50OiBudWxsLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJzdnBNYW5hZ2VtZW50U2VydmljZS5saXN0UlNWUHMoe30sIHsgcGFnZTogMSwgbGltaXQ6IDUwIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ0RBVEFCQVNFX0VSUk9SJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IubWVzc2FnZSkudG9CZSgnRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYXBwbHkgbXVsdGlwbGUgZmlsdGVycyB0b2dldGhlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICAgICAgbW9ja1N1cGFiYXNlLnNlbGVjdC5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5lcS5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5yYW5nZS5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5vcmRlci5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IFttb2NrUlNWUERhdGFbMF1dLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgY291bnQ6IDEsXG4gICAgICB9KTtcblxuICAgICAgLy8gTW9jayBnZXRSU1ZQU3RhdGlzdGljc1xuICAgICAgamVzdC5zcHlPbihyc3ZwTWFuYWdlbWVudFNlcnZpY2UsICdnZXRSU1ZQU3RhdGlzdGljcycpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHRvdGFsUlNWUHM6IDEsXG4gICAgICAgICAgYnlTdGF0dXM6IHsgYXR0ZW5kaW5nOiAxLCBkZWNsaW5lZDogMCwgbWF5YmU6IDAsIHBlbmRpbmc6IDAgfSxcbiAgICAgICAgICB0b3RhbEd1ZXN0Q291bnQ6IDIsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcnN2cE1hbmFnZW1lbnRTZXJ2aWNlLmxpc3RSU1ZQcyhcbiAgICAgICAgeyBldmVudElkOiAnZXZlbnQtMScsIHN0YXR1czogJ2F0dGVuZGluZycsIGd1ZXN0SWQ6ICdndWVzdC0xJyB9LFxuICAgICAgICB7IHBhZ2U6IDEsIGxpbWl0OiA1MCB9XG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBhbGwgZmlsdGVycyB3ZXJlIGFwcGxpZWRcbiAgICAgIGV4cGVjdChtb2NrU3VwYWJhc2UuZXEpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdldmVudF9pZCcsICdldmVudC0xJyk7XG4gICAgICBleHBlY3QobW9ja1N1cGFiYXNlLmVxKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnc3RhdHVzJywgJ2F0dGVuZGluZycpO1xuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZS5lcSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2d1ZXN0X2lkJywgJ2d1ZXN0LTEnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNlYXJjaCBxdWVyeSBmaWx0ZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrU3VwYWJhc2UuZnJvbS5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5zZWxlY3QubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICBtb2NrU3VwYWJhc2Uub3IubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICBtb2NrU3VwYWJhc2UucmFuZ2UubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICBtb2NrU3VwYWJhc2Uub3JkZXIubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBbbW9ja1JTVlBEYXRhWzBdXSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIGNvdW50OiAxLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIE1vY2sgZ2V0UlNWUFN0YXRpc3RpY3NcbiAgICAgIGplc3Quc3B5T24ocnN2cE1hbmFnZW1lbnRTZXJ2aWNlLCAnZ2V0UlNWUFN0YXRpc3RpY3MnKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB0b3RhbFJTVlBzOiAxLFxuICAgICAgICAgIGJ5U3RhdHVzOiB7IGF0dGVuZGluZzogMSwgZGVjbGluZWQ6IDAsIG1heWJlOiAwLCBwZW5kaW5nOiAwIH0sXG4gICAgICAgICAgdG90YWxHdWVzdENvdW50OiAyLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJzdnBNYW5hZ2VtZW50U2VydmljZS5saXN0UlNWUHMoXG4gICAgICAgIHsgc2VhcmNoUXVlcnk6ICdKb2huJyB9LFxuICAgICAgICB7IHBhZ2U6IDEsIGxpbWl0OiA1MCB9XG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBvciB3YXMgY2FsbGVkIGZvciBzZWFyY2hcbiAgICAgIGV4cGVjdChtb2NrU3VwYWJhc2Uub3IpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGVmYXVsdCB0byBwYWdlIDEgYW5kIGxpbWl0IDUwIHdoZW4gbm90IHNwZWNpZmllZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICAgICAgbW9ja1N1cGFiYXNlLnNlbGVjdC5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5yYW5nZS5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5vcmRlci5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG1vY2tSU1ZQRGF0YSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIGNvdW50OiAyLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIE1vY2sgZ2V0UlNWUFN0YXRpc3RpY3NcbiAgICAgIGplc3Quc3B5T24ocnN2cE1hbmFnZW1lbnRTZXJ2aWNlLCAnZ2V0UlNWUFN0YXRpc3RpY3MnKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB0b3RhbFJTVlBzOiAyLFxuICAgICAgICAgIGJ5U3RhdHVzOiB7IGF0dGVuZGluZzogMSwgZGVjbGluZWQ6IDAsIG1heWJlOiAwLCBwZW5kaW5nOiAxIH0sXG4gICAgICAgICAgdG90YWxHdWVzdENvdW50OiAyLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJzdnBNYW5hZ2VtZW50U2VydmljZS5saXN0UlNWUHMoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5wYWdpbmF0aW9uLnBhZ2UpLnRvQmUoMSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5wYWdpbmF0aW9uLmxpbWl0KS50b0JlKDUwKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IHJhbmdlIHdhcyBjYWxsZWQgd2l0aCBkZWZhdWx0IHZhbHVlcyAocGFnZSAxLCBsaW1pdCA1MCA9IGZyb20gMCB0byA0OSlcbiAgICAgIGV4cGVjdChtb2NrU3VwYWJhc2UucmFuZ2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDAsIDQ5KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldFJTVlBTdGF0aXN0aWNzJywgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tTdGF0aXN0aWNzRGF0YSA9IFtcbiAgICAgIHsgc3RhdHVzOiAnYXR0ZW5kaW5nJywgZ3Vlc3RfY291bnQ6IDIgfSxcbiAgICAgIHsgc3RhdHVzOiAnYXR0ZW5kaW5nJywgZ3Vlc3RfY291bnQ6IDEgfSxcbiAgICAgIHsgc3RhdHVzOiAnZGVjbGluZWQnLCBndWVzdF9jb3VudDogMSB9LFxuICAgICAgeyBzdGF0dXM6ICdtYXliZScsIGd1ZXN0X2NvdW50OiBudWxsIH0sXG4gICAgICB7IHN0YXR1czogJ3BlbmRpbmcnLCBndWVzdF9jb3VudDogMSB9LFxuICAgIF07XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBzdWNjZXNzIHdpdGggYWNjdXJhdGUgc3RhdGlzdGljcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICAgICAgbW9ja1N1cGFiYXNlLnNlbGVjdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG1vY2tTdGF0aXN0aWNzRGF0YSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcnN2cE1hbmFnZW1lbnRTZXJ2aWNlLmdldFJTVlBTdGF0aXN0aWNzKHt9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS50b3RhbFJTVlBzKS50b0JlKDUpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuYnlTdGF0dXMuYXR0ZW5kaW5nKS50b0JlKDIpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuYnlTdGF0dXMuZGVjbGluZWQpLnRvQmUoMSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5ieVN0YXR1cy5tYXliZSkudG9CZSgxKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmJ5U3RhdHVzLnBlbmRpbmcpLnRvQmUoMSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS50b3RhbEd1ZXN0Q291bnQpLnRvQmUoMyk7IC8vIDIgKyAxIGZyb20gYXR0ZW5kaW5nXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpbHRlciBzdGF0aXN0aWNzIGJ5IGV2ZW50IElEJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICBtb2NrU3VwYWJhc2Uuc2VsZWN0Lm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICAgICAgbW9ja1N1cGFiYXNlLmVxLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogW21vY2tTdGF0aXN0aWNzRGF0YVswXSwgbW9ja1N0YXRpc3RpY3NEYXRhWzFdXSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcnN2cE1hbmFnZW1lbnRTZXJ2aWNlLmdldFJTVlBTdGF0aXN0aWNzKHtcbiAgICAgICAgZXZlbnRJZDogJ2V2ZW50LTEnLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEudG90YWxSU1ZQcykudG9CZSgyKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmJ5U3RhdHVzLmF0dGVuZGluZykudG9CZSgyKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IGVxIHdhcyBjYWxsZWQgd2l0aCBldmVudF9pZFxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZS5lcSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2V2ZW50X2lkJywgJ2V2ZW50LTEnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHJlc3VsdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrU3VwYWJhc2UuZnJvbS5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5zZWxlY3QubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcnN2cE1hbmFnZW1lbnRTZXJ2aWNlLmdldFJTVlBTdGF0aXN0aWNzKHt9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS50b3RhbFJTVlBzKS50b0JlKDApO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuYnlTdGF0dXMuYXR0ZW5kaW5nKS50b0JlKDApO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEudG90YWxHdWVzdENvdW50KS50b0JlKDApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIGludmFsaWQgZmlsdGVyIHBhcmFtZXRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByc3ZwTWFuYWdlbWVudFNlcnZpY2UuZ2V0UlNWUFN0YXRpc3RpY3Moe1xuICAgICAgICBldmVudElkOiAnaW52YWxpZC11dWlkJyxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBEQVRBQkFTRV9FUlJPUiB3aGVuIGRhdGFiYXNlIHF1ZXJ5IGZhaWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICBtb2NrU3VwYWJhc2Uuc2VsZWN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJyB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJzdnBNYW5hZ2VtZW50U2VydmljZS5nZXRSU1ZQU3RhdGlzdGljcyh7fSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnREFUQUJBU0VfRVJST1InKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5tZXNzYWdlKS50b0JlKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmaWx0ZXIgc3RhdGlzdGljcyBieSBtdWx0aXBsZSBjcml0ZXJpYScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICAgICAgbW9ja1N1cGFiYXNlLnNlbGVjdC5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5lcS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IFttb2NrU3RhdGlzdGljc0RhdGFbMF1dLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByc3ZwTWFuYWdlbWVudFNlcnZpY2UuZ2V0UlNWUFN0YXRpc3RpY3Moe1xuICAgICAgICBldmVudElkOiAnZXZlbnQtMScsXG4gICAgICAgIHN0YXR1czogJ2F0dGVuZGluZycsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgYm90aCBmaWx0ZXJzIHdlcmUgYXBwbGllZFxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZS5lcSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2V2ZW50X2lkJywgJ2V2ZW50LTEnKTtcbiAgICAgIGV4cGVjdChtb2NrU3VwYWJhc2UuZXEpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdzdGF0dXMnLCAnYXR0ZW5kaW5nJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRlZmF1bHQgZ3Vlc3RfY291bnQgdG8gMSB3aGVuIG51bGwgZm9yIGF0dGVuZGluZyBSU1ZQcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICAgICAgbW9ja1N1cGFiYXNlLnNlbGVjdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IFtcbiAgICAgICAgICB7IHN0YXR1czogJ2F0dGVuZGluZycsIGd1ZXN0X2NvdW50OiBudWxsIH0sXG4gICAgICAgICAgeyBzdGF0dXM6ICdhdHRlbmRpbmcnLCBndWVzdF9jb3VudDogMiB9LFxuICAgICAgICBdLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByc3ZwTWFuYWdlbWVudFNlcnZpY2UuZ2V0UlNWUFN0YXRpc3RpY3Moe30pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnRvdGFsR3Vlc3RDb3VudCkudG9CZSgzKTsgLy8gMSAoZGVmYXVsdCkgKyAyXG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdidWxrVXBkYXRlUlNWUHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc3VjY2VzcyB3aXRoIHVwZGF0ZWQgY291bnQgd2hlbiB2YWxpZCBpbnB1dCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJzdnBJZHMgPSBbJ3JzdnAtMScsICdyc3ZwLTInLCAncnN2cC0zJ107XG4gICAgICBcbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICAgICAgbW9ja1N1cGFiYXNlLnVwZGF0ZS5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5pbi5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5zZWxlY3QubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBbeyBpZDogJ3JzdnAtMScgfSwgeyBpZDogJ3JzdnAtMicgfSwgeyBpZDogJ3JzdnAtMycgfV0sXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJzdnBNYW5hZ2VtZW50U2VydmljZS5idWxrVXBkYXRlUlNWUHMoXG4gICAgICAgIHJzdnBJZHMsXG4gICAgICAgICdhdHRlbmRpbmcnLFxuICAgICAgICAnQnVsayBhcHByb3ZlZCdcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEudXBkYXRlZENvdW50KS50b0JlKDMpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBWZXJpZnkgdXBkYXRlIHdhcyBjYWxsZWQgd2l0aCBjb3JyZWN0IGRhdGFcbiAgICAgIGV4cGVjdChtb2NrU3VwYWJhc2UudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHN0YXR1czogJ2F0dGVuZGluZycsXG4gICAgICAgICAgbm90ZXM6ICdCdWxrIGFwcHJvdmVkJyxcbiAgICAgICAgICByZXNwb25kZWRfYXQ6IGV4cGVjdC5hbnkoU3RyaW5nKSxcbiAgICAgICAgICB1cGRhdGVkX2F0OiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgaW4gd2FzIGNhbGxlZCB3aXRoIGNvcnJlY3QgSURzXG4gICAgICBleHBlY3QobW9ja1N1cGFiYXNlLmluKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnaWQnLCByc3ZwSWRzKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXBkYXRlIHN0YXR1cyBhbmQgc2V0IHJlc3BvbmRlZF9hdCBmb3Igbm9uLXBlbmRpbmcgc3RhdHVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICBtb2NrU3VwYWJhc2UudXBkYXRlLm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICAgICAgbW9ja1N1cGFiYXNlLmluLm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICAgICAgbW9ja1N1cGFiYXNlLnNlbGVjdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IFt7IGlkOiAncnN2cC0xJyB9XSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgcnN2cE1hbmFnZW1lbnRTZXJ2aWNlLmJ1bGtVcGRhdGVSU1ZQcyhbJ3JzdnAtMSddLCAnYXR0ZW5kaW5nJyk7XG5cbiAgICAgIGV4cGVjdChtb2NrU3VwYWJhc2UudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHN0YXR1czogJ2F0dGVuZGluZycsXG4gICAgICAgICAgcmVzcG9uZGVkX2F0OiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIG5vdGVzIHdoZW4gcHJvdmlkZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrU3VwYWJhc2UuZnJvbS5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS51cGRhdGUubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICBtb2NrU3VwYWJhc2UuaW4ubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICBtb2NrU3VwYWJhc2Uuc2VsZWN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogW3sgaWQ6ICdyc3ZwLTEnIH1dLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCByc3ZwTWFuYWdlbWVudFNlcnZpY2UuYnVsa1VwZGF0ZVJTVlBzKFxuICAgICAgICBbJ3JzdnAtMSddLFxuICAgICAgICAnYXR0ZW5kaW5nJyxcbiAgICAgICAgJ0FkbWluIGFwcHJvdmVkJ1xuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZS51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgbm90ZXM6ICdBZG1pbiBhcHByb3ZlZCcsXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcGFydGlhbCB1cGRhdGVzIHdoZW4gc29tZSBSU1ZQcyBub3QgZm91bmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrU3VwYWJhc2UuZnJvbS5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS51cGRhdGUubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICBtb2NrU3VwYWJhc2UuaW4ubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICBtb2NrU3VwYWJhc2Uuc2VsZWN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogW3sgaWQ6ICdyc3ZwLTEnIH0sIHsgaWQ6ICdyc3ZwLTInIH1dLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByc3ZwTWFuYWdlbWVudFNlcnZpY2UuYnVsa1VwZGF0ZVJTVlBzKFxuICAgICAgICBbJ3JzdnAtMScsICdyc3ZwLTInLCAncnN2cC0zJ10sXG4gICAgICAgICdhdHRlbmRpbmcnXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnVwZGF0ZWRDb3VudCkudG9CZSgyKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIFZBTElEQVRJT05fRVJST1Igd2hlbiBlbXB0eSByc3ZwSWRzIGFycmF5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcnN2cE1hbmFnZW1lbnRTZXJ2aWNlLmJ1bGtVcGRhdGVSU1ZQcyhcbiAgICAgICAgW10sXG4gICAgICAgICdhdHRlbmRpbmcnXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIFZBTElEQVRJT05fRVJST1Igd2hlbiB0b28gbWFueSByc3ZwSWRzICg+MTAwKScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRvb01hbnlJZHMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMDEgfSwgKF8sIGkpID0+IGByc3ZwLSR7aX1gKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcnN2cE1hbmFnZW1lbnRTZXJ2aWNlLmJ1bGtVcGRhdGVSU1ZQcyhcbiAgICAgICAgdG9vTWFueUlkcyxcbiAgICAgICAgJ2F0dGVuZGluZydcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIGludmFsaWQgc3RhdHVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcnN2cE1hbmFnZW1lbnRTZXJ2aWNlLmJ1bGtVcGRhdGVSU1ZQcyhcbiAgICAgICAgWydyc3ZwLTEnXSxcbiAgICAgICAgJ2ludmFsaWQtc3RhdHVzJyBhcyBhbnlcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gREFUQUJBU0VfRVJST1Igd2hlbiBkYXRhYmFzZSB1cGRhdGUgZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrU3VwYWJhc2UuZnJvbS5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS51cGRhdGUubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICBtb2NrU3VwYWJhc2UuaW4ubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICBtb2NrU3VwYWJhc2Uuc2VsZWN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJyB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJzdnBNYW5hZ2VtZW50U2VydmljZS5idWxrVXBkYXRlUlNWUHMoXG4gICAgICAgIFsncnN2cC0xJ10sXG4gICAgICAgICdhdHRlbmRpbmcnXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ0RBVEFCQVNFX0VSUk9SJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IubWVzc2FnZSkudG9CZSgnRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IHNldCByZXNwb25kZWRfYXQgd2hlbiBzdGF0dXMgaXMgcGVuZGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZShtb2NrU3VwYWJhc2UpO1xuICAgICAgbW9ja1N1cGFiYXNlLnVwZGF0ZS5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5pbi5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgIG1vY2tTdXBhYmFzZS5zZWxlY3QubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBbeyBpZDogJ3JzdnAtMScgfV0sXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHJzdnBNYW5hZ2VtZW50U2VydmljZS5idWxrVXBkYXRlUlNWUHMoWydyc3ZwLTEnXSwgJ3BlbmRpbmcnKTtcblxuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZS51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgcmVzcG9uZGVkX2F0IGlzIE5PVCBpbiB0aGUgdXBkYXRlIGRhdGFcbiAgICAgIGNvbnN0IHVwZGF0ZUNhbGwgPSBtb2NrU3VwYWJhc2UudXBkYXRlLm1vY2suY2FsbHNbMF1bMF07XG4gICAgICBleHBlY3QodXBkYXRlQ2FsbC5yZXNwb25kZWRfYXQpLnRvQmVVbmRlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGFsbCB2YWxpZCBzdGF0dXMgdmFsdWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhdHVzZXM6IEFycmF5PCdwZW5kaW5nJyB8ICdhdHRlbmRpbmcnIHwgJ2RlY2xpbmVkJyB8ICdtYXliZSc+ID0gW1xuICAgICAgICAncGVuZGluZycsXG4gICAgICAgICdhdHRlbmRpbmcnLFxuICAgICAgICAnZGVjbGluZWQnLFxuICAgICAgICAnbWF5YmUnLFxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCBzdGF0dXMgb2Ygc3RhdHVzZXMpIHtcbiAgICAgICAgLy8gUmVzZXQgbW9ja3MgZm9yIGVhY2ggaXRlcmF0aW9uXG4gICAgICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgICAgICByZXNldE1vY2tTdXBhYmFzZUNsaWVudChtb2NrU3VwYWJhc2UpO1xuICAgICAgICBcbiAgICAgICAgbW9ja1N1cGFiYXNlLmZyb20ubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICAgIG1vY2tTdXBhYmFzZS51cGRhdGUubW9ja1JldHVyblZhbHVlKG1vY2tTdXBhYmFzZSk7XG4gICAgICAgIG1vY2tTdXBhYmFzZS5pbi5tb2NrUmV0dXJuVmFsdWUobW9ja1N1cGFiYXNlKTtcbiAgICAgICAgbW9ja1N1cGFiYXNlLnNlbGVjdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgZGF0YTogW3sgaWQ6ICdyc3ZwLTEnIH1dLFxuICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByc3ZwTWFuYWdlbWVudFNlcnZpY2UuYnVsa1VwZGF0ZVJTVlBzKFsncnN2cC0xJ10sIHN0YXR1cyk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEudXBkYXRlZENvdW50KS50b0JlKDEpO1xuICAgICAgICB9XG4gICAgICAgIGV4cGVjdChtb2NrU3VwYWJhc2UudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2V4cG9ydFJTVlBzVG9DU1YnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc3VjY2VzcyB3aXRoIENTViBzdHJpbmcgd2hlbiB2YWxpZCBmaWx0ZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1JTVlBzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdyc3ZwLTEnLFxuICAgICAgICAgIGd1ZXN0Rmlyc3ROYW1lOiAnSm9obicsXG4gICAgICAgICAgZ3Vlc3RMYXN0TmFtZTogJ0RvZScsXG4gICAgICAgICAgZ3Vlc3RFbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nLFxuICAgICAgICAgIGV2ZW50TmFtZTogJ1dlZGRpbmcgQ2VyZW1vbnknLFxuICAgICAgICAgIGFjdGl2aXR5TmFtZTogbnVsbCxcbiAgICAgICAgICBzdGF0dXM6ICdhdHRlbmRpbmcnIGFzIGNvbnN0LFxuICAgICAgICAgIGd1ZXN0Q291bnQ6IDIsXG4gICAgICAgICAgZGlldGFyeU5vdGVzOiAnVmVnZXRhcmlhbicsXG4gICAgICAgICAgc3BlY2lhbFJlcXVpcmVtZW50czogbnVsbCxcbiAgICAgICAgICBub3RlczogbnVsbCxcbiAgICAgICAgICByZXNwb25kZWRBdDogJzIwMjQtMDEtMTVUMTA6MDA6MDBaJyxcbiAgICAgICAgICBjcmVhdGVkQXQ6ICcyMDI0LTAxLTEwVDEwOjAwOjAwWicsXG4gICAgICAgICAgdXBkYXRlZEF0OiAnMjAyNC0wMS0xNVQxMDowMDowMFonLFxuICAgICAgICAgIGd1ZXN0SWQ6ICdndWVzdC0xJyxcbiAgICAgICAgICBldmVudElkOiAnZXZlbnQtMScsXG4gICAgICAgICAgYWN0aXZpdHlJZDogbnVsbCxcbiAgICAgICAgfSxcbiAgICAgIF07XG5cbiAgICAgIC8vIE1vY2sgbGlzdFJTVlBzIHRvIHJldHVybiB0ZXN0IGRhdGFcbiAgICAgIGplc3Quc3B5T24ocnN2cE1hbmFnZW1lbnRTZXJ2aWNlLCAnbGlzdFJTVlBzJykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgZGF0YTogbW9ja1JTVlBzLFxuICAgICAgICAgIHBhZ2luYXRpb246IHsgcGFnZTogMSwgbGltaXQ6IDEwMDAwLCB0b3RhbDogMSwgdG90YWxQYWdlczogMSB9LFxuICAgICAgICAgIHN0YXRpc3RpY3M6IHtcbiAgICAgICAgICAgIHRvdGFsUlNWUHM6IDEsXG4gICAgICAgICAgICBieVN0YXR1czogeyBhdHRlbmRpbmc6IDEsIGRlY2xpbmVkOiAwLCBtYXliZTogMCwgcGVuZGluZzogMCB9LFxuICAgICAgICAgICAgdG90YWxHdWVzdENvdW50OiAyLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcnN2cE1hbmFnZW1lbnRTZXJ2aWNlLmV4cG9ydFJTVlBzVG9DU1Yoe30pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0NvbnRhaW4oJ1JTVlAgSUQsR3Vlc3QgRmlyc3QgTmFtZSxHdWVzdCBMYXN0IE5hbWUnKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0NvbnRhaW4oJ3JzdnAtMSxKb2huLERvZScpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvQ29udGFpbignV2VkZGluZyBDZXJlbW9ueScpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvQ29udGFpbignYXR0ZW5kaW5nJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9Db250YWluKCdWZWdldGFyaWFuJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBsaXN0UlNWUHMgd2FzIGNhbGxlZCB3aXRoIGNvcnJlY3QgcGFyYW1ldGVyc1xuICAgICAgZXhwZWN0KHJzdnBNYW5hZ2VtZW50U2VydmljZS5saXN0UlNWUHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHt9LCB7IHBhZ2U6IDEsIGxpbWl0OiAxMDAwMCB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZXNjYXBlIENTViB2YWx1ZXMgd2l0aCBjb21tYXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUlNWUHMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3JzdnAtMScsXG4gICAgICAgICAgZ3Vlc3RGaXJzdE5hbWU6ICdKb2huJyxcbiAgICAgICAgICBndWVzdExhc3ROYW1lOiAnRG9lLCBKci4nLFxuICAgICAgICAgIGd1ZXN0RW1haWw6ICdqb2huQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBldmVudE5hbWU6ICdXZWRkaW5nIENlcmVtb255JyxcbiAgICAgICAgICBhY3Rpdml0eU5hbWU6IG51bGwsXG4gICAgICAgICAgc3RhdHVzOiAnYXR0ZW5kaW5nJyBhcyBjb25zdCxcbiAgICAgICAgICBndWVzdENvdW50OiAxLFxuICAgICAgICAgIGRpZXRhcnlOb3RlczogJ05vIG51dHMsIG5vIGRhaXJ5JyxcbiAgICAgICAgICBzcGVjaWFsUmVxdWlyZW1lbnRzOiBudWxsLFxuICAgICAgICAgIG5vdGVzOiBudWxsLFxuICAgICAgICAgIHJlc3BvbmRlZEF0OiAnMjAyNC0wMS0xNVQxMDowMDowMFonLFxuICAgICAgICAgIGNyZWF0ZWRBdDogJzIwMjQtMDEtMTBUMTA6MDA6MDBaJyxcbiAgICAgICAgICB1cGRhdGVkQXQ6ICcyMDI0LTAxLTE1VDEwOjAwOjAwWicsXG4gICAgICAgICAgZ3Vlc3RJZDogJ2d1ZXN0LTEnLFxuICAgICAgICAgIGV2ZW50SWQ6ICdldmVudC0xJyxcbiAgICAgICAgICBhY3Rpdml0eUlkOiBudWxsLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgamVzdC5zcHlPbihyc3ZwTWFuYWdlbWVudFNlcnZpY2UsICdsaXN0UlNWUHMnKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBkYXRhOiBtb2NrUlNWUHMsXG4gICAgICAgICAgcGFnaW5hdGlvbjogeyBwYWdlOiAxLCBsaW1pdDogMTAwMDAsIHRvdGFsOiAxLCB0b3RhbFBhZ2VzOiAxIH0sXG4gICAgICAgICAgc3RhdGlzdGljczoge1xuICAgICAgICAgICAgdG90YWxSU1ZQczogMSxcbiAgICAgICAgICAgIGJ5U3RhdHVzOiB7IGF0dGVuZGluZzogMSwgZGVjbGluZWQ6IDAsIG1heWJlOiAwLCBwZW5kaW5nOiAwIH0sXG4gICAgICAgICAgICB0b3RhbEd1ZXN0Q291bnQ6IDEsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByc3ZwTWFuYWdlbWVudFNlcnZpY2UuZXhwb3J0UlNWUHNUb0NTVih7fSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvQ29udGFpbignXCJEb2UsIEpyLlwiJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9Db250YWluKCdcIk5vIG51dHMsIG5vIGRhaXJ5XCInKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZXNjYXBlIENTViB2YWx1ZXMgd2l0aCBxdW90ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUlNWUHMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3JzdnAtMScsXG4gICAgICAgICAgZ3Vlc3RGaXJzdE5hbWU6ICdKb2huJyxcbiAgICAgICAgICBndWVzdExhc3ROYW1lOiAnRG9lJyxcbiAgICAgICAgICBndWVzdEVtYWlsOiAnam9obkBleGFtcGxlLmNvbScsXG4gICAgICAgICAgZXZlbnROYW1lOiAnV2VkZGluZyBDZXJlbW9ueScsXG4gICAgICAgICAgYWN0aXZpdHlOYW1lOiBudWxsLFxuICAgICAgICAgIHN0YXR1czogJ2F0dGVuZGluZycgYXMgY29uc3QsXG4gICAgICAgICAgZ3Vlc3RDb3VudDogMSxcbiAgICAgICAgICBkaWV0YXJ5Tm90ZXM6IG51bGwsXG4gICAgICAgICAgc3BlY2lhbFJlcXVpcmVtZW50czogbnVsbCxcbiAgICAgICAgICBub3RlczogJ0d1ZXN0IHNhaWQgXCJleGNpdGVkIHRvIGF0dGVuZFwiJyxcbiAgICAgICAgICByZXNwb25kZWRBdDogJzIwMjQtMDEtMTVUMTA6MDA6MDBaJyxcbiAgICAgICAgICBjcmVhdGVkQXQ6ICcyMDI0LTAxLTEwVDEwOjAwOjAwWicsXG4gICAgICAgICAgdXBkYXRlZEF0OiAnMjAyNC0wMS0xNVQxMDowMDowMFonLFxuICAgICAgICAgIGd1ZXN0SWQ6ICdndWVzdC0xJyxcbiAgICAgICAgICBldmVudElkOiAnZXZlbnQtMScsXG4gICAgICAgICAgYWN0aXZpdHlJZDogbnVsbCxcbiAgICAgICAgfSxcbiAgICAgIF07XG5cbiAgICAgIGplc3Quc3B5T24ocnN2cE1hbmFnZW1lbnRTZXJ2aWNlLCAnbGlzdFJTVlBzJykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgZGF0YTogbW9ja1JTVlBzLFxuICAgICAgICAgIHBhZ2luYXRpb246IHsgcGFnZTogMSwgbGltaXQ6IDEwMDAwLCB0b3RhbDogMSwgdG90YWxQYWdlczogMSB9LFxuICAgICAgICAgIHN0YXRpc3RpY3M6IHtcbiAgICAgICAgICAgIHRvdGFsUlNWUHM6IDEsXG4gICAgICAgICAgICBieVN0YXR1czogeyBhdHRlbmRpbmc6IDEsIGRlY2xpbmVkOiAwLCBtYXliZTogMCwgcGVuZGluZzogMCB9LFxuICAgICAgICAgICAgdG90YWxHdWVzdENvdW50OiAxLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcnN2cE1hbmFnZW1lbnRTZXJ2aWNlLmV4cG9ydFJTVlBzVG9DU1Yoe30pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0NvbnRhaW4oJ1wiXCJleGNpdGVkIHRvIGF0dGVuZFwiXCInKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHJlc3VsdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBqZXN0LnNweU9uKHJzdnBNYW5hZ2VtZW50U2VydmljZSwgJ2xpc3RSU1ZQcycpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGRhdGE6IFtdLFxuICAgICAgICAgIHBhZ2luYXRpb246IHsgcGFnZTogMSwgbGltaXQ6IDEwMDAwLCB0b3RhbDogMCwgdG90YWxQYWdlczogMCB9LFxuICAgICAgICAgIHN0YXRpc3RpY3M6IHtcbiAgICAgICAgICAgIHRvdGFsUlNWUHM6IDAsXG4gICAgICAgICAgICBieVN0YXR1czogeyBhdHRlbmRpbmc6IDAsIGRlY2xpbmVkOiAwLCBtYXliZTogMCwgcGVuZGluZzogMCB9LFxuICAgICAgICAgICAgdG90YWxHdWVzdENvdW50OiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcnN2cE1hbmFnZW1lbnRTZXJ2aWNlLmV4cG9ydFJTVlBzVG9DU1Yoe30pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgLy8gU2hvdWxkIG9ubHkgaGF2ZSBoZWFkZXIgcm93XG4gICAgICAgIGNvbnN0IGxpbmVzID0gcmVzdWx0LmRhdGEuc3BsaXQoJ1xcbicpO1xuICAgICAgICBleHBlY3QobGluZXMubGVuZ3RoKS50b0JlKDEpO1xuICAgICAgICBleHBlY3QobGluZXNbMF0pLnRvQ29udGFpbignUlNWUCBJRCxHdWVzdCBGaXJzdCBOYW1lJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBWQUxJREFUSU9OX0VSUk9SIHdoZW4gaW52YWxpZCBmaWx0ZXIgcGFyYW1ldGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJzdnBNYW5hZ2VtZW50U2VydmljZS5leHBvcnRSU1ZQc1RvQ1NWKHtcbiAgICAgICAgZXZlbnRJZDogJ2ludmFsaWQtdXVpZCcsXG4gICAgICB9IGFzIGFueSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwcm9wYWdhdGUgZXJyb3JzIGZyb20gbGlzdFJTVlBzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgamVzdC5zcHlPbihyc3ZwTWFuYWdlbWVudFNlcnZpY2UsICdsaXN0UlNWUHMnKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdEQVRBQkFTRV9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByc3ZwTWFuYWdlbWVudFNlcnZpY2UuZXhwb3J0UlNWUHNUb0NTVih7fSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnREFUQUJBU0VfRVJST1InKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5tZXNzYWdlKS50b0JlKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhcHBseSBmaWx0ZXJzIHdoZW4gZXhwb3J0aW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgamVzdC5zcHlPbihyc3ZwTWFuYWdlbWVudFNlcnZpY2UsICdsaXN0UlNWUHMnKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgICBwYWdpbmF0aW9uOiB7IHBhZ2U6IDEsIGxpbWl0OiAxMDAwMCwgdG90YWw6IDAsIHRvdGFsUGFnZXM6IDAgfSxcbiAgICAgICAgICBzdGF0aXN0aWNzOiB7XG4gICAgICAgICAgICB0b3RhbFJTVlBzOiAwLFxuICAgICAgICAgICAgYnlTdGF0dXM6IHsgYXR0ZW5kaW5nOiAwLCBkZWNsaW5lZDogMCwgbWF5YmU6IDAsIHBlbmRpbmc6IDAgfSxcbiAgICAgICAgICAgIHRvdGFsR3Vlc3RDb3VudDogMCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGZpbHRlcnM6IFJTVlBGaWx0ZXJzID0geyBldmVudElkOiAnZXZlbnQtMScsIHN0YXR1czogJ2F0dGVuZGluZycgfTtcbiAgICAgIGF3YWl0IHJzdnBNYW5hZ2VtZW50U2VydmljZS5leHBvcnRSU1ZQc1RvQ1NWKGZpbHRlcnMpO1xuXG4gICAgICAvLyBWZXJpZnkgbGlzdFJTVlBzIHdhcyBjYWxsZWQgd2l0aCB0aGUgZmlsdGVyc1xuICAgICAgZXhwZWN0KHJzdnBNYW5hZ2VtZW50U2VydmljZS5saXN0UlNWUHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGZpbHRlcnMsIHsgcGFnZTogMSwgbGltaXQ6IDEwMDAwIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbmV3bGluZXMgaW4gQ1NWIHZhbHVlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tSU1ZQcyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAncnN2cC0xJyxcbiAgICAgICAgICBndWVzdEZpcnN0TmFtZTogJ0pvaG4nLFxuICAgICAgICAgIGd1ZXN0TGFzdE5hbWU6ICdEb2UnLFxuICAgICAgICAgIGd1ZXN0RW1haWw6ICdqb2huQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBldmVudE5hbWU6ICdXZWRkaW5nIENlcmVtb255JyxcbiAgICAgICAgICBhY3Rpdml0eU5hbWU6IG51bGwsXG4gICAgICAgICAgc3RhdHVzOiAnYXR0ZW5kaW5nJyBhcyBjb25zdCxcbiAgICAgICAgICBndWVzdENvdW50OiAxLFxuICAgICAgICAgIGRpZXRhcnlOb3RlczogbnVsbCxcbiAgICAgICAgICBzcGVjaWFsUmVxdWlyZW1lbnRzOiBudWxsLFxuICAgICAgICAgIG5vdGVzOiAnTGluZSAxXFxuTGluZSAyJyxcbiAgICAgICAgICByZXNwb25kZWRBdDogJzIwMjQtMDEtMTVUMTA6MDA6MDBaJyxcbiAgICAgICAgICBjcmVhdGVkQXQ6ICcyMDI0LTAxLTEwVDEwOjAwOjAwWicsXG4gICAgICAgICAgdXBkYXRlZEF0OiAnMjAyNC0wMS0xNVQxMDowMDowMFonLFxuICAgICAgICAgIGd1ZXN0SWQ6ICdndWVzdC0xJyxcbiAgICAgICAgICBldmVudElkOiAnZXZlbnQtMScsXG4gICAgICAgICAgYWN0aXZpdHlJZDogbnVsbCxcbiAgICAgICAgfSxcbiAgICAgIF07XG5cbiAgICAgIGplc3Quc3B5T24ocnN2cE1hbmFnZW1lbnRTZXJ2aWNlLCAnbGlzdFJTVlBzJykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgZGF0YTogbW9ja1JTVlBzLFxuICAgICAgICAgIHBhZ2luYXRpb246IHsgcGFnZTogMSwgbGltaXQ6IDEwMDAwLCB0b3RhbDogMSwgdG90YWxQYWdlczogMSB9LFxuICAgICAgICAgIHN0YXRpc3RpY3M6IHtcbiAgICAgICAgICAgIHRvdGFsUlNWUHM6IDEsXG4gICAgICAgICAgICBieVN0YXR1czogeyBhdHRlbmRpbmc6IDEsIGRlY2xpbmVkOiAwLCBtYXliZTogMCwgcGVuZGluZzogMCB9LFxuICAgICAgICAgICAgdG90YWxHdWVzdENvdW50OiAxLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcnN2cE1hbmFnZW1lbnRTZXJ2aWNlLmV4cG9ydFJTVlBzVG9DU1Yoe30pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgLy8gTmV3bGluZXMgc2hvdWxkIGJlIHdyYXBwZWQgaW4gcXVvdGVzXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9Db250YWluKCdcIkxpbmUgMVxcbkxpbmUgMlwiJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBudWxsIHZhbHVlcyBpbiBDU1YnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUlNWUHMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3JzdnAtMScsXG4gICAgICAgICAgZ3Vlc3RGaXJzdE5hbWU6ICdKb2huJyxcbiAgICAgICAgICBndWVzdExhc3ROYW1lOiAnRG9lJyxcbiAgICAgICAgICBndWVzdEVtYWlsOiBudWxsLFxuICAgICAgICAgIGV2ZW50TmFtZTogbnVsbCxcbiAgICAgICAgICBhY3Rpdml0eU5hbWU6IG51bGwsXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycgYXMgY29uc3QsXG4gICAgICAgICAgZ3Vlc3RDb3VudDogbnVsbCxcbiAgICAgICAgICBkaWV0YXJ5Tm90ZXM6IG51bGwsXG4gICAgICAgICAgc3BlY2lhbFJlcXVpcmVtZW50czogbnVsbCxcbiAgICAgICAgICBub3RlczogbnVsbCxcbiAgICAgICAgICByZXNwb25kZWRBdDogbnVsbCxcbiAgICAgICAgICBjcmVhdGVkQXQ6ICcyMDI0LTAxLTEwVDEwOjAwOjAwWicsXG4gICAgICAgICAgdXBkYXRlZEF0OiAnMjAyNC0wMS0xMFQxMDowMDowMFonLFxuICAgICAgICAgIGd1ZXN0SWQ6ICdndWVzdC0xJyxcbiAgICAgICAgICBldmVudElkOiBudWxsLFxuICAgICAgICAgIGFjdGl2aXR5SWQ6IG51bGwsXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICBqZXN0LnNweU9uKHJzdnBNYW5hZ2VtZW50U2VydmljZSwgJ2xpc3RSU1ZQcycpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGRhdGE6IG1vY2tSU1ZQcyxcbiAgICAgICAgICBwYWdpbmF0aW9uOiB7IHBhZ2U6IDEsIGxpbWl0OiAxMDAwMCwgdG90YWw6IDEsIHRvdGFsUGFnZXM6IDEgfSxcbiAgICAgICAgICBzdGF0aXN0aWNzOiB7XG4gICAgICAgICAgICB0b3RhbFJTVlBzOiAxLFxuICAgICAgICAgICAgYnlTdGF0dXM6IHsgYXR0ZW5kaW5nOiAwLCBkZWNsaW5lZDogMCwgbWF5YmU6IDAsIHBlbmRpbmc6IDEgfSxcbiAgICAgICAgICAgIHRvdGFsR3Vlc3RDb3VudDogMCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJzdnBNYW5hZ2VtZW50U2VydmljZS5leHBvcnRSU1ZQc1RvQ1NWKHt9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIC8vIE51bGwgdmFsdWVzIHNob3VsZCBiZSBlbXB0eSBzdHJpbmdzXG4gICAgICAgIGNvbnN0IGxpbmVzID0gcmVzdWx0LmRhdGEuc3BsaXQoJ1xcbicpO1xuICAgICAgICBleHBlY3QobGluZXNbMV0pLnRvQ29udGFpbigncnN2cC0xLEpvaG4sRG9lLCwsJyk7XG4gICAgICAgIC8vIEd1ZXN0IGNvdW50IHNob3VsZCBkZWZhdWx0IHRvIDFcbiAgICAgICAgZXhwZWN0KGxpbmVzWzFdKS50b0NvbnRhaW4oJywxLCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwiY3JlYXRlQ2xpZW50IiwiZm4iLCJkZXNjcmliZSIsIm1vY2tTdXBhYmFzZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwicmVzdG9yZUFsbE1vY2tzIiwiY3JlYXRlTW9ja1N1cGFiYXNlQ2xpZW50IiwicmVzZXRNb2NrU3VwYWJhc2VDbGllbnQiLCJyZXF1aXJlIiwibW9ja1JldHVyblZhbHVlIiwiYWZ0ZXJFYWNoIiwibW9ja1JTVlBEYXRhIiwiaWQiLCJndWVzdF9pZCIsImV2ZW50X2lkIiwiYWN0aXZpdHlfaWQiLCJzdGF0dXMiLCJndWVzdF9jb3VudCIsImRpZXRhcnlfbm90ZXMiLCJzcGVjaWFsX3JlcXVpcmVtZW50cyIsIm5vdGVzIiwicmVzcG9uZGVkX2F0IiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRfYXQiLCJndWVzdHMiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiZW1haWwiLCJldmVudHMiLCJuYW1lIiwiYWN0aXZpdGllcyIsIml0IiwiZnJvbSIsInNlbGVjdCIsImVxIiwicmFuZ2UiLCJvcmRlciIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiZGF0YSIsImVycm9yIiwiY291bnQiLCJmaWx0ZXJzIiwiZXZlbnRJZCIsInBhZ2luYXRpb24iLCJwYWdlIiwibGltaXQiLCJyZXN1bHQiLCJyc3ZwTWFuYWdlbWVudFNlcnZpY2UiLCJsaXN0UlNWUHMiLCJleHBlY3QiLCJzdWNjZXNzIiwidG9CZSIsInRvSGF2ZUxlbmd0aCIsImd1ZXN0Rmlyc3ROYW1lIiwiZXZlbnROYW1lIiwidG90YWwiLCJ0b3RhbFBhZ2VzIiwic3RhdGlzdGljcyIsInRvdGFsUlNWUHMiLCJ0b0JlR3JlYXRlclRoYW5PckVxdWFsIiwiYnlTdGF0dXMiLCJ0b0JlRGVmaW5lZCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwiYWN0aXZpdHlJZCIsInNweU9uIiwiYXR0ZW5kaW5nIiwiZGVjbGluZWQiLCJtYXliZSIsInBlbmRpbmciLCJ0b3RhbEd1ZXN0Q291bnQiLCJndWVzdElkIiwiY29kZSIsIm1lc3NhZ2UiLCJvciIsInNlYXJjaFF1ZXJ5IiwidG9IYXZlQmVlbkNhbGxlZCIsIm1vY2tTdGF0aXN0aWNzRGF0YSIsImdldFJTVlBTdGF0aXN0aWNzIiwicnN2cElkcyIsInVwZGF0ZSIsImluIiwiYnVsa1VwZGF0ZVJTVlBzIiwidXBkYXRlZENvdW50Iiwib2JqZWN0Q29udGFpbmluZyIsImFueSIsIlN0cmluZyIsInRvb01hbnlJZHMiLCJBcnJheSIsImxlbmd0aCIsIl8iLCJpIiwidXBkYXRlQ2FsbCIsImNhbGxzIiwidG9CZVVuZGVmaW5lZCIsInN0YXR1c2VzIiwibW9ja1JTVlBzIiwiZ3Vlc3RMYXN0TmFtZSIsImd1ZXN0RW1haWwiLCJhY3Rpdml0eU5hbWUiLCJndWVzdENvdW50IiwiZGlldGFyeU5vdGVzIiwic3BlY2lhbFJlcXVpcmVtZW50cyIsInJlc3BvbmRlZEF0IiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwiZXhwb3J0UlNWUHNUb0NT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