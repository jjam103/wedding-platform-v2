{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/AdminUserManager.test.tsx"],"sourcesContent":["/**\n * Unit Tests: AdminUserManager Component\n * \n * Tests user list display, forms, actions, and last owner protection UI\n */\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor, within } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { AdminUserManager } from './AdminUserManager';\nimport * as adminUserService from '@/services/adminUserService';\n\n// Mock the service\njest.mock('@/services/adminUserService');\n\ndescribe('AdminUserManager', () => {\n  const mockAdminUsers = [\n    {\n      id: '1',\n      email: 'owner@example.com',\n      role: 'owner' as const,\n      status: 'active' as const,\n      invited_by: null,\n      invited_at: '2024-01-01T00:00:00Z',\n      last_login_at: '2024-01-15T10:00:00Z',\n      created_at: '2024-01-01T00:00:00Z',\n      updated_at: '2024-01-01T00:00:00Z',\n    },\n    {\n      id: '2',\n      email: 'admin@example.com',\n      role: 'admin' as const,\n      status: 'active' as const,\n      invited_by: '1',\n      invited_at: '2024-01-05T00:00:00Z',\n      last_login_at: '2024-01-14T15:30:00Z',\n      created_at: '2024-01-05T00:00:00Z',\n      updated_at: '2024-01-05T00:00:00Z',\n    },\n    {\n      id: '3',\n      email: 'inactive@example.com',\n      role: 'admin' as const,\n      status: 'inactive' as const,\n      invited_by: '1',\n      invited_at: '2024-01-10T00:00:00Z',\n      last_login_at: null,\n      created_at: '2024-01-10T00:00:00Z',\n      updated_at: '2024-01-12T00:00:00Z',\n    },\n  ];\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    (adminUserService.list as jest.Mock).mockResolvedValue({\n      success: true,\n      data: mockAdminUsers,\n    });\n  });\n\n  describe('User List Display', () => {\n    it('should display list of admin users', async () => {\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        expect(screen.getByText('owner@example.com')).toBeInTheDocument();\n        expect(screen.getByText('admin@example.com')).toBeInTheDocument();\n        expect(screen.getByText('inactive@example.com')).toBeInTheDocument();\n      });\n    });\n\n    it('should display user roles', async () => {\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        const ownerBadge = screen.getByText('Owner');\n        const adminBadges = screen.getAllByText('Admin');\n        \n        expect(ownerBadge).toBeInTheDocument();\n        expect(adminBadges).toHaveLength(2);\n      });\n    });\n\n    it('should display user status', async () => {\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        const activeBadges = screen.getAllByText('Active');\n        const inactiveBadge = screen.getByText('Inactive');\n        \n        expect(activeBadges).toHaveLength(2);\n        expect(inactiveBadge).toBeInTheDocument();\n      });\n    });\n\n    it('should display last login timestamp', async () => {\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        expect(screen.getByText(/Jan 15, 2024/)).toBeInTheDocument();\n        expect(screen.getByText(/Jan 14, 2024/)).toBeInTheDocument();\n        expect(screen.getByText('Never')).toBeInTheDocument();\n      });\n    });\n\n    it('should display loading state while fetching users', () => {\n      (adminUserService.list as jest.Mock).mockImplementation(\n        () => new Promise(() => {}) // Never resolves\n      );\n\n      render(<AdminUserManager />);\n\n      expect(screen.getByText(/loading/i)).toBeInTheDocument();\n    });\n\n    it('should display error message on fetch failure', async () => {\n      (adminUserService.list as jest.Mock).mockResolvedValue({\n        success: false,\n        error: {\n          code: 'DATABASE_ERROR',\n          message: 'Failed to fetch admin users',\n        },\n      });\n\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        expect(screen.getByText(/failed to fetch admin users/i)).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Add User Form', () => {\n    it('should open add user form when \"Add Admin User\" button clicked', async () => {\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        expect(screen.getByText('owner@example.com')).toBeInTheDocument();\n      });\n\n      const addButton = screen.getByRole('button', { name: /add admin user/i });\n      fireEvent.click(addButton);\n\n      expect(screen.getByLabelText(/email/i)).toBeInTheDocument();\n      expect(screen.getByLabelText(/role/i)).toBeInTheDocument();\n    });\n\n    it('should validate email format', async () => {\n      const user = userEvent.setup();\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        expect(screen.getByText('owner@example.com')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByRole('button', { name: /add admin user/i }));\n\n      const emailInput = screen.getByLabelText(/email/i);\n      await user.type(emailInput, 'invalid-email');\n\n      const submitButton = screen.getByRole('button', { name: /create/i });\n      fireEvent.click(submitButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/invalid email/i)).toBeInTheDocument();\n      });\n    });\n\n    it('should create admin user with valid data', async () => {\n      const user = userEvent.setup();\n      (adminUserService.create as jest.Mock).mockResolvedValue({\n        success: true,\n        data: {\n          id: '4',\n          email: 'newadmin@example.com',\n          role: 'admin',\n          status: 'active',\n          invited_by: '1',\n          invited_at: new Date().toISOString(),\n          last_login_at: null,\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString(),\n        },\n      });\n\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        expect(screen.getByText('owner@example.com')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByRole('button', { name: /add admin user/i }));\n\n      const emailInput = screen.getByLabelText(/email/i);\n      await user.type(emailInput, 'newadmin@example.com');\n\n      const roleSelect = screen.getByLabelText(/role/i);\n      await user.selectOptions(roleSelect, 'admin');\n\n      const submitButton = screen.getByRole('button', { name: /create/i });\n      fireEvent.click(submitButton);\n\n      await waitFor(() => {\n        expect(adminUserService.create).toHaveBeenCalledWith({\n          email: 'newadmin@example.com',\n          role: 'admin',\n          invitedBy: expect.any(String),\n        });\n      });\n\n      await waitFor(() => {\n        expect(screen.getByText(/admin user created successfully/i)).toBeInTheDocument();\n      });\n    });\n\n    it('should display error message on creation failure', async () => {\n      const user = userEvent.setup();\n      (adminUserService.create as jest.Mock).mockResolvedValue({\n        success: false,\n        error: {\n          code: 'VALIDATION_ERROR',\n          message: 'Email already exists',\n        },\n      });\n\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        expect(screen.getByText('owner@example.com')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByRole('button', { name: /add admin user/i }));\n\n      const emailInput = screen.getByLabelText(/email/i);\n      await user.type(emailInput, 'existing@example.com');\n\n      const submitButton = screen.getByRole('button', { name: /create/i });\n      fireEvent.click(submitButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/email already exists/i)).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Edit User', () => {\n    it('should open edit form when edit button clicked', async () => {\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        expect(screen.getByText('admin@example.com')).toBeInTheDocument();\n      });\n\n      const adminRow = screen.getByText('admin@example.com').closest('tr');\n      const editButton = within(adminRow!).getByRole('button', { name: /edit/i });\n      fireEvent.click(editButton);\n\n      expect(screen.getByDisplayValue('admin@example.com')).toBeInTheDocument();\n    });\n\n    it('should update admin user role', async () => {\n      const user = userEvent.setup();\n      (adminUserService.update as jest.Mock).mockResolvedValue({\n        success: true,\n        data: { ...mockAdminUsers[1], role: 'owner' },\n      });\n\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        expect(screen.getByText('admin@example.com')).toBeInTheDocument();\n      });\n\n      const adminRow = screen.getByText('admin@example.com').closest('tr');\n      const editButton = within(adminRow!).getByRole('button', { name: /edit/i });\n      fireEvent.click(editButton);\n\n      const roleSelect = screen.getByLabelText(/role/i);\n      await user.selectOptions(roleSelect, 'owner');\n\n      const saveButton = screen.getByRole('button', { name: /save/i });\n      fireEvent.click(saveButton);\n\n      await waitFor(() => {\n        expect(adminUserService.update).toHaveBeenCalledWith('2', {\n          role: 'owner',\n        });\n      });\n    });\n  });\n\n  describe('Deactivate User', () => {\n    it('should deactivate admin user when deactivate button clicked', async () => {\n      (adminUserService.deactivate as jest.Mock).mockResolvedValue({\n        success: true,\n        data: { ...mockAdminUsers[1], status: 'inactive' },\n      });\n\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        expect(screen.getByText('admin@example.com')).toBeInTheDocument();\n      });\n\n      const adminRow = screen.getByText('admin@example.com').closest('tr');\n      const deactivateButton = within(adminRow!).getByRole('button', { name: /deactivate/i });\n      fireEvent.click(deactivateButton);\n\n      // Confirm deactivation\n      const confirmButton = screen.getByRole('button', { name: /confirm/i });\n      fireEvent.click(confirmButton);\n\n      await waitFor(() => {\n        expect(adminUserService.deactivate).toHaveBeenCalledWith('2');\n      });\n    });\n\n    it('should display confirmation dialog before deactivating', async () => {\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        expect(screen.getByText('admin@example.com')).toBeInTheDocument();\n      });\n\n      const adminRow = screen.getByText('admin@example.com').closest('tr');\n      const deactivateButton = within(adminRow!).getByRole('button', { name: /deactivate/i });\n      fireEvent.click(deactivateButton);\n\n      expect(screen.getByText(/are you sure/i)).toBeInTheDocument();\n      expect(screen.getByRole('button', { name: /confirm/i })).toBeInTheDocument();\n      expect(screen.getByRole('button', { name: /cancel/i })).toBeInTheDocument();\n    });\n  });\n\n  describe('Delete User', () => {\n    it('should delete admin user when delete button clicked', async () => {\n      (adminUserService.delete as jest.Mock).mockResolvedValue({\n        success: true,\n        data: null,\n      });\n\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        expect(screen.getByText('admin@example.com')).toBeInTheDocument();\n      });\n\n      const adminRow = screen.getByText('admin@example.com').closest('tr');\n      const deleteButton = within(adminRow!).getByRole('button', { name: /delete/i });\n      fireEvent.click(deleteButton);\n\n      // Confirm deletion\n      const confirmButton = screen.getByRole('button', { name: /confirm/i });\n      fireEvent.click(confirmButton);\n\n      await waitFor(() => {\n        expect(adminUserService.delete).toHaveBeenCalledWith('2');\n      });\n    });\n\n    it('should display confirmation dialog before deleting', async () => {\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        expect(screen.getByText('admin@example.com')).toBeInTheDocument();\n      });\n\n      const adminRow = screen.getByText('admin@example.com').closest('tr');\n      const deleteButton = within(adminRow!).getByRole('button', { name: /delete/i });\n      fireEvent.click(deleteButton);\n\n      expect(screen.getByText(/are you sure/i)).toBeInTheDocument();\n      expect(screen.getByText(/this action cannot be undone/i)).toBeInTheDocument();\n    });\n  });\n\n  describe('Last Owner Protection', () => {\n    it('should disable deactivate button for last owner', async () => {\n      const singleOwner = [mockAdminUsers[0]]; // Only owner\n      (adminUserService.list as jest.Mock).mockResolvedValue({\n        success: true,\n        data: singleOwner,\n      });\n\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        expect(screen.getByText('owner@example.com')).toBeInTheDocument();\n      });\n\n      const ownerRow = screen.getByText('owner@example.com').closest('tr');\n      const deactivateButton = within(ownerRow!).getByRole('button', { name: /deactivate/i });\n      \n      expect(deactivateButton).toBeDisabled();\n    });\n\n    it('should disable delete button for last owner', async () => {\n      const singleOwner = [mockAdminUsers[0]]; // Only owner\n      (adminUserService.list as jest.Mock).mockResolvedValue({\n        success: true,\n        data: singleOwner,\n      });\n\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        expect(screen.getByText('owner@example.com')).toBeInTheDocument();\n      });\n\n      const ownerRow = screen.getByText('owner@example.com').closest('tr');\n      const deleteButton = within(ownerRow!).getByRole('button', { name: /delete/i });\n      \n      expect(deleteButton).toBeDisabled();\n    });\n\n    it('should display tooltip explaining last owner protection', async () => {\n      const singleOwner = [mockAdminUsers[0]]; // Only owner\n      (adminUserService.list as jest.Mock).mockResolvedValue({\n        success: true,\n        data: singleOwner,\n      });\n\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        expect(screen.getByText('owner@example.com')).toBeInTheDocument();\n      });\n\n      const ownerRow = screen.getByText('owner@example.com').closest('tr');\n      const deactivateButton = within(ownerRow!).getByRole('button', { name: /deactivate/i });\n      \n      fireEvent.mouseOver(deactivateButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/cannot deactivate the last owner/i)).toBeInTheDocument();\n      });\n    });\n\n    it('should enable deactivate button when multiple owners exist', async () => {\n      const multipleOwners = [\n        mockAdminUsers[0],\n        { ...mockAdminUsers[1], role: 'owner' as const },\n      ];\n      (adminUserService.list as jest.Mock).mockResolvedValue({\n        success: true,\n        data: multipleOwners,\n      });\n\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        expect(screen.getAllByText('Owner')).toHaveLength(2);\n      });\n\n      const firstOwnerRow = screen.getByText('owner@example.com').closest('tr');\n      const deactivateButton = within(firstOwnerRow!).getByRole('button', { name: /deactivate/i });\n      \n      expect(deactivateButton).not.toBeDisabled();\n    });\n  });\n\n  describe('Resend Invitation', () => {\n    it('should resend invitation email when button clicked', async () => {\n      (adminUserService.resendInvitation as jest.Mock).mockResolvedValue({\n        success: true,\n        data: null,\n      });\n\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        expect(screen.getByText('inactive@example.com')).toBeInTheDocument();\n      });\n\n      const inactiveRow = screen.getByText('inactive@example.com').closest('tr');\n      const resendButton = within(inactiveRow!).getByRole('button', { name: /resend invitation/i });\n      fireEvent.click(resendButton);\n\n      await waitFor(() => {\n        expect(adminUserService.resendInvitation).toHaveBeenCalledWith('3');\n      });\n\n      await waitFor(() => {\n        expect(screen.getByText(/invitation sent/i)).toBeInTheDocument();\n      });\n    });\n\n    it('should only show resend button for inactive users', async () => {\n      render(<AdminUserManager />);\n\n      await waitFor(() => {\n        expect(screen.getByText('owner@example.com')).toBeInTheDocument();\n      });\n\n      const activeRow = screen.getByText('owner@example.com').closest('tr');\n      expect(within(activeRow!).queryByRole('button', { name: /resend invitation/i })).not.toBeInTheDocument();\n\n      const inactiveRow = screen.getByText('inactive@example.com').closest('tr');\n      expect(within(inactiveRow!).getByRole('button', { name: /resend invitation/i })).toBeInTheDocument();\n    });\n  });\n});\n"],"names":["jest","mock","describe","mockAdminUsers","id","email","role","status","invited_by","invited_at","last_login_at","created_at","updated_at","beforeEach","clearAllMocks","adminUserService","list","mockResolvedValue","success","data","it","render","AdminUserManager","waitFor","expect","screen","getByText","toBeInTheDocument","ownerBadge","adminBadges","getAllByText","toHaveLength","activeBadges","inactiveBadge","mockImplementation","Promise","error","code","message","addButton","getByRole","name","fireEvent","click","getByLabelText","user","userEvent","setup","emailInput","type","submitButton","create","Date","toISOString","roleSelect","selectOptions","toHaveBeenCalledWith","invitedBy","any","String","adminRow","closest","editButton","within","getByDisplayValue","update","saveButton","deactivate","deactivateButton","confirmButton","delete","deleteButton","singleOwner","ownerRow","toBeDisabled","mouseOver","multipleOwners","firstOwnerRow","not","resendInvitation","inactiveRow","resendButton","activeRow","queryByRole"],"mappings":"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"}