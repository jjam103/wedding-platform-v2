42694ce176eb232f53ffcfa4eed9a8ef
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "RSVPManager", {
    enumerable: true,
    get: function() {
        return RSVPManager;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const _DataTableWithSuspense = require("../ui/DataTableWithSuspense");
const _Button = require("../ui/Button");
const _ToastContext = require("../ui/ToastContext");
function RSVPManager({ initialFilters = {} }) {
    const { addToast } = (0, _ToastContext.useToast)();
    // State management
    const [rsvps, setRsvps] = (0, _react.useState)([]);
    const [statistics, setStatistics] = (0, _react.useState)({
        totalRSVPs: 0,
        byStatus: {
            attending: 0,
            declined: 0,
            maybe: 0,
            pending: 0
        },
        totalGuestCount: 0
    });
    const [loading, setLoading] = (0, _react.useState)(true);
    const [currentPage, setCurrentPage] = (0, _react.useState)(1);
    const [totalCount, setTotalCount] = (0, _react.useState)(0);
    const [pageSize, setPageSize] = (0, _react.useState)(50);
    const [selectedIds, setSelectedIds] = (0, _react.useState)([]);
    const [isBulkUpdateInProgress, setIsBulkUpdateInProgress] = (0, _react.useState)(false);
    // Filter state
    const [filters, setFilters] = (0, _react.useState)(initialFilters);
    const [searchQuery, setSearchQuery] = (0, _react.useState)('');
    // Reference data for filters
    const [events, setEvents] = (0, _react.useState)([]);
    const [activities, setActivities] = (0, _react.useState)([]);
    /**
   * Fetch RSVPs from API with current filters and pagination
   */ const fetchRSVPs = (0, _react.useCallback)(async ()=>{
        try {
            setLoading(true);
            // Build query parameters
            const params = new URLSearchParams({
                page: currentPage.toString(),
                limit: pageSize.toString()
            });
            if (filters.eventId) params.append('eventId', filters.eventId);
            if (filters.activityId) params.append('activityId', filters.activityId);
            if (filters.status) params.append('status', filters.status);
            if (filters.guestId) params.append('guestId', filters.guestId);
            if (searchQuery) params.append('search', searchQuery);
            const response = await fetch(`/api/admin/rsvps?${params.toString()}`);
            if (!response.ok) {
                throw new Error('Failed to fetch RSVPs');
            }
            const result = await response.json();
            if (result.success) {
                setRsvps(result.data.data || []);
                setTotalCount(result.data.pagination.total);
                setStatistics(result.data.statistics);
            } else {
                addToast({
                    type: 'error',
                    message: result.error?.message || 'Failed to load RSVPs'
                });
            }
        } catch (error) {
            addToast({
                type: 'error',
                message: error instanceof Error ? error.message : 'Failed to load RSVPs'
            });
        } finally{
            setLoading(false);
        }
    }, [
        currentPage,
        pageSize,
        filters,
        searchQuery,
        addToast
    ]);
    /**
   * Fetch events for filter dropdown
   */ const fetchEvents = (0, _react.useCallback)(async ()=>{
        try {
            const response = await fetch('/api/admin/events');
            if (!response.ok) return;
            const result = await response.json();
            if (result.success) {
                const eventsData = result.data?.events || result.data || [];
                setEvents(Array.isArray(eventsData) ? eventsData : []);
            }
        } catch (error) {
            console.error('Failed to fetch events:', error);
        }
    }, []);
    /**
   * Fetch activities for filter dropdown
   */ const fetchActivities = (0, _react.useCallback)(async ()=>{
        try {
            const response = await fetch('/api/admin/activities');
            if (!response.ok) return;
            const result = await response.json();
            if (result.success) {
                const activitiesData = result.data?.activities || result.data || [];
                setActivities(Array.isArray(activitiesData) ? activitiesData : []);
            }
        } catch (error) {
            console.error('Failed to fetch activities:', error);
        }
    }, []);
    // Load data on mount and when filters/pagination change
    (0, _react.useEffect)(()=>{
        fetchRSVPs();
    }, [
        fetchRSVPs
    ]);
    // Load reference data on mount
    (0, _react.useEffect)(()=>{
        fetchEvents();
        fetchActivities();
    }, [
        fetchEvents,
        fetchActivities
    ]);
    /**
   * Handle filter change
   */ const handleFilterChange = (0, _react.useCallback)((key, value)=>{
        setFilters((prev)=>({
                ...prev,
                [key]: value || undefined
            }));
        setCurrentPage(1); // Reset to first page when filters change
    }, []);
    /**
   * Handle search
   */ const handleSearch = (0, _react.useCallback)((query)=>{
        setSearchQuery(query);
        setCurrentPage(1); // Reset to first page when search changes
    }, []);
    /**
   * Handle page change
   */ const handlePageChange = (0, _react.useCallback)((page)=>{
        setCurrentPage(page);
    }, []);
    /**
   * Handle selection change
   */ const handleSelectionChange = (0, _react.useCallback)((ids)=>{
        setSelectedIds(ids);
    }, []);
    /**
   * Handle bulk status update
   */ const handleBulkStatusUpdate = (0, _react.useCallback)(async (status)=>{
        if (selectedIds.length === 0) {
            addToast({
                type: 'warning',
                message: 'Please select RSVPs to update'
            });
            return;
        }
        try {
            setIsBulkUpdateInProgress(true);
            const response = await fetch('/api/admin/rsvps/bulk', {
                method: 'PATCH',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    rsvpIds: selectedIds,
                    status
                })
            });
            const result = await response.json();
            if (result.success) {
                addToast({
                    type: 'success',
                    message: `Successfully updated ${result.data.updatedCount} RSVP${result.data.updatedCount !== 1 ? 's' : ''}`
                });
                // Refresh RSVP list
                await fetchRSVPs();
                // Clear selection
                setSelectedIds([]);
            } else {
                addToast({
                    type: 'error',
                    message: result.error?.message || 'Failed to update RSVPs'
                });
            }
        } catch (error) {
            addToast({
                type: 'error',
                message: error instanceof Error ? error.message : 'Failed to update RSVPs'
            });
        } finally{
            setIsBulkUpdateInProgress(false);
        }
    }, [
        selectedIds,
        addToast,
        fetchRSVPs
    ]);
    /**
   * Handle CSV export
   */ const handleExport = (0, _react.useCallback)(async ()=>{
        try {
            // Build query parameters with current filters
            const params = new URLSearchParams();
            if (filters.eventId) params.append('eventId', filters.eventId);
            if (filters.activityId) params.append('activityId', filters.activityId);
            if (filters.status) params.append('status', filters.status);
            if (filters.guestId) params.append('guestId', filters.guestId);
            if (searchQuery) params.append('search', searchQuery);
            const response = await fetch(`/api/admin/rsvps/export?${params.toString()}`);
            if (!response.ok) {
                throw new Error('Failed to export RSVPs');
            }
            // Get CSV content
            const csv = await response.text();
            // Create blob and download
            const blob = new Blob([
                csv
            ], {
                type: 'text/csv;charset=utf-8;'
            });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `rsvps-${new Date().toISOString().split('T')[0]}.csv`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            addToast({
                type: 'success',
                message: 'RSVPs exported successfully'
            });
        } catch (error) {
            addToast({
                type: 'error',
                message: error instanceof Error ? error.message : 'Failed to export RSVPs'
            });
        }
    }, [
        filters,
        searchQuery,
        addToast
    ]);
    /**
   * Handle row click - could open inline editor in future
   */ const handleRowClick = (0, _react.useCallback)((rsvp)=>{
        // TODO: Implement inline RSVP editing
        console.log('RSVP clicked:', rsvp);
    }, []);
    // Define table columns
    const columns = (0, _react.useMemo)(()=>[
            {
                key: 'guestFirstName',
                label: 'Guest Name',
                sortable: true,
                render: (_, rsvp)=>`${rsvp.guestFirstName} ${rsvp.guestLastName}`
            },
            {
                key: 'guestEmail',
                label: 'Email',
                sortable: true,
                render: (value)=>value || '-',
                mobileHidden: true
            },
            {
                key: 'eventName',
                label: 'Event',
                sortable: true,
                filterable: true,
                filterType: 'select',
                filterOptions: events.map((e)=>({
                        label: e.name,
                        value: e.id
                    })),
                render: (value)=>value || '-'
            },
            {
                key: 'activityName',
                label: 'Activity',
                sortable: true,
                filterable: true,
                filterType: 'select',
                filterOptions: activities.map((a)=>({
                        label: a.name,
                        value: a.id
                    })),
                render: (value)=>value || '-'
            },
            {
                key: 'status',
                label: 'Status',
                sortable: true,
                filterable: true,
                filterType: 'select',
                filterOptions: [
                    {
                        label: 'Pending',
                        value: 'pending'
                    },
                    {
                        label: 'Attending',
                        value: 'attending'
                    },
                    {
                        label: 'Declined',
                        value: 'declined'
                    },
                    {
                        label: 'Maybe',
                        value: 'maybe'
                    }
                ],
                render: (value)=>{
                    const statusColors = {
                        pending: 'bg-sage-100 text-sage-800',
                        attending: 'bg-jungle-100 text-jungle-800',
                        declined: 'bg-volcano-100 text-volcano-800',
                        maybe: 'bg-sunset-100 text-sunset-800'
                    };
                    const statusLabels = {
                        pending: 'Pending',
                        attending: 'Attending',
                        declined: 'Declined',
                        maybe: 'Maybe'
                    };
                    return /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                        className: `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${statusColors[value] || 'bg-sage-100 text-sage-800'}`,
                        children: statusLabels[value] || value
                    });
                }
            },
            {
                key: 'guestCount',
                label: 'Guest Count',
                sortable: true,
                render: (value)=>value?.toString() || '1',
                mobileHidden: true
            },
            {
                key: 'respondedAt',
                label: 'Responded',
                sortable: true,
                render: (value)=>{
                    if (!value) return '-';
                    const date = new Date(value);
                    return date.toLocaleDateString();
                },
                mobileHidden: true
            }
        ], [
        events,
        activities
    ]);
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: "space-y-6",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "bg-white rounded-lg shadow-sm border border-sage-200 p-4",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "text-sm font-medium text-sage-600",
                                children: "Total RSVPs"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "mt-2 text-3xl font-bold text-sage-900",
                                children: statistics.totalRSVPs
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "bg-white rounded-lg shadow-sm border border-jungle-200 p-4",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "text-sm font-medium text-jungle-600",
                                children: "Attending"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "mt-2 text-3xl font-bold text-jungle-900",
                                children: statistics.byStatus.attending
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "mt-1 text-xs text-sage-600",
                                children: [
                                    statistics.totalGuestCount,
                                    " total guests"
                                ]
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "bg-white rounded-lg shadow-sm border border-volcano-200 p-4",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "text-sm font-medium text-volcano-600",
                                children: "Declined"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "mt-2 text-3xl font-bold text-volcano-900",
                                children: statistics.byStatus.declined
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "bg-white rounded-lg shadow-sm border border-sunset-200 p-4",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "text-sm font-medium text-sunset-600",
                                children: "Maybe"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "mt-2 text-3xl font-bold text-sunset-900",
                                children: statistics.byStatus.maybe
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "bg-white rounded-lg shadow-sm border border-sage-200 p-4",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "text-sm font-medium text-sage-600",
                                children: "Pending"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "mt-2 text-3xl font-bold text-sage-900",
                                children: statistics.byStatus.pending
                            })
                        ]
                    })
                ]
            }),
            selectedIds.length > 0 && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "bg-jungle-50 border border-jungle-200 rounded-lg px-6 py-4 flex flex-col md:flex-row items-center justify-between gap-4",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "flex items-center gap-2",
                        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                            className: "text-sm font-medium text-jungle-900",
                            children: [
                                selectedIds.length,
                                " RSVP",
                                selectedIds.length !== 1 ? 's' : '',
                                " selected"
                            ]
                        })
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex flex-wrap gap-2",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                                variant: "primary",
                                size: "sm",
                                onClick: ()=>handleBulkStatusUpdate('attending'),
                                disabled: isBulkUpdateInProgress,
                                children: "Mark Attending"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                                variant: "secondary",
                                size: "sm",
                                onClick: ()=>handleBulkStatusUpdate('maybe'),
                                disabled: isBulkUpdateInProgress,
                                children: "Mark Maybe"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                                variant: "danger",
                                size: "sm",
                                onClick: ()=>handleBulkStatusUpdate('declined'),
                                disabled: isBulkUpdateInProgress,
                                children: "Mark Declined"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_Button.Button, {
                                variant: "ghost",
                                size: "sm",
                                onClick: ()=>handleBulkStatusUpdate('pending'),
                                disabled: isBulkUpdateInProgress,
                                children: "Mark Pending"
                            })
                        ]
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_DataTableWithSuspense.DataTableWithSuspense, {
                data: rsvps,
                columns: columns,
                loading: loading,
                totalCount: totalCount,
                currentPage: currentPage,
                pageSize: pageSize,
                onPageChange: handlePageChange,
                onSearch: handleSearch,
                onRowClick: handleRowClick,
                selectable: true,
                onSelectionChange: handleSelectionChange,
                idField: "id",
                entityType: "RSVPs",
                onBulkExport: handleExport
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9hZG1pbi9SU1ZQTWFuYWdlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IERhdGFUYWJsZVdpdGhTdXNwZW5zZSBhcyBEYXRhVGFibGUsIHR5cGUgQ29sdW1uRGVmIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL0RhdGFUYWJsZVdpdGhTdXNwZW5zZSc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvQnV0dG9uJztcbmltcG9ydCB7IHVzZVRvYXN0IH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL1RvYXN0Q29udGV4dCc7XG5pbXBvcnQgdHlwZSB7IFJTVlBWaWV3TW9kZWwsIFJTVlBTdGF0aXN0aWNzLCBSU1ZQRmlsdGVycyB9IGZyb20gJ0Avc2VydmljZXMvcnN2cE1hbmFnZW1lbnRTZXJ2aWNlJztcblxuLyoqXG4gKiBSU1ZQTWFuYWdlciBDb21wb25lbnQgUHJvcHNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSU1ZQTWFuYWdlclByb3BzIHtcbiAgaW5pdGlhbEZpbHRlcnM/OiBSU1ZQRmlsdGVycztcbn1cblxuLyoqXG4gKiBSU1ZQTWFuYWdlciBDb21wb25lbnRcbiAqIFxuICogQ29tcHJlaGVuc2l2ZSBSU1ZQIG1hbmFnZW1lbnQgaW50ZXJmYWNlIGZvciBhZG1pbnMuXG4gKiBcbiAqIEZlYXR1cmVzOlxuICogLSBUYWJ1bGFyIHZpZXcgd2l0aCBEYXRhVGFibGVcbiAqIC0gTXVsdGktbGV2ZWwgZmlsdGVyaW5nIChldmVudCwgYWN0aXZpdHksIHN0YXR1cywgZ3Vlc3QpXG4gKiAtIFNlYXJjaCBmdW5jdGlvbmFsaXR5XG4gKiAtIEJ1bGsgc2VsZWN0aW9uIGFuZCBzdGF0dXMgdXBkYXRlc1xuICogLSBDU1YgZXhwb3J0XG4gKiAtIFJlYWwtdGltZSBzdGF0aXN0aWNzIGRhc2hib2FyZFxuICogLSBJbmxpbmUgUlNWUCBlZGl0aW5nXG4gKiBcbiAqICoqVmFsaWRhdGVzOiBSZXF1aXJlbWVudHMgNi4yLCA2LjMsIDYuNCwgNi41KipcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFJTVlBNYW5hZ2VyKHsgaW5pdGlhbEZpbHRlcnMgPSB7fSB9OiBSU1ZQTWFuYWdlclByb3BzKSB7XG4gIGNvbnN0IHsgYWRkVG9hc3QgfSA9IHVzZVRvYXN0KCk7XG5cbiAgLy8gU3RhdGUgbWFuYWdlbWVudFxuICBjb25zdCBbcnN2cHMsIHNldFJzdnBzXSA9IHVzZVN0YXRlPFJTVlBWaWV3TW9kZWxbXT4oW10pO1xuICBjb25zdCBbc3RhdGlzdGljcywgc2V0U3RhdGlzdGljc10gPSB1c2VTdGF0ZTxSU1ZQU3RhdGlzdGljcz4oe1xuICAgIHRvdGFsUlNWUHM6IDAsXG4gICAgYnlTdGF0dXM6IHsgYXR0ZW5kaW5nOiAwLCBkZWNsaW5lZDogMCwgbWF5YmU6IDAsIHBlbmRpbmc6IDAgfSxcbiAgICB0b3RhbEd1ZXN0Q291bnQ6IDAsXG4gIH0pO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2N1cnJlbnRQYWdlLCBzZXRDdXJyZW50UGFnZV0gPSB1c2VTdGF0ZSgxKTtcbiAgY29uc3QgW3RvdGFsQ291bnQsIHNldFRvdGFsQ291bnRdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFtwYWdlU2l6ZSwgc2V0UGFnZVNpemVdID0gdXNlU3RhdGUoNTApO1xuICBjb25zdCBbc2VsZWN0ZWRJZHMsIHNldFNlbGVjdGVkSWRzXSA9IHVzZVN0YXRlPHN0cmluZ1tdPihbXSk7XG4gIGNvbnN0IFtpc0J1bGtVcGRhdGVJblByb2dyZXNzLCBzZXRJc0J1bGtVcGRhdGVJblByb2dyZXNzXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICAvLyBGaWx0ZXIgc3RhdGVcbiAgY29uc3QgW2ZpbHRlcnMsIHNldEZpbHRlcnNdID0gdXNlU3RhdGU8UlNWUEZpbHRlcnM+KGluaXRpYWxGaWx0ZXJzKTtcbiAgY29uc3QgW3NlYXJjaFF1ZXJ5LCBzZXRTZWFyY2hRdWVyeV0gPSB1c2VTdGF0ZSgnJyk7XG5cbiAgLy8gUmVmZXJlbmNlIGRhdGEgZm9yIGZpbHRlcnNcbiAgY29uc3QgW2V2ZW50cywgc2V0RXZlbnRzXSA9IHVzZVN0YXRlPEFycmF5PHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nIH0+PihbXSk7XG4gIGNvbnN0IFthY3Rpdml0aWVzLCBzZXRBY3Rpdml0aWVzXSA9IHVzZVN0YXRlPEFycmF5PHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nIH0+PihbXSk7XG5cbiAgLyoqXG4gICAqIEZldGNoIFJTVlBzIGZyb20gQVBJIHdpdGggY3VycmVudCBmaWx0ZXJzIGFuZCBwYWdpbmF0aW9uXG4gICAqL1xuICBjb25zdCBmZXRjaFJTVlBzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBzZXRMb2FkaW5nKHRydWUpO1xuXG4gICAgICAvLyBCdWlsZCBxdWVyeSBwYXJhbWV0ZXJzXG4gICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgcGFnZTogY3VycmVudFBhZ2UudG9TdHJpbmcoKSxcbiAgICAgICAgbGltaXQ6IHBhZ2VTaXplLnRvU3RyaW5nKCksXG4gICAgICB9KTtcblxuICAgICAgaWYgKGZpbHRlcnMuZXZlbnRJZCkgcGFyYW1zLmFwcGVuZCgnZXZlbnRJZCcsIGZpbHRlcnMuZXZlbnRJZCk7XG4gICAgICBpZiAoZmlsdGVycy5hY3Rpdml0eUlkKSBwYXJhbXMuYXBwZW5kKCdhY3Rpdml0eUlkJywgZmlsdGVycy5hY3Rpdml0eUlkKTtcbiAgICAgIGlmIChmaWx0ZXJzLnN0YXR1cykgcGFyYW1zLmFwcGVuZCgnc3RhdHVzJywgZmlsdGVycy5zdGF0dXMpO1xuICAgICAgaWYgKGZpbHRlcnMuZ3Vlc3RJZCkgcGFyYW1zLmFwcGVuZCgnZ3Vlc3RJZCcsIGZpbHRlcnMuZ3Vlc3RJZCk7XG4gICAgICBpZiAoc2VhcmNoUXVlcnkpIHBhcmFtcy5hcHBlbmQoJ3NlYXJjaCcsIHNlYXJjaFF1ZXJ5KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9hZG1pbi9yc3Zwcz8ke3BhcmFtcy50b1N0cmluZygpfWApO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIFJTVlBzJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHNldFJzdnBzKHJlc3VsdC5kYXRhLmRhdGEgfHwgW10pO1xuICAgICAgICBzZXRUb3RhbENvdW50KHJlc3VsdC5kYXRhLnBhZ2luYXRpb24udG90YWwpO1xuICAgICAgICBzZXRTdGF0aXN0aWNzKHJlc3VsdC5kYXRhLnN0YXRpc3RpY3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWRkVG9hc3Qoe1xuICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgbWVzc2FnZTogcmVzdWx0LmVycm9yPy5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gbG9hZCBSU1ZQcycsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhZGRUb2FzdCh7XG4gICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBsb2FkIFJTVlBzJyxcbiAgICAgIH0pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH0sIFtjdXJyZW50UGFnZSwgcGFnZVNpemUsIGZpbHRlcnMsIHNlYXJjaFF1ZXJ5LCBhZGRUb2FzdF0pO1xuXG4gIC8qKlxuICAgKiBGZXRjaCBldmVudHMgZm9yIGZpbHRlciBkcm9wZG93blxuICAgKi9cbiAgY29uc3QgZmV0Y2hFdmVudHMgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvYWRtaW4vZXZlbnRzJyk7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSByZXR1cm47XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBjb25zdCBldmVudHNEYXRhID0gcmVzdWx0LmRhdGE/LmV2ZW50cyB8fCByZXN1bHQuZGF0YSB8fCBbXTtcbiAgICAgICAgc2V0RXZlbnRzKEFycmF5LmlzQXJyYXkoZXZlbnRzRGF0YSkgPyBldmVudHNEYXRhIDogW10pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggZXZlbnRzOicsIGVycm9yKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICAvKipcbiAgICogRmV0Y2ggYWN0aXZpdGllcyBmb3IgZmlsdGVyIGRyb3Bkb3duXG4gICAqL1xuICBjb25zdCBmZXRjaEFjdGl2aXRpZXMgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvYWRtaW4vYWN0aXZpdGllcycpO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykgcmV0dXJuO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc3QgYWN0aXZpdGllc0RhdGEgPSByZXN1bHQuZGF0YT8uYWN0aXZpdGllcyB8fCByZXN1bHQuZGF0YSB8fCBbXTtcbiAgICAgICAgc2V0QWN0aXZpdGllcyhBcnJheS5pc0FycmF5KGFjdGl2aXRpZXNEYXRhKSA/IGFjdGl2aXRpZXNEYXRhIDogW10pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggYWN0aXZpdGllczonLCBlcnJvcik7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgLy8gTG9hZCBkYXRhIG9uIG1vdW50IGFuZCB3aGVuIGZpbHRlcnMvcGFnaW5hdGlvbiBjaGFuZ2VcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaFJTVlBzKCk7XG4gIH0sIFtmZXRjaFJTVlBzXSk7XG5cbiAgLy8gTG9hZCByZWZlcmVuY2UgZGF0YSBvbiBtb3VudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoRXZlbnRzKCk7XG4gICAgZmV0Y2hBY3Rpdml0aWVzKCk7XG4gIH0sIFtmZXRjaEV2ZW50cywgZmV0Y2hBY3Rpdml0aWVzXSk7XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBmaWx0ZXIgY2hhbmdlXG4gICAqL1xuICBjb25zdCBoYW5kbGVGaWx0ZXJDaGFuZ2UgPSB1c2VDYWxsYmFjaygoa2V5OiBrZXlvZiBSU1ZQRmlsdGVycywgdmFsdWU6IHN0cmluZykgPT4ge1xuICAgIHNldEZpbHRlcnMoKHByZXYpID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgW2tleV06IHZhbHVlIHx8IHVuZGVmaW5lZCxcbiAgICB9KSk7XG4gICAgc2V0Q3VycmVudFBhZ2UoMSk7IC8vIFJlc2V0IHRvIGZpcnN0IHBhZ2Ugd2hlbiBmaWx0ZXJzIGNoYW5nZVxuICB9LCBbXSk7XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBzZWFyY2hcbiAgICovXG4gIGNvbnN0IGhhbmRsZVNlYXJjaCA9IHVzZUNhbGxiYWNrKChxdWVyeTogc3RyaW5nKSA9PiB7XG4gICAgc2V0U2VhcmNoUXVlcnkocXVlcnkpO1xuICAgIHNldEN1cnJlbnRQYWdlKDEpOyAvLyBSZXNldCB0byBmaXJzdCBwYWdlIHdoZW4gc2VhcmNoIGNoYW5nZXNcbiAgfSwgW10pO1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgcGFnZSBjaGFuZ2VcbiAgICovXG4gIGNvbnN0IGhhbmRsZVBhZ2VDaGFuZ2UgPSB1c2VDYWxsYmFjaygocGFnZTogbnVtYmVyKSA9PiB7XG4gICAgc2V0Q3VycmVudFBhZ2UocGFnZSk7XG4gIH0sIFtdKTtcblxuICAvKipcbiAgICogSGFuZGxlIHNlbGVjdGlvbiBjaGFuZ2VcbiAgICovXG4gIGNvbnN0IGhhbmRsZVNlbGVjdGlvbkNoYW5nZSA9IHVzZUNhbGxiYWNrKChpZHM6IHN0cmluZ1tdKSA9PiB7XG4gICAgc2V0U2VsZWN0ZWRJZHMoaWRzKTtcbiAgfSwgW10pO1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgYnVsayBzdGF0dXMgdXBkYXRlXG4gICAqL1xuICBjb25zdCBoYW5kbGVCdWxrU3RhdHVzVXBkYXRlID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKHN0YXR1czogJ3BlbmRpbmcnIHwgJ2F0dGVuZGluZycgfCAnZGVjbGluZWQnIHwgJ21heWJlJykgPT4ge1xuICAgICAgaWYgKHNlbGVjdGVkSWRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBhZGRUb2FzdCh7XG4gICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2Ugc2VsZWN0IFJTVlBzIHRvIHVwZGF0ZScsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHNldElzQnVsa1VwZGF0ZUluUHJvZ3Jlc3ModHJ1ZSk7XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9hZG1pbi9yc3Zwcy9idWxrJywge1xuICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICByc3ZwSWRzOiBzZWxlY3RlZElkcyxcbiAgICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgIGFkZFRvYXN0KHtcbiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBTdWNjZXNzZnVsbHkgdXBkYXRlZCAke3Jlc3VsdC5kYXRhLnVwZGF0ZWRDb3VudH0gUlNWUCR7XG4gICAgICAgICAgICAgIHJlc3VsdC5kYXRhLnVwZGF0ZWRDb3VudCAhPT0gMSA/ICdzJyA6ICcnXG4gICAgICAgICAgICB9YCxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIFJlZnJlc2ggUlNWUCBsaXN0XG4gICAgICAgICAgYXdhaXQgZmV0Y2hSU1ZQcygpO1xuXG4gICAgICAgICAgLy8gQ2xlYXIgc2VsZWN0aW9uXG4gICAgICAgICAgc2V0U2VsZWN0ZWRJZHMoW10pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFkZFRvYXN0KHtcbiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICBtZXNzYWdlOiByZXN1bHQuZXJyb3I/Lm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byB1cGRhdGUgUlNWUHMnLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBhZGRUb2FzdCh7XG4gICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gdXBkYXRlIFJTVlBzJyxcbiAgICAgICAgfSk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzZXRJc0J1bGtVcGRhdGVJblByb2dyZXNzKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtzZWxlY3RlZElkcywgYWRkVG9hc3QsIGZldGNoUlNWUHNdXG4gICk7XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBDU1YgZXhwb3J0XG4gICAqL1xuICBjb25zdCBoYW5kbGVFeHBvcnQgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEJ1aWxkIHF1ZXJ5IHBhcmFtZXRlcnMgd2l0aCBjdXJyZW50IGZpbHRlcnNcbiAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAgIGlmIChmaWx0ZXJzLmV2ZW50SWQpIHBhcmFtcy5hcHBlbmQoJ2V2ZW50SWQnLCBmaWx0ZXJzLmV2ZW50SWQpO1xuICAgICAgaWYgKGZpbHRlcnMuYWN0aXZpdHlJZCkgcGFyYW1zLmFwcGVuZCgnYWN0aXZpdHlJZCcsIGZpbHRlcnMuYWN0aXZpdHlJZCk7XG4gICAgICBpZiAoZmlsdGVycy5zdGF0dXMpIHBhcmFtcy5hcHBlbmQoJ3N0YXR1cycsIGZpbHRlcnMuc3RhdHVzKTtcbiAgICAgIGlmIChmaWx0ZXJzLmd1ZXN0SWQpIHBhcmFtcy5hcHBlbmQoJ2d1ZXN0SWQnLCBmaWx0ZXJzLmd1ZXN0SWQpO1xuICAgICAgaWYgKHNlYXJjaFF1ZXJ5KSBwYXJhbXMuYXBwZW5kKCdzZWFyY2gnLCBzZWFyY2hRdWVyeSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvYWRtaW4vcnN2cHMvZXhwb3J0PyR7cGFyYW1zLnRvU3RyaW5nKCl9YCk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZXhwb3J0IFJTVlBzJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCBDU1YgY29udGVudFxuICAgICAgY29uc3QgY3N2ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuXG4gICAgICAvLyBDcmVhdGUgYmxvYiBhbmQgZG93bmxvYWRcbiAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY3N2XSwgeyB0eXBlOiAndGV4dC9jc3Y7Y2hhcnNldD11dGYtODsnIH0pO1xuICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICBsaW5rLmhyZWYgPSB1cmw7XG4gICAgICBsaW5rLmRvd25sb2FkID0gYHJzdnBzLSR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF19LmNzdmA7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspO1xuICAgICAgbGluay5jbGljaygpO1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTtcbiAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcblxuICAgICAgYWRkVG9hc3Qoe1xuICAgICAgICB0eXBlOiAnc3VjY2VzcycsXG4gICAgICAgIG1lc3NhZ2U6ICdSU1ZQcyBleHBvcnRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFkZFRvYXN0KHtcbiAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGV4cG9ydCBSU1ZQcycsXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtmaWx0ZXJzLCBzZWFyY2hRdWVyeSwgYWRkVG9hc3RdKTtcblxuICAvKipcbiAgICogSGFuZGxlIHJvdyBjbGljayAtIGNvdWxkIG9wZW4gaW5saW5lIGVkaXRvciBpbiBmdXR1cmVcbiAgICovXG4gIGNvbnN0IGhhbmRsZVJvd0NsaWNrID0gdXNlQ2FsbGJhY2soKHJzdnA6IFJTVlBWaWV3TW9kZWwpID0+IHtcbiAgICAvLyBUT0RPOiBJbXBsZW1lbnQgaW5saW5lIFJTVlAgZWRpdGluZ1xuICAgIGNvbnNvbGUubG9nKCdSU1ZQIGNsaWNrZWQ6JywgcnN2cCk7XG4gIH0sIFtdKTtcblxuICAvLyBEZWZpbmUgdGFibGUgY29sdW1uc1xuICBjb25zdCBjb2x1bW5zOiBDb2x1bW5EZWY8UlNWUFZpZXdNb2RlbD5bXSA9IHVzZU1lbW8oXG4gICAgKCkgPT4gW1xuICAgICAge1xuICAgICAgICBrZXk6ICdndWVzdEZpcnN0TmFtZScsXG4gICAgICAgIGxhYmVsOiAnR3Vlc3QgTmFtZScsXG4gICAgICAgIHNvcnRhYmxlOiB0cnVlLFxuICAgICAgICByZW5kZXI6IChfLCByc3ZwKSA9PiBgJHtyc3ZwLmd1ZXN0Rmlyc3ROYW1lfSAke3JzdnAuZ3Vlc3RMYXN0TmFtZX1gLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiAnZ3Vlc3RFbWFpbCcsXG4gICAgICAgIGxhYmVsOiAnRW1haWwnLFxuICAgICAgICBzb3J0YWJsZTogdHJ1ZSxcbiAgICAgICAgcmVuZGVyOiAodmFsdWUpID0+IHZhbHVlIHx8ICctJyxcbiAgICAgICAgbW9iaWxlSGlkZGVuOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiAnZXZlbnROYW1lJyxcbiAgICAgICAgbGFiZWw6ICdFdmVudCcsXG4gICAgICAgIHNvcnRhYmxlOiB0cnVlLFxuICAgICAgICBmaWx0ZXJhYmxlOiB0cnVlLFxuICAgICAgICBmaWx0ZXJUeXBlOiAnc2VsZWN0JyxcbiAgICAgICAgZmlsdGVyT3B0aW9uczogZXZlbnRzLm1hcCgoZSkgPT4gKHsgbGFiZWw6IGUubmFtZSwgdmFsdWU6IGUuaWQgfSkpLFxuICAgICAgICByZW5kZXI6ICh2YWx1ZSkgPT4gdmFsdWUgfHwgJy0nLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiAnYWN0aXZpdHlOYW1lJyxcbiAgICAgICAgbGFiZWw6ICdBY3Rpdml0eScsXG4gICAgICAgIHNvcnRhYmxlOiB0cnVlLFxuICAgICAgICBmaWx0ZXJhYmxlOiB0cnVlLFxuICAgICAgICBmaWx0ZXJUeXBlOiAnc2VsZWN0JyxcbiAgICAgICAgZmlsdGVyT3B0aW9uczogYWN0aXZpdGllcy5tYXAoKGEpID0+ICh7IGxhYmVsOiBhLm5hbWUsIHZhbHVlOiBhLmlkIH0pKSxcbiAgICAgICAgcmVuZGVyOiAodmFsdWUpID0+IHZhbHVlIHx8ICctJyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGtleTogJ3N0YXR1cycsXG4gICAgICAgIGxhYmVsOiAnU3RhdHVzJyxcbiAgICAgICAgc29ydGFibGU6IHRydWUsXG4gICAgICAgIGZpbHRlcmFibGU6IHRydWUsXG4gICAgICAgIGZpbHRlclR5cGU6ICdzZWxlY3QnLFxuICAgICAgICBmaWx0ZXJPcHRpb25zOiBbXG4gICAgICAgICAgeyBsYWJlbDogJ1BlbmRpbmcnLCB2YWx1ZTogJ3BlbmRpbmcnIH0sXG4gICAgICAgICAgeyBsYWJlbDogJ0F0dGVuZGluZycsIHZhbHVlOiAnYXR0ZW5kaW5nJyB9LFxuICAgICAgICAgIHsgbGFiZWw6ICdEZWNsaW5lZCcsIHZhbHVlOiAnZGVjbGluZWQnIH0sXG4gICAgICAgICAgeyBsYWJlbDogJ01heWJlJywgdmFsdWU6ICdtYXliZScgfSxcbiAgICAgICAgXSxcbiAgICAgICAgcmVuZGVyOiAodmFsdWUpID0+IHtcbiAgICAgICAgICBjb25zdCBzdGF0dXNDb2xvcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAgICAgICBwZW5kaW5nOiAnYmctc2FnZS0xMDAgdGV4dC1zYWdlLTgwMCcsXG4gICAgICAgICAgICBhdHRlbmRpbmc6ICdiZy1qdW5nbGUtMTAwIHRleHQtanVuZ2xlLTgwMCcsXG4gICAgICAgICAgICBkZWNsaW5lZDogJ2JnLXZvbGNhbm8tMTAwIHRleHQtdm9sY2Fuby04MDAnLFxuICAgICAgICAgICAgbWF5YmU6ICdiZy1zdW5zZXQtMTAwIHRleHQtc3Vuc2V0LTgwMCcsXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjb25zdCBzdGF0dXNMYWJlbHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAgICAgICBwZW5kaW5nOiAnUGVuZGluZycsXG4gICAgICAgICAgICBhdHRlbmRpbmc6ICdBdHRlbmRpbmcnLFxuICAgICAgICAgICAgZGVjbGluZWQ6ICdEZWNsaW5lZCcsXG4gICAgICAgICAgICBtYXliZTogJ01heWJlJyxcbiAgICAgICAgICB9O1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2BpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgcHgtMi41IHB5LTAuNSByb3VuZGVkLWZ1bGwgdGV4dC14cyBmb250LW1lZGl1bSAke1xuICAgICAgICAgICAgICAgIHN0YXR1c0NvbG9yc1t2YWx1ZV0gfHwgJ2JnLXNhZ2UtMTAwIHRleHQtc2FnZS04MDAnXG4gICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7c3RhdHVzTGFiZWxzW3ZhbHVlXSB8fCB2YWx1ZX1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICApO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiAnZ3Vlc3RDb3VudCcsXG4gICAgICAgIGxhYmVsOiAnR3Vlc3QgQ291bnQnLFxuICAgICAgICBzb3J0YWJsZTogdHJ1ZSxcbiAgICAgICAgcmVuZGVyOiAodmFsdWUpID0+IHZhbHVlPy50b1N0cmluZygpIHx8ICcxJyxcbiAgICAgICAgbW9iaWxlSGlkZGVuOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiAncmVzcG9uZGVkQXQnLFxuICAgICAgICBsYWJlbDogJ1Jlc3BvbmRlZCcsXG4gICAgICAgIHNvcnRhYmxlOiB0cnVlLFxuICAgICAgICByZW5kZXI6ICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIGlmICghdmFsdWUpIHJldHVybiAnLSc7XG4gICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHZhbHVlKTtcbiAgICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKTtcbiAgICAgICAgfSxcbiAgICAgICAgbW9iaWxlSGlkZGVuOiB0cnVlLFxuICAgICAgfSxcbiAgICBdLFxuICAgIFtldmVudHMsIGFjdGl2aXRpZXNdXG4gICk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNlwiPlxuICAgICAgey8qIFN0YXRpc3RpY3MgRGFzaGJvYXJkICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGxnOmdyaWQtY29scy01IGdhcC00XCI+XG4gICAgICAgIHsvKiBUb3RhbCBSU1ZQcyAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLWxnIHNoYWRvdy1zbSBib3JkZXIgYm9yZGVyLXNhZ2UtMjAwIHAtNFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LXNhZ2UtNjAwXCI+VG90YWwgUlNWUHM8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgdGV4dC0zeGwgZm9udC1ib2xkIHRleHQtc2FnZS05MDBcIj5cbiAgICAgICAgICAgIHtzdGF0aXN0aWNzLnRvdGFsUlNWUHN9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBBdHRlbmRpbmcgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3ctc20gYm9yZGVyIGJvcmRlci1qdW5nbGUtMjAwIHAtNFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWp1bmdsZS02MDBcIj5BdHRlbmRpbmc8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgdGV4dC0zeGwgZm9udC1ib2xkIHRleHQtanVuZ2xlLTkwMFwiPlxuICAgICAgICAgICAge3N0YXRpc3RpY3MuYnlTdGF0dXMuYXR0ZW5kaW5nfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMSB0ZXh0LXhzIHRleHQtc2FnZS02MDBcIj5cbiAgICAgICAgICAgIHtzdGF0aXN0aWNzLnRvdGFsR3Vlc3RDb3VudH0gdG90YWwgZ3Vlc3RzXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBEZWNsaW5lZCAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLWxnIHNoYWRvdy1zbSBib3JkZXIgYm9yZGVyLXZvbGNhbm8tMjAwIHAtNFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LXZvbGNhbm8tNjAwXCI+RGVjbGluZWQ8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgdGV4dC0zeGwgZm9udC1ib2xkIHRleHQtdm9sY2Fuby05MDBcIj5cbiAgICAgICAgICAgIHtzdGF0aXN0aWNzLmJ5U3RhdHVzLmRlY2xpbmVkfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogTWF5YmUgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3ctc20gYm9yZGVyIGJvcmRlci1zdW5zZXQtMjAwIHAtNFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LXN1bnNldC02MDBcIj5NYXliZTwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiB0ZXh0LTN4bCBmb250LWJvbGQgdGV4dC1zdW5zZXQtOTAwXCI+XG4gICAgICAgICAgICB7c3RhdGlzdGljcy5ieVN0YXR1cy5tYXliZX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIFBlbmRpbmcgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3ctc20gYm9yZGVyIGJvcmRlci1zYWdlLTIwMCBwLTRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1zYWdlLTYwMFwiPlBlbmRpbmc8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgdGV4dC0zeGwgZm9udC1ib2xkIHRleHQtc2FnZS05MDBcIj5cbiAgICAgICAgICAgIHtzdGF0aXN0aWNzLmJ5U3RhdHVzLnBlbmRpbmd9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBCdWxrIEFjdGlvbnMgVG9vbGJhciAqL31cbiAgICAgIHtzZWxlY3RlZElkcy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1qdW5nbGUtNTAgYm9yZGVyIGJvcmRlci1qdW5nbGUtMjAwIHJvdW5kZWQtbGcgcHgtNiBweS00IGZsZXggZmxleC1jb2wgbWQ6ZmxleC1yb3cgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBnYXAtNFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1qdW5nbGUtOTAwXCI+XG4gICAgICAgICAgICAgIHtzZWxlY3RlZElkcy5sZW5ndGh9IFJTVlB7c2VsZWN0ZWRJZHMubGVuZ3RoICE9PSAxID8gJ3MnIDogJyd9IHNlbGVjdGVkXG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtd3JhcCBnYXAtMlwiPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICB2YXJpYW50PVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZUJ1bGtTdGF0dXNVcGRhdGUoJ2F0dGVuZGluZycpfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17aXNCdWxrVXBkYXRlSW5Qcm9ncmVzc31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgTWFyayBBdHRlbmRpbmdcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICB2YXJpYW50PVwic2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlQnVsa1N0YXR1c1VwZGF0ZSgnbWF5YmUnKX1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzQnVsa1VwZGF0ZUluUHJvZ3Jlc3N9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIE1hcmsgTWF5YmVcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICB2YXJpYW50PVwiZGFuZ2VyXCJcbiAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlQnVsa1N0YXR1c1VwZGF0ZSgnZGVjbGluZWQnKX1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzQnVsa1VwZGF0ZUluUHJvZ3Jlc3N9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIE1hcmsgRGVjbGluZWRcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICB2YXJpYW50PVwiZ2hvc3RcIlxuICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVCdWxrU3RhdHVzVXBkYXRlKCdwZW5kaW5nJyl9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtpc0J1bGtVcGRhdGVJblByb2dyZXNzfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBNYXJrIFBlbmRpbmdcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBEYXRhIFRhYmxlICovfVxuICAgICAgPERhdGFUYWJsZVxuICAgICAgICBkYXRhPXtyc3Zwc31cbiAgICAgICAgY29sdW1ucz17Y29sdW1uc31cbiAgICAgICAgbG9hZGluZz17bG9hZGluZ31cbiAgICAgICAgdG90YWxDb3VudD17dG90YWxDb3VudH1cbiAgICAgICAgY3VycmVudFBhZ2U9e2N1cnJlbnRQYWdlfVxuICAgICAgICBwYWdlU2l6ZT17cGFnZVNpemV9XG4gICAgICAgIG9uUGFnZUNoYW5nZT17aGFuZGxlUGFnZUNoYW5nZX1cbiAgICAgICAgb25TZWFyY2g9e2hhbmRsZVNlYXJjaH1cbiAgICAgICAgb25Sb3dDbGljaz17aGFuZGxlUm93Q2xpY2t9XG4gICAgICAgIHNlbGVjdGFibGU9e3RydWV9XG4gICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlPXtoYW5kbGVTZWxlY3Rpb25DaGFuZ2V9XG4gICAgICAgIGlkRmllbGQ9XCJpZFwiXG4gICAgICAgIGVudGl0eVR5cGU9XCJSU1ZQc1wiXG4gICAgICAgIG9uQnVsa0V4cG9ydD17aGFuZGxlRXhwb3J0fVxuICAgICAgLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJSU1ZQTWFuYWdlciIsImluaXRpYWxGaWx0ZXJzIiwiYWRkVG9hc3QiLCJ1c2VUb2FzdCIsInJzdnBzIiwic2V0UnN2cHMiLCJ1c2VTdGF0ZSIsInN0YXRpc3RpY3MiLCJzZXRTdGF0aXN0aWNzIiwidG90YWxSU1ZQcyIsImJ5U3RhdHVzIiwiYXR0ZW5kaW5nIiwiZGVjbGluZWQiLCJtYXliZSIsInBlbmRpbmciLCJ0b3RhbEd1ZXN0Q291bnQiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsImN1cnJlbnRQYWdlIiwic2V0Q3VycmVudFBhZ2UiLCJ0b3RhbENvdW50Iiwic2V0VG90YWxDb3VudCIsInBhZ2VTaXplIiwic2V0UGFnZVNpemUiLCJzZWxlY3RlZElkcyIsInNldFNlbGVjdGVkSWRzIiwiaXNCdWxrVXBkYXRlSW5Qcm9ncmVzcyIsInNldElzQnVsa1VwZGF0ZUluUHJvZ3Jlc3MiLCJmaWx0ZXJzIiwic2V0RmlsdGVycyIsInNlYXJjaFF1ZXJ5Iiwic2V0U2VhcmNoUXVlcnkiLCJldmVudHMiLCJzZXRFdmVudHMiLCJhY3Rpdml0aWVzIiwic2V0QWN0aXZpdGllcyIsImZldGNoUlNWUHMiLCJ1c2VDYWxsYmFjayIsInBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsInBhZ2UiLCJ0b1N0cmluZyIsImxpbWl0IiwiZXZlbnRJZCIsImFwcGVuZCIsImFjdGl2aXR5SWQiLCJzdGF0dXMiLCJndWVzdElkIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiRXJyb3IiLCJyZXN1bHQiLCJqc29uIiwic3VjY2VzcyIsImRhdGEiLCJwYWdpbmF0aW9uIiwidG90YWwiLCJ0eXBlIiwibWVzc2FnZSIsImVycm9yIiwiZmV0Y2hFdmVudHMiLCJldmVudHNEYXRhIiwiQXJyYXkiLCJpc0FycmF5IiwiY29uc29sZSIsImZldGNoQWN0aXZpdGllcyIsImFjdGl2aXRpZXNEYXRhIiwidXNlRWZmZWN0IiwiaGFuZGxlRmlsdGVyQ2hhbmdlIiwia2V5IiwidmFsdWUiLCJwcmV2IiwidW5kZWZpbmVkIiwiaGFuZGxlU2VhcmNoIiwicXVlcnkiLCJoYW5kbGVQYWdlQ2hhbmdlIiwiaGFuZGxlU2VsZWN0aW9uQ2hhbmdlIiwiaWRzIiwiaGFuZGxlQnVsa1N0YXR1c1VwZGF0ZSIsImxlbmd0aCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInJzdnBJZHMiLCJ1cGRhdGVkQ291bnQiLCJoYW5kbGVFeHBvcnQiLCJjc3YiLCJ0ZXh0IiwiYmxvYiIsIkJsb2IiLCJ1cmwiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJsaW5rIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaHJlZiIsImRvd25sb2FkIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic3BsaXQiLCJhcHBlbmRDaGlsZCIsImNsaWNrIiwicmVtb3ZlQ2hpbGQiLCJyZXZva2VPYmplY3RVUkwiLCJoYW5kbGVSb3dDbGljayIsInJzdnAiLCJsb2ciLCJjb2x1bW5zIiwidXNlTWVtbyIsImxhYmVsIiwic29ydGFibGUiLCJyZW5kZXIiLCJfIiwiZ3Vlc3RGaXJzdE5hbWUiLCJndWVzdExhc3ROYW1lIiwibW9iaWxlSGlkZGVuIiwiZmlsdGVyYWJsZSIsImZpbHRlclR5cGUiLCJmaWx0ZXJPcHRpb25zIiwibWFwIiwiZSIsIm5hbWUiLCJpZCIsImEiLCJzdGF0dXNDb2xvcnMiLCJzdGF0dXNMYWJlbHMiLCJzcGFuIiwiY2xhc3NOYW1lIiwiZGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsImRpdiIsIkJ1dHRvbiIsInZhcmlhbnQiLCJzaXplIiwib25DbGljayIsImRpc2FibGVkIiwiRGF0YVRhYmxlIiwib25QYWdlQ2hhbmdlIiwib25TZWFyY2giLCJvblJvd0NsaWNrIiwic2VsZWN0YWJsZSIsIm9uU2VsZWN0aW9uQ2hhbmdlIiwiaWRGaWVsZCIsImVudGl0eVR5cGUiLCJvbkJ1bGtFeHBvcnQiXSwibWFwcGluZ3MiOiJBQUFBOzs7OzsrQkErQmdCQTs7O2VBQUFBOzs7O3VCQTdCMEM7dUNBQ1M7d0JBQzVDOzhCQUNFO0FBMEJsQixTQUFTQSxZQUFZLEVBQUVDLGlCQUFpQixDQUFDLENBQUMsRUFBb0I7SUFDbkUsTUFBTSxFQUFFQyxRQUFRLEVBQUUsR0FBR0MsSUFBQUEsc0JBQVE7SUFFN0IsbUJBQW1C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