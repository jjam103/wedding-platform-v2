a831f9598e4c8afe888bf8f6d9b202ca
/**
 * Test Cleanup Utilities
 * 
 * Utilities for cleaning up test data after tests run.
 * Ensures test isolation and prevents data leakage between tests.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get CleanupTracker () {
        return CleanupTracker;
    },
    get cleanup () {
        return cleanup;
    },
    get cleanupAllTestData () {
        return cleanupAllTestData;
    },
    get cleanupAuditLogs () {
        return cleanupAuditLogs;
    },
    get cleanupById () {
        return cleanupById;
    },
    get cleanupByIds () {
        return cleanupByIds;
    },
    get cleanupGuestSessions () {
        return cleanupGuestSessions;
    },
    get cleanupMagicLinkTokens () {
        return cleanupMagicLinkTokens;
    },
    get cleanupTestAccommodations () {
        return cleanupTestAccommodations;
    },
    get cleanupTestActivities () {
        return cleanupTestActivities;
    },
    get cleanupTestContentPages () {
        return cleanupTestContentPages;
    },
    get cleanupTestEvents () {
        return cleanupTestEvents;
    },
    get cleanupTestGuestGroups () {
        return cleanupTestGuestGroups;
    },
    get cleanupTestGuests () {
        return cleanupTestGuests;
    },
    get cleanupTestLocations () {
        return cleanupTestLocations;
    },
    get cleanupTestRSVPs () {
        return cleanupTestRSVPs;
    },
    get cleanupTestRoomTypes () {
        return cleanupTestRoomTypes;
    },
    get cleanupTestSections () {
        return cleanupTestSections;
    },
    get createCleanupTracker () {
        return createCleanupTracker;
    },
    get withCleanup () {
        return withCleanup;
    }
});
const _supabasejs = require("@supabase/supabase-js");
/**
 * Get Supabase client for test cleanup
 * Uses service role key to bypass RLS for cleanup operations
 */ function getCleanupClient() {
    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
    const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;
    if (!supabaseUrl || !supabaseServiceKey) {
        throw new Error('Missing Supabase credentials for test cleanup');
    }
    return (0, _supabasejs.createClient)(supabaseUrl, supabaseServiceKey, {
        auth: {
            autoRefreshToken: false,
            persistSession: false
        }
    });
}
async function cleanupTestGuests(emailPattern = 'test.user%@example.com') {
    const supabase = getCleanupClient();
    const { error } = await supabase.from('guests').delete().like('email', emailPattern);
    if (error) {
        console.error('Failed to cleanup test guests:', error);
    }
}
async function cleanupTestGuestGroups(namePattern = 'Test Family%') {
    const supabase = getCleanupClient();
    const { error } = await supabase.from('guest_groups').delete().like('name', namePattern);
    if (error) {
        console.error('Failed to cleanup test guest groups:', error);
    }
}
async function cleanupTestEvents(namePattern = 'Test Event%') {
    const supabase = getCleanupClient();
    const { error } = await supabase.from('events').delete().like('name', namePattern);
    if (error) {
        console.error('Failed to cleanup test events:', error);
    }
}
async function cleanupTestActivities(namePattern = 'Test Activity%') {
    const supabase = getCleanupClient();
    const { error } = await supabase.from('activities').delete().like('name', namePattern);
    if (error) {
        console.error('Failed to cleanup test activities:', error);
    }
}
async function cleanupTestAccommodations(namePattern = 'Test Hotel%') {
    const supabase = getCleanupClient();
    const { error } = await supabase.from('accommodations').delete().like('name', namePattern);
    if (error) {
        console.error('Failed to cleanup test accommodations:', error);
    }
}
async function cleanupTestRoomTypes(namePattern = 'Test Room%') {
    const supabase = getCleanupClient();
    const { error } = await supabase.from('room_types').delete().like('name', namePattern);
    if (error) {
        console.error('Failed to cleanup test room types:', error);
    }
}
async function cleanupTestLocations(namePattern = 'Test Location%') {
    const supabase = getCleanupClient();
    const { error } = await supabase.from('locations').delete().like('name', namePattern);
    if (error) {
        console.error('Failed to cleanup test locations:', error);
    }
}
async function cleanupTestSections(entityIdPattern = 'test-entity%') {
    const supabase = getCleanupClient();
    const { error } = await supabase.from('sections').delete().like('entity_id', entityIdPattern);
    if (error) {
        console.error('Failed to cleanup test sections:', error);
    }
}
async function cleanupTestContentPages(slugPattern = 'test-page%') {
    const supabase = getCleanupClient();
    const { error } = await supabase.from('content_pages').delete().like('slug', slugPattern);
    if (error) {
        console.error('Failed to cleanup test content pages:', error);
    }
}
async function cleanupTestRSVPs(guestIdPattern = 'test-guest%') {
    const supabase = getCleanupClient();
    const { error } = await supabase.from('rsvps').delete().like('guest_id', guestIdPattern);
    if (error) {
        console.error('Failed to cleanup test RSVPs:', error);
    }
}
async function cleanupById(table, id) {
    const supabase = getCleanupClient();
    const { error } = await supabase.from(table).delete().eq('id', id);
    if (error) {
        console.error(`Failed to cleanup ${table} with id ${id}:`, error);
    }
}
async function cleanupByIds(table, ids) {
    if (ids.length === 0) return;
    const supabase = getCleanupClient();
    const { error } = await supabase.from(table).delete().in('id', ids);
    if (error) {
        console.error(`Failed to cleanup ${table} with ids:`, error);
    }
}
async function cleanupAllTestData() {
    console.log('ðŸ§¹ Cleaning up all test data...');
    // Clean up in order to respect foreign key constraints
    await cleanupTestRSVPs();
    await cleanupTestGuests();
    await cleanupTestGuestGroups();
    await cleanupTestActivities();
    await cleanupTestEvents();
    await cleanupTestRoomTypes();
    await cleanupTestAccommodations();
    await cleanupTestLocations();
    await cleanupTestSections();
    await cleanupTestContentPages();
    console.log('âœ… Test data cleanup complete');
}
class CleanupTracker {
    /**
   * Track an entity for cleanup
   */ track(table, id) {
        const ids = this.entities.get(table) || [];
        ids.push(id);
        this.entities.set(table, ids);
    }
    /**
   * Track multiple entities for cleanup
   */ trackMany(table, ids) {
        const existing = this.entities.get(table) || [];
        this.entities.set(table, [
            ...existing,
            ...ids
        ]);
    }
    /**
   * Clean up all tracked entities
   */ async cleanup() {
        // Clean up in reverse order of tracking (LIFO)
        const tables = Array.from(this.entities.keys()).reverse();
        for (const table of tables){
            const ids = this.entities.get(table) || [];
            if (ids.length > 0) {
                await cleanupByIds(table, ids);
            }
        }
        this.entities.clear();
    }
    /**
   * Get all tracked entities
   */ getTracked() {
        return new Map(this.entities);
    }
    /**
   * Clear tracking without cleanup
   */ clear() {
        this.entities.clear();
    }
    constructor(){
        this.entities = new Map();
    }
}
function createCleanupTracker() {
    return new CleanupTracker();
}
async function withCleanup(fn) {
    const tracker = createCleanupTracker();
    try {
        return await fn(tracker);
    } finally{
        await tracker.cleanup();
    }
}
async function cleanupGuestSessions() {
    const supabase = getCleanupClient();
    const { error } = await supabase.from('guest_sessions').delete().neq('id', '00000000-0000-0000-0000-000000000000'); // Delete all
    if (error) {
        console.error('Failed to cleanup guest sessions:', error);
    }
}
async function cleanupMagicLinkTokens() {
    const supabase = getCleanupClient();
    const { error } = await supabase.from('magic_link_tokens').delete().neq('id', '00000000-0000-0000-0000-000000000000'); // Delete all
    if (error) {
        console.error('Failed to cleanup magic link tokens:', error);
    }
}
async function cleanupAuditLogs() {
    const supabase = getCleanupClient();
    const { error } = await supabase.from('audit_logs').delete().neq('id', '00000000-0000-0000-0000-000000000000'); // Delete all
    if (error) {
        console.error('Failed to cleanup audit logs:', error);
    }
}
async function cleanup() {
    console.log('ðŸ§¹ Running comprehensive test cleanup...');
    // Clean up in order to respect foreign key constraints
    await cleanupGuestSessions();
    await cleanupMagicLinkTokens();
    await cleanupAuditLogs();
    await cleanupTestRSVPs();
    await cleanupTestGuests();
    await cleanupTestGuestGroups();
    await cleanupTestActivities();
    await cleanupTestEvents();
    await cleanupTestRoomTypes();
    await cleanupTestAccommodations();
    await cleanupTestLocations();
    await cleanupTestSections();
    await cleanupTestContentPages();
    console.log('âœ… Comprehensive cleanup complete');
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvX190ZXN0c19fL2hlbHBlcnMvY2xlYW51cC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRlc3QgQ2xlYW51cCBVdGlsaXRpZXNcbiAqIFxuICogVXRpbGl0aWVzIGZvciBjbGVhbmluZyB1cCB0ZXN0IGRhdGEgYWZ0ZXIgdGVzdHMgcnVuLlxuICogRW5zdXJlcyB0ZXN0IGlzb2xhdGlvbiBhbmQgcHJldmVudHMgZGF0YSBsZWFrYWdlIGJldHdlZW4gdGVzdHMuXG4gKi9cblxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcblxuLyoqXG4gKiBHZXQgU3VwYWJhc2UgY2xpZW50IGZvciB0ZXN0IGNsZWFudXBcbiAqIFVzZXMgc2VydmljZSByb2xlIGtleSB0byBieXBhc3MgUkxTIGZvciBjbGVhbnVwIG9wZXJhdGlvbnNcbiAqL1xuZnVuY3Rpb24gZ2V0Q2xlYW51cENsaWVudCgpIHtcbiAgY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XG4gIGNvbnN0IHN1cGFiYXNlU2VydmljZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVk7XG4gIFxuICBpZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZVNlcnZpY2VLZXkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgU3VwYWJhc2UgY3JlZGVudGlhbHMgZm9yIHRlc3QgY2xlYW51cCcpO1xuICB9XG4gIFxuICByZXR1cm4gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZVNlcnZpY2VLZXksIHtcbiAgICBhdXRoOiB7XG4gICAgICBhdXRvUmVmcmVzaFRva2VuOiBmYWxzZSxcbiAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSxcbiAgICB9LFxuICB9KTtcbn1cblxuLyoqXG4gKiBDbGVhbiB1cCB0ZXN0IGd1ZXN0cyBieSBlbWFpbCBwYXR0ZXJuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhbnVwVGVzdEd1ZXN0cyhlbWFpbFBhdHRlcm4gPSAndGVzdC51c2VyJUBleGFtcGxlLmNvbScpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRDbGVhbnVwQ2xpZW50KCk7XG4gIFxuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdndWVzdHMnKVxuICAgIC5kZWxldGUoKVxuICAgIC5saWtlKCdlbWFpbCcsIGVtYWlsUGF0dGVybik7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY2xlYW51cCB0ZXN0IGd1ZXN0czonLCBlcnJvcik7XG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhbiB1cCB0ZXN0IGd1ZXN0IGdyb3VwcyBieSBuYW1lIHBhdHRlcm5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFudXBUZXN0R3Vlc3RHcm91cHMobmFtZVBhdHRlcm4gPSAnVGVzdCBGYW1pbHklJyk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldENsZWFudXBDbGllbnQoKTtcbiAgXG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2d1ZXN0X2dyb3VwcycpXG4gICAgLmRlbGV0ZSgpXG4gICAgLmxpa2UoJ25hbWUnLCBuYW1lUGF0dGVybik7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY2xlYW51cCB0ZXN0IGd1ZXN0IGdyb3VwczonLCBlcnJvcik7XG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhbiB1cCB0ZXN0IGV2ZW50cyBieSBuYW1lIHBhdHRlcm5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFudXBUZXN0RXZlbnRzKG5hbWVQYXR0ZXJuID0gJ1Rlc3QgRXZlbnQlJyk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldENsZWFudXBDbGllbnQoKTtcbiAgXG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2V2ZW50cycpXG4gICAgLmRlbGV0ZSgpXG4gICAgLmxpa2UoJ25hbWUnLCBuYW1lUGF0dGVybik7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY2xlYW51cCB0ZXN0IGV2ZW50czonLCBlcnJvcik7XG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhbiB1cCB0ZXN0IGFjdGl2aXRpZXMgYnkgbmFtZSBwYXR0ZXJuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhbnVwVGVzdEFjdGl2aXRpZXMobmFtZVBhdHRlcm4gPSAnVGVzdCBBY3Rpdml0eSUnKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0Q2xlYW51cENsaWVudCgpO1xuICBcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnYWN0aXZpdGllcycpXG4gICAgLmRlbGV0ZSgpXG4gICAgLmxpa2UoJ25hbWUnLCBuYW1lUGF0dGVybik7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY2xlYW51cCB0ZXN0IGFjdGl2aXRpZXM6JywgZXJyb3IpO1xuICB9XG59XG5cbi8qKlxuICogQ2xlYW4gdXAgdGVzdCBhY2NvbW1vZGF0aW9ucyBieSBuYW1lIHBhdHRlcm5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFudXBUZXN0QWNjb21tb2RhdGlvbnMobmFtZVBhdHRlcm4gPSAnVGVzdCBIb3RlbCUnKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0Q2xlYW51cENsaWVudCgpO1xuICBcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnYWNjb21tb2RhdGlvbnMnKVxuICAgIC5kZWxldGUoKVxuICAgIC5saWtlKCduYW1lJywgbmFtZVBhdHRlcm4pO1xuICBcbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNsZWFudXAgdGVzdCBhY2NvbW1vZGF0aW9uczonLCBlcnJvcik7XG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhbiB1cCB0ZXN0IHJvb20gdHlwZXMgYnkgbmFtZSBwYXR0ZXJuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhbnVwVGVzdFJvb21UeXBlcyhuYW1lUGF0dGVybiA9ICdUZXN0IFJvb20lJyk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldENsZWFudXBDbGllbnQoKTtcbiAgXG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ3Jvb21fdHlwZXMnKVxuICAgIC5kZWxldGUoKVxuICAgIC5saWtlKCduYW1lJywgbmFtZVBhdHRlcm4pO1xuICBcbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNsZWFudXAgdGVzdCByb29tIHR5cGVzOicsIGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqIENsZWFuIHVwIHRlc3QgbG9jYXRpb25zIGJ5IG5hbWUgcGF0dGVyblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xlYW51cFRlc3RMb2NhdGlvbnMobmFtZVBhdHRlcm4gPSAnVGVzdCBMb2NhdGlvbiUnKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0Q2xlYW51cENsaWVudCgpO1xuICBcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnbG9jYXRpb25zJylcbiAgICAuZGVsZXRlKClcbiAgICAubGlrZSgnbmFtZScsIG5hbWVQYXR0ZXJuKTtcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjbGVhbnVwIHRlc3QgbG9jYXRpb25zOicsIGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqIENsZWFuIHVwIHRlc3Qgc2VjdGlvbnMgYnkgZW50aXR5IElEIHBhdHRlcm5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFudXBUZXN0U2VjdGlvbnMoZW50aXR5SWRQYXR0ZXJuID0gJ3Rlc3QtZW50aXR5JScpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRDbGVhbnVwQ2xpZW50KCk7XG4gIFxuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdzZWN0aW9ucycpXG4gICAgLmRlbGV0ZSgpXG4gICAgLmxpa2UoJ2VudGl0eV9pZCcsIGVudGl0eUlkUGF0dGVybik7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY2xlYW51cCB0ZXN0IHNlY3Rpb25zOicsIGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqIENsZWFuIHVwIHRlc3QgY29udGVudCBwYWdlcyBieSBzbHVnIHBhdHRlcm5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFudXBUZXN0Q29udGVudFBhZ2VzKHNsdWdQYXR0ZXJuID0gJ3Rlc3QtcGFnZSUnKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0Q2xlYW51cENsaWVudCgpO1xuICBcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnY29udGVudF9wYWdlcycpXG4gICAgLmRlbGV0ZSgpXG4gICAgLmxpa2UoJ3NsdWcnLCBzbHVnUGF0dGVybik7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY2xlYW51cCB0ZXN0IGNvbnRlbnQgcGFnZXM6JywgZXJyb3IpO1xuICB9XG59XG5cbi8qKlxuICogQ2xlYW4gdXAgdGVzdCBSU1ZQcyBieSBndWVzdCBJRCBwYXR0ZXJuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhbnVwVGVzdFJTVlBzKGd1ZXN0SWRQYXR0ZXJuID0gJ3Rlc3QtZ3Vlc3QlJyk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldENsZWFudXBDbGllbnQoKTtcbiAgXG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ3JzdnBzJylcbiAgICAuZGVsZXRlKClcbiAgICAubGlrZSgnZ3Vlc3RfaWQnLCBndWVzdElkUGF0dGVybik7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY2xlYW51cCB0ZXN0IFJTVlBzOicsIGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqIENsZWFuIHVwIGEgc3BlY2lmaWMgZW50aXR5IGJ5IElEXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhbnVwQnlJZCh0YWJsZTogc3RyaW5nLCBpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0Q2xlYW51cENsaWVudCgpO1xuICBcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSh0YWJsZSlcbiAgICAuZGVsZXRlKClcbiAgICAuZXEoJ2lkJywgaWQpO1xuICBcbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNsZWFudXAgJHt0YWJsZX0gd2l0aCBpZCAke2lkfTpgLCBlcnJvcik7XG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhbiB1cCBtdWx0aXBsZSBlbnRpdGllcyBieSBJRHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFudXBCeUlkcyh0YWJsZTogc3RyaW5nLCBpZHM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmIChpZHMubGVuZ3RoID09PSAwKSByZXR1cm47XG4gIFxuICBjb25zdCBzdXBhYmFzZSA9IGdldENsZWFudXBDbGllbnQoKTtcbiAgXG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20odGFibGUpXG4gICAgLmRlbGV0ZSgpXG4gICAgLmluKCdpZCcsIGlkcyk7XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY2xlYW51cCAke3RhYmxlfSB3aXRoIGlkczpgLCBlcnJvcik7XG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhbiB1cCBhbGwgdGVzdCBkYXRhICh1c2Ugd2l0aCBjYXV0aW9uISlcbiAqIFRoaXMgcnVucyBhbGwgY2xlYW51cCBmdW5jdGlvbnMgaW4gdGhlIGNvcnJlY3Qgb3JkZXIgdG8gaGFuZGxlIGZvcmVpZ24ga2V5IGNvbnN0cmFpbnRzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhbnVwQWxsVGVzdERhdGEoKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnNvbGUubG9nKCfwn6e5IENsZWFuaW5nIHVwIGFsbCB0ZXN0IGRhdGEuLi4nKTtcbiAgXG4gIC8vIENsZWFuIHVwIGluIG9yZGVyIHRvIHJlc3BlY3QgZm9yZWlnbiBrZXkgY29uc3RyYWludHNcbiAgYXdhaXQgY2xlYW51cFRlc3RSU1ZQcygpO1xuICBhd2FpdCBjbGVhbnVwVGVzdEd1ZXN0cygpO1xuICBhd2FpdCBjbGVhbnVwVGVzdEd1ZXN0R3JvdXBzKCk7XG4gIGF3YWl0IGNsZWFudXBUZXN0QWN0aXZpdGllcygpO1xuICBhd2FpdCBjbGVhbnVwVGVzdEV2ZW50cygpO1xuICBhd2FpdCBjbGVhbnVwVGVzdFJvb21UeXBlcygpO1xuICBhd2FpdCBjbGVhbnVwVGVzdEFjY29tbW9kYXRpb25zKCk7XG4gIGF3YWl0IGNsZWFudXBUZXN0TG9jYXRpb25zKCk7XG4gIGF3YWl0IGNsZWFudXBUZXN0U2VjdGlvbnMoKTtcbiAgYXdhaXQgY2xlYW51cFRlc3RDb250ZW50UGFnZXMoKTtcbiAgXG4gIGNvbnNvbGUubG9nKCfinIUgVGVzdCBkYXRhIGNsZWFudXAgY29tcGxldGUnKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBjbGVhbnVwIHRyYWNrZXIgZm9yIHRyYWNraW5nIGNyZWF0ZWQgZW50aXRpZXMgZHVyaW5nIGEgdGVzdFxuICovXG5leHBvcnQgY2xhc3MgQ2xlYW51cFRyYWNrZXIge1xuICBwcml2YXRlIGVudGl0aWVzOiBNYXA8c3RyaW5nLCBzdHJpbmdbXT4gPSBuZXcgTWFwKCk7XG4gIFxuICAvKipcbiAgICogVHJhY2sgYW4gZW50aXR5IGZvciBjbGVhbnVwXG4gICAqL1xuICB0cmFjayh0YWJsZTogc3RyaW5nLCBpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgaWRzID0gdGhpcy5lbnRpdGllcy5nZXQodGFibGUpIHx8IFtdO1xuICAgIGlkcy5wdXNoKGlkKTtcbiAgICB0aGlzLmVudGl0aWVzLnNldCh0YWJsZSwgaWRzKTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIFRyYWNrIG11bHRpcGxlIGVudGl0aWVzIGZvciBjbGVhbnVwXG4gICAqL1xuICB0cmFja01hbnkodGFibGU6IHN0cmluZywgaWRzOiBzdHJpbmdbXSk6IHZvaWQge1xuICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5lbnRpdGllcy5nZXQodGFibGUpIHx8IFtdO1xuICAgIHRoaXMuZW50aXRpZXMuc2V0KHRhYmxlLCBbLi4uZXhpc3RpbmcsIC4uLmlkc10pO1xuICB9XG4gIFxuICAvKipcbiAgICogQ2xlYW4gdXAgYWxsIHRyYWNrZWQgZW50aXRpZXNcbiAgICovXG4gIGFzeW5jIGNsZWFudXAoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gQ2xlYW4gdXAgaW4gcmV2ZXJzZSBvcmRlciBvZiB0cmFja2luZyAoTElGTylcbiAgICBjb25zdCB0YWJsZXMgPSBBcnJheS5mcm9tKHRoaXMuZW50aXRpZXMua2V5cygpKS5yZXZlcnNlKCk7XG4gICAgXG4gICAgZm9yIChjb25zdCB0YWJsZSBvZiB0YWJsZXMpIHtcbiAgICAgIGNvbnN0IGlkcyA9IHRoaXMuZW50aXRpZXMuZ2V0KHRhYmxlKSB8fCBbXTtcbiAgICAgIGlmIChpZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBhd2FpdCBjbGVhbnVwQnlJZHModGFibGUsIGlkcyk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMuZW50aXRpZXMuY2xlYXIoKTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIEdldCBhbGwgdHJhY2tlZCBlbnRpdGllc1xuICAgKi9cbiAgZ2V0VHJhY2tlZCgpOiBNYXA8c3RyaW5nLCBzdHJpbmdbXT4ge1xuICAgIHJldHVybiBuZXcgTWFwKHRoaXMuZW50aXRpZXMpO1xuICB9XG4gIFxuICAvKipcbiAgICogQ2xlYXIgdHJhY2tpbmcgd2l0aG91dCBjbGVhbnVwXG4gICAqL1xuICBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLmVudGl0aWVzLmNsZWFyKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBjbGVhbnVwIHRyYWNrZXIgaW5zdGFuY2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNsZWFudXBUcmFja2VyKCk6IENsZWFudXBUcmFja2VyIHtcbiAgcmV0dXJuIG5ldyBDbGVhbnVwVHJhY2tlcigpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBydW4gYSB0ZXN0IHdpdGggYXV0b21hdGljIGNsZWFudXBcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhDbGVhbnVwPFQ+KFxuICBmbjogKHRyYWNrZXI6IENsZWFudXBUcmFja2VyKSA9PiBQcm9taXNlPFQ+XG4pOiBQcm9taXNlPFQ+IHtcbiAgY29uc3QgdHJhY2tlciA9IGNyZWF0ZUNsZWFudXBUcmFja2VyKCk7XG4gIFxuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBmbih0cmFja2VyKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBhd2FpdCB0cmFja2VyLmNsZWFudXAoKTtcbiAgfVxufVxuXG5cbi8qKlxuICogQ2xlYW4gdXAgYWxsIGd1ZXN0IHNlc3Npb25zXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhbnVwR3Vlc3RTZXNzaW9ucygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRDbGVhbnVwQ2xpZW50KCk7XG4gIFxuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdndWVzdF9zZXNzaW9ucycpXG4gICAgLmRlbGV0ZSgpXG4gICAgLm5lcSgnaWQnLCAnMDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwJyk7IC8vIERlbGV0ZSBhbGxcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjbGVhbnVwIGd1ZXN0IHNlc3Npb25zOicsIGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqIENsZWFuIHVwIGFsbCBtYWdpYyBsaW5rIHRva2Vuc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xlYW51cE1hZ2ljTGlua1Rva2VucygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRDbGVhbnVwQ2xpZW50KCk7XG4gIFxuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdtYWdpY19saW5rX3Rva2VucycpXG4gICAgLmRlbGV0ZSgpXG4gICAgLm5lcSgnaWQnLCAnMDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwJyk7IC8vIERlbGV0ZSBhbGxcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjbGVhbnVwIG1hZ2ljIGxpbmsgdG9rZW5zOicsIGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqIENsZWFuIHVwIGFsbCBhdWRpdCBsb2dzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhbnVwQXVkaXRMb2dzKCk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldENsZWFudXBDbGllbnQoKTtcbiAgXG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2F1ZGl0X2xvZ3MnKVxuICAgIC5kZWxldGUoKVxuICAgIC5uZXEoJ2lkJywgJzAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCcpOyAvLyBEZWxldGUgYWxsXG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY2xlYW51cCBhdWRpdCBsb2dzOicsIGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqIENvbXByZWhlbnNpdmUgY2xlYW51cCBmb3IgaW50ZWdyYXRpb24gdGVzdHNcbiAqIENsZWFucyBhbGwgdGVzdC1yZWxhdGVkIGRhdGEgaW4gdGhlIGNvcnJlY3Qgb3JkZXJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFudXAoKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnNvbGUubG9nKCfwn6e5IFJ1bm5pbmcgY29tcHJlaGVuc2l2ZSB0ZXN0IGNsZWFudXAuLi4nKTtcbiAgXG4gIC8vIENsZWFuIHVwIGluIG9yZGVyIHRvIHJlc3BlY3QgZm9yZWlnbiBrZXkgY29uc3RyYWludHNcbiAgYXdhaXQgY2xlYW51cEd1ZXN0U2Vzc2lvbnMoKTtcbiAgYXdhaXQgY2xlYW51cE1hZ2ljTGlua1Rva2VucygpO1xuICBhd2FpdCBjbGVhbnVwQXVkaXRMb2dzKCk7XG4gIGF3YWl0IGNsZWFudXBUZXN0UlNWUHMoKTtcbiAgYXdhaXQgY2xlYW51cFRlc3RHdWVzdHMoKTtcbiAgYXdhaXQgY2xlYW51cFRlc3RHdWVzdEdyb3VwcygpO1xuICBhd2FpdCBjbGVhbnVwVGVzdEFjdGl2aXRpZXMoKTtcbiAgYXdhaXQgY2xlYW51cFRlc3RFdmVudHMoKTtcbiAgYXdhaXQgY2xlYW51cFRlc3RSb29tVHlwZXMoKTtcbiAgYXdhaXQgY2xlYW51cFRlc3RBY2NvbW1vZGF0aW9ucygpO1xuICBhd2FpdCBjbGVhbnVwVGVzdExvY2F0aW9ucygpO1xuICBhd2FpdCBjbGVhbnVwVGVzdFNlY3Rpb25zKCk7XG4gIGF3YWl0IGNsZWFudXBUZXN0Q29udGVudFBhZ2VzKCk7XG4gIFxuICBjb25zb2xlLmxvZygn4pyFIENvbXByZWhlbnNpdmUgY2xlYW51cCBjb21wbGV0ZScpO1xufVxuIl0sIm5hbWVzIjpbIkNsZWFudXBUcmFja2VyIiwiY2xlYW51cCIsImNsZWFudXBBbGxUZXN0RGF0YSIsImNsZWFudXBBdWRpdExvZ3MiLCJjbGVhbnVwQnlJZCIsImNsZWFudXBCeUlkcyIsImNsZWFudXBHdWVzdFNlc3Npb25zIiwiY2xlYW51cE1hZ2ljTGlua1Rva2VucyIsImNsZWFudXBUZXN0QWNjb21tb2RhdGlvbnMiLCJjbGVhbnVwVGVzdEFjdGl2aXRpZXMiLCJjbGVhbnVwVGVzdENvbnRlbnRQYWdlcyIsImNsZWFudXBUZXN0RXZlbnRzIiwiY2xlYW51cFRlc3RHdWVzdEdyb3VwcyIsImNsZWFudXBUZXN0R3Vlc3RzIiwiY2xlYW51cFRlc3RMb2NhdGlvbnMiLCJjbGVhbnVwVGVzdFJTVlBzIiwiY2xlYW51cFRlc3RSb29tVHlwZXMiLCJjbGVhbnVwVGVzdFNlY3Rpb25zIiwiY3JlYXRlQ2xlYW51cFRyYWNrZXIiLCJ3aXRoQ2xlYW51cCIsImdldENsZWFudXBDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZVNlcnZpY2VLZXkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiRXJyb3IiLCJjcmVhdGVDbGllbnQiLCJhdXRoIiwiYXV0b1JlZnJlc2hUb2tlbiIsInBlcnNpc3RTZXNzaW9uIiwiZW1haWxQYXR0ZXJuIiwic3VwYWJhc2UiLCJlcnJvciIsImZyb20iLCJkZWxldGUiLCJsaWtlIiwiY29uc29sZSIsIm5hbWVQYXR0ZXJuIiwiZW50aXR5SWRQYXR0ZXJuIiwic2x1Z1BhdHRlcm4iLCJndWVzdElkUGF0dGVybiIsInRhYmxlIiwiaWQiLCJlcSIsImlkcyIsImxlbmd0aCIsImluIiwibG9nIiwidHJhY2siLCJlbnRpdGllcyIsImdldCIsInB1c2giLCJzZXQiLCJ0cmFja01hbnkiLCJleGlzdGluZyIsInRhYmxlcyIsIkFycmF5Iiwia2V5cyIsInJldmVyc2UiLCJjbGVhciIsImdldFRyYWNrZWQiLCJNYXAiLCJmbiIsInRyYWNrZXIiLCJuZXEiXSwibWFwcGluZ3MiOiJBQUFBOzs7OztDQUtDOzs7Ozs7Ozs7OztRQW1QWUE7ZUFBQUE7O1FBK0hTQztlQUFBQTs7UUFwSkFDO2VBQUFBOztRQW1JQUM7ZUFBQUE7O1FBdEtBQztlQUFBQTs7UUFnQkFDO2VBQUFBOztRQXNIQUM7ZUFBQUE7O1FBZ0JBQztlQUFBQTs7UUF0UEFDO2VBQUFBOztRQWhCQUM7ZUFBQUE7O1FBZ0ZBQztlQUFBQTs7UUFoR0FDO2VBQUFBOztRQWhCQUM7ZUFBQUE7O1FBaEJBQztlQUFBQTs7UUFnR0FDO2VBQUFBOztRQWdEQUM7ZUFBQUE7O1FBaEVBQztlQUFBQTs7UUFnQ0FDO2VBQUFBOztRQStKTkM7ZUFBQUE7O1FBT01DO2VBQUFBOzs7NEJBL1NPO0FBRTdCOzs7Q0FHQyxHQUNELFNBQVNDO0lBQ1AsTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDQyx3QkFBd0I7SUFDeEQsTUFBTUMscUJBQXFCSCxRQUFRQyxHQUFHLENBQUNHLHlCQUF5QjtJQUVoRSxJQUFJLENBQUNMLGVBQWUsQ0FBQ0ksb0JBQW9CO1FBQ3ZDLE1BQU0sSUFBSUUsTUFBTTtJQUNsQjtJQUVBLE9BQU9DLElBQUFBLHdCQUFZLEVBQUNQLGFBQWFJLG9CQUFvQjtRQUNuREksTUFBTTtZQUNKQyxrQkFBa0I7WUFDbEJDLGdCQUFnQjtRQUNsQjtJQUNGO0FBQ0Y7QUFLTyxlQUFlbEIsa0JBQWtCbUIsZUFBZSx3QkFBd0I7SUFDN0UsTUFBTUMsV0FBV2I7SUFFakIsTUFBTSxFQUFFYyxLQUFLLEVBQUUsR0FBRyxNQUFNRCxTQUNyQkUsSUFBSSxDQUFDLFVBQ0xDLE1BQU0sR0FDTkMsSUFBSSxDQUFDLFNBQVNMO0lBRWpCLElBQUlFLE9BQU87UUFDVEksUUFBUUosS0FBSyxD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