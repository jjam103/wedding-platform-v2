{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/jest.setup.js"],"sourcesContent":["import '@testing-library/jest-dom';\nimport { toHaveNoViolations } from 'jest-axe';\n\n// Polyfill fetch for Node.js test environment\nif (typeof global.fetch === 'undefined') {\n  global.fetch = jest.fn(() =>\n    Promise.resolve({\n      ok: true,\n      json: () => Promise.resolve({}),\n      text: () => Promise.resolve(''),\n      headers: new Headers(),\n      status: 200,\n      statusText: 'OK',\n    })\n  );\n}\n\n// Polyfill Request for Node.js test environment\nif (typeof global.Request === 'undefined') {\n  global.Request = class MockRequest {\n    constructor(url, options = {}) {\n      this.url = url;\n      this.method = options.method || 'GET';\n      this.headers = new Headers(options.headers);\n      this.body = options.body;\n    }\n    \n    async json() {\n      return JSON.parse(this.body || '{}');\n    }\n    \n    async text() {\n      return this.body || '';\n    }\n  };\n}\n\n// Polyfill Headers for Node.js test environment\nif (typeof global.Headers === 'undefined') {\n  global.Headers = class MockHeaders {\n    constructor(init = {}) {\n      this._headers = {};\n      if (init) {\n        Object.entries(init).forEach(([key, value]) => {\n          this._headers[key.toLowerCase()] = value;\n        });\n      }\n    }\n    \n    get(name) {\n      return this._headers[name.toLowerCase()];\n    }\n    \n    set(name, value) {\n      this._headers[name.toLowerCase()] = value;\n    }\n    \n    has(name) {\n      return name.toLowerCase() in this._headers;\n    }\n    \n    append(name, value) {\n      this._headers[name.toLowerCase()] = value;\n    }\n    \n    delete(name) {\n      delete this._headers[name.toLowerCase()];\n    }\n    \n    entries() {\n      return Object.entries(this._headers);\n    }\n    \n    keys() {\n      return Object.keys(this._headers);\n    }\n    \n    values() {\n      return Object.values(this._headers);\n    }\n  };\n}\n\n// Polyfill Response for Node.js test environment (needed for Next.js API routes)\nif (typeof global.Response === 'undefined') {\n  global.Response = class MockResponse {\n    constructor(body, init = {}) {\n      this.body = body;\n      this.status = init.status || 200;\n      this.statusText = init.statusText || 'OK';\n      this.headers = new Headers(init.headers);\n      this.ok = this.status >= 200 && this.status < 300;\n    }\n    \n    async json() {\n      if (typeof this.body === 'string') {\n        return JSON.parse(this.body);\n      }\n      return this.body;\n    }\n    \n    async text() {\n      if (typeof this.body === 'string') {\n        return this.body;\n      }\n      return JSON.stringify(this.body);\n    }\n    \n    async arrayBuffer() {\n      const text = await this.text();\n      return new TextEncoder().encode(text).buffer;\n    }\n    \n    async blob() {\n      return new Blob([await this.text()]);\n    }\n    \n    clone() {\n      return new MockResponse(this.body, {\n        status: this.status,\n        statusText: this.statusText,\n        headers: this.headers,\n      });\n    }\n    \n    // Static method for creating JSON responses (used by Next.js)\n    static json(data, init = {}) {\n      return new MockResponse(JSON.stringify(data), {\n        ...init,\n        headers: {\n          'Content-Type': 'application/json',\n          ...init.headers,\n        },\n      });\n    }\n  };\n}\n\n// Extend Jest matchers with jest-axe\nexpect.extend(toHaveNoViolations);\n\n// Mock Next.js environment extensions that cause stack overflow in property tests\njest.mock('next/dist/server/node-environment-extensions/unhandled-rejection', () => ({}), { virtual: true });\njest.mock('next/dist/server/node-environment-extensions/fast-set-immediate.external', () => ({}), { virtual: true });\n\n// Mock browser APIs not implemented in jsdom\nObject.defineProperty(window, 'scrollTo', {\n  writable: true,\n  value: jest.fn(),\n});\n\nObject.defineProperty(Element.prototype, 'scrollIntoView', {\n  writable: true,\n  value: jest.fn(),\n});\n\n// Set up mock environment variables for tests if not already set\n// This allows unit tests to run without real Supabase credentials\nif (!process.env.NEXT_PUBLIC_SUPABASE_URL) {\n  process.env.NEXT_PUBLIC_SUPABASE_URL = 'https://mock-supabase-url.supabase.co';\n}\nif (!process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY) {\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = 'mock-anon-key-for-testing';\n}\n"],"names":["jest","mock","virtual","global","fetch","fn","Promise","resolve","ok","json","text","headers","Headers","status","statusText","Request","MockRequest","url","options","method","body","JSON","parse","MockHeaders","init","_headers","Object","entries","forEach","key","value","toLowerCase","get","name","set","has","append","delete","keys","values","Response","MockResponse","stringify","arrayBuffer","TextEncoder","encode","buffer","blob","Blob","clone","data","expect","extend","toHaveNoViolations","defineProperty","window","writable","Element","prototype","process","env","NEXT_PUBLIC_SUPABASE_URL","NEXT_PUBLIC_SUPABASE_ANON_KEY"],"mappings":"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"}