{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/__tests__/helpers/factories.ts"],"sourcesContent":["/**\n * Test Data Factories\n * \n * Factory functions for creating test data with sensible defaults.\n * Follows the factory pattern to reduce test boilerplate and ensure consistency.\n */\n\nimport type { \n  Guest, \n  GuestGroup, \n  Event, \n  Activity, \n  Accommodation,\n  RoomType,\n  Location,\n  Section,\n  ContentPage,\n  RSVP\n} from '@/types';\n\n/**\n * Create a test guest with optional overrides\n */\nexport function createTestGuest(overrides: Partial<Guest> = {}): Guest {\n  const timestamp = Date.now();\n  return {\n    id: `test-guest-${timestamp}`,\n    firstName: 'Test',\n    lastName: 'User',\n    email: `test.user.${timestamp}@example.com`,\n    groupId: 'test-group-id',\n    ageType: 'adult',\n    guestType: 'wedding_guest',\n    dietaryRestrictions: null,\n    notes: null,\n    plusOneAllowed: false,\n    plusOneName: null,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    ...overrides,\n  };\n}\n\n/**\n * Create a test guest group with optional overrides\n */\nexport function createTestGuestGroup(overrides: Partial<GuestGroup> = {}): GuestGroup {\n  const timestamp = Date.now();\n  return {\n    id: `test-group-${timestamp}`,\n    name: `Test Family ${timestamp}`,\n    description: 'Test family group for automated testing',\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    ...overrides,\n  };\n}\n\n/**\n * Create a test event with optional overrides\n */\nexport function createTestEvent(overrides: Partial<Event> = {}): Event {\n  const timestamp = Date.now();\n  return {\n    id: `test-event-${timestamp}`,\n    name: `Test Event ${timestamp}`,\n    description: 'Test event for automated testing',\n    startDate: new Date(Date.now() + 86400000).toISOString(), // Tomorrow\n    endDate: new Date(Date.now() + 172800000).toISOString(), // Day after tomorrow\n    locationId: null,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    ...overrides,\n  };\n}\n\n/**\n * Create a test activity with optional overrides\n */\nexport function createTestActivity(overrides: Partial<Activity> = {}): Activity {\n  const timestamp = Date.now();\n  return {\n    id: `test-activity-${timestamp}`,\n    name: `Test Activity ${timestamp}`,\n    description: 'Test activity for automated testing',\n    eventId: 'test-event-id',\n    activityType: 'activity',\n    startTime: new Date(Date.now() + 86400000).toISOString(),\n    endTime: new Date(Date.now() + 90000000).toISOString(),\n    locationId: null,\n    capacity: 50,\n    adultsOnly: false,\n    plusOnesAllowed: true,\n    costPerGuest: 0,\n    hostSubsidy: 0,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    ...overrides,\n  };\n}\n\n/**\n * Create a test activity with RSVP data for guest view\n */\nexport function createMockActivity(overrides: Partial<Activity & {\n  rsvpStatus?: 'attending' | 'declined' | 'maybe' | 'pending';\n  capacityRemaining?: number;\n  netCost?: number;\n}> = {}): Activity & {\n  rsvpStatus?: 'attending' | 'declined' | 'maybe' | 'pending';\n  capacityRemaining?: number;\n  netCost?: number;\n} {\n  const activity = createTestActivity(overrides);\n  return {\n    ...activity,\n    rsvpStatus: overrides.rsvpStatus || 'pending',\n    capacityRemaining: overrides.capacityRemaining !== undefined ? overrides.capacityRemaining : 25,\n    netCost: overrides.netCost !== undefined ? overrides.netCost : 0,\n  };\n}\n\n/**\n * Create a test accommodation with optional overrides\n */\nexport function createTestAccommodation(overrides: Partial<Accommodation> = {}): Accommodation {\n  const timestamp = Date.now();\n  return {\n    id: `test-accommodation-${timestamp}`,\n    name: `Test Hotel ${timestamp}`,\n    description: 'Test accommodation for automated testing',\n    locationId: null,\n    address: '123 Test Street',\n    checkInDate: new Date(Date.now() + 86400000).toISOString(),\n    checkOutDate: new Date(Date.now() + 259200000).toISOString(), // 3 days later\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    ...overrides,\n  };\n}\n\n/**\n * Create a test room type with optional overrides\n */\nexport function createTestRoomType(overrides: Partial<RoomType> = {}): RoomType {\n  const timestamp = Date.now();\n  return {\n    id: `test-room-type-${timestamp}`,\n    accommodationId: 'test-accommodation-id',\n    name: `Test Room ${timestamp}`,\n    description: 'Test room type for automated testing',\n    capacity: 2,\n    totalRooms: 10,\n    pricePerNight: 100,\n    hostSubsidy: 0,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    ...overrides,\n  };\n}\n\n/**\n * Create a test location with optional overrides\n */\nexport function createTestLocation(overrides: Partial<Location> = {}): Location {\n  const timestamp = Date.now();\n  return {\n    id: `test-location-${timestamp}`,\n    name: `Test Location ${timestamp}`,\n    type: 'venue',\n    parentId: null,\n    description: 'Test location for automated testing',\n    address: '123 Test Street',\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    ...overrides,\n  };\n}\n\n/**\n * Create a test section with optional overrides\n */\nexport function createTestSection(overrides: Partial<Section> = {}): Section {\n  const timestamp = Date.now();\n  return {\n    id: `test-section-${timestamp}`,\n    entityType: 'event',\n    entityId: 'test-entity-id',\n    position: 0,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    ...overrides,\n  };\n}\n\n/**\n * Create a test content page with optional overrides\n */\nexport function createTestContentPage(overrides: Partial<ContentPage> = {}): ContentPage {\n  const timestamp = Date.now();\n  return {\n    id: `test-page-${timestamp}`,\n    title: `Test Page ${timestamp}`,\n    slug: `test-page-${timestamp}`,\n    type: 'custom',\n    published: false,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    ...overrides,\n  };\n}\n\n/**\n * Create a test RSVP with optional overrides\n */\nexport function createTestRSVP(overrides: Partial<RSVP> = {}): RSVP {\n  const timestamp = Date.now();\n  return {\n    id: `test-rsvp-${timestamp}`,\n    guestId: 'test-guest-id',\n    eventId: 'test-event-id',\n    activityId: null,\n    status: 'pending',\n    guestCount: 1,\n    dietaryRestrictions: null,\n    notes: null,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    ...overrides,\n  };\n}\n\n/**\n * Create multiple test guests at once\n */\nexport function createTestGuests(count: number, overrides: Partial<Guest> = {}): Guest[] {\n  return Array.from({ length: count }, (_, i) => \n    createTestGuest({ \n      firstName: `Test${i}`,\n      lastName: `User${i}`,\n      email: `test.user${i}.${Date.now()}@example.com`,\n      ...overrides \n    })\n  );\n}\n\n/**\n * Create multiple test guest groups at once\n */\nexport function createTestGuestGroups(count: number, overrides: Partial<GuestGroup> = {}): GuestGroup[] {\n  return Array.from({ length: count }, (_, i) => \n    createTestGuestGroup({ \n      name: `Test Family ${i} ${Date.now()}`,\n      ...overrides \n    })\n  );\n}\n\n/**\n * Create a complete test scenario with related entities\n */\nexport interface TestScenario {\n  group: GuestGroup;\n  guests: Guest[];\n  event: Event;\n  activities: Activity[];\n  rsvps: RSVP[];\n}\n\nexport function createTestScenario(options: {\n  guestCount?: number;\n  activityCount?: number;\n} = {}): TestScenario {\n  const { guestCount = 3, activityCount = 2 } = options;\n  \n  const group = createTestGuestGroup();\n  const event = createTestEvent();\n  \n  const guests = createTestGuests(guestCount, { groupId: group.id });\n  const activities = Array.from({ length: activityCount }, (_, i) => \n    createTestActivity({ \n      eventId: event.id,\n      name: `Test Activity ${i}`,\n    })\n  );\n  \n  const rsvps = guests.flatMap(guest => \n    activities.map(activity => \n      createTestRSVP({\n        guestId: guest.id,\n        eventId: event.id,\n        activityId: activity.id,\n      })\n    )\n  );\n  \n  return { group, guests, event, activities, rsvps };\n}\n\n/**\n * Create test data with XSS payloads for security testing\n */\nexport function createXSSPayloads(): string[] {\n  return [\n    '<script>alert(\"xss\")</script>',\n    '<img src=x onerror=alert(1)>',\n    'javascript:alert(1)',\n    '<svg onload=alert(1)>',\n    '<iframe src=\"javascript:alert(1)\">',\n    '\"><script>alert(String.fromCharCode(88,83,83))</script>',\n    '<body onload=alert(1)>',\n    '<input onfocus=alert(1) autofocus>',\n  ];\n}\n\n/**\n * Create test data with SQL injection payloads for security testing\n */\nexport function createSQLInjectionPayloads(): string[] {\n  return [\n    \"'; DROP TABLE guests; --\",\n    \"1' OR '1'='1\",\n    \"admin'--\",\n    \"' UNION SELECT * FROM users--\",\n    \"1; DELETE FROM guests WHERE '1'='1\",\n  ];\n}\n"],"names":["createMockActivity","createSQLInjectionPayloads","createTestAccommodation","createTestActivity","createTestContentPage","createTestEvent","createTestGuest","createTestGuestGroup","createTestGuestGroups","createTestGuests","createTestLocation","createTestRSVP","createTestRoomType","createTestScenario","createTestSection","createXSSPayloads","overrides","timestamp","Date","now","id","firstName","lastName","email","groupId","ageType","guestType","dietaryRestrictions","notes","plusOneAllowed","plusOneName","createdAt","toISOString","updatedAt","name","description","startDate","endDate","locationId","eventId","activityType","startTime","endTime","capacity","adultsOnly","plusOnesAllowed","costPerGuest","hostSubsidy","activity","rsvpStatus","capacityRemaining","undefined","netCost","address","checkInDate","checkOutDate","accommodationId","totalRooms","pricePerNight","type","parentId","entityType","entityId","position","title","slug","published","guestId","activityId","status","guestCount","count","Array","from","length","_","i","options","activityCount","group","event","guests","activities","rsvps","flatMap","guest","map"],"mappings":"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"}