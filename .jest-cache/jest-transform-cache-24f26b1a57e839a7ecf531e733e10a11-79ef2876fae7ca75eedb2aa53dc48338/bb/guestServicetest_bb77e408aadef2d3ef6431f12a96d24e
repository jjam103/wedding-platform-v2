92e680228b4f651475feeff1f2544595
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
const _guestService = /*#__PURE__*/ _interop_require_wildcard(require("./guestService"));
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Mock Supabase before importing guestService
const mockFrom = _globals.jest.fn();
_globals.jest.mock('@/lib/supabase', ()=>({
        supabase: {
            from: mockFrom
        }
    }));
// Helper to create properly typed mock chains
function mockSupabaseChain(chain) {
    return chain;
}
(0, _globals.describe)('guestService', ()=>{
    (0, _globals.beforeEach)(()=>{
        _globals.jest.clearAllMocks();
    });
    (0, _globals.describe)('create', ()=>{
        const validData = {
            firstName: 'John',
            lastName: 'Doe',
            email: 'john@example.com',
            groupId: '123e4567-e89b-12d3-a456-426614174000',
            ageType: 'adult',
            guestType: 'wedding_guest'
        };
        (0, _globals.it)('should return success with guest data when valid input provided', async ()=>{
            const mockGuest = {
                id: 'guest-1',
                group_id: validData.groupId,
                first_name: validData.firstName,
                last_name: validData.lastName,
                email: validData.email,
                phone: null,
                age_type: validData.ageType,
                guest_type: validData.guestType,
                dietary_restrictions: null,
                plus_one_name: null,
                plus_one_attending: false,
                arrival_date: null,
                departure_date: null,
                airport_code: null,
                flight_number: null,
                invitation_sent: false,
                invitation_sent_date: null,
                rsvp_deadline: null,
                notes: null,
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: mockGuest,
                error: null
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockInsert = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            mockFrom.mockReturnValue({
                insert: mockInsert
            });
            const result = await _guestService.create(validData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.id).toBe('guest-1');
                (0, _globals.expect)(result.data.firstName).toBe('John');
                (0, _globals.expect)(result.data.lastName).toBe('Doe');
                (0, _globals.expect)(result.data.email).toBe('john@example.com');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when firstName is missing', async ()=>{
            const invalidData = {
                ...validData,
                firstName: ''
            };
            const result = await _guestService.create(invalidData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when email is invalid', async ()=>{
            const invalidData = {
                ...validData,
                email: 'invalid-email'
            };
            const result = await _guestService.create(invalidData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when groupId is not a valid UUID', async ()=>{
            const invalidData = {
                ...validData,
                groupId: 'not-a-uuid'
            };
            const result = await _guestService.create(invalidData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        (0, _globals.it)('should return DATABASE_ERROR when insert fails', async ()=>{
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    message: 'Connection failed',
                    code: 'DB_ERROR'
                }
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockInsert = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            mockFrom.mockReturnValue({
                insert: mockInsert
            });
            const result = await _guestService.create(validData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('DATABASE_ERROR');
            }
        });
        (0, _globals.it)('should sanitize input to prevent XSS attacks', async ()=>{
            const maliciousData = {
                ...validData,
                firstName: '<script>alert("xss")</script>John',
                notes: '<img src=x onerror=alert(1)>'
            };
            const mockGuest = {
                id: 'guest-1',
                group_id: validData.groupId,
                first_name: 'John',
                last_name: validData.lastName,
                email: validData.email,
                phone: null,
                age_type: validData.ageType,
                guest_type: validData.guestType,
                dietary_restrictions: null,
                plus_one_name: null,
                plus_one_attending: false,
                arrival_date: null,
                departure_date: null,
                airport_code: null,
                flight_number: null,
                invitation_sent: false,
                invitation_sent_date: null,
                rsvp_deadline: null,
                notes: '',
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: mockGuest,
                error: null
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockInsert = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            mockFrom.mockReturnValue({
                insert: mockInsert
            });
            const result = await _guestService.create(maliciousData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.firstName).not.toContain('<script>');
                (0, _globals.expect)(result.data.firstName).not.toContain('alert');
                (0, _globals.expect)(result.data.notes).not.toContain('<img');
                (0, _globals.expect)(result.data.notes).not.toContain('onerror');
            }
        });
    });
    (0, _globals.describe)('get', ()=>{
        const validId = '123e4567-e89b-12d3-a456-426614174000';
        (0, _globals.it)('should return guest when valid ID provided', async ()=>{
            const mockGuest = {
                id: validId,
                group_id: '123e4567-e89b-12d3-a456-426614174000',
                first_name: 'John',
                last_name: 'Doe',
                email: 'john@example.com',
                phone: null,
                age_type: 'adult',
                guest_type: 'wedding_guest',
                dietary_restrictions: null,
                plus_one_name: null,
                plus_one_attending: false,
                arrival_date: null,
                departure_date: null,
                airport_code: null,
                flight_number: null,
                invitation_sent: false,
                invitation_sent_date: null,
                rsvp_deadline: null,
                notes: null,
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: mockGuest,
                error: null
            });
            const mockEq = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValue({
                select: mockSelect
            });
            const result = await _guestService.get(validId);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.id).toBe(validId);
                (0, _globals.expect)(result.data.firstName).toBe('John');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when ID is not a valid UUID', async ()=>{
            const result = await _guestService.get('invalid-id');
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        (0, _globals.it)('should return NOT_FOUND when guest does not exist', async ()=>{
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    code: 'PGRST116',
                    message: 'Not found'
                }
            });
            const mockEq = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValue({
                select: mockSelect
            });
            const result = await _guestService.get('123e4567-e89b-12d3-a456-426614174000');
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('NOT_FOUND');
            }
        });
    });
    (0, _globals.describe)('update', ()=>{
        const validId = '123e4567-e89b-12d3-a456-426614174000';
        const updateData = {
            firstName: 'Jane',
            email: 'jane@example.com'
        };
        (0, _globals.it)('should return updated guest when valid data provided', async ()=>{
            const mockGuest = {
                id: validId,
                group_id: '123e4567-e89b-12d3-a456-426614174000',
                first_name: 'Jane',
                last_name: 'Doe',
                email: 'jane@example.com',
                phone: null,
                age_type: 'adult',
                guest_type: 'wedding_guest',
                dietary_restrictions: null,
                plus_one_name: null,
                plus_one_attending: false,
                arrival_date: null,
                departure_date: null,
                airport_code: null,
                flight_number: null,
                invitation_sent: false,
                invitation_sent_date: null,
                rsvp_deadline: null,
                notes: null,
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: mockGuest,
                error: null
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockEq = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            const mockUpdate = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValue({
                update: mockUpdate
            });
            const result = await _guestService.update(validId, updateData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.firstName).toBe('Jane');
                (0, _globals.expect)(result.data.email).toBe('jane@example.com');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when ID is invalid', async ()=>{
            const result = await _guestService.update('invalid-id', updateData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        (0, _globals.it)('should return NOT_FOUND when guest does not exist', async ()=>{
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    code: 'PGRST116',
                    message: 'Not found'
                }
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockEq = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            const mockUpdate = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValue({
                update: mockUpdate
            });
            const result = await _guestService.update(validId, updateData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('NOT_FOUND');
            }
        });
        (0, _globals.it)('should sanitize updated fields', async ()=>{
            const maliciousUpdate = {
                firstName: '<script>alert("xss")</script>Jane',
                notes: 'javascript:alert(1)'
            };
            const mockGuest = {
                id: validId,
                group_id: '123e4567-e89b-12d3-a456-426614174000',
                first_name: 'Jane',
                last_name: 'Doe',
                email: 'jane@example.com',
                phone: null,
                age_type: 'adult',
                guest_type: 'wedding_guest',
                dietary_restrictions: null,
                plus_one_name: null,
                plus_one_attending: false,
                arrival_date: null,
                departure_date: null,
                airport_code: null,
                flight_number: null,
                invitation_sent: false,
                invitation_sent_date: null,
                rsvp_deadline: null,
                notes: 'javascriptalert1',
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: mockGuest,
                error: null
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockEq = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            const mockUpdate = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValue({
                update: mockUpdate
            });
            const result = await _guestService.update(validId, maliciousUpdate);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.firstName).not.toContain('<script>');
                (0, _globals.expect)(result.data.notes).not.toContain('javascript:');
            }
        });
    });
    (0, _globals.describe)('deleteGuest', ()=>{
        (0, _globals.it)('should return success when guest is deleted', async ()=>{
            const mockEq = _globals.jest.fn().mockResolvedValue({
                error: null
            });
            const mockDelete = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValue({
                delete: mockDelete
            });
            const result = await _guestService.deleteGuest('123e4567-e89b-12d3-a456-426614174000');
            (0, _globals.expect)(result.success).toBe(true);
        });
        (0, _globals.it)('should return VALIDATION_ERROR when ID is invalid', async ()=>{
            const result = await _guestService.deleteGuest('invalid-id');
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        (0, _globals.it)('should return DATABASE_ERROR when delete fails', async ()=>{
            const mockEq = _globals.jest.fn().mockResolvedValue({
                error: {
                    message: 'Delete failed',
                    code: 'DB_ERROR'
                }
            });
            const mockDelete = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValue({
                delete: mockDelete
            });
            const result = await _guestService.deleteGuest('123e4567-e89b-12d3-a456-426614174000');
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('DATABASE_ERROR');
            }
        });
    });
    (0, _globals.describe)('list', ()=>{
        (0, _globals.it)('should return paginated guest list', async ()=>{
            const mockGuests = [
                {
                    id: 'guest-1',
                    group_id: '123e4567-e89b-12d3-a456-426614174000',
                    first_name: 'Alice',
                    last_name: 'Anderson',
                    email: 'alice@example.com',
                    phone: null,
                    age_type: 'adult',
                    guest_type: 'wedding_guest',
                    dietary_restrictions: null,
                    plus_one_name: null,
                    plus_one_attending: false,
                    arrival_date: null,
                    departure_date: null,
                    airport_code: null,
                    flight_number: null,
                    invitation_sent: false,
                    invitation_sent_date: null,
                    rsvp_deadline: null,
                    notes: null,
                    created_at: '2024-01-01T00:00:00Z',
                    updated_at: '2024-01-01T00:00:00Z'
                },
                {
                    id: 'guest-2',
                    group_id: '123e4567-e89b-12d3-a456-426614174000',
                    first_name: 'Bob',
                    last_name: 'Brown',
                    email: 'bob@example.com',
                    phone: null,
                    age_type: 'adult',
                    guest_type: 'wedding_guest',
                    dietary_restrictions: null,
                    plus_one_name: null,
                    plus_one_attending: false,
                    arrival_date: null,
                    departure_date: null,
                    airport_code: null,
                    flight_number: null,
                    invitation_sent: false,
                    invitation_sent_date: null,
                    rsvp_deadline: null,
                    notes: null,
                    created_at: '2024-01-01T00:00:00Z',
                    updated_at: '2024-01-01T00:00:00Z'
                }
            ];
            const mockOrder2 = _globals.jest.fn().mockResolvedValue({
                data: mockGuests,
                error: null,
                count: 2
            });
            const mockOrder1 = _globals.jest.fn().mockReturnValue({
                order: mockOrder2
            });
            const mockRange = _globals.jest.fn().mockReturnValue({
                order: mockOrder1
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                range: mockRange
            });
            mockFrom.mockReturnValue({
                select: mockSelect
            });
            const result = await _guestService.list({});
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.guests).toHaveLength(2);
                (0, _globals.expect)(result.data.total).toBe(2);
                (0, _globals.expect)(result.data.page).toBe(1);
                (0, _globals.expect)(result.data.pageSize).toBe(50);
            }
        });
        (0, _globals.it)('should filter by groupId', async ()=>{
            const mockOrder2 = _globals.jest.fn().mockResolvedValue({
                data: [],
                error: null,
                count: 0
            });
            const mockOrder1 = _globals.jest.fn().mockReturnValue({
                order: mockOrder2
            });
            const mockRange = _globals.jest.fn().mockReturnValue({
                order: mockOrder1
            });
            const mockEq = _globals.jest.fn().mockReturnValue({
                range: mockRange
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValue({
                select: mockSelect
            });
            const result = await _guestService.list({
                groupId: '123e4567-e89b-12d3-a456-426614174000'
            });
            (0, _globals.expect)(result.success).toBe(true);
        });
        (0, _globals.it)('should return VALIDATION_ERROR for invalid filters', async ()=>{
            const result = await _guestService.list({
                groupId: 'invalid-uuid'
            });
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
    });
    (0, _globals.describe)('search', ()=>{
        (0, _globals.it)('should return search results', async ()=>{
            const mockGuests = [
                {
                    id: 'guest-1',
                    group_id: '123e4567-e89b-12d3-a456-426614174000',
                    first_name: 'John',
                    last_name: 'Doe',
                    email: 'john@example.com',
                    phone: null,
                    age_type: 'adult',
                    guest_type: 'wedding_guest',
                    dietary_restrictions: null,
                    plus_one_name: null,
                    plus_one_attending: false,
                    arrival_date: null,
                    departure_date: null,
                    airport_code: null,
                    flight_number: null,
                    invitation_sent: false,
                    invitation_sent_date: null,
                    rsvp_deadline: null,
                    notes: null,
                    created_at: '2024-01-01T00:00:00Z',
                    updated_at: '2024-01-01T00:00:00Z'
                }
            ];
            const mockOrder2 = _globals.jest.fn().mockResolvedValue({
                data: mockGuests,
                error: null,
                count: 1
            });
            const mockOrder1 = _globals.jest.fn().mockReturnValue({
                order: mockOrder2
            });
            const mockRange = _globals.jest.fn().mockReturnValue({
                order: mockOrder1
            });
            const mockOr = _globals.jest.fn().mockReturnValue({
                range: mockRange
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                or: mockOr
            });
            mockFrom.mockReturnValue({
                select: mockSelect
            });
            const result = await _guestService.search({
                query: 'John'
            });
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.guests).toHaveLength(1);
                (0, _globals.expect)(result.data.guests[0].firstName).toBe('John');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when query is empty', async ()=>{
            const result = await _guestService.search({
                query: ''
            });
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        (0, _globals.it)('should sanitize search query to prevent SQL injection', async ()=>{
            const maliciousQuery = "'; DROP TABLE guests; --";
            const mockOrder2 = _globals.jest.fn().mockResolvedValue({
                data: [],
                error: null,
                count: 0
            });
            const mockOrder1 = _globals.jest.fn().mockReturnValue({
                order: mockOrder2
            });
            const mockRange = _globals.jest.fn().mockReturnValue({
                order: mockOrder1
            });
            const mockOr = _globals.jest.fn().mockReturnValue({
                range: mockRange
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                or: mockOr
            });
            mockFrom.mockReturnValue({
                select: mockSelect
            });
            const result = await _guestService.search({
                query: maliciousQuery
            });
            (0, _globals.expect)(result.success).toBe(true);
        // The query should be sanitized and not cause issues
        });
    });
    (0, _globals.describe)('bulkUpdate', ()=>{
        const validIds = [
            '123e4567-e89b-12d3-a456-426614174000',
            '223e4567-e89b-12d3-a456-426614174000',
            '323e4567-e89b-12d3-a456-426614174000'
        ];
        const updateData = {
            invitationSent: true,
            invitationSentDate: '2025-01-25'
        };
        (0, _globals.it)('should return success with updated guests when valid data provided', async ()=>{
            const mockGuests = validIds.map((id, index)=>({
                    id,
                    group_id: '123e4567-e89b-12d3-a456-426614174000',
                    first_name: `Guest${index + 1}`,
                    last_name: 'Doe',
                    email: `guest${index + 1}@example.com`,
                    phone: null,
                    age_type: 'adult',
                    guest_type: 'wedding_guest',
                    dietary_restrictions: null,
                    plus_one_name: null,
                    plus_one_attending: false,
                    arrival_date: null,
                    departure_date: null,
                    airport_code: null,
                    flight_number: null,
                    invitation_sent: true,
                    invitation_sent_date: '2025-01-25',
                    rsvp_deadline: null,
                    notes: null,
                    created_at: '2024-01-01T00:00:00Z',
                    updated_at: '2024-01-01T00:00:00Z'
                }));
            const mockSelect = _globals.jest.fn().mockResolvedValue({
                data: mockGuests,
                error: null
            });
            const mockIn = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            const mockUpdate = _globals.jest.fn().mockReturnValue({
                in: mockIn
            });
            mockFrom.mockReturnValue({
                update: mockUpdate
            });
            const result = await _guestService.bulkUpdate(validIds, updateData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data).toHaveLength(3);
                (0, _globals.expect)(result.data[0].invitationSent).toBe(true);
                (0, _globals.expect)(result.data[1].invitationSent).toBe(true);
                (0, _globals.expect)(result.data[2].invitationSent).toBe(true);
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when IDs array is empty', async ()=>{
            const result = await _guestService.bulkUpdate([], updateData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
                (0, _globals.expect)(result.error.message).toContain('must not be empty');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when any ID is invalid', async ()=>{
            const invalidIds = [
                ...validIds,
                'invalid-id'
            ];
            const result = await _guestService.bulkUpdate(invalidIds, updateData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
                (0, _globals.expect)(result.error.message).toContain('Invalid guest ID format');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when update data is invalid', async ()=>{
            const invalidData = {
                email: 'not-an-email'
            };
            const result = await _guestService.bulkUpdate(validIds, invalidData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        (0, _globals.it)('should sanitize input fields using same logic as single update', async ()=>{
            const maliciousData = {
                firstName: '<script>alert("xss")</script>Jane',
                notes: 'javascript:alert(1)'
            };
            const mockGuests = validIds.map((id, index)=>({
                    id,
                    group_id: '123e4567-e89b-12d3-a456-426614174000',
                    first_name: 'Jane',
                    last_name: 'Doe',
                    email: `guest${index + 1}@example.com`,
                    phone: null,
                    age_type: 'adult',
                    guest_type: 'wedding_guest',
                    dietary_restrictions: null,
                    plus_one_name: null,
                    plus_one_attending: false,
                    arrival_date: null,
                    departure_date: null,
                    airport_code: null,
                    flight_number: null,
                    invitation_sent: false,
                    invitation_sent_date: null,
                    rsvp_deadline: null,
                    notes: 'javascriptalert1',
                    created_at: '2024-01-01T00:00:00Z',
                    updated_at: '2024-01-01T00:00:00Z'
                }));
            const mockSelect = _globals.jest.fn().mockResolvedValue({
                data: mockGuests,
                error: null
            });
            const mockIn = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            const mockUpdate = _globals.jest.fn().mockReturnValue({
                in: mockIn
            });
            mockFrom.mockReturnValue({
                update: mockUpdate
            });
            const result = await _guestService.bulkUpdate(validIds, maliciousData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                result.data.forEach((guest)=>{
                    (0, _globals.expect)(guest.firstName).not.toContain('<script>');
                    (0, _globals.expect)(guest.notes).not.toContain('javascript:');
                });
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when not all guests are updated', async ()=>{
            // Simulate only 2 guests being updated when 3 were requested
            const mockGuests = validIds.slice(0, 2).map((id, index)=>({
                    id,
                    group_id: '123e4567-e89b-12d3-a456-426614174000',
                    first_name: `Guest${index + 1}`,
                    last_name: 'Doe',
                    email: `guest${index + 1}@example.com`,
                    phone: null,
                    age_type: 'adult',
                    guest_type: 'wedding_guest',
                    dietary_restrictions: null,
                    plus_one_name: null,
                    plus_one_attending: false,
                    arrival_date: null,
                    departure_date: null,
                    airport_code: null,
                    flight_number: null,
                    invitation_sent: true,
                    invitation_sent_date: '2025-01-25',
                    rsvp_deadline: null,
                    notes: null,
                    created_at: '2024-01-01T00:00:00Z',
                    updated_at: '2024-01-01T00:00:00Z'
                }));
            const mockSelect = _globals.jest.fn().mockResolvedValue({
                data: mockGuests,
                error: null
            });
            const mockIn = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            const mockUpdate = _globals.jest.fn().mockReturnValue({
                in: mockIn
            });
            mockFrom.mockReturnValue({
                update: mockUpdate
            });
            const result = await _guestService.bulkUpdate(validIds, updateData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
                (0, _globals.expect)(result.error.message).toContain('Expected to update 3 guests');
            }
        });
        (0, _globals.it)('should return DATABASE_ERROR when update fails', async ()=>{
            const mockSelect = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    message: 'Update failed',
                    code: 'DB_ERROR'
                }
            });
            const mockIn = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            const mockUpdate = _globals.jest.fn().mockReturnValue({
                in: mockIn
            });
            mockFrom.mockReturnValue({
                update: mockUpdate
            });
            const result = await _guestService.bulkUpdate(validIds, updateData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('DATABASE_ERROR');
            }
        });
    });
    (0, _globals.describe)('bulkDelete', ()=>{
        const validIds = [
            '123e4567-e89b-12d3-a456-426614174000',
            '223e4567-e89b-12d3-a456-426614174000',
            '323e4567-e89b-12d3-a456-426614174000'
        ];
        (0, _globals.it)('should return success when guests are deleted', async ()=>{
            const mockIn = _globals.jest.fn().mockResolvedValue({
                error: null,
                count: 3
            });
            const mockDelete = _globals.jest.fn().mockReturnValue({
                in: mockIn
            });
            mockFrom.mockReturnValue({
                delete: mockDelete
            });
            const result = await _guestService.bulkDelete(validIds);
            (0, _globals.expect)(result.success).toBe(true);
        });
        (0, _globals.it)('should return VALIDATION_ERROR when IDs array is empty', async ()=>{
            const result = await _guestService.bulkDelete([]);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
                (0, _globals.expect)(result.error.message).toContain('must not be empty');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when any ID is invalid', async ()=>{
            const invalidIds = [
                ...validIds,
                'invalid-id'
            ];
            const result = await _guestService.bulkDelete(invalidIds);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
                (0, _globals.expect)(result.error.message).toContain('Invalid guest ID format');
            }
        });
        (0, _globals.it)('should return DATABASE_ERROR when delete fails', async ()=>{
            const mockIn = _globals.jest.fn().mockResolvedValue({
                error: {
                    message: 'Delete failed',
                    code: 'DB_ERROR'
                },
                count: null
            });
            const mockDelete = _globals.jest.fn().mockReturnValue({
                in: mockIn
            });
            mockFrom.mockReturnValue({
                delete: mockDelete
            });
            const result = await _guestService.bulkDelete(validIds);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('DATABASE_ERROR');
            }
        });
        (0, _globals.it)('should succeed even if some IDs do not exist', async ()=>{
            // Supabase doesn't error if some IDs don't exist, it just deletes what exists
            const mockIn = _globals.jest.fn().mockResolvedValue({
                error: null,
                count: 2
            });
            const mockDelete = _globals.jest.fn().mockReturnValue({
                in: mockIn
            });
            mockFrom.mockReturnValue({
                delete: mockDelete
            });
            const result = await _guestService.bulkDelete(validIds);
            (0, _globals.expect)(result.success).toBe(true);
        // This is acceptable behavior for bulk delete
        });
    });
    (0, _globals.describe)('bulkCreate', ()=>{
        const validGuestsData = [
            {
                firstName: 'John',
                lastName: 'Doe',
                email: 'john@example.com',
                groupId: '123e4567-e89b-12d3-a456-426614174000',
                ageType: 'adult',
                guestType: 'wedding_guest'
            },
            {
                firstName: 'Jane',
                lastName: 'Smith',
                email: 'jane@example.com',
                groupId: '123e4567-e89b-12d3-a456-426614174000',
                ageType: 'adult',
                guestType: 'wedding_guest'
            }
        ];
        (0, _globals.it)('should return success with created guests when valid data provided', async ()=>{
            const mockGuests = validGuestsData.map((guest, index)=>({
                    id: `guest-${index + 1}`,
                    group_id: guest.groupId,
                    first_name: guest.firstName,
                    last_name: guest.lastName,
                    email: guest.email,
                    phone: null,
                    age_type: guest.ageType,
                    guest_type: guest.guestType,
                    dietary_restrictions: null,
                    plus_one_name: null,
                    plus_one_attending: false,
                    arrival_date: null,
                    departure_date: null,
                    airport_code: null,
                    flight_number: null,
                    invitation_sent: false,
                    invitation_sent_date: null,
                    rsvp_deadline: null,
                    notes: null,
                    created_at: '2024-01-01T00:00:00Z',
                    updated_at: '2024-01-01T00:00:00Z'
                }));
            const mockSelect = _globals.jest.fn().mockResolvedValue({
                data: mockGuests,
                error: null
            });
            const mockInsert = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            mockFrom.mockReturnValue({
                insert: mockInsert
            });
            const result = await _guestService.bulkCreate(validGuestsData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data).toHaveLength(2);
                (0, _globals.expect)(result.data[0].firstName).toBe('John');
                (0, _globals.expect)(result.data[1].firstName).toBe('Jane');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when guests array is empty', async ()=>{
            const result = await _guestService.bulkCreate([]);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
                (0, _globals.expect)(result.error.message).toContain('must not be empty');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when any guest data is invalid', async ()=>{
            const invalidGuestsData = [
                ...validGuestsData,
                {
                    firstName: '',
                    lastName: 'Invalid',
                    email: 'invalid@example.com',
                    groupId: '123e4567-e89b-12d3-a456-426614174000',
                    ageType: 'adult',
                    guestType: 'wedding_guest'
                }
            ];
            const result = await _guestService.bulkCreate(invalidGuestsData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
                (0, _globals.expect)(result.error.message).toContain('validation error');
            }
        });
        (0, _globals.it)('should return DATABASE_ERROR when insert fails', async ()=>{
            const mockSelect = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    message: 'Insert failed',
                    code: 'DB_ERROR'
                }
            });
            const mockInsert = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            mockFrom.mockReturnValue({
                insert: mockInsert
            });
            const result = await _guestService.bulkCreate(validGuestsData);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('DATABASE_ERROR');
            }
        });
        (0, _globals.it)('should sanitize input to prevent XSS attacks', async ()=>{
            const maliciousGuestsData = [
                {
                    firstName: '<script>alert("xss")</script>John',
                    lastName: 'Doe',
                    email: 'john@example.com',
                    groupId: '123e4567-e89b-12d3-a456-426614174000',
                    ageType: 'adult',
                    guestType: 'wedding_guest',
                    notes: '<img src=x onerror=alert(1)>'
                }
            ];
            const mockGuests = [
                {
                    id: 'guest-1',
                    group_id: maliciousGuestsData[0].groupId,
                    first_name: 'John',
                    last_name: 'Doe',
                    email: 'john@example.com',
                    phone: null,
                    age_type: 'adult',
                    guest_type: 'wedding_guest',
                    dietary_restrictions: null,
                    plus_one_name: null,
                    plus_one_attending: false,
                    arrival_date: null,
                    departure_date: null,
                    airport_code: null,
                    flight_number: null,
                    invitation_sent: false,
                    invitation_sent_date: null,
                    rsvp_deadline: null,
                    notes: '',
                    created_at: '2024-01-01T00:00:00Z',
                    updated_at: '2024-01-01T00:00:00Z'
                }
            ];
            const mockSelect = _globals.jest.fn().mockResolvedValue({
                data: mockGuests,
                error: null
            });
            const mockInsert = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            mockFrom.mockReturnValue({
                insert: mockInsert
            });
            const result = await _guestService.bulkCreate(maliciousGuestsData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data[0].firstName).not.toContain('<script>');
                (0, _globals.expect)(result.data[0].firstName).not.toContain('alert');
                (0, _globals.expect)(result.data[0].notes).not.toContain('<img');
                (0, _globals.expect)(result.data[0].notes).not.toContain('onerror');
            }
        });
    });
    (0, _globals.describe)('exportToCSV', ()=>{
        const mockGuests = [
            {
                id: 'guest-1',
                groupId: '123e4567-e89b-12d3-a456-426614174000',
                firstName: 'John',
                lastName: 'Doe',
                email: 'john@example.com',
                phone: null,
                ageType: 'adult',
                guestType: 'wedding_guest',
                dietaryRestrictions: null,
                plusOneName: null,
                plusOneAttending: false,
                arrivalDate: null,
                departureDate: null,
                airportCode: null,
                flightNumber: null,
                invitationSent: false,
                invitationSentDate: null,
                rsvpDeadline: null,
                notes: null,
                createdAt: '2024-01-01T00:00:00Z',
                updatedAt: '2024-01-01T00:00:00Z'
            },
            {
                id: 'guest-2',
                groupId: '123e4567-e89b-12d3-a456-426614174000',
                firstName: 'Jane',
                lastName: 'Smith',
                email: 'jane@example.com',
                phone: '+1234567890',
                ageType: 'adult',
                guestType: 'wedding_guest',
                dietaryRestrictions: 'Vegetarian',
                plusOneName: 'Plus One',
                plusOneAttending: true,
                arrivalDate: '2024-06-01',
                departureDate: '2024-06-05',
                airportCode: 'SJO',
                flightNumber: 'AA123',
                invitationSent: true,
                invitationSentDate: '2024-01-15',
                rsvpDeadline: '2024-05-01',
                notes: 'Special requirements',
                createdAt: '2024-01-01T00:00:00Z',
                updatedAt: '2024-01-01T00:00:00Z'
            }
        ];
        (0, _globals.it)('should return success with CSV string when valid guests provided', async ()=>{
            const result = await _guestService.exportToCSV(mockGuests);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(typeof result.data).toBe('string');
                (0, _globals.expect)(result.data).toContain('groupId,firstName,lastName');
                (0, _globals.expect)(result.data).toContain('John,Doe');
                (0, _globals.expect)(result.data).toContain('Jane,Smith');
            }
        });
        (0, _globals.it)('should return success with empty CSV when empty array provided', async ()=>{
            const result = await _guestService.exportToCSV([]);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data).toContain('groupId,firstName,lastName');
                // Should only contain header
                (0, _globals.expect)(result.data.split('\n')).toHaveLength(1);
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when guests is not an array', async ()=>{
            const result = await _guestService.exportToCSV(null);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
                (0, _globals.expect)(result.error.message).toContain('array');
            }
        });
        (0, _globals.it)('should properly escape CSV fields with commas and quotes', async ()=>{
            const guestWithSpecialChars = [
                {
                    ...mockGuests[0],
                    firstName: 'John, Jr.',
                    notes: 'Has "special" requirements'
                }
            ];
            const result = await _guestService.exportToCSV(guestWithSpecialChars);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data).toContain('"John, Jr."');
                (0, _globals.expect)(result.data).toContain('"Has ""special"" requirements"');
            }
        });
    });
    (0, _globals.describe)('importFromCSV', ()=>{
        const validCSV = `groupId,firstName,lastName,email,phone,ageType,guestType,dietaryRestrictions,plusOneName,plusOneAttending,arrivalDate,departureDate,airportCode,flightNumber,invitationSent,invitationSentDate,rsvpDeadline,notes
123e4567-e89b-12d3-a456-426614174000,John,Doe,john@example.com,,adult,wedding_guest,,,false,,,,,false,,,
123e4567-e89b-12d3-a456-426614174000,Jane,Smith,jane@example.com,+1234567890,adult,wedding_guest,Vegetarian,Plus One,true,2024-06-01,2024-06-05,SJO,AA123,true,2024-01-15,2024-05-01,Special requirements`;
        (0, _globals.it)('should return success with created guests when valid CSV provided', async ()=>{
            const mockGuests = [
                {
                    id: 'guest-1',
                    group_id: '123e4567-e89b-12d3-a456-426614174000',
                    first_name: 'John',
                    last_name: 'Doe',
                    email: 'john@example.com',
                    phone: null,
                    age_type: 'adult',
                    guest_type: 'wedding_guest',
                    dietary_restrictions: null,
                    plus_one_name: null,
                    plus_one_attending: false,
                    arrival_date: null,
                    departure_date: null,
                    airport_code: null,
                    flight_number: null,
                    invitation_sent: false,
                    invitation_sent_date: null,
                    rsvp_deadline: null,
                    notes: null,
                    created_at: '2024-01-01T00:00:00Z',
                    updated_at: '2024-01-01T00:00:00Z'
                },
                {
                    id: 'guest-2',
                    group_id: '123e4567-e89b-12d3-a456-426614174000',
                    first_name: 'Jane',
                    last_name: 'Smith',
                    email: 'jane@example.com',
                    phone: '+1234567890',
                    age_type: 'adult',
                    guest_type: 'wedding_guest',
                    dietary_restrictions: 'Vegetarian',
                    plus_one_name: 'Plus One',
                    plus_one_attending: true,
                    arrival_date: '2024-06-01',
                    departure_date: '2024-06-05',
                    airport_code: 'SJO',
                    flight_number: 'AA123',
                    invitation_sent: true,
                    invitation_sent_date: '2024-01-15',
                    rsvp_deadline: '2024-05-01',
                    notes: 'Special requirements',
                    created_at: '2024-01-01T00:00:00Z',
                    updated_at: '2024-01-01T00:00:00Z'
                }
            ];
            // Mock the create function calls
            let callCount = 0;
            const mockSingle = _globals.jest.fn().mockImplementation(()=>{
                const guest = mockGuests[callCount++];
                return Promise.resolve({
                    data: guest,
                    error: null
                });
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockInsert = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            mockFrom.mockReturnValue({
                insert: mockInsert
            });
            const result = await _guestService.importFromCSV(validCSV);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data).toHaveLength(2);
                (0, _globals.expect)(result.data[0].firstName).toBe('John');
                (0, _globals.expect)(result.data[1].firstName).toBe('Jane');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when CSV content is empty', async ()=>{
            const result = await _guestService.importFromCSV('');
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
                (0, _globals.expect)(result.error.message).toContain('required');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when CSV has no data rows', async ()=>{
            const headerOnlyCSV = 'groupId,firstName,lastName,email,phone,ageType,guestType,dietaryRestrictions,plusOneName,plusOneAttending,arrivalDate,departureDate,airportCode,flightNumber,invitationSent,invitationSentDate,rsvpDeadline,notes';
            const result = await _guestService.importFromCSV(headerOnlyCSV);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
                (0, _globals.expect)(result.error.message).toContain('at least one data row');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when CSV header is incorrect', async ()=>{
            const invalidHeaderCSV = 'wrongHeader,firstName,lastName\nvalue1,John,Doe';
            const result = await _guestService.importFromCSV(invalidHeaderCSV);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
                (0, _globals.expect)(result.error.message).toContain('header mismatch');
            }
        });
        (0, _globals.it)('should return VALIDATION_ERROR when CSV has invalid data', async ()=>{
            const invalidDataCSV = `groupId,firstName,lastName,email,phone,ageType,guestType,dietaryRestrictions,plusOneName,plusOneAttending,arrivalDate,departureDate,airportCode,flightNumber,invitationSent,invitationSentDate,rsvpDeadline,notes
invalid-uuid,,Doe,invalid-email,,adult,wedding_guest,,,false,,,,,false,,,`;
            const result = await _guestService.importFromCSV(invalidDataCSV);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('VALIDATION_ERROR');
                (0, _globals.expect)(result.error.message).toContain('import failed');
            }
        });
        (0, _globals.it)('should return DATABASE_ERROR when guest creation fails', async ()=>{
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: null,
                error: {
                    message: 'Creation failed',
                    code: 'DB_ERROR'
                }
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockInsert = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            mockFrom.mockReturnValue({
                insert: mockInsert
            });
            const result = await _guestService.importFromCSV(validCSV);
            (0, _globals.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, _globals.expect)(result.error.code).toBe('PARTIAL_IMPORT_FAILURE');
                (0, _globals.expect)(result.error.message).toContain('failed');
            }
        });
        (0, _globals.it)('should handle CSV fields with commas and quotes correctly', async ()=>{
            const csvWithSpecialChars = `groupId,firstName,lastName,email,phone,ageType,guestType,dietaryRestrictions,plusOneName,plusOneAttending,arrivalDate,departureDate,airportCode,flightNumber,invitationSent,invitationSentDate,rsvpDeadline,notes
123e4567-e89b-12d3-a456-426614174000,"John, Jr.",Doe,john@example.com,,adult,wedding_guest,,,false,,,,,false,,,"Has ""special"" requirements"`;
            const mockGuest = {
                id: 'guest-1',
                group_id: '123e4567-e89b-12d3-a456-426614174000',
                first_name: 'John, Jr.',
                last_name: 'Doe',
                email: 'john@example.com',
                phone: null,
                age_type: 'adult',
                guest_type: 'wedding_guest',
                dietary_restrictions: null,
                plus_one_name: null,
                plus_one_attending: false,
                arrival_date: null,
                departure_date: null,
                airport_code: null,
                flight_number: null,
                invitation_sent: false,
                invitation_sent_date: null,
                rsvp_deadline: null,
                notes: 'Has "special" requirements',
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: mockGuest,
                error: null
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockInsert = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            mockFrom.mockReturnValue({
                insert: mockInsert
            });
            const result = await _guestService.importFromCSV(csvWithSpecialChars);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data[0].firstName).toBe('John, Jr.');
                (0, _globals.expect)(result.data[0].notes).toBe('Has "special" requirements');
            }
        });
    });
    (0, _globals.describe)('Auth Method Inheritance', ()=>{
        const validData = {
            firstName: 'John',
            lastName: 'Doe',
            email: 'john@example.com',
            groupId: '123e4567-e89b-12d3-a456-426614174000',
            ageType: 'adult',
            guestType: 'wedding_guest'
        };
        (0, _globals.beforeEach)(()=>{
            _globals.jest.clearAllMocks();
            // Clear the module cache to reset the settingsService mock
            _globals.jest.resetModules();
        });
        (0, _globals.it)('should inherit default auth method from settings when creating a guest', async ()=>{
            // Mock settingsService.getDefaultAuthMethod
            _globals.jest.doMock('./settingsService', ()=>({
                    getDefaultAuthMethod: _globals.jest.fn().mockResolvedValue({
                        success: true,
                        data: 'magic_link'
                    })
                }));
            const mockGuest = {
                id: 'guest-1',
                group_id: validData.groupId,
                first_name: validData.firstName,
                last_name: validData.lastName,
                email: validData.email,
                phone: null,
                age_type: validData.ageType,
                guest_type: validData.guestType,
                dietary_restrictions: null,
                plus_one_name: null,
                plus_one_attending: false,
                arrival_date: null,
                departure_date: null,
                airport_code: null,
                flight_number: null,
                invitation_sent: false,
                invitation_sent_date: null,
                rsvp_deadline: null,
                notes: null,
                auth_method: 'magic_link',
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: mockGuest,
                error: null
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockInsert = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            mockFrom.mockReturnValue({
                insert: mockInsert
            });
            // Re-import guestService to get the mocked settingsService
            const guestServiceModule = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("./guestService")));
            const result = await guestServiceModule.create(validData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.authMethod).toBe('magic_link');
            }
            // Verify that insert was called with auth_method
            (0, _globals.expect)(mockInsert).toHaveBeenCalledWith(_globals.expect.objectContaining({
                auth_method: 'magic_link'
            }));
        });
        (0, _globals.it)('should fallback to email_matching when settings fetch fails', async ()=>{
            // Mock settingsService.getDefaultAuthMethod to fail
            _globals.jest.doMock('./settingsService', ()=>({
                    getDefaultAuthMethod: _globals.jest.fn().mockResolvedValue({
                        success: false,
                        error: {
                            code: 'NOT_FOUND',
                            message: 'Setting not found'
                        }
                    })
                }));
            const mockGuest = {
                id: 'guest-1',
                group_id: validData.groupId,
                first_name: validData.firstName,
                last_name: validData.lastName,
                email: validData.email,
                phone: null,
                age_type: validData.ageType,
                guest_type: validData.guestType,
                dietary_restrictions: null,
                plus_one_name: null,
                plus_one_attending: false,
                arrival_date: null,
                departure_date: null,
                airport_code: null,
                flight_number: null,
                invitation_sent: false,
                invitation_sent_date: null,
                rsvp_deadline: null,
                notes: null,
                auth_method: 'email_matching',
                created_at: '2024-01-01T00:00:00Z',
                updated_at: '2024-01-01T00:00:00Z'
            };
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: mockGuest,
                error: null
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockInsert = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            mockFrom.mockReturnValue({
                insert: mockInsert
            });
            // Re-import guestService to get the mocked settingsService
            const guestServiceModule = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("./guestService")));
            const result = await guestServiceModule.create(validData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data.authMethod).toBe('email_matching');
            }
            // Verify that insert was called with fallback auth_method
            (0, _globals.expect)(mockInsert).toHaveBeenCalledWith(_globals.expect.objectContaining({
                auth_method: 'email_matching'
            }));
        });
        (0, _globals.it)('should inherit auth method for bulk create operations', async ()=>{
            // Mock settingsService.getDefaultAuthMethod
            _globals.jest.doMock('./settingsService', ()=>({
                    getDefaultAuthMethod: _globals.jest.fn().mockResolvedValue({
                        success: true,
                        data: 'magic_link'
                    })
                }));
            const guestsData = [
                {
                    firstName: 'John',
                    lastName: 'Doe',
                    email: 'john@example.com',
                    groupId: '123e4567-e89b-12d3-a456-426614174000',
                    ageType: 'adult',
                    guestType: 'wedding_guest'
                },
                {
                    firstName: 'Jane',
                    lastName: 'Doe',
                    email: 'jane@example.com',
                    groupId: '123e4567-e89b-12d3-a456-426614174000',
                    ageType: 'adult',
                    guestType: 'wedding_guest'
                }
            ];
            const mockGuests = guestsData.map((data, index)=>({
                    id: `guest-${index + 1}`,
                    group_id: data.groupId,
                    first_name: data.firstName,
                    last_name: data.lastName,
                    email: data.email,
                    phone: null,
                    age_type: data.ageType,
                    guest_type: data.guestType,
                    dietary_restrictions: null,
                    plus_one_name: null,
                    plus_one_attending: false,
                    arrival_date: null,
                    departure_date: null,
                    airport_code: null,
                    flight_number: null,
                    invitation_sent: false,
                    invitation_sent_date: null,
                    rsvp_deadline: null,
                    notes: null,
                    auth_method: 'magic_link',
                    created_at: '2024-01-01T00:00:00Z',
                    updated_at: '2024-01-01T00:00:00Z'
                }));
            const mockSelect = _globals.jest.fn().mockResolvedValue({
                data: mockGuests,
                error: null
            });
            const mockInsert = _globals.jest.fn().mockReturnValue({
                select: mockSelect
            });
            mockFrom.mockReturnValue({
                insert: mockInsert
            });
            // Re-import guestService to get the mocked settingsService
            const guestServiceModule = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("./guestService")));
            const result = await guestServiceModule.bulkCreate(guestsData);
            (0, _globals.expect)(result.success).toBe(true);
            if (result.success) {
                (0, _globals.expect)(result.data).toHaveLength(2);
                (0, _globals.expect)(result.data[0].authMethod).toBe('magic_link');
                (0, _globals.expect)(result.data[1].authMethod).toBe('magic_link');
            }
            // Verify that insert was called with auth_method for all guests
            (0, _globals.expect)(mockInsert).toHaveBeenCalledWith(_globals.expect.arrayContaining([
                _globals.expect.objectContaining({
                    auth_method: 'magic_link'
                }),
                _globals.expect.objectContaining({
                    auth_method: 'magic_link'
                })
            ]));
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvc2VydmljZXMvZ3Vlc3RTZXJ2aWNlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QsIGplc3QsIGJlZm9yZUVhY2ggfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCB0eXBlIHsgQ3JlYXRlR3Vlc3REVE8sIFVwZGF0ZUd1ZXN0RFRPIH0gZnJvbSAnQC9zY2hlbWFzL2d1ZXN0U2NoZW1hcyc7XG5cbi8vIE1vY2sgU3VwYWJhc2UgYmVmb3JlIGltcG9ydGluZyBndWVzdFNlcnZpY2VcbmNvbnN0IG1vY2tGcm9tID0gamVzdC5mbigpIGFzIGplc3QuTW9jaztcbmplc3QubW9jaygnQC9saWIvc3VwYWJhc2UnLCAoKSA9PiAoe1xuICBzdXBhYmFzZToge1xuICAgIGZyb206IG1vY2tGcm9tLFxuICB9LFxufSkpO1xuXG4vLyBJbXBvcnQgYWZ0ZXIgbW9ja2luZ1xuaW1wb3J0ICogYXMgZ3Vlc3RTZXJ2aWNlIGZyb20gJy4vZ3Vlc3RTZXJ2aWNlJztcblxuLy8gSGVscGVyIHRvIGNyZWF0ZSBwcm9wZXJseSB0eXBlZCBtb2NrIGNoYWluc1xuZnVuY3Rpb24gbW9ja1N1cGFiYXNlQ2hhaW4oY2hhaW46IGFueSkge1xuICByZXR1cm4gY2hhaW4gYXMgYW55O1xufVxuXG5kZXNjcmliZSgnZ3Vlc3RTZXJ2aWNlJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NyZWF0ZScsICgpID0+IHtcbiAgICBjb25zdCB2YWxpZERhdGE6IENyZWF0ZUd1ZXN0RFRPID0ge1xuICAgICAgZmlyc3ROYW1lOiAnSm9obicsXG4gICAgICBsYXN0TmFtZTogJ0RvZScsXG4gICAgICBlbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nLFxuICAgICAgZ3JvdXBJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICBhZ2VUeXBlOiAnYWR1bHQnLFxuICAgICAgZ3Vlc3RUeXBlOiAnd2VkZGluZ19ndWVzdCcsXG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHN1Y2Nlc3Mgd2l0aCBndWVzdCBkYXRhIHdoZW4gdmFsaWQgaW5wdXQgcHJvdmlkZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrR3Vlc3QgPSB7XG4gICAgICAgIGlkOiAnZ3Vlc3QtMScsXG4gICAgICAgIGdyb3VwX2lkOiB2YWxpZERhdGEuZ3JvdXBJZCxcbiAgICAgICAgZmlyc3RfbmFtZTogdmFsaWREYXRhLmZpcnN0TmFtZSxcbiAgICAgICAgbGFzdF9uYW1lOiB2YWxpZERhdGEubGFzdE5hbWUsXG4gICAgICAgIGVtYWlsOiB2YWxpZERhdGEuZW1haWwsXG4gICAgICAgIHBob25lOiBudWxsLFxuICAgICAgICBhZ2VfdHlwZTogdmFsaWREYXRhLmFnZVR5cGUsXG4gICAgICAgIGd1ZXN0X3R5cGU6IHZhbGlkRGF0YS5ndWVzdFR5cGUsXG4gICAgICAgIGRpZXRhcnlfcmVzdHJpY3Rpb25zOiBudWxsLFxuICAgICAgICBwbHVzX29uZV9uYW1lOiBudWxsLFxuICAgICAgICBwbHVzX29uZV9hdHRlbmRpbmc6IGZhbHNlLFxuICAgICAgICBhcnJpdmFsX2RhdGU6IG51bGwsXG4gICAgICAgIGRlcGFydHVyZV9kYXRlOiBudWxsLFxuICAgICAgICBhaXJwb3J0X2NvZGU6IG51bGwsXG4gICAgICAgIGZsaWdodF9udW1iZXI6IG51bGwsXG4gICAgICAgIGludml0YXRpb25fc2VudDogZmFsc2UsXG4gICAgICAgIGludml0YXRpb25fc2VudF9kYXRlOiBudWxsLFxuICAgICAgICByc3ZwX2RlYWRsaW5lOiBudWxsLFxuICAgICAgICBub3RlczogbnVsbCxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tTaW5nbGUgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBtb2NrR3Vlc3QsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgY29uc3QgbW9ja1NlbGVjdCA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzaW5nbGU6IG1vY2tTaW5nbGUsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IG1vY2tJbnNlcnQgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBtb2NrU2VsZWN0LFxuICAgICAgfSk7XG4gICAgICAobW9ja0Zyb20gYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpbnNlcnQ6IG1vY2tJbnNlcnQsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlLmNyZWF0ZSh2YWxpZERhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmlkKS50b0JlKCdndWVzdC0xJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5maXJzdE5hbWUpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmxhc3ROYW1lKS50b0JlKCdEb2UnKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmVtYWlsKS50b0JlKCdqb2huQGV4YW1wbGUuY29tJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBWQUxJREFUSU9OX0VSUk9SIHdoZW4gZmlyc3ROYW1lIGlzIG1pc3NpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkRGF0YSA9IHsgLi4udmFsaWREYXRhLCBmaXJzdE5hbWU6ICcnIH07XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2UuY3JlYXRlKGludmFsaWREYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBWQUxJREFUSU9OX0VSUk9SIHdoZW4gZW1haWwgaXMgaW52YWxpZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWREYXRhID0geyAuLi52YWxpZERhdGEsIGVtYWlsOiAnaW52YWxpZC1lbWFpbCcgfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1ZXN0U2VydmljZS5jcmVhdGUoaW52YWxpZERhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIFZBTElEQVRJT05fRVJST1Igd2hlbiBncm91cElkIGlzIG5vdCBhIHZhbGlkIFVVSUQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkRGF0YSA9IHsgLi4udmFsaWREYXRhLCBncm91cElkOiAnbm90LWEtdXVpZCcgfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1ZXN0U2VydmljZS5jcmVhdGUoaW52YWxpZERhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIERBVEFCQVNFX0VSUk9SIHdoZW4gaW5zZXJ0IGZhaWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1NpbmdsZSA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdDb25uZWN0aW9uIGZhaWxlZCcsIGNvZGU6ICdEQl9FUlJPUicgfSxcbiAgICAgIH0gYXMgYW55KTtcbiAgICAgIGNvbnN0IG1vY2tTZWxlY3QgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2luZ2xlOiBtb2NrU2luZ2xlLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBtb2NrSW5zZXJ0ID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNlbGVjdDogbW9ja1NlbGVjdCxcbiAgICAgIH0pO1xuICAgICAgKG1vY2tGcm9tIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaW5zZXJ0OiBtb2NrSW5zZXJ0LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1ZXN0U2VydmljZS5jcmVhdGUodmFsaWREYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdEQVRBQkFTRV9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzYW5pdGl6ZSBpbnB1dCB0byBwcmV2ZW50IFhTUyBhdHRhY2tzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWFsaWNpb3VzRGF0YSA9IHtcbiAgICAgICAgLi4udmFsaWREYXRhLFxuICAgICAgICBmaXJzdE5hbWU6ICc8c2NyaXB0PmFsZXJ0KFwieHNzXCIpPC9zY3JpcHQ+Sm9obicsXG4gICAgICAgIG5vdGVzOiAnPGltZyBzcmM9eCBvbmVycm9yPWFsZXJ0KDEpPicsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBtb2NrR3Vlc3QgPSB7XG4gICAgICAgIGlkOiAnZ3Vlc3QtMScsXG4gICAgICAgIGdyb3VwX2lkOiB2YWxpZERhdGEuZ3JvdXBJZCxcbiAgICAgICAgZmlyc3RfbmFtZTogJ0pvaG4nLFxuICAgICAgICBsYXN0X25hbWU6IHZhbGlkRGF0YS5sYXN0TmFtZSxcbiAgICAgICAgZW1haWw6IHZhbGlkRGF0YS5lbWFpbCxcbiAgICAgICAgcGhvbmU6IG51bGwsXG4gICAgICAgIGFnZV90eXBlOiB2YWxpZERhdGEuYWdlVHlwZSxcbiAgICAgICAgZ3Vlc3RfdHlwZTogdmFsaWREYXRhLmd1ZXN0VHlwZSxcbiAgICAgICAgZGlldGFyeV9yZXN0cmljdGlvbnM6IG51bGwsXG4gICAgICAgIHBsdXNfb25lX25hbWU6IG51bGwsXG4gICAgICAgIHBsdXNfb25lX2F0dGVuZGluZzogZmFsc2UsXG4gICAgICAgIGFycml2YWxfZGF0ZTogbnVsbCxcbiAgICAgICAgZGVwYXJ0dXJlX2RhdGU6IG51bGwsXG4gICAgICAgIGFpcnBvcnRfY29kZTogbnVsbCxcbiAgICAgICAgZmxpZ2h0X251bWJlcjogbnVsbCxcbiAgICAgICAgaW52aXRhdGlvbl9zZW50OiBmYWxzZSxcbiAgICAgICAgaW52aXRhdGlvbl9zZW50X2RhdGU6IG51bGwsXG4gICAgICAgIHJzdnBfZGVhZGxpbmU6IG51bGwsXG4gICAgICAgIG5vdGVzOiAnJyxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tTaW5nbGUgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBtb2NrR3Vlc3QsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgY29uc3QgbW9ja1NlbGVjdCA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzaW5nbGU6IG1vY2tTaW5nbGUsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IG1vY2tJbnNlcnQgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBtb2NrU2VsZWN0LFxuICAgICAgfSk7XG4gICAgICAobW9ja0Zyb20gYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpbnNlcnQ6IG1vY2tJbnNlcnQsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlLmNyZWF0ZShtYWxpY2lvdXNEYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5maXJzdE5hbWUpLm5vdC50b0NvbnRhaW4oJzxzY3JpcHQ+Jyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5maXJzdE5hbWUpLm5vdC50b0NvbnRhaW4oJ2FsZXJ0Jyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5ub3Rlcykubm90LnRvQ29udGFpbignPGltZycpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEubm90ZXMpLm5vdC50b0NvbnRhaW4oJ29uZXJyb3InKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldCcsICgpID0+IHtcbiAgICBjb25zdCB2YWxpZElkID0gJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCc7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBndWVzdCB3aGVuIHZhbGlkIElEIHByb3ZpZGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0d1ZXN0ID0ge1xuICAgICAgICBpZDogdmFsaWRJZCxcbiAgICAgICAgZ3JvdXBfaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICBmaXJzdF9uYW1lOiAnSm9obicsXG4gICAgICAgIGxhc3RfbmFtZTogJ0RvZScsXG4gICAgICAgIGVtYWlsOiAnam9obkBleGFtcGxlLmNvbScsXG4gICAgICAgIHBob25lOiBudWxsLFxuICAgICAgICBhZ2VfdHlwZTogJ2FkdWx0JyxcbiAgICAgICAgZ3Vlc3RfdHlwZTogJ3dlZGRpbmdfZ3Vlc3QnLFxuICAgICAgICBkaWV0YXJ5X3Jlc3RyaWN0aW9uczogbnVsbCxcbiAgICAgICAgcGx1c19vbmVfbmFtZTogbnVsbCxcbiAgICAgICAgcGx1c19vbmVfYXR0ZW5kaW5nOiBmYWxzZSxcbiAgICAgICAgYXJyaXZhbF9kYXRlOiBudWxsLFxuICAgICAgICBkZXBhcnR1cmVfZGF0ZTogbnVsbCxcbiAgICAgICAgYWlycG9ydF9jb2RlOiBudWxsLFxuICAgICAgICBmbGlnaHRfbnVtYmVyOiBudWxsLFxuICAgICAgICBpbnZpdGF0aW9uX3NlbnQ6IGZhbHNlLFxuICAgICAgICBpbnZpdGF0aW9uX3NlbnRfZGF0ZTogbnVsbCxcbiAgICAgICAgcnN2cF9kZWFkbGluZTogbnVsbCxcbiAgICAgICAgbm90ZXM6IG51bGwsXG4gICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBtb2NrU2luZ2xlID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbW9ja0d1ZXN0LFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0gYXMgYW55KTtcbiAgICAgIGNvbnN0IG1vY2tFcSA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzaW5nbGU6IG1vY2tTaW5nbGUsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IG1vY2tTZWxlY3QgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgZXE6IG1vY2tFcSxcbiAgICAgIH0pO1xuICAgICAgKG1vY2tGcm9tIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBtb2NrU2VsZWN0LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1ZXN0U2VydmljZS5nZXQodmFsaWRJZCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuaWQpLnRvQmUodmFsaWRJZCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5maXJzdE5hbWUpLnRvQmUoJ0pvaG4nKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIFZBTElEQVRJT05fRVJST1Igd2hlbiBJRCBpcyBub3QgYSB2YWxpZCBVVUlEJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlLmdldCgnaW52YWxpZC1pZCcpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIE5PVF9GT1VORCB3aGVuIGd1ZXN0IGRvZXMgbm90IGV4aXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1NpbmdsZSA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGVycm9yOiB7IGNvZGU6ICdQR1JTVDExNicsIG1lc3NhZ2U6ICdOb3QgZm91bmQnIH0sXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrRXEgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2luZ2xlOiBtb2NrU2luZ2xlLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBtb2NrU2VsZWN0ID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGVxOiBtb2NrRXEsXG4gICAgICB9KTtcbiAgICAgIChtb2NrRnJvbSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNlbGVjdDogbW9ja1NlbGVjdCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2UuZ2V0KCcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdOT1RfRk9VTkQnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3VwZGF0ZScsICgpID0+IHtcbiAgICBjb25zdCB2YWxpZElkID0gJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCc7XG4gICAgY29uc3QgdXBkYXRlRGF0YTogVXBkYXRlR3Vlc3REVE8gPSB7XG4gICAgICBmaXJzdE5hbWU6ICdKYW5lJyxcbiAgICAgIGVtYWlsOiAnamFuZUBleGFtcGxlLmNvbScsXG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHVwZGF0ZWQgZ3Vlc3Qgd2hlbiB2YWxpZCBkYXRhIHByb3ZpZGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0d1ZXN0ID0ge1xuICAgICAgICBpZDogdmFsaWRJZCxcbiAgICAgICAgZ3JvdXBfaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICBmaXJzdF9uYW1lOiAnSmFuZScsXG4gICAgICAgIGxhc3RfbmFtZTogJ0RvZScsXG4gICAgICAgIGVtYWlsOiAnamFuZUBleGFtcGxlLmNvbScsXG4gICAgICAgIHBob25lOiBudWxsLFxuICAgICAgICBhZ2VfdHlwZTogJ2FkdWx0JyxcbiAgICAgICAgZ3Vlc3RfdHlwZTogJ3dlZGRpbmdfZ3Vlc3QnLFxuICAgICAgICBkaWV0YXJ5X3Jlc3RyaWN0aW9uczogbnVsbCxcbiAgICAgICAgcGx1c19vbmVfbmFtZTogbnVsbCxcbiAgICAgICAgcGx1c19vbmVfYXR0ZW5kaW5nOiBmYWxzZSxcbiAgICAgICAgYXJyaXZhbF9kYXRlOiBudWxsLFxuICAgICAgICBkZXBhcnR1cmVfZGF0ZTogbnVsbCxcbiAgICAgICAgYWlycG9ydF9jb2RlOiBudWxsLFxuICAgICAgICBmbGlnaHRfbnVtYmVyOiBudWxsLFxuICAgICAgICBpbnZpdGF0aW9uX3NlbnQ6IGZhbHNlLFxuICAgICAgICBpbnZpdGF0aW9uX3NlbnRfZGF0ZTogbnVsbCxcbiAgICAgICAgcnN2cF9kZWFkbGluZTogbnVsbCxcbiAgICAgICAgbm90ZXM6IG51bGwsXG4gICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBtb2NrU2luZ2xlID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbW9ja0d1ZXN0LFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0gYXMgYW55KTtcbiAgICAgIGNvbnN0IG1vY2tTZWxlY3QgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2luZ2xlOiBtb2NrU2luZ2xlLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBtb2NrRXEgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBtb2NrU2VsZWN0LFxuICAgICAgfSk7XG4gICAgICBjb25zdCBtb2NrVXBkYXRlID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGVxOiBtb2NrRXEsXG4gICAgICB9KTtcbiAgICAgIChtb2NrRnJvbSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVwZGF0ZTogbW9ja1VwZGF0ZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2UudXBkYXRlKHZhbGlkSWQsIHVwZGF0ZURhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmZpcnN0TmFtZSkudG9CZSgnSmFuZScpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuZW1haWwpLnRvQmUoJ2phbmVAZXhhbXBsZS5jb20nKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIFZBTElEQVRJT05fRVJST1Igd2hlbiBJRCBpcyBpbnZhbGlkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlLnVwZGF0ZSgnaW52YWxpZC1pZCcsIHVwZGF0ZURhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIE5PVF9GT1VORCB3aGVuIGd1ZXN0IGRvZXMgbm90IGV4aXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1NpbmdsZSA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGVycm9yOiB7IGNvZGU6ICdQR1JTVDExNicsIG1lc3NhZ2U6ICdOb3QgZm91bmQnIH0sXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrU2VsZWN0ID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNpbmdsZTogbW9ja1NpbmdsZSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgbW9ja0VxID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNlbGVjdDogbW9ja1NlbGVjdCxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgbW9ja1VwZGF0ZSA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBlcTogbW9ja0VxLFxuICAgICAgfSk7XG4gICAgICAobW9ja0Zyb20gYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICB1cGRhdGU6IG1vY2tVcGRhdGUsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlLnVwZGF0ZSh2YWxpZElkLCB1cGRhdGVEYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdOT1RfRk9VTkQnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2FuaXRpemUgdXBkYXRlZCBmaWVsZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtYWxpY2lvdXNVcGRhdGUgPSB7XG4gICAgICAgIGZpcnN0TmFtZTogJzxzY3JpcHQ+YWxlcnQoXCJ4c3NcIik8L3NjcmlwdD5KYW5lJyxcbiAgICAgICAgbm90ZXM6ICdqYXZhc2NyaXB0OmFsZXJ0KDEpJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tHdWVzdCA9IHtcbiAgICAgICAgaWQ6IHZhbGlkSWQsXG4gICAgICAgIGdyb3VwX2lkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgZmlyc3RfbmFtZTogJ0phbmUnLFxuICAgICAgICBsYXN0X25hbWU6ICdEb2UnLFxuICAgICAgICBlbWFpbDogJ2phbmVAZXhhbXBsZS5jb20nLFxuICAgICAgICBwaG9uZTogbnVsbCxcbiAgICAgICAgYWdlX3R5cGU6ICdhZHVsdCcsXG4gICAgICAgIGd1ZXN0X3R5cGU6ICd3ZWRkaW5nX2d1ZXN0JyxcbiAgICAgICAgZGlldGFyeV9yZXN0cmljdGlvbnM6IG51bGwsXG4gICAgICAgIHBsdXNfb25lX25hbWU6IG51bGwsXG4gICAgICAgIHBsdXNfb25lX2F0dGVuZGluZzogZmFsc2UsXG4gICAgICAgIGFycml2YWxfZGF0ZTogbnVsbCxcbiAgICAgICAgZGVwYXJ0dXJlX2RhdGU6IG51bGwsXG4gICAgICAgIGFpcnBvcnRfY29kZTogbnVsbCxcbiAgICAgICAgZmxpZ2h0X251bWJlcjogbnVsbCxcbiAgICAgICAgaW52aXRhdGlvbl9zZW50OiBmYWxzZSxcbiAgICAgICAgaW52aXRhdGlvbl9zZW50X2RhdGU6IG51bGwsXG4gICAgICAgIHJzdnBfZGVhZGxpbmU6IG51bGwsXG4gICAgICAgIG5vdGVzOiAnamF2YXNjcmlwdGFsZXJ0MScsXG4gICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBtb2NrU2luZ2xlID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbW9ja0d1ZXN0LFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0gYXMgYW55KTtcbiAgICAgIGNvbnN0IG1vY2tTZWxlY3QgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2luZ2xlOiBtb2NrU2luZ2xlLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBtb2NrRXEgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBtb2NrU2VsZWN0LFxuICAgICAgfSk7XG4gICAgICBjb25zdCBtb2NrVXBkYXRlID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGVxOiBtb2NrRXEsXG4gICAgICB9KTtcbiAgICAgIChtb2NrRnJvbSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVwZGF0ZTogbW9ja1VwZGF0ZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2UudXBkYXRlKHZhbGlkSWQsIG1hbGljaW91c1VwZGF0ZSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuZmlyc3ROYW1lKS5ub3QudG9Db250YWluKCc8c2NyaXB0PicpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEubm90ZXMpLm5vdC50b0NvbnRhaW4oJ2phdmFzY3JpcHQ6Jyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdkZWxldGVHdWVzdCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBzdWNjZXNzIHdoZW4gZ3Vlc3QgaXMgZGVsZXRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tFcSA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgY29uc3QgbW9ja0RlbGV0ZSA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBlcTogbW9ja0VxLFxuICAgICAgfSk7XG4gICAgICAobW9ja0Zyb20gYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBkZWxldGU6IG1vY2tEZWxldGUsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlLmRlbGV0ZUd1ZXN0KCcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIElEIGlzIGludmFsaWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2UuZGVsZXRlR3Vlc3QoJ2ludmFsaWQtaWQnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBEQVRBQkFTRV9FUlJPUiB3aGVuIGRlbGV0ZSBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tFcSA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdEZWxldGUgZmFpbGVkJywgY29kZTogJ0RCX0VSUk9SJyB9LFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgY29uc3QgbW9ja0RlbGV0ZSA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBlcTogbW9ja0VxLFxuICAgICAgfSk7XG4gICAgICAobW9ja0Zyb20gYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBkZWxldGU6IG1vY2tEZWxldGUsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlLmRlbGV0ZUd1ZXN0KCcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdEQVRBQkFTRV9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbGlzdCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBwYWdpbmF0ZWQgZ3Vlc3QgbGlzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tHdWVzdHMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2d1ZXN0LTEnLFxuICAgICAgICAgIGdyb3VwX2lkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgICBmaXJzdF9uYW1lOiAnQWxpY2UnLFxuICAgICAgICAgIGxhc3RfbmFtZTogJ0FuZGVyc29uJyxcbiAgICAgICAgICBlbWFpbDogJ2FsaWNlQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwaG9uZTogbnVsbCxcbiAgICAgICAgICBhZ2VfdHlwZTogJ2FkdWx0JyxcbiAgICAgICAgICBndWVzdF90eXBlOiAnd2VkZGluZ19ndWVzdCcsXG4gICAgICAgICAgZGlldGFyeV9yZXN0cmljdGlvbnM6IG51bGwsXG4gICAgICAgICAgcGx1c19vbmVfbmFtZTogbnVsbCxcbiAgICAgICAgICBwbHVzX29uZV9hdHRlbmRpbmc6IGZhbHNlLFxuICAgICAgICAgIGFycml2YWxfZGF0ZTogbnVsbCxcbiAgICAgICAgICBkZXBhcnR1cmVfZGF0ZTogbnVsbCxcbiAgICAgICAgICBhaXJwb3J0X2NvZGU6IG51bGwsXG4gICAgICAgICAgZmxpZ2h0X251bWJlcjogbnVsbCxcbiAgICAgICAgICBpbnZpdGF0aW9uX3NlbnQ6IGZhbHNlLFxuICAgICAgICAgIGludml0YXRpb25fc2VudF9kYXRlOiBudWxsLFxuICAgICAgICAgIHJzdnBfZGVhZGxpbmU6IG51bGwsXG4gICAgICAgICAgbm90ZXM6IG51bGwsXG4gICAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdndWVzdC0yJyxcbiAgICAgICAgICBncm91cF9pZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgICAgZmlyc3RfbmFtZTogJ0JvYicsXG4gICAgICAgICAgbGFzdF9uYW1lOiAnQnJvd24nLFxuICAgICAgICAgIGVtYWlsOiAnYm9iQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwaG9uZTogbnVsbCxcbiAgICAgICAgICBhZ2VfdHlwZTogJ2FkdWx0JyxcbiAgICAgICAgICBndWVzdF90eXBlOiAnd2VkZGluZ19ndWVzdCcsXG4gICAgICAgICAgZGlldGFyeV9yZXN0cmljdGlvbnM6IG51bGwsXG4gICAgICAgICAgcGx1c19vbmVfbmFtZTogbnVsbCxcbiAgICAgICAgICBwbHVzX29uZV9hdHRlbmRpbmc6IGZhbHNlLFxuICAgICAgICAgIGFycml2YWxfZGF0ZTogbnVsbCxcbiAgICAgICAgICBkZXBhcnR1cmVfZGF0ZTogbnVsbCxcbiAgICAgICAgICBhaXJwb3J0X2NvZGU6IG51bGwsXG4gICAgICAgICAgZmxpZ2h0X251bWJlcjogbnVsbCxcbiAgICAgICAgICBpbnZpdGF0aW9uX3NlbnQ6IGZhbHNlLFxuICAgICAgICAgIGludml0YXRpb25fc2VudF9kYXRlOiBudWxsLFxuICAgICAgICAgIHJzdnBfZGVhZGxpbmU6IG51bGwsXG4gICAgICAgICAgbm90ZXM6IG51bGwsXG4gICAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgY29uc3QgbW9ja09yZGVyMiA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG1vY2tHdWVzdHMsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICBjb3VudDogMixcbiAgICAgIH0gYXMgYW55KTtcbiAgICAgIGNvbnN0IG1vY2tPcmRlcjEgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgb3JkZXI6IG1vY2tPcmRlcjIsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IG1vY2tSYW5nZSA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBvcmRlcjogbW9ja09yZGVyMSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgbW9ja1NlbGVjdCA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICByYW5nZTogbW9ja1JhbmdlLFxuICAgICAgfSk7XG4gICAgICAobW9ja0Zyb20gYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzZWxlY3Q6IG1vY2tTZWxlY3QsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlLmxpc3Qoe30pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmd1ZXN0cykudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEudG90YWwpLnRvQmUoMik7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5wYWdlKS50b0JlKDEpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEucGFnZVNpemUpLnRvQmUoNTApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmaWx0ZXIgYnkgZ3JvdXBJZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tPcmRlcjIgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIGNvdW50OiAwLFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgY29uc3QgbW9ja09yZGVyMSA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBvcmRlcjogbW9ja09yZGVyMixcbiAgICAgIH0pO1xuICAgICAgY29uc3QgbW9ja1JhbmdlID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIG9yZGVyOiBtb2NrT3JkZXIxLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBtb2NrRXEgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgcmFuZ2U6IG1vY2tSYW5nZSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgbW9ja1NlbGVjdCA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBlcTogbW9ja0VxLFxuICAgICAgfSk7XG4gICAgICAobW9ja0Zyb20gYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzZWxlY3Q6IG1vY2tTZWxlY3QsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlLmxpc3QoeyBncm91cElkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiBmb3IgaW52YWxpZCBmaWx0ZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlLmxpc3QoeyBncm91cElkOiAnaW52YWxpZC11dWlkJyB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdzZWFyY2gnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc2VhcmNoIHJlc3VsdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrR3Vlc3RzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdndWVzdC0xJyxcbiAgICAgICAgICBncm91cF9pZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgICAgZmlyc3RfbmFtZTogJ0pvaG4nLFxuICAgICAgICAgIGxhc3RfbmFtZTogJ0RvZScsXG4gICAgICAgICAgZW1haWw6ICdqb2huQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwaG9uZTogbnVsbCxcbiAgICAgICAgICBhZ2VfdHlwZTogJ2FkdWx0JyxcbiAgICAgICAgICBndWVzdF90eXBlOiAnd2VkZGluZ19ndWVzdCcsXG4gICAgICAgICAgZGlldGFyeV9yZXN0cmljdGlvbnM6IG51bGwsXG4gICAgICAgICAgcGx1c19vbmVfbmFtZTogbnVsbCxcbiAgICAgICAgICBwbHVzX29uZV9hdHRlbmRpbmc6IGZhbHNlLFxuICAgICAgICAgIGFycml2YWxfZGF0ZTogbnVsbCxcbiAgICAgICAgICBkZXBhcnR1cmVfZGF0ZTogbnVsbCxcbiAgICAgICAgICBhaXJwb3J0X2NvZGU6IG51bGwsXG4gICAgICAgICAgZmxpZ2h0X251bWJlcjogbnVsbCxcbiAgICAgICAgICBpbnZpdGF0aW9uX3NlbnQ6IGZhbHNlLFxuICAgICAgICAgIGludml0YXRpb25fc2VudF9kYXRlOiBudWxsLFxuICAgICAgICAgIHJzdnBfZGVhZGxpbmU6IG51bGwsXG4gICAgICAgICAgbm90ZXM6IG51bGwsXG4gICAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgY29uc3QgbW9ja09yZGVyMiA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG1vY2tHdWVzdHMsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICBjb3VudDogMSxcbiAgICAgIH0gYXMgYW55KTtcbiAgICAgIGNvbnN0IG1vY2tPcmRlcjEgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgb3JkZXI6IG1vY2tPcmRlcjIsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IG1vY2tSYW5nZSA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBvcmRlcjogbW9ja09yZGVyMSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgbW9ja09yID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHJhbmdlOiBtb2NrUmFuZ2UsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IG1vY2tTZWxlY3QgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgb3I6IG1vY2tPcixcbiAgICAgIH0pO1xuICAgICAgKG1vY2tGcm9tIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBtb2NrU2VsZWN0LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1ZXN0U2VydmljZS5zZWFyY2goeyBxdWVyeTogJ0pvaG4nIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmd1ZXN0cykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuZ3Vlc3RzWzBdLmZpcnN0TmFtZSkudG9CZSgnSm9obicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIHF1ZXJ5IGlzIGVtcHR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlLnNlYXJjaCh7IHF1ZXJ5OiAnJyB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNhbml0aXplIHNlYXJjaCBxdWVyeSB0byBwcmV2ZW50IFNRTCBpbmplY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtYWxpY2lvdXNRdWVyeSA9IFwiJzsgRFJPUCBUQUJMRSBndWVzdHM7IC0tXCI7XG5cbiAgICAgIGNvbnN0IG1vY2tPcmRlcjIgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIGNvdW50OiAwLFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgY29uc3QgbW9ja09yZGVyMSA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBvcmRlcjogbW9ja09yZGVyMixcbiAgICAgIH0pO1xuICAgICAgY29uc3QgbW9ja1JhbmdlID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIG9yZGVyOiBtb2NrT3JkZXIxLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBtb2NrT3IgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgcmFuZ2U6IG1vY2tSYW5nZSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgbW9ja1NlbGVjdCA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBvcjogbW9ja09yLFxuICAgICAgfSk7XG4gICAgICAobW9ja0Zyb20gYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzZWxlY3Q6IG1vY2tTZWxlY3QsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlLnNlYXJjaCh7IHF1ZXJ5OiBtYWxpY2lvdXNRdWVyeSB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgLy8gVGhlIHF1ZXJ5IHNob3VsZCBiZSBzYW5pdGl6ZWQgYW5kIG5vdCBjYXVzZSBpc3N1ZXNcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2J1bGtVcGRhdGUnLCAoKSA9PiB7XG4gICAgY29uc3QgdmFsaWRJZHMgPSBbXG4gICAgICAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICcyMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgJzMyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgXTtcblxuICAgIGNvbnN0IHVwZGF0ZURhdGE6IFVwZGF0ZUd1ZXN0RFRPID0ge1xuICAgICAgaW52aXRhdGlvblNlbnQ6IHRydWUsXG4gICAgICBpbnZpdGF0aW9uU2VudERhdGU6ICcyMDI1LTAxLTI1JyxcbiAgICB9O1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc3VjY2VzcyB3aXRoIHVwZGF0ZWQgZ3Vlc3RzIHdoZW4gdmFsaWQgZGF0YSBwcm92aWRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tHdWVzdHMgPSB2YWxpZElkcy5tYXAoKGlkLCBpbmRleCkgPT4gKHtcbiAgICAgICAgaWQsXG4gICAgICAgIGdyb3VwX2lkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgZmlyc3RfbmFtZTogYEd1ZXN0JHtpbmRleCArIDF9YCxcbiAgICAgICAgbGFzdF9uYW1lOiAnRG9lJyxcbiAgICAgICAgZW1haWw6IGBndWVzdCR7aW5kZXggKyAxfUBleGFtcGxlLmNvbWAsXG4gICAgICAgIHBob25lOiBudWxsLFxuICAgICAgICBhZ2VfdHlwZTogJ2FkdWx0JyxcbiAgICAgICAgZ3Vlc3RfdHlwZTogJ3dlZGRpbmdfZ3Vlc3QnLFxuICAgICAgICBkaWV0YXJ5X3Jlc3RyaWN0aW9uczogbnVsbCxcbiAgICAgICAgcGx1c19vbmVfbmFtZTogbnVsbCxcbiAgICAgICAgcGx1c19vbmVfYXR0ZW5kaW5nOiBmYWxzZSxcbiAgICAgICAgYXJyaXZhbF9kYXRlOiBudWxsLFxuICAgICAgICBkZXBhcnR1cmVfZGF0ZTogbnVsbCxcbiAgICAgICAgYWlycG9ydF9jb2RlOiBudWxsLFxuICAgICAgICBmbGlnaHRfbnVtYmVyOiBudWxsLFxuICAgICAgICBpbnZpdGF0aW9uX3NlbnQ6IHRydWUsXG4gICAgICAgIGludml0YXRpb25fc2VudF9kYXRlOiAnMjAyNS0wMS0yNScsXG4gICAgICAgIHJzdnBfZGVhZGxpbmU6IG51bGwsXG4gICAgICAgIG5vdGVzOiBudWxsLFxuICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgfSkpO1xuXG4gICAgICBjb25zdCBtb2NrU2VsZWN0ID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbW9ja0d1ZXN0cyxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrSW4gPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBtb2NrU2VsZWN0LFxuICAgICAgfSk7XG4gICAgICBjb25zdCBtb2NrVXBkYXRlID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGluOiBtb2NrSW4sXG4gICAgICB9KTtcbiAgICAgIChtb2NrRnJvbSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVwZGF0ZTogbW9ja1VwZGF0ZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2UuYnVsa1VwZGF0ZSh2YWxpZElkcywgdXBkYXRlRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvSGF2ZUxlbmd0aCgzKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhWzBdLmludml0YXRpb25TZW50KS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGFbMV0uaW52aXRhdGlvblNlbnQpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVsyXS5pbnZpdGF0aW9uU2VudCkudG9CZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIFZBTElEQVRJT05fRVJST1Igd2hlbiBJRHMgYXJyYXkgaXMgZW1wdHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2UuYnVsa1VwZGF0ZShbXSwgdXBkYXRlRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignbXVzdCBub3QgYmUgZW1wdHknKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIFZBTElEQVRJT05fRVJST1Igd2hlbiBhbnkgSUQgaXMgaW52YWxpZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRJZHMgPSBbLi4udmFsaWRJZHMsICdpbnZhbGlkLWlkJ107XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2UuYnVsa1VwZGF0ZShpbnZhbGlkSWRzLCB1cGRhdGVEYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdJbnZhbGlkIGd1ZXN0IElEIGZvcm1hdCcpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIHVwZGF0ZSBkYXRhIGlzIGludmFsaWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkRGF0YSA9IHsgZW1haWw6ICdub3QtYW4tZW1haWwnIH07XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2UuYnVsa1VwZGF0ZSh2YWxpZElkcywgaW52YWxpZERhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2FuaXRpemUgaW5wdXQgZmllbGRzIHVzaW5nIHNhbWUgbG9naWMgYXMgc2luZ2xlIHVwZGF0ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1hbGljaW91c0RhdGEgPSB7XG4gICAgICAgIGZpcnN0TmFtZTogJzxzY3JpcHQ+YWxlcnQoXCJ4c3NcIik8L3NjcmlwdD5KYW5lJyxcbiAgICAgICAgbm90ZXM6ICdqYXZhc2NyaXB0OmFsZXJ0KDEpJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tHdWVzdHMgPSB2YWxpZElkcy5tYXAoKGlkLCBpbmRleCkgPT4gKHtcbiAgICAgICAgaWQsXG4gICAgICAgIGdyb3VwX2lkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgZmlyc3RfbmFtZTogJ0phbmUnLFxuICAgICAgICBsYXN0X25hbWU6ICdEb2UnLFxuICAgICAgICBlbWFpbDogYGd1ZXN0JHtpbmRleCArIDF9QGV4YW1wbGUuY29tYCxcbiAgICAgICAgcGhvbmU6IG51bGwsXG4gICAgICAgIGFnZV90eXBlOiAnYWR1bHQnLFxuICAgICAgICBndWVzdF90eXBlOiAnd2VkZGluZ19ndWVzdCcsXG4gICAgICAgIGRpZXRhcnlfcmVzdHJpY3Rpb25zOiBudWxsLFxuICAgICAgICBwbHVzX29uZV9uYW1lOiBudWxsLFxuICAgICAgICBwbHVzX29uZV9hdHRlbmRpbmc6IGZhbHNlLFxuICAgICAgICBhcnJpdmFsX2RhdGU6IG51bGwsXG4gICAgICAgIGRlcGFydHVyZV9kYXRlOiBudWxsLFxuICAgICAgICBhaXJwb3J0X2NvZGU6IG51bGwsXG4gICAgICAgIGZsaWdodF9udW1iZXI6IG51bGwsXG4gICAgICAgIGludml0YXRpb25fc2VudDogZmFsc2UsXG4gICAgICAgIGludml0YXRpb25fc2VudF9kYXRlOiBudWxsLFxuICAgICAgICByc3ZwX2RlYWRsaW5lOiBudWxsLFxuICAgICAgICBub3RlczogJ2phdmFzY3JpcHRhbGVydDEnLFxuICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgfSkpO1xuXG4gICAgICBjb25zdCBtb2NrU2VsZWN0ID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbW9ja0d1ZXN0cyxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrSW4gPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBtb2NrU2VsZWN0LFxuICAgICAgfSk7XG4gICAgICBjb25zdCBtb2NrVXBkYXRlID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGluOiBtb2NrSW4sXG4gICAgICB9KTtcbiAgICAgIChtb2NrRnJvbSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVwZGF0ZTogbW9ja1VwZGF0ZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2UuYnVsa1VwZGF0ZSh2YWxpZElkcywgbWFsaWNpb3VzRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICByZXN1bHQuZGF0YS5mb3JFYWNoKChndWVzdCkgPT4ge1xuICAgICAgICAgIGV4cGVjdChndWVzdC5maXJzdE5hbWUpLm5vdC50b0NvbnRhaW4oJzxzY3JpcHQ+Jyk7XG4gICAgICAgICAgZXhwZWN0KGd1ZXN0Lm5vdGVzKS5ub3QudG9Db250YWluKCdqYXZhc2NyaXB0OicpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIFZBTElEQVRJT05fRVJST1Igd2hlbiBub3QgYWxsIGd1ZXN0cyBhcmUgdXBkYXRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFNpbXVsYXRlIG9ubHkgMiBndWVzdHMgYmVpbmcgdXBkYXRlZCB3aGVuIDMgd2VyZSByZXF1ZXN0ZWRcbiAgICAgIGNvbnN0IG1vY2tHdWVzdHMgPSB2YWxpZElkcy5zbGljZSgwLCAyKS5tYXAoKGlkLCBpbmRleCkgPT4gKHtcbiAgICAgICAgaWQsXG4gICAgICAgIGdyb3VwX2lkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgZmlyc3RfbmFtZTogYEd1ZXN0JHtpbmRleCArIDF9YCxcbiAgICAgICAgbGFzdF9uYW1lOiAnRG9lJyxcbiAgICAgICAgZW1haWw6IGBndWVzdCR7aW5kZXggKyAxfUBleGFtcGxlLmNvbWAsXG4gICAgICAgIHBob25lOiBudWxsLFxuICAgICAgICBhZ2VfdHlwZTogJ2FkdWx0JyxcbiAgICAgICAgZ3Vlc3RfdHlwZTogJ3dlZGRpbmdfZ3Vlc3QnLFxuICAgICAgICBkaWV0YXJ5X3Jlc3RyaWN0aW9uczogbnVsbCxcbiAgICAgICAgcGx1c19vbmVfbmFtZTogbnVsbCxcbiAgICAgICAgcGx1c19vbmVfYXR0ZW5kaW5nOiBmYWxzZSxcbiAgICAgICAgYXJyaXZhbF9kYXRlOiBudWxsLFxuICAgICAgICBkZXBhcnR1cmVfZGF0ZTogbnVsbCxcbiAgICAgICAgYWlycG9ydF9jb2RlOiBudWxsLFxuICAgICAgICBmbGlnaHRfbnVtYmVyOiBudWxsLFxuICAgICAgICBpbnZpdGF0aW9uX3NlbnQ6IHRydWUsXG4gICAgICAgIGludml0YXRpb25fc2VudF9kYXRlOiAnMjAyNS0wMS0yNScsXG4gICAgICAgIHJzdnBfZGVhZGxpbmU6IG51bGwsXG4gICAgICAgIG5vdGVzOiBudWxsLFxuICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgfSkpO1xuXG4gICAgICBjb25zdCBtb2NrU2VsZWN0ID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbW9ja0d1ZXN0cyxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrSW4gPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBtb2NrU2VsZWN0LFxuICAgICAgfSk7XG4gICAgICBjb25zdCBtb2NrVXBkYXRlID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGluOiBtb2NrSW4sXG4gICAgICB9KTtcbiAgICAgIChtb2NrRnJvbSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVwZGF0ZTogbW9ja1VwZGF0ZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2UuYnVsa1VwZGF0ZSh2YWxpZElkcywgdXBkYXRlRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignRXhwZWN0ZWQgdG8gdXBkYXRlIDMgZ3Vlc3RzJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBEQVRBQkFTRV9FUlJPUiB3aGVuIHVwZGF0ZSBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tTZWxlY3QgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBlcnJvcjogeyBtZXNzYWdlOiAnVXBkYXRlIGZhaWxlZCcsIGNvZGU6ICdEQl9FUlJPUicgfSxcbiAgICAgIH0gYXMgYW55KTtcbiAgICAgIGNvbnN0IG1vY2tJbiA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzZWxlY3Q6IG1vY2tTZWxlY3QsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IG1vY2tVcGRhdGUgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaW46IG1vY2tJbixcbiAgICAgIH0pO1xuICAgICAgKG1vY2tGcm9tIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgdXBkYXRlOiBtb2NrVXBkYXRlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1ZXN0U2VydmljZS5idWxrVXBkYXRlKHZhbGlkSWRzLCB1cGRhdGVEYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdEQVRBQkFTRV9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYnVsa0RlbGV0ZScsICgpID0+IHtcbiAgICBjb25zdCB2YWxpZElkcyA9IFtcbiAgICAgICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgJzIyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAnMzIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICBdO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc3VjY2VzcyB3aGVuIGd1ZXN0cyBhcmUgZGVsZXRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tJbiA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICBjb3VudDogMyxcbiAgICAgIH0gYXMgYW55KTtcbiAgICAgIGNvbnN0IG1vY2tEZWxldGUgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaW46IG1vY2tJbixcbiAgICAgIH0pO1xuICAgICAgKG1vY2tGcm9tIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgZGVsZXRlOiBtb2NrRGVsZXRlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1ZXN0U2VydmljZS5idWxrRGVsZXRlKHZhbGlkSWRzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIElEcyBhcnJheSBpcyBlbXB0eScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1ZXN0U2VydmljZS5idWxrRGVsZXRlKFtdKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdtdXN0IG5vdCBiZSBlbXB0eScpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIGFueSBJRCBpcyBpbnZhbGlkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZElkcyA9IFsuLi52YWxpZElkcywgJ2ludmFsaWQtaWQnXTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1ZXN0U2VydmljZS5idWxrRGVsZXRlKGludmFsaWRJZHMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ0ludmFsaWQgZ3Vlc3QgSUQgZm9ybWF0Jyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBEQVRBQkFTRV9FUlJPUiB3aGVuIGRlbGV0ZSBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tJbiA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdEZWxldGUgZmFpbGVkJywgY29kZTogJ0RCX0VSUk9SJyB9LFxuICAgICAgICBjb3VudDogbnVsbCxcbiAgICAgIH0gYXMgYW55KTtcbiAgICAgIGNvbnN0IG1vY2tEZWxldGUgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaW46IG1vY2tJbixcbiAgICAgIH0pO1xuICAgICAgKG1vY2tGcm9tIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgZGVsZXRlOiBtb2NrRGVsZXRlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1ZXN0U2VydmljZS5idWxrRGVsZXRlKHZhbGlkSWRzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdEQVRBQkFTRV9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzdWNjZWVkIGV2ZW4gaWYgc29tZSBJRHMgZG8gbm90IGV4aXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU3VwYWJhc2UgZG9lc24ndCBlcnJvciBpZiBzb21lIElEcyBkb24ndCBleGlzdCwgaXQganVzdCBkZWxldGVzIHdoYXQgZXhpc3RzXG4gICAgICBjb25zdCBtb2NrSW4gPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgY291bnQ6IDIsIC8vIE9ubHkgMiBvdXQgb2YgMyBleGlzdGVkXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrRGVsZXRlID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGluOiBtb2NrSW4sXG4gICAgICB9KTtcbiAgICAgIChtb2NrRnJvbSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGRlbGV0ZTogbW9ja0RlbGV0ZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2UuYnVsa0RlbGV0ZSh2YWxpZElkcyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIC8vIFRoaXMgaXMgYWNjZXB0YWJsZSBiZWhhdmlvciBmb3IgYnVsayBkZWxldGVcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2J1bGtDcmVhdGUnLCAoKSA9PiB7XG4gICAgY29uc3QgdmFsaWRHdWVzdHNEYXRhOiBDcmVhdGVHdWVzdERUT1tdID0gW1xuICAgICAge1xuICAgICAgICBmaXJzdE5hbWU6ICdKb2huJyxcbiAgICAgICAgbGFzdE5hbWU6ICdEb2UnLFxuICAgICAgICBlbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nLFxuICAgICAgICBncm91cElkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgYWdlVHlwZTogJ2FkdWx0JyxcbiAgICAgICAgZ3Vlc3RUeXBlOiAnd2VkZGluZ19ndWVzdCcsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBmaXJzdE5hbWU6ICdKYW5lJyxcbiAgICAgICAgbGFzdE5hbWU6ICdTbWl0aCcsXG4gICAgICAgIGVtYWlsOiAnamFuZUBleGFtcGxlLmNvbScsXG4gICAgICAgIGdyb3VwSWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICBhZ2VUeXBlOiAnYWR1bHQnLFxuICAgICAgICBndWVzdFR5cGU6ICd3ZWRkaW5nX2d1ZXN0JyxcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHN1Y2Nlc3Mgd2l0aCBjcmVhdGVkIGd1ZXN0cyB3aGVuIHZhbGlkIGRhdGEgcHJvdmlkZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrR3Vlc3RzID0gdmFsaWRHdWVzdHNEYXRhLm1hcCgoZ3Vlc3QsIGluZGV4KSA9PiAoe1xuICAgICAgICBpZDogYGd1ZXN0LSR7aW5kZXggKyAxfWAsXG4gICAgICAgIGdyb3VwX2lkOiBndWVzdC5ncm91cElkLFxuICAgICAgICBmaXJzdF9uYW1lOiBndWVzdC5maXJzdE5hbWUsXG4gICAgICAgIGxhc3RfbmFtZTogZ3Vlc3QubGFzdE5hbWUsXG4gICAgICAgIGVtYWlsOiBndWVzdC5lbWFpbCxcbiAgICAgICAgcGhvbmU6IG51bGwsXG4gICAgICAgIGFnZV90eXBlOiBndWVzdC5hZ2VUeXBlLFxuICAgICAgICBndWVzdF90eXBlOiBndWVzdC5ndWVzdFR5cGUsXG4gICAgICAgIGRpZXRhcnlfcmVzdHJpY3Rpb25zOiBudWxsLFxuICAgICAgICBwbHVzX29uZV9uYW1lOiBudWxsLFxuICAgICAgICBwbHVzX29uZV9hdHRlbmRpbmc6IGZhbHNlLFxuICAgICAgICBhcnJpdmFsX2RhdGU6IG51bGwsXG4gICAgICAgIGRlcGFydHVyZV9kYXRlOiBudWxsLFxuICAgICAgICBhaXJwb3J0X2NvZGU6IG51bGwsXG4gICAgICAgIGZsaWdodF9udW1iZXI6IG51bGwsXG4gICAgICAgIGludml0YXRpb25fc2VudDogZmFsc2UsXG4gICAgICAgIGludml0YXRpb25fc2VudF9kYXRlOiBudWxsLFxuICAgICAgICByc3ZwX2RlYWRsaW5lOiBudWxsLFxuICAgICAgICBub3RlczogbnVsbCxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgIH0pKTtcblxuICAgICAgY29uc3QgbW9ja1NlbGVjdCA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG1vY2tHdWVzdHMsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgY29uc3QgbW9ja0luc2VydCA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzZWxlY3Q6IG1vY2tTZWxlY3QsXG4gICAgICB9KTtcbiAgICAgIChtb2NrRnJvbSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGluc2VydDogbW9ja0luc2VydCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2UuYnVsa0NyZWF0ZSh2YWxpZEd1ZXN0c0RhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVswXS5maXJzdE5hbWUpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhWzFdLmZpcnN0TmFtZSkudG9CZSgnSmFuZScpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIGd1ZXN0cyBhcnJheSBpcyBlbXB0eScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1ZXN0U2VydmljZS5idWxrQ3JlYXRlKFtdKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdtdXN0IG5vdCBiZSBlbXB0eScpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIGFueSBndWVzdCBkYXRhIGlzIGludmFsaWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkR3Vlc3RzRGF0YSA9IFtcbiAgICAgICAgLi4udmFsaWRHdWVzdHNEYXRhLFxuICAgICAgICB7XG4gICAgICAgICAgZmlyc3ROYW1lOiAnJywgLy8gSW52YWxpZCAtIGVtcHR5XG4gICAgICAgICAgbGFzdE5hbWU6ICdJbnZhbGlkJyxcbiAgICAgICAgICBlbWFpbDogJ2ludmFsaWRAZXhhbXBsZS5jb20nLFxuICAgICAgICAgIGdyb3VwSWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICAgIGFnZVR5cGU6ICdhZHVsdCcgYXMgY29uc3QsXG4gICAgICAgICAgZ3Vlc3RUeXBlOiAnd2VkZGluZ19ndWVzdCcgYXMgY29uc3QsXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2UuYnVsa0NyZWF0ZShpbnZhbGlkR3Vlc3RzRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbigndmFsaWRhdGlvbiBlcnJvcicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gREFUQUJBU0VfRVJST1Igd2hlbiBpbnNlcnQgZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrU2VsZWN0ID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ0luc2VydCBmYWlsZWQnLCBjb2RlOiAnREJfRVJST1InIH0sXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrSW5zZXJ0ID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNlbGVjdDogbW9ja1NlbGVjdCxcbiAgICAgIH0pO1xuICAgICAgKG1vY2tGcm9tIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaW5zZXJ0OiBtb2NrSW5zZXJ0LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1ZXN0U2VydmljZS5idWxrQ3JlYXRlKHZhbGlkR3Vlc3RzRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnREFUQUJBU0VfRVJST1InKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2FuaXRpemUgaW5wdXQgdG8gcHJldmVudCBYU1MgYXR0YWNrcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1hbGljaW91c0d1ZXN0c0RhdGEgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBmaXJzdE5hbWU6ICc8c2NyaXB0PmFsZXJ0KFwieHNzXCIpPC9zY3JpcHQ+Sm9obicsXG4gICAgICAgICAgbGFzdE5hbWU6ICdEb2UnLFxuICAgICAgICAgIGVtYWlsOiAnam9obkBleGFtcGxlLmNvbScsXG4gICAgICAgICAgZ3JvdXBJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgICAgYWdlVHlwZTogJ2FkdWx0JyBhcyBjb25zdCxcbiAgICAgICAgICBndWVzdFR5cGU6ICd3ZWRkaW5nX2d1ZXN0JyBhcyBjb25zdCxcbiAgICAgICAgICBub3RlczogJzxpbWcgc3JjPXggb25lcnJvcj1hbGVydCgxKT4nLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgY29uc3QgbW9ja0d1ZXN0cyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnZ3Vlc3QtMScsXG4gICAgICAgICAgZ3JvdXBfaWQ6IG1hbGljaW91c0d1ZXN0c0RhdGFbMF0uZ3JvdXBJZCxcbiAgICAgICAgICBmaXJzdF9uYW1lOiAnSm9obicsXG4gICAgICAgICAgbGFzdF9uYW1lOiAnRG9lJyxcbiAgICAgICAgICBlbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nLFxuICAgICAgICAgIHBob25lOiBudWxsLFxuICAgICAgICAgIGFnZV90eXBlOiAnYWR1bHQnLFxuICAgICAgICAgIGd1ZXN0X3R5cGU6ICd3ZWRkaW5nX2d1ZXN0JyxcbiAgICAgICAgICBkaWV0YXJ5X3Jlc3RyaWN0aW9uczogbnVsbCxcbiAgICAgICAgICBwbHVzX29uZV9uYW1lOiBudWxsLFxuICAgICAgICAgIHBsdXNfb25lX2F0dGVuZGluZzogZmFsc2UsXG4gICAgICAgICAgYXJyaXZhbF9kYXRlOiBudWxsLFxuICAgICAgICAgIGRlcGFydHVyZV9kYXRlOiBudWxsLFxuICAgICAgICAgIGFpcnBvcnRfY29kZTogbnVsbCxcbiAgICAgICAgICBmbGlnaHRfbnVtYmVyOiBudWxsLFxuICAgICAgICAgIGludml0YXRpb25fc2VudDogZmFsc2UsXG4gICAgICAgICAgaW52aXRhdGlvbl9zZW50X2RhdGU6IG51bGwsXG4gICAgICAgICAgcnN2cF9kZWFkbGluZTogbnVsbCxcbiAgICAgICAgICBub3RlczogJycsXG4gICAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgY29uc3QgbW9ja1NlbGVjdCA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG1vY2tHdWVzdHMsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgY29uc3QgbW9ja0luc2VydCA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzZWxlY3Q6IG1vY2tTZWxlY3QsXG4gICAgICB9KTtcbiAgICAgIChtb2NrRnJvbSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGluc2VydDogbW9ja0luc2VydCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2UuYnVsa0NyZWF0ZShtYWxpY2lvdXNHdWVzdHNEYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVswXS5maXJzdE5hbWUpLm5vdC50b0NvbnRhaW4oJzxzY3JpcHQ+Jyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVswXS5maXJzdE5hbWUpLm5vdC50b0NvbnRhaW4oJ2FsZXJ0Jyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVswXS5ub3Rlcykubm90LnRvQ29udGFpbignPGltZycpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGFbMF0ubm90ZXMpLm5vdC50b0NvbnRhaW4oJ29uZXJyb3InKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2V4cG9ydFRvQ1NWJywgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tHdWVzdHMgPSBbXG4gICAgICB7XG4gICAgICAgIGlkOiAnZ3Vlc3QtMScsXG4gICAgICAgIGdyb3VwSWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICBmaXJzdE5hbWU6ICdKb2huJyxcbiAgICAgICAgbGFzdE5hbWU6ICdEb2UnLFxuICAgICAgICBlbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nLFxuICAgICAgICBwaG9uZTogbnVsbCxcbiAgICAgICAgYWdlVHlwZTogJ2FkdWx0JyBhcyBjb25zdCxcbiAgICAgICAgZ3Vlc3RUeXBlOiAnd2VkZGluZ19ndWVzdCcgYXMgY29uc3QsXG4gICAgICAgIGRpZXRhcnlSZXN0cmljdGlvbnM6IG51bGwsXG4gICAgICAgIHBsdXNPbmVOYW1lOiBudWxsLFxuICAgICAgICBwbHVzT25lQXR0ZW5kaW5nOiBmYWxzZSxcbiAgICAgICAgYXJyaXZhbERhdGU6IG51bGwsXG4gICAgICAgIGRlcGFydHVyZURhdGU6IG51bGwsXG4gICAgICAgIGFpcnBvcnRDb2RlOiBudWxsLFxuICAgICAgICBmbGlnaHROdW1iZXI6IG51bGwsXG4gICAgICAgIGludml0YXRpb25TZW50OiBmYWxzZSxcbiAgICAgICAgaW52aXRhdGlvblNlbnREYXRlOiBudWxsLFxuICAgICAgICByc3ZwRGVhZGxpbmU6IG51bGwsXG4gICAgICAgIG5vdGVzOiBudWxsLFxuICAgICAgICBjcmVhdGVkQXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgIHVwZGF0ZWRBdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAnZ3Vlc3QtMicsXG4gICAgICAgIGdyb3VwSWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICBmaXJzdE5hbWU6ICdKYW5lJyxcbiAgICAgICAgbGFzdE5hbWU6ICdTbWl0aCcsXG4gICAgICAgIGVtYWlsOiAnamFuZUBleGFtcGxlLmNvbScsXG4gICAgICAgIHBob25lOiAnKzEyMzQ1Njc4OTAnLFxuICAgICAgICBhZ2VUeXBlOiAnYWR1bHQnIGFzIGNvbnN0LFxuICAgICAgICBndWVzdFR5cGU6ICd3ZWRkaW5nX2d1ZXN0JyBhcyBjb25zdCxcbiAgICAgICAgZGlldGFyeVJlc3RyaWN0aW9uczogJ1ZlZ2V0YXJpYW4nLFxuICAgICAgICBwbHVzT25lTmFtZTogJ1BsdXMgT25lJyxcbiAgICAgICAgcGx1c09uZUF0dGVuZGluZzogdHJ1ZSxcbiAgICAgICAgYXJyaXZhbERhdGU6ICcyMDI0LTA2LTAxJyxcbiAgICAgICAgZGVwYXJ0dXJlRGF0ZTogJzIwMjQtMDYtMDUnLFxuICAgICAgICBhaXJwb3J0Q29kZTogJ1NKTycsXG4gICAgICAgIGZsaWdodE51bWJlcjogJ0FBMTIzJyxcbiAgICAgICAgaW52aXRhdGlvblNlbnQ6IHRydWUsXG4gICAgICAgIGludml0YXRpb25TZW50RGF0ZTogJzIwMjQtMDEtMTUnLFxuICAgICAgICByc3ZwRGVhZGxpbmU6ICcyMDI0LTA1LTAxJyxcbiAgICAgICAgbm90ZXM6ICdTcGVjaWFsIHJlcXVpcmVtZW50cycsXG4gICAgICAgIGNyZWF0ZWRBdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgdXBkYXRlZEF0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgfSxcbiAgICBdO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc3VjY2VzcyB3aXRoIENTViBzdHJpbmcgd2hlbiB2YWxpZCBndWVzdHMgcHJvdmlkZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2UuZXhwb3J0VG9DU1YobW9ja0d1ZXN0cyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5kYXRhKS50b0JlKCdzdHJpbmcnKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0NvbnRhaW4oJ2dyb3VwSWQsZmlyc3ROYW1lLGxhc3ROYW1lJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9Db250YWluKCdKb2huLERvZScpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvQ29udGFpbignSmFuZSxTbWl0aCcpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc3VjY2VzcyB3aXRoIGVtcHR5IENTViB3aGVuIGVtcHR5IGFycmF5IHByb3ZpZGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlLmV4cG9ydFRvQ1NWKFtdKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9Db250YWluKCdncm91cElkLGZpcnN0TmFtZSxsYXN0TmFtZScpO1xuICAgICAgICAvLyBTaG91bGQgb25seSBjb250YWluIGhlYWRlclxuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuc3BsaXQoJ1xcbicpKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBWQUxJREFUSU9OX0VSUk9SIHdoZW4gZ3Vlc3RzIGlzIG5vdCBhbiBhcnJheScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1ZXN0U2VydmljZS5leHBvcnRUb0NTVihudWxsIGFzIGFueSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignYXJyYXknKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcHJvcGVybHkgZXNjYXBlIENTViBmaWVsZHMgd2l0aCBjb21tYXMgYW5kIHF1b3RlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGd1ZXN0V2l0aFNwZWNpYWxDaGFycyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIC4uLm1vY2tHdWVzdHNbMF0sXG4gICAgICAgICAgZmlyc3ROYW1lOiAnSm9obiwgSnIuJyxcbiAgICAgICAgICBub3RlczogJ0hhcyBcInNwZWNpYWxcIiByZXF1aXJlbWVudHMnLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlLmV4cG9ydFRvQ1NWKGd1ZXN0V2l0aFNwZWNpYWxDaGFycyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvQ29udGFpbignXCJKb2huLCBKci5cIicpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvQ29udGFpbignXCJIYXMgXCJcInNwZWNpYWxcIlwiIHJlcXVpcmVtZW50c1wiJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdpbXBvcnRGcm9tQ1NWJywgKCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkQ1NWID0gYGdyb3VwSWQsZmlyc3ROYW1lLGxhc3ROYW1lLGVtYWlsLHBob25lLGFnZVR5cGUsZ3Vlc3RUeXBlLGRpZXRhcnlSZXN0cmljdGlvbnMscGx1c09uZU5hbWUscGx1c09uZUF0dGVuZGluZyxhcnJpdmFsRGF0ZSxkZXBhcnR1cmVEYXRlLGFpcnBvcnRDb2RlLGZsaWdodE51bWJlcixpbnZpdGF0aW9uU2VudCxpbnZpdGF0aW9uU2VudERhdGUscnN2cERlYWRsaW5lLG5vdGVzXG4xMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAsSm9obixEb2Usam9obkBleGFtcGxlLmNvbSwsYWR1bHQsd2VkZGluZ19ndWVzdCwsLGZhbHNlLCwsLCxmYWxzZSwsLFxuMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwLEphbmUsU21pdGgsamFuZUBleGFtcGxlLmNvbSwrMTIzNDU2Nzg5MCxhZHVsdCx3ZWRkaW5nX2d1ZXN0LFZlZ2V0YXJpYW4sUGx1cyBPbmUsdHJ1ZSwyMDI0LTA2LTAxLDIwMjQtMDYtMDUsU0pPLEFBMTIzLHRydWUsMjAyNC0wMS0xNSwyMDI0LTA1LTAxLFNwZWNpYWwgcmVxdWlyZW1lbnRzYDtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHN1Y2Nlc3Mgd2l0aCBjcmVhdGVkIGd1ZXN0cyB3aGVuIHZhbGlkIENTViBwcm92aWRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tHdWVzdHMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2d1ZXN0LTEnLFxuICAgICAgICAgIGdyb3VwX2lkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgICBmaXJzdF9uYW1lOiAnSm9obicsXG4gICAgICAgICAgbGFzdF9uYW1lOiAnRG9lJyxcbiAgICAgICAgICBlbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nLFxuICAgICAgICAgIHBob25lOiBudWxsLFxuICAgICAgICAgIGFnZV90eXBlOiAnYWR1bHQnLFxuICAgICAgICAgIGd1ZXN0X3R5cGU6ICd3ZWRkaW5nX2d1ZXN0JyxcbiAgICAgICAgICBkaWV0YXJ5X3Jlc3RyaWN0aW9uczogbnVsbCxcbiAgICAgICAgICBwbHVzX29uZV9uYW1lOiBudWxsLFxuICAgICAgICAgIHBsdXNfb25lX2F0dGVuZGluZzogZmFsc2UsXG4gICAgICAgICAgYXJyaXZhbF9kYXRlOiBudWxsLFxuICAgICAgICAgIGRlcGFydHVyZV9kYXRlOiBudWxsLFxuICAgICAgICAgIGFpcnBvcnRfY29kZTogbnVsbCxcbiAgICAgICAgICBmbGlnaHRfbnVtYmVyOiBudWxsLFxuICAgICAgICAgIGludml0YXRpb25fc2VudDogZmFsc2UsXG4gICAgICAgICAgaW52aXRhdGlvbl9zZW50X2RhdGU6IG51bGwsXG4gICAgICAgICAgcnN2cF9kZWFkbGluZTogbnVsbCxcbiAgICAgICAgICBub3RlczogbnVsbCxcbiAgICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2d1ZXN0LTInLFxuICAgICAgICAgIGdyb3VwX2lkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgICBmaXJzdF9uYW1lOiAnSmFuZScsXG4gICAgICAgICAgbGFzdF9uYW1lOiAnU21pdGgnLFxuICAgICAgICAgIGVtYWlsOiAnamFuZUBleGFtcGxlLmNvbScsXG4gICAgICAgICAgcGhvbmU6ICcrMTIzNDU2Nzg5MCcsXG4gICAgICAgICAgYWdlX3R5cGU6ICdhZHVsdCcsXG4gICAgICAgICAgZ3Vlc3RfdHlwZTogJ3dlZGRpbmdfZ3Vlc3QnLFxuICAgICAgICAgIGRpZXRhcnlfcmVzdHJpY3Rpb25zOiAnVmVnZXRhcmlhbicsXG4gICAgICAgICAgcGx1c19vbmVfbmFtZTogJ1BsdXMgT25lJyxcbiAgICAgICAgICBwbHVzX29uZV9hdHRlbmRpbmc6IHRydWUsXG4gICAgICAgICAgYXJyaXZhbF9kYXRlOiAnMjAyNC0wNi0wMScsXG4gICAgICAgICAgZGVwYXJ0dXJlX2RhdGU6ICcyMDI0LTA2LTA1JyxcbiAgICAgICAgICBhaXJwb3J0X2NvZGU6ICdTSk8nLFxuICAgICAgICAgIGZsaWdodF9udW1iZXI6ICdBQTEyMycsXG4gICAgICAgICAgaW52aXRhdGlvbl9zZW50OiB0cnVlLFxuICAgICAgICAgIGludml0YXRpb25fc2VudF9kYXRlOiAnMjAyNC0wMS0xNScsXG4gICAgICAgICAgcnN2cF9kZWFkbGluZTogJzIwMjQtMDUtMDEnLFxuICAgICAgICAgIG5vdGVzOiAnU3BlY2lhbCByZXF1aXJlbWVudHMnLFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgfSxcbiAgICAgIF07XG5cbiAgICAgIC8vIE1vY2sgdGhlIGNyZWF0ZSBmdW5jdGlvbiBjYWxsc1xuICAgICAgbGV0IGNhbGxDb3VudCA9IDA7XG4gICAgICBjb25zdCBtb2NrU2luZ2xlID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGd1ZXN0ID0gbW9ja0d1ZXN0c1tjYWxsQ291bnQrK107XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgIGRhdGE6IGd1ZXN0LFxuICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgY29uc3QgbW9ja1NlbGVjdCA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzaW5nbGU6IG1vY2tTaW5nbGUsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IG1vY2tJbnNlcnQgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBtb2NrU2VsZWN0LFxuICAgICAgfSk7XG4gICAgICAobW9ja0Zyb20gYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpbnNlcnQ6IG1vY2tJbnNlcnQsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlLmltcG9ydEZyb21DU1YodmFsaWRDU1YpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVswXS5maXJzdE5hbWUpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhWzFdLmZpcnN0TmFtZSkudG9CZSgnSmFuZScpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIENTViBjb250ZW50IGlzIGVtcHR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlLmltcG9ydEZyb21DU1YoJycpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ3JlcXVpcmVkJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBWQUxJREFUSU9OX0VSUk9SIHdoZW4gQ1NWIGhhcyBubyBkYXRhIHJvd3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBoZWFkZXJPbmx5Q1NWID0gJ2dyb3VwSWQsZmlyc3ROYW1lLGxhc3ROYW1lLGVtYWlsLHBob25lLGFnZVR5cGUsZ3Vlc3RUeXBlLGRpZXRhcnlSZXN0cmljdGlvbnMscGx1c09uZU5hbWUscGx1c09uZUF0dGVuZGluZyxhcnJpdmFsRGF0ZSxkZXBhcnR1cmVEYXRlLGFpcnBvcnRDb2RlLGZsaWdodE51bWJlcixpbnZpdGF0aW9uU2VudCxpbnZpdGF0aW9uU2VudERhdGUscnN2cERlYWRsaW5lLG5vdGVzJztcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlLmltcG9ydEZyb21DU1YoaGVhZGVyT25seUNTVik7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignYXQgbGVhc3Qgb25lIGRhdGEgcm93Jyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBWQUxJREFUSU9OX0VSUk9SIHdoZW4gQ1NWIGhlYWRlciBpcyBpbmNvcnJlY3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkSGVhZGVyQ1NWID0gJ3dyb25nSGVhZGVyLGZpcnN0TmFtZSxsYXN0TmFtZVxcbnZhbHVlMSxKb2huLERvZSc7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1ZXN0U2VydmljZS5pbXBvcnRGcm9tQ1NWKGludmFsaWRIZWFkZXJDU1YpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ2hlYWRlciBtaXNtYXRjaCcpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIENTViBoYXMgaW52YWxpZCBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZERhdGFDU1YgPSBgZ3JvdXBJZCxmaXJzdE5hbWUsbGFzdE5hbWUsZW1haWwscGhvbmUsYWdlVHlwZSxndWVzdFR5cGUsZGlldGFyeVJlc3RyaWN0aW9ucyxwbHVzT25lTmFtZSxwbHVzT25lQXR0ZW5kaW5nLGFycml2YWxEYXRlLGRlcGFydHVyZURhdGUsYWlycG9ydENvZGUsZmxpZ2h0TnVtYmVyLGludml0YXRpb25TZW50LGludml0YXRpb25TZW50RGF0ZSxyc3ZwRGVhZGxpbmUsbm90ZXNcbmludmFsaWQtdXVpZCwsRG9lLGludmFsaWQtZW1haWwsLGFkdWx0LHdlZGRpbmdfZ3Vlc3QsLCxmYWxzZSwsLCwsZmFsc2UsLCxgO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2UuaW1wb3J0RnJvbUNTVihpbnZhbGlkRGF0YUNTVik7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignaW1wb3J0IGZhaWxlZCcpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gREFUQUJBU0VfRVJST1Igd2hlbiBndWVzdCBjcmVhdGlvbiBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tTaW5nbGUgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBlcnJvcjogeyBtZXNzYWdlOiAnQ3JlYXRpb24gZmFpbGVkJywgY29kZTogJ0RCX0VSUk9SJyB9LFxuICAgICAgfSBhcyBhbnkpO1xuICAgICAgY29uc3QgbW9ja1NlbGVjdCA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzaW5nbGU6IG1vY2tTaW5nbGUsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IG1vY2tJbnNlcnQgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBtb2NrU2VsZWN0LFxuICAgICAgfSk7XG4gICAgICAobW9ja0Zyb20gYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpbnNlcnQ6IG1vY2tJbnNlcnQsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlLmltcG9ydEZyb21DU1YodmFsaWRDU1YpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ1BBUlRJQUxfSU1QT1JUX0ZBSUxVUkUnKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ2ZhaWxlZCcpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgQ1NWIGZpZWxkcyB3aXRoIGNvbW1hcyBhbmQgcXVvdGVzIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNzdldpdGhTcGVjaWFsQ2hhcnMgPSBgZ3JvdXBJZCxmaXJzdE5hbWUsbGFzdE5hbWUsZW1haWwscGhvbmUsYWdlVHlwZSxndWVzdFR5cGUsZGlldGFyeVJlc3RyaWN0aW9ucyxwbHVzT25lTmFtZSxwbHVzT25lQXR0ZW5kaW5nLGFycml2YWxEYXRlLGRlcGFydHVyZURhdGUsYWlycG9ydENvZGUsZmxpZ2h0TnVtYmVyLGludml0YXRpb25TZW50LGludml0YXRpb25TZW50RGF0ZSxyc3ZwRGVhZGxpbmUsbm90ZXNcbjEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCxcIkpvaG4sIEpyLlwiLERvZSxqb2huQGV4YW1wbGUuY29tLCxhZHVsdCx3ZWRkaW5nX2d1ZXN0LCwsZmFsc2UsLCwsLGZhbHNlLCwsXCJIYXMgXCJcInNwZWNpYWxcIlwiIHJlcXVpcmVtZW50c1wiYDtcblxuICAgICAgY29uc3QgbW9ja0d1ZXN0ID0ge1xuICAgICAgICBpZDogJ2d1ZXN0LTEnLFxuICAgICAgICBncm91cF9pZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgIGZpcnN0X25hbWU6ICdKb2huLCBKci4nLFxuICAgICAgICBsYXN0X25hbWU6ICdEb2UnLFxuICAgICAgICBlbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nLFxuICAgICAgICBwaG9uZTogbnVsbCxcbiAgICAgICAgYWdlX3R5cGU6ICdhZHVsdCcsXG4gICAgICAgIGd1ZXN0X3R5cGU6ICd3ZWRkaW5nX2d1ZXN0JyxcbiAgICAgICAgZGlldGFyeV9yZXN0cmljdGlvbnM6IG51bGwsXG4gICAgICAgIHBsdXNfb25lX25hbWU6IG51bGwsXG4gICAgICAgIHBsdXNfb25lX2F0dGVuZGluZzogZmFsc2UsXG4gICAgICAgIGFycml2YWxfZGF0ZTogbnVsbCxcbiAgICAgICAgZGVwYXJ0dXJlX2RhdGU6IG51bGwsXG4gICAgICAgIGFpcnBvcnRfY29kZTogbnVsbCxcbiAgICAgICAgZmxpZ2h0X251bWJlcjogbnVsbCxcbiAgICAgICAgaW52aXRhdGlvbl9zZW50OiBmYWxzZSxcbiAgICAgICAgaW52aXRhdGlvbl9zZW50X2RhdGU6IG51bGwsXG4gICAgICAgIHJzdnBfZGVhZGxpbmU6IG51bGwsXG4gICAgICAgIG5vdGVzOiAnSGFzIFwic3BlY2lhbFwiIHJlcXVpcmVtZW50cycsXG4gICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBtb2NrU2luZ2xlID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbW9ja0d1ZXN0LFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0gYXMgYW55KTtcbiAgICAgIGNvbnN0IG1vY2tTZWxlY3QgPSAoamVzdC5mbigpIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2luZ2xlOiBtb2NrU2luZ2xlLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBtb2NrSW5zZXJ0ID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNlbGVjdDogbW9ja1NlbGVjdCxcbiAgICAgIH0pO1xuICAgICAgKG1vY2tGcm9tIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaW5zZXJ0OiBtb2NrSW5zZXJ0LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1ZXN0U2VydmljZS5pbXBvcnRGcm9tQ1NWKGNzdldpdGhTcGVjaWFsQ2hhcnMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhWzBdLmZpcnN0TmFtZSkudG9CZSgnSm9obiwgSnIuJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVswXS5ub3RlcykudG9CZSgnSGFzIFwic3BlY2lhbFwiIHJlcXVpcmVtZW50cycpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQXV0aCBNZXRob2QgSW5oZXJpdGFuY2UnLCAoKSA9PiB7XG4gICAgY29uc3QgdmFsaWREYXRhOiBDcmVhdGVHdWVzdERUTyA9IHtcbiAgICAgIGZpcnN0TmFtZTogJ0pvaG4nLFxuICAgICAgbGFzdE5hbWU6ICdEb2UnLFxuICAgICAgZW1haWw6ICdqb2huQGV4YW1wbGUuY29tJyxcbiAgICAgIGdyb3VwSWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgYWdlVHlwZTogJ2FkdWx0JyxcbiAgICAgIGd1ZXN0VHlwZTogJ3dlZGRpbmdfZ3Vlc3QnLFxuICAgIH07XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgICAgLy8gQ2xlYXIgdGhlIG1vZHVsZSBjYWNoZSB0byByZXNldCB0aGUgc2V0dGluZ3NTZXJ2aWNlIG1vY2tcbiAgICAgIGplc3QucmVzZXRNb2R1bGVzKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGluaGVyaXQgZGVmYXVsdCBhdXRoIG1ldGhvZCBmcm9tIHNldHRpbmdzIHdoZW4gY3JlYXRpbmcgYSBndWVzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgc2V0dGluZ3NTZXJ2aWNlLmdldERlZmF1bHRBdXRoTWV0aG9kXG4gICAgICBqZXN0LmRvTW9jaygnLi9zZXR0aW5nc1NlcnZpY2UnLCAoKSA9PiAoe1xuICAgICAgICBnZXREZWZhdWx0QXV0aE1ldGhvZDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6ICdtYWdpY19saW5rJyxcbiAgICAgICAgfSksXG4gICAgICB9KSk7XG5cbiAgICAgIGNvbnN0IG1vY2tHdWVzdCA9IHtcbiAgICAgICAgaWQ6ICdndWVzdC0xJyxcbiAgICAgICAgZ3JvdXBfaWQ6IHZhbGlkRGF0YS5ncm91cElkLFxuICAgICAgICBmaXJzdF9uYW1lOiB2YWxpZERhdGEuZmlyc3ROYW1lLFxuICAgICAgICBsYXN0X25hbWU6IHZhbGlkRGF0YS5sYXN0TmFtZSxcbiAgICAgICAgZW1haWw6IHZhbGlkRGF0YS5lbWFpbCxcbiAgICAgICAgcGhvbmU6IG51bGwsXG4gICAgICAgIGFnZV90eXBlOiB2YWxpZERhdGEuYWdlVHlwZSxcbiAgICAgICAgZ3Vlc3RfdHlwZTogdmFsaWREYXRhLmd1ZXN0VHlwZSxcbiAgICAgICAgZGlldGFyeV9yZXN0cmljdGlvbnM6IG51bGwsXG4gICAgICAgIHBsdXNfb25lX25hbWU6IG51bGwsXG4gICAgICAgIHBsdXNfb25lX2F0dGVuZGluZzogZmFsc2UsXG4gICAgICAgIGFycml2YWxfZGF0ZTogbnVsbCxcbiAgICAgICAgZGVwYXJ0dXJlX2RhdGU6IG51bGwsXG4gICAgICAgIGFpcnBvcnRfY29kZTogbnVsbCxcbiAgICAgICAgZmxpZ2h0X251bWJlcjogbnVsbCxcbiAgICAgICAgaW52aXRhdGlvbl9zZW50OiBmYWxzZSxcbiAgICAgICAgaW52aXRhdGlvbl9zZW50X2RhdGU6IG51bGwsXG4gICAgICAgIHJzdnBfZGVhZGxpbmU6IG51bGwsXG4gICAgICAgIG5vdGVzOiBudWxsLFxuICAgICAgICBhdXRoX21ldGhvZDogJ21hZ2ljX2xpbmsnLFxuICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja1NpbmdsZSA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG1vY2tHdWVzdCxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrU2VsZWN0ID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNpbmdsZTogbW9ja1NpbmdsZSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgbW9ja0luc2VydCA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzZWxlY3Q6IG1vY2tTZWxlY3QsXG4gICAgICB9KTtcbiAgICAgIChtb2NrRnJvbSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGluc2VydDogbW9ja0luc2VydCxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBSZS1pbXBvcnQgZ3Vlc3RTZXJ2aWNlIHRvIGdldCB0aGUgbW9ja2VkIHNldHRpbmdzU2VydmljZVxuICAgICAgY29uc3QgZ3Vlc3RTZXJ2aWNlTW9kdWxlID0gYXdhaXQgaW1wb3J0KCcuL2d1ZXN0U2VydmljZScpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlTW9kdWxlLmNyZWF0ZSh2YWxpZERhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmF1dGhNZXRob2QpLnRvQmUoJ21hZ2ljX2xpbmsnKTtcbiAgICAgIH1cblxuICAgICAgLy8gVmVyaWZ5IHRoYXQgaW5zZXJ0IHdhcyBjYWxsZWQgd2l0aCBhdXRoX21ldGhvZFxuICAgICAgZXhwZWN0KG1vY2tJbnNlcnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgYXV0aF9tZXRob2Q6ICdtYWdpY19saW5rJyxcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZhbGxiYWNrIHRvIGVtYWlsX21hdGNoaW5nIHdoZW4gc2V0dGluZ3MgZmV0Y2ggZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIHNldHRpbmdzU2VydmljZS5nZXREZWZhdWx0QXV0aE1ldGhvZCB0byBmYWlsXG4gICAgICBqZXN0LmRvTW9jaygnLi9zZXR0aW5nc1NlcnZpY2UnLCAoKSA9PiAoe1xuICAgICAgICBnZXREZWZhdWx0QXV0aE1ldGhvZDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogeyBjb2RlOiAnTk9UX0ZPVU5EJywgbWVzc2FnZTogJ1NldHRpbmcgbm90IGZvdW5kJyB9LFxuICAgICAgICB9KSxcbiAgICAgIH0pKTtcblxuICAgICAgY29uc3QgbW9ja0d1ZXN0ID0ge1xuICAgICAgICBpZDogJ2d1ZXN0LTEnLFxuICAgICAgICBncm91cF9pZDogdmFsaWREYXRhLmdyb3VwSWQsXG4gICAgICAgIGZpcnN0X25hbWU6IHZhbGlkRGF0YS5maXJzdE5hbWUsXG4gICAgICAgIGxhc3RfbmFtZTogdmFsaWREYXRhLmxhc3ROYW1lLFxuICAgICAgICBlbWFpbDogdmFsaWREYXRhLmVtYWlsLFxuICAgICAgICBwaG9uZTogbnVsbCxcbiAgICAgICAgYWdlX3R5cGU6IHZhbGlkRGF0YS5hZ2VUeXBlLFxuICAgICAgICBndWVzdF90eXBlOiB2YWxpZERhdGEuZ3Vlc3RUeXBlLFxuICAgICAgICBkaWV0YXJ5X3Jlc3RyaWN0aW9uczogbnVsbCxcbiAgICAgICAgcGx1c19vbmVfbmFtZTogbnVsbCxcbiAgICAgICAgcGx1c19vbmVfYXR0ZW5kaW5nOiBmYWxzZSxcbiAgICAgICAgYXJyaXZhbF9kYXRlOiBudWxsLFxuICAgICAgICBkZXBhcnR1cmVfZGF0ZTogbnVsbCxcbiAgICAgICAgYWlycG9ydF9jb2RlOiBudWxsLFxuICAgICAgICBmbGlnaHRfbnVtYmVyOiBudWxsLFxuICAgICAgICBpbnZpdGF0aW9uX3NlbnQ6IGZhbHNlLFxuICAgICAgICBpbnZpdGF0aW9uX3NlbnRfZGF0ZTogbnVsbCxcbiAgICAgICAgcnN2cF9kZWFkbGluZTogbnVsbCxcbiAgICAgICAgbm90ZXM6IG51bGwsXG4gICAgICAgIGF1dGhfbWV0aG9kOiAnZW1haWxfbWF0Y2hpbmcnLFxuICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja1NpbmdsZSA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG1vY2tHdWVzdCxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrU2VsZWN0ID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNpbmdsZTogbW9ja1NpbmdsZSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgbW9ja0luc2VydCA9IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzZWxlY3Q6IG1vY2tTZWxlY3QsXG4gICAgICB9KTtcbiAgICAgIChtb2NrRnJvbSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGluc2VydDogbW9ja0luc2VydCxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBSZS1pbXBvcnQgZ3Vlc3RTZXJ2aWNlIHRvIGdldCB0aGUgbW9ja2VkIHNldHRpbmdzU2VydmljZVxuICAgICAgY29uc3QgZ3Vlc3RTZXJ2aWNlTW9kdWxlID0gYXdhaXQgaW1wb3J0KCcuL2d1ZXN0U2VydmljZScpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3Vlc3RTZXJ2aWNlTW9kdWxlLmNyZWF0ZSh2YWxpZERhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmF1dGhNZXRob2QpLnRvQmUoJ2VtYWlsX21hdGNoaW5nJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFZlcmlmeSB0aGF0IGluc2VydCB3YXMgY2FsbGVkIHdpdGggZmFsbGJhY2sgYXV0aF9tZXRob2RcbiAgICAgIGV4cGVjdChtb2NrSW5zZXJ0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGF1dGhfbWV0aG9kOiAnZW1haWxfbWF0Y2hpbmcnLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5oZXJpdCBhdXRoIG1ldGhvZCBmb3IgYnVsayBjcmVhdGUgb3BlcmF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgc2V0dGluZ3NTZXJ2aWNlLmdldERlZmF1bHRBdXRoTWV0aG9kXG4gICAgICBqZXN0LmRvTW9jaygnLi9zZXR0aW5nc1NlcnZpY2UnLCAoKSA9PiAoe1xuICAgICAgICBnZXREZWZhdWx0QXV0aE1ldGhvZDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6ICdtYWdpY19saW5rJyxcbiAgICAgICAgfSksXG4gICAgICB9KSk7XG5cbiAgICAgIGNvbnN0IGd1ZXN0c0RhdGE6IENyZWF0ZUd1ZXN0RFRPW10gPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBmaXJzdE5hbWU6ICdKb2huJyxcbiAgICAgICAgICBsYXN0TmFtZTogJ0RvZScsXG4gICAgICAgICAgZW1haWw6ICdqb2huQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBncm91cElkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgICBhZ2VUeXBlOiAnYWR1bHQnLFxuICAgICAgICAgIGd1ZXN0VHlwZTogJ3dlZGRpbmdfZ3Vlc3QnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZmlyc3ROYW1lOiAnSmFuZScsXG4gICAgICAgICAgbGFzdE5hbWU6ICdEb2UnLFxuICAgICAgICAgIGVtYWlsOiAnamFuZUBleGFtcGxlLmNvbScsXG4gICAgICAgICAgZ3JvdXBJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgICAgYWdlVHlwZTogJ2FkdWx0JyxcbiAgICAgICAgICBndWVzdFR5cGU6ICd3ZWRkaW5nX2d1ZXN0JyxcbiAgICAgICAgfSxcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IG1vY2tHdWVzdHMgPSBndWVzdHNEYXRhLm1hcCgoZGF0YSwgaW5kZXgpID0+ICh7XG4gICAgICAgIGlkOiBgZ3Vlc3QtJHtpbmRleCArIDF9YCxcbiAgICAgICAgZ3JvdXBfaWQ6IGRhdGEuZ3JvdXBJZCxcbiAgICAgICAgZmlyc3RfbmFtZTogZGF0YS5maXJzdE5hbWUsXG4gICAgICAgIGxhc3RfbmFtZTogZGF0YS5sYXN0TmFtZSxcbiAgICAgICAgZW1haWw6IGRhdGEuZW1haWwsXG4gICAgICAgIHBob25lOiBudWxsLFxuICAgICAgICBhZ2VfdHlwZTogZGF0YS5hZ2VUeXBlLFxuICAgICAgICBndWVzdF90eXBlOiBkYXRhLmd1ZXN0VHlwZSxcbiAgICAgICAgZGlldGFyeV9yZXN0cmljdGlvbnM6IG51bGwsXG4gICAgICAgIHBsdXNfb25lX25hbWU6IG51bGwsXG4gICAgICAgIHBsdXNfb25lX2F0dGVuZGluZzogZmFsc2UsXG4gICAgICAgIGFycml2YWxfZGF0ZTogbnVsbCxcbiAgICAgICAgZGVwYXJ0dXJlX2RhdGU6IG51bGwsXG4gICAgICAgIGFpcnBvcnRfY29kZTogbnVsbCxcbiAgICAgICAgZmxpZ2h0X251bWJlcjogbnVsbCxcbiAgICAgICAgaW52aXRhdGlvbl9zZW50OiBmYWxzZSxcbiAgICAgICAgaW52aXRhdGlvbl9zZW50X2RhdGU6IG51bGwsXG4gICAgICAgIHJzdnBfZGVhZGxpbmU6IG51bGwsXG4gICAgICAgIG5vdGVzOiBudWxsLFxuICAgICAgICBhdXRoX21ldGhvZDogJ21hZ2ljX2xpbmsnLFxuICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgfSkpO1xuXG4gICAgICBjb25zdCBtb2NrU2VsZWN0ID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogbW9ja0d1ZXN0cyxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG4gICAgICBjb25zdCBtb2NrSW5zZXJ0ID0gKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNlbGVjdDogbW9ja1NlbGVjdCxcbiAgICAgIH0pO1xuICAgICAgKG1vY2tGcm9tIGFzIGFueSkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaW5zZXJ0OiBtb2NrSW5zZXJ0LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFJlLWltcG9ydCBndWVzdFNlcnZpY2UgdG8gZ2V0IHRoZSBtb2NrZWQgc2V0dGluZ3NTZXJ2aWNlXG4gICAgICBjb25zdCBndWVzdFNlcnZpY2VNb2R1bGUgPSBhd2FpdCBpbXBvcnQoJy4vZ3Vlc3RTZXJ2aWNlJyk7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWVzdFNlcnZpY2VNb2R1bGUuYnVsa0NyZWF0ZShndWVzdHNEYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGFbMF0uYXV0aE1ldGhvZCkudG9CZSgnbWFnaWNfbGluaycpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGFbMV0uYXV0aE1ldGhvZCkudG9CZSgnbWFnaWNfbGluaycpO1xuICAgICAgfVxuXG4gICAgICAvLyBWZXJpZnkgdGhhdCBpbnNlcnQgd2FzIGNhbGxlZCB3aXRoIGF1dGhfbWV0aG9kIGZvciBhbGwgZ3Vlc3RzXG4gICAgICBleHBlY3QobW9ja0luc2VydCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHsgYXV0aF9tZXRob2Q6ICdtYWdpY19saW5rJyB9KSxcbiAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7IGF1dGhfbWV0aG9kOiAnbWFnaWNfbGluaycgfSksXG4gICAgICAgIF0pXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG4iXSwibmFtZXMiOlsibW9ja0Zyb20iLCJqZXN0IiwiZm4iLCJtb2NrIiwic3VwYWJhc2UiLCJmcm9tIiwibW9ja1N1cGFiYXNlQ2hhaW4iLCJjaGFpbiIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJ2YWxpZERhdGEiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImVtYWlsIiwiZ3JvdXBJZCIsImFnZVR5cGUiLCJndWVzdFR5cGUiLCJpdCIsIm1vY2tHdWVzdCIsImlkIiwiZ3JvdXBfaWQiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwicGhvbmUiLCJhZ2VfdHlwZSIsImd1ZXN0X3R5cGUiLCJkaWV0YXJ5X3Jlc3RyaWN0aW9ucyIsInBsdXNfb25lX25hbWUiLCJwbHVzX29uZV9hdHRlbmRpbmciLCJhcnJpdmFsX2RhdGUiLCJkZXBhcnR1cmVfZGF0ZSIsImFpcnBvcnRfY29kZSIsImZsaWdodF9udW1iZXIiLCJpbnZpdGF0aW9uX3NlbnQiLCJpbnZpdGF0aW9uX3NlbnRfZGF0ZSIsInJzdnBfZGVhZGxpbmUiLCJub3RlcyIsImNyZWF0ZWRfYXQiLCJ1cGRhdGVkX2F0IiwibW9ja1NpbmdsZSIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiZGF0YSIsImVycm9yIiwibW9ja1NlbGVjdCIsIm1vY2tSZXR1cm5WYWx1ZSIsInNpbmdsZSIsIm1vY2tJbnNlcnQiLCJzZWxlY3QiLCJpbnNlcnQiLCJyZXN1bHQiLCJndWVzdFNlcnZpY2UiLCJjcmVhdGUiLCJleHBlY3QiLCJzdWNjZXNzIiwidG9CZSIsImludmFsaWREYXRhIiwiY29kZSIsIm1lc3NhZ2UiLCJtYWxpY2lvdXNEYXRhIiwibm90IiwidG9Db250YWluIiwidmFsaWRJZCIsIm1vY2tFcSIsImVxIiwiZ2V0IiwidXBkYXRlRGF0YSIsIm1vY2tVcGRhdGUiLCJ1cGRhdGUiLCJtYWxpY2lvdXNVcGRhdGUiLCJtb2NrRGVsZXRlIiwiZGVsZXRlIiwiZGVsZXRlR3Vlc3QiLCJtb2NrR3Vlc3RzIiwibW9ja09yZGVyMiIsImNvdW50IiwibW9ja09yZGVyMSIsIm9yZGVyIiwibW9ja1JhbmdlIiwicmFuZ2UiLCJsaXN0IiwiZ3Vlc3RzIiwidG9IYXZlTGVuZ3RoIiwidG90YWwiLCJwYWdlIiwicGFnZVNpemUiLCJtb2NrT3IiLCJvciIsInNlYXJjaCIsInF1ZXJ5IiwibWFsaWNpb3VzUXVlcnkiLCJ2YWxpZElkcyIsImludml0YXRpb25TZW50IiwiaW52aXRhdGlvblNlbnREYXRlIiwibWFwIiwiaW5kZXgiLCJtb2NrSW4iLCJpbiIsImJ1bGtVcGRhdGUiLCJpbnZhbGlkSWRzIiwiZm9yRWFjaCIsImd1ZXN0Iiwic2xpY2UiLCJidWxrRGVsZXRlIiwidmFsaWRHdWVzdHNEYXRhIiwiYnVsa0NyZWF0ZSIsImludmFsaWRHdWVzdHNEYXRhIiwibWFsaWNpb3VzR3Vlc3RzRGF0YSIsImRpZXRhcnlSZXN0cmljdGlvbnMiLCJwbHVzT25lTmFtZSIsInBsdXNPbmVBdHRlbmRpbmciLCJhcnJpdmFsRGF0ZSIsImRlcGFydHVyZURhdGUiLCJhaXJwb3J0Q29kZSIsImZsaWdodE51bWJlciIsInJzdnBEZWFkbGluZSIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsImV4cG9ydFRvQ1NWIiwic3BsaXQiLCJndWVzdFdpdGhTcGVjaWFsQ2hhcnMiLCJ2YWxpZENTViIsImNhbGxDb3VudCIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsIlByb21pc2UiLCJyZXNvbHZlIiwiaW1wb3J0RnJvbUNTViIsImhlYWRlck9ubHlDU1YiLCJpbnZhbGlkSGVhZGVyQ1NWIiwiaW52YWxpZERhdGFDU1YiLCJjc3ZXaXRoU3BlY2lhbENoYXJzIiwicmVzZXRNb2R1bGVzIiwiZG9Nb2NrIiwiZ2V0RGVmYXVsdEF1dGhNZXRob2QiLCJhdXRoX21ldGhvZCIsImd1ZXN0U2VydmljZU1vZHVsZSIsImF1dGhNZXRob2QiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsIm9iamVjdENvbnRhaW5pbmciLCJndWVzdHNEYXRhIiwiYXJyYXlDb250YWluaW5nIl0sIm1hcHBpbmdzIjoiOzs7O3lCQUF1RDtzRUFZekI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVQ5Qiw4Q0FBOEM7QUFDOUMsTUFBTUEsV0FBV0MsYUFBSSxDQUFDQyxFQUFFO0FBQ3hCRCxhQUFJLENBQUNFLElBQUksQ0FBQyxrQkFBa0IsSUFBTyxDQUFBO1FBQ2pDQyxVQUFVO1lBQ1JDLE1BQU1MO1FBQ1I7SUFDRixDQUFBO0FBS0EsOENBQThDO0FBQzlDLFNBQVNNLGtCQUFrQkMsS0FBVTtJQUNuQyxPQUFPQTtBQUNUO0FBRUFDLElBQUFBLGlCQUFRLEVBQUMsZ0JBQWdCO0lBQ3ZCQyxJQUFBQSxtQkFBVSxFQUFDO1FBQ1RSLGFBQUksQ0FBQ1MsYUFBYTtJQUNwQjtJQUVBRixJQUFBQSxpQkFBUSxFQUFDLFVBQVU7UUFDakIsTUFBTUcsWUFBNEI7WUFDaENDLFdBQVc7WUFDWEMsVUFBVTtZQUNWQyxPQUFPO1lBQ1BDLFNBQVM7WUFDVEMsU0FBUztZQUNUQyxXQUFXO1FBQ2I7UUFFQUMsSUFBQUEsV0FBRSxFQUFDLG1FQUFtRTtZQUNwRSxNQUFNQyxZQUFZO2dCQUNoQkMsSUFBSTtnQkFDSkMsVUFBVVYsVUFBVUksT0FBTztnQkFDM0JPLFlBQVlYLFVBQVVDLFNBQVM7Z0JBQy9CVyxXQUFXWixVQUFVRSxRQUFRO2dCQUM3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