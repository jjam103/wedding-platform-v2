f631ef51732828b7b4ee336bb318c990
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _fastcheck = /*#__PURE__*/ _interop_require_wildcard(require("fast-check"));
const _globals = require("@jest/globals");
const _sectionsService = require("./sectionsService");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Mock Supabase before importing services
const mockFrom = _globals.jest.fn();
_globals.jest.mock('@/lib/supabase', ()=>({
        supabase: {
            from: mockFrom
        }
    }));
// Feature: destination-wedding-platform, Property 20: Content Version History
(0, _globals.describe)('Feature: destination-wedding-platform, Property 20: Content Version History', ()=>{
    (0, _globals.beforeEach)(()=>{
        _globals.jest.clearAllMocks();
    });
    (0, _globals.it)('should create version entry with timestamp for any content update', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.record({
            pageType: _fastcheck.constantFrom('activity', 'event', 'accommodation', 'room_type', 'custom'),
            pageId: _fastcheck.uuid(),
            userId: _fastcheck.option(_fastcheck.uuid(), {
                nil: null
            }),
            displayOrder: _fastcheck.integer({
                min: 0,
                max: 100
            }),
            sectionId: _fastcheck.uuid(),
            versionId: _fastcheck.uuid()
        }), async (testData)=>{
            const now = new Date().toISOString();
            // Mock listSections call (used by createVersionSnapshot)
            // @ts-expect-error - Mock return type inference issue
            const mockOrder = _globals.jest.fn().mockResolvedValue({
                data: [
                    {
                        id: testData.sectionId,
                        page_type: testData.pageType,
                        page_id: testData.pageId,
                        display_order: testData.displayOrder,
                        created_at: now,
                        updated_at: now
                    }
                ],
                error: null
            });
            const mockEq = _globals.jest.fn().mockReturnValue({
                order: mockOrder
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValueOnce({
                select: mockSelect
            });
            // Mock columns fetch for listSections
            // @ts-expect-error - Mock return type inference issue
            const mockColumnsOrder = _globals.jest.fn().mockResolvedValue({
                data: [],
                error: null
            });
            const mockIn = _globals.jest.fn().mockReturnValue({
                order: mockColumnsOrder
            });
            const mockColumnsSelect = _globals.jest.fn().mockReturnValue({
                in: mockIn
            });
            mockFrom.mockReturnValueOnce({
                select: mockColumnsSelect
            });
            // Record the time before creating version
            const beforeTime = new Date();
            // Mock version snapshot creation
            // @ts-expect-error - Mock return type inference issue
            const mockSingle = _globals.jest.fn().mockResolvedValue({
                data: {
                    id: testData.versionId,
                    page_type: testData.pageType,
                    page_id: testData.pageId,
                    created_by: testData.userId,
                    sections_snapshot: [
                        {
                            id: testData.sectionId,
                            page_type: testData.pageType,
                            page_id: testData.pageId,
                            display_order: testData.displayOrder,
                            created_at: now,
                            updated_at: now,
                            columns: []
                        }
                    ],
                    created_at: now
                },
                error: null
            });
            const mockVersionSelect = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockInsert = _globals.jest.fn().mockReturnValue({
                select: mockVersionSelect
            });
            mockFrom.mockReturnValueOnce({
                insert: mockInsert
            });
            // Create version snapshot
            const versionResult = await (0, _sectionsService.createVersionSnapshot)(testData.pageType, testData.pageId, testData.userId);
            // Record the time after creating version
            const afterTime = new Date();
            // Property: Version creation should succeed
            (0, _globals.expect)(versionResult.success).toBe(true);
            if (!versionResult.success) {
                return true;
            }
            // Property: Version should have a timestamp
            (0, _globals.expect)(versionResult.data.created_at).toBeDefined();
            const versionTime = new Date(versionResult.data.created_at);
            // Property: Timestamp should be between before and after times (with tolerance)
            (0, _globals.expect)(versionTime.getTime()).toBeGreaterThanOrEqual(beforeTime.getTime() - 2000); // 2s tolerance
            (0, _globals.expect)(versionTime.getTime()).toBeLessThanOrEqual(afterTime.getTime() + 2000); // 2s tolerance
            // Property: Version should preserve the page type and ID
            (0, _globals.expect)(versionResult.data.page_type).toBe(testData.pageType);
            (0, _globals.expect)(versionResult.data.page_id).toBe(testData.pageId);
            // Property: Version should preserve the user ID
            (0, _globals.expect)(versionResult.data.created_by).toBe(testData.userId);
            // Property: Version should contain sections snapshot
            (0, _globals.expect)(versionResult.data.sections_snapshot).toBeDefined();
            return true;
        }), {
            numRuns: 20,
            timeout: 5000
        } // Reduced runs and increased timeout
        );
    });
    (0, _globals.it)('should preserve previous version when creating new version', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.record({
            pageType: _fastcheck.constantFrom('activity', 'event', 'accommodation', 'room_type', 'custom'),
            pageId: _fastcheck.uuid(),
            userId: _fastcheck.option(_fastcheck.uuid(), {
                nil: null
            }),
            version1Id: _fastcheck.uuid(),
            version2Id: _fastcheck.uuid(),
            sectionId: _fastcheck.uuid()
        }), async (testData)=>{
            const now1 = new Date().toISOString();
            const now2 = new Date(Date.now() + 1000).toISOString();
            // Mock first version creation - listSections call
            // @ts-expect-error - Mock return type inference issue
            const mockOrder1 = _globals.jest.fn().mockResolvedValue({
                data: [
                    {
                        id: testData.sectionId,
                        page_type: testData.pageType,
                        page_id: testData.pageId,
                        display_order: 0,
                        created_at: now1,
                        updated_at: now1
                    }
                ],
                error: null
            });
            const mockEq1 = _globals.jest.fn().mockReturnValue({
                order: mockOrder1
            });
            const mockSelect1 = _globals.jest.fn().mockReturnValue({
                eq: mockEq1
            });
            mockFrom.mockReturnValueOnce({
                select: mockSelect1
            });
            // Mock columns fetch for first listSections
            // @ts-expect-error - Mock return type inference issue
            const mockColumnsOrder1 = _globals.jest.fn().mockResolvedValue({
                data: [],
                error: null
            });
            const mockIn1 = _globals.jest.fn().mockReturnValue({
                order: mockColumnsOrder1
            });
            const mockColumnsSelect1 = _globals.jest.fn().mockReturnValue({
                in: mockIn1
            });
            mockFrom.mockReturnValueOnce({
                select: mockColumnsSelect1
            });
            // Mock first version insert
            // @ts-expect-error - Mock return type inference issue
            const mockSingle1 = _globals.jest.fn().mockResolvedValue({
                data: {
                    id: testData.version1Id,
                    page_type: testData.pageType,
                    page_id: testData.pageId,
                    created_by: testData.userId,
                    sections_snapshot: [
                        {
                            id: testData.sectionId,
                            page_type: testData.pageType,
                            page_id: testData.pageId,
                            display_order: 0,
                            created_at: now1,
                            updated_at: now1,
                            columns: []
                        }
                    ],
                    created_at: now1
                },
                error: null
            });
            const mockVersionSelect1 = _globals.jest.fn().mockReturnValue({
                single: mockSingle1
            });
            const mockInsert1 = _globals.jest.fn().mockReturnValue({
                select: mockVersionSelect1
            });
            mockFrom.mockReturnValueOnce({
                insert: mockInsert1
            });
            const version1Result = await (0, _sectionsService.createVersionSnapshot)(testData.pageType, testData.pageId, testData.userId);
            // Mock second version creation - listSections call
            // @ts-expect-error - Mock return type inference issue
            const mockOrder2 = _globals.jest.fn().mockResolvedValue({
                data: [
                    {
                        id: testData.sectionId,
                        page_type: testData.pageType,
                        page_id: testData.pageId,
                        display_order: 0,
                        created_at: now2,
                        updated_at: now2
                    }
                ],
                error: null
            });
            const mockEq2 = _globals.jest.fn().mockReturnValue({
                order: mockOrder2
            });
            const mockSelect2 = _globals.jest.fn().mockReturnValue({
                eq: mockEq2
            });
            mockFrom.mockReturnValueOnce({
                select: mockSelect2
            });
            // Mock columns fetch for second listSections
            // @ts-expect-error - Mock return type inference issue
            const mockColumnsOrder2 = _globals.jest.fn().mockResolvedValue({
                data: [],
                error: null
            });
            const mockIn2 = _globals.jest.fn().mockReturnValue({
                order: mockColumnsOrder2
            });
            const mockColumnsSelect2 = _globals.jest.fn().mockReturnValue({
                in: mockIn2
            });
            mockFrom.mockReturnValueOnce({
                select: mockColumnsSelect2
            });
            // Mock second version insert
            // @ts-expect-error - Mock return type inference issue
            const mockSingle2 = _globals.jest.fn().mockResolvedValue({
                data: {
                    id: testData.version2Id,
                    page_type: testData.pageType,
                    page_id: testData.pageId,
                    created_by: testData.userId,
                    sections_snapshot: [
                        {
                            id: testData.sectionId,
                            page_type: testData.pageType,
                            page_id: testData.pageId,
                            display_order: 0,
                            created_at: now2,
                            updated_at: now2,
                            columns: []
                        }
                    ],
                    created_at: now2
                },
                error: null
            });
            const mockVersionSelect2 = _globals.jest.fn().mockReturnValue({
                single: mockSingle2
            });
            const mockInsert2 = _globals.jest.fn().mockReturnValue({
                select: mockVersionSelect2
            });
            mockFrom.mockReturnValueOnce({
                insert: mockInsert2
            });
            const version2Result = await (0, _sectionsService.createVersionSnapshot)(testData.pageType, testData.pageId, testData.userId);
            // Property: Both versions should be created successfully
            (0, _globals.expect)(version1Result.success).toBe(true);
            (0, _globals.expect)(version2Result.success).toBe(true);
            if (!version1Result.success || !version2Result.success) {
                return true;
            }
            // Property: Versions should have different IDs
            (0, _globals.expect)(version1Result.data.id).not.toBe(version2Result.data.id);
            // Property: Second version should have later or equal timestamp
            const time1 = new Date(version1Result.data.created_at).getTime();
            const time2 = new Date(version2Result.data.created_at).getTime();
            (0, _globals.expect)(time2).toBeGreaterThanOrEqual(time1);
            // Mock version history retrieval
            // @ts-expect-error - Mock return type inference issue
            const mockHistoryOrder = _globals.jest.fn().mockResolvedValue({
                data: [
                    version2Result.data,
                    version1Result.data
                ],
                error: null
            });
            const mockHistoryEq = _globals.jest.fn().mockReturnValue({
                order: mockHistoryOrder
            });
            const mockHistorySelect = _globals.jest.fn().mockReturnValue({
                eq: mockHistoryEq
            });
            mockFrom.mockReturnValue({
                select: mockHistorySelect
            });
            const historyResult = await (0, _sectionsService.getVersionHistory)(testData.pageId);
            if (!historyResult.success) {
                return true;
            }
            // Property: Both versions should exist in history
            const foundVersion1 = historyResult.data.find((v)=>v.id === version1Result.data.id);
            const foundVersion2 = historyResult.data.find((v)=>v.id === version2Result.data.id);
            (0, _globals.expect)(foundVersion1).toBeDefined();
            (0, _globals.expect)(foundVersion2).toBeDefined();
            // Property: Versions should be ordered by created_at (newest first)
            if (historyResult.data.length >= 2) {
                for(let i = 0; i < historyResult.data.length - 1; i++){
                    const current = new Date(historyResult.data[i].created_at);
                    const next = new Date(historyResult.data[i + 1].created_at);
                    (0, _globals.expect)(current.getTime()).toBeGreaterThanOrEqual(next.getTime());
                }
            }
            return true;
        }), {
            numRuns: 10,
            timeout: 5000
        } // Fewer runs due to async operations and increased timeout
        );
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvc2VydmljZXMvY29udGVudFZlcnNpb25IaXN0b3J5LnByb3BlcnR5LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgZmMgZnJvbSAnZmFzdC1jaGVjayc7XG5pbXBvcnQgeyBqZXN0LCBkZXNjcmliZSwgaXQsIGV4cGVjdCwgYmVmb3JlRWFjaCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuXG4vLyBNb2NrIFN1cGFiYXNlIGJlZm9yZSBpbXBvcnRpbmcgc2VydmljZXNcbmNvbnN0IG1vY2tGcm9tID0gamVzdC5mbigpO1xuamVzdC5tb2NrKCdAL2xpYi9zdXBhYmFzZScsICgpID0+ICh7XG4gIHN1cGFiYXNlOiB7XG4gICAgZnJvbTogbW9ja0Zyb20sXG4gIH0sXG59KSk7XG5cbi8vIEltcG9ydCBhZnRlciBtb2NraW5nXG5pbXBvcnQge1xuICBjcmVhdGVTZWN0aW9uLFxuICBjcmVhdGVWZXJzaW9uU25hcHNob3QsXG4gIGdldFZlcnNpb25IaXN0b3J5LFxufSBmcm9tICcuL3NlY3Rpb25zU2VydmljZSc7XG5cbi8vIEZlYXR1cmU6IGRlc3RpbmF0aW9uLXdlZGRpbmctcGxhdGZvcm0sIFByb3BlcnR5IDIwOiBDb250ZW50IFZlcnNpb24gSGlzdG9yeVxuXG5kZXNjcmliZSgnRmVhdHVyZTogZGVzdGluYXRpb24td2VkZGluZy1wbGF0Zm9ybSwgUHJvcGVydHkgMjA6IENvbnRlbnQgVmVyc2lvbiBIaXN0b3J5JywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBjcmVhdGUgdmVyc2lvbiBlbnRyeSB3aXRoIHRpbWVzdGFtcCBmb3IgYW55IGNvbnRlbnQgdXBkYXRlJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGZjLmFzc2VydChcbiAgICAgIGZjLmFzeW5jUHJvcGVydHkoXG4gICAgICAgIGZjLnJlY29yZCh7XG4gICAgICAgICAgcGFnZVR5cGU6IGZjLmNvbnN0YW50RnJvbSgnYWN0aXZpdHknLCAnZXZlbnQnLCAnYWNjb21tb2RhdGlvbicsICdyb29tX3R5cGUnLCAnY3VzdG9tJyksXG4gICAgICAgICAgcGFnZUlkOiBmYy51dWlkKCksXG4gICAgICAgICAgdXNlcklkOiBmYy5vcHRpb24oZmMudXVpZCgpLCB7IG5pbDogbnVsbCB9KSxcbiAgICAgICAgICBkaXNwbGF5T3JkZXI6IGZjLmludGVnZXIoeyBtaW46IDAsIG1heDogMTAwIH0pLFxuICAgICAgICAgIHNlY3Rpb25JZDogZmMudXVpZCgpLFxuICAgICAgICAgIHZlcnNpb25JZDogZmMudXVpZCgpLFxuICAgICAgICB9KSxcbiAgICAgICAgYXN5bmMgKHRlc3REYXRhKSA9PiB7XG4gICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIE1vY2sgbGlzdFNlY3Rpb25zIGNhbGwgKHVzZWQgYnkgY3JlYXRlVmVyc2lvblNuYXBzaG90KVxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBNb2NrIHJldHVybiB0eXBlIGluZmVyZW5jZSBpc3N1ZVxuICAgICAgICAgIGNvbnN0IG1vY2tPcmRlciA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICBkYXRhOiBbe1xuICAgICAgICAgICAgICBpZDogdGVzdERhdGEuc2VjdGlvbklkLFxuICAgICAgICAgICAgICBwYWdlX3R5cGU6IHRlc3REYXRhLnBhZ2VUeXBlLFxuICAgICAgICAgICAgICBwYWdlX2lkOiB0ZXN0RGF0YS5wYWdlSWQsXG4gICAgICAgICAgICAgIGRpc3BsYXlfb3JkZXI6IHRlc3REYXRhLmRpc3BsYXlPcmRlcixcbiAgICAgICAgICAgICAgY3JlYXRlZF9hdDogbm93LFxuICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBub3csXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgIH0gYXMgYW55KTtcbiAgICAgICAgICBjb25zdCBtb2NrRXEgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgb3JkZXI6IG1vY2tPcmRlciB9IGFzIGFueSk7XG4gICAgICAgICAgY29uc3QgbW9ja1NlbGVjdCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBlcTogbW9ja0VxIH0gYXMgYW55KTtcbiAgICAgICAgICAobW9ja0Zyb20gYXMgYW55KS5tb2NrUmV0dXJuVmFsdWVPbmNlKHsgc2VsZWN0OiBtb2NrU2VsZWN0IH0pO1xuXG4gICAgICAgICAgLy8gTW9jayBjb2x1bW5zIGZldGNoIGZvciBsaXN0U2VjdGlvbnNcbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gTW9jayByZXR1cm4gdHlwZSBpbmZlcmVuY2UgaXNzdWVcbiAgICAgICAgICBjb25zdCBtb2NrQ29sdW1uc09yZGVyID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgIGRhdGE6IFtdLFxuICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgfSBhcyBhbnkpO1xuICAgICAgICAgIGNvbnN0IG1vY2tJbiA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBvcmRlcjogbW9ja0NvbHVtbnNPcmRlciB9IGFzIGFueSk7XG4gICAgICAgICAgY29uc3QgbW9ja0NvbHVtbnNTZWxlY3QgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgaW46IG1vY2tJbiB9IGFzIGFueSk7XG4gICAgICAgICAgKG1vY2tGcm9tIGFzIGFueSkubW9ja1JldHVyblZhbHVlT25jZSh7IHNlbGVjdDogbW9ja0NvbHVtbnNTZWxlY3QgfSk7XG5cbiAgICAgICAgICAvLyBSZWNvcmQgdGhlIHRpbWUgYmVmb3JlIGNyZWF0aW5nIHZlcnNpb25cbiAgICAgICAgICBjb25zdCBiZWZvcmVUaW1lID0gbmV3IERhdGUoKTtcblxuICAgICAgICAgIC8vIE1vY2sgdmVyc2lvbiBzbmFwc2hvdCBjcmVhdGlvblxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBNb2NrIHJldHVybiB0eXBlIGluZmVyZW5jZSBpc3N1ZVxuICAgICAgICAgIGNvbnN0IG1vY2tTaW5nbGUgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBpZDogdGVzdERhdGEudmVyc2lvbklkLFxuICAgICAgICAgICAgICBwYWdlX3R5cGU6IHRlc3REYXRhLnBhZ2VUeXBlLFxuICAgICAgICAgICAgICBwYWdlX2lkOiB0ZXN0RGF0YS5wYWdlSWQsXG4gICAgICAgICAgICAgIGNyZWF0ZWRfYnk6IHRlc3REYXRhLnVzZXJJZCxcbiAgICAgICAgICAgICAgc2VjdGlvbnNfc25hcHNob3Q6IFt7XG4gICAgICAgICAgICAgICAgaWQ6IHRlc3REYXRhLnNlY3Rpb25JZCxcbiAgICAgICAgICAgICAgICBwYWdlX3R5cGU6IHRlc3REYXRhLnBhZ2VUeXBlLFxuICAgICAgICAgICAgICAgIHBhZ2VfaWQ6IHRlc3REYXRhLnBhZ2VJZCxcbiAgICAgICAgICAgICAgICBkaXNwbGF5X29yZGVyOiB0ZXN0RGF0YS5kaXNwbGF5T3JkZXIsXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9hdDogbm93LFxuICAgICAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5vdyxcbiAgICAgICAgICAgICAgICBjb2x1bW5zOiBbXSxcbiAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5vdyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICB9IGFzIGFueSk7XG4gICAgICAgICAgY29uc3QgbW9ja1ZlcnNpb25TZWxlY3QgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgc2luZ2xlOiBtb2NrU2luZ2xlIH0gYXMgYW55KTtcbiAgICAgICAgICBjb25zdCBtb2NrSW5zZXJ0ID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IHNlbGVjdDogbW9ja1ZlcnNpb25TZWxlY3QgfSBhcyBhbnkpO1xuICAgICAgICAgIChtb2NrRnJvbSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZU9uY2UoeyBpbnNlcnQ6IG1vY2tJbnNlcnQgfSk7XG5cbiAgICAgICAgICAvLyBDcmVhdGUgdmVyc2lvbiBzbmFwc2hvdFxuICAgICAgICAgIGNvbnN0IHZlcnNpb25SZXN1bHQgPSBhd2FpdCBjcmVhdGVWZXJzaW9uU25hcHNob3QoXG4gICAgICAgICAgICB0ZXN0RGF0YS5wYWdlVHlwZSxcbiAgICAgICAgICAgIHRlc3REYXRhLnBhZ2VJZCxcbiAgICAgICAgICAgIHRlc3REYXRhLnVzZXJJZFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICAvLyBSZWNvcmQgdGhlIHRpbWUgYWZ0ZXIgY3JlYXRpbmcgdmVyc2lvblxuICAgICAgICAgIGNvbnN0IGFmdGVyVGltZSA9IG5ldyBEYXRlKCk7XG5cbiAgICAgICAgICAvLyBQcm9wZXJ0eTogVmVyc2lvbiBjcmVhdGlvbiBzaG91bGQgc3VjY2VlZFxuICAgICAgICAgIGV4cGVjdCh2ZXJzaW9uUmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCF2ZXJzaW9uUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFByb3BlcnR5OiBWZXJzaW9uIHNob3VsZCBoYXZlIGEgdGltZXN0YW1wXG4gICAgICAgICAgZXhwZWN0KHZlcnNpb25SZXN1bHQuZGF0YS5jcmVhdGVkX2F0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHZlcnNpb25UaW1lID0gbmV3IERhdGUodmVyc2lvblJlc3VsdC5kYXRhLmNyZWF0ZWRfYXQpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFByb3BlcnR5OiBUaW1lc3RhbXAgc2hvdWxkIGJlIGJldHdlZW4gYmVmb3JlIGFuZCBhZnRlciB0aW1lcyAod2l0aCB0b2xlcmFuY2UpXG4gICAgICAgICAgZXhwZWN0KHZlcnNpb25UaW1lLmdldFRpbWUoKSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbChiZWZvcmVUaW1lLmdldFRpbWUoKSAtIDIwMDApOyAvLyAycyB0b2xlcmFuY2VcbiAgICAgICAgICBleHBlY3QodmVyc2lvblRpbWUuZ2V0VGltZSgpKS50b0JlTGVzc1RoYW5PckVxdWFsKGFmdGVyVGltZS5nZXRUaW1lKCkgKyAyMDAwKTsgLy8gMnMgdG9sZXJhbmNlXG5cbiAgICAgICAgICAvLyBQcm9wZXJ0eTogVmVyc2lvbiBzaG91bGQgcHJlc2VydmUgdGhlIHBhZ2UgdHlwZSBhbmQgSURcbiAgICAgICAgICBleHBlY3QodmVyc2lvblJlc3VsdC5kYXRhLnBhZ2VfdHlwZSkudG9CZSh0ZXN0RGF0YS5wYWdlVHlwZSk7XG4gICAgICAgICAgZXhwZWN0KHZlcnNpb25SZXN1bHQuZGF0YS5wYWdlX2lkKS50b0JlKHRlc3REYXRhLnBhZ2VJZCk7XG5cbiAgICAgICAgICAvLyBQcm9wZXJ0eTogVmVyc2lvbiBzaG91bGQgcHJlc2VydmUgdGhlIHVzZXIgSURcbiAgICAgICAgICBleHBlY3QodmVyc2lvblJlc3VsdC5kYXRhLmNyZWF0ZWRfYnkpLnRvQmUodGVzdERhdGEudXNlcklkKTtcblxuICAgICAgICAgIC8vIFByb3BlcnR5OiBWZXJzaW9uIHNob3VsZCBjb250YWluIHNlY3Rpb25zIHNuYXBzaG90XG4gICAgICAgICAgZXhwZWN0KHZlcnNpb25SZXN1bHQuZGF0YS5zZWN0aW9uc19zbmFwc2hvdCkudG9CZURlZmluZWQoKTtcblxuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICApLFxuICAgICAgeyBudW1SdW5zOiAyMCwgdGltZW91dDogNTAwMCB9IC8vIFJlZHVjZWQgcnVucyBhbmQgaW5jcmVhc2VkIHRpbWVvdXRcbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHByZXNlcnZlIHByZXZpb3VzIHZlcnNpb24gd2hlbiBjcmVhdGluZyBuZXcgdmVyc2lvbicsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBmYy5hc3NlcnQoXG4gICAgICBmYy5hc3luY1Byb3BlcnR5KFxuICAgICAgICBmYy5yZWNvcmQoe1xuICAgICAgICAgIHBhZ2VUeXBlOiBmYy5jb25zdGFudEZyb20oJ2FjdGl2aXR5JywgJ2V2ZW50JywgJ2FjY29tbW9kYXRpb24nLCAncm9vbV90eXBlJywgJ2N1c3RvbScpLFxuICAgICAgICAgIHBhZ2VJZDogZmMudXVpZCgpLFxuICAgICAgICAgIHVzZXJJZDogZmMub3B0aW9uKGZjLnV1aWQoKSwgeyBuaWw6IG51bGwgfSksXG4gICAgICAgICAgdmVyc2lvbjFJZDogZmMudXVpZCgpLFxuICAgICAgICAgIHZlcnNpb24ySWQ6IGZjLnV1aWQoKSxcbiAgICAgICAgICBzZWN0aW9uSWQ6IGZjLnV1aWQoKSxcbiAgICAgICAgfSksXG4gICAgICAgIGFzeW5jICh0ZXN0RGF0YSkgPT4ge1xuICAgICAgICAgIGNvbnN0IG5vdzEgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgY29uc3Qgbm93MiA9IG5ldyBEYXRlKERhdGUubm93KCkgKyAxMDAwKS50b0lTT1N0cmluZygpO1xuXG4gICAgICAgICAgLy8gTW9jayBmaXJzdCB2ZXJzaW9uIGNyZWF0aW9uIC0gbGlzdFNlY3Rpb25zIGNhbGxcbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gTW9jayByZXR1cm4gdHlwZSBpbmZlcmVuY2UgaXNzdWVcbiAgICAgICAgICBjb25zdCBtb2NrT3JkZXIxID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgIGRhdGE6IFt7XG4gICAgICAgICAgICAgIGlkOiB0ZXN0RGF0YS5zZWN0aW9uSWQsXG4gICAgICAgICAgICAgIHBhZ2VfdHlwZTogdGVzdERhdGEucGFnZVR5cGUsXG4gICAgICAgICAgICAgIHBhZ2VfaWQ6IHRlc3REYXRhLnBhZ2VJZCxcbiAgICAgICAgICAgICAgZGlzcGxheV9vcmRlcjogMCxcbiAgICAgICAgICAgICAgY3JlYXRlZF9hdDogbm93MSxcbiAgICAgICAgICAgICAgdXBkYXRlZF9hdDogbm93MSxcbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgfSBhcyBhbnkpO1xuICAgICAgICAgIGNvbnN0IG1vY2tFcTEgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgb3JkZXI6IG1vY2tPcmRlcjEgfSBhcyBhbnkpO1xuICAgICAgICAgIGNvbnN0IG1vY2tTZWxlY3QxID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IGVxOiBtb2NrRXExIH0gYXMgYW55KTtcbiAgICAgICAgICAobW9ja0Zyb20gYXMgYW55KS5tb2NrUmV0dXJuVmFsdWVPbmNlKHsgc2VsZWN0OiBtb2NrU2VsZWN0MSB9KTtcblxuICAgICAgICAgIC8vIE1vY2sgY29sdW1ucyBmZXRjaCBmb3IgZmlyc3QgbGlzdFNlY3Rpb25zXG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciAtIE1vY2sgcmV0dXJuIHR5cGUgaW5mZXJlbmNlIGlzc3VlXG4gICAgICAgICAgY29uc3QgbW9ja0NvbHVtbnNPcmRlcjEgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgZGF0YTogW10sXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICB9IGFzIGFueSk7XG4gICAgICAgICAgY29uc3QgbW9ja0luMSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBvcmRlcjogbW9ja0NvbHVtbnNPcmRlcjEgfSBhcyBhbnkpO1xuICAgICAgICAgIGNvbnN0IG1vY2tDb2x1bW5zU2VsZWN0MSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBpbjogbW9ja0luMSB9IGFzIGFueSk7XG4gICAgICAgICAgKG1vY2tGcm9tIGFzIGFueSkubW9ja1JldHVyblZhbHVlT25jZSh7IHNlbGVjdDogbW9ja0NvbHVtbnNTZWxlY3QxIH0pO1xuXG4gICAgICAgICAgLy8gTW9jayBmaXJzdCB2ZXJzaW9uIGluc2VydFxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBNb2NrIHJldHVybiB0eXBlIGluZmVyZW5jZSBpc3N1ZVxuICAgICAgICAgIGNvbnN0IG1vY2tTaW5nbGUxID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgaWQ6IHRlc3REYXRhLnZlcnNpb24xSWQsXG4gICAgICAgICAgICAgIHBhZ2VfdHlwZTogdGVzdERhdGEucGFnZVR5cGUsXG4gICAgICAgICAgICAgIHBhZ2VfaWQ6IHRlc3REYXRhLnBhZ2VJZCxcbiAgICAgICAgICAgICAgY3JlYXRlZF9ieTogdGVzdERhdGEudXNlcklkLFxuICAgICAgICAgICAgICBzZWN0aW9uc19zbmFwc2hvdDogW3tcbiAgICAgICAgICAgICAgICBpZDogdGVzdERhdGEuc2VjdGlvbklkLFxuICAgICAgICAgICAgICAgIHBhZ2VfdHlwZTogdGVzdERhdGEucGFnZVR5cGUsXG4gICAgICAgICAgICAgICAgcGFnZV9pZDogdGVzdERhdGEucGFnZUlkLFxuICAgICAgICAgICAgICAgIGRpc3BsYXlfb3JkZXI6IDAsXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9hdDogbm93MSxcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBub3cxLFxuICAgICAgICAgICAgICAgIGNvbHVtbnM6IFtdLFxuICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgY3JlYXRlZF9hdDogbm93MSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICB9IGFzIGFueSk7XG4gICAgICAgICAgY29uc3QgbW9ja1ZlcnNpb25TZWxlY3QxID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IHNpbmdsZTogbW9ja1NpbmdsZTEgfSBhcyBhbnkpO1xuICAgICAgICAgIGNvbnN0IG1vY2tJbnNlcnQxID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IHNlbGVjdDogbW9ja1ZlcnNpb25TZWxlY3QxIH0gYXMgYW55KTtcbiAgICAgICAgICAobW9ja0Zyb20gYXMgYW55KS5tb2NrUmV0dXJuVmFsdWVPbmNlKHsgaW5zZXJ0OiBtb2NrSW5zZXJ0MSB9KTtcblxuICAgICAgICAgIGNvbnN0IHZlcnNpb24xUmVzdWx0ID0gYXdhaXQgY3JlYXRlVmVyc2lvblNuYXBzaG90KFxuICAgICAgICAgICAgdGVzdERhdGEucGFnZVR5cGUsXG4gICAgICAgICAgICB0ZXN0RGF0YS5wYWdlSWQsXG4gICAgICAgICAgICB0ZXN0RGF0YS51c2VySWRcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgLy8gTW9jayBzZWNvbmQgdmVyc2lvbiBjcmVhdGlvbiAtIGxpc3RTZWN0aW9ucyBjYWxsXG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciAtIE1vY2sgcmV0dXJuIHR5cGUgaW5mZXJlbmNlIGlzc3VlXG4gICAgICAgICAgY29uc3QgbW9ja09yZGVyMiA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICBkYXRhOiBbe1xuICAgICAgICAgICAgICBpZDogdGVzdERhdGEuc2VjdGlvbklkLFxuICAgICAgICAgICAgICBwYWdlX3R5cGU6IHRlc3REYXRhLnBhZ2VUeXBlLFxuICAgICAgICAgICAgICBwYWdlX2lkOiB0ZXN0RGF0YS5wYWdlSWQsXG4gICAgICAgICAgICAgIGRpc3BsYXlfb3JkZXI6IDAsXG4gICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5vdzIsXG4gICAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5vdzIsXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgIH0gYXMgYW55KTtcbiAgICAgICAgICBjb25zdCBtb2NrRXEyID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IG9yZGVyOiBtb2NrT3JkZXIyIH0gYXMgYW55KTtcbiAgICAgICAgICBjb25zdCBtb2NrU2VsZWN0MiA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBlcTogbW9ja0VxMiB9IGFzIGFueSk7XG4gICAgICAgICAgKG1vY2tGcm9tIGFzIGFueSkubW9ja1JldHVyblZhbHVlT25jZSh7IHNlbGVjdDogbW9ja1NlbGVjdDIgfSk7XG5cbiAgICAgICAgICAvLyBNb2NrIGNvbHVtbnMgZmV0Y2ggZm9yIHNlY29uZCBsaXN0U2VjdGlvbnNcbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gTW9jayByZXR1cm4gdHlwZSBpbmZlcmVuY2UgaXNzdWVcbiAgICAgICAgICBjb25zdCBtb2NrQ29sdW1uc09yZGVyMiA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgIH0gYXMgYW55KTtcbiAgICAgICAgICBjb25zdCBtb2NrSW4yID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IG9yZGVyOiBtb2NrQ29sdW1uc09yZGVyMiB9IGFzIGFueSk7XG4gICAgICAgICAgY29uc3QgbW9ja0NvbHVtbnNTZWxlY3QyID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IGluOiBtb2NrSW4yIH0gYXMgYW55KTtcbiAgICAgICAgICAobW9ja0Zyb20gYXMgYW55KS5tb2NrUmV0dXJuVmFsdWVPbmNlKHsgc2VsZWN0OiBtb2NrQ29sdW1uc1NlbGVjdDIgfSk7XG5cbiAgICAgICAgICAvLyBNb2NrIHNlY29uZCB2ZXJzaW9uIGluc2VydFxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBNb2NrIHJldHVybiB0eXBlIGluZmVyZW5jZSBpc3N1ZVxuICAgICAgICAgIGNvbnN0IG1vY2tTaW5nbGUyID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgaWQ6IHRlc3REYXRhLnZlcnNpb24ySWQsXG4gICAgICAgICAgICAgIHBhZ2VfdHlwZTogdGVzdERhdGEucGFnZVR5cGUsXG4gICAgICAgICAgICAgIHBhZ2VfaWQ6IHRlc3REYXRhLnBhZ2VJZCxcbiAgICAgICAgICAgICAgY3JlYXRlZF9ieTogdGVzdERhdGEudXNlcklkLFxuICAgICAgICAgICAgICBzZWN0aW9uc19zbmFwc2hvdDogW3tcbiAgICAgICAgICAgICAgICBpZDogdGVzdERhdGEuc2VjdGlvbklkLFxuICAgICAgICAgICAgICAgIHBhZ2VfdHlwZTogdGVzdERhdGEucGFnZVR5cGUsXG4gICAgICAgICAgICAgICAgcGFnZV9pZDogdGVzdERhdGEucGFnZUlkLFxuICAgICAgICAgICAgICAgIGRpc3BsYXlfb3JkZXI6IDAsXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9hdDogbm93MixcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBub3cyLFxuICAgICAgICAgICAgICAgIGNvbHVtbnM6IFtdLFxuICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgY3JlYXRlZF9hdDogbm93MixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICB9IGFzIGFueSk7XG4gICAgICAgICAgY29uc3QgbW9ja1ZlcnNpb25TZWxlY3QyID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IHNpbmdsZTogbW9ja1NpbmdsZTIgfSBhcyBhbnkpO1xuICAgICAgICAgIGNvbnN0IG1vY2tJbnNlcnQyID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IHNlbGVjdDogbW9ja1ZlcnNpb25TZWxlY3QyIH0gYXMgYW55KTtcbiAgICAgICAgICAobW9ja0Zyb20gYXMgYW55KS5tb2NrUmV0dXJuVmFsdWVPbmNlKHsgaW5zZXJ0OiBtb2NrSW5zZXJ0MiB9KTtcblxuICAgICAgICAgIGNvbnN0IHZlcnNpb24yUmVzdWx0ID0gYXdhaXQgY3JlYXRlVmVyc2lvblNuYXBzaG90KFxuICAgICAgICAgICAgdGVzdERhdGEucGFnZVR5cGUsXG4gICAgICAgICAgICB0ZXN0RGF0YS5wYWdlSWQsXG4gICAgICAgICAgICB0ZXN0RGF0YS51c2VySWRcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgLy8gUHJvcGVydHk6IEJvdGggdmVyc2lvbnMgc2hvdWxkIGJlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XG4gICAgICAgICAgZXhwZWN0KHZlcnNpb24xUmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgZXhwZWN0KHZlcnNpb24yUmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG5cbiAgICAgICAgICBpZiAoIXZlcnNpb24xUmVzdWx0LnN1Y2Nlc3MgfHwgIXZlcnNpb24yUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFByb3BlcnR5OiBWZXJzaW9ucyBzaG91bGQgaGF2ZSBkaWZmZXJlbnQgSURzXG4gICAgICAgICAgZXhwZWN0KHZlcnNpb24xUmVzdWx0LmRhdGEuaWQpLm5vdC50b0JlKHZlcnNpb24yUmVzdWx0LmRhdGEuaWQpO1xuXG4gICAgICAgICAgLy8gUHJvcGVydHk6IFNlY29uZCB2ZXJzaW9uIHNob3VsZCBoYXZlIGxhdGVyIG9yIGVxdWFsIHRpbWVzdGFtcFxuICAgICAgICAgIGNvbnN0IHRpbWUxID0gbmV3IERhdGUodmVyc2lvbjFSZXN1bHQuZGF0YS5jcmVhdGVkX2F0KS5nZXRUaW1lKCk7XG4gICAgICAgICAgY29uc3QgdGltZTIgPSBuZXcgRGF0ZSh2ZXJzaW9uMlJlc3VsdC5kYXRhLmNyZWF0ZWRfYXQpLmdldFRpbWUoKTtcbiAgICAgICAgICBleHBlY3QodGltZTIpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwodGltZTEpO1xuXG4gICAgICAgICAgLy8gTW9jayB2ZXJzaW9uIGhpc3RvcnkgcmV0cmlldmFsXG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciAtIE1vY2sgcmV0dXJuIHR5cGUgaW5mZXJlbmNlIGlzc3VlXG4gICAgICAgICAgY29uc3QgbW9ja0hpc3RvcnlPcmRlciA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICBkYXRhOiBbdmVyc2lvbjJSZXN1bHQuZGF0YSwgdmVyc2lvbjFSZXN1bHQuZGF0YV0sXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICB9IGFzIGFueSk7XG4gICAgICAgICAgY29uc3QgbW9ja0hpc3RvcnlFcSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBvcmRlcjogbW9ja0hpc3RvcnlPcmRlciB9IGFzIGFueSk7XG4gICAgICAgICAgY29uc3QgbW9ja0hpc3RvcnlTZWxlY3QgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgZXE6IG1vY2tIaXN0b3J5RXEgfSBhcyBhbnkpO1xuICAgICAgICAgIChtb2NrRnJvbSBhcyBhbnkpLm1vY2tSZXR1cm5WYWx1ZSh7IHNlbGVjdDogbW9ja0hpc3RvcnlTZWxlY3QgfSk7XG5cbiAgICAgICAgICBjb25zdCBoaXN0b3J5UmVzdWx0ID0gYXdhaXQgZ2V0VmVyc2lvbkhpc3RvcnkodGVzdERhdGEucGFnZUlkKTtcblxuICAgICAgICAgIGlmICghaGlzdG9yeVJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBQcm9wZXJ0eTogQm90aCB2ZXJzaW9ucyBzaG91bGQgZXhpc3QgaW4gaGlzdG9yeVxuICAgICAgICAgIGNvbnN0IGZvdW5kVmVyc2lvbjEgPSBoaXN0b3J5UmVzdWx0LmRhdGEuZmluZCh2ID0+IHYuaWQgPT09IHZlcnNpb24xUmVzdWx0LmRhdGEuaWQpO1xuICAgICAgICAgIGNvbnN0IGZvdW5kVmVyc2lvbjIgPSBoaXN0b3J5UmVzdWx0LmRhdGEuZmluZCh2ID0+IHYuaWQgPT09IHZlcnNpb24yUmVzdWx0LmRhdGEuaWQpO1xuXG4gICAgICAgICAgZXhwZWN0KGZvdW5kVmVyc2lvbjEpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgICAgZXhwZWN0KGZvdW5kVmVyc2lvbjIpLnRvQmVEZWZpbmVkKCk7XG5cbiAgICAgICAgICAvLyBQcm9wZXJ0eTogVmVyc2lvbnMgc2hvdWxkIGJlIG9yZGVyZWQgYnkgY3JlYXRlZF9hdCAobmV3ZXN0IGZpcnN0KVxuICAgICAgICAgIGlmIChoaXN0b3J5UmVzdWx0LmRhdGEubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGlzdG9yeVJlc3VsdC5kYXRhLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gbmV3IERhdGUoaGlzdG9yeVJlc3VsdC5kYXRhW2ldLmNyZWF0ZWRfYXQpO1xuICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gbmV3IERhdGUoaGlzdG9yeVJlc3VsdC5kYXRhW2kgKyAxXS5jcmVhdGVkX2F0KTtcbiAgICAgICAgICAgICAgZXhwZWN0KGN1cnJlbnQuZ2V0VGltZSgpKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKG5leHQuZ2V0VGltZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIHsgbnVtUnVuczogMTAsIHRpbWVvdXQ6IDUwMDAgfSAvLyBGZXdlciBydW5zIGR1ZSB0byBhc3luYyBvcGVyYXRpb25zIGFuZCBpbmNyZWFzZWQgdGltZW91dFxuICAgICk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsibW9ja0Zyb20iLCJqZXN0IiwiZm4iLCJtb2NrIiwic3VwYWJhc2UiLCJmcm9tIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIml0IiwiZmMiLCJhc3NlcnQiLCJhc3luY1Byb3BlcnR5IiwicmVjb3JkIiwicGFnZVR5cGUiLCJjb25zdGFudEZyb20iLCJwYWdlSWQiLCJ1dWlkIiwidXNlcklkIiwib3B0aW9uIiwibmlsIiwiZGlzcGxheU9yZGVyIiwiaW50ZWdlciIsIm1pbiIsIm1heCIsInNlY3Rpb25JZCIsInZlcnNpb25JZCIsInRlc3REYXRhIiwibm93IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibW9ja09yZGVyIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJkYXRhIiwiaWQiLCJwYWdlX3R5cGUiLCJwYWdlX2lkIiwiZGlzcGxheV9vcmRlciIsImNyZWF0ZWRfYXQiLCJ1cGRhdGVkX2F0IiwiZXJyb3IiLCJtb2NrRXEiLCJtb2NrUmV0dXJuVmFsdWUiLCJvcmRlciIsIm1vY2tTZWxlY3QiLCJlcSIsIm1vY2tSZXR1cm5WYWx1ZU9uY2UiLCJzZWxlY3QiLCJtb2NrQ29sdW1uc09yZGVyIiwibW9ja0luIiwibW9ja0NvbHVtbnNTZWxlY3QiLCJpbiIsImJlZm9yZVRpbWUiLCJtb2NrU2luZ2xlIiwiY3JlYXRlZF9ieSIsInNlY3Rpb25zX3NuYXBzaG90IiwiY29sdW1ucyIsIm1vY2tWZXJzaW9uU2VsZWN0Iiwic2luZ2xlIiwibW9ja0luc2VydCIsImluc2VydCIsInZlcnNpb25SZXN1bHQiLCJjcmVhdGVWZXJzaW9uU25hcHNob3QiLCJhZnRlclRpbWUiLCJleHBlY3QiLCJzdWNjZXNzIiwidG9CZSIsInRvQmVEZWZpbmVkIiwidmVyc2lvblRpbWUiLCJnZXRUaW1lIiwidG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCIsInRvQmVMZXNzVGhhbk9yRXF1YWwiLCJudW1SdW5zIiwidGltZW91dCIsInZlcnNpb24xSWQiLCJ2ZXJzaW9uMklkIiwibm93MSIsIm5vdzIiLCJtb2NrT3JkZXIxIiwibW9ja0VxMSIsIm1vY2tTZWxlY3QxIiwibW9ja0NvbHVtbnNPcmRlcjEiLCJtb2NrSW4xIiwibW9ja0NvbHVtbnNTZWxlY3QxIiwibW9ja1NpbmdsZTEiLCJtb2NrVmVyc2lvblNlbGVjdDEiLCJtb2NrSW5zZXJ0MSIsInZlcnNpb24xUmVzdWx0IiwibW9ja09yZGVyMiIsIm1vY2tFcTIiLCJtb2NrU2VsZWN0MiIsIm1vY2tDb2x1bW5zT3JkZXIyIiwibW9ja0luMiIsIm1vY2tDb2x1bW5zU2VsZWN0MiIsIm1vY2tTaW5nbGUyIiwibW9ja1ZlcnNpb25TZWxlY3QyIiwibW9ja0luc2VydDIiLCJ2ZXJzaW9uMlJlc3VsdCIsIm5vdCIsInRpbWUxIiwidGltZTIiLCJtb2NrSGlzdG9yeU9yZGVyIiwibW9ja0hpc3RvcnlFcSIsIm1vY2tIaXN0b3J5U2VsZWN0IiwiaGlzdG9yeVJlc3VsdCIsImdldFZlcnNpb25IaXN0b3J5IiwiZm91bmRWZXJzaW9uMSIsImZpbmQiLCJ2IiwiZm91bmRWZXJzaW9uMiIsImxlbmd0aCIsImkiLCJjdXJyZW50IiwibmV4dCJdLCJtYXBwaW5ncyI6Ijs7OzttRUFBb0I7eUJBQ21DO2lDQWVoRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBYlAsMENBQTBDO0FBQzFDLE1BQU1BLFdBQVdDLGFBQUksQ0FBQ0MsRUFBRTtBQUN4QkQsYUFBSSxDQUFDRSxJQUFJLENBQUMsa0JBQWtCLElBQU8sQ0FBQTtRQUNqQ0MsVUFBVTtZQUNSQyxNQUFNTDtRQUNSO0lBQ0YsQ0FBQTtBQVNBLDhFQUE4RTtBQUU5RU0sSUFBQUEsaUJBQVEsRUFBQywrRUFBK0U7SUFDdEZDLElBQUFBLG1CQUFVLEVBQUM7UUFDVE4sYUFBSSxDQUFDTyxhQUFhO0lBQ3BCO0lBRUFDLElBQUFBLFdBQUUsRUFBQyxxRUFBcUU7UUFDdEUsTUFBTUMsV0FBR0MsTUFBTSxDQUNiRCxXQUFHRSxhQUFhLENBQ2RGLFdBQUdHLE1BQU0sQ0FBQztZQUNSQyxVQUFVSixXQUFHSyxZQUFZLENBQUMsWUFBWSxTQUFTLGlCQUFpQixhQUFhO1lBQzdFQyxRQUFRTixXQUFHTyxJQUFJO1lBQ2ZDLFFBQVFSLFdBQUdT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