688cc8a091c5e6be5874320813ec9458
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "EmailTemplateEditor", {
    enumerable: true,
    get: function() {
        return EmailTemplateEditor;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _RichTextEditor = require("./RichTextEditor");
const _sanitization = require("../../utils/sanitization");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Available template variables
const TEMPLATE_VARIABLES = [
    {
        key: '{{guest_name}}',
        description: 'Guest full name'
    },
    {
        key: '{{guest_first_name}}',
        description: 'Guest first name'
    },
    {
        key: '{{guest_last_name}}',
        description: 'Guest last name'
    },
    {
        key: '{{guest_email}}',
        description: 'Guest email address'
    },
    {
        key: '{{event_name}}',
        description: 'Event name'
    },
    {
        key: '{{event_date}}',
        description: 'Event date'
    },
    {
        key: '{{event_time}}',
        description: 'Event time'
    },
    {
        key: '{{event_location}}',
        description: 'Event location'
    },
    {
        key: '{{activity_name}}',
        description: 'Activity name'
    },
    {
        key: '{{activity_date}}',
        description: 'Activity date'
    },
    {
        key: '{{activity_time}}',
        description: 'Activity time'
    },
    {
        key: '{{activity_location}}',
        description: 'Activity location'
    },
    {
        key: '{{rsvp_deadline}}',
        description: 'RSVP deadline date'
    },
    {
        key: '{{wedding_date}}',
        description: 'Wedding date'
    },
    {
        key: '{{venue_name}}',
        description: 'Venue name'
    },
    {
        key: '{{venue_address}}',
        description: 'Venue address'
    },
    {
        key: '{{login_link}}',
        description: 'Guest portal login link'
    },
    {
        key: '{{magic_link}}',
        description: 'Magic link for authentication'
    }
];
// Template categories
const TEMPLATE_CATEGORIES = [
    {
        value: 'invitation',
        label: 'Invitation'
    },
    {
        value: 'rsvp',
        label: 'RSVP'
    },
    {
        value: 'reminder',
        label: 'Reminder'
    },
    {
        value: 'confirmation',
        label: 'Confirmation'
    },
    {
        value: 'update',
        label: 'Update'
    },
    {
        value: 'announcement',
        label: 'Announcement'
    },
    {
        value: 'other',
        label: 'Other'
    }
];
// Sample data for preview
const SAMPLE_DATA = {
    guest_name: 'John Doe',
    guest_first_name: 'John',
    guest_last_name: 'Doe',
    guest_email: 'john.doe@example.com',
    event_name: 'Wedding Ceremony',
    event_date: 'June 15, 2024',
    event_time: '4:00 PM',
    event_location: 'Sunset Beach, Costa Rica',
    activity_name: 'Welcome Dinner',
    activity_date: 'June 14, 2024',
    activity_time: '7:00 PM',
    activity_location: 'Beachside Restaurant',
    rsvp_deadline: 'May 1, 2024',
    wedding_date: 'June 15, 2024',
    venue_name: 'Paradise Resort',
    venue_address: '123 Beach Road, Costa Rica',
    login_link: 'https://example.com/auth/guest-login',
    magic_link: 'https://example.com/auth/magic-link/verify?token=abc123'
};
function EmailTemplateEditor({ value, onChange, onSave, onCancel, disabled = false }) {
    const [showVariablePicker, setShowVariablePicker] = (0, _react.useState)(false);
    const [showPreview, setShowPreview] = (0, _react.useState)(false);
    const [subjectCursorPosition, setSubjectCursorPosition] = (0, _react.useState)(null);
    const template = value || {
        name: '',
        subject: '',
        body_html: '',
        category: 'other'
    };
    const handleNameChange = (0, _react.useCallback)((e)=>{
        onChange({
            ...template,
            name: (0, _sanitization.sanitizeInput)(e.target.value)
        });
    }, [
        template,
        onChange
    ]);
    const handleSubjectChange = (0, _react.useCallback)((e)=>{
        setSubjectCursorPosition(e.target.selectionStart);
        onChange({
            ...template,
            subject: e.target.value
        });
    }, [
        template,
        onChange
    ]);
    const handleBodyChange = (0, _react.useCallback)((html)=>{
        onChange({
            ...template,
            body_html: html
        });
    }, [
        template,
        onChange
    ]);
    const handleCategoryChange = (0, _react.useCallback)((e)=>{
        onChange({
            ...template,
            category: e.target.value
        });
    }, [
        template,
        onChange
    ]);
    const insertVariable = (0, _react.useCallback)((variable, target)=>{
        if (target === 'subject') {
            const position = subjectCursorPosition ?? template.subject.length;
            const newSubject = template.subject.slice(0, position) + variable + template.subject.slice(position);
            onChange({
                ...template,
                subject: newSubject
            });
        } else {
            // For body, append variable at end (RichTextEditor handles cursor position)
            onChange({
                ...template,
                body_html: template.body_html + variable
            });
        }
        setShowVariablePicker(false);
    }, [
        template,
        onChange,
        subjectCursorPosition
    ]);
    const replaceVariables = (0, _react.useCallback)((text)=>{
        let result = text;
        Object.entries(SAMPLE_DATA).forEach(([key, value])=>{
            result = result.replace(new RegExp(`{{${key}}}`, 'g'), value);
        });
        return result;
    }, []);
    const previewSubject = replaceVariables(template.subject);
    const previewBody = replaceVariables(template.body_html);
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: "space-y-6",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("label", {
                        htmlFor: "template-name",
                        className: "block text-sm font-medium text-gray-700 mb-2",
                        children: "Template Name *"
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                        id: "template-name",
                        type: "text",
                        value: template.name,
                        onChange: handleNameChange,
                        disabled: disabled,
                        placeholder: "e.g., RSVP Confirmation",
                        className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",
                        required: true
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("label", {
                        htmlFor: "template-category",
                        className: "block text-sm font-medium text-gray-700 mb-2",
                        children: "Category"
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("select", {
                        id: "template-category",
                        value: template.category,
                        onChange: handleCategoryChange,
                        disabled: disabled,
                        className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",
                        children: TEMPLATE_CATEGORIES.map((cat)=>/*#__PURE__*/ (0, _jsxruntime.jsx)("option", {
                                value: cat.value,
                                children: cat.label
                            }, cat.value))
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center justify-between mb-2",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("label", {
                                htmlFor: "template-subject",
                                className: "block text-sm font-medium text-gray-700",
                                children: "Subject Line *"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                type: "button",
                                onClick: ()=>setShowVariablePicker(!showVariablePicker),
                                disabled: disabled,
                                className: "text-sm text-emerald-600 hover:text-emerald-700 disabled:text-gray-400",
                                children: "Insert Variable"
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                        id: "template-subject",
                        type: "text",
                        value: template.subject,
                        onChange: handleSubjectChange,
                        disabled: disabled,
                        placeholder: "e.g., Your RSVP for {{event_name}}",
                        className: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",
                        required: true
                    })
                ]
            }),
            showVariablePicker && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "bg-gray-50 border border-gray-200 rounded-lg p-4",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("h3", {
                        className: "text-sm font-medium text-gray-700 mb-3",
                        children: "Available Variables"
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "grid grid-cols-1 md:grid-cols-2 gap-2",
                        children: TEMPLATE_VARIABLES.map((variable)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("button", {
                                type: "button",
                                onClick: ()=>insertVariable(variable.key, 'subject'),
                                disabled: disabled,
                                className: "text-left px-3 py-2 bg-white border border-gray-200 rounded hover:bg-emerald-50 hover:border-emerald-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                        className: "font-mono text-sm text-emerald-600",
                                        children: variable.key
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                        className: "text-xs text-gray-500",
                                        children: variable.description
                                    })
                                ]
                            }, variable.key))
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center justify-between mb-2",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("label", {
                                className: "block text-sm font-medium text-gray-700",
                                children: "Email Body *"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                type: "button",
                                onClick: ()=>setShowPreview(!showPreview),
                                className: "text-sm text-emerald-600 hover:text-emerald-700",
                                children: showPreview ? 'Hide Preview' : 'Show Preview'
                            })
                        ]
                    }),
                    !showPreview ? /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_RichTextEditor.RichTextEditor, {
                                value: template.body_html,
                                onChange: handleBodyChange,
                                disabled: disabled,
                                placeholder: "Write your email content here. Use the variable picker to insert dynamic content."
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "mt-2",
                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                    type: "button",
                                    onClick: ()=>setShowVariablePicker(!showVariablePicker),
                                    disabled: disabled,
                                    className: "text-sm text-emerald-600 hover:text-emerald-700 disabled:text-gray-400",
                                    children: "Insert Variable in Body"
                                })
                            })
                        ]
                    }) : /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "border border-gray-300 rounded-lg p-6 bg-white",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "mb-4 pb-4 border-b border-gray-200",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                        className: "text-sm text-gray-500 mb-1",
                                        children: "Subject:"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                        className: "font-medium",
                                        children: previewSubject
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "prose max-w-none",
                                dangerouslySetInnerHTML: {
                                    __html: previewBody
                                }
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "mt-4 pt-4 border-t border-gray-200 text-xs text-gray-500",
                                children: "Preview with sample data"
                            })
                        ]
                    })
                ]
            }),
            (onSave || onCancel) && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "flex items-center justify-end gap-3 pt-4 border-t border-gray-200",
                children: [
                    onCancel && /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                        type: "button",
                        onClick: onCancel,
                        disabled: disabled,
                        className: "px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",
                        children: "Cancel"
                    }),
                    onSave && /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                        type: "button",
                        onClick: onSave,
                        disabled: disabled || !template.name || !template.subject || !template.body_html,
                        className: "px-4 py-2 text-white bg-emerald-600 rounded-lg hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed",
                        children: "Save Template"
                    })
                ]
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9hZG1pbi9FbWFpbFRlbXBsYXRlRWRpdG9yLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbi8qKlxuICogRW1haWxUZW1wbGF0ZUVkaXRvciBDb21wb25lbnRcbiAqIFxuICogUmljaCB0ZXh0IGVkaXRvciBmb3IgZW1haWwgdGVtcGxhdGVzIHdpdGggdmFyaWFibGUgcGlja2VyIGFuZCBwcmV2aWV3XG4gKiBSZXF1aXJlbWVudHM6IDE3LjEsIDE3LjIsIDE3LjNcbiAqL1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgUmljaFRleHRFZGl0b3IgfSBmcm9tICcuL1JpY2hUZXh0RWRpdG9yJztcbmltcG9ydCB7IHNhbml0aXplSW5wdXQgfSBmcm9tICdAL3V0aWxzL3Nhbml0aXphdGlvbic7XG5cbmludGVyZmFjZSBFbWFpbFRlbXBsYXRlRWRpdG9yUHJvcHMge1xuICB2YWx1ZT86IHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgc3ViamVjdDogc3RyaW5nO1xuICAgIGJvZHlfaHRtbDogc3RyaW5nO1xuICAgIGNhdGVnb3J5Pzogc3RyaW5nO1xuICB9O1xuICBvbkNoYW5nZTogKHRlbXBsYXRlOiB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHN1YmplY3Q6IHN0cmluZztcbiAgICBib2R5X2h0bWw6IHN0cmluZztcbiAgICBjYXRlZ29yeT86IHN0cmluZztcbiAgfSkgPT4gdm9pZDtcbiAgb25TYXZlPzogKCkgPT4gdm9pZDtcbiAgb25DYW5jZWw/OiAoKSA9PiB2b2lkO1xuICBkaXNhYmxlZD86IGJvb2xlYW47XG59XG5cbi8vIEF2YWlsYWJsZSB0ZW1wbGF0ZSB2YXJpYWJsZXNcbmNvbnN0IFRFTVBMQVRFX1ZBUklBQkxFUyA9IFtcbiAgeyBrZXk6ICd7e2d1ZXN0X25hbWV9fScsIGRlc2NyaXB0aW9uOiAnR3Vlc3QgZnVsbCBuYW1lJyB9LFxuICB7IGtleTogJ3t7Z3Vlc3RfZmlyc3RfbmFtZX19JywgZGVzY3JpcHRpb246ICdHdWVzdCBmaXJzdCBuYW1lJyB9LFxuICB7IGtleTogJ3t7Z3Vlc3RfbGFzdF9uYW1lfX0nLCBkZXNjcmlwdGlvbjogJ0d1ZXN0IGxhc3QgbmFtZScgfSxcbiAgeyBrZXk6ICd7e2d1ZXN0X2VtYWlsfX0nLCBkZXNjcmlwdGlvbjogJ0d1ZXN0IGVtYWlsIGFkZHJlc3MnIH0sXG4gIHsga2V5OiAne3tldmVudF9uYW1lfX0nLCBkZXNjcmlwdGlvbjogJ0V2ZW50IG5hbWUnIH0sXG4gIHsga2V5OiAne3tldmVudF9kYXRlfX0nLCBkZXNjcmlwdGlvbjogJ0V2ZW50IGRhdGUnIH0sXG4gIHsga2V5OiAne3tldmVudF90aW1lfX0nLCBkZXNjcmlwdGlvbjogJ0V2ZW50IHRpbWUnIH0sXG4gIHsga2V5OiAne3tldmVudF9sb2NhdGlvbn19JywgZGVzY3JpcHRpb246ICdFdmVudCBsb2NhdGlvbicgfSxcbiAgeyBrZXk6ICd7e2FjdGl2aXR5X25hbWV9fScsIGRlc2NyaXB0aW9uOiAnQWN0aXZpdHkgbmFtZScgfSxcbiAgeyBrZXk6ICd7e2FjdGl2aXR5X2RhdGV9fScsIGRlc2NyaXB0aW9uOiAnQWN0aXZpdHkgZGF0ZScgfSxcbiAgeyBrZXk6ICd7e2FjdGl2aXR5X3RpbWV9fScsIGRlc2NyaXB0aW9uOiAnQWN0aXZpdHkgdGltZScgfSxcbiAgeyBrZXk6ICd7e2FjdGl2aXR5X2xvY2F0aW9ufX0nLCBkZXNjcmlwdGlvbjogJ0FjdGl2aXR5IGxvY2F0aW9uJyB9LFxuICB7IGtleTogJ3t7cnN2cF9kZWFkbGluZX19JywgZGVzY3JpcHRpb246ICdSU1ZQIGRlYWRsaW5lIGRhdGUnIH0sXG4gIHsga2V5OiAne3t3ZWRkaW5nX2RhdGV9fScsIGRlc2NyaXB0aW9uOiAnV2VkZGluZyBkYXRlJyB9LFxuICB7IGtleTogJ3t7dmVudWVfbmFtZX19JywgZGVzY3JpcHRpb246ICdWZW51ZSBuYW1lJyB9LFxuICB7IGtleTogJ3t7dmVudWVfYWRkcmVzc319JywgZGVzY3JpcHRpb246ICdWZW51ZSBhZGRyZXNzJyB9LFxuICB7IGtleTogJ3t7bG9naW5fbGlua319JywgZGVzY3JpcHRpb246ICdHdWVzdCBwb3J0YWwgbG9naW4gbGluaycgfSxcbiAgeyBrZXk6ICd7e21hZ2ljX2xpbmt9fScsIGRlc2NyaXB0aW9uOiAnTWFnaWMgbGluayBmb3IgYXV0aGVudGljYXRpb24nIH0sXG5dO1xuXG4vLyBUZW1wbGF0ZSBjYXRlZ29yaWVzXG5jb25zdCBURU1QTEFURV9DQVRFR09SSUVTID0gW1xuICB7IHZhbHVlOiAnaW52aXRhdGlvbicsIGxhYmVsOiAnSW52aXRhdGlvbicgfSxcbiAgeyB2YWx1ZTogJ3JzdnAnLCBsYWJlbDogJ1JTVlAnIH0sXG4gIHsgdmFsdWU6ICdyZW1pbmRlcicsIGxhYmVsOiAnUmVtaW5kZXInIH0sXG4gIHsgdmFsdWU6ICdjb25maXJtYXRpb24nLCBsYWJlbDogJ0NvbmZpcm1hdGlvbicgfSxcbiAgeyB2YWx1ZTogJ3VwZGF0ZScsIGxhYmVsOiAnVXBkYXRlJyB9LFxuICB7IHZhbHVlOiAnYW5ub3VuY2VtZW50JywgbGFiZWw6ICdBbm5vdW5jZW1lbnQnIH0sXG4gIHsgdmFsdWU6ICdvdGhlcicsIGxhYmVsOiAnT3RoZXInIH0sXG5dO1xuXG4vLyBTYW1wbGUgZGF0YSBmb3IgcHJldmlld1xuY29uc3QgU0FNUExFX0RBVEEgPSB7XG4gIGd1ZXN0X25hbWU6ICdKb2huIERvZScsXG4gIGd1ZXN0X2ZpcnN0X25hbWU6ICdKb2huJyxcbiAgZ3Vlc3RfbGFzdF9uYW1lOiAnRG9lJyxcbiAgZ3Vlc3RfZW1haWw6ICdqb2huLmRvZUBleGFtcGxlLmNvbScsXG4gIGV2ZW50X25hbWU6ICdXZWRkaW5nIENlcmVtb255JyxcbiAgZXZlbnRfZGF0ZTogJ0p1bmUgMTUsIDIwMjQnLFxuICBldmVudF90aW1lOiAnNDowMCBQTScsXG4gIGV2ZW50X2xvY2F0aW9uOiAnU3Vuc2V0IEJlYWNoLCBDb3N0YSBSaWNhJyxcbiAgYWN0aXZpdHlfbmFtZTogJ1dlbGNvbWUgRGlubmVyJyxcbiAgYWN0aXZpdHlfZGF0ZTogJ0p1bmUgMTQsIDIwMjQnLFxuICBhY3Rpdml0eV90aW1lOiAnNzowMCBQTScsXG4gIGFjdGl2aXR5X2xvY2F0aW9uOiAnQmVhY2hzaWRlIFJlc3RhdXJhbnQnLFxuICByc3ZwX2RlYWRsaW5lOiAnTWF5IDEsIDIwMjQnLFxuICB3ZWRkaW5nX2RhdGU6ICdKdW5lIDE1LCAyMDI0JyxcbiAgdmVudWVfbmFtZTogJ1BhcmFkaXNlIFJlc29ydCcsXG4gIHZlbnVlX2FkZHJlc3M6ICcxMjMgQmVhY2ggUm9hZCwgQ29zdGEgUmljYScsXG4gIGxvZ2luX2xpbms6ICdodHRwczovL2V4YW1wbGUuY29tL2F1dGgvZ3Vlc3QtbG9naW4nLFxuICBtYWdpY19saW5rOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9hdXRoL21hZ2ljLWxpbmsvdmVyaWZ5P3Rva2VuPWFiYzEyMycsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gRW1haWxUZW1wbGF0ZUVkaXRvcih7XG4gIHZhbHVlLFxuICBvbkNoYW5nZSxcbiAgb25TYXZlLFxuICBvbkNhbmNlbCxcbiAgZGlzYWJsZWQgPSBmYWxzZSxcbn06IEVtYWlsVGVtcGxhdGVFZGl0b3JQcm9wcykge1xuICBjb25zdCBbc2hvd1ZhcmlhYmxlUGlja2VyLCBzZXRTaG93VmFyaWFibGVQaWNrZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd1ByZXZpZXcsIHNldFNob3dQcmV2aWV3XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3N1YmplY3RDdXJzb3JQb3NpdGlvbiwgc2V0U3ViamVjdEN1cnNvclBvc2l0aW9uXSA9IHVzZVN0YXRlPG51bWJlciB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IHRlbXBsYXRlID0gdmFsdWUgfHwge1xuICAgIG5hbWU6ICcnLFxuICAgIHN1YmplY3Q6ICcnLFxuICAgIGJvZHlfaHRtbDogJycsXG4gICAgY2F0ZWdvcnk6ICdvdGhlcicsXG4gIH07XG5cbiAgY29uc3QgaGFuZGxlTmFtZUNoYW5nZSA9IHVzZUNhbGxiYWNrKFxuICAgIChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgICAgb25DaGFuZ2Uoe1xuICAgICAgICAuLi50ZW1wbGF0ZSxcbiAgICAgICAgbmFtZTogc2FuaXRpemVJbnB1dChlLnRhcmdldC52YWx1ZSksXG4gICAgICB9KTtcbiAgICB9LFxuICAgIFt0ZW1wbGF0ZSwgb25DaGFuZ2VdXG4gICk7XG5cbiAgY29uc3QgaGFuZGxlU3ViamVjdENoYW5nZSA9IHVzZUNhbGxiYWNrKFxuICAgIChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgICAgc2V0U3ViamVjdEN1cnNvclBvc2l0aW9uKGUudGFyZ2V0LnNlbGVjdGlvblN0YXJ0KTtcbiAgICAgIG9uQ2hhbmdlKHtcbiAgICAgICAgLi4udGVtcGxhdGUsXG4gICAgICAgIHN1YmplY3Q6IGUudGFyZ2V0LnZhbHVlLCAvLyBEb24ndCBzYW5pdGl6ZSBzdWJqZWN0IC0gYWxsb3cgdmFyaWFibGVzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIFt0ZW1wbGF0ZSwgb25DaGFuZ2VdXG4gICk7XG5cbiAgY29uc3QgaGFuZGxlQm9keUNoYW5nZSA9IHVzZUNhbGxiYWNrKFxuICAgIChodG1sOiBzdHJpbmcpID0+IHtcbiAgICAgIG9uQ2hhbmdlKHtcbiAgICAgICAgLi4udGVtcGxhdGUsXG4gICAgICAgIGJvZHlfaHRtbDogaHRtbCxcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW3RlbXBsYXRlLCBvbkNoYW5nZV1cbiAgKTtcblxuICBjb25zdCBoYW5kbGVDYXRlZ29yeUNoYW5nZSA9IHVzZUNhbGxiYWNrKFxuICAgIChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MU2VsZWN0RWxlbWVudD4pID0+IHtcbiAgICAgIG9uQ2hhbmdlKHtcbiAgICAgICAgLi4udGVtcGxhdGUsXG4gICAgICAgIGNhdGVnb3J5OiBlLnRhcmdldC52YWx1ZSxcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW3RlbXBsYXRlLCBvbkNoYW5nZV1cbiAgKTtcblxuICBjb25zdCBpbnNlcnRWYXJpYWJsZSA9IHVzZUNhbGxiYWNrKFxuICAgICh2YXJpYWJsZTogc3RyaW5nLCB0YXJnZXQ6ICdzdWJqZWN0JyB8ICdib2R5JykgPT4ge1xuICAgICAgaWYgKHRhcmdldCA9PT0gJ3N1YmplY3QnKSB7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gc3ViamVjdEN1cnNvclBvc2l0aW9uID8/IHRlbXBsYXRlLnN1YmplY3QubGVuZ3RoO1xuICAgICAgICBjb25zdCBuZXdTdWJqZWN0ID1cbiAgICAgICAgICB0ZW1wbGF0ZS5zdWJqZWN0LnNsaWNlKDAsIHBvc2l0aW9uKSArXG4gICAgICAgICAgdmFyaWFibGUgK1xuICAgICAgICAgIHRlbXBsYXRlLnN1YmplY3Quc2xpY2UocG9zaXRpb24pO1xuICAgICAgICBvbkNoYW5nZSh7XG4gICAgICAgICAgLi4udGVtcGxhdGUsXG4gICAgICAgICAgc3ViamVjdDogbmV3U3ViamVjdCxcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3IgYm9keSwgYXBwZW5kIHZhcmlhYmxlIGF0IGVuZCAoUmljaFRleHRFZGl0b3IgaGFuZGxlcyBjdXJzb3IgcG9zaXRpb24pXG4gICAgICAgIG9uQ2hhbmdlKHtcbiAgICAgICAgICAuLi50ZW1wbGF0ZSxcbiAgICAgICAgICBib2R5X2h0bWw6IHRlbXBsYXRlLmJvZHlfaHRtbCArIHZhcmlhYmxlLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHNldFNob3dWYXJpYWJsZVBpY2tlcihmYWxzZSk7XG4gICAgfSxcbiAgICBbdGVtcGxhdGUsIG9uQ2hhbmdlLCBzdWJqZWN0Q3Vyc29yUG9zaXRpb25dXG4gICk7XG5cbiAgY29uc3QgcmVwbGFjZVZhcmlhYmxlcyA9IHVzZUNhbGxiYWNrKCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICAgIGxldCByZXN1bHQgPSB0ZXh0O1xuICAgIE9iamVjdC5lbnRyaWVzKFNBTVBMRV9EQVRBKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKG5ldyBSZWdFeHAoYHt7JHtrZXl9fX1gLCAnZycpLCB2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHByZXZpZXdTdWJqZWN0ID0gcmVwbGFjZVZhcmlhYmxlcyh0ZW1wbGF0ZS5zdWJqZWN0KTtcbiAgY29uc3QgcHJldmlld0JvZHkgPSByZXBsYWNlVmFyaWFibGVzKHRlbXBsYXRlLmJvZHlfaHRtbCk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNlwiPlxuICAgICAgey8qIFRlbXBsYXRlIE5hbWUgKi99XG4gICAgICA8ZGl2PlxuICAgICAgICA8bGFiZWwgaHRtbEZvcj1cInRlbXBsYXRlLW5hbWVcIiBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAgbWItMlwiPlxuICAgICAgICAgIFRlbXBsYXRlIE5hbWUgKlxuICAgICAgICA8L2xhYmVsPlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICBpZD1cInRlbXBsYXRlLW5hbWVcIlxuICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICB2YWx1ZT17dGVtcGxhdGUubmFtZX1cbiAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlTmFtZUNoYW5nZX1cbiAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJlLmcuLCBSU1ZQIENvbmZpcm1hdGlvblwiXG4gICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTQgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctZW1lcmFsZC01MDAgZm9jdXM6Ym9yZGVyLXRyYW5zcGFyZW50IGRpc2FibGVkOmJnLWdyYXktMTAwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiXG4gICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogQ2F0ZWdvcnkgKi99XG4gICAgICA8ZGl2PlxuICAgICAgICA8bGFiZWwgaHRtbEZvcj1cInRlbXBsYXRlLWNhdGVnb3J5XCIgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTJcIj5cbiAgICAgICAgICBDYXRlZ29yeVxuICAgICAgICA8L2xhYmVsPlxuICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgaWQ9XCJ0ZW1wbGF0ZS1jYXRlZ29yeVwiXG4gICAgICAgICAgdmFsdWU9e3RlbXBsYXRlLmNhdGVnb3J5fVxuICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDYXRlZ29yeUNoYW5nZX1cbiAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTQgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctZW1lcmFsZC01MDAgZm9jdXM6Ym9yZGVyLXRyYW5zcGFyZW50IGRpc2FibGVkOmJnLWdyYXktMTAwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiXG4gICAgICAgID5cbiAgICAgICAgICB7VEVNUExBVEVfQ0FURUdPUklFUy5tYXAoKGNhdCkgPT4gKFxuICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2NhdC52YWx1ZX0gdmFsdWU9e2NhdC52YWx1ZX0+XG4gICAgICAgICAgICAgIHtjYXQubGFiZWx9XG4gICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9zZWxlY3Q+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIFN1YmplY3QgTGluZSAqL31cbiAgICAgIDxkaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTJcIj5cbiAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cInRlbXBsYXRlLXN1YmplY3RcIiBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgIFN1YmplY3QgTGluZSAqXG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dWYXJpYWJsZVBpY2tlcighc2hvd1ZhcmlhYmxlUGlja2VyKX1cbiAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1lbWVyYWxkLTYwMCBob3Zlcjp0ZXh0LWVtZXJhbGQtNzAwIGRpc2FibGVkOnRleHQtZ3JheS00MDBcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIEluc2VydCBWYXJpYWJsZVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgaWQ9XCJ0ZW1wbGF0ZS1zdWJqZWN0XCJcbiAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgdmFsdWU9e3RlbXBsYXRlLnN1YmplY3R9XG4gICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVN1YmplY3RDaGFuZ2V9XG4gICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiZS5nLiwgWW91ciBSU1ZQIGZvciB7e2V2ZW50X25hbWV9fVwiXG4gICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTQgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctZW1lcmFsZC01MDAgZm9jdXM6Ym9yZGVyLXRyYW5zcGFyZW50IGRpc2FibGVkOmJnLWdyYXktMTAwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiXG4gICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogVmFyaWFibGUgUGlja2VyICovfVxuICAgICAge3Nob3dWYXJpYWJsZVBpY2tlciAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctZ3JheS01MCBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQtbGcgcC00XCI+XG4gICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBtYi0zXCI+QXZhaWxhYmxlIFZhcmlhYmxlczwvaDM+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGdhcC0yXCI+XG4gICAgICAgICAgICB7VEVNUExBVEVfVkFSSUFCTEVTLm1hcCgodmFyaWFibGUpID0+IChcbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIGtleT17dmFyaWFibGUua2V5fVxuICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGluc2VydFZhcmlhYmxlKHZhcmlhYmxlLmtleSwgJ3N1YmplY3QnKX1cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1sZWZ0IHB4LTMgcHktMiBiZy13aGl0ZSBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQgaG92ZXI6YmctZW1lcmFsZC01MCBob3Zlcjpib3JkZXItZW1lcmFsZC0zMDAgdHJhbnNpdGlvbi1jb2xvcnMgZGlzYWJsZWQ6b3BhY2l0eS01MCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWRcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LW1vbm8gdGV4dC1zbSB0ZXh0LWVtZXJhbGQtNjAwXCI+e3ZhcmlhYmxlLmtleX08L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPnt2YXJpYWJsZS5kZXNjcmlwdGlvbn08L2Rpdj5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7LyogRW1haWwgQm9keSAqL31cbiAgICAgIDxkaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTJcIj5cbiAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwXCI+RW1haWwgQm9keSAqPC9sYWJlbD5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dQcmV2aWV3KCFzaG93UHJldmlldyl9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZW1lcmFsZC02MDAgaG92ZXI6dGV4dC1lbWVyYWxkLTcwMFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAge3Nob3dQcmV2aWV3ID8gJ0hpZGUgUHJldmlldycgOiAnU2hvdyBQcmV2aWV3J31cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgeyFzaG93UHJldmlldyA/IChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPFJpY2hUZXh0RWRpdG9yXG4gICAgICAgICAgICAgIHZhbHVlPXt0ZW1wbGF0ZS5ib2R5X2h0bWx9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVCb2R5Q2hhbmdlfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiV3JpdGUgeW91ciBlbWFpbCBjb250ZW50IGhlcmUuIFVzZSB0aGUgdmFyaWFibGUgcGlja2VyIHRvIGluc2VydCBkeW5hbWljIGNvbnRlbnQuXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTJcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dWYXJpYWJsZVBpY2tlcighc2hvd1ZhcmlhYmxlUGlja2VyKX1cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWVtZXJhbGQtNjAwIGhvdmVyOnRleHQtZW1lcmFsZC03MDAgZGlzYWJsZWQ6dGV4dC1ncmF5LTQwMFwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBJbnNlcnQgVmFyaWFibGUgaW4gQm9keVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHAtNiBiZy13aGl0ZVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi00IHBiLTQgYm9yZGVyLWIgYm9yZGVyLWdyYXktMjAwXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNTAwIG1iLTFcIj5TdWJqZWN0OjwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtXCI+e3ByZXZpZXdTdWJqZWN0fTwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInByb3NlIG1heC13LW5vbmVcIlxuICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17eyBfX2h0bWw6IHByZXZpZXdCb2R5IH19XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC00IHB0LTQgYm9yZGVyLXQgYm9yZGVyLWdyYXktMjAwIHRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICBQcmV2aWV3IHdpdGggc2FtcGxlIGRhdGFcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBBY3Rpb24gQnV0dG9ucyAqL31cbiAgICAgIHsob25TYXZlIHx8IG9uQ2FuY2VsKSAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1lbmQgZ2FwLTMgcHQtNCBib3JkZXItdCBib3JkZXItZ3JheS0yMDBcIj5cbiAgICAgICAgICB7b25DYW5jZWwgJiYgKFxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgb25DbGljaz17b25DYW5jZWx9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIHRleHQtZ3JheS03MDAgYmctd2hpdGUgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktNTAgZGlzYWJsZWQ6b3BhY2l0eS01MCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWRcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBDYW5jZWxcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICl9XG4gICAgICAgICAge29uU2F2ZSAmJiAoXG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICBvbkNsaWNrPXtvblNhdmV9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZCB8fCAhdGVtcGxhdGUubmFtZSB8fCAhdGVtcGxhdGUuc3ViamVjdCB8fCAhdGVtcGxhdGUuYm9keV9odG1sfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC00IHB5LTIgdGV4dC13aGl0ZSBiZy1lbWVyYWxkLTYwMCByb3VuZGVkLWxnIGhvdmVyOmJnLWVtZXJhbGQtNzAwIGRpc2FibGVkOm9wYWNpdHktNTAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgU2F2ZSBUZW1wbGF0ZVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbIkVtYWlsVGVtcGxhdGVFZGl0b3IiLCJURU1QTEFURV9WQVJJQUJMRVMiLCJrZXkiLCJkZXNjcmlwdGlvbiIsIlRFTVBMQVRFX0NBVEVHT1JJRVMiLCJ2YWx1ZSIsImxhYmVsIiwiU0FNUExFX0RBVEEiLCJndWVzdF9uYW1lIiwiZ3Vlc3RfZmlyc3RfbmFtZSIsImd1ZXN0X2xhc3RfbmFtZSIsImd1ZXN0X2VtYWlsIiwiZXZlbnRfbmFtZSIsImV2ZW50X2RhdGUiLCJldmVudF90aW1lIiwiZXZlbnRfbG9jYXRpb24iLCJhY3Rpdml0eV9uYW1lIiwiYWN0aXZpdHlfZGF0ZSIsImFjdGl2aXR5X3RpbWUiLCJhY3Rpdml0eV9sb2NhdGlvbiIsInJzdnBfZGVhZGxpbmUiLCJ3ZWRkaW5nX2RhdGUiLCJ2ZW51ZV9uYW1lIiwidmVudWVfYWRkcmVzcyIsImxvZ2luX2xpbmsiLCJtYWdpY19saW5rIiwib25DaGFuZ2UiLCJvblNhdmUiLCJvbkNhbmNlbCIsImRpc2FibGVkIiwic2hvd1ZhcmlhYmxlUGlja2VyIiwic2V0U2hvd1ZhcmlhYmxlUGlja2VyIiwidXNlU3RhdGUiLCJzaG93UHJldmlldyIsInNldFNob3dQcmV2aWV3Iiwic3ViamVjdEN1cnNvclBvc2l0aW9uIiwic2V0U3ViamVjdEN1cnNvclBvc2l0aW9uIiwidGVtcGxhdGUiLCJuYW1lIiwic3ViamVjdCIsImJvZHlfaHRtbCIsImNhdGVnb3J5IiwiaGFuZGxlTmFtZUNoYW5nZSIsInVzZUNhbGxiYWNrIiwiZSIsInNhbml0aXplSW5wdXQiLCJ0YXJnZXQiLCJoYW5kbGVTdWJqZWN0Q2hhbmdlIiwic2VsZWN0aW9uU3RhcnQiLCJoYW5kbGVCb2R5Q2hhbmdlIiwiaHRtbCIsImhhbmRsZUNhdGVnb3J5Q2hhbmdlIiwiaW5zZXJ0VmFyaWFibGUiLCJ2YXJpYWJsZSIsInBvc2l0aW9uIiwibGVuZ3RoIiwibmV3U3ViamVjdCIsInNsaWNlIiwicmVwbGFjZVZhcmlhYmxlcyIsInRleHQiLCJyZXN1bHQiLCJPYmplY3QiLCJlbnRyaWVzIiwiZm9yRWFjaCIsInJlcGxhY2UiLCJSZWdFeHAiLCJwcmV2aWV3U3ViamVjdCIsInByZXZpZXdCb2R5IiwiZGl2IiwiY2xhc3NOYW1lIiwiaHRtbEZvciIsImlucHV0IiwiaWQiLCJ0eXBlIiwicGxhY2Vob2xkZXIiLCJyZXF1aXJlZCIsInNlbGVjdCIsIm1hcCIsImNhdCIsIm9wdGlvbiIsImJ1dHRvbiIsIm9uQ2xpY2siLCJoMyIsIlJpY2hUZXh0RWRpdG9yIiwiZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwiLCJfX2h0bWwiXSwibWFwcGluZ3MiOiJBQUFBOzs7OzsrQkFzRmdCQTs7O2VBQUFBOzs7OytEQTdFNkI7Z0NBQ2Q7OEJBQ0Q7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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