efadc3fa083bc6363d62a6591a230c83
/**
 * Unit Tests for FamilyManager Component
 * 
 * Tests family member display, profile editing, RSVP management,
 * RLS enforcement, and permission checks.
 * 
 * Requirements: 6.3, 6.4, 6.5, 6.6, 6.7, 6.9, 6.10
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _FamilyManager = require("./FamilyManager");
// Mock fetch
global.fetch = jest.fn();
describe('FamilyManager Component', ()=>{
    const mockAdultGuest = {
        id: 'adult-1',
        first_name: 'John',
        last_name: 'Doe',
        email: 'john@example.com',
        phone: '555-0100',
        age_type: 'adult',
        guest_type: 'wedding_guest',
        group_id: 'group-1',
        dietary_restrictions: 'None',
        created_at: '2024-01-01T00:00:00Z',
        updated_at: '2024-01-01T00:00:00Z'
    };
    const mockChildGuest = {
        id: 'child-1',
        first_name: 'Jane',
        last_name: 'Doe',
        email: 'jane@example.com',
        phone: null,
        age_type: 'child',
        guest_type: 'wedding_guest',
        group_id: 'group-1',
        dietary_restrictions: 'Vegetarian',
        created_at: '2024-01-01T00:00:00Z',
        updated_at: '2024-01-01T00:00:00Z'
    };
    const mockFamilyMembers = [
        mockAdultGuest,
        mockChildGuest
    ];
    const mockRsvpsByGuest = {
        'adult-1': [
            {
                id: 'rsvp-1',
                guest_id: 'adult-1',
                event_id: 'event-1',
                activity_id: null,
                status: 'attending',
                guest_count: 2,
                dietary_notes: null,
                events: {
                    id: 'event-1',
                    name: 'Wedding Ceremony'
                },
                activities: null
            },
            {
                id: 'rsvp-2',
                guest_id: 'adult-1',
                event_id: null,
                activity_id: 'activity-1',
                status: 'pending',
                guest_count: 1,
                dietary_notes: null,
                events: null,
                activities: {
                    id: 'activity-1',
                    name: 'Beach Volleyball'
                }
            }
        ],
        'child-1': [
            {
                id: 'rsvp-3',
                guest_id: 'child-1',
                event_id: 'event-1',
                activity_id: null,
                status: 'attending',
                guest_count: 1,
                dietary_notes: 'Vegetarian',
                events: {
                    id: 'event-1',
                    name: 'Wedding Ceremony'
                },
                activities: null
            }
        ]
    };
    beforeEach(()=>{
        jest.clearAllMocks();
        global.fetch.mockClear();
    });
    describe('Family Member Display', ()=>{
        it('should display all family members for adult guests', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            expect(_react.screen.getByText('John Doe')).toBeInTheDocument();
            expect(_react.screen.getByText('Jane Doe')).toBeInTheDocument();
        });
        it('should display only self for child guests', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockChildGuest,
                familyMembers: [
                    mockChildGuest
                ],
                rsvpsByGuest: mockRsvpsByGuest
            }));
            expect(_react.screen.getByText('Jane Doe')).toBeInTheDocument();
            expect(_react.screen.queryByText('John Doe')).not.toBeInTheDocument();
        });
        it('should display contact information for each family member', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            expect(_react.screen.getByText('john@example.com')).toBeInTheDocument();
            expect(_react.screen.getByText('555-0100')).toBeInTheDocument();
            expect(_react.screen.getByText('jane@example.com')).toBeInTheDocument();
        });
        it('should display age type labels correctly', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            expect(_react.screen.getAllByText(/ðŸ‘¤ Adult/)).toHaveLength(1);
            expect(_react.screen.getAllByText(/ðŸ‘¶ Child/)).toHaveLength(1);
        });
        it('should display dietary restrictions', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            expect(_react.screen.getByText(/None/)).toBeInTheDocument();
            expect(_react.screen.getByText(/Vegetarian/)).toBeInTheDocument();
        });
    });
    describe('Profile Editing', ()=>{
        it('should show edit button for family members that can be edited', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            expect(editButtons.length).toBeGreaterThan(0);
        });
        it('should open edit form when edit button is clicked', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            expect(_react.screen.getByDisplayValue('John')).toBeInTheDocument();
            expect(_react.screen.getByDisplayValue('Doe')).toBeInTheDocument();
            expect(_react.screen.getByDisplayValue('john@example.com')).toBeInTheDocument();
        });
        it('should allow editing first name', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const firstNameInput = _react.screen.getByDisplayValue('John');
            _react.fireEvent.change(firstNameInput, {
                target: {
                    value: 'Jonathan'
                }
            });
            expect(_react.screen.getByDisplayValue('Jonathan')).toBeInTheDocument();
        });
        it('should allow editing last name', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const lastNameInput = _react.screen.getByDisplayValue('Doe');
            _react.fireEvent.change(lastNameInput, {
                target: {
                    value: 'Smith'
                }
            });
            expect(_react.screen.getByDisplayValue('Smith')).toBeInTheDocument();
        });
        it('should allow editing email', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const emailInput = _react.screen.getByDisplayValue('john@example.com');
            _react.fireEvent.change(emailInput, {
                target: {
                    value: 'jonathan@example.com'
                }
            });
            expect(_react.screen.getByDisplayValue('jonathan@example.com')).toBeInTheDocument();
        });
        it('should allow editing phone', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const phoneInput = _react.screen.getByDisplayValue('555-0100');
            _react.fireEvent.change(phoneInput, {
                target: {
                    value: '555-0200'
                }
            });
            expect(_react.screen.getByDisplayValue('555-0200')).toBeInTheDocument();
        });
        it('should allow editing dietary restrictions', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const dietaryInput = _react.screen.getByDisplayValue('None');
            _react.fireEvent.change(dietaryInput, {
                target: {
                    value: 'Gluten-free'
                }
            });
            expect(_react.screen.getByDisplayValue('Gluten-free')).toBeInTheDocument();
        });
        it('should save changes when save button is clicked', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: {
                            ...mockAdultGuest,
                            first_name: 'Jonathan'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const firstNameInput = _react.screen.getByDisplayValue('John');
            _react.fireEvent.change(firstNameInput, {
                target: {
                    value: 'Jonathan'
                }
            });
            const saveButton = _react.screen.getByText(/Save/);
            _react.fireEvent.click(saveButton);
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/guest/family/adult-1', expect.objectContaining({
                    method: 'PATCH',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        first_name: 'Jonathan',
                        last_name: 'Doe',
                        email: 'john@example.com',
                        phone: '555-0100',
                        dietary_restrictions: 'None'
                    })
                }));
            });
        });
        it('should display success message after successful save', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: true,
                        data: mockAdultGuest
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const saveButton = _react.screen.getByText(/Save/);
            _react.fireEvent.click(saveButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/updated successfully/i)).toBeInTheDocument();
            });
        });
        it('should display error message on save failure', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: false,
                        error: {
                            message: 'Failed to update'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const saveButton = _react.screen.getByText(/Save/);
            _react.fireEvent.click(saveButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/Failed to update/i)).toBeInTheDocument();
            });
        });
        it('should cancel editing when cancel button is clicked', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const firstNameInput = _react.screen.getByDisplayValue('John');
            _react.fireEvent.change(firstNameInput, {
                target: {
                    value: 'Jonathan'
                }
            });
            const cancelButton = _react.screen.getByText(/Cancel/);
            _react.fireEvent.click(cancelButton);
            expect(_react.screen.queryByDisplayValue('Jonathan')).not.toBeInTheDocument();
        });
    });
    describe('RSVP Management', ()=>{
        it('should display RSVP summary for each family member', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            // Adult has 2 RSVPs (1 attending, 1 pending)
            expect(_react.screen.getByText(/Attending: 1/)).toBeInTheDocument();
            expect(_react.screen.getByText(/Pending: 1/)).toBeInTheDocument();
        });
        it('should toggle RSVP details when button is clicked', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const toggleButtons = _react.screen.getAllByText(/Show Details/);
            _react.fireEvent.click(toggleButtons[0]);
            expect(_react.screen.getByText('Wedding Ceremony')).toBeInTheDocument();
            expect(_react.screen.getByText('Beach Volleyball')).toBeInTheDocument();
        });
        it('should display RSVP status with correct styling', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const toggleButtons = _react.screen.getAllByText(/Show Details/);
            _react.fireEvent.click(toggleButtons[0]);
            const attendingBadge = _react.screen.getByText(/âœ“/);
            expect(attendingBadge).toBeInTheDocument();
            const pendingBadge = _react.screen.getByText(/â—‹/);
            expect(pendingBadge).toBeInTheDocument();
        });
        it('should display guest count for RSVPs', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const toggleButtons = _react.screen.getAllByText(/Show Details/);
            _react.fireEvent.click(toggleButtons[0]);
            expect(_react.screen.getByText(/Guests: 2/)).toBeInTheDocument();
            expect(_react.screen.getByText(/Guests: 1/)).toBeInTheDocument();
        });
        it('should display dietary notes for RSVPs', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockChildGuest,
                familyMembers: [
                    mockChildGuest
                ],
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const toggleButtons = _react.screen.getAllByText(/Show Details/);
            _react.fireEvent.click(toggleButtons[0]);
            expect(_react.screen.getByText(/Vegetarian/)).toBeInTheDocument();
        });
        it('should show empty state when no RSVPs exist', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: [
                    {
                        ...mockAdultGuest,
                        id: 'no-rsvps'
                    }
                ],
                rsvpsByGuest: {}
            }));
            const toggleButtons = _react.screen.getAllByText(/Show Details/);
            _react.fireEvent.click(toggleButtons[0]);
            expect(_react.screen.getByText(/No RSVPs yet/)).toBeInTheDocument();
        });
    });
    describe('Permission Checks', ()=>{
        it('should allow adults to edit all family members', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            expect(editButtons.length).toBe(2); // Can edit both adult and child
        });
        it('should allow children to edit only themselves', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockChildGuest,
                familyMembers: [
                    mockChildGuest
                ],
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            expect(editButtons.length).toBe(1); // Can only edit self
        });
        it('should not show edit button for members children cannot edit', ()=>{
            const childWithAdultSibling = {
                ...mockChildGuest,
                id: 'child-2'
            };
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: childWithAdultSibling,
                familyMembers: [
                    mockAdultGuest,
                    childWithAdultSibling
                ],
                rsvpsByGuest: mockRsvpsByGuest
            }));
            // Should only see one edit button (for self)
            const editButtons = _react.screen.getAllByText(/Edit/);
            expect(editButtons.length).toBe(1);
        });
        it('should not allow editing when canEdit returns false', ()=>{
            const childGuest = {
                ...mockChildGuest
            };
            const otherChild = {
                ...mockChildGuest,
                id: 'other-child',
                first_name: 'Other'
            };
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: childGuest,
                familyMembers: [
                    childGuest,
                    otherChild
                ],
                rsvpsByGuest: mockRsvpsByGuest
            }));
            // Should only see edit button for self, not for other child
            const editButtons = _react.screen.getAllByText(/Edit/);
            expect(editButtons.length).toBe(1);
        });
    });
    describe('RLS Enforcement', ()=>{
        it('should only display family members from the same group', ()=>{
            const differentGroupMember = {
                ...mockAdultGuest,
                id: 'different-group',
                group_id: 'group-2',
                first_name: 'Other'
            };
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            expect(_react.screen.queryByText('Other')).not.toBeInTheDocument();
        });
        it('should not allow editing members from different groups', ()=>{
            // This is enforced at the API level, but component should not show edit button
            const currentGuest = {
                ...mockAdultGuest,
                group_id: 'group-1'
            };
            const differentGroupMember = {
                ...mockAdultGuest,
                id: 'diff-id',
                group_id: 'group-2'
            };
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: currentGuest,
                familyMembers: [
                    currentGuest
                ],
                rsvpsByGuest: mockRsvpsByGuest
            }));
            // Should only see one family member (self)
            expect(_react.screen.getAllByText(/ðŸ‘¤ Adult/).length).toBe(1);
        });
    });
    describe('Error Handling', ()=>{
        it('should handle network errors gracefully', async ()=>{
            global.fetch.mockRejectedValueOnce(new Error('Network error'));
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const saveButton = _react.screen.getByText(/Save/);
            _react.fireEvent.click(saveButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/Network error/i)).toBeInTheDocument();
            });
        });
        it('should handle API errors gracefully', async ()=>{
            global.fetch.mockResolvedValueOnce({
                json: async ()=>({
                        success: false,
                        error: {
                            code: 'VALIDATION_ERROR',
                            message: 'Invalid email format'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_FamilyManager.FamilyManager, {
                currentGuest: mockAdultGuest,
                familyMembers: mockFamilyMembers,
                rsvpsByGuest: mockRsvpsByGuest
            }));
            const editButtons = _react.screen.getAllByText(/Edit/);
            _react.fireEvent.click(editButtons[0]);
            const saveButton = _react.screen.getByText(/Save/);
            _react.fireEvent.click(saveButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/Invalid email format/i)).toBeInTheDocument();
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9ndWVzdC9GYW1pbHlNYW5hZ2VyLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5pdCBUZXN0cyBmb3IgRmFtaWx5TWFuYWdlciBDb21wb25lbnRcbiAqIFxuICogVGVzdHMgZmFtaWx5IG1lbWJlciBkaXNwbGF5LCBwcm9maWxlIGVkaXRpbmcsIFJTVlAgbWFuYWdlbWVudCxcbiAqIFJMUyBlbmZvcmNlbWVudCwgYW5kIHBlcm1pc3Npb24gY2hlY2tzLlxuICogXG4gKiBSZXF1aXJlbWVudHM6IDYuMywgNi40LCA2LjUsIDYuNiwgNi43LCA2LjksIDYuMTBcbiAqL1xuXG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBGYW1pbHlNYW5hZ2VyIH0gZnJvbSAnLi9GYW1pbHlNYW5hZ2VyJztcbmltcG9ydCB0eXBlIHsgR3Vlc3QgfSBmcm9tICdAL3R5cGVzJztcblxuLy8gTW9jayBmZXRjaFxuZ2xvYmFsLmZldGNoID0gamVzdC5mbigpO1xuXG5kZXNjcmliZSgnRmFtaWx5TWFuYWdlciBDb21wb25lbnQnLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tBZHVsdEd1ZXN0OiBHdWVzdCA9IHtcbiAgICBpZDogJ2FkdWx0LTEnLFxuICAgIGZpcnN0X25hbWU6ICdKb2huJyxcbiAgICBsYXN0X25hbWU6ICdEb2UnLFxuICAgIGVtYWlsOiAnam9obkBleGFtcGxlLmNvbScsXG4gICAgcGhvbmU6ICc1NTUtMDEwMCcsXG4gICAgYWdlX3R5cGU6ICdhZHVsdCcsXG4gICAgZ3Vlc3RfdHlwZTogJ3dlZGRpbmdfZ3Vlc3QnLFxuICAgIGdyb3VwX2lkOiAnZ3JvdXAtMScsXG4gICAgZGlldGFyeV9yZXN0cmljdGlvbnM6ICdOb25lJyxcbiAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gIH07XG5cbiAgY29uc3QgbW9ja0NoaWxkR3Vlc3Q6IEd1ZXN0ID0ge1xuICAgIGlkOiAnY2hpbGQtMScsXG4gICAgZmlyc3RfbmFtZTogJ0phbmUnLFxuICAgIGxhc3RfbmFtZTogJ0RvZScsXG4gICAgZW1haWw6ICdqYW5lQGV4YW1wbGUuY29tJyxcbiAgICBwaG9uZTogbnVsbCxcbiAgICBhZ2VfdHlwZTogJ2NoaWxkJyxcbiAgICBndWVzdF90eXBlOiAnd2VkZGluZ19ndWVzdCcsXG4gICAgZ3JvdXBfaWQ6ICdncm91cC0xJyxcbiAgICBkaWV0YXJ5X3Jlc3RyaWN0aW9uczogJ1ZlZ2V0YXJpYW4nLFxuICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgfTtcblxuICBjb25zdCBtb2NrRmFtaWx5TWVtYmVyczogR3Vlc3RbXSA9IFttb2NrQWR1bHRHdWVzdCwgbW9ja0NoaWxkR3Vlc3RdO1xuXG4gIGNvbnN0IG1vY2tSc3Zwc0J5R3Vlc3QgPSB7XG4gICAgJ2FkdWx0LTEnOiBbXG4gICAgICB7XG4gICAgICAgIGlkOiAncnN2cC0xJyxcbiAgICAgICAgZ3Vlc3RfaWQ6ICdhZHVsdC0xJyxcbiAgICAgICAgZXZlbnRfaWQ6ICdldmVudC0xJyxcbiAgICAgICAgYWN0aXZpdHlfaWQ6IG51bGwsXG4gICAgICAgIHN0YXR1czogJ2F0dGVuZGluZycsXG4gICAgICAgIGd1ZXN0X2NvdW50OiAyLFxuICAgICAgICBkaWV0YXJ5X25vdGVzOiBudWxsLFxuICAgICAgICBldmVudHM6IHsgaWQ6ICdldmVudC0xJywgbmFtZTogJ1dlZGRpbmcgQ2VyZW1vbnknIH0sXG4gICAgICAgIGFjdGl2aXRpZXM6IG51bGwsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogJ3JzdnAtMicsXG4gICAgICAgIGd1ZXN0X2lkOiAnYWR1bHQtMScsXG4gICAgICAgIGV2ZW50X2lkOiBudWxsLFxuICAgICAgICBhY3Rpdml0eV9pZDogJ2FjdGl2aXR5LTEnLFxuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgZ3Vlc3RfY291bnQ6IDEsXG4gICAgICAgIGRpZXRhcnlfbm90ZXM6IG51bGwsXG4gICAgICAgIGV2ZW50czogbnVsbCxcbiAgICAgICAgYWN0aXZpdGllczogeyBpZDogJ2FjdGl2aXR5LTEnLCBuYW1lOiAnQmVhY2ggVm9sbGV5YmFsbCcgfSxcbiAgICAgIH0sXG4gICAgXSxcbiAgICAnY2hpbGQtMSc6IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdyc3ZwLTMnLFxuICAgICAgICBndWVzdF9pZDogJ2NoaWxkLTEnLFxuICAgICAgICBldmVudF9pZDogJ2V2ZW50LTEnLFxuICAgICAgICBhY3Rpdml0eV9pZDogbnVsbCxcbiAgICAgICAgc3RhdHVzOiAnYXR0ZW5kaW5nJyxcbiAgICAgICAgZ3Vlc3RfY291bnQ6IDEsXG4gICAgICAgIGRpZXRhcnlfbm90ZXM6ICdWZWdldGFyaWFuJyxcbiAgICAgICAgZXZlbnRzOiB7IGlkOiAnZXZlbnQtMScsIG5hbWU6ICdXZWRkaW5nIENlcmVtb255JyB9LFxuICAgICAgICBhY3Rpdml0aWVzOiBudWxsLFxuICAgICAgfSxcbiAgICBdLFxuICB9O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrQ2xlYXIoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ZhbWlseSBNZW1iZXIgRGlzcGxheScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgYWxsIGZhbWlseSBtZW1iZXJzIGZvciBhZHVsdCBndWVzdHMnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxGYW1pbHlNYW5hZ2VyXG4gICAgICAgICAgY3VycmVudEd1ZXN0PXttb2NrQWR1bHRHdWVzdH1cbiAgICAgICAgICBmYW1pbHlNZW1iZXJzPXttb2NrRmFtaWx5TWVtYmVyc31cbiAgICAgICAgICByc3Zwc0J5R3Vlc3Q9e21vY2tSc3Zwc0J5R3Vlc3R9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnSm9obiBEb2UnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdKYW5lIERvZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IG9ubHkgc2VsZiBmb3IgY2hpbGQgZ3Vlc3RzJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17bW9ja0NoaWxkR3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17W21vY2tDaGlsZEd1ZXN0XX1cbiAgICAgICAgICByc3Zwc0J5R3Vlc3Q9e21vY2tSc3Zwc0J5R3Vlc3R9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnSmFuZSBEb2UnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ0pvaG4gRG9lJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGNvbnRhY3QgaW5mb3JtYXRpb24gZm9yIGVhY2ggZmFtaWx5IG1lbWJlcicsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e21vY2tBZHVsdEd1ZXN0fVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e21vY2tGYW1pbHlNZW1iZXJzfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdqb2huQGV4YW1wbGUuY29tJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnNTU1LTAxMDAnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdqYW5lQGV4YW1wbGUuY29tJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgYWdlIHR5cGUgbGFiZWxzIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e21vY2tBZHVsdEd1ZXN0fVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e21vY2tGYW1pbHlNZW1iZXJzfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QWxsQnlUZXh0KC/wn5GkIEFkdWx0LykpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QWxsQnlUZXh0KC/wn5G2IENoaWxkLykpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBkaWV0YXJ5IHJlc3RyaWN0aW9ucycsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e21vY2tBZHVsdEd1ZXN0fVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e21vY2tGYW1pbHlNZW1iZXJzfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9Ob25lLykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvVmVnZXRhcmlhbi8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUHJvZmlsZSBFZGl0aW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc2hvdyBlZGl0IGJ1dHRvbiBmb3IgZmFtaWx5IG1lbWJlcnMgdGhhdCBjYW4gYmUgZWRpdGVkJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17bW9ja0FkdWx0R3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17bW9ja0ZhbWlseU1lbWJlcnN9XG4gICAgICAgICAgcnN2cHNCeUd1ZXN0PXttb2NrUnN2cHNCeUd1ZXN0fVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgZWRpdEJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC9FZGl0Lyk7XG4gICAgICBleHBlY3QoZWRpdEJ1dHRvbnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG9wZW4gZWRpdCBmb3JtIHdoZW4gZWRpdCBidXR0b24gaXMgY2xpY2tlZCcsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e21vY2tBZHVsdEd1ZXN0fVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e21vY2tGYW1pbHlNZW1iZXJzfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGVkaXRCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgvRWRpdC8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGVkaXRCdXR0b25zWzBdKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeURpc3BsYXlWYWx1ZSgnSm9obicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeURpc3BsYXlWYWx1ZSgnRG9lJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCdqb2huQGV4YW1wbGUuY29tJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFsbG93IGVkaXRpbmcgZmlyc3QgbmFtZScsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e21vY2tBZHVsdEd1ZXN0fVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e21vY2tGYW1pbHlNZW1iZXJzfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGVkaXRCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgvRWRpdC8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGVkaXRCdXR0b25zWzBdKTtcblxuICAgICAgY29uc3QgZmlyc3ROYW1lSW5wdXQgPSBzY3JlZW4uZ2V0QnlEaXNwbGF5VmFsdWUoJ0pvaG4nKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoZmlyc3ROYW1lSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnSm9uYXRoYW4nIH0gfSk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlEaXNwbGF5VmFsdWUoJ0pvbmF0aGFuJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFsbG93IGVkaXRpbmcgbGFzdCBuYW1lJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17bW9ja0FkdWx0R3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17bW9ja0ZhbWlseU1lbWJlcnN9XG4gICAgICAgICAgcnN2cHNCeUd1ZXN0PXttb2NrUnN2cHNCeUd1ZXN0fVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgZWRpdEJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC9FZGl0Lyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soZWRpdEJ1dHRvbnNbMF0pO1xuXG4gICAgICBjb25zdCBsYXN0TmFtZUlucHV0ID0gc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCdEb2UnKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UobGFzdE5hbWVJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdTbWl0aCcgfSB9KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeURpc3BsYXlWYWx1ZSgnU21pdGgnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWxsb3cgZWRpdGluZyBlbWFpbCcsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e21vY2tBZHVsdEd1ZXN0fVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e21vY2tGYW1pbHlNZW1iZXJzfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGVkaXRCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgvRWRpdC8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGVkaXRCdXR0b25zWzBdKTtcblxuICAgICAgY29uc3QgZW1haWxJbnB1dCA9IHNjcmVlbi5nZXRCeURpc3BsYXlWYWx1ZSgnam9obkBleGFtcGxlLmNvbScpO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShlbWFpbElucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJ2pvbmF0aGFuQGV4YW1wbGUuY29tJyB9IH0pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCdqb25hdGhhbkBleGFtcGxlLmNvbScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBlZGl0aW5nIHBob25lJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17bW9ja0FkdWx0R3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17bW9ja0ZhbWlseU1lbWJlcnN9XG4gICAgICAgICAgcnN2cHNCeUd1ZXN0PXttb2NrUnN2cHNCeUd1ZXN0fVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgZWRpdEJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC9FZGl0Lyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soZWRpdEJ1dHRvbnNbMF0pO1xuXG4gICAgICBjb25zdCBwaG9uZUlucHV0ID0gc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCc1NTUtMDEwMCcpO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShwaG9uZUlucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJzU1NS0wMjAwJyB9IH0pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCc1NTUtMDIwMCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBlZGl0aW5nIGRpZXRhcnkgcmVzdHJpY3Rpb25zJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17bW9ja0FkdWx0R3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17bW9ja0ZhbWlseU1lbWJlcnN9XG4gICAgICAgICAgcnN2cHNCeUd1ZXN0PXttb2NrUnN2cHNCeUd1ZXN0fVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgZWRpdEJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC9FZGl0Lyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soZWRpdEJ1dHRvbnNbMF0pO1xuXG4gICAgICBjb25zdCBkaWV0YXJ5SW5wdXQgPSBzY3JlZW4uZ2V0QnlEaXNwbGF5VmFsdWUoJ05vbmUnKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoZGlldGFyeUlucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJ0dsdXRlbi1mcmVlJyB9IH0pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCdHbHV0ZW4tZnJlZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzYXZlIGNoYW5nZXMgd2hlbiBzYXZlIGJ1dHRvbiBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHsgLi4ubW9ja0FkdWx0R3Vlc3QsIGZpcnN0X25hbWU6ICdKb25hdGhhbicgfSB9KSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxGYW1pbHlNYW5hZ2VyXG4gICAgICAgICAgY3VycmVudEd1ZXN0PXttb2NrQWR1bHRHdWVzdH1cbiAgICAgICAgICBmYW1pbHlNZW1iZXJzPXttb2NrRmFtaWx5TWVtYmVyc31cbiAgICAgICAgICByc3Zwc0J5R3Vlc3Q9e21vY2tSc3Zwc0J5R3Vlc3R9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBlZGl0QnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoL0VkaXQvKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhlZGl0QnV0dG9uc1swXSk7XG5cbiAgICAgIGNvbnN0IGZpcnN0TmFtZUlucHV0ID0gc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKCdKb2huJyk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKGZpcnN0TmFtZUlucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJ0pvbmF0aGFuJyB9IH0pO1xuXG4gICAgICBjb25zdCBzYXZlQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgvU2F2ZS8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNhdmVCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgJy9hcGkvZ3Vlc3QvZmFtaWx5L2FkdWx0LTEnLFxuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICBmaXJzdF9uYW1lOiAnSm9uYXRoYW4nLFxuICAgICAgICAgICAgICBsYXN0X25hbWU6ICdEb2UnLFxuICAgICAgICAgICAgICBlbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nLFxuICAgICAgICAgICAgICBwaG9uZTogJzU1NS0wMTAwJyxcbiAgICAgICAgICAgICAgZGlldGFyeV9yZXN0cmljdGlvbnM6ICdOb25lJyxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBzdWNjZXNzIG1lc3NhZ2UgYWZ0ZXIgc3VjY2Vzc2Z1bCBzYXZlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tBZHVsdEd1ZXN0IH0pLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e21vY2tBZHVsdEd1ZXN0fVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e21vY2tGYW1pbHlNZW1iZXJzfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGVkaXRCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgvRWRpdC8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGVkaXRCdXR0b25zWzBdKTtcblxuICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoL1NhdmUvKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhzYXZlQnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC91cGRhdGVkIHN1Y2Nlc3NmdWxseS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGVycm9yIG1lc3NhZ2Ugb24gc2F2ZSBmYWlsdXJlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogeyBtZXNzYWdlOiAnRmFpbGVkIHRvIHVwZGF0ZScgfSB9KSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxGYW1pbHlNYW5hZ2VyXG4gICAgICAgICAgY3VycmVudEd1ZXN0PXttb2NrQWR1bHRHdWVzdH1cbiAgICAgICAgICBmYW1pbHlNZW1iZXJzPXttb2NrRmFtaWx5TWVtYmVyc31cbiAgICAgICAgICByc3Zwc0J5R3Vlc3Q9e21vY2tSc3Zwc0J5R3Vlc3R9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBlZGl0QnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoL0VkaXQvKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhlZGl0QnV0dG9uc1swXSk7XG5cbiAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KC9TYXZlLyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2F2ZUJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvRmFpbGVkIHRvIHVwZGF0ZS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYW5jZWwgZWRpdGluZyB3aGVuIGNhbmNlbCBidXR0b24gaXMgY2xpY2tlZCcsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e21vY2tBZHVsdEd1ZXN0fVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e21vY2tGYW1pbHlNZW1iZXJzfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGVkaXRCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgvRWRpdC8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGVkaXRCdXR0b25zWzBdKTtcblxuICAgICAgY29uc3QgZmlyc3ROYW1lSW5wdXQgPSBzY3JlZW4uZ2V0QnlEaXNwbGF5VmFsdWUoJ0pvaG4nKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoZmlyc3ROYW1lSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnSm9uYXRoYW4nIH0gfSk7XG5cbiAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoL0NhbmNlbC8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGNhbmNlbEJ1dHRvbik7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeURpc3BsYXlWYWx1ZSgnSm9uYXRoYW4nKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSU1ZQIE1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IFJTVlAgc3VtbWFyeSBmb3IgZWFjaCBmYW1pbHkgbWVtYmVyJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17bW9ja0FkdWx0R3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17bW9ja0ZhbWlseU1lbWJlcnN9XG4gICAgICAgICAgcnN2cHNCeUd1ZXN0PXttb2NrUnN2cHNCeUd1ZXN0fVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgLy8gQWR1bHQgaGFzIDIgUlNWUHMgKDEgYXR0ZW5kaW5nLCAxIHBlbmRpbmcpXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvQXR0ZW5kaW5nOiAxLykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvUGVuZGluZzogMS8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0b2dnbGUgUlNWUCBkZXRhaWxzIHdoZW4gYnV0dG9uIGlzIGNsaWNrZWQnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxGYW1pbHlNYW5hZ2VyXG4gICAgICAgICAgY3VycmVudEd1ZXN0PXttb2NrQWR1bHRHdWVzdH1cbiAgICAgICAgICBmYW1pbHlNZW1iZXJzPXttb2NrRmFtaWx5TWVtYmVyc31cbiAgICAgICAgICByc3Zwc0J5R3Vlc3Q9e21vY2tSc3Zwc0J5R3Vlc3R9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBjb25zdCB0b2dnbGVCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgvU2hvdyBEZXRhaWxzLyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sodG9nZ2xlQnV0dG9uc1swXSk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdXZWRkaW5nIENlcmVtb255JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQmVhY2ggVm9sbGV5YmFsbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IFJTVlAgc3RhdHVzIHdpdGggY29ycmVjdCBzdHlsaW5nJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17bW9ja0FkdWx0R3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17bW9ja0ZhbWlseU1lbWJlcnN9XG4gICAgICAgICAgcnN2cHNCeUd1ZXN0PXttb2NrUnN2cHNCeUd1ZXN0fVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgdG9nZ2xlQnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoL1Nob3cgRGV0YWlscy8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHRvZ2dsZUJ1dHRvbnNbMF0pO1xuXG4gICAgICBjb25zdCBhdHRlbmRpbmdCYWRnZSA9IHNjcmVlbi5nZXRCeVRleHQoL+Kcky8pO1xuICAgICAgZXhwZWN0KGF0dGVuZGluZ0JhZGdlKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgICBjb25zdCBwZW5kaW5nQmFkZ2UgPSBzY3JlZW4uZ2V0QnlUZXh0KC/il4svKTtcbiAgICAgIGV4cGVjdChwZW5kaW5nQmFkZ2UpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgZ3Vlc3QgY291bnQgZm9yIFJTVlBzJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17bW9ja0FkdWx0R3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17bW9ja0ZhbWlseU1lbWJlcnN9XG4gICAgICAgICAgcnN2cHNCeUd1ZXN0PXttb2NrUnN2cHNCeUd1ZXN0fVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgdG9nZ2xlQnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoL1Nob3cgRGV0YWlscy8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHRvZ2dsZUJ1dHRvbnNbMF0pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvR3Vlc3RzOiAyLykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvR3Vlc3RzOiAxLykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgZGlldGFyeSBub3RlcyBmb3IgUlNWUHMnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxGYW1pbHlNYW5hZ2VyXG4gICAgICAgICAgY3VycmVudEd1ZXN0PXttb2NrQ2hpbGRHdWVzdH1cbiAgICAgICAgICBmYW1pbHlNZW1iZXJzPXtbbW9ja0NoaWxkR3Vlc3RdfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHRvZ2dsZUJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC9TaG93IERldGFpbHMvKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayh0b2dnbGVCdXR0b25zWzBdKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL1ZlZ2V0YXJpYW4vKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2hvdyBlbXB0eSBzdGF0ZSB3aGVuIG5vIFJTVlBzIGV4aXN0JywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17bW9ja0FkdWx0R3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17W3sgLi4ubW9ja0FkdWx0R3Vlc3QsIGlkOiAnbm8tcnN2cHMnIH1dfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17e319XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBjb25zdCB0b2dnbGVCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgvU2hvdyBEZXRhaWxzLyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sodG9nZ2xlQnV0dG9uc1swXSk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9ObyBSU1ZQcyB5ZXQvKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Blcm1pc3Npb24gQ2hlY2tzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYWxsb3cgYWR1bHRzIHRvIGVkaXQgYWxsIGZhbWlseSBtZW1iZXJzJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17bW9ja0FkdWx0R3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17bW9ja0ZhbWlseU1lbWJlcnN9XG4gICAgICAgICAgcnN2cHNCeUd1ZXN0PXttb2NrUnN2cHNCeUd1ZXN0fVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgZWRpdEJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC9FZGl0Lyk7XG4gICAgICBleHBlY3QoZWRpdEJ1dHRvbnMubGVuZ3RoKS50b0JlKDIpOyAvLyBDYW4gZWRpdCBib3RoIGFkdWx0IGFuZCBjaGlsZFxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBjaGlsZHJlbiB0byBlZGl0IG9ubHkgdGhlbXNlbHZlcycsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e21vY2tDaGlsZEd1ZXN0fVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e1ttb2NrQ2hpbGRHdWVzdF19XG4gICAgICAgICAgcnN2cHNCeUd1ZXN0PXttb2NrUnN2cHNCeUd1ZXN0fVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgZWRpdEJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC9FZGl0Lyk7XG4gICAgICBleHBlY3QoZWRpdEJ1dHRvbnMubGVuZ3RoKS50b0JlKDEpOyAvLyBDYW4gb25seSBlZGl0IHNlbGZcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IHNob3cgZWRpdCBidXR0b24gZm9yIG1lbWJlcnMgY2hpbGRyZW4gY2Fubm90IGVkaXQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjaGlsZFdpdGhBZHVsdFNpYmxpbmcgPSB7XG4gICAgICAgIC4uLm1vY2tDaGlsZEd1ZXN0LFxuICAgICAgICBpZDogJ2NoaWxkLTInLFxuICAgICAgfTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17Y2hpbGRXaXRoQWR1bHRTaWJsaW5nfVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e1ttb2NrQWR1bHRHdWVzdCwgY2hpbGRXaXRoQWR1bHRTaWJsaW5nXX1cbiAgICAgICAgICByc3Zwc0J5R3Vlc3Q9e21vY2tSc3Zwc0J5R3Vlc3R9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICAvLyBTaG91bGQgb25seSBzZWUgb25lIGVkaXQgYnV0dG9uIChmb3Igc2VsZilcbiAgICAgIGNvbnN0IGVkaXRCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgvRWRpdC8pO1xuICAgICAgZXhwZWN0KGVkaXRCdXR0b25zLmxlbmd0aCkudG9CZSgxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IGFsbG93IGVkaXRpbmcgd2hlbiBjYW5FZGl0IHJldHVybnMgZmFsc2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjaGlsZEd1ZXN0ID0geyAuLi5tb2NrQ2hpbGRHdWVzdCB9O1xuICAgICAgY29uc3Qgb3RoZXJDaGlsZCA9IHsgLi4ubW9ja0NoaWxkR3Vlc3QsIGlkOiAnb3RoZXItY2hpbGQnLCBmaXJzdF9uYW1lOiAnT3RoZXInIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e2NoaWxkR3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17W2NoaWxkR3Vlc3QsIG90aGVyQ2hpbGRdfVxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIC8vIFNob3VsZCBvbmx5IHNlZSBlZGl0IGJ1dHRvbiBmb3Igc2VsZiwgbm90IGZvciBvdGhlciBjaGlsZFxuICAgICAgY29uc3QgZWRpdEJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC9FZGl0Lyk7XG4gICAgICBleHBlY3QoZWRpdEJ1dHRvbnMubGVuZ3RoKS50b0JlKDEpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUkxTIEVuZm9yY2VtZW50JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgb25seSBkaXNwbGF5IGZhbWlseSBtZW1iZXJzIGZyb20gdGhlIHNhbWUgZ3JvdXAnLCAoKSA9PiB7XG4gICAgICBjb25zdCBkaWZmZXJlbnRHcm91cE1lbWJlciA9IHtcbiAgICAgICAgLi4ubW9ja0FkdWx0R3Vlc3QsXG4gICAgICAgIGlkOiAnZGlmZmVyZW50LWdyb3VwJyxcbiAgICAgICAgZ3JvdXBfaWQ6ICdncm91cC0yJyxcbiAgICAgICAgZmlyc3RfbmFtZTogJ090aGVyJyxcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEZhbWlseU1hbmFnZXJcbiAgICAgICAgICBjdXJyZW50R3Vlc3Q9e21vY2tBZHVsdEd1ZXN0fVxuICAgICAgICAgIGZhbWlseU1lbWJlcnM9e21vY2tGYW1pbHlNZW1iZXJzfSAvLyBTaG91bGQgbm90IGluY2x1ZGUgZGlmZmVyZW50IGdyb3VwIG1lbWJlclxuICAgICAgICAgIHJzdnBzQnlHdWVzdD17bW9ja1JzdnBzQnlHdWVzdH1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ090aGVyJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgYWxsb3cgZWRpdGluZyBtZW1iZXJzIGZyb20gZGlmZmVyZW50IGdyb3VwcycsICgpID0+IHtcbiAgICAgIC8vIFRoaXMgaXMgZW5mb3JjZWQgYXQgdGhlIEFQSSBsZXZlbCwgYnV0IGNvbXBvbmVudCBzaG91bGQgbm90IHNob3cgZWRpdCBidXR0b25cbiAgICAgIGNvbnN0IGN1cnJlbnRHdWVzdCA9IHsgLi4ubW9ja0FkdWx0R3Vlc3QsIGdyb3VwX2lkOiAnZ3JvdXAtMScgfTtcbiAgICAgIGNvbnN0IGRpZmZlcmVudEdyb3VwTWVtYmVyID0geyAuLi5tb2NrQWR1bHRHdWVzdCwgaWQ6ICdkaWZmLWlkJywgZ3JvdXBfaWQ6ICdncm91cC0yJyB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxGYW1pbHlNYW5hZ2VyXG4gICAgICAgICAgY3VycmVudEd1ZXN0PXtjdXJyZW50R3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17W2N1cnJlbnRHdWVzdF19IC8vIFNlcnZlciBzaG91bGQgZmlsdGVyIG91dCBkaWZmZXJlbnQgZ3JvdXBcbiAgICAgICAgICByc3Zwc0J5R3Vlc3Q9e21vY2tSc3Zwc0J5R3Vlc3R9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICAvLyBTaG91bGQgb25seSBzZWUgb25lIGZhbWlseSBtZW1iZXIgKHNlbGYpXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEFsbEJ5VGV4dCgv8J+RpCBBZHVsdC8pLmxlbmd0aCkudG9CZSgxKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIG5ldHdvcmsgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignTmV0d29yayBlcnJvcicpKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17bW9ja0FkdWx0R3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17bW9ja0ZhbWlseU1lbWJlcnN9XG4gICAgICAgICAgcnN2cHNCeUd1ZXN0PXttb2NrUnN2cHNCeUd1ZXN0fVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgZWRpdEJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC9FZGl0Lyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soZWRpdEJ1dHRvbnNbMF0pO1xuXG4gICAgICBjb25zdCBzYXZlQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgvU2F2ZS8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNhdmVCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL05ldHdvcmsgZXJyb3IvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIEFQSSBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IHsgY29kZTogJ1ZBTElEQVRJT05fRVJST1InLCBtZXNzYWdlOiAnSW52YWxpZCBlbWFpbCBmb3JtYXQnIH0gfSksXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8RmFtaWx5TWFuYWdlclxuICAgICAgICAgIGN1cnJlbnRHdWVzdD17bW9ja0FkdWx0R3Vlc3R9XG4gICAgICAgICAgZmFtaWx5TWVtYmVycz17bW9ja0ZhbWlseU1lbWJlcnN9XG4gICAgICAgICAgcnN2cHNCeUd1ZXN0PXttb2NrUnN2cHNCeUd1ZXN0fVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgZWRpdEJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC9FZGl0Lyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soZWRpdEJ1dHRvbnNbMF0pO1xuXG4gICAgICBjb25zdCBzYXZlQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgvU2F2ZS8pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNhdmVCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL0ludmFsaWQgZW1haWwgZm9ybWF0L2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiZ2xvYmFsIiwiZmV0Y2giLCJqZXN0IiwiZm4iLCJkZXNjcmliZSIsIm1vY2tBZHVsdEd1ZXN0IiwiaWQiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiZW1haWwiLCJwaG9uZSIsImFnZV90eXBlIiwiZ3Vlc3RfdHlwZSIsImdyb3VwX2lkIiwiZGlldGFyeV9yZXN0cmljdGlvbnMiLCJjcmVhdGVkX2F0IiwidXBkYXRlZF9hdCIsIm1vY2tDaGlsZEd1ZXN0IiwibW9ja0ZhbWlseU1lbWJlcnMiLCJtb2NrUnN2cHNCeUd1ZXN0IiwiZ3Vlc3RfaWQiLCJldmVudF9pZCIsImFjdGl2aXR5X2lkIiwic3RhdHVzIiwiZ3Vlc3RfY291bnQiLCJkaWV0YXJ5X25vdGVzIiwiZXZlbnRzIiwibmFtZSIsImFjdGl2aXRpZXMiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tDbGVhciIsIml0IiwicmVuZGVyIiwiRmFtaWx5TWFuYWdlciIsImN1cnJlbnRHdWVzdCIsImZhbWlseU1lbWJlcnMiLCJyc3Zwc0J5R3Vlc3QiLCJleHBlY3QiLCJzY3JlZW4iLCJnZXRCeVRleHQiLCJ0b0JlSW5UaGVEb2N1bWVudCIsInF1ZXJ5QnlUZXh0Iiwibm90IiwiZ2V0QWxsQnlUZXh0IiwidG9IYXZlTGVuZ3RoIiwiZWRpdEJ1dHRvbnMiLCJsZW5ndGgiLCJ0b0JlR3JlYXRlclRoYW4iLCJmaXJlRXZlbnQiLCJjbGljayIsImdldEJ5RGlzcGxheVZhbHVlIiwiZmlyc3ROYW1lSW5wdXQiLCJjaGFuZ2UiLCJ0YXJnZXQiLCJ2YWx1ZSIsImxhc3ROYW1lSW5wdXQiLCJlbWFpbElucHV0IiwicGhvbmVJbnB1dCIsImRpZXRhcnlJbnB1dCIsIm1vY2tSZXNvbHZlZFZhbHVlT25jZSIsImpzb24iLCJzdWNjZXNzIiwiZGF0YSIsInNhdmVCdXR0b24iLCJ3YWl0Rm9yIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJvYmplY3RDb250YWluaW5nIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyb3IiLCJtZXNzYWdlIiwiY2FuY2VsQnV0dG9uIiwicXVlcnlCeURpc3BsYXlWYWx1ZSIsInRvZ2dsZUJ1dHRvbnMiLCJhdHRlbmRpbmdCYWRnZSIsInBlbmRpbmdCYWRnZSIsInRvQmUiLCJjaGlsZFdpdGhBZHVsdFNpYmxpbmciLCJjaGlsZEd1ZXN0Iiwib3RoZXJDaGlsZCIsImRpZmZlcmVudEdyb3VwTWVtYmVyIiwibW9ja1JlamVjdGVkVmFsdWVPbmNlIiwiRXJyb3IiLCJjb2RlIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7OztDQU9DOzs7Ozt1QkFFa0Q7K0JBQ3JCO0FBRzlCLGFBQWE7QUFDYkEsT0FBT0MsS0FBSyxHQUFHQyxLQUFLQyxFQUFFO0FBRXRCQyxTQUFTLDJCQUEyQjtJQUNsQyxNQUFNQyxpQkFBd0I7UUFDNUJDLElBQUk7UUFDSkMsWUFBWTtRQUNaQyxXQUFXO1FBQ1hDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxVQUFVO1FBQ1ZDLFlBQVk7UUFDWkMsVUFBVTtRQUNWQyxzQkFBc0I7UUFDdEJDLFlBQVk7UUFDWkMsWUFBWTtJQUNkO0lBRUEsTUFBTUMsaUJBQXdCO1FBQzVCWCxJQUFJO1FBQ0pDLFlBQVk7UUFDWkMsV0FBVztRQUNYQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsVUFBVTtRQUNWQyxZQUFZO1FBQ1pDLFVBQVU7UUFDVkMsc0JBQXNCO1FBQ3RCQyxZQUFZO1FBQ1pDLFlBQVk7SUFDZDtJQUVBLE1BQU1FLG9CQUE2QjtRQUFDYjtRQUFnQlk7S0FBZTtJQUVuRSxNQUFNRSxtQkFBbUI7UUFDdkIsV0FBVztZQUNUO2dCQUNFYixJQUFJO2dCQUNKYyxVQUFVO2dCQUNWQyxVQUFVO2dCQUNWQyxhQUFhO2dCQUNiQyxRQUFRO2dCQUNSQyxhQUFhO2dCQUNiQyxlQUFlO2dCQUNmQyxRQUFRO29CQUFFcEIsSUFBSTtvQkFBV3FCLE1BQU07Z0JBQW1CO2dCQUNsREMsWUFBWTtZQUNkO1lBQ0E7Z0JBQ0V0QixJQUFJO2dCQUNKYyxVQUFVO2dCQUNWQyxVQUFVO2dCQUNWQyxhQUFh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