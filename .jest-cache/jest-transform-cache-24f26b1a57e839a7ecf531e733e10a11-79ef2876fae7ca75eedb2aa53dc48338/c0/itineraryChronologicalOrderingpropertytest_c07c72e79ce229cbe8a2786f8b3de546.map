{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/__tests__/property/itineraryChronologicalOrdering.property.test.ts"],"sourcesContent":["import * as fc from 'fast-check';\n\n/**\n * Property-Based Test: Itinerary Chronological Ordering\n * \n * Feature: destination-wedding-platform\n * Property 35: Itinerary Chronological Ordering\n * \n * Validates: Requirements 26.2\n * \n * Property: Activities in an itinerary must always be sorted chronologically\n * by date and time, regardless of the order they were added or retrieved.\n */\n\ndescribe('Feature: destination-wedding-platform, Property 35: Itinerary Chronological Ordering', () => {\n  it('should always sort activities chronologically by date and time', () => {\n    fc.assert(\n      fc.property(\n        // Generate array of activities with random dates and times\n        fc.array(\n          fc.record({\n            id: fc.uuid(),\n            name: fc.string({ minLength: 1, maxLength: 100 }),\n            type: fc.constantFrom('event', 'activity'),\n            date: fc.date({ min: new Date('2025-01-01'), max: new Date('2025-12-31') }).map(d => d.toISOString().split('T')[0]),\n            time: fc.date({ min: new Date('2025-01-01T00:00:00'), max: new Date('2025-01-01T23:59:59') }).map(d => d.toISOString()),\n            location: fc.option(fc.string({ minLength: 1, maxLength: 100 }), { nil: undefined }),\n            description: fc.option(fc.string({ minLength: 1, maxLength: 500 }), { nil: undefined }),\n            rsvp_status: fc.option(fc.constantFrom('attending', 'declined', 'maybe', 'pending'), { nil: undefined }),\n          }),\n          { minLength: 1, maxLength: 50 }\n        ),\n        (activities) => {\n          // Sort activities chronologically\n          const sorted = [...activities].sort((a, b) => {\n            const dateA = new Date(`${a.date}T${new Date(a.time).toISOString().split('T')[1]}`);\n            const dateB = new Date(`${b.date}T${new Date(b.time).toISOString().split('T')[1]}`);\n            return dateA.getTime() - dateB.getTime();\n          });\n\n          // Verify chronological order\n          for (let i = 0; i < sorted.length - 1; i++) {\n            const currentDateTime = new Date(`${sorted[i].date}T${new Date(sorted[i].time).toISOString().split('T')[1]}`);\n            const nextDateTime = new Date(`${sorted[i + 1].date}T${new Date(sorted[i + 1].time).toISOString().split('T')[1]}`);\n            \n            // Current activity should be before or equal to next activity\n            expect(currentDateTime.getTime()).toBeLessThanOrEqual(nextDateTime.getTime());\n          }\n\n          // Verify all activities are present\n          expect(sorted.length).toBe(activities.length);\n          \n          // Verify no activities were lost or duplicated\n          const sortedIds = sorted.map(a => a.id).sort();\n          const originalIds = activities.map(a => a.id).sort();\n          expect(sortedIds).toEqual(originalIds);\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should handle activities on the same date sorted by time', () => {\n    fc.assert(\n      fc.property(\n        // Generate activities all on the same date but different times\n        fc.tuple(\n          fc.date({ min: new Date('2025-01-01'), max: new Date('2025-12-31') }).map(d => d.toISOString().split('T')[0]),\n          fc.array(\n            fc.record({\n              id: fc.uuid(),\n              name: fc.string({ minLength: 1, maxLength: 100 }),\n              type: fc.constantFrom('event', 'activity'),\n              time: fc.date({ min: new Date('2025-01-01T00:00:00'), max: new Date('2025-01-01T23:59:59') }).map(d => d.toISOString()),\n            }),\n            { minLength: 2, maxLength: 20 }\n          )\n        ).map(([date, activities]) => activities.map(a => ({ ...a, date }))),\n        (activities) => {\n          // Sort activities by time\n          const sorted = [...activities].sort((a, b) => {\n            const timeA = new Date(a.time);\n            const timeB = new Date(b.time);\n            return timeA.getTime() - timeB.getTime();\n          });\n\n          // Verify time order\n          for (let i = 0; i < sorted.length - 1; i++) {\n            const currentTime = new Date(sorted[i].time);\n            const nextTime = new Date(sorted[i + 1].time);\n            \n            expect(currentTime.getTime()).toBeLessThanOrEqual(nextTime.getTime());\n          }\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should maintain chronological order after filtering', () => {\n    fc.assert(\n      fc.property(\n        fc.array(\n          fc.record({\n            id: fc.uuid(),\n            name: fc.string({ minLength: 1, maxLength: 100 }),\n            type: fc.constantFrom('event', 'activity'),\n            date: fc.date({ min: new Date('2025-01-01'), max: new Date('2025-12-31') }).map(d => d.toISOString().split('T')[0]),\n            time: fc.date({ min: new Date('2025-01-01T00:00:00'), max: new Date('2025-01-01T23:59:59') }).map(d => d.toISOString()),\n            rsvp_status: fc.constantFrom('attending', 'declined', 'maybe', 'pending'),\n          }),\n          { minLength: 5, maxLength: 50 }\n        ),\n        (activities) => {\n          // Filter to only attending activities\n          const filtered = activities.filter(a => a.rsvp_status === 'attending');\n          \n          if (filtered.length === 0) return; // Skip if no attending activities\n          \n          // Sort filtered activities chronologically\n          const sorted = [...filtered].sort((a, b) => {\n            const dateA = new Date(`${a.date}T${new Date(a.time).toISOString().split('T')[1]}`);\n            const dateB = new Date(`${b.date}T${new Date(b.time).toISOString().split('T')[1]}`);\n            return dateA.getTime() - dateB.getTime();\n          });\n\n          // Verify chronological order is maintained after filtering\n          for (let i = 0; i < sorted.length - 1; i++) {\n            const currentDateTime = new Date(`${sorted[i].date}T${new Date(sorted[i].time).toISOString().split('T')[1]}`);\n            const nextDateTime = new Date(`${sorted[i + 1].date}T${new Date(sorted[i + 1].time).toISOString().split('T')[1]}`);\n            \n            expect(currentDateTime.getTime()).toBeLessThanOrEqual(nextDateTime.getTime());\n          }\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should handle edge cases: single activity, identical times, midnight times', () => {\n    fc.assert(\n      fc.property(\n        fc.oneof(\n          // Single activity\n          fc.array(\n            fc.record({\n              id: fc.uuid(),\n              name: fc.string({ minLength: 1, maxLength: 100 }),\n              type: fc.constantFrom('event', 'activity'),\n              date: fc.date({ min: new Date('2025-01-01'), max: new Date('2025-12-31') }).map(d => d.toISOString().split('T')[0]),\n              time: fc.date({ min: new Date('2025-01-01T00:00:00'), max: new Date('2025-01-01T23:59:59') }).map(d => d.toISOString()),\n            }),\n            { minLength: 1, maxLength: 1 }\n          ),\n          // Activities with identical times\n          fc.tuple(\n            fc.date({ min: new Date('2025-01-01'), max: new Date('2025-12-31') }).map(d => d.toISOString().split('T')[0]),\n            fc.date({ min: new Date('2025-01-01T00:00:00'), max: new Date('2025-01-01T23:59:59') }).map(d => d.toISOString()),\n            fc.array(fc.uuid(), { minLength: 2, maxLength: 5 })\n          ).map(([date, time, ids]) => ids.map(id => ({\n            id,\n            name: `Activity ${id}`,\n            type: 'activity' as const,\n            date,\n            time,\n          }))),\n          // Activities at midnight\n          fc.array(\n            fc.record({\n              id: fc.uuid(),\n              name: fc.string({ minLength: 1, maxLength: 100 }),\n              type: fc.constantFrom('event', 'activity'),\n              date: fc.date({ min: new Date('2025-01-01'), max: new Date('2025-12-31') }).map(d => d.toISOString().split('T')[0]),\n            }).map(a => ({ ...a, time: `${a.date}T00:00:00.000Z` })),\n            { minLength: 1, maxLength: 10 }\n          )\n        ),\n        (activities) => {\n          // Sort activities chronologically\n          const sorted = [...activities].sort((a, b) => {\n            const dateA = new Date(`${a.date}T${new Date(a.time).toISOString().split('T')[1]}`);\n            const dateB = new Date(`${b.date}T${new Date(b.time).toISOString().split('T')[1]}`);\n            return dateA.getTime() - dateB.getTime();\n          });\n\n          // Verify no errors occur and all activities are present\n          expect(sorted.length).toBe(activities.length);\n          \n          // Verify chronological order (or equal times)\n          for (let i = 0; i < sorted.length - 1; i++) {\n            const currentDateTime = new Date(`${sorted[i].date}T${new Date(sorted[i].time).toISOString().split('T')[1]}`);\n            const nextDateTime = new Date(`${sorted[i + 1].date}T${new Date(sorted[i + 1].time).toISOString().split('T')[1]}`);\n            \n            expect(currentDateTime.getTime()).toBeLessThanOrEqual(nextDateTime.getTime());\n          }\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n});\n"],"names":["describe","it","fc","assert","property","array","record","id","uuid","name","string","minLength","maxLength","type","constantFrom","date","min","Date","max","map","d","toISOString","split","time","location","option","nil","undefined","description","rsvp_status","activities","sorted","sort","a","b","dateA","dateB","getTime","i","length","currentDateTime","nextDateTime","expect","toBeLessThanOrEqual","toBe","sortedIds","originalIds","toEqual","numRuns","tuple","timeA","timeB","currentTime","nextTime","filtered","filter","oneof","ids"],"mappings":";;;;mEAAoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEpB;;;;;;;;;;CAUC,GAEDA,SAAS,wFAAwF;IAC/FC,GAAG,kEAAkE;QACnEC,WAAGC,MAAM,CACPD,WAAGE,QAAQ,CACT,2DAA2D;QAC3DF,WAAGG,KAAK,CACNH,WAAGI,MAAM,CAAC;YACRC,IAAIL,WAAGM,IAAI;YACXC,MAAMP,WAAGQ,MAAM,CAAC;gBAAEC,WAAW;gBAAGC,WAAW;YAAI;YAC/CC,MAAMX,WAAGY,YAAY,CAAC,SAAS;YAC/BC,MAAMb,WAAGa,IAAI,CAAC;gBAAEC,KAAK,IAAIC,KAAK;gBAAeC,KAAK,IAAID,KAAK;YAAc,GAAGE,GAAG,CAACC,CAAAA,IAAKA,EAAEC,WAAW,GAAGC,KAAK,CAAC,IAAI,CAAC,EAAE;YAClHC,MAAMrB,WAAGa,IAAI,CAAC;gBAAEC,KAAK,IAAIC,KAAK;gBAAwBC,KAAK,IAAID,KAAK;YAAuB,GAAGE,GAAG,CAACC,CAAAA,IAAKA,EAAEC,WAAW;YACpHG,UAAUtB,WAAGuB,MAAM,CAACvB,WAAGQ,MAAM,CAAC;gBAAEC,WAAW;gBAAGC,WAAW;YAAI,IAAI;gBAAEc,KAAKC;YAAU;YAClFC,aAAa1B,WAAGuB,MAAM,CAACvB,WAAGQ,MAAM,CAAC;gBAAEC,WAAW;gBAAGC,WAAW;YAAI,IAAI;gBAAEc,KAAKC;YAAU;YACrFE,aAAa3B,WAAGuB,MAAM,CAACvB,WAAGY,YAAY,CAAC,aAAa,YAAY,SAAS,YAAY;gBAAEY,KAAKC;YAAU;QACxG,IACA;YAAEhB,WAAW;YAAGC,WAAW;QAAG,IAEhC,CAACkB;YACC,kCAAkC;YAClC,MAAMC,SAAS;mBAAID;aAAW,CAACE,IAAI,CAAC,CAACC,GAAGC;gBACtC,MAAMC,QAAQ,IAAIlB,KAAK,GAAGgB,EAAElB,IAAI,CAAC,CAAC,EAAE,IAAIE,KAAKgB,EAAEV,IAAI,EAAEF,WAAW,GAAGC,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE;gBAClF,MAAMc,QAAQ,IAAInB,KAAK,GAAGiB,EAAEnB,IAAI,CAAC,CAAC,EAAE,IAAIE,KAAKiB,EAAEX,IAAI,EAAEF,WAAW,GAAGC,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE;gBAClF,OAAOa,MAAME,OAAO,KAAKD,MAAMC,OAAO;YACxC;YAEA,6BAA6B;YAC7B,IAAK,IAAIC,IAAI,GAAGA,IAAIP,OAAOQ,MAAM,GAAG,GAAGD,IAAK;gBAC1C,MAAME,kBAAkB,IAAIvB,KAAK,GAAGc,MAAM,CAACO,EAAE,CAACvB,IAAI,CAAC,CAAC,EAAE,IAAIE,KAAKc,MAAM,CAACO,EAAE,CAACf,IAAI,EAAEF,WAAW,GAAGC,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE;gBAC5G,MAAMmB,eAAe,IAAIxB,KAAK,GAAGc,MAAM,CAACO,IAAI,EAAE,CAACvB,IAAI,CAAC,CAAC,EAAE,IAAIE,KAAKc,MAAM,CAACO,IAAI,EAAE,CAACf,IAAI,EAAEF,WAAW,GAAGC,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE;gBAEjH,8DAA8D;gBAC9DoB,OAAOF,gBAAgBH,OAAO,IAAIM,mBAAmB,CAACF,aAAaJ,OAAO;YAC5E;YAEA,oCAAoC;YACpCK,OAAOX,OAAOQ,MAAM,EAAEK,IAAI,CAACd,WAAWS,MAAM;YAE5C,+CAA+C;YAC/C,MAAMM,YAAYd,OAAOZ,GAAG,CAACc,CAAAA,IAAKA,EAAE1B,EAAE,EAAEyB,IAAI;YAC5C,MAAMc,cAAchB,WAAWX,GAAG,CAACc,CAAAA,IAAKA,EAAE1B,EAAE,EAAEyB,IAAI;YAClDU,OAAOG,WAAWE,OAAO,CAACD;QAC5B,IAEF;YAAEE,SAAS;QAAI;IAEnB;IAEA/C,GAAG,4DAA4D;QAC7DC,WAAGC,MAAM,CACPD,WAAGE,QAAQ,CACT,+DAA+D;QAC/DF,WAAG+C,KAAK,CACN/C,WAAGa,IAAI,CAAC;YAAEC,KAAK,IAAIC,KAAK;YAAeC,KAAK,IAAID,KAAK;QAAc,GAAGE,GAAG,CAACC,CAAAA,IAAKA,EAAEC,WAAW,GAAGC,KAAK,CAAC,IAAI,CAAC,EAAE,GAC5GpB,WAAGG,KAAK,CACNH,WAAGI,MAAM,CAAC;YACRC,IAAIL,WAAGM,IAAI;YACXC,MAAMP,WAAGQ,MAAM,CAAC;gBAAEC,WAAW;gBAAGC,WAAW;YAAI;YAC/CC,MAAMX,WAAGY,YAAY,CAAC,SAAS;YAC/BS,MAAMrB,WAAGa,IAAI,CAAC;gBAAEC,KAAK,IAAIC,KAAK;gBAAwBC,KAAK,IAAID,KAAK;YAAuB,GAAGE,GAAG,CAACC,CAAAA,IAAKA,EAAEC,WAAW;QACtH,IACA;YAAEV,WAAW;YAAGC,WAAW;QAAG,IAEhCO,GAAG,CAAC,CAAC,CAACJ,MAAMe,WAAW,GAAKA,WAAWX,GAAG,CAACc,CAAAA,IAAM,CAAA;oBAAE,GAAGA,CAAC;oBAAElB;gBAAK,CAAA,KAChE,CAACe;YACC,0BAA0B;YAC1B,MAAMC,SAAS;mBAAID;aAAW,CAACE,IAAI,CAAC,CAACC,GAAGC;gBACtC,MAAMgB,QAAQ,IAAIjC,KAAKgB,EAAEV,IAAI;gBAC7B,MAAM4B,QAAQ,IAAIlC,KAAKiB,EAAEX,IAAI;gBAC7B,OAAO2B,MAAMb,OAAO,KAAKc,MAAMd,OAAO;YACxC;YAEA,oBAAoB;YACpB,IAAK,IAAIC,IAAI,GAAGA,IAAIP,OAAOQ,MAAM,GAAG,GAAGD,IAAK;gBAC1C,MAAMc,cAAc,IAAInC,KAAKc,MAAM,CAACO,EAAE,CAACf,IAAI;gBAC3C,MAAM8B,WAAW,IAAIpC,KAAKc,MAAM,CAACO,IAAI,EAAE,CAACf,IAAI;gBAE5CmB,OAAOU,YAAYf,OAAO,IAAIM,mBAAmB,CAACU,SAAShB,OAAO;YACpE;QACF,IAEF;YAAEW,SAAS;QAAI;IAEnB;IAEA/C,GAAG,uDAAuD;QACxDC,WAAGC,MAAM,CACPD,WAAGE,QAAQ,CACTF,WAAGG,KAAK,CACNH,WAAGI,MAAM,CAAC;YACRC,IAAIL,WAAGM,IAAI;YACXC,MAAMP,WAAGQ,MAAM,CAAC;gBAAEC,WAAW;gBAAGC,WAAW;YAAI;YAC/CC,MAAMX,WAAGY,YAAY,CAAC,SAAS;YAC/BC,MAAMb,WAAGa,IAAI,CAAC;gBAAEC,KAAK,IAAIC,KAAK;gBAAeC,KAAK,IAAID,KAAK;YAAc,GAAGE,GAAG,CAACC,CAAAA,IAAKA,EAAEC,WAAW,GAAGC,KAAK,CAAC,IAAI,CAAC,EAAE;YAClHC,MAAMrB,WAAGa,IAAI,CAAC;gBAAEC,KAAK,IAAIC,KAAK;gBAAwBC,KAAK,IAAID,KAAK;YAAuB,GAAGE,GAAG,CAACC,CAAAA,IAAKA,EAAEC,WAAW;YACpHQ,aAAa3B,WAAGY,YAAY,CAAC,aAAa,YAAY,SAAS;QACjE,IACA;YAAEH,WAAW;YAAGC,WAAW;QAAG,IAEhC,CAACkB;YACC,sCAAsC;YACtC,MAAMwB,WAAWxB,WAAWyB,MAAM,CAACtB,CAAAA,IAAKA,EAAEJ,WAAW,KAAK;YAE1D,IAAIyB,SAASf,MAAM,KAAK,GAAG,QAAQ,kCAAkC;YAErE,2CAA2C;YAC3C,MAAMR,SAAS;mBAAIuB;aAAS,CAACtB,IAAI,CAAC,CAACC,GAAGC;gBACpC,MAAMC,QAAQ,IAAIlB,KAAK,GAAGgB,EAAElB,IAAI,CAAC,CAAC,EAAE,IAAIE,KAAKgB,EAAEV,IAAI,EAAEF,WAAW,GAAGC,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE;gBAClF,MAAMc,QAAQ,IAAInB,KAAK,GAAGiB,EAAEnB,IAAI,CAAC,CAAC,EAAE,IAAIE,KAAKiB,EAAEX,IAAI,EAAEF,WAAW,GAAGC,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE;gBAClF,OAAOa,MAAME,OAAO,KAAKD,MAAMC,OAAO;YACxC;YAEA,2DAA2D;YAC3D,IAAK,IAAIC,IAAI,GAAGA,IAAIP,OAAOQ,MAAM,GAAG,GAAGD,IAAK;gBAC1C,MAAME,kBAAkB,IAAIvB,KAAK,GAAGc,MAAM,CAACO,EAAE,CAACvB,IAAI,CAAC,CAAC,EAAE,IAAIE,KAAKc,MAAM,CAACO,EAAE,CAACf,IAAI,EAAEF,WAAW,GAAGC,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE;gBAC5G,MAAMmB,eAAe,IAAIxB,KAAK,GAAGc,MAAM,CAACO,IAAI,EAAE,CAACvB,IAAI,CAAC,CAAC,EAAE,IAAIE,KAAKc,MAAM,CAACO,IAAI,EAAE,CAACf,IAAI,EAAEF,WAAW,GAAGC,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE;gBAEjHoB,OAAOF,gBAAgBH,OAAO,IAAIM,mBAAmB,CAACF,aAAaJ,OAAO;YAC5E;QACF,IAEF;YAAEW,SAAS;QAAI;IAEnB;IAEA/C,GAAG,8EAA8E;QAC/EC,WAAGC,MAAM,CACPD,WAAGE,QAAQ,CACTF,WAAGsD,KAAK,CACN,kBAAkB;QAClBtD,WAAGG,KAAK,CACNH,WAAGI,MAAM,CAAC;YACRC,IAAIL,WAAGM,IAAI;YACXC,MAAMP,WAAGQ,MAAM,CAAC;gBAAEC,WAAW;gBAAGC,WAAW;YAAI;YAC/CC,MAAMX,WAAGY,YAAY,CAAC,SAAS;YAC/BC,MAAMb,WAAGa,IAAI,CAAC;gBAAEC,KAAK,IAAIC,KAAK;gBAAeC,KAAK,IAAID,KAAK;YAAc,GAAGE,GAAG,CAACC,CAAAA,IAAKA,EAAEC,WAAW,GAAGC,KAAK,CAAC,IAAI,CAAC,EAAE;YAClHC,MAAMrB,WAAGa,IAAI,CAAC;gBAAEC,KAAK,IAAIC,KAAK;gBAAwBC,KAAK,IAAID,KAAK;YAAuB,GAAGE,GAAG,CAACC,CAAAA,IAAKA,EAAEC,WAAW;QACtH,IACA;YAAEV,WAAW;YAAGC,WAAW;QAAE,IAE/B,kCAAkC;QAClCV,WAAG+C,KAAK,CACN/C,WAAGa,IAAI,CAAC;YAAEC,KAAK,IAAIC,KAAK;YAAeC,KAAK,IAAID,KAAK;QAAc,GAAGE,GAAG,CAACC,CAAAA,IAAKA,EAAEC,WAAW,GAAGC,KAAK,CAAC,IAAI,CAAC,EAAE,GAC5GpB,WAAGa,IAAI,CAAC;YAAEC,KAAK,IAAIC,KAAK;YAAwBC,KAAK,IAAID,KAAK;QAAuB,GAAGE,GAAG,CAACC,CAAAA,IAAKA,EAAEC,WAAW,KAC9GnB,WAAGG,KAAK,CAACH,WAAGM,IAAI,IAAI;YAAEG,WAAW;YAAGC,WAAW;QAAE,IACjDO,GAAG,CAAC,CAAC,CAACJ,MAAMQ,MAAMkC,IAAI,GAAKA,IAAItC,GAAG,CAACZ,CAAAA,KAAO,CAAA;oBAC1CA;oBACAE,MAAM,CAAC,SAAS,EAAEF,IAAI;oBACtBM,MAAM;oBACNE;oBACAQ;gBACF,CAAA,KACA,yBAAyB;QACzBrB,WAAGG,KAAK,CACNH,WAAGI,MAAM,CAAC;YACRC,IAAIL,WAAGM,IAAI;YACXC,MAAMP,WAAGQ,MAAM,CAAC;gBAAEC,WAAW;gBAAGC,WAAW;YAAI;YAC/CC,MAAMX,WAAGY,YAAY,CAAC,SAAS;YAC/BC,MAAMb,WAAGa,IAAI,CAAC;gBAAEC,KAAK,IAAIC,KAAK;gBAAeC,KAAK,IAAID,KAAK;YAAc,GAAGE,GAAG,CAACC,CAAAA,IAAKA,EAAEC,WAAW,GAAGC,KAAK,CAAC,IAAI,CAAC,EAAE;QACpH,GAAGH,GAAG,CAACc,CAAAA,IAAM,CAAA;gBAAE,GAAGA,CAAC;gBAAEV,MAAM,GAAGU,EAAElB,IAAI,CAAC,cAAc,CAAC;YAAC,CAAA,IACrD;YAAEJ,WAAW;YAAGC,WAAW;QAAG,KAGlC,CAACkB;YACC,kCAAkC;YAClC,MAAMC,SAAS;mBAAID;aAAW,CAACE,IAAI,CAAC,CAACC,GAAGC;gBACtC,MAAMC,QAAQ,IAAIlB,KAAK,GAAGgB,EAAElB,IAAI,CAAC,CAAC,EAAE,IAAIE,KAAKgB,EAAEV,IAAI,EAAEF,WAAW,GAAGC,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE;gBAClF,MAAMc,QAAQ,IAAInB,KAAK,GAAGiB,EAAEnB,IAAI,CAAC,CAAC,EAAE,IAAIE,KAAKiB,EAAEX,IAAI,EAAEF,WAAW,GAAGC,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE;gBAClF,OAAOa,MAAME,OAAO,KAAKD,MAAMC,OAAO;YACxC;YAEA,wDAAwD;YACxDK,OAAOX,OAAOQ,MAAM,EAAEK,IAAI,CAACd,WAAWS,MAAM;YAE5C,8CAA8C;YAC9C,IAAK,IAAID,IAAI,GAAGA,IAAIP,OAAOQ,MAAM,GAAG,GAAGD,IAAK;gBAC1C,MAAME,kBAAkB,IAAIvB,KAAK,GAAGc,MAAM,CAACO,EAAE,CAACvB,IAAI,CAAC,CAAC,EAAE,IAAIE,KAAKc,MAAM,CAACO,EAAE,CAACf,IAAI,EAAEF,WAAW,GAAGC,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE;gBAC5G,MAAMmB,eAAe,IAAIxB,KAAK,GAAGc,MAAM,CAACO,IAAI,EAAE,CAACvB,IAAI,CAAC,CAAC,EAAE,IAAIE,KAAKc,MAAM,CAACO,IAAI,EAAE,CAACf,IAAI,EAAEF,WAAW,GAAGC,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE;gBAEjHoB,OAAOF,gBAAgBH,OAAO,IAAIM,mBAAmB,CAACF,aAAaJ,OAAO;YAC5E;QACF,IAEF;YAAEW,SAAS;QAAI;IAEnB;AACF"}