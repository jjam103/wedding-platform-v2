{"version":3,"names":["cov_2cgn4p5c1k","actualCoverage","s","LoginPage","LoginForm","f","router","_navigation","useRouter","searchParams","useSearchParams","returnTo","b","get","email","setEmail","_react","useState","password","setPassword","loading","setLoading","error","setError","supabase","_ssr","createBrowserClient","process","env","NEXT_PUBLIC_SUPABASE_URL","NEXT_PUBLIC_SUPABASE_ANON_KEY","handleLogin","e","preventDefault","console","log","length","substring","data","auth","signInWithPassword","hasData","hasSession","session","hasUser","user","message","status","name","id","window","location","href","err","Error","String","_jsxruntime","jsx","className","jsxs","onSubmit","htmlFor","type","value","onChange","target","required","placeholder","disabled","Suspense","fallback"],"sources":["/Users/jaron/Desktop/wedding-platform-v2/app/auth/login/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, Suspense } from 'react';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { createBrowserClient } from '@supabase/ssr';\n\nfunction LoginForm() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const returnTo = searchParams.get('returnTo') || '/admin';\n  \n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  \n  // Create Supabase client using @supabase/ssr\n  const supabase = createBrowserClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n  );\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    try {\n      console.log('=== LOGIN ATTEMPT ===');\n      console.log('Email:', email);\n      console.log('Password length:', password.length);\n      console.log('Supabase URL:', process.env.NEXT_PUBLIC_SUPABASE_URL);\n      console.log('Anon key (first 20 chars):', process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY?.substring(0, 20));\n      \n      const { data, error } = await supabase.auth.signInWithPassword({\n        email,\n        password,\n      });\n\n      console.log('Login response:', { \n        hasData: !!data, \n        hasSession: !!data?.session,\n        hasUser: !!data?.user,\n        error: error ? {\n          message: error.message,\n          status: error.status,\n          name: error.name\n        } : null\n      });\n\n      if (error) {\n        console.error('‚ùå Login error:', error);\n        setError(`${error.message} (Status: ${error.status})`);\n        return;\n      }\n\n      if (data.session) {\n        console.log('‚úÖ Session created successfully');\n        console.log('User ID:', data.user.id);\n        console.log('Redirecting to:', returnTo);\n        \n        // Use window.location for hard redirect to ensure middleware runs\n        window.location.href = returnTo;\n      } else {\n        console.error('‚ùå No session in response');\n        setError('Login failed - no session created');\n      }\n    } catch (err) {\n      console.error('‚ùå Unexpected error:', err);\n      setError('An unexpected error occurred: ' + (err instanceof Error ? err.message : String(err)));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <main className=\"flex min-h-screen flex-col items-center justify-center p-4 bg-gradient-to-b from-jungle-50 to-cloud-100\">\n      <div className=\"w-full max-w-md\">\n        <div className=\"card-mobile\">\n          <div className=\"text-center mb-8\">\n            <h1 className=\"text-3xl font-bold text-jungle-600 mb-2\">\n              üå¥ Welcome Back\n            </h1>\n            <p className=\"text-sage-600\">\n              Sign in to your wedding dashboard\n            </p>\n          </div>\n\n          <form onSubmit={handleLogin} className=\"space-y-6\">\n            {error && (\n              <div className=\"p-4 bg-volcano-50 border border-volcano-200 rounded-lg text-volcano-700 text-sm\">\n                {error}\n              </div>\n            )}\n\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-sage-700 mb-2\">\n                Email Address\n              </label>\n              <input\n                id=\"email\"\n                type=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n                className=\"form-input-mobile w-full\"\n                placeholder=\"your-email@example.com\"\n                disabled={loading}\n              />\n            </div>\n\n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-sage-700 mb-2\">\n                Password\n              </label>\n              <input\n                id=\"password\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                required\n                className=\"form-input-mobile w-full\"\n                placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                disabled={loading}\n              />\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"btn-primary-mobile w-full\"\n            >\n              {loading ? 'Signing in...' : 'Sign In'}\n            </button>\n          </form>\n\n          <div className=\"mt-6 text-center\">\n            <p className=\"text-sm text-sage-600\">\n              Don't have an account?{' '}\n              <a href=\"/auth/signup\" className=\"text-jungle-600 hover:text-jungle-700 font-medium\">\n                Sign up\n              </a>\n            </p>\n          </div>\n\n          <div className=\"mt-4 text-center\">\n            <a href=\"/\" className=\"text-sm text-sage-500 hover:text-sage-700\">\n              ‚Üê Back to home\n            </a>\n          </div>\n        </div>\n      </div>\n    </main>\n  );\n}\n\n\nexport default function LoginPage() {\n  return (\n    <Suspense fallback={<div className=\"min-h-screen flex items-center justify-center\">Loading...</div>}>\n      <LoginForm />\n    </Suspense>\n  );\n}\n"],"mappings":"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","ignoreList":[]}