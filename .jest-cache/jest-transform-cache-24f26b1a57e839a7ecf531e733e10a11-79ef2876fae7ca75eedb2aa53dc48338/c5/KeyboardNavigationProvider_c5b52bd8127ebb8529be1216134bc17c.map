{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/KeyboardNavigationProvider.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useState, useCallback, useEffect } from 'react';\nimport { useKeyboardShortcuts, type KeyboardShortcut } from '@/hooks/useKeyboardShortcuts';\nimport { KeyboardShortcutsDialog } from '@/components/ui/KeyboardShortcutsDialog';\n\ninterface KeyboardNavigationContextValue {\n  registerShortcuts: (shortcuts: KeyboardShortcut[]) => void;\n  unregisterShortcuts: (shortcuts: KeyboardShortcut[]) => void;\n  showHelp: () => void;\n  hideHelp: () => void;\n}\n\nconst KeyboardNavigationContext = createContext<KeyboardNavigationContextValue | null>(null);\n\ninterface KeyboardNavigationProviderProps {\n  children: React.ReactNode;\n}\n\n/**\n * KeyboardNavigationProvider Component\n * \n * Provides global keyboard navigation support for admin interface.\n * Manages keyboard shortcuts and displays help dialog.\n * \n * Features:\n * - Global keyboard shortcuts (Ctrl+S, Esc, ?)\n * - Keyboard shortcuts help dialog\n * - Focus management\n * - Skip to main content link\n */\nexport function KeyboardNavigationProvider({ children }: KeyboardNavigationProviderProps) {\n  const [shortcuts, setShortcuts] = useState<KeyboardShortcut[]>([]);\n  const [showHelpDialog, setShowHelpDialog] = useState(false);\n\n  // Register shortcuts from child components\n  const registerShortcuts = useCallback((newShortcuts: KeyboardShortcut[]) => {\n    setShortcuts((prev) => [...prev, ...newShortcuts]);\n  }, []);\n\n  // Unregister shortcuts when component unmounts\n  const unregisterShortcuts = useCallback((oldShortcuts: KeyboardShortcut[]) => {\n    setShortcuts((prev) =>\n      prev.filter((s) => !oldShortcuts.some((os) => os.key === s.key && os.description === s.description))\n    );\n  }, []);\n\n  const showHelp = useCallback(() => setShowHelpDialog(true), []);\n  const hideHelp = useCallback(() => setShowHelpDialog(false), []);\n\n  // Global shortcuts\n  const globalShortcuts: KeyboardShortcut[] = [\n    {\n      key: '?',\n      description: 'Show keyboard shortcuts',\n      category: 'general',\n      handler: showHelp,\n    },\n    {\n      key: 'Escape',\n      description: 'Close dialogs/modals',\n      category: 'general',\n      handler: () => {\n        // This will be handled by individual components\n      },\n    },\n  ];\n\n  // Combine global and registered shortcuts\n  const allShortcuts = [...globalShortcuts, ...shortcuts];\n\n  // Setup global keyboard shortcuts\n  useKeyboardShortcuts(allShortcuts);\n\n  const contextValue: KeyboardNavigationContextValue = {\n    registerShortcuts,\n    unregisterShortcuts,\n    showHelp,\n    hideHelp,\n  };\n\n  return (\n    <KeyboardNavigationContext.Provider value={contextValue}>\n      {/* Skip to main content link for screen readers */}\n      <a href=\"#main-content\" className=\"skip-to-main\">\n        Skip to main content\n      </a>\n\n      {children}\n\n      {/* Keyboard shortcuts help dialog */}\n      <KeyboardShortcutsDialog\n        isOpen={showHelpDialog}\n        onClose={hideHelp}\n        shortcuts={allShortcuts}\n      />\n    </KeyboardNavigationContext.Provider>\n  );\n}\n\n/**\n * Hook to access keyboard navigation context\n */\nexport function useKeyboardNavigation(): KeyboardNavigationContextValue {\n  const context = useContext(KeyboardNavigationContext);\n  if (!context) {\n    throw new Error('useKeyboardNavigation must be used within KeyboardNavigationProvider');\n  }\n  return context;\n}\n\n/**\n * Hook to register keyboard shortcuts for a component\n * Automatically unregisters on unmount\n */\nexport function useRegisterShortcuts(shortcuts: KeyboardShortcut[]): void {\n  const { registerShortcuts, unregisterShortcuts } = useKeyboardNavigation();\n\n  useEffect(() => {\n    if (shortcuts.length > 0) {\n      registerShortcuts(shortcuts);\n    }\n    return () => {\n      if (shortcuts.length > 0) {\n        unregisterShortcuts(shortcuts);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // Only run on mount/unmount\n}\n"],"names":["KeyboardNavigationProvider","useKeyboardNavigation","useRegisterShortcuts","KeyboardNavigationContext","createContext","children","shortcuts","setShortcuts","useState","showHelpDialog","setShowHelpDialog","registerShortcuts","useCallback","newShortcuts","prev","unregisterShortcuts","oldShortcuts","filter","s","some","os","key","description","showHelp","hideHelp","globalShortcuts","category","handler","allShortcuts","useKeyboardShortcuts","contextValue","Provider","value","a","href","className","KeyboardShortcutsDialog","isOpen","onClose","context","useContext","Error","useEffect","length"],"mappings":"AAAA;;;;;;;;;;;;QA+BgBA;eAAAA;;QAwEAC;eAAAA;;QAYAC;eAAAA;;;;uBAjH4D;sCAChB;yCACpB;AASxC,MAAMC,0CAA4BC,IAAAA,oBAAa,EAAwC;AAkBhF,SAASJ,2BAA2B,EAAEK,QAAQ,EAAmC;IACtF,MAAM,CAACC,WAAWC,aAAa,GAAGC,IAAAA,eAAQ,EAAqB,EAAE;IACjE,MAAM,CAACC,gBAAgBC,kBAAkB,GAAGF,IAAAA,eAAQ,EAAC;IAErD,2CAA2C;IAC3C,MAAMG,oBAAoBC,IAAAA,kBAAW,EAAC,CAACC;QACrCN,aAAa,CAACO,OAAS;mBAAIA;mBAASD;aAAa;IACnD,GAAG,EAAE;IAEL,+CAA+C;IAC/C,MAAME,sBAAsBH,IAAAA,kBAAW,EAAC,CAACI;QACvCT,aAAa,CAACO,OACZA,KAAKG,MAAM,CAAC,CAACC,IAAM,CAACF,aAAaG,IAAI,CAAC,CAACC,KAAOA,GAAGC,GAAG,KAAKH,EAAEG,GAAG,IAAID,GAAGE,WAAW,KAAKJ,EAAEI,WAAW;IAEtG,GAAG,EAAE;IAEL,MAAMC,WAAWX,IAAAA,kBAAW,EAAC,IAAMF,kBAAkB,OAAO,EAAE;IAC9D,MAAMc,WAAWZ,IAAAA,kBAAW,EAAC,IAAMF,kBAAkB,QAAQ,EAAE;IAE/D,mBAAmB;IACnB,MAAMe,kBAAsC;QAC1C;YACEJ,KAAK;YACLC,aAAa;YACbI,UAAU;YACVC,SAASJ;QACX;QACA;YACEF,KAAK;YACLC,aAAa;YACbI,UAAU;YACVC,SAAS;YACP,gDAAgD;YAClD;QACF;KACD;IAED,0CAA0C;IAC1C,MAAMC,eAAe;WAAIH;WAAoBnB;KAAU;IAEvD,kCAAkC;IAClCuB,IAAAA,0CAAoB,EAACD;IAErB,MAAME,eAA+C;QACnDnB;QACAI;QACAQ;QACAC;IACF;IAEA,qBACE,sBAACrB,0BAA0B4B,QAAQ;QAACC,OAAOF;;0BAEzC,qBAACG;gBAAEC,MAAK;gBAAgBC,WAAU;0BAAe;;YAIhD9B;0BAGD,qBAAC+B,gDAAuB;gBACtBC,QAAQ5B;gBACR6B,SAASd;gBACTlB,WAAWsB;;;;AAInB;AAKO,SAAS3B;IACd,MAAMsC,UAAUC,IAAAA,iBAAU,EAACrC;IAC3B,IAAI,CAACoC,SAAS;QACZ,MAAM,IAAIE,MAAM;IAClB;IACA,OAAOF;AACT;AAMO,SAASrC,qBAAqBI,SAA6B;IAChE,MAAM,EAAEK,iBAAiB,EAAEI,mBAAmB,EAAE,GAAGd;IAEnDyC,IAAAA,gBAAS,EAAC;QACR,IAAIpC,UAAUqC,MAAM,GAAG,GAAG;YACxBhC,kBAAkBL;QACpB;QACA,OAAO;YACL,IAAIA,UAAUqC,MAAM,GAAG,GAAG;gBACxB5B,oBAAoBT;YACtB;QACF;IACA,uDAAuD;IACzD,GAAG,EAAE,GAAG,4BAA4B;AACtC"}