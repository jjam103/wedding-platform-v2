2b69511405624186d1c629c44bb9dc39
"use strict";
// Mock Supabase
jest.mock('@/lib/supabase', ()=>({
        supabase: {
            from: jest.fn(()=>({
                    insert: jest.fn(()=>({
                            select: jest.fn(()=>({
                                    single: jest.fn()
                                }))
                        }))
                }))
        }
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _guestService = require("./guestService");
describe('guestService CSV Import/Export', ()=>{
    describe('exportToCSV', ()=>{
        it('should export guests to valid CSV format', async ()=>{
            const guests = [
                {
                    id: '123e4567-e89b-12d3-a456-426614174000',
                    groupId: '123e4567-e89b-12d3-a456-426614174001',
                    firstName: 'John',
                    lastName: 'Doe',
                    email: 'john@example.com',
                    phone: '+1234567890',
                    ageType: 'adult',
                    guestType: 'wedding_guest',
                    dietaryRestrictions: 'Vegetarian',
                    plusOneName: 'Jane Doe',
                    plusOneAttending: true,
                    arrivalDate: '2025-06-01',
                    departureDate: '2025-06-05',
                    airportCode: 'SJO',
                    flightNumber: 'AA123',
                    invitationSent: true,
                    invitationSentDate: '2025-01-15',
                    rsvpDeadline: '2025-05-01',
                    notes: 'VIP guest',
                    authMethod: 'email_matching',
                    createdAt: '2025-01-01T00:00:00Z',
                    updatedAt: '2025-01-01T00:00:00Z'
                }
            ];
            const result = await (0, _guestService.exportToCSV)(guests);
            expect(result.success).toBe(true);
            if (result.success) {
                const lines = result.data.split('\n');
                expect(lines.length).toBe(2); // Header + 1 data row
                // Check header
                expect(lines[0]).toBe('groupId,firstName,lastName,email,phone,ageType,guestType,dietaryRestrictions,plusOneName,plusOneAttending,arrivalDate,departureDate,airportCode,flightNumber,invitationSent,invitationSentDate,rsvpDeadline,notes');
                // Check data row
                expect(lines[1]).toContain('John');
                expect(lines[1]).toContain('Doe');
                expect(lines[1]).toContain('john@example.com');
            }
        });
        it('should handle guests with null values', async ()=>{
            const guests = [
                {
                    id: '123e4567-e89b-12d3-a456-426614174000',
                    groupId: '123e4567-e89b-12d3-a456-426614174001',
                    firstName: 'Jane',
                    lastName: 'Smith',
                    email: null,
                    phone: null,
                    ageType: 'adult',
                    guestType: 'wedding_guest',
                    dietaryRestrictions: null,
                    plusOneName: null,
                    plusOneAttending: false,
                    arrivalDate: null,
                    departureDate: null,
                    airportCode: null,
                    flightNumber: null,
                    invitationSent: false,
                    invitationSentDate: null,
                    rsvpDeadline: null,
                    notes: null,
                    authMethod: 'email_matching',
                    createdAt: '2025-01-01T00:00:00Z',
                    updatedAt: '2025-01-01T00:00:00Z'
                }
            ];
            const result = await (0, _guestService.exportToCSV)(guests);
            expect(result.success).toBe(true);
            if (result.success) {
                const lines = result.data.split('\n');
                expect(lines.length).toBe(2);
                // Null values should be empty strings in CSV
                const fields = lines[1].split(',');
                expect(fields[3]).toBe(''); // email
                expect(fields[4]).toBe(''); // phone
            }
        });
        it('should escape fields containing commas', async ()=>{
            const guests = [
                {
                    id: '123e4567-e89b-12d3-a456-426614174000',
                    groupId: '123e4567-e89b-12d3-a456-426614174001',
                    firstName: 'John',
                    lastName: 'Doe',
                    email: 'john@example.com',
                    phone: null,
                    ageType: 'adult',
                    guestType: 'wedding_guest',
                    dietaryRestrictions: 'No dairy, no nuts',
                    plusOneName: null,
                    plusOneAttending: false,
                    arrivalDate: null,
                    departureDate: null,
                    airportCode: null,
                    flightNumber: null,
                    invitationSent: false,
                    invitationSentDate: null,
                    rsvpDeadline: null,
                    notes: 'Needs wheelchair access, arriving early',
                    authMethod: 'email_matching',
                    createdAt: '2025-01-01T00:00:00Z',
                    updatedAt: '2025-01-01T00:00:00Z'
                }
            ];
            const result = await (0, _guestService.exportToCSV)(guests);
            expect(result.success).toBe(true);
            if (result.success) {
                // Fields with commas should be wrapped in quotes
                expect(result.data).toContain('"No dairy, no nuts"');
                expect(result.data).toContain('"Needs wheelchair access, arriving early"');
            }
        });
        it('should escape fields containing quotes', async ()=>{
            const guests = [
                {
                    id: '123e4567-e89b-12d3-a456-426614174000',
                    groupId: '123e4567-e89b-12d3-a456-426614174001',
                    firstName: 'John',
                    lastName: 'O\'Brien',
                    email: 'john@example.com',
                    phone: null,
                    ageType: 'adult',
                    guestType: 'wedding_guest',
                    dietaryRestrictions: null,
                    plusOneName: null,
                    plusOneAttending: false,
                    arrivalDate: null,
                    departureDate: null,
                    airportCode: null,
                    flightNumber: null,
                    invitationSent: false,
                    invitationSentDate: null,
                    rsvpDeadline: null,
                    notes: 'Prefers "vegetarian" meals',
                    authMethod: 'email_matching',
                    createdAt: '2025-01-01T00:00:00Z',
                    updatedAt: '2025-01-01T00:00:00Z'
                }
            ];
            const result = await (0, _guestService.exportToCSV)(guests);
            expect(result.success).toBe(true);
            if (result.success) {
                // Fields with quotes should be wrapped and quotes doubled
                expect(result.data).toContain('""vegetarian""');
            }
        });
        it('should handle empty array', async ()=>{
            const result = await (0, _guestService.exportToCSV)([]);
            expect(result.success).toBe(true);
            if (result.success) {
                const lines = result.data.split('\n');
                expect(lines.length).toBe(1); // Only header
            }
        });
        it('should return validation error for non-array input', async ()=>{
            const result = await (0, _guestService.exportToCSV)(null);
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
    });
    describe('importFromCSV', ()=>{
        beforeEach(()=>{
            // Reset mock
            const { supabase } = require('@/lib/supabase');
            supabase.from.mockClear();
        });
        it('should import valid CSV data', async ()=>{
            const csvContent = `groupId,firstName,lastName,email,phone,ageType,guestType,dietaryRestrictions,plusOneName,plusOneAttending,arrivalDate,departureDate,airportCode,flightNumber,invitationSent,invitationSentDate,rsvpDeadline,notes
123e4567-e89b-12d3-a456-426614174001,John,Doe,john@example.com,+1234567890,adult,wedding_guest,Vegetarian,Jane Doe,true,2025-06-01,2025-06-05,SJO,AA123,true,2025-01-15,2025-05-01,VIP guest`;
            // Mock successful database insert
            const { supabase } = require('@/lib/supabase');
            supabase.from.mockReturnValue({
                insert: jest.fn().mockReturnValue({
                    select: jest.fn().mockReturnValue({
                        single: jest.fn().mockResolvedValue({
                            data: {
                                id: '123e4567-e89b-12d3-a456-426614174000',
                                group_id: '123e4567-e89b-12d3-a456-426614174001',
                                first_name: 'John',
                                last_name: 'Doe',
                                email: 'john@example.com',
                                phone: '+1234567890',
                                age_type: 'adult',
                                guest_type: 'wedding_guest',
                                dietary_restrictions: 'Vegetarian',
                                plus_one_name: 'Jane Doe',
                                plus_one_attending: true,
                                arrival_date: '2025-06-01',
                                departure_date: '2025-06-05',
                                airport_code: 'SJO',
                                flight_number: 'AA123',
                                invitation_sent: true,
                                invitation_sent_date: '2025-01-15',
                                rsvp_deadline: '2025-05-01',
                                notes: 'VIP guest',
                                created_at: '2025-01-01T00:00:00Z',
                                updated_at: '2025-01-01T00:00:00Z'
                            },
                            error: null
                        })
                    })
                })
            });
            const result = await (0, _guestService.importFromCSV)(csvContent);
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data).toHaveLength(1);
                expect(result.data[0].firstName).toBe('John');
                expect(result.data[0].lastName).toBe('Doe');
            }
        });
        it('should handle CSV with null values', async ()=>{
            const csvContent = `groupId,firstName,lastName,email,phone,ageType,guestType,dietaryRestrictions,plusOneName,plusOneAttending,arrivalDate,departureDate,airportCode,flightNumber,invitationSent,invitationSentDate,rsvpDeadline,notes
123e4567-e89b-12d3-a456-426614174001,Jane,Smith,,,adult,wedding_guest,,,false,,,,,false,,,`;
            const { supabase } = require('@/lib/supabase');
            supabase.from.mockReturnValue({
                insert: jest.fn().mockReturnValue({
                    select: jest.fn().mockReturnValue({
                        single: jest.fn().mockResolvedValue({
                            data: {
                                id: '123e4567-e89b-12d3-a456-426614174000',
                                group_id: '123e4567-e89b-12d3-a456-426614174001',
                                first_name: 'Jane',
                                last_name: 'Smith',
                                email: null,
                                phone: null,
                                age_type: 'adult',
                                guest_type: 'wedding_guest',
                                dietary_restrictions: null,
                                plus_one_name: null,
                                plus_one_attending: false,
                                arrival_date: null,
                                departure_date: null,
                                airport_code: null,
                                flight_number: null,
                                invitation_sent: false,
                                invitation_sent_date: null,
                                rsvp_deadline: null,
                                notes: null,
                                created_at: '2025-01-01T00:00:00Z',
                                updated_at: '2025-01-01T00:00:00Z'
                            },
                            error: null
                        })
                    })
                })
            });
            const result = await (0, _guestService.importFromCSV)(csvContent);
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data).toHaveLength(1);
                expect(result.data[0].email).toBeNull();
                expect(result.data[0].phone).toBeNull();
            }
        });
        it('should handle CSV with quoted fields containing commas', async ()=>{
            const csvContent = `groupId,firstName,lastName,email,phone,ageType,guestType,dietaryRestrictions,plusOneName,plusOneAttending,arrivalDate,departureDate,airportCode,flightNumber,invitationSent,invitationSentDate,rsvpDeadline,notes
123e4567-e89b-12d3-a456-426614174001,John,Doe,john@example.com,,adult,wedding_guest,"No dairy, no nuts",,false,,,,,false,,,"Needs wheelchair access, arriving early"`;
            const { supabase } = require('@/lib/supabase');
            supabase.from.mockReturnValue({
                insert: jest.fn().mockReturnValue({
                    select: jest.fn().mockReturnValue({
                        single: jest.fn().mockResolvedValue({
                            data: {
                                id: '123e4567-e89b-12d3-a456-426614174000',
                                group_id: '123e4567-e89b-12d3-a456-426614174001',
                                first_name: 'John',
                                last_name: 'Doe',
                                email: 'john@example.com',
                                phone: null,
                                age_type: 'adult',
                                guest_type: 'wedding_guest',
                                dietary_restrictions: 'No dairy, no nuts',
                                plus_one_name: null,
                                plus_one_attending: false,
                                arrival_date: null,
                                departure_date: null,
                                airport_code: null,
                                flight_number: null,
                                invitation_sent: false,
                                invitation_sent_date: null,
                                rsvp_deadline: null,
                                notes: 'Needs wheelchair access, arriving early',
                                created_at: '2025-01-01T00:00:00Z',
                                updated_at: '2025-01-01T00:00:00Z'
                            },
                            error: null
                        })
                    })
                })
            });
            const result = await (0, _guestService.importFromCSV)(csvContent);
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data[0].dietaryRestrictions).toBe('No dairy, no nuts');
                expect(result.data[0].notes).toBe('Needs wheelchair access, arriving early');
            }
        });
        it('should return validation error for empty CSV', async ()=>{
            const result = await (0, _guestService.importFromCSV)('');
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
            }
        });
        it('should return validation error for CSV with only header', async ()=>{
            const csvContent = `groupId,firstName,lastName,email,phone,ageType,guestType,dietaryRestrictions,plusOneName,plusOneAttending,arrivalDate,departureDate,airportCode,flightNumber,invitationSent,invitationSentDate,rsvpDeadline,notes`;
            const result = await (0, _guestService.importFromCSV)(csvContent);
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
                expect(result.error.message).toContain('at least one data row');
            }
        });
        it('should return validation error for mismatched headers', async ()=>{
            const csvContent = `firstName,lastName,email
John,Doe,john@example.com`;
            const result = await (0, _guestService.importFromCSV)(csvContent);
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
                expect(result.error.message).toContain('header mismatch');
            }
        });
        it('should return validation error for invalid data', async ()=>{
            const csvContent = `groupId,firstName,lastName,email,phone,ageType,guestType,dietaryRestrictions,plusOneName,plusOneAttending,arrivalDate,departureDate,airportCode,flightNumber,invitationSent,invitationSentDate,rsvpDeadline,notes
invalid-uuid,John,Doe,invalid-email,,adult,wedding_guest,,,false,,,,,false,,,`;
            const result = await (0, _guestService.importFromCSV)(csvContent);
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
                expect(result.error.message).toContain('failed');
            }
        });
        it('should skip empty lines in CSV', async ()=>{
            const csvContent = `groupId,firstName,lastName,email,phone,ageType,guestType,dietaryRestrictions,plusOneName,plusOneAttending,arrivalDate,departureDate,airportCode,flightNumber,invitationSent,invitationSentDate,rsvpDeadline,notes

123e4567-e89b-12d3-a456-426614174001,John,Doe,john@example.com,,adult,wedding_guest,,,false,,,,,false,,,

`;
            const { supabase } = require('@/lib/supabase');
            supabase.from.mockReturnValue({
                insert: jest.fn().mockReturnValue({
                    select: jest.fn().mockReturnValue({
                        single: jest.fn().mockResolvedValue({
                            data: {
                                id: '123e4567-e89b-12d3-a456-426614174000',
                                group_id: '123e4567-e89b-12d3-a456-426614174001',
                                first_name: 'John',
                                last_name: 'Doe',
                                email: 'john@example.com',
                                phone: null,
                                age_type: 'adult',
                                guest_type: 'wedding_guest',
                                dietary_restrictions: null,
                                plus_one_name: null,
                                plus_one_attending: false,
                                arrival_date: null,
                                departure_date: null,
                                airport_code: null,
                                flight_number: null,
                                invitation_sent: false,
                                invitation_sent_date: null,
                                rsvp_deadline: null,
                                notes: null,
                                created_at: '2025-01-01T00:00:00Z',
                                updated_at: '2025-01-01T00:00:00Z'
                            },
                            error: null
                        })
                    })
                })
            });
            const result = await (0, _guestService.importFromCSV)(csvContent);
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data).toHaveLength(1);
            }
        });
    });
    describe('CSV Round-Trip', ()=>{
        it('should preserve data through export and import', async ()=>{
            const originalGuests = [
                {
                    id: '123e4567-e89b-12d3-a456-426614174000',
                    groupId: '123e4567-e89b-12d3-a456-426614174001',
                    firstName: 'John',
                    lastName: 'Doe',
                    email: 'john@example.com',
                    phone: '+1234567890',
                    ageType: 'adult',
                    guestType: 'wedding_guest',
                    dietaryRestrictions: 'Vegetarian',
                    plusOneName: 'Jane Doe',
                    plusOneAttending: true,
                    arrivalDate: '2025-06-01',
                    departureDate: '2025-06-05',
                    airportCode: 'SJO',
                    flightNumber: 'AA123',
                    invitationSent: true,
                    invitationSentDate: '2025-01-15',
                    rsvpDeadline: '2025-05-01',
                    notes: 'VIP guest',
                    authMethod: 'email_matching',
                    createdAt: '2025-01-01T00:00:00Z',
                    updatedAt: '2025-01-01T00:00:00Z'
                }
            ];
            // Export to CSV
            const exportResult = await (0, _guestService.exportToCSV)(originalGuests);
            expect(exportResult.success).toBe(true);
            if (!exportResult.success) return;
            // Mock database for import
            const { supabase } = require('@/lib/supabase');
            supabase.from.mockReturnValue({
                insert: jest.fn().mockReturnValue({
                    select: jest.fn().mockReturnValue({
                        single: jest.fn().mockResolvedValue({
                            data: {
                                id: '123e4567-e89b-12d3-a456-426614174002',
                                group_id: originalGuests[0].groupId,
                                first_name: originalGuests[0].firstName,
                                last_name: originalGuests[0].lastName,
                                email: originalGuests[0].email,
                                phone: originalGuests[0].phone,
                                age_type: originalGuests[0].ageType,
                                guest_type: originalGuests[0].guestType,
                                dietary_restrictions: originalGuests[0].dietaryRestrictions,
                                plus_one_name: originalGuests[0].plusOneName,
                                plus_one_attending: originalGuests[0].plusOneAttending,
                                arrival_date: originalGuests[0].arrivalDate,
                                departure_date: originalGuests[0].departureDate,
                                airport_code: originalGuests[0].airportCode,
                                flight_number: originalGuests[0].flightNumber,
                                invitation_sent: originalGuests[0].invitationSent,
                                invitation_sent_date: originalGuests[0].invitationSentDate,
                                rsvp_deadline: originalGuests[0].rsvpDeadline,
                                notes: originalGuests[0].notes,
                                created_at: '2025-01-25T00:00:00Z',
                                updated_at: '2025-01-25T00:00:00Z'
                            },
                            error: null
                        })
                    })
                })
            });
            // Import from CSV
            const importResult = await (0, _guestService.importFromCSV)(exportResult.data);
            expect(importResult.success).toBe(true);
            if (!importResult.success) return;
            // Verify data integrity (excluding id, createdAt, updatedAt which are generated)
            const imported = importResult.data[0];
            expect(imported.groupId).toBe(originalGuests[0].groupId);
            expect(imported.firstName).toBe(originalGuests[0].firstName);
            expect(imported.lastName).toBe(originalGuests[0].lastName);
            expect(imported.email).toBe(originalGuests[0].email);
            expect(imported.phone).toBe(originalGuests[0].phone);
            expect(imported.ageType).toBe(originalGuests[0].ageType);
            expect(imported.guestType).toBe(originalGuests[0].guestType);
            expect(imported.dietaryRestrictions).toBe(originalGuests[0].dietaryRestrictions);
            expect(imported.plusOneName).toBe(originalGuests[0].plusOneName);
            expect(imported.plusOneAttending).toBe(originalGuests[0].plusOneAttending);
            expect(imported.arrivalDate).toBe(originalGuests[0].arrivalDate);
            expect(imported.departureDate).toBe(originalGuests[0].departureDate);
            expect(imported.airportCode).toBe(originalGuests[0].airportCode);
            expect(imported.flightNumber).toBe(originalGuests[0].flightNumber);
            expect(imported.invitationSent).toBe(originalGuests[0].invitationSent);
            expect(imported.invitationSentDate).toBe(originalGuests[0].invitationSentDate);
            expect(imported.rsvpDeadline).toBe(originalGuests[0].rsvpDeadline);
            expect(imported.notes).toBe(originalGuests[0].notes);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvc2VydmljZXMvY3N2SW1wb3J0RXhwb3J0LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhwb3J0VG9DU1YsIGltcG9ydEZyb21DU1YgfSBmcm9tICcuL2d1ZXN0U2VydmljZSc7XG5pbXBvcnQgdHlwZSB7IEd1ZXN0IH0gZnJvbSAnQC9zY2hlbWFzL2d1ZXN0U2NoZW1hcyc7XG5cbi8vIE1vY2sgU3VwYWJhc2Vcbmplc3QubW9jaygnQC9saWIvc3VwYWJhc2UnLCAoKSA9PiAoe1xuICBzdXBhYmFzZToge1xuICAgIGZyb206IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgIGluc2VydDogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICBzaW5nbGU6IGplc3QuZm4oKSxcbiAgICAgICAgfSkpLFxuICAgICAgfSkpLFxuICAgIH0pKSxcbiAgfSxcbn0pKTtcblxuZGVzY3JpYmUoJ2d1ZXN0U2VydmljZSBDU1YgSW1wb3J0L0V4cG9ydCcsICgpID0+IHtcbiAgZGVzY3JpYmUoJ2V4cG9ydFRvQ1NWJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZXhwb3J0IGd1ZXN0cyB0byB2YWxpZCBDU1YgZm9ybWF0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZ3Vlc3RzOiBHdWVzdFtdID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICAgIGdyb3VwSWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgICAgICAgIGZpcnN0TmFtZTogJ0pvaG4nLFxuICAgICAgICAgIGxhc3ROYW1lOiAnRG9lJyxcbiAgICAgICAgICBlbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nLFxuICAgICAgICAgIHBob25lOiAnKzEyMzQ1Njc4OTAnLFxuICAgICAgICAgIGFnZVR5cGU6ICdhZHVsdCcsXG4gICAgICAgICAgZ3Vlc3RUeXBlOiAnd2VkZGluZ19ndWVzdCcsXG4gICAgICAgICAgZGlldGFyeVJlc3RyaWN0aW9uczogJ1ZlZ2V0YXJpYW4nLFxuICAgICAgICAgIHBsdXNPbmVOYW1lOiAnSmFuZSBEb2UnLFxuICAgICAgICAgIHBsdXNPbmVBdHRlbmRpbmc6IHRydWUsXG4gICAgICAgICAgYXJyaXZhbERhdGU6ICcyMDI1LTA2LTAxJyxcbiAgICAgICAgICBkZXBhcnR1cmVEYXRlOiAnMjAyNS0wNi0wNScsXG4gICAgICAgICAgYWlycG9ydENvZGU6ICdTSk8nLFxuICAgICAgICAgIGZsaWdodE51bWJlcjogJ0FBMTIzJyxcbiAgICAgICAgICBpbnZpdGF0aW9uU2VudDogdHJ1ZSxcbiAgICAgICAgICBpbnZpdGF0aW9uU2VudERhdGU6ICcyMDI1LTAxLTE1JyxcbiAgICAgICAgICByc3ZwRGVhZGxpbmU6ICcyMDI1LTA1LTAxJyxcbiAgICAgICAgICBub3RlczogJ1ZJUCBndWVzdCcsXG4gICAgICAgICAgYXV0aE1ldGhvZDogJ2VtYWlsX21hdGNoaW5nJyxcbiAgICAgICAgICBjcmVhdGVkQXQ6ICcyMDI1LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgICAgdXBkYXRlZEF0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhwb3J0VG9DU1YoZ3Vlc3RzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gcmVzdWx0LmRhdGEuc3BsaXQoJ1xcbicpO1xuICAgICAgICBleHBlY3QobGluZXMubGVuZ3RoKS50b0JlKDIpOyAvLyBIZWFkZXIgKyAxIGRhdGEgcm93XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBoZWFkZXJcbiAgICAgICAgZXhwZWN0KGxpbmVzWzBdKS50b0JlKFxuICAgICAgICAgICdncm91cElkLGZpcnN0TmFtZSxsYXN0TmFtZSxlbWFpbCxwaG9uZSxhZ2VUeXBlLGd1ZXN0VHlwZSxkaWV0YXJ5UmVzdHJpY3Rpb25zLHBsdXNPbmVOYW1lLHBsdXNPbmVBdHRlbmRpbmcsYXJyaXZhbERhdGUsZGVwYXJ0dXJlRGF0ZSxhaXJwb3J0Q29kZSxmbGlnaHROdW1iZXIsaW52aXRhdGlvblNlbnQsaW52aXRhdGlvblNlbnREYXRlLHJzdnBEZWFkbGluZSxub3RlcydcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGRhdGEgcm93XG4gICAgICAgIGV4cGVjdChsaW5lc1sxXSkudG9Db250YWluKCdKb2huJyk7XG4gICAgICAgIGV4cGVjdChsaW5lc1sxXSkudG9Db250YWluKCdEb2UnKTtcbiAgICAgICAgZXhwZWN0KGxpbmVzWzFdKS50b0NvbnRhaW4oJ2pvaG5AZXhhbXBsZS5jb20nKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGd1ZXN0cyB3aXRoIG51bGwgdmFsdWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZ3Vlc3RzOiBHdWVzdFtdID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICAgIGdyb3VwSWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgICAgICAgIGZpcnN0TmFtZTogJ0phbmUnLFxuICAgICAgICAgIGxhc3ROYW1lOiAnU21pdGgnLFxuICAgICAgICAgIGVtYWlsOiBudWxsLFxuICAgICAgICAgIHBob25lOiBudWxsLFxuICAgICAgICAgIGFnZVR5cGU6ICdhZHVsdCcsXG4gICAgICAgICAgZ3Vlc3RUeXBlOiAnd2VkZGluZ19ndWVzdCcsXG4gICAgICAgICAgZGlldGFyeVJlc3RyaWN0aW9uczogbnVsbCxcbiAgICAgICAgICBwbHVzT25lTmFtZTogbnVsbCxcbiAgICAgICAgICBwbHVzT25lQXR0ZW5kaW5nOiBmYWxzZSxcbiAgICAgICAgICBhcnJpdmFsRGF0ZTogbnVsbCxcbiAgICAgICAgICBkZXBhcnR1cmVEYXRlOiBudWxsLFxuICAgICAgICAgIGFpcnBvcnRDb2RlOiBudWxsLFxuICAgICAgICAgIGZsaWdodE51bWJlcjogbnVsbCxcbiAgICAgICAgICBpbnZpdGF0aW9uU2VudDogZmFsc2UsXG4gICAgICAgICAgaW52aXRhdGlvblNlbnREYXRlOiBudWxsLFxuICAgICAgICAgIHJzdnBEZWFkbGluZTogbnVsbCxcbiAgICAgICAgICBub3RlczogbnVsbCxcbiAgICAgICAgICBhdXRoTWV0aG9kOiAnZW1haWxfbWF0Y2hpbmcnLFxuICAgICAgICAgIGNyZWF0ZWRBdDogJzIwMjUtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgICB1cGRhdGVkQXQ6ICcyMDI1LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBleHBvcnRUb0NTVihndWVzdHMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc3QgbGluZXMgPSByZXN1bHQuZGF0YS5zcGxpdCgnXFxuJyk7XG4gICAgICAgIGV4cGVjdChsaW5lcy5sZW5ndGgpLnRvQmUoMik7XG4gICAgICAgIFxuICAgICAgICAvLyBOdWxsIHZhbHVlcyBzaG91bGQgYmUgZW1wdHkgc3RyaW5ncyBpbiBDU1ZcbiAgICAgICAgY29uc3QgZmllbGRzID0gbGluZXNbMV0uc3BsaXQoJywnKTtcbiAgICAgICAgZXhwZWN0KGZpZWxkc1szXSkudG9CZSgnJyk7IC8vIGVtYWlsXG4gICAgICAgIGV4cGVjdChmaWVsZHNbNF0pLnRvQmUoJycpOyAvLyBwaG9uZVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBlc2NhcGUgZmllbGRzIGNvbnRhaW5pbmcgY29tbWFzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZ3Vlc3RzOiBHdWVzdFtdID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICAgIGdyb3VwSWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgICAgICAgIGZpcnN0TmFtZTogJ0pvaG4nLFxuICAgICAgICAgIGxhc3ROYW1lOiAnRG9lJyxcbiAgICAgICAgICBlbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nLFxuICAgICAgICAgIHBob25lOiBudWxsLFxuICAgICAgICAgIGFnZVR5cGU6ICdhZHVsdCcsXG4gICAgICAgICAgZ3Vlc3RUeXBlOiAnd2VkZGluZ19ndWVzdCcsXG4gICAgICAgICAgZGlldGFyeVJlc3RyaWN0aW9uczogJ05vIGRhaXJ5LCBubyBudXRzJyxcbiAgICAgICAgICBwbHVzT25lTmFtZTogbnVsbCxcbiAgICAgICAgICBwbHVzT25lQXR0ZW5kaW5nOiBmYWxzZSxcbiAgICAgICAgICBhcnJpdmFsRGF0ZTogbnVsbCxcbiAgICAgICAgICBkZXBhcnR1cmVEYXRlOiBudWxsLFxuICAgICAgICAgIGFpcnBvcnRDb2RlOiBudWxsLFxuICAgICAgICAgIGZsaWdodE51bWJlcjogbnVsbCxcbiAgICAgICAgICBpbnZpdGF0aW9uU2VudDogZmFsc2UsXG4gICAgICAgICAgaW52aXRhdGlvblNlbnREYXRlOiBudWxsLFxuICAgICAgICAgIHJzdnBEZWFkbGluZTogbnVsbCxcbiAgICAgICAgICBub3RlczogJ05lZWRzIHdoZWVsY2hhaXIgYWNjZXNzLCBhcnJpdmluZyBlYXJseScsXG4gICAgICAgICAgYXV0aE1ldGhvZDogJ2VtYWlsX21hdGNoaW5nJyxcbiAgICAgICAgICBjcmVhdGVkQXQ6ICcyMDI1LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgICAgdXBkYXRlZEF0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhwb3J0VG9DU1YoZ3Vlc3RzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIC8vIEZpZWxkcyB3aXRoIGNvbW1hcyBzaG91bGQgYmUgd3JhcHBlZCBpbiBxdW90ZXNcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0NvbnRhaW4oJ1wiTm8gZGFpcnksIG5vIG51dHNcIicpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvQ29udGFpbignXCJOZWVkcyB3aGVlbGNoYWlyIGFjY2VzcywgYXJyaXZpbmcgZWFybHlcIicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBlc2NhcGUgZmllbGRzIGNvbnRhaW5pbmcgcXVvdGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZ3Vlc3RzOiBHdWVzdFtdID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICAgIGdyb3VwSWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgICAgICAgIGZpcnN0TmFtZTogJ0pvaG4nLFxuICAgICAgICAgIGxhc3ROYW1lOiAnT1xcJ0JyaWVuJyxcbiAgICAgICAgICBlbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nLFxuICAgICAgICAgIHBob25lOiBudWxsLFxuICAgICAgICAgIGFnZVR5cGU6ICdhZHVsdCcsXG4gICAgICAgICAgZ3Vlc3RUeXBlOiAnd2VkZGluZ19ndWVzdCcsXG4gICAgICAgICAgZGlldGFyeVJlc3RyaWN0aW9uczogbnVsbCxcbiAgICAgICAgICBwbHVzT25lTmFtZTogbnVsbCxcbiAgICAgICAgICBwbHVzT25lQXR0ZW5kaW5nOiBmYWxzZSxcbiAgICAgICAgICBhcnJpdmFsRGF0ZTogbnVsbCxcbiAgICAgICAgICBkZXBhcnR1cmVEYXRlOiBudWxsLFxuICAgICAgICAgIGFpcnBvcnRDb2RlOiBudWxsLFxuICAgICAgICAgIGZsaWdodE51bWJlcjogbnVsbCxcbiAgICAgICAgICBpbnZpdGF0aW9uU2VudDogZmFsc2UsXG4gICAgICAgICAgaW52aXRhdGlvblNlbnREYXRlOiBudWxsLFxuICAgICAgICAgIHJzdnBEZWFkbGluZTogbnVsbCxcbiAgICAgICAgICBub3RlczogJ1ByZWZlcnMgXCJ2ZWdldGFyaWFuXCIgbWVhbHMnLFxuICAgICAgICAgIGF1dGhNZXRob2Q6ICdlbWFpbF9tYXRjaGluZycsXG4gICAgICAgICAgY3JlYXRlZEF0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICAgIHVwZGF0ZWRBdDogJzIwMjUtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgfSxcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4cG9ydFRvQ1NWKGd1ZXN0cyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAvLyBGaWVsZHMgd2l0aCBxdW90ZXMgc2hvdWxkIGJlIHdyYXBwZWQgYW5kIHF1b3RlcyBkb3VibGVkXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9Db250YWluKCdcIlwidmVnZXRhcmlhblwiXCInKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IGFycmF5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhwb3J0VG9DU1YoW10pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc3QgbGluZXMgPSByZXN1bHQuZGF0YS5zcGxpdCgnXFxuJyk7XG4gICAgICAgIGV4cGVjdChsaW5lcy5sZW5ndGgpLnRvQmUoMSk7IC8vIE9ubHkgaGVhZGVyXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiB2YWxpZGF0aW9uIGVycm9yIGZvciBub24tYXJyYXkgaW5wdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBleHBvcnRUb0NTVihudWxsIGFzIGFueSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnaW1wb3J0RnJvbUNTVicsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIC8vIFJlc2V0IG1vY2tcbiAgICAgIGNvbnN0IHsgc3VwYWJhc2UgfSA9IHJlcXVpcmUoJ0AvbGliL3N1cGFiYXNlJyk7XG4gICAgICBzdXBhYmFzZS5mcm9tLm1vY2tDbGVhcigpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbXBvcnQgdmFsaWQgQ1NWIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjc3ZDb250ZW50ID0gYGdyb3VwSWQsZmlyc3ROYW1lLGxhc3ROYW1lLGVtYWlsLHBob25lLGFnZVR5cGUsZ3Vlc3RUeXBlLGRpZXRhcnlSZXN0cmljdGlvbnMscGx1c09uZU5hbWUscGx1c09uZUF0dGVuZGluZyxhcnJpdmFsRGF0ZSxkZXBhcnR1cmVEYXRlLGFpcnBvcnRDb2RlLGZsaWdodE51bWJlcixpbnZpdGF0aW9uU2VudCxpbnZpdGF0aW9uU2VudERhdGUscnN2cERlYWRsaW5lLG5vdGVzXG4xMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEsSm9obixEb2Usam9obkBleGFtcGxlLmNvbSwrMTIzNDU2Nzg5MCxhZHVsdCx3ZWRkaW5nX2d1ZXN0LFZlZ2V0YXJpYW4sSmFuZSBEb2UsdHJ1ZSwyMDI1LTA2LTAxLDIwMjUtMDYtMDUsU0pPLEFBMTIzLHRydWUsMjAyNS0wMS0xNSwyMDI1LTA1LTAxLFZJUCBndWVzdGA7XG5cbiAgICAgIC8vIE1vY2sgc3VjY2Vzc2Z1bCBkYXRhYmFzZSBpbnNlcnRcbiAgICAgIGNvbnN0IHsgc3VwYWJhc2UgfSA9IHJlcXVpcmUoJ0AvbGliL3N1cGFiYXNlJyk7XG4gICAgICBzdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGluc2VydDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgIHNpbmdsZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgICAgICAgICBncm91cF9pZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMScsXG4gICAgICAgICAgICAgICAgZmlyc3RfbmFtZTogJ0pvaG4nLFxuICAgICAgICAgICAgICAgIGxhc3RfbmFtZTogJ0RvZScsXG4gICAgICAgICAgICAgICAgZW1haWw6ICdqb2huQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICAgICAgICBwaG9uZTogJysxMjM0NTY3ODkwJyxcbiAgICAgICAgICAgICAgICBhZ2VfdHlwZTogJ2FkdWx0JyxcbiAgICAgICAgICAgICAgICBndWVzdF90eXBlOiAnd2VkZGluZ19ndWVzdCcsXG4gICAgICAgICAgICAgICAgZGlldGFyeV9yZXN0cmljdGlvbnM6ICdWZWdldGFyaWFuJyxcbiAgICAgICAgICAgICAgICBwbHVzX29uZV9uYW1lOiAnSmFuZSBEb2UnLFxuICAgICAgICAgICAgICAgIHBsdXNfb25lX2F0dGVuZGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgICBhcnJpdmFsX2RhdGU6ICcyMDI1LTA2LTAxJyxcbiAgICAgICAgICAgICAgICBkZXBhcnR1cmVfZGF0ZTogJzIwMjUtMDYtMDUnLFxuICAgICAgICAgICAgICAgIGFpcnBvcnRfY29kZTogJ1NKTycsXG4gICAgICAgICAgICAgICAgZmxpZ2h0X251bWJlcjogJ0FBMTIzJyxcbiAgICAgICAgICAgICAgICBpbnZpdGF0aW9uX3NlbnQ6IHRydWUsXG4gICAgICAgICAgICAgICAgaW52aXRhdGlvbl9zZW50X2RhdGU6ICcyMDI1LTAxLTE1JyxcbiAgICAgICAgICAgICAgICByc3ZwX2RlYWRsaW5lOiAnMjAyNS0wNS0wMScsXG4gICAgICAgICAgICAgICAgbm90ZXM6ICdWSVAgZ3Vlc3QnLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI1LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgICAgICAgICAgdXBkYXRlZF9hdDogJzIwMjUtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaW1wb3J0RnJvbUNTVihjc3ZDb250ZW50KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGFbMF0uZmlyc3ROYW1lKS50b0JlKCdKb2huJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVswXS5sYXN0TmFtZSkudG9CZSgnRG9lJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBDU1Ygd2l0aCBudWxsIHZhbHVlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNzdkNvbnRlbnQgPSBgZ3JvdXBJZCxmaXJzdE5hbWUsbGFzdE5hbWUsZW1haWwscGhvbmUsYWdlVHlwZSxndWVzdFR5cGUsZGlldGFyeVJlc3RyaWN0aW9ucyxwbHVzT25lTmFtZSxwbHVzT25lQXR0ZW5kaW5nLGFycml2YWxEYXRlLGRlcGFydHVyZURhdGUsYWlycG9ydENvZGUsZmxpZ2h0TnVtYmVyLGludml0YXRpb25TZW50LGludml0YXRpb25TZW50RGF0ZSxyc3ZwRGVhZGxpbmUsbm90ZXNcbjEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMSxKYW5lLFNtaXRoLCwsYWR1bHQsd2VkZGluZ19ndWVzdCwsLGZhbHNlLCwsLCxmYWxzZSwsLGA7XG5cbiAgICAgIGNvbnN0IHsgc3VwYWJhc2UgfSA9IHJlcXVpcmUoJ0AvbGliL3N1cGFiYXNlJyk7XG4gICAgICBzdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGluc2VydDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgIHNpbmdsZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgICAgICAgICBncm91cF9pZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMScsXG4gICAgICAgICAgICAgICAgZmlyc3RfbmFtZTogJ0phbmUnLFxuICAgICAgICAgICAgICAgIGxhc3RfbmFtZTogJ1NtaXRoJyxcbiAgICAgICAgICAgICAgICBlbWFpbDogbnVsbCxcbiAgICAgICAgICAgICAgICBwaG9uZTogbnVsbCxcbiAgICAgICAgICAgICAgICBhZ2VfdHlwZTogJ2FkdWx0JyxcbiAgICAgICAgICAgICAgICBndWVzdF90eXBlOiAnd2VkZGluZ19ndWVzdCcsXG4gICAgICAgICAgICAgICAgZGlldGFyeV9yZXN0cmljdGlvbnM6IG51bGwsXG4gICAgICAgICAgICAgICAgcGx1c19vbmVfbmFtZTogbnVsbCxcbiAgICAgICAgICAgICAgICBwbHVzX29uZV9hdHRlbmRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGFycml2YWxfZGF0ZTogbnVsbCxcbiAgICAgICAgICAgICAgICBkZXBhcnR1cmVfZGF0ZTogbnVsbCxcbiAgICAgICAgICAgICAgICBhaXJwb3J0X2NvZGU6IG51bGwsXG4gICAgICAgICAgICAgICAgZmxpZ2h0X251bWJlcjogbnVsbCxcbiAgICAgICAgICAgICAgICBpbnZpdGF0aW9uX3NlbnQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGludml0YXRpb25fc2VudF9kYXRlOiBudWxsLFxuICAgICAgICAgICAgICAgIHJzdnBfZGVhZGxpbmU6IG51bGwsXG4gICAgICAgICAgICAgICAgbm90ZXM6IG51bGwsXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9hdDogJzIwMjUtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBpbXBvcnRGcm9tQ1NWKGNzdkNvbnRlbnQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVswXS5lbWFpbCkudG9CZU51bGwoKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhWzBdLnBob25lKS50b0JlTnVsbCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgQ1NWIHdpdGggcXVvdGVkIGZpZWxkcyBjb250YWluaW5nIGNvbW1hcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNzdkNvbnRlbnQgPSBgZ3JvdXBJZCxmaXJzdE5hbWUsbGFzdE5hbWUsZW1haWwscGhvbmUsYWdlVHlwZSxndWVzdFR5cGUsZGlldGFyeVJlc3RyaWN0aW9ucyxwbHVzT25lTmFtZSxwbHVzT25lQXR0ZW5kaW5nLGFycml2YWxEYXRlLGRlcGFydHVyZURhdGUsYWlycG9ydENvZGUsZmxpZ2h0TnVtYmVyLGludml0YXRpb25TZW50LGludml0YXRpb25TZW50RGF0ZSxyc3ZwRGVhZGxpbmUsbm90ZXNcbjEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMSxKb2huLERvZSxqb2huQGV4YW1wbGUuY29tLCxhZHVsdCx3ZWRkaW5nX2d1ZXN0LFwiTm8gZGFpcnksIG5vIG51dHNcIiwsZmFsc2UsLCwsLGZhbHNlLCwsXCJOZWVkcyB3aGVlbGNoYWlyIGFjY2VzcywgYXJyaXZpbmcgZWFybHlcImA7XG5cbiAgICAgIGNvbnN0IHsgc3VwYWJhc2UgfSA9IHJlcXVpcmUoJ0AvbGliL3N1cGFiYXNlJyk7XG4gICAgICBzdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGluc2VydDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgIHNpbmdsZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgICAgICAgICBncm91cF9pZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMScsXG4gICAgICAgICAgICAgICAgZmlyc3RfbmFtZTogJ0pvaG4nLFxuICAgICAgICAgICAgICAgIGxhc3RfbmFtZTogJ0RvZScsXG4gICAgICAgICAgICAgICAgZW1haWw6ICdqb2huQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICAgICAgICBwaG9uZTogbnVsbCxcbiAgICAgICAgICAgICAgICBhZ2VfdHlwZTogJ2FkdWx0JyxcbiAgICAgICAgICAgICAgICBndWVzdF90eXBlOiAnd2VkZGluZ19ndWVzdCcsXG4gICAgICAgICAgICAgICAgZGlldGFyeV9yZXN0cmljdGlvbnM6ICdObyBkYWlyeSwgbm8gbnV0cycsXG4gICAgICAgICAgICAgICAgcGx1c19vbmVfbmFtZTogbnVsbCxcbiAgICAgICAgICAgICAgICBwbHVzX29uZV9hdHRlbmRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGFycml2YWxfZGF0ZTogbnVsbCxcbiAgICAgICAgICAgICAgICBkZXBhcnR1cmVfZGF0ZTogbnVsbCxcbiAgICAgICAgICAgICAgICBhaXJwb3J0X2NvZGU6IG51bGwsXG4gICAgICAgICAgICAgICAgZmxpZ2h0X251bWJlcjogbnVsbCxcbiAgICAgICAgICAgICAgICBpbnZpdGF0aW9uX3NlbnQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGludml0YXRpb25fc2VudF9kYXRlOiBudWxsLFxuICAgICAgICAgICAgICAgIHJzdnBfZGVhZGxpbmU6IG51bGwsXG4gICAgICAgICAgICAgICAgbm90ZXM6ICdOZWVkcyB3aGVlbGNoYWlyIGFjY2VzcywgYXJyaXZpbmcgZWFybHknLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI1LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgICAgICAgICAgdXBkYXRlZF9hdDogJzIwMjUtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaW1wb3J0RnJvbUNTVihjc3ZDb250ZW50KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVswXS5kaWV0YXJ5UmVzdHJpY3Rpb25zKS50b0JlKCdObyBkYWlyeSwgbm8gbnV0cycpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGFbMF0ubm90ZXMpLnRvQmUoJ05lZWRzIHdoZWVsY2hhaXIgYWNjZXNzLCBhcnJpdmluZyBlYXJseScpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdmFsaWRhdGlvbiBlcnJvciBmb3IgZW1wdHkgQ1NWJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaW1wb3J0RnJvbUNTVignJyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdmFsaWRhdGlvbiBlcnJvciBmb3IgQ1NWIHdpdGggb25seSBoZWFkZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjc3ZDb250ZW50ID0gYGdyb3VwSWQsZmlyc3ROYW1lLGxhc3ROYW1lLGVtYWlsLHBob25lLGFnZVR5cGUsZ3Vlc3RUeXBlLGRpZXRhcnlSZXN0cmljdGlvbnMscGx1c09uZU5hbWUscGx1c09uZUF0dGVuZGluZyxhcnJpdmFsRGF0ZSxkZXBhcnR1cmVEYXRlLGFpcnBvcnRDb2RlLGZsaWdodE51bWJlcixpbnZpdGF0aW9uU2VudCxpbnZpdGF0aW9uU2VudERhdGUscnN2cERlYWRsaW5lLG5vdGVzYDtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaW1wb3J0RnJvbUNTVihjc3ZDb250ZW50KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdhdCBsZWFzdCBvbmUgZGF0YSByb3cnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHZhbGlkYXRpb24gZXJyb3IgZm9yIG1pc21hdGNoZWQgaGVhZGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNzdkNvbnRlbnQgPSBgZmlyc3ROYW1lLGxhc3ROYW1lLGVtYWlsXG5Kb2huLERvZSxqb2huQGV4YW1wbGUuY29tYDtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaW1wb3J0RnJvbUNTVihjc3ZDb250ZW50KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdoZWFkZXIgbWlzbWF0Y2gnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHZhbGlkYXRpb24gZXJyb3IgZm9yIGludmFsaWQgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNzdkNvbnRlbnQgPSBgZ3JvdXBJZCxmaXJzdE5hbWUsbGFzdE5hbWUsZW1haWwscGhvbmUsYWdlVHlwZSxndWVzdFR5cGUsZGlldGFyeVJlc3RyaWN0aW9ucyxwbHVzT25lTmFtZSxwbHVzT25lQXR0ZW5kaW5nLGFycml2YWxEYXRlLGRlcGFydHVyZURhdGUsYWlycG9ydENvZGUsZmxpZ2h0TnVtYmVyLGludml0YXRpb25TZW50LGludml0YXRpb25TZW50RGF0ZSxyc3ZwRGVhZGxpbmUsbm90ZXNcbmludmFsaWQtdXVpZCxKb2huLERvZSxpbnZhbGlkLWVtYWlsLCxhZHVsdCx3ZWRkaW5nX2d1ZXN0LCwsZmFsc2UsLCwsLGZhbHNlLCwsYDtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaW1wb3J0RnJvbUNTVihjc3ZDb250ZW50KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdmYWlsZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2tpcCBlbXB0eSBsaW5lcyBpbiBDU1YnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjc3ZDb250ZW50ID0gYGdyb3VwSWQsZmlyc3ROYW1lLGxhc3ROYW1lLGVtYWlsLHBob25lLGFnZVR5cGUsZ3Vlc3RUeXBlLGRpZXRhcnlSZXN0cmljdGlvbnMscGx1c09uZU5hbWUscGx1c09uZUF0dGVuZGluZyxhcnJpdmFsRGF0ZSxkZXBhcnR1cmVEYXRlLGFpcnBvcnRDb2RlLGZsaWdodE51bWJlcixpbnZpdGF0aW9uU2VudCxpbnZpdGF0aW9uU2VudERhdGUscnN2cERlYWRsaW5lLG5vdGVzXG5cbjEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMSxKb2huLERvZSxqb2huQGV4YW1wbGUuY29tLCxhZHVsdCx3ZWRkaW5nX2d1ZXN0LCwsZmFsc2UsLCwsLGZhbHNlLCwsXG5cbmA7XG5cbiAgICAgIGNvbnN0IHsgc3VwYWJhc2UgfSA9IHJlcXVpcmUoJ0AvbGliL3N1cGFiYXNlJyk7XG4gICAgICBzdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGluc2VydDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgIHNpbmdsZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgICAgICAgICBncm91cF9pZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMScsXG4gICAgICAgICAgICAgICAgZmlyc3RfbmFtZTogJ0pvaG4nLFxuICAgICAgICAgICAgICAgIGxhc3RfbmFtZTogJ0RvZScsXG4gICAgICAgICAgICAgICAgZW1haWw6ICdqb2huQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICAgICAgICBwaG9uZTogbnVsbCxcbiAgICAgICAgICAgICAgICBhZ2VfdHlwZTogJ2FkdWx0JyxcbiAgICAgICAgICAgICAgICBndWVzdF90eXBlOiAnd2VkZGluZ19ndWVzdCcsXG4gICAgICAgICAgICAgICAgZGlldGFyeV9yZXN0cmljdGlvbnM6IG51bGwsXG4gICAgICAgICAgICAgICAgcGx1c19vbmVfbmFtZTogbnVsbCxcbiAgICAgICAgICAgICAgICBwbHVzX29uZV9hdHRlbmRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGFycml2YWxfZGF0ZTogbnVsbCxcbiAgICAgICAgICAgICAgICBkZXBhcnR1cmVfZGF0ZTogbnVsbCxcbiAgICAgICAgICAgICAgICBhaXJwb3J0X2NvZGU6IG51bGwsXG4gICAgICAgICAgICAgICAgZmxpZ2h0X251bWJlcjogbnVsbCxcbiAgICAgICAgICAgICAgICBpbnZpdGF0aW9uX3NlbnQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGludml0YXRpb25fc2VudF9kYXRlOiBudWxsLFxuICAgICAgICAgICAgICAgIHJzdnBfZGVhZGxpbmU6IG51bGwsXG4gICAgICAgICAgICAgICAgbm90ZXM6IG51bGwsXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9hdDogJzIwMjUtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBpbXBvcnRGcm9tQ1NWKGNzdkNvbnRlbnQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDU1YgUm91bmQtVHJpcCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHByZXNlcnZlIGRhdGEgdGhyb3VnaCBleHBvcnQgYW5kIGltcG9ydCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG9yaWdpbmFsR3Vlc3RzOiBHdWVzdFtdID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICAgIGdyb3VwSWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgICAgICAgIGZpcnN0TmFtZTogJ0pvaG4nLFxuICAgICAgICAgIGxhc3ROYW1lOiAnRG9lJyxcbiAgICAgICAgICBlbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nLFxuICAgICAgICAgIHBob25lOiAnKzEyMzQ1Njc4OTAnLFxuICAgICAgICAgIGFnZVR5cGU6ICdhZHVsdCcsXG4gICAgICAgICAgZ3Vlc3RUeXBlOiAnd2VkZGluZ19ndWVzdCcsXG4gICAgICAgICAgZGlldGFyeVJlc3RyaWN0aW9uczogJ1ZlZ2V0YXJpYW4nLFxuICAgICAgICAgIHBsdXNPbmVOYW1lOiAnSmFuZSBEb2UnLFxuICAgICAgICAgIHBsdXNPbmVBdHRlbmRpbmc6IHRydWUsXG4gICAgICAgICAgYXJyaXZhbERhdGU6ICcyMDI1LTA2LTAxJyxcbiAgICAgICAgICBkZXBhcnR1cmVEYXRlOiAnMjAyNS0wNi0wNScsXG4gICAgICAgICAgYWlycG9ydENvZGU6ICdTSk8nLFxuICAgICAgICAgIGZsaWdodE51bWJlcjogJ0FBMTIzJyxcbiAgICAgICAgICBpbnZpdGF0aW9uU2VudDogdHJ1ZSxcbiAgICAgICAgICBpbnZpdGF0aW9uU2VudERhdGU6ICcyMDI1LTAxLTE1JyxcbiAgICAgICAgICByc3ZwRGVhZGxpbmU6ICcyMDI1LTA1LTAxJyxcbiAgICAgICAgICBub3RlczogJ1ZJUCBndWVzdCcsXG4gICAgICAgICAgYXV0aE1ldGhvZDogJ2VtYWlsX21hdGNoaW5nJyxcbiAgICAgICAgICBjcmVhdGVkQXQ6ICcyMDI1LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgICAgdXBkYXRlZEF0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgLy8gRXhwb3J0IHRvIENTVlxuICAgICAgY29uc3QgZXhwb3J0UmVzdWx0ID0gYXdhaXQgZXhwb3J0VG9DU1Yob3JpZ2luYWxHdWVzdHMpO1xuICAgICAgZXhwZWN0KGV4cG9ydFJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKCFleHBvcnRSZXN1bHQuc3VjY2VzcykgcmV0dXJuO1xuXG4gICAgICAvLyBNb2NrIGRhdGFiYXNlIGZvciBpbXBvcnRcbiAgICAgIGNvbnN0IHsgc3VwYWJhc2UgfSA9IHJlcXVpcmUoJ0AvbGliL3N1cGFiYXNlJyk7XG4gICAgICBzdXBhYmFzZS5mcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGluc2VydDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgIHNpbmdsZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAyJyxcbiAgICAgICAgICAgICAgICBncm91cF9pZDogb3JpZ2luYWxHdWVzdHNbMF0uZ3JvdXBJZCxcbiAgICAgICAgICAgICAgICBmaXJzdF9uYW1lOiBvcmlnaW5hbEd1ZXN0c1swXS5maXJzdE5hbWUsXG4gICAgICAgICAgICAgICAgbGFzdF9uYW1lOiBvcmlnaW5hbEd1ZXN0c1swXS5sYXN0TmFtZSxcbiAgICAgICAgICAgICAgICBlbWFpbDogb3JpZ2luYWxHdWVzdHNbMF0uZW1haWwsXG4gICAgICAgICAgICAgICAgcGhvbmU6IG9yaWdpbmFsR3Vlc3RzWzBdLnBob25lLFxuICAgICAgICAgICAgICAgIGFnZV90eXBlOiBvcmlnaW5hbEd1ZXN0c1swXS5hZ2VUeXBlLFxuICAgICAgICAgICAgICAgIGd1ZXN0X3R5cGU6IG9yaWdpbmFsR3Vlc3RzWzBdLmd1ZXN0VHlwZSxcbiAgICAgICAgICAgICAgICBkaWV0YXJ5X3Jlc3RyaWN0aW9uczogb3JpZ2luYWxHdWVzdHNbMF0uZGlldGFyeVJlc3RyaWN0aW9ucyxcbiAgICAgICAgICAgICAgICBwbHVzX29uZV9uYW1lOiBvcmlnaW5hbEd1ZXN0c1swXS5wbHVzT25lTmFtZSxcbiAgICAgICAgICAgICAgICBwbHVzX29uZV9hdHRlbmRpbmc6IG9yaWdpbmFsR3Vlc3RzWzBdLnBsdXNPbmVBdHRlbmRpbmcsXG4gICAgICAgICAgICAgICAgYXJyaXZhbF9kYXRlOiBvcmlnaW5hbEd1ZXN0c1swXS5hcnJpdmFsRGF0ZSxcbiAgICAgICAgICAgICAgICBkZXBhcnR1cmVfZGF0ZTogb3JpZ2luYWxHdWVzdHNbMF0uZGVwYXJ0dXJlRGF0ZSxcbiAgICAgICAgICAgICAgICBhaXJwb3J0X2NvZGU6IG9yaWdpbmFsR3Vlc3RzWzBdLmFpcnBvcnRDb2RlLFxuICAgICAgICAgICAgICAgIGZsaWdodF9udW1iZXI6IG9yaWdpbmFsR3Vlc3RzWzBdLmZsaWdodE51bWJlcixcbiAgICAgICAgICAgICAgICBpbnZpdGF0aW9uX3NlbnQ6IG9yaWdpbmFsR3Vlc3RzWzBdLmludml0YXRpb25TZW50LFxuICAgICAgICAgICAgICAgIGludml0YXRpb25fc2VudF9kYXRlOiBvcmlnaW5hbEd1ZXN0c1swXS5pbnZpdGF0aW9uU2VudERhdGUsXG4gICAgICAgICAgICAgICAgcnN2cF9kZWFkbGluZTogb3JpZ2luYWxHdWVzdHNbMF0ucnN2cERlYWRsaW5lLFxuICAgICAgICAgICAgICAgIG5vdGVzOiBvcmlnaW5hbEd1ZXN0c1swXS5ub3RlcyxcbiAgICAgICAgICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNS0wMS0yNVQwMDowMDowMFonLFxuICAgICAgICAgICAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI1LTAxLTI1VDAwOjAwOjAwWicsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEltcG9ydCBmcm9tIENTVlxuICAgICAgY29uc3QgaW1wb3J0UmVzdWx0ID0gYXdhaXQgaW1wb3J0RnJvbUNTVihleHBvcnRSZXN1bHQuZGF0YSk7XG4gICAgICBleHBlY3QoaW1wb3J0UmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAoIWltcG9ydFJlc3VsdC5zdWNjZXNzKSByZXR1cm47XG5cbiAgICAgIC8vIFZlcmlmeSBkYXRhIGludGVncml0eSAoZXhjbHVkaW5nIGlkLCBjcmVhdGVkQXQsIHVwZGF0ZWRBdCB3aGljaCBhcmUgZ2VuZXJhdGVkKVxuICAgICAgY29uc3QgaW1wb3J0ZWQgPSBpbXBvcnRSZXN1bHQuZGF0YVswXTtcbiAgICAgIGV4cGVjdChpbXBvcnRlZC5ncm91cElkKS50b0JlKG9yaWdpbmFsR3Vlc3RzWzBdLmdyb3VwSWQpO1xuICAgICAgZXhwZWN0KGltcG9ydGVkLmZpcnN0TmFtZSkudG9CZShvcmlnaW5hbEd1ZXN0c1swXS5maXJzdE5hbWUpO1xuICAgICAgZXhwZWN0KGltcG9ydGVkLmxhc3ROYW1lKS50b0JlKG9yaWdpbmFsR3Vlc3RzWzBdLmxhc3ROYW1lKTtcbiAgICAgIGV4cGVjdChpbXBvcnRlZC5lbWFpbCkudG9CZShvcmlnaW5hbEd1ZXN0c1swXS5lbWFpbCk7XG4gICAgICBleHBlY3QoaW1wb3J0ZWQucGhvbmUpLnRvQmUob3JpZ2luYWxHdWVzdHNbMF0ucGhvbmUpO1xuICAgICAgZXhwZWN0KGltcG9ydGVkLmFnZVR5cGUpLnRvQmUob3JpZ2luYWxHdWVzdHNbMF0uYWdlVHlwZSk7XG4gICAgICBleHBlY3QoaW1wb3J0ZWQuZ3Vlc3RUeXBlKS50b0JlKG9yaWdpbmFsR3Vlc3RzWzBdLmd1ZXN0VHlwZSk7XG4gICAgICBleHBlY3QoaW1wb3J0ZWQuZGlldGFyeVJlc3RyaWN0aW9ucykudG9CZShvcmlnaW5hbEd1ZXN0c1swXS5kaWV0YXJ5UmVzdHJpY3Rpb25zKTtcbiAgICAgIGV4cGVjdChpbXBvcnRlZC5wbHVzT25lTmFtZSkudG9CZShvcmlnaW5hbEd1ZXN0c1swXS5wbHVzT25lTmFtZSk7XG4gICAgICBleHBlY3QoaW1wb3J0ZWQucGx1c09uZUF0dGVuZGluZykudG9CZShvcmlnaW5hbEd1ZXN0c1swXS5wbHVzT25lQXR0ZW5kaW5nKTtcbiAgICAgIGV4cGVjdChpbXBvcnRlZC5hcnJpdmFsRGF0ZSkudG9CZShvcmlnaW5hbEd1ZXN0c1swXS5hcnJpdmFsRGF0ZSk7XG4gICAgICBleHBlY3QoaW1wb3J0ZWQuZGVwYXJ0dXJlRGF0ZSkudG9CZShvcmlnaW5hbEd1ZXN0c1swXS5kZXBhcnR1cmVEYXRlKTtcbiAgICAgIGV4cGVjdChpbXBvcnRlZC5haXJwb3J0Q29kZSkudG9CZShvcmlnaW5hbEd1ZXN0c1swXS5haXJwb3J0Q29kZSk7XG4gICAgICBleHBlY3QoaW1wb3J0ZWQuZmxpZ2h0TnVtYmVyKS50b0JlKG9yaWdpbmFsR3Vlc3RzWzBdLmZsaWdodE51bWJlcik7XG4gICAgICBleHBlY3QoaW1wb3J0ZWQuaW52aXRhdGlvblNlbnQpLnRvQmUob3JpZ2luYWxHdWVzdHNbMF0uaW52aXRhdGlvblNlbnQpO1xuICAgICAgZXhwZWN0KGltcG9ydGVkLmludml0YXRpb25TZW50RGF0ZSkudG9CZShvcmlnaW5hbEd1ZXN0c1swXS5pbnZpdGF0aW9uU2VudERhdGUpO1xuICAgICAgZXhwZWN0KGltcG9ydGVkLnJzdnBEZWFkbGluZSkudG9CZShvcmlnaW5hbEd1ZXN0c1swXS5yc3ZwRGVhZGxpbmUpO1xuICAgICAgZXhwZWN0KGltcG9ydGVkLm5vdGVzKS50b0JlKG9yaWdpbmFsR3Vlc3RzWzBdLm5vdGVzKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInN1cGFiYXNlIiwiZnJvbSIsImZuIiwiaW5zZXJ0Iiwic2VsZWN0Iiwic2luZ2xlIiwiZGVzY3JpYmUiLCJpdCIsImd1ZXN0cyIsImlkIiwiZ3JvdXBJZCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZW1haWwiLCJwaG9uZSIsImFnZVR5cGUiLCJndWVzdFR5cGUiLCJkaWV0YXJ5UmVzdHJpY3Rpb25zIiwicGx1c09uZU5hbWUiLCJwbHVzT25lQXR0ZW5kaW5nIiwiYXJyaXZhbERhdGUiLCJkZXBhcnR1cmVEYXRlIiwiYWlycG9ydENvZGUiLCJmbGlnaHROdW1iZXIiLCJpbnZpdGF0aW9uU2VudCIsImludml0YXRpb25TZW50RGF0ZSIsInJzdnBEZWFkbGluZSIsIm5vdGVzIiwiYXV0aE1ldGhvZCIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInJlc3VsdCIsImV4cG9ydFRvQ1NWIiwiZXhwZWN0Iiwic3VjY2VzcyIsInRvQmUiLCJsaW5lcyIsImRhdGEiLCJzcGxpdCIsImxlbmd0aCIsInRvQ29udGFpbiIsImZpZWxkcyIsImVycm9yIiwiY29kZSIsImJlZm9yZUVhY2giLCJyZXF1aXJlIiwibW9ja0NsZWFyIiwiY3N2Q29udGVudCIsIm1vY2tSZXR1cm5WYWx1ZSIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiZ3JvdXBfaWQiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiYWdlX3R5cGUiLCJndWVzdF90eXBlIiwiZGlldGFyeV9yZXN0cmljdGlvbnMiLCJwbHVzX29uZV9uYW1lIiwicGx1c19vbmVfYXR0ZW5kaW5nIiwiYXJyaXZhbF9kYXRlIiwiZGVwYXJ0dXJlX2RhdGUiLCJhaXJwb3J0X2NvZGUiLCJmbGlnaHRfbnVtYmVyIiwiaW52aXRhdGlvbl9zZW50IiwiaW52aXRhdGlvbl9zZW50X2RhdGUiLCJyc3ZwX2RlYWRsaW5lIiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRfYXQiLCJpbXBvcnRGcm9tQ1NWIiwidG9IYXZlTGVuZ3RoIiwidG9CZU51bGwiLCJtZXNzYWdlIiwib3JpZ2luYWxHdWVzdHMiLCJleHBvcnRSZXN1bHQiLCJpbXBvcnRSZXN1bHQiLCJpbXBv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