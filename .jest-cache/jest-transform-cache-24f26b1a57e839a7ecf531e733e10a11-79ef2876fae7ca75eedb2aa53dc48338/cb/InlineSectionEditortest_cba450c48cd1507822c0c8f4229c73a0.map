{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/InlineSectionEditor.test.tsx"],"sourcesContent":["import { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport { InlineSectionEditor } from './InlineSectionEditor';\n\n// Mock PhotoPicker directly (bypasses dynamic import)\njest.mock('./PhotoPicker', () => ({\n  PhotoPicker: ({ selectedPhotoIds, onSelectionChange }: any) => (\n    <div data-testid=\"photo-picker\">\n      <div>Selected: {selectedPhotoIds.length}</div>\n      <button onClick={() => onSelectionChange([...selectedPhotoIds, 'new-photo'])}>\n        Add Photo\n      </button>\n    </div>\n  ),\n}));\n\n// Mock RichTextEditor\njest.mock('./RichTextEditor', () => ({\n  RichTextEditor: ({ value, onChange }: any) => (\n    <textarea\n      data-testid=\"rich-text-editor\"\n      value={value}\n      onChange={(e) => onChange(e.target.value)}\n    />\n  ),\n}));\n\n// Mock SimpleReferenceSelector\njest.mock('./SimpleReferenceSelector', () => ({\n  SimpleReferenceSelector: ({ onSelect }: any) => (\n    <button\n      data-testid=\"reference-selector\"\n      onClick={() => onSelect({ type: 'activity', id: 'activity-1', title: 'Test Activity' })}\n    >\n      Add Reference\n    </button>\n  ),\n}));\n\n// Mock ReferencePreview\njest.mock('./ReferencePreview', () => ({\n  ReferencePreview: ({ reference, onRemove }: any) => (\n    <div data-testid=\"reference-preview\">\n      <span>{reference.title}</span>\n      <button onClick={onRemove}>Remove</button>\n    </div>\n  ),\n}));\n\n// Mock PhotoGallerySkeleton\njest.mock('./PhotoGallerySkeleton', () => ({\n  PhotoGallerySkeleton: () => <div>Loading photos...</div>,\n}));\n\ndescribe('InlineSectionEditor', () => {\n  const mockFetch = jest.fn();\n  \n  beforeEach(() => {\n    global.fetch = mockFetch;\n    mockFetch.mockClear();\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Rendering', () => {\n    it('should render loading state initially', () => {\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: true, data: [] }),\n      });\n\n      render(<InlineSectionEditor pageType=\"home\" pageId=\"home\" />);\n      \n      expect(screen.getByText('Loading sections...')).toBeInTheDocument();\n    });\n\n    it('should render empty state when no sections exist', async () => {\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: true, data: [] }),\n      });\n\n      render(<InlineSectionEditor pageType=\"home\" pageId=\"home\" />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('No sections yet')).toBeInTheDocument();\n      });\n      \n      expect(screen.getByText('Create First Section')).toBeInTheDocument();\n    });\n\n    it('should render sections list when sections exist', async () => {\n      const mockSections = [\n        {\n          id: 'section-1',\n          title: 'Test Section',\n          display_order: 0,\n          columns: [\n            {\n              id: 'col-1',\n              column_number: 1,\n              content_type: 'rich_text',\n              content_data: { html: '<p>Test content</p>' },\n            },\n          ],\n        },\n      ];\n\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: true, data: mockSections }),\n      });\n\n      render(<InlineSectionEditor pageType=\"home\" pageId=\"home\" />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('#1')).toBeInTheDocument();\n      });\n      \n      expect(screen.getByText('Test Section')).toBeInTheDocument();\n      expect(screen.getByText('1 Col')).toBeInTheDocument();\n    });\n\n    it('should render error message when fetch fails', async () => {\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: false, error: { message: 'Failed to load' } }),\n      });\n\n      render(<InlineSectionEditor pageType=\"home\" pageId=\"home\" />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Failed to load')).toBeInTheDocument();\n      });\n    });\n\n    it('should render compact mode when compact prop is true', async () => {\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: true, data: [] }),\n      });\n\n      const { container } = render(\n        <InlineSectionEditor pageType=\"home\" pageId=\"home\" compact={true} />\n      );\n      \n      await waitFor(() => {\n        expect(screen.getByText('No sections yet')).toBeInTheDocument();\n      });\n\n      const editor = container.querySelector('[data-testid=\"inline-section-editor\"]');\n      expect(editor).toHaveClass('text-sm');\n    });\n  });\n\n  describe('Add Section', () => {\n    it('should add a new section when Add Section button is clicked', async () => {\n      mockFetch\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: [] }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({\n            success: true,\n            data: {\n              id: 'new-section',\n              title: null,\n              display_order: 0,\n              columns: [\n                {\n                  id: 'col-1',\n                  column_number: 1,\n                  content_type: 'rich_text',\n                  content_data: { html: '' },\n                },\n              ],\n            },\n          }),\n        });\n\n      render(<InlineSectionEditor pageType=\"home\" pageId=\"home\" />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('No sections yet')).toBeInTheDocument();\n      });\n\n      const addButton = screen.getByText('+ Add Section');\n      fireEvent.click(addButton);\n\n      await waitFor(() => {\n        expect(mockFetch).toHaveBeenCalledWith(\n          '/api/admin/sections',\n          expect.objectContaining({\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n          })\n        );\n      });\n    });\n\n    it('should open edit mode for newly created section', async () => {\n      mockFetch\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: [] }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({\n            success: true,\n            data: {\n              id: 'new-section',\n              title: null,\n              display_order: 0,\n              columns: [\n                {\n                  id: 'col-1',\n                  column_number: 1,\n                  content_type: 'rich_text',\n                  content_data: { html: '' },\n                },\n              ],\n            },\n          }),\n        });\n\n      render(<InlineSectionEditor pageType=\"home\" pageId=\"home\" />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('No sections yet')).toBeInTheDocument();\n      });\n\n      const addButton = screen.getByText('+ Add Section');\n      fireEvent.click(addButton);\n\n      await waitFor(() => {\n        expect(screen.getByText('Close')).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Edit Section', () => {\n    it('should toggle edit mode when Edit button is clicked', async () => {\n      const mockSections = [\n        {\n          id: 'section-1',\n          title: 'Test Section',\n          display_order: 0,\n          columns: [\n            {\n              id: 'col-1',\n              column_number: 1,\n              content_type: 'rich_text',\n              content_data: { html: '<p>Test content</p>' },\n            },\n          ],\n        },\n      ];\n\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: true, data: mockSections }),\n      });\n\n      render(<InlineSectionEditor pageType=\"home\" pageId=\"home\" />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Test Section')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      const editButton = screen.getByText('Edit');\n      fireEvent.click(editButton);\n\n      await waitFor(() => {\n        expect(screen.getByText('Close')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      await waitFor(() => {\n        expect(screen.getByPlaceholderText('Enter a title...')).toBeInTheDocument();\n      }, { timeout: 3000 });\n    });\n\n    it('should update section title when input changes', async () => {\n      const mockSections = [\n        {\n          id: 'section-1',\n          title: 'Test Section',\n          display_order: 0,\n          columns: [\n            {\n              id: 'col-1',\n              column_number: 1,\n              content_type: 'rich_text',\n              content_data: { html: '<p>Test content</p>' },\n            },\n          ],\n        },\n      ];\n\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: true, data: mockSections }),\n      });\n\n      render(<InlineSectionEditor pageType=\"home\" pageId=\"home\" />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Test Section')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      const editButton = screen.getByText('Edit');\n      fireEvent.click(editButton);\n\n      await waitFor(() => {\n        expect(screen.getByPlaceholderText('Enter a title...')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      const titleInput = screen.getByPlaceholderText('Enter a title...');\n      fireEvent.change(titleInput, { target: { value: 'Updated Title' } });\n\n      expect(titleInput).toHaveValue('Updated Title');\n      \n      await waitFor(() => {\n        expect(screen.getByText('1 unsaved')).toBeInTheDocument();\n      }, { timeout: 3000 });\n    });\n\n    it('should toggle layout when layout selector changes', async () => {\n      const mockSections = [\n        {\n          id: 'section-1',\n          title: 'Test Section',\n          display_order: 0,\n          columns: [\n            {\n              id: 'col-1',\n              column_number: 1,\n              content_type: 'rich_text',\n              content_data: { html: '<p>Test content</p>' },\n            },\n          ],\n        },\n      ];\n\n      mockFetch\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: mockSections }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({\n            success: true,\n            data: {\n              ...mockSections[0],\n              columns: [\n                mockSections[0].columns[0],\n                {\n                  id: 'col-2',\n                  column_number: 2,\n                  content_type: 'rich_text',\n                  content_data: { html: '' },\n                },\n              ],\n            },\n          }),\n        });\n\n      render(<InlineSectionEditor pageType=\"home\" pageId=\"home\" />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Test Section')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      const editButton = screen.getByText('Edit');\n      fireEvent.click(editButton);\n\n      await waitFor(() => {\n        expect(screen.getByText('Layout:')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      const layoutSelect = screen.getByDisplayValue('One Column');\n      fireEvent.change(layoutSelect, { target: { value: 'two-column' } });\n\n      await waitFor(() => {\n        expect(mockFetch).toHaveBeenCalledWith(\n          '/api/admin/sections/section-1',\n          expect.objectContaining({\n            method: 'PUT',\n          })\n        );\n      }, { timeout: 3000 });\n    });\n  });\n\n  describe('Delete Section', () => {\n    it('should delete section when Delete button is clicked and confirmed', async () => {\n      const mockSections = [\n        {\n          id: 'section-1',\n          title: 'Test Section',\n          display_order: 0,\n          columns: [\n            {\n              id: 'col-1',\n              column_number: 1,\n              content_type: 'rich_text',\n              content_data: { html: '<p>Test content</p>' },\n            },\n          ],\n        },\n      ];\n\n      mockFetch\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: mockSections }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true }),\n        });\n\n      // Mock window.confirm\n      global.confirm = jest.fn(() => true);\n\n      render(<InlineSectionEditor pageType=\"home\" pageId=\"home\" />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Test Section')).toBeInTheDocument();\n      });\n\n      const deleteButton = screen.getByText('Delete');\n      fireEvent.click(deleteButton);\n\n      await waitFor(() => {\n        expect(mockFetch).toHaveBeenCalledWith(\n          '/api/admin/sections/section-1',\n          expect.objectContaining({\n            method: 'DELETE',\n          })\n        );\n      });\n\n      expect(global.confirm).toHaveBeenCalledWith('Are you sure you want to delete this section?');\n    });\n\n    it('should not delete section when Delete button is clicked and cancelled', async () => {\n      const mockSections = [\n        {\n          id: 'section-1',\n          title: 'Test Section',\n          display_order: 0,\n          columns: [\n            {\n              id: 'col-1',\n              column_number: 1,\n              content_type: 'rich_text',\n              content_data: { html: '<p>Test content</p>' },\n            },\n          ],\n        },\n      ];\n\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: true, data: mockSections }),\n      });\n\n      // Mock window.confirm to return false\n      global.confirm = jest.fn(() => false);\n\n      render(<InlineSectionEditor pageType=\"home\" pageId=\"home\" />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Test Section')).toBeInTheDocument();\n      });\n\n      const deleteButton = screen.getByText('Delete');\n      fireEvent.click(deleteButton);\n\n      // Should not call DELETE API\n      expect(mockFetch).toHaveBeenCalledTimes(1); // Only initial fetch\n    });\n  });\n\n  describe('Save Section', () => {\n    it('should save section when Save button is clicked', async () => {\n      const mockSections = [\n        {\n          id: 'section-1',\n          title: 'Test Section',\n          display_order: 0,\n          columns: [\n            {\n              id: 'col-1',\n              column_number: 1,\n              content_type: 'rich_text',\n              content_data: { html: '<p>Test content</p>' },\n            },\n          ],\n        },\n      ];\n\n      mockFetch\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: mockSections }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: mockSections[0] }),\n        });\n\n      render(<InlineSectionEditor pageType=\"home\" pageId=\"home\" />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Test Section')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      const editButton = screen.getByText('Edit');\n      fireEvent.click(editButton);\n\n      await waitFor(() => {\n        expect(screen.getByPlaceholderText('Enter a title...')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      // Make a change\n      const titleInput = screen.getByPlaceholderText('Enter a title...');\n      fireEvent.change(titleInput, { target: { value: 'Updated Title' } });\n\n      await waitFor(() => {\n        expect(screen.getByText('Save')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      const saveButton = screen.getByText('Save');\n      fireEvent.click(saveButton);\n\n      await waitFor(() => {\n        expect(mockFetch).toHaveBeenCalledWith(\n          '/api/admin/sections/section-1',\n          expect.objectContaining({\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json' },\n          })\n        );\n      }, { timeout: 3000 });\n    });\n\n    it('should call onSave callback when section is saved', async () => {\n      const mockSections = [\n        {\n          id: 'section-1',\n          title: 'Test Section',\n          display_order: 0,\n          columns: [\n            {\n              id: 'col-1',\n              column_number: 1,\n              content_type: 'rich_text',\n              content_data: { html: '<p>Test content</p>' },\n            },\n          ],\n        },\n      ];\n\n      mockFetch\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: mockSections }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: mockSections[0] }),\n        });\n\n      const onSave = jest.fn();\n      render(<InlineSectionEditor pageType=\"home\" pageId=\"home\" onSave={onSave} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Test Section')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      const editButton = screen.getByText('Edit');\n      fireEvent.click(editButton);\n\n      await waitFor(() => {\n        expect(screen.getByPlaceholderText('Enter a title...')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      // Make a change\n      const titleInput = screen.getByPlaceholderText('Enter a title...');\n      fireEvent.change(titleInput, { target: { value: 'Updated Title' } });\n\n      await waitFor(() => {\n        expect(screen.getByText('Save')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      const saveButton = screen.getByText('Save');\n      fireEvent.click(saveButton);\n\n      await waitFor(() => {\n        expect(onSave).toHaveBeenCalled();\n      }, { timeout: 3000 });\n    });\n\n    it('should clear unsaved changes indicator after save', async () => {\n      const mockSections = [\n        {\n          id: 'section-1',\n          title: 'Test Section',\n          display_order: 0,\n          columns: [\n            {\n              id: 'col-1',\n              column_number: 1,\n              content_type: 'rich_text',\n              content_data: { html: '<p>Test content</p>' },\n            },\n          ],\n        },\n      ];\n\n      mockFetch\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: mockSections }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: mockSections[0] }),\n        });\n\n      render(<InlineSectionEditor pageType=\"home\" pageId=\"home\" />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Test Section')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      const editButton = screen.getByText('Edit');\n      fireEvent.click(editButton);\n\n      await waitFor(() => {\n        expect(screen.getByPlaceholderText('Enter a title...')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      // Make a change\n      const titleInput = screen.getByPlaceholderText('Enter a title...');\n      fireEvent.change(titleInput, { target: { value: 'Updated Title' } });\n\n      await waitFor(() => {\n        expect(screen.getByText('1 unsaved')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      const saveButton = screen.getByText('Save');\n      fireEvent.click(saveButton);\n\n      await waitFor(() => {\n        expect(screen.queryByText('1 unsaved')).not.toBeInTheDocument();\n      }, { timeout: 3000 });\n    });\n  });\n\n  describe('Drag and Drop Reordering', () => {\n    it('should reorder sections when dragged and dropped', async () => {\n      const mockSections = [\n        {\n          id: 'section-1',\n          title: 'Section 1',\n          display_order: 0,\n          columns: [\n            {\n              id: 'col-1',\n              column_number: 1,\n              content_type: 'rich_text',\n              content_data: { html: '<p>Content 1</p>' },\n            },\n          ],\n        },\n        {\n          id: 'section-2',\n          title: 'Section 2',\n          display_order: 1,\n          columns: [\n            {\n              id: 'col-2',\n              column_number: 1,\n              content_type: 'rich_text',\n              content_data: { html: '<p>Content 2</p>' },\n            },\n          ],\n        },\n      ];\n\n      mockFetch\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: mockSections }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true }),\n        });\n\n      const { container } = render(<InlineSectionEditor pageType=\"home\" pageId=\"home\" />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Section 1')).toBeInTheDocument();\n        expect(screen.getByText('Section 2')).toBeInTheDocument();\n      });\n\n      // Simulate drag and drop\n      const sections = container.querySelectorAll('[draggable=\"true\"]');\n      const firstSection = sections[0];\n      const secondSection = sections[1];\n\n      fireEvent.dragStart(firstSection);\n      fireEvent.dragOver(secondSection);\n      fireEvent.drop(secondSection);\n\n      await waitFor(() => {\n        expect(mockFetch).toHaveBeenCalledWith(\n          '/api/admin/sections/reorder',\n          expect.objectContaining({\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n          })\n        );\n      });\n    });\n  });\n\n  describe('Column Type Changes', () => {\n    it('should change column type when selector changes', async () => {\n      const mockSections = [\n        {\n          id: 'section-1',\n          title: 'Test Section',\n          display_order: 0,\n          columns: [\n            {\n              id: 'col-1',\n              column_number: 1,\n              content_type: 'rich_text',\n              content_data: { html: '<p>Test content</p>' },\n            },\n          ],\n        },\n      ];\n\n      mockFetch\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: mockSections }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({\n            success: true,\n            data: {\n              ...mockSections[0],\n              columns: [\n                {\n                  id: 'col-1',\n                  column_number: 1,\n                  content_type: 'photo_gallery',\n                  content_data: { photo_ids: [], display_mode: 'gallery', autoplaySpeed: 3000, showCaptions: true },\n                },\n              ],\n            },\n          }),\n        });\n\n      render(<InlineSectionEditor pageType=\"home\" pageId=\"home\" />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Test Section')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      const editButton = screen.getByText('Edit');\n      fireEvent.click(editButton);\n\n      await waitFor(() => {\n        expect(screen.getByDisplayValue('Rich Text')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      const typeSelect = screen.getByDisplayValue('Rich Text');\n      fireEvent.change(typeSelect, { target: { value: 'photo_gallery' } });\n\n      await waitFor(() => {\n        expect(mockFetch).toHaveBeenCalledWith(\n          '/api/admin/sections/section-1',\n          expect.objectContaining({\n            method: 'PUT',\n          })\n        );\n      }, { timeout: 3000 });\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should display error message when save fails', async () => {\n      const mockSections = [\n        {\n          id: 'section-1',\n          title: 'Test Section',\n          display_order: 0,\n          columns: [\n            {\n              id: 'col-1',\n              column_number: 1,\n              content_type: 'rich_text',\n              content_data: { html: '<p>Test content</p>' },\n            },\n          ],\n        },\n      ];\n\n      mockFetch\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: true, data: mockSections }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({ success: false, error: { message: 'Save failed' } }),\n        });\n\n      render(<InlineSectionEditor pageType=\"home\" pageId=\"home\" />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Test Section')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      const editButton = screen.getByText('Edit');\n      fireEvent.click(editButton);\n\n      await waitFor(() => {\n        expect(screen.getByPlaceholderText('Enter a title...')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      // Make a change\n      const titleInput = screen.getByPlaceholderText('Enter a title...');\n      fireEvent.change(titleInput, { target: { value: 'Updated Title' } });\n\n      await waitFor(() => {\n        expect(screen.getByText('Save')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      const saveButton = screen.getByText('Save');\n      fireEvent.click(saveButton);\n\n      await waitFor(() => {\n        expect(screen.getByText('Save failed')).toBeInTheDocument();\n      }, { timeout: 3000 });\n    });\n  });\n});\n"],"names":["jest","mock","PhotoPicker","selectedPhotoIds","onSelectionChange","div","data-testid","length","button","onClick","RichTextEditor","value","onChange","textarea","e","target","SimpleReferenceSelector","onSelect","type","id","title","ReferencePreview","reference","onRemove","span","PhotoGallerySkeleton","describe","mockFetch","fn","beforeEach","global","fetch","mockClear","afterEach","clearAllMocks","it","mockResolvedValueOnce","ok","json","success","data","render","InlineSectionEditor","pageType","pageId","expect","screen","getByText","toBeInTheDocument","waitFor","mockSections","display_order","columns","column_number","content_type","content_data","html","error","message","container","compact","editor","querySelector","toHaveClass","addButton","fireEvent","click","toHaveBeenCalledWith","objectContaining","method","headers","timeout","editButton","getByPlaceholderText","titleInput","change","toHaveValue","layoutSelect","getByDisplayValue","confirm","deleteButton","toHaveBeenCalledTimes","saveButton","onSave","toHaveBeenCalled","queryByText","not","sections","querySelectorAll","firstSection","secondSection","dragStart","dragOver","drop","photo_ids","display_mode","autoplaySpeed","showCaptions","typeSelect"],"mappings":"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"}