9f5a817838f7def7c406d9c90b8a7619
"use strict";
// Mock Next.js Image component
jest.mock('next/image', ()=>({
        __esModule: true,
        default: ({ src, alt, fill, className, ...props })=>// eslint-disable-next-line @next/next/no-img-element
            /*#__PURE__*/ (0, _jsxruntime.jsx)("img", {
                src: src,
                alt: alt,
                className: className,
                ...props
            })
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _PhotoGallery = require("./PhotoGallery");
// Mock fetch
global.fetch = jest.fn();
const mockPhotos = [
    {
        id: 'photo-1',
        photo_url: 'https://example.com/photo1.jpg',
        caption: 'Beautiful sunset',
        alt_text: 'Sunset over the ocean'
    },
    {
        id: 'photo-2',
        photo_url: 'https://example.com/photo2.jpg',
        caption: 'Mountain view',
        alt_text: 'Mountains at dawn'
    },
    {
        id: 'photo-3',
        photo_url: 'https://example.com/photo3.jpg',
        caption: 'Beach scene',
        alt_text: 'Sandy beach'
    }
];
describe('PhotoGallery', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        jest.useFakeTimers();
    });
    afterEach(()=>{
        jest.runOnlyPendingTimers();
        jest.useRealTimers();
    });
    describe('Loading State', ()=>{
        it('should show loading skeleton while fetching photos', ()=>{
            global.fetch.mockImplementation(()=>new Promise(()=>{}) // Never resolves
            );
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1'
                ]
            }));
            // Check for loading skeleton by class instead of role
            const loadingSkeleton = document.querySelector('.animate-pulse');
            expect(loadingSkeleton).toBeInTheDocument();
            expect(loadingSkeleton).toHaveClass('animate-pulse');
        });
    });
    describe('Error State', ()=>{
        it('should display error message when fetch fails', async ()=>{
            global.fetch.mockRejectedValue(new Error('Network error'));
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1'
                ]
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Failed to load photos')).toBeInTheDocument();
            });
        });
        it('should handle individual photo fetch failures gracefully', async ()=>{
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            }).mockResolvedValueOnce({
                ok: false,
                json: async ()=>({
                        success: false
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1',
                    'photo-2'
                ]
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Sunset over the ocean')).toBeInTheDocument();
            });
            // Should only show the successfully fetched photo
            expect(_react.screen.queryByAltText('Mountains at dawn')).not.toBeInTheDocument();
        });
    });
    describe('Empty State', ()=>{
        it('should render nothing when photoIds is empty', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: []
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByRole('img')).not.toBeInTheDocument();
            });
        });
        it('should render nothing when no photoIds provided', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: []
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByRole('img')).not.toBeInTheDocument();
            });
        });
    });
    describe('Gallery Mode', ()=>{
        beforeEach(()=>{
            global.fetch.mockImplementation((url)=>{
                const photoId = url.split('/').pop();
                const photo = mockPhotos.find((p)=>p.id === photoId);
                return Promise.resolve({
                    ok: true,
                    json: async ()=>({
                            success: true,
                            data: photo
                        })
                });
            });
        });
        it('should display photos in grid layout', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1',
                    'photo-2',
                    'photo-3'
                ],
                displayMode: "gallery"
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Sunset over the ocean')).toBeInTheDocument();
                expect(_react.screen.getByAltText('Mountains at dawn')).toBeInTheDocument();
                expect(_react.screen.getByAltText('Sandy beach')).toBeInTheDocument();
            });
        });
        it('should display captions for photos', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1'
                ],
                displayMode: "gallery"
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Beautiful sunset')).toBeInTheDocument();
            });
        });
        it('should use alt text when provided', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1'
                ],
                displayMode: "gallery"
            }));
            await (0, _react.waitFor)(()=>{
                const img = _react.screen.getByAltText('Sunset over the ocean');
                expect(img).toBeInTheDocument();
            });
        });
    });
    describe('Carousel Mode', ()=>{
        beforeEach(()=>{
            global.fetch.mockImplementation((url)=>{
                const photoId = url.split('/').pop();
                const photo = mockPhotos.find((p)=>p.id === photoId);
                return Promise.resolve({
                    ok: true,
                    json: async ()=>({
                            success: true,
                            data: photo
                        })
                });
            });
        });
        it('should display first photo initially', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1',
                    'photo-2'
                ],
                displayMode: "carousel"
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Sunset over the ocean')).toBeInTheDocument();
            });
            expect(_react.screen.queryByAltText('Mountains at dawn')).not.toBeInTheDocument();
        });
        it('should show navigation buttons when multiple photos', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1',
                    'photo-2'
                ],
                displayMode: "carousel"
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByLabelText('Previous photo')).toBeInTheDocument();
                expect(_react.screen.getByLabelText('Next photo')).toBeInTheDocument();
            });
        });
        it('should navigate to next photo when next button clicked', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1',
                    'photo-2'
                ],
                displayMode: "carousel"
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Sunset over the ocean')).toBeInTheDocument();
            });
            const nextButton = _react.screen.getByLabelText('Next photo');
            _react.fireEvent.click(nextButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Mountains at dawn')).toBeInTheDocument();
            });
        });
        it('should navigate to previous photo when previous button clicked', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1',
                    'photo-2'
                ],
                displayMode: "carousel"
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Sunset over the ocean')).toBeInTheDocument();
            });
            const prevButton = _react.screen.getByLabelText('Previous photo');
            _react.fireEvent.click(prevButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Mountains at dawn')).toBeInTheDocument();
            });
        });
        it('should show dot indicators for navigation', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1',
                    'photo-2',
                    'photo-3'
                ],
                displayMode: "carousel"
            }));
            await (0, _react.waitFor)(()=>{
                const dots = _react.screen.getAllByLabelText(/Go to photo \d+/);
                expect(dots).toHaveLength(3);
            });
        });
        it('should navigate to specific photo when dot clicked', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1',
                    'photo-2',
                    'photo-3'
                ],
                displayMode: "carousel"
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Sunset over the ocean')).toBeInTheDocument();
            });
            const thirdDot = _react.screen.getByLabelText('Go to photo 3');
            _react.fireEvent.click(thirdDot);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Sandy beach')).toBeInTheDocument();
            });
        });
    });
    describe('Loop Mode', ()=>{
        beforeEach(()=>{
            global.fetch.mockImplementation((url)=>{
                const photoId = url.split('/').pop();
                const photo = mockPhotos.find((p)=>p.id === photoId);
                return Promise.resolve({
                    ok: true,
                    json: async ()=>({
                            success: true,
                            data: photo
                        })
                });
            });
        });
        it('should display first photo initially', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1',
                    'photo-2'
                ],
                displayMode: "loop"
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Sunset over the ocean')).toBeInTheDocument();
            });
        });
        it('should auto-advance to next photo after 3 seconds', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1',
                    'photo-2'
                ],
                displayMode: "loop"
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Sunset over the ocean')).toBeInTheDocument();
            });
            // Fast-forward 3 seconds
            jest.advanceTimersByTime(3000);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Mountains at dawn')).toBeInTheDocument();
            });
        });
        it('should loop back to first photo after last photo', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1',
                    'photo-2'
                ],
                displayMode: "loop"
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Sunset over the ocean')).toBeInTheDocument();
            });
            // Advance through all photos
            jest.advanceTimersByTime(3000); // Photo 2
            jest.advanceTimersByTime(3000); // Back to photo 1
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Sunset over the ocean')).toBeInTheDocument();
            });
        });
        it('should show progress indicators', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1',
                    'photo-2',
                    'photo-3'
                ],
                displayMode: "loop"
            }));
            await (0, _react.waitFor)(()=>{
                // Find progress indicators by class instead of role
                const indicators = document.querySelectorAll('.h-1');
                expect(indicators.length).toBe(3);
            });
        });
        it('should not auto-advance with single photo', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1'
                ],
                displayMode: "loop"
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Sunset over the ocean')).toBeInTheDocument();
            });
            jest.advanceTimersByTime(5000);
            // Should still show the same photo
            expect(_react.screen.getByAltText('Sunset over the ocean')).toBeInTheDocument();
        });
    });
    describe('Photo Fetching', ()=>{
        it('should fetch photos from correct API endpoint', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1'
                ]
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/admin/photos/photo-1');
            });
        });
        it('should fetch multiple photos in parallel', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1',
                    'photo-2',
                    'photo-3'
                ]
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledTimes(3);
            });
        });
        it('should filter out failed photo fetches', async ()=>{
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            }).mockResolvedValueOnce({
                ok: false
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[2]
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1',
                    'photo-2',
                    'photo-3'
                ],
                displayMode: "gallery"
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByAltText('Sunset over the ocean')).toBeInTheDocument();
                expect(_react.screen.getByAltText('Sandy beach')).toBeInTheDocument();
            });
            expect(_react.screen.queryByAltText('Mountains at dawn')).not.toBeInTheDocument();
        });
    });
    describe('Accessibility', ()=>{
        beforeEach(()=>{
            global.fetch.mockImplementation((url)=>{
                const photoId = url.split('/').pop();
                const photo = mockPhotos.find((p)=>p.id === photoId);
                return Promise.resolve({
                    ok: true,
                    json: async ()=>({
                            success: true,
                            data: photo
                        })
                });
            });
        });
        it('should have accessible navigation buttons in carousel mode', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1',
                    'photo-2'
                ],
                displayMode: "carousel"
            }));
            await (0, _react.waitFor)(()=>{
                const prevButton = _react.screen.getByLabelText('Previous photo');
                const nextButton = _react.screen.getByLabelText('Next photo');
                expect(prevButton).toBeInTheDocument();
                expect(nextButton).toBeInTheDocument();
            });
        });
        it('should have accessible dot navigation in carousel mode', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1',
                    'photo-2'
                ],
                displayMode: "carousel"
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByLabelText('Go to photo 1')).toBeInTheDocument();
                expect(_react.screen.getByLabelText('Go to photo 2')).toBeInTheDocument();
            });
        });
        it('should use alt text for images', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-1'
                ]
            }));
            await (0, _react.waitFor)(()=>{
                const img = _react.screen.getByAltText('Sunset over the ocean');
                expect(img).toHaveAttribute('alt', 'Sunset over the ocean');
            });
        });
        it('should fallback to caption for alt text when alt_text not provided', async ()=>{
            const photoWithoutAlt = {
                id: 'photo-4',
                photo_url: 'https://example.com/photo4.jpg',
                caption: 'Test caption'
            };
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: photoWithoutAlt
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoGallery.PhotoGallery, {
                photoIds: [
                    'photo-4'
                ]
            }));
            await (0, _react.waitFor)(()=>{
                const img = _react.screen.getByAltText('Test caption');
                expect(img).toBeInTheDocument();
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9ndWVzdC9QaG90b0dhbGxlcnkudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIHdhaXRGb3IsIGZpcmVFdmVudCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHsgUGhvdG9HYWxsZXJ5IH0gZnJvbSAnLi9QaG90b0dhbGxlcnknO1xuXG4vLyBNb2NrIE5leHQuanMgSW1hZ2UgY29tcG9uZW50XG5qZXN0Lm1vY2soJ25leHQvaW1hZ2UnLCAoKSA9PiAoe1xuICBfX2VzTW9kdWxlOiB0cnVlLFxuICBkZWZhdWx0OiAoeyBzcmMsIGFsdCwgZmlsbCwgY2xhc3NOYW1lLCAuLi5wcm9wcyB9OiBhbnkpID0+IChcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQG5leHQvbmV4dC9uby1pbWctZWxlbWVudFxuICAgIDxpbWcgc3JjPXtzcmN9IGFsdD17YWx0fSBjbGFzc05hbWU9e2NsYXNzTmFtZX0gey4uLnByb3BzfSAvPlxuICApLFxufSkpO1xuXG4vLyBNb2NrIGZldGNoXG5nbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCk7XG5cbmNvbnN0IG1vY2tQaG90b3MgPSBbXG4gIHtcbiAgICBpZDogJ3Bob3RvLTEnLFxuICAgIHBob3RvX3VybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vcGhvdG8xLmpwZycsXG4gICAgY2FwdGlvbjogJ0JlYXV0aWZ1bCBzdW5zZXQnLFxuICAgIGFsdF90ZXh0OiAnU3Vuc2V0IG92ZXIgdGhlIG9jZWFuJyxcbiAgfSxcbiAge1xuICAgIGlkOiAncGhvdG8tMicsXG4gICAgcGhvdG9fdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9waG90bzIuanBnJyxcbiAgICBjYXB0aW9uOiAnTW91bnRhaW4gdmlldycsXG4gICAgYWx0X3RleHQ6ICdNb3VudGFpbnMgYXQgZGF3bicsXG4gIH0sXG4gIHtcbiAgICBpZDogJ3Bob3RvLTMnLFxuICAgIHBob3RvX3VybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vcGhvdG8zLmpwZycsXG4gICAgY2FwdGlvbjogJ0JlYWNoIHNjZW5lJyxcbiAgICBhbHRfdGV4dDogJ1NhbmR5IGJlYWNoJyxcbiAgfSxcbl07XG5cbmRlc2NyaWJlKCdQaG90b0dhbGxlcnknLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIGplc3QudXNlRmFrZVRpbWVycygpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QucnVuT25seVBlbmRpbmdUaW1lcnMoKTtcbiAgICBqZXN0LnVzZVJlYWxUaW1lcnMoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0xvYWRpbmcgU3RhdGUnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBzaG93IGxvYWRpbmcgc2tlbGV0b24gd2hpbGUgZmV0Y2hpbmcgcGhvdG9zJywgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbihcbiAgICAgICAgKCkgPT4gbmV3IFByb21pc2UoKCkgPT4ge30pIC8vIE5ldmVyIHJlc29sdmVzXG4gICAgICApO1xuXG4gICAgICByZW5kZXIoPFBob3RvR2FsbGVyeSBwaG90b0lkcz17WydwaG90by0xJ119IC8+KTtcblxuICAgICAgLy8gQ2hlY2sgZm9yIGxvYWRpbmcgc2tlbGV0b24gYnkgY2xhc3MgaW5zdGVhZCBvZiByb2xlXG4gICAgICBjb25zdCBsb2FkaW5nU2tlbGV0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYW5pbWF0ZS1wdWxzZScpO1xuICAgICAgZXhwZWN0KGxvYWRpbmdTa2VsZXRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChsb2FkaW5nU2tlbGV0b24pLnRvSGF2ZUNsYXNzKCdhbmltYXRlLXB1bHNlJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBTdGF0ZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgZXJyb3IgbWVzc2FnZSB3aGVuIGZldGNoIGZhaWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignTmV0d29yayBlcnJvcicpKTtcblxuICAgICAgcmVuZGVyKDxQaG90b0dhbGxlcnkgcGhvdG9JZHM9e1sncGhvdG8tMSddfSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnRmFpbGVkIHRvIGxvYWQgcGhvdG9zJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGluZGl2aWR1YWwgcGhvdG8gZmV0Y2ggZmFpbHVyZXMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrUGhvdG9zWzBdIH0pLFxuICAgICAgICB9KVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgICBvazogZmFsc2UsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogZmFsc2UgfSksXG4gICAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPFBob3RvR2FsbGVyeSBwaG90b0lkcz17WydwaG90by0xJywgJ3Bob3RvLTInXX0gLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUFsdFRleHQoJ1N1bnNldCBvdmVyIHRoZSBvY2VhbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBvbmx5IHNob3cgdGhlIHN1Y2Nlc3NmdWxseSBmZXRjaGVkIHBob3RvXG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlBbHRUZXh0KCdNb3VudGFpbnMgYXQgZGF3bicpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0VtcHR5IFN0YXRlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmVuZGVyIG5vdGhpbmcgd2hlbiBwaG90b0lkcyBpcyBlbXB0eScsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8UGhvdG9HYWxsZXJ5IHBob3RvSWRzPXtbXX0gLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5Um9sZSgnaW1nJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlbmRlciBub3RoaW5nIHdoZW4gbm8gcGhvdG9JZHMgcHJvdmlkZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPFBob3RvR2FsbGVyeSBwaG90b0lkcz17W119IC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVJvbGUoJ2ltZycpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnR2FsbGVyeSBNb2RlJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigodXJsOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgcGhvdG9JZCA9IHVybC5zcGxpdCgnLycpLnBvcCgpO1xuICAgICAgICBjb25zdCBwaG90byA9IG1vY2tQaG90b3MuZmluZCgocCkgPT4gcC5pZCA9PT0gcGhvdG9JZCk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHBob3RvIH0pLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHBob3RvcyBpbiBncmlkIGxheW91dCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8UGhvdG9HYWxsZXJ5IHBob3RvSWRzPXtbJ3Bob3RvLTEnLCAncGhvdG8tMicsICdwaG90by0zJ119IGRpc3BsYXlNb2RlPVwiZ2FsbGVyeVwiIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlBbHRUZXh0KCdTdW5zZXQgb3ZlciB0aGUgb2NlYW4nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUFsdFRleHQoJ01vdW50YWlucyBhdCBkYXduJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlBbHRUZXh0KCdTYW5keSBiZWFjaCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgY2FwdGlvbnMgZm9yIHBob3RvcycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8UGhvdG9HYWxsZXJ5IHBob3RvSWRzPXtbJ3Bob3RvLTEnXX0gZGlzcGxheU1vZGU9XCJnYWxsZXJ5XCIgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0JlYXV0aWZ1bCBzdW5zZXQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1c2UgYWx0IHRleHQgd2hlbiBwcm92aWRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8UGhvdG9HYWxsZXJ5IHBob3RvSWRzPXtbJ3Bob3RvLTEnXX0gZGlzcGxheU1vZGU9XCJnYWxsZXJ5XCIgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgaW1nID0gc2NyZWVuLmdldEJ5QWx0VGV4dCgnU3Vuc2V0IG92ZXIgdGhlIG9jZWFuJyk7XG4gICAgICAgIGV4cGVjdChpbWcpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Nhcm91c2VsIE1vZGUnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCh1cmw6IHN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCBwaG90b0lkID0gdXJsLnNwbGl0KCcvJykucG9wKCk7XG4gICAgICAgIGNvbnN0IHBob3RvID0gbW9ja1Bob3Rvcy5maW5kKChwKSA9PiBwLmlkID09PSBwaG90b0lkKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcGhvdG8gfSksXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgZmlyc3QgcGhvdG8gaW5pdGlhbGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxQaG90b0dhbGxlcnkgcGhvdG9JZHM9e1sncGhvdG8tMScsICdwaG90by0yJ119IGRpc3BsYXlNb2RlPVwiY2Fyb3VzZWxcIiAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5QWx0VGV4dCgnU3Vuc2V0IG92ZXIgdGhlIG9jZWFuJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5QWx0VGV4dCgnTW91bnRhaW5zIGF0IGRhd24nKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNob3cgbmF2aWdhdGlvbiBidXR0b25zIHdoZW4gbXVsdGlwbGUgcGhvdG9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxQaG90b0dhbGxlcnkgcGhvdG9JZHM9e1sncGhvdG8tMScsICdwaG90by0yJ119IGRpc3BsYXlNb2RlPVwiY2Fyb3VzZWxcIiAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdQcmV2aW91cyBwaG90bycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdOZXh0IHBob3RvJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbmF2aWdhdGUgdG8gbmV4dCBwaG90byB3aGVuIG5leHQgYnV0dG9uIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPFBob3RvR2FsbGVyeSBwaG90b0lkcz17WydwaG90by0xJywgJ3Bob3RvLTInXX0gZGlzcGxheU1vZGU9XCJjYXJvdXNlbFwiIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlBbHRUZXh0KCdTdW5zZXQgb3ZlciB0aGUgb2NlYW4nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBuZXh0QnV0dG9uID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdOZXh0IHBob3RvJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sobmV4dEJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5QWx0VGV4dCgnTW91bnRhaW5zIGF0IGRhd24nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBuYXZpZ2F0ZSB0byBwcmV2aW91cyBwaG90byB3aGVuIHByZXZpb3VzIGJ1dHRvbiBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxQaG90b0dhbGxlcnkgcGhvdG9JZHM9e1sncGhvdG8tMScsICdwaG90by0yJ119IGRpc3BsYXlNb2RlPVwiY2Fyb3VzZWxcIiAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5QWx0VGV4dCgnU3Vuc2V0IG92ZXIgdGhlIG9jZWFuJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcHJldkJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnUHJldmlvdXMgcGhvdG8nKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhwcmV2QnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlBbHRUZXh0KCdNb3VudGFpbnMgYXQgZGF3bicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNob3cgZG90IGluZGljYXRvcnMgZm9yIG5hdmlnYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPFBob3RvR2FsbGVyeSBwaG90b0lkcz17WydwaG90by0xJywgJ3Bob3RvLTInLCAncGhvdG8tMyddfSBkaXNwbGF5TW9kZT1cImNhcm91c2VsXCIgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgZG90cyA9IHNjcmVlbi5nZXRBbGxCeUxhYmVsVGV4dCgvR28gdG8gcGhvdG8gXFxkKy8pO1xuICAgICAgICBleHBlY3QoZG90cykudG9IYXZlTGVuZ3RoKDMpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5hdmlnYXRlIHRvIHNwZWNpZmljIHBob3RvIHdoZW4gZG90IGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPFBob3RvR2FsbGVyeSBwaG90b0lkcz17WydwaG90by0xJywgJ3Bob3RvLTInLCAncGhvdG8tMyddfSBkaXNwbGF5TW9kZT1cImNhcm91c2VsXCIgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUFsdFRleHQoJ1N1bnNldCBvdmVyIHRoZSBvY2VhbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHRoaXJkRG90ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdHbyB0byBwaG90byAzJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sodGhpcmREb3QpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUFsdFRleHQoJ1NhbmR5IGJlYWNoJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0xvb3AgTW9kZScsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKHVybDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IHBob3RvSWQgPSB1cmwuc3BsaXQoJy8nKS5wb3AoKTtcbiAgICAgICAgY29uc3QgcGhvdG8gPSBtb2NrUGhvdG9zLmZpbmQoKHApID0+IHAuaWQgPT09IHBob3RvSWQpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBwaG90byB9KSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBmaXJzdCBwaG90byBpbml0aWFsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPFBob3RvR2FsbGVyeSBwaG90b0lkcz17WydwaG90by0xJywgJ3Bob3RvLTInXX0gZGlzcGxheU1vZGU9XCJsb29wXCIgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUFsdFRleHQoJ1N1bnNldCBvdmVyIHRoZSBvY2VhbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGF1dG8tYWR2YW5jZSB0byBuZXh0IHBob3RvIGFmdGVyIDMgc2Vjb25kcycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8UGhvdG9HYWxsZXJ5IHBob3RvSWRzPXtbJ3Bob3RvLTEnLCAncGhvdG8tMiddfSBkaXNwbGF5TW9kZT1cImxvb3BcIiAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5QWx0VGV4dCgnU3Vuc2V0IG92ZXIgdGhlIG9jZWFuJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gRmFzdC1mb3J3YXJkIDMgc2Vjb25kc1xuICAgICAgamVzdC5hZHZhbmNlVGltZXJzQnlUaW1lKDMwMDApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUFsdFRleHQoJ01vdW50YWlucyBhdCBkYXduJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbG9vcCBiYWNrIHRvIGZpcnN0IHBob3RvIGFmdGVyIGxhc3QgcGhvdG8nLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPFBob3RvR2FsbGVyeSBwaG90b0lkcz17WydwaG90by0xJywgJ3Bob3RvLTInXX0gZGlzcGxheU1vZGU9XCJsb29wXCIgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUFsdFRleHQoJ1N1bnNldCBvdmVyIHRoZSBvY2VhbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEFkdmFuY2UgdGhyb3VnaCBhbGwgcGhvdG9zXG4gICAgICBqZXN0LmFkdmFuY2VUaW1lcnNCeVRpbWUoMzAwMCk7IC8vIFBob3RvIDJcbiAgICAgIGplc3QuYWR2YW5jZVRpbWVyc0J5VGltZSgzMDAwKTsgLy8gQmFjayB0byBwaG90byAxXG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5QWx0VGV4dCgnU3Vuc2V0IG92ZXIgdGhlIG9jZWFuJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2hvdyBwcm9ncmVzcyBpbmRpY2F0b3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxQaG90b0dhbGxlcnkgcGhvdG9JZHM9e1sncGhvdG8tMScsICdwaG90by0yJywgJ3Bob3RvLTMnXX0gZGlzcGxheU1vZGU9XCJsb29wXCIgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgLy8gRmluZCBwcm9ncmVzcyBpbmRpY2F0b3JzIGJ5IGNsYXNzIGluc3RlYWQgb2Ygcm9sZVxuICAgICAgICBjb25zdCBpbmRpY2F0b3JzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmgtMScpO1xuICAgICAgICBleHBlY3QoaW5kaWNhdG9ycy5sZW5ndGgpLnRvQmUoMyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IGF1dG8tYWR2YW5jZSB3aXRoIHNpbmdsZSBwaG90bycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8UGhvdG9HYWxsZXJ5IHBob3RvSWRzPXtbJ3Bob3RvLTEnXX0gZGlzcGxheU1vZGU9XCJsb29wXCIgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUFsdFRleHQoJ1N1bnNldCBvdmVyIHRoZSBvY2VhbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGplc3QuYWR2YW5jZVRpbWVyc0J5VGltZSg1MDAwKTtcblxuICAgICAgLy8gU2hvdWxkIHN0aWxsIHNob3cgdGhlIHNhbWUgcGhvdG9cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlBbHRUZXh0KCdTdW5zZXQgb3ZlciB0aGUgb2NlYW4nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Bob3RvIEZldGNoaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZmV0Y2ggcGhvdG9zIGZyb20gY29ycmVjdCBBUEkgZW5kcG9pbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja1Bob3Rvc1swXSB9KSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPFBob3RvR2FsbGVyeSBwaG90b0lkcz17WydwaG90by0xJ119IC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXBpL2FkbWluL3Bob3Rvcy9waG90by0xJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmV0Y2ggbXVsdGlwbGUgcGhvdG9zIGluIHBhcmFsbGVsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tQaG90b3NbMF0gfSksXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxQaG90b0dhbGxlcnkgcGhvdG9JZHM9e1sncGhvdG8tMScsICdwaG90by0yJywgJ3Bob3RvLTMnXX0gLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDMpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpbHRlciBvdXQgZmFpbGVkIHBob3RvIGZldGNoZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaylcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja1Bob3Rvc1swXSB9KSxcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICB9KVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrUGhvdG9zWzJdIH0pLFxuICAgICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxQaG90b0dhbGxlcnkgcGhvdG9JZHM9e1sncGhvdG8tMScsICdwaG90by0yJywgJ3Bob3RvLTMnXX0gZGlzcGxheU1vZGU9XCJnYWxsZXJ5XCIgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUFsdFRleHQoJ1N1bnNldCBvdmVyIHRoZSBvY2VhbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5QWx0VGV4dCgnU2FuZHkgYmVhY2gnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlBbHRUZXh0KCdNb3VudGFpbnMgYXQgZGF3bicpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FjY2Vzc2liaWxpdHknLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCh1cmw6IHN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCBwaG90b0lkID0gdXJsLnNwbGl0KCcvJykucG9wKCk7XG4gICAgICAgIGNvbnN0IHBob3RvID0gbW9ja1Bob3Rvcy5maW5kKChwKSA9PiBwLmlkID09PSBwaG90b0lkKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcGhvdG8gfSksXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgYWNjZXNzaWJsZSBuYXZpZ2F0aW9uIGJ1dHRvbnMgaW4gY2Fyb3VzZWwgbW9kZScsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8UGhvdG9HYWxsZXJ5IHBob3RvSWRzPXtbJ3Bob3RvLTEnLCAncGhvdG8tMiddfSBkaXNwbGF5TW9kZT1cImNhcm91c2VsXCIgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgcHJldkJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnUHJldmlvdXMgcGhvdG8nKTtcbiAgICAgICAgY29uc3QgbmV4dEJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnTmV4dCBwaG90bycpO1xuICAgICAgICBleHBlY3QocHJldkJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgZXhwZWN0KG5leHRCdXR0b24pLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBhY2Nlc3NpYmxlIGRvdCBuYXZpZ2F0aW9uIGluIGNhcm91c2VsIG1vZGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPFBob3RvR2FsbGVyeSBwaG90b0lkcz17WydwaG90by0xJywgJ3Bob3RvLTInXX0gZGlzcGxheU1vZGU9XCJjYXJvdXNlbFwiIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ0dvIHRvIHBob3RvIDEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnR28gdG8gcGhvdG8gMicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVzZSBhbHQgdGV4dCBmb3IgaW1hZ2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxQaG90b0dhbGxlcnkgcGhvdG9JZHM9e1sncGhvdG8tMSddfSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBpbWcgPSBzY3JlZW4uZ2V0QnlBbHRUZXh0KCdTdW5zZXQgb3ZlciB0aGUgb2NlYW4nKTtcbiAgICAgICAgZXhwZWN0KGltZykudG9IYXZlQXR0cmlidXRlKCdhbHQnLCAnU3Vuc2V0IG92ZXIgdGhlIG9jZWFuJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmFsbGJhY2sgdG8gY2FwdGlvbiBmb3IgYWx0IHRleHQgd2hlbiBhbHRfdGV4dCBub3QgcHJvdmlkZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwaG90b1dpdGhvdXRBbHQgPSB7XG4gICAgICAgIGlkOiAncGhvdG8tNCcsXG4gICAgICAgIHBob3RvX3VybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vcGhvdG80LmpwZycsXG4gICAgICAgIGNhcHRpb246ICdUZXN0IGNhcHRpb24nLFxuICAgICAgfTtcblxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHBob3RvV2l0aG91dEFsdCB9KSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPFBob3RvR2FsbGVyeSBwaG90b0lkcz17WydwaG90by00J119IC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGltZyA9IHNjcmVlbi5nZXRCeUFsdFRleHQoJ1Rlc3QgY2FwdGlvbicpO1xuICAgICAgICBleHBlY3QoaW1nKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInNyYyIsImFsdCIsImZpbGwiLCJjbGFzc05hbWUiLCJwcm9wcyIsImltZyIsImdsb2JhbCIsImZldGNoIiwiZm4iLCJtb2NrUGhvdG9zIiwiaWQiLCJwaG90b191cmwiLCJjYXB0aW9uIiwiYWx0X3RleHQiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwidXNlRmFrZVRpbWVycyIsImFmdGVyRWFjaCIsInJ1bk9ubHlQZW5kaW5nVGltZXJzIiwidXNlUmVhbFRpbWVycyIsIml0IiwibW9ja0ltcGxlbWVudGF0aW9uIiwiUHJvbWlzZSIsInJlbmRlciIsIlBob3RvR2FsbGVyeSIsInBob3RvSWRzIiwibG9hZGluZ1NrZWxldG9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZXhwZWN0IiwidG9CZUluVGhlRG9jdW1lbnQiLCJ0b0hhdmVDbGFzcyIsIm1vY2tSZWplY3RlZFZhbHVlIiwiRXJyb3IiLCJ3YWl0Rm9yIiwic2NyZWVuIiwiZ2V0QnlUZXh0IiwibW9ja1Jlc29sdmVkVmFsdWVPbmNlIiwib2siLCJqc29uIiwic3VjY2VzcyIsImRhdGEiLCJnZXRCeUFsdFRleHQiLCJxdWVyeUJ5QWx0VGV4dCIsIm5vdCIsInF1ZXJ5QnlSb2xlIiwidXJsIiwicGhvdG9JZCIsInNwbGl0IiwicG9wIiwicGhvdG8iLCJmaW5kIiwicCIsInJlc29sdmUiLCJkaXNwbGF5TW9kZSIsImdldEJ5TGFiZWxUZXh0IiwibmV4dEJ1dHRvbiIsImZpcmVFdmVudCIsImNsaWNrIiwicHJldkJ1dHRvbiIsImRvdHMiLCJnZXRBbGxCeUxhYmVsVGV4dCIsInRvSGF2ZUxlbmd0aCIsInRoaXJkRG90IiwiYWR2YW5jZVRpbWVyc0J5VGltZSIsImluZGljYXRvcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibGVuZ3RoIiwidG9CZSIsIm1vY2tSZXNvbHZlZFZhbHVlIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJ0b0hhdmVCZWVuQ2FsbGVkVGltZXMiLCJ0b0hhdmVBdHRyaWJ1dGUiLCJwaG90b1dpdGhvdXRBbHQiXSwibWFwcGluZ3MiOiI7QUFHQSwrQkFBK0I7QUFDL0JBLEtBQUtDLElBQUksQ0FBQyxjQUFjLElBQU8sQ0FBQTtRQUM3QkMsWUFBWTtRQUNaQyxTQUFTLENBQUMsRUFBRUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRUMsU0FBUyxFQUFFLEdBQUdDLE9BQVksR0FDcEQscURBQXFEOzBCQUNyRCxxQkFBQ0M7Z0JBQUlMLEtBQUtBO2dCQUFLQyxLQUFLQTtnQkFBS0UsV0FBV0E7Z0JBQVksR0FBR0MsS0FBSzs7SUFFNUQsQ0FBQTs7Ozs7dUJBVm1EOzhCQUN0QjtBQVc3QixhQUFhO0FBQ2JFLE9BQU9DLEtBQUssR0FBR1gsS0FBS1ksRUFBRTtBQUV0QixNQUFNQyxhQUFhO0lBQ2pCO1FBQ0VDLElBQUk7UUFDSkMsV0FBVztRQUNYQyxTQUFTO1FBQ1RDLFVBQVU7SUFDWjtJQUNBO1FBQ0VILElBQUk7UUFDSkMsV0FBVztRQUNYQyxTQUFTO1FBQ1RDLFVBQVU7SUFDWjtJQUNBO1FBQ0VILElBQUk7UUFDSkMsV0FBVztRQUNYQyxTQUFTO1FBQ1RDLFVBQVU7SUFDWjtDQUNEO0FBRURDLFNBQVMsZ0JBQWdCO0lBQ3ZCQyxXQUFXO1FBQ1RuQixLQUFLb0IsYUFBYTtRQUNsQnBCLEtBQUtxQixhQUFhO0lBQ3BCO0lBRUFDLFVBQVU7UUFDUnRCLEtBQUt1QixvQkFBb0I7UUFDekJ2QixLQUFLd0IsYUFBYTtJQUNwQjtJQUVBTixTQUFTLGlCQUFpQjtRQUN4Qk8sR0FBRyxzREFBc0Q7WUFDdERmLE9BQU9DLEtBQUssQ0FBZWUsa0JBQWtCLENBQzVDLElBQU0sSUFBSUMsUUFBUSxLQUFPLEdBQUcsaUJBQWlCOztZQUcvQ0MsSUFBQUEsYUFBTSxnQkFBQyxxQkFBQ0MsMEJBQVk7Z0JBQUNDLFVBQVU7b0JBQUM7aUJBQVU7O1lBRTFDLHNEQUFzRDtZQUN0RCxN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