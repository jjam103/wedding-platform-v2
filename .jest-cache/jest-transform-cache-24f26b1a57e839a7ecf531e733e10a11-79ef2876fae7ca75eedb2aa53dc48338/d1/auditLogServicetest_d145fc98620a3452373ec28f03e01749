6b66ba99789571a65256594314be5c0b
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _auditLogService = require("./auditLogService");
// Mock Supabase client
function createMockSupabaseClient() {
    const mockSelect = jest.fn().mockReturnThis();
    const mockInsert = jest.fn().mockReturnThis();
    const mockEq = jest.fn().mockReturnThis();
    const mockGte = jest.fn().mockReturnThis();
    const mockLte = jest.fn().mockReturnThis();
    const mockOrder = jest.fn().mockReturnThis();
    const mockRange = jest.fn().mockReturnThis();
    const mockSingle = jest.fn();
    const mockFrom = jest.fn().mockReturnValue({
        select: mockSelect,
        insert: mockInsert,
        eq: mockEq,
        gte: mockGte,
        lte: mockLte,
        order: mockOrder,
        range: mockRange,
        single: mockSingle
    });
    return {
        from: mockFrom,
        _mocks: {
            from: mockFrom,
            select: mockSelect,
            insert: mockInsert,
            eq: mockEq,
            gte: mockGte,
            lte: mockLte,
            order: mockOrder,
            range: mockRange,
            single: mockSingle
        }
    };
}
describe('auditLogService', ()=>{
    describe('create', ()=>{
        it('should create audit log with valid data', async ()=>{
            const mockSupabase = createMockSupabaseClient();
            const mockAuditLog = {
                id: 'log-123',
                user_id: 'user-456',
                user_email: 'admin@example.com',
                entity_type: 'guest',
                entity_id: 'guest-789',
                operation_type: 'create',
                old_data: null,
                new_data: {
                    first_name: 'John',
                    last_name: 'Doe'
                },
                ip_address: '192.168.1.1',
                user_agent: 'Mozilla/5.0',
                created_at: new Date().toISOString()
            };
            mockSupabase._mocks.single.mockResolvedValue({
                data: mockAuditLog,
                error: null
            });
            const result = await _auditLogService.auditLogService.create(mockSupabase, {
                user_id: 'user-456',
                user_email: 'admin@example.com',
                entity_type: 'guest',
                entity_id: 'guest-789',
                operation_type: 'create',
                new_data: {
                    first_name: 'John',
                    last_name: 'Doe'
                },
                ip_address: '192.168.1.1',
                user_agent: 'Mozilla/5.0'
            });
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.id).toBe('log-123');
                expect(result.data.entity_type).toBe('guest');
                expect(result.data.operation_type).toBe('create');
            }
        });
        it('should return VALIDATION_ERROR when required fields are missing', async ()=>{
            const mockSupabase = createMockSupabaseClient();
            const result = await _auditLogService.auditLogService.create(mockSupabase, {
                entity_type: '',
                entity_id: 'guest-789',
                operation_type: 'create'
            });
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
                expect(result.error.message).toContain('required fields');
            }
        });
        it('should return VALIDATION_ERROR for invalid operation_type', async ()=>{
            const mockSupabase = createMockSupabaseClient();
            const result = await _auditLogService.auditLogService.create(mockSupabase, {
                entity_type: 'guest',
                entity_id: 'guest-789',
                operation_type: 'invalid'
            });
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('VALIDATION_ERROR');
                expect(result.error.message).toContain('Invalid operation_type');
            }
        });
        it('should return DATABASE_ERROR when insert fails', async ()=>{
            const mockSupabase = createMockSupabaseClient();
            mockSupabase._mocks.single.mockResolvedValue({
                data: null,
                error: {
                    message: 'Database connection failed'
                }
            });
            const result = await _auditLogService.auditLogService.create(mockSupabase, {
                entity_type: 'guest',
                entity_id: 'guest-789',
                operation_type: 'create'
            });
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('DATABASE_ERROR');
            }
        });
    });
    describe('list', ()=>{
        it('should retrieve paginated audit logs', async ()=>{
            const mockSupabase = createMockSupabaseClient();
            const mockLogs = [
                {
                    id: 'log-1',
                    entity_type: 'guest',
                    operation_type: 'create',
                    created_at: new Date().toISOString()
                },
                {
                    id: 'log-2',
                    entity_type: 'event',
                    operation_type: 'update',
                    created_at: new Date().toISOString()
                }
            ];
            // Mock the chain to return data and count
            mockSupabase._mocks.range.mockResolvedValue({
                data: mockLogs,
                error: null,
                count: 2
            });
            const result = await _auditLogService.auditLogService.list(mockSupabase, {
                page: 1,
                page_size: 50
            });
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.logs).toHaveLength(2);
                expect(result.data.total).toBe(2);
                expect(result.data.page).toBe(1);
                expect(result.data.page_size).toBe(50);
            }
        });
        it('should apply filters correctly', async ()=>{
            const mockSupabase = createMockSupabaseClient();
            mockSupabase._mocks.range.mockResolvedValue({
                data: [],
                error: null,
                count: 0
            });
            await _auditLogService.auditLogService.list(mockSupabase, {
                entity_type: 'guest',
                operation_type: 'update',
                user_id: 'user-123'
            });
            expect(mockSupabase._mocks.eq).toHaveBeenCalledWith('entity_type', 'guest');
            expect(mockSupabase._mocks.eq).toHaveBeenCalledWith('operation_type', 'update');
            expect(mockSupabase._mocks.eq).toHaveBeenCalledWith('user_id', 'user-123');
        });
        it('should return DATABASE_ERROR when query fails', async ()=>{
            const mockSupabase = createMockSupabaseClient();
            mockSupabase._mocks.range.mockResolvedValue({
                data: null,
                error: {
                    message: 'Query failed'
                },
                count: null
            });
            const result = await _auditLogService.auditLogService.list(mockSupabase);
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('DATABASE_ERROR');
            }
        });
    });
    describe('get', ()=>{
        it('should retrieve single audit log by ID', async ()=>{
            const mockSupabase = createMockSupabaseClient();
            const mockLog = {
                id: 'log-123',
                entity_type: 'guest',
                operation_type: 'update',
                created_at: new Date().toISOString()
            };
            mockSupabase._mocks.single.mockResolvedValue({
                data: mockLog,
                error: null
            });
            const result = await _auditLogService.auditLogService.get(mockSupabase, 'log-123');
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.id).toBe('log-123');
            }
        });
        it('should return NOT_FOUND when audit log does not exist', async ()=>{
            const mockSupabase = createMockSupabaseClient();
            mockSupabase._mocks.single.mockResolvedValue({
                data: null,
                error: {
                    code: 'PGRST116',
                    message: 'Not found'
                }
            });
            const result = await _auditLogService.auditLogService.get(mockSupabase, 'nonexistent');
            expect(result.success).toBe(false);
            if (!result.success) {
                expect(result.error.code).toBe('NOT_FOUND');
            }
        });
    });
    describe('helper functions', ()=>{
        it('logCreate should create audit log for create operation', async ()=>{
            const mockSupabase = createMockSupabaseClient();
            mockSupabase._mocks.single.mockResolvedValue({
                data: {
                    id: 'log-123',
                    operation_type: 'create',
                    entity_type: 'guest',
                    entity_id: 'guest-456'
                },
                error: null
            });
            const result = await _auditLogService.auditLogService.logCreate(mockSupabase, 'guest', 'guest-456', {
                first_name: 'John'
            }, 'user-123', 'user@example.com');
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.operation_type).toBe('create');
            }
        });
        it('logUpdate should create audit log for update operation', async ()=>{
            const mockSupabase = createMockSupabaseClient();
            mockSupabase._mocks.single.mockResolvedValue({
                data: {
                    id: 'log-123',
                    operation_type: 'update',
                    entity_type: 'guest',
                    entity_id: 'guest-456'
                },
                error: null
            });
            const result = await _auditLogService.auditLogService.logUpdate(mockSupabase, 'guest', 'guest-456', {
                first_name: 'John'
            }, {
                first_name: 'Jane'
            }, 'user-123', 'user@example.com');
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.operation_type).toBe('update');
            }
        });
        it('logDelete should create audit log for delete operation', async ()=>{
            const mockSupabase = createMockSupabaseClient();
            mockSupabase._mocks.single.mockResolvedValue({
                data: {
                    id: 'log-123',
                    operation_type: 'delete',
                    entity_type: 'guest',
                    entity_id: 'guest-456'
                },
                error: null
            });
            const result = await _auditLogService.auditLogService.logDelete(mockSupabase, 'guest', 'guest-456', {
                first_name: 'John'
            }, 'user-123', 'user@example.com');
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.operation_type).toBe('delete');
            }
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvc2VydmljZXMvYXVkaXRMb2dTZXJ2aWNlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXVkaXRMb2dTZXJ2aWNlIH0gZnJvbSAnLi9hdWRpdExvZ1NlcnZpY2UnO1xuaW1wb3J0IHR5cGUgeyBTdXBhYmFzZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5cbi8vIE1vY2sgU3VwYWJhc2UgY2xpZW50XG5mdW5jdGlvbiBjcmVhdGVNb2NrU3VwYWJhc2VDbGllbnQoKSB7XG4gIGNvbnN0IG1vY2tTZWxlY3QgPSBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKTtcbiAgY29uc3QgbW9ja0luc2VydCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpO1xuICBjb25zdCBtb2NrRXEgPSBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKTtcbiAgY29uc3QgbW9ja0d0ZSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpO1xuICBjb25zdCBtb2NrTHRlID0gamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCk7XG4gIGNvbnN0IG1vY2tPcmRlciA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpO1xuICBjb25zdCBtb2NrUmFuZ2UgPSBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKTtcbiAgY29uc3QgbW9ja1NpbmdsZSA9IGplc3QuZm4oKTtcbiAgY29uc3QgbW9ja0Zyb20gPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICBzZWxlY3Q6IG1vY2tTZWxlY3QsXG4gICAgaW5zZXJ0OiBtb2NrSW5zZXJ0LFxuICAgIGVxOiBtb2NrRXEsXG4gICAgZ3RlOiBtb2NrR3RlLFxuICAgIGx0ZTogbW9ja0x0ZSxcbiAgICBvcmRlcjogbW9ja09yZGVyLFxuICAgIHJhbmdlOiBtb2NrUmFuZ2UsXG4gICAgc2luZ2xlOiBtb2NrU2luZ2xlLFxuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGZyb206IG1vY2tGcm9tLFxuICAgIF9tb2Nrczoge1xuICAgICAgZnJvbTogbW9ja0Zyb20sXG4gICAgICBzZWxlY3Q6IG1vY2tTZWxlY3QsXG4gICAgICBpbnNlcnQ6IG1vY2tJbnNlcnQsXG4gICAgICBlcTogbW9ja0VxLFxuICAgICAgZ3RlOiBtb2NrR3RlLFxuICAgICAgbHRlOiBtb2NrTHRlLFxuICAgICAgb3JkZXI6IG1vY2tPcmRlcixcbiAgICAgIHJhbmdlOiBtb2NrUmFuZ2UsXG4gICAgICBzaW5nbGU6IG1vY2tTaW5nbGUsXG4gICAgfSxcbiAgfSBhcyB1bmtub3duIGFzIFN1cGFiYXNlQ2xpZW50ICYgeyBfbW9ja3M6IGFueSB9O1xufVxuXG5kZXNjcmliZSgnYXVkaXRMb2dTZXJ2aWNlJywgKCkgPT4ge1xuICBkZXNjcmliZSgnY3JlYXRlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY3JlYXRlIGF1ZGl0IGxvZyB3aXRoIHZhbGlkIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrU3VwYWJhc2UgPSBjcmVhdGVNb2NrU3VwYWJhc2VDbGllbnQoKTtcbiAgICAgIGNvbnN0IG1vY2tBdWRpdExvZyA9IHtcbiAgICAgICAgaWQ6ICdsb2ctMTIzJyxcbiAgICAgICAgdXNlcl9pZDogJ3VzZXItNDU2JyxcbiAgICAgICAgdXNlcl9lbWFpbDogJ2FkbWluQGV4YW1wbGUuY29tJyxcbiAgICAgICAgZW50aXR5X3R5cGU6ICdndWVzdCcsXG4gICAgICAgIGVudGl0eV9pZDogJ2d1ZXN0LTc4OScsXG4gICAgICAgIG9wZXJhdGlvbl90eXBlOiAnY3JlYXRlJyxcbiAgICAgICAgb2xkX2RhdGE6IG51bGwsXG4gICAgICAgIG5ld19kYXRhOiB7IGZpcnN0X25hbWU6ICdKb2huJywgbGFzdF9uYW1lOiAnRG9lJyB9LFxuICAgICAgICBpcF9hZGRyZXNzOiAnMTkyLjE2OC4xLjEnLFxuICAgICAgICB1c2VyX2FnZW50OiAnTW96aWxsYS81LjAnLFxuICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB9O1xuXG4gICAgICBtb2NrU3VwYWJhc2UuX21vY2tzLnNpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG1vY2tBdWRpdExvZyxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGF1ZGl0TG9nU2VydmljZS5jcmVhdGUobW9ja1N1cGFiYXNlLCB7XG4gICAgICAgIHVzZXJfaWQ6ICd1c2VyLTQ1NicsXG4gICAgICAgIHVzZXJfZW1haWw6ICdhZG1pbkBleGFtcGxlLmNvbScsXG4gICAgICAgIGVudGl0eV90eXBlOiAnZ3Vlc3QnLFxuICAgICAgICBlbnRpdHlfaWQ6ICdndWVzdC03ODknLFxuICAgICAgICBvcGVyYXRpb25fdHlwZTogJ2NyZWF0ZScsXG4gICAgICAgIG5ld19kYXRhOiB7IGZpcnN0X25hbWU6ICdKb2huJywgbGFzdF9uYW1lOiAnRG9lJyB9LFxuICAgICAgICBpcF9hZGRyZXNzOiAnMTkyLjE2OC4xLjEnLFxuICAgICAgICB1c2VyX2FnZW50OiAnTW96aWxsYS81LjAnLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuaWQpLnRvQmUoJ2xvZy0xMjMnKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmVudGl0eV90eXBlKS50b0JlKCdndWVzdCcpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEub3BlcmF0aW9uX3R5cGUpLnRvQmUoJ2NyZWF0ZScpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiB3aGVuIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tTdXBhYmFzZSA9IGNyZWF0ZU1vY2tTdXBhYmFzZUNsaWVudCgpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhdWRpdExvZ1NlcnZpY2UuY3JlYXRlKG1vY2tTdXBhYmFzZSwge1xuICAgICAgICBlbnRpdHlfdHlwZTogJycsXG4gICAgICAgIGVudGl0eV9pZDogJ2d1ZXN0LTc4OScsXG4gICAgICAgIG9wZXJhdGlvbl90eXBlOiAnY3JlYXRlJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ3JlcXVpcmVkIGZpZWxkcycpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVkFMSURBVElPTl9FUlJPUiBmb3IgaW52YWxpZCBvcGVyYXRpb25fdHlwZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tTdXBhYmFzZSA9IGNyZWF0ZU1vY2tTdXBhYmFzZUNsaWVudCgpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhdWRpdExvZ1NlcnZpY2UuY3JlYXRlKG1vY2tTdXBhYmFzZSwge1xuICAgICAgICBlbnRpdHlfdHlwZTogJ2d1ZXN0JyxcbiAgICAgICAgZW50aXR5X2lkOiAnZ3Vlc3QtNzg5JyxcbiAgICAgICAgb3BlcmF0aW9uX3R5cGU6ICdpbnZhbGlkJyBhcyBhbnksXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdJbnZhbGlkIG9wZXJhdGlvbl90eXBlJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBEQVRBQkFTRV9FUlJPUiB3aGVuIGluc2VydCBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tTdXBhYmFzZSA9IGNyZWF0ZU1vY2tTdXBhYmFzZUNsaWVudCgpO1xuXG4gICAgICBtb2NrU3VwYWJhc2UuX21vY2tzLnNpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcgfSxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXVkaXRMb2dTZXJ2aWNlLmNyZWF0ZShtb2NrU3VwYWJhc2UsIHtcbiAgICAgICAgZW50aXR5X3R5cGU6ICdndWVzdCcsXG4gICAgICAgIGVudGl0eV9pZDogJ2d1ZXN0LTc4OScsXG4gICAgICAgIG9wZXJhdGlvbl90eXBlOiAnY3JlYXRlJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmNvZGUpLnRvQmUoJ0RBVEFCQVNFX0VSUk9SJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsaXN0JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0cmlldmUgcGFnaW5hdGVkIGF1ZGl0IGxvZ3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrU3VwYWJhc2UgPSBjcmVhdGVNb2NrU3VwYWJhc2VDbGllbnQoKTtcbiAgICAgIGNvbnN0IG1vY2tMb2dzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdsb2ctMScsXG4gICAgICAgICAgZW50aXR5X3R5cGU6ICdndWVzdCcsXG4gICAgICAgICAgb3BlcmF0aW9uX3R5cGU6ICdjcmVhdGUnLFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnbG9nLTInLFxuICAgICAgICAgIGVudGl0eV90eXBlOiAnZXZlbnQnLFxuICAgICAgICAgIG9wZXJhdGlvbl90eXBlOiAndXBkYXRlJyxcbiAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICAvLyBNb2NrIHRoZSBjaGFpbiB0byByZXR1cm4gZGF0YSBhbmQgY291bnRcbiAgICAgIG1vY2tTdXBhYmFzZS5fbW9ja3MucmFuZ2UubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBtb2NrTG9ncyxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIGNvdW50OiAyLFxuICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhdWRpdExvZ1NlcnZpY2UubGlzdChtb2NrU3VwYWJhc2UsIHtcbiAgICAgICAgcGFnZTogMSxcbiAgICAgICAgcGFnZV9zaXplOiA1MCxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmxvZ3MpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnRvdGFsKS50b0JlKDIpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEucGFnZSkudG9CZSgxKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnBhZ2Vfc2l6ZSkudG9CZSg1MCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFwcGx5IGZpbHRlcnMgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1N1cGFiYXNlID0gY3JlYXRlTW9ja1N1cGFiYXNlQ2xpZW50KCk7XG5cbiAgICAgIG1vY2tTdXBhYmFzZS5fbW9ja3MucmFuZ2UubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIGNvdW50OiAwLFxuICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICBhd2FpdCBhdWRpdExvZ1NlcnZpY2UubGlzdChtb2NrU3VwYWJhc2UsIHtcbiAgICAgICAgZW50aXR5X3R5cGU6ICdndWVzdCcsXG4gICAgICAgIG9wZXJhdGlvbl90eXBlOiAndXBkYXRlJyxcbiAgICAgICAgdXNlcl9pZDogJ3VzZXItMTIzJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1N1cGFiYXNlLl9tb2Nrcy5lcSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2VudGl0eV90eXBlJywgJ2d1ZXN0Jyk7XG4gICAgICBleHBlY3QobW9ja1N1cGFiYXNlLl9tb2Nrcy5lcSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ29wZXJhdGlvbl90eXBlJywgJ3VwZGF0ZScpO1xuICAgICAgZXhwZWN0KG1vY2tTdXBhYmFzZS5fbW9ja3MuZXEpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd1c2VyX2lkJywgJ3VzZXItMTIzJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBEQVRBQkFTRV9FUlJPUiB3aGVuIHF1ZXJ5IGZhaWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1N1cGFiYXNlID0gY3JlYXRlTW9ja1N1cGFiYXNlQ2xpZW50KCk7XG5cbiAgICAgIG1vY2tTdXBhYmFzZS5fbW9ja3MucmFuZ2UubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBlcnJvcjogeyBtZXNzYWdlOiAnUXVlcnkgZmFpbGVkJyB9LFxuICAgICAgICBjb3VudDogbnVsbCxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXVkaXRMb2dTZXJ2aWNlLmxpc3QobW9ja1N1cGFiYXNlKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdEQVRBQkFTRV9FUlJPUicpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0cmlldmUgc2luZ2xlIGF1ZGl0IGxvZyBieSBJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tTdXBhYmFzZSA9IGNyZWF0ZU1vY2tTdXBhYmFzZUNsaWVudCgpO1xuICAgICAgY29uc3QgbW9ja0xvZyA9IHtcbiAgICAgICAgaWQ6ICdsb2ctMTIzJyxcbiAgICAgICAgZW50aXR5X3R5cGU6ICdndWVzdCcsXG4gICAgICAgIG9wZXJhdGlvbl90eXBlOiAndXBkYXRlJyxcbiAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgfTtcblxuICAgICAgbW9ja1N1cGFiYXNlLl9tb2Nrcy5zaW5nbGUubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiBtb2NrTG9nLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXVkaXRMb2dTZXJ2aWNlLmdldChtb2NrU3VwYWJhc2UsICdsb2ctMTIzJyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEuaWQpLnRvQmUoJ2xvZy0xMjMnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIE5PVF9GT1VORCB3aGVuIGF1ZGl0IGxvZyBkb2VzIG5vdCBleGlzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tTdXBhYmFzZSA9IGNyZWF0ZU1vY2tTdXBhYmFzZUNsaWVudCgpO1xuXG4gICAgICBtb2NrU3VwYWJhc2UuX21vY2tzLnNpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGVycm9yOiB7IGNvZGU6ICdQR1JTVDExNicsIG1lc3NhZ2U6ICdOb3QgZm91bmQnIH0sXG4gICAgICB9IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGF1ZGl0TG9nU2VydmljZS5nZXQobW9ja1N1cGFiYXNlLCAnbm9uZXhpc3RlbnQnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5jb2RlKS50b0JlKCdOT1RfRk9VTkQnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2hlbHBlciBmdW5jdGlvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ2xvZ0NyZWF0ZSBzaG91bGQgY3JlYXRlIGF1ZGl0IGxvZyBmb3IgY3JlYXRlIG9wZXJhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tTdXBhYmFzZSA9IGNyZWF0ZU1vY2tTdXBhYmFzZUNsaWVudCgpO1xuXG4gICAgICBtb2NrU3VwYWJhc2UuX21vY2tzLnNpbmdsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBpZDogJ2xvZy0xMjMnLFxuICAgICAgICAgIG9wZXJhdGlvbl90eXBlOiAnY3JlYXRlJyxcbiAgICAgICAgICBlbnRpdHlfdHlwZTogJ2d1ZXN0JyxcbiAgICAgICAgICBlbnRpdHlfaWQ6ICdndWVzdC00NTYnLFxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXVkaXRMb2dTZXJ2aWNlLmxvZ0NyZWF0ZShcbiAgICAgICAgbW9ja1N1cGFiYXNlLFxuICAgICAgICAnZ3Vlc3QnLFxuICAgICAgICAnZ3Vlc3QtNDU2JyxcbiAgICAgICAgeyBmaXJzdF9uYW1lOiAnSm9obicgfSxcbiAgICAgICAgJ3VzZXItMTIzJyxcbiAgICAgICAgJ3VzZXJAZXhhbXBsZS5jb20nXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLm9wZXJhdGlvbl90eXBlKS50b0JlKCdjcmVhdGUnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdsb2dVcGRhdGUgc2hvdWxkIGNyZWF0ZSBhdWRpdCBsb2cgZm9yIHVwZGF0ZSBvcGVyYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrU3VwYWJhc2UgPSBjcmVhdGVNb2NrU3VwYWJhc2VDbGllbnQoKTtcblxuICAgICAgbW9ja1N1cGFiYXNlLl9tb2Nrcy5zaW5nbGUubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgaWQ6ICdsb2ctMTIzJyxcbiAgICAgICAgICBvcGVyYXRpb25fdHlwZTogJ3VwZGF0ZScsXG4gICAgICAgICAgZW50aXR5X3R5cGU6ICdndWVzdCcsXG4gICAgICAgICAgZW50aXR5X2lkOiAnZ3Vlc3QtNDU2JyxcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGF1ZGl0TG9nU2VydmljZS5sb2dVcGRhdGUoXG4gICAgICAgIG1vY2tTdXBhYmFzZSxcbiAgICAgICAgJ2d1ZXN0JyxcbiAgICAgICAgJ2d1ZXN0LTQ1NicsXG4gICAgICAgIHsgZmlyc3RfbmFtZTogJ0pvaG4nIH0sXG4gICAgICAgIHsgZmlyc3RfbmFtZTogJ0phbmUnIH0sXG4gICAgICAgICd1c2VyLTEyMycsXG4gICAgICAgICd1c2VyQGV4YW1wbGUuY29tJ1xuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5vcGVyYXRpb25fdHlwZSkudG9CZSgndXBkYXRlJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnbG9nRGVsZXRlIHNob3VsZCBjcmVhdGUgYXVkaXQgbG9nIGZvciBkZWxldGUgb3BlcmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1N1cGFiYXNlID0gY3JlYXRlTW9ja1N1cGFiYXNlQ2xpZW50KCk7XG5cbiAgICAgIG1vY2tTdXBhYmFzZS5fbW9ja3Muc2luZ2xlLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGlkOiAnbG9nLTEyMycsXG4gICAgICAgICAgb3BlcmF0aW9uX3R5cGU6ICdkZWxldGUnLFxuICAgICAgICAgIGVudGl0eV90eXBlOiAnZ3Vlc3QnLFxuICAgICAgICAgIGVudGl0eV9pZDogJ2d1ZXN0LTQ1NicsXG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhdWRpdExvZ1NlcnZpY2UubG9nRGVsZXRlKFxuICAgICAgICBtb2NrU3VwYWJhc2UsXG4gICAgICAgICdndWVzdCcsXG4gICAgICAgICdndWVzdC00NTYnLFxuICAgICAgICB7IGZpcnN0X25hbWU6ICdKb2huJyB9LFxuICAgICAgICAndXNlci0xMjMnLFxuICAgICAgICAndXNlckBleGFtcGxlLmNvbSdcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEub3BlcmF0aW9uX3R5cGUpLnRvQmUoJ2RlbGV0ZScpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImNyZWF0ZU1vY2tTdXBhYmFzZUNsaWVudCIsIm1vY2tTZWxlY3QiLCJqZXN0IiwiZm4iLCJtb2NrUmV0dXJuVGhpcyIsIm1vY2tJbnNlcnQiLCJtb2NrRXEiLCJtb2NrR3RlIiwibW9ja0x0ZSIsIm1vY2tPcmRlciIsIm1vY2tSYW5nZSIsIm1vY2tTaW5nbGUiLCJtb2NrRnJvbSIsIm1vY2tSZXR1cm5WYWx1ZSIsInNlbGVjdCIsImluc2VydCIsImVxIiwiZ3RlIiwibHRlIiwib3JkZXIiLCJyYW5nZSIsInNpbmdsZSIsImZyb20iLCJfbW9ja3MiLCJkZXNjcmliZSIsIml0IiwibW9ja1N1cGFiYXNlIiwibW9ja0F1ZGl0TG9nIiwiaWQiLCJ1c2VyX2lkIiwidXNlcl9lbWFpbCIsImVudGl0eV90eXBlIiwiZW50aXR5X2lkIiwib3BlcmF0aW9uX3R5cGUiLCJvbGRfZGF0YSIsIm5ld19kYXRhIiwiZmlyc3RfbmFtZSIsImxhc3RfbmFtZSIsImlwX2FkZHJlc3MiLCJ1c2VyX2FnZW50IiwiY3JlYXRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiZGF0YSIsImVycm9yIiwicmVzdWx0IiwiYXVkaXRMb2dTZXJ2aWNlIiwiY3JlYXRlIiwiZXhwZWN0Iiwic3VjY2VzcyIsInRvQmUiLCJjb2RlIiwibWVzc2FnZSIsInRvQ29udGFpbiIsIm1vY2tMb2dzIiwiY291bnQiLCJsaXN0IiwicGFnZSIsInBhZ2Vfc2l6ZSIsImxvZ3MiLCJ0b0hhdmVMZW5ndGgiLCJ0b3RhbCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwibW9ja0xvZyIsImdldCIsImxvZ0NyZWF0ZSIsImxvZ1VwZGF0ZSIsImxvZ0RlbGV0ZSJdLCJtYXBwaW5ncyI6Ijs7OztpQ0FBZ0M7QUFHaEMsdUJBQXVCO0FBQ3ZCLFNBQVNBO0lBQ1AsTUFBTUMsYUFBYUMsS0FBS0MsRUFBRSxHQUFHQyxjQUFjO0lBQzNDLE1BQU1DLGFBQWFILEtBQUtDLEVBQUUsR0FBR0MsY0FBYztJQUMzQyxNQUFNRSxTQUFTSixLQUFLQyxFQUFFLEdBQUdDLGNBQWM7SUFDdkMsTUFBTUcsVUFBVUwsS0FBS0MsRUFBRSxHQUFHQyxjQUFjO0lBQ3hDLE1BQU1JLFVBQVVOLEtBQUtDLEVBQUUsR0FBR0MsY0FBYztJQUN4QyxNQUFNSyxZQUFZUCxLQUFLQyxFQUFFLEdBQUdDLGNBQWM7SUFDMUMsTUFBTU0sWUFBWVIsS0FBS0MsRUFBRSxHQUFHQyxjQUFjO0lBQzFDLE1BQU1PLGFBQWFULEtBQUtDLEVBQUU7SUFDMUIsTUFBTVMsV0FBV1YsS0FBS0MsRUFBRSxHQUFHVSxlQUFlLENBQUM7UUFDekNDLFFBQVFiO1FBQ1JjLFFBQVFWO1FBQ1JXLElBQUlWO1FBQ0pXLEtBQUtWO1FBQ0xXLEtBQUtWO1FBQ0xXLE9BQU9WO1FBQ1BXLE9BQU9WO1FBQ1BXLFFBQVFWO0lBQ1Y7SUFFQSxPQUFPO1FBQ0xXLE1BQU1WO1FBQ05XLFFBQVE7WUFDTkQsTUFBTVY7WUFDTkUsUUFBUWI7WUFDUmMsUUFBUVY7WUFDUlcsSUFBSVY7WUFDSlcsS0FBS1Y7WUFDTFcsS0FBS1Y7WUFDTFcsT0FBT1Y7WUFDUFcsT0FBT1Y7WUFDUFcsUUFBUVY7UUFDVjtJQUNGO0FBQ0Y7QUFFQWEsU0FBUyxtQkFBbUI7SUFDMUJBLFNBQVMsVUFBVTtRQUNqQkMsR0FBRywyQ0FBMkM7WUFDNUMsTUFBTUMsZUFBZTFCO1lBQ3JCLE1BQU0yQixlQUFlO2dCQUNu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