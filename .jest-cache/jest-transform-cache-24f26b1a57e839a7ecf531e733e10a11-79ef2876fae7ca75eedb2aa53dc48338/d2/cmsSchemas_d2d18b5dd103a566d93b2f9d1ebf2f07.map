{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/schemas/cmsSchemas.ts"],"sourcesContent":["import { z } from 'zod';\n\n// Content type schemas\nexport const richTextContentSchema = z.object({\n  html: z.string(),\n});\n\nexport const photoGalleryContentSchema = z.object({\n  photo_ids: z.array(z.string().uuid()),\n  display_mode: z.enum(['gallery', 'carousel', 'loop']),\n  autoplaySpeed: z.number().int().min(1000).max(10000).optional(),\n  showCaptions: z.boolean().optional(),\n});\n\nexport const referenceSchema = z.object({\n  type: z.enum(['activity', 'event', 'accommodation', 'location', 'content_page']),\n  id: z.string().uuid(),\n  name: z.string().optional(),\n  label: z.string().optional(),\n  description: z.string().optional(),\n  metadata: z.record(z.any()).optional(),\n});\n\nexport const referencesContentSchema = z.object({\n  references: z.array(referenceSchema),\n});\n\n// Column schema with discriminated union for better validation\nexport const columnDataSchema = z.discriminatedUnion('content_type', [\n  z.object({\n    column_number: z.union([z.literal(1), z.literal(2)]),\n    content_type: z.literal('rich_text'),\n    content_data: richTextContentSchema,\n  }),\n  z.object({\n    column_number: z.union([z.literal(1), z.literal(2)]),\n    content_type: z.literal('photo_gallery'),\n    content_data: photoGalleryContentSchema,\n  }),\n  z.object({\n    column_number: z.union([z.literal(1), z.literal(2)]),\n    content_type: z.literal('references'),\n    content_data: referencesContentSchema,\n  }),\n]);\n\n// Section schemas\nexport const createSectionSchema = z.object({\n  page_type: z.enum(['activity', 'event', 'accommodation', 'room_type', 'custom']),\n  page_id: z.string().min(1),\n  title: z.string().max(200).nullable().optional(),\n  display_order: z.number().int().min(0),\n  columns: z.array(columnDataSchema).min(1).max(2),\n});\n\nexport const updateSectionSchema = z.object({\n  page_type: z.enum(['activity', 'event', 'accommodation', 'room_type', 'custom']).optional(),\n  page_id: z.string().min(1).optional(),\n  title: z.string().max(200).nullable().optional(),\n  display_order: z.number().int().min(0).optional(),\n  columns: z.array(columnDataSchema).min(1).max(2).optional(),\n});\n\n// Content pages schemas\nexport const createContentPageSchema = z.object({\n  title: z.string().min(1).max(200),\n  slug: z.string().min(1).regex(/^[a-z0-9-]+$/, 'Slug must contain only lowercase letters, numbers, and hyphens').optional(),\n  status: z.enum(['draft', 'published']).default('draft'),\n});\n\nexport const updateContentPageSchema = createContentPageSchema.partial();\n\n// Gallery settings schemas\nexport const createGallerySettingsSchema = z.object({\n  page_type: z.enum(['activity', 'event', 'accommodation', 'room_type', 'custom', 'memory']),\n  page_id: z.string().min(1),\n  display_mode: z.enum(['gallery', 'carousel', 'loop']).default('gallery'),\n  photos_per_row: z.number().int().min(1).max(6).optional(),\n  show_captions: z.boolean().default(true),\n  autoplay_interval: z.number().int().min(1000).optional(),\n  transition_effect: z.string().optional(),\n});\n\nexport const updateGallerySettingsSchema = createGallerySettingsSchema.partial().extend({\n  page_type: z.enum(['activity', 'event', 'accommodation', 'room_type', 'custom', 'memory']).optional(),\n  page_id: z.string().min(1).optional(),\n});\n\n// Type exports\nexport type RichTextContent = z.infer<typeof richTextContentSchema>;\nexport type PhotoGalleryContent = z.infer<typeof photoGalleryContentSchema>;\nexport type Reference = z.infer<typeof referenceSchema>;\nexport type ReferencesContent = z.infer<typeof referencesContentSchema>;\nexport type ColumnData = z.infer<typeof columnDataSchema>;\nexport type CreateSectionDTO = z.infer<typeof createSectionSchema>;\nexport type UpdateSectionDTO = z.infer<typeof updateSectionSchema>;\nexport type CreateContentPageDTO = z.infer<typeof createContentPageSchema>;\nexport type UpdateContentPageDTO = z.infer<typeof updateContentPageSchema>;\nexport type CreateGallerySettingsDTO = z.infer<typeof createGallerySettingsSchema>;\nexport type UpdateGallerySettingsDTO = z.infer<typeof updateGallerySettingsSchema>;\n\n// Database entity types\nexport interface ContentPage {\n  id: string;\n  slug: string;\n  title: string;\n  status: 'draft' | 'published';\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface Section {\n  id: string;\n  page_type: 'activity' | 'event' | 'accommodation' | 'room_type' | 'custom';\n  page_id: string;\n  title?: string;\n  display_order: number;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface Column {\n  id: string;\n  section_id: string;\n  column_number: 1 | 2;\n  content_type: 'rich_text' | 'photo_gallery' | 'references';\n  content_data: RichTextContent | PhotoGalleryContent | ReferencesContent;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface GallerySettings {\n  id: string;\n  page_type: 'activity' | 'event' | 'accommodation' | 'room_type' | 'custom' | 'memory';\n  page_id: string;\n  display_mode: 'gallery' | 'carousel' | 'loop';\n  photos_per_row?: number;\n  show_captions: boolean;\n  autoplay_interval?: number;\n  transition_effect?: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface ContentVersion {\n  id: string;\n  page_type: 'activity' | 'event' | 'accommodation' | 'room_type' | 'custom';\n  page_id: string;\n  created_by: string | null;\n  sections_snapshot: any;\n  created_at: string;\n}\n\n// Validation result types\nexport interface ValidationResult {\n  valid: boolean;\n  brokenReferences: Reference[];\n  circularReferences: Reference[];\n}\n"],"names":["columnDataSchema","createContentPageSchema","createGallerySettingsSchema","createSectionSchema","photoGalleryContentSchema","referenceSchema","referencesContentSchema","richTextContentSchema","updateContentPageSchema","updateGallerySettingsSchema","updateSectionSchema","z","object","html","string","photo_ids","array","uuid","display_mode","enum","autoplaySpeed","number","int","min","max","optional","showCaptions","boolean","type","id","name","label","description","metadata","record","any","references","discriminatedUnion","column_number","union","literal","content_type","content_data","page_type","page_id","title","nullable","display_order","columns","slug","regex","status","default","partial","photos_per_row","show_captions","autoplay_interval","transition_effect","extend"],"mappings":"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"}