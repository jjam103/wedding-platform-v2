8649ca4e1147d364b1f89351ecbb6baf
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "POST", {
    enumerable: true,
    get: function() {
        return POST;
    }
});
const _server = require("next/server");
const _headers = require("next/headers");
const _supabase = require("../../../../../lib/supabase");
const _zod = require("zod");
const _sanitization = require("../../../../../utils/sanitization");
/**
 * Email Matching Authentication API Route
 * 
 * Authenticates guests by matching their login email to their guest record email.
 * Creates a guest session on successful match and sets an HTTP-only session cookie.
 * 
 * Requirements: 5.2, 22.4
 * Task: 5.1
 */ const emailMatchSchema = _zod.z.object({
    email: _zod.z.string().email('Invalid email format')
});
async function POST(request) {
    try {
        // 1. Parse and validate request body
        const body = await request.json();
        const validation = emailMatchSchema.safeParse(body);
        if (!validation.success) {
            return _server.NextResponse.json({
                success: false,
                error: {
                    code: 'VALIDATION_ERROR',
                    message: 'Invalid email format',
                    details: validation.error.issues
                }
            }, {
                status: 400
            });
        }
        // 2. Sanitize email input
        const email = (0, _sanitization.sanitizeInput)(validation.data.email.toLowerCase());
        // 3. Create Supabase client
        const supabase = (0, _supabase.createSupabaseClient)();
        // 4. Find guest by email with email_matching auth method
        const { data: guest, error: guestError } = await supabase.from('guests').select('id, email, group_id, first_name, last_name, auth_method').eq('email', email).eq('auth_method', 'email_matching').single();
        if (guestError || !guest) {
            return _server.NextResponse.json({
                success: false,
                error: {
                    code: 'NOT_FOUND',
                    message: 'Email not found or not configured for email matching authentication'
                }
            }, {
                status: 404
            });
        }
        // 5. Generate session token (32 bytes)
        const sessionToken = Array.from(crypto.getRandomValues(new Uint8Array(32))).map((b)=>b.toString(16).padStart(2, '0')).join('');
        // 6. Create session record in database
        const expiresAt = new Date(Date.now() + 24 * 60 * 60 * 1000); // 24 hours
        const { data: session, error: sessionError } = await supabase.from('guest_sessions').insert({
            guest_id: guest.id,
            token: sessionToken,
            expires_at: expiresAt.toISOString(),
            ip_address: request.headers.get('x-forwarded-for') || request.headers.get('x-real-ip') || 'unknown',
            user_agent: request.headers.get('user-agent') || 'unknown'
        }).select().single();
        if (sessionError || !session) {
            console.error('Failed to create guest session:', sessionError);
            return _server.NextResponse.json({
                success: false,
                error: {
                    code: 'SESSION_ERROR',
                    message: 'Failed to create session'
                }
            }, {
                status: 500
            });
        }
        // 7. Set HTTP-only session cookie
        const cookieStore = await (0, _headers.cookies)();
        cookieStore.set('guest_session', sessionToken, {
            httpOnly: true,
            secure: process.env.NODE_ENV === 'production',
            sameSite: 'lax',
            maxAge: 60 * 60 * 24,
            path: '/'
        });
        // 8. Log authentication event
        await supabase.from('audit_logs').insert({
            action: 'guest_login',
            entity_type: 'guest',
            entity_id: guest.id,
            details: {
                auth_method: 'email_matching',
                email: guest.email,
                ip_address: request.headers.get('x-forwarded-for') || request.headers.get('x-real-ip') || 'unknown'
            }
        });
        // 9. Return success response
        return _server.NextResponse.json({
            success: true,
            data: {
                guestId: guest.id,
                groupId: guest.group_id,
                firstName: guest.first_name,
                lastName: guest.last_name
            }
        }, {
            status: 200
        });
    } catch (error) {
        console.error('Email matching authentication error:', error);
        return _server.NextResponse.json({
            success: false,
            error: {
                code: 'UNKNOWN_ERROR',
                message: error instanceof Error ? error.message : 'Unknown error occurred'
            }
        }, {
            status: 500
        });
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FwaS9hdXRoL2d1ZXN0L2VtYWlsLW1hdGNoL3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnO1xuaW1wb3J0IHsgY3JlYXRlU3VwYWJhc2VDbGllbnQgfSBmcm9tICdAL2xpYi9zdXBhYmFzZSc7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7IHNhbml0aXplSW5wdXQgfSBmcm9tICdAL3V0aWxzL3Nhbml0aXphdGlvbic7XG5cbi8qKlxuICogRW1haWwgTWF0Y2hpbmcgQXV0aGVudGljYXRpb24gQVBJIFJvdXRlXG4gKiBcbiAqIEF1dGhlbnRpY2F0ZXMgZ3Vlc3RzIGJ5IG1hdGNoaW5nIHRoZWlyIGxvZ2luIGVtYWlsIHRvIHRoZWlyIGd1ZXN0IHJlY29yZCBlbWFpbC5cbiAqIENyZWF0ZXMgYSBndWVzdCBzZXNzaW9uIG9uIHN1Y2Nlc3NmdWwgbWF0Y2ggYW5kIHNldHMgYW4gSFRUUC1vbmx5IHNlc3Npb24gY29va2llLlxuICogXG4gKiBSZXF1aXJlbWVudHM6IDUuMiwgMjIuNFxuICogVGFzazogNS4xXG4gKi9cblxuY29uc3QgZW1haWxNYXRjaFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgZW1haWw6IHouc3RyaW5nKCkuZW1haWwoJ0ludmFsaWQgZW1haWwgZm9ybWF0JyksXG59KTtcblxuLyoqXG4gKiBQT1NUIC9hcGkvYXV0aC9ndWVzdC9lbWFpbC1tYXRjaFxuICogXG4gKiBBdXRoZW50aWNhdGVzIGEgZ3Vlc3QgdXNpbmcgZW1haWwgbWF0Y2hpbmcuXG4gKiBcbiAqIEBwYXJhbSByZXF1ZXN0IC0gUmVxdWVzdCBjb250YWluaW5nIGVtYWlsIGluIGJvZHlcbiAqIEByZXR1cm5zIFN1Y2Nlc3MgcmVzcG9uc2Ugd2l0aCBndWVzdCBJRCBhbmQgZ3JvdXAgSUQsIG9yIGVycm9yIHJlc3BvbnNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyAxLiBQYXJzZSBhbmQgdmFsaWRhdGUgcmVxdWVzdCBib2R5XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnN0IHZhbGlkYXRpb24gPSBlbWFpbE1hdGNoU2NoZW1hLnNhZmVQYXJzZShib2R5KTtcbiAgICBcbiAgICBpZiAoIXZhbGlkYXRpb24uc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgIGNvZGU6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGVtYWlsIGZvcm1hdCcsXG4gICAgICAgICAgICBkZXRhaWxzOiB2YWxpZGF0aW9uLmVycm9yLmlzc3VlcyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIC8vIDIuIFNhbml0aXplIGVtYWlsIGlucHV0XG4gICAgY29uc3QgZW1haWwgPSBzYW5pdGl6ZUlucHV0KHZhbGlkYXRpb24uZGF0YS5lbWFpbC50b0xvd2VyQ2FzZSgpKTtcbiAgICBcbiAgICAvLyAzLiBDcmVhdGUgU3VwYWJhc2UgY2xpZW50XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVTdXBhYmFzZUNsaWVudCgpO1xuICAgIFxuICAgIC8vIDQuIEZpbmQgZ3Vlc3QgYnkgZW1haWwgd2l0aCBlbWFpbF9tYXRjaGluZyBhdXRoIG1ldGhvZFxuICAgIGNvbnN0IHsgZGF0YTogZ3Vlc3QsIGVycm9yOiBndWVzdEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2d1ZXN0cycpXG4gICAgICAuc2VsZWN0KCdpZCwgZW1haWwsIGdyb3VwX2lkLCBmaXJzdF9uYW1lLCBsYXN0X25hbWUsIGF1dGhfbWV0aG9kJylcbiAgICAgIC5lcSgnZW1haWwnLCBlbWFpbClcbiAgICAgIC5lcSgnYXV0aF9tZXRob2QnLCAnZW1haWxfbWF0Y2hpbmcnKVxuICAgICAgLnNpbmdsZSgpO1xuICAgIFxuICAgIGlmIChndWVzdEVycm9yIHx8ICFndWVzdCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgIGNvZGU6ICdOT1RfRk9VTkQnLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0VtYWlsIG5vdCBmb3VuZCBvciBub3QgY29uZmlndXJlZCBmb3IgZW1haWwgbWF0Y2hpbmcgYXV0aGVudGljYXRpb24nLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxuICAgICAgKTtcbiAgICB9XG4gICAgXG4gICAgLy8gNS4gR2VuZXJhdGUgc2Vzc2lvbiB0b2tlbiAoMzIgYnl0ZXMpXG4gICAgY29uc3Qgc2Vzc2lvblRva2VuID0gQXJyYXkuZnJvbShjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDMyKSkpXG4gICAgICAubWFwKGIgPT4gYi50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKSlcbiAgICAgIC5qb2luKCcnKTtcbiAgICBcbiAgICAvLyA2LiBDcmVhdGUgc2Vzc2lvbiByZWNvcmQgaW4gZGF0YWJhc2VcbiAgICBjb25zdCBleHBpcmVzQXQgPSBuZXcgRGF0ZShEYXRlLm5vdygpICsgMjQgKiA2MCAqIDYwICogMTAwMCk7IC8vIDI0IGhvdXJzXG4gICAgXG4gICAgY29uc3QgeyBkYXRhOiBzZXNzaW9uLCBlcnJvcjogc2Vzc2lvbkVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2d1ZXN0X3Nlc3Npb25zJylcbiAgICAgIC5pbnNlcnQoe1xuICAgICAgICBndWVzdF9pZDogZ3Vlc3QuaWQsXG4gICAgICAgIHRva2VuOiBzZXNzaW9uVG9rZW4sXG4gICAgICAgIGV4cGlyZXNfYXQ6IGV4cGlyZXNBdC50b0lTT1N0cmluZygpLFxuICAgICAgICBpcF9hZGRyZXNzOiByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LWZvcndhcmRlZC1mb3InKSB8fCByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LXJlYWwtaXAnKSB8fCAndW5rbm93bicsXG4gICAgICAgIHVzZXJfYWdlbnQ6IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3VzZXItYWdlbnQnKSB8fCAndW5rbm93bicsXG4gICAgICB9KVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgXG4gICAgaWYgKHNlc3Npb25FcnJvciB8fCAhc2Vzc2lvbikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBndWVzdCBzZXNzaW9uOicsIHNlc3Npb25FcnJvcik7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgY29kZTogJ1NFU1NJT05fRVJST1InLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBjcmVhdGUgc2Vzc2lvbicsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICAvLyA3LiBTZXQgSFRUUC1vbmx5IHNlc3Npb24gY29va2llXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XG4gICAgY29va2llU3RvcmUuc2V0KCdndWVzdF9zZXNzaW9uJywgc2Vzc2lvblRva2VuLCB7XG4gICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcbiAgICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICAgIG1heEFnZTogNjAgKiA2MCAqIDI0LCAvLyAyNCBob3Vyc1xuICAgICAgcGF0aDogJy8nLFxuICAgIH0pO1xuICAgIFxuICAgIC8vIDguIExvZyBhdXRoZW50aWNhdGlvbiBldmVudFxuICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oJ2F1ZGl0X2xvZ3MnKS5pbnNlcnQoe1xuICAgICAgYWN0aW9uOiAnZ3Vlc3RfbG9naW4nLFxuICAgICAgZW50aXR5X3R5cGU6ICdndWVzdCcsXG4gICAgICBlbnRpdHlfaWQ6IGd1ZXN0LmlkLFxuICAgICAgZGV0YWlsczoge1xuICAgICAgICBhdXRoX21ldGhvZDogJ2VtYWlsX21hdGNoaW5nJyxcbiAgICAgICAgZW1haWw6IGd1ZXN0LmVtYWlsLFxuICAgICAgICBpcF9hZGRyZXNzOiByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LWZvcndhcmRlZC1mb3InKSB8fCByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LXJlYWwtaXAnKSB8fCAndW5rbm93bicsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIFxuICAgIC8vIDkuIFJldHVybiBzdWNjZXNzIHJlc3BvbnNlXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgZ3Vlc3RJZDogZ3Vlc3QuaWQsXG4gICAgICAgICAgZ3JvdXBJZDogZ3Vlc3QuZ3JvdXBfaWQsXG4gICAgICAgICAgZmlyc3ROYW1lOiBndWVzdC5maXJzdF9uYW1lLFxuICAgICAgICAgIGxhc3ROYW1lOiBndWVzdC5sYXN0X25hbWUsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDIwMCB9XG4gICAgKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFbWFpbCBtYXRjaGluZyBhdXRoZW50aWNhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnVU5LTk9XTl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZCcsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlBPU1QiLCJlbWFpbE1hdGNoU2NoZW1hIiwieiIsIm9iamVjdCIsImVtYWlsIiwic3RyaW5nIiwicmVxdWVzdCIsImJvZHkiLCJqc29uIiwidmFsaWRhdGlvbiIsInNhZmVQYXJzZSIsInN1Y2Nlc3MiLCJOZXh0UmVzcG9uc2UiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiZGV0YWlscyIsImlzc3VlcyIsInN0YXR1cyIsInNhbml0aXplSW5wdXQiLCJkYXRhIiwidG9Mb3dlckNhc2UiLCJzdXBhYmFzZSIsImNyZWF0ZVN1cGFiYXNlQ2xpZW50IiwiZ3Vlc3QiLCJndWVzdEVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwic2Vzc2lvblRva2VuIiwiQXJyYXkiLCJjcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJVaW50OEFycmF5IiwibWFwIiwiYiIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJqb2luIiwiZXhwaXJlc0F0IiwiRGF0ZSIsIm5vdyIsInNlc3Npb24iLCJzZXNzaW9uRXJyb3IiLCJpbnNlcnQiLCJndWVzdF9pZCIsImlkIiwidG9rZW4iLCJleHBpcmVzX2F0IiwidG9JU09TdHJpbmciLCJpcF9hZGRyZXNzIiwiaGVhZGVycyIsImdldCIsInVzZXJfYWdlbnQiLCJjb25zb2xlIiwiY29va2llU3RvcmUiLCJjb29raWVzIiwic2V0IiwiaHR0cE9ubHkiLCJzZWN1cmUiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJzYW1lU2l0ZSIsIm1heEFnZSIsInBhdGgiLCJhY3Rpb24iLCJlbnRpdHlfdHlwZSIsImVudGl0eV9pZCIsImF1dGhfbWV0aG9kIiwiZ3Vlc3RJZCIsImdyb3VwSWQiLCJncm91cF9pZCIsImZpcnN0TmFtZSIsImZpcnN0X25hbWUiLCJsYXN0TmFtZSIsImxhc3RfbmFtZSIsIkVycm9yIl0sIm1hcHBpbmdzIjoiOzs7OytCQTRCc0JBOzs7ZUFBQUE7Ozt3QkE1Qk87eUJBQ0w7MEJBQ2E7cUJBQ25COzhCQUNZO0FBRTlCOzs7Ozs7OztDQVFDLEdBRUQsTUFBTUMsbUJBQW1CQyxNQUFDLENBQUNDLE1BQU0sQ0FBQztJQUNoQ0MsT0FBT0YsTUFBQyxDQUFDRyxNQUFNLEdBQUdELEtBQUssQ0FBQztBQUMxQjtBQVVPLGVBQWVKLEtBQUtNLE9BQWdCO0lBQ3pDLElBQUk7UUFDRixxQ0FBcUM7UUFDckMsTUFBTUMsT0FBTyxNQUFNRCxRQUFRRSxJQUFJO1FBQy9CLE1BQU1DLGFBQWFSLGlCQUFpQlMsU0FBUyxDQUFDSDtRQUU5QyxJQUFJLENBQUNFLFdBQVdFLE9BQU8sRUFBRTtZQUN2QixPQUFPQyxvQkFBWSxDQUFDSixJQUFJLENBQ3RCO2dCQUNFRyxTQUFTO2dCQUNURSxPQUFPO29CQUNMQyxNQUFNO29CQUNOQyxTQUFTO29CQUNUQyxTQUFTUCxXQUFXSSxLQUFLLENBQUNJLE1BQU07Z0JBQ2xDO1lBQ0YsR0FDQTtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsMEJBQTBCO1FBQzFCLE1BQU1kLFFBQVFlLElBQUFBLDJCQUFhLEVBQUNWLFdBQVdXLElBQUksQ0FBQ2hCLEtBQUssQ0FBQ2lCLFdBQVc7UUFFN0QsNEJBQTRCO1FBQzVCLE1BQU1DLFdBQVdDLElBQUFBLDhCQUFvQjtRQUVyQyx5REFBeUQ7UUFDekQsTUFBTSxFQUFF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