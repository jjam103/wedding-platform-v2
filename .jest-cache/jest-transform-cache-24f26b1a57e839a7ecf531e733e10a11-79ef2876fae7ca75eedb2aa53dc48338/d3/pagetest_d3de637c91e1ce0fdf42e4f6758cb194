aba1c4074909d993331eb0c929970e57
"use strict";
// Mock dependencies
jest.mock('next/navigation', ()=>({
        useRouter: jest.fn(),
        useSearchParams: jest.fn(()=>({
                get: jest.fn()
            }))
    }));
jest.mock('@/components/ui/ToastContext', ()=>({
        useToast: ()=>({
                addToast: jest.fn()
            })
    }));
// Mock InlineSectionEditor
jest.mock('@/components/admin/InlineSectionEditor', ()=>({
        InlineSectionEditor: ({ pageType, pageId })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "inline-section-editor",
                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    children: [
                        "Inline Section Editor for ",
                        pageType,
                        ": ",
                        pageId
                    ]
                })
            })
    }));
// Mock DataTable components
jest.mock('@/components/ui/DataTable', ()=>({
        DataTable: ({ data, columns, loading, onRowClick, onDelete })=>{
            if (loading) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "Loading..."
            });
            if (data.length === 0) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "No items found"
            });
            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "data-table",
                children: data.map((item, index)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        "data-testid": `accommodation-row-${item.id}`,
                        onClick: ()=>onRowClick && onRowClick(item),
                        style: {
                            cursor: onRowClick ? 'pointer' : 'default'
                        },
                        children: [
                            columns.map((col)=>{
                                const value = item[col.key];
                                const displayValue = col.render ? col.render(value, item) : value;
                                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                    "data-testid": `${col.key}-${item.id}`,
                                    children: displayValue
                                }, col.key);
                            }),
                            onDelete && /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                onClick: (e)=>{
                                    e.stopPropagation();
                                    onDelete(item);
                                },
                                "aria-label": "Delete",
                                children: "Delete"
                            })
                        ]
                    }, index))
            });
        }
    }));
jest.mock('@/components/ui/DataTableWithSuspense', ()=>({
        DataTableWithSuspense: ({ data, columns, loading, onRowClick, onDelete })=>{
            if (loading) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "Loading..."
            });
            if (data.length === 0) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "No items found"
            });
            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "data-table",
                children: data.map((item, index)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        "data-testid": `accommodation-row-${item.id}`,
                        onClick: ()=>onRowClick && onRowClick(item),
                        style: {
                            cursor: onRowClick ? 'pointer' : 'default'
                        },
                        children: [
                            columns.map((col)=>{
                                const value = item[col.key];
                                const displayValue = col.render ? col.render(value, item) : value;
                                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                    "data-testid": `${col.key}-${item.id}`,
                                    children: displayValue
                                }, col.key);
                            }),
                            onDelete && /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                onClick: (e)=>{
                                    e.stopPropagation();
                                    onDelete(item);
                                },
                                "aria-label": "Delete",
                                children: "Delete"
                            })
                        ]
                    }, index))
            });
        }
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
require("@testing-library/jest-dom");
const _page = /*#__PURE__*/ _interop_require_default(require("./page"));
const _navigation = require("next/navigation");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock fetch
global.fetch = jest.fn();
/**
 * Unit tests for Accommodations Page
 * 
 * Tests:
 * - Accommodation creation with collapsible form
 * - Location selection
 * - Room types navigation
 * - Section editor integration
 * 
 * Requirements: 10.1-10.6
 */ describe('AccommodationsPage', ()=>{
    const mockRouter = {
        push: jest.fn()
    };
    const mockAccommodations = [
        {
            id: 'accommodation-1',
            name: 'Tamarindo Diria Beach Resort',
            address: '123 Beach Road, Tamarindo',
            description: 'Luxury beachfront resort',
            locationId: 'location-1',
            checkInDate: '2025-06-14',
            checkOutDate: '2025-06-17',
            status: 'published',
            createdAt: '2025-01-01T00:00:00Z',
            updatedAt: '2025-01-01T00:00:00Z'
        },
        {
            id: 'accommodation-2',
            name: 'Hotel Capitan Suizo',
            address: '456 Ocean Drive, Tamarindo',
            description: 'Boutique hotel with ocean views',
            locationId: 'location-2',
            checkInDate: '2025-06-14',
            checkOutDate: '2025-06-17',
            status: 'draft',
            createdAt: '2025-01-01T00:00:00Z',
            updatedAt: '2025-01-01T00:00:00Z'
        }
    ];
    const mockLocations = [
        {
            id: 'location-1',
            name: 'Tamarindo Beach',
            parentLocationId: null
        },
        {
            id: 'location-2',
            name: 'Tamarindo Town',
            parentLocationId: null
        }
    ];
    beforeEach(()=>{
        jest.clearAllMocks();
        _navigation.useRouter.mockReturnValue(mockRouter);
        // Default fetch responses
        global.fetch.mockImplementation((url)=>{
            if (url.includes('/api/admin/accommodations')) {
                return Promise.resolve({
                    ok: true,
                    json: ()=>Promise.resolve({
                            success: true,
                            data: {
                                accommodations: mockAccommodations
                            }
                        })
                });
            }
            if (url.includes('/api/admin/locations')) {
                return Promise.resolve({
                    ok: true,
                    json: ()=>Promise.resolve({
                            success: true,
                            data: {
                                locations: mockLocations
                            }
                        })
                });
            }
            return Promise.reject(new Error('Unknown URL'));
        });
    });
    describe('Accommodation creation', ()=>{
        it('should display collapsible form when Add Accommodation button is clicked', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('heading', {
                    name: /accommodation management/i
                })).toBeInTheDocument();
            });
            const addButton = _react.screen.getByRole('button', {
                name: /create new accommodation/i
            });
            _react.fireEvent.click(addButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Add New Accommodation')).toBeInTheDocument();
            });
        });
        it('should create accommodation with collapsible form', async ()=>{
            const createResponse = {
                success: true,
                data: {
                    id: 'accommodation-3',
                    name: 'New Resort',
                    address: '789 Beach Lane',
                    description: 'New luxury resort',
                    locationId: 'location-1',
                    checkInDate: '2025-06-14',
                    checkOutDate: '2025-06-17',
                    status: 'published'
                }
            };
            global.fetch.mockImplementation((url, options)=>{
                if (url.includes('/api/admin/accommodations') && options?.method === 'POST') {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve(createResponse)
                    });
                }
                if (url.includes('/api/admin/accommodations') && !options) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: {
                                    accommodations: [
                                        ...mockAccommodations,
                                        createResponse.data
                                    ]
                                }
                            })
                    });
                }
                if (url.includes('/api/admin/locations')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: {
                                    locations: mockLocations
                                }
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('heading', {
                    name: /accommodation management/i
                })).toBeInTheDocument();
            });
            // Open form
            const addButton = _react.screen.getByRole('button', {
                name: /create new accommodation/i
            });
            _react.fireEvent.click(addButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Add New Accommodation')).toBeInTheDocument();
            });
            // Verify form is displayed
            expect(_react.screen.getByLabelText(/accommodation name/i)).toBeInTheDocument();
            expect(_react.screen.getByLabelText(/address/i)).toBeInTheDocument();
        });
        it('should close form after successful creation', async ()=>{
            const createResponse = {
                success: true,
                data: {
                    id: 'accommodation-3',
                    name: 'New Resort',
                    status: 'published'
                }
            };
            global.fetch.mockImplementation((url, options)=>{
                if (url.includes('/api/admin/accommodations') && options?.method === 'POST') {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve(createResponse)
                    });
                }
                if (url.includes('/api/admin/accommodations') && !options) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: {
                                    accommodations: mockAccommodations
                                }
                            })
                    });
                }
                if (url.includes('/api/admin/locations')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: {
                                    locations: mockLocations
                                }
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('heading', {
                    name: /accommodation management/i
                })).toBeInTheDocument();
            });
            // Open form
            const addButton = _react.screen.getByRole('button', {
                name: /create new accommodation/i
            });
            _react.fireEvent.click(addButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Add New Accommodation')).toBeInTheDocument();
            });
        });
    });
    describe('Location selection', ()=>{
        it('should display LocationSelector in the form', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('heading', {
                    name: /accommodation management/i
                })).toBeInTheDocument();
            });
            // Open form
            const addButton = _react.screen.getByRole('button', {
                name: /create new accommodation/i
            });
            _react.fireEvent.click(addButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Add New Accommodation')).toBeInTheDocument();
            });
            // Verify LocationSelector is present
            expect(_react.screen.getByText(/select accommodation location/i)).toBeInTheDocument();
        });
        it('should include selected location in form submission', async ()=>{
            let submittedData = null;
            global.fetch.mockImplementation((url, options)=>{
                if (url.includes('/api/admin/accommodations') && options?.method === 'POST') {
                    submittedData = JSON.parse(options.body);
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: {
                                    id: 'accommodation-3',
                                    ...submittedData
                                }
                            })
                    });
                }
                if (url.includes('/api/admin/accommodations') && !options) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: {
                                    accommodations: mockAccommodations
                                }
                            })
                    });
                }
                if (url.includes('/api/admin/locations')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: {
                                    locations: mockLocations
                                }
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('heading', {
                    name: /accommodation management/i
                })).toBeInTheDocument();
            });
        });
    });
    describe('Room types navigation', ()=>{
        it('should navigate to room types page when Room Types button is clicked', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('heading', {
                    name: /accommodation management/i
                })).toBeInTheDocument();
            });
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
            });
            // Find and click Room Types button
            const roomTypesButtons = _react.screen.getAllByRole('button', {
                name: /room types/i
            });
            _react.fireEvent.click(roomTypesButtons[0]);
            // Verify navigation
            expect(mockRouter.push).toHaveBeenCalledWith('/admin/accommodations/accommodation-1/room-types');
        });
        it('should navigate to correct accommodation room types page', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Hotel Capitan Suizo')).toBeInTheDocument();
            });
            // Find and click Room Types button for second accommodation
            const roomTypesButtons = _react.screen.getAllByRole('button', {
                name: /room types/i
            });
            _react.fireEvent.click(roomTypesButtons[1]);
            // Verify navigation to correct accommodation
            expect(mockRouter.push).toHaveBeenCalledWith('/admin/accommodations/accommodation-2/room-types');
        });
    });
    describe('Section editor integration', ()=>{
        it('should display inline section editor when editing an accommodation', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('heading', {
                    name: /accommodation management/i
                })).toBeInTheDocument();
            });
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
            });
            // Click on accommodation row to edit it
            const accommodationRow = _react.screen.getByTestId('accommodation-row-accommodation-1');
            _react.fireEvent.click(accommodationRow);
            // Should show the inline section editor
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByTestId('inline-section-editor')).toBeInTheDocument();
            });
        });
        it('should show section editor for the selected accommodation', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Hotel Capitan Suizo')).toBeInTheDocument();
            });
            // Click on accommodation row to edit it
            const accommodationRow = _react.screen.getByTestId('accommodation-row-accommodation-2');
            _react.fireEvent.click(accommodationRow);
            // Should show the section editor with correct page type and ID
            await (0, _react.waitFor)(()=>{
                const sectionEditor = _react.screen.getByTestId('inline-section-editor');
                expect(sectionEditor).toBeInTheDocument();
                expect(sectionEditor).toHaveTextContent('accommodation');
                expect(sectionEditor).toHaveTextContent('accommodation-2');
            });
        });
    });
    describe('Accommodation editing', ()=>{
        it('should open edit form when accommodation row is clicked', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
            });
            // Click on accommodation row
            const accommodationName = _react.screen.getByText('Tamarindo Diria Beach Resort');
            _react.fireEvent.click(accommodationName);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Edit Accommodation')).toBeInTheDocument();
            });
        });
        it('should populate form with accommodation data when editing', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
            });
            // Click on accommodation row
            const accommodationName = _react.screen.getByText('Tamarindo Diria Beach Resort');
            _react.fireEvent.click(accommodationName);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Edit Accommodation')).toBeInTheDocument();
            });
            // Verify form is populated (form fields would be populated by CollapsibleForm component)
            expect(_react.screen.getByLabelText(/accommodation name/i)).toBeInTheDocument();
        });
    });
    describe('Accommodation deletion', ()=>{
        it('should show delete confirmation dialog when delete button is clicked', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
            });
        // Note: Delete button would be in DataTable component
        // This test verifies the dialog appears when handleDeleteClick is called
        });
        it('should delete accommodation after confirmation', async ()=>{
            let accommodationsList = [
                ...mockAccommodations
            ];
            global.fetch.mockImplementation((url, options)=>{
                if (url.includes('/api/admin/accommodations/accommodation-1') && options?.method === 'DELETE') {
                    // After delete, remove from list
                    accommodationsList = mockAccommodations.filter((a)=>a.id !== 'accommodation-1');
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: undefined
                            })
                    });
                }
                if (url.includes('/api/admin/accommodations') && !options) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: {
                                    accommodations: accommodationsList
                                }
                            })
                    });
                }
                if (url.includes('/api/admin/locations')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: {
                                    locations: mockLocations
                                }
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
            });
            // Find and click delete button for first accommodation
            const deleteButtons = _react.screen.getAllByRole('button', {
                name: /delete/i
            });
            _react.fireEvent.click(deleteButtons[0]);
            // Wait for confirmation dialog to appear
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/are you sure you want to delete/i)).toBeInTheDocument();
            });
            // Click confirm button in dialog
            const confirmButtons = _react.screen.getAllByRole('button', {
                name: /delete/i
            });
            // The confirm button in the dialog should be the last one (after the delete buttons in the table)
            const confirmButton = confirmButtons[confirmButtons.length - 1];
            _react.fireEvent.click(confirmButton);
            // Wait for accommodation to be removed from list
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Tamarindo Diria Beach Resort')).not.toBeInTheDocument();
            });
        });
    });
    describe('Data loading', ()=>{
        it('should display loading state initially', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            // Loading state would be shown by DataTable component
            expect(_react.screen.getByRole('heading', {
                name: /accommodation management/i
            })).toBeInTheDocument();
        });
        it('should display accommodations after loading', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
                expect(_react.screen.getByText('Hotel Capitan Suizo')).toBeInTheDocument();
            });
        });
        it('should handle API errors gracefully', async ()=>{
            global.fetch.mockImplementation((url)=>{
                if (url.includes('/api/admin/accommodations')) {
                    return Promise.resolve({
                        ok: false,
                        json: ()=>Promise.resolve({
                                success: false,
                                error: {
                                    code: 'DATABASE_ERROR',
                                    message: 'Failed to fetch accommodations'
                                }
                            })
                    });
                }
                if (url.includes('/api/admin/locations')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: {
                                    locations: mockLocations
                                }
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('heading', {
                    name: /accommodation management/i
                })).toBeInTheDocument();
            });
        });
    });
    describe('Status display', ()=>{
        it('should display status badges for accommodations', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Published')).toBeInTheDocument();
                expect(_react.screen.getByText('Draft')).toBeInTheDocument();
            });
        });
        it('should apply correct styling to status badges', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            // Wait for accommodations to load first
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
            });
            // Get all "Published" text elements and find the badge (not the filter option)
            const publishedElements = _react.screen.getAllByText('Published');
            // The badge should be a span with specific classes, filter options are in select/option
            const publishedBadge = publishedElements.find((el)=>el.tagName === 'SPAN');
            expect(publishedBadge).toBeDefined();
            expect(publishedBadge).toHaveClass('bg-jungle-100', 'text-jungle-800');
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FkbWluL2FjY29tbW9kYXRpb25zL3BhZ2UudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIGZpcmVFdmVudCwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0ICdAdGVzdGluZy1saWJyYXJ5L2plc3QtZG9tJztcbmltcG9ydCBBY2NvbW1vZGF0aW9uc1BhZ2UgZnJvbSAnLi9wYWdlJztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvbmF2aWdhdGlvbic7XG5cbi8vIE1vY2sgZGVwZW5kZW5jaWVzXG5qZXN0Lm1vY2soJ25leHQvbmF2aWdhdGlvbicsICgpID0+ICh7XG4gIHVzZVJvdXRlcjogamVzdC5mbigpLFxuICB1c2VTZWFyY2hQYXJhbXM6IGplc3QuZm4oKCkgPT4gKHtcbiAgICBnZXQ6IGplc3QuZm4oKSxcbiAgfSkpLFxufSkpO1xuXG5qZXN0Lm1vY2soJ0AvY29tcG9uZW50cy91aS9Ub2FzdENvbnRleHQnLCAoKSA9PiAoe1xuICB1c2VUb2FzdDogKCkgPT4gKHtcbiAgICBhZGRUb2FzdDogamVzdC5mbigpLFxuICB9KSxcbn0pKTtcblxuLy8gTW9jayBJbmxpbmVTZWN0aW9uRWRpdG9yXG5qZXN0Lm1vY2soJ0AvY29tcG9uZW50cy9hZG1pbi9JbmxpbmVTZWN0aW9uRWRpdG9yJywgKCkgPT4gKHtcbiAgSW5saW5lU2VjdGlvbkVkaXRvcjogKHsgcGFnZVR5cGUsIHBhZ2VJZCB9OiBhbnkpID0+IChcbiAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiaW5saW5lLXNlY3Rpb24tZWRpdG9yXCI+XG4gICAgICA8ZGl2PklubGluZSBTZWN0aW9uIEVkaXRvciBmb3Ige3BhZ2VUeXBlfToge3BhZ2VJZH08L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKSxcbn0pKTtcblxuLy8gTW9jayBEYXRhVGFibGUgY29tcG9uZW50c1xuamVzdC5tb2NrKCdAL2NvbXBvbmVudHMvdWkvRGF0YVRhYmxlJywgKCkgPT4gKHtcbiAgRGF0YVRhYmxlOiAoeyBkYXRhLCBjb2x1bW5zLCBsb2FkaW5nLCBvblJvd0NsaWNrLCBvbkRlbGV0ZSB9OiBhbnkpID0+IHtcbiAgICBpZiAobG9hZGluZykgcmV0dXJuIDxkaXY+TG9hZGluZy4uLjwvZGl2PjtcbiAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHJldHVybiA8ZGl2Pk5vIGl0ZW1zIGZvdW5kPC9kaXY+O1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiZGF0YS10YWJsZVwiPlxuICAgICAgICB7ZGF0YS5tYXAoKGl0ZW06IGFueSwgaW5kZXg6IG51bWJlcikgPT4gKFxuICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICBrZXk9e2luZGV4fSBcbiAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgYWNjb21tb2RhdGlvbi1yb3ctJHtpdGVtLmlkfWB9XG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvblJvd0NsaWNrICYmIG9uUm93Q2xpY2soaXRlbSl9XG4gICAgICAgICAgICBzdHlsZT17eyBjdXJzb3I6IG9uUm93Q2xpY2sgPyAncG9pbnRlcicgOiAnZGVmYXVsdCcgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7Y29sdW1ucy5tYXAoKGNvbDogYW55KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gaXRlbVtjb2wua2V5XTtcbiAgICAgICAgICAgICAgY29uc3QgZGlzcGxheVZhbHVlID0gY29sLnJlbmRlciA/IGNvbC5yZW5kZXIodmFsdWUsIGl0ZW0pIDogdmFsdWU7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdiBrZXk9e2NvbC5rZXl9IGRhdGEtdGVzdGlkPXtgJHtjb2wua2V5fS0ke2l0ZW0uaWR9YH0+XG4gICAgICAgICAgICAgICAgICB7ZGlzcGxheVZhbHVlfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICB7b25EZWxldGUgJiYgKFxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICBvbkRlbGV0ZShpdGVtKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJEZWxldGVcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgRGVsZXRlXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9LFxufSkpO1xuXG5qZXN0Lm1vY2soJ0AvY29tcG9uZW50cy91aS9EYXRhVGFibGVXaXRoU3VzcGVuc2UnLCAoKSA9PiAoe1xuICBEYXRhVGFibGVXaXRoU3VzcGVuc2U6ICh7IGRhdGEsIGNvbHVtbnMsIGxvYWRpbmcsIG9uUm93Q2xpY2ssIG9uRGVsZXRlIH06IGFueSkgPT4ge1xuICAgIGlmIChsb2FkaW5nKSByZXR1cm4gPGRpdj5Mb2FkaW5nLi4uPC9kaXY+O1xuICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDxkaXY+Tm8gaXRlbXMgZm91bmQ8L2Rpdj47XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJkYXRhLXRhYmxlXCI+XG4gICAgICAgIHtkYXRhLm1hcCgoaXRlbTogYW55LCBpbmRleDogbnVtYmVyKSA9PiAoXG4gICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgIGtleT17aW5kZXh9IFxuICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2BhY2NvbW1vZGF0aW9uLXJvdy0ke2l0ZW0uaWR9YH1cbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uUm93Q2xpY2sgJiYgb25Sb3dDbGljayhpdGVtKX1cbiAgICAgICAgICAgIHN0eWxlPXt7IGN1cnNvcjogb25Sb3dDbGljayA/ICdwb2ludGVyJyA6ICdkZWZhdWx0JyB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtjb2x1bW5zLm1hcCgoY29sOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBpdGVtW2NvbC5rZXldO1xuICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5VmFsdWUgPSBjb2wucmVuZGVyID8gY29sLnJlbmRlcih2YWx1ZSwgaXRlbSkgOiB2YWx1ZTtcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2IGtleT17Y29sLmtleX0gZGF0YS10ZXN0aWQ9e2Ake2NvbC5rZXl9LSR7aXRlbS5pZH1gfT5cbiAgICAgICAgICAgICAgICAgIHtkaXNwbGF5VmFsdWV9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIHtvbkRlbGV0ZSAmJiAoXG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgIG9uRGVsZXRlKGl0ZW0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIkRlbGV0ZVwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBEZWxldGVcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApKX1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH0sXG59KSk7XG5cbi8vIE1vY2sgZmV0Y2hcbmdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKTtcblxuLyoqXG4gKiBVbml0IHRlc3RzIGZvciBBY2NvbW1vZGF0aW9ucyBQYWdlXG4gKiBcbiAqIFRlc3RzOlxuICogLSBBY2NvbW1vZGF0aW9uIGNyZWF0aW9uIHdpdGggY29sbGFwc2libGUgZm9ybVxuICogLSBMb2NhdGlvbiBzZWxlY3Rpb25cbiAqIC0gUm9vbSB0eXBlcyBuYXZpZ2F0aW9uXG4gKiAtIFNlY3Rpb24gZWRpdG9yIGludGVncmF0aW9uXG4gKiBcbiAqIFJlcXVpcmVtZW50czogMTAuMS0xMC42XG4gKi9cbmRlc2NyaWJlKCdBY2NvbW1vZGF0aW9uc1BhZ2UnLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tSb3V0ZXIgPSB7XG4gICAgcHVzaDogamVzdC5mbigpLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tBY2NvbW1vZGF0aW9ucyA9IFtcbiAgICB7XG4gICAgICBpZDogJ2FjY29tbW9kYXRpb24tMScsXG4gICAgICBuYW1lOiAnVGFtYXJpbmRvIERpcmlhIEJlYWNoIFJlc29ydCcsXG4gICAgICBhZGRyZXNzOiAnMTIzIEJlYWNoIFJvYWQsIFRhbWFyaW5kbycsXG4gICAgICBkZXNjcmlwdGlvbjogJ0x1eHVyeSBiZWFjaGZyb250IHJlc29ydCcsXG4gICAgICBsb2NhdGlvbklkOiAnbG9jYXRpb24tMScsXG4gICAgICBjaGVja0luRGF0ZTogJzIwMjUtMDYtMTQnLFxuICAgICAgY2hlY2tPdXREYXRlOiAnMjAyNS0wNi0xNycsXG4gICAgICBzdGF0dXM6ICdwdWJsaXNoZWQnLFxuICAgICAgY3JlYXRlZEF0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgICAgdXBkYXRlZEF0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICdhY2NvbW1vZGF0aW9uLTInLFxuICAgICAgbmFtZTogJ0hvdGVsIENhcGl0YW4gU3Vpem8nLFxuICAgICAgYWRkcmVzczogJzQ1NiBPY2VhbiBEcml2ZSwgVGFtYXJpbmRvJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQm91dGlxdWUgaG90ZWwgd2l0aCBvY2VhbiB2aWV3cycsXG4gICAgICBsb2NhdGlvbklkOiAnbG9jYXRpb24tMicsXG4gICAgICBjaGVja0luRGF0ZTogJzIwMjUtMDYtMTQnLFxuICAgICAgY2hlY2tPdXREYXRlOiAnMjAyNS0wNi0xNycsXG4gICAgICBzdGF0dXM6ICdkcmFmdCcsXG4gICAgICBjcmVhdGVkQXQ6ICcyMDI1LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICB1cGRhdGVkQXQ6ICcyMDI1LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgfSxcbiAgXTtcblxuICBjb25zdCBtb2NrTG9jYXRpb25zID0gW1xuICAgIHsgaWQ6ICdsb2NhdGlvbi0xJywgbmFtZTogJ1RhbWFyaW5kbyBCZWFjaCcsIHBhcmVudExvY2F0aW9uSWQ6IG51bGwgfSxcbiAgICB7IGlkOiAnbG9jYXRpb24tMicsIG5hbWU6ICdUYW1hcmluZG8gVG93bicsIHBhcmVudExvY2F0aW9uSWQ6IG51bGwgfSxcbiAgXTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICAodXNlUm91dGVyIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKG1vY2tSb3V0ZXIpO1xuICAgIFxuICAgIC8vIERlZmF1bHQgZmV0Y2ggcmVzcG9uc2VzXG4gICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigodXJsOiBzdHJpbmcpID0+IHtcbiAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvYWRtaW4vYWNjb21tb2RhdGlvbnMnKSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGE6IHsgYWNjb21tb2RhdGlvbnM6IG1vY2tBY2NvbW1vZGF0aW9ucyB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvYWRtaW4vbG9jYXRpb25zJykpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7IGxvY2F0aW9uczogbW9ja0xvY2F0aW9ucyB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1Vua25vd24gVVJMJykpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQWNjb21tb2RhdGlvbiBjcmVhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgY29sbGFwc2libGUgZm9ybSB3aGVuIEFkZCBBY2NvbW1vZGF0aW9uIGJ1dHRvbiBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBY2NvbW1vZGF0aW9uc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2hlYWRpbmcnLCB7IG5hbWU6IC9hY2NvbW1vZGF0aW9uIG1hbmFnZW1lbnQvaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBhZGRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9jcmVhdGUgbmV3IGFjY29tbW9kYXRpb24vaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhhZGRCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0FkZCBOZXcgQWNjb21tb2RhdGlvbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBhY2NvbW1vZGF0aW9uIHdpdGggY29sbGFwc2libGUgZm9ybScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNyZWF0ZVJlc3BvbnNlID0ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgaWQ6ICdhY2NvbW1vZGF0aW9uLTMnLFxuICAgICAgICAgIG5hbWU6ICdOZXcgUmVzb3J0JyxcbiAgICAgICAgICBhZGRyZXNzOiAnNzg5IEJlYWNoIExhbmUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTmV3IGx1eHVyeSByZXNvcnQnLFxuICAgICAgICAgIGxvY2F0aW9uSWQ6ICdsb2NhdGlvbi0xJyxcbiAgICAgICAgICBjaGVja0luRGF0ZTogJzIwMjUtMDYtMTQnLFxuICAgICAgICAgIGNoZWNrT3V0RGF0ZTogJzIwMjUtMDYtMTcnLFxuICAgICAgICAgIHN0YXR1czogJ3B1Ymxpc2hlZCcsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCh1cmw6IHN0cmluZywgb3B0aW9ucz86IGFueSkgPT4ge1xuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2FkbWluL2FjY29tbW9kYXRpb25zJykgJiYgb3B0aW9ucz8ubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKGNyZWF0ZVJlc3BvbnNlKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2FkbWluL2FjY29tbW9kYXRpb25zJykgJiYgIW9wdGlvbnMpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgZGF0YTogeyBhY2NvbW1vZGF0aW9uczogWy4uLm1vY2tBY2NvbW1vZGF0aW9ucywgY3JlYXRlUmVzcG9uc2UuZGF0YV0gfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvYWRtaW4vbG9jYXRpb25zJykpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgZGF0YTogeyBsb2NhdGlvbnM6IG1vY2tMb2NhdGlvbnMgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1Vua25vd24gVVJMJykpO1xuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8QWNjb21tb2RhdGlvbnNQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdoZWFkaW5nJywgeyBuYW1lOiAvYWNjb21tb2RhdGlvbiBtYW5hZ2VtZW50L2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gT3BlbiBmb3JtXG4gICAgICBjb25zdCBhZGRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9jcmVhdGUgbmV3IGFjY29tbW9kYXRpb24vaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhhZGRCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0FkZCBOZXcgQWNjb21tb2RhdGlvbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFZlcmlmeSBmb3JtIGlzIGRpc3BsYXllZFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvYWNjb21tb2RhdGlvbiBuYW1lL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvYWRkcmVzcy9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2xvc2UgZm9ybSBhZnRlciBzdWNjZXNzZnVsIGNyZWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY3JlYXRlUmVzcG9uc2UgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBpZDogJ2FjY29tbW9kYXRpb24tMycsXG4gICAgICAgICAgbmFtZTogJ05ldyBSZXNvcnQnLFxuICAgICAgICAgIHN0YXR1czogJ3B1Ymxpc2hlZCcsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCh1cmw6IHN0cmluZywgb3B0aW9ucz86IGFueSkgPT4ge1xuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2FkbWluL2FjY29tbW9kYXRpb25zJykgJiYgb3B0aW9ucz8ubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKGNyZWF0ZVJlc3BvbnNlKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2FkbWluL2FjY29tbW9kYXRpb25zJykgJiYgIW9wdGlvbnMpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgZGF0YTogeyBhY2NvbW1vZGF0aW9uczogbW9ja0FjY29tbW9kYXRpb25zIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2FkbWluL2xvY2F0aW9ucycpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgIGRhdGE6IHsgbG9jYXRpb25zOiBtb2NrTG9jYXRpb25zIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdVbmtub3duIFVSTCcpKTtcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPEFjY29tbW9kYXRpb25zUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnaGVhZGluZycsIHsgbmFtZTogL2FjY29tbW9kYXRpb24gbWFuYWdlbWVudC9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIE9wZW4gZm9ybVxuICAgICAgY29uc3QgYWRkQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvY3JlYXRlIG5ldyBhY2NvbW1vZGF0aW9uL2kgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soYWRkQnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdBZGQgTmV3IEFjY29tbW9kYXRpb24nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTG9jYXRpb24gc2VsZWN0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGlzcGxheSBMb2NhdGlvblNlbGVjdG9yIGluIHRoZSBmb3JtJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBY2NvbW1vZGF0aW9uc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2hlYWRpbmcnLCB7IG5hbWU6IC9hY2NvbW1vZGF0aW9uIG1hbmFnZW1lbnQvaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBPcGVuIGZvcm1cbiAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2NyZWF0ZSBuZXcgYWNjb21tb2RhdGlvbi9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGFkZEJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQWRkIE5ldyBBY2NvbW1vZGF0aW9uJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gVmVyaWZ5IExvY2F0aW9uU2VsZWN0b3IgaXMgcHJlc2VudFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL3NlbGVjdCBhY2NvbW1vZGF0aW9uIGxvY2F0aW9uL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIHNlbGVjdGVkIGxvY2F0aW9uIGluIGZvcm0gc3VibWlzc2lvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBzdWJtaXR0ZWREYXRhOiBhbnkgPSBudWxsO1xuXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCh1cmw6IHN0cmluZywgb3B0aW9ucz86IGFueSkgPT4ge1xuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2FkbWluL2FjY29tbW9kYXRpb25zJykgJiYgb3B0aW9ucz8ubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgICAgICBzdWJtaXR0ZWREYXRhID0gSlNPTi5wYXJzZShvcHRpb25zLmJvZHkpO1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICBkYXRhOiB7IGlkOiAnYWNjb21tb2RhdGlvbi0zJywgLi4uc3VibWl0dGVkRGF0YSB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9hZG1pbi9hY2NvbW1vZGF0aW9ucycpICYmICFvcHRpb25zKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgIGRhdGE6IHsgYWNjb21tb2RhdGlvbnM6IG1vY2tBY2NvbW1vZGF0aW9ucyB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9hZG1pbi9sb2NhdGlvbnMnKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICBkYXRhOiB7IGxvY2F0aW9uczogbW9ja0xvY2F0aW9ucyB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignVW5rbm93biBVUkwnKSk7XG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxBY2NvbW1vZGF0aW9uc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2hlYWRpbmcnLCB7IG5hbWU6IC9hY2NvbW1vZGF0aW9uIG1hbmFnZW1lbnQvaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUm9vbSB0eXBlcyBuYXZpZ2F0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbmF2aWdhdGUgdG8gcm9vbSB0eXBlcyBwYWdlIHdoZW4gUm9vbSBUeXBlcyBidXR0b24gaXMgY2xpY2tlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8QWNjb21tb2RhdGlvbnNQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdoZWFkaW5nJywgeyBuYW1lOiAvYWNjb21tb2RhdGlvbiBtYW5hZ2VtZW50L2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdUYW1hcmluZG8gRGlyaWEgQmVhY2ggUmVzb3J0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gRmluZCBhbmQgY2xpY2sgUm9vbSBUeXBlcyBidXR0b25cbiAgICAgIGNvbnN0IHJvb21UeXBlc0J1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9yb29tIHR5cGVzL2kgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2socm9vbVR5cGVzQnV0dG9uc1swXSk7XG5cbiAgICAgIC8vIFZlcmlmeSBuYXZpZ2F0aW9uXG4gICAgICBleHBlY3QobW9ja1JvdXRlci5wdXNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FkbWluL2FjY29tbW9kYXRpb25zL2FjY29tbW9kYXRpb24tMS9yb29tLXR5cGVzJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5hdmlnYXRlIHRvIGNvcnJlY3QgYWNjb21tb2RhdGlvbiByb29tIHR5cGVzIHBhZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPEFjY29tbW9kYXRpb25zUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnSG90ZWwgQ2FwaXRhbiBTdWl6bycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEZpbmQgYW5kIGNsaWNrIFJvb20gVHlwZXMgYnV0dG9uIGZvciBzZWNvbmQgYWNjb21tb2RhdGlvblxuICAgICAgY29uc3Qgcm9vbVR5cGVzQnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3Jvb20gdHlwZXMvaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhyb29tVHlwZXNCdXR0b25zWzFdKTtcblxuICAgICAgLy8gVmVyaWZ5IG5hdmlnYXRpb24gdG8gY29ycmVjdCBhY2NvbW1vZGF0aW9uXG4gICAgICBleHBlY3QobW9ja1JvdXRlci5wdXNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FkbWluL2FjY29tbW9kYXRpb25zL2FjY29tbW9kYXRpb24tMi9yb29tLXR5cGVzJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTZWN0aW9uIGVkaXRvciBpbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgaW5saW5lIHNlY3Rpb24gZWRpdG9yIHdoZW4gZWRpdGluZyBhbiBhY2NvbW1vZGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBY2NvbW1vZGF0aW9uc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2hlYWRpbmcnLCB7IG5hbWU6IC9hY2NvbW1vZGF0aW9uIG1hbmFnZW1lbnQvaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1RhbWFyaW5kbyBEaXJpYSBCZWFjaCBSZXNvcnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBvbiBhY2NvbW1vZGF0aW9uIHJvdyB0byBlZGl0IGl0XG4gICAgICBjb25zdCBhY2NvbW1vZGF0aW9uUm93ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdhY2NvbW1vZGF0aW9uLXJvdy1hY2NvbW1vZGF0aW9uLTEnKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhhY2NvbW1vZGF0aW9uUm93KTtcblxuICAgICAgLy8gU2hvdWxkIHNob3cgdGhlIGlubGluZSBzZWN0aW9uIGVkaXRvclxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2lubGluZS1zZWN0aW9uLWVkaXRvcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNob3cgc2VjdGlvbiBlZGl0b3IgZm9yIHRoZSBzZWxlY3RlZCBhY2NvbW1vZGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBY2NvbW1vZGF0aW9uc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0hvdGVsIENhcGl0YW4gU3Vpem8nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBvbiBhY2NvbW1vZGF0aW9uIHJvdyB0byBlZGl0IGl0XG4gICAgICBjb25zdCBhY2NvbW1vZGF0aW9uUm93ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdhY2NvbW1vZGF0aW9uLXJvdy1hY2NvbW1vZGF0aW9uLTInKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhhY2NvbW1vZGF0aW9uUm93KTtcblxuICAgICAgLy8gU2hvdWxkIHNob3cgdGhlIHNlY3Rpb24gZWRpdG9yIHdpdGggY29ycmVjdCBwYWdlIHR5cGUgYW5kIElEXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3Qgc2VjdGlvbkVkaXRvciA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5saW5lLXNlY3Rpb24tZWRpdG9yJyk7XG4gICAgICAgIGV4cGVjdChzZWN0aW9uRWRpdG9yKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBleHBlY3Qoc2VjdGlvbkVkaXRvcikudG9IYXZlVGV4dENvbnRlbnQoJ2FjY29tbW9kYXRpb24nKTtcbiAgICAgICAgZXhwZWN0KHNlY3Rpb25FZGl0b3IpLnRvSGF2ZVRleHRDb250ZW50KCdhY2NvbW1vZGF0aW9uLTInKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQWNjb21tb2RhdGlvbiBlZGl0aW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgb3BlbiBlZGl0IGZvcm0gd2hlbiBhY2NvbW1vZGF0aW9uIHJvdyBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBY2NvbW1vZGF0aW9uc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1RhbWFyaW5kbyBEaXJpYSBCZWFjaCBSZXNvcnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBvbiBhY2NvbW1vZGF0aW9uIHJvd1xuICAgICAgY29uc3QgYWNjb21tb2RhdGlvbk5hbWUgPSBzY3JlZW4uZ2V0QnlUZXh0KCdUYW1hcmluZG8gRGlyaWEgQmVhY2ggUmVzb3J0Jyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soYWNjb21tb2RhdGlvbk5hbWUpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0VkaXQgQWNjb21tb2RhdGlvbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHBvcHVsYXRlIGZvcm0gd2l0aCBhY2NvbW1vZGF0aW9uIGRhdGEgd2hlbiBlZGl0aW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBY2NvbW1vZGF0aW9uc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1RhbWFyaW5kbyBEaXJpYSBCZWFjaCBSZXNvcnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBvbiBhY2NvbW1vZGF0aW9uIHJvd1xuICAgICAgY29uc3QgYWNjb21tb2RhdGlvbk5hbWUgPSBzY3JlZW4uZ2V0QnlUZXh0KCdUYW1hcmluZG8gRGlyaWEgQmVhY2ggUmVzb3J0Jyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soYWNjb21tb2RhdGlvbk5hbWUpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0VkaXQgQWNjb21tb2RhdGlvbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFZlcmlmeSBmb3JtIGlzIHBvcHVsYXRlZCAoZm9ybSBmaWVsZHMgd291bGQgYmUgcG9wdWxhdGVkIGJ5IENvbGxhcHNpYmxlRm9ybSBjb21wb25lbnQpXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9hY2NvbW1vZGF0aW9uIG5hbWUvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBY2NvbW1vZGF0aW9uIGRlbGV0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc2hvdyBkZWxldGUgY29uZmlybWF0aW9uIGRpYWxvZyB3aGVuIGRlbGV0ZSBidXR0b24gaXMgY2xpY2tlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8QWNjb21tb2RhdGlvbnNQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdUYW1hcmluZG8gRGlyaWEgQmVhY2ggUmVzb3J0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gTm90ZTogRGVsZXRlIGJ1dHRvbiB3b3VsZCBiZSBpbiBEYXRhVGFibGUgY29tcG9uZW50XG4gICAgICAvLyBUaGlzIHRlc3QgdmVyaWZpZXMgdGhlIGRpYWxvZyBhcHBlYXJzIHdoZW4gaGFuZGxlRGVsZXRlQ2xpY2sgaXMgY2FsbGVkXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRlbGV0ZSBhY2NvbW1vZGF0aW9uIGFmdGVyIGNvbmZpcm1hdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBhY2NvbW1vZGF0aW9uc0xpc3QgPSBbLi4ubW9ja0FjY29tbW9kYXRpb25zXTtcblxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigodXJsOiBzdHJpbmcsIG9wdGlvbnM/OiBhbnkpID0+IHtcbiAgICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9hZG1pbi9hY2NvbW1vZGF0aW9ucy9hY2NvbW1vZGF0aW9uLTEnKSAmJiBvcHRpb25zPy5tZXRob2QgPT09ICdERUxFVEUnKSB7XG4gICAgICAgICAgLy8gQWZ0ZXIgZGVsZXRlLCByZW1vdmUgZnJvbSBsaXN0XG4gICAgICAgICAgYWNjb21tb2RhdGlvbnNMaXN0ID0gbW9ja0FjY29tbW9kYXRpb25zLmZpbHRlcihhID0+IGEuaWQgIT09ICdhY2NvbW1vZGF0aW9uLTEnKTtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogdW5kZWZpbmVkIH0pLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvYWRtaW4vYWNjb21tb2RhdGlvbnMnKSAmJiAhb3B0aW9ucykge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICBkYXRhOiB7IGFjY29tbW9kYXRpb25zOiBhY2NvbW1vZGF0aW9uc0xpc3QgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvYWRtaW4vbG9jYXRpb25zJykpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgZGF0YTogeyBsb2NhdGlvbnM6IG1vY2tMb2NhdGlvbnMgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1Vua25vd24gVVJMJykpO1xuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8QWNjb21tb2RhdGlvbnNQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdUYW1hcmluZG8gRGlyaWEgQmVhY2ggUmVzb3J0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gRmluZCBhbmQgY2xpY2sgZGVsZXRlIGJ1dHRvbiBmb3IgZmlyc3QgYWNjb21tb2RhdGlvblxuICAgICAgY29uc3QgZGVsZXRlQnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2RlbGV0ZS9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGRlbGV0ZUJ1dHRvbnNbMF0pO1xuXG4gICAgICAvLyBXYWl0IGZvciBjb25maXJtYXRpb24gZGlhbG9nIHRvIGFwcGVhclxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9hcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIGNvbmZpcm0gYnV0dG9uIGluIGRpYWxvZ1xuICAgICAgY29uc3QgY29uZmlybUJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9kZWxldGUvaSB9KTtcbiAgICAgIC8vIFRoZSBjb25maXJtIGJ1dHRvbiBpbiB0aGUgZGlhbG9nIHNob3VsZCBiZSB0aGUgbGFzdCBvbmUgKGFmdGVyIHRoZSBkZWxldGUgYnV0dG9ucyBpbiB0aGUgdGFibGUpXG4gICAgICBjb25zdCBjb25maXJtQnV0dG9uID0gY29uZmlybUJ1dHRvbnNbY29uZmlybUJ1dHRvbnMubGVuZ3RoIC0gMV07XG4gICAgICBmaXJlRXZlbnQuY2xpY2soY29uZmlybUJ1dHRvbik7XG5cbiAgICAgIC8vIFdhaXQgZm9yIGFjY29tbW9kYXRpb24gdG8gYmUgcmVtb3ZlZCBmcm9tIGxpc3RcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdUYW1hcmluZG8gRGlyaWEgQmVhY2ggUmVzb3J0JykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdEYXRhIGxvYWRpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGxvYWRpbmcgc3RhdGUgaW5pdGlhbGx5JywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBY2NvbW1vZGF0aW9uc1BhZ2UgLz4pO1xuXG4gICAgICAvLyBMb2FkaW5nIHN0YXRlIHdvdWxkIGJlIHNob3duIGJ5IERhdGFUYWJsZSBjb21wb25lbnRcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdoZWFkaW5nJywgeyBuYW1lOiAvYWNjb21tb2RhdGlvbiBtYW5hZ2VtZW50L2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgYWNjb21tb2RhdGlvbnMgYWZ0ZXIgbG9hZGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8QWNjb21tb2RhdGlvbnNQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdUYW1hcmluZG8gRGlyaWEgQmVhY2ggUmVzb3J0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdIb3RlbCBDYXBpdGFuIFN1aXpvJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIEFQSSBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKHVybDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvYWRtaW4vYWNjb21tb2RhdGlvbnMnKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgIGVycm9yOiB7IGNvZGU6ICdEQVRBQkFTRV9FUlJPUicsIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggYWNjb21tb2RhdGlvbnMnIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2FkbWluL2xvY2F0aW9ucycpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgIGRhdGE6IHsgbG9jYXRpb25zOiBtb2NrTG9jYXRpb25zIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdVbmtub3duIFVSTCcpKTtcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPEFjY29tbW9kYXRpb25zUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnaGVhZGluZycsIHsgbmFtZTogL2FjY29tbW9kYXRpb24gbWFuYWdlbWVudC9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTdGF0dXMgZGlzcGxheScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgc3RhdHVzIGJhZGdlcyBmb3IgYWNjb21tb2RhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPEFjY29tbW9kYXRpb25zUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnUHVibGlzaGVkJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdEcmFmdCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFwcGx5IGNvcnJlY3Qgc3R5bGluZyB0byBzdGF0dXMgYmFkZ2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBY2NvbW1vZGF0aW9uc1BhZ2UgLz4pO1xuXG4gICAgICAvLyBXYWl0IGZvciBhY2NvbW1vZGF0aW9ucyB0byBsb2FkIGZpcnN0XG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1RhbWFyaW5kbyBEaXJpYSBCZWFjaCBSZXNvcnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBHZXQgYWxsIFwiUHVibGlzaGVkXCIgdGV4dCBlbGVtZW50cyBhbmQgZmluZCB0aGUgYmFkZ2UgKG5vdCB0aGUgZmlsdGVyIG9wdGlvbilcbiAgICAgIGNvbnN0IHB1Ymxpc2hlZEVsZW1lbnRzID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgnUHVibGlzaGVkJyk7XG4gICAgICAvLyBUaGUgYmFkZ2Ugc2hvdWxkIGJlIGEgc3BhbiB3aXRoIHNwZWNpZmljIGNsYXNzZXMsIGZpbHRlciBvcHRpb25zIGFyZSBpbiBzZWxlY3Qvb3B0aW9uXG4gICAgICBjb25zdCBwdWJsaXNoZWRCYWRnZSA9IHB1Ymxpc2hlZEVsZW1lbnRzLmZpbmQoZWwgPT4gZWwudGFnTmFtZSA9PT0gJ1NQQU4nKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHB1Ymxpc2hlZEJhZGdlKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHB1Ymxpc2hlZEJhZGdlKS50b0hhdmVDbGFzcygnYmctanVuZ2xlLTEwMCcsICd0ZXh0LWp1bmdsZS04MDAnKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInVzZVJvdXRlciIsImZuIiwidXNlU2VhcmNoUGFyYW1zIiwiZ2V0IiwidXNlVG9hc3QiLCJhZGRUb2FzdCIsIklubGluZVNlY3Rpb25FZGl0b3IiLCJwYWdlVHlwZSIsInBhZ2VJZCIsImRpdiIsImRhdGEtdGVzdGlkIiwiRGF0YVRhYmxlIiwiZGF0YSIsImNvbHVtbnMiLCJsb2FkaW5nIiwib25Sb3dDbGljayIsIm9uRGVsZXRlIiwibGVuZ3RoIiwibWFwIiwiaXRlbSIsImluZGV4IiwiaWQiLCJvbkNsaWNrIiwic3R5bGUiLCJjdXJzb3IiLCJjb2wiLCJ2YWx1ZSIsImtleSIsImRpc3BsYXlWYWx1ZSIsInJlbmRlciIsImJ1dHRvbiIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJhcmlhLWxhYmVsIiwiRGF0YVRhYmxlV2l0aFN1c3BlbnNlIiwiZ2xvYmFsIiwiZmV0Y2giLCJkZXNjcmliZSIsIm1vY2tSb3V0ZXIiLCJwdXNoIiwibW9ja0FjY29tbW9kYXRpb25zIiwibmFtZSIsImFkZHJlc3MiLCJkZXNjcmlwdGlvbiIsImxvY2F0aW9uSWQiLCJjaGVja0luRGF0ZSIsImNoZWNrT3V0RGF0ZSIsInN0YXR1cyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsIm1vY2tMb2NhdGlvbnMiLCJwYXJlbnRMb2NhdGlvbklkIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJtb2NrUmV0dXJuVmFsdWUiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJ1cmwiLCJpbmNsdWRlcyIsIlByb21pc2UiLCJyZXNvbHZlIiwib2siLCJqc29uIiwic3VjY2VzcyIsImFjY29tbW9kYXRpb25zIiwibG9jYXRpb25zIiwicmVqZWN0IiwiRXJyb3IiLCJpdCIsIkFjY29tbW9kYXRpb25zUGFnZSIsIndhaXRGb3IiLCJleHBlY3QiLCJzY3JlZW4iLCJnZXRCeVJvbGUiLCJ0b0JlSW5UaGVEb2N1bWVudCIsImFkZEJ1dHRvbiIsImZpcmVFdmVudCIsImNsaWNrIiwiZ2V0QnlUZXh0IiwiY3JlYXRlUmVzcG9uc2UiLCJvcHRpb25zIiwibWV0aG9kIiwiZ2V0QnlMYWJlbFRleHQiLCJzdWJtaXR0ZWREYXRhIiwiSlNPTiIsInBhcnNlIiwiYm9keSIsInJvb21UeXBlc0J1dHRvbnMiLCJnZXRBbGxCeVJvbGUiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsImFjY29tbW9kYXRpb25Sb3ciLCJnZXRCeVRlc3RJZCIsInNlY3Rpb25FZGl0b3IiLCJ0b0hhdmVUZXh0Q29udGVudCIsImFjY29tbW9kYXRpb25OYW1lIiwiYWNjb21tb2RhdGlvbnNMaXN0IiwiZmlsdGVyIiwiYSIsInVuZGVmaW5lZCIsImRlbGV0ZUJ1dHRvbnMiLCJjb25maXJtQnV0dG9ucyIsImNvbmZpcm1CdXR0b24iLCJxdWVyeUJ5VGV4dCIsIm5vdCIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJwdWJsaXNoZWRFbGVtZW50cyIsImdldEFsbEJ5VGV4dCIsInB1Ymxpc2hlZEJhZGdlIiwiZmluZCIsImVsIiwidGFnTmFtZSIsInRvQmVEZWZpbmVkIiwidG9IYXZlQ2xhc3MiXSwibWFwcGluZ3MiOiI7QUFLQSxvQkFBb0I7QUFDcEJBLEtBQUtDLElBQUksQ0FBQyxtQkFBbUIsSUFBTyxDQUFBO1FBQ2xDQyxXQUFXRixLQUFLRyxFQUFFO1FBQ2xCQyxpQkFBaUJKLEtBQUtHLEVBQUUsQ0FBQyxJQUFPLENBQUE7Z0JBQzlCRSxLQUFLTCxLQUFLRyxFQUFFO1lBQ2QsQ0FBQTtJQUNGLENBQUE7QUFFQUgsS0FBS0MsSUFBSSxDQUFDLGdDQUFnQyxJQUFPLENBQUE7UUFDL0NLLFVBQVUsSUFBTyxDQUFBO2dCQUNmQyxVQUFVUCxLQUFLRyxFQUFFO1lBQ25CLENBQUE7SUFDRixDQUFBO0FBRUEsMkJBQTJCO0FBQzNCSCxLQUFLQyxJQUFJLENBQUMsMENBQTBDLElBQU8sQ0FBQTtRQUN6RE8scUJBQXFCLENBQUMsRUFBRUMsUUFBUSxFQUFFQyxNQUFNLEVBQU8saUJBQzdDLHFCQUFDQztnQkFBSUMsZUFBWTswQkFDZixjQUFBLHNCQUFDRDs7d0JBQUk7d0JBQTJCRjt3QkFBUzt3QkFBR0M7Ozs7SUFHbEQsQ0FBQTtBQUVBLDRCQUE0QjtBQUM1QlYsS0FBS0MsSUFBSSxDQUFDLDZCQUE2QixJQUFPLENBQUE7UUFDNUNZLFdBQVcsQ0FBQyxFQUFFQyxJQUFJLEVBQUVDLE9BQU8sRUFBRUMsT0FBTyxFQUFFQyxVQUFVLEVBQUVDLFFB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