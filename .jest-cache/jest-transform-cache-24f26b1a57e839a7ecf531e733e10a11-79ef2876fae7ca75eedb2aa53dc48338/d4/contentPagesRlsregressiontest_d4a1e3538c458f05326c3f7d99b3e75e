7f345eb00eba75402b7b813862cb248e
/**
 * Content Pages RLS Regression Test
 * 
 * This test prevents regression of the "violates row-level security policy" bug
 * that occurred when creating content pages with real authentication.
 * 
 * Bug Description:
 * - Content pages table had RLS policies enabled
 * - Service methods used service role client that bypassed RLS
 * - When called from API routes with real auth, RLS policies were enforced
 * - RLS policies were misconfigured or missing for authenticated users
 * - Result: "new row violates row-level security policy" error
 * 
 * This test validates:
 * - Content pages can be created with real authentication
 * - RLS policies allow authenticated users to manage content pages
 * - No RLS violation errors occur
 * 
 * Validates: Requirements 5.5
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _testDb = require("../helpers/testDb");
const _factories = require("../helpers/factories");
const _cleanup = require("../helpers/cleanup");
const _contentPagesService = /*#__PURE__*/ _interop_require_wildcard(require("../../services/contentPagesService"));
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
describe('Content Pages RLS Regression Tests', ()=>{
    afterEach(async ()=>{
        // Clean up test data
        await (0, _cleanup.cleanupTestContentPages)();
    });
    it('should create content page with real auth without RLS violation', async ()=>{
        await (0, _testDb.withTestDatabase)(async (db)=>{
            // Create authenticated user (not service role!)
            const { client, user } = await db.createAuthenticatedClient();
            // Create content page with real authentication
            const pageData = {
                title: `Test Page ${Date.now()}`,
                slug: `test-page-${Date.now()}`,
                type: 'custom',
                published: false
            };
            const result = await _contentPagesService.create(pageData);
            // THIS IS THE KEY TEST - Would have caught the RLS bug!
            // The bug caused: "new row violates row-level security policy"
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data).toBeDefined();
                expect(result.data.title).toBe(pageData.title);
                expect(result.data.slug).toBe(pageData.slug);
                expect(result.data.type).toBe(pageData.type);
            } else {
                // If this fails, check the error message
                console.error('Content page creation failed:', result.error);
                expect(result.error.message).not.toContain('row-level security');
                expect(result.error.message).not.toContain('policy');
            }
        });
    });
    it('should update content page with real auth without RLS errors', async ()=>{
        await (0, _testDb.withTestDatabase)(async (db)=>{
            const { client, user } = await db.createAuthenticatedClient();
            // Create content page
            const page = (0, _factories.createTestContentPage)();
            const { data: createdPage } = await client.from('content_pages').insert(page).select().single();
            // Update content page with real auth
            const result = await _contentPagesService.update(createdPage.id, {
                title: 'Updated Title',
                published: true
            });
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.title).toBe('Updated Title');
                expect(result.data.published).toBe(true);
            }
        });
    });
    it('should delete content page with real auth without RLS errors', async ()=>{
        await (0, _testDb.withTestDatabase)(async (db)=>{
            const { client, user } = await db.createAuthenticatedClient();
            // Create content page
            const page = (0, _factories.createTestContentPage)();
            const { data: createdPage } = await client.from('content_pages').insert(page).select().single();
            // Delete content page with real auth
            const result = await _contentPagesService.deleteContentPage(createdPage.id);
            expect(result.success).toBe(true);
        });
    });
    it('should list content pages with real auth without RLS errors', async ()=>{
        await (0, _testDb.withTestDatabase)(async (db)=>{
            const { client, user } = await db.createAuthenticatedClient();
            // Create multiple content pages
            const pages = [
                (0, _factories.createTestContentPage)({
                    title: 'Page 1',
                    slug: `page-1-${Date.now()}`
                }),
                (0, _factories.createTestContentPage)({
                    title: 'Page 2',
                    slug: `page-2-${Date.now()}`
                })
            ];
            await client.from('content_pages').insert(pages);
            // List content pages with real auth
            const result = await _contentPagesService.list();
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.length).toBeGreaterThanOrEqual(2);
            }
        });
    });
    it('should get content page by slug with real auth without RLS errors', async ()=>{
        await (0, _testDb.withTestDatabase)(async (db)=>{
            const { client, user } = await db.createAuthenticatedClient();
            // Create content page
            const page = (0, _factories.createTestContentPage)();
            const { data: createdPage } = await client.from('content_pages').insert(page).select().single();
            // Get content page by slug with real auth
            const result = await _contentPagesService.getBySlug(createdPage.slug);
            expect(result.success).toBe(true);
            if (result.success) {
                expect(result.data.id).toBe(createdPage.id);
                expect(result.data.slug).toBe(createdPage.slug);
            }
        });
    });
    it('should handle RLS policies correctly for different page types', async ()=>{
        await (0, _testDb.withTestDatabase)(async (db)=>{
            const { client, user } = await db.createAuthenticatedClient();
            // Test with different page types
            const pageTypes = [
                'custom',
                'home',
                'our_story',
                'accommodation',
                'transportation'
            ];
            for (const type of pageTypes){
                const pageData = {
                    title: `Test ${type} Page`,
                    slug: `test-${type}-page-${Date.now()}`,
                    type,
                    published: false
                };
                const result = await _contentPagesService.create(pageData);
                // Should not fail with RLS errors
                if (!result.success) {
                    expect(result.error.message).not.toContain('row-level security');
                    expect(result.error.message).not.toContain('policy');
                }
            }
        });
    });
    it('should allow publishing and unpublishing with real auth', async ()=>{
        await (0, _testDb.withTestDatabase)(async (db)=>{
            const { client, user } = await db.createAuthenticatedClient();
            // Create unpublished page
            const page = (0, _factories.createTestContentPage)({
                published: false
            });
            const { data: createdPage } = await client.from('content_pages').insert(page).select().single();
            // Publish page
            const publishResult = await _contentPagesService.update(createdPage.id, {
                published: true
            });
            expect(publishResult.success).toBe(true);
            if (publishResult.success) {
                expect(publishResult.data.published).toBe(true);
            }
            // Unpublish page
            const unpublishResult = await _contentPagesService.update(createdPage.id, {
                published: false
            });
            expect(unpublishResult.success).toBe(true);
            if (unpublishResult.success) {
                expect(unpublishResult.data.published).toBe(false);
            }
        });
    });
}); /**
 * Why This Test Would Have Caught the Bug:
 * 
 * The content pages RLS bug occurred because:
 * 1. Content pages table had RLS policies enabled
 * 2. Service methods used service role client (bypassed RLS)
 * 3. API routes used real auth (enforced RLS)
 * 4. RLS policies were misconfigured for authenticated users
 * 
 * This test explicitly:
 * - Uses real authentication (not service role)
 * - Calls service methods that interact with content_pages table
 * - Validates no RLS violation errors occur
 * - Tests all CRUD operations with RLS enforcement
 * - Tests different page types to ensure policies work for all cases
 * 
 * If the RLS policies are misconfigured, this test will fail with the exact
 * error message that users would see, making it easy to diagnose and fix.
 */ 

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvX190ZXN0c19fL3JlZ3Jlc3Npb24vY29udGVudFBhZ2VzUmxzLnJlZ3Jlc3Npb24udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbnRlbnQgUGFnZXMgUkxTIFJlZ3Jlc3Npb24gVGVzdFxuICogXG4gKiBUaGlzIHRlc3QgcHJldmVudHMgcmVncmVzc2lvbiBvZiB0aGUgXCJ2aW9sYXRlcyByb3ctbGV2ZWwgc2VjdXJpdHkgcG9saWN5XCIgYnVnXG4gKiB0aGF0IG9jY3VycmVkIHdoZW4gY3JlYXRpbmcgY29udGVudCBwYWdlcyB3aXRoIHJlYWwgYXV0aGVudGljYXRpb24uXG4gKiBcbiAqIEJ1ZyBEZXNjcmlwdGlvbjpcbiAqIC0gQ29udGVudCBwYWdlcyB0YWJsZSBoYWQgUkxTIHBvbGljaWVzIGVuYWJsZWRcbiAqIC0gU2VydmljZSBtZXRob2RzIHVzZWQgc2VydmljZSByb2xlIGNsaWVudCB0aGF0IGJ5cGFzc2VkIFJMU1xuICogLSBXaGVuIGNhbGxlZCBmcm9tIEFQSSByb3V0ZXMgd2l0aCByZWFsIGF1dGgsIFJMUyBwb2xpY2llcyB3ZXJlIGVuZm9yY2VkXG4gKiAtIFJMUyBwb2xpY2llcyB3ZXJlIG1pc2NvbmZpZ3VyZWQgb3IgbWlzc2luZyBmb3IgYXV0aGVudGljYXRlZCB1c2Vyc1xuICogLSBSZXN1bHQ6IFwibmV3IHJvdyB2aW9sYXRlcyByb3ctbGV2ZWwgc2VjdXJpdHkgcG9saWN5XCIgZXJyb3JcbiAqIFxuICogVGhpcyB0ZXN0IHZhbGlkYXRlczpcbiAqIC0gQ29udGVudCBwYWdlcyBjYW4gYmUgY3JlYXRlZCB3aXRoIHJlYWwgYXV0aGVudGljYXRpb25cbiAqIC0gUkxTIHBvbGljaWVzIGFsbG93IGF1dGhlbnRpY2F0ZWQgdXNlcnMgdG8gbWFuYWdlIGNvbnRlbnQgcGFnZXNcbiAqIC0gTm8gUkxTIHZpb2xhdGlvbiBlcnJvcnMgb2NjdXJcbiAqIFxuICogVmFsaWRhdGVzOiBSZXF1aXJlbWVudHMgNS41XG4gKi9cblxuaW1wb3J0IHsgd2l0aFRlc3REYXRhYmFzZSB9IGZyb20gJy4uL2hlbHBlcnMvdGVzdERiJztcbmltcG9ydCB7IGNyZWF0ZVRlc3RDb250ZW50UGFnZSB9IGZyb20gJy4uL2hlbHBlcnMvZmFjdG9yaWVzJztcbmltcG9ydCB7IGNsZWFudXBUZXN0Q29udGVudFBhZ2VzIH0gZnJvbSAnLi4vaGVscGVycy9jbGVhbnVwJztcbmltcG9ydCAqIGFzIGNvbnRlbnRQYWdlc1NlcnZpY2UgZnJvbSAnQC9zZXJ2aWNlcy9jb250ZW50UGFnZXNTZXJ2aWNlJztcblxuZGVzY3JpYmUoJ0NvbnRlbnQgUGFnZXMgUkxTIFJlZ3Jlc3Npb24gVGVzdHMnLCAoKSA9PiB7XG4gIGFmdGVyRWFjaChhc3luYyAoKSA9PiB7XG4gICAgLy8gQ2xlYW4gdXAgdGVzdCBkYXRhXG4gICAgYXdhaXQgY2xlYW51cFRlc3RDb250ZW50UGFnZXMoKTtcbiAgfSk7XG4gIFxuICBpdCgnc2hvdWxkIGNyZWF0ZSBjb250ZW50IHBhZ2Ugd2l0aCByZWFsIGF1dGggd2l0aG91dCBSTFMgdmlvbGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IHdpdGhUZXN0RGF0YWJhc2UoYXN5bmMgKGRiKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgYXV0aGVudGljYXRlZCB1c2VyIChub3Qgc2VydmljZSByb2xlISlcbiAgICAgIGNvbnN0IHsgY2xpZW50LCB1c2VyIH0gPSBhd2FpdCBkYi5jcmVhdGVBdXRoZW50aWNhdGVkQ2xpZW50KCk7XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBjb250ZW50IHBhZ2Ugd2l0aCByZWFsIGF1dGhlbnRpY2F0aW9uXG4gICAgICBjb25zdCBwYWdlRGF0YSA9IHtcbiAgICAgICAgdGl0bGU6IGBUZXN0IFBhZ2UgJHtEYXRlLm5vdygpfWAsXG4gICAgICAgIHNsdWc6IGB0ZXN0LXBhZ2UtJHtEYXRlLm5vdygpfWAsXG4gICAgICAgIHR5cGU6ICdjdXN0b20nIGFzIGNvbnN0LFxuICAgICAgICBwdWJsaXNoZWQ6IGZhbHNlLFxuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udGVudFBhZ2VzU2VydmljZS5jcmVhdGUocGFnZURhdGEpO1xuICAgICAgXG4gICAgICAvLyBUSElTIElTIFRIRSBLRVkgVEVTVCAtIFdvdWxkIGhhdmUgY2F1Z2h0IHRoZSBSTFMgYnVnIVxuICAgICAgLy8gVGhlIGJ1ZyBjYXVzZWQ6IFwibmV3IHJvdyB2aW9sYXRlcyByb3ctbGV2ZWwgc2VjdXJpdHkgcG9saWN5XCJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnRpdGxlKS50b0JlKHBhZ2VEYXRhLnRpdGxlKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnNsdWcpLnRvQmUocGFnZURhdGEuc2x1Zyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS50eXBlKS50b0JlKHBhZ2VEYXRhLnR5cGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgdGhpcyBmYWlscywgY2hlY2sgdGhlIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgY29uc29sZS5lcnJvcignQ29udGVudCBwYWdlIGNyZWF0aW9uIGZhaWxlZDonLCByZXN1bHQuZXJyb3IpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLm1lc3NhZ2UpLm5vdC50b0NvbnRhaW4oJ3Jvdy1sZXZlbCBzZWN1cml0eScpO1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLm1lc3NhZ2UpLm5vdC50b0NvbnRhaW4oJ3BvbGljeScpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgXG4gIGl0KCdzaG91bGQgdXBkYXRlIGNvbnRlbnQgcGFnZSB3aXRoIHJlYWwgYXV0aCB3aXRob3V0IFJMUyBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgd2l0aFRlc3REYXRhYmFzZShhc3luYyAoZGIpID0+IHtcbiAgICAgIGNvbnN0IHsgY2xpZW50LCB1c2VyIH0gPSBhd2FpdCBkYi5jcmVhdGVBdXRoZW50aWNhdGVkQ2xpZW50KCk7XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBjb250ZW50IHBhZ2VcbiAgICAgIGNvbnN0IHBhZ2UgPSBjcmVhdGVUZXN0Q29udGVudFBhZ2UoKTtcbiAgICAgIGNvbnN0IHsgZGF0YTogY3JlYXRlZFBhZ2UgfSA9IGF3YWl0IGNsaWVudFxuICAgICAgICAuZnJvbSgnY29udGVudF9wYWdlcycpXG4gICAgICAgIC5pbnNlcnQocGFnZSlcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKTtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGNvbnRlbnQgcGFnZSB3aXRoIHJlYWwgYXV0aFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udGVudFBhZ2VzU2VydmljZS51cGRhdGUoY3JlYXRlZFBhZ2UuaWQsIHtcbiAgICAgICAgdGl0bGU6ICdVcGRhdGVkIFRpdGxlJyxcbiAgICAgICAgcHVibGlzaGVkOiB0cnVlLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEudGl0bGUpLnRvQmUoJ1VwZGF0ZWQgVGl0bGUnKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLnB1Ymxpc2hlZCkudG9CZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIFxuICBpdCgnc2hvdWxkIGRlbGV0ZSBjb250ZW50IHBhZ2Ugd2l0aCByZWFsIGF1dGggd2l0aG91dCBSTFMgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IHdpdGhUZXN0RGF0YWJhc2UoYXN5bmMgKGRiKSA9PiB7XG4gICAgICBjb25zdCB7IGNsaWVudCwgdXNlciB9ID0gYXdhaXQgZGIuY3JlYXRlQXV0aGVudGljYXRlZENsaWVudCgpO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgY29udGVudCBwYWdlXG4gICAgICBjb25zdCBwYWdlID0gY3JlYXRlVGVzdENvbnRlbnRQYWdlKCk7XG4gICAgICBjb25zdCB7IGRhdGE6IGNyZWF0ZWRQYWdlIH0gPSBhd2FpdCBjbGllbnRcbiAgICAgICAgLmZyb20oJ2NvbnRlbnRfcGFnZXMnKVxuICAgICAgICAuaW5zZXJ0KHBhZ2UpXG4gICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAuc2luZ2xlKCk7XG4gICAgICBcbiAgICAgIC8vIERlbGV0ZSBjb250ZW50IHBhZ2Ugd2l0aCByZWFsIGF1dGhcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRlbnRQYWdlc1NlcnZpY2UuZGVsZXRlQ29udGVudFBhZ2UoY3JlYXRlZFBhZ2UuaWQpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuICBcbiAgaXQoJ3Nob3VsZCBsaXN0IGNvbnRlbnQgcGFnZXMgd2l0aCByZWFsIGF1dGggd2l0aG91dCBSTFMgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IHdpdGhUZXN0RGF0YWJhc2UoYXN5bmMgKGRiKSA9PiB7XG4gICAgICBjb25zdCB7IGNsaWVudCwgdXNlciB9ID0gYXdhaXQgZGIuY3JlYXRlQXV0aGVudGljYXRlZENsaWVudCgpO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgbXVsdGlwbGUgY29udGVudCBwYWdlc1xuICAgICAgY29uc3QgcGFnZXMgPSBbXG4gICAgICAgIGNyZWF0ZVRlc3RDb250ZW50UGFnZSh7IHRpdGxlOiAnUGFnZSAxJywgc2x1ZzogYHBhZ2UtMS0ke0RhdGUubm93KCl9YCB9KSxcbiAgICAgICAgY3JlYXRlVGVzdENvbnRlbnRQYWdlKHsgdGl0bGU6ICdQYWdlIDInLCBzbHVnOiBgcGFnZS0yLSR7RGF0ZS5ub3coKX1gIH0pLFxuICAgICAgXTtcbiAgICAgIFxuICAgICAgYXdhaXQgY2xpZW50LmZyb20oJ2NvbnRlbnRfcGFnZXMnKS5pbnNlcnQocGFnZXMpO1xuICAgICAgXG4gICAgICAvLyBMaXN0IGNvbnRlbnQgcGFnZXMgd2l0aCByZWFsIGF1dGhcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRlbnRQYWdlc1NlcnZpY2UubGlzdCgpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgyKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIFxuICBpdCgnc2hvdWxkIGdldCBjb250ZW50IHBhZ2UgYnkgc2x1ZyB3aXRoIHJlYWwgYXV0aCB3aXRob3V0IFJMUyBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgd2l0aFRlc3REYXRhYmFzZShhc3luYyAoZGIpID0+IHtcbiAgICAgIGNvbnN0IHsgY2xpZW50LCB1c2VyIH0gPSBhd2FpdCBkYi5jcmVhdGVBdXRoZW50aWNhdGVkQ2xpZW50KCk7XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBjb250ZW50IHBhZ2VcbiAgICAgIGNvbnN0IHBhZ2UgPSBjcmVhdGVUZXN0Q29udGVudFBhZ2UoKTtcbiAgICAgIGNvbnN0IHsgZGF0YTogY3JlYXRlZFBhZ2UgfSA9IGF3YWl0IGNsaWVudFxuICAgICAgICAuZnJvbSgnY29udGVudF9wYWdlcycpXG4gICAgICAgIC5pbnNlcnQocGFnZSlcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKTtcbiAgICAgIFxuICAgICAgLy8gR2V0IGNvbnRlbnQgcGFnZSBieSBzbHVnIHdpdGggcmVhbCBhdXRoXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb250ZW50UGFnZXNTZXJ2aWNlLmdldEJ5U2x1ZyhjcmVhdGVkUGFnZS5zbHVnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5pZCkudG9CZShjcmVhdGVkUGFnZS5pZCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5zbHVnKS50b0JlKGNyZWF0ZWRQYWdlLnNsdWcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgXG4gIGl0KCdzaG91bGQgaGFuZGxlIFJMUyBwb2xpY2llcyBjb3JyZWN0bHkgZm9yIGRpZmZlcmVudCBwYWdlIHR5cGVzJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IHdpdGhUZXN0RGF0YWJhc2UoYXN5bmMgKGRiKSA9PiB7XG4gICAgICBjb25zdCB7IGNsaWVudCwgdXNlciB9ID0gYXdhaXQgZGIuY3JlYXRlQXV0aGVudGljYXRlZENsaWVudCgpO1xuICAgICAgXG4gICAgICAvLyBUZXN0IHdpdGggZGlmZmVyZW50IHBhZ2UgdHlwZXNcbiAgICAgIGNvbnN0IHBhZ2VUeXBlcyA9IFsnY3VzdG9tJywgJ2hvbWUnLCAnb3VyX3N0b3J5JywgJ2FjY29tbW9kYXRpb24nLCAndHJhbnNwb3J0YXRpb24nXSBhcyBjb25zdDtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCB0eXBlIG9mIHBhZ2VUeXBlcykge1xuICAgICAgICBjb25zdCBwYWdlRGF0YSA9IHtcbiAgICAgICAgICB0aXRsZTogYFRlc3QgJHt0eXBlfSBQYWdlYCxcbiAgICAgICAgICBzbHVnOiBgdGVzdC0ke3R5cGV9LXBhZ2UtJHtEYXRlLm5vdygpfWAsXG4gICAgICAgICAgdHlwZSxcbiAgICAgICAgICBwdWJsaXNoZWQ6IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29udGVudFBhZ2VzU2VydmljZS5jcmVhdGUocGFnZURhdGEpO1xuICAgICAgICBcbiAgICAgICAgLy8gU2hvdWxkIG5vdCBmYWlsIHdpdGggUkxTIGVycm9yc1xuICAgICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5tZXNzYWdlKS5ub3QudG9Db250YWluKCdyb3ctbGV2ZWwgc2VjdXJpdHknKTtcbiAgICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLm1lc3NhZ2UpLm5vdC50b0NvbnRhaW4oJ3BvbGljeScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICBcbiAgaXQoJ3Nob3VsZCBhbGxvdyBwdWJsaXNoaW5nIGFuZCB1bnB1Ymxpc2hpbmcgd2l0aCByZWFsIGF1dGgnLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgd2l0aFRlc3REYXRhYmFzZShhc3luYyAoZGIpID0+IHtcbiAgICAgIGNvbnN0IHsgY2xpZW50LCB1c2VyIH0gPSBhd2FpdCBkYi5jcmVhdGVBdXRoZW50aWNhdGVkQ2xpZW50KCk7XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSB1bnB1Ymxpc2hlZCBwYWdlXG4gICAgICBjb25zdCBwYWdlID0gY3JlYXRlVGVzdENvbnRlbnRQYWdlKHsgcHVibGlzaGVkOiBmYWxzZSB9KTtcbiAgICAgIGNvbnN0IHsgZGF0YTogY3JlYXRlZFBhZ2UgfSA9IGF3YWl0IGNsaWVudFxuICAgICAgICAuZnJvbSgnY29udGVudF9wYWdlcycpXG4gICAgICAgIC5pbnNlcnQocGFnZSlcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKTtcbiAgICAgIFxuICAgICAgLy8gUHVibGlzaCBwYWdlXG4gICAgICBjb25zdCBwdWJsaXNoUmVzdWx0ID0gYXdhaXQgY29udGVudFBhZ2VzU2VydmljZS51cGRhdGUoY3JlYXRlZFBhZ2UuaWQsIHtcbiAgICAgICAgcHVibGlzaGVkOiB0cnVlLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChwdWJsaXNoUmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAocHVibGlzaFJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChwdWJsaXNoUmVzdWx0LmRhdGEucHVibGlzaGVkKS50b0JlKHRydWUpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBVbnB1Ymxpc2ggcGFnZVxuICAgICAgY29uc3QgdW5wdWJsaXNoUmVzdWx0ID0gYXdhaXQgY29udGVudFBhZ2VzU2VydmljZS51cGRhdGUoY3JlYXRlZFBhZ2UuaWQsIHtcbiAgICAgICAgcHVibGlzaGVkOiBmYWxzZSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QodW5wdWJsaXNoUmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAodW5wdWJsaXNoUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHVucHVibGlzaFJlc3VsdC5kYXRhLnB1Ymxpc2hlZCkudG9CZShmYWxzZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbi8qKlxuICogV2h5IFRoaXMgVGVzdCBXb3VsZCBIYXZlIENhdWdodCB0aGUgQnVnOlxuICogXG4gKiBUaGUgY29udGVudCBwYWdlcyBSTFMgYnVnIG9jY3VycmVkIGJlY2F1c2U6XG4gKiAxLiBDb250ZW50IHBhZ2VzIHRhYmxlIGhhZCBSTFMgcG9saWNpZXMgZW5hYmxlZFxuICogMi4gU2VydmljZSBtZXRob2RzIHVzZWQgc2VydmljZSByb2xlIGNsaWVudCAoYnlwYXNzZWQgUkxTKVxuICogMy4gQVBJIHJvdXRlcyB1c2VkIHJlYWwgYXV0aCAoZW5mb3JjZWQgUkxTKVxuICogNC4gUkxTIHBvbGljaWVzIHdlcmUgbWlzY29uZmlndXJlZCBmb3IgYXV0aGVudGljYXRlZCB1c2Vyc1xuICogXG4gKiBUaGlzIHRlc3QgZXhwbGljaXRseTpcbiAqIC0gVXNlcyByZWFsIGF1dGhlbnRpY2F0aW9uIChub3Qgc2VydmljZSByb2xlKVxuICogLSBDYWxscyBzZXJ2aWNlIG1ldGhvZHMgdGhhdCBpbnRlcmFjdCB3aXRoIGNvbnRlbnRfcGFnZXMgdGFibGVcbiAqIC0gVmFsaWRhdGVzIG5vIFJMUyB2aW9sYXRpb24gZXJyb3JzIG9jY3VyXG4gKiAtIFRlc3RzIGFsbCBDUlVEIG9wZXJhdGlvbnMgd2l0aCBSTFMgZW5mb3JjZW1lbnRcbiAqIC0gVGVzdHMgZGlmZmVyZW50IHBhZ2UgdHlwZXMgdG8gZW5zdXJlIHBvbGljaWVzIHdvcmsgZm9yIGFsbCBjYXNlc1xuICogXG4gKiBJZiB0aGUgUkxTIHBvbGljaWVzIGFyZSBtaXNjb25maWd1cmVkLCB0aGlzIHRlc3Qgd2lsbCBmYWlsIHdpdGggdGhlIGV4YWN0XG4gKiBlcnJvciBtZXNzYWdlIHRoYXQgdXNlcnMgd291bGQgc2VlLCBtYWtpbmcgaXQgZWFzeSB0byBkaWFnbm9zZSBhbmQgZml4LlxuICovXG4iXSwibmFtZXMiOlsiZGVzY3JpYmUiLCJhZnRlckVhY2giLCJjbGVhbnVwVGVzdENvbnRlbnRQYWdlcyIsIml0Iiwid2l0aFRlc3REYXRhYmFzZSIsImRiIiwiY2xpZW50IiwidXNlciIsImNyZWF0ZUF1dGhlbnRpY2F0ZWRDbGllbnQiLCJwYWdlRGF0YSIsInRpdGxlIiwiRGF0ZSIsIm5vdyIsInNsdWciLCJ0eXBlIiwicHVibGlzaGVkIiwicmVzdWx0IiwiY29udGVudFBhZ2VzU2VydmljZSIsImNyZWF0ZSIsImV4cGVjdCIsInN1Y2Nlc3MiLCJ0b0JlIiwiZGF0YSIsInRvQmVEZWZpbmVkIiwiY29uc29sZSIsImVycm9yIiwibWVzc2FnZSIsIm5vdCIsInRvQ29udGFpbiIsInBhZ2UiLCJjcmVhdGVUZXN0Q29udGVudFBhZ2UiLCJjcmVhdGVkUGFnZSIsImZyb20iLCJpbnNlcnQiLCJzZWxlY3QiLCJzaW5nbGUiLCJ1cGRhdGUiLCJpZCIsImRlbGV0ZUNvbnRlbnRQYWdlIiwicGFnZXMiLCJsaXN0IiwibGVuZ3RoIiwidG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCIsImdldEJ5U2x1ZyIsInBhZ2VUeXBlcyIsInB1Ymxpc2hSZXN1bHQiLCJ1bnB1Ymxpc2hSZXN1bHQiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBbUJDOzs7O3dCQUVnQzsyQkFDSzt5QkFDRTs2RUFDSDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRXJDQSxTQUFTLHNDQUFzQztJQUM3Q0MsVUFBVTtRQUNSLHFCQUFxQjtRQUNyQixNQUFNQyxJQUFBQSxnQ0FBdUI7SUFDL0I7SUFFQUMsR0FBRyxtRUFBbUU7UUFDcEUsTUFBTUMsSUFBQUEsd0JBQWdCLEVBQUMsT0FBT0M7WUFDNUIsZ0RBQWdEO1lBQ2hELE1BQU0sRUFBRUMsTUFBTSxFQUFFQyxJQUFJLEVBQUUsR0FBRyxNQUFNRixHQUFHRyx5QkFBeUI7WUFFM0QsK0NBQStDO1lBQy9DLE1BQU1DLFdBQVc7Z0JBQ2ZDLE9BQU8sQ0FBQyxVQUFVLEVBQUVDLEtBQUtDLEdBQUcsSUFBSTtnQkFDaENDLE1BQU0sQ0FBQyxVQUFVLEVBQUVGLEtBQUtDLEdBQUcsSUFBSTtnQkFDL0JFLE1BQU07Z0JBQ05DLFdBQVc7WUFDYjtZQUVBLE1BQU1DLFNBQVMsTUFBTUMscUJBQW9CQyxNQUFNLENBQUNUO1lBRWhELHdEQUF3RDtZQUN4RCwrREFBK0Q7WUFDL0RVLE9BQU9ILE9BQU9JLE9BQU8sRUFBRUMsSUFBSSxDQUFDO1lBRTVCLElBQUlMLE9BQU9JLE9BQU8sRUFBRTtnQkFDbEJELE9BQU9ILE9BQU9NLElBQUksRUFBRUMsV0FBVztnQkFDL0JKLE9BQU9ILE9BQU9NLElBQUksQ0FBQ1osS0FBSyxFQUFFVyxJQUFJLENBQUNaLFNBQVNDLEtBQUs7Z0JBQzdDUyxPQUFPSCxPQUFPTSxJQUFJLENBQUNULElBQUksRUFBRVEsSUFBSSxDQUFDWixTQUFTSSxJQUFJO2dCQUMzQ00sT0FBT0gsT0FBT00sSUFBSSxDQUFDUixJQUFJLEVBQUVPLElBQUksQ0FB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