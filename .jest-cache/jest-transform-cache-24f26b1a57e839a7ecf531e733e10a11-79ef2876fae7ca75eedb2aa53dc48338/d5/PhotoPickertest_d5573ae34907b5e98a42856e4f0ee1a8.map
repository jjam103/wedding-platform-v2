{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/PhotoPicker.test.tsx"],"sourcesContent":["import { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport { PhotoPicker } from './PhotoPicker';\n\n// Mock fetch\nglobal.fetch = jest.fn();\n\nconst mockPhotos = [\n  {\n    id: 'photo-1',\n    photo_url: 'https://example.com/photo1.jpg',\n    caption: 'Photo 1',\n    alt_text: 'Alt text 1',\n    moderation_status: 'approved' as const,\n    created_at: '2025-01-01T00:00:00Z',\n  },\n  {\n    id: 'photo-2',\n    photo_url: 'https://example.com/photo2.jpg',\n    caption: 'Photo 2',\n    alt_text: 'Alt text 2',\n    moderation_status: 'approved' as const,\n    created_at: '2025-01-02T00:00:00Z',\n  },\n  {\n    id: 'photo-3',\n    photo_url: 'https://example.com/photo3.jpg',\n    caption: 'Photo 3',\n    alt_text: 'Alt text 3',\n    moderation_status: 'approved' as const,\n    created_at: '2025-01-03T00:00:00Z',\n  },\n];\n\ndescribe('PhotoPicker', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('rendering', () => {\n    it('should render add photos button', () => {\n      const onSelectionChange = jest.fn();\n      render(\n        <PhotoPicker\n          selectedPhotoIds={[]}\n          onSelectionChange={onSelectionChange}\n        />\n      );\n\n      expect(screen.getByText('+ Add Photos from Gallery')).toBeInTheDocument();\n    });\n\n    it('should show selected photos count when photos are selected', () => {\n      const onSelectionChange = jest.fn();\n      render(\n        <PhotoPicker\n          selectedPhotoIds={['photo-1', 'photo-2']}\n          onSelectionChange={onSelectionChange}\n        />\n      );\n\n      expect(screen.getByText('Selected Photos (2)')).toBeInTheDocument();\n    });\n\n    it('should not show selected photos section when no photos selected', () => {\n      const onSelectionChange = jest.fn();\n      render(\n        <PhotoPicker\n          selectedPhotoIds={[]}\n          onSelectionChange={onSelectionChange}\n        />\n      );\n\n      expect(screen.queryByText(/Selected Photos/)).not.toBeInTheDocument();\n    });\n  });\n\n  describe('photo picker modal', () => {\n    it('should open modal when add photos button is clicked', async () => {\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        json: async () => ({\n          success: true,\n          data: { photos: mockPhotos, total: 3 },\n        }),\n      });\n\n      const onSelectionChange = jest.fn();\n      render(\n        <PhotoPicker\n          selectedPhotoIds={[]}\n          onSelectionChange={onSelectionChange}\n        />\n      );\n\n      fireEvent.click(screen.getByText('+ Add Photos from Gallery'));\n\n      await waitFor(() => {\n        expect(screen.getByText('Select Photos')).toBeInTheDocument();\n      });\n    });\n\n    it('should fetch photos when modal opens', async () => {\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        json: async () => ({\n          success: true,\n          data: { photos: mockPhotos, total: 3 },\n        }),\n      });\n\n      const onSelectionChange = jest.fn();\n      render(\n        <PhotoPicker\n          selectedPhotoIds={[]}\n          onSelectionChange={onSelectionChange}\n          pageType=\"event\"\n          pageId=\"event-123\"\n        />\n      );\n\n      fireEvent.click(screen.getByText('+ Add Photos from Gallery'));\n\n      await waitFor(() => {\n        expect(global.fetch).toHaveBeenCalledWith(\n          expect.stringContaining('/api/admin/photos')\n        );\n        expect(global.fetch).toHaveBeenCalledWith(\n          expect.stringContaining('page_type=event')\n        );\n        expect(global.fetch).toHaveBeenCalledWith(\n          expect.stringContaining('page_id=event-123')\n        );\n      });\n    });\n\n    it('should display loading state while fetching photos', async () => {\n      (global.fetch as jest.Mock).mockImplementationOnce(\n        () =>\n          new Promise(resolve =>\n            setTimeout(\n              () =>\n                resolve({\n                  json: async () => ({\n                    success: true,\n                    data: { photos: mockPhotos, total: 3 },\n                  }),\n                }),\n              100\n            )\n          )\n      );\n\n      const onSelectionChange = jest.fn();\n      render(\n        <PhotoPicker\n          selectedPhotoIds={[]}\n          onSelectionChange={onSelectionChange}\n        />\n      );\n\n      fireEvent.click(screen.getByText('+ Add Photos from Gallery'));\n\n      await waitFor(() => {\n        expect(screen.getByText('Loading photos...')).toBeInTheDocument();\n      });\n    });\n\n    it('should display error message when fetch fails', async () => {\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        json: async () => ({\n          success: false,\n          error: { message: 'Failed to load photos' },\n        }),\n      });\n\n      const onSelectionChange = jest.fn();\n      render(\n        <PhotoPicker\n          selectedPhotoIds={[]}\n          onSelectionChange={onSelectionChange}\n        />\n      );\n\n      fireEvent.click(screen.getByText('+ Add Photos from Gallery'));\n\n      await waitFor(() => {\n        expect(screen.getByText('Failed to load photos')).toBeInTheDocument();\n      });\n    });\n\n    it('should display message when no photos available', async () => {\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        json: async () => ({\n          success: true,\n          data: { photos: [], total: 0 },\n        }),\n      });\n\n      const onSelectionChange = jest.fn();\n      render(\n        <PhotoPicker\n          selectedPhotoIds={[]}\n          onSelectionChange={onSelectionChange}\n        />\n      );\n\n      fireEvent.click(screen.getByText('+ Add Photos from Gallery'));\n\n      await waitFor(() => {\n        expect(screen.getByText('No approved photos available.')).toBeInTheDocument();\n      });\n    });\n\n    it('should close modal when close button is clicked', async () => {\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        json: async () => ({\n          success: true,\n          data: { photos: mockPhotos, total: 3 },\n        }),\n      });\n\n      const onSelectionChange = jest.fn();\n      render(\n        <PhotoPicker\n          selectedPhotoIds={[]}\n          onSelectionChange={onSelectionChange}\n        />\n      );\n\n      fireEvent.click(screen.getByText('+ Add Photos from Gallery'));\n\n      await waitFor(() => {\n        expect(screen.getByText('Select Photos')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByLabelText('Close photo picker'));\n\n      await waitFor(() => {\n        expect(screen.queryByText('Select Photos')).not.toBeInTheDocument();\n      });\n    });\n\n    it('should close modal when done button is clicked', async () => {\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        json: async () => ({\n          success: true,\n          data: { photos: mockPhotos, total: 3 },\n        }),\n      });\n\n      const onSelectionChange = jest.fn();\n      render(\n        <PhotoPicker\n          selectedPhotoIds={[]}\n          onSelectionChange={onSelectionChange}\n        />\n      );\n\n      fireEvent.click(screen.getByText('+ Add Photos from Gallery'));\n\n      await waitFor(() => {\n        expect(screen.getByText('Select Photos')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Done'));\n\n      await waitFor(() => {\n        expect(screen.queryByText('Select Photos')).not.toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('photo selection', () => {\n    it('should call onSelectionChange when photo is selected', async () => {\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        json: async () => ({\n          success: true,\n          data: { photos: mockPhotos, total: 3 },\n        }),\n      });\n\n      const onSelectionChange = jest.fn();\n      render(\n        <PhotoPicker\n          selectedPhotoIds={[]}\n          onSelectionChange={onSelectionChange}\n        />\n      );\n\n      fireEvent.click(screen.getByText('+ Add Photos from Gallery'));\n\n      await waitFor(() => {\n        expect(screen.getByAltText('Alt text 1')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByAltText('Alt text 1'));\n\n      expect(onSelectionChange).toHaveBeenCalledWith(['photo-1']);\n    });\n\n    it('should call onSelectionChange when photo is deselected', async () => {\n      // Mock both the individual photo fetch and the gallery fetch\n      (global.fetch as jest.Mock)\n        .mockResolvedValueOnce({\n          json: async () => ({\n            success: true,\n            data: mockPhotos[0], // Individual photo fetch for selected photo\n          }),\n        })\n        .mockResolvedValueOnce({\n          json: async () => ({\n            success: true,\n            data: { photos: mockPhotos, total: 3 }, // Gallery fetch\n          }),\n        });\n\n      const onSelectionChange = jest.fn();\n      render(\n        <PhotoPicker\n          selectedPhotoIds={['photo-1']}\n          onSelectionChange={onSelectionChange}\n        />\n      );\n\n      // Wait for selected photo to load\n      await waitFor(() => {\n        expect(screen.getByText('Selected Photos (1)')).toBeInTheDocument();\n      });\n\n      // Open the modal\n      fireEvent.click(screen.getByText('+ Add Photos from Gallery'));\n\n      // Wait for modal to open and photos to load\n      await waitFor(() => {\n        expect(screen.getByText('Select Photos')).toBeInTheDocument();\n      });\n\n      await waitFor(() => {\n        const images = screen.queryAllByAltText('Alt text 1');\n        expect(images.length).toBeGreaterThan(0);\n      }, { timeout: 3000 });\n\n      // Click the photo in the modal to deselect it\n      const images = screen.getAllByAltText('Alt text 1');\n      const modalImage = images.find(img => {\n        const parent = img.closest('[role=\"dialog\"]') || img.closest('.modal');\n        return parent !== null;\n      });\n      \n      if (modalImage) {\n        fireEvent.click(modalImage);\n      } else {\n        // Fallback: click the last image (likely in modal)\n        fireEvent.click(images[images.length - 1]);\n      }\n\n      expect(onSelectionChange).toHaveBeenCalledWith([]);\n    });\n\n    it('should support multiple photo selection', async () => {\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        json: async () => ({\n          success: true,\n          data: { photos: mockPhotos, total: 3 },\n        }),\n      });\n\n      const onSelectionChange = jest.fn();\n      const { unmount } = render(\n        <PhotoPicker\n          selectedPhotoIds={[]}\n          onSelectionChange={onSelectionChange}\n        />\n      );\n\n      fireEvent.click(screen.getByText('+ Add Photos from Gallery'));\n\n      await waitFor(() => {\n        expect(screen.getByText('Select Photos')).toBeInTheDocument();\n      });\n\n      await waitFor(() => {\n        expect(screen.getByAltText('Alt text 1')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      fireEvent.click(screen.getByAltText('Alt text 1'));\n      expect(onSelectionChange).toHaveBeenCalledWith(['photo-1']);\n\n      // Clean up first render\n      unmount();\n\n      // Simulate re-render with updated selection\n      (global.fetch as jest.Mock)\n        .mockResolvedValueOnce({\n          json: async () => ({\n            success: true,\n            data: mockPhotos[0], // Individual photo fetch for photo-1\n          }),\n        })\n        .mockResolvedValueOnce({\n          json: async () => ({\n            success: true,\n            data: { photos: mockPhotos, total: 3 }, // Gallery fetch\n          }),\n        });\n\n      onSelectionChange.mockClear();\n      render(\n        <PhotoPicker\n          selectedPhotoIds={['photo-1']}\n          onSelectionChange={onSelectionChange}\n        />\n      );\n\n      // Wait for selected photo to load\n      await waitFor(() => {\n        expect(screen.getByText('Selected Photos (1)')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByLabelText('Add photos from gallery'));\n\n      await waitFor(() => {\n        expect(screen.getByText('Select Photos')).toBeInTheDocument();\n      });\n\n      await waitFor(() => {\n        expect(screen.getByAltText('Alt text 2')).toBeInTheDocument();\n      }, { timeout: 3000 });\n\n      fireEvent.click(screen.getByAltText('Alt text 2'));\n      expect(onSelectionChange).toHaveBeenCalledWith(['photo-1', 'photo-2']);\n    });\n\n    it('should display selected count in modal footer', async () => {\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        json: async () => ({\n          success: true,\n          data: { photos: mockPhotos, total: 3 },\n        }),\n      });\n\n      const onSelectionChange = jest.fn();\n      render(\n        <PhotoPicker\n          selectedPhotoIds={['photo-1', 'photo-2']}\n          onSelectionChange={onSelectionChange}\n        />\n      );\n\n      fireEvent.click(screen.getByText('+ Add Photos from Gallery'));\n\n      await waitFor(() => {\n        expect(screen.getByText('2 photos selected')).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('clear all functionality', () => {\n    it('should call onSelectionChange with empty array when clear all is clicked', () => {\n      const onSelectionChange = jest.fn();\n      render(\n        <PhotoPicker\n          selectedPhotoIds={['photo-1', 'photo-2']}\n          onSelectionChange={onSelectionChange}\n        />\n      );\n\n      fireEvent.click(screen.getByText('Clear All'));\n\n      expect(onSelectionChange).toHaveBeenCalledWith([]);\n    });\n  });\n\n  describe('disabled state', () => {\n    it('should disable add photos button when disabled prop is true', () => {\n      const onSelectionChange = jest.fn();\n      render(\n        <PhotoPicker\n          selectedPhotoIds={[]}\n          onSelectionChange={onSelectionChange}\n          disabled={true}\n        />\n      );\n\n      const button = screen.getByText('+ Add Photos from Gallery');\n      expect(button).toBeDisabled();\n    });\n\n    it('should disable clear all button when disabled prop is true', () => {\n      const onSelectionChange = jest.fn();\n      render(\n        <PhotoPicker\n          selectedPhotoIds={['photo-1']}\n          onSelectionChange={onSelectionChange}\n          disabled={true}\n        />\n      );\n\n      const button = screen.getByText('Clear All');\n      expect(button).toBeDisabled();\n    });\n  });\n});\n"],"names":["global","fetch","jest","fn","mockPhotos","id","photo_url","caption","alt_text","moderation_status","created_at","describe","beforeEach","clearAllMocks","it","onSelectionChange","render","PhotoPicker","selectedPhotoIds","expect","screen","getByText","toBeInTheDocument","queryByText","not","mockResolvedValueOnce","json","success","data","photos","total","fireEvent","click","waitFor","pageType","pageId","toHaveBeenCalledWith","stringContaining","mockImplementationOnce","Promise","resolve","setTimeout","error","message","getByLabelText","getByAltText","images","queryAllByAltText","length","toBeGreaterThan","timeout","getAllByAltText","modalImage","find","img","parent","closest","unmount","mockClear","disabled","button","toBeDisabled"],"mappings":"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"}