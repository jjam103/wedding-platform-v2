a989a48d359e98538a62a1aaac6a9031
/**
 * Unit Tests for Vendor Management Page
 * 
 * Tests specific functionality and user interactions for vendor management.
 * Focuses on testing the collapsible form integration, payment status display,
 * and category filtering.
 */ "use strict";
// Mock Next.js router
jest.mock('next/navigation', ()=>({
        useRouter: ()=>({
                push: jest.fn(),
                replace: jest.fn(),
                prefetch: jest.fn()
            }),
        useSearchParams: ()=>({
                get: jest.fn(()=>null)
            })
    }));
jest.mock('@/components/ui/ToastContext', ()=>({
        useToast: ()=>({
                addToast: mockAddToast
            })
    }));
// Mock DataTable components
jest.mock('@/components/ui/DataTable', ()=>({
        DataTable: ({ data, columns, loading, onRowClick })=>{
            if (loading) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "Loading..."
            });
            if (data.length === 0) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "No items found"
            });
            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "data-table",
                children: data.map((item, index)=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        "data-testid": `vendor-row-${item.id}`,
                        onClick: ()=>onRowClick && onRowClick(item),
                        style: {
                            cursor: onRowClick ? 'pointer' : 'default'
                        },
                        children: columns.map((col)=>{
                            const value = item[col.key];
                            const displayValue = col.render ? col.render(value, item) : value;
                            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                "data-testid": `${col.key}-${item.id}`,
                                children: displayValue
                            }, col.key);
                        })
                    }, index))
            });
        }
    }));
jest.mock('@/components/ui/DataTableWithSuspense', ()=>({
        DataTableWithSuspense: ({ data, columns, loading, onRowClick })=>{
            if (loading) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "Loading..."
            });
            if (data.length === 0) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "No items found"
            });
            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "data-table",
                children: data.map((item, index)=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        "data-testid": `vendor-row-${item.id}`,
                        onClick: ()=>onRowClick && onRowClick(item),
                        style: {
                            cursor: onRowClick ? 'pointer' : 'default'
                        },
                        children: columns.map((col)=>{
                            const value = item[col.key];
                            const displayValue = col.render ? col.render(value, item) : value;
                            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                "data-testid": `${col.key}-${item.id}`,
                                children: displayValue
                            }, col.key);
                        })
                    }, index))
            });
        }
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
require("@testing-library/jest-dom");
const _page = /*#__PURE__*/ _interop_require_default(require("./page"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock toast context
const mockAddToast = jest.fn();
// Mock fetch globally
global.fetch = jest.fn();
/**
 * Helper to create mock vendor
 */ function createMockVendor(overrides = {}) {
    return {
        id: overrides.id || 'vendor-1',
        name: overrides.name || 'Test Vendor',
        category: overrides.category || 'photography',
        contactName: overrides.contactName || null,
        email: overrides.email || null,
        phone: overrides.phone || null,
        pricingModel: overrides.pricingModel || 'flat_rate',
        baseCost: overrides.baseCost !== undefined ? overrides.baseCost : 1000,
        amountPaid: overrides.amountPaid !== undefined ? overrides.amountPaid : 0,
        paymentStatus: overrides.paymentStatus || 'unpaid',
        notes: overrides.notes || null,
        createdAt: overrides.createdAt || '2025-01-01T00:00:00Z',
        updatedAt: overrides.updatedAt || '2025-01-01T00:00:00Z'
    };
}
/**
 * Helper to setup fetch mocks
 */ function setupFetchMocks(vendors = []) {
    global.fetch.mockImplementation((url, options)=>{
        if (url.includes('/api/admin/vendors') && !options?.method) {
            return Promise.resolve({
                ok: true,
                json: ()=>Promise.resolve({
                        success: true,
                        data: {
                            vendors
                        }
                    })
            });
        }
        if (url.includes('/api/admin/vendors') && options?.method === 'POST') {
            const body = JSON.parse(options.body);
            return Promise.resolve({
                ok: true,
                json: ()=>Promise.resolve({
                        success: true,
                        data: createMockVendor({
                            ...body,
                            id: 'new-vendor-id'
                        })
                    })
            });
        }
        if (url.includes('/api/admin/vendors') && options?.method === 'PUT') {
            const body = JSON.parse(options.body);
            return Promise.resolve({
                ok: true,
                json: ()=>Promise.resolve({
                        success: true,
                        data: createMockVendor({
                            ...vendors[0],
                            ...body
                        })
                    })
            });
        }
        if (url.includes('/api/admin/vendors') && options?.method === 'DELETE') {
            return Promise.resolve({
                ok: true,
                json: ()=>Promise.resolve({
                        success: true,
                        data: undefined
                    })
            });
        }
        return Promise.resolve({
            ok: false,
            json: ()=>Promise.resolve({
                    success: false,
                    error: {
                        message: 'Not found'
                    }
                })
        });
    });
}
describe('VendorsPage - Basic Rendering', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        setupFetchMocks([]);
    });
    it('should render the vendors page with title and description', async ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
        expect(_react.screen.getByText('Vendor Management')).toBeInTheDocument();
        expect(_react.screen.getByText('Manage your wedding vendors and track payments')).toBeInTheDocument();
    });
    it('should render collapsible form component', async ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
        // Wait for page to load
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.queryByText('Loading...')).not.toBeInTheDocument();
        });
        // Form toggle button should be present
        expect(_react.screen.getByText('Add Vendor')).toBeInTheDocument();
    });
});
describe('VendorsPage - Payment Status Display', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    it('should display payment status badges correctly', async ()=>{
        const vendors = [
            createMockVendor({
                id: '1',
                name: 'Unpaid Vendor',
                paymentStatus: 'unpaid'
            }),
            createMockVendor({
                id: '2',
                name: 'Partial Vendor',
                paymentStatus: 'partial',
                amountPaid: 500
            }),
            createMockVendor({
                id: '3',
                name: 'Paid Vendor',
                paymentStatus: 'paid',
                amountPaid: 1000
            })
        ];
        setupFetchMocks(vendors);
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
        // Wait for vendors to load
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.queryByText('Loading...')).not.toBeInTheDocument();
        });
        // Check for payment status badges
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByText('UNPAID')).toBeInTheDocument();
            expect(_react.screen.getByText('PARTIAL')).toBeInTheDocument();
            expect(_react.screen.getByText('PAID')).toBeInTheDocument();
        });
    });
    it('should display vendor categories correctly', async ()=>{
        const vendors = [
            createMockVendor({
                id: '1',
                name: 'Photographer',
                category: 'photography'
            }),
            createMockVendor({
                id: '2',
                name: 'Caterer',
                category: 'catering'
            }),
            createMockVendor({
                id: '3',
                name: 'Florist',
                category: 'flowers'
            })
        ];
        setupFetchMocks(vendors);
        const { container } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
        // Wait for vendors to load
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.queryByText('Loading...')).not.toBeInTheDocument();
        });
        // Check that all vendors are displayed
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByText('Photographer')).toBeInTheDocument();
            expect(_react.screen.getByText('Caterer')).toBeInTheDocument();
            expect(_react.screen.getByText('Florist')).toBeInTheDocument();
        });
        // Check that category labels are displayed in the data table
        const dataTable = container.querySelector('[data-testid="data-table"]');
        expect(dataTable).toBeInTheDocument();
        expect(dataTable?.textContent).toContain('Photography');
        expect(dataTable?.textContent).toContain('Catering');
        expect(dataTable?.textContent).toContain('Flowers');
    });
});
describe('VendorsPage - Collapsible Form Integration', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        setupFetchMocks([]);
    });
    it('should toggle form visibility when clicking add vendor button', async ()=>{
        const { container } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
        // Wait for page to load
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.queryByText('Loading...')).not.toBeInTheDocument();
        });
        // Check that form is initially collapsed (button shows "Add Vendor")
        expect(_react.screen.getByText('Add Vendor')).toBeInTheDocument();
        // Click the toggle to open form
        const addButton = _react.screen.getByText('Add Vendor');
        _react.fireEvent.click(addButton);
        // Form fields should now be visible and interactable
        await (0, _react.waitFor)(()=>{
            const nameInput = _react.screen.getByLabelText(/Vendor Name/i);
            expect(nameInput).toBeVisible();
        });
        // Verify we can interact with the form
        const nameInput = _react.screen.getByLabelText(/Vendor Name/i);
        _react.fireEvent.change(nameInput, {
            target: {
                value: 'Test'
            }
        });
        expect(nameInput).toHaveValue('Test');
    });
    it('should display form fields for vendor creation', async ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
        // Wait for page to load
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.queryByText('Loading...')).not.toBeInTheDocument();
        });
        // Open the form
        const addButton = _react.screen.getByText('Add Vendor');
        _react.fireEvent.click(addButton);
        // Wait for form to open
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByLabelText(/Vendor Name/i)).toBeInTheDocument();
        });
        // Check that all required fields are present
        expect(_react.screen.getByLabelText(/Vendor Name/i)).toBeInTheDocument();
        expect(_react.screen.getByLabelText(/Category/i)).toBeInTheDocument();
        expect(_react.screen.getByLabelText(/Pricing Model/i)).toBeInTheDocument();
        expect(_react.screen.getByLabelText(/Base Cost/i)).toBeInTheDocument();
    });
});
describe('VendorsPage - Vendor Data Display', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    it('should display vendor list with correct data', async ()=>{
        const vendors = [
            createMockVendor({
                id: '1',
                name: 'Test Photographer',
                category: 'photography',
                baseCost: 2500,
                amountPaid: 1000,
                paymentStatus: 'partial'
            })
        ];
        setupFetchMocks(vendors);
        const { container } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
        // Wait for vendors to load
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.queryByText('Loading...')).not.toBeInTheDocument();
        });
        // Check vendor data is displayed
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByText('Test Photographer')).toBeInTheDocument();
            expect(_react.screen.getByText('PARTIAL')).toBeInTheDocument();
        });
        // Check category is displayed in the data table
        const dataTable = container.querySelector('[data-testid="data-table"]');
        expect(dataTable?.textContent).toContain('Photography');
    });
    it('should calculate and display balance correctly', async ()=>{
        const vendor = createMockVendor({
            id: '1',
            name: 'Test Vendor',
            baseCost: 2000,
            amountPaid: 500
        });
        setupFetchMocks([
            vendor
        ]);
        const { container } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
        // Wait for vendors to load
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.queryByText('Loading...')).not.toBeInTheDocument();
        });
        // Check that balance is calculated correctly (2000 - 500 = 1500)
        await (0, _react.waitFor)(()=>{
            const tableContent = container.textContent;
            expect(tableContent).toContain('1500.00');
        });
    });
});
describe('VendorsPage - Payment Validation', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        setupFetchMocks([]);
    });
    it.skip('should validate that amount paid does not exceed base cost', async ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
        // Wait for page to load
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.queryByText('Loading...')).not.toBeInTheDocument();
        });
        // Open the form
        const addButton = _react.screen.getByText('Add Vendor');
        _react.fireEvent.click(addButton);
        // Wait for form to open
        await (0, _react.waitFor)(()=>{
            const nameInput = _react.screen.getByLabelText(/Vendor Name/i);
            expect(nameInput).toBeVisible();
        });
        // Fill in required fields
        const nameInput = _react.screen.getByLabelText(/Vendor Name/i);
        const categorySelect = _react.screen.getByLabelText(/Category/i);
        const pricingModelSelect = _react.screen.getByLabelText(/Pricing Model/i);
        const baseCostInput = _react.screen.getByLabelText(/Base Cost/i);
        const amountPaidInput = _react.screen.getByLabelText(/Amount Paid/i);
        _react.fireEvent.change(nameInput, {
            target: {
                value: 'Test Vendor'
            }
        });
        _react.fireEvent.change(categorySelect, {
            target: {
                value: 'photography'
            }
        });
        _react.fireEvent.change(pricingModelSelect, {
            target: {
                value: 'flat_rate'
            }
        });
        _react.fireEvent.change(baseCostInput, {
            target: {
                value: '1000'
            }
        });
        _react.fireEvent.change(amountPaidInput, {
            target: {
                value: '1500'
            }
        });
        // Clear previous toast calls
        mockAddToast.mockClear();
        // Submit the form
        const submitButton = _react.screen.getByText('Create Vendor');
        _react.fireEvent.click(submitButton);
        // Should show error toast
        await (0, _react.waitFor)(()=>{
            expect(mockAddToast).toHaveBeenCalledWith(expect.objectContaining({
                type: 'error',
                message: expect.stringContaining('Amount paid cannot exceed base cost')
            }));
        }, {
            timeout: 2000
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FkbWluL3ZlbmRvcnMvcGFnZS50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVuaXQgVGVzdHMgZm9yIFZlbmRvciBNYW5hZ2VtZW50IFBhZ2VcbiAqIFxuICogVGVzdHMgc3BlY2lmaWMgZnVuY3Rpb25hbGl0eSBhbmQgdXNlciBpbnRlcmFjdGlvbnMgZm9yIHZlbmRvciBtYW5hZ2VtZW50LlxuICogRm9jdXNlcyBvbiB0ZXN0aW5nIHRoZSBjb2xsYXBzaWJsZSBmb3JtIGludGVncmF0aW9uLCBwYXltZW50IHN0YXR1cyBkaXNwbGF5LFxuICogYW5kIGNhdGVnb3J5IGZpbHRlcmluZy5cbiAqL1xuXG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgd2FpdEZvciwgZmlyZUV2ZW50IH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgJ0B0ZXN0aW5nLWxpYnJhcnkvamVzdC1kb20nO1xuaW1wb3J0IFZlbmRvcnNQYWdlIGZyb20gJy4vcGFnZSc7XG5cbi8vIE1vY2sgTmV4dC5qcyByb3V0ZXJcbmplc3QubW9jaygnbmV4dC9uYXZpZ2F0aW9uJywgKCkgPT4gKHtcbiAgdXNlUm91dGVyOiAoKSA9PiAoe1xuICAgIHB1c2g6IGplc3QuZm4oKSxcbiAgICByZXBsYWNlOiBqZXN0LmZuKCksXG4gICAgcHJlZmV0Y2g6IGplc3QuZm4oKSxcbiAgfSksXG4gIHVzZVNlYXJjaFBhcmFtczogKCkgPT4gKHtcbiAgICBnZXQ6IGplc3QuZm4oKCkgPT4gbnVsbCksXG4gIH0pLFxufSkpO1xuXG4vLyBNb2NrIHRvYXN0IGNvbnRleHRcbmNvbnN0IG1vY2tBZGRUb2FzdCA9IGplc3QuZm4oKTtcbmplc3QubW9jaygnQC9jb21wb25lbnRzL3VpL1RvYXN0Q29udGV4dCcsICgpID0+ICh7XG4gIHVzZVRvYXN0OiAoKSA9PiAoe1xuICAgIGFkZFRvYXN0OiBtb2NrQWRkVG9hc3QsXG4gIH0pLFxufSkpO1xuXG4vLyBNb2NrIERhdGFUYWJsZSBjb21wb25lbnRzXG5qZXN0Lm1vY2soJ0AvY29tcG9uZW50cy91aS9EYXRhVGFibGUnLCAoKSA9PiAoe1xuICBEYXRhVGFibGU6ICh7IGRhdGEsIGNvbHVtbnMsIGxvYWRpbmcsIG9uUm93Q2xpY2sgfTogYW55KSA9PiB7XG4gICAgaWYgKGxvYWRpbmcpIHJldHVybiA8ZGl2PkxvYWRpbmcuLi48L2Rpdj47XG4gICAgaWYgKGRhdGEubGVuZ3RoID09PSAwKSByZXR1cm4gPGRpdj5ObyBpdGVtcyBmb3VuZDwvZGl2PjtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImRhdGEtdGFibGVcIj5cbiAgICAgICAge2RhdGEubWFwKChpdGVtOiBhbnksIGluZGV4OiBudW1iZXIpID0+IChcbiAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAga2V5PXtpbmRleH0gXG4gICAgICAgICAgICBkYXRhLXRlc3RpZD17YHZlbmRvci1yb3ctJHtpdGVtLmlkfWB9XG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvblJvd0NsaWNrICYmIG9uUm93Q2xpY2soaXRlbSl9XG4gICAgICAgICAgICBzdHlsZT17eyBjdXJzb3I6IG9uUm93Q2xpY2sgPyAncG9pbnRlcicgOiAnZGVmYXVsdCcgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7Y29sdW1ucy5tYXAoKGNvbDogYW55KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gaXRlbVtjb2wua2V5XTtcbiAgICAgICAgICAgICAgY29uc3QgZGlzcGxheVZhbHVlID0gY29sLnJlbmRlciA/IGNvbC5yZW5kZXIodmFsdWUsIGl0ZW0pIDogdmFsdWU7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdiBrZXk9e2NvbC5rZXl9IGRhdGEtdGVzdGlkPXtgJHtjb2wua2V5fS0ke2l0ZW0uaWR9YH0+XG4gICAgICAgICAgICAgICAgICB7ZGlzcGxheVZhbHVlfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkpfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfSxcbn0pKTtcblxuamVzdC5tb2NrKCdAL2NvbXBvbmVudHMvdWkvRGF0YVRhYmxlV2l0aFN1c3BlbnNlJywgKCkgPT4gKHtcbiAgRGF0YVRhYmxlV2l0aFN1c3BlbnNlOiAoeyBkYXRhLCBjb2x1bW5zLCBsb2FkaW5nLCBvblJvd0NsaWNrIH06IGFueSkgPT4ge1xuICAgIGlmIChsb2FkaW5nKSByZXR1cm4gPGRpdj5Mb2FkaW5nLi4uPC9kaXY+O1xuICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDxkaXY+Tm8gaXRlbXMgZm91bmQ8L2Rpdj47XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJkYXRhLXRhYmxlXCI+XG4gICAgICAgIHtkYXRhLm1hcCgoaXRlbTogYW55LCBpbmRleDogbnVtYmVyKSA9PiAoXG4gICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgIGtleT17aW5kZXh9IFxuICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2B2ZW5kb3Itcm93LSR7aXRlbS5pZH1gfVxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gb25Sb3dDbGljayAmJiBvblJvd0NsaWNrKGl0ZW0pfVxuICAgICAgICAgICAgc3R5bGU9e3sgY3Vyc29yOiBvblJvd0NsaWNrID8gJ3BvaW50ZXInIDogJ2RlZmF1bHQnIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2NvbHVtbnMubWFwKChjb2w6IGFueSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGl0ZW1bY29sLmtleV07XG4gICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlWYWx1ZSA9IGNvbC5yZW5kZXIgPyBjb2wucmVuZGVyKHZhbHVlLCBpdGVtKSA6IHZhbHVlO1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYga2V5PXtjb2wua2V5fSBkYXRhLXRlc3RpZD17YCR7Y29sLmtleX0tJHtpdGVtLmlkfWB9PlxuICAgICAgICAgICAgICAgICAge2Rpc3BsYXlWYWx1ZX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApKX1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH0sXG59KSk7XG5cbi8vIE1vY2sgZmV0Y2ggZ2xvYmFsbHlcbmdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKTtcblxuLyoqXG4gKiBIZWxwZXIgdG8gY3JlYXRlIG1vY2sgdmVuZG9yXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU1vY2tWZW5kb3Iob3ZlcnJpZGVzOiBhbnkgPSB7fSkge1xuICByZXR1cm4ge1xuICAgIGlkOiBvdmVycmlkZXMuaWQgfHwgJ3ZlbmRvci0xJyxcbiAgICBuYW1lOiBvdmVycmlkZXMubmFtZSB8fCAnVGVzdCBWZW5kb3InLFxuICAgIGNhdGVnb3J5OiBvdmVycmlkZXMuY2F0ZWdvcnkgfHwgJ3Bob3RvZ3JhcGh5JyxcbiAgICBjb250YWN0TmFtZTogb3ZlcnJpZGVzLmNvbnRhY3ROYW1lIHx8IG51bGwsXG4gICAgZW1haWw6IG92ZXJyaWRlcy5lbWFpbCB8fCBudWxsLFxuICAgIHBob25lOiBvdmVycmlkZXMucGhvbmUgfHwgbnVsbCxcbiAgICBwcmljaW5nTW9kZWw6IG92ZXJyaWRlcy5wcmljaW5nTW9kZWwgfHwgJ2ZsYXRfcmF0ZScsXG4gICAgYmFzZUNvc3Q6IG92ZXJyaWRlcy5iYXNlQ29zdCAhPT0gdW5kZWZpbmVkID8gb3ZlcnJpZGVzLmJhc2VDb3N0IDogMTAwMCxcbiAgICBhbW91bnRQYWlkOiBvdmVycmlkZXMuYW1vdW50UGFpZCAhPT0gdW5kZWZpbmVkID8gb3ZlcnJpZGVzLmFtb3VudFBhaWQgOiAwLFxuICAgIHBheW1lbnRTdGF0dXM6IG92ZXJyaWRlcy5wYXltZW50U3RhdHVzIHx8ICd1bnBhaWQnLFxuICAgIG5vdGVzOiBvdmVycmlkZXMubm90ZXMgfHwgbnVsbCxcbiAgICBjcmVhdGVkQXQ6IG92ZXJyaWRlcy5jcmVhdGVkQXQgfHwgJzIwMjUtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICB1cGRhdGVkQXQ6IG92ZXJyaWRlcy51cGRhdGVkQXQgfHwgJzIwMjUtMDEtMDFUMDA6MDA6MDBaJyxcbiAgfTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gc2V0dXAgZmV0Y2ggbW9ja3NcbiAqL1xuZnVuY3Rpb24gc2V0dXBGZXRjaE1vY2tzKHZlbmRvcnM6IGFueVtdID0gW10pIHtcbiAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigodXJsOiBzdHJpbmcsIG9wdGlvbnM/OiBhbnkpID0+IHtcbiAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2FkbWluL3ZlbmRvcnMnKSAmJiAhb3B0aW9ucz8ubWV0aG9kKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7IHZlbmRvcnMgfSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9hZG1pbi92ZW5kb3JzJykgJiYgb3B0aW9ucz8ubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKG9wdGlvbnMuYm9keSk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiBjcmVhdGVNb2NrVmVuZG9yKHsgLi4uYm9keSwgaWQ6ICduZXctdmVuZG9yLWlkJyB9KSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9hZG1pbi92ZW5kb3JzJykgJiYgb3B0aW9ucz8ubWV0aG9kID09PSAnUFVUJykge1xuICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2Uob3B0aW9ucy5ib2R5KTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IGNyZWF0ZU1vY2tWZW5kb3IoeyAuLi52ZW5kb3JzWzBdLCAuLi5ib2R5IH0pLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2FkbWluL3ZlbmRvcnMnKSAmJiBvcHRpb25zPy5tZXRob2QgPT09ICdERUxFVEUnKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB1bmRlZmluZWQsXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgb2s6IGZhbHNlLFxuICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiB7IG1lc3NhZ2U6ICdOb3QgZm91bmQnIH0gfSksXG4gICAgfSk7XG4gIH0pO1xufVxuXG5kZXNjcmliZSgnVmVuZG9yc1BhZ2UgLSBCYXNpYyBSZW5kZXJpbmcnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIHNldHVwRmV0Y2hNb2NrcyhbXSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVuZGVyIHRoZSB2ZW5kb3JzIHBhZ2Ugd2l0aCB0aXRsZSBhbmQgZGVzY3JpcHRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgcmVuZGVyKDxWZW5kb3JzUGFnZSAvPik7XG5cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVmVuZG9yIE1hbmFnZW1lbnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnTWFuYWdlIHlvdXIgd2VkZGluZyB2ZW5kb3JzIGFuZCB0cmFjayBwYXltZW50cycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJlbmRlciBjb2xsYXBzaWJsZSBmb3JtIGNvbXBvbmVudCcsIGFzeW5jICgpID0+IHtcbiAgICByZW5kZXIoPFZlbmRvcnNQYWdlIC8+KTtcblxuICAgIC8vIFdhaXQgZm9yIHBhZ2UgdG8gbG9hZFxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnTG9hZGluZy4uLicpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIC8vIEZvcm0gdG9nZ2xlIGJ1dHRvbiBzaG91bGQgYmUgcHJlc2VudFxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdBZGQgVmVuZG9yJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdWZW5kb3JzUGFnZSAtIFBheW1lbnQgU3RhdHVzIERpc3BsYXknLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGRpc3BsYXkgcGF5bWVudCBzdGF0dXMgYmFkZ2VzIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB2ZW5kb3JzID0gW1xuICAgICAgY3JlYXRlTW9ja1ZlbmRvcih7IGlkOiAnMScsIG5hbWU6ICdVbnBhaWQgVmVuZG9yJywgcGF5bWVudFN0YXR1czogJ3VucGFpZCcgfSksXG4gICAgICBjcmVhdGVNb2NrVmVuZG9yKHsgaWQ6ICcyJywgbmFtZTogJ1BhcnRpYWwgVmVuZG9yJywgcGF5bWVudFN0YXR1czogJ3BhcnRpYWwnLCBhbW91bnRQYWlkOiA1MDAgfSksXG4gICAgICBjcmVhdGVNb2NrVmVuZG9yKHsgaWQ6ICczJywgbmFtZTogJ1BhaWQgVmVuZG9yJywgcGF5bWVudFN0YXR1czogJ3BhaWQnLCBhbW91bnRQYWlkOiAxMDAwIH0pLFxuICAgIF07XG5cbiAgICBzZXR1cEZldGNoTW9ja3ModmVuZG9ycyk7XG5cbiAgICByZW5kZXIoPFZlbmRvcnNQYWdlIC8+KTtcblxuICAgIC8vIFdhaXQgZm9yIHZlbmRvcnMgdG8gbG9hZFxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnTG9hZGluZy4uLicpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIC8vIENoZWNrIGZvciBwYXltZW50IHN0YXR1cyBiYWRnZXNcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdVTlBBSUQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdQQVJUSUFMJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnUEFJRCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGRpc3BsYXkgdmVuZG9yIGNhdGVnb3JpZXMgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHZlbmRvcnMgPSBbXG4gICAgICBjcmVhdGVNb2NrVmVuZG9yKHsgaWQ6ICcxJywgbmFtZTogJ1Bob3RvZ3JhcGhlcicsIGNhdGVnb3J5OiAncGhvdG9ncmFwaHknIH0pLFxuICAgICAgY3JlYXRlTW9ja1ZlbmRvcih7IGlkOiAnMicsIG5hbWU6ICdDYXRlcmVyJywgY2F0ZWdvcnk6ICdjYXRlcmluZycgfSksXG4gICAgICBjcmVhdGVNb2NrVmVuZG9yKHsgaWQ6ICczJywgbmFtZTogJ0Zsb3Jpc3QnLCBjYXRlZ29yeTogJ2Zsb3dlcnMnIH0pLFxuICAgIF07XG5cbiAgICBzZXR1cEZldGNoTW9ja3ModmVuZG9ycyk7XG5cbiAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gcmVuZGVyKDxWZW5kb3JzUGFnZSAvPik7XG5cbiAgICAvLyBXYWl0IGZvciB2ZW5kb3JzIHRvIGxvYWRcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ0xvYWRpbmcuLi4nKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICAvLyBDaGVjayB0aGF0IGFsbCB2ZW5kb3JzIGFyZSBkaXNwbGF5ZWRcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdQaG90b2dyYXBoZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDYXRlcmVyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnRmxvcmlzdCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgLy8gQ2hlY2sgdGhhdCBjYXRlZ29yeSBsYWJlbHMgYXJlIGRpc3BsYXllZCBpbiB0aGUgZGF0YSB0YWJsZVxuICAgIGNvbnN0IGRhdGFUYWJsZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS10ZXN0aWQ9XCJkYXRhLXRhYmxlXCJdJyk7XG4gICAgZXhwZWN0KGRhdGFUYWJsZSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3QoZGF0YVRhYmxlPy50ZXh0Q29udGVudCkudG9Db250YWluKCdQaG90b2dyYXBoeScpO1xuICAgIGV4cGVjdChkYXRhVGFibGU/LnRleHRDb250ZW50KS50b0NvbnRhaW4oJ0NhdGVyaW5nJyk7XG4gICAgZXhwZWN0KGRhdGFUYWJsZT8udGV4dENvbnRlbnQpLnRvQ29udGFpbignRmxvd2VycycpO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnVmVuZG9yc1BhZ2UgLSBDb2xsYXBzaWJsZSBGb3JtIEludGVncmF0aW9uJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBzZXR1cEZldGNoTW9ja3MoW10pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHRvZ2dsZSBmb3JtIHZpc2liaWxpdHkgd2hlbiBjbGlja2luZyBhZGQgdmVuZG9yIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gcmVuZGVyKDxWZW5kb3JzUGFnZSAvPik7XG5cbiAgICAvLyBXYWl0IGZvciBwYWdlIHRvIGxvYWRcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ0xvYWRpbmcuLi4nKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICAvLyBDaGVjayB0aGF0IGZvcm0gaXMgaW5pdGlhbGx5IGNvbGxhcHNlZCAoYnV0dG9uIHNob3dzIFwiQWRkIFZlbmRvclwiKVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdBZGQgVmVuZG9yJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAvLyBDbGljayB0aGUgdG9nZ2xlIHRvIG9wZW4gZm9ybVxuICAgIGNvbnN0IGFkZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ0FkZCBWZW5kb3InKTtcbiAgICBmaXJlRXZlbnQuY2xpY2soYWRkQnV0dG9uKTtcblxuICAgIC8vIEZvcm0gZmllbGRzIHNob3VsZCBub3cgYmUgdmlzaWJsZSBhbmQgaW50ZXJhY3RhYmxlXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBjb25zdCBuYW1lSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL1ZlbmRvciBOYW1lL2kpO1xuICAgICAgZXhwZWN0KG5hbWVJbnB1dCkudG9CZVZpc2libGUoKTtcbiAgICB9KTtcblxuICAgIC8vIFZlcmlmeSB3ZSBjYW4gaW50ZXJhY3Qgd2l0aCB0aGUgZm9ybVxuICAgIGNvbnN0IG5hbWVJbnB1dCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvVmVuZG9yIE5hbWUvaSk7XG4gICAgZmlyZUV2ZW50LmNoYW5nZShuYW1lSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnVGVzdCcgfSB9KTtcbiAgICBleHBlY3QobmFtZUlucHV0KS50b0hhdmVWYWx1ZSgnVGVzdCcpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGRpc3BsYXkgZm9ybSBmaWVsZHMgZm9yIHZlbmRvciBjcmVhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICByZW5kZXIoPFZlbmRvcnNQYWdlIC8+KTtcblxuICAgIC8vIFdhaXQgZm9yIHBhZ2UgdG8gbG9hZFxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnTG9hZGluZy4uLicpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIC8vIE9wZW4gdGhlIGZvcm1cbiAgICBjb25zdCBhZGRCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdBZGQgVmVuZG9yJyk7XG4gICAgZmlyZUV2ZW50LmNsaWNrKGFkZEJ1dHRvbik7XG5cbiAgICAvLyBXYWl0IGZvciBmb3JtIHRvIG9wZW5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL1ZlbmRvciBOYW1lL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgLy8gQ2hlY2sgdGhhdCBhbGwgcmVxdWlyZWQgZmllbGRzIGFyZSBwcmVzZW50XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvVmVuZG9yIE5hbWUvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvQ2F0ZWdvcnkvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvUHJpY2luZyBNb2RlbC9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9CYXNlIENvc3QvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdWZW5kb3JzUGFnZSAtIFZlbmRvciBEYXRhIERpc3BsYXknLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGRpc3BsYXkgdmVuZG9yIGxpc3Qgd2l0aCBjb3JyZWN0IGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdmVuZG9ycyA9IFtcbiAgICAgIGNyZWF0ZU1vY2tWZW5kb3Ioe1xuICAgICAgICBpZDogJzEnLFxuICAgICAgICBuYW1lOiAnVGVzdCBQaG90b2dyYXBoZXInLFxuICAgICAgICBjYXRlZ29yeTogJ3Bob3RvZ3JhcGh5JyxcbiAgICAgICAgYmFzZUNvc3Q6IDI1MDAsXG4gICAgICAgIGFtb3VudFBhaWQ6IDEwMDAsXG4gICAgICAgIHBheW1lbnRTdGF0dXM6ICdwYXJ0aWFsJyxcbiAgICAgIH0pLFxuICAgIF07XG5cbiAgICBzZXR1cEZldGNoTW9ja3ModmVuZG9ycyk7XG5cbiAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gcmVuZGVyKDxWZW5kb3JzUGFnZSAvPik7XG5cbiAgICAvLyBXYWl0IGZvciB2ZW5kb3JzIHRvIGxvYWRcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ0xvYWRpbmcuLi4nKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICAvLyBDaGVjayB2ZW5kb3IgZGF0YSBpcyBkaXNwbGF5ZWRcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdUZXN0IFBob3RvZ3JhcGhlcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1BBUlRJQUwnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIC8vIENoZWNrIGNhdGVnb3J5IGlzIGRpc3BsYXllZCBpbiB0aGUgZGF0YSB0YWJsZVxuICAgIGNvbnN0IGRhdGFUYWJsZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS10ZXN0aWQ9XCJkYXRhLXRhYmxlXCJdJyk7XG4gICAgZXhwZWN0KGRhdGFUYWJsZT8udGV4dENvbnRlbnQpLnRvQ29udGFpbignUGhvdG9ncmFwaHknKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgYW5kIGRpc3BsYXkgYmFsYW5jZSBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdmVuZG9yID0gY3JlYXRlTW9ja1ZlbmRvcih7XG4gICAgICBpZDogJzEnLFxuICAgICAgbmFtZTogJ1Rlc3QgVmVuZG9yJyxcbiAgICAgIGJhc2VDb3N0OiAyMDAwLFxuICAgICAgYW1vdW50UGFpZDogNTAwLFxuICAgIH0pO1xuXG4gICAgc2V0dXBGZXRjaE1vY2tzKFt2ZW5kb3JdKTtcblxuICAgIGNvbnN0IHsgY29udGFpbmVyIH0gPSByZW5kZXIoPFZlbmRvcnNQYWdlIC8+KTtcblxuICAgIC8vIFdhaXQgZm9yIHZlbmRvcnMgdG8gbG9hZFxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnTG9hZGluZy4uLicpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIC8vIENoZWNrIHRoYXQgYmFsYW5jZSBpcyBjYWxjdWxhdGVkIGNvcnJlY3RseSAoMjAwMCAtIDUwMCA9IDE1MDApXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBjb25zdCB0YWJsZUNvbnRlbnQgPSBjb250YWluZXIudGV4dENvbnRlbnQ7XG4gICAgICBleHBlY3QodGFibGVDb250ZW50KS50b0NvbnRhaW4oJzE1MDAuMDAnKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ1ZlbmRvcnNQYWdlIC0gUGF5bWVudCBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBzZXR1cEZldGNoTW9ja3MoW10pO1xuICB9KTtcblxuICBpdC5za2lwKCdzaG91bGQgdmFsaWRhdGUgdGhhdCBhbW91bnQgcGFpZCBkb2VzIG5vdCBleGNlZWQgYmFzZSBjb3N0JywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlcig8VmVuZG9yc1BhZ2UgLz4pO1xuXG4gICAgLy8gV2FpdCBmb3IgcGFnZSB0byBsb2FkXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdMb2FkaW5nLi4uJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgLy8gT3BlbiB0aGUgZm9ybVxuICAgIGNvbnN0IGFkZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ0FkZCBWZW5kb3InKTtcbiAgICBmaXJlRXZlbnQuY2xpY2soYWRkQnV0dG9uKTtcblxuICAgIC8vIFdhaXQgZm9yIGZvcm0gdG8gb3BlblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgY29uc3QgbmFtZUlucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9WZW5kb3IgTmFtZS9pKTtcbiAgICAgIGV4cGVjdChuYW1lSW5wdXQpLnRvQmVWaXNpYmxlKCk7XG4gICAgfSk7XG5cbiAgICAvLyBGaWxsIGluIHJlcXVpcmVkIGZpZWxkc1xuICAgIGNvbnN0IG5hbWVJbnB1dCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvVmVuZG9yIE5hbWUvaSk7XG4gICAgY29uc3QgY2F0ZWdvcnlTZWxlY3QgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL0NhdGVnb3J5L2kpO1xuICAgIGNvbnN0IHByaWNpbmdNb2RlbFNlbGVjdCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvUHJpY2luZyBNb2RlbC9pKTtcbiAgICBjb25zdCBiYXNlQ29zdElucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9CYXNlIENvc3QvaSk7XG4gICAgY29uc3QgYW1vdW50UGFpZElucHV0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9BbW91bnQgUGFpZC9pKTtcblxuICAgIGZpcmVFdmVudC5jaGFuZ2UobmFtZUlucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJ1Rlc3QgVmVuZG9yJyB9IH0pO1xuICAgIGZpcmVFdmVudC5jaGFuZ2UoY2F0ZWdvcnlTZWxlY3QsIHsgdGFyZ2V0OiB7IHZhbHVlOiAncGhvdG9ncmFwaHknIH0gfSk7XG4gICAgZmlyZUV2ZW50LmNoYW5nZShwcmljaW5nTW9kZWxTZWxlY3QsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnZmxhdF9yYXRlJyB9IH0pO1xuICAgIGZpcmVFdmVudC5jaGFuZ2UoYmFzZUNvc3RJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICcxMDAwJyB9IH0pO1xuICAgIGZpcmVFdmVudC5jaGFuZ2UoYW1vdW50UGFpZElucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogJzE1MDAnIH0gfSk7XG5cbiAgICAvLyBDbGVhciBwcmV2aW91cyB0b2FzdCBjYWxsc1xuICAgIG1vY2tBZGRUb2FzdC5tb2NrQ2xlYXIoKTtcblxuICAgIC8vIFN1Ym1pdCB0aGUgZm9ybVxuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ0NyZWF0ZSBWZW5kb3InKTtcbiAgICBmaXJlRXZlbnQuY2xpY2soc3VibWl0QnV0dG9uKTtcblxuICAgIC8vIFNob3VsZCBzaG93IGVycm9yIHRvYXN0XG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3QobW9ja0FkZFRvYXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgbWVzc2FnZTogZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ0Ftb3VudCBwYWlkIGNhbm5vdCBleGNlZWQgYmFzZSBjb3N0JyksXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0sIHsgdGltZW91dDogMjAwMCB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInVzZVJvdXRlciIsInB1c2giLCJmbiIsInJlcGxhY2UiLCJwcmVmZXRjaCIsInVzZVNlYXJjaFBhcmFtcyIsImdldCIsInVzZVRvYXN0IiwiYWRkVG9hc3QiLCJtb2NrQWRkVG9hc3QiLCJEYXRhVGFibGUiLCJkYXRhIiwiY29sdW1ucyIsImxvYWRpbmciLCJvblJvd0NsaWNrIiwiZGl2IiwibGVuZ3RoIiwiZGF0YS10ZXN0aWQiLCJtYXAiLCJpdGVtIiwiaW5kZXgiLCJpZCIsIm9uQ2xpY2siLCJzdHlsZSIsImN1cnNvciIsImNvbCIsInZhbHVlIiwia2V5IiwiZGlzcGxheVZhbHVlIiwicmVuZGVyIiwiRGF0YVRhYmxlV2l0aFN1c3BlbnNlIiwiZ2xvYmFsIiwiZmV0Y2giLCJjcmVhdGVNb2NrVmVuZG9yIiwib3ZlcnJpZGVzIiwibmFtZSIsImNhdGVnb3J5IiwiY29udGFjdE5hbWUiLCJlbWFpbCIsInBob25lIiwicHJpY2luZ01vZGVsIiwiYmFzZUNvc3QiLCJ1bmRlZmluZWQiLCJhbW91bnRQYWlkIiwicGF5bWVudFN0YXR1cyIsIm5vdGVzIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0Iiwic2V0dXBGZXRjaE1vY2tzIiwidmVuZG9ycyIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsInVybCIsIm9wdGlvbnMiLCJpbmNsdWRlcyIsIm1ldGhvZCIsIlByb21pc2UiLCJyZXNvbHZlIiwib2siLCJqc29uIiwic3VjY2VzcyIsImJvZHkiLCJKU09OIiwicGFyc2UiLCJlcnJvciIsIm1lc3NhZ2UiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiaXQiLCJWZW5kb3JzUGFnZSIsImV4cGVjdCIsInNjcmVlbiIsImdldEJ5VGV4dCIsInRvQmVJblRoZURvY3VtZW50Iiwid2FpdEZvciIsInF1ZXJ5QnlUZXh0Iiwibm90IiwiY29udGFpbmVyIiwiZGF0YVRhYmxlIiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50IiwidG9Db250YWluIiwiYWRkQnV0dG9uIiwiZmlyZUV2ZW50IiwiY2xpY2siLCJuYW1lSW5wdXQiLCJnZXRCeUxhYmVsVGV4dCIsInRvQmVWaXNpYmxlIiwiY2hhbmdlIiwidGFyZ2V0IiwidG9IYXZlVmFsdWUiLCJ2ZW5kb3IiLCJ0YWJsZUNvbnRlbnQiLCJza2lwIiwiY2F0ZWdvcnlTZWxlY3QiLCJwcmljaW5nTW9kZWxTZWxlY3QiLCJiYXNlQ29zdElucHV0IiwiYW1vdW50UGFpZElucHV0IiwibW9ja0NsZWFyIiwic3VibWl0QnV0dG9uIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJvYmplY3RDb250YWluaW5nIiwidHlwZSIsInN0cmluZ0NvbnRhaW5pbmciLCJ0aW1lb3V0Il0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0NBTUM7QUFNRCxzQkFBc0I7QUFDdEJBLEtBQUtDLElBQUksQ0FBQyxtQkFBbUIsSUFBTyxDQUFBO1FBQ2xDQyxXQUFXLElBQU8sQ0FB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