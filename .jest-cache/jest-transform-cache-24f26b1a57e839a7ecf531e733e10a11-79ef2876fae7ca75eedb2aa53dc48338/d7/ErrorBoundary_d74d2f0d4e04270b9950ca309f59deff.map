{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/ui/ErrorBoundary.tsx"],"sourcesContent":["'use client';\n\nimport { Component, type ReactNode } from 'react';\nimport { Button } from './Button';\nimport { TropicalIcon } from './TropicalIcon';\n\ninterface ErrorBoundaryProps {\n  children: ReactNode;\n  fallback?: (error: Error, reset: () => void) => ReactNode;\n  onError?: (error: Error, errorInfo: React.ErrorInfo) => void;\n}\n\ninterface ErrorBoundaryState {\n  hasError: boolean;\n  error: Error | null;\n}\n\n/**\n * Error Boundary Component\n * \n * Catches JavaScript errors anywhere in the child component tree,\n * logs those errors, and displays a fallback UI instead of crashing.\n * \n * Features:\n * - User-friendly error messages\n * - Retry button for network errors\n * - Error logging to console\n * - Custom fallback UI support\n * \n * Requirements: 12.1, 12.4, 12.5\n */\nexport class ErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): ErrorBoundaryState {\n    // Update state so the next render will show the fallback UI\n    return {\n      hasError: true,\n      error,\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo): void {\n    // Log error to console for debugging\n    console.error('Error caught by ErrorBoundary:', error, errorInfo);\n\n    // Call custom error handler if provided\n    if (this.props.onError) {\n      this.props.onError(error, errorInfo);\n    }\n  }\n\n  handleReset = (): void => {\n    this.setState({\n      hasError: false,\n      error: null,\n    });\n  };\n\n  render(): ReactNode {\n    if (this.state.hasError && this.state.error) {\n      // Use custom fallback if provided\n      if (this.props.fallback) {\n        return this.props.fallback(this.state.error, this.handleReset);\n      }\n\n      // Default fallback UI\n      return <DefaultErrorFallback error={this.state.error} onReset={this.handleReset} />;\n    }\n\n    return this.props.children;\n  }\n}\n\n/**\n * Default Error Fallback Component\n * \n * Displays a user-friendly error message with retry option.\n */\ninterface DefaultErrorFallbackProps {\n  error: Error;\n  onReset: () => void;\n}\n\nfunction DefaultErrorFallback({ error, onReset }: DefaultErrorFallbackProps) {\n  // Determine if this is a network error\n  const isNetworkError = \n    error.message.includes('fetch') ||\n    error.message.includes('network') ||\n    error.message.includes('Failed to load') ||\n    error.message.includes('timeout');\n\n  // Get user-friendly error message\n  const getUserFriendlyMessage = (error: Error): string => {\n    if (isNetworkError) {\n      return 'Unable to connect to the server. Please check your internet connection and try again.';\n    }\n\n    if (error.message.includes('permission') || error.message.includes('unauthorized')) {\n      return 'You do not have permission to access this resource.';\n    }\n\n    if (error.message.includes('not found')) {\n      return 'The requested resource could not be found.';\n    }\n\n    return 'An unexpected error occurred. Please try again or contact support if the problem persists.';\n  };\n\n  return (\n    <div className=\"min-h-[400px] flex items-center justify-center p-6\">\n      <div className=\"max-w-md w-full bg-white rounded-lg shadow-lg border border-volcano-200 p-8 text-center\">\n        {/* Error Icon */}\n        <div className=\"mb-6\">\n          <TropicalIcon name=\"volcano\" size=\"xl\" className=\"text-volcano-500 mx-auto\" />\n        </div>\n\n        {/* Error Title */}\n        <h2 className=\"text-2xl font-bold text-sage-900 mb-3\">\n          Oops! Something went wrong\n        </h2>\n\n        {/* User-friendly error message */}\n        <p className=\"text-sage-600 mb-6\">\n          {getUserFriendlyMessage(error)}\n        </p>\n\n        {/* Technical details (collapsed by default) */}\n        <details className=\"mb-6 text-left\">\n          <summary className=\"cursor-pointer text-sm text-sage-500 hover:text-sage-700 mb-2\">\n            Technical details\n          </summary>\n          <div className=\"bg-sage-50 rounded-lg p-4 text-xs font-mono text-sage-700 overflow-auto max-h-32\">\n            {error.message}\n          </div>\n        </details>\n\n        {/* Action buttons */}\n        <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n          {isNetworkError && (\n            <Button\n              onClick={onReset}\n              variant=\"primary\"\n              size=\"md\"\n            >\n              Retry\n            </Button>\n          )}\n          <Button\n            onClick={() => window.location.reload()}\n            variant={isNetworkError ? 'secondary' : 'primary'}\n            size=\"md\"\n          >\n            Reload Page\n          </Button>\n          <Button\n            onClick={() => window.history.back()}\n            variant=\"ghost\"\n            size=\"md\"\n          >\n            Go Back\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/**\n * Page Error Boundary\n * \n * Specialized error boundary for page-level errors.\n * Provides a full-page error display with navigation options.\n */\ninterface PageErrorBoundaryProps {\n  children: ReactNode;\n  pageName?: string;\n}\n\nexport function PageErrorBoundary({ children, pageName }: PageErrorBoundaryProps) {\n  return (\n    <ErrorBoundary\n      fallback={(error, reset) => (\n        <div className=\"min-h-screen bg-cloud-100 flex items-center justify-center p-6\">\n          <div className=\"max-w-lg w-full bg-white rounded-lg shadow-xl border border-volcano-200 p-8 text-center\">\n            {/* Error Icon */}\n            <div className=\"mb-6\">\n              <div className=\"w-20 h-20 bg-volcano-100 rounded-full flex items-center justify-center mx-auto\">\n                <span className=\"text-4xl\">⚠️</span>\n              </div>\n            </div>\n\n            {/* Error Title */}\n            <h1 className=\"text-3xl font-bold text-sage-900 mb-3\">\n              {pageName ? `Error loading ${pageName}` : 'Page Error'}\n            </h1>\n\n            {/* Error message */}\n            <p className=\"text-sage-600 mb-6\">\n              We encountered an error while loading this page. This has been logged and we'll look into it.\n            </p>\n\n            {/* Technical details */}\n            <details className=\"mb-6 text-left\">\n              <summary className=\"cursor-pointer text-sm text-sage-500 hover:text-sage-700 mb-2\">\n                Error details\n              </summary>\n              <div className=\"bg-sage-50 rounded-lg p-4 text-xs font-mono text-sage-700 overflow-auto max-h-40\">\n                <div className=\"mb-2\">\n                  <strong>Message:</strong> {error.message}\n                </div>\n                {error.stack && (\n                  <div>\n                    <strong>Stack:</strong>\n                    <pre className=\"mt-1 whitespace-pre-wrap\">{error.stack}</pre>\n                  </div>\n                )}\n              </div>\n            </details>\n\n            {/* Action buttons */}\n            <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n              <Button onClick={reset} variant=\"primary\" size=\"md\">\n                Try Again\n              </Button>\n              <Button onClick={() => window.location.href = '/admin'} variant=\"secondary\" size=\"md\">\n                Go to Dashboard\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n      onError={(error, errorInfo) => {\n        // Log to console for debugging\n        console.error(`Error in ${pageName || 'page'}:`, error, errorInfo);\n        \n        // In production, you would send this to an error tracking service\n        // e.g., Sentry, LogRocket, etc.\n      }}\n    >\n      {children}\n    </ErrorBoundary>\n  );\n}\n\n/**\n * Component Error Boundary\n * \n * Specialized error boundary for component-level errors.\n * Provides an inline error display that doesn't break the entire page.\n */\ninterface ComponentErrorBoundaryProps {\n  children: ReactNode;\n  componentName?: string;\n}\n\nexport function ComponentErrorBoundary({ children, componentName }: ComponentErrorBoundaryProps) {\n  return (\n    <ErrorBoundary\n      fallback={(error, reset) => (\n        <div className=\"bg-volcano-50 border border-volcano-200 rounded-lg p-6\">\n          <div className=\"flex items-start gap-4\">\n            <span className=\"text-2xl\">⚠️</span>\n            <div className=\"flex-1\">\n              <h3 className=\"font-semibold text-volcano-900 mb-2\">\n                {componentName ? `Error in ${componentName}` : 'Component Error'}\n              </h3>\n              <p className=\"text-sm text-volcano-700 mb-3\">\n                This component encountered an error and couldn't be displayed.\n              </p>\n              <details className=\"mb-3\">\n                <summary className=\"cursor-pointer text-xs text-volcano-600 hover:text-volcano-800\">\n                  Show details\n                </summary>\n                <div className=\"mt-2 bg-white rounded p-2 text-xs font-mono text-sage-700\">\n                  {error.message}\n                </div>\n              </details>\n              <Button onClick={reset} variant=\"secondary\" size=\"sm\">\n                Retry\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n      onError={(error, errorInfo) => {\n        console.error(`Error in ${componentName || 'component'}:`, error, errorInfo);\n      }}\n    >\n      {children}\n    </ErrorBoundary>\n  );\n}\n"],"names":["ComponentErrorBoundary","ErrorBoundary","PageErrorBoundary","Component","props","handleReset","setState","hasError","error","state","getDerivedStateFromError","componentDidCatch","errorInfo","console","onError","render","fallback","DefaultErrorFallback","onReset","children","isNetworkError","message","includes","getUserFriendlyMessage","div","className","TropicalIcon","name","size","h2","p","details","summary","Button","onClick","variant","window","location","reload","history","back","pageName","reset","span","h1","strong","stack","pre","href","componentName","h3"],"mappings":"AAAA;;;;;;;;;;;;QAsQgBA;eAAAA;;QAvOHC;eAAAA;;QA0JGC;eAAAA;;;;uBAvL0B;wBACnB;8BACM;AA2BtB,MAAMD,sBAAsBE,gBAAS;IAC1C,YAAYC,KAAyB,CAAE;QACrC,KAAK,CAACA,aAyBRC,cAAc;YACZ,IAAI,CAACC,QAAQ,CAAC;gBACZC,UAAU;gBACVC,OAAO;YACT;QACF;QA7BE,IAAI,CAACC,KAAK,GAAG;YACXF,UAAU;YACVC,OAAO;QACT;IACF;IAEA,OAAOE,yBAAyBF,KAAY,EAAsB;QAChE,4DAA4D;QAC5D,OAAO;YACLD,UAAU;YACVC;QACF;IACF;IAEAG,kBAAkBH,KAAY,EAAEI,SAA0B,EAAQ;QAChE,qCAAqC;QACrCC,QAAQL,KAAK,CAAC,kCAAkCA,OAAOI;QAEvD,wCAAwC;QACxC,IAAI,IAAI,CAACR,KAAK,CAACU,OAAO,EAAE;YACtB,IAAI,CAACV,KAAK,CAACU,OAAO,CAACN,OAAOI;QAC5B;IACF;IASAG,SAAoB;QAClB,IAAI,IAAI,CAACN,KAAK,CAACF,QAAQ,IAAI,IAAI,CAACE,KAAK,CAACD,KAAK,EAAE;YAC3C,kCAAkC;YAClC,IAAI,IAAI,CAACJ,KAAK,CAACY,QAAQ,EAAE;gBACvB,OAAO,IAAI,CAACZ,KAAK,CAACY,QAAQ,CAAC,IAAI,CAACP,KAAK,CAACD,KAAK,EAAE,IAAI,CAACH,WAAW;YAC/D;YAEA,sBAAsB;YACtB,qBAAO,qBAACY;gBAAqBT,OAAO,IAAI,CAACC,KAAK,CAACD,KAAK;gBAAEU,SAAS,IAAI,CAACb,WAAW;;QACjF;QAEA,OAAO,IAAI,CAACD,KAAK,CAACe,QAAQ;IAC5B;AACF;AAYA,SAASF,qBAAqB,EAAET,KAAK,EAAEU,OAAO,EAA6B;IACzE,uCAAuC;IACvC,MAAME,iBACJZ,MAAMa,OAAO,CAACC,QAAQ,CAAC,YACvBd,MAAMa,OAAO,CAACC,QAAQ,CAAC,cACvBd,MAAMa,OAAO,CAACC,QAAQ,CAAC,qBACvBd,MAAMa,OAAO,CAACC,QAAQ,CAAC;IAEzB,kCAAkC;IAClC,MAAMC,yBAAyB,CAACf;QAC9B,IAAIY,gBAAgB;YAClB,OAAO;QACT;QAEA,IAAIZ,MAAMa,OAAO,CAACC,QAAQ,CAAC,iBAAiBd,MAAMa,OAAO,CAACC,QAAQ,CAAC,iBAAiB;YAClF,OAAO;QACT;QAEA,IAAId,MAAMa,OAAO,CAACC,QAAQ,CAAC,cAAc;YACvC,OAAO;QACT;QAEA,OAAO;IACT;IAEA,qBACE,qBAACE;QAAIC,WAAU;kBACb,cAAA,sBAACD;YAAIC,WAAU;;8BAEb,qBAACD;oBAAIC,WAAU;8BACb,cAAA,qBAACC,0BAAY;wBAACC,MAAK;wBAAUC,MAAK;wBAAKH,WAAU;;;8BAInD,qBAACI;oBAAGJ,WAAU;8BAAwC;;8BAKtD,qBAACK;oBAAEL,WAAU;8BACVF,uBAAuBf;;8BAI1B,sBAACuB;oBAAQN,WAAU;;sCACjB,qBAACO;4BAAQP,WAAU;sCAAgE;;sCAGnF,qBAACD;4BAAIC,WAAU;sCACZjB,MAAMa,OAAO;;;;8BAKlB,sBAACG;oBAAIC,WAAU;;wBACZL,gCACC,qBAACa,cAAM;4BACLC,SAAShB;4BACTiB,SAAQ;4BACRP,MAAK;sCACN;;sCAIH,qBAACK,cAAM;4BACLC,SAAS,IAAME,OAAOC,QAAQ,CAACC,MAAM;4BACrCH,SAASf,iBAAiB,cAAc;4BACxCQ,MAAK;sCACN;;sCAGD,qBAACK,cAAM;4BACLC,SAAS,IAAME,OAAOG,OAAO,CAACC,IAAI;4BAClCL,SAAQ;4BACRP,MAAK;sCACN;;;;;;;AAOX;AAaO,SAAS1B,kBAAkB,EAAEiB,QAAQ,EAAEsB,QAAQ,EAA0B;IAC9E,qBACE,qBAACxC;QACCe,UAAU,CAACR,OAAOkC,sBAChB,qBAAClB;gBAAIC,WAAU;0BACb,cAAA,sBAACD;oBAAIC,WAAU;;sCAEb,qBAACD;4BAAIC,WAAU;sCACb,cAAA,qBAACD;gCAAIC,WAAU;0CACb,cAAA,qBAACkB;oCAAKlB,WAAU;8CAAW;;;;sCAK/B,qBAACmB;4BAAGnB,WAAU;sCACXgB,WAAW,CAAC,cAAc,EAAEA,UAAU,GAAG;;sCAI5C,qBAACX;4BAAEL,WAAU;sCAAqB;;sCAKlC,sBAACM;4BAAQN,WAAU;;8CACjB,qBAACO;oCAAQP,WAAU;8CAAgE;;8CAGnF,sBAACD;oCAAIC,WAAU;;sDACb,sBAACD;4CAAIC,WAAU;;8DACb,qBAACoB;8DAAO;;gDAAiB;gDAAErC,MAAMa,OAAO;;;wCAEzCb,MAAMsC,KAAK,kBACV,sBAACtB;;8DACC,qBAACqB;8DAAO;;8DACR,qBAACE;oDAAItB,WAAU;8DAA4BjB,MAAMsC,KAAK;;;;;;;;sCAO9D,sBAACtB;4BAAIC,WAAU;;8CACb,qBAACQ,cAAM;oCAACC,SAASQ;oCAAOP,SAAQ;oCAAUP,MAAK;8CAAK;;8CAGpD,qBAACK,cAAM;oCAACC,SAAS,IAAME,OAAOC,QAAQ,CAACW,IAAI,GAAG;oCAAUb,SAAQ;oCAAYP,MAAK;8CAAK;;;;;;;QAO9Fd,SAAS,CAACN,OAAOI;YACf,+BAA+B;YAC/BC,QAAQL,KAAK,CAAC,CAAC,SAAS,EAAEiC,YAAY,OAAO,CAAC,CAAC,EAAEjC,OAAOI;QAExD,kEAAkE;QAClE,gCAAgC;QAClC;kBAECO;;AAGP;AAaO,SAASnB,uBAAuB,EAAEmB,QAAQ,EAAE8B,aAAa,EAA+B;IAC7F,qBACE,qBAAChD;QACCe,UAAU,CAACR,OAAOkC,sBAChB,qBAAClB;gBAAIC,WAAU;0BACb,cAAA,sBAACD;oBAAIC,WAAU;;sCACb,qBAACkB;4BAAKlB,WAAU;sCAAW;;sCAC3B,sBAACD;4BAAIC,WAAU;;8CACb,qBAACyB;oCAAGzB,WAAU;8CACXwB,gBAAgB,CAAC,SAAS,EAAEA,eAAe,GAAG;;8CAEjD,qBAACnB;oCAAEL,WAAU;8CAAgC;;8CAG7C,sBAACM;oCAAQN,WAAU;;sDACjB,qBAACO;4CAAQP,WAAU;sDAAiE;;sDAGpF,qBAACD;4CAAIC,WAAU;sDACZjB,MAAMa,OAAO;;;;8CAGlB,qBAACY,cAAM;oCAACC,SAASQ;oCAAOP,SAAQ;oCAAYP,MAAK;8CAAK;;;;;;;QAO9Dd,SAAS,CAACN,OAAOI;YACfC,QAAQL,KAAK,CAAC,CAAC,SAAS,EAAEyC,iBAAiB,YAAY,CAAC,CAAC,EAAEzC,OAAOI;QACpE;kBAECO;;AAGP"}