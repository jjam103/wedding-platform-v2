{"version":3,"names":["createVendorBookingSchema","cov_1nic9fl1so","f","s","updateVendorBookingSchema","vendorBookingFilterSchema","baseVendorBookingSchema","_zod","z","object","vendorId","string","uuid","activityId","nullable","optional","eventId","bookingDate","baseCost","number","min","guestCount","int","pricingModel","enum","errorMap","message","default","hostSubsidy","notes","max","refine","data","b","path","totalCost","partial","undefined","page","positive","pageSize"],"sources":["/Users/jaron/Desktop/wedding-platform-v2/schemas/vendorBookingSchemas.ts"],"sourcesContent":["import { z } from 'zod';\n\n/**\n * Base schema for vendor booking data without refinements.\n */\nconst baseVendorBookingSchema = z.object({\n  vendorId: z.string().uuid('Invalid vendor ID format'),\n  activityId: z.string().uuid('Invalid activity ID format').nullable().optional(),\n  eventId: z.string().uuid('Invalid event ID format').nullable().optional(),\n  bookingDate: z.string(),\n  baseCost: z.number().min(0, 'Base cost must be non-negative'),\n  guestCount: z.number().int().min(0, 'Guest count must be non-negative').nullable().optional(),\n  pricingModel: z.enum(['flat_rate', 'per_guest'], {\n    errorMap: () => ({ message: 'Pricing model must be flat_rate or per_guest' }),\n  }).default('flat_rate'),\n  hostSubsidy: z.number().min(0, 'Host subsidy must be non-negative').default(0),\n  notes: z.string().max(2000, 'Notes must be 2000 characters or less').nullable().optional(),\n});\n\n/**\n * Schema for creating a new vendor booking.\n * All required fields must be provided.\n */\nexport const createVendorBookingSchema = baseVendorBookingSchema\n  .refine(\n    (data) => {\n      // If per-guest pricing, guest count is required\n      if (data.pricingModel === 'per_guest' && !data.guestCount) {\n        return false;\n      }\n      return true;\n    },\n    {\n      message: 'Guest count is required for per-guest pricing',\n      path: ['guestCount'],\n    }\n  )\n  .refine(\n    (data) => {\n      // Calculate total cost\n      const totalCost = data.pricingModel === 'per_guest' \n        ? data.baseCost * (data.guestCount || 0)\n        : data.baseCost;\n      \n      // Host subsidy cannot exceed total cost\n      return data.hostSubsidy <= totalCost;\n    },\n    {\n      message: 'Host subsidy cannot exceed total cost',\n      path: ['hostSubsidy'],\n    }\n  );\n\n/**\n * Schema for updating an existing vendor booking.\n * All fields are optional for partial updates.\n */\nexport const updateVendorBookingSchema = baseVendorBookingSchema.partial().refine(\n  (data) => {\n    // If per-guest pricing, guest count is required\n    if (data.pricingModel === 'per_guest' && data.guestCount === undefined) {\n      return false;\n    }\n    return true;\n  },\n  {\n    message: 'Guest count is required for per-guest pricing',\n    path: ['guestCount'],\n  }\n).refine(\n  (data) => {\n    // Host subsidy cannot exceed total cost (if both provided)\n    if (data.hostSubsidy !== undefined && data.baseCost !== undefined) {\n      const totalCost = data.pricingModel === 'per_guest' \n        ? data.baseCost * (data.guestCount || 0)\n        : data.baseCost;\n      return data.hostSubsidy <= totalCost;\n    }\n    return true;\n  },\n  {\n    message: 'Host subsidy cannot exceed total cost',\n    path: ['hostSubsidy'],\n  }\n);\n\n/**\n * Schema for vendor booking list filters.\n */\nexport const vendorBookingFilterSchema = z.object({\n  vendorId: z.string().uuid().optional(),\n  activityId: z.string().uuid().optional(),\n  eventId: z.string().uuid().optional(),\n  page: z.number().int().positive().optional(),\n  pageSize: z.number().int().positive().max(100).optional(),\n});\n\n/**\n * Type definitions derived from schemas.\n */\nexport type CreateVendorBookingDTO = z.infer<typeof createVendorBookingSchema>;\nexport type UpdateVendorBookingDTO = z.infer<typeof updateVendorBookingSchema>;\nexport type VendorBookingFilterDTO = z.infer<typeof vendorBookingFilterSchema>;\n\n/**\n * Vendor booking entity type matching database structure.\n */\nexport interface VendorBooking {\n  id: string;\n  vendorId: string;\n  activityId: string | null;\n  eventId: string | null;\n  bookingDate: string;\n  baseCost: number;\n  guestCount: number | null;\n  pricingModel: 'flat_rate' | 'per_guest';\n  totalCost: number;\n  hostSubsidy: number;\n  notes: string | null;\n  createdAt: string;\n}\n\n/**\n * Paginated vendor booking list response.\n */\nexport interface PaginatedVendorBookings {\n  bookings: VendorBooking[];\n  total: number;\n  page: number;\n  pageSize: number;\n  totalPages: number;\n}\n\n/**\n * Vendor booking with related vendor and activity/event details.\n */\nexport interface VendorBookingWithDetails {\n  id: string;\n  vendorId: string;\n  vendorName: string;\n  vendorCategory: string;\n  activityId: string | null;\n  activityName: string | null;\n  eventId: string | null;\n  eventName: string | null;\n  bookingDate: string;\n  baseCost: number;\n  guestCount: number | null;\n  pricingModel: 'flat_rate' | 'per_guest';\n  totalCost: number;\n  hostSubsidy: number;\n  notes: string | null;\n  createdAt: string;\n}\n"],"mappings":"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","ignoreList":[]}