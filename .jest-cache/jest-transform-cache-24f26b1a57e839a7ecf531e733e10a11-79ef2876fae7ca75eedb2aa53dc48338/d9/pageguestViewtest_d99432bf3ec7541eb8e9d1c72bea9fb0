c222e7ae9a504ff7b6c6343cb423164e
/**
 * Guest View Navigation Tests for Events
 * 
 * Tests the "View as Guest" functionality for events.
 * Requirements: 32.2
 */ "use strict";
// Mock dependencies
jest.mock('@/components/ui/ToastContext');
jest.mock('next/navigation', ()=>({
        useRouter: jest.fn(),
        useSearchParams: ()=>({
                get: jest.fn(),
                getAll: jest.fn(),
                has: jest.fn(),
                keys: jest.fn(),
                values: jest.fn(),
                entries: jest.fn(),
                forEach: jest.fn(),
                toString: jest.fn()
            }),
        usePathname: ()=>'/admin/events'
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _page = /*#__PURE__*/ _interop_require_default(require("./page"));
const _ToastContext = require("../../../components/ui/ToastContext");
const _navigation = require("next/navigation");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock fetch
global.fetch = jest.fn();
// Mock window.location
delete window.location;
window.location = {
    href: ''
};
const mockUseToast = _ToastContext.useToast;
const mockUseRouter = _navigation.useRouter;
describe('EventsPage - Guest View Navigation', ()=>{
    const mockAddToast = jest.fn();
    const mockPush = jest.fn();
    const mockEvents = [
        {
            id: 'event-1',
            name: 'Ceremony on the Beach',
            eventType: 'ceremony',
            startDate: '2025-06-15T14:00:00Z',
            endDate: '2025-06-15T15:00:00Z',
            status: 'published',
            locationId: 'loc-1',
            description: 'Beach ceremony',
            rsvpRequired: true,
            rsvpDeadline: '2025-06-01T00:00:00Z'
        },
        {
            id: 'event-2',
            name: 'Welcome Dinner',
            eventType: 'reception',
            startDate: '2025-06-14T18:00:00Z',
            endDate: '2025-06-14T21:00:00Z',
            status: 'published',
            locationId: 'loc-2',
            description: 'Welcome dinner',
            rsvpRequired: true,
            rsvpDeadline: '2025-06-01T00:00:00Z'
        }
    ];
    const mockLocations = [
        {
            id: 'loc-1',
            name: 'Beach Venue'
        },
        {
            id: 'loc-2',
            name: 'Restaurant'
        }
    ];
    beforeEach(()=>{
        jest.clearAllMocks();
        mockUseToast.mockReturnValue({
            addToast: mockAddToast,
            toasts: [],
            removeToast: jest.fn()
        });
        mockUseRouter.mockReturnValue({
            push: mockPush,
            replace: jest.fn(),
            refresh: jest.fn(),
            back: jest.fn(),
            forward: jest.fn(),
            prefetch: jest.fn()
        });
        // Mock fetch responses
        global.fetch.mockImplementation((url)=>{
            if (url.includes('/api/admin/events')) {
                return Promise.resolve({
                    ok: true,
                    json: ()=>Promise.resolve({
                            success: true,
                            data: {
                                events: mockEvents
                            }
                        })
                });
            }
            if (url.includes('/api/admin/locations')) {
                return Promise.resolve({
                    ok: true,
                    json: ()=>Promise.resolve({
                            success: true,
                            data: mockLocations
                        })
                });
            }
            return Promise.reject(new Error('Unknown URL'));
        });
    });
    describe('View Button', ()=>{
        it('should render View button for each event', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            // Wait for events to load
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Ceremony on the Beach')).toBeInTheDocument();
            }, {
                timeout: 3000
            });
            const viewButtons = _react.screen.getAllByRole('button', {
                name: /^view$/i
            });
            expect(viewButtons.length).toBeGreaterThanOrEqual(mockEvents.length);
        });
        it('should navigate to guest-facing event page when View button is clicked', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Ceremony on the Beach')).toBeInTheDocument();
            }, {
                timeout: 3000
            });
            const viewButtons = _react.screen.getAllByRole('button', {
                name: /^view$/i
            });
            _react.fireEvent.click(viewButtons[0]);
            expect(window.location.href).toBe('/guest/events/event-1');
        });
        it('should generate correct URL for each event ID', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Ceremony on the Beach')).toBeInTheDocument();
            }, {
                timeout: 3000
            });
            // Test first event
            const viewButtons = _react.screen.getAllByRole('button', {
                name: /^view$/i
            });
            _react.fireEvent.click(viewButtons[0]);
            expect(window.location.href).toBe('/guest/events/event-1');
            // Reset location
            window.location.href = '';
            // Test second event (if rendered)
            if (viewButtons.length > 1) {
                _react.fireEvent.click(viewButtons[1]);
                expect(window.location.href).toContain('/guest/events/');
            }
        });
        it('should not propagate click event to row', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Ceremony on the Beach')).toBeInTheDocument();
            }, {
                timeout: 3000
            });
            const viewButtons = _react.screen.getAllByRole('button', {
                name: /^view$/i
            });
            const clickEvent = new MouseEvent('click', {
                bubbles: true
            });
            const stopPropagationSpy = jest.spyOn(clickEvent, 'stopPropagation');
            viewButtons[0].dispatchEvent(clickEvent);
            expect(stopPropagationSpy).toHaveBeenCalled();
        });
    });
    describe('Link Generation', ()=>{
        it('should generate URL with /guest/events/ prefix', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Ceremony on the Beach')).toBeInTheDocument();
            }, {
                timeout: 3000
            });
            const viewButtons = _react.screen.getAllByRole('button', {
                name: /^view$/i
            });
            _react.fireEvent.click(viewButtons[0]);
            expect(window.location.href).toMatch(/^\/guest\/events\//);
        });
        it('should use event ID in URL', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Ceremony on the Beach')).toBeInTheDocument();
            }, {
                timeout: 3000
            });
            const viewButtons = _react.screen.getAllByRole('button', {
                name: /^view$/i
            });
            _react.fireEvent.click(viewButtons[0]);
            expect(window.location.href).toContain('event-1');
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FkbWluL2V2ZW50cy9wYWdlLmd1ZXN0Vmlldy50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEd1ZXN0IFZpZXcgTmF2aWdhdGlvbiBUZXN0cyBmb3IgRXZlbnRzXG4gKiBcbiAqIFRlc3RzIHRoZSBcIlZpZXcgYXMgR3Vlc3RcIiBmdW5jdGlvbmFsaXR5IGZvciBldmVudHMuXG4gKiBSZXF1aXJlbWVudHM6IDMyLjJcbiAqL1xuXG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgRXZlbnRzUGFnZSBmcm9tICcuL3BhZ2UnO1xuaW1wb3J0IHsgdXNlVG9hc3QgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvVG9hc3RDb250ZXh0JztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvbmF2aWdhdGlvbic7XG5cbi8vIE1vY2sgZGVwZW5kZW5jaWVzXG5qZXN0Lm1vY2soJ0AvY29tcG9uZW50cy91aS9Ub2FzdENvbnRleHQnKTtcbmplc3QubW9jaygnbmV4dC9uYXZpZ2F0aW9uJywgKCkgPT4gKHtcbiAgdXNlUm91dGVyOiBqZXN0LmZuKCksXG4gIHVzZVNlYXJjaFBhcmFtczogKCkgPT4gKHtcbiAgICBnZXQ6IGplc3QuZm4oKSxcbiAgICBnZXRBbGw6IGplc3QuZm4oKSxcbiAgICBoYXM6IGplc3QuZm4oKSxcbiAgICBrZXlzOiBqZXN0LmZuKCksXG4gICAgdmFsdWVzOiBqZXN0LmZuKCksXG4gICAgZW50cmllczogamVzdC5mbigpLFxuICAgIGZvckVhY2g6IGplc3QuZm4oKSxcbiAgICB0b1N0cmluZzogamVzdC5mbigpLFxuICB9KSxcbiAgdXNlUGF0aG5hbWU6ICgpID0+ICcvYWRtaW4vZXZlbnRzJyxcbn0pKTtcblxuLy8gTW9jayBmZXRjaFxuZ2xvYmFsLmZldGNoID0gamVzdC5mbigpO1xuXG4vLyBNb2NrIHdpbmRvdy5sb2NhdGlvblxuZGVsZXRlICh3aW5kb3cgYXMgYW55KS5sb2NhdGlvbjtcbndpbmRvdy5sb2NhdGlvbiA9IHsgaHJlZjogJycgfSBhcyBhbnk7XG5cbmNvbnN0IG1vY2tVc2VUb2FzdCA9IHVzZVRvYXN0IGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIHVzZVRvYXN0PjtcbmNvbnN0IG1vY2tVc2VSb3V0ZXIgPSB1c2VSb3V0ZXIgYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2YgdXNlUm91dGVyPjtcblxuZGVzY3JpYmUoJ0V2ZW50c1BhZ2UgLSBHdWVzdCBWaWV3IE5hdmlnYXRpb24nLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tBZGRUb2FzdCA9IGplc3QuZm4oKTtcbiAgY29uc3QgbW9ja1B1c2ggPSBqZXN0LmZuKCk7XG5cbiAgY29uc3QgbW9ja0V2ZW50cyA9IFtcbiAgICB7XG4gICAgICBpZDogJ2V2ZW50LTEnLFxuICAgICAgbmFtZTogJ0NlcmVtb255IG9uIHRoZSBCZWFjaCcsXG4gICAgICBldmVudFR5cGU6ICdjZXJlbW9ueScsXG4gICAgICBzdGFydERhdGU6ICcyMDI1LTA2LTE1VDE0OjAwOjAwWicsXG4gICAgICBlbmREYXRlOiAnMjAyNS0wNi0xNVQxNTowMDowMFonLFxuICAgICAgc3RhdHVzOiAncHVibGlzaGVkJyxcbiAgICAgIGxvY2F0aW9uSWQ6ICdsb2MtMScsXG4gICAgICBkZXNjcmlwdGlvbjogJ0JlYWNoIGNlcmVtb255JyxcbiAgICAgIHJzdnBSZXF1aXJlZDogdHJ1ZSxcbiAgICAgIHJzdnBEZWFkbGluZTogJzIwMjUtMDYtMDFUMDA6MDA6MDBaJyxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnZXZlbnQtMicsXG4gICAgICBuYW1lOiAnV2VsY29tZSBEaW5uZXInLFxuICAgICAgZXZlbnRUeXBlOiAncmVjZXB0aW9uJyxcbiAgICAgIHN0YXJ0RGF0ZTogJzIwMjUtMDYtMTRUMTg6MDA6MDBaJyxcbiAgICAgIGVuZERhdGU6ICcyMDI1LTA2LTE0VDIxOjAwOjAwWicsXG4gICAgICBzdGF0dXM6ICdwdWJsaXNoZWQnLFxuICAgICAgbG9jYXRpb25JZDogJ2xvYy0yJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnV2VsY29tZSBkaW5uZXInLFxuICAgICAgcnN2cFJlcXVpcmVkOiB0cnVlLFxuICAgICAgcnN2cERlYWRsaW5lOiAnMjAyNS0wNi0wMVQwMDowMDowMFonLFxuICAgIH0sXG4gIF07XG5cbiAgY29uc3QgbW9ja0xvY2F0aW9ucyA9IFtcbiAgICB7IGlkOiAnbG9jLTEnLCBuYW1lOiAnQmVhY2ggVmVudWUnIH0sXG4gICAgeyBpZDogJ2xvYy0yJywgbmFtZTogJ1Jlc3RhdXJhbnQnIH0sXG4gIF07XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgXG4gICAgbW9ja1VzZVRvYXN0Lm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBhZGRUb2FzdDogbW9ja0FkZFRvYXN0LFxuICAgICAgdG9hc3RzOiBbXSxcbiAgICAgIHJlbW92ZVRvYXN0OiBqZXN0LmZuKCksXG4gICAgfSk7XG5cbiAgICBtb2NrVXNlUm91dGVyLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBwdXNoOiBtb2NrUHVzaCxcbiAgICAgIHJlcGxhY2U6IGplc3QuZm4oKSxcbiAgICAgIHJlZnJlc2g6IGplc3QuZm4oKSxcbiAgICAgIGJhY2s6IGplc3QuZm4oKSxcbiAgICAgIGZvcndhcmQ6IGplc3QuZm4oKSxcbiAgICAgIHByZWZldGNoOiBqZXN0LmZuKCksXG4gICAgfSBhcyBhbnkpO1xuXG4gICAgLy8gTW9jayBmZXRjaCByZXNwb25zZXNcbiAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCh1cmw6IHN0cmluZykgPT4ge1xuICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9hZG1pbi9ldmVudHMnKSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGE6IHsgZXZlbnRzOiBtb2NrRXZlbnRzIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9hZG1pbi9sb2NhdGlvbnMnKSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGE6IG1vY2tMb2NhdGlvbnMsXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignVW5rbm93biBVUkwnKSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdWaWV3IEJ1dHRvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlbmRlciBWaWV3IGJ1dHRvbiBmb3IgZWFjaCBldmVudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8RXZlbnRzUGFnZSAvPik7XG5cbiAgICAgIC8vIFdhaXQgZm9yIGV2ZW50cyB0byBsb2FkXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnQ2VyZW1vbnkgb24gdGhlIEJlYWNoJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9LCB7IHRpbWVvdXQ6IDMwMDAgfSk7XG5cbiAgICAgIGNvbnN0IHZpZXdCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvXnZpZXckL2kgfSk7XG4gICAgICBleHBlY3Qodmlld0J1dHRvbnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKG1vY2tFdmVudHMubGVuZ3RoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbmF2aWdhdGUgdG8gZ3Vlc3QtZmFjaW5nIGV2ZW50IHBhZ2Ugd2hlbiBWaWV3IGJ1dHRvbiBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxFdmVudHNQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ0NlcmVtb255IG9uIHRoZSBCZWFjaCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSwgeyB0aW1lb3V0OiAzMDAwIH0pO1xuXG4gICAgICBjb25zdCB2aWV3QnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL152aWV3JC9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHZpZXdCdXR0b25zWzBdKTtcblxuICAgICAgZXhwZWN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKS50b0JlKCcvZ3Vlc3QvZXZlbnRzL2V2ZW50LTEnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgY29ycmVjdCBVUkwgZm9yIGVhY2ggZXZlbnQgSUQnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPEV2ZW50c1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnQ2VyZW1vbnkgb24gdGhlIEJlYWNoJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9LCB7IHRpbWVvdXQ6IDMwMDAgfSk7XG5cbiAgICAgIC8vIFRlc3QgZmlyc3QgZXZlbnRcbiAgICAgIGNvbnN0IHZpZXdCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvXnZpZXckL2kgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sodmlld0J1dHRvbnNbMF0pO1xuICAgICAgZXhwZWN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKS50b0JlKCcvZ3Vlc3QvZXZlbnRzL2V2ZW50LTEnKTtcblxuICAgICAgLy8gUmVzZXQgbG9jYXRpb25cbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJyc7XG5cbiAgICAgIC8vIFRlc3Qgc2Vjb25kIGV2ZW50IChpZiByZW5kZXJlZClcbiAgICAgIGlmICh2aWV3QnV0dG9ucy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZpcmVFdmVudC5jbGljayh2aWV3QnV0dG9uc1sxXSk7XG4gICAgICAgIGV4cGVjdCh3aW5kb3cubG9jYXRpb24uaHJlZikudG9Db250YWluKCcvZ3Vlc3QvZXZlbnRzLycpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgcHJvcGFnYXRlIGNsaWNrIGV2ZW50IHRvIHJvdycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8RXZlbnRzUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdDZXJlbW9ueSBvbiB0aGUgQmVhY2gnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0sIHsgdGltZW91dDogMzAwMCB9KTtcblxuICAgICAgY29uc3Qgdmlld0J1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9edmlldyQvaSB9KTtcbiAgICAgIGNvbnN0IGNsaWNrRXZlbnQgPSBuZXcgTW91c2VFdmVudCgnY2xpY2snLCB7IGJ1YmJsZXM6IHRydWUgfSk7XG4gICAgICBjb25zdCBzdG9wUHJvcGFnYXRpb25TcHkgPSBqZXN0LnNweU9uKGNsaWNrRXZlbnQsICdzdG9wUHJvcGFnYXRpb24nKTtcbiAgICAgIFxuICAgICAgdmlld0J1dHRvbnNbMF0uZGlzcGF0Y2hFdmVudChjbGlja0V2ZW50KTtcblxuICAgICAgZXhwZWN0KHN0b3BQcm9wYWdhdGlvblNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTGluayBHZW5lcmF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgVVJMIHdpdGggL2d1ZXN0L2V2ZW50cy8gcHJlZml4JywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxFdmVudHNQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ0NlcmVtb255IG9uIHRoZSBCZWFjaCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSwgeyB0aW1lb3V0OiAzMDAwIH0pO1xuXG4gICAgICBjb25zdCB2aWV3QnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL152aWV3JC9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHZpZXdCdXR0b25zWzBdKTtcblxuICAgICAgZXhwZWN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKS50b01hdGNoKC9eXFwvZ3Vlc3RcXC9ldmVudHNcXC8vKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXNlIGV2ZW50IElEIGluIFVSTCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8RXZlbnRzUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdDZXJlbW9ueSBvbiB0aGUgQmVhY2gnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0sIHsgdGltZW91dDogMzAwMCB9KTtcblxuICAgICAgY29uc3Qgdmlld0J1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9edmlldyQvaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayh2aWV3QnV0dG9uc1swXSk7XG5cbiAgICAgIGV4cGVjdCh3aW5kb3cubG9jYXRpb24uaHJlZikudG9Db250YWluKCdldmVudC0xJyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJ1c2VSb3V0ZXIiLCJmbiIsInVzZVNlYXJjaFBhcmFtcyIsImdldCIsImdldEFsbCIsImhhcyIsImtleXMiLCJ2YWx1ZXMiLCJlbnRyaWVzIiwiZm9yRWFjaCIsInRvU3RyaW5nIiwidXNlUGF0aG5hbWUiLCJnbG9iYWwiLCJmZXRjaCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsIm1vY2tVc2VUb2FzdCIsInVzZVRvYXN0IiwibW9ja1VzZVJvdXRlciIsImRlc2NyaWJlIiwibW9ja0FkZFRvYXN0IiwibW9ja1B1c2giLCJtb2NrRXZlbnRzIiwiaWQiLCJuYW1lIiwiZXZlbnRUeXBlIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInN0YXR1cyIsImxvY2F0aW9uSWQiLCJkZXNjcmlwdGlvbiIsInJzdnBSZXF1aXJlZCIsInJzdnBEZWFkbGluZSIsIm1vY2tMb2NhdGlvbnMiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tSZXR1cm5WYWx1ZSIsImFkZFRvYXN0IiwidG9hc3RzIiwicmVtb3ZlVG9hc3QiLCJwdXNoIiwicmVwbGFjZSIsInJlZnJlc2giLCJiYWNrIiwiZm9yd2FyZCIsInByZWZldGNoIiwibW9ja0ltcGxlbWVudGF0aW9uIiwidXJsIiwiaW5jbHVkZXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsIm9rIiwianNvbiIsInN1Y2Nlc3MiLCJkYXRhIiwiZXZlbnRzIiwicmVqZWN0IiwiRXJyb3IiLCJpdCIsInJlbmRlciIsIkV2ZW50c1BhZ2UiLCJ3YWl0Rm9yIiwiZXhwZWN0Iiwic2NyZWVuIiwicXVlcnlCeVRleHQiLCJ0b0JlSW5UaGVEb2N1bWVudCIsInRpbWVvdXQiLCJ2aWV3QnV0dG9ucyIsImdldEFsbEJ5Um9sZSIsImxlbmd0aCIsInRvQmVHcmVhdGVyVGhhbk9yRXF1YWwiLCJmaXJlRXZlbnQiLCJjbGljayIsInRvQmUiLCJ0b0NvbnRhaW4iLCJjbGlja0V2ZW50IiwiTW91c2VFdmVudCIsImJ1YmJsZXMiLCJzdG9wUHJvcGFnYXRpb25TcHkiLCJzcHlPbiIsImRpc3BhdGNoRXZlbnQiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwidG9NYXRjaCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O0NBS0M7QUFPRCxvQkFBb0I7QUFDcEJBLEtBQUtDLElBQUksQ0FBQztBQUNWRCxLQUFLQyxJQUFJLENBQUMsbUJBQW1CLElBQU8sQ0FBQTtRQUNsQ0MsV0FBV0YsS0FBS0csRUFBRTtRQUNsQkMsaUJBQWlCLElBQU8sQ0FBQTtnQkFDdEJDLEtBQUtMLEtBQUtHLEVBQUU7Z0JBQ1pHLFFBQVFOLEtBQUtHLEVBQUU7Z0JBQ2ZJLEtBQUtQLEtBQUtHLEVBQUU7Z0JBQ1pLLE1BQU1SLEtBQUtHLEVBQUU7Z0JBQ2JNLFFBQVFULEtBQUtHLEVBQUU7Z0JBQ2ZPLFNBQVNWLEtBQUtHLEVBQUU7Z0JBQ2hCUSxTQUFTWCxLQUFLRyxFQUFFO2dCQUNoQlMsVUFBVVosS0FBS0csRUFBRTtZQUNuQixDQUFBO1FBQ0FVLGFBQWEsSUFBTTtJQUNyQixDQUFBOzs7Ozt1QkFwQm1EOzZEQUM1Qjs4QkFDRTs0QkFDQzs7Ozs7O0FBbUIxQixhQUFhO0FBQ2JDLE9BQU9DLEtBQUssR0FBR2YsS0FBS0csRUFBRTtBQUV0Qix1QkFBdUI7QUFDdkIsT0FBTyxBQUFDYSxPQUFlQyxRQUFRO0FBQy9CRCxPQUFPQyxRQUFRLEdBQUc7SUFBRUMsTUFBTTtBQUFHO0FBRTdCLE1BQU1DLGVBQWVDLHNCQUFRO0FBQzdCLE1BQU1DLGdCQUFnQm5CLHFCQUFTO0FBRS9Cb0IsU0FBUyxzQ0FBc0M7SUFDN0MsTUFBTUMsZUFBZXZCLEtBQUtHLEVBQUU7SUFDNUIsTUFBTXFCLFdBQVd4QixLQUFLRyxFQUFFO0lBRXhCLE1BQU1zQixhQUFhO1FBQ2pCO1lBQ0VDLElBQUk7WUFD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