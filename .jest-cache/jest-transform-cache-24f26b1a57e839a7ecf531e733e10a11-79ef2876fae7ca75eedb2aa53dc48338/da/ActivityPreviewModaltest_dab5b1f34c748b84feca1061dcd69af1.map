{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/guest/ActivityPreviewModal.test.tsx"],"sourcesContent":["import { render, screen, waitFor, fireEvent } from '@testing-library/react';\nimport { ActivityPreviewModal } from './ActivityPreviewModal';\nimport { useRouter } from 'next/navigation';\n\n// Mock next/navigation\njest.mock('next/navigation', () => ({\n  useRouter: jest.fn(),\n}));\n\n// Mock fetch\nglobal.fetch = jest.fn();\n\ndescribe('ActivityPreviewModal', () => {\n  const mockRouter = {\n    push: jest.fn(),\n  };\n\n  const mockActivity = {\n    id: 'activity-123',\n    title: 'Beach Volleyball',\n    date: '2024-06-14T10:00:00Z',\n    time: '10:00 AM',\n    location: 'Sunset Beach',\n    description: 'Fun beach games and activities',\n    capacity: 20,\n    capacityRemaining: 8,\n    cost: 50,\n    hostSubsidy: 20,\n    slug: 'beach-volleyball',\n  };\n\n  const mockRSVPStatus = {\n    status: 'attending' as const,\n    guestCount: 2,\n    dietaryRestrictions: 'Vegetarian',\n  };\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    (useRouter as jest.Mock).mockReturnValue(mockRouter);\n    (global.fetch as jest.Mock).mockImplementation((url: string) => {\n      if (url.includes('/api/guest/activities/')) {\n        return Promise.resolve({\n          ok: true,\n          json: () => Promise.resolve({ success: true, data: mockActivity }),\n        });\n      }\n      if (url.includes('/api/guest/rsvps')) {\n        return Promise.resolve({\n          ok: true,\n          json: () => Promise.resolve({ success: true, data: [mockRSVPStatus] }),\n        });\n      }\n      return Promise.reject(new Error('Unknown URL'));\n    });\n  });\n\n  afterEach(() => {\n    jest.restoreAllMocks();\n  });\n\n  describe('Rendering', () => {\n    it('should render loading state initially', () => {\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      expect(screen.getByText('Activity Preview')).toBeInTheDocument();\n      expect(screen.getByRole('status', { hidden: true })).toBeInTheDocument(); // Loading spinner\n    });\n\n    it('should render activity details after loading', async () => {\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n      });\n\n      expect(screen.getByText('Sunset Beach')).toBeInTheDocument();\n      expect(screen.getByText('10:00 AM')).toBeInTheDocument();\n      expect(screen.getByText('Fun beach games and activities')).toBeInTheDocument();\n    });\n\n    it('should render capacity information', async () => {\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText(/8 \\/ 20 spots/)).toBeInTheDocument();\n      });\n    });\n\n    it('should render cost information with subsidy', async () => {\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('$30.00')).toBeInTheDocument(); // 50 - 20 = 30\n        expect(screen.getByText(/\\$50\\.00 - \\$20\\.00 host subsidy/)).toBeInTheDocument();\n      });\n    });\n\n    it('should render RSVP status badge', async () => {\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Attending')).toBeInTheDocument();\n      });\n\n      expect(screen.getByText('Guest count: 2')).toBeInTheDocument();\n    });\n\n    it('should render dietary restrictions when present', async () => {\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Your Dietary Restrictions')).toBeInTheDocument();\n        expect(screen.getByText('Vegetarian')).toBeInTheDocument();\n      });\n    });\n\n    it('should not render optional fields when missing', async () => {\n      const activityWithoutOptionals = {\n        id: 'activity-123',\n        title: 'Beach Volleyball',\n        date: '2024-06-14T10:00:00Z',\n      };\n\n      (global.fetch as jest.Mock).mockImplementation((url: string) => {\n        if (url.includes('/api/guest/activities/')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: activityWithoutOptionals }),\n          });\n        }\n        if (url.includes('/api/guest/rsvps')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: [] }),\n          });\n        }\n        return Promise.reject(new Error('Unknown URL'));\n      });\n\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n      });\n\n      expect(screen.queryByText('10:00 AM')).not.toBeInTheDocument();\n      expect(screen.queryByText('Sunset Beach')).not.toBeInTheDocument();\n      expect(screen.queryByText('Fun beach games and activities')).not.toBeInTheDocument();\n      expect(screen.queryByText(/spots/)).not.toBeInTheDocument();\n      expect(screen.queryByText(/\\$/)).not.toBeInTheDocument();\n    });\n  });\n\n  describe('Capacity Status Display', () => {\n    it('should display \"Available\" status when capacity is not near full', async () => {\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText(/8 \\/ 20 spots Available/)).toBeInTheDocument();\n      });\n    });\n\n    it('should display \"Almost Full\" status when capacity is 90% or more', async () => {\n      const almostFullActivity = {\n        ...mockActivity,\n        capacity: 20,\n        capacityRemaining: 1, // 95% full\n      };\n\n      (global.fetch as jest.Mock).mockImplementation((url: string) => {\n        if (url.includes('/api/guest/activities/')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: almostFullActivity }),\n          });\n        }\n        if (url.includes('/api/guest/rsvps')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: [mockRSVPStatus] }),\n          });\n        }\n        return Promise.reject(new Error('Unknown URL'));\n      });\n\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText(/1 \\/ 20 spots Almost Full/)).toBeInTheDocument();\n      });\n    });\n\n    it('should display \"Full\" status when capacity is 0', async () => {\n      const fullActivity = {\n        ...mockActivity,\n        capacity: 20,\n        capacityRemaining: 0,\n      };\n\n      (global.fetch as jest.Mock).mockImplementation((url: string) => {\n        if (url.includes('/api/guest/activities/')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: fullActivity }),\n          });\n        }\n        if (url.includes('/api/guest/rsvps')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: [mockRSVPStatus] }),\n          });\n        }\n        return Promise.reject(new Error('Unknown URL'));\n      });\n\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText(/0 \\/ 20 spots Full/)).toBeInTheDocument();\n      });\n    });\n\n    it('should not display capacity status when capacity is not set', async () => {\n      const activityWithoutCapacity = {\n        ...mockActivity,\n        capacity: undefined,\n        capacityRemaining: undefined,\n      };\n\n      (global.fetch as jest.Mock).mockImplementation((url: string) => {\n        if (url.includes('/api/guest/activities/')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: activityWithoutCapacity }),\n          });\n        }\n        if (url.includes('/api/guest/rsvps')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: [mockRSVPStatus] }),\n          });\n        }\n        return Promise.reject(new Error('Unknown URL'));\n      });\n\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n      });\n\n      expect(screen.queryByText(/spots/)).not.toBeInTheDocument();\n    });\n  });\n\n  describe('Cost Calculation', () => {\n    it('should calculate guest cost correctly with subsidy', async () => {\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('$30.00')).toBeInTheDocument(); // 50 - 20 = 30\n      });\n    });\n\n    it('should display full cost when no subsidy', async () => {\n      const activityWithoutSubsidy = {\n        ...mockActivity,\n        cost: 50,\n        hostSubsidy: 0,\n      };\n\n      (global.fetch as jest.Mock).mockImplementation((url: string) => {\n        if (url.includes('/api/guest/activities/')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: activityWithoutSubsidy }),\n          });\n        }\n        if (url.includes('/api/guest/rsvps')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: [mockRSVPStatus] }),\n          });\n        }\n        return Promise.reject(new Error('Unknown URL'));\n      });\n\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('$50.00')).toBeInTheDocument();\n      });\n\n      expect(screen.queryByText(/host subsidy/)).not.toBeInTheDocument();\n    });\n\n    it('should not display cost when cost is 0', async () => {\n      const freeActivity = {\n        ...mockActivity,\n        cost: 0,\n      };\n\n      (global.fetch as jest.Mock).mockImplementation((url: string) => {\n        if (url.includes('/api/guest/activities/')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: freeActivity }),\n          });\n        }\n        if (url.includes('/api/guest/rsvps')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: [mockRSVPStatus] }),\n          });\n        }\n        return Promise.reject(new Error('Unknown URL'));\n      });\n\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n      });\n\n      expect(screen.queryByText(/Cost per Guest/)).not.toBeInTheDocument();\n    });\n\n    it('should not display cost when cost is undefined', async () => {\n      const activityWithoutCost = {\n        ...mockActivity,\n        cost: undefined,\n      };\n\n      (global.fetch as jest.Mock).mockImplementation((url: string) => {\n        if (url.includes('/api/guest/activities/')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: activityWithoutCost }),\n          });\n        }\n        if (url.includes('/api/guest/rsvps')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: [mockRSVPStatus] }),\n          });\n        }\n        return Promise.reject(new Error('Unknown URL'));\n      });\n\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n      });\n\n      expect(screen.queryByText(/Cost per Guest/)).not.toBeInTheDocument();\n    });\n  });\n\n  describe('RSVP Status Display', () => {\n    it('should display attending status with green badge', async () => {\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        const badge = screen.getByText('Attending');\n        expect(badge).toHaveClass('bg-green-100', 'text-green-800');\n      });\n    });\n\n    it('should display declined status with red badge', async () => {\n      (global.fetch as jest.Mock).mockImplementation((url: string) => {\n        if (url.includes('/api/guest/activities/')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: mockActivity }),\n          });\n        }\n        if (url.includes('/api/guest/rsvps')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({\n              success: true,\n              data: [{ status: 'declined' }],\n            }),\n          });\n        }\n        return Promise.reject(new Error('Unknown URL'));\n      });\n\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        const badge = screen.getByText('Declined');\n        expect(badge).toHaveClass('bg-red-100', 'text-red-800');\n      });\n    });\n\n    it('should display maybe status with yellow badge', async () => {\n      (global.fetch as jest.Mock).mockImplementation((url: string) => {\n        if (url.includes('/api/guest/activities/')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: mockActivity }),\n          });\n        }\n        if (url.includes('/api/guest/rsvps')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({\n              success: true,\n              data: [{ status: 'maybe' }],\n            }),\n          });\n        }\n        return Promise.reject(new Error('Unknown URL'));\n      });\n\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        const badge = screen.getByText('Maybe');\n        expect(badge).toHaveClass('bg-yellow-100', 'text-yellow-800');\n      });\n    });\n\n    it('should display pending status with gray badge', async () => {\n      (global.fetch as jest.Mock).mockImplementation((url: string) => {\n        if (url.includes('/api/guest/activities/')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: mockActivity }),\n          });\n        }\n        if (url.includes('/api/guest/rsvps')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({\n              success: true,\n              data: [{ status: 'pending' }],\n            }),\n          });\n        }\n        return Promise.reject(new Error('Unknown URL'));\n      });\n\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        const badge = screen.getByText('Pending');\n        expect(badge).toHaveClass('bg-gray-100', 'text-gray-800');\n      });\n    });\n\n    it('should not display dietary restrictions when not present', async () => {\n      (global.fetch as jest.Mock).mockImplementation((url: string) => {\n        if (url.includes('/api/guest/activities/')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: mockActivity }),\n          });\n        }\n        if (url.includes('/api/guest/rsvps')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({\n              success: true,\n              data: [{ status: 'attending', guestCount: 2 }],\n            }),\n          });\n        }\n        return Promise.reject(new Error('Unknown URL'));\n      });\n\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n      });\n\n      expect(screen.queryByText('Your Dietary Restrictions')).not.toBeInTheDocument();\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should display error message when activity fetch fails', async () => {\n      (global.fetch as jest.Mock).mockImplementation((url: string) => {\n        if (url.includes('/api/guest/activities/')) {\n          return Promise.resolve({\n            ok: false,\n            json: () => Promise.resolve({ success: false, error: { message: 'Activity not found' } }),\n          });\n        }\n        return Promise.reject(new Error('Unknown URL'));\n      });\n\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Failed to load activity')).toBeInTheDocument();\n      });\n    });\n\n    it('should handle network errors gracefully', async () => {\n      (global.fetch as jest.Mock).mockRejectedValue(new Error('Network error'));\n\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Failed to load activity')).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Modal Interactions', () => {\n    it('should call onClose when close button is clicked', async () => {\n      const onClose = jest.fn();\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={onClose} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n      });\n\n      const closeButton = screen.getByLabelText('Close');\n      fireEvent.click(closeButton);\n\n      expect(onClose).toHaveBeenCalledTimes(1);\n    });\n\n    it('should call onClose when backdrop is clicked', async () => {\n      const onClose = jest.fn();\n      const { container } = render(<ActivityPreviewModal activityId=\"activity-123\" onClose={onClose} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n      });\n\n      const backdrop = container.firstChild as HTMLElement;\n      fireEvent.click(backdrop);\n\n      expect(onClose).toHaveBeenCalledTimes(1);\n    });\n\n    it('should call onClose when Escape key is pressed', async () => {\n      const onClose = jest.fn();\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={onClose} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n      });\n\n      fireEvent.keyDown(document, { key: 'Escape' });\n\n      expect(onClose).toHaveBeenCalledTimes(1);\n    });\n\n    it('should not call onClose when modal content is clicked', async () => {\n      const onClose = jest.fn();\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={onClose} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n      });\n\n      const modalContent = screen.getByText('Beach Volleyball');\n      fireEvent.click(modalContent);\n\n      expect(onClose).not.toHaveBeenCalled();\n    });\n  });\n\n  describe('Navigation Actions', () => {\n    it('should navigate to activity detail page with slug when View Full Details is clicked', async () => {\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n      });\n\n      const viewDetailsButton = screen.getByText('View Full Details');\n      fireEvent.click(viewDetailsButton);\n\n      expect(mockRouter.push).toHaveBeenCalledWith('/activity/beach-volleyball');\n    });\n\n    it('should navigate to activity detail page with ID when slug is missing', async () => {\n      const activityWithoutSlug = { ...mockActivity, slug: undefined };\n      (global.fetch as jest.Mock).mockImplementation((url: string) => {\n        if (url.includes('/api/guest/activities/')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: activityWithoutSlug }),\n          });\n        }\n        if (url.includes('/api/guest/rsvps')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: [mockRSVPStatus] }),\n          });\n        }\n        return Promise.reject(new Error('Unknown URL'));\n      });\n\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n      });\n\n      const viewDetailsButton = screen.getByText('View Full Details');\n      fireEvent.click(viewDetailsButton);\n\n      expect(mockRouter.push).toHaveBeenCalledWith('/activity/activity-123');\n    });\n\n    it('should navigate to RSVP page when RSVP Now is clicked', async () => {\n      (global.fetch as jest.Mock).mockImplementation((url: string) => {\n        if (url.includes('/api/guest/activities/')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: mockActivity }),\n          });\n        }\n        if (url.includes('/api/guest/rsvps')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({\n              success: true,\n              data: [{ status: 'pending' }],\n            }),\n          });\n        }\n        return Promise.reject(new Error('Unknown URL'));\n      });\n\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n      });\n\n      const rsvpButton = screen.getByText('RSVP Now');\n      fireEvent.click(rsvpButton);\n\n      expect(mockRouter.push).toHaveBeenCalledWith('/guest/rsvp?activityId=activity-123');\n    });\n\n    it('should not show RSVP Now button when already attending', async () => {\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n      });\n\n      expect(screen.queryByText('RSVP Now')).not.toBeInTheDocument();\n    });\n\n    it('should show RSVP Now button when status is pending', async () => {\n      (global.fetch as jest.Mock).mockImplementation((url: string) => {\n        if (url.includes('/api/guest/activities/')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: mockActivity }),\n          });\n        }\n        if (url.includes('/api/guest/rsvps')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({\n              success: true,\n              data: [{ status: 'pending' }],\n            }),\n          });\n        }\n        return Promise.reject(new Error('Unknown URL'));\n      });\n\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('RSVP Now')).toBeInTheDocument();\n      });\n    });\n\n    it('should show RSVP Now button when no RSVP exists', async () => {\n      (global.fetch as jest.Mock).mockImplementation((url: string) => {\n        if (url.includes('/api/guest/activities/')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: mockActivity }),\n          });\n        }\n        if (url.includes('/api/guest/rsvps')) {\n          return Promise.resolve({\n            ok: true,\n            json: () => Promise.resolve({ success: true, data: [] }),\n          });\n        }\n        return Promise.reject(new Error('Unknown URL'));\n      });\n\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('RSVP Now')).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('should have proper ARIA labels', async () => {\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={jest.fn()} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n      });\n\n      expect(screen.getByLabelText('Close')).toBeInTheDocument();\n    });\n\n    it('should be keyboard navigable', async () => {\n      const onClose = jest.fn();\n      render(<ActivityPreviewModal activityId=\"activity-123\" onClose={onClose} />);\n      \n      await waitFor(() => {\n        expect(screen.getByText('Beach Volleyball')).toBeInTheDocument();\n      });\n\n      // Tab to close button\n      const closeButton = screen.getByLabelText('Close');\n      closeButton.focus();\n      expect(document.activeElement).toBe(closeButton);\n\n      // Press Enter to close\n      fireEvent.keyDown(closeButton, { key: 'Enter' });\n      fireEvent.click(closeButton);\n      expect(onClose).toHaveBeenCalled();\n    });\n  });\n});\n"],"names":["jest","mock","useRouter","fn","global","fetch","describe","mockRouter","push","mockActivity","id","title","date","time","location","description","capacity","capacityRemaining","cost","hostSubsidy","slug","mockRSVPStatus","status","guestCount","dietaryRestrictions","beforeEach","clearAllMocks","mockReturnValue","mockImplementation","url","includes","Promise","resolve","ok","json","success","data","reject","Error","afterEach","restoreAllMocks","it","render","ActivityPreviewModal","activityId","onClose","expect","screen","getByText","toBeInTheDocument","getByRole","hidden","waitFor","activityWithoutOptionals","queryByText","not","almostFullActivity","fullActivity","activityWithoutCapacity","undefined","activityWithoutSubsidy","freeActivity","activityWithoutCost","badge","toHaveClass","error","message","mockRejectedValue","closeButton","getByLabelText","fireEvent","click","toHaveBeenCalledTimes","container","backdrop","firstChild","keyDown","document","key","modalContent","toHaveBeenCalled","viewDetailsButton","toHaveBeenCalledWith","activityWithoutSlug","rsvpButton","focus","activeElement","toBe"],"mappings":"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"}