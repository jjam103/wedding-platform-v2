eb06309d3327bb53b0201111ce33e79d
"use strict";
// Mock dependencies
jest.mock('@/services/rsvpManagementService');
jest.mock('@/lib/apiHelpers', ()=>({
        ...jest.requireActual('@/lib/apiHelpers'),
        withAuth: jest.fn((handler)=>handler('test-user-id'))
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _route = require("./route");
const _rsvpManagementService = /*#__PURE__*/ _interop_require_wildcard(require("../../../../services/rsvpManagementService"));
const _apiHelpers = /*#__PURE__*/ _interop_require_wildcard(require("../../../../lib/apiHelpers"));
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Helper to create test requests
function createTestRequest(url) {
    return new Request(url, {
        method: 'GET',
        headers: {
            'Content-Type': 'application/json'
        }
    });
}
describe('GET /api/admin/rsvps', ()=>{
    const mockListRSVPs = _rsvpManagementService.listRSVPs;
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    describe('Success Cases', ()=>{
        it('should return paginated RSVPs with statistics when called with valid parameters', async ()=>{
            // Arrange
            const mockResponse = {
                data: [
                    {
                        id: 'rsvp-1',
                        guestId: 'guest-1',
                        guestFirstName: 'John',
                        guestLastName: 'Doe',
                        guestEmail: 'john@example.com',
                        eventId: 'event-1',
                        eventName: 'Wedding Ceremony',
                        activityId: null,
                        activityName: null,
                        status: 'attending',
                        guestCount: 2,
                        dietaryNotes: null,
                        specialRequirements: null,
                        notes: null,
                        respondedAt: '2024-01-15T10:00:00Z',
                        createdAt: '2024-01-10T10:00:00Z',
                        updatedAt: '2024-01-15T10:00:00Z'
                    }
                ],
                pagination: {
                    page: 1,
                    limit: 50,
                    total: 1,
                    totalPages: 1
                },
                statistics: {
                    totalRSVPs: 1,
                    byStatus: {
                        attending: 1,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 2
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?page=1&limit=50');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(data.data).toEqual(mockResponse);
            expect(mockListRSVPs).toHaveBeenCalledWith({}, {
                page: 1,
                limit: 50
            });
        });
        it('should apply filters when provided in query parameters', async ()=>{
            // Arrange
            const mockResponse = {
                data: [],
                pagination: {
                    page: 1,
                    limit: 50,
                    total: 0,
                    totalPages: 0
                },
                statistics: {
                    totalRSVPs: 0,
                    byStatus: {
                        attending: 0,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 0
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?eventId=00000000-0000-0000-0000-000000000001&status=attending&searchQuery=John');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(mockListRSVPs).toHaveBeenCalledWith({
                eventId: '00000000-0000-0000-0000-000000000001',
                status: 'attending',
                searchQuery: 'John'
            }, {
                page: 1,
                limit: 50
            });
        });
        it('should use default pagination values when not provided', async ()=>{
            // Arrange
            const mockResponse = {
                data: [],
                pagination: {
                    page: 1,
                    limit: 50,
                    total: 0,
                    totalPages: 0
                },
                statistics: {
                    totalRSVPs: 0,
                    byStatus: {
                        attending: 0,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 0
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            const response = await (0, _route.GET)(request);
            // Assert
            expect(response.status).toBe(200);
            expect(mockListRSVPs).toHaveBeenCalledWith({}, {
                page: 1,
                limit: 50
            });
        });
        it('should handle multiple filters simultaneously', async ()=>{
            // Arrange
            const mockResponse = {
                data: [],
                pagination: {
                    page: 2,
                    limit: 25,
                    total: 0,
                    totalPages: 0
                },
                statistics: {
                    totalRSVPs: 0,
                    byStatus: {
                        attending: 0,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 0
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?eventId=00000000-0000-0000-0000-000000000001&activityId=00000000-0000-0000-0000-000000000002&status=pending&guestId=00000000-0000-0000-0000-000000000003&page=2&limit=25');
            // Act
            const response = await (0, _route.GET)(request);
            // Assert
            expect(response.status).toBe(200);
            expect(mockListRSVPs).toHaveBeenCalledWith({
                eventId: '00000000-0000-0000-0000-000000000001',
                activityId: '00000000-0000-0000-0000-000000000002',
                status: 'pending',
                guestId: '00000000-0000-0000-0000-000000000003'
            }, {
                page: 2,
                limit: 25
            });
        });
    });
    describe('Validation Errors', ()=>{
        it('should return 400 when eventId is not a valid UUID', async ()=>{
            // Arrange
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?eventId=invalid-uuid');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
            expect(data.error.message).toBe('Invalid query parameters');
            expect(mockListRSVPs).not.toHaveBeenCalled();
        });
        it('should return 400 when status is invalid', async ()=>{
            // Arrange
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?status=invalid-status');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
            expect(mockListRSVPs).not.toHaveBeenCalled();
        });
        it('should return 400 when page is not a positive integer', async ()=>{
            // Arrange
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?page=-1');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
            expect(mockListRSVPs).not.toHaveBeenCalled();
        });
        it('should return 400 when limit exceeds maximum', async ()=>{
            // Arrange
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?limit=150');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
            expect(mockListRSVPs).not.toHaveBeenCalled();
        });
        it('should return 400 when searchQuery exceeds maximum length', async ()=>{
            // Arrange
            const longQuery = 'a'.repeat(101);
            const request = createTestRequest(`http://localhost:3000/api/admin/rsvps?searchQuery=${longQuery}`);
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
            expect(mockListRSVPs).not.toHaveBeenCalled();
        });
    });
    describe('Service Errors', ()=>{
        it('should return 500 when service returns DATABASE_ERROR', async ()=>{
            // Arrange
            mockListRSVPs.mockResolvedValue({
                success: false,
                error: {
                    code: 'DATABASE_ERROR',
                    message: 'Database connection failed'
                }
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(500);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('DATABASE_ERROR');
            expect(data.error.message).toBe('Database connection failed');
        });
        it('should return 400 when service returns VALIDATION_ERROR', async ()=>{
            // Arrange
            mockListRSVPs.mockResolvedValue({
                success: false,
                error: {
                    code: 'VALIDATION_ERROR',
                    message: 'Invalid filter parameters',
                    details: [
                        {
                            field: 'eventId',
                            message: 'Invalid UUID'
                        }
                    ]
                }
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(400);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('VALIDATION_ERROR');
        });
        it('should return 500 when service returns UNKNOWN_ERROR', async ()=>{
            // Arrange
            mockListRSVPs.mockResolvedValue({
                success: false,
                error: {
                    code: 'UNKNOWN_ERROR',
                    message: 'An unexpected error occurred'
                }
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(500);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('UNKNOWN_ERROR');
        });
    });
    describe('Error Handling', ()=>{
        it('should return 500 when service throws an exception', async ()=>{
            // Arrange
            mockListRSVPs.mockRejectedValue(new Error('Unexpected service error'));
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(500);
            expect(data.success).toBe(false);
            expect(data.error.code).toBe('INTERNAL_ERROR');
            expect(data.error.message).toBe('Failed to fetch RSVPs');
        });
        it('should log error details when exception occurs', async ()=>{
            // Arrange
            const consoleErrorSpy = jest.spyOn(console, 'error').mockImplementation();
            mockListRSVPs.mockRejectedValue(new Error('Test error'));
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            await (0, _route.GET)(request);
            // Assert
            expect(consoleErrorSpy).toHaveBeenCalledWith('GET /api/admin/rsvps error:', expect.objectContaining({
                error: 'Test error',
                stack: expect.any(String)
            }));
            consoleErrorSpy.mockRestore();
        });
    });
    describe('Authentication', ()=>{
        it('should call withAuth wrapper', async ()=>{
            // Arrange
            const mockResponse = {
                data: [],
                pagination: {
                    page: 1,
                    limit: 50,
                    total: 0,
                    totalPages: 0
                },
                statistics: {
                    totalRSVPs: 0,
                    byStatus: {
                        attending: 0,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 0
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            await (0, _route.GET)(request);
            // Assert
            expect(_apiHelpers.withAuth).toHaveBeenCalled();
        });
    });
    describe('Edge Cases', ()=>{
        it('should handle empty result set', async ()=>{
            // Arrange
            const mockResponse = {
                data: [],
                pagination: {
                    page: 1,
                    limit: 50,
                    total: 0,
                    totalPages: 0
                },
                statistics: {
                    totalRSVPs: 0,
                    byStatus: {
                        attending: 0,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 0
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps');
            // Act
            const response = await (0, _route.GET)(request);
            const data = await response.json();
            // Assert
            expect(response.status).toBe(200);
            expect(data.success).toBe(true);
            expect(data.data.data).toEqual([]);
            expect(data.data.pagination.total).toBe(0);
        });
        it('should handle large page numbers', async ()=>{
            // Arrange
            const mockResponse = {
                data: [],
                pagination: {
                    page: 999,
                    limit: 50,
                    total: 0,
                    totalPages: 0
                },
                statistics: {
                    totalRSVPs: 0,
                    byStatus: {
                        attending: 0,
                        declined: 0,
                        maybe: 0,
                        pending: 0
                    },
                    totalGuestCount: 0
                }
            };
            mockListRSVPs.mockResolvedValue({
                success: true,
                data: mockResponse
            });
            const request = createTestRequest('http://localhost:3000/api/admin/rsvps?page=999');
            // Act
            const response = await (0, _route.GET)(request);
            // Assert
            expect(response.status).toBe(200);
            expect(mockListRSVPs).toHaveBeenCalledWith({}, {
                page: 999,
                limit: 50
            });
        });
        it('should handle all valid RSVP statuses', async ()=>{
            // Arrange
            const statuses = [
                'pending',
                'attending',
                'declined',
                'maybe'
            ];
            for (const status of statuses){
                mockListRSVPs.mockResolvedValue({
                    success: true,
                    data: {
                        data: [],
                        pagination: {
                            page: 1,
                            limit: 50,
                            total: 0,
                            totalPages: 0
                        },
                        statistics: {
                            totalRSVPs: 0,
                            byStatus: {
                                attending: 0,
                                declined: 0,
                                maybe: 0,
                                pending: 0
                            },
                            totalGuestCount: 0
                        }
                    }
                });
                const request = createTestRequest(`http://localhost:3000/api/admin/rsvps?status=${status}`);
                // Act
                const response = await (0, _route.GET)(request);
                // Assert
                expect(response.status).toBe(200);
                expect(mockListRSVPs).toHaveBeenCalledWith({
                    status
                }, {
                    page: 1,
                    limit: 50
                });
            }
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FwaS9hZG1pbi9yc3Zwcy9yb3V0ZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdFVCB9IGZyb20gJy4vcm91dGUnO1xuaW1wb3J0ICogYXMgcnN2cE1hbmFnZW1lbnRTZXJ2aWNlIGZyb20gJ0Avc2VydmljZXMvcnN2cE1hbmFnZW1lbnRTZXJ2aWNlJztcbmltcG9ydCAqIGFzIGFwaUhlbHBlcnMgZnJvbSAnQC9saWIvYXBpSGVscGVycyc7XG5cbi8vIE1vY2sgZGVwZW5kZW5jaWVzXG5qZXN0Lm1vY2soJ0Avc2VydmljZXMvcnN2cE1hbmFnZW1lbnRTZXJ2aWNlJyk7XG5qZXN0Lm1vY2soJ0AvbGliL2FwaUhlbHBlcnMnLCAoKSA9PiAoe1xuICAuLi5qZXN0LnJlcXVpcmVBY3R1YWwoJ0AvbGliL2FwaUhlbHBlcnMnKSxcbiAgd2l0aEF1dGg6IGplc3QuZm4oKGhhbmRsZXIpID0+IGhhbmRsZXIoJ3Rlc3QtdXNlci1pZCcpKSxcbn0pKTtcblxuLy8gSGVscGVyIHRvIGNyZWF0ZSB0ZXN0IHJlcXVlc3RzXG5mdW5jdGlvbiBjcmVhdGVUZXN0UmVxdWVzdCh1cmw6IHN0cmluZyk6IFJlcXVlc3Qge1xuICByZXR1cm4gbmV3IFJlcXVlc3QodXJsLCB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgfSk7XG59XG5cbmRlc2NyaWJlKCdHRVQgL2FwaS9hZG1pbi9yc3ZwcycsICgpID0+IHtcbiAgY29uc3QgbW9ja0xpc3RSU1ZQcyA9IHJzdnBNYW5hZ2VtZW50U2VydmljZS5saXN0UlNWUHMgYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjxcbiAgICB0eXBlb2YgcnN2cE1hbmFnZW1lbnRTZXJ2aWNlLmxpc3RSU1ZQc1xuICA+O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnU3VjY2VzcyBDYXNlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBwYWdpbmF0ZWQgUlNWUHMgd2l0aCBzdGF0aXN0aWNzIHdoZW4gY2FsbGVkIHdpdGggdmFsaWQgcGFyYW1ldGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcbiAgICAgICAgZGF0YTogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAncnN2cC0xJyxcbiAgICAgICAgICAgIGd1ZXN0SWQ6ICdndWVzdC0xJyxcbiAgICAgICAgICAgIGd1ZXN0Rmlyc3ROYW1lOiAnSm9obicsXG4gICAgICAgICAgICBndWVzdExhc3ROYW1lOiAnRG9lJyxcbiAgICAgICAgICAgIGd1ZXN0RW1haWw6ICdqb2huQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICAgIGV2ZW50SWQ6ICdldmVudC0xJyxcbiAgICAgICAgICAgIGV2ZW50TmFtZTogJ1dlZGRpbmcgQ2VyZW1vbnknLFxuICAgICAgICAgICAgYWN0aXZpdHlJZDogbnVsbCxcbiAgICAgICAgICAgIGFjdGl2aXR5TmFtZTogbnVsbCxcbiAgICAgICAgICAgIHN0YXR1czogJ2F0dGVuZGluZycgYXMgY29uc3QsXG4gICAgICAgICAgICBndWVzdENvdW50OiAyLFxuICAgICAgICAgICAgZGlldGFyeU5vdGVzOiBudWxsLFxuICAgICAgICAgICAgc3BlY2lhbFJlcXVpcmVtZW50czogbnVsbCxcbiAgICAgICAgICAgIG5vdGVzOiBudWxsLFxuICAgICAgICAgICAgcmVzcG9uZGVkQXQ6ICcyMDI0LTAxLTE1VDEwOjAwOjAwWicsXG4gICAgICAgICAgICBjcmVhdGVkQXQ6ICcyMDI0LTAxLTEwVDEwOjAwOjAwWicsXG4gICAgICAgICAgICB1cGRhdGVkQXQ6ICcyMDI0LTAxLTE1VDEwOjAwOjAwWicsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgIHBhZ2U6IDEsXG4gICAgICAgICAgbGltaXQ6IDUwLFxuICAgICAgICAgIHRvdGFsOiAxLFxuICAgICAgICAgIHRvdGFsUGFnZXM6IDEsXG4gICAgICAgIH0sXG4gICAgICAgIHN0YXRpc3RpY3M6IHtcbiAgICAgICAgICB0b3RhbFJTVlBzOiAxLFxuICAgICAgICAgIGJ5U3RhdHVzOiB7XG4gICAgICAgICAgICBhdHRlbmRpbmc6IDEsXG4gICAgICAgICAgICBkZWNsaW5lZDogMCxcbiAgICAgICAgICAgIG1heWJlOiAwLFxuICAgICAgICAgICAgcGVuZGluZzogMCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRvdGFsR3Vlc3RDb3VudDogMixcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tMaXN0UlNWUHMubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiBtb2NrUmVzcG9uc2UsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZVRlc3RSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3JzdnBzP3BhZ2U9MSZsaW1pdD01MCcpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGRhdGEuZGF0YSkudG9FcXVhbChtb2NrUmVzcG9uc2UpO1xuICAgICAgZXhwZWN0KG1vY2tMaXN0UlNWUHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICB7fSxcbiAgICAgICAgeyBwYWdlOiAxLCBsaW1pdDogNTAgfVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYXBwbHkgZmlsdGVycyB3aGVuIHByb3ZpZGVkIGluIHF1ZXJ5IHBhcmFtZXRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSB7XG4gICAgICAgIGRhdGE6IFtdLFxuICAgICAgICBwYWdpbmF0aW9uOiB7IHBhZ2U6IDEsIGxpbWl0OiA1MCwgdG90YWw6IDAsIHRvdGFsUGFnZXM6IDAgfSxcbiAgICAgICAgc3RhdGlzdGljczoge1xuICAgICAgICAgIHRvdGFsUlNWUHM6IDAsXG4gICAgICAgICAgYnlTdGF0dXM6IHsgYXR0ZW5kaW5nOiAwLCBkZWNsaW5lZDogMCwgbWF5YmU6IDAsIHBlbmRpbmc6IDAgfSxcbiAgICAgICAgICB0b3RhbEd1ZXN0Q291bnQ6IDAsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBtb2NrTGlzdFJTVlBzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogbW9ja1Jlc3BvbnNlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVUZXN0UmVxdWVzdChcbiAgICAgICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vcnN2cHM/ZXZlbnRJZD0wMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDEmc3RhdHVzPWF0dGVuZGluZyZzZWFyY2hRdWVyeT1Kb2huJ1xuICAgICAgKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChtb2NrTGlzdFJTVlBzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAge1xuICAgICAgICAgIGV2ZW50SWQ6ICcwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDEnLFxuICAgICAgICAgIHN0YXR1czogJ2F0dGVuZGluZycsXG4gICAgICAgICAgc2VhcmNoUXVlcnk6ICdKb2huJyxcbiAgICAgICAgfSxcbiAgICAgICAgeyBwYWdlOiAxLCBsaW1pdDogNTAgfVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXNlIGRlZmF1bHQgcGFnaW5hdGlvbiB2YWx1ZXMgd2hlbiBub3QgcHJvdmlkZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSB7XG4gICAgICAgIGRhdGE6IFtdLFxuICAgICAgICBwYWdpbmF0aW9uOiB7IHBhZ2U6IDEsIGxpbWl0OiA1MCwgdG90YWw6IDAsIHRvdGFsUGFnZXM6IDAgfSxcbiAgICAgICAgc3RhdGlzdGljczoge1xuICAgICAgICAgIHRvdGFsUlNWUHM6IDAsXG4gICAgICAgICAgYnlTdGF0dXM6IHsgYXR0ZW5kaW5nOiAwLCBkZWNsaW5lZDogMCwgbWF5YmU6IDAsIHBlbmRpbmc6IDAgfSxcbiAgICAgICAgICB0b3RhbEd1ZXN0Q291bnQ6IDAsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBtb2NrTGlzdFJTVlBzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogbW9ja1Jlc3BvbnNlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVUZXN0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9yc3ZwcycpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChtb2NrTGlzdFJTVlBzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAge30sXG4gICAgICAgIHsgcGFnZTogMSwgbGltaXQ6IDUwIH1cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtdWx0aXBsZSBmaWx0ZXJzIHNpbXVsdGFuZW91c2x5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgbW9ja1Jlc3BvbnNlID0ge1xuICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgcGFnaW5hdGlvbjogeyBwYWdlOiAyLCBsaW1pdDogMjUsIHRvdGFsOiAwLCB0b3RhbFBhZ2VzOiAwIH0sXG4gICAgICAgIHN0YXRpc3RpY3M6IHtcbiAgICAgICAgICB0b3RhbFJTVlBzOiAwLFxuICAgICAgICAgIGJ5U3RhdHVzOiB7IGF0dGVuZGluZzogMCwgZGVjbGluZWQ6IDAsIG1heWJlOiAwLCBwZW5kaW5nOiAwIH0sXG4gICAgICAgICAgdG90YWxHdWVzdENvdW50OiAwLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgbW9ja0xpc3RSU1ZQcy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IG1vY2tSZXNwb25zZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlVGVzdFJlcXVlc3QoXG4gICAgICAgICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3JzdnBzP2V2ZW50SWQ9MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAxJmFjdGl2aXR5SWQ9MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAyJnN0YXR1cz1wZW5kaW5nJmd1ZXN0SWQ9MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAzJnBhZ2U9MiZsaW1pdD0yNSdcbiAgICAgICk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KG1vY2tMaXN0UlNWUHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICB7XG4gICAgICAgICAgZXZlbnRJZDogJzAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMScsXG4gICAgICAgICAgYWN0aXZpdHlJZDogJzAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMicsXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgZ3Vlc3RJZDogJzAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMycsXG4gICAgICAgIH0sXG4gICAgICAgIHsgcGFnZTogMiwgbGltaXQ6IDI1IH1cbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdWYWxpZGF0aW9uIEVycm9ycycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDAgd2hlbiBldmVudElkIGlzIG5vdCBhIHZhbGlkIFVVSUQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlVGVzdFJlcXVlc3QoXG4gICAgICAgICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3JzdnBzP2V2ZW50SWQ9aW52YWxpZC11dWlkJ1xuICAgICAgKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5tZXNzYWdlKS50b0JlKCdJbnZhbGlkIHF1ZXJ5IHBhcmFtZXRlcnMnKTtcbiAgICAgIGV4cGVjdChtb2NrTGlzdFJTVlBzKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNDAwIHdoZW4gc3RhdHVzIGlzIGludmFsaWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlVGVzdFJlcXVlc3QoXG4gICAgICAgICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3JzdnBzP3N0YXR1cz1pbnZhbGlkLXN0YXR1cydcbiAgICAgICk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgZXhwZWN0KG1vY2tMaXN0UlNWUHMpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDAgd2hlbiBwYWdlIGlzIG5vdCBhIHBvc2l0aXZlIGludGVnZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlVGVzdFJlcXVlc3QoXG4gICAgICAgICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3JzdnBzP3BhZ2U9LTEnXG4gICAgICApO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgIGV4cGVjdChtb2NrTGlzdFJTVlBzKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNDAwIHdoZW4gbGltaXQgZXhjZWVkcyBtYXhpbXVtJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZVRlc3RSZXF1ZXN0KFxuICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9yc3Zwcz9saW1pdD0xNTAnXG4gICAgICApO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgIGV4cGVjdChtb2NrTGlzdFJTVlBzKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNDAwIHdoZW4gc2VhcmNoUXVlcnkgZXhjZWVkcyBtYXhpbXVtIGxlbmd0aCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGxvbmdRdWVyeSA9ICdhJy5yZXBlYXQoMTAxKTtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVUZXN0UmVxdWVzdChcbiAgICAgICAgYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vcnN2cHM/c2VhcmNoUXVlcnk9JHtsb25nUXVlcnl9YFxuICAgICAgKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KGRhdGEuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZGF0YS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICBleHBlY3QobW9ja0xpc3RSU1ZQcykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NlcnZpY2UgRXJyb3JzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIDUwMCB3aGVuIHNlcnZpY2UgcmV0dXJucyBEQVRBQkFTRV9FUlJPUicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tMaXN0UlNWUHMubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnREFUQUJBU0VfRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZVRlc3RSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3JzdnBzJyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnREFUQUJBU0VfRVJST1InKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLm1lc3NhZ2UpLnRvQmUoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDAgd2hlbiBzZXJ2aWNlIHJldHVybnMgVkFMSURBVElPTl9FUlJPUicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tMaXN0UlNWUHMubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnVkFMSURBVElPTl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgZmlsdGVyIHBhcmFtZXRlcnMnLFxuICAgICAgICAgIGRldGFpbHM6IFt7IGZpZWxkOiAnZXZlbnRJZCcsIG1lc3NhZ2U6ICdJbnZhbGlkIFVVSUQnIH1dLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVUZXN0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9yc3ZwcycpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QoZGF0YS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLmNvZGUpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDUwMCB3aGVuIHNlcnZpY2UgcmV0dXJucyBVTktOT1dOX0VSUk9SJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja0xpc3RSU1ZQcy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdVTktOT1dOX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCcsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZVRlc3RSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3JzdnBzJyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnVU5LTk9XTl9FUlJPUicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNTAwIHdoZW4gc2VydmljZSB0aHJvd3MgYW4gZXhjZXB0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja0xpc3RSU1ZQcy5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgc2VydmljZSBlcnJvcicpKTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZVRlc3RSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3JzdnBzJyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGRhdGEuZXJyb3IuY29kZSkudG9CZSgnSU5URVJOQUxfRVJST1InKTtcbiAgICAgIGV4cGVjdChkYXRhLmVycm9yLm1lc3NhZ2UpLnRvQmUoJ0ZhaWxlZCB0byBmZXRjaCBSU1ZQcycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsb2cgZXJyb3IgZGV0YWlscyB3aGVuIGV4Y2VwdGlvbiBvY2N1cnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBjb25zb2xlRXJyb3JTcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICdlcnJvcicpLm1vY2tJbXBsZW1lbnRhdGlvbigpO1xuICAgICAgbW9ja0xpc3RSU1ZQcy5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1Rlc3QgZXJyb3InKSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVUZXN0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9yc3ZwcycpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGF3YWl0IEdFVChyZXF1ZXN0KTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QoY29uc29sZUVycm9yU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ0dFVCAvYXBpL2FkbWluL3JzdnBzIGVycm9yOicsXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBlcnJvcjogJ1Rlc3QgZXJyb3InLFxuICAgICAgICAgIHN0YWNrOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICBjb25zb2xlRXJyb3JTcHkubW9ja1Jlc3RvcmUoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0F1dGhlbnRpY2F0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY2FsbCB3aXRoQXV0aCB3cmFwcGVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgbW9ja1Jlc3BvbnNlID0ge1xuICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgcGFnaW5hdGlvbjogeyBwYWdlOiAxLCBsaW1pdDogNTAsIHRvdGFsOiAwLCB0b3RhbFBhZ2VzOiAwIH0sXG4gICAgICAgIHN0YXRpc3RpY3M6IHtcbiAgICAgICAgICB0b3RhbFJTVlBzOiAwLFxuICAgICAgICAgIGJ5U3RhdHVzOiB7IGF0dGVuZGluZzogMCwgZGVjbGluZWQ6IDAsIG1heWJlOiAwLCBwZW5kaW5nOiAwIH0sXG4gICAgICAgICAgdG90YWxHdWVzdENvdW50OiAwLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgbW9ja0xpc3RSU1ZQcy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IG1vY2tSZXNwb25zZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlVGVzdFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vcnN2cHMnKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBhd2FpdCBHRVQocmVxdWVzdCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KGFwaUhlbHBlcnMud2l0aEF1dGgpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0VkZ2UgQ2FzZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgcmVzdWx0IHNldCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcbiAgICAgICAgZGF0YTogW10sXG4gICAgICAgIHBhZ2luYXRpb246IHsgcGFnZTogMSwgbGltaXQ6IDUwLCB0b3RhbDogMCwgdG90YWxQYWdlczogMCB9LFxuICAgICAgICBzdGF0aXN0aWNzOiB7XG4gICAgICAgICAgdG90YWxSU1ZQczogMCxcbiAgICAgICAgICBieVN0YXR1czogeyBhdHRlbmRpbmc6IDAsIGRlY2xpbmVkOiAwLCBtYXliZTogMCwgcGVuZGluZzogMCB9LFxuICAgICAgICAgIHRvdGFsR3Vlc3RDb3VudDogMCxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tMaXN0UlNWUHMubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiBtb2NrUmVzcG9uc2UsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZVRlc3RSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FkbWluL3JzdnBzJyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChkYXRhLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZGF0YS5kYXRhLmRhdGEpLnRvRXF1YWwoW10pO1xuICAgICAgZXhwZWN0KGRhdGEuZGF0YS5wYWdpbmF0aW9uLnRvdGFsKS50b0JlKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbGFyZ2UgcGFnZSBudW1iZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgbW9ja1Jlc3BvbnNlID0ge1xuICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgcGFnaW5hdGlvbjogeyBwYWdlOiA5OTksIGxpbWl0OiA1MCwgdG90YWw6IDAsIHRvdGFsUGFnZXM6IDAgfSxcbiAgICAgICAgc3RhdGlzdGljczoge1xuICAgICAgICAgIHRvdGFsUlNWUHM6IDAsXG4gICAgICAgICAgYnlTdGF0dXM6IHsgYXR0ZW5kaW5nOiAwLCBkZWNsaW5lZDogMCwgbWF5YmU6IDAsIHBlbmRpbmc6IDAgfSxcbiAgICAgICAgICB0b3RhbEd1ZXN0Q291bnQ6IDAsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBtb2NrTGlzdFJTVlBzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogbW9ja1Jlc3BvbnNlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjcmVhdGVUZXN0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9yc3Zwcz9wYWdlPTk5OScpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChtb2NrTGlzdFJTVlBzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAge30sXG4gICAgICAgIHsgcGFnZTogOTk5LCBsaW1pdDogNTAgfVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGFsbCB2YWxpZCBSU1ZQIHN0YXR1c2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3Qgc3RhdHVzZXMgPSBbJ3BlbmRpbmcnLCAnYXR0ZW5kaW5nJywgJ2RlY2xpbmVkJywgJ21heWJlJ10gYXMgY29uc3Q7XG5cbiAgICAgIGZvciAoY29uc3Qgc3RhdHVzIG9mIHN0YXR1c2VzKSB7XG4gICAgICAgIG1vY2tMaXN0UlNWUHMubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZGF0YTogW10sXG4gICAgICAgICAgICBwYWdpbmF0aW9uOiB7IHBhZ2U6IDEsIGxpbWl0OiA1MCwgdG90YWw6IDAsIHRvdGFsUGFnZXM6IDAgfSxcbiAgICAgICAgICAgIHN0YXRpc3RpY3M6IHtcbiAgICAgICAgICAgICAgdG90YWxSU1ZQczogMCxcbiAgICAgICAgICAgICAgYnlTdGF0dXM6IHsgYXR0ZW5kaW5nOiAwLCBkZWNsaW5lZDogMCwgbWF5YmU6IDAsIHBlbmRpbmc6IDAgfSxcbiAgICAgICAgICAgICAgdG90YWxHdWVzdENvdW50OiAwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlVGVzdFJlcXVlc3QoXG4gICAgICAgICAgYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWRtaW4vcnN2cHM/c3RhdHVzPSR7c3RhdHVzfWBcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBBY3RcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG5cbiAgICAgICAgLy8gQXNzZXJ0XG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgICAgZXhwZWN0KG1vY2tMaXN0UlNWUHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgIHsgc3RhdHVzIH0sXG4gICAgICAgICAgeyBwYWdlOiAxLCBsaW1pdDogNTAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwicmVxdWlyZUFjdHVhbCIsIndpdGhBdXRoIiwiZm4iLCJoYW5kbGVyIiwiY3JlYXRlVGVzdFJlcXVlc3QiLCJ1cmwiLCJSZXF1ZXN0IiwibWV0aG9kIiwiaGVhZGVycyIsImRlc2NyaWJlIiwibW9ja0xpc3RSU1ZQcyIsInJzdnBNYW5hZ2VtZW50U2VydmljZSIsImxpc3RSU1ZQcyIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiaXQiLCJtb2NrUmVzcG9uc2UiLCJkYXRhIiwiaWQiLCJndWVzdElkIiwiZ3Vlc3RGaXJzdE5hbWUiLCJndWVzdExhc3ROYW1lIiwiZ3Vlc3RFbWFpbCIsImV2ZW50SWQiLCJldmVudE5hbWUiLCJhY3Rpdml0eUlkIiwiYWN0aXZpdHlOYW1lIiwic3RhdHVzIiwiZ3Vlc3RDb3VudCIsImRpZXRhcnlOb3RlcyIsInNwZWNpYWxSZXF1aXJlbWVudHMiLCJub3RlcyIsInJlc3BvbmRlZEF0IiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwicGFnaW5hdGlvbiIsInBhZ2UiLCJsaW1pdCIsInRvdGFsIiwidG90YWxQYWdlcyIsInN0YXRpc3RpY3MiLCJ0b3RhbFJTVlBzIiwiYnlTdGF0dXMiLCJhdHRlbmRpbmciLCJkZWNsaW5lZCIsIm1heWJlIiwicGVuZGluZyIsInRvdGFsR3Vlc3RDb3VudCIsIm1vY2tSZXNvbHZlZFZhbHVlIiwic3VjY2VzcyIsInJlcXVlc3QiLCJyZXNwb25zZSIsIkdFVCIsImpzb24iLCJleHBlY3QiLCJ0b0JlIiwidG9FcXVhbCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwic2VhcmNoUXVlcnkiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwibm90IiwidG9IYXZlQmVlbkNhbGxlZCIsImxvbmdRdWVyeSIsInJlcGVhdCIsImRldGFpbHMiLCJmaWVsZCIsIm1vY2tSZWplY3RlZFZhbHVlIiwiRXJyb3IiLCJjb25zb2xlRXJyb3JTcHkiLCJzcHlPbiIsImNvbnNvbGUiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJvYmplY3RDb250YWluaW5nIiwic3RhY2siLCJhbnkiLCJTdHJpbmciLCJtb2NrUmVzdG9yZSIsImFwaUhlbHBlcnMiLCJzdGF0dXNlcyJdLCJtYXBwaW5ncyI6IjtBQUlBLG9CQUFvQjtBQUNwQkEsS0FBS0MsSUFBSSxDQUFDO0FBQ1ZELEtBQUtDLElBQUksQ0FBQyxvQkFBb0IsSUFBTyxDQUFBO1FBQ25DLEdBQUdELEtBQUtFLGFBQWEsQ0FBQyxtQkFBbUI7UUFDekNDLFVBQVVILEtBQUtJLEVBQUUsQ0FBQyxDQUFDQyxVQUFZQSxRQUFRO0lBQ3pDLENBQUE7Ozs7dUJBVG9COytFQUNtQjtvRUFDWDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUzVCLGlDQUFpQztBQUNqQyxTQUFTQyxrQkFBa0JDLEdBQVc7SUFDcEMsT0FBTyxJQUFJQyxRQUFRRCxLQUFLO1FBQ3RCRSxRQUFRO1FBQ1JDLFNBQVM7WUFBRSxnQkFBZ0I7UUFBbUI7SUFDaEQ7QUFDRjtBQUVBQyxTQUFTLHdCQUF3QjtJQUMvQixNQUFNQyxnQkFBZ0JDLHVCQUFzQkMsU0FBUztJQUlyREMsV0FBVztRQUNUZixLQUFLZ0IsYUFBYTtJQUNw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