{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/schemas/activitySchemas.ts"],"sourcesContent":["import { z } from 'zod';\n\n/**\n * Base schema for activity data without refinements.\n */\nconst baseActivitySchema = z.object({\n  eventId: z.string().uuid('Invalid event ID format').nullable().optional(),\n  name: z.string().trim().min(1, 'Activity name is required').max(100, 'Activity name must be 100 characters or less'),\n  description: z.string().max(2000, 'Description must be 2000 characters or less').nullable().optional(),\n  activityType: z.string().trim().min(1, 'Activity type is required'),\n  locationId: z.string().uuid('Invalid location ID format').nullable().optional(),\n  startTime: z.string().datetime('Invalid start time format'),\n  endTime: z.string().datetime('Invalid end time format').nullable().optional(),\n  capacity: z.coerce.number().int().positive('Capacity must be a positive integer').nullable().optional(),\n  costPerPerson: z.coerce.number().nonnegative('Cost per person must be non-negative').nullable().optional(),\n  hostSubsidy: z.coerce.number().nonnegative('Host subsidy must be non-negative').nullable().optional(),\n  adultsOnly: z.boolean().optional(),\n  plusOneAllowed: z.boolean().optional(),\n  visibility: z.array(z.string()).optional(),\n  status: z.enum(['draft', 'published']).optional(),\n  displayOrder: z.number().int().nonnegative().optional(),\n});\n\n/**\n * Schema for creating a new activity.\n * All required fields must be provided.\n */\nexport const createActivitySchema = baseActivitySchema.refine(\n  (data) => {\n    if (data.endTime && data.startTime) {\n      return new Date(data.startTime) <= new Date(data.endTime);\n    }\n    return true;\n  },\n  {\n    message: 'End time must be after or equal to start time',\n    path: ['endTime'],\n  }\n);\n\n/**\n * Schema for updating an existing activity.\n * All fields are optional for partial updates.\n */\nexport const updateActivitySchema = baseActivitySchema.partial().refine(\n  (data) => {\n    if (data.endTime && data.startTime) {\n      return new Date(data.startTime) <= new Date(data.endTime);\n    }\n    return true;\n  },\n  {\n    message: 'End time must be after or equal to start time',\n    path: ['endTime'],\n  }\n);\n\n/**\n * Schema for activity list filters.\n */\nexport const activityFilterSchema = z.object({\n  eventId: z.string().uuid().optional(),\n  activityType: z.string().optional(),\n  status: z.enum(['draft', 'published']).optional(),\n  locationId: z.string().uuid().optional(),\n  adultsOnly: z.boolean().optional(),\n  startTimeFrom: z.string().datetime().optional(),\n  startTimeTo: z.string().datetime().optional(),\n  page: z.number().int().positive().optional(),\n  pageSize: z.number().int().positive().max(100).optional(),\n});\n\n/**\n * Schema for activity search.\n */\nexport const activitySearchSchema = z.object({\n  query: z.string().min(1, 'Search query is required'),\n  page: z.number().int().positive().optional(),\n  pageSize: z.number().int().positive().max(100).optional(),\n});\n\n/**\n * Type definitions derived from schemas.\n */\nexport type CreateActivityDTO = z.infer<typeof createActivitySchema>;\nexport type UpdateActivityDTO = z.infer<typeof updateActivitySchema>;\nexport type ActivityFilterDTO = z.infer<typeof activityFilterSchema>;\nexport type ActivitySearchDTO = z.infer<typeof activitySearchSchema>;\n\n/**\n * Activity entity type matching database structure.\n */\nexport interface Activity {\n  id: string;\n  eventId: string | null;\n  name: string;\n  description: string | null;\n  activityType: string;\n  locationId: string | null;\n  startTime: string;\n  endTime: string | null;\n  capacity: number | null;\n  costPerPerson: number | null;\n  hostSubsidy: number | null;\n  adultsOnly: boolean;\n  plusOneAllowed: boolean;\n  visibility: string[];\n  status: 'draft' | 'published';\n  displayOrder: number;\n  createdAt: string;\n  updatedAt: string;\n}\n\n/**\n * Paginated activity list response.\n */\nexport interface PaginatedActivities {\n  activities: Activity[];\n  total: number;\n  page: number;\n  pageSize: number;\n  totalPages: number;\n}\n\n/**\n * Activity capacity information.\n */\nexport interface ActivityCapacity {\n  activityId: string;\n  activityName: string;\n  capacity: number | null;\n  currentAttendees: number;\n  availableSpots: number | null;\n  utilizationPercentage: number | null;\n  isNearCapacity: boolean; // true if >= 90% capacity\n  isAtCapacity: boolean; // true if >= 100% capacity\n}\n"],"names":["activityFilterSchema","activitySearchSchema","createActivitySchema","updateActivitySchema","baseActivitySchema","z","object","eventId","string","uuid","nullable","optional","name","trim","min","max","description","activityType","locationId","startTime","datetime","endTime","capacity","coerce","number","int","positive","costPerPerson","nonnegative","hostSubsidy","adultsOnly","boolean","plusOneAllowed","visibility","array","status","enum","displayOrder","refine","data","Date","message","path","partial","startTimeFrom","startTimeTo","page","pageSize","query"],"mappings":"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"}