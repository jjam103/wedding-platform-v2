f1f526905dd91e78a49782677f8fffdd
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _fastcheck = /*#__PURE__*/ _interop_require_wildcard(require("fast-check"));
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
/**
 * Property 9: Activity Capacity Warning Threshold
 * 
 * Validates: Requirements 7.7
 * 
 * Property: For any activity with capacity and current RSVPs,
 * IF utilization >= 90% AND utilization < 100%,
 * THEN the system SHALL display a warning indicator.
 * 
 * This property ensures that activities approaching capacity
 * trigger appropriate warnings to help admins manage attendance.
 */ describe('Feature: admin-backend-integration-cms, Property 9: Activity Capacity Warning Threshold', ()=>{
    /**
   * Calculate utilization percentage
   */ function calculateUtilization(currentRsvps, capacity) {
        if (capacity === 0) return 0;
        return currentRsvps / capacity * 100;
    }
    /**
   * Determine if warning should be displayed
   */ function shouldDisplayWarning(currentRsvps, capacity) {
        const utilization = calculateUtilization(currentRsvps, capacity);
        return utilization >= 90 && utilization < 100;
    }
    it('should display warning for activities at 90%+ capacity but below 100%', ()=>{
        _fastcheck.assert(_fastcheck.property(// Generate capacity between 10 and 1000
        _fastcheck.integer({
            min: 10,
            max: 1000
        }), (capacity)=>{
            // Generate current RSVPs that result in 90-99% utilization
            const minRsvps = Math.ceil(capacity * 0.9);
            const maxRsvps = capacity - 1;
            _fastcheck.assert(_fastcheck.property(_fastcheck.integer({
                min: minRsvps,
                max: maxRsvps
            }), (currentRsvps)=>{
                const utilization = calculateUtilization(currentRsvps, capacity);
                const warning = shouldDisplayWarning(currentRsvps, capacity);
                // Property: If utilization is between 90% and 100%, warning should be true
                if (utilization >= 90 && utilization < 100) {
                    expect(warning).toBe(true);
                    expect(utilization).toBeGreaterThanOrEqual(90);
                    expect(utilization).toBeLessThan(100);
                }
            }), {
                numRuns: 50
            });
        }), {
            numRuns: 20
        });
    });
    it('should NOT display warning for activities below 90% capacity', ()=>{
        _fastcheck.assert(_fastcheck.property(// Generate capacity between 10 and 1000
        _fastcheck.integer({
            min: 10,
            max: 1000
        }), (capacity)=>{
            // Generate current RSVPs that result in <90% utilization
            const maxRsvps = Math.floor(capacity * 0.89);
            if (maxRsvps >= 0) {
                _fastcheck.assert(_fastcheck.property(_fastcheck.integer({
                    min: 0,
                    max: maxRsvps
                }), (currentRsvps)=>{
                    const utilization = calculateUtilization(currentRsvps, capacity);
                    const warning = shouldDisplayWarning(currentRsvps, capacity);
                    // Property: If utilization is below 90%, warning should be false
                    if (utilization < 90) {
                        expect(warning).toBe(false);
                        expect(utilization).toBeLessThan(90);
                    }
                }), {
                    numRuns: 50
                });
            }
        }), {
            numRuns: 20
        });
    });
    it('should NOT display warning for activities at exactly 100% capacity', ()=>{
        _fastcheck.assert(_fastcheck.property(// Generate capacity between 1 and 1000
        _fastcheck.integer({
            min: 1,
            max: 1000
        }), (capacity)=>{
            const currentRsvps = capacity; // Exactly at capacity
            const utilization = calculateUtilization(currentRsvps, capacity);
            const warning = shouldDisplayWarning(currentRsvps, capacity);
            // Property: At exactly 100%, warning should be false (alert should be shown instead)
            expect(utilization).toBe(100);
            expect(warning).toBe(false);
        }), {
            numRuns: 100
        });
    });
    it('should handle edge case: exactly 90% capacity', ()=>{
        _fastcheck.assert(_fastcheck.property(// Generate capacity that is divisible by 10 for exact 90%
        _fastcheck.integer({
            min: 10,
            max: 1000
        }).map((n)=>n * 10), (capacity)=>{
            const currentRsvps = capacity * 0.9; // Exactly 90%
            const utilization = calculateUtilization(currentRsvps, capacity);
            const warning = shouldDisplayWarning(currentRsvps, capacity);
            // Property: At exactly 90%, warning should be true
            expect(utilization).toBe(90);
            expect(warning).toBe(true);
        }), {
            numRuns: 100
        });
    });
    it('should handle edge case: 99% capacity (just below 100%)', ()=>{
        _fastcheck.assert(_fastcheck.property(// Generate capacity between 100 and 1000
        _fastcheck.integer({
            min: 100,
            max: 1000
        }), (capacity)=>{
            const currentRsvps = Math.floor(capacity * 0.99);
            const utilization = calculateUtilization(currentRsvps, capacity);
            const warning = shouldDisplayWarning(currentRsvps, capacity);
            // Property: At 99%, warning should be true
            if (utilization >= 90 && utilization < 100) {
                expect(warning).toBe(true);
            }
        }), {
            numRuns: 100
        });
    });
    it('should handle zero capacity (unlimited)', ()=>{
        _fastcheck.assert(_fastcheck.property(_fastcheck.integer({
            min: 0,
            max: 1000
        }), (currentRsvps)=>{
            const capacity = 0; // Unlimited capacity
            const utilization = calculateUtilization(currentRsvps, capacity);
            const warning = shouldDisplayWarning(currentRsvps, capacity);
            // Property: With unlimited capacity, no warning should be shown
            expect(utilization).toBe(0);
            expect(warning).toBe(false);
        }), {
            numRuns: 100
        });
    });
    it('should maintain warning threshold consistency across all valid inputs', ()=>{
        _fastcheck.assert(_fastcheck.property(_fastcheck.integer({
            min: 1,
            max: 1000
        }), _fastcheck.integer({
            min: 0,
            max: 1000
        }), (capacity, currentRsvps)=>{
            // Ensure currentRsvps doesn't exceed capacity
            const validRsvps = Math.min(currentRsvps, capacity);
            const utilization = calculateUtilization(validRsvps, capacity);
            const warning = shouldDisplayWarning(validRsvps, capacity);
            // Property: Warning state must be consistent with utilization calculation
            if (utilization >= 90 && utilization < 100) {
                expect(warning).toBe(true);
            } else {
                expect(warning).toBe(false);
            }
        }), {
            numRuns: 200
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvc2VydmljZXMvYWN0aXZpdHlDYXBhY2l0eVdhcm5pbmcucHJvcGVydHkudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBmYyBmcm9tICdmYXN0LWNoZWNrJztcblxuLyoqXG4gKiBQcm9wZXJ0eSA5OiBBY3Rpdml0eSBDYXBhY2l0eSBXYXJuaW5nIFRocmVzaG9sZFxuICogXG4gKiBWYWxpZGF0ZXM6IFJlcXVpcmVtZW50cyA3LjdcbiAqIFxuICogUHJvcGVydHk6IEZvciBhbnkgYWN0aXZpdHkgd2l0aCBjYXBhY2l0eSBhbmQgY3VycmVudCBSU1ZQcyxcbiAqIElGIHV0aWxpemF0aW9uID49IDkwJSBBTkQgdXRpbGl6YXRpb24gPCAxMDAlLFxuICogVEhFTiB0aGUgc3lzdGVtIFNIQUxMIGRpc3BsYXkgYSB3YXJuaW5nIGluZGljYXRvci5cbiAqIFxuICogVGhpcyBwcm9wZXJ0eSBlbnN1cmVzIHRoYXQgYWN0aXZpdGllcyBhcHByb2FjaGluZyBjYXBhY2l0eVxuICogdHJpZ2dlciBhcHByb3ByaWF0ZSB3YXJuaW5ncyB0byBoZWxwIGFkbWlucyBtYW5hZ2UgYXR0ZW5kYW5jZS5cbiAqL1xuXG5kZXNjcmliZSgnRmVhdHVyZTogYWRtaW4tYmFja2VuZC1pbnRlZ3JhdGlvbi1jbXMsIFByb3BlcnR5IDk6IEFjdGl2aXR5IENhcGFjaXR5IFdhcm5pbmcgVGhyZXNob2xkJywgKCkgPT4ge1xuICAvKipcbiAgICogQ2FsY3VsYXRlIHV0aWxpemF0aW9uIHBlcmNlbnRhZ2VcbiAgICovXG4gIGZ1bmN0aW9uIGNhbGN1bGF0ZVV0aWxpemF0aW9uKGN1cnJlbnRSc3ZwczogbnVtYmVyLCBjYXBhY2l0eTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBpZiAoY2FwYWNpdHkgPT09IDApIHJldHVybiAwO1xuICAgIHJldHVybiAoY3VycmVudFJzdnBzIC8gY2FwYWNpdHkpICogMTAwO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZSBpZiB3YXJuaW5nIHNob3VsZCBiZSBkaXNwbGF5ZWRcbiAgICovXG4gIGZ1bmN0aW9uIHNob3VsZERpc3BsYXlXYXJuaW5nKGN1cnJlbnRSc3ZwczogbnVtYmVyLCBjYXBhY2l0eTogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgY29uc3QgdXRpbGl6YXRpb24gPSBjYWxjdWxhdGVVdGlsaXphdGlvbihjdXJyZW50UnN2cHMsIGNhcGFjaXR5KTtcbiAgICByZXR1cm4gdXRpbGl6YXRpb24gPj0gOTAgJiYgdXRpbGl6YXRpb24gPCAxMDA7XG4gIH1cblxuICBpdCgnc2hvdWxkIGRpc3BsYXkgd2FybmluZyBmb3IgYWN0aXZpdGllcyBhdCA5MCUrIGNhcGFjaXR5IGJ1dCBiZWxvdyAxMDAlJywgKCkgPT4ge1xuICAgIGZjLmFzc2VydChcbiAgICAgIGZjLnByb3BlcnR5KFxuICAgICAgICAvLyBHZW5lcmF0ZSBjYXBhY2l0eSBiZXR3ZWVuIDEwIGFuZCAxMDAwXG4gICAgICAgIGZjLmludGVnZXIoeyBtaW46IDEwLCBtYXg6IDEwMDAgfSksXG4gICAgICAgIChjYXBhY2l0eSkgPT4ge1xuICAgICAgICAgIC8vIEdlbmVyYXRlIGN1cnJlbnQgUlNWUHMgdGhhdCByZXN1bHQgaW4gOTAtOTklIHV0aWxpemF0aW9uXG4gICAgICAgICAgY29uc3QgbWluUnN2cHMgPSBNYXRoLmNlaWwoY2FwYWNpdHkgKiAwLjkpO1xuICAgICAgICAgIGNvbnN0IG1heFJzdnBzID0gY2FwYWNpdHkgLSAxO1xuICAgICAgICAgIFxuICAgICAgICAgIGZjLmFzc2VydChcbiAgICAgICAgICAgIGZjLnByb3BlcnR5KFxuICAgICAgICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiBtaW5Sc3ZwcywgbWF4OiBtYXhSc3ZwcyB9KSxcbiAgICAgICAgICAgICAgKGN1cnJlbnRSc3ZwcykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHV0aWxpemF0aW9uID0gY2FsY3VsYXRlVXRpbGl6YXRpb24oY3VycmVudFJzdnBzLCBjYXBhY2l0eSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2FybmluZyA9IHNob3VsZERpc3BsYXlXYXJuaW5nKGN1cnJlbnRSc3ZwcywgY2FwYWNpdHkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFByb3BlcnR5OiBJZiB1dGlsaXphdGlvbiBpcyBiZXR3ZWVuIDkwJSBhbmQgMTAwJSwgd2FybmluZyBzaG91bGQgYmUgdHJ1ZVxuICAgICAgICAgICAgICAgIGlmICh1dGlsaXphdGlvbiA+PSA5MCAmJiB1dGlsaXphdGlvbiA8IDEwMCkge1xuICAgICAgICAgICAgICAgICAgZXhwZWN0KHdhcm5pbmcpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICBleHBlY3QodXRpbGl6YXRpb24pLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoOTApO1xuICAgICAgICAgICAgICAgICAgZXhwZWN0KHV0aWxpemF0aW9uKS50b0JlTGVzc1RoYW4oMTAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICksXG4gICAgICAgICAgICB7IG51bVJ1bnM6IDUwIH1cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICApLFxuICAgICAgeyBudW1SdW5zOiAyMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBOT1QgZGlzcGxheSB3YXJuaW5nIGZvciBhY3Rpdml0aWVzIGJlbG93IDkwJSBjYXBhY2l0eScsICgpID0+IHtcbiAgICBmYy5hc3NlcnQoXG4gICAgICBmYy5wcm9wZXJ0eShcbiAgICAgICAgLy8gR2VuZXJhdGUgY2FwYWNpdHkgYmV0d2VlbiAxMCBhbmQgMTAwMFxuICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiAxMCwgbWF4OiAxMDAwIH0pLFxuICAgICAgICAoY2FwYWNpdHkpID0+IHtcbiAgICAgICAgICAvLyBHZW5lcmF0ZSBjdXJyZW50IFJTVlBzIHRoYXQgcmVzdWx0IGluIDw5MCUgdXRpbGl6YXRpb25cbiAgICAgICAgICBjb25zdCBtYXhSc3ZwcyA9IE1hdGguZmxvb3IoY2FwYWNpdHkgKiAwLjg5KTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAobWF4UnN2cHMgPj0gMCkge1xuICAgICAgICAgICAgZmMuYXNzZXJ0KFxuICAgICAgICAgICAgICBmYy5wcm9wZXJ0eShcbiAgICAgICAgICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiAwLCBtYXg6IG1heFJzdnBzIH0pLFxuICAgICAgICAgICAgICAgIChjdXJyZW50UnN2cHMpID0+IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHV0aWxpemF0aW9uID0gY2FsY3VsYXRlVXRpbGl6YXRpb24oY3VycmVudFJzdnBzLCBjYXBhY2l0eSk7XG4gICAgICAgICAgICAgICAgICBjb25zdCB3YXJuaW5nID0gc2hvdWxkRGlzcGxheVdhcm5pbmcoY3VycmVudFJzdnBzLCBjYXBhY2l0eSk7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIC8vIFByb3BlcnR5OiBJZiB1dGlsaXphdGlvbiBpcyBiZWxvdyA5MCUsIHdhcm5pbmcgc2hvdWxkIGJlIGZhbHNlXG4gICAgICAgICAgICAgICAgICBpZiAodXRpbGl6YXRpb24gPCA5MCkge1xuICAgICAgICAgICAgICAgICAgICBleHBlY3Qod2FybmluZykudG9CZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdCh1dGlsaXphdGlvbikudG9CZUxlc3NUaGFuKDkwKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIHsgbnVtUnVuczogNTAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDIwIH1cbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIE5PVCBkaXNwbGF5IHdhcm5pbmcgZm9yIGFjdGl2aXRpZXMgYXQgZXhhY3RseSAxMDAlIGNhcGFjaXR5JywgKCkgPT4ge1xuICAgIGZjLmFzc2VydChcbiAgICAgIGZjLnByb3BlcnR5KFxuICAgICAgICAvLyBHZW5lcmF0ZSBjYXBhY2l0eSBiZXR3ZWVuIDEgYW5kIDEwMDBcbiAgICAgICAgZmMuaW50ZWdlcih7IG1pbjogMSwgbWF4OiAxMDAwIH0pLFxuICAgICAgICAoY2FwYWNpdHkpID0+IHtcbiAgICAgICAgICBjb25zdCBjdXJyZW50UnN2cHMgPSBjYXBhY2l0eTsgLy8gRXhhY3RseSBhdCBjYXBhY2l0eVxuICAgICAgICAgIGNvbnN0IHV0aWxpemF0aW9uID0gY2FsY3VsYXRlVXRpbGl6YXRpb24oY3VycmVudFJzdnBzLCBjYXBhY2l0eSk7XG4gICAgICAgICAgY29uc3Qgd2FybmluZyA9IHNob3VsZERpc3BsYXlXYXJuaW5nKGN1cnJlbnRSc3ZwcywgY2FwYWNpdHkpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFByb3BlcnR5OiBBdCBleGFjdGx5IDEwMCUsIHdhcm5pbmcgc2hvdWxkIGJlIGZhbHNlIChhbGVydCBzaG91bGQgYmUgc2hvd24gaW5zdGVhZClcbiAgICAgICAgICBleHBlY3QodXRpbGl6YXRpb24pLnRvQmUoMTAwKTtcbiAgICAgICAgICBleHBlY3Qod2FybmluZykudG9CZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYW5kbGUgZWRnZSBjYXNlOiBleGFjdGx5IDkwJSBjYXBhY2l0eScsICgpID0+IHtcbiAgICBmYy5hc3NlcnQoXG4gICAgICBmYy5wcm9wZXJ0eShcbiAgICAgICAgLy8gR2VuZXJhdGUgY2FwYWNpdHkgdGhhdCBpcyBkaXZpc2libGUgYnkgMTAgZm9yIGV4YWN0IDkwJVxuICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiAxMCwgbWF4OiAxMDAwIH0pLm1hcChuID0+IG4gKiAxMCksXG4gICAgICAgIChjYXBhY2l0eSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnRSc3ZwcyA9IGNhcGFjaXR5ICogMC45OyAvLyBFeGFjdGx5IDkwJVxuICAgICAgICAgIGNvbnN0IHV0aWxpemF0aW9uID0gY2FsY3VsYXRlVXRpbGl6YXRpb24oY3VycmVudFJzdnBzLCBjYXBhY2l0eSk7XG4gICAgICAgICAgY29uc3Qgd2FybmluZyA9IHNob3VsZERpc3BsYXlXYXJuaW5nKGN1cnJlbnRSc3ZwcywgY2FwYWNpdHkpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFByb3BlcnR5OiBBdCBleGFjdGx5IDkwJSwgd2FybmluZyBzaG91bGQgYmUgdHJ1ZVxuICAgICAgICAgIGV4cGVjdCh1dGlsaXphdGlvbikudG9CZSg5MCk7XG4gICAgICAgICAgZXhwZWN0KHdhcm5pbmcpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYW5kbGUgZWRnZSBjYXNlOiA5OSUgY2FwYWNpdHkgKGp1c3QgYmVsb3cgMTAwJSknLCAoKSA9PiB7XG4gICAgZmMuYXNzZXJ0KFxuICAgICAgZmMucHJvcGVydHkoXG4gICAgICAgIC8vIEdlbmVyYXRlIGNhcGFjaXR5IGJldHdlZW4gMTAwIGFuZCAxMDAwXG4gICAgICAgIGZjLmludGVnZXIoeyBtaW46IDEwMCwgbWF4OiAxMDAwIH0pLFxuICAgICAgICAoY2FwYWNpdHkpID0+IHtcbiAgICAgICAgICBjb25zdCBjdXJyZW50UnN2cHMgPSBNYXRoLmZsb29yKGNhcGFjaXR5ICogMC45OSk7XG4gICAgICAgICAgY29uc3QgdXRpbGl6YXRpb24gPSBjYWxjdWxhdGVVdGlsaXphdGlvbihjdXJyZW50UnN2cHMsIGNhcGFjaXR5KTtcbiAgICAgICAgICBjb25zdCB3YXJuaW5nID0gc2hvdWxkRGlzcGxheVdhcm5pbmcoY3VycmVudFJzdnBzLCBjYXBhY2l0eSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUHJvcGVydHk6IEF0IDk5JSwgd2FybmluZyBzaG91bGQgYmUgdHJ1ZVxuICAgICAgICAgIGlmICh1dGlsaXphdGlvbiA+PSA5MCAmJiB1dGlsaXphdGlvbiA8IDEwMCkge1xuICAgICAgICAgICAgZXhwZWN0KHdhcm5pbmcpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApLFxuICAgICAgeyBudW1SdW5zOiAxMDAgfVxuICAgICk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGFuZGxlIHplcm8gY2FwYWNpdHkgKHVubGltaXRlZCknLCAoKSA9PiB7XG4gICAgZmMuYXNzZXJ0KFxuICAgICAgZmMucHJvcGVydHkoXG4gICAgICAgIGZjLmludGVnZXIoeyBtaW46IDAsIG1heDogMTAwMCB9KSxcbiAgICAgICAgKGN1cnJlbnRSc3ZwcykgPT4ge1xuICAgICAgICAgIGNvbnN0IGNhcGFjaXR5ID0gMDsgLy8gVW5saW1pdGVkIGNhcGFjaXR5XG4gICAgICAgICAgY29uc3QgdXRpbGl6YXRpb24gPSBjYWxjdWxhdGVVdGlsaXphdGlvbihjdXJyZW50UnN2cHMsIGNhcGFjaXR5KTtcbiAgICAgICAgICBjb25zdCB3YXJuaW5nID0gc2hvdWxkRGlzcGxheVdhcm5pbmcoY3VycmVudFJzdnBzLCBjYXBhY2l0eSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUHJvcGVydHk6IFdpdGggdW5saW1pdGVkIGNhcGFjaXR5LCBubyB3YXJuaW5nIHNob3VsZCBiZSBzaG93blxuICAgICAgICAgIGV4cGVjdCh1dGlsaXphdGlvbikudG9CZSgwKTtcbiAgICAgICAgICBleHBlY3Qod2FybmluZykudG9CZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBtYWludGFpbiB3YXJuaW5nIHRocmVzaG9sZCBjb25zaXN0ZW5jeSBhY3Jvc3MgYWxsIHZhbGlkIGlucHV0cycsICgpID0+IHtcbiAgICBmYy5hc3NlcnQoXG4gICAgICBmYy5wcm9wZXJ0eShcbiAgICAgICAgZmMuaW50ZWdlcih7IG1pbjogMSwgbWF4OiAxMDAwIH0pLCAvLyBjYXBhY2l0eVxuICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiAwLCBtYXg6IDEwMDAgfSksIC8vIGN1cnJlbnRSc3Zwc1xuICAgICAgICAoY2FwYWNpdHksIGN1cnJlbnRSc3ZwcykgPT4ge1xuICAgICAgICAgIC8vIEVuc3VyZSBjdXJyZW50UnN2cHMgZG9lc24ndCBleGNlZWQgY2FwYWNpdHlcbiAgICAgICAgICBjb25zdCB2YWxpZFJzdnBzID0gTWF0aC5taW4oY3VycmVudFJzdnBzLCBjYXBhY2l0eSk7XG4gICAgICAgICAgY29uc3QgdXRpbGl6YXRpb24gPSBjYWxjdWxhdGVVdGlsaXphdGlvbih2YWxpZFJzdnBzLCBjYXBhY2l0eSk7XG4gICAgICAgICAgY29uc3Qgd2FybmluZyA9IHNob3VsZERpc3BsYXlXYXJuaW5nKHZhbGlkUnN2cHMsIGNhcGFjaXR5KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBQcm9wZXJ0eTogV2FybmluZyBzdGF0ZSBtdXN0IGJlIGNvbnNpc3RlbnQgd2l0aCB1dGlsaXphdGlvbiBjYWxjdWxhdGlvblxuICAgICAgICAgIGlmICh1dGlsaXphdGlvbiA+PSA5MCAmJiB1dGlsaXphdGlvbiA8IDEwMCkge1xuICAgICAgICAgICAgZXhwZWN0KHdhcm5pbmcpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGV4cGVjdCh3YXJuaW5nKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDIwMCB9XG4gICAgKTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJkZXNjcmliZSIsImNhbGN1bGF0ZVV0aWxpemF0aW9uIiwiY3VycmVudFJzdnBzIiwiY2FwYWNpdHkiLCJzaG91bGREaXNwbGF5V2FybmluZyIsInV0aWxpemF0aW9uIiwiaXQiLCJmYyIsImFzc2VydCIsInByb3BlcnR5IiwiaW50ZWdlciIsIm1pbiIsIm1heCIsIm1pblJzdnBzIiwiTWF0aCIsImNlaWwiLCJtYXhSc3ZwcyIsIndhcm5pbmciLCJleHBlY3QiLCJ0b0JlIiwidG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCIsInRvQmVMZXNzVGhhbiIsIm51bVJ1bnMiLCJmbG9vciIsIm1hcCIsIm4iLCJ2YWxpZFJzdnBzIl0sIm1hcHBpbmdzIjoiOzs7O21FQUFvQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRXBCOzs7Ozs7Ozs7OztDQVdDLEdBRURBLFNBQVMsMkZBQTJGO0lBQ2xHOztHQUVDLEdBQ0QsU0FBU0MscUJBQXFCQyxZQUFvQixFQUFFQyxRQUFnQjtRQUNsRSxJQUFJQSxhQUFhLEdBQUcsT0FBTztRQUMzQixPQUFPLEFBQUNELGVBQWVDLFdBQVk7SUFDckM7SUFFQTs7R0FFQyxHQUNELFNBQVNDLHFCQUFxQkYsWUFBb0IsRUFBRUMsUUFBZ0I7UUFDbEUsTUFBTUUsY0FBY0oscUJBQXFCQyxjQUFjQztRQUN2RCxPQUFPRSxlQUFlLE1BQU1BLGNBQWM7SUFDNUM7SUFFQUMsR0FBRyx5RUFBeUU7UUFDMUVDLFdBQUdDLE1BQU0sQ0FDUEQsV0FBR0UsUUFBUSxDQUNULHdDQUF3QztRQUN4Q0YsV0FBR0csT0FBTyxDQUFDO1lBQUVDLEtBQUs7WUFBSUMsS0FBSztRQUFLLElBQ2hDLENBQUNUO1lBQ0MsMkRBQTJEO1lBQzNELE1BQU1VLFdBQVdDLEtBQUtDLElBQUksQ0FBQ1osV0FBVztZQUN0QyxNQUFNYSxXQUFXYixXQUFXO1lBRTVCSSxXQUFHQyxNQUFNLENBQ1BELFdBQUdFLFFBQVEsQ0FDVEYsV0FBR0csT0FBTyxDQUFDO2dCQUFFQyxLQUFLRTtnQkFBVUQsS0FBS0k7WUFBUyxJQUMxQyxDQUFDZDtnQkFDQyxNQUFNRyxjQUFjSixxQkFBcUJDLGNBQWNDO2dCQUN2RCxN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