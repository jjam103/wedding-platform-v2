{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/__tests__/integration/sectionEditorPreview.integration.test.tsx"],"sourcesContent":["/**\n * Section Editor Preview Integration Tests\n * \n * Tests the preview functionality in the section editor, including:\n * - Preview toggle (expand/collapse)\n * - Preview updates when content changes\n * - Preview with rich text content\n * - Preview with photo galleries\n * - Preview with references\n * - Preview with 1-column and 2-column layouts\n * - Preview with multiple sections\n * - Preview with empty sections\n * \n * **Validates: Requirements 4.2** (E2E Critical Path Testing - Section Management Flow)\n */\n\nimport React from 'react';\nimport { render, screen, waitFor, fireEvent } from '@testing-library/react';\nimport { SectionEditor } from '@/components/admin/SectionEditor';\nimport type { Section, Column } from '@/schemas/cmsSchemas';\n\n// Mock Next.js Image component\njest.mock('next/image', () => ({\n  __esModule: true,\n  default: (props: any) => {\n    // eslint-disable-next-line @next/next/no-img-element, jsx-a11y/alt-text\n    return React.createElement('img', props);\n  },\n}));\n\n// Mock dynamic imports\njest.mock('next/dynamic', () => ({\n  __esModule: true,\n  default: (fn: any) => {\n    const Component = fn().then((mod: any) => mod.default || mod);\n    return Component;\n  },\n}));\n\n// Mock PhotoPicker\njest.mock('@/components/admin/PhotoPicker', () => ({\n  PhotoPicker: (props: any) => {\n    const { selectedPhotoIds, onSelectionChange } = props;\n    return React.createElement(\n      'div',\n      { 'data-testid': 'photo-picker' },\n      React.createElement('div', null, `Selected: ${selectedPhotoIds.length} photos`),\n      React.createElement(\n        'button',\n        { onClick: () => onSelectionChange(['photo-1', 'photo-2']) },\n        'Add Photos'\n      )\n    );\n  },\n}));\n\n// Mock RichTextEditor\njest.mock('@/components/admin/RichTextEditor', () => ({\n  RichTextEditor: (props: any) => {\n    const { value, onChange } = props;\n    return React.createElement('textarea', {\n      'data-testid': 'rich-text-editor',\n      value,\n      onChange: (e: any) => onChange(e.target.value),\n      placeholder: 'Start typing...',\n    });\n  },\n}));\n\n// Mock PhotoGallerySkeleton\njest.mock('@/components/admin/PhotoGallerySkeleton', () => ({\n  PhotoGallerySkeleton: () =>\n    React.createElement('div', { 'data-testid': 'photo-gallery-skeleton' }, 'Loading...'),\n}));\n\n// Mock Button component\njest.mock('@/components/ui/Button', () => ({\n  Button: (props: any) => {\n    const { children, onClick, disabled, ...rest } = props;\n    return React.createElement('button', { onClick, disabled, ...rest }, children);\n  },\n}));\n\ndescribe('Section Editor Preview Integration Tests', () => {\n  let mockFetch: jest.Mock;\n\n  beforeEach(() => {\n    mockFetch = jest.fn();\n    global.fetch = mockFetch;\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Preview Toggle (expand/collapse)', () => {\n    it('should show preview section collapsed by default', async () => {\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: true, data: [] }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      // Preview content should not be visible initially\n      expect(screen.queryByText('No sections to preview')).not.toBeInTheDocument();\n    });\n\n    it('should expand preview when clicked', async () => {\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: true, data: [] }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      // Click to expand\n      const previewButton = screen.getByText('Guest Preview');\n      fireEvent.click(previewButton);\n\n      // Preview content should now be visible\n      await waitFor(() => {\n        expect(screen.getByText('No sections to preview')).toBeInTheDocument();\n      });\n    });\n\n    it('should collapse preview when clicked again', async () => {\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: true, data: [] }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      const previewButton = screen.getByText('Guest Preview');\n\n      // Expand\n      fireEvent.click(previewButton);\n      await waitFor(() => {\n        expect(screen.getByText('No sections to preview')).toBeInTheDocument();\n      });\n\n      // Collapse\n      fireEvent.click(previewButton);\n      await waitFor(() => {\n        expect(screen.queryByText('No sections to preview')).not.toBeInTheDocument();\n      });\n    });\n\n    it('should show arrow indicator for expand/collapse state', async () => {\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: true, data: [] }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        const previewButton = screen.getByText('Guest Preview');\n        expect(previewButton.parentElement).toHaveTextContent('▶');\n      });\n\n      // Click to expand\n      const previewButton = screen.getByText('Guest Preview');\n      fireEvent.click(previewButton);\n\n      await waitFor(() => {\n        expect(previewButton.parentElement).toHaveTextContent('▼');\n      });\n    });\n  });\n\n  describe('Preview with Rich Text Content', () => {\n    it('should display rich text content in preview', async () => {\n      const mockSection = {\n        id: 'section-1',\n        page_type: 'activity',\n        page_id: 'activity-1',\n        display_order: 0,\n        title: 'Test Section',\n        columns: [\n          {\n            id: 'col-1',\n            section_id: 'section-1',\n            column_number: 1,\n            content_type: 'rich_text',\n            content_data: { html: '<p>This is <strong>rich text</strong> content</p>' },\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: true, data: [mockSection] }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      // Expand preview\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      // Should display rich text content\n      await waitFor(() => {\n        const preview = screen.getByText(/This is/);\n        expect(preview).toBeInTheDocument();\n        expect(preview.innerHTML).toContain('<strong>rich text</strong>');\n      });\n    });\n\n    it('should handle empty rich text content', async () => {\n      const mockSection = {\n        id: 'section-1',\n        page_type: 'activity',\n        page_id: 'activity-1',\n        display_order: 0,\n        columns: [\n          {\n            id: 'col-1',\n            section_id: 'section-1',\n            column_number: 1,\n            content_type: 'rich_text',\n            content_data: { html: '' },\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: true, data: [mockSection] }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      await waitFor(() => {\n        expect(screen.getByText('Section 1')).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Preview with Photo Galleries', () => {\n    it('should display photo gallery preview with photos', async () => {\n      const mockSection = {\n        id: 'section-1',\n        page_type: 'activity',\n        page_id: 'activity-1',\n        display_order: 0,\n        columns: [\n          {\n            id: 'col-1',\n            section_id: 'section-1',\n            column_number: 1,\n            content_type: 'photo_gallery',\n            content_data: {\n              photo_ids: ['photo-1', 'photo-2'],\n              display_mode: 'gallery',\n            },\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      // Mock sections API\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: true, data: [mockSection] }),\n      });\n\n      // Mock photo API calls\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({\n          success: true,\n          data: {\n            id: 'photo-1',\n            photo_url: 'https://example.com/photo1.jpg',\n            caption: 'Test Photo',\n          },\n        }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      // Should fetch photos for preview\n      await waitFor(() => {\n        expect(mockFetch).toHaveBeenCalledWith('/api/admin/photos/photo-1');\n        expect(mockFetch).toHaveBeenCalledWith('/api/admin/photos/photo-2');\n      });\n    });\n\n    it('should display gallery mode indicator', async () => {\n      const mockSection = {\n        id: 'section-1',\n        page_type: 'activity',\n        page_id: 'activity-1',\n        display_order: 0,\n        columns: [\n          {\n            id: 'col-1',\n            section_id: 'section-1',\n            column_number: 1,\n            content_type: 'photo_gallery',\n            content_data: {\n              photo_ids: ['photo-1'],\n              display_mode: 'gallery',\n            },\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: true, data: [mockSection] }),\n      });\n\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({\n          success: true,\n          data: {\n            id: 'photo-1',\n            photo_url: 'https://example.com/photo1.jpg',\n          },\n        }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      await waitFor(() => {\n        expect(screen.getByText(/Display Mode: Gallery Grid/i)).toBeInTheDocument();\n      });\n    });\n\n    it('should display carousel mode indicator', async () => {\n      const mockSection = {\n        id: 'section-1',\n        page_type: 'activity',\n        page_id: 'activity-1',\n        display_order: 0,\n        columns: [\n          {\n            id: 'col-1',\n            section_id: 'section-1',\n            column_number: 1,\n            content_type: 'photo_gallery',\n            content_data: {\n              photo_ids: ['photo-1'],\n              display_mode: 'carousel',\n            },\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: true, data: [mockSection] }),\n      });\n\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({\n          success: true,\n          data: {\n            id: 'photo-1',\n            photo_url: 'https://example.com/photo1.jpg',\n          },\n        }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      await waitFor(() => {\n        expect(screen.getByText(/Display Mode: Carousel/i)).toBeInTheDocument();\n      });\n    });\n\n    it('should display loop mode indicator', async () => {\n      const mockSection = {\n        id: 'section-1',\n        page_type: 'activity',\n        page_id: 'activity-1',\n        display_order: 0,\n        columns: [\n          {\n            id: 'col-1',\n            section_id: 'section-1',\n            column_number: 1,\n            content_type: 'photo_gallery',\n            content_data: {\n              photo_ids: ['photo-1'],\n              display_mode: 'loop',\n            },\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: true, data: [mockSection] }),\n      });\n\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({\n          success: true,\n          data: {\n            id: 'photo-1',\n            photo_url: 'https://example.com/photo1.jpg',\n          },\n        }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      await waitFor(() => {\n        expect(screen.getByText(/Display Mode: Auto-play Loop/i)).toBeInTheDocument();\n      });\n    });\n\n    it('should show \"No photos selected\" when photo_ids is empty', async () => {\n      const mockSection = {\n        id: 'section-1',\n        page_type: 'activity',\n        page_id: 'activity-1',\n        display_order: 0,\n        columns: [\n          {\n            id: 'col-1',\n            section_id: 'section-1',\n            column_number: 1,\n            content_type: 'photo_gallery',\n            content_data: {\n              photo_ids: [],\n              display_mode: 'gallery',\n            },\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: true, data: [mockSection] }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      await waitFor(() => {\n        expect(screen.getByText('No photos selected')).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Preview with References', () => {\n    it('should display references preview placeholder', async () => {\n      const mockSection = {\n        id: 'section-1',\n        page_type: 'activity',\n        page_id: 'activity-1',\n        display_order: 0,\n        columns: [\n          {\n            id: 'col-1',\n            section_id: 'section-1',\n            column_number: 1,\n            content_type: 'references',\n            content_data: {\n              references: [\n                { type: 'event', id: 'event-1', name: 'Wedding Ceremony' },\n              ],\n            },\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: true, data: [mockSection] }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      await waitFor(() => {\n        expect(screen.getByText('[References Preview]')).toBeInTheDocument();\n      });\n    });\n\n    it('should handle empty references', async () => {\n      const mockSection = {\n        id: 'section-1',\n        page_type: 'activity',\n        page_id: 'activity-1',\n        display_order: 0,\n        columns: [\n          {\n            id: 'col-1',\n            section_id: 'section-1',\n            column_number: 1,\n            content_type: 'references',\n            content_data: { references: [] },\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: true, data: [mockSection] }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      await waitFor(() => {\n        expect(screen.getByText('[References Preview]')).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Preview with 1-Column Layout', () => {\n    it('should display single column in preview', async () => {\n      const mockSection = {\n        id: 'section-1',\n        page_type: 'activity',\n        page_id: 'activity-1',\n        display_order: 0,\n        columns: [\n          {\n            id: 'col-1',\n            section_id: 'section-1',\n            column_number: 1,\n            content_type: 'rich_text',\n            content_data: { html: '<p>Single column content</p>' },\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: true, data: [mockSection] }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      await waitFor(() => {\n        const preview = screen.getByText('Single column content');\n        expect(preview).toBeInTheDocument();\n        \n        // Check that it's in a single-column grid\n        const gridContainer = preview.closest('.grid');\n        expect(gridContainer).toHaveClass('grid-cols-1');\n      });\n    });\n\n    it('should display full-width content in 1-column layout', async () => {\n      const mockSection = {\n        id: 'section-1',\n        page_type: 'activity',\n        page_id: 'activity-1',\n        display_order: 0,\n        columns: [\n          {\n            id: 'col-1',\n            section_id: 'section-1',\n            column_number: 1,\n            content_type: 'rich_text',\n            content_data: { html: '<p>Full width content</p>' },\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: true, data: [mockSection] }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      await waitFor(() => {\n        expect(screen.getByText('Full width content')).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Preview with 2-Column Layout', () => {\n    it('should display two columns side by side in preview', async () => {\n      const mockSection = {\n        id: 'section-1',\n        page_type: 'activity',\n        page_id: 'activity-1',\n        display_order: 0,\n        columns: [\n          {\n            id: 'col-1',\n            section_id: 'section-1',\n            column_number: 1,\n            content_type: 'rich_text',\n            content_data: { html: '<p>Left column</p>' },\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n          {\n            id: 'col-2',\n            section_id: 'section-1',\n            column_number: 2,\n            content_type: 'rich_text',\n            content_data: { html: '<p>Right column</p>' },\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: true, data: [mockSection] }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      await waitFor(() => {\n        expect(screen.getByText('Left column')).toBeInTheDocument();\n        expect(screen.getByText('Right column')).toBeInTheDocument();\n        \n        // Check that it's in a two-column grid\n        const leftColumn = screen.getByText('Left column');\n        const gridContainer = leftColumn.closest('.grid');\n        expect(gridContainer).toHaveClass('grid-cols-2');\n      });\n    });\n\n    it('should display mixed content types in 2-column layout', async () => {\n      const mockSection = {\n        id: 'section-1',\n        page_type: 'activity',\n        page_id: 'activity-1',\n        display_order: 0,\n        columns: [\n          {\n            id: 'col-1',\n            section_id: 'section-1',\n            column_number: 1,\n            content_type: 'rich_text',\n            content_data: { html: '<p>Text content</p>' },\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n          {\n            id: 'col-2',\n            section_id: 'section-1',\n            column_number: 2,\n            content_type: 'photo_gallery',\n            content_data: { photo_ids: [], display_mode: 'gallery' },\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: true, data: [mockSection] }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      await waitFor(() => {\n        expect(screen.getByText('Text content')).toBeInTheDocument();\n        expect(screen.getByText('No photos selected')).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Preview with Multiple Sections', () => {\n    it('should display all sections in preview', async () => {\n      const mockSections = [\n        {\n          id: 'section-1',\n          page_type: 'activity',\n          page_id: 'activity-1',\n          display_order: 0,\n          title: 'First Section',\n          columns: [\n            {\n              id: 'col-1',\n              section_id: 'section-1',\n              column_number: 1,\n              content_type: 'rich_text',\n              content_data: { html: '<p>First section content</p>' },\n              created_at: new Date().toISOString(),\n              updated_at: new Date().toISOString(),\n            },\n          ],\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString(),\n        },\n        {\n          id: 'section-2',\n          page_type: 'activity',\n          page_id: 'activity-1',\n          display_order: 1,\n          title: 'Second Section',\n          columns: [\n            {\n              id: 'col-2',\n              section_id: 'section-2',\n              column_number: 1,\n              content_type: 'rich_text',\n              content_data: { html: '<p>Second section content</p>' },\n              created_at: new Date().toISOString(),\n              updated_at: new Date().toISOString(),\n            },\n          ],\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString(),\n        },\n      ];\n\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: true, data: mockSections }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      await waitFor(() => {\n        expect(screen.getByText('Section 1')).toBeInTheDocument();\n        expect(screen.getByText('Section 2')).toBeInTheDocument();\n        expect(screen.getByText('First section content')).toBeInTheDocument();\n        expect(screen.getByText('Second section content')).toBeInTheDocument();\n      });\n    });\n\n    it('should display sections in correct order', async () => {\n      const mockSections = [\n        {\n          id: 'section-1',\n          page_type: 'activity',\n          page_id: 'activity-1',\n          display_order: 0,\n          columns: [\n            {\n              id: 'col-1',\n              section_id: 'section-1',\n              column_number: 1,\n              content_type: 'rich_text',\n              content_data: { html: '<p>First</p>' },\n              created_at: new Date().toISOString(),\n              updated_at: new Date().toISOString(),\n            },\n          ],\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString(),\n        },\n        {\n          id: 'section-2',\n          page_type: 'activity',\n          page_id: 'activity-1',\n          display_order: 1,\n          columns: [\n            {\n              id: 'col-2',\n              section_id: 'section-2',\n              column_number: 1,\n              content_type: 'rich_text',\n              content_data: { html: '<p>Second</p>' },\n              created_at: new Date().toISOString(),\n              updated_at: new Date().toISOString(),\n            },\n          ],\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString(),\n        },\n        {\n          id: 'section-3',\n          page_type: 'activity',\n          page_id: 'activity-1',\n          display_order: 2,\n          columns: [\n            {\n              id: 'col-3',\n              section_id: 'section-3',\n              column_number: 1,\n              content_type: 'rich_text',\n              content_data: { html: '<p>Third</p>' },\n              created_at: new Date().toISOString(),\n              updated_at: new Date().toISOString(),\n            },\n          ],\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString(),\n        },\n      ];\n\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: true, data: mockSections }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      await waitFor(() => {\n        const sections = screen.getAllByText(/Section \\d/);\n        expect(sections).toHaveLength(3);\n        expect(sections[0]).toHaveTextContent('Section 1');\n        expect(sections[1]).toHaveTextContent('Section 2');\n        expect(sections[2]).toHaveTextContent('Section 3');\n      });\n    });\n  });\n\n  describe('Preview with Empty Sections', () => {\n    it('should display \"No sections to preview\" when no sections exist', async () => {\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: true, data: [] }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      await waitFor(() => {\n        expect(screen.getByText('No sections to preview')).toBeInTheDocument();\n      });\n    });\n\n    it('should handle sections with empty content gracefully', async () => {\n      const mockSection = {\n        id: 'section-1',\n        page_type: 'activity',\n        page_id: 'activity-1',\n        display_order: 0,\n        columns: [\n          {\n            id: 'col-1',\n            section_id: 'section-1',\n            column_number: 1,\n            content_type: 'rich_text',\n            content_data: { html: '' },\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: true, data: [mockSection] }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      await waitFor(() => {\n        expect(screen.getByText('Section 1')).toBeInTheDocument();\n      });\n    });\n\n    it('should handle sections with null content_data', async () => {\n      const mockSection = {\n        id: 'section-1',\n        page_type: 'activity',\n        page_id: 'activity-1',\n        display_order: 0,\n        columns: [\n          {\n            id: 'col-1',\n            section_id: 'section-1',\n            column_number: 1,\n            content_type: 'rich_text',\n            content_data: null,\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: true, data: [mockSection] }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      await waitFor(() => {\n        expect(screen.getByText('Section 1')).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Preview Updates When Content Changes', () => {\n    it('should update preview when section content is modified', async () => {\n      const initialSection = {\n        id: 'section-1',\n        page_type: 'activity',\n        page_id: 'activity-1',\n        display_order: 0,\n        columns: [\n          {\n            id: 'col-1',\n            section_id: 'section-1',\n            column_number: 1,\n            content_type: 'rich_text',\n            content_data: { html: '<p>Initial content</p>' },\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      const updatedSection = {\n        ...initialSection,\n        columns: [\n          {\n            ...initialSection.columns[0],\n            content_data: { html: '<p>Updated content</p>' },\n          },\n        ],\n      };\n\n      // Initial load\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: true, data: [initialSection] }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      await waitFor(() => {\n        expect(screen.getByText('Initial content')).toBeInTheDocument();\n      });\n\n      // Simulate content update\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: true, data: updatedSection }),\n      });\n\n      // The preview should reflect the updated content\n      // Note: In the actual implementation, this would happen through state updates\n    });\n\n    it('should update preview when photos are added to gallery', async () => {\n      const sectionWithoutPhotos = {\n        id: 'section-1',\n        page_type: 'activity',\n        page_id: 'activity-1',\n        display_order: 0,\n        columns: [\n          {\n            id: 'col-1',\n            section_id: 'section-1',\n            column_number: 1,\n            content_type: 'photo_gallery',\n            content_data: { photo_ids: [], display_mode: 'gallery' },\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: true, data: [sectionWithoutPhotos] }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      await waitFor(() => {\n        expect(screen.getByText('No photos selected')).toBeInTheDocument();\n      });\n    });\n\n    it('should update preview when layout changes from 1 to 2 columns', async () => {\n      const oneColumnSection = {\n        id: 'section-1',\n        page_type: 'activity',\n        page_id: 'activity-1',\n        display_order: 0,\n        columns: [\n          {\n            id: 'col-1',\n            section_id: 'section-1',\n            column_number: 1,\n            content_type: 'rich_text',\n            content_data: { html: '<p>Single column</p>' },\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      mockFetch.mockResolvedValue({\n        ok: true,\n        json: async () => ({ success: true, data: [oneColumnSection] }),\n      });\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      await waitFor(() => {\n        const content = screen.getByText('Single column');\n        const gridContainer = content.closest('.grid');\n        expect(gridContainer).toHaveClass('grid-cols-1');\n      });\n    });\n  });\n\n  describe('Preview Error Handling', () => {\n    it('should handle API errors gracefully', async () => {\n      mockFetch.mockRejectedValue(new Error('Network error'));\n\n      const consoleSpy = jest.spyOn(console, 'error').mockImplementation();\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      consoleSpy.mockRestore();\n    });\n\n    it('should handle failed photo fetches in preview', async () => {\n      const mockSection = {\n        id: 'section-1',\n        page_type: 'activity',\n        page_id: 'activity-1',\n        display_order: 0,\n        columns: [\n          {\n            id: 'col-1',\n            section_id: 'section-1',\n            column_number: 1,\n            content_type: 'photo_gallery',\n            content_data: { photo_ids: ['photo-1'], display_mode: 'gallery' },\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          },\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      mockFetch.mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({ success: true, data: [mockSection] }),\n      });\n\n      mockFetch.mockRejectedValue(new Error('Photo fetch failed'));\n\n      const consoleSpy = jest.spyOn(console, 'error').mockImplementation();\n\n      render(<SectionEditor pageType=\"activity\" pageId=\"activity-1\" />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Guest Preview')).toBeInTheDocument();\n      });\n\n      fireEvent.click(screen.getByText('Guest Preview'));\n\n      await waitFor(() => {\n        expect(screen.getByText('Section 1')).toBeInTheDocument();\n      });\n\n      consoleSpy.mockRestore();\n    });\n  });\n});\n"],"names":["jest","mock","__esModule","default","props","React","createElement","fn","Component","then","mod","PhotoPicker","selectedPhotoIds","onSelectionChange","length","onClick","RichTextEditor","value","onChange","e","target","placeholder","PhotoGallerySkeleton","Button","children","disabled","rest","describe","mockFetch","beforeEach","global","fetch","afterEach","clearAllMocks","it","mockResolvedValue","ok","json","success","data","render","SectionEditor","pageType","pageId","waitFor","expect","screen","getByText","toBeInTheDocument","queryByText","not","previewButton","fireEvent","click","parentElement","toHaveTextContent","mockSection","id","page_type","page_id","display_order","title","columns","section_id","column_number","content_type","content_data","html","created_at","Date","toISOString","updated_at","preview","innerHTML","toContain","photo_ids","display_mode","mockResolvedValueOnce","photo_url","caption","toHaveBeenCalledWith","references","type","name","gridContainer","closest","toHaveClass","leftColumn","mockSections","sections","getAllByText","toHaveLength","initialSection","updatedSection","sectionWithoutPhotos","oneColumnSection","content","mockRejectedValue","Error","consoleSpy","spyOn","console","mockImplementation","mockRestore"],"mappings":"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"}