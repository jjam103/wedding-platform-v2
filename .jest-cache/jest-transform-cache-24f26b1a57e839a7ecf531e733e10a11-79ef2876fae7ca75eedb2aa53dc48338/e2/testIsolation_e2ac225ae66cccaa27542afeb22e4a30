4f230e994a020079b1f0a27ba889db7e
/**
 * Test Isolation Utilities
 * 
 * Ensures tests can run in parallel without interfering with each other.
 * Provides unique identifiers and cleanup mechanisms for test data.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get createCleanupTracker () {
        return createCleanupTracker;
    },
    get createTestNamespace () {
        return createTestNamespace;
    },
    get generateTestEmail () {
        return generateTestEmail;
    },
    get generateTestId () {
        return generateTestId;
    },
    get generateTestSlug () {
        return generateTestSlug;
    },
    get getTestMode () {
        return getTestMode;
    },
    get getWorkerId () {
        return getWorkerId;
    },
    get isCI () {
        return isCI;
    },
    get retry () {
        return retry;
    },
    get waitFor () {
        return waitFor;
    }
});
const _crypto = require("crypto");
function generateTestId(prefix = 'test') {
    const workerId = process.env.JEST_WORKER_ID || '0';
    const randomId = (0, _crypto.randomBytes)(4).toString('hex');
    const timestamp = Date.now().toString(36);
    return `${prefix}-${randomId}-${timestamp}-w${workerId}`;
}
function generateTestEmail(prefix = 'test') {
    const testId = generateTestId(prefix);
    return `${testId}@test.example.com`;
}
function generateTestSlug(prefix = 'test') {
    return generateTestId(prefix);
}
function createCleanupTracker() {
    const resources = new Map();
    return {
        /**
     * Track a resource for cleanup
     */ track (table, id) {
            if (!resources.has(table)) {
                resources.set(table, new Set());
            }
            resources.get(table).add(id);
        },
        /**
     * Get all tracked resources for a table
     */ getTracked (table) {
            return Array.from(resources.get(table) || []);
        },
        /**
     * Clean up all tracked resources
     */ async cleanupAll (supabase) {
            const errors = [];
            for (const [table, ids] of resources.entries()){
                try {
                    if (ids.size > 0) {
                        const { error } = await supabase.from(table).delete().in('id', Array.from(ids));
                        if (error) {
                            errors.push(new Error(`Failed to cleanup ${table}: ${error.message}`));
                        }
                    }
                } catch (err) {
                    errors.push(err instanceof Error ? err : new Error(String(err)));
                }
            }
            if (errors.length > 0) {
                console.warn('Cleanup errors:', errors);
            }
            resources.clear();
        },
        /**
     * Clear tracking without cleanup (for when resources are already deleted)
     */ clear () {
            resources.clear();
        }
    };
}
function createTestNamespace(prefix = 'test') {
    const baseId = generateTestId(prefix);
    return {
        id: baseId,
        /**
     * Generate a namespaced name
     */ name (suffix) {
            return `${baseId}-${suffix}`;
        },
        /**
     * Generate a namespaced email
     */ email (suffix) {
            return `${baseId}-${suffix}@test.example.com`;
        },
        /**
     * Generate a namespaced slug
     */ slug (suffix) {
            return `${baseId}-${suffix}`;
        },
        /**
     * Generate a namespaced ID
     */ subId (suffix) {
            return `${baseId}-${suffix}`;
        }
    };
}
async function waitFor(condition, timeout = 5000, interval = 100) {
    const startTime = Date.now();
    while(Date.now() - startTime < timeout){
        const result = await Promise.resolve(condition());
        if (result) {
            return;
        }
        await new Promise((resolve)=>setTimeout(resolve, interval));
    }
    throw new Error(`Timeout waiting for condition after ${timeout}ms`);
}
async function retry(fn, maxRetries = 3, baseDelay = 100) {
    let lastError;
    for(let attempt = 0; attempt <= maxRetries; attempt++){
        try {
            return await fn();
        } catch (err) {
            lastError = err instanceof Error ? err : new Error(String(err));
            if (attempt < maxRetries) {
                const delay = baseDelay * Math.pow(2, attempt);
                await new Promise((resolve)=>setTimeout(resolve, delay));
            }
        }
    }
    throw lastError || new Error('Retry failed');
}
function getWorkerId() {
    return process.env.JEST_WORKER_ID || '0';
}
function isCI() {
    return process.env.CI === 'true';
}
function getTestMode() {
    return process.env.JEST_WORKER_ID ? 'parallel' : 'serial';
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvX190ZXN0c19fL2hlbHBlcnMvdGVzdElzb2xhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRlc3QgSXNvbGF0aW9uIFV0aWxpdGllc1xuICogXG4gKiBFbnN1cmVzIHRlc3RzIGNhbiBydW4gaW4gcGFyYWxsZWwgd2l0aG91dCBpbnRlcmZlcmluZyB3aXRoIGVhY2ggb3RoZXIuXG4gKiBQcm92aWRlcyB1bmlxdWUgaWRlbnRpZmllcnMgYW5kIGNsZWFudXAgbWVjaGFuaXNtcyBmb3IgdGVzdCBkYXRhLlxuICovXG5cbmltcG9ydCB7IHJhbmRvbUJ5dGVzIH0gZnJvbSAnY3J5cHRvJztcblxuLyoqXG4gKiBHZW5lcmF0ZSBhIHVuaXF1ZSB0ZXN0IGlkZW50aWZpZXIgZm9yIHBhcmFsbGVsIHRlc3QgaXNvbGF0aW9uLlxuICogRWFjaCB0ZXN0IHdvcmtlciBnZXRzIHVuaXF1ZSBJRHMgdG8gcHJldmVudCBkYXRhIGNvbGxpc2lvbnMuXG4gKiBcbiAqIEBwYXJhbSBwcmVmaXggLSBPcHRpb25hbCBwcmVmaXggZm9yIHRoZSBpZGVudGlmaWVyXG4gKiBAcmV0dXJucyBVbmlxdWUgaWRlbnRpZmllciBzdHJpbmdcbiAqIFxuICogQGV4YW1wbGVcbiAqIGNvbnN0IHRlc3RJZCA9IGdlbmVyYXRlVGVzdElkKCdndWVzdCcpO1xuICogLy8gUmV0dXJuczogJ2d1ZXN0LWFiYzEyMy13b3JrZXIxJ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUZXN0SWQocHJlZml4OiBzdHJpbmcgPSAndGVzdCcpOiBzdHJpbmcge1xuICBjb25zdCB3b3JrZXJJZCA9IHByb2Nlc3MuZW52LkpFU1RfV09SS0VSX0lEIHx8ICcwJztcbiAgY29uc3QgcmFuZG9tSWQgPSByYW5kb21CeXRlcyg0KS50b1N0cmluZygnaGV4Jyk7XG4gIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCkudG9TdHJpbmcoMzYpO1xuICBcbiAgcmV0dXJuIGAke3ByZWZpeH0tJHtyYW5kb21JZH0tJHt0aW1lc3RhbXB9LXcke3dvcmtlcklkfWA7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSB1bmlxdWUgZW1haWwgZm9yIHRlc3QgdXNlcnMuXG4gKiBFbnN1cmVzIGVhY2ggdGVzdCB3b3JrZXIgaGFzIHVuaXF1ZSBlbWFpbCBhZGRyZXNzZXMuXG4gKiBcbiAqIEBwYXJhbSBwcmVmaXggLSBPcHRpb25hbCBwcmVmaXggZm9yIHRoZSBlbWFpbFxuICogQHJldHVybnMgVW5pcXVlIGVtYWlsIGFkZHJlc3NcbiAqIFxuICogQGV4YW1wbGVcbiAqIGNvbnN0IGVtYWlsID0gZ2VuZXJhdGVUZXN0RW1haWwoJ2FkbWluJyk7XG4gKiAvLyBSZXR1cm5zOiAnYWRtaW4tYWJjMTIzLXdvcmtlcjFAdGVzdC5leGFtcGxlLmNvbSdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlVGVzdEVtYWlsKHByZWZpeDogc3RyaW5nID0gJ3Rlc3QnKTogc3RyaW5nIHtcbiAgY29uc3QgdGVzdElkID0gZ2VuZXJhdGVUZXN0SWQocHJlZml4KTtcbiAgcmV0dXJuIGAke3Rlc3RJZH1AdGVzdC5leGFtcGxlLmNvbWA7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSB1bmlxdWUgc2x1ZyBmb3IgdGVzdCBjb250ZW50LlxuICogRW5zdXJlcyBlYWNoIHRlc3Qgd29ya2VyIGhhcyB1bmlxdWUgc2x1Z3MuXG4gKiBcbiAqIEBwYXJhbSBwcmVmaXggLSBPcHRpb25hbCBwcmVmaXggZm9yIHRoZSBzbHVnXG4gKiBAcmV0dXJucyBVbmlxdWUgc2x1ZyBzdHJpbmdcbiAqIFxuICogQGV4YW1wbGVcbiAqIGNvbnN0IHNsdWcgPSBnZW5lcmF0ZVRlc3RTbHVnKCdwYWdlJyk7XG4gKiAvLyBSZXR1cm5zOiAncGFnZS1hYmMxMjMtd29ya2VyMSdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlVGVzdFNsdWcocHJlZml4OiBzdHJpbmcgPSAndGVzdCcpOiBzdHJpbmcge1xuICByZXR1cm4gZ2VuZXJhdGVUZXN0SWQocHJlZml4KTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSB0ZXN0LXNjb3BlZCBjbGVhbnVwIHRyYWNrZXIuXG4gKiBUcmFja3MgcmVzb3VyY2VzIGNyZWF0ZWQgZHVyaW5nIGEgdGVzdCBmb3IgY2xlYW51cC5cbiAqIFxuICogQHJldHVybnMgQ2xlYW51cCB0cmFja2VyIG9iamVjdFxuICogXG4gKiBAZXhhbXBsZVxuICogY29uc3QgY2xlYW51cCA9IGNyZWF0ZUNsZWFudXBUcmFja2VyKCk7XG4gKiBjbGVhbnVwLnRyYWNrKCdndWVzdCcsIGd1ZXN0SWQpO1xuICogYXdhaXQgY2xlYW51cC5jbGVhbnVwQWxsKHN1cGFiYXNlKTtcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNsZWFudXBUcmFja2VyKCkge1xuICBjb25zdCByZXNvdXJjZXM6IE1hcDxzdHJpbmcsIFNldDxzdHJpbmc+PiA9IG5ldyBNYXAoKTtcbiAgXG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICogVHJhY2sgYSByZXNvdXJjZSBmb3IgY2xlYW51cFxuICAgICAqL1xuICAgIHRyYWNrKHRhYmxlOiBzdHJpbmcsIGlkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgIGlmICghcmVzb3VyY2VzLmhhcyh0YWJsZSkpIHtcbiAgICAgICAgcmVzb3VyY2VzLnNldCh0YWJsZSwgbmV3IFNldCgpKTtcbiAgICAgIH1cbiAgICAgIHJlc291cmNlcy5nZXQodGFibGUpIS5hZGQoaWQpO1xuICAgIH0sXG4gICAgXG4gICAgLyoqXG4gICAgICogR2V0IGFsbCB0cmFja2VkIHJlc291cmNlcyBmb3IgYSB0YWJsZVxuICAgICAqL1xuICAgIGdldFRyYWNrZWQodGFibGU6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICAgIHJldHVybiBBcnJheS5mcm9tKHJlc291cmNlcy5nZXQodGFibGUpIHx8IFtdKTtcbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIENsZWFuIHVwIGFsbCB0cmFja2VkIHJlc291cmNlc1xuICAgICAqL1xuICAgIGFzeW5jIGNsZWFudXBBbGwoc3VwYWJhc2U6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgY29uc3QgZXJyb3JzOiBFcnJvcltdID0gW107XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgW3RhYmxlLCBpZHNdIG9mIHJlc291cmNlcy5lbnRyaWVzKCkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoaWRzLnNpemUgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgICAgICAuZnJvbSh0YWJsZSlcbiAgICAgICAgICAgICAgLmRlbGV0ZSgpXG4gICAgICAgICAgICAgIC5pbignaWQnLCBBcnJheS5mcm9tKGlkcykpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgZXJyb3JzLnB1c2gobmV3IEVycm9yKGBGYWlsZWQgdG8gY2xlYW51cCAke3RhYmxlfTogJHtlcnJvci5tZXNzYWdlfWApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGVycm9ycy5wdXNoKGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyIDogbmV3IEVycm9yKFN0cmluZyhlcnIpKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignQ2xlYW51cCBlcnJvcnM6JywgZXJyb3JzKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmVzb3VyY2VzLmNsZWFyKCk7XG4gICAgfSxcbiAgICBcbiAgICAvKipcbiAgICAgKiBDbGVhciB0cmFja2luZyB3aXRob3V0IGNsZWFudXAgKGZvciB3aGVuIHJlc291cmNlcyBhcmUgYWxyZWFkeSBkZWxldGVkKVxuICAgICAqL1xuICAgIGNsZWFyKCk6IHZvaWQge1xuICAgICAgcmVzb3VyY2VzLmNsZWFyKCk7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIHRlc3Qtc2NvcGVkIG5hbWVzcGFjZSBmb3IgZGF0YSBpc29sYXRpb24uXG4gKiBVc2VmdWwgZm9yIHRlc3RzIHRoYXQgbmVlZCB0byBjcmVhdGUgbXVsdGlwbGUgcmVsYXRlZCBlbnRpdGllcy5cbiAqIFxuICogQHJldHVybnMgTmFtZXNwYWNlIG9iamVjdCB3aXRoIHVuaXF1ZSBpZGVudGlmaWVyc1xuICogXG4gKiBAZXhhbXBsZVxuICogY29uc3QgbnMgPSBjcmVhdGVUZXN0TmFtZXNwYWNlKCdndWVzdC1mbG93Jyk7XG4gKiBjb25zdCBncm91cCA9IGF3YWl0IGNyZWF0ZUdyb3VwKHsgbmFtZTogbnMubmFtZSgnRmFtaWx5IEdyb3VwJykgfSk7XG4gKiBjb25zdCBndWVzdCA9IGF3YWl0IGNyZWF0ZUd1ZXN0KHsgZW1haWw6IG5zLmVtYWlsKCdqb2huJykgfSk7XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUZXN0TmFtZXNwYWNlKHByZWZpeDogc3RyaW5nID0gJ3Rlc3QnKSB7XG4gIGNvbnN0IGJhc2VJZCA9IGdlbmVyYXRlVGVzdElkKHByZWZpeCk7XG4gIFxuICByZXR1cm4ge1xuICAgIGlkOiBiYXNlSWQsXG4gICAgXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgYSBuYW1lc3BhY2VkIG5hbWVcbiAgICAgKi9cbiAgICBuYW1lKHN1ZmZpeDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgIHJldHVybiBgJHtiYXNlSWR9LSR7c3VmZml4fWA7XG4gICAgfSxcbiAgICBcbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBhIG5hbWVzcGFjZWQgZW1haWxcbiAgICAgKi9cbiAgICBlbWFpbChzdWZmaXg6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICByZXR1cm4gYCR7YmFzZUlkfS0ke3N1ZmZpeH1AdGVzdC5leGFtcGxlLmNvbWA7XG4gICAgfSxcbiAgICBcbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBhIG5hbWVzcGFjZWQgc2x1Z1xuICAgICAqL1xuICAgIHNsdWcoc3VmZml4OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgcmV0dXJuIGAke2Jhc2VJZH0tJHtzdWZmaXh9YDtcbiAgICB9LFxuICAgIFxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIGEgbmFtZXNwYWNlZCBJRFxuICAgICAqL1xuICAgIHN1YklkKHN1ZmZpeDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgIHJldHVybiBgJHtiYXNlSWR9LSR7c3VmZml4fWA7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIFdhaXQgZm9yIGEgY29uZGl0aW9uIHdpdGggdGltZW91dC5cbiAqIFVzZWZ1bCBmb3Igd2FpdGluZyBmb3IgYXN5bmMgb3BlcmF0aW9ucyBpbiB0ZXN0cy5cbiAqIFxuICogQHBhcmFtIGNvbmRpdGlvbiAtIEZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0cnVlIHdoZW4gY29uZGl0aW9uIGlzIG1ldFxuICogQHBhcmFtIHRpbWVvdXQgLSBNYXhpbXVtIHRpbWUgdG8gd2FpdCBpbiBtaWxsaXNlY29uZHNcbiAqIEBwYXJhbSBpbnRlcnZhbCAtIENoZWNrIGludGVydmFsIGluIG1pbGxpc2Vjb25kc1xuICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gY29uZGl0aW9uIGlzIG1ldCBvciByZWplY3RzIG9uIHRpbWVvdXRcbiAqIFxuICogQGV4YW1wbGVcbiAqIGF3YWl0IHdhaXRGb3IoKCkgPT4gZGF0YS5sZW5ndGggPiAwLCA1MDAwKTtcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdhaXRGb3IoXG4gIGNvbmRpdGlvbjogKCkgPT4gYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4sXG4gIHRpbWVvdXQ6IG51bWJlciA9IDUwMDAsXG4gIGludGVydmFsOiBudW1iZXIgPSAxMDBcbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICBcbiAgd2hpbGUgKERhdGUubm93KCkgLSBzdGFydFRpbWUgPCB0aW1lb3V0KSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKGNvbmRpdGlvbigpKTtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBpbnRlcnZhbCkpO1xuICB9XG4gIFxuICB0aHJvdyBuZXcgRXJyb3IoYFRpbWVvdXQgd2FpdGluZyBmb3IgY29uZGl0aW9uIGFmdGVyICR7dGltZW91dH1tc2ApO1xufVxuXG4vKipcbiAqIFJldHJ5IGEgZnVuY3Rpb24gd2l0aCBleHBvbmVudGlhbCBiYWNrb2ZmLlxuICogVXNlZnVsIGZvciBmbGFreSBvcGVyYXRpb25zIGxpa2UgZXh0ZXJuYWwgQVBJIGNhbGxzLlxuICogXG4gKiBAcGFyYW0gZm4gLSBGdW5jdGlvbiB0byByZXRyeVxuICogQHBhcmFtIG1heFJldHJpZXMgLSBNYXhpbXVtIG51bWJlciBvZiByZXRyaWVzXG4gKiBAcGFyYW0gYmFzZURlbGF5IC0gQmFzZSBkZWxheSBpbiBtaWxsaXNlY29uZHNcbiAqIEByZXR1cm5zIFJlc3VsdCBvZiB0aGUgZnVuY3Rpb25cbiAqIFxuICogQGV4YW1wbGVcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJldHJ5KCgpID0+IGZldGNoRGF0YSgpLCAzLCAxMDApO1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmV0cnk8VD4oXG4gIGZuOiAoKSA9PiBQcm9taXNlPFQ+LFxuICBtYXhSZXRyaWVzOiBudW1iZXIgPSAzLFxuICBiYXNlRGVsYXk6IG51bWJlciA9IDEwMFxuKTogUHJvbWlzZTxUPiB7XG4gIGxldCBsYXN0RXJyb3I6IEVycm9yIHwgdW5kZWZpbmVkO1xuICBcbiAgZm9yIChsZXQgYXR0ZW1wdCA9IDA7IGF0dGVtcHQgPD0gbWF4UmV0cmllczsgYXR0ZW1wdCsrKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCBmbigpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgbGFzdEVycm9yID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIgOiBuZXcgRXJyb3IoU3RyaW5nKGVycikpO1xuICAgICAgXG4gICAgICBpZiAoYXR0ZW1wdCA8IG1heFJldHJpZXMpIHtcbiAgICAgICAgY29uc3QgZGVsYXkgPSBiYXNlRGVsYXkgKiBNYXRoLnBvdygyLCBhdHRlbXB0KTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5KSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICB0aHJvdyBsYXN0RXJyb3IgfHwgbmV3IEVycm9yKCdSZXRyeSBmYWlsZWQnKTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgSmVzdCB3b3JrZXIgSUQuXG4gKiBVc2VmdWwgZm9yIGRlYnVnZ2luZyBwYXJhbGxlbCB0ZXN0IGlzc3Vlcy5cbiAqIFxuICogQHJldHVybnMgV29ya2VyIElEIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0V29ya2VySWQoKTogc3RyaW5nIHtcbiAgcmV0dXJuIHByb2Nlc3MuZW52LkpFU1RfV09SS0VSX0lEIHx8ICcwJztcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBydW5uaW5nIGluIENJIGVudmlyb25tZW50LlxuICogXG4gKiBAcmV0dXJucyBUcnVlIGlmIHJ1bm5pbmcgaW4gQ0lcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ0koKTogYm9vbGVhbiB7XG4gIHJldHVybiBwcm9jZXNzLmVudi5DSSA9PT0gJ3RydWUnO1xufVxuXG4vKipcbiAqIEdldCB0ZXN0IGV4ZWN1dGlvbiBtb2RlLlxuICogXG4gKiBAcmV0dXJucyAncGFyYWxsZWwnIG9yICdzZXJpYWwnXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUZXN0TW9kZSgpOiAncGFyYWxsZWwnIHwgJ3NlcmlhbCcge1xuICByZXR1cm4gcHJvY2Vzcy5lbnYuSkVTVF9XT1JLRVJfSUQgPyAncGFyYWxsZWwnIDogJ3NlcmlhbCc7XG59XG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xlYW51cFRyYWNrZXIiLCJjcmVhdGVUZXN0TmFtZXNwYWNlIiwiZ2VuZXJhdGVUZXN0RW1haWwiLCJnZW5lcmF0ZVRlc3RJZCIsImdlbmVyYXRlVGVzdFNsdWciLCJnZXRUZXN0TW9kZSIsImdldFdvcmtlcklkIiwiaXNDSSIsInJldHJ5Iiwid2FpdEZvciIsInByZWZpeCIsIndvcmtlcklkIiwicHJvY2VzcyIsImVudiIsIkpFU1RfV09SS0VSX0lEIiwicmFuZG9tSWQiLCJyYW5kb21CeXRlcyIsInRvU3RyaW5nIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsInRlc3RJZCIsInJlc291cmNlcyIsIk1hcCIsInRyYWNrIiwidGFibGUiLCJpZCIsImhhcyIsInNldCIsIlNldCIsImdldCIsImFkZCIsImdldFRyYWNrZWQiLCJBcnJheSIsImZyb20iLCJjbGVhbnVwQWxsIiwic3VwYWJhc2UiLCJlcnJvcnMiLCJpZHMiLCJlbnRyaWVzIiwic2l6ZSIsImVycm9yIiwiZGVsZXRlIiwiaW4iLCJwdXNoIiwiRXJyb3IiLCJtZXNzYWdlIiwiZXJyIiwiU3RyaW5nIiwibGVuZ3RoIiwiY29uc29sZSIsIndhcm4iLCJjbGVhciIsImJhc2VJZCIsIm5hbWUiLCJzdWZmaXgiLCJlbWFpbCIsInNsdWciLCJzdWJJZCIsImNvbmRpdGlvbiIsInRpbWVvdXQiLCJpbnRlcnZhbCIsInN0YXJ0VGltZSIsInJlc3VsdCIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImZuIiwibWF4UmV0cmllcyIsImJhc2VEZWxheSIsImxhc3RFcnJvciIsImF0dGVtcHQiLCJkZWxheSIsIk1hdGgiLCJwb3ciLCJDSSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O0NBS0M7Ozs7Ozs7Ozs7O1FBaUVlQTtlQUFBQTs7UUF1RUFDO2VBQUFBOztRQXRHQUM7ZUFBQUE7O1FB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