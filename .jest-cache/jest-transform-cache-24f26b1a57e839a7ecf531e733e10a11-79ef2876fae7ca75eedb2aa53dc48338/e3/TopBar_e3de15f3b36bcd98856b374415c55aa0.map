{"version":3,"names":["cov_b5o8oct9w","actualCoverage","s","TopBar","f","router","_navigation","useRouter","isUserMenuOpen","setIsUserMenuOpen","_react","useState","isLoggingOut","setIsLoggingOut","userMenuRef","useRef","useEffect","handleClickOutside","event","b","current","contains","target","document","addEventListener","removeEventListener","toggleUserMenu","useCallback","prev","handleLogout","response","fetch","method","ok","push","console","error","handleProfile","_jsxruntime","jsx","className","role","jsxs","title","ref","onClick","id","disabled","Fragment"],"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/TopBar.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, useRef, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\n\n/**\n * TopBar Client Component\n * \n * Top navigation bar with:\n * - User menu with logout functionality\n * - Notification bell (placeholder for now)\n * - Responsive design\n */\nexport function TopBar() {\n  const router = useRouter();\n  const [isUserMenuOpen, setIsUserMenuOpen] = useState(false);\n  const [isLoggingOut, setIsLoggingOut] = useState(false);\n  const userMenuRef = useRef<HTMLDivElement>(null);\n\n  // Close user menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (userMenuRef.current && !userMenuRef.current.contains(event.target as Node)) {\n        setIsUserMenuOpen(false);\n      }\n    };\n\n    if (isUserMenuOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => document.removeEventListener('mousedown', handleClickOutside);\n    }\n  }, [isUserMenuOpen]);\n\n  const toggleUserMenu = useCallback(() => {\n    setIsUserMenuOpen((prev) => !prev);\n  }, []);\n\n  const handleLogout = useCallback(async () => {\n    try {\n      setIsLoggingOut(true);\n      \n      // Call logout API\n      const response = await fetch('/api/auth/logout', {\n        method: 'POST',\n      });\n\n      if (response.ok) {\n        // Redirect to login page\n        router.push('/auth/login');\n      } else {\n        console.error('Logout failed');\n        setIsLoggingOut(false);\n      }\n    } catch (error) {\n      console.error('Logout error:', error);\n      setIsLoggingOut(false);\n    }\n  }, [router]);\n\n  const handleProfile = useCallback(() => {\n    setIsUserMenuOpen(false);\n    router.push('/admin/settings');\n  }, [router]);\n\n  return (\n    <header className=\"h-16 bg-white border-b border-sage-200 shadow-sm sticky top-0 z-30\" role=\"banner\">\n      <div className=\"h-full px-4 sm:px-6 lg:px-8 flex items-center justify-between\">\n        {/* Left side - Page title or breadcrumbs */}\n        <div className=\"flex items-center gap-4\">\n          <h1 className=\"text-lg font-semibold text-sage-900 hidden sm:block\">\n            Wedding Admin\n          </h1>\n        </div>\n\n        {/* Right side - Actions */}\n        <div className=\"flex items-center gap-3\" role=\"toolbar\" aria-label=\"User actions\">\n          {/* Notification bell (placeholder) */}\n          <button\n            className=\"p-2 text-sage-600 hover:text-sage-900 hover:bg-sage-100 rounded-lg transition-colors relative\"\n            aria-label=\"Notifications (coming soon)\"\n            title=\"Notifications (coming soon)\"\n          >\n            <span className=\"text-xl\" aria-hidden=\"true\">üîî</span>\n            {/* Notification badge - placeholder */}\n            {/* <span className=\"absolute top-1 right-1 w-2 h-2 bg-volcano-500 rounded-full\"></span> */}\n          </button>\n\n          {/* User menu */}\n          <div className=\"relative\" ref={userMenuRef}>\n            <button\n              onClick={toggleUserMenu}\n              className=\"flex items-center gap-2 p-2 text-sage-700 hover:text-sage-900 hover:bg-sage-100 rounded-lg transition-colors\"\n              aria-label=\"User menu\"\n              aria-expanded={isUserMenuOpen}\n              aria-haspopup=\"true\"\n              aria-controls=\"user-menu-dropdown\"\n            >\n              <div className=\"w-8 h-8 bg-jungle-500 text-white rounded-full flex items-center justify-center font-medium\" aria-hidden=\"true\">\n                A\n              </div>\n              <span className=\"hidden sm:inline text-sm font-medium\">Admin</span>\n              <span className=\"text-xs\" aria-hidden=\"true\">{isUserMenuOpen ? '‚ñ≤' : '‚ñº'}</span>\n            </button>\n\n            {/* Dropdown menu */}\n            {isUserMenuOpen && (\n              <div \n                id=\"user-menu-dropdown\"\n                className=\"absolute right-0 mt-2 w-48 bg-white border border-sage-200 rounded-lg shadow-lg py-1 z-50 animate-slide-down\"\n                role=\"menu\"\n                aria-label=\"User menu options\"\n              >\n                <button\n                  onClick={handleProfile}\n                  className=\"w-full px-4 py-2 text-left text-sm text-sage-700 hover:bg-sage-50 transition-colors flex items-center gap-2\"\n                  role=\"menuitem\"\n                >\n                  <span aria-hidden=\"true\">‚öôÔ∏è</span>\n                  <span>Settings</span>\n                </button>\n                <div className=\"border-t border-sage-200 my-1\" role=\"separator\"></div>\n                <button\n                  onClick={handleLogout}\n                  disabled={isLoggingOut}\n                  className=\"w-full px-4 py-2 text-left text-sm text-volcano-600 hover:bg-volcano-50 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  role=\"menuitem\"\n                  aria-busy={isLoggingOut}\n                >\n                  {isLoggingOut ? (\n                    <>\n                      <div \n                        className=\"animate-spin rounded-full h-4 w-4 border-2 border-volcano-600 border-t-transparent\"\n                        role=\"status\"\n                        aria-label=\"Logging out\"\n                      ></div>\n                      <span>Logging out...</span>\n                    </>\n                  ) : (\n                    <>\n                      <span aria-hidden=\"true\">üö™</span>\n                      <span>Logout</span>\n                    </>\n                  )}\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n}\n"],"mappings":"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","ignoreList":[]}