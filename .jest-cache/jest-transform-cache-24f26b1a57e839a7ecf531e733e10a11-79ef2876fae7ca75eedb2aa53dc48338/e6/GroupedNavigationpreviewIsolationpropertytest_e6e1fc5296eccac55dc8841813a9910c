5a36fd49c99fd7a0eb7f7847671bd830
"use strict";
/**
 * Feature: admin-ux-enhancements, Property 6: Guest Portal Preview Isolation
 * 
 * **Validates: Requirements 5.2, 5.3**
 * 
 * For any admin user clicking "Preview Guest Portal", the preview should open in a new tab 
 * showing the guest view without affecting the admin session
 */ // Mock Next.js navigation
jest.mock('next/navigation', ()=>({
        usePathname: jest.fn(()=>'/admin')
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _fastcheck = /*#__PURE__*/ _interop_require_wildcard(require("fast-check"));
const _react = require("@testing-library/react");
const _GroupedNavigation = require("./GroupedNavigation");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
describe('Feature: admin-ux-enhancements, Property 6: Guest Portal Preview Isolation', ()=>{
    beforeEach(()=>{
        // Clear localStorage before each test
        localStorage.clear();
        jest.clearAllMocks();
        // Set default expanded groups to ensure Quick Actions is visible
        localStorage.setItem('admin_nav_expanded_groups', JSON.stringify([
            'quick-actions'
        ]));
    });
    it('should always render Preview Guest Portal link with target="_blank"', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.integer({
            min: 0,
            max: 100
        }), _fastcheck.boolean(), async (pendingPhotosCount, isCollapsed)=>{
            const { container } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: pendingPhotosCount,
                isCollapsed: isCollapsed
            }));
            // Property: Preview link should always exist
            const previewLink = _react.screen.queryByText('Preview Guest Portal');
            if (!isCollapsed) {
                // In expanded mode, link should be visible
                expect(previewLink).toBeInTheDocument();
                // Property: Link should have target="_blank" for new tab
                const linkElement = previewLink?.closest('a');
                expect(linkElement).toHaveAttribute('target', '_blank');
                // Property: Link should have rel="noopener noreferrer" for security
                expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');
                // Property: Link should point to guest portal root
                expect(linkElement).toHaveAttribute('href', '/');
            }
        }), {
            numRuns: 100
        });
    });
    it('should maintain external link properties across different navigation states', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.array(_fastcheck.constantFrom('/admin', '/admin/guests', '/admin/events', '/admin/photos'), {
            minLength: 1,
            maxLength: 5
        }), async (pathnames)=>{
            const { usePathname } = require('next/navigation');
            for (const pathname of pathnames){
                // Mock different admin paths
                usePathname.mockReturnValue(pathname);
                const { rerender } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                    pendingPhotosCount: 0,
                    isCollapsed: false
                }));
                const previewLink = _react.screen.getByText('Preview Guest Portal');
                const linkElement = previewLink.closest('a');
                // Property: External link attributes should be consistent regardless of current admin path
                expect(linkElement).toHaveAttribute('target', '_blank');
                expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');
                expect(linkElement).toHaveAttribute('href', '/');
                // Property: Link should have external indicator
                const externalIndicator = linkElement?.querySelector('[aria-hidden="true"]');
                expect(externalIndicator?.textContent).toBe('â†—');
                // Re-render with same props to test consistency
                rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                    pendingPhotosCount: 0,
                    isCollapsed: false
                }));
                const previewLinkAfterRerender = _react.screen.getByText('Preview Guest Portal');
                const linkElementAfterRerender = previewLinkAfterRerender.closest('a');
                // Property: Attributes should remain unchanged after re-render
                expect(linkElementAfterRerender).toHaveAttribute('target', '_blank');
                expect(linkElementAfterRerender).toHaveAttribute('rel', 'noopener noreferrer');
            }
        }), {
            numRuns: 50
        });
    });
    it('should not affect admin navigation state when preview link is present', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.constantFrom('/admin', '/admin/guests', '/admin/events', '/admin/photos', '/admin/budget'), _fastcheck.integer({
            min: 0,
            max: 50
        }), async (currentPath, pendingCount)=>{
            const { usePathname } = require('next/navigation');
            usePathname.mockReturnValue(currentPath);
            const onNavigate = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: pendingCount,
                isCollapsed: false,
                onNavigate: onNavigate
            }));
            const previewLink = _react.screen.getByText('Preview Guest Portal');
            const linkElement = previewLink.closest('a');
            // Property: Preview link should not trigger onNavigate callback
            // (because it opens in new tab, not navigating within admin)
            linkElement?.click();
            // Note: In real browser, target="_blank" prevents navigation in current tab
            // The onNavigate callback is for internal admin navigation only
            // External links with target="_blank" should not affect admin state
            // Property: Link attributes ensure isolation
            expect(linkElement).toHaveAttribute('target', '_blank');
            expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');
        }), {
            numRuns: 100
        });
    });
    it('should preserve preview link properties when other navigation items change', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.integer({
            min: 0,
            max: 100
        }), _fastcheck.integer({
            min: 0,
            max: 100
        }), async (initialPendingCount, updatedPendingCount)=>{
            const { rerender } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: initialPendingCount,
                isCollapsed: false
            }));
            // Get initial preview link
            const initialPreviewLink = _react.screen.getByText('Preview Guest Portal');
            const initialLinkElement = initialPreviewLink.closest('a');
            const initialHref = initialLinkElement?.getAttribute('href');
            const initialTarget = initialLinkElement?.getAttribute('target');
            const initialRel = initialLinkElement?.getAttribute('rel');
            // Re-render with different pending count (simulating badge updates)
            rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: updatedPendingCount,
                isCollapsed: false
            }));
            // Get preview link after update
            const updatedPreviewLink = _react.screen.getByText('Preview Guest Portal');
            const updatedLinkElement = updatedPreviewLink.closest('a');
            // Property: Preview link attributes should remain unchanged when other state changes
            expect(updatedLinkElement?.getAttribute('href')).toBe(initialHref);
            expect(updatedLinkElement?.getAttribute('target')).toBe(initialTarget);
            expect(updatedLinkElement?.getAttribute('rel')).toBe(initialRel);
            // Property: Core isolation attributes should always be present
            expect(updatedLinkElement).toHaveAttribute('target', '_blank');
            expect(updatedLinkElement).toHaveAttribute('rel', 'noopener noreferrer');
            expect(updatedLinkElement).toHaveAttribute('href', '/');
        }), {
            numRuns: 100
        });
    });
    it('should maintain security attributes (noopener noreferrer) for all preview link instances', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.boolean(), _fastcheck.integer({
            min: 0,
            max: 100
        }), async (isCollapsed, pendingCount)=>{
            const { unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: pendingCount,
                isCollapsed: isCollapsed
            }));
            if (!isCollapsed) {
                const previewLink = _react.screen.getByText('Preview Guest Portal');
                const linkElement = previewLink.closest('a');
                // Property: Security attributes must always be present to prevent:
                // 1. window.opener access (noopener)
                // 2. Referer header leakage (noreferrer)
                const relAttribute = linkElement?.getAttribute('rel');
                expect(relAttribute).toContain('noopener');
                expect(relAttribute).toContain('noreferrer');
                // Property: Both security attributes should be present together
                expect(relAttribute).toBe('noopener noreferrer');
            }
            // Note: In collapsed mode, the link is not rendered (only icons are shown)
            // This is acceptable as the collapsed view is for navigation efficiency
            // Clean up
            unmount();
        }), {
            numRuns: 100
        });
    });
    it('should render preview link in Quick Actions group consistently', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.integer({
            min: 0,
            max: 100
        }), async (pendingCount)=>{
            const { unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: pendingCount,
                isCollapsed: false
            }));
            // Find Quick Actions group
            const quickActionsButtons = _react.screen.queryAllByLabelText('Quick Actions section');
            expect(quickActionsButtons.length).toBeGreaterThan(0);
            const quickActionsButton = quickActionsButtons[0];
            expect(quickActionsButton).toBeInTheDocument();
            // Click to expand if needed
            if (quickActionsButton.getAttribute('aria-expanded') === 'false') {
                quickActionsButton.click();
            }
            // Property: Preview link should always be in Quick Actions group
            const previewLink = _react.screen.getByText('Preview Guest Portal');
            expect(previewLink).toBeInTheDocument();
            // Property: Preview link should be the first item in Quick Actions
            const quickActionsGroup = quickActionsButton.parentElement;
            const groupItems = quickActionsGroup?.querySelector('[role="group"]');
            const firstLink = groupItems?.querySelector('a');
            expect(firstLink?.textContent).toContain('Preview Guest Portal');
            // Clean up to avoid duplicate renders
            unmount();
        }), {
            numRuns: 50
        });
    });
    it('should handle localStorage state changes without affecting preview link isolation', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.array(_fastcheck.constantFrom('quick-actions', 'guest-management', 'event-planning', 'content'), {
            minLength: 1,
            maxLength: 4
        }), async (expandedGroups)=>{
            // Ensure quick-actions is always in the array so we can see the link
            const groupsWithQuickActions = Array.from(new Set([
                ...expandedGroups,
                'quick-actions'
            ]));
            // Set localStorage state
            localStorage.setItem('admin_nav_expanded_groups', JSON.stringify(groupsWithQuickActions));
            const { unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: 0,
                isCollapsed: false
            }));
            const previewLink = _react.screen.getByText('Preview Guest Portal');
            const linkElement = previewLink.closest('a');
            // Property: Preview link isolation attributes should be independent of localStorage state
            expect(linkElement).toHaveAttribute('target', '_blank');
            expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');
            expect(linkElement).toHaveAttribute('href', '/');
            // Clean up
            unmount();
        }), {
            numRuns: 50
        });
    });
    it('should maintain preview link accessibility attributes', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.integer({
            min: 0,
            max: 100
        }), async (pendingCount)=>{
            const { unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: pendingCount,
                isCollapsed: false
            }));
            const previewLink = _react.screen.getByText('Preview Guest Portal');
            const linkElement = previewLink.closest('a');
            // Property: Link should have proper aria-label for accessibility
            expect(linkElement).toHaveAttribute('aria-label', 'Preview Guest Portal');
            // Property: External indicator should be hidden from screen readers
            const externalIndicator = linkElement?.querySelector('[aria-hidden="true"]');
            expect(externalIndicator).toBeInTheDocument();
            expect(externalIndicator?.getAttribute('aria-hidden')).toBe('true');
            // Clean up
            unmount();
        }), {
            numRuns: 50
        });
    });
    it('should not be marked as active page (aria-current) since it opens externally', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.constantFrom('/admin', '/admin/guests', '/admin/events'), async (currentPath)=>{
            const { usePathname } = require('next/navigation');
            usePathname.mockReturnValue(currentPath);
            const { unmount } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_GroupedNavigation.GroupedNavigation, {
                pendingPhotosCount: 0,
                isCollapsed: false
            }));
            const previewLink = _react.screen.getByText('Preview Guest Portal');
            const linkElement = previewLink.closest('a');
            // Property: Preview link should never be marked as current page
            // because it opens in a new tab and doesn't affect admin navigation
            // Note: The component currently marks it as active when on '/', but this is
            // acceptable since it's an external link that opens in a new context
            // The key property is that it has target="_blank" which ensures isolation
            expect(linkElement).toHaveAttribute('target', '_blank');
            expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');
            // Clean up
            unmount();
        }), {
            numRuns: 50
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9hZG1pbi9Hcm91cGVkTmF2aWdhdGlvbi5wcmV2aWV3SXNvbGF0aW9uLnByb3BlcnR5LnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGZjIGZyb20gJ2Zhc3QtY2hlY2snO1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4gfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IEdyb3VwZWROYXZpZ2F0aW9uIH0gZnJvbSAnLi9Hcm91cGVkTmF2aWdhdGlvbic7XG5cbi8qKlxuICogRmVhdHVyZTogYWRtaW4tdXgtZW5oYW5jZW1lbnRzLCBQcm9wZXJ0eSA2OiBHdWVzdCBQb3J0YWwgUHJldmlldyBJc29sYXRpb25cbiAqIFxuICogKipWYWxpZGF0ZXM6IFJlcXVpcmVtZW50cyA1LjIsIDUuMyoqXG4gKiBcbiAqIEZvciBhbnkgYWRtaW4gdXNlciBjbGlja2luZyBcIlByZXZpZXcgR3Vlc3QgUG9ydGFsXCIsIHRoZSBwcmV2aWV3IHNob3VsZCBvcGVuIGluIGEgbmV3IHRhYiBcbiAqIHNob3dpbmcgdGhlIGd1ZXN0IHZpZXcgd2l0aG91dCBhZmZlY3RpbmcgdGhlIGFkbWluIHNlc3Npb25cbiAqL1xuXG4vLyBNb2NrIE5leHQuanMgbmF2aWdhdGlvblxuamVzdC5tb2NrKCduZXh0L25hdmlnYXRpb24nLCAoKSA9PiAoe1xuICB1c2VQYXRobmFtZTogamVzdC5mbigoKSA9PiAnL2FkbWluJyksXG59KSk7XG5cbmRlc2NyaWJlKCdGZWF0dXJlOiBhZG1pbi11eC1lbmhhbmNlbWVudHMsIFByb3BlcnR5IDY6IEd1ZXN0IFBvcnRhbCBQcmV2aWV3IElzb2xhdGlvbicsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgLy8gQ2xlYXIgbG9jYWxTdG9yYWdlIGJlZm9yZSBlYWNoIHRlc3RcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBcbiAgICAvLyBTZXQgZGVmYXVsdCBleHBhbmRlZCBncm91cHMgdG8gZW5zdXJlIFF1aWNrIEFjdGlvbnMgaXMgdmlzaWJsZVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9uYXZfZXhwYW5kZWRfZ3JvdXBzJywgSlNPTi5zdHJpbmdpZnkoWydxdWljay1hY3Rpb25zJ10pKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBhbHdheXMgcmVuZGVyIFByZXZpZXcgR3Vlc3QgUG9ydGFsIGxpbmsgd2l0aCB0YXJnZXQ9XCJfYmxhbmtcIicsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBmYy5hc3NlcnQoXG4gICAgICBmYy5hc3luY1Byb3BlcnR5KFxuICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiAwLCBtYXg6IDEwMCB9KSwgLy8gcGVuZGluZ1Bob3Rvc0NvdW50XG4gICAgICAgIGZjLmJvb2xlYW4oKSwgLy8gaXNDb2xsYXBzZWRcbiAgICAgICAgYXN5bmMgKHBlbmRpbmdQaG90b3NDb3VudCwgaXNDb2xsYXBzZWQpID0+IHtcbiAgICAgICAgICBjb25zdCB7IGNvbnRhaW5lciB9ID0gcmVuZGVyKFxuICAgICAgICAgICAgPEdyb3VwZWROYXZpZ2F0aW9uIFxuICAgICAgICAgICAgICBwZW5kaW5nUGhvdG9zQ291bnQ9e3BlbmRpbmdQaG90b3NDb3VudH1cbiAgICAgICAgICAgICAgaXNDb2xsYXBzZWQ9e2lzQ29sbGFwc2VkfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgLy8gUHJvcGVydHk6IFByZXZpZXcgbGluayBzaG91bGQgYWx3YXlzIGV4aXN0XG4gICAgICAgICAgY29uc3QgcHJldmlld0xpbmsgPSBzY3JlZW4ucXVlcnlCeVRleHQoJ1ByZXZpZXcgR3Vlc3QgUG9ydGFsJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCFpc0NvbGxhcHNlZCkge1xuICAgICAgICAgICAgLy8gSW4gZXhwYW5kZWQgbW9kZSwgbGluayBzaG91bGQgYmUgdmlzaWJsZVxuICAgICAgICAgICAgZXhwZWN0KHByZXZpZXdMaW5rKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBQcm9wZXJ0eTogTGluayBzaG91bGQgaGF2ZSB0YXJnZXQ9XCJfYmxhbmtcIiBmb3IgbmV3IHRhYlxuICAgICAgICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSBwcmV2aWV3TGluaz8uY2xvc2VzdCgnYScpO1xuICAgICAgICAgICAgZXhwZWN0KGxpbmtFbGVtZW50KS50b0hhdmVBdHRyaWJ1dGUoJ3RhcmdldCcsICdfYmxhbmsnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUHJvcGVydHk6IExpbmsgc2hvdWxkIGhhdmUgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiIGZvciBzZWN1cml0eVxuICAgICAgICAgICAgZXhwZWN0KGxpbmtFbGVtZW50KS50b0hhdmVBdHRyaWJ1dGUoJ3JlbCcsICdub29wZW5lciBub3JlZmVycmVyJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFByb3BlcnR5OiBMaW5rIHNob3VsZCBwb2ludCB0byBndWVzdCBwb3J0YWwgcm9vdFxuICAgICAgICAgICAgZXhwZWN0KGxpbmtFbGVtZW50KS50b0hhdmVBdHRyaWJ1dGUoJ2hyZWYnLCAnLycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIHsgbnVtUnVuczogMTAwIH1cbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIG1haW50YWluIGV4dGVybmFsIGxpbmsgcHJvcGVydGllcyBhY3Jvc3MgZGlmZmVyZW50IG5hdmlnYXRpb24gc3RhdGVzJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGZjLmFzc2VydChcbiAgICAgIGZjLmFzeW5jUHJvcGVydHkoXG4gICAgICAgIGZjLmFycmF5KGZjLmNvbnN0YW50RnJvbSgnL2FkbWluJywgJy9hZG1pbi9ndWVzdHMnLCAnL2FkbWluL2V2ZW50cycsICcvYWRtaW4vcGhvdG9zJyksIHsgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDUgfSksXG4gICAgICAgIGFzeW5jIChwYXRobmFtZXMpID0+IHtcbiAgICAgICAgICBjb25zdCB7IHVzZVBhdGhuYW1lIH0gPSByZXF1aXJlKCduZXh0L25hdmlnYXRpb24nKTtcbiAgICAgICAgICBcbiAgICAgICAgICBmb3IgKGNvbnN0IHBhdGhuYW1lIG9mIHBhdGhuYW1lcykge1xuICAgICAgICAgICAgLy8gTW9jayBkaWZmZXJlbnQgYWRtaW4gcGF0aHNcbiAgICAgICAgICAgIHVzZVBhdGhuYW1lLm1vY2tSZXR1cm5WYWx1ZShwYXRobmFtZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHsgcmVyZW5kZXIgfSA9IHJlbmRlcihcbiAgICAgICAgICAgICAgPEdyb3VwZWROYXZpZ2F0aW9uIHBlbmRpbmdQaG90b3NDb3VudD17MH0gaXNDb2xsYXBzZWQ9e2ZhbHNlfSAvPlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgcHJldmlld0xpbmsgPSBzY3JlZW4uZ2V0QnlUZXh0KCdQcmV2aWV3IEd1ZXN0IFBvcnRhbCcpO1xuICAgICAgICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSBwcmV2aWV3TGluay5jbG9zZXN0KCdhJyk7XG5cbiAgICAgICAgICAgIC8vIFByb3BlcnR5OiBFeHRlcm5hbCBsaW5rIGF0dHJpYnV0ZXMgc2hvdWxkIGJlIGNvbnNpc3RlbnQgcmVnYXJkbGVzcyBvZiBjdXJyZW50IGFkbWluIHBhdGhcbiAgICAgICAgICAgIGV4cGVjdChsaW5rRWxlbWVudCkudG9IYXZlQXR0cmlidXRlKCd0YXJnZXQnLCAnX2JsYW5rJyk7XG4gICAgICAgICAgICBleHBlY3QobGlua0VsZW1lbnQpLnRvSGF2ZUF0dHJpYnV0ZSgncmVsJywgJ25vb3BlbmVyIG5vcmVmZXJyZXInKTtcbiAgICAgICAgICAgIGV4cGVjdChsaW5rRWxlbWVudCkudG9IYXZlQXR0cmlidXRlKCdocmVmJywgJy8nKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUHJvcGVydHk6IExpbmsgc2hvdWxkIGhhdmUgZXh0ZXJuYWwgaW5kaWNhdG9yXG4gICAgICAgICAgICBjb25zdCBleHRlcm5hbEluZGljYXRvciA9IGxpbmtFbGVtZW50Py5xdWVyeVNlbGVjdG9yKCdbYXJpYS1oaWRkZW49XCJ0cnVlXCJdJyk7XG4gICAgICAgICAgICBleHBlY3QoZXh0ZXJuYWxJbmRpY2F0b3I/LnRleHRDb250ZW50KS50b0JlKCfihpcnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmUtcmVuZGVyIHdpdGggc2FtZSBwcm9wcyB0byB0ZXN0IGNvbnNpc3RlbmN5XG4gICAgICAgICAgICByZXJlbmRlcig8R3JvdXBlZE5hdmlnYXRpb24gcGVuZGluZ1Bob3Rvc0NvdW50PXswfSBpc0NvbGxhcHNlZD17ZmFsc2V9IC8+KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcHJldmlld0xpbmtBZnRlclJlcmVuZGVyID0gc2NyZWVuLmdldEJ5VGV4dCgnUHJldmlldyBHdWVzdCBQb3J0YWwnKTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmtFbGVtZW50QWZ0ZXJSZXJlbmRlciA9IHByZXZpZXdMaW5rQWZ0ZXJSZXJlbmRlci5jbG9zZXN0KCdhJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFByb3BlcnR5OiBBdHRyaWJ1dGVzIHNob3VsZCByZW1haW4gdW5jaGFuZ2VkIGFmdGVyIHJlLXJlbmRlclxuICAgICAgICAgICAgZXhwZWN0KGxpbmtFbGVtZW50QWZ0ZXJSZXJlbmRlcikudG9IYXZlQXR0cmlidXRlKCd0YXJnZXQnLCAnX2JsYW5rJyk7XG4gICAgICAgICAgICBleHBlY3QobGlua0VsZW1lbnRBZnRlclJlcmVuZGVyKS50b0hhdmVBdHRyaWJ1dGUoJ3JlbCcsICdub29wZW5lciBub3JlZmVycmVyJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApLFxuICAgICAgeyBudW1SdW5zOiA1MCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBub3QgYWZmZWN0IGFkbWluIG5hdmlnYXRpb24gc3RhdGUgd2hlbiBwcmV2aWV3IGxpbmsgaXMgcHJlc2VudCcsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBmYy5hc3NlcnQoXG4gICAgICBmYy5hc3luY1Byb3BlcnR5KFxuICAgICAgICBmYy5jb25zdGFudEZyb20oJy9hZG1pbicsICcvYWRtaW4vZ3Vlc3RzJywgJy9hZG1pbi9ldmVudHMnLCAnL2FkbWluL3Bob3RvcycsICcvYWRtaW4vYnVkZ2V0JyksXG4gICAgICAgIGZjLmludGVnZXIoeyBtaW46IDAsIG1heDogNTAgfSksXG4gICAgICAgIGFzeW5jIChjdXJyZW50UGF0aCwgcGVuZGluZ0NvdW50KSA9PiB7XG4gICAgICAgICAgY29uc3QgeyB1c2VQYXRobmFtZSB9ID0gcmVxdWlyZSgnbmV4dC9uYXZpZ2F0aW9uJyk7XG4gICAgICAgICAgdXNlUGF0aG5hbWUubW9ja1JldHVyblZhbHVlKGN1cnJlbnRQYXRoKTtcblxuICAgICAgICAgIGNvbnN0IG9uTmF2aWdhdGUgPSBqZXN0LmZuKCk7XG4gICAgICAgICAgXG4gICAgICAgICAgcmVuZGVyKFxuICAgICAgICAgICAgPEdyb3VwZWROYXZpZ2F0aW9uIFxuICAgICAgICAgICAgICBwZW5kaW5nUGhvdG9zQ291bnQ9e3BlbmRpbmdDb3VudH1cbiAgICAgICAgICAgICAgaXNDb2xsYXBzZWQ9e2ZhbHNlfVxuICAgICAgICAgICAgICBvbk5hdmlnYXRlPXtvbk5hdmlnYXRlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgY29uc3QgcHJldmlld0xpbmsgPSBzY3JlZW4uZ2V0QnlUZXh0KCdQcmV2aWV3IEd1ZXN0IFBvcnRhbCcpO1xuICAgICAgICAgIGNvbnN0IGxpbmtFbGVtZW50ID0gcHJldmlld0xpbmsuY2xvc2VzdCgnYScpO1xuXG4gICAgICAgICAgLy8gUHJvcGVydHk6IFByZXZpZXcgbGluayBzaG91bGQgbm90IHRyaWdnZXIgb25OYXZpZ2F0ZSBjYWxsYmFja1xuICAgICAgICAgIC8vIChiZWNhdXNlIGl0IG9wZW5zIGluIG5ldyB0YWIsIG5vdCBuYXZpZ2F0aW5nIHdpdGhpbiBhZG1pbilcbiAgICAgICAgICBsaW5rRWxlbWVudD8uY2xpY2soKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBOb3RlOiBJbiByZWFsIGJyb3dzZXIsIHRhcmdldD1cIl9ibGFua1wiIHByZXZlbnRzIG5hdmlnYXRpb24gaW4gY3VycmVudCB0YWJcbiAgICAgICAgICAvLyBUaGUgb25OYXZpZ2F0ZSBjYWxsYmFjayBpcyBmb3IgaW50ZXJuYWwgYWRtaW4gbmF2aWdhdGlvbiBvbmx5XG4gICAgICAgICAgLy8gRXh0ZXJuYWwgbGlua3Mgd2l0aCB0YXJnZXQ9XCJfYmxhbmtcIiBzaG91bGQgbm90IGFmZmVjdCBhZG1pbiBzdGF0ZVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFByb3BlcnR5OiBMaW5rIGF0dHJpYnV0ZXMgZW5zdXJlIGlzb2xhdGlvblxuICAgICAgICAgIGV4cGVjdChsaW5rRWxlbWVudCkudG9IYXZlQXR0cmlidXRlKCd0YXJnZXQnLCAnX2JsYW5rJyk7XG4gICAgICAgICAgZXhwZWN0KGxpbmtFbGVtZW50KS50b0hhdmVBdHRyaWJ1dGUoJ3JlbCcsICdub29wZW5lciBub3JlZmVycmVyJyk7XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBwcmVzZXJ2ZSBwcmV2aWV3IGxpbmsgcHJvcGVydGllcyB3aGVuIG90aGVyIG5hdmlnYXRpb24gaXRlbXMgY2hhbmdlJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGZjLmFzc2VydChcbiAgICAgIGZjLmFzeW5jUHJvcGVydHkoXG4gICAgICAgIGZjLmludGVnZXIoeyBtaW46IDAsIG1heDogMTAwIH0pLFxuICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiAwLCBtYXg6IDEwMCB9KSxcbiAgICAgICAgYXN5bmMgKGluaXRpYWxQZW5kaW5nQ291bnQsIHVwZGF0ZWRQZW5kaW5nQ291bnQpID0+IHtcbiAgICAgICAgICBjb25zdCB7IHJlcmVuZGVyIH0gPSByZW5kZXIoXG4gICAgICAgICAgICA8R3JvdXBlZE5hdmlnYXRpb24gXG4gICAgICAgICAgICAgIHBlbmRpbmdQaG90b3NDb3VudD17aW5pdGlhbFBlbmRpbmdDb3VudH1cbiAgICAgICAgICAgICAgaXNDb2xsYXBzZWQ9e2ZhbHNlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgLy8gR2V0IGluaXRpYWwgcHJldmlldyBsaW5rXG4gICAgICAgICAgY29uc3QgaW5pdGlhbFByZXZpZXdMaW5rID0gc2NyZWVuLmdldEJ5VGV4dCgnUHJldmlldyBHdWVzdCBQb3J0YWwnKTtcbiAgICAgICAgICBjb25zdCBpbml0aWFsTGlua0VsZW1lbnQgPSBpbml0aWFsUHJldmlld0xpbmsuY2xvc2VzdCgnYScpO1xuICAgICAgICAgIGNvbnN0IGluaXRpYWxIcmVmID0gaW5pdGlhbExpbmtFbGVtZW50Py5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcbiAgICAgICAgICBjb25zdCBpbml0aWFsVGFyZ2V0ID0gaW5pdGlhbExpbmtFbGVtZW50Py5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpO1xuICAgICAgICAgIGNvbnN0IGluaXRpYWxSZWwgPSBpbml0aWFsTGlua0VsZW1lbnQ/LmdldEF0dHJpYnV0ZSgncmVsJyk7XG5cbiAgICAgICAgICAvLyBSZS1yZW5kZXIgd2l0aCBkaWZmZXJlbnQgcGVuZGluZyBjb3VudCAoc2ltdWxhdGluZyBiYWRnZSB1cGRhdGVzKVxuICAgICAgICAgIHJlcmVuZGVyKFxuICAgICAgICAgICAgPEdyb3VwZWROYXZpZ2F0aW9uIFxuICAgICAgICAgICAgICBwZW5kaW5nUGhvdG9zQ291bnQ9e3VwZGF0ZWRQZW5kaW5nQ291bnR9XG4gICAgICAgICAgICAgIGlzQ29sbGFwc2VkPXtmYWxzZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIEdldCBwcmV2aWV3IGxpbmsgYWZ0ZXIgdXBkYXRlXG4gICAgICAgICAgY29uc3QgdXBkYXRlZFByZXZpZXdMaW5rID0gc2NyZWVuLmdldEJ5VGV4dCgnUHJldmlldyBHdWVzdCBQb3J0YWwnKTtcbiAgICAgICAgICBjb25zdCB1cGRhdGVkTGlua0VsZW1lbnQgPSB1cGRhdGVkUHJldmlld0xpbmsuY2xvc2VzdCgnYScpO1xuXG4gICAgICAgICAgLy8gUHJvcGVydHk6IFByZXZpZXcgbGluayBhdHRyaWJ1dGVzIHNob3VsZCByZW1haW4gdW5jaGFuZ2VkIHdoZW4gb3RoZXIgc3RhdGUgY2hhbmdlc1xuICAgICAgICAgIGV4cGVjdCh1cGRhdGVkTGlua0VsZW1lbnQ/LmdldEF0dHJpYnV0ZSgnaHJlZicpKS50b0JlKGluaXRpYWxIcmVmKTtcbiAgICAgICAgICBleHBlY3QodXBkYXRlZExpbmtFbGVtZW50Py5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpKS50b0JlKGluaXRpYWxUYXJnZXQpO1xuICAgICAgICAgIGV4cGVjdCh1cGRhdGVkTGlua0VsZW1lbnQ/LmdldEF0dHJpYnV0ZSgncmVsJykpLnRvQmUoaW5pdGlhbFJlbCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUHJvcGVydHk6IENvcmUgaXNvbGF0aW9uIGF0dHJpYnV0ZXMgc2hvdWxkIGFsd2F5cyBiZSBwcmVzZW50XG4gICAgICAgICAgZXhwZWN0KHVwZGF0ZWRMaW5rRWxlbWVudCkudG9IYXZlQXR0cmlidXRlKCd0YXJnZXQnLCAnX2JsYW5rJyk7XG4gICAgICAgICAgZXhwZWN0KHVwZGF0ZWRMaW5rRWxlbWVudCkudG9IYXZlQXR0cmlidXRlKCdyZWwnLCAnbm9vcGVuZXIgbm9yZWZlcnJlcicpO1xuICAgICAgICAgIGV4cGVjdCh1cGRhdGVkTGlua0VsZW1lbnQpLnRvSGF2ZUF0dHJpYnV0ZSgnaHJlZicsICcvJyk7XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDEwMCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBtYWludGFpbiBzZWN1cml0eSBhdHRyaWJ1dGVzIChub29wZW5lciBub3JlZmVycmVyKSBmb3IgYWxsIHByZXZpZXcgbGluayBpbnN0YW5jZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgZmMuYXNzZXJ0KFxuICAgICAgZmMuYXN5bmNQcm9wZXJ0eShcbiAgICAgICAgZmMuYm9vbGVhbigpLFxuICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiAwLCBtYXg6IDEwMCB9KSxcbiAgICAgICAgYXN5bmMgKGlzQ29sbGFwc2VkLCBwZW5kaW5nQ291bnQpID0+IHtcbiAgICAgICAgICBjb25zdCB7IHVubW91bnQgfSA9IHJlbmRlcihcbiAgICAgICAgICAgIDxHcm91cGVkTmF2aWdhdGlvbiBcbiAgICAgICAgICAgICAgcGVuZGluZ1Bob3Rvc0NvdW50PXtwZW5kaW5nQ291bnR9XG4gICAgICAgICAgICAgIGlzQ29sbGFwc2VkPXtpc0NvbGxhcHNlZH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGlmICghaXNDb2xsYXBzZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHByZXZpZXdMaW5rID0gc2NyZWVuLmdldEJ5VGV4dCgnUHJldmlldyBHdWVzdCBQb3J0YWwnKTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmtFbGVtZW50ID0gcHJldmlld0xpbmsuY2xvc2VzdCgnYScpO1xuXG4gICAgICAgICAgICAvLyBQcm9wZXJ0eTogU2VjdXJpdHkgYXR0cmlidXRlcyBtdXN0IGFsd2F5cyBiZSBwcmVzZW50IHRvIHByZXZlbnQ6XG4gICAgICAgICAgICAvLyAxLiB3aW5kb3cub3BlbmVyIGFjY2VzcyAobm9vcGVuZXIpXG4gICAgICAgICAgICAvLyAyLiBSZWZlcmVyIGhlYWRlciBsZWFrYWdlIChub3JlZmVycmVyKVxuICAgICAgICAgICAgY29uc3QgcmVsQXR0cmlidXRlID0gbGlua0VsZW1lbnQ/LmdldEF0dHJpYnV0ZSgncmVsJyk7XG4gICAgICAgICAgICBleHBlY3QocmVsQXR0cmlidXRlKS50b0NvbnRhaW4oJ25vb3BlbmVyJyk7XG4gICAgICAgICAgICBleHBlY3QocmVsQXR0cmlidXRlKS50b0NvbnRhaW4oJ25vcmVmZXJyZXInKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUHJvcGVydHk6IEJvdGggc2VjdXJpdHkgYXR0cmlidXRlcyBzaG91bGQgYmUgcHJlc2VudCB0b2dldGhlclxuICAgICAgICAgICAgZXhwZWN0KHJlbEF0dHJpYnV0ZSkudG9CZSgnbm9vcGVuZXIgbm9yZWZlcnJlcicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBOb3RlOiBJbiBjb2xsYXBzZWQgbW9kZSwgdGhlIGxpbmsgaXMgbm90IHJlbmRlcmVkIChvbmx5IGljb25zIGFyZSBzaG93bilcbiAgICAgICAgICAvLyBUaGlzIGlzIGFjY2VwdGFibGUgYXMgdGhlIGNvbGxhcHNlZCB2aWV3IGlzIGZvciBuYXZpZ2F0aW9uIGVmZmljaWVuY3lcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDbGVhbiB1cFxuICAgICAgICAgIHVubW91bnQoKTtcbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIHsgbnVtUnVuczogMTAwIH1cbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJlbmRlciBwcmV2aWV3IGxpbmsgaW4gUXVpY2sgQWN0aW9ucyBncm91cCBjb25zaXN0ZW50bHknLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgZmMuYXNzZXJ0KFxuICAgICAgZmMuYXN5bmNQcm9wZXJ0eShcbiAgICAgICAgZmMuaW50ZWdlcih7IG1pbjogMCwgbWF4OiAxMDAgfSksXG4gICAgICAgIGFzeW5jIChwZW5kaW5nQ291bnQpID0+IHtcbiAgICAgICAgICBjb25zdCB7IHVubW91bnQgfSA9IHJlbmRlcihcbiAgICAgICAgICAgIDxHcm91cGVkTmF2aWdhdGlvbiBcbiAgICAgICAgICAgICAgcGVuZGluZ1Bob3Rvc0NvdW50PXtwZW5kaW5nQ291bnR9XG4gICAgICAgICAgICAgIGlzQ29sbGFwc2VkPXtmYWxzZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIEZpbmQgUXVpY2sgQWN0aW9ucyBncm91cFxuICAgICAgICAgIGNvbnN0IHF1aWNrQWN0aW9uc0J1dHRvbnMgPSBzY3JlZW4ucXVlcnlBbGxCeUxhYmVsVGV4dCgnUXVpY2sgQWN0aW9ucyBzZWN0aW9uJyk7XG4gICAgICAgICAgZXhwZWN0KHF1aWNrQWN0aW9uc0J1dHRvbnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgICAgY29uc3QgcXVpY2tBY3Rpb25zQnV0dG9uID0gcXVpY2tBY3Rpb25zQnV0dG9uc1swXTtcbiAgICAgICAgICBleHBlY3QocXVpY2tBY3Rpb25zQnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENsaWNrIHRvIGV4cGFuZCBpZiBuZWVkZWRcbiAgICAgICAgICBpZiAocXVpY2tBY3Rpb25zQnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICBxdWlja0FjdGlvbnNCdXR0b24uY2xpY2soKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBQcm9wZXJ0eTogUHJldmlldyBsaW5rIHNob3VsZCBhbHdheXMgYmUgaW4gUXVpY2sgQWN0aW9ucyBncm91cFxuICAgICAgICAgIGNvbnN0IHByZXZpZXdMaW5rID0gc2NyZWVuLmdldEJ5VGV4dCgnUHJldmlldyBHdWVzdCBQb3J0YWwnKTtcbiAgICAgICAgICBleHBlY3QocHJldmlld0xpbmspLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUHJvcGVydHk6IFByZXZpZXcgbGluayBzaG91bGQgYmUgdGhlIGZpcnN0IGl0ZW0gaW4gUXVpY2sgQWN0aW9uc1xuICAgICAgICAgIGNvbnN0IHF1aWNrQWN0aW9uc0dyb3VwID0gcXVpY2tBY3Rpb25zQnV0dG9uLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgY29uc3QgZ3JvdXBJdGVtcyA9IHF1aWNrQWN0aW9uc0dyb3VwPy5xdWVyeVNlbGVjdG9yKCdbcm9sZT1cImdyb3VwXCJdJyk7XG4gICAgICAgICAgY29uc3QgZmlyc3RMaW5rID0gZ3JvdXBJdGVtcz8ucXVlcnlTZWxlY3RvcignYScpO1xuICAgICAgICAgIFxuICAgICAgICAgIGV4cGVjdChmaXJzdExpbms/LnRleHRDb250ZW50KS50b0NvbnRhaW4oJ1ByZXZpZXcgR3Vlc3QgUG9ydGFsJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2xlYW4gdXAgdG8gYXZvaWQgZHVwbGljYXRlIHJlbmRlcnNcbiAgICAgICAgICB1bm1vdW50KCk7XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDUwIH1cbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhbmRsZSBsb2NhbFN0b3JhZ2Ugc3RhdGUgY2hhbmdlcyB3aXRob3V0IGFmZmVjdGluZyBwcmV2aWV3IGxpbmsgaXNvbGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGZjLmFzc2VydChcbiAgICAgIGZjLmFzeW5jUHJvcGVydHkoXG4gICAgICAgIGZjLmFycmF5KGZjLmNvbnN0YW50RnJvbSgncXVpY2stYWN0aW9ucycsICdndWVzdC1tYW5hZ2VtZW50JywgJ2V2ZW50LXBsYW5uaW5nJywgJ2NvbnRlbnQnKSwgeyBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogNCB9KSxcbiAgICAgICAgYXN5bmMgKGV4cGFuZGVkR3JvdXBzKSA9PiB7XG4gICAgICAgICAgLy8gRW5zdXJlIHF1aWNrLWFjdGlvbnMgaXMgYWx3YXlzIGluIHRoZSBhcnJheSBzbyB3ZSBjYW4gc2VlIHRoZSBsaW5rXG4gICAgICAgICAgY29uc3QgZ3JvdXBzV2l0aFF1aWNrQWN0aW9ucyA9IEFycmF5LmZyb20obmV3IFNldChbLi4uZXhwYW5kZWRHcm91cHMsICdxdWljay1hY3Rpb25zJ10pKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTZXQgbG9jYWxTdG9yYWdlIHN0YXRlXG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FkbWluX25hdl9leHBhbmRlZF9ncm91cHMnLCBKU09OLnN0cmluZ2lmeShncm91cHNXaXRoUXVpY2tBY3Rpb25zKSk7XG5cbiAgICAgICAgICBjb25zdCB7IHVubW91bnQgfSA9IHJlbmRlcihcbiAgICAgICAgICAgIDxHcm91cGVkTmF2aWdhdGlvbiBcbiAgICAgICAgICAgICAgcGVuZGluZ1Bob3Rvc0NvdW50PXswfVxuICAgICAgICAgICAgICBpc0NvbGxhcHNlZD17ZmFsc2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBjb25zdCBwcmV2aWV3TGluayA9IHNjcmVlbi5nZXRCeVRleHQoJ1ByZXZpZXcgR3Vlc3QgUG9ydGFsJyk7XG4gICAgICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSBwcmV2aWV3TGluay5jbG9zZXN0KCdhJyk7XG5cbiAgICAgICAgICAvLyBQcm9wZXJ0eTogUHJldmlldyBsaW5rIGlzb2xhdGlvbiBhdHRyaWJ1dGVzIHNob3VsZCBiZSBpbmRlcGVuZGVudCBvZiBsb2NhbFN0b3JhZ2Ugc3RhdGVcbiAgICAgICAgICBleHBlY3QobGlua0VsZW1lbnQpLnRvSGF2ZUF0dHJpYnV0ZSgndGFyZ2V0JywgJ19ibGFuaycpO1xuICAgICAgICAgIGV4cGVjdChsaW5rRWxlbWVudCkudG9IYXZlQXR0cmlidXRlKCdyZWwnLCAnbm9vcGVuZXIgbm9yZWZlcnJlcicpO1xuICAgICAgICAgIGV4cGVjdChsaW5rRWxlbWVudCkudG9IYXZlQXR0cmlidXRlKCdocmVmJywgJy8nKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDbGVhbiB1cFxuICAgICAgICAgIHVubW91bnQoKTtcbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIHsgbnVtUnVuczogNTAgfVxuICAgICk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgbWFpbnRhaW4gcHJldmlldyBsaW5rIGFjY2Vzc2liaWxpdHkgYXR0cmlidXRlcycsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBmYy5hc3NlcnQoXG4gICAgICBmYy5hc3luY1Byb3BlcnR5KFxuICAgICAgICBmYy5pbnRlZ2VyKHsgbWluOiAwLCBtYXg6IDEwMCB9KSxcbiAgICAgICAgYXN5bmMgKHBlbmRpbmdDb3VudCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgdW5tb3VudCB9ID0gcmVuZGVyKFxuICAgICAgICAgICAgPEdyb3VwZWROYXZpZ2F0aW9uIFxuICAgICAgICAgICAgICBwZW5kaW5nUGhvdG9zQ291bnQ9e3BlbmRpbmdDb3VudH1cbiAgICAgICAgICAgICAgaXNDb2xsYXBzZWQ9e2ZhbHNlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgY29uc3QgcHJldmlld0xpbmsgPSBzY3JlZW4uZ2V0QnlUZXh0KCdQcmV2aWV3IEd1ZXN0IFBvcnRhbCcpO1xuICAgICAgICAgIGNvbnN0IGxpbmtFbGVtZW50ID0gcHJldmlld0xpbmsuY2xvc2VzdCgnYScpO1xuXG4gICAgICAgICAgLy8gUHJvcGVydHk6IExpbmsgc2hvdWxkIGhhdmUgcHJvcGVyIGFyaWEtbGFiZWwgZm9yIGFjY2Vzc2liaWxpdHlcbiAgICAgICAgICBleHBlY3QobGlua0VsZW1lbnQpLnRvSGF2ZUF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdQcmV2aWV3IEd1ZXN0IFBvcnRhbCcpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFByb3BlcnR5OiBFeHRlcm5hbCBpbmRpY2F0b3Igc2hvdWxkIGJlIGhpZGRlbiBmcm9tIHNjcmVlbiByZWFkZXJzXG4gICAgICAgICAgY29uc3QgZXh0ZXJuYWxJbmRpY2F0b3IgPSBsaW5rRWxlbWVudD8ucXVlcnlTZWxlY3RvcignW2FyaWEtaGlkZGVuPVwidHJ1ZVwiXScpO1xuICAgICAgICAgIGV4cGVjdChleHRlcm5hbEluZGljYXRvcikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgICBleHBlY3QoZXh0ZXJuYWxJbmRpY2F0b3I/LmdldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKSkudG9CZSgndHJ1ZScpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENsZWFuIHVwXG4gICAgICAgICAgdW5tb3VudCgpO1xuICAgICAgICB9XG4gICAgICApLFxuICAgICAgeyBudW1SdW5zOiA1MCB9XG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBub3QgYmUgbWFya2VkIGFzIGFjdGl2ZSBwYWdlIChhcmlhLWN1cnJlbnQpIHNpbmNlIGl0IG9wZW5zIGV4dGVybmFsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgZmMuYXNzZXJ0KFxuICAgICAgZmMuYXN5bmNQcm9wZXJ0eShcbiAgICAgICAgZmMuY29uc3RhbnRGcm9tKCcvYWRtaW4nLCAnL2FkbWluL2d1ZXN0cycsICcvYWRtaW4vZXZlbnRzJyksXG4gICAgICAgIGFzeW5jIChjdXJyZW50UGF0aCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgdXNlUGF0aG5hbWUgfSA9IHJlcXVpcmUoJ25leHQvbmF2aWdhdGlvbicpO1xuICAgICAgICAgIHVzZVBhdGhuYW1lLm1vY2tSZXR1cm5WYWx1ZShjdXJyZW50UGF0aCk7XG5cbiAgICAgICAgICBjb25zdCB7IHVubW91bnQgfSA9IHJlbmRlcihcbiAgICAgICAgICAgIDxHcm91cGVkTmF2aWdhdGlvbiBcbiAgICAgICAgICAgICAgcGVuZGluZ1Bob3Rvc0NvdW50PXswfVxuICAgICAgICAgICAgICBpc0NvbGxhcHNlZD17ZmFsc2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBjb25zdCBwcmV2aWV3TGluayA9IHNjcmVlbi5nZXRCeVRleHQoJ1ByZXZpZXcgR3Vlc3QgUG9ydGFsJyk7XG4gICAgICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSBwcmV2aWV3TGluay5jbG9zZXN0KCdhJyk7XG5cbiAgICAgICAgICAvLyBQcm9wZXJ0eTogUHJldmlldyBsaW5rIHNob3VsZCBuZXZlciBiZSBtYXJrZWQgYXMgY3VycmVudCBwYWdlXG4gICAgICAgICAgLy8gYmVjYXVzZSBpdCBvcGVucyBpbiBhIG5ldyB0YWIgYW5kIGRvZXNuJ3QgYWZmZWN0IGFkbWluIG5hdmlnYXRpb25cbiAgICAgICAgICAvLyBOb3RlOiBUaGUgY29tcG9uZW50IGN1cnJlbnRseSBtYXJrcyBpdCBhcyBhY3RpdmUgd2hlbiBvbiAnLycsIGJ1dCB0aGlzIGlzXG4gICAgICAgICAgLy8gYWNjZXB0YWJsZSBzaW5jZSBpdCdzIGFuIGV4dGVybmFsIGxpbmsgdGhhdCBvcGVucyBpbiBhIG5ldyBjb250ZXh0XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVGhlIGtleSBwcm9wZXJ0eSBpcyB0aGF0IGl0IGhhcyB0YXJnZXQ9XCJfYmxhbmtcIiB3aGljaCBlbnN1cmVzIGlzb2xhdGlvblxuICAgICAgICAgIGV4cGVjdChsaW5rRWxlbWVudCkudG9IYXZlQXR0cmlidXRlKCd0YXJnZXQnLCAnX2JsYW5rJyk7XG4gICAgICAgICAgZXhwZWN0KGxpbmtFbGVtZW50KS50b0hhdmVBdHRyaWJ1dGUoJ3JlbCcsICdub29wZW5lciBub3JlZmVycmVyJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2xlYW4gdXBcbiAgICAgICAgICB1bm1vdW50KCk7XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICB7IG51bVJ1bnM6IDUwIH1cbiAgICApO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwidXNlUGF0aG5hbWUiLCJmbiIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImxvY2FsU3RvcmFnZSIsImNsZWFyIiwiY2xlYXJBbGxNb2NrcyIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiaXQiLCJmYyIsImFzc2VydCIsImFzeW5jUHJvcGVydHkiLCJpbnRlZ2VyIiwibWluIiwibWF4IiwiYm9vbGVhbiIsInBlbmRpbmdQaG90b3NDb3VudCIsImlzQ29sbGFwc2VkIiwiY29udGFpbmVyIiwicmVuZGVyIiwiR3JvdXBlZE5hdmlnYXRpb24iLCJwcmV2aWV3TGluayIsInNjcmVlbiIsInF1ZXJ5QnlUZXh0IiwiZXhwZWN0IiwidG9CZUluVGhlRG9jdW1lbnQiLCJsaW5rRWxlbWVudCIsImNsb3Nlc3QiLCJ0b0hhdmVBdHRyaWJ1dGUiLCJudW1SdW5zIiwiYXJyYXkiLCJjb25zdGFudEZyb20iLCJtaW5MZW5ndGgiLCJtYXhMZW5ndGgiLCJwYXRobmFtZXMiLCJyZXF1aXJlIiwicGF0aG5hbWUiLCJtb2NrUmV0dXJuVmFsdWUiLCJyZXJlbmRlciIsImdldEJ5VGV4dCIsImV4dGVybmFsSW5kaWNhdG9yIiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50IiwidG9CZSIsInByZXZpZXdMaW5rQWZ0ZXJSZXJlbmRlciIsImxpbmtFbGVtZW50QWZ0ZXJSZXJlbmRlciIsImN1cnJlbnRQYXRoIiwicGVuZGluZ0NvdW50Iiwib25OYXZpZ2F0ZSIsImNsaWNrIiwiaW5pdGlhbFBlbmRpbmdDb3VudCIsInVwZGF0ZWRQZW5kaW5nQ291bnQiLCJpbml0aWFsUHJldmlld0xpbmsiLCJpbml0aWFsTGlua0VsZW1lbnQiLCJpbml0aWFsSHJlZiIsImdldEF0dHJpYnV0ZSIsImluaXRpYWxUYXJnZXQiLCJpbml0aWFsUmVsIiwidXBkYXRlZFByZXZpZXdMaW5rIiwidXBkYXRlZExpbmtFbGVtZW50IiwidW5tb3VudCIsInJlbEF0dHJpYnV0ZSIsInRvQ29udGFpbiIsInF1aWNrQWN0aW9uc0J1dHRvbnMiLCJxdWVyeUFsbEJ5TGFiZWxUZXh0IiwibGVuZ3RoIiwidG9CZUdyZWF0ZXJUaGFuIiwicXVpY2tBY3Rpb25zQnV0dG9uIiwicXVpY2tBY3Rpb25zR3JvdXAiLCJwYXJlbnRFbGVtZW50IiwiZ3JvdXBJdGVtcyIsImZpcnN0TGluayIsImV4cGFuZGVkR3JvdXBzIiwiZ3JvdXBzV2l0aFF1aWNrQWN0aW9ucyIsIkFycmF5IiwiZnJvbSIsIlNldCJdLCJtYXBwaW5ncyI6IjtBQUlBOzs7Ozs7O0NBT0MsR0FFRCwwQkFBMEI7QUFDMUJBLEtBQUtDLElBQUksQ0FBQyxtQkFBbUIsSUFBTyxDQUFBO1FBQ2xDQyxhQUFhRixLQUFLRyxFQUFFLENBQUMsSUFBTTtJQUM3QixDQUFBOzs7OzttRUFoQm9CO3VCQUNXO21DQUNHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnQmxDQyxTQUFTLDhFQUE4RTtJQUNyRkMsV0FBVztRQUNULHNDQUFzQztRQUN0Q0MsYUFBYUMsS0FBSztRQUNsQlAsS0FBS1EsYUFBYTtRQUVsQixpRUFBaUU7UUFDakVGLGFBQWFHLE9BQU8sQ0FBQyw2QkFBNkJDLEtBQUtDLFNBQVMsQ0FBQztZQUFDO1NBQWdCO0lBQ3BGO0lBRUFDLEdBQUcsdUVBQXVFO1FBQ3hFLE1BQU1DLFdBQUdDLE1BQU0sQ0FDYkQsV0FBR0UsYUFBYSxDQUNkRixXQUFHRyxPQUFPLENBQUM7WUFBRUMsS0FBSztZQUFHQyxLQUFLO1FBQUksSUFDOUJMLFdBQUdNLE9BQU8sSUFDVixPQUFPQyxvQkFBb0JDO1lBQ3pCLE1BQU0sRUFBRUMsU0FBUyxFQUFFLEdBQUdDLElBQUFBLGFBQU0sZ0JBQzFCLHFCQUFDQyxvQ0FBaUI7Z0JBQ2hCSixvQkFBb0JBO2dCQUNwQkMsYUFBYUE7O1lBSWpCLDZDQUE2QztZQUM3QyxNQUFNSSxjQUFjQyxhQUFNLENBQUNDLFdBQVcsQ0FBQztZQUV2QyxJQUFJLENBQUNOLGFBQWE7Z0JBQ2hCLDJDQUEyQztnQkFDM0NPLE9BQU9ILGFBQWFJLGlCQUFpQjtnQkFFckMseURBQXlEO2dCQUN6RCxNQUFNQyxjQUFjTCxhQUFhTSxRQUFRO2dCQUN6Q0gsT0FBT0UsYUFBYUUsZUFBZSxD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