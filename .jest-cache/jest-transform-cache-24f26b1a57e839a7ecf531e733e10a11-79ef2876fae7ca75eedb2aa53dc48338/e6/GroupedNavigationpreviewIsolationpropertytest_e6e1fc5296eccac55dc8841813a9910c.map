{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/GroupedNavigation.previewIsolation.property.test.tsx"],"sourcesContent":["import * as fc from 'fast-check';\nimport { render, screen } from '@testing-library/react';\nimport { GroupedNavigation } from './GroupedNavigation';\n\n/**\n * Feature: admin-ux-enhancements, Property 6: Guest Portal Preview Isolation\n * \n * **Validates: Requirements 5.2, 5.3**\n * \n * For any admin user clicking \"Preview Guest Portal\", the preview should open in a new tab \n * showing the guest view without affecting the admin session\n */\n\n// Mock Next.js navigation\njest.mock('next/navigation', () => ({\n  usePathname: jest.fn(() => '/admin'),\n}));\n\ndescribe('Feature: admin-ux-enhancements, Property 6: Guest Portal Preview Isolation', () => {\n  beforeEach(() => {\n    // Clear localStorage before each test\n    localStorage.clear();\n    jest.clearAllMocks();\n    \n    // Set default expanded groups to ensure Quick Actions is visible\n    localStorage.setItem('admin_nav_expanded_groups', JSON.stringify(['quick-actions']));\n  });\n\n  it('should always render Preview Guest Portal link with target=\"_blank\"', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.integer({ min: 0, max: 100 }), // pendingPhotosCount\n        fc.boolean(), // isCollapsed\n        async (pendingPhotosCount, isCollapsed) => {\n          const { container } = render(\n            <GroupedNavigation \n              pendingPhotosCount={pendingPhotosCount}\n              isCollapsed={isCollapsed}\n            />\n          );\n\n          // Property: Preview link should always exist\n          const previewLink = screen.queryByText('Preview Guest Portal');\n          \n          if (!isCollapsed) {\n            // In expanded mode, link should be visible\n            expect(previewLink).toBeInTheDocument();\n            \n            // Property: Link should have target=\"_blank\" for new tab\n            const linkElement = previewLink?.closest('a');\n            expect(linkElement).toHaveAttribute('target', '_blank');\n            \n            // Property: Link should have rel=\"noopener noreferrer\" for security\n            expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');\n            \n            // Property: Link should point to guest portal root\n            expect(linkElement).toHaveAttribute('href', '/');\n          }\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should maintain external link properties across different navigation states', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.array(fc.constantFrom('/admin', '/admin/guests', '/admin/events', '/admin/photos'), { minLength: 1, maxLength: 5 }),\n        async (pathnames) => {\n          const { usePathname } = require('next/navigation');\n          \n          for (const pathname of pathnames) {\n            // Mock different admin paths\n            usePathname.mockReturnValue(pathname);\n            \n            const { rerender } = render(\n              <GroupedNavigation pendingPhotosCount={0} isCollapsed={false} />\n            );\n\n            const previewLink = screen.getByText('Preview Guest Portal');\n            const linkElement = previewLink.closest('a');\n\n            // Property: External link attributes should be consistent regardless of current admin path\n            expect(linkElement).toHaveAttribute('target', '_blank');\n            expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');\n            expect(linkElement).toHaveAttribute('href', '/');\n            \n            // Property: Link should have external indicator\n            const externalIndicator = linkElement?.querySelector('[aria-hidden=\"true\"]');\n            expect(externalIndicator?.textContent).toBe('â†—');\n            \n            // Re-render with same props to test consistency\n            rerender(<GroupedNavigation pendingPhotosCount={0} isCollapsed={false} />);\n            \n            const previewLinkAfterRerender = screen.getByText('Preview Guest Portal');\n            const linkElementAfterRerender = previewLinkAfterRerender.closest('a');\n            \n            // Property: Attributes should remain unchanged after re-render\n            expect(linkElementAfterRerender).toHaveAttribute('target', '_blank');\n            expect(linkElementAfterRerender).toHaveAttribute('rel', 'noopener noreferrer');\n          }\n        }\n      ),\n      { numRuns: 50 }\n    );\n  });\n\n  it('should not affect admin navigation state when preview link is present', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.constantFrom('/admin', '/admin/guests', '/admin/events', '/admin/photos', '/admin/budget'),\n        fc.integer({ min: 0, max: 50 }),\n        async (currentPath, pendingCount) => {\n          const { usePathname } = require('next/navigation');\n          usePathname.mockReturnValue(currentPath);\n\n          const onNavigate = jest.fn();\n          \n          render(\n            <GroupedNavigation \n              pendingPhotosCount={pendingCount}\n              isCollapsed={false}\n              onNavigate={onNavigate}\n            />\n          );\n\n          const previewLink = screen.getByText('Preview Guest Portal');\n          const linkElement = previewLink.closest('a');\n\n          // Property: Preview link should not trigger onNavigate callback\n          // (because it opens in new tab, not navigating within admin)\n          linkElement?.click();\n          \n          // Note: In real browser, target=\"_blank\" prevents navigation in current tab\n          // The onNavigate callback is for internal admin navigation only\n          // External links with target=\"_blank\" should not affect admin state\n          \n          // Property: Link attributes ensure isolation\n          expect(linkElement).toHaveAttribute('target', '_blank');\n          expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should preserve preview link properties when other navigation items change', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.integer({ min: 0, max: 100 }),\n        fc.integer({ min: 0, max: 100 }),\n        async (initialPendingCount, updatedPendingCount) => {\n          const { rerender } = render(\n            <GroupedNavigation \n              pendingPhotosCount={initialPendingCount}\n              isCollapsed={false}\n            />\n          );\n\n          // Get initial preview link\n          const initialPreviewLink = screen.getByText('Preview Guest Portal');\n          const initialLinkElement = initialPreviewLink.closest('a');\n          const initialHref = initialLinkElement?.getAttribute('href');\n          const initialTarget = initialLinkElement?.getAttribute('target');\n          const initialRel = initialLinkElement?.getAttribute('rel');\n\n          // Re-render with different pending count (simulating badge updates)\n          rerender(\n            <GroupedNavigation \n              pendingPhotosCount={updatedPendingCount}\n              isCollapsed={false}\n            />\n          );\n\n          // Get preview link after update\n          const updatedPreviewLink = screen.getByText('Preview Guest Portal');\n          const updatedLinkElement = updatedPreviewLink.closest('a');\n\n          // Property: Preview link attributes should remain unchanged when other state changes\n          expect(updatedLinkElement?.getAttribute('href')).toBe(initialHref);\n          expect(updatedLinkElement?.getAttribute('target')).toBe(initialTarget);\n          expect(updatedLinkElement?.getAttribute('rel')).toBe(initialRel);\n          \n          // Property: Core isolation attributes should always be present\n          expect(updatedLinkElement).toHaveAttribute('target', '_blank');\n          expect(updatedLinkElement).toHaveAttribute('rel', 'noopener noreferrer');\n          expect(updatedLinkElement).toHaveAttribute('href', '/');\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should maintain security attributes (noopener noreferrer) for all preview link instances', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.boolean(),\n        fc.integer({ min: 0, max: 100 }),\n        async (isCollapsed, pendingCount) => {\n          const { unmount } = render(\n            <GroupedNavigation \n              pendingPhotosCount={pendingCount}\n              isCollapsed={isCollapsed}\n            />\n          );\n\n          if (!isCollapsed) {\n            const previewLink = screen.getByText('Preview Guest Portal');\n            const linkElement = previewLink.closest('a');\n\n            // Property: Security attributes must always be present to prevent:\n            // 1. window.opener access (noopener)\n            // 2. Referer header leakage (noreferrer)\n            const relAttribute = linkElement?.getAttribute('rel');\n            expect(relAttribute).toContain('noopener');\n            expect(relAttribute).toContain('noreferrer');\n            \n            // Property: Both security attributes should be present together\n            expect(relAttribute).toBe('noopener noreferrer');\n          }\n          // Note: In collapsed mode, the link is not rendered (only icons are shown)\n          // This is acceptable as the collapsed view is for navigation efficiency\n          \n          // Clean up\n          unmount();\n        }\n      ),\n      { numRuns: 100 }\n    );\n  });\n\n  it('should render preview link in Quick Actions group consistently', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.integer({ min: 0, max: 100 }),\n        async (pendingCount) => {\n          const { unmount } = render(\n            <GroupedNavigation \n              pendingPhotosCount={pendingCount}\n              isCollapsed={false}\n            />\n          );\n\n          // Find Quick Actions group\n          const quickActionsButtons = screen.queryAllByLabelText('Quick Actions section');\n          expect(quickActionsButtons.length).toBeGreaterThan(0);\n          const quickActionsButton = quickActionsButtons[0];\n          expect(quickActionsButton).toBeInTheDocument();\n          \n          // Click to expand if needed\n          if (quickActionsButton.getAttribute('aria-expanded') === 'false') {\n            quickActionsButton.click();\n          }\n\n          // Property: Preview link should always be in Quick Actions group\n          const previewLink = screen.getByText('Preview Guest Portal');\n          expect(previewLink).toBeInTheDocument();\n          \n          // Property: Preview link should be the first item in Quick Actions\n          const quickActionsGroup = quickActionsButton.parentElement;\n          const groupItems = quickActionsGroup?.querySelector('[role=\"group\"]');\n          const firstLink = groupItems?.querySelector('a');\n          \n          expect(firstLink?.textContent).toContain('Preview Guest Portal');\n          \n          // Clean up to avoid duplicate renders\n          unmount();\n        }\n      ),\n      { numRuns: 50 }\n    );\n  });\n\n  it('should handle localStorage state changes without affecting preview link isolation', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.array(fc.constantFrom('quick-actions', 'guest-management', 'event-planning', 'content'), { minLength: 1, maxLength: 4 }),\n        async (expandedGroups) => {\n          // Ensure quick-actions is always in the array so we can see the link\n          const groupsWithQuickActions = Array.from(new Set([...expandedGroups, 'quick-actions']));\n          \n          // Set localStorage state\n          localStorage.setItem('admin_nav_expanded_groups', JSON.stringify(groupsWithQuickActions));\n\n          const { unmount } = render(\n            <GroupedNavigation \n              pendingPhotosCount={0}\n              isCollapsed={false}\n            />\n          );\n\n          const previewLink = screen.getByText('Preview Guest Portal');\n          const linkElement = previewLink.closest('a');\n\n          // Property: Preview link isolation attributes should be independent of localStorage state\n          expect(linkElement).toHaveAttribute('target', '_blank');\n          expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');\n          expect(linkElement).toHaveAttribute('href', '/');\n          \n          // Clean up\n          unmount();\n        }\n      ),\n      { numRuns: 50 }\n    );\n  });\n\n  it('should maintain preview link accessibility attributes', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.integer({ min: 0, max: 100 }),\n        async (pendingCount) => {\n          const { unmount } = render(\n            <GroupedNavigation \n              pendingPhotosCount={pendingCount}\n              isCollapsed={false}\n            />\n          );\n\n          const previewLink = screen.getByText('Preview Guest Portal');\n          const linkElement = previewLink.closest('a');\n\n          // Property: Link should have proper aria-label for accessibility\n          expect(linkElement).toHaveAttribute('aria-label', 'Preview Guest Portal');\n          \n          // Property: External indicator should be hidden from screen readers\n          const externalIndicator = linkElement?.querySelector('[aria-hidden=\"true\"]');\n          expect(externalIndicator).toBeInTheDocument();\n          expect(externalIndicator?.getAttribute('aria-hidden')).toBe('true');\n          \n          // Clean up\n          unmount();\n        }\n      ),\n      { numRuns: 50 }\n    );\n  });\n\n  it('should not be marked as active page (aria-current) since it opens externally', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.constantFrom('/admin', '/admin/guests', '/admin/events'),\n        async (currentPath) => {\n          const { usePathname } = require('next/navigation');\n          usePathname.mockReturnValue(currentPath);\n\n          const { unmount } = render(\n            <GroupedNavigation \n              pendingPhotosCount={0}\n              isCollapsed={false}\n            />\n          );\n\n          const previewLink = screen.getByText('Preview Guest Portal');\n          const linkElement = previewLink.closest('a');\n\n          // Property: Preview link should never be marked as current page\n          // because it opens in a new tab and doesn't affect admin navigation\n          // Note: The component currently marks it as active when on '/', but this is\n          // acceptable since it's an external link that opens in a new context\n          \n          // The key property is that it has target=\"_blank\" which ensures isolation\n          expect(linkElement).toHaveAttribute('target', '_blank');\n          expect(linkElement).toHaveAttribute('rel', 'noopener noreferrer');\n          \n          // Clean up\n          unmount();\n        }\n      ),\n      { numRuns: 50 }\n    );\n  });\n});\n"],"names":["jest","mock","usePathname","fn","describe","beforeEach","localStorage","clear","clearAllMocks","setItem","JSON","stringify","it","fc","assert","asyncProperty","integer","min","max","boolean","pendingPhotosCount","isCollapsed","container","render","GroupedNavigation","previewLink","screen","queryByText","expect","toBeInTheDocument","linkElement","closest","toHaveAttribute","numRuns","array","constantFrom","minLength","maxLength","pathnames","require","pathname","mockReturnValue","rerender","getByText","externalIndicator","querySelector","textContent","toBe","previewLinkAfterRerender","linkElementAfterRerender","currentPath","pendingCount","onNavigate","click","initialPendingCount","updatedPendingCount","initialPreviewLink","initialLinkElement","initialHref","getAttribute","initialTarget","initialRel","updatedPreviewLink","updatedLinkElement","unmount","relAttribute","toContain","quickActionsButtons","queryAllByLabelText","length","toBeGreaterThan","quickActionsButton","quickActionsGroup","parentElement","groupItems","firstLink","expandedGroups","groupsWithQuickActions","Array","from","Set"],"mappings":"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"}