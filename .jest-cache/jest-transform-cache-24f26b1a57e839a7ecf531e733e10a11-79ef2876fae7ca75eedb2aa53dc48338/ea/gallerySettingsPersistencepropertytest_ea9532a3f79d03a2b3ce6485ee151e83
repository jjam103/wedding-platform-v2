5b961b26bf8d555257347c4b732c9fed
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _fastcheck = /*#__PURE__*/ _interop_require_wildcard(require("fast-check"));
const _globals = require("@jest/globals");
const _gallerySettingsService = require("./gallerySettingsService");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Mock Supabase before importing services
const mockFrom = _globals.jest.fn();
_globals.jest.mock('@/lib/supabase', ()=>({
        supabase: {
            from: mockFrom
        }
    }));
// Feature: destination-wedding-platform, Property 35: Gallery Settings Persistence
(0, _globals.describe)('Feature: destination-wedding-platform, Property 35: Gallery Settings Persistence', ()=>{
    (0, _globals.beforeEach)(()=>{
        _globals.jest.clearAllMocks();
    });
    (0, _globals.it)('should persist gallery settings and retrieve updated values', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.record({
            pageType: _fastcheck.constantFrom('activity', 'event', 'accommodation', 'room_type', 'custom', 'memory'),
            pageId: _fastcheck.uuid(),
            displayMode: _fastcheck.constantFrom('gallery', 'carousel', 'loop'),
            photosPerRow: _fastcheck.option(_fastcheck.integer({
                min: 1,
                max: 6
            }), {
                nil: undefined
            }),
            showCaptions: _fastcheck.boolean(),
            autoplayInterval: _fastcheck.option(_fastcheck.integer({
                min: 1000,
                max: 10000
            }), {
                nil: undefined
            }),
            transitionEffect: _fastcheck.option(_fastcheck.string({
                minLength: 1,
                maxLength: 50
            }), {
                nil: undefined
            }),
            settingsId: _fastcheck.uuid()
        }), async (testData)=>{
            const now = new Date().toISOString();
            // Mock upsert operation
            const mockSingle1 = _globals.jest.fn();
            mockSingle1.mockResolvedValue({
                data: {
                    id: testData.settingsId,
                    page_type: testData.pageType,
                    page_id: testData.pageId,
                    display_mode: testData.displayMode,
                    photos_per_row: testData.photosPerRow || null,
                    show_captions: testData.showCaptions,
                    autoplay_interval: testData.autoplayInterval || null,
                    transition_effect: testData.transitionEffect || null,
                    created_at: now,
                    updated_at: now
                },
                error: null
            });
            const mockSelect1 = _globals.jest.fn().mockReturnValue({
                single: mockSingle1
            });
            const mockUpsert = _globals.jest.fn().mockReturnValue({
                select: mockSelect1
            });
            mockFrom.mockReturnValueOnce({
                upsert: mockUpsert
            });
            // Upsert settings
            const upsertResult = await (0, _gallerySettingsService.upsertSettings)({
                page_type: testData.pageType,
                page_id: testData.pageId,
                display_mode: testData.displayMode,
                photos_per_row: testData.photosPerRow || undefined,
                show_captions: testData.showCaptions,
                autoplay_interval: testData.autoplayInterval || undefined,
                transition_effect: testData.transitionEffect || undefined
            });
            // Property: Upsert should succeed
            (0, _globals.expect)(upsertResult.success).toBe(true);
            if (!upsertResult.success) {
                return true;
            }
            // Mock get operation
            const mockSingle2 = _globals.jest.fn();
            mockSingle2.mockResolvedValue({
                data: {
                    id: testData.settingsId,
                    page_type: testData.pageType,
                    page_id: testData.pageId,
                    display_mode: testData.displayMode,
                    photos_per_row: testData.photosPerRow || null,
                    show_captions: testData.showCaptions,
                    autoplay_interval: testData.autoplayInterval || null,
                    transition_effect: testData.transitionEffect || null,
                    created_at: now,
                    updated_at: now
                },
                error: null
            });
            const mockEq = _globals.jest.fn().mockReturnValue({
                single: mockSingle2
            });
            const mockSelect2 = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValueOnce({
                select: mockSelect2
            });
            // Retrieve settings
            const getResult = await (0, _gallerySettingsService.getSettings)(testData.pageType, testData.pageId);
            // Property: Get should succeed
            (0, _globals.expect)(getResult.success).toBe(true);
            if (!getResult.success) {
                return true;
            }
            // Property: Retrieved settings should match upserted settings
            (0, _globals.expect)(getResult.data.page_type).toBe(testData.pageType);
            (0, _globals.expect)(getResult.data.page_id).toBe(testData.pageId);
            (0, _globals.expect)(getResult.data.display_mode).toBe(testData.displayMode);
            (0, _globals.expect)(getResult.data.show_captions).toBe(testData.showCaptions);
            // Property: Optional fields should match if provided
            if (testData.photosPerRow !== undefined && testData.photosPerRow !== null) {
                (0, _globals.expect)(getResult.data.photos_per_row).toBe(testData.photosPerRow);
            }
            if (testData.autoplayInterval !== undefined && testData.autoplayInterval !== null) {
                (0, _globals.expect)(getResult.data.autoplay_interval).toBe(testData.autoplayInterval);
            }
            if (testData.transitionEffect !== undefined && testData.transitionEffect !== null) {
                (0, _globals.expect)(getResult.data.transition_effect).toBe(testData.transitionEffect);
            }
            return true;
        }), {
            numRuns: 20,
            timeout: 5000
        } // Reduced runs and increased timeout
        );
    });
    (0, _globals.it)('should update existing settings when upserting with same page', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.record({
            pageType: _fastcheck.constantFrom('activity', 'event', 'accommodation', 'room_type', 'custom', 'memory'),
            pageId: _fastcheck.uuid(),
            initialMode: _fastcheck.constantFrom('gallery', 'carousel', 'loop'),
            updatedMode: _fastcheck.constantFrom('gallery', 'carousel', 'loop'),
            settingsId: _fastcheck.uuid()
        }), async (testData)=>{
            const now = new Date().toISOString();
            // Mock first upsert (initial settings)
            const mockSingle1 = _globals.jest.fn();
            mockSingle1.mockResolvedValue({
                data: {
                    id: testData.settingsId,
                    page_type: testData.pageType,
                    page_id: testData.pageId,
                    display_mode: testData.initialMode,
                    show_captions: true,
                    created_at: now,
                    updated_at: now
                },
                error: null
            });
            const mockSelect1 = _globals.jest.fn().mockReturnValue({
                single: mockSingle1
            });
            const mockUpsert1 = _globals.jest.fn().mockReturnValue({
                select: mockSelect1
            });
            mockFrom.mockReturnValueOnce({
                upsert: mockUpsert1
            });
            const firstResult = await (0, _gallerySettingsService.upsertSettings)({
                page_type: testData.pageType,
                page_id: testData.pageId,
                display_mode: testData.initialMode,
                show_captions: true
            });
            (0, _globals.expect)(firstResult.success).toBe(true);
            if (!firstResult.success) {
                return true;
            }
            // Mock second upsert (updated settings)
            const mockSingle2 = _globals.jest.fn();
            mockSingle2.mockResolvedValue({
                data: {
                    id: testData.settingsId,
                    page_type: testData.pageType,
                    page_id: testData.pageId,
                    display_mode: testData.updatedMode,
                    show_captions: false,
                    created_at: now,
                    updated_at: new Date(Date.now() + 1000).toISOString()
                },
                error: null
            });
            const mockSelect2 = _globals.jest.fn().mockReturnValue({
                single: mockSingle2
            });
            const mockUpsert2 = _globals.jest.fn().mockReturnValue({
                select: mockSelect2
            });
            mockFrom.mockReturnValueOnce({
                upsert: mockUpsert2
            });
            const secondResult = await (0, _gallerySettingsService.upsertSettings)({
                page_type: testData.pageType,
                page_id: testData.pageId,
                display_mode: testData.updatedMode,
                show_captions: false
            });
            // Property: Second upsert should succeed
            (0, _globals.expect)(secondResult.success).toBe(true);
            if (!secondResult.success) {
                return true;
            }
            // Property: Settings should reflect the updated values
            (0, _globals.expect)(secondResult.data.display_mode).toBe(testData.updatedMode);
            (0, _globals.expect)(secondResult.data.show_captions).toBe(false);
            // Property: Should have same ID (updated, not created new)
            (0, _globals.expect)(secondResult.data.id).toBe(testData.settingsId);
            return true;
        }), {
            numRuns: 10,
            timeout: 5000
        } // Reduced runs and increased timeout
        );
    });
    (0, _globals.it)('should return default settings when none exist for a page', async ()=>{
        await _fastcheck.assert(_fastcheck.asyncProperty(_fastcheck.record({
            pageType: _fastcheck.constantFrom('activity', 'event', 'accommodation', 'room_type', 'custom', 'memory'),
            pageId: _fastcheck.uuid()
        }), async (testData)=>{
            // Mock get operation returning no data (settings don't exist)
            const mockSingle = _globals.jest.fn();
            mockSingle.mockResolvedValue({
                data: null,
                error: {
                    code: 'PGRST116',
                    message: 'Not found'
                }
            });
            const mockEq = _globals.jest.fn().mockReturnValue({
                single: mockSingle
            });
            const mockSelect = _globals.jest.fn().mockReturnValue({
                eq: mockEq
            });
            mockFrom.mockReturnValueOnce({
                select: mockSelect
            });
            const result = await (0, _gallerySettingsService.getSettings)(testData.pageType, testData.pageId);
            // Property: Get should succeed even when settings don't exist
            (0, _globals.expect)(result.success).toBe(true);
            if (!result.success) {
                return true;
            }
            // Property: Should return default settings
            (0, _globals.expect)(result.data.page_type).toBe(testData.pageType);
            (0, _globals.expect)(result.data.page_id).toBe(testData.pageId);
            (0, _globals.expect)(result.data.display_mode).toBe('gallery'); // Default
            (0, _globals.expect)(result.data.show_captions).toBe(true); // Default
            return true;
        }), {
            numRuns: 20,
            timeout: 5000
        } // Reduced runs and increased timeout
        );
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvc2VydmljZXMvZ2FsbGVyeVNldHRpbmdzUGVyc2lzdGVuY2UucHJvcGVydHkudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBmYyBmcm9tICdmYXN0LWNoZWNrJztcbmltcG9ydCB7IGplc3QsIGRlc2NyaWJlLCBpdCwgZXhwZWN0LCBiZWZvcmVFYWNoIH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5cbi8vIE1vY2sgU3VwYWJhc2UgYmVmb3JlIGltcG9ydGluZyBzZXJ2aWNlc1xuY29uc3QgbW9ja0Zyb20gPSBqZXN0LmZuKCk7XG5qZXN0Lm1vY2soJ0AvbGliL3N1cGFiYXNlJywgKCkgPT4gKHtcbiAgc3VwYWJhc2U6IHtcbiAgICBmcm9tOiBtb2NrRnJvbSxcbiAgfSxcbn0pKTtcblxuLy8gSW1wb3J0IGFmdGVyIG1vY2tpbmdcbmltcG9ydCB7IHVwc2VydFNldHRpbmdzLCBnZXRTZXR0aW5ncyB9IGZyb20gJy4vZ2FsbGVyeVNldHRpbmdzU2VydmljZSc7XG5cbi8vIEZlYXR1cmU6IGRlc3RpbmF0aW9uLXdlZGRpbmctcGxhdGZvcm0sIFByb3BlcnR5IDM1OiBHYWxsZXJ5IFNldHRpbmdzIFBlcnNpc3RlbmNlXG5cbmRlc2NyaWJlKCdGZWF0dXJlOiBkZXN0aW5hdGlvbi13ZWRkaW5nLXBsYXRmb3JtLCBQcm9wZXJ0eSAzNTogR2FsbGVyeSBTZXR0aW5ncyBQZXJzaXN0ZW5jZScsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcGVyc2lzdCBnYWxsZXJ5IHNldHRpbmdzIGFuZCByZXRyaWV2ZSB1cGRhdGVkIHZhbHVlcycsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBmYy5hc3NlcnQoXG4gICAgICBmYy5hc3luY1Byb3BlcnR5KFxuICAgICAgICBmYy5yZWNvcmQoe1xuICAgICAgICAgIHBhZ2VUeXBlOiBmYy5jb25zdGFudEZyb20oJ2FjdGl2aXR5JywgJ2V2ZW50JywgJ2FjY29tbW9kYXRpb24nLCAncm9vbV90eXBlJywgJ2N1c3RvbScsICdtZW1vcnknKSxcbiAgICAgICAgICBwYWdlSWQ6IGZjLnV1aWQoKSxcbiAgICAgICAgICBkaXNwbGF5TW9kZTogZmMuY29uc3RhbnRGcm9tKCdnYWxsZXJ5JywgJ2Nhcm91c2VsJywgJ2xvb3AnKSxcbiAgICAgICAgICBwaG90b3NQZXJSb3c6IGZjLm9wdGlvbihmYy5pbnRlZ2VyKHsgbWluOiAxLCBtYXg6IDYgfSksIHsgbmlsOiB1bmRlZmluZWQgfSksXG4gICAgICAgICAgc2hvd0NhcHRpb25zOiBmYy5ib29sZWFuKCksXG4gICAgICAgICAgYXV0b3BsYXlJbnRlcnZhbDogZmMub3B0aW9uKGZjLmludGVnZXIoeyBtaW46IDEwMDAsIG1heDogMTAwMDAgfSksIHsgbmlsOiB1bmRlZmluZWQgfSksXG4gICAgICAgICAgdHJhbnNpdGlvbkVmZmVjdDogZmMub3B0aW9uKGZjLnN0cmluZyh7IG1pbkxlbmd0aDogMSwgbWF4TGVuZ3RoOiA1MCB9KSwgeyBuaWw6IHVuZGVmaW5lZCB9KSxcbiAgICAgICAgICBzZXR0aW5nc0lkOiBmYy51dWlkKCksXG4gICAgICAgIH0pLFxuICAgICAgICBhc3luYyAodGVzdERhdGEpID0+IHtcbiAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAgICAgICAvLyBNb2NrIHVwc2VydCBvcGVyYXRpb25cbiAgICAgICAgICBjb25zdCBtb2NrU2luZ2xlMSA9IGplc3QuZm4oKSBhcyBhbnk7XG4gICAgICAgICAgbW9ja1NpbmdsZTEubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBpZDogdGVzdERhdGEuc2V0dGluZ3NJZCxcbiAgICAgICAgICAgICAgcGFnZV90eXBlOiB0ZXN0RGF0YS5wYWdlVHlwZSxcbiAgICAgICAgICAgICAgcGFnZV9pZDogdGVzdERhdGEucGFnZUlkLFxuICAgICAgICAgICAgICBkaXNwbGF5X21vZGU6IHRlc3REYXRhLmRpc3BsYXlNb2RlLFxuICAgICAgICAgICAgICBwaG90b3NfcGVyX3JvdzogdGVzdERhdGEucGhvdG9zUGVyUm93IHx8IG51bGwsXG4gICAgICAgICAgICAgIHNob3dfY2FwdGlvbnM6IHRlc3REYXRhLnNob3dDYXB0aW9ucyxcbiAgICAgICAgICAgICAgYXV0b3BsYXlfaW50ZXJ2YWw6IHRlc3REYXRhLmF1dG9wbGF5SW50ZXJ2YWwgfHwgbnVsbCxcbiAgICAgICAgICAgICAgdHJhbnNpdGlvbl9lZmZlY3Q6IHRlc3REYXRhLnRyYW5zaXRpb25FZmZlY3QgfHwgbnVsbCxcbiAgICAgICAgICAgICAgY3JlYXRlZF9hdDogbm93LFxuICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBub3csXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgfSBhcyBhbnkpO1xuICAgICAgICAgIGNvbnN0IG1vY2tTZWxlY3QxID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IHNpbmdsZTogbW9ja1NpbmdsZTEgfSk7XG4gICAgICAgICAgY29uc3QgbW9ja1Vwc2VydCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBzZWxlY3Q6IG1vY2tTZWxlY3QxIH0pO1xuICAgICAgICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5WYWx1ZU9uY2UoeyB1cHNlcnQ6IG1vY2tVcHNlcnQgfSk7XG5cbiAgICAgICAgICAvLyBVcHNlcnQgc2V0dGluZ3NcbiAgICAgICAgICBjb25zdCB1cHNlcnRSZXN1bHQgPSBhd2FpdCB1cHNlcnRTZXR0aW5ncyh7XG4gICAgICAgICAgICBwYWdlX3R5cGU6IHRlc3REYXRhLnBhZ2VUeXBlIGFzIGFueSxcbiAgICAgICAgICAgIHBhZ2VfaWQ6IHRlc3REYXRhLnBhZ2VJZCxcbiAgICAgICAgICAgIGRpc3BsYXlfbW9kZTogdGVzdERhdGEuZGlzcGxheU1vZGUgYXMgJ2dhbGxlcnknIHwgJ2Nhcm91c2VsJyB8ICdsb29wJyxcbiAgICAgICAgICAgIHBob3Rvc19wZXJfcm93OiB0ZXN0RGF0YS5waG90b3NQZXJSb3cgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgc2hvd19jYXB0aW9uczogdGVzdERhdGEuc2hvd0NhcHRpb25zLFxuICAgICAgICAgICAgYXV0b3BsYXlfaW50ZXJ2YWw6IHRlc3REYXRhLmF1dG9wbGF5SW50ZXJ2YWwgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdHJhbnNpdGlvbl9lZmZlY3Q6IHRlc3REYXRhLnRyYW5zaXRpb25FZmZlY3QgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgIH0gYXMgYW55KTtcblxuICAgICAgICAgIC8vIFByb3BlcnR5OiBVcHNlcnQgc2hvdWxkIHN1Y2NlZWRcbiAgICAgICAgICBleHBlY3QodXBzZXJ0UmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG5cbiAgICAgICAgICBpZiAoIXVwc2VydFJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBNb2NrIGdldCBvcGVyYXRpb25cbiAgICAgICAgICBjb25zdCBtb2NrU2luZ2xlMiA9IGplc3QuZm4oKSBhcyBhbnk7XG4gICAgICAgICAgbW9ja1NpbmdsZTIubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBpZDogdGVzdERhdGEuc2V0dGluZ3NJZCxcbiAgICAgICAgICAgICAgcGFnZV90eXBlOiB0ZXN0RGF0YS5wYWdlVHlwZSxcbiAgICAgICAgICAgICAgcGFnZV9pZDogdGVzdERhdGEucGFnZUlkLFxuICAgICAgICAgICAgICBkaXNwbGF5X21vZGU6IHRlc3REYXRhLmRpc3BsYXlNb2RlLFxuICAgICAgICAgICAgICBwaG90b3NfcGVyX3JvdzogdGVzdERhdGEucGhvdG9zUGVyUm93IHx8IG51bGwsXG4gICAgICAgICAgICAgIHNob3dfY2FwdGlvbnM6IHRlc3REYXRhLnNob3dDYXB0aW9ucyxcbiAgICAgICAgICAgICAgYXV0b3BsYXlfaW50ZXJ2YWw6IHRlc3REYXRhLmF1dG9wbGF5SW50ZXJ2YWwgfHwgbnVsbCxcbiAgICAgICAgICAgICAgdHJhbnNpdGlvbl9lZmZlY3Q6IHRlc3REYXRhLnRyYW5zaXRpb25FZmZlY3QgfHwgbnVsbCxcbiAgICAgICAgICAgICAgY3JlYXRlZF9hdDogbm93LFxuICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBub3csXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgfSBhcyBhbnkpO1xuICAgICAgICAgIGNvbnN0IG1vY2tFcSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBzaW5nbGU6IG1vY2tTaW5nbGUyIH0pO1xuICAgICAgICAgIGNvbnN0IG1vY2tTZWxlY3QyID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IGVxOiBtb2NrRXEgfSk7XG4gICAgICAgICAgbW9ja0Zyb20ubW9ja1JldHVyblZhbHVlT25jZSh7IHNlbGVjdDogbW9ja1NlbGVjdDIgfSk7XG5cbiAgICAgICAgICAvLyBSZXRyaWV2ZSBzZXR0aW5nc1xuICAgICAgICAgIGNvbnN0IGdldFJlc3VsdCA9IGF3YWl0IGdldFNldHRpbmdzKHRlc3REYXRhLnBhZ2VUeXBlLCB0ZXN0RGF0YS5wYWdlSWQpO1xuXG4gICAgICAgICAgLy8gUHJvcGVydHk6IEdldCBzaG91bGQgc3VjY2VlZFxuICAgICAgICAgIGV4cGVjdChnZXRSZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcblxuICAgICAgICAgIGlmICghZ2V0UmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFByb3BlcnR5OiBSZXRyaWV2ZWQgc2V0dGluZ3Mgc2hvdWxkIG1hdGNoIHVwc2VydGVkIHNldHRpbmdzXG4gICAgICAgICAgZXhwZWN0KGdldFJlc3VsdC5kYXRhLnBhZ2VfdHlwZSkudG9CZSh0ZXN0RGF0YS5wYWdlVHlwZSk7XG4gICAgICAgICAgZXhwZWN0KGdldFJlc3VsdC5kYXRhLnBhZ2VfaWQpLnRvQmUodGVzdERhdGEucGFnZUlkKTtcbiAgICAgICAgICBleHBlY3QoZ2V0UmVzdWx0LmRhdGEuZGlzcGxheV9tb2RlKS50b0JlKHRlc3REYXRhLmRpc3BsYXlNb2RlKTtcbiAgICAgICAgICBleHBlY3QoZ2V0UmVzdWx0LmRhdGEuc2hvd19jYXB0aW9ucykudG9CZSh0ZXN0RGF0YS5zaG93Q2FwdGlvbnMpO1xuXG4gICAgICAgICAgLy8gUHJvcGVydHk6IE9wdGlvbmFsIGZpZWxkcyBzaG91bGQgbWF0Y2ggaWYgcHJvdmlkZWRcbiAgICAgICAgICBpZiAodGVzdERhdGEucGhvdG9zUGVyUm93ICE9PSB1bmRlZmluZWQgJiYgdGVzdERhdGEucGhvdG9zUGVyUm93ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBleHBlY3QoZ2V0UmVzdWx0LmRhdGEucGhvdG9zX3Blcl9yb3cpLnRvQmUodGVzdERhdGEucGhvdG9zUGVyUm93KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRlc3REYXRhLmF1dG9wbGF5SW50ZXJ2YWwgIT09IHVuZGVmaW5lZCAmJiB0ZXN0RGF0YS5hdXRvcGxheUludGVydmFsICE9PSBudWxsKSB7XG4gICAgICAgICAgICBleHBlY3QoZ2V0UmVzdWx0LmRhdGEuYXV0b3BsYXlfaW50ZXJ2YWwpLnRvQmUodGVzdERhdGEuYXV0b3BsYXlJbnRlcnZhbCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0ZXN0RGF0YS50cmFuc2l0aW9uRWZmZWN0ICE9PSB1bmRlZmluZWQgJiYgdGVzdERhdGEudHJhbnNpdGlvbkVmZmVjdCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZXhwZWN0KGdldFJlc3VsdC5kYXRhLnRyYW5zaXRpb25fZWZmZWN0KS50b0JlKHRlc3REYXRhLnRyYW5zaXRpb25FZmZlY3QpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICApLFxuICAgICAgeyBudW1SdW5zOiAyMCwgdGltZW91dDogNTAwMCB9IC8vIFJlZHVjZWQgcnVucyBhbmQgaW5jcmVhc2VkIHRpbWVvdXRcbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHVwZGF0ZSBleGlzdGluZyBzZXR0aW5ncyB3aGVuIHVwc2VydGluZyB3aXRoIHNhbWUgcGFnZScsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBmYy5hc3NlcnQoXG4gICAgICBmYy5hc3luY1Byb3BlcnR5KFxuICAgICAgICBmYy5yZWNvcmQoe1xuICAgICAgICAgIHBhZ2VUeXBlOiBmYy5jb25zdGFudEZyb20oJ2FjdGl2aXR5JywgJ2V2ZW50JywgJ2FjY29tbW9kYXRpb24nLCAncm9vbV90eXBlJywgJ2N1c3RvbScsICdtZW1vcnknKSxcbiAgICAgICAgICBwYWdlSWQ6IGZjLnV1aWQoKSxcbiAgICAgICAgICBpbml0aWFsTW9kZTogZmMuY29uc3RhbnRGcm9tKCdnYWxsZXJ5JywgJ2Nhcm91c2VsJywgJ2xvb3AnKSxcbiAgICAgICAgICB1cGRhdGVkTW9kZTogZmMuY29uc3RhbnRGcm9tKCdnYWxsZXJ5JywgJ2Nhcm91c2VsJywgJ2xvb3AnKSxcbiAgICAgICAgICBzZXR0aW5nc0lkOiBmYy51dWlkKCksXG4gICAgICAgIH0pLFxuICAgICAgICBhc3luYyAodGVzdERhdGEpID0+IHtcbiAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAgICAgICAvLyBNb2NrIGZpcnN0IHVwc2VydCAoaW5pdGlhbCBzZXR0aW5ncylcbiAgICAgICAgICBjb25zdCBtb2NrU2luZ2xlMSA9IGplc3QuZm4oKSBhcyBhbnk7XG4gICAgICAgICAgbW9ja1NpbmdsZTEubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBpZDogdGVzdERhdGEuc2V0dGluZ3NJZCxcbiAgICAgICAgICAgICAgcGFnZV90eXBlOiB0ZXN0RGF0YS5wYWdlVHlwZSxcbiAgICAgICAgICAgICAgcGFnZV9pZDogdGVzdERhdGEucGFnZUlkLFxuICAgICAgICAgICAgICBkaXNwbGF5X21vZGU6IHRlc3REYXRhLmluaXRpYWxNb2RlLFxuICAgICAgICAgICAgICBzaG93X2NhcHRpb25zOiB0cnVlLFxuICAgICAgICAgICAgICBjcmVhdGVkX2F0OiBub3csXG4gICAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5vdyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICB9IGFzIGFueSk7XG4gICAgICAgICAgY29uc3QgbW9ja1NlbGVjdDEgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgc2luZ2xlOiBtb2NrU2luZ2xlMSB9KTtcbiAgICAgICAgICBjb25zdCBtb2NrVXBzZXJ0MSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBzZWxlY3Q6IG1vY2tTZWxlY3QxIH0pO1xuICAgICAgICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5WYWx1ZU9uY2UoeyB1cHNlcnQ6IG1vY2tVcHNlcnQxIH0pO1xuXG4gICAgICAgICAgY29uc3QgZmlyc3RSZXN1bHQgPSBhd2FpdCB1cHNlcnRTZXR0aW5ncyh7XG4gICAgICAgICAgICBwYWdlX3R5cGU6IHRlc3REYXRhLnBhZ2VUeXBlIGFzIGFueSxcbiAgICAgICAgICAgIHBhZ2VfaWQ6IHRlc3REYXRhLnBhZ2VJZCxcbiAgICAgICAgICAgIGRpc3BsYXlfbW9kZTogdGVzdERhdGEuaW5pdGlhbE1vZGUgYXMgJ2dhbGxlcnknIHwgJ2Nhcm91c2VsJyB8ICdsb29wJyxcbiAgICAgICAgICAgIHNob3dfY2FwdGlvbnM6IHRydWUsXG4gICAgICAgICAgfSBhcyBhbnkpO1xuXG4gICAgICAgICAgZXhwZWN0KGZpcnN0UmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG5cbiAgICAgICAgICBpZiAoIWZpcnN0UmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIE1vY2sgc2Vjb25kIHVwc2VydCAodXBkYXRlZCBzZXR0aW5ncylcbiAgICAgICAgICBjb25zdCBtb2NrU2luZ2xlMiA9IGplc3QuZm4oKSBhcyBhbnk7XG4gICAgICAgICAgbW9ja1NpbmdsZTIubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBpZDogdGVzdERhdGEuc2V0dGluZ3NJZCxcbiAgICAgICAgICAgICAgcGFnZV90eXBlOiB0ZXN0RGF0YS5wYWdlVHlwZSxcbiAgICAgICAgICAgICAgcGFnZV9pZDogdGVzdERhdGEucGFnZUlkLFxuICAgICAgICAgICAgICBkaXNwbGF5X21vZGU6IHRlc3REYXRhLnVwZGF0ZWRNb2RlLFxuICAgICAgICAgICAgICBzaG93X2NhcHRpb25zOiBmYWxzZSxcbiAgICAgICAgICAgICAgY3JlYXRlZF9hdDogbm93LFxuICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZShEYXRlLm5vdygpICsgMTAwMCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICB9IGFzIGFueSk7XG4gICAgICAgICAgY29uc3QgbW9ja1NlbGVjdDIgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgc2luZ2xlOiBtb2NrU2luZ2xlMiB9KTtcbiAgICAgICAgICBjb25zdCBtb2NrVXBzZXJ0MiA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyBzZWxlY3Q6IG1vY2tTZWxlY3QyIH0pO1xuICAgICAgICAgIG1vY2tGcm9tLm1vY2tSZXR1cm5WYWx1ZU9uY2UoeyB1cHNlcnQ6IG1vY2tVcHNlcnQyIH0pO1xuXG4gICAgICAgICAgY29uc3Qgc2Vjb25kUmVzdWx0ID0gYXdhaXQgdXBzZXJ0U2V0dGluZ3Moe1xuICAgICAgICAgICAgcGFnZV90eXBlOiB0ZXN0RGF0YS5wYWdlVHlwZSBhcyBhbnksXG4gICAgICAgICAgICBwYWdlX2lkOiB0ZXN0RGF0YS5wYWdlSWQsXG4gICAgICAgICAgICBkaXNwbGF5X21vZGU6IHRlc3REYXRhLnVwZGF0ZWRNb2RlIGFzICdnYWxsZXJ5JyB8ICdjYXJvdXNlbCcgfCAnbG9vcCcsXG4gICAgICAgICAgICBzaG93X2NhcHRpb25zOiBmYWxzZSxcbiAgICAgICAgICB9IGFzIGFueSk7XG5cbiAgICAgICAgICAvLyBQcm9wZXJ0eTogU2Vjb25kIHVwc2VydCBzaG91bGQgc3VjY2VlZFxuICAgICAgICAgIGV4cGVjdChzZWNvbmRSZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcblxuICAgICAgICAgIGlmICghc2Vjb25kUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFByb3BlcnR5OiBTZXR0aW5ncyBzaG91bGQgcmVmbGVjdCB0aGUgdXBkYXRlZCB2YWx1ZXNcbiAgICAgICAgICBleHBlY3Qoc2Vjb25kUmVzdWx0LmRhdGEuZGlzcGxheV9tb2RlKS50b0JlKHRlc3REYXRhLnVwZGF0ZWRNb2RlKTtcbiAgICAgICAgICBleHBlY3Qoc2Vjb25kUmVzdWx0LmRhdGEuc2hvd19jYXB0aW9ucykudG9CZShmYWxzZSk7XG5cbiAgICAgICAgICAvLyBQcm9wZXJ0eTogU2hvdWxkIGhhdmUgc2FtZSBJRCAodXBkYXRlZCwgbm90IGNyZWF0ZWQgbmV3KVxuICAgICAgICAgIGV4cGVjdChzZWNvbmRSZXN1bHQuZGF0YS5pZCkudG9CZSh0ZXN0RGF0YS5zZXR0aW5nc0lkKTtcblxuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICApLFxuICAgICAgeyBudW1SdW5zOiAxMCwgdGltZW91dDogNTAwMCB9IC8vIFJlZHVjZWQgcnVucyBhbmQgaW5jcmVhc2VkIHRpbWVvdXRcbiAgICApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJldHVybiBkZWZhdWx0IHNldHRpbmdzIHdoZW4gbm9uZSBleGlzdCBmb3IgYSBwYWdlJywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGZjLmFzc2VydChcbiAgICAgIGZjLmFzeW5jUHJvcGVydHkoXG4gICAgICAgIGZjLnJlY29yZCh7XG4gICAgICAgICAgcGFnZVR5cGU6IGZjLmNvbnN0YW50RnJvbSgnYWN0aXZpdHknLCAnZXZlbnQnLCAnYWNjb21tb2RhdGlvbicsICdyb29tX3R5cGUnLCAnY3VzdG9tJywgJ21lbW9yeScpLFxuICAgICAgICAgIHBhZ2VJZDogZmMudXVpZCgpLFxuICAgICAgICB9KSxcbiAgICAgICAgYXN5bmMgKHRlc3REYXRhKSA9PiB7XG4gICAgICAgICAgLy8gTW9jayBnZXQgb3BlcmF0aW9uIHJldHVybmluZyBubyBkYXRhIChzZXR0aW5ncyBkb24ndCBleGlzdClcbiAgICAgICAgICBjb25zdCBtb2NrU2luZ2xlID0gamVzdC5mbigpIGFzIGFueTtcbiAgICAgICAgICBtb2NrU2luZ2xlLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICBlcnJvcjogeyBjb2RlOiAnUEdSU1QxMTYnLCBtZXNzYWdlOiAnTm90IGZvdW5kJyB9LFxuICAgICAgICAgIH0gYXMgYW55KTtcbiAgICAgICAgICBjb25zdCBtb2NrRXEgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgc2luZ2xlOiBtb2NrU2luZ2xlIH0pO1xuICAgICAgICAgIGNvbnN0IG1vY2tTZWxlY3QgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgZXE6IG1vY2tFcSB9KTtcbiAgICAgICAgICBtb2NrRnJvbS5tb2NrUmV0dXJuVmFsdWVPbmNlKHsgc2VsZWN0OiBtb2NrU2VsZWN0IH0pO1xuXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0U2V0dGluZ3ModGVzdERhdGEucGFnZVR5cGUsIHRlc3REYXRhLnBhZ2VJZCk7XG5cbiAgICAgICAgICAvLyBQcm9wZXJ0eTogR2V0IHNob3VsZCBzdWNjZWVkIGV2ZW4gd2hlbiBzZXR0aW5ncyBkb24ndCBleGlzdFxuICAgICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcblxuICAgICAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFByb3BlcnR5OiBTaG91bGQgcmV0dXJuIGRlZmF1bHQgc2V0dGluZ3NcbiAgICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEucGFnZV90eXBlKS50b0JlKHRlc3REYXRhLnBhZ2VUeXBlKTtcbiAgICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEucGFnZV9pZCkudG9CZSh0ZXN0RGF0YS5wYWdlSWQpO1xuICAgICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5kaXNwbGF5X21vZGUpLnRvQmUoJ2dhbGxlcnknKTsgLy8gRGVmYXVsdFxuICAgICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5zaG93X2NhcHRpb25zKS50b0JlKHRydWUpOyAvLyBEZWZhdWx0XG5cbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIHsgbnVtUnVuczogMjAsIHRpbWVvdXQ6IDUwMDAgfSAvLyBSZWR1Y2VkIHJ1bnMgYW5kIGluY3JlYXNlZCB0aW1lb3V0XG4gICAgKTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJtb2NrRnJvbSIsImplc3QiLCJmbiIsIm1vY2siLCJzdXBhYmFzZSIsImZyb20iLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiaXQiLCJmYyIsImFzc2VydCIsImFzeW5jUHJvcGVydHkiLCJyZWNvcmQiLCJwYWdlVHlwZSIsImNvbnN0YW50RnJvbSIsInBhZ2VJZCIsInV1aWQiLCJkaXNwbGF5TW9kZSIsInBob3Rvc1BlclJvdyIsIm9wdGlvbiIsImludGVnZXIiLCJtaW4iLCJtYXgiLCJuaWwiLCJ1bmRlZmluZWQiLCJzaG93Q2FwdGlvbnMiLCJib29sZWFuIiwiYXV0b3BsYXlJbnRlcnZhbCIsInRyYW5zaXRpb25FZmZlY3QiLCJzdHJpbmciLCJtaW5MZW5ndGgiLCJtYXhMZW5ndGgiLCJzZXR0aW5nc0lkIiwidGVzdERhdGEiLCJub3ciLCJEYXRlIiwidG9JU09TdHJpbmciLCJtb2NrU2luZ2xlMSIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiZGF0YSIsImlkIiwicGFnZV90eXBlIiwicGFnZV9pZCIsImRpc3BsYXlfbW9kZSIsInBob3Rvc19wZXJfcm93Iiwic2hvd19jYXB0aW9ucyIsImF1dG9wbGF5X2ludGVydmFsIiwidHJhbnNpdGlvbl9lZmZlY3QiLCJjcmVhdGVkX2F0IiwidXBkYXRlZF9hdCIsImVycm9yIiwibW9ja1NlbGVjdDEiLCJtb2NrUmV0dXJuVmFsdWUiLCJzaW5nbGUiLCJtb2NrVXBzZXJ0Iiwic2VsZWN0IiwibW9ja1JldHVyblZhbHVlT25jZSIsInVwc2VydCIsInVwc2VydFJlc3VsdCIsInVwc2VydFNldHRpbmdzIiwiZXhwZWN0Iiwic3VjY2VzcyIsInRvQmUiLCJtb2NrU2luZ2xlMiIsIm1vY2tFcSIsIm1vY2tTZWxlY3QyIiwiZXEiLCJnZXRSZXN1bHQiLCJnZXRTZXR0aW5ncyIsIm51bVJ1bnMiLCJ0aW1lb3V0IiwiaW5pdGlhbE1vZGUiLCJ1cGRhdGVkTW9kZSIsIm1vY2tVcHNlcnQxIiwiZmlyc3RSZXN1bHQiLCJtb2NrVXBzZXJ0MiIsInNlY29uZFJlc3VsdCIsIm1vY2tTaW5nbGUiLCJjb2RlIiwibWVzc2FnZSIsIm1vY2tTZWxlY3QiLCJyZXN1bHQiXSwibWFwcGluZ3MiOiI7Ozs7bUVBQW9CO3lCQUNtQzt3Q0FXWDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBVDVDLDBDQUEwQztB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