{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/services/gallerySettingsPersistence.property.test.ts"],"sourcesContent":["import * as fc from 'fast-check';\nimport { jest, describe, it, expect, beforeEach } from '@jest/globals';\n\n// Mock Supabase before importing services\nconst mockFrom = jest.fn();\njest.mock('@/lib/supabase', () => ({\n  supabase: {\n    from: mockFrom,\n  },\n}));\n\n// Import after mocking\nimport { upsertSettings, getSettings } from './gallerySettingsService';\n\n// Feature: destination-wedding-platform, Property 35: Gallery Settings Persistence\n\ndescribe('Feature: destination-wedding-platform, Property 35: Gallery Settings Persistence', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('should persist gallery settings and retrieve updated values', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.record({\n          pageType: fc.constantFrom('activity', 'event', 'accommodation', 'room_type', 'custom', 'memory'),\n          pageId: fc.uuid(),\n          displayMode: fc.constantFrom('gallery', 'carousel', 'loop'),\n          photosPerRow: fc.option(fc.integer({ min: 1, max: 6 }), { nil: undefined }),\n          showCaptions: fc.boolean(),\n          autoplayInterval: fc.option(fc.integer({ min: 1000, max: 10000 }), { nil: undefined }),\n          transitionEffect: fc.option(fc.string({ minLength: 1, maxLength: 50 }), { nil: undefined }),\n          settingsId: fc.uuid(),\n        }),\n        async (testData) => {\n          const now = new Date().toISOString();\n\n          // Mock upsert operation\n          const mockSingle1 = jest.fn() as any;\n          mockSingle1.mockResolvedValue({\n            data: {\n              id: testData.settingsId,\n              page_type: testData.pageType,\n              page_id: testData.pageId,\n              display_mode: testData.displayMode,\n              photos_per_row: testData.photosPerRow || null,\n              show_captions: testData.showCaptions,\n              autoplay_interval: testData.autoplayInterval || null,\n              transition_effect: testData.transitionEffect || null,\n              created_at: now,\n              updated_at: now,\n            },\n            error: null,\n          } as any);\n          const mockSelect1 = jest.fn().mockReturnValue({ single: mockSingle1 });\n          const mockUpsert = jest.fn().mockReturnValue({ select: mockSelect1 });\n          mockFrom.mockReturnValueOnce({ upsert: mockUpsert });\n\n          // Upsert settings\n          const upsertResult = await upsertSettings({\n            page_type: testData.pageType as any,\n            page_id: testData.pageId,\n            display_mode: testData.displayMode as 'gallery' | 'carousel' | 'loop',\n            photos_per_row: testData.photosPerRow || undefined,\n            show_captions: testData.showCaptions,\n            autoplay_interval: testData.autoplayInterval || undefined,\n            transition_effect: testData.transitionEffect || undefined,\n          } as any);\n\n          // Property: Upsert should succeed\n          expect(upsertResult.success).toBe(true);\n\n          if (!upsertResult.success) {\n            return true;\n          }\n\n          // Mock get operation\n          const mockSingle2 = jest.fn() as any;\n          mockSingle2.mockResolvedValue({\n            data: {\n              id: testData.settingsId,\n              page_type: testData.pageType,\n              page_id: testData.pageId,\n              display_mode: testData.displayMode,\n              photos_per_row: testData.photosPerRow || null,\n              show_captions: testData.showCaptions,\n              autoplay_interval: testData.autoplayInterval || null,\n              transition_effect: testData.transitionEffect || null,\n              created_at: now,\n              updated_at: now,\n            },\n            error: null,\n          } as any);\n          const mockEq = jest.fn().mockReturnValue({ single: mockSingle2 });\n          const mockSelect2 = jest.fn().mockReturnValue({ eq: mockEq });\n          mockFrom.mockReturnValueOnce({ select: mockSelect2 });\n\n          // Retrieve settings\n          const getResult = await getSettings(testData.pageType, testData.pageId);\n\n          // Property: Get should succeed\n          expect(getResult.success).toBe(true);\n\n          if (!getResult.success) {\n            return true;\n          }\n\n          // Property: Retrieved settings should match upserted settings\n          expect(getResult.data.page_type).toBe(testData.pageType);\n          expect(getResult.data.page_id).toBe(testData.pageId);\n          expect(getResult.data.display_mode).toBe(testData.displayMode);\n          expect(getResult.data.show_captions).toBe(testData.showCaptions);\n\n          // Property: Optional fields should match if provided\n          if (testData.photosPerRow !== undefined && testData.photosPerRow !== null) {\n            expect(getResult.data.photos_per_row).toBe(testData.photosPerRow);\n          }\n          if (testData.autoplayInterval !== undefined && testData.autoplayInterval !== null) {\n            expect(getResult.data.autoplay_interval).toBe(testData.autoplayInterval);\n          }\n          if (testData.transitionEffect !== undefined && testData.transitionEffect !== null) {\n            expect(getResult.data.transition_effect).toBe(testData.transitionEffect);\n          }\n\n          return true;\n        }\n      ),\n      { numRuns: 20, timeout: 5000 } // Reduced runs and increased timeout\n    );\n  });\n\n  it('should update existing settings when upserting with same page', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.record({\n          pageType: fc.constantFrom('activity', 'event', 'accommodation', 'room_type', 'custom', 'memory'),\n          pageId: fc.uuid(),\n          initialMode: fc.constantFrom('gallery', 'carousel', 'loop'),\n          updatedMode: fc.constantFrom('gallery', 'carousel', 'loop'),\n          settingsId: fc.uuid(),\n        }),\n        async (testData) => {\n          const now = new Date().toISOString();\n\n          // Mock first upsert (initial settings)\n          const mockSingle1 = jest.fn() as any;\n          mockSingle1.mockResolvedValue({\n            data: {\n              id: testData.settingsId,\n              page_type: testData.pageType,\n              page_id: testData.pageId,\n              display_mode: testData.initialMode,\n              show_captions: true,\n              created_at: now,\n              updated_at: now,\n            },\n            error: null,\n          } as any);\n          const mockSelect1 = jest.fn().mockReturnValue({ single: mockSingle1 });\n          const mockUpsert1 = jest.fn().mockReturnValue({ select: mockSelect1 });\n          mockFrom.mockReturnValueOnce({ upsert: mockUpsert1 });\n\n          const firstResult = await upsertSettings({\n            page_type: testData.pageType as any,\n            page_id: testData.pageId,\n            display_mode: testData.initialMode as 'gallery' | 'carousel' | 'loop',\n            show_captions: true,\n          } as any);\n\n          expect(firstResult.success).toBe(true);\n\n          if (!firstResult.success) {\n            return true;\n          }\n\n          // Mock second upsert (updated settings)\n          const mockSingle2 = jest.fn() as any;\n          mockSingle2.mockResolvedValue({\n            data: {\n              id: testData.settingsId,\n              page_type: testData.pageType,\n              page_id: testData.pageId,\n              display_mode: testData.updatedMode,\n              show_captions: false,\n              created_at: now,\n              updated_at: new Date(Date.now() + 1000).toISOString(),\n            },\n            error: null,\n          } as any);\n          const mockSelect2 = jest.fn().mockReturnValue({ single: mockSingle2 });\n          const mockUpsert2 = jest.fn().mockReturnValue({ select: mockSelect2 });\n          mockFrom.mockReturnValueOnce({ upsert: mockUpsert2 });\n\n          const secondResult = await upsertSettings({\n            page_type: testData.pageType as any,\n            page_id: testData.pageId,\n            display_mode: testData.updatedMode as 'gallery' | 'carousel' | 'loop',\n            show_captions: false,\n          } as any);\n\n          // Property: Second upsert should succeed\n          expect(secondResult.success).toBe(true);\n\n          if (!secondResult.success) {\n            return true;\n          }\n\n          // Property: Settings should reflect the updated values\n          expect(secondResult.data.display_mode).toBe(testData.updatedMode);\n          expect(secondResult.data.show_captions).toBe(false);\n\n          // Property: Should have same ID (updated, not created new)\n          expect(secondResult.data.id).toBe(testData.settingsId);\n\n          return true;\n        }\n      ),\n      { numRuns: 10, timeout: 5000 } // Reduced runs and increased timeout\n    );\n  });\n\n  it('should return default settings when none exist for a page', async () => {\n    await fc.assert(\n      fc.asyncProperty(\n        fc.record({\n          pageType: fc.constantFrom('activity', 'event', 'accommodation', 'room_type', 'custom', 'memory'),\n          pageId: fc.uuid(),\n        }),\n        async (testData) => {\n          // Mock get operation returning no data (settings don't exist)\n          const mockSingle = jest.fn() as any;\n          mockSingle.mockResolvedValue({\n            data: null,\n            error: { code: 'PGRST116', message: 'Not found' },\n          } as any);\n          const mockEq = jest.fn().mockReturnValue({ single: mockSingle });\n          const mockSelect = jest.fn().mockReturnValue({ eq: mockEq });\n          mockFrom.mockReturnValueOnce({ select: mockSelect });\n\n          const result = await getSettings(testData.pageType, testData.pageId);\n\n          // Property: Get should succeed even when settings don't exist\n          expect(result.success).toBe(true);\n\n          if (!result.success) {\n            return true;\n          }\n\n          // Property: Should return default settings\n          expect(result.data.page_type).toBe(testData.pageType);\n          expect(result.data.page_id).toBe(testData.pageId);\n          expect(result.data.display_mode).toBe('gallery'); // Default\n          expect(result.data.show_captions).toBe(true); // Default\n\n          return true;\n        }\n      ),\n      { numRuns: 20, timeout: 5000 } // Reduced runs and increased timeout\n    );\n  });\n});\n"],"names":["mockFrom","jest","fn","mock","supabase","from","describe","beforeEach","clearAllMocks","it","fc","assert","asyncProperty","record","pageType","constantFrom","pageId","uuid","displayMode","photosPerRow","option","integer","min","max","nil","undefined","showCaptions","boolean","autoplayInterval","transitionEffect","string","minLength","maxLength","settingsId","testData","now","Date","toISOString","mockSingle1","mockResolvedValue","data","id","page_type","page_id","display_mode","photos_per_row","show_captions","autoplay_interval","transition_effect","created_at","updated_at","error","mockSelect1","mockReturnValue","single","mockUpsert","select","mockReturnValueOnce","upsert","upsertResult","upsertSettings","expect","success","toBe","mockSingle2","mockEq","mockSelect2","eq","getResult","getSettings","numRuns","timeout","initialMode","updatedMode","mockUpsert1","firstResult","mockUpsert2","secondResult","mockSingle","code","message","mockSelect","result"],"mappings":"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"}