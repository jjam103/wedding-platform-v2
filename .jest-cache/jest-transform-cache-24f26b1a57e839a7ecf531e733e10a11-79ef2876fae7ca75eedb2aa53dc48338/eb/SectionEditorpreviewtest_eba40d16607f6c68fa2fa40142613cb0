922c9797fd8290642a7a9acd08f15366
/**
 * PhotoGalleryPreview Component Tests
 * 
 * Tests the photo gallery preview functionality in the section editor,
 * including photo fetching, display modes, loading states, and error handling.
 */ "use strict";
// Mock Next.js Image component
jest.mock('next/image', ()=>({
        __esModule: true,
        default: ({ src, alt, fill, ...props })=>// eslint-disable-next-line @next/next/no-img-element
            /*#__PURE__*/ (0, _jsxruntime.jsx)("img", {
                src: src,
                alt: alt,
                ...props
            })
    }));
// Mock dynamic imports
jest.mock('next/dynamic', ()=>({
        __esModule: true,
        default: (fn)=>{
            const Component = fn().then((mod)=>mod.default || mod);
            return Component;
        }
    }));
// Mock PhotoPicker
jest.mock('./PhotoPicker', ()=>({
        PhotoPicker: ({ onSelect, onClose })=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                "data-testid": "photo-picker-modal",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                        onClick: ()=>onSelect([
                                'photo-1',
                                'photo-2'
                            ]),
                        children: "Select Photos"
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                        onClick: onClose,
                        children: "Close"
                    })
                ]
            })
    }));
// Mock RichTextEditor
jest.mock('./RichTextEditor', ()=>({
        RichTextEditor: ({ value, onChange })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("textarea", {
                "data-testid": "rich-text-editor",
                value: value,
                onChange: (e)=>onChange(e.target.value)
            })
    }));
// Mock PhotoGallerySkeleton
jest.mock('./PhotoGallerySkeleton', ()=>({
        PhotoGallerySkeleton: ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "photo-gallery-skeleton",
                children: "Loading..."
            })
    }));
// Mock Button component
jest.mock('@/components/ui/Button', ()=>({
        Button: ({ children, onClick, ...props })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                onClick: onClick,
                ...props,
                children: children
            })
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _SectionEditor = require("./SectionEditor");
describe('PhotoGalleryPreview', ()=>{
    beforeEach(()=>{
        // Reset fetch mock
        global.fetch = jest.fn();
        // Mock sections fetch by default (can be overridden in individual tests)
        global.fetch.mockResolvedValue({
            ok: true,
            json: async ()=>({
                    success: true,
                    data: []
                })
        });
    });
    afterEach(()=>{
        jest.clearAllMocks();
    });
    describe('Photo Fetching and Display', ()=>{
        it('should fetch and display photos with thumbnails and captions', async ()=>{
            // Override default mock with sections containing photos
            global.fetch.mockReset();
            // Mock sections fetch
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: [
                            {
                                id: 'section-1',
                                page_type: 'activity',
                                page_id: 'activity-1',
                                title: 'Test Section',
                                column_1_content: 'Content',
                                column_2_content: '',
                                photo_gallery_ids: [
                                    'photo-1',
                                    'photo-2'
                                ],
                                display_order: 0
                            }
                        ]
                    })
            });
            // Mock photo API responses
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-1',
                            photo_url: 'https://example.com/photo1.jpg',
                            caption: 'Beautiful sunset'
                        }
                    })
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-2',
                            photo_url: 'https://example.com/photo2.jpg',
                            caption: 'Mountain view'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            // Wait for photos to load
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/admin/photos/photo-1');
                expect(global.fetch).toHaveBeenCalledWith('/api/admin/photos/photo-2');
            });
        });
        it('should use photo_url field (not deprecated url field)', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-1',
                            photo_url: 'https://example.com/photo1.jpg',
                            caption: 'Test photo'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
            // Verify photo_url is used in the response
            const calls = global.fetch.mock.calls;
            expect(calls.length).toBeGreaterThan(0);
        });
    });
    describe('Display Modes', ()=>{
        it('should display "Gallery Grid" mode indicator', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-1',
                            photo_url: 'https://example.com/photo1.jpg'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            // Gallery mode is the default
            await (0, _react.waitFor)(()=>{
                const modeText = _react.screen.queryByText(/Display Mode:/i);
                if (modeText) {
                    expect(modeText).toBeInTheDocument();
                }
            });
        });
        it('should display "Carousel" mode indicator', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-1',
                            photo_url: 'https://example.com/photo1.jpg'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
        });
        it('should display "Auto-play Loop" mode indicator', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-1',
                            photo_url: 'https://example.com/photo1.jpg'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
        });
    });
    describe('Loading States', ()=>{
        it('should display skeleton placeholders while loading', async ()=>{
            // Mock slow API response
            global.fetch.mockImplementation(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            ok: true,
                            json: async ()=>({
                                    success: true,
                                    data: {
                                        id: 'photo-1',
                                        photo_url: 'https://example.com/photo1.jpg'
                                    }
                                })
                        }), 100)));
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            // Should show loading state initially
            // Note: The skeleton is shown during photo fetch, not component load
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
        });
        it('should hide loading state after photos load', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-1',
                            photo_url: 'https://example.com/photo1.jpg'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
            // Loading state should be gone
            await (0, _react.waitFor)(()=>{
                const skeletons = _react.screen.queryAllByTestId('photo-gallery-skeleton');
                // Skeleton might still be present for lazy-loaded components
                expect(skeletons.length).toBeGreaterThanOrEqual(0);
            });
        });
    });
    describe('Error States', ()=>{
        it('should handle API errors gracefully', async ()=>{
            // Mock API error
            global.fetch.mockRejectedValue(new Error('Network error'));
            const consoleSpy = jest.spyOn(console, 'error').mockImplementation();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
            // Should log error but not crash
            await (0, _react.waitFor)(()=>{
                expect(consoleSpy).toHaveBeenCalledWith(expect.stringContaining('Error fetching'), expect.any(Error));
            });
            consoleSpy.mockRestore();
        });
        it('should handle failed photo fetch (404)', async ()=>{
            global.fetch.mockResolvedValue({
                ok: false,
                status: 404,
                json: async ()=>({
                        success: false,
                        error: {
                            code: 'NOT_FOUND',
                            message: 'Photo not found'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
            // Should not crash, should filter out failed photos
            await (0, _react.waitFor)(()=>{
                const component = _react.screen.getByTestId('section-editor');
                expect(component).toBeInTheDocument();
            }, {
                timeout: 3000
            });
        });
        it('should filter out null photos from failed requests', async ()=>{
            // Mock mixed success/failure responses
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-1',
                            photo_url: 'https://example.com/photo1.jpg'
                        }
                    })
            }).mockResolvedValueOnce({
                ok: false,
                status: 404
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledTimes(2);
            });
            // Should only show the successful photo
            await (0, _react.waitFor)(()=>{
                const component = _react.screen.getByTestId('section-editor');
                expect(component).toBeInTheDocument();
            });
        });
    });
    describe('Empty State', ()=>{
        it('should display "No photos selected" when no photos', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            // Wait for component to render
            await (0, _react.waitFor)(()=>{
                const component = _react.screen.getByTestId('section-editor');
                expect(component).toBeInTheDocument();
            });
            // Should show empty state message
            await (0, _react.waitFor)(()=>{
                const emptyMessage = _react.screen.queryByText(/No photos selected/i);
                if (emptyMessage) {
                    expect(emptyMessage).toBeInTheDocument();
                }
            });
        });
        it('should display empty state when photoIds array is empty', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                const component = _react.screen.getByTestId('section-editor');
                expect(component).toBeInTheDocument();
            });
        });
    });
    describe('Photo Captions', ()=>{
        it('should display photo captions when available', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-1',
                            photo_url: 'https://example.com/photo1.jpg',
                            caption: 'Beautiful sunset over the ocean'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
        });
        it('should handle photos without captions', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-1',
                            photo_url: 'https://example.com/photo1.jpg'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
            // Should not crash without caption
            await (0, _react.waitFor)(()=>{
                const component = _react.screen.getByTestId('section-editor');
                expect(component).toBeInTheDocument();
            });
        });
    });
    describe('Integration with SectionEditor', ()=>{
        it('should render within section editor', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                const component = _react.screen.getByTestId('section-editor');
                expect(component).toBeInTheDocument();
            });
        });
        it('should update when photo selection changes', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: {
                            id: 'photo-1',
                            photo_url: 'https://example.com/photo1.jpg'
                        }
                    })
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "activity",
                pageId: "activity-1"
            }));
            await (0, _react.waitFor)(()=>{
                const component = _react.screen.getByTestId('section-editor');
                expect(component).toBeInTheDocument();
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9hZG1pbi9TZWN0aW9uRWRpdG9yLnByZXZpZXcudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQaG90b0dhbGxlcnlQcmV2aWV3IENvbXBvbmVudCBUZXN0c1xuICogXG4gKiBUZXN0cyB0aGUgcGhvdG8gZ2FsbGVyeSBwcmV2aWV3IGZ1bmN0aW9uYWxpdHkgaW4gdGhlIHNlY3Rpb24gZWRpdG9yLFxuICogaW5jbHVkaW5nIHBob3RvIGZldGNoaW5nLCBkaXNwbGF5IG1vZGVzLCBsb2FkaW5nIHN0YXRlcywgYW5kIGVycm9yIGhhbmRsaW5nLlxuICovXG5cbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBTZWN0aW9uRWRpdG9yIH0gZnJvbSAnLi9TZWN0aW9uRWRpdG9yJztcblxuLy8gTW9jayBOZXh0LmpzIEltYWdlIGNvbXBvbmVudFxuamVzdC5tb2NrKCduZXh0L2ltYWdlJywgKCkgPT4gKHtcbiAgX19lc01vZHVsZTogdHJ1ZSxcbiAgZGVmYXVsdDogKHsgc3JjLCBhbHQsIGZpbGwsIC4uLnByb3BzIH06IGFueSkgPT4gKFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAbmV4dC9uZXh0L25vLWltZy1lbGVtZW50XG4gICAgPGltZyBzcmM9e3NyY30gYWx0PXthbHR9IHsuLi5wcm9wc30gLz5cbiAgKSxcbn0pKTtcblxuLy8gTW9jayBkeW5hbWljIGltcG9ydHNcbmplc3QubW9jaygnbmV4dC9keW5hbWljJywgKCkgPT4gKHtcbiAgX19lc01vZHVsZTogdHJ1ZSxcbiAgZGVmYXVsdDogKGZuOiBhbnkpID0+IHtcbiAgICBjb25zdCBDb21wb25lbnQgPSBmbigpLnRoZW4oKG1vZDogYW55KSA9PiBtb2QuZGVmYXVsdCB8fCBtb2QpO1xuICAgIHJldHVybiBDb21wb25lbnQ7XG4gIH0sXG59KSk7XG5cbi8vIE1vY2sgUGhvdG9QaWNrZXJcbmplc3QubW9jaygnLi9QaG90b1BpY2tlcicsICgpID0+ICh7XG4gIFBob3RvUGlja2VyOiAoeyBvblNlbGVjdCwgb25DbG9zZSB9OiBhbnkpID0+IChcbiAgICA8ZGl2IGRhdGEtdGVzdGlkPVwicGhvdG8tcGlja2VyLW1vZGFsXCI+XG4gICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IG9uU2VsZWN0KFsncGhvdG8tMScsICdwaG90by0yJ10pfT5TZWxlY3QgUGhvdG9zPC9idXR0b24+XG4gICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uQ2xvc2V9PkNsb3NlPC9idXR0b24+XG4gICAgPC9kaXY+XG4gICksXG59KSk7XG5cbi8vIE1vY2sgUmljaFRleHRFZGl0b3Jcbmplc3QubW9jaygnLi9SaWNoVGV4dEVkaXRvcicsICgpID0+ICh7XG4gIFJpY2hUZXh0RWRpdG9yOiAoeyB2YWx1ZSwgb25DaGFuZ2UgfTogYW55KSA9PiAoXG4gICAgPHRleHRhcmVhXG4gICAgICBkYXRhLXRlc3RpZD1cInJpY2gtdGV4dC1lZGl0b3JcIlxuICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgb25DaGFuZ2U9eyhlKSA9PiBvbkNoYW5nZShlLnRhcmdldC52YWx1ZSl9XG4gICAgLz5cbiAgKSxcbn0pKTtcblxuLy8gTW9jayBQaG90b0dhbGxlcnlTa2VsZXRvblxuamVzdC5tb2NrKCcuL1Bob3RvR2FsbGVyeVNrZWxldG9uJywgKCkgPT4gKHtcbiAgUGhvdG9HYWxsZXJ5U2tlbGV0b246ICgpID0+IDxkaXYgZGF0YS10ZXN0aWQ9XCJwaG90by1nYWxsZXJ5LXNrZWxldG9uXCI+TG9hZGluZy4uLjwvZGl2Pixcbn0pKTtcblxuLy8gTW9jayBCdXR0b24gY29tcG9uZW50XG5qZXN0Lm1vY2soJ0AvY29tcG9uZW50cy91aS9CdXR0b24nLCAoKSA9PiAoe1xuICBCdXR0b246ICh7IGNoaWxkcmVuLCBvbkNsaWNrLCAuLi5wcm9wcyB9OiBhbnkpID0+IChcbiAgICA8YnV0dG9uIG9uQ2xpY2s9e29uQ2xpY2t9IHsuLi5wcm9wc30+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9idXR0b24+XG4gICksXG59KSk7XG5cbmRlc2NyaWJlKCdQaG90b0dhbGxlcnlQcmV2aWV3JywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAvLyBSZXNldCBmZXRjaCBtb2NrXG4gICAgZ2xvYmFsLmZldGNoID0gamVzdC5mbigpO1xuICAgIFxuICAgIC8vIE1vY2sgc2VjdGlvbnMgZmV0Y2ggYnkgZGVmYXVsdCAoY2FuIGJlIG92ZXJyaWRkZW4gaW4gaW5kaXZpZHVhbCB0ZXN0cylcbiAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgb2s6IHRydWUsXG4gICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiBbXSxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGhvdG8gRmV0Y2hpbmcgYW5kIERpc3BsYXknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBmZXRjaCBhbmQgZGlzcGxheSBwaG90b3Mgd2l0aCB0aHVtYm5haWxzIGFuZCBjYXB0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE92ZXJyaWRlIGRlZmF1bHQgbW9jayB3aXRoIHNlY3Rpb25zIGNvbnRhaW5pbmcgcGhvdG9zXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc2V0KCk7XG4gICAgICBcbiAgICAgIC8vIE1vY2sgc2VjdGlvbnMgZmV0Y2hcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdzZWN0aW9uLTEnLFxuICAgICAgICAgICAgICBwYWdlX3R5cGU6ICdhY3Rpdml0eScsXG4gICAgICAgICAgICAgIHBhZ2VfaWQ6ICdhY3Rpdml0eS0xJyxcbiAgICAgICAgICAgICAgdGl0bGU6ICdUZXN0IFNlY3Rpb24nLFxuICAgICAgICAgICAgICBjb2x1bW5fMV9jb250ZW50OiAnQ29udGVudCcsXG4gICAgICAgICAgICAgIGNvbHVtbl8yX2NvbnRlbnQ6ICcnLFxuICAgICAgICAgICAgICBwaG90b19nYWxsZXJ5X2lkczogWydwaG90by0xJywgJ3Bob3RvLTInXSxcbiAgICAgICAgICAgICAgZGlzcGxheV9vcmRlcjogMCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgLy8gTW9jayBwaG90byBBUEkgcmVzcG9uc2VzXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaylcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIGlkOiAncGhvdG8tMScsXG4gICAgICAgICAgICAgIHBob3RvX3VybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vcGhvdG8xLmpwZycsXG4gICAgICAgICAgICAgIGNhcHRpb246ICdCZWF1dGlmdWwgc3Vuc2V0JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBpZDogJ3Bob3RvLTInLFxuICAgICAgICAgICAgICBwaG90b191cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Bob3RvMi5qcGcnLFxuICAgICAgICAgICAgICBjYXB0aW9uOiAnTW91bnRhaW4gdmlldycsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiYWN0aXZpdHlcIlxuICAgICAgICAgIHBhZ2VJZD1cImFjdGl2aXR5LTFcIlxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgLy8gV2FpdCBmb3IgcGhvdG9zIHRvIGxvYWRcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FwaS9hZG1pbi9waG90b3MvcGhvdG8tMScpO1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FwaS9hZG1pbi9waG90b3MvcGhvdG8tMicpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVzZSBwaG90b191cmwgZmllbGQgKG5vdCBkZXByZWNhdGVkIHVybCBmaWVsZCknLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGlkOiAncGhvdG8tMScsXG4gICAgICAgICAgICBwaG90b191cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Bob3RvMS5qcGcnLFxuICAgICAgICAgICAgY2FwdGlvbjogJ1Rlc3QgcGhvdG8nLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImFjdGl2aXR5XCJcbiAgICAgICAgICBwYWdlSWQ9XCJhY3Rpdml0eS0xXCJcbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gVmVyaWZ5IHBob3RvX3VybCBpcyB1c2VkIGluIHRoZSByZXNwb25zZVxuICAgICAgY29uc3QgY2FsbHMgPSAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9jay5jYWxscztcbiAgICAgIGV4cGVjdChjYWxscy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Rpc3BsYXkgTW9kZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IFwiR2FsbGVyeSBHcmlkXCIgbW9kZSBpbmRpY2F0b3InLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGlkOiAncGhvdG8tMScsXG4gICAgICAgICAgICBwaG90b191cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Bob3RvMS5qcGcnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImFjdGl2aXR5XCJcbiAgICAgICAgICBwYWdlSWQ9XCJhY3Rpdml0eS0xXCJcbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIC8vIEdhbGxlcnkgbW9kZSBpcyB0aGUgZGVmYXVsdFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1vZGVUZXh0ID0gc2NyZWVuLnF1ZXJ5QnlUZXh0KC9EaXNwbGF5IE1vZGU6L2kpO1xuICAgICAgICBpZiAobW9kZVRleHQpIHtcbiAgICAgICAgICBleHBlY3QobW9kZVRleHQpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IFwiQ2Fyb3VzZWxcIiBtb2RlIGluZGljYXRvcicsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgaWQ6ICdwaG90by0xJyxcbiAgICAgICAgICAgIHBob3RvX3VybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vcGhvdG8xLmpwZycsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiYWN0aXZpdHlcIlxuICAgICAgICAgIHBhZ2VJZD1cImFjdGl2aXR5LTFcIlxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IFwiQXV0by1wbGF5IExvb3BcIiBtb2RlIGluZGljYXRvcicsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgaWQ6ICdwaG90by0xJyxcbiAgICAgICAgICAgIHBob3RvX3VybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vcGhvdG8xLmpwZycsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiYWN0aXZpdHlcIlxuICAgICAgICAgIHBhZ2VJZD1cImFjdGl2aXR5LTFcIlxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTG9hZGluZyBTdGF0ZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHNrZWxldG9uIHBsYWNlaG9sZGVycyB3aGlsZSBsb2FkaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBzbG93IEFQSSByZXNwb25zZVxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbihcbiAgICAgICAgKCkgPT5cbiAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICgpID0+XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICBpZDogJ3Bob3RvLTEnLFxuICAgICAgICAgICAgICAgICAgICAgIHBob3RvX3VybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vcGhvdG8xLmpwZycsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgMTAwXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiYWN0aXZpdHlcIlxuICAgICAgICAgIHBhZ2VJZD1cImFjdGl2aXR5LTFcIlxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgLy8gU2hvdWxkIHNob3cgbG9hZGluZyBzdGF0ZSBpbml0aWFsbHlcbiAgICAgIC8vIE5vdGU6IFRoZSBza2VsZXRvbiBpcyBzaG93biBkdXJpbmcgcGhvdG8gZmV0Y2gsIG5vdCBjb21wb25lbnQgbG9hZFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoaWRlIGxvYWRpbmcgc3RhdGUgYWZ0ZXIgcGhvdG9zIGxvYWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGlkOiAncGhvdG8tMScsXG4gICAgICAgICAgICBwaG90b191cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Bob3RvMS5qcGcnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImFjdGl2aXR5XCJcbiAgICAgICAgICBwYWdlSWQ9XCJhY3Rpdml0eS0xXCJcbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gTG9hZGluZyBzdGF0ZSBzaG91bGQgYmUgZ29uZVxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNrZWxldG9ucyA9IHNjcmVlbi5xdWVyeUFsbEJ5VGVzdElkKCdwaG90by1nYWxsZXJ5LXNrZWxldG9uJyk7XG4gICAgICAgIC8vIFNrZWxldG9uIG1pZ2h0IHN0aWxsIGJlIHByZXNlbnQgZm9yIGxhenktbG9hZGVkIGNvbXBvbmVudHNcbiAgICAgICAgZXhwZWN0KHNrZWxldG9ucy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Vycm9yIFN0YXRlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBBUEkgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIEFQSSBlcnJvclxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignTmV0d29yayBlcnJvcicpKTtcblxuICAgICAgY29uc3QgY29uc29sZVNweSA9IGplc3Quc3B5T24oY29uc29sZSwgJ2Vycm9yJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImFjdGl2aXR5XCJcbiAgICAgICAgICBwYWdlSWQ9XCJhY3Rpdml0eS0xXCJcbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2hvdWxkIGxvZyBlcnJvciBidXQgbm90IGNyYXNoXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGNvbnNvbGVTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdFcnJvciBmZXRjaGluZycpLFxuICAgICAgICAgIGV4cGVjdC5hbnkoRXJyb3IpXG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgY29uc29sZVNweS5tb2NrUmVzdG9yZSgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZmFpbGVkIHBob3RvIGZldGNoICg0MDQpJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICBzdGF0dXM6IDQwNCxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogeyBjb2RlOiAnTk9UX0ZPVU5EJywgbWVzc2FnZTogJ1Bob3RvIG5vdCBmb3VuZCcgfSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiYWN0aXZpdHlcIlxuICAgICAgICAgIHBhZ2VJZD1cImFjdGl2aXR5LTFcIlxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTaG91bGQgbm90IGNyYXNoLCBzaG91bGQgZmlsdGVyIG91dCBmYWlsZWQgcGhvdG9zXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdzZWN0aW9uLWVkaXRvcicpO1xuICAgICAgICBleHBlY3QoY29tcG9uZW50KS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSwgeyB0aW1lb3V0OiAzMDAwIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmaWx0ZXIgb3V0IG51bGwgcGhvdG9zIGZyb20gZmFpbGVkIHJlcXVlc3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBtaXhlZCBzdWNjZXNzL2ZhaWx1cmUgcmVzcG9uc2VzXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaylcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIGlkOiAncGhvdG8tMScsXG4gICAgICAgICAgICAgIHBob3RvX3VybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vcGhvdG8xLmpwZycsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgICBvazogZmFsc2UsXG4gICAgICAgICAgc3RhdHVzOiA0MDQsXG4gICAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJhY3Rpdml0eVwiXG4gICAgICAgICAgcGFnZUlkPVwiYWN0aXZpdHktMVwiXG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDIpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBvbmx5IHNob3cgdGhlIHN1Y2Nlc3NmdWwgcGhvdG9cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBjb21wb25lbnQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3NlY3Rpb24tZWRpdG9yJyk7XG4gICAgICAgIGV4cGVjdChjb21wb25lbnQpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0VtcHR5IFN0YXRlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGlzcGxheSBcIk5vIHBob3RvcyBzZWxlY3RlZFwiIHdoZW4gbm8gcGhvdG9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiYWN0aXZpdHlcIlxuICAgICAgICAgIHBhZ2VJZD1cImFjdGl2aXR5LTFcIlxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgLy8gV2FpdCBmb3IgY29tcG9uZW50IHRvIHJlbmRlclxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnc2VjdGlvbi1lZGl0b3InKTtcbiAgICAgICAgZXhwZWN0KGNvbXBvbmVudCkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTaG91bGQgc2hvdyBlbXB0eSBzdGF0ZSBtZXNzYWdlXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgZW1wdHlNZXNzYWdlID0gc2NyZWVuLnF1ZXJ5QnlUZXh0KC9ObyBwaG90b3Mgc2VsZWN0ZWQvaSk7XG4gICAgICAgIGlmIChlbXB0eU1lc3NhZ2UpIHtcbiAgICAgICAgICBleHBlY3QoZW1wdHlNZXNzYWdlKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBlbXB0eSBzdGF0ZSB3aGVuIHBob3RvSWRzIGFycmF5IGlzIGVtcHR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiYWN0aXZpdHlcIlxuICAgICAgICAgIHBhZ2VJZD1cImFjdGl2aXR5LTFcIlxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnc2VjdGlvbi1lZGl0b3InKTtcbiAgICAgICAgZXhwZWN0KGNvbXBvbmVudCkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGhvdG8gQ2FwdGlvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHBob3RvIGNhcHRpb25zIHdoZW4gYXZhaWxhYmxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBpZDogJ3Bob3RvLTEnLFxuICAgICAgICAgICAgcGhvdG9fdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9waG90bzEuanBnJyxcbiAgICAgICAgICAgIGNhcHRpb246ICdCZWF1dGlmdWwgc3Vuc2V0IG92ZXIgdGhlIG9jZWFuJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJhY3Rpdml0eVwiXG4gICAgICAgICAgcGFnZUlkPVwiYWN0aXZpdHktMVwiXG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBwaG90b3Mgd2l0aG91dCBjYXB0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgaWQ6ICdwaG90by0xJyxcbiAgICAgICAgICAgIHBob3RvX3VybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vcGhvdG8xLmpwZycsXG4gICAgICAgICAgICAvLyBObyBjYXB0aW9uXG4gICAgICAgICAgfSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiYWN0aXZpdHlcIlxuICAgICAgICAgIHBhZ2VJZD1cImFjdGl2aXR5LTFcIlxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTaG91bGQgbm90IGNyYXNoIHdpdGhvdXQgY2FwdGlvblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnc2VjdGlvbi1lZGl0b3InKTtcbiAgICAgICAgZXhwZWN0KGNvbXBvbmVudCkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW50ZWdyYXRpb24gd2l0aCBTZWN0aW9uRWRpdG9yJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmVuZGVyIHdpdGhpbiBzZWN0aW9uIGVkaXRvcicsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImFjdGl2aXR5XCJcbiAgICAgICAgICBwYWdlSWQ9XCJhY3Rpdml0eS0xXCJcbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBjb21wb25lbnQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3NlY3Rpb24tZWRpdG9yJyk7XG4gICAgICAgIGV4cGVjdChjb21wb25lbnQpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXBkYXRlIHdoZW4gcGhvdG8gc2VsZWN0aW9uIGNoYW5nZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGlkOiAncGhvdG8tMScsXG4gICAgICAgICAgICBwaG90b191cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Bob3RvMS5qcGcnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImFjdGl2aXR5XCJcbiAgICAgICAgICBwYWdlSWQ9XCJhY3Rpdml0eS0xXCJcbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBjb21wb25lbnQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3NlY3Rpb24tZWRpdG9yJyk7XG4gICAgICAgIGV4cGVjdChjb21wb25lbnQpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0Iiwic3JjIiwiYWx0IiwiZmlsbCIsInByb3BzIiwiaW1nIiwiZm4iLCJDb21wb25lbnQiLCJ0aGVuIiwibW9kIiwiUGhvdG9QaWNrZXIiLCJvblNlbGVjdCIsIm9uQ2xvc2UiLCJkaXYiLCJkYXRhLXRlc3RpZCIsImJ1dHRvbiIsIm9uQ2xpY2siLCJSaWNoVGV4dEVkaXRvciIsInZhbHVlIiwib25DaGFuZ2UiLCJ0ZXh0YXJlYSIsImUiLCJ0YXJnZXQiLCJQaG90b0dhbGxlcnlTa2VsZXRvbiIsIkJ1dHRvbiIsImNoaWxkcmVuIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiZ2xvYmFsIiwiZmV0Y2giLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsIm9rIiwianNvbiIsInN1Y2Nlc3MiLCJkYXRhIiwiYWZ0ZXJFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIml0IiwibW9ja1Jlc2V0IiwibW9ja1Jlc29sdmVkVmFsdWVPbmNlIiwiaWQiLCJwYWdlX3R5cGUiLCJwYWdlX2lkIiwidGl0bGUiLCJjb2x1bW5fMV9jb250ZW50IiwiY29sdW1uXzJfY29udGVudCIsInBob3RvX2dhbGxlcnlfaWRzIiwiZGlzcGxheV9vcmRlciIsInBob3RvX3VybCIsImNhcHRpb24iLCJyZW5kZXIiLCJTZWN0aW9uRWRpdG9yIiwicGFnZVR5cGUiLCJwYWdlSWQiLCJ3YWl0Rm9yIiwiZXhwZWN0IiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwiY2FsbHMiLCJsZW5ndGgiLCJ0b0JlR3JlYXRlclRoYW4iLCJtb2RlVGV4dCIsInNjcmVlbiIsInF1ZXJ5QnlUZXh0IiwidG9CZUluVGhlRG9jdW1lbnQiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJza2VsZXRvbnMiLCJxdWVyeUFsbEJ5VGVzdElkIiwidG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCIsIm1vY2tSZWplY3RlZFZhbHVlIiwiRXJyb3IiLCJjb25zb2xlU3B5Iiwic3B5T24iLCJjb25zb2xlIiwic3RyaW5nQ29udGFpbmluZyIsImFueSIsIm1vY2tSZXN0b3JlIiwic3RhdHVzIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsImNvbXBvbmVudCIsImdldEJ5VGVzdElkIiwidGltZW91dCIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyIsImVtcHR5TWVzc2FnZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O0NBS0M7QUFLRCwrQkFBK0I7QUFDL0JBLEtBQUtDLElBQUksQ0FBQyxjQUFjLElBQU8sQ0FBQTtRQUM3QkMsWUFBWTtRQUNaQyxTQUFTLENBQUMsRUFBRUMsR0FBRyxFQUFFQyxHQUFHLEVB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