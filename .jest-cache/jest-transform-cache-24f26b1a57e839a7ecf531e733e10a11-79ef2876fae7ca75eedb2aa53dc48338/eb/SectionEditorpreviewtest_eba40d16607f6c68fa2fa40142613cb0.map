{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/SectionEditor.preview.test.tsx"],"sourcesContent":["/**\n * PhotoGalleryPreview Component Tests\n * \n * Tests the photo gallery preview functionality in the section editor,\n * including photo fetching, display modes, loading states, and error handling.\n */\n\nimport { render, screen, waitFor } from '@testing-library/react';\nimport { SectionEditor } from './SectionEditor';\n\n// Mock Next.js Image component\njest.mock('next/image', () => ({\n  __esModule: true,\n  default: ({ src, alt, fill, ...props }: any) => (\n    // eslint-disable-next-line @next/next/no-img-element\n    <img src={src} alt={alt} {...props} />\n  ),\n}));\n\n// Mock dynamic imports\njest.mock('next/dynamic', () => ({\n  __esModule: true,\n  default: (fn: any) => {\n    const Component = fn().then((mod: any) => mod.default || mod);\n    return Component;\n  },\n}));\n\n// Mock PhotoPicker\njest.mock('./PhotoPicker', () => ({\n  PhotoPicker: ({ onSelect, onClose }: any) => (\n    <div data-testid=\"photo-picker-modal\">\n      <button onClick={() => onSelect(['photo-1', 'photo-2'])}>Select Photos</button>\n      <button onClick={onClose}>Close</button>\n    </div>\n  ),\n}));\n\n// Mock RichTextEditor\njest.mock('./RichTextEditor', () => ({\n  RichTextEditor: ({ value, onChange }: any) => (\n    <textarea\n      data-testid=\"rich-text-editor\"\n      value={value}\n      onChange={(e) => onChange(e.target.value)}\n    />\n  ),\n}));\n\n// Mock PhotoGallerySkeleton\njest.mock('./PhotoGallerySkeleton', () => ({\n  PhotoGallerySkeleton: () => <div data-testid=\"photo-gallery-skeleton\">Loading...</div>,\n}));\n\n// Mock Button component\njest.mock('@/components/ui/Button', () => ({\n  Button: ({ children, onClick, ...props }: any) => (\n    <button onClick={onClick} {...props}>\n      {children}\n    </button>\n  ),\n}));\n\ndescribe('PhotoGalleryPreview', () => {\n  beforeEach(() => {\n    // Reset fetch mock\n    global.fetch = jest.fn();\n    \n    // Mock sections fetch by default (can be overridden in individual tests)\n    (global.fetch as jest.Mock).mockResolvedValue({\n      ok: true,\n      json: async () => ({\n        success: true,\n        data: [],\n      }),\n    });\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Photo Fetching and Display', () => {\n    it('should fetch and display photos with thumbnails and captions', async () => {\n      // Override default mock with sections containing photos\n      (global.fetch as jest.Mock).mockReset();\n      \n      // Mock sections fetch\n      (global.fetch as jest.Mock).mockResolvedValueOnce({\n        ok: true,\n        json: async () => ({\n          success: true,\n          data: [\n            {\n              id: 'section-1',\n              page_type: 'activity',\n              page_id: 'activity-1',\n              title: 'Test Section',\n              column_1_content: 'Content',\n              column_2_content: '',\n              photo_gallery_ids: ['photo-1', 'photo-2'],\n              display_order: 0,\n            },\n          ],\n        }),\n      });\n\n      // Mock photo API responses\n      (global.fetch as jest.Mock)\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({\n            success: true,\n            data: {\n              id: 'photo-1',\n              photo_url: 'https://example.com/photo1.jpg',\n              caption: 'Beautiful sunset',\n            },\n          }),\n        })\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({\n            success: true,\n            data: {\n              id: 'photo-2',\n              photo_url: 'https://example.com/photo2.jpg',\n              caption: 'Mountain view',\n            },\n          }),\n        });\n\n      render(\n        <SectionEditor\n          pageType=\"activity\"\n          pageId=\"activity-1\"\n        />\n      );\n\n      // Wait for photos to load\n      await waitFor(() => {\n        expect(global.fetch).toHaveBeenCalledWith('/api/admin/photos/photo-1');\n        expect(global.fetch).toHaveBeenCalledWith('/api/admin/photos/photo-2');\n      });\n    });\n\n    it('should use photo_url field (not deprecated url field)', async () => {\n      (global.fetch as jest.Mock).mockResolvedValue({\n        ok: true,\n        json: async () => ({\n          success: true,\n          data: {\n            id: 'photo-1',\n            photo_url: 'https://example.com/photo1.jpg',\n            caption: 'Test photo',\n          },\n        }),\n      });\n\n      render(\n        <SectionEditor\n          pageType=\"activity\"\n          pageId=\"activity-1\"\n        />\n      );\n\n      await waitFor(() => {\n        expect(global.fetch).toHaveBeenCalled();\n      });\n\n      // Verify photo_url is used in the response\n      const calls = (global.fetch as jest.Mock).mock.calls;\n      expect(calls.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Display Modes', () => {\n    it('should display \"Gallery Grid\" mode indicator', async () => {\n      (global.fetch as jest.Mock).mockResolvedValue({\n        ok: true,\n        json: async () => ({\n          success: true,\n          data: {\n            id: 'photo-1',\n            photo_url: 'https://example.com/photo1.jpg',\n          },\n        }),\n      });\n\n      render(\n        <SectionEditor\n          pageType=\"activity\"\n          pageId=\"activity-1\"\n        />\n      );\n\n      // Gallery mode is the default\n      await waitFor(() => {\n        const modeText = screen.queryByText(/Display Mode:/i);\n        if (modeText) {\n          expect(modeText).toBeInTheDocument();\n        }\n      });\n    });\n\n    it('should display \"Carousel\" mode indicator', async () => {\n      (global.fetch as jest.Mock).mockResolvedValue({\n        ok: true,\n        json: async () => ({\n          success: true,\n          data: {\n            id: 'photo-1',\n            photo_url: 'https://example.com/photo1.jpg',\n          },\n        }),\n      });\n\n      render(\n        <SectionEditor\n          pageType=\"activity\"\n          pageId=\"activity-1\"\n        />\n      );\n\n      await waitFor(() => {\n        expect(global.fetch).toHaveBeenCalled();\n      });\n    });\n\n    it('should display \"Auto-play Loop\" mode indicator', async () => {\n      (global.fetch as jest.Mock).mockResolvedValue({\n        ok: true,\n        json: async () => ({\n          success: true,\n          data: {\n            id: 'photo-1',\n            photo_url: 'https://example.com/photo1.jpg',\n          },\n        }),\n      });\n\n      render(\n        <SectionEditor\n          pageType=\"activity\"\n          pageId=\"activity-1\"\n        />\n      );\n\n      await waitFor(() => {\n        expect(global.fetch).toHaveBeenCalled();\n      });\n    });\n  });\n\n  describe('Loading States', () => {\n    it('should display skeleton placeholders while loading', async () => {\n      // Mock slow API response\n      (global.fetch as jest.Mock).mockImplementation(\n        () =>\n          new Promise((resolve) =>\n            setTimeout(\n              () =>\n                resolve({\n                  ok: true,\n                  json: async () => ({\n                    success: true,\n                    data: {\n                      id: 'photo-1',\n                      photo_url: 'https://example.com/photo1.jpg',\n                    },\n                  }),\n                }),\n              100\n            )\n          )\n      );\n\n      render(\n        <SectionEditor\n          pageType=\"activity\"\n          pageId=\"activity-1\"\n        />\n      );\n\n      // Should show loading state initially\n      // Note: The skeleton is shown during photo fetch, not component load\n      await waitFor(() => {\n        expect(global.fetch).toHaveBeenCalled();\n      });\n    });\n\n    it('should hide loading state after photos load', async () => {\n      (global.fetch as jest.Mock).mockResolvedValue({\n        ok: true,\n        json: async () => ({\n          success: true,\n          data: {\n            id: 'photo-1',\n            photo_url: 'https://example.com/photo1.jpg',\n          },\n        }),\n      });\n\n      render(\n        <SectionEditor\n          pageType=\"activity\"\n          pageId=\"activity-1\"\n        />\n      );\n\n      await waitFor(() => {\n        expect(global.fetch).toHaveBeenCalled();\n      });\n\n      // Loading state should be gone\n      await waitFor(() => {\n        const skeletons = screen.queryAllByTestId('photo-gallery-skeleton');\n        // Skeleton might still be present for lazy-loaded components\n        expect(skeletons.length).toBeGreaterThanOrEqual(0);\n      });\n    });\n  });\n\n  describe('Error States', () => {\n    it('should handle API errors gracefully', async () => {\n      // Mock API error\n      (global.fetch as jest.Mock).mockRejectedValue(new Error('Network error'));\n\n      const consoleSpy = jest.spyOn(console, 'error').mockImplementation();\n\n      render(\n        <SectionEditor\n          pageType=\"activity\"\n          pageId=\"activity-1\"\n        />\n      );\n\n      await waitFor(() => {\n        expect(global.fetch).toHaveBeenCalled();\n      });\n\n      // Should log error but not crash\n      await waitFor(() => {\n        expect(consoleSpy).toHaveBeenCalledWith(\n          expect.stringContaining('Error fetching'),\n          expect.any(Error)\n        );\n      });\n\n      consoleSpy.mockRestore();\n    });\n\n    it('should handle failed photo fetch (404)', async () => {\n      (global.fetch as jest.Mock).mockResolvedValue({\n        ok: false,\n        status: 404,\n        json: async () => ({\n          success: false,\n          error: { code: 'NOT_FOUND', message: 'Photo not found' },\n        }),\n      });\n\n      render(\n        <SectionEditor\n          pageType=\"activity\"\n          pageId=\"activity-1\"\n        />\n      );\n\n      await waitFor(() => {\n        expect(global.fetch).toHaveBeenCalled();\n      });\n\n      // Should not crash, should filter out failed photos\n      await waitFor(() => {\n        const component = screen.getByTestId('section-editor');\n        expect(component).toBeInTheDocument();\n      }, { timeout: 3000 });\n    });\n\n    it('should filter out null photos from failed requests', async () => {\n      // Mock mixed success/failure responses\n      (global.fetch as jest.Mock)\n        .mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({\n            success: true,\n            data: {\n              id: 'photo-1',\n              photo_url: 'https://example.com/photo1.jpg',\n            },\n          }),\n        })\n        .mockResolvedValueOnce({\n          ok: false,\n          status: 404,\n        });\n\n      render(\n        <SectionEditor\n          pageType=\"activity\"\n          pageId=\"activity-1\"\n        />\n      );\n\n      await waitFor(() => {\n        expect(global.fetch).toHaveBeenCalledTimes(2);\n      });\n\n      // Should only show the successful photo\n      await waitFor(() => {\n        const component = screen.getByTestId('section-editor');\n        expect(component).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Empty State', () => {\n    it('should display \"No photos selected\" when no photos', async () => {\n      render(\n        <SectionEditor\n          pageType=\"activity\"\n          pageId=\"activity-1\"\n        />\n      );\n\n      // Wait for component to render\n      await waitFor(() => {\n        const component = screen.getByTestId('section-editor');\n        expect(component).toBeInTheDocument();\n      });\n\n      // Should show empty state message\n      await waitFor(() => {\n        const emptyMessage = screen.queryByText(/No photos selected/i);\n        if (emptyMessage) {\n          expect(emptyMessage).toBeInTheDocument();\n        }\n      });\n    });\n\n    it('should display empty state when photoIds array is empty', async () => {\n      render(\n        <SectionEditor\n          pageType=\"activity\"\n          pageId=\"activity-1\"\n        />\n      );\n\n      await waitFor(() => {\n        const component = screen.getByTestId('section-editor');\n        expect(component).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Photo Captions', () => {\n    it('should display photo captions when available', async () => {\n      (global.fetch as jest.Mock).mockResolvedValue({\n        ok: true,\n        json: async () => ({\n          success: true,\n          data: {\n            id: 'photo-1',\n            photo_url: 'https://example.com/photo1.jpg',\n            caption: 'Beautiful sunset over the ocean',\n          },\n        }),\n      });\n\n      render(\n        <SectionEditor\n          pageType=\"activity\"\n          pageId=\"activity-1\"\n        />\n      );\n\n      await waitFor(() => {\n        expect(global.fetch).toHaveBeenCalled();\n      });\n    });\n\n    it('should handle photos without captions', async () => {\n      (global.fetch as jest.Mock).mockResolvedValue({\n        ok: true,\n        json: async () => ({\n          success: true,\n          data: {\n            id: 'photo-1',\n            photo_url: 'https://example.com/photo1.jpg',\n            // No caption\n          },\n        }),\n      });\n\n      render(\n        <SectionEditor\n          pageType=\"activity\"\n          pageId=\"activity-1\"\n        />\n      );\n\n      await waitFor(() => {\n        expect(global.fetch).toHaveBeenCalled();\n      });\n\n      // Should not crash without caption\n      await waitFor(() => {\n        const component = screen.getByTestId('section-editor');\n        expect(component).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Integration with SectionEditor', () => {\n    it('should render within section editor', async () => {\n      render(\n        <SectionEditor\n          pageType=\"activity\"\n          pageId=\"activity-1\"\n        />\n      );\n\n      await waitFor(() => {\n        const component = screen.getByTestId('section-editor');\n        expect(component).toBeInTheDocument();\n      });\n    });\n\n    it('should update when photo selection changes', async () => {\n      (global.fetch as jest.Mock).mockResolvedValue({\n        ok: true,\n        json: async () => ({\n          success: true,\n          data: {\n            id: 'photo-1',\n            photo_url: 'https://example.com/photo1.jpg',\n          },\n        }),\n      });\n\n      render(\n        <SectionEditor\n          pageType=\"activity\"\n          pageId=\"activity-1\"\n        />\n      );\n\n      await waitFor(() => {\n        const component = screen.getByTestId('section-editor');\n        expect(component).toBeInTheDocument();\n      });\n    });\n  });\n});\n"],"names":["jest","mock","__esModule","default","src","alt","fill","props","img","fn","Component","then","mod","PhotoPicker","onSelect","onClose","div","data-testid","button","onClick","RichTextEditor","value","onChange","textarea","e","target","PhotoGallerySkeleton","Button","children","describe","beforeEach","global","fetch","mockResolvedValue","ok","json","success","data","afterEach","clearAllMocks","it","mockReset","mockResolvedValueOnce","id","page_type","page_id","title","column_1_content","column_2_content","photo_gallery_ids","display_order","photo_url","caption","render","SectionEditor","pageType","pageId","waitFor","expect","toHaveBeenCalledWith","toHaveBeenCalled","calls","length","toBeGreaterThan","modeText","screen","queryByText","toBeInTheDocument","mockImplementation","Promise","resolve","setTimeout","skeletons","queryAllByTestId","toBeGreaterThanOrEqual","mockRejectedValue","Error","consoleSpy","spyOn","console","stringContaining","any","mockRestore","status","error","code","message","component","getByTestId","timeout","toHaveBeenCalledTimes","emptyMessage"],"mappings":"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"}