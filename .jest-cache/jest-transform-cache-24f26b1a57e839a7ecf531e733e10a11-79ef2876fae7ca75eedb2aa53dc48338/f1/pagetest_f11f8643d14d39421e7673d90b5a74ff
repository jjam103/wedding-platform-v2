5fd9662d07e48b596e641e03b5d0b038
/**
 * Activity Page Route Tests
 * 
 * Validates: Requirements 4.2 (E2E Critical Path Testing - section management flow)
 * 
 * Tests that the activity route:
 * - Exists and renders without 404
 * - Fetches activity data correctly
 * - Displays sections using SectionRenderer
 * - Handles async params (Next.js 15)
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _globals = require("@jest/globals");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Mock Next.js modules
_globals.jest.mock('next/headers', ()=>({
        cookies: _globals.jest.fn(()=>({
                get: _globals.jest.fn(),
                set: _globals.jest.fn(),
                delete: _globals.jest.fn()
            }))
    }));
_globals.jest.mock('next/navigation', ()=>({
        notFound: _globals.jest.fn()
    }));
// Mock Supabase
_globals.jest.mock('@supabase/auth-helpers-nextjs', ()=>({
        createServerComponentClient: _globals.jest.fn(()=>({
                from: _globals.jest.fn(()=>({
                        select: _globals.jest.fn(()=>({
                                eq: _globals.jest.fn(()=>({
                                        single: _globals.jest.fn(()=>Promise.resolve({
                                                data: {
                                                    id: 'activity-1',
                                                    name: 'Beach Volleyball',
                                                    activity_type: 'activity',
                                                    start_time: '2025-06-15T10:00:00Z',
                                                    capacity: 20,
                                                    description: '<p>Fun beach volleyball game</p>',
                                                    events: {
                                                        id: 'event-1',
                                                        name: 'Welcome Day',
                                                        start_date: '2025-06-15',
                                                        end_date: '2025-06-15'
                                                    },
                                                    locations: {
                                                        id: 'location-1',
                                                        name: 'Beach',
                                                        location_type: 'venue'
                                                    }
                                                },
                                                error: null
                                            }))
                                    }))
                            }))
                    }))
            }))
    }));
// Mock sections service
_globals.jest.mock('@/services/sectionsService', ()=>({
        listSections: _globals.jest.fn(()=>Promise.resolve({
                success: true,
                data: [
                    {
                        id: 'section-1',
                        title: 'Activity Details',
                        page_type: 'activity',
                        page_id: 'activity-1',
                        display_order: 1,
                        created_at: '2025-01-01T00:00:00Z',
                        updated_at: '2025-01-01T00:00:00Z',
                        columns: [
                            {
                                id: 'column-1',
                                section_id: 'section-1',
                                column_number: 1,
                                content_type: 'rich_text',
                                content_data: {
                                    html: '<p>Test content</p>'
                                },
                                created_at: '2025-01-01T00:00:00Z',
                                updated_at: '2025-01-01T00:00:00Z'
                            }
                        ]
                    }
                ]
            }))
    }));
// Mock SectionRenderer component
_globals.jest.mock('@/components/guest/SectionRenderer', ()=>({
        SectionRenderer: ({ section })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": `section-${section.id}`,
                children: section.title
            })
    }));
(0, _globals.describe)('Activity Page Route', ()=>{
    (0, _globals.beforeEach)(()=>{
        _globals.jest.clearAllMocks();
    });
    (0, _globals.it)('should exist and be importable', async ()=>{
        const ActivityPage = (await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("./page")))).default;
        (0, _globals.expect)(ActivityPage).toBeDefined();
        (0, _globals.expect)(typeof ActivityPage).toBe('function');
    });
    (0, _globals.it)('should handle async params (Next.js 15 pattern)', async ()=>{
        const ActivityPage = (await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("./page")))).default;
        // Next.js 15: params is a Promise
        const params = Promise.resolve({
            id: 'activity-1'
        });
        // Should not throw when awaiting params
        await (0, _globals.expect)(ActivityPage({
            params
        })).resolves.toBeDefined();
    });
    (0, _globals.it)('should fetch activity data from Supabase', async ()=>{
        const { createServerComponentClient } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("@supabase/auth-helpers-nextjs")));
        const ActivityPage = (await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("./page")))).default;
        const params = Promise.resolve({
            id: 'activity-1'
        });
        await ActivityPage({
            params
        });
        // Verify Supabase client was created
        (0, _globals.expect)(createServerComponentClient).toHaveBeenCalled();
    });
    (0, _globals.it)('should fetch sections for the activity', async ()=>{
        const { listSections } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../../services/sectionsService")));
        const ActivityPage = (await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("./page")))).default;
        const params = Promise.resolve({
            id: 'activity-1'
        });
        await ActivityPage({
            params
        });
        // Verify sections were fetched
        (0, _globals.expect)(listSections).toHaveBeenCalledWith('activity', 'activity-1');
    });
    (0, _globals.it)('should call notFound when activity does not exist', async ()=>{
        const { notFound } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("next/navigation")));
        const { createServerComponentClient } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("@supabase/auth-helpers-nextjs")));
        // Mock activity not found
        createServerComponentClient.mockReturnValueOnce({
            from: _globals.jest.fn(()=>({
                    select: _globals.jest.fn(()=>({
                            eq: _globals.jest.fn(()=>({
                                    single: _globals.jest.fn(()=>Promise.resolve({
                                            data: null,
                                            error: {
                                                message: 'Not found'
                                            }
                                        }))
                                }))
                        }))
                }))
        });
        const ActivityPage = (await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("./page")))).default;
        const params = Promise.resolve({
            id: 'nonexistent'
        });
        await ActivityPage({
            params
        });
        // Verify notFound was called
        (0, _globals.expect)(notFound).toHaveBeenCalled();
    });
    (0, _globals.it)('should render activity information', async ()=>{
        const ActivityPage = (await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("./page")))).default;
        const params = Promise.resolve({
            id: 'activity-1'
        });
        const result = await ActivityPage({
            params
        });
        // Verify result is a React element
        (0, _globals.expect)(result).toBeDefined();
        (0, _globals.expect)(result).toHaveProperty('type');
        (0, _globals.expect)(result).toHaveProperty('props');
    });
    (0, _globals.it)('should use SectionRenderer for sections', async ()=>{
        const { listSections } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../../services/sectionsService")));
        const ActivityPage = (await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("./page")))).default;
        const params = Promise.resolve({
            id: 'activity-1'
        });
        await ActivityPage({
            params
        });
        // Verify sections were fetched (SectionRenderer will be used in render)
        (0, _globals.expect)(listSections).toHaveBeenCalledWith('activity', 'activity-1');
    });
    (0, _globals.it)('should handle empty sections gracefully', async ()=>{
        const { listSections } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../../services/sectionsService")));
        // Mock empty sections
        listSections.mockResolvedValueOnce({
            success: true,
            data: []
        });
        const ActivityPage = (await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("./page")))).default;
        const params = Promise.resolve({
            id: 'activity-1'
        });
        const result = await ActivityPage({
            params
        });
        // Should render without error
        (0, _globals.expect)(result).toBeDefined();
    });
    (0, _globals.it)('should handle sections service error gracefully', async ()=>{
        const { listSections } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../../services/sectionsService")));
        // Mock sections service error
        listSections.mockResolvedValueOnce({
            success: false,
            error: {
                code: 'DATABASE_ERROR',
                message: 'Connection failed'
            }
        });
        const ActivityPage = (await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("./page")))).default;
        const params = Promise.resolve({
            id: 'activity-1'
        });
        const result = await ActivityPage({
            params
        });
        // Should render with empty sections
        (0, _globals.expect)(result).toBeDefined();
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FjdGl2aXR5L1tpZF0vcGFnZS50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEFjdGl2aXR5IFBhZ2UgUm91dGUgVGVzdHNcbiAqIFxuICogVmFsaWRhdGVzOiBSZXF1aXJlbWVudHMgNC4yIChFMkUgQ3JpdGljYWwgUGF0aCBUZXN0aW5nIC0gc2VjdGlvbiBtYW5hZ2VtZW50IGZsb3cpXG4gKiBcbiAqIFRlc3RzIHRoYXQgdGhlIGFjdGl2aXR5IHJvdXRlOlxuICogLSBFeGlzdHMgYW5kIHJlbmRlcnMgd2l0aG91dCA0MDRcbiAqIC0gRmV0Y2hlcyBhY3Rpdml0eSBkYXRhIGNvcnJlY3RseVxuICogLSBEaXNwbGF5cyBzZWN0aW9ucyB1c2luZyBTZWN0aW9uUmVuZGVyZXJcbiAqIC0gSGFuZGxlcyBhc3luYyBwYXJhbXMgKE5leHQuanMgMTUpXG4gKi9cblxuaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QsIGplc3QsIGJlZm9yZUVhY2ggfSBmcm9tICdAamVzdC9nbG9iYWxzJztcblxuLy8gTW9jayBOZXh0LmpzIG1vZHVsZXNcbmplc3QubW9jaygnbmV4dC9oZWFkZXJzJywgKCkgPT4gKHtcbiAgY29va2llczogamVzdC5mbigoKSA9PiAoe1xuICAgIGdldDogamVzdC5mbigpLFxuICAgIHNldDogamVzdC5mbigpLFxuICAgIGRlbGV0ZTogamVzdC5mbigpLFxuICB9KSksXG59KSk7XG5cbmplc3QubW9jaygnbmV4dC9uYXZpZ2F0aW9uJywgKCkgPT4gKHtcbiAgbm90Rm91bmQ6IGplc3QuZm4oKSxcbn0pKTtcblxuLy8gTW9jayBTdXBhYmFzZVxuamVzdC5tb2NrKCdAc3VwYWJhc2UvYXV0aC1oZWxwZXJzLW5leHRqcycsICgpID0+ICh7XG4gIGNyZWF0ZVNlcnZlckNvbXBvbmVudENsaWVudDogamVzdC5mbigoKSA9PiAoe1xuICAgIGZyb206IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgIHNlbGVjdDogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICBlcTogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICAgIHNpbmdsZTogamVzdC5mbigoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBpZDogJ2FjdGl2aXR5LTEnLFxuICAgICAgICAgICAgICBuYW1lOiAnQmVhY2ggVm9sbGV5YmFsbCcsXG4gICAgICAgICAgICAgIGFjdGl2aXR5X3R5cGU6ICdhY3Rpdml0eScsXG4gICAgICAgICAgICAgIHN0YXJ0X3RpbWU6ICcyMDI1LTA2LTE1VDEwOjAwOjAwWicsXG4gICAgICAgICAgICAgIGNhcGFjaXR5OiAyMCxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICc8cD5GdW4gYmVhY2ggdm9sbGV5YmFsbCBnYW1lPC9wPicsXG4gICAgICAgICAgICAgIGV2ZW50czoge1xuICAgICAgICAgICAgICAgIGlkOiAnZXZlbnQtMScsXG4gICAgICAgICAgICAgICAgbmFtZTogJ1dlbGNvbWUgRGF5JyxcbiAgICAgICAgICAgICAgICBzdGFydF9kYXRlOiAnMjAyNS0wNi0xNScsXG4gICAgICAgICAgICAgICAgZW5kX2RhdGU6ICcyMDI1LTA2LTE1JyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgbG9jYXRpb25zOiB7XG4gICAgICAgICAgICAgICAgaWQ6ICdsb2NhdGlvbi0xJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnQmVhY2gnLFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uX3R5cGU6ICd2ZW51ZScsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgfSkpLFxuICAgICAgICB9KSksXG4gICAgICB9KSksXG4gICAgfSkpLFxuICB9KSksXG59KSk7XG5cbi8vIE1vY2sgc2VjdGlvbnMgc2VydmljZVxuamVzdC5tb2NrKCdAL3NlcnZpY2VzL3NlY3Rpb25zU2VydmljZScsICgpID0+ICh7XG4gIGxpc3RTZWN0aW9uczogamVzdC5mbigoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgZGF0YTogW1xuICAgICAge1xuICAgICAgICBpZDogJ3NlY3Rpb24tMScsXG4gICAgICAgIHRpdGxlOiAnQWN0aXZpdHkgRGV0YWlscycsXG4gICAgICAgIHBhZ2VfdHlwZTogJ2FjdGl2aXR5JyxcbiAgICAgICAgcGFnZV9pZDogJ2FjdGl2aXR5LTEnLFxuICAgICAgICBkaXNwbGF5X29yZGVyOiAxLFxuICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgICAgICBjb2x1bW5zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdjb2x1bW4tMScsXG4gICAgICAgICAgICBzZWN0aW9uX2lkOiAnc2VjdGlvbi0xJyxcbiAgICAgICAgICAgIGNvbHVtbl9udW1iZXI6IDEsXG4gICAgICAgICAgICBjb250ZW50X3R5cGU6ICdyaWNoX3RleHQnLFxuICAgICAgICAgICAgY29udGVudF9kYXRhOiB7IGh0bWw6ICc8cD5UZXN0IGNvbnRlbnQ8L3A+JyB9LFxuICAgICAgICAgICAgY3JlYXRlZF9hdDogJzIwMjUtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI1LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgXSxcbiAgfSkpLFxufSkpO1xuXG4vLyBNb2NrIFNlY3Rpb25SZW5kZXJlciBjb21wb25lbnRcbmplc3QubW9jaygnQC9jb21wb25lbnRzL2d1ZXN0L1NlY3Rpb25SZW5kZXJlcicsICgpID0+ICh7XG4gIFNlY3Rpb25SZW5kZXJlcjogKHsgc2VjdGlvbiB9OiBhbnkpID0+IChcbiAgICA8ZGl2IGRhdGEtdGVzdGlkPXtgc2VjdGlvbi0ke3NlY3Rpb24uaWR9YH0+XG4gICAgICB7c2VjdGlvbi50aXRsZX1cbiAgICA8L2Rpdj5cbiAgKSxcbn0pKTtcblxuZGVzY3JpYmUoJ0FjdGl2aXR5IFBhZ2UgUm91dGUnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGV4aXN0IGFuZCBiZSBpbXBvcnRhYmxlJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IEFjdGl2aXR5UGFnZSA9IChhd2FpdCBpbXBvcnQoJy4vcGFnZScpKS5kZWZhdWx0O1xuICAgIGV4cGVjdChBY3Rpdml0eVBhZ2UpLnRvQmVEZWZpbmVkKCk7XG4gICAgZXhwZWN0KHR5cGVvZiBBY3Rpdml0eVBhZ2UpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGFuZGxlIGFzeW5jIHBhcmFtcyAoTmV4dC5qcyAxNSBwYXR0ZXJuKScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBBY3Rpdml0eVBhZ2UgPSAoYXdhaXQgaW1wb3J0KCcuL3BhZ2UnKSkuZGVmYXVsdDtcbiAgICBcbiAgICAvLyBOZXh0LmpzIDE1OiBwYXJhbXMgaXMgYSBQcm9taXNlXG4gICAgY29uc3QgcGFyYW1zID0gUHJvbWlzZS5yZXNvbHZlKHsgaWQ6ICdhY3Rpdml0eS0xJyB9KTtcbiAgICBcbiAgICAvLyBTaG91bGQgbm90IHRocm93IHdoZW4gYXdhaXRpbmcgcGFyYW1zXG4gICAgYXdhaXQgZXhwZWN0KEFjdGl2aXR5UGFnZSh7IHBhcmFtcyB9KSkucmVzb2x2ZXMudG9CZURlZmluZWQoKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBmZXRjaCBhY3Rpdml0eSBkYXRhIGZyb20gU3VwYWJhc2UnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBjcmVhdGVTZXJ2ZXJDb21wb25lbnRDbGllbnQgfSA9IGF3YWl0IGltcG9ydCgnQHN1cGFiYXNlL2F1dGgtaGVscGVycy1uZXh0anMnKTtcbiAgICBjb25zdCBBY3Rpdml0eVBhZ2UgPSAoYXdhaXQgaW1wb3J0KCcuL3BhZ2UnKSkuZGVmYXVsdDtcbiAgICBcbiAgICBjb25zdCBwYXJhbXMgPSBQcm9taXNlLnJlc29sdmUoeyBpZDogJ2FjdGl2aXR5LTEnIH0pO1xuICAgIGF3YWl0IEFjdGl2aXR5UGFnZSh7IHBhcmFtcyB9KTtcbiAgICBcbiAgICAvLyBWZXJpZnkgU3VwYWJhc2UgY2xpZW50IHdhcyBjcmVhdGVkXG4gICAgZXhwZWN0KGNyZWF0ZVNlcnZlckNvbXBvbmVudENsaWVudCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGZldGNoIHNlY3Rpb25zIGZvciB0aGUgYWN0aXZpdHknLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBsaXN0U2VjdGlvbnMgfSA9IGF3YWl0IGltcG9ydCgnQC9zZXJ2aWNlcy9zZWN0aW9uc1NlcnZpY2UnKTtcbiAgICBjb25zdCBBY3Rpdml0eVBhZ2UgPSAoYXdhaXQgaW1wb3J0KCcuL3BhZ2UnKSkuZGVmYXVsdDtcbiAgICBcbiAgICBjb25zdCBwYXJhbXMgPSBQcm9taXNlLnJlc29sdmUoeyBpZDogJ2FjdGl2aXR5LTEnIH0pO1xuICAgIGF3YWl0IEFjdGl2aXR5UGFnZSh7IHBhcmFtcyB9KTtcbiAgICBcbiAgICAvLyBWZXJpZnkgc2VjdGlvbnMgd2VyZSBmZXRjaGVkXG4gICAgZXhwZWN0KGxpc3RTZWN0aW9ucykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2FjdGl2aXR5JywgJ2FjdGl2aXR5LTEnKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBjYWxsIG5vdEZvdW5kIHdoZW4gYWN0aXZpdHkgZG9lcyBub3QgZXhpc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBub3RGb3VuZCB9ID0gYXdhaXQgaW1wb3J0KCduZXh0L25hdmlnYXRpb24nKTtcbiAgICBjb25zdCB7IGNyZWF0ZVNlcnZlckNvbXBvbmVudENsaWVudCB9ID0gYXdhaXQgaW1wb3J0KCdAc3VwYWJhc2UvYXV0aC1oZWxwZXJzLW5leHRqcycpO1xuICAgIFxuICAgIC8vIE1vY2sgYWN0aXZpdHkgbm90IGZvdW5kXG4gICAgKGNyZWF0ZVNlcnZlckNvbXBvbmVudENsaWVudCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZU9uY2Uoe1xuICAgICAgZnJvbTogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICBlcTogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICAgICAgc2luZ2xlOiBqZXN0LmZuKCgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdOb3QgZm91bmQnIH0sXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgfSkpLFxuICAgICAgICB9KSksXG4gICAgICB9KSksXG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgQWN0aXZpdHlQYWdlID0gKGF3YWl0IGltcG9ydCgnLi9wYWdlJykpLmRlZmF1bHQ7XG4gICAgY29uc3QgcGFyYW1zID0gUHJvbWlzZS5yZXNvbHZlKHsgaWQ6ICdub25leGlzdGVudCcgfSk7XG4gICAgXG4gICAgYXdhaXQgQWN0aXZpdHlQYWdlKHsgcGFyYW1zIH0pO1xuICAgIFxuICAgIC8vIFZlcmlmeSBub3RGb3VuZCB3YXMgY2FsbGVkXG4gICAgZXhwZWN0KG5vdEZvdW5kKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVuZGVyIGFjdGl2aXR5IGluZm9ybWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IEFjdGl2aXR5UGFnZSA9IChhd2FpdCBpbXBvcnQoJy4vcGFnZScpKS5kZWZhdWx0O1xuICAgIGNvbnN0IHBhcmFtcyA9IFByb21pc2UucmVzb2x2ZSh7IGlkOiAnYWN0aXZpdHktMScgfSk7XG4gICAgXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQWN0aXZpdHlQYWdlKHsgcGFyYW1zIH0pO1xuICAgIFxuICAgIC8vIFZlcmlmeSByZXN1bHQgaXMgYSBSZWFjdCBlbGVtZW50XG4gICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgndHlwZScpO1xuICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdwcm9wcycpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHVzZSBTZWN0aW9uUmVuZGVyZXIgZm9yIHNlY3Rpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgbGlzdFNlY3Rpb25zIH0gPSBhd2FpdCBpbXBvcnQoJ0Avc2VydmljZXMvc2VjdGlvbnNTZXJ2aWNlJyk7XG4gICAgY29uc3QgQWN0aXZpdHlQYWdlID0gKGF3YWl0IGltcG9ydCgnLi9wYWdlJykpLmRlZmF1bHQ7XG4gICAgXG4gICAgY29uc3QgcGFyYW1zID0gUHJvbWlzZS5yZXNvbHZlKHsgaWQ6ICdhY3Rpdml0eS0xJyB9KTtcbiAgICBhd2FpdCBBY3Rpdml0eVBhZ2UoeyBwYXJhbXMgfSk7XG4gICAgXG4gICAgLy8gVmVyaWZ5IHNlY3Rpb25zIHdlcmUgZmV0Y2hlZCAoU2VjdGlvblJlbmRlcmVyIHdpbGwgYmUgdXNlZCBpbiByZW5kZXIpXG4gICAgZXhwZWN0KGxpc3RTZWN0aW9ucykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2FjdGl2aXR5JywgJ2FjdGl2aXR5LTEnKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgc2VjdGlvbnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IGxpc3RTZWN0aW9ucyB9ID0gYXdhaXQgaW1wb3J0KCdAL3NlcnZpY2VzL3NlY3Rpb25zU2VydmljZScpO1xuICAgIFxuICAgIC8vIE1vY2sgZW1wdHkgc2VjdGlvbnNcbiAgICAobGlzdFNlY3Rpb25zIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBbXSxcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBBY3Rpdml0eVBhZ2UgPSAoYXdhaXQgaW1wb3J0KCcuL3BhZ2UnKSkuZGVmYXVsdDtcbiAgICBjb25zdCBwYXJhbXMgPSBQcm9taXNlLnJlc29sdmUoeyBpZDogJ2FjdGl2aXR5LTEnIH0pO1xuICAgIFxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFjdGl2aXR5UGFnZSh7IHBhcmFtcyB9KTtcbiAgICBcbiAgICAvLyBTaG91bGQgcmVuZGVyIHdpdGhvdXQgZXJyb3JcbiAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhbmRsZSBzZWN0aW9ucyBzZXJ2aWNlIGVycm9yIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBsaXN0U2VjdGlvbnMgfSA9IGF3YWl0IGltcG9ydCgnQC9zZXJ2aWNlcy9zZWN0aW9uc1NlcnZpY2UnKTtcbiAgICBcbiAgICAvLyBNb2NrIHNlY3Rpb25zIHNlcnZpY2UgZXJyb3JcbiAgICAobGlzdFNlY3Rpb25zIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHsgY29kZTogJ0RBVEFCQVNFX0VSUk9SJywgbWVzc2FnZTogJ0Nvbm5lY3Rpb24gZmFpbGVkJyB9LFxuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IEFjdGl2aXR5UGFnZSA9IChhd2FpdCBpbXBvcnQoJy4vcGFnZScpKS5kZWZhdWx0O1xuICAgIGNvbnN0IHBhcmFtcyA9IFByb21pc2UucmVzb2x2ZSh7IGlkOiAnYWN0aXZpdHktMScgfSk7XG4gICAgXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQWN0aXZpdHlQYWdlKHsgcGFyYW1zIH0pO1xuICAgIFxuICAgIC8vIFNob3VsZCByZW5kZXIgd2l0aCBlbXB0eSBzZWN0aW9uc1xuICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJjb29raWVzIiwiZm4iLCJnZXQiLCJzZXQiLCJkZWxldGUiLCJub3RGb3VuZCIsImNyZWF0ZVNlcnZlckNvbXBvbmVudENsaWVudCIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiZGF0YSIsImlkIiwibmFtZSIsImFjdGl2aXR5X3R5cGUiLCJzdGFydF90aW1lIiwiY2FwYWNpdHkiLCJkZXNjcmlwdGlvbiIsImV2ZW50cyIsInN0YXJ0X2RhdGUiLCJlbmRfZGF0ZSIsImxvY2F0aW9ucyIsImxvY2F0aW9uX3R5cGUiLCJlcnJvciIsImxpc3RTZWN0aW9ucyIsInN1Y2Nlc3MiLCJ0aXRsZSIsInBhZ2VfdHlwZSIsInBhZ2VfaWQiLCJkaXNwbGF5X29yZGVyIiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRfYXQiLCJjb2x1bW5zIiwic2VjdGlvbl9pZCIsImNvbHVtbl9udW1iZXIiLCJjb250ZW50X3R5cGUiLCJjb250ZW50X2RhdGEiLCJodG1sIiwiU2VjdGlvblJlbmRlcmVyIiwic2VjdGlvbiIsImRpdiIsImRhdGEtdGVzdGlkIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIml0IiwiQWN0aXZpdHlQYWdlIiwiZGVmYXVsdCIsImV4cGVjdCIsInRvQmVEZWZpbmVkIiwidG9CZSIsInBhcmFtcyIsInJlc29sdmVzIiwidG9IYXZlQmVlbkNhbGxlZCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwibW9ja1JldHVyblZhbHVlT25jZSIsIm1lc3NhZ2UiLCJyZXN1bHQiLCJ0b0hhdmVQcm9wZXJ0eSIsIm1vY2tSZXNvbHZlZFZhbHVlT25jZSIsImNvZGUiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7O0NBVUM7Ozs7O3lCQUVzRDs7Ozs7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