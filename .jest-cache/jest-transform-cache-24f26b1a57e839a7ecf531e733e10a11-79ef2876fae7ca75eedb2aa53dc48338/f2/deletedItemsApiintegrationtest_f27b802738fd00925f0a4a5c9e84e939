924603b1541f6263302704b744e9d0e6
/**
 * Integration Tests: Deleted Items API
 * 
 * Tests deleted items API routes with real database operations.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _supabasejs = require("@supabase/supabase-js");
const _contentPagesService = require("../../services/contentPagesService");
const _eventService = require("../../services/eventService");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const supabase = (0, _supabasejs.createClient)(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY);
describe('Deleted Items API Integration Tests', ()=>{
    beforeEach(async ()=>{
        // Clean up test data
        await supabase.from('activities').delete().neq('id', '00000000-0000-0000-0000-000000000000');
        await supabase.from('events').delete().neq('id', '00000000-0000-0000-0000-000000000000');
        await supabase.from('content_pages').delete().neq('id', '00000000-0000-0000-0000-000000000000');
    });
    afterAll(async ()=>{
        // Final cleanup
        await supabase.from('activities').delete().neq('id', '00000000-0000-0000-0000-000000000000');
        await supabase.from('events').delete().neq('id', '00000000-0000-0000-0000-000000000000');
        await supabase.from('content_pages').delete().neq('id', '00000000-0000-0000-0000-000000000000');
    });
    describe('GET /api/admin/deleted-items', ()=>{
        it('should return all soft-deleted items', async ()=>{
            // Create and soft delete items
            const pageResult = await (0, _contentPagesService.createContentPage)({
                title: 'Test Page',
                status: 'draft'
            });
            expect(pageResult.success).toBe(true);
            if (!pageResult.success) return;
            await (0, _contentPagesService.deleteContentPage)(pageResult.data.id, {
                permanent: false
            });
            const eventResult = await (0, _eventService.create)({
                name: 'Test Event',
                date: new Date().toISOString().split('T')[0]
            });
            expect(eventResult.success).toBe(true);
            if (!eventResult.success) return;
            await (0, _eventService.deleteEvent)(eventResult.data.id, {
                permanent: false
            });
            // Query deleted items
            const { data: pages } = await supabase.from('content_pages').select('id, title, deleted_at').not('deleted_at', 'is', null);
            const { data: events } = await supabase.from('events').select('id, name, deleted_at').not('deleted_at', 'is', null);
            expect(pages).toHaveLength(1);
            expect(events).toHaveLength(1);
            expect(pages?.[0].title).toBe('Test Page');
            expect(events?.[0].name).toBe('Test Event');
            // Cleanup
            await (0, _contentPagesService.deleteContentPage)(pageResult.data.id, {
                permanent: true
            });
            await (0, _eventService.deleteEvent)(eventResult.data.id, {
                permanent: true
            });
        });
        it('should filter deleted items by type', async ()=>{
            // Create and soft delete items
            const pageResult = await (0, _contentPagesService.createContentPage)({
                title: 'Test Page',
                status: 'draft'
            });
            expect(pageResult.success).toBe(true);
            if (!pageResult.success) return;
            await (0, _contentPagesService.deleteContentPage)(pageResult.data.id, {
                permanent: false
            });
            const eventResult = await (0, _eventService.create)({
                name: 'Test Event',
                date: new Date().toISOString().split('T')[0]
            });
            expect(eventResult.success).toBe(true);
            if (!eventResult.success) return;
            await (0, _eventService.deleteEvent)(eventResult.data.id, {
                permanent: false
            });
            // Query only content pages
            const { data: pages } = await supabase.from('content_pages').select('id, title, deleted_at').not('deleted_at', 'is', null);
            expect(pages).toHaveLength(1);
            expect(pages?.[0].title).toBe('Test Page');
            // Cleanup
            await (0, _contentPagesService.deleteContentPage)(pageResult.data.id, {
                permanent: true
            });
            await (0, _eventService.deleteEvent)(eventResult.data.id, {
                permanent: true
            });
        });
    });
    describe('POST /api/admin/deleted-items/[id]/restore', ()=>{
        it('should restore soft-deleted content page', async ()=>{
            // Create and soft delete
            const createResult = await (0, _contentPagesService.createContentPage)({
                title: 'Test Page',
                status: 'draft'
            });
            expect(createResult.success).toBe(true);
            if (!createResult.success) return;
            const pageId = createResult.data.id;
            await (0, _contentPagesService.deleteContentPage)(pageId, {
                permanent: false
            });
            // Verify soft deleted
            const { data: deletedPage } = await supabase.from('content_pages').select('deleted_at').eq('id', pageId).single();
            expect(deletedPage?.deleted_at).not.toBeNull();
            // Restore via service (simulating API call)
            const { restoreContentPage } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../services/contentPagesService")));
            const restoreResult = await restoreContentPage(pageId);
            expect(restoreResult.success).toBe(true);
            // Verify restored
            const { data: restoredPage } = await supabase.from('content_pages').select('deleted_at').eq('id', pageId).single();
            expect(restoredPage?.deleted_at).toBeNull();
            // Cleanup
            await (0, _contentPagesService.deleteContentPage)(pageId, {
                permanent: true
            });
        });
        it('should restore soft-deleted event', async ()=>{
            // Create and soft delete
            const createResult = await (0, _eventService.create)({
                name: 'Test Event',
                date: new Date().toISOString().split('T')[0]
            });
            expect(createResult.success).toBe(true);
            if (!createResult.success) return;
            const eventId = createResult.data.id;
            await (0, _eventService.deleteEvent)(eventId, {
                permanent: false
            });
            // Verify soft deleted
            const { data: deletedEvent } = await supabase.from('events').select('deleted_at').eq('id', eventId).single();
            expect(deletedEvent?.deleted_at).not.toBeNull();
            // Restore via service (simulating API call)
            const { restoreEvent } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../services/eventService")));
            const restoreResult = await restoreEvent(eventId);
            expect(restoreResult.success).toBe(true);
            // Verify restored
            const { data: restoredEvent } = await supabase.from('events').select('deleted_at').eq('id', eventId).single();
            expect(restoredEvent?.deleted_at).toBeNull();
            // Cleanup
            await (0, _eventService.deleteEvent)(eventId, {
                permanent: true
            });
        });
    });
    describe('DELETE /api/admin/deleted-items/[id]/permanent', ()=>{
        it('should permanently delete soft-deleted content page', async ()=>{
            // Create and soft delete
            const createResult = await (0, _contentPagesService.createContentPage)({
                title: 'Test Page',
                status: 'draft'
            });
            expect(createResult.success).toBe(true);
            if (!createResult.success) return;
            const pageId = createResult.data.id;
            await (0, _contentPagesService.deleteContentPage)(pageId, {
                permanent: false
            });
            // Verify soft deleted
            const { data: deletedPage } = await supabase.from('content_pages').select('id').eq('id', pageId).single();
            expect(deletedPage).not.toBeNull();
            // Permanently delete
            await (0, _contentPagesService.deleteContentPage)(pageId, {
                permanent: true
            });
            // Verify permanently deleted
            const { data: permanentlyDeleted } = await supabase.from('content_pages').select('id').eq('id', pageId).single();
            expect(permanentlyDeleted).toBeNull();
        });
        it('should permanently delete soft-deleted event', async ()=>{
            // Create and soft delete
            const createResult = await (0, _eventService.create)({
                name: 'Test Event',
                date: new Date().toISOString().split('T')[0]
            });
            expect(createResult.success).toBe(true);
            if (!createResult.success) return;
            const eventId = createResult.data.id;
            await (0, _eventService.deleteEvent)(eventId, {
                permanent: false
            });
            // Verify soft deleted
            const { data: deletedEvent } = await supabase.from('events').select('id').eq('id', eventId).single();
            expect(deletedEvent).not.toBeNull();
            // Permanently delete
            await (0, _eventService.deleteEvent)(eventId, {
                permanent: true
            });
            // Verify permanently deleted
            const { data: permanentlyDeleted } = await supabase.from('events').select('id').eq('id', eventId).single();
            expect(permanentlyDeleted).toBeNull();
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvX190ZXN0c19fL2ludGVncmF0aW9uL2RlbGV0ZWRJdGVtc0FwaS5pbnRlZ3JhdGlvbi50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSW50ZWdyYXRpb24gVGVzdHM6IERlbGV0ZWQgSXRlbXMgQVBJXG4gKiBcbiAqIFRlc3RzIGRlbGV0ZWQgaXRlbXMgQVBJIHJvdXRlcyB3aXRoIHJlYWwgZGF0YWJhc2Ugb3BlcmF0aW9ucy5cbiAqL1xuXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuaW1wb3J0IHsgY3JlYXRlQ29udGVudFBhZ2UsIGRlbGV0ZUNvbnRlbnRQYWdlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvY29udGVudFBhZ2VzU2VydmljZSc7XG5pbXBvcnQgeyBjcmVhdGUgYXMgY3JlYXRlRXZlbnQsIGRlbGV0ZUV2ZW50IH0gZnJvbSAnLi4vLi4vc2VydmljZXMvZXZlbnRTZXJ2aWNlJztcbmltcG9ydCB7IGNyZWF0ZSBhcyBjcmVhdGVBY3Rpdml0eSwgZGVsZXRlQWN0aXZpdHkgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9hY3Rpdml0eVNlcnZpY2UnO1xuXG5jb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChcbiAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMISxcbiAgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSFcbik7XG5cbmRlc2NyaWJlKCdEZWxldGVkIEl0ZW1zIEFQSSBJbnRlZ3JhdGlvbiBUZXN0cycsICgpID0+IHtcbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgLy8gQ2xlYW4gdXAgdGVzdCBkYXRhXG4gICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnYWN0aXZpdGllcycpLmRlbGV0ZSgpLm5lcSgnaWQnLCAnMDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwJyk7XG4gICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnZXZlbnRzJykuZGVsZXRlKCkubmVxKCdpZCcsICcwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAnKTtcbiAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdjb250ZW50X3BhZ2VzJykuZGVsZXRlKCkubmVxKCdpZCcsICcwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAnKTtcbiAgfSk7XG5cbiAgYWZ0ZXJBbGwoYXN5bmMgKCkgPT4ge1xuICAgIC8vIEZpbmFsIGNsZWFudXBcbiAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdhY3Rpdml0aWVzJykuZGVsZXRlKCkubmVxKCdpZCcsICcwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAnKTtcbiAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdldmVudHMnKS5kZWxldGUoKS5uZXEoJ2lkJywgJzAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCcpO1xuICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oJ2NvbnRlbnRfcGFnZXMnKS5kZWxldGUoKS5uZXEoJ2lkJywgJzAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCcpO1xuICB9KTtcblxuICBkZXNjcmliZSgnR0VUIC9hcGkvYWRtaW4vZGVsZXRlZC1pdGVtcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBhbGwgc29mdC1kZWxldGVkIGl0ZW1zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGFuZCBzb2Z0IGRlbGV0ZSBpdGVtc1xuICAgICAgY29uc3QgcGFnZVJlc3VsdCA9IGF3YWl0IGNyZWF0ZUNvbnRlbnRQYWdlKHtcbiAgICAgICAgdGl0bGU6ICdUZXN0IFBhZ2UnLFxuICAgICAgICBzdGF0dXM6ICdkcmFmdCcsXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChwYWdlUmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAoIXBhZ2VSZXN1bHQuc3VjY2VzcykgcmV0dXJuO1xuXG4gICAgICBhd2FpdCBkZWxldGVDb250ZW50UGFnZShwYWdlUmVzdWx0LmRhdGEuaWQsIHsgcGVybWFuZW50OiBmYWxzZSB9KTtcblxuICAgICAgY29uc3QgZXZlbnRSZXN1bHQgPSBhd2FpdCBjcmVhdGVFdmVudCh7XG4gICAgICAgIG5hbWU6ICdUZXN0IEV2ZW50JyxcbiAgICAgICAgZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChldmVudFJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKCFldmVudFJlc3VsdC5zdWNjZXNzKSByZXR1cm47XG5cbiAgICAgIGF3YWl0IGRlbGV0ZUV2ZW50KGV2ZW50UmVzdWx0LmRhdGEuaWQsIHsgcGVybWFuZW50OiBmYWxzZSB9KTtcblxuICAgICAgLy8gUXVlcnkgZGVsZXRlZCBpdGVtc1xuICAgICAgY29uc3QgeyBkYXRhOiBwYWdlcyB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2NvbnRlbnRfcGFnZXMnKVxuICAgICAgICAuc2VsZWN0KCdpZCwgdGl0bGUsIGRlbGV0ZWRfYXQnKVxuICAgICAgICAubm90KCdkZWxldGVkX2F0JywgJ2lzJywgbnVsbCk7XG5cbiAgICAgIGNvbnN0IHsgZGF0YTogZXZlbnRzIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnZXZlbnRzJylcbiAgICAgICAgLnNlbGVjdCgnaWQsIG5hbWUsIGRlbGV0ZWRfYXQnKVxuICAgICAgICAubm90KCdkZWxldGVkX2F0JywgJ2lzJywgbnVsbCk7XG5cbiAgICAgIGV4cGVjdChwYWdlcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KGV2ZW50cykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHBhZ2VzPy5bMF0udGl0bGUpLnRvQmUoJ1Rlc3QgUGFnZScpO1xuICAgICAgZXhwZWN0KGV2ZW50cz8uWzBdLm5hbWUpLnRvQmUoJ1Rlc3QgRXZlbnQnKTtcblxuICAgICAgLy8gQ2xlYW51cFxuICAgICAgYXdhaXQgZGVsZXRlQ29udGVudFBhZ2UocGFnZVJlc3VsdC5kYXRhLmlkLCB7IHBlcm1hbmVudDogdHJ1ZSB9KTtcbiAgICAgIGF3YWl0IGRlbGV0ZUV2ZW50KGV2ZW50UmVzdWx0LmRhdGEuaWQsIHsgcGVybWFuZW50OiB0cnVlIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmaWx0ZXIgZGVsZXRlZCBpdGVtcyBieSB0eXBlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGFuZCBzb2Z0IGRlbGV0ZSBpdGVtc1xuICAgICAgY29uc3QgcGFnZVJlc3VsdCA9IGF3YWl0IGNyZWF0ZUNvbnRlbnRQYWdlKHtcbiAgICAgICAgdGl0bGU6ICdUZXN0IFBhZ2UnLFxuICAgICAgICBzdGF0dXM6ICdkcmFmdCcsXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChwYWdlUmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBpZiAoIXBhZ2VSZXN1bHQuc3VjY2VzcykgcmV0dXJuO1xuXG4gICAgICBhd2FpdCBkZWxldGVDb250ZW50UGFnZShwYWdlUmVzdWx0LmRhdGEuaWQsIHsgcGVybWFuZW50OiBmYWxzZSB9KTtcblxuICAgICAgY29uc3QgZXZlbnRSZXN1bHQgPSBhd2FpdCBjcmVhdGVFdmVudCh7XG4gICAgICAgIG5hbWU6ICdUZXN0IEV2ZW50JyxcbiAgICAgICAgZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChldmVudFJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKCFldmVudFJlc3VsdC5zdWNjZXNzKSByZXR1cm47XG5cbiAgICAgIGF3YWl0IGRlbGV0ZUV2ZW50KGV2ZW50UmVzdWx0LmRhdGEuaWQsIHsgcGVybWFuZW50OiBmYWxzZSB9KTtcblxuICAgICAgLy8gUXVlcnkgb25seSBjb250ZW50IHBhZ2VzXG4gICAgICBjb25zdCB7IGRhdGE6IHBhZ2VzIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnY29udGVudF9wYWdlcycpXG4gICAgICAgIC5zZWxlY3QoJ2lkLCB0aXRsZSwgZGVsZXRlZF9hdCcpXG4gICAgICAgIC5ub3QoJ2RlbGV0ZWRfYXQnLCAnaXMnLCBudWxsKTtcblxuICAgICAgZXhwZWN0KHBhZ2VzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QocGFnZXM/LlswXS50aXRsZSkudG9CZSgnVGVzdCBQYWdlJyk7XG5cbiAgICAgIC8vIENsZWFudXBcbiAgICAgIGF3YWl0IGRlbGV0ZUNvbnRlbnRQYWdlKHBhZ2VSZXN1bHQuZGF0YS5pZCwgeyBwZXJtYW5lbnQ6IHRydWUgfSk7XG4gICAgICBhd2FpdCBkZWxldGVFdmVudChldmVudFJlc3VsdC5kYXRhLmlkLCB7IHBlcm1hbmVudDogdHJ1ZSB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BPU1QgL2FwaS9hZG1pbi9kZWxldGVkLWl0ZW1zL1tpZF0vcmVzdG9yZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlc3RvcmUgc29mdC1kZWxldGVkIGNvbnRlbnQgcGFnZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBhbmQgc29mdCBkZWxldGVcbiAgICAgIGNvbnN0IGNyZWF0ZVJlc3VsdCA9IGF3YWl0IGNyZWF0ZUNvbnRlbnRQYWdlKHtcbiAgICAgICAgdGl0bGU6ICdUZXN0IFBhZ2UnLFxuICAgICAgICBzdGF0dXM6ICdkcmFmdCcsXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChjcmVhdGVSZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGlmICghY3JlYXRlUmVzdWx0LnN1Y2Nlc3MpIHJldHVybjtcblxuICAgICAgY29uc3QgcGFnZUlkID0gY3JlYXRlUmVzdWx0LmRhdGEuaWQ7XG4gICAgICBhd2FpdCBkZWxldGVDb250ZW50UGFnZShwYWdlSWQsIHsgcGVybWFuZW50OiBmYWxzZSB9KTtcblxuICAgICAgLy8gVmVyaWZ5IHNvZnQgZGVsZXRlZFxuICAgICAgY29uc3QgeyBkYXRhOiBkZWxldGVkUGFnZSB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2NvbnRlbnRfcGFnZXMnKVxuICAgICAgICAuc2VsZWN0KCdkZWxldGVkX2F0JylcbiAgICAgICAgLmVxKCdpZCcsIHBhZ2VJZClcbiAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICBleHBlY3QoZGVsZXRlZFBhZ2U/LmRlbGV0ZWRfYXQpLm5vdC50b0JlTnVsbCgpO1xuXG4gICAgICAvLyBSZXN0b3JlIHZpYSBzZXJ2aWNlIChzaW11bGF0aW5nIEFQSSBjYWxsKVxuICAgICAgY29uc3QgeyByZXN0b3JlQ29udGVudFBhZ2UgfSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vc2VydmljZXMvY29udGVudFBhZ2VzU2VydmljZScpO1xuICAgICAgY29uc3QgcmVzdG9yZVJlc3VsdCA9IGF3YWl0IHJlc3RvcmVDb250ZW50UGFnZShwYWdlSWQpO1xuICAgICAgZXhwZWN0KHJlc3RvcmVSZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcblxuICAgICAgLy8gVmVyaWZ5IHJlc3RvcmVkXG4gICAgICBjb25zdCB7IGRhdGE6IHJlc3RvcmVkUGFnZSB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2NvbnRlbnRfcGFnZXMnKVxuICAgICAgICAuc2VsZWN0KCdkZWxldGVkX2F0JylcbiAgICAgICAgLmVxKCdpZCcsIHBhZ2VJZClcbiAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICBleHBlY3QocmVzdG9yZWRQYWdlPy5kZWxldGVkX2F0KS50b0JlTnVsbCgpO1xuXG4gICAgICAvLyBDbGVhbnVwXG4gICAgICBhd2FpdCBkZWxldGVDb250ZW50UGFnZShwYWdlSWQsIHsgcGVybWFuZW50OiB0cnVlIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXN0b3JlIHNvZnQtZGVsZXRlZCBldmVudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBhbmQgc29mdCBkZWxldGVcbiAgICAgIGNvbnN0IGNyZWF0ZVJlc3VsdCA9IGF3YWl0IGNyZWF0ZUV2ZW50KHtcbiAgICAgICAgbmFtZTogJ1Rlc3QgRXZlbnQnLFxuICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KGNyZWF0ZVJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKCFjcmVhdGVSZXN1bHQuc3VjY2VzcykgcmV0dXJuO1xuXG4gICAgICBjb25zdCBldmVudElkID0gY3JlYXRlUmVzdWx0LmRhdGEuaWQ7XG4gICAgICBhd2FpdCBkZWxldGVFdmVudChldmVudElkLCB7IHBlcm1hbmVudDogZmFsc2UgfSk7XG5cbiAgICAgIC8vIFZlcmlmeSBzb2Z0IGRlbGV0ZWRcbiAgICAgIGNvbnN0IHsgZGF0YTogZGVsZXRlZEV2ZW50IH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnZXZlbnRzJylcbiAgICAgICAgLnNlbGVjdCgnZGVsZXRlZF9hdCcpXG4gICAgICAgIC5lcSgnaWQnLCBldmVudElkKVxuICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgIGV4cGVjdChkZWxldGVkRXZlbnQ/LmRlbGV0ZWRfYXQpLm5vdC50b0JlTnVsbCgpO1xuXG4gICAgICAvLyBSZXN0b3JlIHZpYSBzZXJ2aWNlIChzaW11bGF0aW5nIEFQSSBjYWxsKVxuICAgICAgY29uc3QgeyByZXN0b3JlRXZlbnQgfSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vc2VydmljZXMvZXZlbnRTZXJ2aWNlJyk7XG4gICAgICBjb25zdCByZXN0b3JlUmVzdWx0ID0gYXdhaXQgcmVzdG9yZUV2ZW50KGV2ZW50SWQpO1xuICAgICAgZXhwZWN0KHJlc3RvcmVSZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcblxuICAgICAgLy8gVmVyaWZ5IHJlc3RvcmVkXG4gICAgICBjb25zdCB7IGRhdGE6IHJlc3RvcmVkRXZlbnQgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdldmVudHMnKVxuICAgICAgICAuc2VsZWN0KCdkZWxldGVkX2F0JylcbiAgICAgICAgLmVxKCdpZCcsIGV2ZW50SWQpXG4gICAgICAgIC5zaW5nbGUoKTtcblxuICAgICAgZXhwZWN0KHJlc3RvcmVkRXZlbnQ/LmRlbGV0ZWRfYXQpLnRvQmVOdWxsKCk7XG5cbiAgICAgIC8vIENsZWFudXBcbiAgICAgIGF3YWl0IGRlbGV0ZUV2ZW50KGV2ZW50SWQsIHsgcGVybWFuZW50OiB0cnVlIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnREVMRVRFIC9hcGkvYWRtaW4vZGVsZXRlZC1pdGVtcy9baWRdL3Blcm1hbmVudCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHBlcm1hbmVudGx5IGRlbGV0ZSBzb2Z0LWRlbGV0ZWQgY29udGVudCBwYWdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGFuZCBzb2Z0IGRlbGV0ZVxuICAgICAgY29uc3QgY3JlYXRlUmVzdWx0ID0gYXdhaXQgY3JlYXRlQ29udGVudFBhZ2Uoe1xuICAgICAgICB0aXRsZTogJ1Rlc3QgUGFnZScsXG4gICAgICAgIHN0YXR1czogJ2RyYWZ0JyxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KGNyZWF0ZVJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKCFjcmVhdGVSZXN1bHQuc3VjY2VzcykgcmV0dXJuO1xuXG4gICAgICBjb25zdCBwYWdlSWQgPSBjcmVhdGVSZXN1bHQuZGF0YS5pZDtcbiAgICAgIGF3YWl0IGRlbGV0ZUNvbnRlbnRQYWdlKHBhZ2VJZCwgeyBwZXJtYW5lbnQ6IGZhbHNlIH0pO1xuXG4gICAgICAvLyBWZXJpZnkgc29mdCBkZWxldGVkXG4gICAgICBjb25zdCB7IGRhdGE6IGRlbGV0ZWRQYWdlIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnY29udGVudF9wYWdlcycpXG4gICAgICAgIC5zZWxlY3QoJ2lkJylcbiAgICAgICAgLmVxKCdpZCcsIHBhZ2VJZClcbiAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICBleHBlY3QoZGVsZXRlZFBhZ2UpLm5vdC50b0JlTnVsbCgpO1xuXG4gICAgICAvLyBQZXJtYW5lbnRseSBkZWxldGVcbiAgICAgIGF3YWl0IGRlbGV0ZUNvbnRlbnRQYWdlKHBhZ2VJZCwgeyBwZXJtYW5lbnQ6IHRydWUgfSk7XG5cbiAgICAgIC8vIFZlcmlmeSBwZXJtYW5lbnRseSBkZWxldGVkXG4gICAgICBjb25zdCB7IGRhdGE6IHBlcm1hbmVudGx5RGVsZXRlZCB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2NvbnRlbnRfcGFnZXMnKVxuICAgICAgICAuc2VsZWN0KCdpZCcpXG4gICAgICAgIC5lcSgnaWQnLCBwYWdlSWQpXG4gICAgICAgIC5zaW5nbGUoKTtcblxuICAgICAgZXhwZWN0KHBlcm1hbmVudGx5RGVsZXRlZCkudG9CZU51bGwoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcGVybWFuZW50bHkgZGVsZXRlIHNvZnQtZGVsZXRlZCBldmVudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBhbmQgc29mdCBkZWxldGVcbiAgICAgIGNvbnN0IGNyZWF0ZVJlc3VsdCA9IGF3YWl0IGNyZWF0ZUV2ZW50KHtcbiAgICAgICAgbmFtZTogJ1Rlc3QgRXZlbnQnLFxuICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KGNyZWF0ZVJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKCFjcmVhdGVSZXN1bHQuc3VjY2VzcykgcmV0dXJuO1xuXG4gICAgICBjb25zdCBldmVudElkID0gY3JlYXRlUmVzdWx0LmRhdGEuaWQ7XG4gICAgICBhd2FpdCBkZWxldGVFdmVudChldmVudElkLCB7IHBlcm1hbmVudDogZmFsc2UgfSk7XG5cbiAgICAgIC8vIFZlcmlmeSBzb2Z0IGRlbGV0ZWRcbiAgICAgIGNvbnN0IHsgZGF0YTogZGVsZXRlZEV2ZW50IH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnZXZlbnRzJylcbiAgICAgICAgLnNlbGVjdCgnaWQnKVxuICAgICAgICAuZXEoJ2lkJywgZXZlbnRJZClcbiAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICBleHBlY3QoZGVsZXRlZEV2ZW50KS5ub3QudG9CZU51bGwoKTtcblxuICAgICAgLy8gUGVybWFuZW50bHkgZGVsZXRlXG4gICAgICBhd2FpdCBkZWxldGVFdmVudChldmVudElkLCB7IHBlcm1hbmVudDogdHJ1ZSB9KTtcblxuICAgICAgLy8gVmVyaWZ5IHBlcm1hbmVudGx5IGRlbGV0ZWRcbiAgICAgIGNvbnN0IHsgZGF0YTogcGVybWFuZW50bHlEZWxldGVkIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnZXZlbnRzJylcbiAgICAgICAgLnNlbGVjdCgnaWQnKVxuICAgICAgICAuZXEoJ2lkJywgZXZlbnRJZClcbiAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICBleHBlY3QocGVybWFuZW50bHlEZWxldGVkKS50b0JlTnVsbCgpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbInN1cGFiYXNlIiwiY3JlYXRlQ2xpZW50IiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJmcm9tIiwiZGVsZXRlIiwibmVxIiwiYWZ0ZXJBbGwiLCJpdCIsInBhZ2VSZXN1bHQiLCJjcmVhdGVDb250ZW50UGFnZSIsInRpdGxlIiwic3RhdHVzIiwiZXhwZWN0Iiwic3VjY2VzcyIsInRvQmUiLCJkZWxldGVDb250ZW50UGFnZSIsImRhdGEiLCJpZCIsInBlcm1hbmVudCIsImV2ZW50UmVzdWx0IiwiY3JlYXRlRXZlbnQiLCJuYW1lIiwiZGF0ZSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwiZGVsZXRlRXZlbnQiLCJwYWdlcyIsInNlbGVjdCIsIm5vdCIsImV2ZW50cyIsInRvSGF2ZUxlbmd0aCIsImNyZWF0ZVJlc3VsdCIsInBhZ2VJZCIsImRlbGV0ZWRQYWdlIiwiZXEiLCJzaW5nbGUiLCJkZWxldGVkX2F0IiwidG9CZU51bGwiLCJyZXN0b3JlQ29udGVudFBhZ2UiLCJyZXN0b3JlUmVzdWx0IiwicmVzdG9yZWRQYWdlIiwiZXZlbnRJZCIsImRlbGV0ZWRFdmVudCIsInJlc3RvcmVFdmVudCIsInJlc3RvcmVkRXZlbnQiLCJwZXJtYW5lbnRseURlbGV0ZWQiXSwibWFwcGluZ3MiOiJBQUFBOzs7O0NBSUM7Ozs7NEJBRTRCO3FDQUN3Qjs4QkFDRjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR25ELE1BQU1BLFdBQVdDLElBQUFBLHdCQUFZLEVBQzNCQyxRQUFRQyxHQUFHLENBQUNDLHdCQUF3QixFQUNwQ0YsUUFBUUMsR0FBRyxDQUFDRSx5QkFBeUI7QUFHdkNDLFNBQVMsdUNBQXVDO0lBQzlDQyxXQUFXO1FBQ1QscUJBQXFCO1FBQ3JCLE1BQU1QLFNBQVNRLElBQUksQ0FBQyxjQUFjQyxNQUFNLEdBQUdDLEdBQUcsQ0FBQyxNQUFNO1FBQ3JELE1BQU1WLFNBQVNRLElBQUksQ0FBQyxVQUFVQyxNQUFNLEdBQUdDLEdBQUcsQ0FBQyxNQUFNO1FBQ2pELE1BQU1WLFNBQVNRLElBQUksQ0FBQyxpQkFBaUJDLE1BQU0sR0FBR0MsR0FBRyxDQUFDLE1BQU07SUFDMUQ7SUFFQUMsU0FBUztRQUNQLGdCQUFnQjtRQUNoQixNQUFNWCxTQUFTUSxJQUFJLENBQUMsY0FBY0MsTUFBTSxHQUFHQyxHQUFHLENBQUMsTUFBTTtRQUNyRCxNQUFNVixTQUFTUSxJQUFJLENBQUMs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