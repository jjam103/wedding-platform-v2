da837859bfdda381065194f63238f3d6
"use strict";
// Mock dependencies
jest.mock('next/navigation', ()=>({
        useRouter: jest.fn(),
        useSearchParams: jest.fn(()=>({
                get: jest.fn()
            }))
    }));
jest.mock('@/components/ui/ToastContext', ()=>({
        useToast: ()=>({
                addToast: jest.fn()
            })
    }));
// Mock DataTable components
jest.mock('@/components/ui/DataTable', ()=>({
        DataTable: ({ data, columns, loading, onRowClick, onDelete })=>{
            if (loading) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "Loading..."
            });
            if (data.length === 0) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "No items found"
            });
            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "data-table",
                children: data.map((item, index)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        "data-testid": `accommodation-row-${item.id}`,
                        onClick: ()=>onRowClick && onRowClick(item),
                        style: {
                            cursor: onRowClick ? 'pointer' : 'default'
                        },
                        children: [
                            columns.map((col)=>{
                                const value = item[col.key];
                                const displayValue = col.render ? col.render(value, item) : value;
                                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                    "data-testid": `${col.key}-${item.id}`,
                                    children: displayValue
                                }, col.key);
                            }),
                            onDelete && /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                onClick: (e)=>{
                                    e.stopPropagation();
                                    onDelete(item);
                                },
                                "aria-label": "Delete",
                                children: "Delete"
                            })
                        ]
                    }, index))
            });
        }
    }));
jest.mock('@/components/ui/DataTableWithSuspense', ()=>({
        DataTableWithSuspense: ({ data, columns, loading, onRowClick, onDelete })=>{
            if (loading) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "Loading..."
            });
            if (data.length === 0) return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                children: "No items found"
            });
            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "data-table",
                children: data.map((item, index)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        "data-testid": `accommodation-row-${item.id}`,
                        onClick: ()=>onRowClick && onRowClick(item),
                        style: {
                            cursor: onRowClick ? 'pointer' : 'default'
                        },
                        children: [
                            columns.map((col)=>{
                                const value = item[col.key];
                                const displayValue = col.render ? col.render(value, item) : value;
                                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                    "data-testid": `${col.key}-${item.id}`,
                                    children: displayValue
                                }, col.key);
                            }),
                            onDelete && /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                onClick: (e)=>{
                                    e.stopPropagation();
                                    onDelete(item);
                                },
                                "aria-label": "Delete",
                                children: "Delete"
                            })
                        ]
                    }, index))
            });
        }
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
require("@testing-library/jest-dom");
const _page = /*#__PURE__*/ _interop_require_default(require("./page"));
const _navigation = require("next/navigation");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock fetch
global.fetch = jest.fn();
/**
 * Unit tests for Accommodations Page
 * 
 * Tests:
 * - Accommodation creation with collapsible form
 * - Location selection
 * - Room types navigation
 * - Section editor integration
 * 
 * Requirements: 10.1-10.6
 */ describe('AccommodationsPage', ()=>{
    const mockRouter = {
        push: jest.fn()
    };
    const mockAccommodations = [
        {
            id: 'accommodation-1',
            name: 'Tamarindo Diria Beach Resort',
            address: '123 Beach Road, Tamarindo',
            description: 'Luxury beachfront resort',
            locationId: 'location-1',
            checkInDate: '2025-06-14',
            checkOutDate: '2025-06-17',
            status: 'published',
            createdAt: '2025-01-01T00:00:00Z',
            updatedAt: '2025-01-01T00:00:00Z'
        },
        {
            id: 'accommodation-2',
            name: 'Hotel Capitan Suizo',
            address: '456 Ocean Drive, Tamarindo',
            description: 'Boutique hotel with ocean views',
            locationId: 'location-2',
            checkInDate: '2025-06-14',
            checkOutDate: '2025-06-17',
            status: 'draft',
            createdAt: '2025-01-01T00:00:00Z',
            updatedAt: '2025-01-01T00:00:00Z'
        }
    ];
    const mockLocations = [
        {
            id: 'location-1',
            name: 'Tamarindo Beach',
            parentLocationId: null
        },
        {
            id: 'location-2',
            name: 'Tamarindo Town',
            parentLocationId: null
        }
    ];
    beforeEach(()=>{
        jest.clearAllMocks();
        _navigation.useRouter.mockReturnValue(mockRouter);
        // Default fetch responses
        global.fetch.mockImplementation((url)=>{
            if (url.includes('/api/admin/accommodations')) {
                return Promise.resolve({
                    ok: true,
                    json: ()=>Promise.resolve({
                            success: true,
                            data: {
                                accommodations: mockAccommodations
                            }
                        })
                });
            }
            if (url.includes('/api/admin/locations')) {
                return Promise.resolve({
                    ok: true,
                    json: ()=>Promise.resolve({
                            success: true,
                            data: {
                                locations: mockLocations
                            }
                        })
                });
            }
            return Promise.reject(new Error('Unknown URL'));
        });
    });
    describe('Accommodation creation', ()=>{
        it('should display collapsible form when Add Accommodation button is clicked', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('heading', {
                    name: /accommodation management/i
                })).toBeInTheDocument();
            });
            const addButton = _react.screen.getByRole('button', {
                name: /create new accommodation/i
            });
            _react.fireEvent.click(addButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Add New Accommodation')).toBeInTheDocument();
            });
        });
        it('should create accommodation with collapsible form', async ()=>{
            const createResponse = {
                success: true,
                data: {
                    id: 'accommodation-3',
                    name: 'New Resort',
                    address: '789 Beach Lane',
                    description: 'New luxury resort',
                    locationId: 'location-1',
                    checkInDate: '2025-06-14',
                    checkOutDate: '2025-06-17',
                    status: 'published'
                }
            };
            global.fetch.mockImplementation((url, options)=>{
                if (url.includes('/api/admin/accommodations') && options?.method === 'POST') {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve(createResponse)
                    });
                }
                if (url.includes('/api/admin/accommodations') && !options) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: {
                                    accommodations: [
                                        ...mockAccommodations,
                                        createResponse.data
                                    ]
                                }
                            })
                    });
                }
                if (url.includes('/api/admin/locations')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: {
                                    locations: mockLocations
                                }
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('heading', {
                    name: /accommodation management/i
                })).toBeInTheDocument();
            });
            // Open form
            const addButton = _react.screen.getByRole('button', {
                name: /create new accommodation/i
            });
            _react.fireEvent.click(addButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Add New Accommodation')).toBeInTheDocument();
            });
            // Verify form is displayed
            expect(_react.screen.getByLabelText(/accommodation name/i)).toBeInTheDocument();
            expect(_react.screen.getByLabelText(/address/i)).toBeInTheDocument();
        });
        it('should close form after successful creation', async ()=>{
            const createResponse = {
                success: true,
                data: {
                    id: 'accommodation-3',
                    name: 'New Resort',
                    status: 'published'
                }
            };
            global.fetch.mockImplementation((url, options)=>{
                if (url.includes('/api/admin/accommodations') && options?.method === 'POST') {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve(createResponse)
                    });
                }
                if (url.includes('/api/admin/accommodations') && !options) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: {
                                    accommodations: mockAccommodations
                                }
                            })
                    });
                }
                if (url.includes('/api/admin/locations')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: {
                                    locations: mockLocations
                                }
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('heading', {
                    name: /accommodation management/i
                })).toBeInTheDocument();
            });
            // Open form
            const addButton = _react.screen.getByRole('button', {
                name: /create new accommodation/i
            });
            _react.fireEvent.click(addButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Add New Accommodation')).toBeInTheDocument();
            });
        });
    });
    describe('Location selection', ()=>{
        it('should display LocationSelector in the form', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('heading', {
                    name: /accommodation management/i
                })).toBeInTheDocument();
            });
            // Open form
            const addButton = _react.screen.getByRole('button', {
                name: /create new accommodation/i
            });
            _react.fireEvent.click(addButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Add New Accommodation')).toBeInTheDocument();
            });
            // Verify LocationSelector is present
            expect(_react.screen.getByText(/select accommodation location/i)).toBeInTheDocument();
        });
        it('should include selected location in form submission', async ()=>{
            let submittedData = null;
            global.fetch.mockImplementation((url, options)=>{
                if (url.includes('/api/admin/accommodations') && options?.method === 'POST') {
                    submittedData = JSON.parse(options.body);
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: {
                                    id: 'accommodation-3',
                                    ...submittedData
                                }
                            })
                    });
                }
                if (url.includes('/api/admin/accommodations') && !options) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: {
                                    accommodations: mockAccommodations
                                }
                            })
                    });
                }
                if (url.includes('/api/admin/locations')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: {
                                    locations: mockLocations
                                }
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('heading', {
                    name: /accommodation management/i
                })).toBeInTheDocument();
            });
        });
    });
    describe('Room types navigation', ()=>{
        it('should navigate to room types page when Room Types button is clicked', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('heading', {
                    name: /accommodation management/i
                })).toBeInTheDocument();
            });
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
            });
            // Find and click Room Types button
            const roomTypesButtons = _react.screen.getAllByRole('button', {
                name: /room types/i
            });
            _react.fireEvent.click(roomTypesButtons[0]);
            // Verify navigation
            expect(mockRouter.push).toHaveBeenCalledWith('/admin/accommodations/accommodation-1/room-types');
        });
        it('should navigate to correct accommodation room types page', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Hotel Capitan Suizo')).toBeInTheDocument();
            });
            // Find and click Room Types button for second accommodation
            const roomTypesButtons = _react.screen.getAllByRole('button', {
                name: /room types/i
            });
            _react.fireEvent.click(roomTypesButtons[1]);
            // Verify navigation to correct accommodation
            expect(mockRouter.push).toHaveBeenCalledWith('/admin/accommodations/accommodation-2/room-types');
        });
    });
    describe('Section editor integration', ()=>{
        it('should navigate to section editor when Manage Sections button is clicked', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('heading', {
                    name: /accommodation management/i
                })).toBeInTheDocument();
            });
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
            });
            // Find and click Manage Sections button
            const manageSectionsButtons = _react.screen.getAllByRole('button', {
                name: /manage sections/i
            });
            _react.fireEvent.click(manageSectionsButtons[0]);
            // Verify navigation
            expect(mockRouter.push).toHaveBeenCalledWith('/admin/accommodations/accommodation-1/sections');
        });
        it('should navigate to correct accommodation sections page', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Hotel Capitan Suizo')).toBeInTheDocument();
            });
            // Find and click Manage Sections button for second accommodation
            const manageSectionsButtons = _react.screen.getAllByRole('button', {
                name: /manage sections/i
            });
            _react.fireEvent.click(manageSectionsButtons[1]);
            // Verify navigation to correct accommodation
            expect(mockRouter.push).toHaveBeenCalledWith('/admin/accommodations/accommodation-2/sections');
        });
    });
    describe('Accommodation editing', ()=>{
        it('should open edit form when accommodation row is clicked', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
            });
            // Click on accommodation row
            const accommodationName = _react.screen.getByText('Tamarindo Diria Beach Resort');
            _react.fireEvent.click(accommodationName);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Edit Accommodation')).toBeInTheDocument();
            });
        });
        it('should populate form with accommodation data when editing', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
            });
            // Click on accommodation row
            const accommodationName = _react.screen.getByText('Tamarindo Diria Beach Resort');
            _react.fireEvent.click(accommodationName);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Edit Accommodation')).toBeInTheDocument();
            });
            // Verify form is populated (form fields would be populated by CollapsibleForm component)
            expect(_react.screen.getByLabelText(/accommodation name/i)).toBeInTheDocument();
        });
    });
    describe('Accommodation deletion', ()=>{
        it('should show delete confirmation dialog when delete button is clicked', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
            });
        // Note: Delete button would be in DataTable component
        // This test verifies the dialog appears when handleDeleteClick is called
        });
        it('should delete accommodation after confirmation', async ()=>{
            let accommodationsList = [
                ...mockAccommodations
            ];
            global.fetch.mockImplementation((url, options)=>{
                if (url.includes('/api/admin/accommodations/accommodation-1') && options?.method === 'DELETE') {
                    // After delete, remove from list
                    accommodationsList = mockAccommodations.filter((a)=>a.id !== 'accommodation-1');
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: undefined
                            })
                    });
                }
                if (url.includes('/api/admin/accommodations') && !options) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: {
                                    accommodations: accommodationsList
                                }
                            })
                    });
                }
                if (url.includes('/api/admin/locations')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: {
                                    locations: mockLocations
                                }
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
            });
            // Find and click delete button for first accommodation
            const deleteButtons = _react.screen.getAllByRole('button', {
                name: /delete/i
            });
            _react.fireEvent.click(deleteButtons[0]);
            // Wait for confirmation dialog to appear
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/are you sure you want to delete/i)).toBeInTheDocument();
            });
            // Click confirm button in dialog
            const confirmButtons = _react.screen.getAllByRole('button', {
                name: /delete/i
            });
            // The confirm button in the dialog should be the last one (after the delete buttons in the table)
            const confirmButton = confirmButtons[confirmButtons.length - 1];
            _react.fireEvent.click(confirmButton);
            // Wait for accommodation to be removed from list
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Tamarindo Diria Beach Resort')).not.toBeInTheDocument();
            });
        });
    });
    describe('Data loading', ()=>{
        it('should display loading state initially', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            // Loading state would be shown by DataTable component
            expect(_react.screen.getByRole('heading', {
                name: /accommodation management/i
            })).toBeInTheDocument();
        });
        it('should display accommodations after loading', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
                expect(_react.screen.getByText('Hotel Capitan Suizo')).toBeInTheDocument();
            });
        });
        it('should handle API errors gracefully', async ()=>{
            global.fetch.mockImplementation((url)=>{
                if (url.includes('/api/admin/accommodations')) {
                    return Promise.resolve({
                        ok: false,
                        json: ()=>Promise.resolve({
                                success: false,
                                error: {
                                    code: 'DATABASE_ERROR',
                                    message: 'Failed to fetch accommodations'
                                }
                            })
                    });
                }
                if (url.includes('/api/admin/locations')) {
                    return Promise.resolve({
                        ok: true,
                        json: ()=>Promise.resolve({
                                success: true,
                                data: {
                                    locations: mockLocations
                                }
                            })
                    });
                }
                return Promise.reject(new Error('Unknown URL'));
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('heading', {
                    name: /accommodation management/i
                })).toBeInTheDocument();
            });
        });
    });
    describe('Status display', ()=>{
        it('should display status badges for accommodations', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Published')).toBeInTheDocument();
                expect(_react.screen.getByText('Draft')).toBeInTheDocument();
            });
        });
        it('should apply correct styling to status badges', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            // Wait for accommodations to load first
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Tamarindo Diria Beach Resort')).toBeInTheDocument();
            });
            // Get all "Published" text elements and find the badge (not the filter option)
            const publishedElements = _react.screen.getAllByText('Published');
            // The badge should be a span with specific classes, filter options are in select/option
            const publishedBadge = publishedElements.find((el)=>el.tagName === 'SPAN');
            expect(publishedBadge).toBeDefined();
            expect(publishedBadge).toHaveClass('bg-jungle-100', 'text-jungle-800');
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FkbWluL2FjY29tbW9kYXRpb25zL3BhZ2UudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIGZpcmVFdmVudCwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0ICdAdGVzdGluZy1saWJyYXJ5L2plc3QtZG9tJztcbmltcG9ydCBBY2NvbW1vZGF0aW9uc1BhZ2UgZnJvbSAnLi9wYWdlJztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvbmF2aWdhdGlvbic7XG5cbi8vIE1vY2sgZGVwZW5kZW5jaWVzXG5qZXN0Lm1vY2soJ25leHQvbmF2aWdhdGlvbicsICgpID0+ICh7XG4gIHVzZVJvdXRlcjogamVzdC5mbigpLFxuICB1c2VTZWFyY2hQYXJhbXM6IGplc3QuZm4oKCkgPT4gKHtcbiAgICBnZXQ6IGplc3QuZm4oKSxcbiAgfSkpLFxufSkpO1xuXG5qZXN0Lm1vY2soJ0AvY29tcG9uZW50cy91aS9Ub2FzdENvbnRleHQnLCAoKSA9PiAoe1xuICB1c2VUb2FzdDogKCkgPT4gKHtcbiAgICBhZGRUb2FzdDogamVzdC5mbigpLFxuICB9KSxcbn0pKTtcblxuLy8gTW9jayBEYXRhVGFibGUgY29tcG9uZW50c1xuamVzdC5tb2NrKCdAL2NvbXBvbmVudHMvdWkvRGF0YVRhYmxlJywgKCkgPT4gKHtcbiAgRGF0YVRhYmxlOiAoeyBkYXRhLCBjb2x1bW5zLCBsb2FkaW5nLCBvblJvd0NsaWNrLCBvbkRlbGV0ZSB9OiBhbnkpID0+IHtcbiAgICBpZiAobG9hZGluZykgcmV0dXJuIDxkaXY+TG9hZGluZy4uLjwvZGl2PjtcbiAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHJldHVybiA8ZGl2Pk5vIGl0ZW1zIGZvdW5kPC9kaXY+O1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiZGF0YS10YWJsZVwiPlxuICAgICAgICB7ZGF0YS5tYXAoKGl0ZW06IGFueSwgaW5kZXg6IG51bWJlcikgPT4gKFxuICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICBrZXk9e2luZGV4fSBcbiAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgYWNjb21tb2RhdGlvbi1yb3ctJHtpdGVtLmlkfWB9XG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvblJvd0NsaWNrICYmIG9uUm93Q2xpY2soaXRlbSl9XG4gICAgICAgICAgICBzdHlsZT17eyBjdXJzb3I6IG9uUm93Q2xpY2sgPyAncG9pbnRlcicgOiAnZGVmYXVsdCcgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7Y29sdW1ucy5tYXAoKGNvbDogYW55KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gaXRlbVtjb2wua2V5XTtcbiAgICAgICAgICAgICAgY29uc3QgZGlzcGxheVZhbHVlID0gY29sLnJlbmRlciA/IGNvbC5yZW5kZXIodmFsdWUsIGl0ZW0pIDogdmFsdWU7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdiBrZXk9e2NvbC5rZXl9IGRhdGEtdGVzdGlkPXtgJHtjb2wua2V5fS0ke2l0ZW0uaWR9YH0+XG4gICAgICAgICAgICAgICAgICB7ZGlzcGxheVZhbHVlfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICB7b25EZWxldGUgJiYgKFxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICBvbkRlbGV0ZShpdGVtKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJEZWxldGVcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgRGVsZXRlXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9LFxufSkpO1xuXG5qZXN0Lm1vY2soJ0AvY29tcG9uZW50cy91aS9EYXRhVGFibGVXaXRoU3VzcGVuc2UnLCAoKSA9PiAoe1xuICBEYXRhVGFibGVXaXRoU3VzcGVuc2U6ICh7IGRhdGEsIGNvbHVtbnMsIGxvYWRpbmcsIG9uUm93Q2xpY2ssIG9uRGVsZXRlIH06IGFueSkgPT4ge1xuICAgIGlmIChsb2FkaW5nKSByZXR1cm4gPGRpdj5Mb2FkaW5nLi4uPC9kaXY+O1xuICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDxkaXY+Tm8gaXRlbXMgZm91bmQ8L2Rpdj47XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJkYXRhLXRhYmxlXCI+XG4gICAgICAgIHtkYXRhLm1hcCgoaXRlbTogYW55LCBpbmRleDogbnVtYmVyKSA9PiAoXG4gICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgIGtleT17aW5kZXh9IFxuICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2BhY2NvbW1vZGF0aW9uLXJvdy0ke2l0ZW0uaWR9YH1cbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uUm93Q2xpY2sgJiYgb25Sb3dDbGljayhpdGVtKX1cbiAgICAgICAgICAgIHN0eWxlPXt7IGN1cnNvcjogb25Sb3dDbGljayA/ICdwb2ludGVyJyA6ICdkZWZhdWx0JyB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtjb2x1bW5zLm1hcCgoY29sOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBpdGVtW2NvbC5rZXldO1xuICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5VmFsdWUgPSBjb2wucmVuZGVyID8gY29sLnJlbmRlcih2YWx1ZSwgaXRlbSkgOiB2YWx1ZTtcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2IGtleT17Y29sLmtleX0gZGF0YS10ZXN0aWQ9e2Ake2NvbC5rZXl9LSR7aXRlbS5pZH1gfT5cbiAgICAgICAgICAgICAgICAgIHtkaXNwbGF5VmFsdWV9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIHtvbkRlbGV0ZSAmJiAoXG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgIG9uRGVsZXRlKGl0ZW0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIkRlbGV0ZVwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBEZWxldGVcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApKX1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH0sXG59KSk7XG5cbi8vIE1vY2sgZmV0Y2hcbmdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKTtcblxuLyoqXG4gKiBVbml0IHRlc3RzIGZvciBBY2NvbW1vZGF0aW9ucyBQYWdlXG4gKiBcbiAqIFRlc3RzOlxuICogLSBBY2NvbW1vZGF0aW9uIGNyZWF0aW9uIHdpdGggY29sbGFwc2libGUgZm9ybVxuICogLSBMb2NhdGlvbiBzZWxlY3Rpb25cbiAqIC0gUm9vbSB0eXBlcyBuYXZpZ2F0aW9uXG4gKiAtIFNlY3Rpb24gZWRpdG9yIGludGVncmF0aW9uXG4gKiBcbiAqIFJlcXVpcmVtZW50czogMTAuMS0xMC42XG4gKi9cbmRlc2NyaWJlKCdBY2NvbW1vZGF0aW9uc1BhZ2UnLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tSb3V0ZXIgPSB7XG4gICAgcHVzaDogamVzdC5mbigpLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tBY2NvbW1vZGF0aW9ucyA9IFtcbiAgICB7XG4gICAgICBpZDogJ2FjY29tbW9kYXRpb24tMScsXG4gICAgICBuYW1lOiAnVGFtYXJpbmRvIERpcmlhIEJlYWNoIFJlc29ydCcsXG4gICAgICBhZGRyZXNzOiAnMTIzIEJlYWNoIFJvYWQsIFRhbWFyaW5kbycsXG4gICAgICBkZXNjcmlwdGlvbjogJ0x1eHVyeSBiZWFjaGZyb250IHJlc29ydCcsXG4gICAgICBsb2NhdGlvbklkOiAnbG9jYXRpb24tMScsXG4gICAgICBjaGVja0luRGF0ZTogJzIwMjUtMDYtMTQnLFxuICAgICAgY2hlY2tPdXREYXRlOiAnMjAyNS0wNi0xNycsXG4gICAgICBzdGF0dXM6ICdwdWJsaXNoZWQnLFxuICAgICAgY3JlYXRlZEF0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgICAgdXBkYXRlZEF0OiAnMjAyNS0wMS0wMVQwMDowMDowMFonLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICdhY2NvbW1vZGF0aW9uLTInLFxuICAgICAgbmFtZTogJ0hvdGVsIENhcGl0YW4gU3Vpem8nLFxuICAgICAgYWRkcmVzczogJzQ1NiBPY2VhbiBEcml2ZSwgVGFtYXJpbmRvJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQm91dGlxdWUgaG90ZWwgd2l0aCBvY2VhbiB2aWV3cycsXG4gICAgICBsb2NhdGlvbklkOiAnbG9jYXRpb24tMicsXG4gICAgICBjaGVja0luRGF0ZTogJzIwMjUtMDYtMTQnLFxuICAgICAgY2hlY2tPdXREYXRlOiAnMjAyNS0wNi0xNycsXG4gICAgICBzdGF0dXM6ICdkcmFmdCcsXG4gICAgICBjcmVhdGVkQXQ6ICcyMDI1LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICB1cGRhdGVkQXQ6ICcyMDI1LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgfSxcbiAgXTtcblxuICBjb25zdCBtb2NrTG9jYXRpb25zID0gW1xuICAgIHsgaWQ6ICdsb2NhdGlvbi0xJywgbmFtZTogJ1RhbWFyaW5kbyBCZWFjaCcsIHBhcmVudExvY2F0aW9uSWQ6IG51bGwgfSxcbiAgICB7IGlkOiAnbG9jYXRpb24tMicsIG5hbWU6ICdUYW1hcmluZG8gVG93bicsIHBhcmVudExvY2F0aW9uSWQ6IG51bGwgfSxcbiAgXTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICAodXNlUm91dGVyIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKG1vY2tSb3V0ZXIpO1xuICAgIFxuICAgIC8vIERlZmF1bHQgZmV0Y2ggcmVzcG9uc2VzXG4gICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigodXJsOiBzdHJpbmcpID0+IHtcbiAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvYWRtaW4vYWNjb21tb2RhdGlvbnMnKSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGE6IHsgYWNjb21tb2RhdGlvbnM6IG1vY2tBY2NvbW1vZGF0aW9ucyB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvYWRtaW4vbG9jYXRpb25zJykpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7IGxvY2F0aW9uczogbW9ja0xvY2F0aW9ucyB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1Vua25vd24gVVJMJykpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQWNjb21tb2RhdGlvbiBjcmVhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgY29sbGFwc2libGUgZm9ybSB3aGVuIEFkZCBBY2NvbW1vZGF0aW9uIGJ1dHRvbiBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBY2NvbW1vZGF0aW9uc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2hlYWRpbmcnLCB7IG5hbWU6IC9hY2NvbW1vZGF0aW9uIG1hbmFnZW1lbnQvaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBhZGRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9jcmVhdGUgbmV3IGFjY29tbW9kYXRpb24vaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhhZGRCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0FkZCBOZXcgQWNjb21tb2RhdGlvbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBhY2NvbW1vZGF0aW9uIHdpdGggY29sbGFwc2libGUgZm9ybScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNyZWF0ZVJlc3BvbnNlID0ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgaWQ6ICdhY2NvbW1vZGF0aW9uLTMnLFxuICAgICAgICAgIG5hbWU6ICdOZXcgUmVzb3J0JyxcbiAgICAgICAgICBhZGRyZXNzOiAnNzg5IEJlYWNoIExhbmUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTmV3IGx1eHVyeSByZXNvcnQnLFxuICAgICAgICAgIGxvY2F0aW9uSWQ6ICdsb2NhdGlvbi0xJyxcbiAgICAgICAgICBjaGVja0luRGF0ZTogJzIwMjUtMDYtMTQnLFxuICAgICAgICAgIGNoZWNrT3V0RGF0ZTogJzIwMjUtMDYtMTcnLFxuICAgICAgICAgIHN0YXR1czogJ3B1Ymxpc2hlZCcsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCh1cmw6IHN0cmluZywgb3B0aW9ucz86IGFueSkgPT4ge1xuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2FkbWluL2FjY29tbW9kYXRpb25zJykgJiYgb3B0aW9ucz8ubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKGNyZWF0ZVJlc3BvbnNlKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2FkbWluL2FjY29tbW9kYXRpb25zJykgJiYgIW9wdGlvbnMpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgZGF0YTogeyBhY2NvbW1vZGF0aW9uczogWy4uLm1vY2tBY2NvbW1vZGF0aW9ucywgY3JlYXRlUmVzcG9uc2UuZGF0YV0gfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvYWRtaW4vbG9jYXRpb25zJykpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgZGF0YTogeyBsb2NhdGlvbnM6IG1vY2tMb2NhdGlvbnMgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1Vua25vd24gVVJMJykpO1xuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8QWNjb21tb2RhdGlvbnNQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdoZWFkaW5nJywgeyBuYW1lOiAvYWNjb21tb2RhdGlvbiBtYW5hZ2VtZW50L2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gT3BlbiBmb3JtXG4gICAgICBjb25zdCBhZGRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9jcmVhdGUgbmV3IGFjY29tbW9kYXRpb24vaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhhZGRCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0FkZCBOZXcgQWNjb21tb2RhdGlvbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFZlcmlmeSBmb3JtIGlzIGRpc3BsYXllZFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvYWNjb21tb2RhdGlvbiBuYW1lL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvYWRkcmVzcy9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2xvc2UgZm9ybSBhZnRlciBzdWNjZXNzZnVsIGNyZWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY3JlYXRlUmVzcG9uc2UgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBpZDogJ2FjY29tbW9kYXRpb24tMycsXG4gICAgICAgICAgbmFtZTogJ05ldyBSZXNvcnQnLFxuICAgICAgICAgIHN0YXR1czogJ3B1Ymxpc2hlZCcsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCh1cmw6IHN0cmluZywgb3B0aW9ucz86IGFueSkgPT4ge1xuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2FkbWluL2FjY29tbW9kYXRpb25zJykgJiYgb3B0aW9ucz8ubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKGNyZWF0ZVJlc3BvbnNlKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2FkbWluL2FjY29tbW9kYXRpb25zJykgJiYgIW9wdGlvbnMpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgZGF0YTogeyBhY2NvbW1vZGF0aW9uczogbW9ja0FjY29tbW9kYXRpb25zIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2FkbWluL2xvY2F0aW9ucycpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgIGRhdGE6IHsgbG9jYXRpb25zOiBtb2NrTG9jYXRpb25zIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdVbmtub3duIFVSTCcpKTtcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPEFjY29tbW9kYXRpb25zUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnaGVhZGluZycsIHsgbmFtZTogL2FjY29tbW9kYXRpb24gbWFuYWdlbWVudC9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIE9wZW4gZm9ybVxuICAgICAgY29uc3QgYWRkQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvY3JlYXRlIG5ldyBhY2NvbW1vZGF0aW9uL2kgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soYWRkQnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdBZGQgTmV3IEFjY29tbW9kYXRpb24nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTG9jYXRpb24gc2VsZWN0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGlzcGxheSBMb2NhdGlvblNlbGVjdG9yIGluIHRoZSBmb3JtJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBY2NvbW1vZGF0aW9uc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2hlYWRpbmcnLCB7IG5hbWU6IC9hY2NvbW1vZGF0aW9uIG1hbmFnZW1lbnQvaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBPcGVuIGZvcm1cbiAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2NyZWF0ZSBuZXcgYWNjb21tb2RhdGlvbi9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGFkZEJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQWRkIE5ldyBBY2NvbW1vZGF0aW9uJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gVmVyaWZ5IExvY2F0aW9uU2VsZWN0b3IgaXMgcHJlc2VudFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL3NlbGVjdCBhY2NvbW1vZGF0aW9uIGxvY2F0aW9uL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIHNlbGVjdGVkIGxvY2F0aW9uIGluIGZvcm0gc3VibWlzc2lvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBzdWJtaXR0ZWREYXRhOiBhbnkgPSBudWxsO1xuXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCh1cmw6IHN0cmluZywgb3B0aW9ucz86IGFueSkgPT4ge1xuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2FkbWluL2FjY29tbW9kYXRpb25zJykgJiYgb3B0aW9ucz8ubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgICAgICBzdWJtaXR0ZWREYXRhID0gSlNPTi5wYXJzZShvcHRpb25zLmJvZHkpO1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICBkYXRhOiB7IGlkOiAnYWNjb21tb2RhdGlvbi0zJywgLi4uc3VibWl0dGVkRGF0YSB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9hZG1pbi9hY2NvbW1vZGF0aW9ucycpICYmICFvcHRpb25zKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgIGRhdGE6IHsgYWNjb21tb2RhdGlvbnM6IG1vY2tBY2NvbW1vZGF0aW9ucyB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9hZG1pbi9sb2NhdGlvbnMnKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICBkYXRhOiB7IGxvY2F0aW9uczogbW9ja0xvY2F0aW9ucyB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignVW5rbm93biBVUkwnKSk7XG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxBY2NvbW1vZGF0aW9uc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2hlYWRpbmcnLCB7IG5hbWU6IC9hY2NvbW1vZGF0aW9uIG1hbmFnZW1lbnQvaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUm9vbSB0eXBlcyBuYXZpZ2F0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbmF2aWdhdGUgdG8gcm9vbSB0eXBlcyBwYWdlIHdoZW4gUm9vbSBUeXBlcyBidXR0b24gaXMgY2xpY2tlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8QWNjb21tb2RhdGlvbnNQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdoZWFkaW5nJywgeyBuYW1lOiAvYWNjb21tb2RhdGlvbiBtYW5hZ2VtZW50L2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdUYW1hcmluZG8gRGlyaWEgQmVhY2ggUmVzb3J0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gRmluZCBhbmQgY2xpY2sgUm9vbSBUeXBlcyBidXR0b25cbiAgICAgIGNvbnN0IHJvb21UeXBlc0J1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9yb29tIHR5cGVzL2kgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2socm9vbVR5cGVzQnV0dG9uc1swXSk7XG5cbiAgICAgIC8vIFZlcmlmeSBuYXZpZ2F0aW9uXG4gICAgICBleHBlY3QobW9ja1JvdXRlci5wdXNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FkbWluL2FjY29tbW9kYXRpb25zL2FjY29tbW9kYXRpb24tMS9yb29tLXR5cGVzJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5hdmlnYXRlIHRvIGNvcnJlY3QgYWNjb21tb2RhdGlvbiByb29tIHR5cGVzIHBhZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPEFjY29tbW9kYXRpb25zUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnSG90ZWwgQ2FwaXRhbiBTdWl6bycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEZpbmQgYW5kIGNsaWNrIFJvb20gVHlwZXMgYnV0dG9uIGZvciBzZWNvbmQgYWNjb21tb2RhdGlvblxuICAgICAgY29uc3Qgcm9vbVR5cGVzQnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3Jvb20gdHlwZXMvaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhyb29tVHlwZXNCdXR0b25zWzFdKTtcblxuICAgICAgLy8gVmVyaWZ5IG5hdmlnYXRpb24gdG8gY29ycmVjdCBhY2NvbW1vZGF0aW9uXG4gICAgICBleHBlY3QobW9ja1JvdXRlci5wdXNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FkbWluL2FjY29tbW9kYXRpb25zL2FjY29tbW9kYXRpb24tMi9yb29tLXR5cGVzJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTZWN0aW9uIGVkaXRvciBpbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIG5hdmlnYXRlIHRvIHNlY3Rpb24gZWRpdG9yIHdoZW4gTWFuYWdlIFNlY3Rpb25zIGJ1dHRvbiBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBY2NvbW1vZGF0aW9uc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2hlYWRpbmcnLCB7IG5hbWU6IC9hY2NvbW1vZGF0aW9uIG1hbmFnZW1lbnQvaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1RhbWFyaW5kbyBEaXJpYSBCZWFjaCBSZXNvcnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBGaW5kIGFuZCBjbGljayBNYW5hZ2UgU2VjdGlvbnMgYnV0dG9uXG4gICAgICBjb25zdCBtYW5hZ2VTZWN0aW9uc0J1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9tYW5hZ2Ugc2VjdGlvbnMvaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhtYW5hZ2VTZWN0aW9uc0J1dHRvbnNbMF0pO1xuXG4gICAgICAvLyBWZXJpZnkgbmF2aWdhdGlvblxuICAgICAgZXhwZWN0KG1vY2tSb3V0ZXIucHVzaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hZG1pbi9hY2NvbW1vZGF0aW9ucy9hY2NvbW1vZGF0aW9uLTEvc2VjdGlvbnMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbmF2aWdhdGUgdG8gY29ycmVjdCBhY2NvbW1vZGF0aW9uIHNlY3Rpb25zIHBhZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPEFjY29tbW9kYXRpb25zUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnSG90ZWwgQ2FwaXRhbiBTdWl6bycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEZpbmQgYW5kIGNsaWNrIE1hbmFnZSBTZWN0aW9ucyBidXR0b24gZm9yIHNlY29uZCBhY2NvbW1vZGF0aW9uXG4gICAgICBjb25zdCBtYW5hZ2VTZWN0aW9uc0J1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9tYW5hZ2Ugc2VjdGlvbnMvaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhtYW5hZ2VTZWN0aW9uc0J1dHRvbnNbMV0pO1xuXG4gICAgICAvLyBWZXJpZnkgbmF2aWdhdGlvbiB0byBjb3JyZWN0IGFjY29tbW9kYXRpb25cbiAgICAgIGV4cGVjdChtb2NrUm91dGVyLnB1c2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYWRtaW4vYWNjb21tb2RhdGlvbnMvYWNjb21tb2RhdGlvbi0yL3NlY3Rpb25zJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBY2NvbW1vZGF0aW9uIGVkaXRpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBvcGVuIGVkaXQgZm9ybSB3aGVuIGFjY29tbW9kYXRpb24gcm93IGlzIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPEFjY29tbW9kYXRpb25zUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVGFtYXJpbmRvIERpcmlhIEJlYWNoIFJlc29ydCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIG9uIGFjY29tbW9kYXRpb24gcm93XG4gICAgICBjb25zdCBhY2NvbW1vZGF0aW9uTmFtZSA9IHNjcmVlbi5nZXRCeVRleHQoJ1RhbWFyaW5kbyBEaXJpYSBCZWFjaCBSZXNvcnQnKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhhY2NvbW1vZGF0aW9uTmFtZSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnRWRpdCBBY2NvbW1vZGF0aW9uJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcG9wdWxhdGUgZm9ybSB3aXRoIGFjY29tbW9kYXRpb24gZGF0YSB3aGVuIGVkaXRpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPEFjY29tbW9kYXRpb25zUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVGFtYXJpbmRvIERpcmlhIEJlYWNoIFJlc29ydCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIG9uIGFjY29tbW9kYXRpb24gcm93XG4gICAgICBjb25zdCBhY2NvbW1vZGF0aW9uTmFtZSA9IHNjcmVlbi5nZXRCeVRleHQoJ1RhbWFyaW5kbyBEaXJpYSBCZWFjaCBSZXNvcnQnKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhhY2NvbW1vZGF0aW9uTmFtZSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnRWRpdCBBY2NvbW1vZGF0aW9uJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gVmVyaWZ5IGZvcm0gaXMgcG9wdWxhdGVkIChmb3JtIGZpZWxkcyB3b3VsZCBiZSBwb3B1bGF0ZWQgYnkgQ29sbGFwc2libGVGb3JtIGNvbXBvbmVudClcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2FjY29tbW9kYXRpb24gbmFtZS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FjY29tbW9kYXRpb24gZGVsZXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBzaG93IGRlbGV0ZSBjb25maXJtYXRpb24gZGlhbG9nIHdoZW4gZGVsZXRlIGJ1dHRvbiBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBY2NvbW1vZGF0aW9uc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1RhbWFyaW5kbyBEaXJpYSBCZWFjaCBSZXNvcnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBOb3RlOiBEZWxldGUgYnV0dG9uIHdvdWxkIGJlIGluIERhdGFUYWJsZSBjb21wb25lbnRcbiAgICAgIC8vIFRoaXMgdGVzdCB2ZXJpZmllcyB0aGUgZGlhbG9nIGFwcGVhcnMgd2hlbiBoYW5kbGVEZWxldGVDbGljayBpcyBjYWxsZWRcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGVsZXRlIGFjY29tbW9kYXRpb24gYWZ0ZXIgY29uZmlybWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IGFjY29tbW9kYXRpb25zTGlzdCA9IFsuLi5tb2NrQWNjb21tb2RhdGlvbnNdO1xuXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCh1cmw6IHN0cmluZywgb3B0aW9ucz86IGFueSkgPT4ge1xuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2FkbWluL2FjY29tbW9kYXRpb25zL2FjY29tbW9kYXRpb24tMScpICYmIG9wdGlvbnM/Lm1ldGhvZCA9PT0gJ0RFTEVURScpIHtcbiAgICAgICAgICAvLyBBZnRlciBkZWxldGUsIHJlbW92ZSBmcm9tIGxpc3RcbiAgICAgICAgICBhY2NvbW1vZGF0aW9uc0xpc3QgPSBtb2NrQWNjb21tb2RhdGlvbnMuZmlsdGVyKGEgPT4gYS5pZCAhPT0gJ2FjY29tbW9kYXRpb24tMScpO1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB1bmRlZmluZWQgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9hZG1pbi9hY2NvbW1vZGF0aW9ucycpICYmICFvcHRpb25zKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgIGRhdGE6IHsgYWNjb21tb2RhdGlvbnM6IGFjY29tbW9kYXRpb25zTGlzdCB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9hZG1pbi9sb2NhdGlvbnMnKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICBkYXRhOiB7IGxvY2F0aW9uczogbW9ja0xvY2F0aW9ucyB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignVW5rbm93biBVUkwnKSk7XG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKDxBY2NvbW1vZGF0aW9uc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1RhbWFyaW5kbyBEaXJpYSBCZWFjaCBSZXNvcnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBGaW5kIGFuZCBjbGljayBkZWxldGUgYnV0dG9uIGZvciBmaXJzdCBhY2NvbW1vZGF0aW9uXG4gICAgICBjb25zdCBkZWxldGVCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZGVsZXRlL2kgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soZGVsZXRlQnV0dG9uc1swXSk7XG5cbiAgICAgIC8vIFdhaXQgZm9yIGNvbmZpcm1hdGlvbiBkaWFsb2cgdG8gYXBwZWFyXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL2FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgY29uZmlybSBidXR0b24gaW4gZGlhbG9nXG4gICAgICBjb25zdCBjb25maXJtQnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2RlbGV0ZS9pIH0pO1xuICAgICAgLy8gVGhlIGNvbmZpcm0gYnV0dG9uIGluIHRoZSBkaWFsb2cgc2hvdWxkIGJlIHRoZSBsYXN0IG9uZSAoYWZ0ZXIgdGhlIGRlbGV0ZSBidXR0b25zIGluIHRoZSB0YWJsZSlcbiAgICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBjb25maXJtQnV0dG9uc1tjb25maXJtQnV0dG9ucy5sZW5ndGggLSAxXTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhjb25maXJtQnV0dG9uKTtcblxuICAgICAgLy8gV2FpdCBmb3IgYWNjb21tb2RhdGlvbiB0byBiZSByZW1vdmVkIGZyb20gbGlzdFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ1RhbWFyaW5kbyBEaXJpYSBCZWFjaCBSZXNvcnQnKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0RhdGEgbG9hZGluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgbG9hZGluZyBzdGF0ZSBpbml0aWFsbHknLCAoKSA9PiB7XG4gICAgICByZW5kZXIoPEFjY29tbW9kYXRpb25zUGFnZSAvPik7XG5cbiAgICAgIC8vIExvYWRpbmcgc3RhdGUgd291bGQgYmUgc2hvd24gYnkgRGF0YVRhYmxlIGNvbXBvbmVudFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2hlYWRpbmcnLCB7IG5hbWU6IC9hY2NvbW1vZGF0aW9uIG1hbmFnZW1lbnQvaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBhY2NvbW1vZGF0aW9ucyBhZnRlciBsb2FkaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBY2NvbW1vZGF0aW9uc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1RhbWFyaW5kbyBEaXJpYSBCZWFjaCBSZXNvcnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0hvdGVsIENhcGl0YW4gU3Vpem8nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgQVBJIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigodXJsOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9hZG1pbi9hY2NvbW1vZGF0aW9ucycpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogZmFsc2UsXG4gICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgZXJyb3I6IHsgY29kZTogJ0RBVEFCQVNFX0VSUk9SJywgbWVzc2FnZTogJ0ZhaWxlZCB0byBmZXRjaCBhY2NvbW1vZGF0aW9ucycgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvYWRtaW4vbG9jYXRpb25zJykpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgZGF0YTogeyBsb2NhdGlvbnM6IG1vY2tMb2NhdGlvbnMgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1Vua25vd24gVVJMJykpO1xuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8QWNjb21tb2RhdGlvbnNQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdoZWFkaW5nJywgeyBuYW1lOiAvYWNjb21tb2RhdGlvbiBtYW5hZ2VtZW50L2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1N0YXR1cyBkaXNwbGF5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGlzcGxheSBzdGF0dXMgYmFkZ2VzIGZvciBhY2NvbW1vZGF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8QWNjb21tb2RhdGlvbnNQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdQdWJsaXNoZWQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0RyYWZ0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYXBwbHkgY29ycmVjdCBzdHlsaW5nIHRvIHN0YXR1cyBiYWRnZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPEFjY29tbW9kYXRpb25zUGFnZSAvPik7XG5cbiAgICAgIC8vIFdhaXQgZm9yIGFjY29tbW9kYXRpb25zIHRvIGxvYWQgZmlyc3RcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVGFtYXJpbmRvIERpcmlhIEJlYWNoIFJlc29ydCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEdldCBhbGwgXCJQdWJsaXNoZWRcIiB0ZXh0IGVsZW1lbnRzIGFuZCBmaW5kIHRoZSBiYWRnZSAobm90IHRoZSBmaWx0ZXIgb3B0aW9uKVxuICAgICAgY29uc3QgcHVibGlzaGVkRWxlbWVudHMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KCdQdWJsaXNoZWQnKTtcbiAgICAgIC8vIFRoZSBiYWRnZSBzaG91bGQgYmUgYSBzcGFuIHdpdGggc3BlY2lmaWMgY2xhc3NlcywgZmlsdGVyIG9wdGlvbnMgYXJlIGluIHNlbGVjdC9vcHRpb25cbiAgICAgIGNvbnN0IHB1Ymxpc2hlZEJhZGdlID0gcHVibGlzaGVkRWxlbWVudHMuZmluZChlbCA9PiBlbC50YWdOYW1lID09PSAnU1BBTicpO1xuICAgICAgXG4gICAgICBleHBlY3QocHVibGlzaGVkQmFkZ2UpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocHVibGlzaGVkQmFkZ2UpLnRvSGF2ZUNsYXNzKCdiZy1qdW5nbGUtMTAwJywgJ3RleHQtanVuZ2xlLTgwMCcpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwidXNlUm91dGVyIiwiZm4iLCJ1c2VTZWFyY2hQYXJhbXMiLCJnZXQiLCJ1c2VUb2FzdCIsImFkZFRvYXN0IiwiRGF0YVRhYmxlIiwiZGF0YSIsImNvbHVtbnMiLCJsb2FkaW5nIiwib25Sb3dDbGljayIsIm9uRGVsZXRlIiwiZGl2IiwibGVuZ3RoIiwiZGF0YS10ZXN0aWQiLCJtYXAiLCJpdGVtIiwiaW5kZXgiLCJpZCIsIm9uQ2xpY2siLCJzdHlsZSIsImN1cnNvciIsImNvbCIsInZhbHVlIiwia2V5IiwiZGlzcGxheVZhbHVlIiwicmVuZGVyIiwiYnV0dG9uIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsImFyaWEtbGFiZWwiLCJEYXRhVGFibGVXaXRoU3VzcGVuc2UiLCJnbG9iYWwiLCJmZXRjaCIsImRlc2NyaWJlIiwibW9ja1JvdXRlciIsInB1c2giLCJtb2NrQWNjb21tb2RhdGlvbnMiLCJuYW1lIiwiYWRkcmVzcyIsImRlc2NyaXB0aW9uIiwibG9jYXRpb25JZCIsImNoZWNrSW5EYXRlIiwiY2hlY2tPdXREYXRlIiwic3RhdHVzIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwibW9ja0xvY2F0aW9ucyIsInBhcmVudExvY2F0aW9uSWQiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tSZXR1cm5WYWx1ZSIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsInVybCIsImluY2x1ZGVzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJvayIsImpzb24iLCJzdWNjZXNzIiwiYWNjb21tb2RhdGlvbnMiLCJsb2NhdGlvbnMiLCJyZWplY3QiLCJFcnJvciIsIml0IiwiQWNjb21tb2RhdGlvbnNQYWdlIiwid2FpdEZvciIsImV4cGVjdCIsInNjcmVlbiIsImdldEJ5Um9sZSIsInRvQmVJblRoZURvY3VtZW50IiwiYWRkQnV0dG9uIiwiZmlyZUV2ZW50IiwiY2xpY2siLCJnZXRCeVRleHQiLCJjcmVhdGVSZXNwb25zZSIsIm9wdGlvbnMiLCJtZXRob2QiLCJnZXRCeUxhYmVsVGV4dCIsInN1Ym1pdHRlZERhdGEiLCJKU09OIiwicGFyc2UiLCJib2R5Iiwicm9vbVR5cGVzQnV0dG9ucyIsImdldEFsbEJ5Um9sZSIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwibWFuYWdlU2VjdGlvbnNCdXR0b25zIiwiYWNjb21tb2RhdGlvbk5hbWUiLCJhY2NvbW1vZGF0aW9uc0xpc3QiLCJmaWx0ZXIiLCJhIiwidW5kZWZpbmVkIiwiZGVsZXRlQnV0dG9ucyIsImNvbmZpcm1CdXR0b25zIiwiY29uZmlybUJ1dHRvbiIsInF1ZXJ5QnlUZXh0Iiwibm90IiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsInB1Ymxpc2hlZEVsZW1lbnRzIiwiZ2V0QWxsQnlUZXh0IiwicHVibGlzaGVkQmFkZ2UiLCJmaW5kIiwiZWwiLCJ0YWdOYW1lIiwidG9CZURlZmluZWQiLCJ0b0hhdmVDbGFzcyJdLCJtYXBwaW5ncyI6IjtBQUtBLG9CQUFvQjtBQUNwQkEsS0FBS0MsSUFBSSxDQUFDLG1CQUFtQixJQUFPLENBQUE7UUFDbENDLFdBQVdGLEtBQUtHLEVBQUU7UUFDbEJDLGlCQUFpQkosS0FBS0csRUFBRSxDQUFDLElBQU8sQ0FBQTtnQkFDOUJFLEtBQUtMLEtBQUtHLEVBQUU7WUFDZCxDQUFBO0lBQ0YsQ0FBQTtBQUVBSCxLQUFLQyxJQUFJLENBQUMsZ0NBQWdDLElBQU8sQ0FBQTtRQUMvQ0ssVUFBVSxJQUFPLENBQUE7Z0JBQ2ZDLFVBQVVQLEtBQUtHLEVB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