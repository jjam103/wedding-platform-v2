{"version":3,"names":["cov_1hef5ek248","actualCoverage","s","DeletionConfirmDialog","isOpen","onClose","onConfirm","entityType","entityName","dependentRecords","totalCount","f","deletionType","setDeletionType","_react","useState","b","hasReferences","length","entityTypeLabel","content_page","event","activity","_jsxruntime","jsx","className","jsxs","fill","viewBox","fillRule","d","clipRule","toLowerCase","map","record","count","name","id","type","value","checked","onChange","required","onClick","checkbox","document","getElementById","alert"],"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/DeletionConfirmDialog.tsx"],"sourcesContent":["'use client';\n\n/**\n * Deletion Confirmation Dialog\n * \n * Displays a warning with list of dependent records before deletion.\n * Requires explicit confirmation for cascade deletion.\n * Provides option to reassign references (future enhancement).\n */\n\nimport { useState } from 'react';\nimport type { DependentRecord } from '../../utils/referenceChecking';\n\ninterface DeletionConfirmDialogProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: (permanent: boolean) => void;\n  entityType: 'content_page' | 'event' | 'activity';\n  entityName: string;\n  dependentRecords: DependentRecord[];\n  totalCount: number;\n}\n\nexport function DeletionConfirmDialog({\n  isOpen,\n  onClose,\n  onConfirm,\n  entityType,\n  entityName,\n  dependentRecords,\n  totalCount,\n}: DeletionConfirmDialogProps) {\n  const [deletionType, setDeletionType] = useState<'soft' | 'permanent'>('soft');\n\n  if (!isOpen) return null;\n\n  const hasReferences = dependentRecords.length > 0;\n\n  const entityTypeLabel = {\n    content_page: 'Content Page',\n    event: 'Event',\n    activity: 'Activity',\n  }[entityType];\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\n      <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">\n            Confirm Deletion\n          </h2>\n        </div>\n\n        {/* Content */}\n        <div className=\"px-6 py-4\">\n          {/* Warning Message */}\n          <div className=\"mb-4\">\n            <p className=\"text-gray-700\">\n              Are you sure you want to delete <strong>{entityName}</strong>?\n            </p>\n          </div>\n\n          {/* Dependent Records Warning */}\n          {hasReferences && (\n            <div className=\"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\n              <div className=\"flex items-start\">\n                <svg\n                  className=\"w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0\"\n                  fill=\"currentColor\"\n                  viewBox=\"0 0 20 20\"\n                >\n                  <path\n                    fillRule=\"evenodd\"\n                    d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\"\n                    clipRule=\"evenodd\"\n                  />\n                </svg>\n                <div className=\"flex-1\">\n                  <h3 className=\"text-sm font-medium text-yellow-800 mb-2\">\n                    This {entityTypeLabel.toLowerCase()} has dependent records\n                  </h3>\n                  <p className=\"text-sm text-yellow-700 mb-3\">\n                    Deleting this {entityTypeLabel.toLowerCase()} will also affect{' '}\n                    <strong>{totalCount}</strong> related record{totalCount !== 1 ? 's' : ''}:\n                  </p>\n                  <ul className=\"space-y-1\">\n                    {dependentRecords.map((record) => (\n                      <li key={record.id} className=\"text-sm text-yellow-700\">\n                        â€¢ <strong>{record.count}</strong> {record.name}\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Deletion Type Selection */}\n          <div className=\"mb-6\">\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n              Deletion Type\n            </label>\n            <div className=\"space-y-3\">\n              {/* Soft Delete Option */}\n              <label className=\"flex items-start p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50\">\n                <input\n                  type=\"radio\"\n                  name=\"deletionType\"\n                  value=\"soft\"\n                  checked={deletionType === 'soft'}\n                  onChange={() => setDeletionType('soft')}\n                  className=\"mt-1 mr-3\"\n                />\n                <div className=\"flex-1\">\n                  <div className=\"font-medium text-gray-900\">\n                    Soft Delete (Recommended)\n                  </div>\n                  <div className=\"text-sm text-gray-600 mt-1\">\n                    Hide this {entityTypeLabel.toLowerCase()} and its dependent records.\n                    Can be restored later from the Deleted Items manager.\n                  </div>\n                </div>\n              </label>\n\n              {/* Permanent Delete Option */}\n              <label className=\"flex items-start p-4 border border-red-200 rounded-lg cursor-pointer hover:bg-red-50\">\n                <input\n                  type=\"radio\"\n                  name=\"deletionType\"\n                  value=\"permanent\"\n                  checked={deletionType === 'permanent'}\n                  onChange={() => setDeletionType('permanent')}\n                  className=\"mt-1 mr-3\"\n                />\n                <div className=\"flex-1\">\n                  <div className=\"font-medium text-red-900\">\n                    Permanent Delete\n                  </div>\n                  <div className=\"text-sm text-red-700 mt-1\">\n                    Permanently remove this {entityTypeLabel.toLowerCase()} and all dependent\n                    records from the database. <strong>This cannot be undone.</strong>\n                  </div>\n                </div>\n              </label>\n            </div>\n          </div>\n\n          {/* Confirmation Checkbox for Permanent Delete */}\n          {deletionType === 'permanent' && (\n            <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\n              <label className=\"flex items-start cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  id=\"confirmPermanent\"\n                  className=\"mt-1 mr-3\"\n                  required\n                />\n                <div className=\"text-sm text-red-800\">\n                  I understand that this action is permanent and cannot be undone.\n                  All dependent records will be permanently deleted.\n                </div>\n              </label>\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3\">\n          <button\n            type=\"button\"\n            onClick={onClose}\n            className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50\"\n          >\n            Cancel\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => {\n              if (deletionType === 'permanent') {\n                const checkbox = document.getElementById('confirmPermanent') as HTMLInputElement;\n                if (!checkbox?.checked) {\n                  alert('Please confirm that you understand this action is permanent.');\n                  return;\n                }\n              }\n              onConfirm(deletionType === 'permanent');\n            }}\n            className={`px-4 py-2 text-sm font-medium text-white rounded-md ${\n              deletionType === 'permanent'\n                ? 'bg-red-600 hover:bg-red-700'\n                : 'bg-emerald-600 hover:bg-emerald-700'\n            }`}\n          >\n            {deletionType === 'permanent' ? 'Permanently Delete' : 'Soft Delete'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]}