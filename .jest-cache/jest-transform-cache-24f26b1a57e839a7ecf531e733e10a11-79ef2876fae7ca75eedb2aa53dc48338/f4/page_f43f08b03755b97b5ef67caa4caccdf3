807c699363eabfb3b715dacb6cb4a9e5
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get default () {
        return PhotosPage;
    },
    get dynamic () {
        return dynamic;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const _supabasejs = require("@supabase/supabase-js");
const _AdminLayout = require("../../../components/admin/AdminLayout");
const _Toast = require("../../../components/ui/Toast");
const _SkeletonLoaders = require("../../../components/ui/SkeletonLoaders");
const dynamic = 'force-dynamic';
function PhotoPreviewModal({ photo, onClose, onApprove, onReject, onDelete }) {
    const [isProcessing, setIsProcessing] = (0, _react.useState)(false);
    const handleApprove = async ()=>{
        setIsProcessing(true);
        try {
            await onApprove(photo.id);
            onClose();
        } finally{
            setIsProcessing(false);
        }
    };
    const handleReject = async ()=>{
        setIsProcessing(true);
        try {
            await onReject(photo.id);
            onClose();
        } finally{
            setIsProcessing(false);
        }
    };
    const handleDelete = async ()=>{
        setIsProcessing(true);
        try {
            await onDelete(photo.id);
            onClose();
        } finally{
            setIsProcessing(false);
        }
    };
    // Close on Escape key
    (0, _react.useEffect)(()=>{
        const handleEscape = (e)=>{
            if (e.key === 'Escape') {
                onClose();
            }
        };
        window.addEventListener('keydown', handleEscape);
        return ()=>window.removeEventListener('keydown', handleEscape);
    }, [
        onClose
    ]);
    // Prevent body scroll
    (0, _react.useEffect)(()=>{
        document.body.style.overflow = 'hidden';
        return ()=>{
            document.body.style.overflow = 'unset';
        };
    }, []);
    return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
        className: "fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",
        onClick: onClose,
        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
            className: "bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",
            onClick: (e)=>e.stopPropagation(),
            children: [
                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "px-6 py-4 border-b border-sage-200 flex items-center justify-between",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                            className: "text-xl font-semibold text-sage-900",
                            children: "Photo Preview"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                            onClick: onClose,
                            className: "p-2 hover:bg-sage-100 rounded-lg transition-colors",
                            "aria-label": "Close modal",
                            children: "âœ•"
                        })
                    ]
                }),
                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "px-6 py-4",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            className: "mb-4",
                            children: /*#__PURE__*/ (0, _jsxruntime.jsx)("img", {
                                src: photo.photo_url,
                                alt: photo.alt_text || 'Photo preview',
                                className: "w-full h-auto rounded-lg"
                            })
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "space-y-2 text-sm",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                            className: "font-medium text-sage-700",
                                            children: "Status:"
                                        }),
                                        ' ',
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                            className: `px-2 py-1 rounded-full text-xs font-medium ${photo.moderation_status === 'approved' ? 'bg-jungle-100 text-jungle-700' : photo.moderation_status === 'rejected' ? 'bg-volcano-100 text-volcano-700' : 'bg-sunset-100 text-sunset-700'}`,
                                            children: photo.moderation_status
                                        })
                                    ]
                                }),
                                photo.caption && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                            className: "font-medium text-sage-700",
                                            children: "Caption:"
                                        }),
                                        ' ',
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                            className: "text-sage-600",
                                            children: photo.caption
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                            className: "font-medium text-sage-700",
                                            children: "Uploaded:"
                                        }),
                                        ' ',
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                            className: "text-sage-600",
                                            children: [
                                                new Date(photo.created_at).toLocaleDateString(),
                                                " at",
                                                ' ',
                                                new Date(photo.created_at).toLocaleTimeString()
                                            ]
                                        })
                                    ]
                                }),
                                photo.moderated_at && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                            className: "font-medium text-sage-700",
                                            children: "Moderated:"
                                        }),
                                        ' ',
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                            className: "text-sage-600",
                                            children: [
                                                new Date(photo.moderated_at).toLocaleDateString(),
                                                " at",
                                                ' ',
                                                new Date(photo.moderated_at).toLocaleTimeString()
                                            ]
                                        })
                                    ]
                                }),
                                photo.moderation_reason && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                            className: "font-medium text-sage-700",
                                            children: "Reason:"
                                        }),
                                        ' ',
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                            className: "text-sage-600",
                                            children: photo.moderation_reason
                                        })
                                    ]
                                })
                            ]
                        })
                    ]
                }),
                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "px-6 py-4 border-t border-sage-200 flex items-center justify-end gap-3",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                            onClick: handleDelete,
                            disabled: isProcessing,
                            className: "px-4 py-2 bg-volcano-500 hover:bg-volcano-600 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",
                            children: isProcessing ? 'Processing...' : 'Delete'
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                            onClick: handleReject,
                            disabled: isProcessing,
                            className: "px-4 py-2 bg-sage-200 hover:bg-sage-300 text-sage-900 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",
                            children: isProcessing ? 'Processing...' : 'Reject'
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                            onClick: handleApprove,
                            disabled: isProcessing,
                            className: "px-4 py-2 bg-jungle-500 hover:bg-jungle-600 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",
                            children: isProcessing ? 'Processing...' : 'Approve'
                        })
                    ]
                })
            ]
        })
    });
}
function PhotosPage() {
    const [photos, setPhotos] = (0, _react.useState)([]);
    const [loading, setLoading] = (0, _react.useState)(true);
    const [filter, setFilter] = (0, _react.useState)('pending');
    const [selectedPhoto, setSelectedPhoto] = (0, _react.useState)(null);
    const [toasts, setToasts] = (0, _react.useState)([]);
    const addToast = (0, _react.useCallback)((message, type)=>{
        const id = Date.now().toString();
        setToasts((prev)=>[
                ...prev,
                {
                    id,
                    message,
                    type
                }
            ]);
    }, []);
    const removeToast = (0, _react.useCallback)((id)=>{
        setToasts((prev)=>prev.filter((toast)=>toast.id !== id));
    }, []);
    const fetchPhotos = (0, _react.useCallback)(async ()=>{
        setLoading(true);
        try {
            const response = await fetch(`/api/admin/photos?moderation_status=${filter}&limit=100&offset=0`);
            const result = await response.json();
            if (result.success) {
                setPhotos(result.data.photos);
            } else {
                addToast(result.error.message || 'Failed to load photos', 'error');
            }
        } catch (error) {
            addToast('Failed to load photos', 'error');
        } finally{
            setLoading(false);
        }
    }, [
        filter,
        addToast
    ]);
    (0, _react.useEffect)(()=>{
        fetchPhotos();
    }, [
        fetchPhotos
    ]);
    /**
   * Set up real-time subscription for photo changes
   */ (0, _react.useEffect)(()=>{
        // Create Supabase client for real-time subscriptions
        const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
        const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;
        if (!supabaseUrl || !supabaseAnonKey) {
            console.error('Missing Supabase environment variables for real-time subscriptions');
            return;
        }
        const supabase = (0, _supabasejs.createClient)(supabaseUrl, supabaseAnonKey);
        // Subscribe to photo table changes
        const channel = supabase.channel('photos-changes').on('postgres_changes', {
            event: '*',
            schema: 'public',
            table: 'photos'
        }, (payload)=>{
            console.log('Photo change detected:', payload);
            // Update photo grid when photos are uploaded or moderated
            if (payload.eventType === 'INSERT') {
                addToast('New photo uploaded', 'info');
            } else if (payload.eventType === 'UPDATE') {
                addToast('Photo status updated', 'info');
            } else if (payload.eventType === 'DELETE') {
                addToast('Photo deleted', 'info');
            }
            // Refresh the photo list
            fetchPhotos();
            // Trigger event to update pending count badge in sidebar
            window.dispatchEvent(new CustomEvent('photoModerated'));
        }).subscribe();
        // Cleanup subscription on unmount
        return ()=>{
            supabase.removeChannel(channel);
        };
    }, [
        fetchPhotos,
        addToast
    ]);
    const handleApprove = async (id)=>{
        try {
            const response = await fetch(`/api/admin/photos/${id}/moderate`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    moderation_status: 'approved'
                })
            });
            const result = await response.json();
            if (result.success) {
                addToast('Photo approved successfully', 'success');
                await fetchPhotos();
                // Trigger event to update pending count in sidebar
                window.dispatchEvent(new CustomEvent('photoModerated'));
            } else {
                addToast(result.error.message || 'Failed to approve photo', 'error');
            }
        } catch (error) {
            addToast('Failed to approve photo', 'error');
        }
    };
    const handleReject = async (id)=>{
        try {
            const response = await fetch(`/api/admin/photos/${id}/moderate`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    moderation_status: 'rejected'
                })
            });
            const result = await response.json();
            if (result.success) {
                addToast('Photo rejected successfully', 'success');
                await fetchPhotos();
                // Trigger event to update pending count in sidebar
                window.dispatchEvent(new CustomEvent('photoModerated'));
            } else {
                addToast(result.error.message || 'Failed to reject photo', 'error');
            }
        } catch (error) {
            addToast('Failed to reject photo', 'error');
        }
    };
    const handleDelete = async (id)=>{
        try {
            const response = await fetch(`/api/admin/photos/${id}`, {
                method: 'DELETE'
            });
            const result = await response.json();
            if (result.success) {
                addToast('Photo deleted successfully', 'success');
                await fetchPhotos();
                // Trigger event to update pending count in sidebar
                window.dispatchEvent(new CustomEvent('photoModerated'));
            } else {
                addToast(result.error.message || 'Failed to delete photo', 'error');
            }
        } catch (error) {
            addToast('Failed to delete photo', 'error');
        }
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)(_AdminLayout.AdminLayout, {
        currentSection: "photos",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "space-y-6",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "flex items-center justify-between",
                        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("h1", {
                                    className: "text-3xl font-bold text-sage-900",
                                    children: "Photo Moderation"
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                    className: "text-sage-600 mt-1",
                                    children: "Review and moderate guest-uploaded photos"
                                })
                            ]
                        })
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex gap-2 border-b border-sage-200",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                onClick: ()=>setFilter('pending'),
                                className: `px-4 py-2 font-medium transition-colors ${filter === 'pending' ? 'text-jungle-600 border-b-2 border-jungle-600' : 'text-sage-600 hover:text-sage-900'}`,
                                children: "Pending"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                onClick: ()=>setFilter('approved'),
                                className: `px-4 py-2 font-medium transition-colors ${filter === 'approved' ? 'text-jungle-600 border-b-2 border-jungle-600' : 'text-sage-600 hover:text-sage-900'}`,
                                children: "Approved"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                onClick: ()=>setFilter('rejected'),
                                className: `px-4 py-2 font-medium transition-colors ${filter === 'rejected' ? 'text-jungle-600 border-b-2 border-jungle-600' : 'text-sage-600 hover:text-sage-900'}`,
                                children: "Rejected"
                            })
                        ]
                    }),
                    loading ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_SkeletonLoaders.GridSkeleton, {
                        items: 8,
                        columns: 4
                    }) : photos.length === 0 ? /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "text-center py-12",
                        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("p", {
                            className: "text-sage-600",
                            children: [
                                "No ",
                                filter,
                                " photos found"
                            ]
                        })
                    }) : /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",
                        children: photos.map((photo)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "group relative aspect-square bg-sage-100 rounded-lg overflow-hidden cursor-pointer hover:ring-2 hover:ring-jungle-500 transition-all",
                                onClick: ()=>setSelectedPhoto(photo),
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("img", {
                                        src: photo.photo_url,
                                        alt: photo.alt_text || 'Photo thumbnail',
                                        className: "w-full h-full object-cover"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                        className: "absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                        className: "absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-3 opacity-0 group-hover:opacity-100 transition-opacity",
                                        children: [
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                className: "text-white text-sm font-medium truncate",
                                                children: photo.caption || 'No caption'
                                            }),
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                className: "text-white text-xs opacity-75",
                                                children: new Date(photo.created_at).toLocaleDateString()
                                            })
                                        ]
                                    })
                                ]
                            }, photo.id))
                    })
                ]
            }),
            selectedPhoto && /*#__PURE__*/ (0, _jsxruntime.jsx)(PhotoPreviewModal, {
                photo: selectedPhoto,
                onClose: ()=>setSelectedPhoto(null),
                onApprove: handleApprove,
                onReject: handleReject,
                onDelete: handleDelete
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "fixed top-4 right-4 z-50 space-y-2",
                children: toasts.map((toast)=>/*#__PURE__*/ (0, _jsxruntime.jsx)(_Toast.Toast, {
                        id: toast.id,
                        message: toast.message,
                        type: toast.type,
                        onClose: ()=>removeToast(toast.id),
                        duration: 5000
                    }, toast.id))
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FkbWluL3Bob3Rvcy9wYWdlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmV4cG9ydCBjb25zdCBkeW5hbWljID0gJ2ZvcmNlLWR5bmFtaWMnO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5pbXBvcnQgeyBBZG1pbkxheW91dCB9IGZyb20gJ0AvY29tcG9uZW50cy9hZG1pbi9BZG1pbkxheW91dCc7XG5pbXBvcnQgeyBUb2FzdCB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9Ub2FzdCc7XG5pbXBvcnQgeyBHcmlkU2tlbGV0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvU2tlbGV0b25Mb2FkZXJzJztcblxuaW50ZXJmYWNlIFBob3RvIHtcbiAgaWQ6IHN0cmluZztcbiAgdXBsb2FkZXJfaWQ6IHN0cmluZztcbiAgcGhvdG9fdXJsOiBzdHJpbmc7XG4gIHN0b3JhZ2VfdHlwZTogJ2IyJyB8ICdzdXBhYmFzZSc7XG4gIHBhZ2VfdHlwZTogJ2V2ZW50JyB8ICdhY3Rpdml0eScgfCAnYWNjb21tb2RhdGlvbicgfCAnbWVtb3J5JztcbiAgcGFnZV9pZD86IHN0cmluZztcbiAgY2FwdGlvbj86IHN0cmluZztcbiAgYWx0X3RleHQ/OiBzdHJpbmc7XG4gIG1vZGVyYXRpb25fc3RhdHVzOiAncGVuZGluZycgfCAnYXBwcm92ZWQnIHwgJ3JlamVjdGVkJztcbiAgbW9kZXJhdGlvbl9yZWFzb24/OiBzdHJpbmc7XG4gIGRpc3BsYXlfb3JkZXI/OiBudW1iZXI7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgbW9kZXJhdGVkX2F0Pzogc3RyaW5nO1xuICB1cGRhdGVkX2F0OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBUb2FzdFN0YXRlIHtcbiAgaWQ6IHN0cmluZztcbiAgbWVzc2FnZTogc3RyaW5nO1xuICB0eXBlOiAnc3VjY2VzcycgfCAnZXJyb3InIHwgJ3dhcm5pbmcnIHwgJ2luZm8nO1xufVxuXG5pbnRlcmZhY2UgUGhvdG9QcmV2aWV3TW9kYWxQcm9wcyB7XG4gIHBob3RvOiBQaG90bztcbiAgb25DbG9zZTogKCkgPT4gdm9pZDtcbiAgb25BcHByb3ZlOiAoaWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgb25SZWplY3Q6IChpZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBvbkRlbGV0ZTogKGlkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XG59XG5cbmZ1bmN0aW9uIFBob3RvUHJldmlld01vZGFsKHsgcGhvdG8sIG9uQ2xvc2UsIG9uQXBwcm92ZSwgb25SZWplY3QsIG9uRGVsZXRlIH06IFBob3RvUHJldmlld01vZGFsUHJvcHMpIHtcbiAgY29uc3QgW2lzUHJvY2Vzc2luZywgc2V0SXNQcm9jZXNzaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICBjb25zdCBoYW5kbGVBcHByb3ZlID0gYXN5bmMgKCkgPT4ge1xuICAgIHNldElzUHJvY2Vzc2luZyh0cnVlKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgb25BcHByb3ZlKHBob3RvLmlkKTtcbiAgICAgIG9uQ2xvc2UoKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNQcm9jZXNzaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUmVqZWN0ID0gYXN5bmMgKCkgPT4ge1xuICAgIHNldElzUHJvY2Vzc2luZyh0cnVlKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgb25SZWplY3QocGhvdG8uaWQpO1xuICAgICAgb25DbG9zZSgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc1Byb2Nlc3NpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVEZWxldGUgPSBhc3luYyAoKSA9PiB7XG4gICAgc2V0SXNQcm9jZXNzaW5nKHRydWUpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBvbkRlbGV0ZShwaG90by5pZCk7XG4gICAgICBvbkNsb3NlKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzUHJvY2Vzc2luZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIENsb3NlIG9uIEVzY2FwZSBrZXlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVFc2NhcGUgPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICBvbkNsb3NlKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUVzY2FwZSk7XG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlRXNjYXBlKTtcbiAgfSwgW29uQ2xvc2VdKTtcblxuICAvLyBQcmV2ZW50IGJvZHkgc2Nyb2xsXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ3Vuc2V0JztcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgei01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTRcIlxuICAgICAgb25DbGljaz17b25DbG9zZX1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cImJnLXdoaXRlIHJvdW5kZWQteGwgc2hhZG93LTJ4bCBtYXgtdy00eGwgdy1mdWxsIG1heC1oLVs5MHZoXSBvdmVyZmxvdy15LWF1dG9cIlxuICAgICAgICBvbkNsaWNrPXsoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKX1cbiAgICAgID5cbiAgICAgICAgey8qIEhlYWRlciAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC02IHB5LTQgYm9yZGVyLWIgYm9yZGVyLXNhZ2UtMjAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgdGV4dC1zYWdlLTkwMFwiPlBob3RvIFByZXZpZXc8L2gyPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2xvc2V9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJwLTIgaG92ZXI6Ymctc2FnZS0xMDAgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICBhcmlhLWxhYmVsPVwiQ2xvc2UgbW9kYWxcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIOKclVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogQm9keSAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC02IHB5LTRcIj5cbiAgICAgICAgICB7LyogUGhvdG8gKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi00XCI+XG4gICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgIHNyYz17cGhvdG8ucGhvdG9fdXJsfVxuICAgICAgICAgICAgICBhbHQ9e3Bob3RvLmFsdF90ZXh0IHx8ICdQaG90byBwcmV2aWV3J31cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtYXV0byByb3VuZGVkLWxnXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogTWV0YWRhdGEgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTIgdGV4dC1zbVwiPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1zYWdlLTcwMFwiPlN0YXR1czo8L3NwYW4+eycgJ31cbiAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BweC0yIHB5LTEgcm91bmRlZC1mdWxsIHRleHQteHMgZm9udC1tZWRpdW0gJHtcbiAgICAgICAgICAgICAgICAgIHBob3RvLm1vZGVyYXRpb25fc3RhdHVzID09PSAnYXBwcm92ZWQnXG4gICAgICAgICAgICAgICAgICAgID8gJ2JnLWp1bmdsZS0xMDAgdGV4dC1qdW5nbGUtNzAwJ1xuICAgICAgICAgICAgICAgICAgICA6IHBob3RvLm1vZGVyYXRpb25fc3RhdHVzID09PSAncmVqZWN0ZWQnXG4gICAgICAgICAgICAgICAgICAgID8gJ2JnLXZvbGNhbm8tMTAwIHRleHQtdm9sY2Fuby03MDAnXG4gICAgICAgICAgICAgICAgICAgIDogJ2JnLXN1bnNldC0xMDAgdGV4dC1zdW5zZXQtNzAwJ1xuICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3Bob3RvLm1vZGVyYXRpb25fc3RhdHVzfVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHtwaG90by5jYXB0aW9uICYmIChcbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0ZXh0LXNhZ2UtNzAwXCI+Q2FwdGlvbjo8L3NwYW4+eycgJ31cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNhZ2UtNjAwXCI+e3Bob3RvLmNhcHRpb259PC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0ZXh0LXNhZ2UtNzAwXCI+VXBsb2FkZWQ6PC9zcGFuPnsnICd9XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc2FnZS02MDBcIj5cbiAgICAgICAgICAgICAgICB7bmV3IERhdGUocGhvdG8uY3JlYXRlZF9hdCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9IGF0eycgJ31cbiAgICAgICAgICAgICAgICB7bmV3IERhdGUocGhvdG8uY3JlYXRlZF9hdCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAge3Bob3RvLm1vZGVyYXRlZF9hdCAmJiAoXG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1zYWdlLTcwMFwiPk1vZGVyYXRlZDo8L3NwYW4+eycgJ31cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNhZ2UtNjAwXCI+XG4gICAgICAgICAgICAgICAgICB7bmV3IERhdGUocGhvdG8ubW9kZXJhdGVkX2F0KS50b0xvY2FsZURhdGVTdHJpbmcoKX0gYXR7JyAnfVxuICAgICAgICAgICAgICAgICAge25ldyBEYXRlKHBob3RvLm1vZGVyYXRlZF9hdCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7cGhvdG8ubW9kZXJhdGlvbl9yZWFzb24gJiYgKFxuICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtIHRleHQtc2FnZS03MDBcIj5SZWFzb246PC9zcGFuPnsnICd9XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zYWdlLTYwMFwiPntwaG90by5tb2RlcmF0aW9uX3JlYXNvbn08L3NwYW4+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIEZvb3RlciAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC02IHB5LTQgYm9yZGVyLXQgYm9yZGVyLXNhZ2UtMjAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktZW5kIGdhcC0zXCI+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17aGFuZGxlRGVsZXRlfVxuICAgICAgICAgICAgZGlzYWJsZWQ9e2lzUHJvY2Vzc2luZ31cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTQgcHktMiBiZy12b2xjYW5vLTUwMCBob3ZlcjpiZy12b2xjYW5vLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnMgZGlzYWJsZWQ6b3BhY2l0eS01MCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWRcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtpc1Byb2Nlc3NpbmcgPyAnUHJvY2Vzc2luZy4uLicgOiAnRGVsZXRlJ31cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVSZWplY3R9XG4gICAgICAgICAgICBkaXNhYmxlZD17aXNQcm9jZXNzaW5nfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIGJnLXNhZ2UtMjAwIGhvdmVyOmJnLXNhZ2UtMzAwIHRleHQtc2FnZS05MDAgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAge2lzUHJvY2Vzc2luZyA/ICdQcm9jZXNzaW5nLi4uJyA6ICdSZWplY3QnfVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFwcHJvdmV9XG4gICAgICAgICAgICBkaXNhYmxlZD17aXNQcm9jZXNzaW5nfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIGJnLWp1bmdsZS01MDAgaG92ZXI6YmctanVuZ2xlLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnMgZGlzYWJsZWQ6b3BhY2l0eS01MCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWRcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtpc1Byb2Nlc3NpbmcgPyAnUHJvY2Vzc2luZy4uLicgOiAnQXBwcm92ZSd9XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFBob3Rvc1BhZ2UoKSB7XG4gIGNvbnN0IFtwaG90b3MsIHNldFBob3Rvc10gPSB1c2VTdGF0ZTxQaG90b1tdPihbXSk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbZmlsdGVyLCBzZXRGaWx0ZXJdID0gdXNlU3RhdGU8J3BlbmRpbmcnIHwgJ2FwcHJvdmVkJyB8ICdyZWplY3RlZCc+KCdwZW5kaW5nJyk7XG4gIGNvbnN0IFtzZWxlY3RlZFBob3RvLCBzZXRTZWxlY3RlZFBob3RvXSA9IHVzZVN0YXRlPFBob3RvIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFt0b2FzdHMsIHNldFRvYXN0c10gPSB1c2VTdGF0ZTxUb2FzdFN0YXRlW10+KFtdKTtcblxuICBjb25zdCBhZGRUb2FzdCA9IHVzZUNhbGxiYWNrKChtZXNzYWdlOiBzdHJpbmcsIHR5cGU6IFRvYXN0U3RhdGVbJ3R5cGUnXSkgPT4ge1xuICAgIGNvbnN0IGlkID0gRGF0ZS5ub3coKS50b1N0cmluZygpO1xuICAgIHNldFRvYXN0cygocHJldikgPT4gWy4uLnByZXYsIHsgaWQsIG1lc3NhZ2UsIHR5cGUgfV0pO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgcmVtb3ZlVG9hc3QgPSB1c2VDYWxsYmFjaygoaWQ6IHN0cmluZykgPT4ge1xuICAgIHNldFRvYXN0cygocHJldikgPT4gcHJldi5maWx0ZXIoKHRvYXN0KSA9PiB0b2FzdC5pZCAhPT0gaWQpKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGZldGNoUGhvdG9zID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgIGAvYXBpL2FkbWluL3Bob3Rvcz9tb2RlcmF0aW9uX3N0YXR1cz0ke2ZpbHRlcn0mbGltaXQ9MTAwJm9mZnNldD0wYFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHNldFBob3RvcyhyZXN1bHQuZGF0YS5waG90b3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWRkVG9hc3QocmVzdWx0LmVycm9yLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBsb2FkIHBob3RvcycsICdlcnJvcicpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhZGRUb2FzdCgnRmFpbGVkIHRvIGxvYWQgcGhvdG9zJywgJ2Vycm9yJyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfSwgW2ZpbHRlciwgYWRkVG9hc3RdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoUGhvdG9zKCk7XG4gIH0sIFtmZXRjaFBob3Rvc10pO1xuXG4gIC8qKlxuICAgKiBTZXQgdXAgcmVhbC10aW1lIHN1YnNjcmlwdGlvbiBmb3IgcGhvdG8gY2hhbmdlc1xuICAgKi9cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBDcmVhdGUgU3VwYWJhc2UgY2xpZW50IGZvciByZWFsLXRpbWUgc3Vic2NyaXB0aW9uc1xuICAgIGNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMO1xuICAgIGNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZO1xuXG4gICAgaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VBbm9uS2V5KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdNaXNzaW5nIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcyBmb3IgcmVhbC10aW1lIHN1YnNjcmlwdGlvbnMnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcblxuICAgIC8vIFN1YnNjcmliZSB0byBwaG90byB0YWJsZSBjaGFuZ2VzXG4gICAgY29uc3QgY2hhbm5lbCA9IHN1cGFiYXNlXG4gICAgICAuY2hhbm5lbCgncGhvdG9zLWNoYW5nZXMnKVxuICAgICAgLm9uKFxuICAgICAgICAncG9zdGdyZXNfY2hhbmdlcycsXG4gICAgICAgIHtcbiAgICAgICAgICBldmVudDogJyonLCAvLyBMaXN0ZW4gdG8gYWxsIGV2ZW50cyAoSU5TRVJULCBVUERBVEUsIERFTEVURSlcbiAgICAgICAgICBzY2hlbWE6ICdwdWJsaWMnLFxuICAgICAgICAgIHRhYmxlOiAncGhvdG9zJyxcbiAgICAgICAgfSxcbiAgICAgICAgKHBheWxvYWQpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnUGhvdG8gY2hhbmdlIGRldGVjdGVkOicsIHBheWxvYWQpO1xuXG4gICAgICAgICAgLy8gVXBkYXRlIHBob3RvIGdyaWQgd2hlbiBwaG90b3MgYXJlIHVwbG9hZGVkIG9yIG1vZGVyYXRlZFxuICAgICAgICAgIGlmIChwYXlsb2FkLmV2ZW50VHlwZSA9PT0gJ0lOU0VSVCcpIHtcbiAgICAgICAgICAgIGFkZFRvYXN0KCdOZXcgcGhvdG8gdXBsb2FkZWQnLCAnaW5mbycpO1xuICAgICAgICAgIH0gZWxzZSBpZiAocGF5bG9hZC5ldmVudFR5cGUgPT09ICdVUERBVEUnKSB7XG4gICAgICAgICAgICBhZGRUb2FzdCgnUGhvdG8gc3RhdHVzIHVwZGF0ZWQnLCAnaW5mbycpO1xuICAgICAgICAgIH0gZWxzZSBpZiAocGF5bG9hZC5ldmVudFR5cGUgPT09ICdERUxFVEUnKSB7XG4gICAgICAgICAgICBhZGRUb2FzdCgnUGhvdG8gZGVsZXRlZCcsICdpbmZvJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gUmVmcmVzaCB0aGUgcGhvdG8gbGlzdFxuICAgICAgICAgIGZldGNoUGhvdG9zKCk7XG5cbiAgICAgICAgICAvLyBUcmlnZ2VyIGV2ZW50IHRvIHVwZGF0ZSBwZW5kaW5nIGNvdW50IGJhZGdlIGluIHNpZGViYXJcbiAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3Bob3RvTW9kZXJhdGVkJykpO1xuICAgICAgICB9XG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKCk7XG5cbiAgICAvLyBDbGVhbnVwIHN1YnNjcmlwdGlvbiBvbiB1bm1vdW50XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHN1cGFiYXNlLnJlbW92ZUNoYW5uZWwoY2hhbm5lbCk7XG4gICAgfTtcbiAgfSwgW2ZldGNoUGhvdG9zLCBhZGRUb2FzdF0pO1xuXG4gIGNvbnN0IGhhbmRsZUFwcHJvdmUgPSBhc3luYyAoaWQ6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2FkbWluL3Bob3Rvcy8ke2lkfS9tb2RlcmF0ZWAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG1vZGVyYXRpb25fc3RhdHVzOiAnYXBwcm92ZWQnIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGFkZFRvYXN0KCdQaG90byBhcHByb3ZlZCBzdWNjZXNzZnVsbHknLCAnc3VjY2VzcycpO1xuICAgICAgICBhd2FpdCBmZXRjaFBob3RvcygpO1xuICAgICAgICAvLyBUcmlnZ2VyIGV2ZW50IHRvIHVwZGF0ZSBwZW5kaW5nIGNvdW50IGluIHNpZGViYXJcbiAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdwaG90b01vZGVyYXRlZCcpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFkZFRvYXN0KHJlc3VsdC5lcnJvci5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gYXBwcm92ZSBwaG90bycsICdlcnJvcicpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhZGRUb2FzdCgnRmFpbGVkIHRvIGFwcHJvdmUgcGhvdG8nLCAnZXJyb3InKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUmVqZWN0ID0gYXN5bmMgKGlkOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9hZG1pbi9waG90b3MvJHtpZH0vbW9kZXJhdGVgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBtb2RlcmF0aW9uX3N0YXR1czogJ3JlamVjdGVkJyB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBhZGRUb2FzdCgnUGhvdG8gcmVqZWN0ZWQgc3VjY2Vzc2Z1bGx5JywgJ3N1Y2Nlc3MnKTtcbiAgICAgICAgYXdhaXQgZmV0Y2hQaG90b3MoKTtcbiAgICAgICAgLy8gVHJpZ2dlciBldmVudCB0byB1cGRhdGUgcGVuZGluZyBjb3VudCBpbiBzaWRlYmFyXG4gICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgncGhvdG9Nb2RlcmF0ZWQnKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhZGRUb2FzdChyZXN1bHQuZXJyb3IubWVzc2FnZSB8fCAnRmFpbGVkIHRvIHJlamVjdCBwaG90bycsICdlcnJvcicpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhZGRUb2FzdCgnRmFpbGVkIHRvIHJlamVjdCBwaG90bycsICdlcnJvcicpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVEZWxldGUgPSBhc3luYyAoaWQ6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2FkbWluL3Bob3Rvcy8ke2lkfWAsIHtcbiAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBhZGRUb2FzdCgnUGhvdG8gZGVsZXRlZCBzdWNjZXNzZnVsbHknLCAnc3VjY2VzcycpO1xuICAgICAgICBhd2FpdCBmZXRjaFBob3RvcygpO1xuICAgICAgICAvLyBUcmlnZ2VyIGV2ZW50IHRvIHVwZGF0ZSBwZW5kaW5nIGNvdW50IGluIHNpZGViYXJcbiAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdwaG90b01vZGVyYXRlZCcpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFkZFRvYXN0KHJlc3VsdC5lcnJvci5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gZGVsZXRlIHBob3RvJywgJ2Vycm9yJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFkZFRvYXN0KCdGYWlsZWQgdG8gZGVsZXRlIHBob3RvJywgJ2Vycm9yJyk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPEFkbWluTGF5b3V0IGN1cnJlbnRTZWN0aW9uPVwicGhvdG9zXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNlwiPlxuICAgICAgICB7LyogSGVhZGVyICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC0zeGwgZm9udC1ib2xkIHRleHQtc2FnZS05MDBcIj5QaG90byBNb2RlcmF0aW9uPC9oMT5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc2FnZS02MDAgbXQtMVwiPlJldmlldyBhbmQgbW9kZXJhdGUgZ3Vlc3QtdXBsb2FkZWQgcGhvdG9zPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogRmlsdGVyIHRhYnMgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMiBib3JkZXItYiBib3JkZXItc2FnZS0yMDBcIj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRGaWx0ZXIoJ3BlbmRpbmcnKX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17YHB4LTQgcHktMiBmb250LW1lZGl1bSB0cmFuc2l0aW9uLWNvbG9ycyAke1xuICAgICAgICAgICAgICBmaWx0ZXIgPT09ICdwZW5kaW5nJ1xuICAgICAgICAgICAgICAgID8gJ3RleHQtanVuZ2xlLTYwMCBib3JkZXItYi0yIGJvcmRlci1qdW5nbGUtNjAwJ1xuICAgICAgICAgICAgICAgIDogJ3RleHQtc2FnZS02MDAgaG92ZXI6dGV4dC1zYWdlLTkwMCdcbiAgICAgICAgICAgIH1gfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIFBlbmRpbmdcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRGaWx0ZXIoJ2FwcHJvdmVkJyl9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2BweC00IHB5LTIgZm9udC1tZWRpdW0gdHJhbnNpdGlvbi1jb2xvcnMgJHtcbiAgICAgICAgICAgICAgZmlsdGVyID09PSAnYXBwcm92ZWQnXG4gICAgICAgICAgICAgICAgPyAndGV4dC1qdW5nbGUtNjAwIGJvcmRlci1iLTIgYm9yZGVyLWp1bmdsZS02MDAnXG4gICAgICAgICAgICAgICAgOiAndGV4dC1zYWdlLTYwMCBob3Zlcjp0ZXh0LXNhZ2UtOTAwJ1xuICAgICAgICAgICAgfWB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgQXBwcm92ZWRcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRGaWx0ZXIoJ3JlamVjdGVkJyl9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2BweC00IHB5LTIgZm9udC1tZWRpdW0gdHJhbnNpdGlvbi1jb2xvcnMgJHtcbiAgICAgICAgICAgICAgZmlsdGVyID09PSAncmVqZWN0ZWQnXG4gICAgICAgICAgICAgICAgPyAndGV4dC1qdW5nbGUtNjAwIGJvcmRlci1iLTIgYm9yZGVyLWp1bmdsZS02MDAnXG4gICAgICAgICAgICAgICAgOiAndGV4dC1zYWdlLTYwMCBob3Zlcjp0ZXh0LXNhZ2UtOTAwJ1xuICAgICAgICAgICAgfWB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgUmVqZWN0ZWRcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIFBob3RvIGdyaWQgKi99XG4gICAgICAgIHtsb2FkaW5nID8gKFxuICAgICAgICAgIDxHcmlkU2tlbGV0b24gaXRlbXM9ezh9IGNvbHVtbnM9ezR9IC8+XG4gICAgICAgICkgOiBwaG90b3MubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgcHktMTJcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc2FnZS02MDBcIj5ObyB7ZmlsdGVyfSBwaG90b3MgZm91bmQ8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIHNtOmdyaWQtY29scy0yIG1kOmdyaWQtY29scy0zIGxnOmdyaWQtY29scy00IGdhcC00XCI+XG4gICAgICAgICAgICB7cGhvdG9zLm1hcCgocGhvdG8pID0+IChcbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGtleT17cGhvdG8uaWR9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZ3JvdXAgcmVsYXRpdmUgYXNwZWN0LXNxdWFyZSBiZy1zYWdlLTEwMCByb3VuZGVkLWxnIG92ZXJmbG93LWhpZGRlbiBjdXJzb3ItcG9pbnRlciBob3ZlcjpyaW5nLTIgaG92ZXI6cmluZy1qdW5nbGUtNTAwIHRyYW5zaXRpb24tYWxsXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTZWxlY3RlZFBob3RvKHBob3RvKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgIHNyYz17cGhvdG8ucGhvdG9fdXJsfVxuICAgICAgICAgICAgICAgICAgYWx0PXtwaG90by5hbHRfdGV4dCB8fCAnUGhvdG8gdGh1bWJuYWlsJ31cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgb2JqZWN0LWNvdmVyXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTAgZ3JvdXAtaG92ZXI6Ymctb3BhY2l0eS0zMCB0cmFuc2l0aW9uLWFsbFwiIC8+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBib3R0b20tMCBsZWZ0LTAgcmlnaHQtMCBiZy1ncmFkaWVudC10by10IGZyb20tYmxhY2sgdG8tdHJhbnNwYXJlbnQgcC0zIG9wYWNpdHktMCBncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCB0cmFuc2l0aW9uLW9wYWNpdHlcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtd2hpdGUgdGV4dC1zbSBmb250LW1lZGl1bSB0cnVuY2F0ZVwiPlxuICAgICAgICAgICAgICAgICAgICB7cGhvdG8uY2FwdGlvbiB8fCAnTm8gY2FwdGlvbid9XG4gICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlIHRleHQteHMgb3BhY2l0eS03NVwiPlxuICAgICAgICAgICAgICAgICAgICB7bmV3IERhdGUocGhvdG8uY3JlYXRlZF9hdCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9XG4gICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIFBob3RvIHByZXZpZXcgbW9kYWwgKi99XG4gICAgICB7c2VsZWN0ZWRQaG90byAmJiAoXG4gICAgICAgIDxQaG90b1ByZXZpZXdNb2RhbFxuICAgICAgICAgIHBob3RvPXtzZWxlY3RlZFBob3RvfVxuICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHNldFNlbGVjdGVkUGhvdG8obnVsbCl9XG4gICAgICAgICAgb25BcHByb3ZlPXtoYW5kbGVBcHByb3ZlfVxuICAgICAgICAgIG9uUmVqZWN0PXtoYW5kbGVSZWplY3R9XG4gICAgICAgICAgb25EZWxldGU9e2hhbmRsZURlbGV0ZX1cbiAgICAgICAgLz5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBUb2FzdCBub3RpZmljYXRpb25zICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCB0b3AtNCByaWdodC00IHotNTAgc3BhY2UteS0yXCI+XG4gICAgICAgIHt0b2FzdHMubWFwKCh0b2FzdCkgPT4gKFxuICAgICAgICAgIDxUb2FzdFxuICAgICAgICAgICAga2V5PXt0b2FzdC5pZH1cbiAgICAgICAgICAgIGlkPXt0b2FzdC5pZH1cbiAgICAgICAgICAgIG1lc3NhZ2U9e3RvYXN0Lm1lc3NhZ2V9XG4gICAgICAgICAgICB0eXBlPXt0b2FzdC50eXBlfVxuICAgICAgICAgICAgb25DbG9zZT17KCkgPT4gcmVtb3ZlVG9hc3QodG9hc3QuaWQpfVxuICAgICAgICAgICAgZHVyYXRpb249ezUwMDB9XG4gICAgICAgICAgLz5cbiAgICAgICAgKSl9XG4gICAgICA8L2Rpdj5cbiAgICA8L0FkbWluTGF5b3V0PlxuICApO1xufVxuIl0sIm5hbWVzIjpbIlBob3Rvc1BhZ2UiLCJkeW5hbWljIiwiUGhvdG9QcmV2aWV3TW9kYWwiLCJwaG90byIsIm9uQ2xvc2UiLCJvbkFwcHJvdmUiLCJvblJlamVjdCIsIm9uRGVsZXRlIiwiaXNQcm9jZXNzaW5nIiwic2V0SXNQcm9jZXNzaW5nIiwidXNlU3RhdGUiLCJoYW5kbGVBcHByb3ZlIiwiaWQiLCJoYW5kbGVSZWplY3QiLCJoYW5kbGVEZWxldGUiLCJ1c2VFZmZlY3QiLCJoYW5kbGVFc2NhcGUiLCJlIiwia2V5Iiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkb2N1bWVudCIsImJvZHkiLCJzdHlsZSIsIm92ZXJmbG93IiwiZGl2IiwiY2xhc3NOYW1lIiwib25DbGljayIsInN0b3BQcm9wYWdhdGlvbiIsImgyIiwiYnV0dG9uIiwiYXJpYS1sYWJlbCIsImltZyIsInNyYyIsInBob3RvX3VybCIsImFsdCIsImFsdF90ZXh0Iiwic3BhbiIsIm1vZGVyYXRpb25fc3RhdHVzIiwiY2FwdGlvbiIsIkRhdGUiLCJjcmVhdGVkX2F0IiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwibW9kZXJhdGVkX2F0IiwibW9kZXJhdGlvbl9yZWFzb24iLCJkaXNhYmxlZCIsInBob3RvcyIsInNldFBob3RvcyIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwiZmlsdGVyIiwic2V0RmlsdGVyIiwic2VsZWN0ZWRQaG90byIsInNldFNlbGVjdGVkUGhvdG8iLCJ0b2FzdHMiLCJzZXRUb2FzdHMiLCJhZGRUb2FzdCIsInVzZUNhbGxiYWNrIiwibWVzc2FnZSIsInR5cGUiLCJub3ciLCJ0b1N0cmluZyIsInByZXYiLCJyZW1vdmVUb2FzdCIsInRvYXN0IiwiZmV0Y2hQaG90b3MiLCJyZXNwb25zZSIsImZldGNoIiwicmVzdWx0IiwianNvbiIsInN1Y2Nlc3MiLCJkYXRhIiwiZXJyb3IiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImNvbnNvbGUiLCJzdXBhYmFzZSIsImNyZWF0ZUNsaWVudCIsImNoYW5uZWwiLCJvbiIsImV2ZW50Iiwic2NoZW1hIiwidGFibGUiLCJwYXlsb2FkIiwibG9nIiwiZXZlbnRUeXBlIiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50Iiwic3Vic2NyaWJlIiwicmVtb3ZlQ2hhbm5lbCIsIm1ldGhvZCIsImhlYWRlcnMiLCJKU09OIiwic3RyaW5naWZ5IiwiQWRtaW5MYXlvdXQiLCJjdXJyZW50U2VjdGlvbiIsImgxIiwicCIsIkdyaWRTa2VsZXRvbiIsIml0ZW1zIiwiY29sdW1ucyIsImxlbmd0aCIsIm1hcCIsIlRvYXN0IiwiZHVyYXRpb24iXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7UUF5TUE7ZUFBd0JBOztRQXZNWEM7ZUFBQUE7Ozs7dUJBRW9DOzRCQUNwQjs2QkFDRDt1QkFDTjtpQ0FDTztBQU50QixNQUFNQSxVQUFVO0FBdUN2QixTQUFTQyxrQkFBa0IsRUFBRUMsS0FBSyxFQUFFQyxPQUFPLEVBQUVDLFNBQVMsRUFBRUMsUUFBUSxFQUFFQyxRQUFRLEVBQTBCO0lBQ2xHLE1BQU0sQ0FBQ0MsY0FBY0MsZ0JBQWdCLEdBQUdDLElBQUFBLGVBQVEsRUFBQztJQUVqRCxNQUFNQyxnQkFBZ0I7UUFDcEJGLGdCQUFnQjtRQUNoQixJQUFJO1lBQ0YsTUFBTUosVUFBVUYsTUFBTVMsRUFBRTtZQUN4QlI7UUFDRixTQUFVO1lBQ1JLLGdCQUFnQjtRQUNsQjtJQUNGO0lBRUEsTUFBTUksZUFBZTtRQUNuQkosZ0JBQWdCO1FBQ2hCLElBQUk7WUFDRixNQUFNSCxTQUFTSCxNQUFNUyxFQUFFO1lBQ3ZCUjtRQUNGLFNBQVU7WUFDUkssZ0JBQWdCO1FBQ2xCO0lBQ0Y7SUFFQSxNQUFNSyxlQUFlO1FBQ25CTCxnQkFBZ0I7UUFDaEIsSUFBSTtZQUNGLE1BQU1GLFNBQVNKLE1BQU1TLEVBQUU7WUFDdkJSO1FBQ0YsU0FBVTtZQUNSSyxnQkFBZ0I7UUFDbEI7SUFDRjtJQUVBLHNCQUFzQjtJQUN0Qk0sSUFBQUEsZ0JBQVMsRUFBQztRQUNSLE1BQU1DLGVBQWUsQ0FBQ0M7WUFDcEIsSUFBSUEsRUFBRUMsR0FBRyxLQUFLLFVBQVU7Z0JBQ3RCZDtZQUNGO1FBQ0Y7UUFDQWUsT0FBT0MsZ0JBQWdCLENBQUMsV0FBV0o7UUFDbkMsT0FBTyxJQUFNRyxPQUFPRSxt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