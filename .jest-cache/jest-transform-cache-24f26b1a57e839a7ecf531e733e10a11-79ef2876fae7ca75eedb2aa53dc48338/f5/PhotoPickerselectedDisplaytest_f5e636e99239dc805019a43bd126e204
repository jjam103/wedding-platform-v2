8ab2c0eecea087298a015c3fccdd9d59
/**
 * PhotoPicker Selected Photos Display Tests
 * 
 * Tests the selected photos display functionality in PhotoPicker,
 * including thumbnail display, captions, remove buttons, and clear all.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _PhotoPicker = require("./PhotoPicker");
// Mock fetch
global.fetch = jest.fn();
describe('PhotoPicker - Selected Photos Display', ()=>{
    const mockPhotos = [
        {
            id: 'photo-1',
            photo_url: 'https://example.com/photo1.jpg',
            caption: 'Beautiful sunset',
            alt_text: 'Sunset over ocean',
            moderation_status: 'approved',
            created_at: '2024-01-01T00:00:00Z'
        },
        {
            id: 'photo-2',
            photo_url: 'https://example.com/photo2.jpg',
            caption: 'Mountain view',
            alt_text: 'Snow-capped mountains',
            moderation_status: 'approved',
            created_at: '2024-01-02T00:00:00Z'
        },
        {
            id: 'photo-3',
            photo_url: 'https://example.com/photo3.jpg',
            caption: 'Beach scene',
            moderation_status: 'approved',
            created_at: '2024-01-03T00:00:00Z'
        }
    ];
    beforeEach(()=>{
        // Reset fetch mock
        global.fetch.mockReset();
    });
    afterEach(()=>{
        jest.clearAllMocks();
    });
    describe('Selected Photos Section Display', ()=>{
        it('should display selected photos section when photos are selected', async ()=>{
            // Mock API responses for selected photos
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[1]
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1',
                    'photo-2'
                ],
                onSelectionChange: onSelectionChange
            }));
            // Wait for photos to load
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/admin/photos/photo-1');
                expect(global.fetch).toHaveBeenCalledWith('/api/admin/photos/photo-2');
            });
            // Should show selected photos section
            await (0, _react.waitFor)(()=>{
                const heading = _react.screen.getByText(/Selected Photos \(2\)/i);
                expect(heading).toBeInTheDocument();
            });
        });
        it('should not display selected photos section when no photos selected', ()=>{
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [],
                onSelectionChange: onSelectionChange
            }));
            // Should not show selected photos section
            const heading = _react.screen.queryByText(/Selected Photos/i);
            expect(heading).not.toBeInTheDocument();
        });
        it('should display correct photo count', async ()=>{
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[1]
                    })
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[2]
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1',
                    'photo-2',
                    'photo-3'
                ],
                onSelectionChange: onSelectionChange
            }));
            await (0, _react.waitFor)(()=>{
                const heading = _react.screen.getByText(/Selected Photos \(3\)/i);
                expect(heading).toBeInTheDocument();
            });
        });
    });
    describe('Photo Thumbnails Display', ()=>{
        it('should display thumbnails for selected photos', async ()=>{
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[1]
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1',
                    'photo-2'
                ],
                onSelectionChange: onSelectionChange
            }));
            await (0, _react.waitFor)(()=>{
                const images = _react.screen.getAllByRole('img');
                expect(images.length).toBeGreaterThanOrEqual(2);
            });
        });
        it('should use photo_url field for thumbnails', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1'
                ],
                onSelectionChange: onSelectionChange
            }));
            await (0, _react.waitFor)(()=>{
                const image = _react.screen.getByAltText(/Beautiful sunset/i);
                expect(image).toHaveAttribute('src', 'https://example.com/photo1.jpg');
            });
        });
        it('should display photo captions', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1'
                ],
                onSelectionChange: onSelectionChange
            }));
            await (0, _react.waitFor)(()=>{
                const caption = _react.screen.getByText('Beautiful sunset');
                expect(caption).toBeInTheDocument();
            });
        });
        it('should handle photos without captions', async ()=>{
            const photoWithoutCaption = {
                ...mockPhotos[0],
                caption: undefined
            };
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: photoWithoutCaption
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1'
                ],
                onSelectionChange: onSelectionChange
            }));
            await (0, _react.waitFor)(()=>{
                const image = _react.screen.getByAltText(/Sunset over ocean/i);
                expect(image).toBeInTheDocument();
            });
            // Caption should not be displayed
            const caption = _react.screen.queryByText('Beautiful sunset');
            expect(caption).not.toBeInTheDocument();
        });
    });
    describe('Remove Individual Photo', ()=>{
        it('should display remove button on hover', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1'
                ],
                onSelectionChange: onSelectionChange
            }));
            await (0, _react.waitFor)(()=>{
                const removeButton = _react.screen.getByLabelText('Remove photo');
                expect(removeButton).toBeInTheDocument();
            });
        });
        it('should call onSelectionChange when remove button clicked', async ()=>{
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[1]
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1',
                    'photo-2'
                ],
                onSelectionChange: onSelectionChange
            }));
            await (0, _react.waitFor)(()=>{
                const removeButtons = _react.screen.getAllByLabelText('Remove photo');
                expect(removeButtons.length).toBe(2);
            });
            // Click first remove button
            const removeButtons = _react.screen.getAllByLabelText('Remove photo');
            _react.fireEvent.click(removeButtons[0]);
            // Should call onSelectionChange with photo-1 removed
            expect(onSelectionChange).toHaveBeenCalledWith([
                'photo-2'
            ]);
        });
        it('should remove correct photo when multiple photos selected', async ()=>{
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[1]
                    })
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[2]
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1',
                    'photo-2',
                    'photo-3'
                ],
                onSelectionChange: onSelectionChange
            }));
            await (0, _react.waitFor)(()=>{
                const removeButtons = _react.screen.getAllByLabelText('Remove photo');
                expect(removeButtons.length).toBe(3);
            });
            // Click second remove button (photo-2)
            const removeButtons = _react.screen.getAllByLabelText('Remove photo');
            _react.fireEvent.click(removeButtons[1]);
            // Should call onSelectionChange with photo-2 removed
            expect(onSelectionChange).toHaveBeenCalledWith([
                'photo-1',
                'photo-3'
            ]);
        });
        it('should disable remove button when disabled prop is true', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1'
                ],
                onSelectionChange: onSelectionChange,
                disabled: true
            }));
            await (0, _react.waitFor)(()=>{
                const removeButton = _react.screen.getByLabelText('Remove photo');
                expect(removeButton).toBeDisabled();
            });
        });
    });
    describe('Clear All Functionality', ()=>{
        it('should display "Clear All" button when photos selected', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1'
                ],
                onSelectionChange: onSelectionChange
            }));
            await (0, _react.waitFor)(()=>{
                const clearButton = _react.screen.getByText('Clear All');
                expect(clearButton).toBeInTheDocument();
            });
        });
        it('should call onSelectionChange with empty array when Clear All clicked', async ()=>{
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[1]
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1',
                    'photo-2'
                ],
                onSelectionChange: onSelectionChange
            }));
            await (0, _react.waitFor)(()=>{
                const clearButton = _react.screen.getByText('Clear All');
                expect(clearButton).toBeInTheDocument();
            });
            // Click Clear All button
            const clearButton = _react.screen.getByText('Clear All');
            _react.fireEvent.click(clearButton);
            // Should call onSelectionChange with empty array
            expect(onSelectionChange).toHaveBeenCalledWith([]);
        });
        it('should disable Clear All button when disabled prop is true', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1'
                ],
                onSelectionChange: onSelectionChange,
                disabled: true
            }));
            await (0, _react.waitFor)(()=>{
                const clearButton = _react.screen.getByText('Clear All');
                expect(clearButton).toBeDisabled();
            });
        });
        it('should clear all photos regardless of count', async ()=>{
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[1]
                    })
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[2]
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1',
                    'photo-2',
                    'photo-3'
                ],
                onSelectionChange: onSelectionChange
            }));
            await (0, _react.waitFor)(()=>{
                const heading = _react.screen.getByText(/Selected Photos \(3\)/i);
                expect(heading).toBeInTheDocument();
            });
            // Click Clear All
            const clearButton = _react.screen.getByText('Clear All');
            _react.fireEvent.click(clearButton);
            // Should clear all 3 photos
            expect(onSelectionChange).toHaveBeenCalledWith([]);
        });
    });
    describe('Grid Layout', ()=>{
        it('should display photos in grid layout', async ()=>{
            global.fetch.mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[1]
                    })
            }).mockResolvedValueOnce({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[2]
                    })
            });
            const onSelectionChange = jest.fn();
            const { container } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1',
                    'photo-2',
                    'photo-3'
                ],
                onSelectionChange: onSelectionChange
            }));
            await (0, _react.waitFor)(()=>{
                const grid = container.querySelector('.grid-cols-4');
                expect(grid).toBeInTheDocument();
            });
        });
        it('should maintain aspect ratio for thumbnails', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            });
            const onSelectionChange = jest.fn();
            const { container } = (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1'
                ],
                onSelectionChange: onSelectionChange
            }));
            await (0, _react.waitFor)(()=>{
                const aspectSquare = container.querySelector('.aspect-square');
                expect(aspectSquare).toBeInTheDocument();
            });
        });
    });
    describe('Error Handling', ()=>{
        it('should handle failed photo fetch gracefully', async ()=>{
            global.fetch.mockRejectedValue(new Error('Network error'));
            const consoleSpy = jest.spyOn(console, 'error').mockImplementation();
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1'
                ],
                onSelectionChange: onSelectionChange
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
            // Should log error but not crash
            await (0, _react.waitFor)(()=>{
                expect(consoleSpy).toHaveBeenCalledWith('Failed to fetch selected photos:', expect.any(Error));
            });
            consoleSpy.mockRestore();
        });
        it('should handle 404 responses for photos', async ()=>{
            global.fetch.mockResolvedValue({
                ok: false,
                status: 404
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1'
                ],
                onSelectionChange: onSelectionChange
            }));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
            // Should not crash, just not display the photo
            const heading = _react.screen.queryByText(/Selected Photos/i);
            // Heading might not appear if no photos loaded successfully
            expect(heading).not.toBeInTheDocument();
        });
    });
    describe('Accessibility', ()=>{
        it('should have accessible labels for buttons', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1'
                ],
                onSelectionChange: onSelectionChange
            }));
            await (0, _react.waitFor)(()=>{
                const removeButton = _react.screen.getByLabelText('Remove photo');
                expect(removeButton).toBeInTheDocument();
            });
            const clearButton = _react.screen.getByLabelText('Clear all selected photos');
            expect(clearButton).toBeInTheDocument();
        });
        it('should have alt text for images', async ()=>{
            global.fetch.mockResolvedValue({
                ok: true,
                json: async ()=>({
                        success: true,
                        data: mockPhotos[0]
                    })
            });
            const onSelectionChange = jest.fn();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_PhotoPicker.PhotoPicker, {
                selectedPhotoIds: [
                    'photo-1'
                ],
                onSelectionChange: onSelectionChange
            }));
            await (0, _react.waitFor)(()=>{
                const image = _react.screen.getByAltText(/Sunset over ocean/i);
                expect(image).toBeInTheDocument();
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9hZG1pbi9QaG90b1BpY2tlci5zZWxlY3RlZERpc3BsYXkudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQaG90b1BpY2tlciBTZWxlY3RlZCBQaG90b3MgRGlzcGxheSBUZXN0c1xuICogXG4gKiBUZXN0cyB0aGUgc2VsZWN0ZWQgcGhvdG9zIGRpc3BsYXkgZnVuY3Rpb25hbGl0eSBpbiBQaG90b1BpY2tlcixcbiAqIGluY2x1ZGluZyB0aHVtYm5haWwgZGlzcGxheSwgY2FwdGlvbnMsIHJlbW92ZSBidXR0b25zLCBhbmQgY2xlYXIgYWxsLlxuICovXG5cbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCBmaXJlRXZlbnQsIHdhaXRGb3IgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IFBob3RvUGlja2VyIH0gZnJvbSAnLi9QaG90b1BpY2tlcic7XG5cbi8vIE1vY2sgZmV0Y2hcbmdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKTtcblxuZGVzY3JpYmUoJ1Bob3RvUGlja2VyIC0gU2VsZWN0ZWQgUGhvdG9zIERpc3BsYXknLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tQaG90b3MgPSBbXG4gICAge1xuICAgICAgaWQ6ICdwaG90by0xJyxcbiAgICAgIHBob3RvX3VybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vcGhvdG8xLmpwZycsXG4gICAgICBjYXB0aW9uOiAnQmVhdXRpZnVsIHN1bnNldCcsXG4gICAgICBhbHRfdGV4dDogJ1N1bnNldCBvdmVyIG9jZWFuJyxcbiAgICAgIG1vZGVyYXRpb25fc3RhdHVzOiAnYXBwcm92ZWQnIGFzIGNvbnN0LFxuICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAncGhvdG8tMicsXG4gICAgICBwaG90b191cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Bob3RvMi5qcGcnLFxuICAgICAgY2FwdGlvbjogJ01vdW50YWluIHZpZXcnLFxuICAgICAgYWx0X3RleHQ6ICdTbm93LWNhcHBlZCBtb3VudGFpbnMnLFxuICAgICAgbW9kZXJhdGlvbl9zdGF0dXM6ICdhcHByb3ZlZCcgYXMgY29uc3QsXG4gICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMlQwMDowMDowMFonLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICdwaG90by0zJyxcbiAgICAgIHBob3RvX3VybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vcGhvdG8zLmpwZycsXG4gICAgICBjYXB0aW9uOiAnQmVhY2ggc2NlbmUnLFxuICAgICAgbW9kZXJhdGlvbl9zdGF0dXM6ICdhcHByb3ZlZCcgYXMgY29uc3QsXG4gICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wM1QwMDowMDowMFonLFxuICAgIH0sXG4gIF07XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgLy8gUmVzZXQgZmV0Y2ggbW9ja1xuICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzZXQoKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NlbGVjdGVkIFBob3RvcyBTZWN0aW9uIERpc3BsYXknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHNlbGVjdGVkIHBob3RvcyBzZWN0aW9uIHdoZW4gcGhvdG9zIGFyZSBzZWxlY3RlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgQVBJIHJlc3BvbnNlcyBmb3Igc2VsZWN0ZWQgcGhvdG9zXG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaylcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja1Bob3Rvc1swXSB9KSxcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja1Bob3Rvc1sxXSB9KSxcbiAgICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG9uU2VsZWN0aW9uQ2hhbmdlID0gamVzdC5mbigpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxQaG90b1BpY2tlclxuICAgICAgICAgIHNlbGVjdGVkUGhvdG9JZHM9e1sncGhvdG8tMScsICdwaG90by0yJ119XG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgLy8gV2FpdCBmb3IgcGhvdG9zIHRvIGxvYWRcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FwaS9hZG1pbi9waG90b3MvcGhvdG8tMScpO1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FwaS9hZG1pbi9waG90b3MvcGhvdG8tMicpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBzaG93IHNlbGVjdGVkIHBob3RvcyBzZWN0aW9uXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgaGVhZGluZyA9IHNjcmVlbi5nZXRCeVRleHQoL1NlbGVjdGVkIFBob3RvcyBcXCgyXFwpL2kpO1xuICAgICAgICBleHBlY3QoaGVhZGluZykudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgZGlzcGxheSBzZWxlY3RlZCBwaG90b3Mgc2VjdGlvbiB3aGVuIG5vIHBob3RvcyBzZWxlY3RlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG9uU2VsZWN0aW9uQ2hhbmdlID0gamVzdC5mbigpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxQaG90b1BpY2tlclxuICAgICAgICAgIHNlbGVjdGVkUGhvdG9JZHM9e1tdfVxuICAgICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlPXtvblNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIC8vIFNob3VsZCBub3Qgc2hvdyBzZWxlY3RlZCBwaG90b3Mgc2VjdGlvblxuICAgICAgY29uc3QgaGVhZGluZyA9IHNjcmVlbi5xdWVyeUJ5VGV4dCgvU2VsZWN0ZWQgUGhvdG9zL2kpO1xuICAgICAgZXhwZWN0KGhlYWRpbmcpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGNvcnJlY3QgcGhvdG8gY291bnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaylcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja1Bob3Rvc1swXSB9KSxcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja1Bob3Rvc1sxXSB9KSxcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja1Bob3Rvc1syXSB9KSxcbiAgICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG9uU2VsZWN0aW9uQ2hhbmdlID0gamVzdC5mbigpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxQaG90b1BpY2tlclxuICAgICAgICAgIHNlbGVjdGVkUGhvdG9JZHM9e1sncGhvdG8tMScsICdwaG90by0yJywgJ3Bob3RvLTMnXX1cbiAgICAgICAgICBvblNlbGVjdGlvbkNoYW5nZT17b25TZWxlY3Rpb25DaGFuZ2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgaGVhZGluZyA9IHNjcmVlbi5nZXRCeVRleHQoL1NlbGVjdGVkIFBob3RvcyBcXCgzXFwpL2kpO1xuICAgICAgICBleHBlY3QoaGVhZGluZykudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGhvdG8gVGh1bWJuYWlscyBEaXNwbGF5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGlzcGxheSB0aHVtYm5haWxzIGZvciBzZWxlY3RlZCBwaG90b3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaylcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja1Bob3Rvc1swXSB9KSxcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja1Bob3Rvc1sxXSB9KSxcbiAgICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG9uU2VsZWN0aW9uQ2hhbmdlID0gamVzdC5mbigpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxQaG90b1BpY2tlclxuICAgICAgICAgIHNlbGVjdGVkUGhvdG9JZHM9e1sncGhvdG8tMScsICdwaG90by0yJ119XG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGltYWdlcyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2ltZycpO1xuICAgICAgICBleHBlY3QoaW1hZ2VzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgyKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1c2UgcGhvdG9fdXJsIGZpZWxkIGZvciB0aHVtYm5haWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tQaG90b3NbMF0gfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgb25TZWxlY3Rpb25DaGFuZ2UgPSBqZXN0LmZuKCk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFBob3RvUGlja2VyXG4gICAgICAgICAgc2VsZWN0ZWRQaG90b0lkcz17WydwaG90by0xJ119XG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGltYWdlID0gc2NyZWVuLmdldEJ5QWx0VGV4dCgvQmVhdXRpZnVsIHN1bnNldC9pKTtcbiAgICAgICAgZXhwZWN0KGltYWdlKS50b0hhdmVBdHRyaWJ1dGUoJ3NyYycsICdodHRwczovL2V4YW1wbGUuY29tL3Bob3RvMS5qcGcnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHBob3RvIGNhcHRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tQaG90b3NbMF0gfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgb25TZWxlY3Rpb25DaGFuZ2UgPSBqZXN0LmZuKCk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFBob3RvUGlja2VyXG4gICAgICAgICAgc2VsZWN0ZWRQaG90b0lkcz17WydwaG90by0xJ119XG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhcHRpb24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdCZWF1dGlmdWwgc3Vuc2V0Jyk7XG4gICAgICAgIGV4cGVjdChjYXB0aW9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBwaG90b3Mgd2l0aG91dCBjYXB0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBob3RvV2l0aG91dENhcHRpb24gPSB7XG4gICAgICAgIC4uLm1vY2tQaG90b3NbMF0sXG4gICAgICAgIGNhcHRpb246IHVuZGVmaW5lZCxcbiAgICAgIH07XG5cbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBwaG90b1dpdGhvdXRDYXB0aW9uIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG9uU2VsZWN0aW9uQ2hhbmdlID0gamVzdC5mbigpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxQaG90b1BpY2tlclxuICAgICAgICAgIHNlbGVjdGVkUGhvdG9JZHM9e1sncGhvdG8tMSddfVxuICAgICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlPXtvblNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBpbWFnZSA9IHNjcmVlbi5nZXRCeUFsdFRleHQoL1N1bnNldCBvdmVyIG9jZWFuL2kpO1xuICAgICAgICBleHBlY3QoaW1hZ2UpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2FwdGlvbiBzaG91bGQgbm90IGJlIGRpc3BsYXllZFxuICAgICAgY29uc3QgY2FwdGlvbiA9IHNjcmVlbi5xdWVyeUJ5VGV4dCgnQmVhdXRpZnVsIHN1bnNldCcpO1xuICAgICAgZXhwZWN0KGNhcHRpb24pLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmVtb3ZlIEluZGl2aWR1YWwgUGhvdG8nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHJlbW92ZSBidXR0b24gb24gaG92ZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja1Bob3Rvc1swXSB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZSA9IGplc3QuZm4oKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8UGhvdG9QaWNrZXJcbiAgICAgICAgICBzZWxlY3RlZFBob3RvSWRzPXtbJ3Bob3RvLTEnXX1cbiAgICAgICAgICBvblNlbGVjdGlvbkNoYW5nZT17b25TZWxlY3Rpb25DaGFuZ2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgcmVtb3ZlQnV0dG9uID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdSZW1vdmUgcGhvdG8nKTtcbiAgICAgICAgZXhwZWN0KHJlbW92ZUJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxsIG9uU2VsZWN0aW9uQ2hhbmdlIHdoZW4gcmVtb3ZlIGJ1dHRvbiBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tQaG90b3NbMF0gfSksXG4gICAgICAgIH0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tQaG90b3NbMV0gfSksXG4gICAgICAgIH0pO1xuXG4gICAgICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZSA9IGplc3QuZm4oKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8UGhvdG9QaWNrZXJcbiAgICAgICAgICBzZWxlY3RlZFBob3RvSWRzPXtbJ3Bob3RvLTEnLCAncGhvdG8tMiddfVxuICAgICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlPXtvblNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCByZW1vdmVCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5TGFiZWxUZXh0KCdSZW1vdmUgcGhvdG8nKTtcbiAgICAgICAgZXhwZWN0KHJlbW92ZUJ1dHRvbnMubGVuZ3RoKS50b0JlKDIpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIGZpcnN0IHJlbW92ZSBidXR0b25cbiAgICAgIGNvbnN0IHJlbW92ZUJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlMYWJlbFRleHQoJ1JlbW92ZSBwaG90bycpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHJlbW92ZUJ1dHRvbnNbMF0pO1xuXG4gICAgICAvLyBTaG91bGQgY2FsbCBvblNlbGVjdGlvbkNoYW5nZSB3aXRoIHBob3RvLTEgcmVtb3ZlZFxuICAgICAgZXhwZWN0KG9uU2VsZWN0aW9uQ2hhbmdlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChbJ3Bob3RvLTInXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlbW92ZSBjb3JyZWN0IHBob3RvIHdoZW4gbXVsdGlwbGUgcGhvdG9zIHNlbGVjdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tQaG90b3NbMF0gfSksXG4gICAgICAgIH0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tQaG90b3NbMV0gfSksXG4gICAgICAgIH0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tQaG90b3NbMl0gfSksXG4gICAgICAgIH0pO1xuXG4gICAgICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZSA9IGplc3QuZm4oKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8UGhvdG9QaWNrZXJcbiAgICAgICAgICBzZWxlY3RlZFBob3RvSWRzPXtbJ3Bob3RvLTEnLCAncGhvdG8tMicsICdwaG90by0zJ119XG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlbW92ZUJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlMYWJlbFRleHQoJ1JlbW92ZSBwaG90bycpO1xuICAgICAgICBleHBlY3QocmVtb3ZlQnV0dG9ucy5sZW5ndGgpLnRvQmUoMyk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgc2Vjb25kIHJlbW92ZSBidXR0b24gKHBob3RvLTIpXG4gICAgICBjb25zdCByZW1vdmVCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5TGFiZWxUZXh0KCdSZW1vdmUgcGhvdG8nKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhyZW1vdmVCdXR0b25zWzFdKTtcblxuICAgICAgLy8gU2hvdWxkIGNhbGwgb25TZWxlY3Rpb25DaGFuZ2Ugd2l0aCBwaG90by0yIHJlbW92ZWRcbiAgICAgIGV4cGVjdChvblNlbGVjdGlvbkNoYW5nZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoWydwaG90by0xJywgJ3Bob3RvLTMnXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc2FibGUgcmVtb3ZlIGJ1dHRvbiB3aGVuIGRpc2FibGVkIHByb3AgaXMgdHJ1ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrUGhvdG9zWzBdIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG9uU2VsZWN0aW9uQ2hhbmdlID0gamVzdC5mbigpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxQaG90b1BpY2tlclxuICAgICAgICAgIHNlbGVjdGVkUGhvdG9JZHM9e1sncGhvdG8tMSddfVxuICAgICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlPXtvblNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgICBkaXNhYmxlZD17dHJ1ZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCByZW1vdmVCdXR0b24gPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ1JlbW92ZSBwaG90bycpO1xuICAgICAgICBleHBlY3QocmVtb3ZlQnV0dG9uKS50b0JlRGlzYWJsZWQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ2xlYXIgQWxsIEZ1bmN0aW9uYWxpdHknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IFwiQ2xlYXIgQWxsXCIgYnV0dG9uIHdoZW4gcGhvdG9zIHNlbGVjdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tQaG90b3NbMF0gfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgb25TZWxlY3Rpb25DaGFuZ2UgPSBqZXN0LmZuKCk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFBob3RvUGlja2VyXG4gICAgICAgICAgc2VsZWN0ZWRQaG90b0lkcz17WydwaG90by0xJ119XG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNsZWFyQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgnQ2xlYXIgQWxsJyk7XG4gICAgICAgIGV4cGVjdChjbGVhckJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjYWxsIG9uU2VsZWN0aW9uQ2hhbmdlIHdpdGggZW1wdHkgYXJyYXkgd2hlbiBDbGVhciBBbGwgY2xpY2tlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrUGhvdG9zWzBdIH0pLFxuICAgICAgICB9KVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrUGhvdG9zWzFdIH0pLFxuICAgICAgICB9KTtcblxuICAgICAgY29uc3Qgb25TZWxlY3Rpb25DaGFuZ2UgPSBqZXN0LmZuKCk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFBob3RvUGlja2VyXG4gICAgICAgICAgc2VsZWN0ZWRQaG90b0lkcz17WydwaG90by0xJywgJ3Bob3RvLTInXX1cbiAgICAgICAgICBvblNlbGVjdGlvbkNoYW5nZT17b25TZWxlY3Rpb25DaGFuZ2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgY2xlYXJCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdDbGVhciBBbGwnKTtcbiAgICAgICAgZXhwZWN0KGNsZWFyQnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIENsZWFyIEFsbCBidXR0b25cbiAgICAgIGNvbnN0IGNsZWFyQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgnQ2xlYXIgQWxsJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soY2xlYXJCdXR0b24pO1xuXG4gICAgICAvLyBTaG91bGQgY2FsbCBvblNlbGVjdGlvbkNoYW5nZSB3aXRoIGVtcHR5IGFycmF5XG4gICAgICBleHBlY3Qob25TZWxlY3Rpb25DaGFuZ2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFtdKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzYWJsZSBDbGVhciBBbGwgYnV0dG9uIHdoZW4gZGlzYWJsZWQgcHJvcCBpcyB0cnVlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tQaG90b3NbMF0gfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgb25TZWxlY3Rpb25DaGFuZ2UgPSBqZXN0LmZuKCk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFBob3RvUGlja2VyXG4gICAgICAgICAgc2VsZWN0ZWRQaG90b0lkcz17WydwaG90by0xJ119XG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICAgIGRpc2FibGVkPXt0cnVlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNsZWFyQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgnQ2xlYXIgQWxsJyk7XG4gICAgICAgIGV4cGVjdChjbGVhckJ1dHRvbikudG9CZURpc2FibGVkKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2xlYXIgYWxsIHBob3RvcyByZWdhcmRsZXNzIG9mIGNvdW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tQaG90b3NbMF0gfSksXG4gICAgICAgIH0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tQaG90b3NbMV0gfSksXG4gICAgICAgIH0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tQaG90b3NbMl0gfSksXG4gICAgICAgIH0pO1xuXG4gICAgICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZSA9IGplc3QuZm4oKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8UGhvdG9QaWNrZXJcbiAgICAgICAgICBzZWxlY3RlZFBob3RvSWRzPXtbJ3Bob3RvLTEnLCAncGhvdG8tMicsICdwaG90by0zJ119XG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGhlYWRpbmcgPSBzY3JlZW4uZ2V0QnlUZXh0KC9TZWxlY3RlZCBQaG90b3MgXFwoM1xcKS9pKTtcbiAgICAgICAgZXhwZWN0KGhlYWRpbmcpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgQ2xlYXIgQWxsXG4gICAgICBjb25zdCBjbGVhckJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ0NsZWFyIEFsbCcpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGNsZWFyQnV0dG9uKTtcblxuICAgICAgLy8gU2hvdWxkIGNsZWFyIGFsbCAzIHBob3Rvc1xuICAgICAgZXhwZWN0KG9uU2VsZWN0aW9uQ2hhbmdlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChbXSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHcmlkIExheW91dCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgcGhvdG9zIGluIGdyaWQgbGF5b3V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tQaG90b3NbMF0gfSksXG4gICAgICAgIH0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tQaG90b3NbMV0gfSksXG4gICAgICAgIH0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tQaG90b3NbMl0gfSksXG4gICAgICAgIH0pO1xuXG4gICAgICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZSA9IGplc3QuZm4oKTtcblxuICAgICAgY29uc3QgeyBjb250YWluZXIgfSA9IHJlbmRlcihcbiAgICAgICAgPFBob3RvUGlja2VyXG4gICAgICAgICAgc2VsZWN0ZWRQaG90b0lkcz17WydwaG90by0xJywgJ3Bob3RvLTInLCAncGhvdG8tMyddfVxuICAgICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlPXtvblNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBncmlkID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5ncmlkLWNvbHMtNCcpO1xuICAgICAgICBleHBlY3QoZ3JpZCkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBtYWludGFpbiBhc3BlY3QgcmF0aW8gZm9yIHRodW1ibmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbW9ja1Bob3Rvc1swXSB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZSA9IGplc3QuZm4oKTtcblxuICAgICAgY29uc3QgeyBjb250YWluZXIgfSA9IHJlbmRlcihcbiAgICAgICAgPFBob3RvUGlja2VyXG4gICAgICAgICAgc2VsZWN0ZWRQaG90b0lkcz17WydwaG90by0xJ119XG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGFzcGVjdFNxdWFyZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuYXNwZWN0LXNxdWFyZScpO1xuICAgICAgICBleHBlY3QoYXNwZWN0U3F1YXJlKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBmYWlsZWQgcGhvdG8gZmV0Y2ggZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKSk7XG5cbiAgICAgIGNvbnN0IGNvbnNvbGVTcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICdlcnJvcicpLm1vY2tJbXBsZW1lbnRhdGlvbigpO1xuICAgICAgY29uc3Qgb25TZWxlY3Rpb25DaGFuZ2UgPSBqZXN0LmZuKCk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFBob3RvUGlja2VyXG4gICAgICAgICAgc2VsZWN0ZWRQaG90b0lkcz17WydwaG90by0xJ119XG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTaG91bGQgbG9nIGVycm9yIGJ1dCBub3QgY3Jhc2hcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoY29uc29sZVNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgJ0ZhaWxlZCB0byBmZXRjaCBzZWxlY3RlZCBwaG90b3M6JyxcbiAgICAgICAgICBleHBlY3QuYW55KEVycm9yKVxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGVTcHkubW9ja1Jlc3RvcmUoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIDQwNCByZXNwb25zZXMgZm9yIHBob3RvcycsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiBmYWxzZSxcbiAgICAgICAgc3RhdHVzOiA0MDQsXG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgb25TZWxlY3Rpb25DaGFuZ2UgPSBqZXN0LmZuKCk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFBob3RvUGlja2VyXG4gICAgICAgICAgc2VsZWN0ZWRQaG90b0lkcz17WydwaG90by0xJ119XG4gICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTaG91bGQgbm90IGNyYXNoLCBqdXN0IG5vdCBkaXNwbGF5IHRoZSBwaG90b1xuICAgICAgY29uc3QgaGVhZGluZyA9IHNjcmVlbi5xdWVyeUJ5VGV4dCgvU2VsZWN0ZWQgUGhvdG9zL2kpO1xuICAgICAgLy8gSGVhZGluZyBtaWdodCBub3QgYXBwZWFyIGlmIG5vIHBob3RvcyBsb2FkZWQgc3VjY2Vzc2Z1bGx5XG4gICAgICBleHBlY3QoaGVhZGluZykubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBY2Nlc3NpYmlsaXR5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGF2ZSBhY2Nlc3NpYmxlIGxhYmVscyBmb3IgYnV0dG9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrUGhvdG9zWzBdIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG9uU2VsZWN0aW9uQ2hhbmdlID0gamVzdC5mbigpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxQaG90b1BpY2tlclxuICAgICAgICAgIHNlbGVjdGVkUGhvdG9JZHM9e1sncGhvdG8tMSddfVxuICAgICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlPXtvblNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCByZW1vdmVCdXR0b24gPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ1JlbW92ZSBwaG90bycpO1xuICAgICAgICBleHBlY3QocmVtb3ZlQnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNsZWFyQnV0dG9uID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdDbGVhciBhbGwgc2VsZWN0ZWQgcGhvdG9zJyk7XG4gICAgICBleHBlY3QoY2xlYXJCdXR0b24pLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgYWx0IHRleHQgZm9yIGltYWdlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtb2NrUGhvdG9zWzBdIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG9uU2VsZWN0aW9uQ2hhbmdlID0gamVzdC5mbigpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxQaG90b1BpY2tlclxuICAgICAgICAgIHNlbGVjdGVkUGhvdG9JZHM9e1sncGhvdG8tMSddfVxuICAgICAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlPXtvblNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBpbWFnZSA9IHNjcmVlbi5nZXRCeUFsdFRleHQoL1N1bnNldCBvdmVyIG9jZWFuL2kpO1xuICAgICAgICBleHBlY3QoaW1hZ2UpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJnbG9iYWwiLCJmZXRjaCIsImplc3QiLCJmbiIsImRlc2NyaWJlIiwibW9ja1Bob3RvcyIsImlkIiwicGhvdG9fdXJsIiwiY2FwdGlvbiIsImFsdF90ZXh0IiwibW9kZXJhdGlvbl9zdGF0dXMiLCJjcmVhdGVkX2F0IiwiYmVmb3JlRWFjaCIsIm1vY2tSZXNldCIsImFmdGVyRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsIm1vY2tSZXNvbHZlZFZhbHVlT25jZSIsIm9rIiwianNvbiIsInN1Y2Nlc3MiLCJkYXRhIiwib25TZWxlY3Rpb25DaGFuZ2UiLCJyZW5kZXIiLCJQaG90b1BpY2tlciIsInNlbGVjdGVkUGhvdG9JZHMiLCJ3YWl0Rm9yIiwiZXhwZWN0IiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJoZWFkaW5nIiwic2NyZWVuIiwiZ2V0QnlUZXh0IiwidG9CZUluVGhlRG9jdW1lbnQiLCJxdWVyeUJ5VGV4dCIsIm5vdCIsImltYWdlcyIsImdldEFsbEJ5Um9sZSIsImxlbmd0aCIsInRvQmVHcmVhdGVyVGhhbk9yRXF1YWwiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImltYWdlIiwiZ2V0QnlBbHRUZXh0IiwidG9IYXZlQXR0cmlidXRlIiwicGhvdG9XaXRob3V0Q2FwdGlvbiIsInVuZGVmaW5lZCIsInJlbW92ZUJ1dHRvbiIsImdldEJ5TGFiZWxUZXh0IiwicmVtb3ZlQnV0dG9ucyIsImdldEFsbEJ5TGFiZWxUZXh0IiwidG9CZSIsImZpcmVFdmVudCIsImNsaWNrIiwiZGlzYWJsZWQiLCJ0b0JlRGlzYWJsZWQiLCJjbGVhckJ1dHRvbiIsImNvbnRhaW5lciIsImdyaWQiLCJxdWVyeVNlbGVjdG9yIiwiYXNwZWN0U3F1YXJlIiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciIsImNvbnNvbGVTcHkiLCJzcHlPbiIsImNvbnNvbGUiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJ0b0hhdmVCZWVuQ2FsbGVkIiwiYW55IiwibW9ja1Jlc3RvcmUiLCJzdGF0dXMiXSwibWFwcGluZ3MiOiJBQUFBOzs7OztDQUtDOzs7Ozt1QkFFa0Q7NkJBQ3ZCO0FBRTVCLGFBQWE7QUFDYkEsT0FBT0MsS0FBSyxHQUFHQyxLQUFLQyxFQUFFO0FBRXRCQyxTQUFTLHlDQUF5QztJQUNoRCxNQUFNQyxhQUFhO1FBQ2pCO1lBQ0VDLElBQUk7WUFDSkMsV0FBVztZQUNYQyxTQUFTO1lBQ1RDLFVBQVU7WUFDVkMsbUJBQW1CO1lBQ25CQyxZQUFZO1FBQ2Q7UUFDQTtZQUNFTCxJQUFJO1lBQ0pDLFdBQVc7WUFDWEMsU0FBUztZQUNUQyxVQUFVO1lBQ1ZDLG1CQUFtQjtZQUNuQkMsWUFBWTtRQUNkO1FBQ0E7WUFDRUwsSUFBSTtZQUNKQyxXQUFXO1lBQ1hDLFNBQVM7WUFDVEUsbUJBQW1CO1lBQ25CQyxZQUFZO1FBQ2Q7S0FDRDtJQUVEQyxXQUFXO1FBQ1QsbUJBQW1CO1FBQ2xCWixPQUFPQyxLQUFLLENBQWVZLFNBQVM7SUFDdkM7SUFFQUMsVUFBVTtRQUNSWixLQUFLYSxhQUFhO0lBQ3BCO0lBRUFYLFNBQVMsbUNBQW1DO1FBQzFDWSxHQUFHLG1FQUFtRTtZQUNwRSx5Q0FBeUM7WUFDeENoQixPQUFPQyxLQUFLLENBQ1ZnQixxQkFBcUIsQ0FBQztnQkFDckJDLElBQUk7Z0JBQ0pDLE1BQU0sVUFBYSxDQUFBO3dCQUFFQyxTQUFTO3dCQUFNQyxNQUFNaEIsVUFBVSxDQUFDLEVBQUU7b0JBQUMsQ0FBQTtZ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