aaf7d0dece1abbd5fb32da1600d9153b
"use strict";
// Mock DataTable components
jest.mock('@/components/ui/DataTableWithSuspense', ()=>({
        DataTableWithSuspense: ({ data, columns, loading })=>{
            if (loading) {
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    children: "Loading..."
                });
            }
            if (data.length === 0) {
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    children: "No items found"
                });
            }
            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "data-table",
                children: data.map((item, index)=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        "data-testid": `row-${index}`,
                        children: columns.map((col)=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                "data-testid": `${col.key}-${index}`,
                                children: col.render ? col.render(item) : item[col.key]
                            }, col.key))
                    }, index))
            });
        }
    }));
// Mock Next.js router
jest.mock('next/navigation', ()=>({
        useRouter: jest.fn(()=>({
                push: jest.fn(),
                replace: jest.fn(),
                prefetch: jest.fn()
            })),
        useSearchParams: jest.fn(()=>({
                get: jest.fn()
            })),
        usePathname: jest.fn(()=>'/admin/audit-logs')
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _page = /*#__PURE__*/ _interop_require_default(require("./page"));
const _mockFetch = require("../../../__tests__/helpers/mockFetch");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Setup fetch mock
(0, _mockFetch.setupFetchMock)();
const mockLogs = [
    {
        id: 'log-1',
        user_id: 'user-1',
        user_email: 'admin@example.com',
        entity_type: 'guest',
        entity_id: 'guest-1',
        operation_type: 'create',
        old_data: null,
        new_data: {
            first_name: 'John',
            last_name: 'Doe'
        },
        ip_address: '192.168.1.1',
        user_agent: 'Mozilla/5.0',
        created_at: '2025-01-27T10:00:00.000Z'
    },
    {
        id: 'log-2',
        user_id: 'user-1',
        user_email: 'admin@example.com',
        entity_type: 'event',
        entity_id: 'event-1',
        operation_type: 'update',
        old_data: {
            title: 'Old Title'
        },
        new_data: {
            title: 'New Title'
        },
        ip_address: '192.168.1.1',
        user_agent: 'Mozilla/5.0',
        created_at: '2025-01-27T11:00:00.000Z'
    },
    {
        id: 'log-3',
        user_id: 'user-2',
        user_email: 'owner@example.com',
        entity_type: 'vendor',
        entity_id: 'vendor-1',
        operation_type: 'delete',
        old_data: {
            name: 'Vendor Name'
        },
        new_data: null,
        ip_address: '192.168.1.2',
        user_agent: 'Mozilla/5.0',
        created_at: '2025-01-27T12:00:00.000Z'
    }
];
const mockSuccessResponse = {
    success: true,
    data: {
        logs: mockLogs,
        total: 3,
        page: 1,
        page_size: 50,
        total_pages: 1
    }
};
describe('AuditLogsPage', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        (0, _mockFetch.clearFetchMock)();
        // Mock fetch to return audit logs
        global.fetch.mockImplementation(()=>Promise.resolve((0, _mockFetch.createMockResponse)(mockSuccessResponse)));
    });
    describe('Log Display', ()=>{
        it('should render audit logs page with title', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            expect(_react.screen.getByText('Audit Logs')).toBeInTheDocument();
            expect(_react.screen.getByText('View and search system audit logs for accountability')).toBeInTheDocument();
        });
        it('should display audit logs after loading', async ()=>{
            // Verify mock is set up correctly
            expect(global.fetch).toBeDefined();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            // Wait for fetch to be called
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            }, {
                timeout: 3000
            });
            // Wait for data to be displayed - use getAllByText since email appears multiple times
            await (0, _react.waitFor)(()=>{
                const elements = _react.screen.getAllByText('admin@example.com');
                expect(elements.length).toBeGreaterThan(0);
            }, {
                timeout: 3000
            });
            expect(_react.screen.getAllByText('owner@example.com').length).toBeGreaterThan(0);
        });
        it('should display action badges', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                // The action badges show uppercase operation types
                expect(_react.screen.getByText(/create/i)).toBeInTheDocument();
            }, {
                timeout: 3000
            });
            expect(_react.screen.getByText(/update/i)).toBeInTheDocument();
            expect(_react.screen.getByText(/delete/i)).toBeInTheDocument();
        });
        it('should highlight critical actions', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('⚠️ Critical Action')).toBeInTheDocument();
            }, {
                timeout: 3000
            });
        });
    });
    describe('Filtering', ()=>{
        it('should have filter controls', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            expect(_react.screen.getByLabelText('Search')).toBeInTheDocument();
            expect(_react.screen.getByLabelText('Action Type')).toBeInTheDocument();
            expect(_react.screen.getByLabelText('Entity Type')).toBeInTheDocument();
            expect(_react.screen.getByLabelText('Date Range')).toBeInTheDocument();
        });
        it('should call API with filters when action type changes', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalled();
            });
            const actionSelect = _react.screen.getByLabelText('Action Type');
            _react.fireEvent.change(actionSelect, {
                target: {
                    value: 'create'
                }
            });
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('operation_type=create'));
            });
        });
        it('should clear filters when clear button clicked', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Clear Filters')).toBeInTheDocument();
            });
            const actionSelect = _react.screen.getByLabelText('Action Type');
            _react.fireEvent.change(actionSelect, {
                target: {
                    value: 'create'
                }
            });
            const clearButton = _react.screen.getByText('Clear Filters');
            _react.fireEvent.click(clearButton);
            expect(actionSelect).toHaveValue('');
        });
    });
    describe('Search', ()=>{
        it('should filter logs client-side when searching', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                const elements = _react.screen.getAllByText('admin@example.com');
                expect(elements.length).toBeGreaterThan(0);
            }, {
                timeout: 3000
            });
            const searchInput = _react.screen.getByPlaceholderText('Search descriptions...');
            _react.fireEvent.change(searchInput, {
                target: {
                    value: 'guest'
                }
            });
            // Should still show guest-related log
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/guest/i)).toBeInTheDocument();
            });
        });
    });
    describe('Pagination', ()=>{
        it('should display pagination when multiple pages exist', async ()=>{
            global.fetch.mockImplementationOnce(()=>Promise.resolve((0, _mockFetch.createMockResponse)({
                    success: true,
                    data: {
                        logs: mockLogs,
                        total: 150,
                        page: 1,
                        page_size: 50,
                        total_pages: 3
                    }
                })));
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/Showing page 1 of 3/)).toBeInTheDocument();
            }, {
                timeout: 3000
            });
            expect(_react.screen.getByText('Previous')).toBeInTheDocument();
            expect(_react.screen.getByText('Next')).toBeInTheDocument();
        });
        it('should disable Previous button on first page', async ()=>{
            global.fetch.mockImplementationOnce(()=>Promise.resolve((0, _mockFetch.createMockResponse)({
                    success: true,
                    data: {
                        logs: mockLogs,
                        total: 150,
                        page: 1,
                        page_size: 50,
                        total_pages: 3
                    }
                })));
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                const prevButton = _react.screen.getByText('Previous');
                expect(prevButton).toBeDisabled();
            }, {
                timeout: 3000
            });
        });
    });
    describe('CSV Export', ()=>{
        it('should have export button', ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            expect(_react.screen.getByText('Export CSV')).toBeInTheDocument();
        });
        it('should call export API when export button clicked', async ()=>{
            const mockBlob = new Blob([
                'csv content'
            ], {
                type: 'text/csv'
            });
            global.URL.createObjectURL = jest.fn(()=>'blob:mock-url');
            global.URL.revokeObjectURL = jest.fn();
            global.fetch.mockImplementationOnce(()=>Promise.resolve((0, _mockFetch.createMockResponse)(mockSuccessResponse))).mockImplementationOnce(()=>Promise.resolve((0, _mockFetch.createMockResponse)(mockBlob)));
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Export CSV')).toBeInTheDocument();
            });
            const exportButton = _react.screen.getByText('Export CSV');
            _react.fireEvent.click(exportButton);
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(expect.stringContaining('/api/admin/audit-logs/export'));
            });
        });
    });
    describe('Error Handling', ()=>{
        it('should display error message on API error', async ()=>{
            global.fetch.mockImplementationOnce(()=>Promise.resolve((0, _mockFetch.createMockResponse)({
                    success: false,
                    error: {
                        code: 'DATABASE_ERROR',
                        message: 'Database connection failed'
                    }
                })));
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Database connection failed')).toBeInTheDocument();
            }, {
                timeout: 3000
            });
        });
        it('should display empty message when no logs found', async ()=>{
            global.fetch.mockImplementationOnce(()=>Promise.resolve((0, _mockFetch.createMockResponse)({
                    success: true,
                    data: {
                        logs: [],
                        total: 0,
                        page: 1,
                        page_size: 50,
                        total_pages: 0
                    }
                })));
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_page.default, {}));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/No.*items.*found/i)).toBeInTheDocument();
            }, {
                timeout: 3000
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvYXBwL2FkbWluL2F1ZGl0LWxvZ3MvcGFnZS50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgQXVkaXRMb2dzUGFnZSBmcm9tICcuL3BhZ2UnO1xuaW1wb3J0IHR5cGUgeyBBdWRpdExvZyB9IGZyb20gJ0Avc2VydmljZXMvYXVkaXRMb2dTZXJ2aWNlJztcbmltcG9ydCB7IGNyZWF0ZU1vY2tSZXNwb25zZSwgc2V0dXBGZXRjaE1vY2ssIGNsZWFyRmV0Y2hNb2NrIH0gZnJvbSAnQC9fX3Rlc3RzX18vaGVscGVycy9tb2NrRmV0Y2gnO1xuXG4vLyBNb2NrIERhdGFUYWJsZSBjb21wb25lbnRzXG5qZXN0Lm1vY2soJ0AvY29tcG9uZW50cy91aS9EYXRhVGFibGVXaXRoU3VzcGVuc2UnLCAoKSA9PiAoe1xuICBEYXRhVGFibGVXaXRoU3VzcGVuc2U6ICh7IGRhdGEsIGNvbHVtbnMsIGxvYWRpbmcgfTogYW55KSA9PiB7XG4gICAgaWYgKGxvYWRpbmcpIHtcbiAgICAgIHJldHVybiA8ZGl2PkxvYWRpbmcuLi48L2Rpdj47XG4gICAgfVxuICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIDxkaXY+Tm8gaXRlbXMgZm91bmQ8L2Rpdj47XG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiZGF0YS10YWJsZVwiPlxuICAgICAgICB7ZGF0YS5tYXAoKGl0ZW06IGFueSwgaW5kZXg6IG51bWJlcikgPT4gKFxuICAgICAgICAgIDxkaXYga2V5PXtpbmRleH0gZGF0YS10ZXN0aWQ9e2Byb3ctJHtpbmRleH1gfT5cbiAgICAgICAgICAgIHtjb2x1bW5zLm1hcCgoY29sOiBhbnkpID0+IChcbiAgICAgICAgICAgICAgPGRpdiBrZXk9e2NvbC5rZXl9IGRhdGEtdGVzdGlkPXtgJHtjb2wua2V5fS0ke2luZGV4fWB9PlxuICAgICAgICAgICAgICAgIHtjb2wucmVuZGVyID8gY29sLnJlbmRlcihpdGVtKSA6IGl0ZW1bY29sLmtleV19XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkpfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfSxcbn0pKTtcblxuLy8gTW9jayBOZXh0LmpzIHJvdXRlclxuamVzdC5tb2NrKCduZXh0L25hdmlnYXRpb24nLCAoKSA9PiAoe1xuICB1c2VSb3V0ZXI6IGplc3QuZm4oKCkgPT4gKHtcbiAgICBwdXNoOiBqZXN0LmZuKCksXG4gICAgcmVwbGFjZTogamVzdC5mbigpLFxuICAgIHByZWZldGNoOiBqZXN0LmZuKCksXG4gIH0pKSxcbiAgdXNlU2VhcmNoUGFyYW1zOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgZ2V0OiBqZXN0LmZuKCksXG4gIH0pKSxcbiAgdXNlUGF0aG5hbWU6IGplc3QuZm4oKCkgPT4gJy9hZG1pbi9hdWRpdC1sb2dzJyksXG59KSk7XG5cbi8vIFNldHVwIGZldGNoIG1vY2tcbnNldHVwRmV0Y2hNb2NrKCk7XG5cbmNvbnN0IG1vY2tMb2dzOiBBdWRpdExvZ1tdID0gW1xuICB7XG4gICAgaWQ6ICdsb2ctMScsXG4gICAgdXNlcl9pZDogJ3VzZXItMScsXG4gICAgdXNlcl9lbWFpbDogJ2FkbWluQGV4YW1wbGUuY29tJyxcbiAgICBlbnRpdHlfdHlwZTogJ2d1ZXN0JyxcbiAgICBlbnRpdHlfaWQ6ICdndWVzdC0xJyxcbiAgICBvcGVyYXRpb25fdHlwZTogJ2NyZWF0ZScsXG4gICAgb2xkX2RhdGE6IG51bGwsXG4gICAgbmV3X2RhdGE6IHsgZmlyc3RfbmFtZTogJ0pvaG4nLCBsYXN0X25hbWU6ICdEb2UnIH0sXG4gICAgaXBfYWRkcmVzczogJzE5Mi4xNjguMS4xJyxcbiAgICB1c2VyX2FnZW50OiAnTW96aWxsYS81LjAnLFxuICAgIGNyZWF0ZWRfYXQ6ICcyMDI1LTAxLTI3VDEwOjAwOjAwLjAwMFonLFxuICB9LFxuICB7XG4gICAgaWQ6ICdsb2ctMicsXG4gICAgdXNlcl9pZDogJ3VzZXItMScsXG4gICAgdXNlcl9lbWFpbDogJ2FkbWluQGV4YW1wbGUuY29tJyxcbiAgICBlbnRpdHlfdHlwZTogJ2V2ZW50JyxcbiAgICBlbnRpdHlfaWQ6ICdldmVudC0xJyxcbiAgICBvcGVyYXRpb25fdHlwZTogJ3VwZGF0ZScsXG4gICAgb2xkX2RhdGE6IHsgdGl0bGU6ICdPbGQgVGl0bGUnIH0sXG4gICAgbmV3X2RhdGE6IHsgdGl0bGU6ICdOZXcgVGl0bGUnIH0sXG4gICAgaXBfYWRkcmVzczogJzE5Mi4xNjguMS4xJyxcbiAgICB1c2VyX2FnZW50OiAnTW96aWxsYS81LjAnLFxuICAgIGNyZWF0ZWRfYXQ6ICcyMDI1LTAxLTI3VDExOjAwOjAwLjAwMFonLFxuICB9LFxuICB7XG4gICAgaWQ6ICdsb2ctMycsXG4gICAgdXNlcl9pZDogJ3VzZXItMicsXG4gICAgdXNlcl9lbWFpbDogJ293bmVyQGV4YW1wbGUuY29tJyxcbiAgICBlbnRpdHlfdHlwZTogJ3ZlbmRvcicsXG4gICAgZW50aXR5X2lkOiAndmVuZG9yLTEnLFxuICAgIG9wZXJhdGlvbl90eXBlOiAnZGVsZXRlJyxcbiAgICBvbGRfZGF0YTogeyBuYW1lOiAnVmVuZG9yIE5hbWUnIH0sXG4gICAgbmV3X2RhdGE6IG51bGwsXG4gICAgaXBfYWRkcmVzczogJzE5Mi4xNjguMS4yJyxcbiAgICB1c2VyX2FnZW50OiAnTW96aWxsYS81LjAnLFxuICAgIGNyZWF0ZWRfYXQ6ICcyMDI1LTAxLTI3VDEyOjAwOjAwLjAwMFonLFxuICB9LFxuXTtcblxuY29uc3QgbW9ja1N1Y2Nlc3NSZXNwb25zZSA9IHtcbiAgc3VjY2VzczogdHJ1ZSxcbiAgZGF0YToge1xuICAgIGxvZ3M6IG1vY2tMb2dzLFxuICAgIHRvdGFsOiAzLFxuICAgIHBhZ2U6IDEsXG4gICAgcGFnZV9zaXplOiA1MCxcbiAgICB0b3RhbF9wYWdlczogMSxcbiAgfSxcbn07XG5cbmRlc2NyaWJlKCdBdWRpdExvZ3NQYWdlJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBjbGVhckZldGNoTW9jaygpO1xuICAgIFxuICAgIC8vIE1vY2sgZmV0Y2ggdG8gcmV0dXJuIGF1ZGl0IGxvZ3NcbiAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+XG4gICAgICBQcm9taXNlLnJlc29sdmUoY3JlYXRlTW9ja1Jlc3BvbnNlKG1vY2tTdWNjZXNzUmVzcG9uc2UpKVxuICAgICk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdMb2cgRGlzcGxheScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlbmRlciBhdWRpdCBsb2dzIHBhZ2Ugd2l0aCB0aXRsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXVkaXRMb2dzUGFnZSAvPik7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdBdWRpdCBMb2dzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3QoXG4gICAgICAgIHNjcmVlbi5nZXRCeVRleHQoJ1ZpZXcgYW5kIHNlYXJjaCBzeXN0ZW0gYXVkaXQgbG9ncyBmb3IgYWNjb3VudGFiaWxpdHknKVxuICAgICAgKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGF1ZGl0IGxvZ3MgYWZ0ZXIgbG9hZGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFZlcmlmeSBtb2NrIGlzIHNldCB1cCBjb3JyZWN0bHlcbiAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBcbiAgICAgIHJlbmRlcig8QXVkaXRMb2dzUGFnZSAvPik7XG5cbiAgICAgIC8vIFdhaXQgZm9yIGZldGNoIHRvIGJlIGNhbGxlZFxuICAgICAgYXdhaXQgd2FpdEZvcihcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgeyB0aW1lb3V0OiAzMDAwIH1cbiAgICAgICk7XG5cbiAgICAgIC8vIFdhaXQgZm9yIGRhdGEgdG8gYmUgZGlzcGxheWVkIC0gdXNlIGdldEFsbEJ5VGV4dCBzaW5jZSBlbWFpbCBhcHBlYXJzIG11bHRpcGxlIHRpbWVzXG4gICAgICBhd2FpdCB3YWl0Rm9yKFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgZWxlbWVudHMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KCdhZG1pbkBleGFtcGxlLmNvbScpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgfSxcbiAgICAgICAgeyB0aW1lb3V0OiAzMDAwIH1cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QWxsQnlUZXh0KCdvd25lckBleGFtcGxlLmNvbScpLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGFjdGlvbiBiYWRnZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPEF1ZGl0TG9nc1BhZ2UgLz4pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgLy8gVGhlIGFjdGlvbiBiYWRnZXMgc2hvdyB1cHBlcmNhc2Ugb3BlcmF0aW9uIHR5cGVzXG4gICAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL2NyZWF0ZS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgeyB0aW1lb3V0OiAzMDAwIH1cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC91cGRhdGUvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvZGVsZXRlL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoaWdobGlnaHQgY3JpdGljYWwgYWN0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXVkaXRMb2dzUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn4pqg77iPIENyaXRpY2FsIEFjdGlvbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICB9LFxuICAgICAgICB7IHRpbWVvdXQ6IDMwMDAgfVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ZpbHRlcmluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgZmlsdGVyIGNvbnRyb2xzJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdWRpdExvZ3NQYWdlIC8+KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnU2VhcmNoJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdBY3Rpb24gVHlwZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnRW50aXR5IFR5cGUnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlMYWJlbFRleHQoJ0RhdGUgUmFuZ2UnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsbCBBUEkgd2l0aCBmaWx0ZXJzIHdoZW4gYWN0aW9uIHR5cGUgY2hhbmdlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8QXVkaXRMb2dzUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgYWN0aW9uU2VsZWN0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdBY3Rpb24gVHlwZScpO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShhY3Rpb25TZWxlY3QsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnY3JlYXRlJyB9IH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ29wZXJhdGlvbl90eXBlPWNyZWF0ZScpXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2xlYXIgZmlsdGVycyB3aGVuIGNsZWFyIGJ1dHRvbiBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdWRpdExvZ3NQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDbGVhciBGaWx0ZXJzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgYWN0aW9uU2VsZWN0ID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdBY3Rpb24gVHlwZScpO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShhY3Rpb25TZWxlY3QsIHsgdGFyZ2V0OiB7IHZhbHVlOiAnY3JlYXRlJyB9IH0pO1xuXG4gICAgICBjb25zdCBjbGVhckJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ0NsZWFyIEZpbHRlcnMnKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhjbGVhckJ1dHRvbik7XG5cbiAgICAgIGV4cGVjdChhY3Rpb25TZWxlY3QpLnRvSGF2ZVZhbHVlKCcnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NlYXJjaCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGZpbHRlciBsb2dzIGNsaWVudC1zaWRlIHdoZW4gc2VhcmNoaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdWRpdExvZ3NQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcihcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gc2NyZWVuLmdldEFsbEJ5VGV4dCgnYWRtaW5AZXhhbXBsZS5jb20nKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgIH0sXG4gICAgICAgIHsgdGltZW91dDogMzAwMCB9XG4gICAgICApO1xuXG4gICAgICBjb25zdCBzZWFyY2hJbnB1dCA9IHNjcmVlbi5nZXRCeVBsYWNlaG9sZGVyVGV4dCgnU2VhcmNoIGRlc2NyaXB0aW9ucy4uLicpO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShzZWFyY2hJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdndWVzdCcgfSB9KTtcblxuICAgICAgLy8gU2hvdWxkIHN0aWxsIHNob3cgZ3Vlc3QtcmVsYXRlZCBsb2dcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvZ3Vlc3QvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BhZ2luYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHBhZ2luYXRpb24gd2hlbiBtdWx0aXBsZSBwYWdlcyBleGlzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb25PbmNlKCgpID0+XG4gICAgICAgIFByb21pc2UucmVzb2x2ZShjcmVhdGVNb2NrUmVzcG9uc2Uoe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgbG9nczogbW9ja0xvZ3MsXG4gICAgICAgICAgICB0b3RhbDogMTUwLFxuICAgICAgICAgICAgcGFnZTogMSxcbiAgICAgICAgICAgIHBhZ2Vfc2l6ZTogNTAsXG4gICAgICAgICAgICB0b3RhbF9wYWdlczogMyxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSlcbiAgICAgICk7XG5cbiAgICAgIHJlbmRlcig8QXVkaXRMb2dzUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvU2hvd2luZyBwYWdlIDEgb2YgMy8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICB9LFxuICAgICAgICB7IHRpbWVvdXQ6IDMwMDAgfVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1ByZXZpb3VzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnTmV4dCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNhYmxlIFByZXZpb3VzIGJ1dHRvbiBvbiBmaXJzdCBwYWdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UoKCkgPT5cbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKGNyZWF0ZU1vY2tSZXNwb25zZSh7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBsb2dzOiBtb2NrTG9ncyxcbiAgICAgICAgICAgIHRvdGFsOiAxNTAsXG4gICAgICAgICAgICBwYWdlOiAxLFxuICAgICAgICAgICAgcGFnZV9zaXplOiA1MCxcbiAgICAgICAgICAgIHRvdGFsX3BhZ2VzOiAzLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pKVxuICAgICAgKTtcblxuICAgICAgcmVuZGVyKDxBdWRpdExvZ3NQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcihcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHByZXZCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdQcmV2aW91cycpO1xuICAgICAgICAgIGV4cGVjdChwcmV2QnV0dG9uKS50b0JlRGlzYWJsZWQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgeyB0aW1lb3V0OiAzMDAwIH1cbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDU1YgRXhwb3J0JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGF2ZSBleHBvcnQgYnV0dG9uJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxBdWRpdExvZ3NQYWdlIC8+KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0V4cG9ydCBDU1YnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FsbCBleHBvcnQgQVBJIHdoZW4gZXhwb3J0IGJ1dHRvbiBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Jsb2IgPSBuZXcgQmxvYihbJ2NzdiBjb250ZW50J10sIHsgdHlwZTogJ3RleHQvY3N2JyB9KTtcbiAgICAgIGdsb2JhbC5VUkwuY3JlYXRlT2JqZWN0VVJMID0gamVzdC5mbigoKSA9PiAnYmxvYjptb2NrLXVybCcpO1xuICAgICAgZ2xvYmFsLlVSTC5yZXZva2VPYmplY3RVUkwgPSBqZXN0LmZuKCk7XG5cbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKVxuICAgICAgICAubW9ja0ltcGxlbWVudGF0aW9uT25jZSgoKSA9PiBQcm9taXNlLnJlc29sdmUoY3JlYXRlTW9ja1Jlc3BvbnNlKG1vY2tTdWNjZXNzUmVzcG9uc2UpKSlcbiAgICAgICAgLm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKGNyZWF0ZU1vY2tSZXNwb25zZShtb2NrQmxvYikpKTtcblxuICAgICAgcmVuZGVyKDxBdWRpdExvZ3NQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdFeHBvcnQgQ1NWJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZXhwb3J0QnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgnRXhwb3J0IENTVicpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGV4cG9ydEJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnL2FwaS9hZG1pbi9hdWRpdC1sb2dzL2V4cG9ydCcpXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGlzcGxheSBlcnJvciBtZXNzYWdlIG9uIEFQSSBlcnJvcicsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb25PbmNlKCgpID0+XG4gICAgICAgIFByb21pc2UucmVzb2x2ZShjcmVhdGVNb2NrUmVzcG9uc2Uoe1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICBjb2RlOiAnREFUQUJBU0VfRVJST1InLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSlcbiAgICAgICk7XG5cbiAgICAgIHJlbmRlcig8QXVkaXRMb2dzUGFnZSAvPik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgeyB0aW1lb3V0OiAzMDAwIH1cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgZW1wdHkgbWVzc2FnZSB3aGVuIG5vIGxvZ3MgZm91bmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uT25jZSgoKSA9PlxuICAgICAgICBQcm9taXNlLnJlc29sdmUoY3JlYXRlTW9ja1Jlc3BvbnNlKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGxvZ3M6IFtdLFxuICAgICAgICAgICAgdG90YWw6IDAsXG4gICAgICAgICAgICBwYWdlOiAxLFxuICAgICAgICAgICAgcGFnZV9zaXplOiA1MCxcbiAgICAgICAgICAgIHRvdGFsX3BhZ2VzOiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pKVxuICAgICAgKTtcblxuICAgICAgcmVuZGVyKDxBdWRpdExvZ3NQYWdlIC8+KTtcblxuICAgICAgYXdhaXQgd2FpdEZvcihcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9Oby4qaXRlbXMuKmZvdW5kL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICB9LFxuICAgICAgICB7IHRpbWVvdXQ6IDMwMDAgfVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsIkRhdGFUYWJsZVdpdGhTdXNwZW5zZSIsImRhdGEiLCJjb2x1bW5zIiwibG9hZGluZyIsImRpdiIsImxlbmd0aCIsImRhdGEtdGVzdGlkIiwibWFwIiwiaXRlbSIsImluZGV4IiwiY29sIiwia2V5IiwicmVuZGVyIiwidXNlUm91dGVyIiwiZm4iLCJwdXNoIiwicmVwbGFjZSIsInByZWZldGNoIiwidXNlU2VhcmNoUGFyYW1zIiwiZ2V0IiwidXNlUGF0aG5hbWUiLCJzZXR1cEZldGNoTW9jayIsIm1vY2tMb2dzIiwiaWQiLCJ1c2VyX2lkIiwidXNlcl9lbWFpbCIsImVudGl0eV90eXBlIiwiZW50aXR5X2lkIiwib3BlcmF0aW9uX3R5cGUiLCJvbGRfZGF0YSIsIm5ld19kYXRhIiwiZmlyc3RfbmFtZSIsImxhc3RfbmFtZSIsImlwX2FkZHJlc3MiLCJ1c2VyX2FnZW50IiwiY3JlYXRlZF9hdCIsInRpdGxlIiwibmFtZSIsIm1vY2tTdWNjZXNzUmVzcG9uc2UiLCJzdWNjZXNzIiwibG9ncyIsInRvdGFsIiwicGFnZSIsInBhZ2Vfc2l6ZSIsInRvdGFsX3BhZ2VzIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsImNsZWFyRmV0Y2hNb2NrIiwiZ2xvYmFsIiwiZmV0Y2giLCJtb2NrSW1wbGVtZW50YXRpb24iLCJQcm9taXNlIiwicmVzb2x2ZSIsImNyZWF0ZU1vY2tSZXNwb25zZSIsIml0IiwiQXVkaXRMb2dzUGFnZSIsImV4cGVjdCIsInNjcmVlbiIsImdldEJ5VGV4dCIsInRvQmVJblRoZURvY3VtZW50IiwidG9CZURlZmluZWQiLCJ3YWl0Rm9yIiwidG9IYXZlQmVlbkNhbGxlZCIsInRpbWVvdXQiLCJlbGVtZW50cyIsImdldEFsbEJ5VGV4dCIsInRvQmVHcmVhdGVyVGhhbiIsImdldEJ5TGFiZWxUZXh0IiwiYWN0aW9uU2VsZWN0IiwiZmlyZUV2ZW50IiwiY2hhbmdlIiwidGFyZ2V0IiwidmFsdWUiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsInN0cmluZ0NvbnRhaW5pbmciLCJjbGVhckJ1dHRvbiIsImNsaWNrIiwidG9IYXZlVmFsdWUiLCJzZWFyY2hJbnB1dCIsImdldEJ5UGxhY2Vob2xkZXJUZXh0IiwibW9ja0ltcGxlbWVudGF0aW9uT25jZSIsInByZXZCdXR0b24iLCJ0b0JlRGlzYWJsZWQiLCJtb2NrQmxvYiIsIkJsb2IiLCJ0eXBlIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwicmV2b2tlT2JqZWN0VVJMIiwiZXhwb3J0QnV0dG9uIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSJdLCJtYXBwaW5ncyI6IjtBQUtBLDRCQUE0QjtBQUM1QkEsS0FBS0MsSUFBSSxDQUFDLHlDQUF5QyxJQUFPLENBQUE7UUFDeERDLHVCQUF1QixDQUFDLEVBQUVDLElBQUksRUFBRUMsT0FBTyxFQUFFQyxPQUFPLEVBQU87WUFDckQsSUFBSUEsU0FBUztnQkFDWCxxQkFBTyxxQkFBQ0M7OEJBQUk7O1lBQ2Q7WUFDQSxJQUFJSCxLQUFLSSxNQUFNLEtBQUssR0FBRztnQkFDckIscUJBQU8scUJBQUNEOzhCQUFJOztZQUNkO1lBQ0EscUJBQ0UscUJBQUNBO2dCQUFJRSxlQUFZOzBCQUNkTCxLQUFLTSxHQUFHLENBQUMsQ0FBQ0MsTUFBV0Msc0JBQ3BCLHFCQUFDTDt3QkFBZ0JFLGVBQWEsQ0FBQyxJQUFJLEVBQUVHLE9BQU87a0NBQ3pDUCxRQUFRSyxHQUFHLENBQUMsQ0FBQ0csb0JBQ1oscUJBQUNOO2dDQUFrQkUsZUFBYSxHQUFHSSxJQUFJQyxHQUFHLENBQUMsQ0FBQyxFQUFFRixPQUFPOzBDQUNsREMsSUFBSUUsTUFBTSxHQUFHRixJQUFJRSxNQUFNLENBQUNKLFFBQVFBLElBQUksQ0FBQ0UsSUFBSUMsR0FBRyxDQUFDOytCQUR0Q0QsSUFBSUMsR0FBRzt1QkFGWEY7O1FBVWxCO0lBQ0YsQ0FBQTtBQUVBLHNCQUFzQjtBQUN0QlgsS0FBS0MsSUFBSSxDQUFDLG1CQUFtQixJQUFPLENBQUE7UUFDbENjLFdBQVdmLEtB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