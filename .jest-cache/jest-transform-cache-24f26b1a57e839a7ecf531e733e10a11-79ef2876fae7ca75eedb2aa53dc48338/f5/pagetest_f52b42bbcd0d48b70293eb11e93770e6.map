{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/app/admin/audit-logs/page.test.tsx"],"sourcesContent":["import { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport AuditLogsPage from './page';\nimport type { AuditLog } from '@/services/auditLogService';\nimport { createMockResponse, setupFetchMock, clearFetchMock } from '@/__tests__/helpers/mockFetch';\n\n// Mock DataTable components\njest.mock('@/components/ui/DataTableWithSuspense', () => ({\n  DataTableWithSuspense: ({ data, columns, loading }: any) => {\n    if (loading) {\n      return <div>Loading...</div>;\n    }\n    if (data.length === 0) {\n      return <div>No items found</div>;\n    }\n    return (\n      <div data-testid=\"data-table\">\n        {data.map((item: any, index: number) => (\n          <div key={index} data-testid={`row-${index}`}>\n            {columns.map((col: any) => (\n              <div key={col.key} data-testid={`${col.key}-${index}`}>\n                {col.render ? col.render(item) : item[col.key]}\n              </div>\n            ))}\n          </div>\n        ))}\n      </div>\n    );\n  },\n}));\n\n// Mock Next.js router\njest.mock('next/navigation', () => ({\n  useRouter: jest.fn(() => ({\n    push: jest.fn(),\n    replace: jest.fn(),\n    prefetch: jest.fn(),\n  })),\n  useSearchParams: jest.fn(() => ({\n    get: jest.fn(),\n  })),\n  usePathname: jest.fn(() => '/admin/audit-logs'),\n}));\n\n// Setup fetch mock\nsetupFetchMock();\n\nconst mockLogs: AuditLog[] = [\n  {\n    id: 'log-1',\n    user_id: 'user-1',\n    user_email: 'admin@example.com',\n    entity_type: 'guest',\n    entity_id: 'guest-1',\n    operation_type: 'create',\n    old_data: null,\n    new_data: { first_name: 'John', last_name: 'Doe' },\n    ip_address: '192.168.1.1',\n    user_agent: 'Mozilla/5.0',\n    created_at: '2025-01-27T10:00:00.000Z',\n  },\n  {\n    id: 'log-2',\n    user_id: 'user-1',\n    user_email: 'admin@example.com',\n    entity_type: 'event',\n    entity_id: 'event-1',\n    operation_type: 'update',\n    old_data: { title: 'Old Title' },\n    new_data: { title: 'New Title' },\n    ip_address: '192.168.1.1',\n    user_agent: 'Mozilla/5.0',\n    created_at: '2025-01-27T11:00:00.000Z',\n  },\n  {\n    id: 'log-3',\n    user_id: 'user-2',\n    user_email: 'owner@example.com',\n    entity_type: 'vendor',\n    entity_id: 'vendor-1',\n    operation_type: 'delete',\n    old_data: { name: 'Vendor Name' },\n    new_data: null,\n    ip_address: '192.168.1.2',\n    user_agent: 'Mozilla/5.0',\n    created_at: '2025-01-27T12:00:00.000Z',\n  },\n];\n\nconst mockSuccessResponse = {\n  success: true,\n  data: {\n    logs: mockLogs,\n    total: 3,\n    page: 1,\n    page_size: 50,\n    total_pages: 1,\n  },\n};\n\ndescribe('AuditLogsPage', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    clearFetchMock();\n    \n    // Mock fetch to return audit logs\n    (global.fetch as jest.Mock).mockImplementation(() =>\n      Promise.resolve(createMockResponse(mockSuccessResponse))\n    );\n  });\n\n  describe('Log Display', () => {\n    it('should render audit logs page with title', async () => {\n      render(<AuditLogsPage />);\n\n      expect(screen.getByText('Audit Logs')).toBeInTheDocument();\n      expect(\n        screen.getByText('View and search system audit logs for accountability')\n      ).toBeInTheDocument();\n    });\n\n    it('should display audit logs after loading', async () => {\n      // Verify mock is set up correctly\n      expect(global.fetch).toBeDefined();\n      \n      render(<AuditLogsPage />);\n\n      // Wait for fetch to be called\n      await waitFor(\n        () => {\n          expect(global.fetch).toHaveBeenCalled();\n        },\n        { timeout: 3000 }\n      );\n\n      // Wait for data to be displayed - use getAllByText since email appears multiple times\n      await waitFor(\n        () => {\n          const elements = screen.getAllByText('admin@example.com');\n          expect(elements.length).toBeGreaterThan(0);\n        },\n        { timeout: 3000 }\n      );\n\n      expect(screen.getAllByText('owner@example.com').length).toBeGreaterThan(0);\n    });\n\n    it('should display action badges', async () => {\n      render(<AuditLogsPage />);\n\n      await waitFor(\n        () => {\n          // The action badges show uppercase operation types\n          expect(screen.getByText(/create/i)).toBeInTheDocument();\n        },\n        { timeout: 3000 }\n      );\n\n      expect(screen.getByText(/update/i)).toBeInTheDocument();\n      expect(screen.getByText(/delete/i)).toBeInTheDocument();\n    });\n\n    it('should highlight critical actions', async () => {\n      render(<AuditLogsPage />);\n\n      await waitFor(\n        () => {\n          expect(screen.getByText('⚠️ Critical Action')).toBeInTheDocument();\n        },\n        { timeout: 3000 }\n      );\n    });\n  });\n\n  describe('Filtering', () => {\n    it('should have filter controls', () => {\n      render(<AuditLogsPage />);\n\n      expect(screen.getByLabelText('Search')).toBeInTheDocument();\n      expect(screen.getByLabelText('Action Type')).toBeInTheDocument();\n      expect(screen.getByLabelText('Entity Type')).toBeInTheDocument();\n      expect(screen.getByLabelText('Date Range')).toBeInTheDocument();\n    });\n\n    it('should call API with filters when action type changes', async () => {\n      render(<AuditLogsPage />);\n\n      await waitFor(() => {\n        expect(global.fetch).toHaveBeenCalled();\n      });\n\n      const actionSelect = screen.getByLabelText('Action Type');\n      fireEvent.change(actionSelect, { target: { value: 'create' } });\n\n      await waitFor(() => {\n        expect(global.fetch).toHaveBeenCalledWith(\n          expect.stringContaining('operation_type=create')\n        );\n      });\n    });\n\n    it('should clear filters when clear button clicked', async () => {\n      render(<AuditLogsPage />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Clear Filters')).toBeInTheDocument();\n      });\n\n      const actionSelect = screen.getByLabelText('Action Type');\n      fireEvent.change(actionSelect, { target: { value: 'create' } });\n\n      const clearButton = screen.getByText('Clear Filters');\n      fireEvent.click(clearButton);\n\n      expect(actionSelect).toHaveValue('');\n    });\n  });\n\n  describe('Search', () => {\n    it('should filter logs client-side when searching', async () => {\n      render(<AuditLogsPage />);\n\n      await waitFor(\n        () => {\n          const elements = screen.getAllByText('admin@example.com');\n          expect(elements.length).toBeGreaterThan(0);\n        },\n        { timeout: 3000 }\n      );\n\n      const searchInput = screen.getByPlaceholderText('Search descriptions...');\n      fireEvent.change(searchInput, { target: { value: 'guest' } });\n\n      // Should still show guest-related log\n      await waitFor(() => {\n        expect(screen.getByText(/guest/i)).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Pagination', () => {\n    it('should display pagination when multiple pages exist', async () => {\n      (global.fetch as jest.Mock).mockImplementationOnce(() =>\n        Promise.resolve(createMockResponse({\n          success: true,\n          data: {\n            logs: mockLogs,\n            total: 150,\n            page: 1,\n            page_size: 50,\n            total_pages: 3,\n          },\n        }))\n      );\n\n      render(<AuditLogsPage />);\n\n      await waitFor(\n        () => {\n          expect(screen.getByText(/Showing page 1 of 3/)).toBeInTheDocument();\n        },\n        { timeout: 3000 }\n      );\n\n      expect(screen.getByText('Previous')).toBeInTheDocument();\n      expect(screen.getByText('Next')).toBeInTheDocument();\n    });\n\n    it('should disable Previous button on first page', async () => {\n      (global.fetch as jest.Mock).mockImplementationOnce(() =>\n        Promise.resolve(createMockResponse({\n          success: true,\n          data: {\n            logs: mockLogs,\n            total: 150,\n            page: 1,\n            page_size: 50,\n            total_pages: 3,\n          },\n        }))\n      );\n\n      render(<AuditLogsPage />);\n\n      await waitFor(\n        () => {\n          const prevButton = screen.getByText('Previous');\n          expect(prevButton).toBeDisabled();\n        },\n        { timeout: 3000 }\n      );\n    });\n  });\n\n  describe('CSV Export', () => {\n    it('should have export button', () => {\n      render(<AuditLogsPage />);\n\n      expect(screen.getByText('Export CSV')).toBeInTheDocument();\n    });\n\n    it('should call export API when export button clicked', async () => {\n      const mockBlob = new Blob(['csv content'], { type: 'text/csv' });\n      global.URL.createObjectURL = jest.fn(() => 'blob:mock-url');\n      global.URL.revokeObjectURL = jest.fn();\n\n      (global.fetch as jest.Mock)\n        .mockImplementationOnce(() => Promise.resolve(createMockResponse(mockSuccessResponse)))\n        .mockImplementationOnce(() => Promise.resolve(createMockResponse(mockBlob)));\n\n      render(<AuditLogsPage />);\n\n      await waitFor(() => {\n        expect(screen.getByText('Export CSV')).toBeInTheDocument();\n      });\n\n      const exportButton = screen.getByText('Export CSV');\n      fireEvent.click(exportButton);\n\n      await waitFor(() => {\n        expect(global.fetch).toHaveBeenCalledWith(\n          expect.stringContaining('/api/admin/audit-logs/export')\n        );\n      });\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should display error message on API error', async () => {\n      (global.fetch as jest.Mock).mockImplementationOnce(() =>\n        Promise.resolve(createMockResponse({\n          success: false,\n          error: {\n            code: 'DATABASE_ERROR',\n            message: 'Database connection failed',\n          },\n        }))\n      );\n\n      render(<AuditLogsPage />);\n\n      await waitFor(\n        () => {\n          expect(screen.getByText('Database connection failed')).toBeInTheDocument();\n        },\n        { timeout: 3000 }\n      );\n    });\n\n    it('should display empty message when no logs found', async () => {\n      (global.fetch as jest.Mock).mockImplementationOnce(() =>\n        Promise.resolve(createMockResponse({\n          success: true,\n          data: {\n            logs: [],\n            total: 0,\n            page: 1,\n            page_size: 50,\n            total_pages: 0,\n          },\n        }))\n      );\n\n      render(<AuditLogsPage />);\n\n      await waitFor(\n        () => {\n          expect(screen.getByText(/No.*items.*found/i)).toBeInTheDocument();\n        },\n        { timeout: 3000 }\n      );\n    });\n  });\n});\n"],"names":["jest","mock","DataTableWithSuspense","data","columns","loading","div","length","data-testid","map","item","index","col","key","render","useRouter","fn","push","replace","prefetch","useSearchParams","get","usePathname","setupFetchMock","mockLogs","id","user_id","user_email","entity_type","entity_id","operation_type","old_data","new_data","first_name","last_name","ip_address","user_agent","created_at","title","name","mockSuccessResponse","success","logs","total","page","page_size","total_pages","describe","beforeEach","clearAllMocks","clearFetchMock","global","fetch","mockImplementation","Promise","resolve","createMockResponse","it","AuditLogsPage","expect","screen","getByText","toBeInTheDocument","toBeDefined","waitFor","toHaveBeenCalled","timeout","elements","getAllByText","toBeGreaterThan","getByLabelText","actionSelect","fireEvent","change","target","value","toHaveBeenCalledWith","stringContaining","clearButton","click","toHaveValue","searchInput","getByPlaceholderText","mockImplementationOnce","prevButton","toBeDisabled","mockBlob","Blob","type","URL","createObjectURL","revokeObjectURL","exportButton","error","code","message"],"mappings":"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"}