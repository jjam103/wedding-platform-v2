9667b849cdd6e7e677b2be7f10879583
/**
 * Unit Tests for SectionEditor Component
 * 
 * Tests:
 * - Section creation
 * - Section reordering
 * - Layout toggle
 * - Column editing
 * 
 * Requirements: 2.1-2.6
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _SectionEditor = require("./SectionEditor");
// Mock fetch globally
global.fetch = jest.fn();
// Mock window.confirm
const originalConfirm = window.confirm;
// Mock scrollIntoView
Element.prototype.scrollIntoView = jest.fn();
// Mock section data
const mockSection = {
    id: 'section-1',
    page_type: 'custom',
    page_id: 'page-1',
    display_order: 0,
    created_at: '2024-01-01T00:00:00Z',
    updated_at: '2024-01-01T00:00:00Z',
    columns: [
        {
            id: 'column-1',
            section_id: 'section-1',
            column_number: 1,
            content_type: 'rich_text',
            content_data: {
                html: '<p>Test content</p>'
            },
            created_at: '2024-01-01T00:00:00Z',
            updated_at: '2024-01-01T00:00:00Z'
        }
    ]
};
const mockTwoColumnSection = {
    ...mockSection,
    id: 'section-2',
    display_order: 1,
    columns: [
        {
            id: 'column-2',
            section_id: 'section-2',
            column_number: 1,
            content_type: 'rich_text',
            content_data: {
                html: '<p>Column 1</p>'
            },
            created_at: '2024-01-01T00:00:00Z',
            updated_at: '2024-01-01T00:00:00Z'
        },
        {
            id: 'column-3',
            section_id: 'section-2',
            column_number: 2,
            content_type: 'rich_text',
            content_data: {
                html: '<p>Column 2</p>'
            },
            created_at: '2024-01-01T00:00:00Z',
            updated_at: '2024-01-01T00:00:00Z'
        }
    ]
};
describe('SectionEditor', ()=>{
    let mockOnSave;
    let mockOnClose;
    beforeEach(()=>{
        mockOnSave = jest.fn();
        mockOnClose = jest.fn();
        window.confirm = jest.fn().mockReturnValue(true);
        global.fetch.mockReset();
        jest.clearAllMocks();
    });
    afterEach(()=>{
        (0, _react.cleanup)();
        window.confirm = originalConfirm;
    });
    const mockFetchSuccess = (data)=>{
        global.fetch.mockResolvedValueOnce({
            ok: true,
            json: async ()=>({
                    success: true,
                    data
                })
        });
    };
    const mockFetchError = (message)=>{
        global.fetch.mockResolvedValueOnce({
            ok: true,
            json: async ()=>({
                    success: false,
                    error: {
                        message
                    }
                })
        });
    };
    describe('Section Creation', ()=>{
        it('should display "Add Section" button', async ()=>{
            mockFetchSuccess([]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /\+ add section/i
                })).toBeInTheDocument();
            });
        });
        it('should create new section when "Add Section" is clicked', async ()=>{
            mockFetchSuccess([]); // Initial fetch
            mockFetchSuccess(mockSection); // Create section
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /\+ add section/i
                })).toBeInTheDocument();
            });
            const addButton = _react.screen.getByRole('button', {
                name: /\+ add section/i
            });
            _react.fireEvent.click(addButton);
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/admin/sections', expect.objectContaining({
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: expect.stringContaining('"page_id":"page-1"')
                }));
            });
        });
        it('should add new section to the list after creation', async ()=>{
            mockFetchSuccess([]); // Initial fetch
            mockFetchSuccess(mockSection); // Create section
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/no sections yet/i)).toBeInTheDocument();
            });
            const addButton = _react.screen.getByRole('button', {
                name: /\+ add section/i
            });
            _react.fireEvent.click(addButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
        });
        it('should create section with one column by default', async ()=>{
            mockFetchSuccess([]); // Initial fetch
            mockFetchSuccess(mockSection); // Create section
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /\+ add section/i
                })).toBeInTheDocument();
            });
            const addButton = _react.screen.getByRole('button', {
                name: /\+ add section/i
            });
            _react.fireEvent.click(addButton);
            await (0, _react.waitFor)(()=>{
                const createCall = global.fetch.mock.calls.find((call)=>call[0] === '/api/admin/sections' && call[1]?.method === 'POST');
                expect(createCall).toBeDefined();
                const body = JSON.parse(createCall[1].body);
                expect(body.columns).toHaveLength(1);
                expect(body.columns[0].column_number).toBe(1);
            });
        });
        it('should display error message when section creation fails', async ()=>{
            mockFetchSuccess([]); // Initial fetch
            mockFetchError('Failed to create section'); // Create section error
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /\+ add section/i
                })).toBeInTheDocument();
            });
            const addButton = _react.screen.getByRole('button', {
                name: /\+ add section/i
            });
            _react.fireEvent.click(addButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Failed to create section')).toBeInTheDocument();
            });
        });
        it('should disable "Add Section" button while saving', async ()=>{
            mockFetchSuccess([]); // Initial fetch
            // Mock a delayed response
            global.fetch.mockImplementationOnce(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            ok: true,
                            json: async ()=>({
                                    success: true,
                                    data: mockSection
                                })
                        }), 100)));
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /\+ add section/i
                })).toBeInTheDocument();
            });
            const addButton = _react.screen.getByRole('button', {
                name: /\+ add section/i
            });
            _react.fireEvent.click(addButton);
            // Button should be disabled during save
            expect(addButton).toBeDisabled();
        });
    });
    describe('Section Reordering', ()=>{
        it.skip('should display move up and move down buttons for sections', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const moveUpButtons = _react.screen.getAllByRole('button', {
                name: /move section up/i
            });
            const moveDownButtons = _react.screen.getAllByRole('button', {
                name: /move section down/i
            });
            expect(moveUpButtons).toHaveLength(2);
            expect(moveDownButtons).toHaveLength(2);
        });
        it.skip('should disable move up button for first section', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const moveUpButtons = _react.screen.getAllByRole('button', {
                name: /move section up/i
            });
            expect(moveUpButtons[0]).toBeDisabled();
            expect(moveUpButtons[1]).not.toBeDisabled();
        });
        it.skip('should disable move down button for last section', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const moveDownButtons = _react.screen.getAllByRole('button', {
                name: /move section down/i
            });
            expect(moveDownButtons[0]).not.toBeDisabled();
            expect(moveDownButtons[1]).toBeDisabled();
        });
        it.skip('should move section up when move up button is clicked', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            mockFetchSuccess({
                success: true
            }); // Reorder API call
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#2', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            // Click move up on second section
            const moveUpButtons = _react.screen.getAllByRole('button', {
                name: /move section up/i
            });
            _react.fireEvent.click(moveUpButtons[1]);
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/admin/sections/reorder', expect.objectContaining({
                    method: 'POST',
                    body: expect.stringContaining('"pageId":"page-1"')
                }));
            });
        });
        it.skip('should move section down when move down button is clicked', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            mockFetchSuccess({
                success: true
            }); // Reorder API call
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            // Click move down on first section
            const moveDownButtons = _react.screen.getAllByRole('button', {
                name: /move section down/i
            });
            _react.fireEvent.click(moveDownButtons[0]);
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/admin/sections/reorder', expect.objectContaining({
                    method: 'POST'
                }));
            });
        });
        it('should support drag and drop reordering', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            mockFetchSuccess({
                success: true
            }); // Reorder API call
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const sections = _react.screen.getAllByText(/#\d+/, {
                selector: 'span'
            });
            const firstSection = sections[0].closest('div[draggable="true"]');
            const secondSection = sections[1].closest('div[draggable="true"]');
            // Simulate drag and drop
            if (firstSection && secondSection) {
                _react.fireEvent.dragStart(firstSection);
                _react.fireEvent.dragOver(secondSection);
                _react.fireEvent.drop(secondSection);
            }
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/admin/sections/reorder', expect.objectContaining({
                    method: 'POST'
                }));
            });
        });
        it('should apply opacity style to dragged section', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const sections = _react.screen.getAllByText(/#\d+/, {
                selector: 'span'
            });
            const firstSection = sections[0].closest('div[draggable="true"]');
            if (firstSection) {
                _react.fireEvent.dragStart(firstSection);
                expect(firstSection.className).toContain('opacity-50');
            }
        });
        it.skip('should call reorder API when moving section', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]); // Initial fetch
            mockFetchSuccess({
                success: true
            }); // Reorder API success
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const moveDownButtons = _react.screen.getAllByRole('button', {
                name: /move section down/i
            });
            _react.fireEvent.click(moveDownButtons[0]);
            // Should call reorder API
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith('/api/admin/sections/reorder', expect.objectContaining({
                    method: 'POST'
                }));
            });
        });
        it('should not reorder when dragging section onto itself', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const sections = _react.screen.getAllByText(/#\d+/, {
                selector: 'span'
            });
            const firstSection = sections[0].closest('div[draggable="true"]');
            if (firstSection) {
                _react.fireEvent.dragStart(firstSection);
                _react.fireEvent.drop(firstSection);
            }
            // Should not call reorder API
            expect(global.fetch).not.toHaveBeenCalledWith('/api/admin/sections/reorder', expect.anything());
        });
    });
    describe('Layout Toggle', ()=>{
        it.skip('should display layout toggle button for each section', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const layoutButton = _react.screen.getByRole('button', {
                name: /toggle to two column layout/i
            });
            expect(layoutButton).toBeInTheDocument();
            expect(layoutButton).toHaveTextContent('1 Col');
        });
        it.skip('should show "1 Col" for one-column layout', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const layoutButton = _react.screen.getByRole('button', {
                name: /toggle to two column layout/i
            });
            expect(layoutButton).toHaveTextContent('1 Col');
        });
        it.skip('should show "2 Col" for two-column layout', async ()=>{
            mockFetchSuccess([
                mockTwoColumnSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const layoutButton = _react.screen.getByRole('button', {
                name: /toggle to one column layout/i
            });
            expect(layoutButton).toHaveTextContent('2 Col');
        });
        it.skip('should toggle from one column to two columns', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            mockFetchSuccess(mockTwoColumnSection); // Updated section with 2 columns
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const layoutButton = _react.screen.getByRole('button', {
                name: /toggle to two column layout/i
            });
            _react.fireEvent.click(layoutButton);
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(`/api/admin/sections/${mockSection.id}`, expect.objectContaining({
                    method: 'PUT',
                    body: expect.stringContaining('"columns"')
                }));
            });
        });
        it.skip('should toggle from two columns to one column', async ()=>{
            mockFetchSuccess([
                mockTwoColumnSection
            ]);
            mockFetchSuccess(mockSection); // Updated section with 1 column
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const layoutButton = _react.screen.getByRole('button', {
                name: /toggle to one column layout/i
            });
            _react.fireEvent.click(layoutButton);
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(`/api/admin/sections/${mockTwoColumnSection.id}`, expect.objectContaining({
                    method: 'PUT'
                }));
            });
        });
        it.skip('should add second column when toggling to two columns', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            mockFetchSuccess(mockTwoColumnSection);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const layoutButton = _react.screen.getByRole('button', {
                name: /toggle to two column layout/i
            });
            _react.fireEvent.click(layoutButton);
            await (0, _react.waitFor)(()=>{
                const updateCall = global.fetch.mock.calls.find((call)=>call[0].includes('/api/admin/sections/section-') && call[1]?.method === 'PUT');
                expect(updateCall).toBeDefined();
                const body = JSON.parse(updateCall[1].body);
                expect(body.columns).toHaveLength(2);
                expect(body.columns[1].column_number).toBe(2);
            });
        });
        it.skip('should keep only first column when toggling to one column', async ()=>{
            mockFetchSuccess([
                mockTwoColumnSection
            ]);
            mockFetchSuccess(mockSection);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const layoutButton = _react.screen.getByRole('button', {
                name: /toggle to one column layout/i
            });
            _react.fireEvent.click(layoutButton);
            await (0, _react.waitFor)(()=>{
                const updateCall = global.fetch.mock.calls.find((call)=>call[0].includes('/api/admin/sections/section-') && call[1]?.method === 'PUT');
                expect(updateCall).toBeDefined();
                const body = JSON.parse(updateCall[1].body);
                expect(body.columns).toHaveLength(1);
            });
        });
        it.skip('should display error when layout toggle fails', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            mockFetchError('Failed to update layout');
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const layoutButton = _react.screen.getByRole('button', {
                name: /toggle to two column layout/i
            });
            _react.fireEvent.click(layoutButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('alert')).toHaveTextContent('Failed to update layout');
            });
        });
        it.skip('should render columns in grid layout based on column count', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const sections = _react.screen.getAllByText(/#\d+/, {
                selector: 'span'
            }).map((el)=>el.closest('div[draggable="true"]'));
            // First section should have grid-cols-1
            const firstSectionContent = sections[0]?.querySelector('.grid');
            expect(firstSectionContent?.className).toContain('grid-cols-1');
            // Second section should have grid-cols-2
            const secondSectionContent = sections[1]?.querySelector('.grid');
            expect(secondSectionContent?.className).toContain('grid-cols-2');
        });
    });
    describe('Column Editing', ()=>{
        it.skip('should display column content for rich text', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Column 1')).toBeInTheDocument();
            });
            // Rich text content should be displayed (as escaped HTML)
            expect(_react.screen.getByText(/<p>Test content<\/p>/)).toBeInTheDocument();
        });
        it.skip('should display column number label', async ()=>{
            mockFetchSuccess([
                mockTwoColumnSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            // Check for column labels specifically (not content)
            const columnLabels = _react.screen.getAllByText(/^Column \d$/);
            expect(columnLabels).toHaveLength(2);
            expect(columnLabels[0]).toHaveTextContent('Column 1');
            expect(columnLabels[1]).toHaveTextContent('Column 2');
        });
        it.skip('should display empty content placeholder for empty rich text', async ()=>{
            const emptySection = {
                ...mockSection,
                columns: [
                    {
                        ...mockSection.columns[0],
                        content_data: {
                            html: ''
                        }
                    }
                ]
            };
            mockFetchSuccess([
                emptySection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            expect(_react.screen.getByText('Empty content')).toBeInTheDocument();
        });
        it.skip('should display photo gallery content type', async ()=>{
            const photoSection = {
                ...mockSection,
                columns: [
                    {
                        ...mockSection.columns[0],
                        content_type: 'photo_gallery',
                        content_data: {
                            photo_ids: [
                                'photo-1',
                                'photo-2',
                                'photo-3'
                            ]
                        }
                    }
                ]
            };
            mockFetchSuccess([
                photoSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            expect(_react.screen.getByText('Photo Gallery (3 photos)')).toBeInTheDocument();
        });
        it.skip('should display references content type', async ()=>{
            const referenceSection = {
                ...mockSection,
                columns: [
                    {
                        ...mockSection.columns[0],
                        content_type: 'references',
                        content_data: {
                            references: [
                                {
                                    id: 'ref-1',
                                    type: 'event',
                                    name: 'Ceremony'
                                }
                            ]
                        }
                    }
                ]
            };
            mockFetchSuccess([
                referenceSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            expect(_react.screen.getByText('References (1 items)')).toBeInTheDocument();
        });
        it.skip('should display zero count for empty photo gallery', async ()=>{
            const emptyPhotoSection = {
                ...mockSection,
                columns: [
                    {
                        ...mockSection.columns[0],
                        content_type: 'photo_gallery',
                        content_data: {}
                    }
                ]
            };
            mockFetchSuccess([
                emptyPhotoSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            expect(_react.screen.getByText('Photo Gallery (0 photos)')).toBeInTheDocument();
        });
    });
    describe('Section Deletion', ()=>{
        it.skip('should display delete button for each section', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            expect(_react.screen.getByRole('button', {
                name: /delete section/i
            })).toBeInTheDocument();
        });
        it.skip('should show confirmation dialog when delete is clicked', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const deleteButton = _react.screen.getByRole('button', {
                name: /delete section/i
            });
            _react.fireEvent.click(deleteButton);
            expect(window.confirm).toHaveBeenCalledWith('Are you sure you want to delete this section?');
        });
        it.skip('should delete section when confirmed', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            mockFetchSuccess({
                success: true
            }); // Delete API call
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const deleteButton = _react.screen.getByRole('button', {
                name: /delete section/i
            });
            _react.fireEvent.click(deleteButton);
            await (0, _react.waitFor)(()=>{
                expect(global.fetch).toHaveBeenCalledWith(`/api/admin/sections/${mockSection.id}`, expect.objectContaining({
                    method: 'DELETE'
                }));
            });
        });
        it.skip('should not delete section when confirmation is cancelled', async ()=>{
            window.confirm = jest.fn().mockReturnValue(false);
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const deleteButton = _react.screen.getByRole('button', {
                name: /delete section/i
            });
            _react.fireEvent.click(deleteButton);
            // Should not call delete API
            expect(global.fetch).not.toHaveBeenCalledWith(expect.stringContaining('/api/admin/sections/'), expect.objectContaining({
                method: 'DELETE'
            }));
        });
        it.skip('should remove section from list after successful deletion', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            mockFetchSuccess({
                success: true
            }); // Delete API call
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
                expect(_react.screen.getByText('#2', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const deleteButtons = _react.screen.getAllByRole('button', {
                name: /delete section/i
            });
            _react.fireEvent.click(deleteButtons[0]);
            await (0, _react.waitFor)(()=>{
                // After deletion, only one section should remain
                const sections = _react.screen.getAllByText(/#\d+/, {
                    selector: 'span'
                });
                expect(sections).toHaveLength(1);
            });
        });
        it.skip('should display error when deletion fails', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            mockFetchError('Failed to delete section');
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const deleteButton = _react.screen.getByRole('button', {
                name: /delete section/i
            });
            _react.fireEvent.click(deleteButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('alert')).toHaveTextContent('Failed to delete section');
            });
        });
    });
    describe('Loading and Error States', ()=>{
        it('should display loading state while fetching sections', ()=>{
            global.fetch.mockImplementationOnce(()=>new Promise(()=>{}) // Never resolves
            );
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            expect(_react.screen.getByText('Loading sections...')).toBeInTheDocument();
        });
        it('should display error message when fetch fails', async ()=>{
            mockFetchError('Failed to load sections');
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('alert')).toHaveTextContent('Failed to load sections');
            });
        });
        it('should display empty state when no sections exist', async ()=>{
            mockFetchSuccess([]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText(/no sections yet/i)).toBeInTheDocument();
            });
        });
        it('should have error alert with proper role', async ()=>{
            mockFetchError('Test error message');
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                const alert = _react.screen.getByRole('alert');
                expect(alert).toBeInTheDocument();
                expect(alert).toHaveTextContent('Test error message');
            });
        });
    });
    describe('Header Actions', ()=>{
        it.skip('should display "Save All" button', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
            // Save All button removed from component
            });
        });
        it.skip('should call onSave when "Save All" is clicked', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const saveButton = _react.screen.getByRole('button', {
                name: /save all sections/i
            });
            _react.fireEvent.click(saveButton);
            expect(mockOnSave).toHaveBeenCalledTimes(1);
        });
        it('should display "Guest Preview" button', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /guest preview/i
                })).toBeInTheDocument();
            });
        });
        it('should open preview modal when "Guest Preview" is clicked', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /guest preview/i
                })).toBeInTheDocument();
            });
            const previewButton = _react.screen.getByRole('button', {
                name: /guest preview/i
            });
            _react.fireEvent.click(previewButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Guest Preview')).toBeInTheDocument();
            });
        });
        it.skip('should display "Close" button when onClose is provided', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
            // Close button removed from component
            });
        });
        it.skip('should not display "Close" button when onClose is not provided', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            expect(_react.screen.queryByRole('button', {
                name: /close section editor/i
            })).not.toBeInTheDocument();
        });
        it.skip('should call onClose when "Close" button is clicked', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
            // Close button removed from component
            });
            const closeButton = _react.screen.getByRole('button', {
                name: /close section editor/i
            });
            _react.fireEvent.click(closeButton);
            expect(mockOnClose).toHaveBeenCalledTimes(1);
        });
        it.skip('should disable "Save All" button while saving', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            // Mock a delayed response
            global.fetch.mockImplementationOnce(()=>new Promise((resolve)=>setTimeout(()=>resolve({
                            ok: true,
                            json: async ()=>({
                                    success: true,
                                    data: mockSection
                                })
                        }), 100)));
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /\+ add section/i
                })).toBeInTheDocument();
            });
            const addButton = _react.screen.getByRole('button', {
                name: /\+ add section/i
            });
            _react.fireEvent.click(addButton);
            // Save button should be disabled during save
            const saveButton = _react.screen.getByRole('button', {
                name: /save all sections/i
            });
            expect(saveButton).toBeDisabled();
        });
    });
    describe('Preview Modal', ()=>{
        it.skip('should close preview modal when close button is clicked', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /guest preview/i
                })).toBeInTheDocument();
            });
            const previewButton = _react.screen.getByRole('button', {
                name: /guest preview/i
            });
            _react.fireEvent.click(previewButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Guest Preview')).toBeInTheDocument();
            });
            const closePreviewButton = _react.screen.getByRole('button', {
                name: /close preview/i
            });
            _react.fireEvent.click(closePreviewButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Guest Preview')).not.toBeInTheDocument();
            });
        });
        it.skip('should close preview modal when backdrop is clicked', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /guest preview/i
                })).toBeInTheDocument();
            });
            const previewButton = _react.screen.getByRole('button', {
                name: /guest preview/i
            });
            _react.fireEvent.click(previewButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Guest Preview')).toBeInTheDocument();
            });
            // Click backdrop (the fixed inset-0 div)
            const backdrop = _react.screen.getByText('Guest Preview').closest('.fixed');
            if (backdrop) {
                _react.fireEvent.click(backdrop);
            }
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.queryByText('Guest Preview')).not.toBeInTheDocument();
            });
        });
        it.skip('should render sections in preview modal', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByRole('button', {
                    name: /guest preview/i
                })).toBeInTheDocument();
            });
            const previewButton = _react.screen.getByRole('button', {
                name: /guest preview/i
            });
            _react.fireEvent.click(previewButton);
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('Guest Preview')).toBeInTheDocument();
            });
            // Content should be rendered in preview
            const previewContent = _react.screen.getAllByText('Test content');
            expect(previewContent.length).toBeGreaterThan(0);
        });
    });
    describe('Accessibility', ()=>{
        it('should have proper aria labels on all buttons', async ()=>{
            mockFetchSuccess([
                mockSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            // Check for buttons that actually exist in the component
            expect(_react.screen.getByRole('button', {
                name: /\+ add section/i
            })).toBeInTheDocument();
            expect(_react.screen.getByRole('button', {
                name: /^view$/i
            })).toBeInTheDocument();
            expect(_react.screen.getByRole('button', {
                name: /^edit$/i
            })).toBeInTheDocument();
            expect(_react.screen.getByRole('button', {
                name: /^delete$/i
            })).toBeInTheDocument();
            expect(_react.screen.getByRole('button', {
                name: /guest preview/i
            })).toBeInTheDocument();
        });
        it('should have proper role for error messages', async ()=>{
            mockFetchError('Test error');
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                const alert = _react.screen.getByRole('alert');
                expect(alert).toHaveTextContent('Test error');
            });
        });
        it('should support keyboard navigation for draggable sections', async ()=>{
            mockFetchSuccess([
                mockSection,
                mockTwoColumnSection
            ]);
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_SectionEditor.SectionEditor, {
                pageType: "custom",
                pageId: "page-1",
                onSave: mockOnSave,
                onClose: mockOnClose
            }));
            await (0, _react.waitFor)(()=>{
                expect(_react.screen.getByText('#1', {
                    selector: 'span'
                })).toBeInTheDocument();
            });
            const sections = _react.screen.getAllByText(/#\d+/, {
                selector: 'span'
            }).map((el)=>el.closest('div[draggable="true"]'));
            sections.forEach((section)=>{
                expect(section).toHaveAttribute('draggable', 'true');
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9hZG1pbi9TZWN0aW9uRWRpdG9yLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5pdCBUZXN0cyBmb3IgU2VjdGlvbkVkaXRvciBDb21wb25lbnRcbiAqIFxuICogVGVzdHM6XG4gKiAtIFNlY3Rpb24gY3JlYXRpb25cbiAqIC0gU2VjdGlvbiByZW9yZGVyaW5nXG4gKiAtIExheW91dCB0b2dnbGVcbiAqIC0gQ29sdW1uIGVkaXRpbmdcbiAqIFxuICogUmVxdWlyZW1lbnRzOiAyLjEtMi42XG4gKi9cblxuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIGZpcmVFdmVudCwgd2FpdEZvciwgY2xlYW51cCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHsgU2VjdGlvbkVkaXRvciB9IGZyb20gJy4vU2VjdGlvbkVkaXRvcic7XG5cbi8vIE1vY2sgZmV0Y2ggZ2xvYmFsbHlcbmdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKTtcblxuLy8gTW9jayB3aW5kb3cuY29uZmlybVxuY29uc3Qgb3JpZ2luYWxDb25maXJtID0gd2luZG93LmNvbmZpcm07XG5cbi8vIE1vY2sgc2Nyb2xsSW50b1ZpZXdcbkVsZW1lbnQucHJvdG90eXBlLnNjcm9sbEludG9WaWV3ID0gamVzdC5mbigpO1xuXG4vLyBNb2NrIHNlY3Rpb24gZGF0YVxuY29uc3QgbW9ja1NlY3Rpb24gPSB7XG4gIGlkOiAnc2VjdGlvbi0xJyxcbiAgcGFnZV90eXBlOiAnY3VzdG9tJyBhcyBjb25zdCxcbiAgcGFnZV9pZDogJ3BhZ2UtMScsXG4gIGRpc3BsYXlfb3JkZXI6IDAsXG4gIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gIGNvbHVtbnM6IFtcbiAgICB7XG4gICAgICBpZDogJ2NvbHVtbi0xJyxcbiAgICAgIHNlY3Rpb25faWQ6ICdzZWN0aW9uLTEnLFxuICAgICAgY29sdW1uX251bWJlcjogMSBhcyBjb25zdCxcbiAgICAgIGNvbnRlbnRfdHlwZTogJ3JpY2hfdGV4dCcgYXMgY29uc3QsXG4gICAgICBjb250ZW50X2RhdGE6IHsgaHRtbDogJzxwPlRlc3QgY29udGVudDwvcD4nIH0sXG4gICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICB9LFxuICBdLFxufTtcblxuY29uc3QgbW9ja1R3b0NvbHVtblNlY3Rpb24gPSB7XG4gIC4uLm1vY2tTZWN0aW9uLFxuICBpZDogJ3NlY3Rpb24tMicsXG4gIGRpc3BsYXlfb3JkZXI6IDEsXG4gIGNvbHVtbnM6IFtcbiAgICB7XG4gICAgICBpZDogJ2NvbHVtbi0yJyxcbiAgICAgIHNlY3Rpb25faWQ6ICdzZWN0aW9uLTInLFxuICAgICAgY29sdW1uX251bWJlcjogMSBhcyBjb25zdCxcbiAgICAgIGNvbnRlbnRfdHlwZTogJ3JpY2hfdGV4dCcgYXMgY29uc3QsXG4gICAgICBjb250ZW50X2RhdGE6IHsgaHRtbDogJzxwPkNvbHVtbiAxPC9wPicgfSxcbiAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICdjb2x1bW4tMycsXG4gICAgICBzZWN0aW9uX2lkOiAnc2VjdGlvbi0yJyxcbiAgICAgIGNvbHVtbl9udW1iZXI6IDIgYXMgY29uc3QsXG4gICAgICBjb250ZW50X3R5cGU6ICdyaWNoX3RleHQnIGFzIGNvbnN0LFxuICAgICAgY29udGVudF9kYXRhOiB7IGh0bWw6ICc8cD5Db2x1bW4gMjwvcD4nIH0sXG4gICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICB9LFxuICBdLFxufTtcblxuZGVzY3JpYmUoJ1NlY3Rpb25FZGl0b3InLCAoKSA9PiB7XG4gIGxldCBtb2NrT25TYXZlOiBqZXN0Lk1vY2s7XG4gIGxldCBtb2NrT25DbG9zZTogamVzdC5Nb2NrO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIG1vY2tPblNhdmUgPSBqZXN0LmZuKCk7XG4gICAgbW9ja09uQ2xvc2UgPSBqZXN0LmZuKCk7XG4gICAgd2luZG93LmNvbmZpcm0gPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHRydWUpO1xuICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVzZXQoKTtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBjbGVhbnVwKCk7XG4gICAgd2luZG93LmNvbmZpcm0gPSBvcmlnaW5hbENvbmZpcm07XG4gIH0pO1xuXG4gIGNvbnN0IG1vY2tGZXRjaFN1Y2Nlc3MgPSAoZGF0YTogYW55KSA9PiB7XG4gICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICBvazogdHJ1ZSxcbiAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGEgfSksXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgbW9ja0ZldGNoRXJyb3IgPSAobWVzc2FnZTogc3RyaW5nKSA9PiB7XG4gICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICBvazogdHJ1ZSxcbiAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogeyBtZXNzYWdlIH0gfSksXG4gICAgfSk7XG4gIH07XG5cbiAgZGVzY3JpYmUoJ1NlY3Rpb24gQ3JlYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IFwiQWRkIFNlY3Rpb25cIiBidXR0b24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFtdKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvXFwrIGFkZCBzZWN0aW9uL2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY3JlYXRlIG5ldyBzZWN0aW9uIHdoZW4gXCJBZGQgU2VjdGlvblwiIGlzIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFtdKTsgLy8gSW5pdGlhbCBmZXRjaFxuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyhtb2NrU2VjdGlvbik7IC8vIENyZWF0ZSBzZWN0aW9uXG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL1xcKyBhZGQgc2VjdGlvbi9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL1xcKyBhZGQgc2VjdGlvbi9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGFkZEJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICAnL2FwaS9hZG1pbi9zZWN0aW9ucycsXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgIGJvZHk6IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdcInBhZ2VfaWRcIjpcInBhZ2UtMVwiJyksXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhZGQgbmV3IHNlY3Rpb24gdG8gdGhlIGxpc3QgYWZ0ZXIgY3JlYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFtdKTsgLy8gSW5pdGlhbCBmZXRjaFxuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyhtb2NrU2VjdGlvbik7IC8vIENyZWF0ZSBzZWN0aW9uXG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL25vIHNlY3Rpb25zIHlldC9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBhZGRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9cXCsgYWRkIHNlY3Rpb24vaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhhZGRCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBzZWN0aW9uIHdpdGggb25lIGNvbHVtbiBieSBkZWZhdWx0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbXSk7IC8vIEluaXRpYWwgZmV0Y2hcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MobW9ja1NlY3Rpb24pOyAvLyBDcmVhdGUgc2VjdGlvblxuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9cXCsgYWRkIHNlY3Rpb24vaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBhZGRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9cXCsgYWRkIHNlY3Rpb24vaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhhZGRCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgY3JlYXRlQ2FsbCA9IChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgICAgY2FsbCA9PiBjYWxsWzBdID09PSAnL2FwaS9hZG1pbi9zZWN0aW9ucycgJiYgY2FsbFsxXT8ubWV0aG9kID09PSAnUE9TVCdcbiAgICAgICAgKTtcbiAgICAgICAgZXhwZWN0KGNyZWF0ZUNhbGwpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKGNyZWF0ZUNhbGxbMV0uYm9keSk7XG4gICAgICAgIGV4cGVjdChib2R5LmNvbHVtbnMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgICAgZXhwZWN0KGJvZHkuY29sdW1uc1swXS5jb2x1bW5fbnVtYmVyKS50b0JlKDEpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgZXJyb3IgbWVzc2FnZSB3aGVuIHNlY3Rpb24gY3JlYXRpb24gZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFtdKTsgLy8gSW5pdGlhbCBmZXRjaFxuICAgICAgbW9ja0ZldGNoRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgc2VjdGlvbicpOyAvLyBDcmVhdGUgc2VjdGlvbiBlcnJvclxuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9cXCsgYWRkIHNlY3Rpb24vaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBhZGRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9cXCsgYWRkIHNlY3Rpb24vaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhhZGRCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0ZhaWxlZCB0byBjcmVhdGUgc2VjdGlvbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc2FibGUgXCJBZGQgU2VjdGlvblwiIGJ1dHRvbiB3aGlsZSBzYXZpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFtdKTsgLy8gSW5pdGlhbCBmZXRjaFxuICAgICAgXG4gICAgICAvLyBNb2NrIGEgZGVsYXllZCByZXNwb25zZVxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UoKCkgPT5cbiAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tTZWN0aW9uIH0pLFxuICAgICAgICB9KSwgMTAwKSlcbiAgICAgICk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL1xcKyBhZGQgc2VjdGlvbi9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL1xcKyBhZGQgc2VjdGlvbi9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGFkZEJ1dHRvbik7XG5cbiAgICAgIC8vIEJ1dHRvbiBzaG91bGQgYmUgZGlzYWJsZWQgZHVyaW5nIHNhdmVcbiAgICAgIGV4cGVjdChhZGRCdXR0b24pLnRvQmVEaXNhYmxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU2VjdGlvbiBSZW9yZGVyaW5nJywgKCkgPT4ge1xuICAgIGl0LnNraXAoJ3Nob3VsZCBkaXNwbGF5IG1vdmUgdXAgYW5kIG1vdmUgZG93biBidXR0b25zIGZvciBzZWN0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tTZWN0aW9uLCBtb2NrVHdvQ29sdW1uU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBtb3ZlVXBCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvbW92ZSBzZWN0aW9uIHVwL2kgfSk7XG4gICAgICBjb25zdCBtb3ZlRG93bkJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9tb3ZlIHNlY3Rpb24gZG93bi9pIH0pO1xuXG4gICAgICBleHBlY3QobW92ZVVwQnV0dG9ucykudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgZXhwZWN0KG1vdmVEb3duQnV0dG9ucykudG9IYXZlTGVuZ3RoKDIpO1xuICAgIH0pO1xuXG4gICAgaXQuc2tpcCgnc2hvdWxkIGRpc2FibGUgbW92ZSB1cCBidXR0b24gZm9yIGZpcnN0IHNlY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbiwgbW9ja1R3b0NvbHVtblNlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgbW92ZVVwQnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL21vdmUgc2VjdGlvbiB1cC9pIH0pO1xuICAgICAgZXhwZWN0KG1vdmVVcEJ1dHRvbnNbMF0pLnRvQmVEaXNhYmxlZCgpO1xuICAgICAgZXhwZWN0KG1vdmVVcEJ1dHRvbnNbMV0pLm5vdC50b0JlRGlzYWJsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0LnNraXAoJ3Nob3VsZCBkaXNhYmxlIG1vdmUgZG93biBidXR0b24gZm9yIGxhc3Qgc2VjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tTZWN0aW9uLCBtb2NrVHdvQ29sdW1uU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBtb3ZlRG93bkJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9tb3ZlIHNlY3Rpb24gZG93bi9pIH0pO1xuICAgICAgZXhwZWN0KG1vdmVEb3duQnV0dG9uc1swXSkubm90LnRvQmVEaXNhYmxlZCgpO1xuICAgICAgZXhwZWN0KG1vdmVEb3duQnV0dG9uc1sxXSkudG9CZURpc2FibGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdC5za2lwKCdzaG91bGQgbW92ZSBzZWN0aW9uIHVwIHdoZW4gbW92ZSB1cCBidXR0b24gaXMgY2xpY2tlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tTZWN0aW9uLCBtb2NrVHdvQ29sdW1uU2VjdGlvbl0pO1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyh7IHN1Y2Nlc3M6IHRydWUgfSk7IC8vIFJlb3JkZXIgQVBJIGNhbGxcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzInLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgbW92ZSB1cCBvbiBzZWNvbmQgc2VjdGlvblxuICAgICAgY29uc3QgbW92ZVVwQnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL21vdmUgc2VjdGlvbiB1cC9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKG1vdmVVcEJ1dHRvbnNbMV0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgJy9hcGkvYWRtaW4vc2VjdGlvbnMvcmVvcmRlcicsXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnXCJwYWdlSWRcIjpcInBhZ2UtMVwiJyksXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQuc2tpcCgnc2hvdWxkIG1vdmUgc2VjdGlvbiBkb3duIHdoZW4gbW92ZSBkb3duIGJ1dHRvbiBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1NlY3Rpb24sIG1vY2tUd29Db2x1bW5TZWN0aW9uXSk7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKHsgc3VjY2VzczogdHJ1ZSB9KTsgLy8gUmVvcmRlciBBUEkgY2FsbFxuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBtb3ZlIGRvd24gb24gZmlyc3Qgc2VjdGlvblxuICAgICAgY29uc3QgbW92ZURvd25CdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvbW92ZSBzZWN0aW9uIGRvd24vaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhtb3ZlRG93bkJ1dHRvbnNbMF0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgJy9hcGkvYWRtaW4vc2VjdGlvbnMvcmVvcmRlcicsXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzdXBwb3J0IGRyYWcgYW5kIGRyb3AgcmVvcmRlcmluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tTZWN0aW9uLCBtb2NrVHdvQ29sdW1uU2VjdGlvbl0pO1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyh7IHN1Y2Nlc3M6IHRydWUgfSk7IC8vIFJlb3JkZXIgQVBJIGNhbGxcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc2VjdGlvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC8jXFxkKy8sIHsgc2VsZWN0b3I6ICdzcGFuJyB9KTtcbiAgICAgIGNvbnN0IGZpcnN0U2VjdGlvbiA9IHNlY3Rpb25zWzBdLmNsb3Nlc3QoJ2RpdltkcmFnZ2FibGU9XCJ0cnVlXCJdJyk7XG4gICAgICBjb25zdCBzZWNvbmRTZWN0aW9uID0gc2VjdGlvbnNbMV0uY2xvc2VzdCgnZGl2W2RyYWdnYWJsZT1cInRydWVcIl0nKTtcblxuICAgICAgLy8gU2ltdWxhdGUgZHJhZyBhbmQgZHJvcFxuICAgICAgaWYgKGZpcnN0U2VjdGlvbiAmJiBzZWNvbmRTZWN0aW9uKSB7XG4gICAgICAgIGZpcmVFdmVudC5kcmFnU3RhcnQoZmlyc3RTZWN0aW9uKTtcbiAgICAgICAgZmlyZUV2ZW50LmRyYWdPdmVyKHNlY29uZFNlY3Rpb24pO1xuICAgICAgICBmaXJlRXZlbnQuZHJvcChzZWNvbmRTZWN0aW9uKTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgICcvYXBpL2FkbWluL3NlY3Rpb25zL3Jlb3JkZXInLFxuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYXBwbHkgb3BhY2l0eSBzdHlsZSB0byBkcmFnZ2VkIHNlY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbiwgbW9ja1R3b0NvbHVtblNlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc2VjdGlvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC8jXFxkKy8sIHsgc2VsZWN0b3I6ICdzcGFuJyB9KTtcbiAgICAgIGNvbnN0IGZpcnN0U2VjdGlvbiA9IHNlY3Rpb25zWzBdLmNsb3Nlc3QoJ2RpdltkcmFnZ2FibGU9XCJ0cnVlXCJdJyk7XG5cbiAgICAgIGlmIChmaXJzdFNlY3Rpb24pIHtcbiAgICAgICAgZmlyZUV2ZW50LmRyYWdTdGFydChmaXJzdFNlY3Rpb24pO1xuICAgICAgICBleHBlY3QoZmlyc3RTZWN0aW9uLmNsYXNzTmFtZSkudG9Db250YWluKCdvcGFjaXR5LTUwJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdC5za2lwKCdzaG91bGQgY2FsbCByZW9yZGVyIEFQSSB3aGVuIG1vdmluZyBzZWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1NlY3Rpb24sIG1vY2tUd29Db2x1bW5TZWN0aW9uXSk7IC8vIEluaXRpYWwgZmV0Y2hcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoeyBzdWNjZXNzOiB0cnVlIH0pOyAvLyBSZW9yZGVyIEFQSSBzdWNjZXNzXG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG1vdmVEb3duQnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL21vdmUgc2VjdGlvbiBkb3duL2kgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sobW92ZURvd25CdXR0b25zWzBdKTtcblxuICAgICAgLy8gU2hvdWxkIGNhbGwgcmVvcmRlciBBUElcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICAnL2FwaS9hZG1pbi9zZWN0aW9ucy9yZW9yZGVyJyxcbiAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCByZW9yZGVyIHdoZW4gZHJhZ2dpbmcgc2VjdGlvbiBvbnRvIGl0c2VsZicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tTZWN0aW9uLCBtb2NrVHdvQ29sdW1uU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBzZWN0aW9ucyA9IHNjcmVlbi5nZXRBbGxCeVRleHQoLyNcXGQrLywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pO1xuICAgICAgY29uc3QgZmlyc3RTZWN0aW9uID0gc2VjdGlvbnNbMF0uY2xvc2VzdCgnZGl2W2RyYWdnYWJsZT1cInRydWVcIl0nKTtcblxuICAgICAgaWYgKGZpcnN0U2VjdGlvbikge1xuICAgICAgICBmaXJlRXZlbnQuZHJhZ1N0YXJ0KGZpcnN0U2VjdGlvbik7XG4gICAgICAgIGZpcmVFdmVudC5kcm9wKGZpcnN0U2VjdGlvbik7XG4gICAgICB9XG5cbiAgICAgIC8vIFNob3VsZCBub3QgY2FsbCByZW9yZGVyIEFQSVxuICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkubm90LnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnL2FwaS9hZG1pbi9zZWN0aW9ucy9yZW9yZGVyJyxcbiAgICAgICAgZXhwZWN0LmFueXRoaW5nKClcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdMYXlvdXQgVG9nZ2xlJywgKCkgPT4ge1xuICAgIGl0LnNraXAoJ3Nob3VsZCBkaXNwbGF5IGxheW91dCB0b2dnbGUgYnV0dG9uIGZvciBlYWNoIHNlY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBsYXlvdXRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC90b2dnbGUgdG8gdHdvIGNvbHVtbiBsYXlvdXQvaSB9KTtcbiAgICAgIGV4cGVjdChsYXlvdXRCdXR0b24pLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3QobGF5b3V0QnV0dG9uKS50b0hhdmVUZXh0Q29udGVudCgnMSBDb2wnKTtcbiAgICB9KTtcblxuICAgIGl0LnNraXAoJ3Nob3VsZCBzaG93IFwiMSBDb2xcIiBmb3Igb25lLWNvbHVtbiBsYXlvdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBsYXlvdXRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC90b2dnbGUgdG8gdHdvIGNvbHVtbiBsYXlvdXQvaSB9KTtcbiAgICAgIGV4cGVjdChsYXlvdXRCdXR0b24pLnRvSGF2ZVRleHRDb250ZW50KCcxIENvbCcpO1xuICAgIH0pO1xuXG4gICAgaXQuc2tpcCgnc2hvdWxkIHNob3cgXCIyIENvbFwiIGZvciB0d28tY29sdW1uIGxheW91dCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tUd29Db2x1bW5TZWN0aW9uXSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGxheW91dEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3RvZ2dsZSB0byBvbmUgY29sdW1uIGxheW91dC9pIH0pO1xuICAgICAgZXhwZWN0KGxheW91dEJ1dHRvbikudG9IYXZlVGV4dENvbnRlbnQoJzIgQ29sJyk7XG4gICAgfSk7XG5cbiAgICBpdC5za2lwKCdzaG91bGQgdG9nZ2xlIGZyb20gb25lIGNvbHVtbiB0byB0d28gY29sdW1ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tTZWN0aW9uXSk7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKG1vY2tUd29Db2x1bW5TZWN0aW9uKTsgLy8gVXBkYXRlZCBzZWN0aW9uIHdpdGggMiBjb2x1bW5zXG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGxheW91dEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3RvZ2dsZSB0byB0d28gY29sdW1uIGxheW91dC9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGxheW91dEJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBgL2FwaS9hZG1pbi9zZWN0aW9ucy8ke21vY2tTZWN0aW9uLmlkfWAsXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgIGJvZHk6IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdcImNvbHVtbnNcIicpLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0LnNraXAoJ3Nob3VsZCB0b2dnbGUgZnJvbSB0d28gY29sdW1ucyB0byBvbmUgY29sdW1uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1R3b0NvbHVtblNlY3Rpb25dKTtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MobW9ja1NlY3Rpb24pOyAvLyBVcGRhdGVkIHNlY3Rpb24gd2l0aCAxIGNvbHVtblxuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBsYXlvdXRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC90b2dnbGUgdG8gb25lIGNvbHVtbiBsYXlvdXQvaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhsYXlvdXRCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgYC9hcGkvYWRtaW4vc2VjdGlvbnMvJHttb2NrVHdvQ29sdW1uU2VjdGlvbi5pZH1gLFxuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQuc2tpcCgnc2hvdWxkIGFkZCBzZWNvbmQgY29sdW1uIHdoZW4gdG9nZ2xpbmcgdG8gdHdvIGNvbHVtbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyhtb2NrVHdvQ29sdW1uU2VjdGlvbik7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGxheW91dEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3RvZ2dsZSB0byB0d28gY29sdW1uIGxheW91dC9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGxheW91dEJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCB1cGRhdGVDYWxsID0gKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgICBjYWxsID0+IGNhbGxbMF0uaW5jbHVkZXMoJy9hcGkvYWRtaW4vc2VjdGlvbnMvc2VjdGlvbi0nKSAmJiBjYWxsWzFdPy5tZXRob2QgPT09ICdQVVQnXG4gICAgICAgICk7XG4gICAgICAgIGV4cGVjdCh1cGRhdGVDYWxsKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBjb25zdCBib2R5ID0gSlNPTi5wYXJzZSh1cGRhdGVDYWxsWzFdLmJvZHkpO1xuICAgICAgICBleHBlY3QoYm9keS5jb2x1bW5zKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICAgIGV4cGVjdChib2R5LmNvbHVtbnNbMV0uY29sdW1uX251bWJlcikudG9CZSgyKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQuc2tpcCgnc2hvdWxkIGtlZXAgb25seSBmaXJzdCBjb2x1bW4gd2hlbiB0b2dnbGluZyB0byBvbmUgY29sdW1uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1R3b0NvbHVtblNlY3Rpb25dKTtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MobW9ja1NlY3Rpb24pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBsYXlvdXRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC90b2dnbGUgdG8gb25lIGNvbHVtbiBsYXlvdXQvaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhsYXlvdXRCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgdXBkYXRlQ2FsbCA9IChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgICAgY2FsbCA9PiBjYWxsWzBdLmluY2x1ZGVzKCcvYXBpL2FkbWluL3NlY3Rpb25zL3NlY3Rpb24tJykgJiYgY2FsbFsxXT8ubWV0aG9kID09PSAnUFVUJ1xuICAgICAgICApO1xuICAgICAgICBleHBlY3QodXBkYXRlQ2FsbCkudG9CZURlZmluZWQoKTtcbiAgICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UodXBkYXRlQ2FsbFsxXS5ib2R5KTtcbiAgICAgICAgZXhwZWN0KGJvZHkuY29sdW1ucykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdC5za2lwKCdzaG91bGQgZGlzcGxheSBlcnJvciB3aGVuIGxheW91dCB0b2dnbGUgZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuICAgICAgbW9ja0ZldGNoRXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgbGF5b3V0Jyk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGxheW91dEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3RvZ2dsZSB0byB0d28gY29sdW1uIGxheW91dC9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGxheW91dEJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnYWxlcnQnKSkudG9IYXZlVGV4dENvbnRlbnQoJ0ZhaWxlZCB0byB1cGRhdGUgbGF5b3V0Jyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0LnNraXAoJ3Nob3VsZCByZW5kZXIgY29sdW1ucyBpbiBncmlkIGxheW91dCBiYXNlZCBvbiBjb2x1bW4gY291bnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbiwgbW9ja1R3b0NvbHVtblNlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc2VjdGlvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC8jXFxkKy8sIHsgc2VsZWN0b3I6ICdzcGFuJyB9KS5tYXAoZWwgPT4gZWwuY2xvc2VzdCgnZGl2W2RyYWdnYWJsZT1cInRydWVcIl0nKSk7XG4gICAgICBcbiAgICAgIC8vIEZpcnN0IHNlY3Rpb24gc2hvdWxkIGhhdmUgZ3JpZC1jb2xzLTFcbiAgICAgIGNvbnN0IGZpcnN0U2VjdGlvbkNvbnRlbnQgPSBzZWN0aW9uc1swXT8ucXVlcnlTZWxlY3RvcignLmdyaWQnKTtcbiAgICAgIGV4cGVjdChmaXJzdFNlY3Rpb25Db250ZW50Py5jbGFzc05hbWUpLnRvQ29udGFpbignZ3JpZC1jb2xzLTEnKTtcblxuICAgICAgLy8gU2Vjb25kIHNlY3Rpb24gc2hvdWxkIGhhdmUgZ3JpZC1jb2xzLTJcbiAgICAgIGNvbnN0IHNlY29uZFNlY3Rpb25Db250ZW50ID0gc2VjdGlvbnNbMV0/LnF1ZXJ5U2VsZWN0b3IoJy5ncmlkJyk7XG4gICAgICBleHBlY3Qoc2Vjb25kU2VjdGlvbkNvbnRlbnQ/LmNsYXNzTmFtZSkudG9Db250YWluKCdncmlkLWNvbHMtMicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29sdW1uIEVkaXRpbmcnLCAoKSA9PiB7XG4gICAgaXQuc2tpcCgnc2hvdWxkIGRpc3BsYXkgY29sdW1uIGNvbnRlbnQgZm9yIHJpY2ggdGV4dCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tTZWN0aW9uXSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0NvbHVtbiAxJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gUmljaCB0ZXh0IGNvbnRlbnQgc2hvdWxkIGJlIGRpc3BsYXllZCAoYXMgZXNjYXBlZCBIVE1MKVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoLzxwPlRlc3QgY29udGVudDxcXC9wPi8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQuc2tpcCgnc2hvdWxkIGRpc3BsYXkgY29sdW1uIG51bWJlciBsYWJlbCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tUd29Db2x1bW5TZWN0aW9uXSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENoZWNrIGZvciBjb2x1bW4gbGFiZWxzIHNwZWNpZmljYWxseSAobm90IGNvbnRlbnQpXG4gICAgICBjb25zdCBjb2x1bW5MYWJlbHMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC9eQ29sdW1uIFxcZCQvKTtcbiAgICAgIGV4cGVjdChjb2x1bW5MYWJlbHMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIGV4cGVjdChjb2x1bW5MYWJlbHNbMF0pLnRvSGF2ZVRleHRDb250ZW50KCdDb2x1bW4gMScpO1xuICAgICAgZXhwZWN0KGNvbHVtbkxhYmVsc1sxXSkudG9IYXZlVGV4dENvbnRlbnQoJ0NvbHVtbiAyJyk7XG4gICAgfSk7XG5cbiAgICBpdC5za2lwKCdzaG91bGQgZGlzcGxheSBlbXB0eSBjb250ZW50IHBsYWNlaG9sZGVyIGZvciBlbXB0eSByaWNoIHRleHQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBlbXB0eVNlY3Rpb24gPSB7XG4gICAgICAgIC4uLm1vY2tTZWN0aW9uLFxuICAgICAgICBjb2x1bW5zOiBbe1xuICAgICAgICAgIC4uLm1vY2tTZWN0aW9uLmNvbHVtbnNbMF0sXG4gICAgICAgICAgY29udGVudF9kYXRhOiB7IGh0bWw6ICcnIH0sXG4gICAgICAgIH1dLFxuICAgICAgfTtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW2VtcHR5U2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnRW1wdHkgY29udGVudCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQuc2tpcCgnc2hvdWxkIGRpc3BsYXkgcGhvdG8gZ2FsbGVyeSBjb250ZW50IHR5cGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwaG90b1NlY3Rpb24gPSB7XG4gICAgICAgIC4uLm1vY2tTZWN0aW9uLFxuICAgICAgICBjb2x1bW5zOiBbe1xuICAgICAgICAgIC4uLm1vY2tTZWN0aW9uLmNvbHVtbnNbMF0sXG4gICAgICAgICAgY29udGVudF90eXBlOiAncGhvdG9fZ2FsbGVyeScgYXMgY29uc3QsXG4gICAgICAgICAgY29udGVudF9kYXRhOiB7IHBob3RvX2lkczogWydwaG90by0xJywgJ3Bob3RvLTInLCAncGhvdG8tMyddIH0sXG4gICAgICAgIH1dLFxuICAgICAgfTtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW3Bob3RvU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnUGhvdG8gR2FsbGVyeSAoMyBwaG90b3MpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdC5za2lwKCdzaG91bGQgZGlzcGxheSByZWZlcmVuY2VzIGNvbnRlbnQgdHlwZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlZmVyZW5jZVNlY3Rpb24gPSB7XG4gICAgICAgIC4uLm1vY2tTZWN0aW9uLFxuICAgICAgICBjb2x1bW5zOiBbe1xuICAgICAgICAgIC4uLm1vY2tTZWN0aW9uLmNvbHVtbnNbMF0sXG4gICAgICAgICAgY29udGVudF90eXBlOiAncmVmZXJlbmNlcycgYXMgY29uc3QsXG4gICAgICAgICAgY29udGVudF9kYXRhOiB7IHJlZmVyZW5jZXM6IFt7IGlkOiAncmVmLTEnLCB0eXBlOiAnZXZlbnQnLCBuYW1lOiAnQ2VyZW1vbnknIH1dIH0sXG4gICAgICAgIH1dLFxuICAgICAgfTtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW3JlZmVyZW5jZVNlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1JlZmVyZW5jZXMgKDEgaXRlbXMpJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdC5za2lwKCdzaG91bGQgZGlzcGxheSB6ZXJvIGNvdW50IGZvciBlbXB0eSBwaG90byBnYWxsZXJ5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZW1wdHlQaG90b1NlY3Rpb24gPSB7XG4gICAgICAgIC4uLm1vY2tTZWN0aW9uLFxuICAgICAgICBjb2x1bW5zOiBbe1xuICAgICAgICAgIC4uLm1vY2tTZWN0aW9uLmNvbHVtbnNbMF0sXG4gICAgICAgICAgY29udGVudF90eXBlOiAncGhvdG9fZ2FsbGVyeScgYXMgY29uc3QsXG4gICAgICAgICAgY29udGVudF9kYXRhOiB7fSxcbiAgICAgICAgfV0sXG4gICAgICB9O1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbZW1wdHlQaG90b1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1Bob3RvIEdhbGxlcnkgKDAgcGhvdG9zKScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU2VjdGlvbiBEZWxldGlvbicsICgpID0+IHtcbiAgICBpdC5za2lwKCdzaG91bGQgZGlzcGxheSBkZWxldGUgYnV0dG9uIGZvciBlYWNoIHNlY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZGVsZXRlIHNlY3Rpb24vaSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0LnNraXAoJ3Nob3VsZCBzaG93IGNvbmZpcm1hdGlvbiBkaWFsb2cgd2hlbiBkZWxldGUgaXMgY2xpY2tlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tTZWN0aW9uXSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2RlbGV0ZSBzZWN0aW9uL2kgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soZGVsZXRlQnV0dG9uKTtcblxuICAgICAgZXhwZWN0KHdpbmRvdy5jb25maXJtKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIHNlY3Rpb24/Jyk7XG4gICAgfSk7XG5cbiAgICBpdC5za2lwKCdzaG91bGQgZGVsZXRlIHNlY3Rpb24gd2hlbiBjb25maXJtZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuICAgICAgbW9ja0ZldGNoU3VjY2Vzcyh7IHN1Y2Nlc3M6IHRydWUgfSk7IC8vIERlbGV0ZSBBUEkgY2FsbFxuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9kZWxldGUgc2VjdGlvbi9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGRlbGV0ZUJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBgL2FwaS9hZG1pbi9zZWN0aW9ucy8ke21vY2tTZWN0aW9uLmlkfWAsXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdC5za2lwKCdzaG91bGQgbm90IGRlbGV0ZSBzZWN0aW9uIHdoZW4gY29uZmlybWF0aW9uIGlzIGNhbmNlbGxlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHdpbmRvdy5jb25maXJtID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShmYWxzZSk7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9kZWxldGUgc2VjdGlvbi9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGRlbGV0ZUJ1dHRvbik7XG5cbiAgICAgIC8vIFNob3VsZCBub3QgY2FsbCBkZWxldGUgQVBJXG4gICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS5ub3QudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCcvYXBpL2FkbWluL3NlY3Rpb25zLycpLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7IG1ldGhvZDogJ0RFTEVURScgfSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdC5za2lwKCdzaG91bGQgcmVtb3ZlIHNlY3Rpb24gZnJvbSBsaXN0IGFmdGVyIHN1Y2Nlc3NmdWwgZGVsZXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbiwgbW9ja1R3b0NvbHVtblNlY3Rpb25dKTtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoeyBzdWNjZXNzOiB0cnVlIH0pOyAvLyBEZWxldGUgQVBJIGNhbGxcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMicsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBkZWxldGVCdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZGVsZXRlIHNlY3Rpb24vaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhkZWxldGVCdXR0b25zWzBdKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIC8vIEFmdGVyIGRlbGV0aW9uLCBvbmx5IG9uZSBzZWN0aW9uIHNob3VsZCByZW1haW5cbiAgICAgICAgY29uc3Qgc2VjdGlvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC8jXFxkKy8sIHsgc2VsZWN0b3I6ICdzcGFuJyB9KTtcbiAgICAgICAgZXhwZWN0KHNlY3Rpb25zKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0LnNraXAoJ3Nob3VsZCBkaXNwbGF5IGVycm9yIHdoZW4gZGVsZXRpb24gZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuICAgICAgbW9ja0ZldGNoRXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgc2VjdGlvbicpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcjMScsIHsgc2VsZWN0b3I6ICdzcGFuJyB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9kZWxldGUgc2VjdGlvbi9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGRlbGV0ZUJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnYWxlcnQnKSkudG9IYXZlVGV4dENvbnRlbnQoJ0ZhaWxlZCB0byBkZWxldGUgc2VjdGlvbicpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdMb2FkaW5nIGFuZCBFcnJvciBTdGF0ZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGxvYWRpbmcgc3RhdGUgd2hpbGUgZmV0Y2hpbmcgc2VjdGlvbnMnLCAoKSA9PiB7XG4gICAgICAoZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uT25jZSgoKSA9PlxuICAgICAgICBuZXcgUHJvbWlzZSgoKSA9PiB7fSkgLy8gTmV2ZXIgcmVzb2x2ZXNcbiAgICAgICk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnTG9hZGluZyBzZWN0aW9ucy4uLicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGVycm9yIG1lc3NhZ2Ugd2hlbiBmZXRjaCBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaEVycm9yKCdGYWlsZWQgdG8gbG9hZCBzZWN0aW9ucycpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdhbGVydCcpKS50b0hhdmVUZXh0Q29udGVudCgnRmFpbGVkIHRvIGxvYWQgc2VjdGlvbnMnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGVtcHR5IHN0YXRlIHdoZW4gbm8gc2VjdGlvbnMgZXhpc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFtdKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvbm8gc2VjdGlvbnMgeWV0L2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgZXJyb3IgYWxlcnQgd2l0aCBwcm9wZXIgcm9sZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaEVycm9yKCdUZXN0IGVycm9yIG1lc3NhZ2UnKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBhbGVydCA9IHNjcmVlbi5nZXRCeVJvbGUoJ2FsZXJ0Jyk7XG4gICAgICAgIGV4cGVjdChhbGVydCkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgZXhwZWN0KGFsZXJ0KS50b0hhdmVUZXh0Q29udGVudCgnVGVzdCBlcnJvciBtZXNzYWdlJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0hlYWRlciBBY3Rpb25zJywgKCkgPT4ge1xuICAgIGl0LnNraXAoJ3Nob3VsZCBkaXNwbGF5IFwiU2F2ZSBBbGxcIiBidXR0b24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIC8vIFNhdmUgQWxsIGJ1dHRvbiByZW1vdmVkIGZyb20gY29tcG9uZW50XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0LnNraXAoJ3Nob3VsZCBjYWxsIG9uU2F2ZSB3aGVuIFwiU2F2ZSBBbGxcIiBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3NhdmUgYWxsIHNlY3Rpb25zL2kgfSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2F2ZUJ1dHRvbik7XG5cbiAgICAgIGV4cGVjdChtb2NrT25TYXZlKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgXCJHdWVzdCBQcmV2aWV3XCIgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZ3Vlc3QgcHJldmlldy9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG9wZW4gcHJldmlldyBtb2RhbCB3aGVuIFwiR3Vlc3QgUHJldmlld1wiIGlzIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9ndWVzdCBwcmV2aWV3L2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcHJldmlld0J1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2d1ZXN0IHByZXZpZXcvaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhwcmV2aWV3QnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdHdWVzdCBQcmV2aWV3JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0LnNraXAoJ3Nob3VsZCBkaXNwbGF5IFwiQ2xvc2VcIiBidXR0b24gd2hlbiBvbkNsb3NlIGlzIHByb3ZpZGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAvLyBDbG9zZSBidXR0b24gcmVtb3ZlZCBmcm9tIGNvbXBvbmVudFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdC5za2lwKCdzaG91bGQgbm90IGRpc3BsYXkgXCJDbG9zZVwiIGJ1dHRvbiB3aGVuIG9uQ2xvc2UgaXMgbm90IHByb3ZpZGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvY2xvc2Ugc2VjdGlvbiBlZGl0b3IvaSB9KSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdC5za2lwKCdzaG91bGQgY2FsbCBvbkNsb3NlIHdoZW4gXCJDbG9zZVwiIGJ1dHRvbiBpcyBjbGlja2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoU3VjY2VzcyhbbW9ja1NlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAvLyBDbG9zZSBidXR0b24gcmVtb3ZlZCBmcm9tIGNvbXBvbmVudFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvY2xvc2Ugc2VjdGlvbiBlZGl0b3IvaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhjbG9zZUJ1dHRvbik7XG5cbiAgICAgIGV4cGVjdChtb2NrT25DbG9zZSkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgIH0pO1xuXG4gICAgaXQuc2tpcCgnc2hvdWxkIGRpc2FibGUgXCJTYXZlIEFsbFwiIGJ1dHRvbiB3aGlsZSBzYXZpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuICAgICAgXG4gICAgICAvLyBNb2NrIGEgZGVsYXllZCByZXNwb25zZVxuICAgICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UoKCkgPT5cbiAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1vY2tTZWN0aW9uIH0pLFxuICAgICAgICB9KSwgMTAwKSlcbiAgICAgICk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL1xcKyBhZGQgc2VjdGlvbi9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL1xcKyBhZGQgc2VjdGlvbi9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGFkZEJ1dHRvbik7XG5cbiAgICAgIC8vIFNhdmUgYnV0dG9uIHNob3VsZCBiZSBkaXNhYmxlZCBkdXJpbmcgc2F2ZVxuICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3NhdmUgYWxsIHNlY3Rpb25zL2kgfSk7XG4gICAgICBleHBlY3Qoc2F2ZUJ1dHRvbikudG9CZURpc2FibGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQcmV2aWV3IE1vZGFsJywgKCkgPT4ge1xuICAgIGl0LnNraXAoJ3Nob3VsZCBjbG9zZSBwcmV2aWV3IG1vZGFsIHdoZW4gY2xvc2UgYnV0dG9uIGlzIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9ndWVzdCBwcmV2aWV3L2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcHJldmlld0J1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2d1ZXN0IHByZXZpZXcvaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhwcmV2aWV3QnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdHdWVzdCBQcmV2aWV3JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgY2xvc2VQcmV2aWV3QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvY2xvc2UgcHJldmlldy9pIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGNsb3NlUHJldmlld0J1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdHdWVzdCBQcmV2aWV3JykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdC5za2lwKCdzaG91bGQgY2xvc2UgcHJldmlldyBtb2RhbCB3aGVuIGJhY2tkcm9wIGlzIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9ndWVzdCBwcmV2aWV3L2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcHJldmlld0J1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2d1ZXN0IHByZXZpZXcvaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhwcmV2aWV3QnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdHdWVzdCBQcmV2aWV3JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgYmFja2Ryb3AgKHRoZSBmaXhlZCBpbnNldC0wIGRpdilcbiAgICAgIGNvbnN0IGJhY2tkcm9wID0gc2NyZWVuLmdldEJ5VGV4dCgnR3Vlc3QgUHJldmlldycpLmNsb3Nlc3QoJy5maXhlZCcpO1xuICAgICAgaWYgKGJhY2tkcm9wKSB7XG4gICAgICAgIGZpcmVFdmVudC5jbGljayhiYWNrZHJvcCk7XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdHdWVzdCBQcmV2aWV3JykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdC5za2lwKCdzaG91bGQgcmVuZGVyIHNlY3Rpb25zIGluIHByZXZpZXcgbW9kYWwnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbl0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxTZWN0aW9uRWRpdG9yXG4gICAgICAgICAgcGFnZVR5cGU9XCJjdXN0b21cIlxuICAgICAgICAgIHBhZ2VJZD1cInBhZ2UtMVwiXG4gICAgICAgICAgb25TYXZlPXttb2NrT25TYXZlfVxuICAgICAgICAgIG9uQ2xvc2U9e21vY2tPbkNsb3NlfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9ndWVzdCBwcmV2aWV3L2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcHJldmlld0J1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2d1ZXN0IHByZXZpZXcvaSB9KTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhwcmV2aWV3QnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdHdWVzdCBQcmV2aWV3JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ29udGVudCBzaG91bGQgYmUgcmVuZGVyZWQgaW4gcHJldmlld1xuICAgICAgY29uc3QgcHJldmlld0NvbnRlbnQgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KCdUZXN0IGNvbnRlbnQnKTtcbiAgICAgIGV4cGVjdChwcmV2aWV3Q29udGVudC5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FjY2Vzc2liaWxpdHknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYXZlIHByb3BlciBhcmlhIGxhYmVscyBvbiBhbGwgYnV0dG9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaFN1Y2Nlc3MoW21vY2tTZWN0aW9uXSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJyMxJywgeyBzZWxlY3RvcjogJ3NwYW4nIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENoZWNrIGZvciBidXR0b25zIHRoYXQgYWN0dWFsbHkgZXhpc3QgaW4gdGhlIGNvbXBvbmVudFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL1xcKyBhZGQgc2VjdGlvbi9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL152aWV3JC9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL15lZGl0JC9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL15kZWxldGUkL2kgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvZ3Vlc3QgcHJldmlldy9pIH0pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHByb3BlciByb2xlIGZvciBlcnJvciBtZXNzYWdlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaEVycm9yKCdUZXN0IGVycm9yJyk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFNlY3Rpb25FZGl0b3JcbiAgICAgICAgICBwYWdlVHlwZT1cImN1c3RvbVwiXG4gICAgICAgICAgcGFnZUlkPVwicGFnZS0xXCJcbiAgICAgICAgICBvblNhdmU9e21vY2tPblNhdmV9XG4gICAgICAgICAgb25DbG9zZT17bW9ja09uQ2xvc2V9XG4gICAgICAgIC8+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgYWxlcnQgPSBzY3JlZW4uZ2V0QnlSb2xlKCdhbGVydCcpO1xuICAgICAgICBleHBlY3QoYWxlcnQpLnRvSGF2ZVRleHRDb250ZW50KCdUZXN0IGVycm9yJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc3VwcG9ydCBrZXlib2FyZCBuYXZpZ2F0aW9uIGZvciBkcmFnZ2FibGUgc2VjdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hTdWNjZXNzKFttb2NrU2VjdGlvbiwgbW9ja1R3b0NvbHVtblNlY3Rpb25dKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8U2VjdGlvbkVkaXRvclxuICAgICAgICAgIHBhZ2VUeXBlPVwiY3VzdG9tXCJcbiAgICAgICAgICBwYWdlSWQ9XCJwYWdlLTFcIlxuICAgICAgICAgIG9uU2F2ZT17bW9ja09uU2F2ZX1cbiAgICAgICAgICBvbkNsb3NlPXttb2NrT25DbG9zZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEnLCB7IHNlbGVjdG9yOiAnc3BhbicgfSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc2VjdGlvbnMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC8jXFxkKy8sIHsgc2VsZWN0b3I6ICdzcGFuJyB9KS5tYXAoZWwgPT4gZWwuY2xvc2VzdCgnZGl2W2RyYWdnYWJsZT1cInRydWVcIl0nKSk7XG4gICAgICBcbiAgICAgIHNlY3Rpb25zLmZvckVhY2goc2VjdGlvbiA9PiB7XG4gICAgICAgIGV4cGVjdChzZWN0aW9uKS50b0hhdmVBdHRyaWJ1dGUoJ2RyYWdnYWJsZScsICd0cnVlJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJnbG9iYWwiLCJmZXRjaCIsImplc3QiLCJmbiIsIm9yaWdpbmFsQ29uZmlybSIsIndpbmRvdyIsImNvbmZpcm0iLCJFbGVtZW50IiwicHJvdG90eXBlIiwic2Nyb2xsSW50b1ZpZXciLCJtb2NrU2VjdGlvbiIsImlkIiwicGFnZV90eXBlIiwicGFnZV9pZCIsImRpc3BsYXlfb3JkZXIiLCJjcmVhdGVkX2F0IiwidXBkYXRlZF9hdCIsImNvbHVtbnMiLCJzZWN0aW9uX2lkIiwiY29sdW1uX251bWJlciIsImNvbnRlbnRfdHlwZSIsImNvbnRlbnRfZGF0YSIsImh0bWwiLCJtb2NrVHdvQ29sdW1uU2VjdGlvbiIsImRlc2NyaWJlIiwibW9ja09uU2F2ZSIsIm1vY2tPbkNsb3NlIiwiYmVmb3JlRWFjaCIsIm1vY2tSZXR1cm5WYWx1ZSIsIm1vY2tSZXNldCIsImNsZWFyQWxsTW9ja3MiLCJhZnRlckVhY2giLCJjbGVhbnVwIiwibW9ja0ZldGNoU3VjY2VzcyIsImRhdGEiLCJtb2NrUmVzb2x2ZWRWYWx1ZU9uY2UiLCJvayIsImpzb24iLCJzdWNjZXNzIiwibW9ja0ZldGNoRXJyb3IiLCJtZXNzYWdlIiwiZXJyb3IiLCJpdCIsInJlbmRlciIsIlNlY3Rpb25FZGl0b3IiLCJwYWdlVHlwZSIsInBhZ2VJZCIsIm9uU2F2ZSIsIm9uQ2xvc2UiLCJ3YWl0Rm9yIiwiZXhwZWN0Iiwic2NyZWVuIiwiZ2V0QnlSb2xlIiwibmFtZSIsInRvQmVJblRoZURvY3VtZW50IiwiYWRkQnV0dG9uIiwiZmlyZUV2ZW50IiwiY2xpY2siLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsIm9iamVjdENvbnRhaW5pbmciLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsInN0cmluZ0NvbnRhaW5pbmciLCJnZXRCeVRleHQiLCJzZWxlY3RvciIsImNyZWF0ZUNhbGwiLCJtb2NrIiwiY2FsbHMiLCJmaW5kIiwiY2FsbCIsInRvQmVEZWZpbmVkIiwiSlNPTiIsInBhcnNlIiwidG9IYXZlTGVuZ3RoIiwidG9CZSIsIm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJ0b0JlRGlzYWJsZWQiLCJza2lwIiwibW92ZVVwQnV0dG9ucyIsImdldEFsbEJ5Um9sZSIsIm1vdmVEb3duQnV0dG9ucyIsIm5vdCIsInNlY3Rpb25zIiwiZ2V0QWxsQnlUZXh0IiwiZmlyc3RTZWN0aW9uIiwiY2xvc2VzdCIsInNlY29uZFNlY3Rpb24iLCJkcmFnU3RhcnQiLCJkcmFnT3ZlciIsImRyb3AiLCJjbGFzc05hbWUiLCJ0b0NvbnRhaW4iLCJhbnl0aGluZyIsImxheW91dEJ1dHRvbiIsInRvSGF2ZVRleHRDb250ZW50IiwidXBkYXRlQ2FsbCIsImluY2x1ZGVzIiwibWFwIiwiZWwiLCJmaXJzdFNlY3Rpb25Db250ZW50IiwicXVlcnlTZWxlY3RvciIsInNlY29uZFNlY3Rpb25Db250ZW50IiwiY29sdW1uTGFiZWxzIiwiZW1wdHlTZWN0aW9uIiwicGhvdG9TZWN0aW9uIiwicGhvdG9faWRzIiwicmVmZXJlbmNlU2VjdGlvbiIsInJlZmVyZW5jZXMiLCJ0eXBlIiwiZW1wdHlQaG90b1NlY3Rpb24iLCJkZWxldGVCdXR0b24iLCJkZWxldGVCdXR0b25zIiwiYWxlcnQiLCJzYXZlQnV0dG9uIiwidG9IYXZlQmVlbkNhbGxlZFRpbWVzIiwicHJldmlld0J1dHRvbiIsInF1ZXJ5QnlSb2xlIiwiY2xvc2VCdXR0b24iLCJjbG9zZVByZXZpZXdCdXR0b24iLCJxdWVyeUJ5VGV4dCIsImJhY2tkcm9wIiwicHJldmlld0NvbnRlbnQiLCJsZW5ndGgiLCJ0b0JlR3JlYXRlclRoYW4iLCJmb3JFYWNoIiwic2VjdGlvbiIsInRvSGF2ZUF0dHJpYnV0ZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Q0FVQzs7Ozs7dUJBRTJEOytCQUM5QjtBQUU5QixzQkFBc0I7QUFDdEJBLE9BQU9DLEtBQUssR0FBR0MsS0FBS0MsRUFBRTtBQUV0QixzQkFBc0I7QUFDdEIsTUFBTUMsa0JBQWtCQyxPQUFPQyxPQUFPO0FBRXRDLHNCQUFzQjtBQUN0QkMsUUFBUUMsU0FBUyxDQUFDQyxjQUFjLEdBQUdQLEtBQUtDLEVBQUU7QUFFMUMsb0JBQW9CO0FBQ3BCLE1BQU1PLGNBQWM7SUFDbEJDLElBQUk7SUFDSkMsV0FBVztJQUNYQyxTQUFTO0lBQ1RDLGVBQWU7SUFDZkMsWUFBWTtJQUNaQyxZQUFZO0lBQ1pDLFNBQVM7UUFDUDtZQUNFTixJQUFJO1lBQ0pPLFlBQVk7WUFDWkMsZUFBZTtZQUNmQyxjQUFjO1lBQ2RDLGNBQWM7Z0JBQUVDLE1BQU07WUFBc0I7WUFDNUNQLFlBQVk7WUFD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