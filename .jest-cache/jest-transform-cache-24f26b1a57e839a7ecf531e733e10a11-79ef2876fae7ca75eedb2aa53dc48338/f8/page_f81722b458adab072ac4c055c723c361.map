{"version":3,"names":["default","cov_9i0wznk90","f","s","ContentPage","dynamic","params","searchParams","type","slug","preview","b","_navigation","notFound","isPreviewMode","supabase","_authhelpersnextjs","createServerComponentClient","cookies","_headers","data","session","auth","getSession","contentPageResult","_contentPagesService","getContentPageBySlug","success","contentPage","status","sectionsResult","_sectionsService","listSections","id","sections","_jsxruntime","jsx","className","jsxs","title","length","map","section","_SectionRenderer","SectionRenderer"],"sources":["/Users/jaron/Desktop/wedding-platform-v2/app/[type]/[slug]/page.tsx"],"sourcesContent":["export const dynamic = 'force-dynamic';\n\nimport { createServerComponentClient } from '@supabase/auth-helpers-nextjs';\nimport { cookies } from 'next/headers';\nimport { notFound } from 'next/navigation';\nimport { SectionRenderer } from '@/components/guest/SectionRenderer';\nimport { listSections } from '@/services/sectionsService';\nimport { getContentPageBySlug } from '@/services/contentPagesService';\n\ninterface ContentPageProps {\n  params: Promise<{ type: string; slug: string }>;\n  searchParams: Promise<{ preview?: string }>;\n}\n\n/**\n * Dynamic Content Page\n * \n * Displays custom content pages with sections:\n * - Page title and metadata\n * - Custom sections with rich text, photos, and references\n * - Flexible layout with 1 or 2 columns\n * - Preview mode support for draft content (admin only)\n * \n * Requirements: \n * - 4.2 (E2E Critical Path Testing - section management flow)\n * - 24.10 (Slug Management - preview mode support)\n */\nexport default async function ContentPage({ params, searchParams }: ContentPageProps) {\n  // Next.js 15: params and searchParams are Promises\n  const { type, slug } = await params;\n  const { preview } = await searchParams;\n  \n  // Only handle 'custom' type for content pages\n  if (type !== 'custom') {\n    notFound();\n  }\n  \n  // Check if preview mode is enabled\n  const isPreviewMode = preview === 'true';\n  \n  // If preview mode, verify admin authentication\n  if (isPreviewMode) {\n    const supabase = createServerComponentClient({ cookies });\n    const { data: { session } } = await supabase.auth.getSession();\n    \n    // Only admins can access preview mode\n    if (!session) {\n      notFound();\n    }\n  }\n  \n  // Fetch content page by slug\n  const contentPageResult = await getContentPageBySlug(slug);\n  \n  if (!contentPageResult.success) {\n    notFound();\n  }\n  \n  const contentPage = contentPageResult.data;\n  \n  // In preview mode, show draft/published content\n  // In normal mode, only show published content\n  if (!isPreviewMode && contentPage.status !== 'published') {\n    notFound();\n  }\n  \n  // Fetch sections for this content page\n  const sectionsResult = await listSections('custom', contentPage.id);\n  const sections = sectionsResult.success ? sectionsResult.data : [];\n  \n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-jungle-50 to-ocean-50\">\n      <div className=\"max-w-4xl mx-auto px-4 py-8\">\n        {/* Preview Mode Banner */}\n        {isPreviewMode && (\n          <div className=\"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-6 rounded\">\n            <p className=\"font-bold\">Preview Mode</p>\n            <p className=\"text-sm\">\n              You are viewing {contentPage.status} content. This is only visible to admins.\n            </p>\n          </div>\n        )}\n        \n        {/* Page Header */}\n        <div className=\"bg-white rounded-lg shadow-lg p-8 mb-6\">\n          <h1 className=\"text-3xl font-bold text-jungle-800 mb-4\">\n            {contentPage.title}\n          </h1>\n          \n          {/* Status Badge (Preview Mode Only) */}\n          {isPreviewMode && (\n            <div className=\"flex items-center gap-2 mt-2\">\n              <span className=\"font-semibold text-sage-700\">Status:</span>\n              <span className={`px-3 py-1 rounded-full text-sm ${\n                contentPage.status === 'published' \n                  ? 'bg-green-100 text-green-800' \n                  : 'bg-yellow-100 text-yellow-800'\n              }`}>\n                {contentPage.status}\n              </span>\n            </div>\n          )}\n        </div>\n        \n        {/* Sections */}\n        {sections.length > 0 && (\n          <div className=\"space-y-6\">\n            {sections.map((section) => (\n              <div key={section.id} className=\"bg-white rounded-lg shadow-lg p-8\">\n                <SectionRenderer section={section} />\n              </div>\n            ))}\n          </div>\n        )}\n        \n        {/* No Sections Message */}\n        {sections.length === 0 && (\n          <div className=\"bg-white rounded-lg shadow-lg p-8 text-center text-sage-600\">\n            <p>No content available for this page.</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]}