{"version":3,"names":["SettingsManager","initialSettings","cov_b9g9tw1r3","f","router","s","_navigation","useRouter","settings","setSettings","_react","useState","editingKey","setEditingKey","editValue","setEditValue","loading","setLoading","toast","setToast","currentAuthMethod","setCurrentAuthMethod","loadingAuthMethod","setLoadingAuthMethod","useEffect","fetchAuthMethod","response","fetch","result","json","success","b","data","defaultAuthMethod","error","console","settingsByCategory","filter","category","reduce","acc","setting","push","startEdit","useCallback","key","JSON","stringify","value","cancelEdit","saveSetting","parsedValue","parse","method","headers","body","type","message","prev","map","refresh","formatValue","handleAuthMethodUpdate","updateExisting","updateExistingGuests","updatedGuestsCount","Error","_jsxruntime","jsxs","className","jsx","_AuthMethodSettings","AuthMethodSettings","currentMethod","onUpdate","Object","entries","categorySettings","is_public","description","onChange","e","target","rows","placeholder","onClick","disabled","_lucidereact","Save","X","Pencil","Date","updated_at","toLocaleString","length"],"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/admin/SettingsManager.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { Pencil, Save, X } from 'lucide-react';\nimport { AuthMethodSettings } from './AuthMethodSettings';\n\ninterface SettingRow {\n  id: string;\n  key: string;\n  value: any;\n  description: string | null;\n  category: string;\n  is_public: boolean;\n  created_at: string;\n  updated_at: string;\n}\n\ninterface SettingsManagerProps {\n  initialSettings: SettingRow[];\n}\n\nexport default function SettingsManager({ initialSettings }: SettingsManagerProps) {\n  const router = useRouter();\n  const [settings, setSettings] = useState(initialSettings);\n  const [editingKey, setEditingKey] = useState<string | null>(null);\n  const [editValue, setEditValue] = useState<string>('');\n  const [loading, setLoading] = useState(false);\n  const [toast, setToast] = useState<{ type: 'success' | 'error'; message: string } | null>(null);\n  const [currentAuthMethod, setCurrentAuthMethod] = useState<'email_matching' | 'magic_link'>('email_matching');\n  const [loadingAuthMethod, setLoadingAuthMethod] = useState(true);\n\n  // Fetch current auth method on mount\n  useEffect(() => {\n    const fetchAuthMethod = async () => {\n      try {\n        const response = await fetch('/api/admin/settings/auth-method');\n        const result = await response.json();\n        \n        if (result.success) {\n          setCurrentAuthMethod(result.data.defaultAuthMethod);\n        }\n      } catch (error) {\n        console.error('Failed to fetch auth method:', error);\n      } finally {\n        setLoadingAuthMethod(false);\n      }\n    };\n\n    fetchAuthMethod();\n  }, []);\n\n  // Group settings by category (exclude authentication category as it's handled separately)\n  const settingsByCategory = settings\n    .filter((s) => s.category !== 'authentication')\n    .reduce((acc, setting) => {\n      if (!acc[setting.category]) {\n        acc[setting.category] = [];\n      }\n      acc[setting.category].push(setting);\n      return acc;\n    }, {} as Record<string, SettingRow[]>);\n\n  const startEdit = useCallback((setting: SettingRow) => {\n    setEditingKey(setting.key);\n    setEditValue(JSON.stringify(setting.value));\n  }, []);\n\n  const cancelEdit = useCallback(() => {\n    setEditingKey(null);\n    setEditValue('');\n  }, []);\n\n  const saveSetting = useCallback(\n    async (key: string) => {\n      setLoading(true);\n      setToast(null);\n\n      try {\n        let parsedValue;\n        try {\n          parsedValue = JSON.parse(editValue);\n        } catch {\n          // If not valid JSON, treat as string\n          parsedValue = editValue;\n        }\n\n        const response = await fetch(`/api/admin/settings/${key}`, {\n          method: 'PUT',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ value: parsedValue }),\n        });\n\n        const result = await response.json();\n\n        if (result.success) {\n          setToast({ type: 'success', message: 'Setting updated successfully' });\n          setSettings((prev) =>\n            prev.map((s) => (s.key === key ? { ...s, value: parsedValue } : s))\n          );\n          setEditingKey(null);\n          setEditValue('');\n          router.refresh();\n        } else {\n          setToast({\n            type: 'error',\n            message: result.error?.message || 'Failed to update setting',\n          });\n        }\n      } catch (error) {\n        setToast({\n          type: 'error',\n          message: 'An unexpected error occurred',\n        });\n      } finally {\n        setLoading(false);\n      }\n    },\n    [editValue, router]\n  );\n\n  const formatValue = (value: any): string => {\n    if (typeof value === 'string') {\n      return value;\n    }\n    return JSON.stringify(value);\n  };\n\n  const handleAuthMethodUpdate = useCallback(\n    async (method: 'email_matching' | 'magic_link', updateExisting: boolean) => {\n      setToast(null);\n\n      try {\n        const response = await fetch('/api/admin/settings/auth-method', {\n          method: 'PUT',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            defaultAuthMethod: method,\n            updateExistingGuests: updateExisting,\n          }),\n        });\n\n        const result = await response.json();\n\n        if (result.success) {\n          setCurrentAuthMethod(method);\n          setToast({\n            type: 'success',\n            message: updateExisting\n              ? `Authentication method updated. ${result.data.updatedGuestsCount} guests updated.`\n              : 'Authentication method updated successfully.',\n          });\n          router.refresh();\n        } else {\n          throw new Error(result.error?.message || 'Failed to update auth method');\n        }\n      } catch (error) {\n        throw error; // Re-throw to be handled by AuthMethodSettings component\n      }\n    },\n    [router]\n  );\n\n  return (\n    <div className=\"max-w-6xl\">\n      {/* Toast notification */}\n      {toast && (\n        <div\n          className={`mb-6 p-4 rounded-lg ${\n            toast.type === 'success'\n              ? 'bg-jungle-50 text-jungle-800 border border-jungle-200'\n              : 'bg-volcano-50 text-volcano-800 border border-volcano-200'\n          }`}\n        >\n          {toast.message}\n        </div>\n      )}\n\n      {/* Authentication Settings Section */}\n      <div className=\"mb-6 bg-white rounded-lg shadow-md overflow-hidden\">\n        <div className=\"bg-sage-50 px-6 py-4 border-b border-sage-200\">\n          <h2 className=\"text-xl font-semibold text-sage-900\">Authentication</h2>\n        </div>\n        <div className=\"p-6\">\n          {loadingAuthMethod ? (\n            <div className=\"flex items-center justify-center py-8\">\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-jungle-600\"></div>\n            </div>\n          ) : (\n            <AuthMethodSettings\n              currentMethod={currentAuthMethod}\n              onUpdate={handleAuthMethodUpdate}\n            />\n          )}\n        </div>\n      </div>\n\n      {/* Settings by category */}\n      <div className=\"space-y-6\">\n        {Object.entries(settingsByCategory).map(([category, categorySettings]) => (\n          <div key={category} className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n            <div className=\"bg-sage-50 px-6 py-4 border-b border-sage-200\">\n              <h2 className=\"text-xl font-semibold text-sage-900 capitalize\">{category}</h2>\n            </div>\n\n            <div className=\"divide-y divide-sage-100\">\n              {categorySettings.map((setting) => (\n                <div key={setting.key} className=\"p-6\">\n                  <div className=\"flex items-start justify-between gap-4\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-3 mb-2\">\n                        <h3 className=\"font-medium text-sage-900\">{setting.key}</h3>\n                        {setting.is_public && (\n                          <span className=\"px-2 py-0.5 text-xs font-medium bg-ocean-100 text-ocean-800 rounded\">\n                            Public\n                          </span>\n                        )}\n                      </div>\n                      {setting.description && (\n                        <p className=\"text-sm text-sage-600 mb-3\">{setting.description}</p>\n                      )}\n\n                      {editingKey === setting.key ? (\n                        <div className=\"space-y-3\">\n                          <textarea\n                            value={editValue}\n                            onChange={(e) => setEditValue(e.target.value)}\n                            rows={3}\n                            className=\"w-full px-3 py-2 border border-sage-300 rounded-lg focus:ring-2 focus:ring-jungle-500 focus:border-transparent font-mono text-sm\"\n                            placeholder=\"Enter value (JSON format for objects/arrays)\"\n                          />\n                          <div className=\"flex gap-2\">\n                            <button\n                              onClick={() => saveSetting(setting.key)}\n                              disabled={loading}\n                              className=\"flex items-center gap-2 px-4 py-2 bg-jungle-500 text-white rounded-lg hover:bg-jungle-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                            >\n                              <Save className=\"w-4 h-4\" />\n                              Save\n                            </button>\n                            <button\n                              onClick={cancelEdit}\n                              disabled={loading}\n                              className=\"flex items-center gap-2 px-4 py-2 bg-sage-200 text-sage-700 rounded-lg hover:bg-sage-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                            >\n                              <X className=\"w-4 h-4\" />\n                              Cancel\n                            </button>\n                          </div>\n                        </div>\n                      ) : (\n                        <div className=\"flex items-center gap-3\">\n                          <code className=\"px-3 py-2 bg-sage-50 border border-sage-200 rounded text-sm font-mono\">\n                            {formatValue(setting.value)}\n                          </code>\n                        </div>\n                      )}\n                    </div>\n\n                    {editingKey !== setting.key && (\n                      <button\n                        onClick={() => startEdit(setting)}\n                        className=\"flex items-center gap-2 px-3 py-2 text-sage-600 hover:text-jungle-600 hover:bg-jungle-50 rounded-lg transition-colors\"\n                      >\n                        <Pencil className=\"w-4 h-4\" />\n                        Edit\n                      </button>\n                    )}\n                  </div>\n\n                  <div className=\"mt-3 text-xs text-sage-500\">\n                    Last updated: {new Date(setting.updated_at).toLocaleString()}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {settings.length === 0 && (\n        <div className=\"bg-white rounded-lg shadow-md p-12 text-center\">\n          <p className=\"text-sage-600\">No settings found. Default settings will be used.</p>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}