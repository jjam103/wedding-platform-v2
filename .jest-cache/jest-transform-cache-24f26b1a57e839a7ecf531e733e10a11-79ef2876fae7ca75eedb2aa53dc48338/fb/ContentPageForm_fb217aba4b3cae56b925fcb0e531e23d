d2cd7f18b9574fe24753440f2c87eaae
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "ContentPageForm", {
    enumerable: true,
    get: function() {
        return ContentPageForm;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const _slugs = require("../../utils/slugs");
function ContentPageForm({ title, onSubmit, onCancel, initialData, isOpen, onToggle, submitLabel = 'Create', cancelLabel = 'Cancel' }) {
    const [formTitle, setFormTitle] = (0, _react.useState)(initialData?.title || '');
    const [formSlug, setFormSlug] = (0, _react.useState)(initialData?.slug || '');
    const [formStatus, setFormStatus] = (0, _react.useState)(initialData?.status || 'draft');
    const [slugManuallyEdited, setSlugManuallyEdited] = (0, _react.useState)(false);
    const [errors, setErrors] = (0, _react.useState)({});
    const [isSubmitting, setIsSubmitting] = (0, _react.useState)(false);
    const [isDirty, setIsDirty] = (0, _react.useState)(false);
    const formRef = (0, _react.useRef)(null);
    const contentRef = (0, _react.useRef)(null);
    // Reset form when initialData changes
    (0, _react.useEffect)(()=>{
        if (initialData) {
            setFormTitle(initialData.title);
            setFormSlug(initialData.slug);
            setFormStatus(initialData.status);
            setSlugManuallyEdited(true); // Preserve existing slug when editing
            setIsDirty(false);
        } else if (!isOpen) {
            // Reset form when closing
            setFormTitle('');
            setFormSlug('');
            setFormStatus('draft');
            setSlugManuallyEdited(false);
            setIsDirty(false);
            setErrors({});
        }
    }, [
        initialData,
        isOpen
    ]);
    // Auto-generate slug from title
    (0, _react.useEffect)(()=>{
        if (!slugManuallyEdited && formTitle) {
            setFormSlug((0, _slugs.generateSlug)(formTitle));
        }
    }, [
        formTitle,
        slugManuallyEdited
    ]);
    // Auto-scroll to form when expanded and force height recalculation
    (0, _react.useEffect)(()=>{
        if (isOpen && formRef.current && contentRef.current) {
            // Force height recalculation after content renders
            setTimeout(()=>{
                if (contentRef.current) {
                    contentRef.current.style.maxHeight = `${contentRef.current.scrollHeight}px`;
                }
                formRef.current?.scrollIntoView({
                    behavior: 'smooth',
                    block: 'nearest'
                });
            }, 100);
        }
    }, [
        isOpen
    ]);
    // Recalculate height when form content changes
    (0, _react.useEffect)(()=>{
        if (isOpen && contentRef.current) {
            const recalculate = ()=>{
                if (contentRef.current) {
                    contentRef.current.style.maxHeight = `${contentRef.current.scrollHeight}px`;
                }
            };
            recalculate();
            const timer = setTimeout(recalculate, 50);
            return ()=>clearTimeout(timer);
        }
    }, [
        isOpen,
        formTitle,
        formSlug,
        formStatus,
        errors
    ]);
    const handleTitleChange = (0, _react.useCallback)((value)=>{
        setFormTitle(value);
        setIsDirty(true);
        if (errors.title) {
            setErrors((prev)=>{
                const next = {
                    ...prev
                };
                delete next.title;
                return next;
            });
        }
    }, [
        errors.title
    ]);
    const handleSlugChange = (0, _react.useCallback)((value)=>{
        setFormSlug(value);
        setSlugManuallyEdited(true);
        setIsDirty(true);
        if (errors.slug) {
            setErrors((prev)=>{
                const next = {
                    ...prev
                };
                delete next.slug;
                return next;
            });
        }
    }, [
        errors.slug
    ]);
    const handleSubmit = async (e)=>{
        e.preventDefault();
        // Validate
        const validationErrors = {};
        if (!formTitle.trim()) {
            validationErrors.title = 'Title is required';
        }
        if (!formSlug.trim()) {
            validationErrors.slug = 'Slug is required';
        } else if (!(0, _slugs.isValidSlug)(formSlug)) {
            validationErrors.slug = 'Slug must contain only lowercase letters, numbers, and hyphens';
        }
        if (Object.keys(validationErrors).length > 0) {
            setErrors(validationErrors);
            return;
        }
        setIsSubmitting(true);
        try {
            await onSubmit({
                title: formTitle,
                slug: formSlug,
                status: formStatus
            });
        // Form will be reset by useEffect when isOpen changes
        } catch (error) {
            console.error('Form submission error:', error);
            setErrors({
                _form: error instanceof Error ? error.message : 'Submission failed'
            });
        } finally{
            setIsSubmitting(false);
        }
    };
    const handleCancel = ()=>{
        if (isDirty) {
            const confirmed = window.confirm('You have unsaved changes. Are you sure you want to cancel?');
            if (!confirmed) return;
        }
        onToggle();
        if (onCancel) onCancel();
    };
    const slugPreview = formSlug ? (0, _slugs.getSlugPreview)(formSlug, 'pages') : '';
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        ref: formRef,
        className: "border border-sage-200 rounded-lg overflow-hidden bg-white shadow-sm",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("button", {
                onClick: onToggle,
                className: "w-full flex items-center justify-between px-4 py-3 bg-sage-50 hover:bg-sage-100 transition-colors",
                "aria-expanded": isOpen,
                "aria-controls": "content-page-form-content",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                        className: "font-medium text-sage-900",
                        children: title
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                        className: `text-sage-600 transition-transform duration-300 ${isOpen ? 'rotate-180' : ''}`,
                        "aria-hidden": "true",
                        children: "â–¼"
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                ref: contentRef,
                id: "content-page-form-content",
                className: `transition-all duration-300 ease-in-out ${isOpen ? '' : 'overflow-hidden'}`,
                style: {
                    maxHeight: isOpen ? 'none' : '0px',
                    opacity: isOpen ? 1 : 0
                },
                "aria-hidden": !isOpen,
                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("form", {
                    onSubmit: handleSubmit,
                    className: "p-4 space-y-4",
                    children: [
                        errors._form && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            className: "p-3 bg-red-50 border border-red-200 rounded-lg",
                            role: "alert",
                            children: /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                className: "text-sm text-red-700",
                                children: errors._form
                            })
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "grid grid-cols-1 md:grid-cols-2 gap-4",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "space-y-1",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("label", {
                                            htmlFor: "title",
                                            className: "block text-sm font-medium text-gray-700",
                                            children: [
                                                "Title",
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                    className: "text-red-500 ml-1",
                                                    children: "*"
                                                })
                                            ]
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                                            id: "title",
                                            type: "text",
                                            value: formTitle,
                                            onChange: (e)=>handleTitleChange(e.target.value),
                                            placeholder: "Our Story",
                                            required: true,
                                            className: `w-full px-3 py-2 border rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 ${errors.title ? 'border-red-500' : 'border-gray-300'}`,
                                            "aria-invalid": !!errors.title,
                                            "aria-describedby": errors.title ? 'title-error' : undefined
                                        }),
                                        errors.title && /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                            id: "title-error",
                                            className: "text-sm text-red-600",
                                            role: "alert",
                                            children: errors.title
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "space-y-1",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("label", {
                                            htmlFor: "status",
                                            className: "block text-sm font-medium text-gray-700",
                                            children: [
                                                "Status",
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                    className: "text-red-500 ml-1",
                                                    children: "*"
                                                })
                                            ]
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("select", {
                                            id: "status",
                                            value: formStatus,
                                            onChange: (e)=>{
                                                setFormStatus(e.target.value);
                                                setIsDirty(true);
                                            },
                                            required: true,
                                            className: "w-full px-3 py-2 border border-gray-300 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-green-500",
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("option", {
                                                    value: "draft",
                                                    children: "Draft"
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("option", {
                                                    value: "published",
                                                    children: "Published"
                                                })
                                            ]
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "md:col-span-2 space-y-1",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("label", {
                                            htmlFor: "slug",
                                            className: "block text-sm font-medium text-gray-700",
                                            children: [
                                                "Slug",
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                    className: "text-red-500 ml-1",
                                                    children: "*"
                                                })
                                            ]
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                                            id: "slug",
                                            type: "text",
                                            value: formSlug,
                                            onChange: (e)=>handleSlugChange(e.target.value),
                                            placeholder: "our-story",
                                            required: true,
                                            className: `w-full px-3 py-2 border rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 ${errors.slug ? 'border-red-500' : 'border-gray-300'}`,
                                            "aria-invalid": !!errors.slug,
                                            "aria-describedby": errors.slug ? 'slug-error slug-help' : 'slug-help'
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                            id: "slug-help",
                                            className: "text-xs text-gray-600",
                                            children: "URL-safe identifier (lowercase, hyphens only). Auto-generated from title."
                                        }),
                                        slugPreview && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                            className: "mt-1 p-2 bg-gray-50 border border-gray-200 rounded",
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                    className: "text-xs text-gray-600 mb-1",
                                                    children: "URL Preview:"
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("code", {
                                                    className: "text-sm text-green-700 font-mono",
                                                    children: slugPreview
                                                })
                                            ]
                                        }),
                                        errors.slug && /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                            id: "slug-error",
                                            className: "text-sm text-red-600",
                                            role: "alert",
                                            children: errors.slug
                                        })
                                    ]
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "flex gap-3 pt-2",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                    type: "submit",
                                    disabled: isSubmitting,
                                    className: "px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",
                                    children: isSubmitting ? 'Submitting...' : submitLabel
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                    type: "button",
                                    onClick: handleCancel,
                                    disabled: isSubmitting,
                                    className: "px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",
                                    children: cancelLabel
                                })
                            ]
                        })
                    ]
                })
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvY29tcG9uZW50cy9hZG1pbi9Db250ZW50UGFnZUZvcm0udHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGdlbmVyYXRlU2x1ZywgZ2V0U2x1Z1ByZXZpZXcsIGlzVmFsaWRTbHVnIH0gZnJvbSAnQC91dGlscy9zbHVncyc7XG5pbXBvcnQgdHlwZSB7IENvbnRlbnRQYWdlIH0gZnJvbSAnQC9zY2hlbWFzL2Ntc1NjaGVtYXMnO1xuXG5pbnRlcmZhY2UgQ29udGVudFBhZ2VGb3JtRGF0YSB7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHNsdWc6IHN0cmluZztcbiAgc3RhdHVzOiAnZHJhZnQnIHwgJ3B1Ymxpc2hlZCc7XG59XG5cbmludGVyZmFjZSBDb250ZW50UGFnZUZvcm1Qcm9wcyB7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIG9uU3VibWl0OiAoZGF0YTogQ29udGVudFBhZ2VGb3JtRGF0YSkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgb25DYW5jZWw/OiAoKSA9PiB2b2lkO1xuICBpbml0aWFsRGF0YT86IENvbnRlbnRQYWdlO1xuICBpc09wZW46IGJvb2xlYW47XG4gIG9uVG9nZ2xlOiAoKSA9PiB2b2lkO1xuICBzdWJtaXRMYWJlbD86IHN0cmluZztcbiAgY2FuY2VsTGFiZWw/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogQ29udGVudFBhZ2VGb3JtIENvbXBvbmVudFxuICogXG4gKiBTcGVjaWFsaXplZCBmb3JtIGZvciBjb250ZW50IHBhZ2VzIHdpdGg6XG4gKiAtIEF1dG8tc2x1ZyBnZW5lcmF0aW9uIGZyb20gdGl0bGVcbiAqIC0gTWFudWFsIHNsdWcgb3ZlcnJpZGUgY2FwYWJpbGl0eVxuICogLSBVUkwgcGF0aCBwcmV2aWV3XG4gKiAtIFZhbGlkYXRpb24gZmVlZGJhY2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIENvbnRlbnRQYWdlRm9ybSh7XG4gIHRpdGxlLFxuICBvblN1Ym1pdCxcbiAgb25DYW5jZWwsXG4gIGluaXRpYWxEYXRhLFxuICBpc09wZW4sXG4gIG9uVG9nZ2xlLFxuICBzdWJtaXRMYWJlbCA9ICdDcmVhdGUnLFxuICBjYW5jZWxMYWJlbCA9ICdDYW5jZWwnLFxufTogQ29udGVudFBhZ2VGb3JtUHJvcHMpIHtcbiAgY29uc3QgW2Zvcm1UaXRsZSwgc2V0Rm9ybVRpdGxlXSA9IHVzZVN0YXRlKGluaXRpYWxEYXRhPy50aXRsZSB8fCAnJyk7XG4gIGNvbnN0IFtmb3JtU2x1Zywgc2V0Rm9ybVNsdWddID0gdXNlU3RhdGUoaW5pdGlhbERhdGE/LnNsdWcgfHwgJycpO1xuICBjb25zdCBbZm9ybVN0YXR1cywgc2V0Rm9ybVN0YXR1c10gPSB1c2VTdGF0ZTwnZHJhZnQnIHwgJ3B1Ymxpc2hlZCc+KGluaXRpYWxEYXRhPy5zdGF0dXMgfHwgJ2RyYWZ0Jyk7XG4gIGNvbnN0IFtzbHVnTWFudWFsbHlFZGl0ZWQsIHNldFNsdWdNYW51YWxseUVkaXRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlcnJvcnMsIHNldEVycm9yc10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+Pih7fSk7XG4gIGNvbnN0IFtpc1N1Ym1pdHRpbmcsIHNldElzU3VibWl0dGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc0RpcnR5LCBzZXRJc0RpcnR5XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgZm9ybVJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IGNvbnRlbnRSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuXG4gIC8vIFJlc2V0IGZvcm0gd2hlbiBpbml0aWFsRGF0YSBjaGFuZ2VzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGluaXRpYWxEYXRhKSB7XG4gICAgICBzZXRGb3JtVGl0bGUoaW5pdGlhbERhdGEudGl0bGUpO1xuICAgICAgc2V0Rm9ybVNsdWcoaW5pdGlhbERhdGEuc2x1Zyk7XG4gICAgICBzZXRGb3JtU3RhdHVzKGluaXRpYWxEYXRhLnN0YXR1cyk7XG4gICAgICBzZXRTbHVnTWFudWFsbHlFZGl0ZWQodHJ1ZSk7IC8vIFByZXNlcnZlIGV4aXN0aW5nIHNsdWcgd2hlbiBlZGl0aW5nXG4gICAgICBzZXRJc0RpcnR5KGZhbHNlKTtcbiAgICB9IGVsc2UgaWYgKCFpc09wZW4pIHtcbiAgICAgIC8vIFJlc2V0IGZvcm0gd2hlbiBjbG9zaW5nXG4gICAgICBzZXRGb3JtVGl0bGUoJycpO1xuICAgICAgc2V0Rm9ybVNsdWcoJycpO1xuICAgICAgc2V0Rm9ybVN0YXR1cygnZHJhZnQnKTtcbiAgICAgIHNldFNsdWdNYW51YWxseUVkaXRlZChmYWxzZSk7XG4gICAgICBzZXRJc0RpcnR5KGZhbHNlKTtcbiAgICAgIHNldEVycm9ycyh7fSk7XG4gICAgfVxuICB9LCBbaW5pdGlhbERhdGEsIGlzT3Blbl0pO1xuXG4gIC8vIEF1dG8tZ2VuZXJhdGUgc2x1ZyBmcm9tIHRpdGxlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFzbHVnTWFudWFsbHlFZGl0ZWQgJiYgZm9ybVRpdGxlKSB7XG4gICAgICBzZXRGb3JtU2x1ZyhnZW5lcmF0ZVNsdWcoZm9ybVRpdGxlKSk7XG4gICAgfVxuICB9LCBbZm9ybVRpdGxlLCBzbHVnTWFudWFsbHlFZGl0ZWRdKTtcblxuICAvLyBBdXRvLXNjcm9sbCB0byBmb3JtIHdoZW4gZXhwYW5kZWQgYW5kIGZvcmNlIGhlaWdodCByZWNhbGN1bGF0aW9uXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzT3BlbiAmJiBmb3JtUmVmLmN1cnJlbnQgJiYgY29udGVudFJlZi5jdXJyZW50KSB7XG4gICAgICAvLyBGb3JjZSBoZWlnaHQgcmVjYWxjdWxhdGlvbiBhZnRlciBjb250ZW50IHJlbmRlcnNcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoY29udGVudFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgY29udGVudFJlZi5jdXJyZW50LnN0eWxlLm1heEhlaWdodCA9IGAke2NvbnRlbnRSZWYuY3VycmVudC5zY3JvbGxIZWlnaHR9cHhgO1xuICAgICAgICB9XG4gICAgICAgIGZvcm1SZWYuY3VycmVudD8uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnbmVhcmVzdCcgfSk7XG4gICAgICB9LCAxMDApO1xuICAgIH1cbiAgfSwgW2lzT3Blbl0pO1xuXG4gIC8vIFJlY2FsY3VsYXRlIGhlaWdodCB3aGVuIGZvcm0gY29udGVudCBjaGFuZ2VzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzT3BlbiAmJiBjb250ZW50UmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IHJlY2FsY3VsYXRlID0gKCkgPT4ge1xuICAgICAgICBpZiAoY29udGVudFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgY29udGVudFJlZi5jdXJyZW50LnN0eWxlLm1heEhlaWdodCA9IGAke2NvbnRlbnRSZWYuY3VycmVudC5zY3JvbGxIZWlnaHR9cHhgO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICByZWNhbGN1bGF0ZSgpO1xuICAgICAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KHJlY2FsY3VsYXRlLCA1MCk7XG4gICAgICBcbiAgICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgIH1cbiAgfSwgW2lzT3BlbiwgZm9ybVRpdGxlLCBmb3JtU2x1ZywgZm9ybVN0YXR1cywgZXJyb3JzXSk7XG5cbiAgY29uc3QgaGFuZGxlVGl0bGVDaGFuZ2UgPSB1c2VDYWxsYmFjaygodmFsdWU6IHN0cmluZykgPT4ge1xuICAgIHNldEZvcm1UaXRsZSh2YWx1ZSk7XG4gICAgc2V0SXNEaXJ0eSh0cnVlKTtcbiAgICBpZiAoZXJyb3JzLnRpdGxlKSB7XG4gICAgICBzZXRFcnJvcnMoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgbmV4dCA9IHsgLi4ucHJldiB9O1xuICAgICAgICBkZWxldGUgbmV4dC50aXRsZTtcbiAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtlcnJvcnMudGl0bGVdKTtcblxuICBjb25zdCBoYW5kbGVTbHVnQ2hhbmdlID0gdXNlQ2FsbGJhY2soKHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICBzZXRGb3JtU2x1Zyh2YWx1ZSk7XG4gICAgc2V0U2x1Z01hbnVhbGx5RWRpdGVkKHRydWUpO1xuICAgIHNldElzRGlydHkodHJ1ZSk7XG4gICAgaWYgKGVycm9ycy5zbHVnKSB7XG4gICAgICBzZXRFcnJvcnMoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgbmV4dCA9IHsgLi4ucHJldiB9O1xuICAgICAgICBkZWxldGUgbmV4dC5zbHVnO1xuICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2Vycm9ycy5zbHVnXSk7XG5cbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBcbiAgICAvLyBWYWxpZGF0ZVxuICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICBcbiAgICBpZiAoIWZvcm1UaXRsZS50cmltKCkpIHtcbiAgICAgIHZhbGlkYXRpb25FcnJvcnMudGl0bGUgPSAnVGl0bGUgaXMgcmVxdWlyZWQnO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIWZvcm1TbHVnLnRyaW0oKSkge1xuICAgICAgdmFsaWRhdGlvbkVycm9ycy5zbHVnID0gJ1NsdWcgaXMgcmVxdWlyZWQnO1xuICAgIH0gZWxzZSBpZiAoIWlzVmFsaWRTbHVnKGZvcm1TbHVnKSkge1xuICAgICAgdmFsaWRhdGlvbkVycm9ycy5zbHVnID0gJ1NsdWcgbXVzdCBjb250YWluIG9ubHkgbG93ZXJjYXNlIGxldHRlcnMsIG51bWJlcnMsIGFuZCBoeXBoZW5zJztcbiAgICB9XG4gICAgXG4gICAgaWYgKE9iamVjdC5rZXlzKHZhbGlkYXRpb25FcnJvcnMpLmxlbmd0aCA+IDApIHtcbiAgICAgIHNldEVycm9ycyh2YWxpZGF0aW9uRXJyb3JzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZXRJc1N1Ym1pdHRpbmcodHJ1ZSk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IG9uU3VibWl0KHtcbiAgICAgICAgdGl0bGU6IGZvcm1UaXRsZSxcbiAgICAgICAgc2x1ZzogZm9ybVNsdWcsXG4gICAgICAgIHN0YXR1czogZm9ybVN0YXR1cyxcbiAgICAgIH0pO1xuICAgICAgLy8gRm9ybSB3aWxsIGJlIHJlc2V0IGJ5IHVzZUVmZmVjdCB3aGVuIGlzT3BlbiBjaGFuZ2VzXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Zvcm0gc3VibWlzc2lvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICBzZXRFcnJvcnMoeyBfZm9ybTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnU3VibWlzc2lvbiBmYWlsZWQnIH0pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc1N1Ym1pdHRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVDYW5jZWwgPSAoKSA9PiB7XG4gICAgaWYgKGlzRGlydHkpIHtcbiAgICAgIGNvbnN0IGNvbmZpcm1lZCA9IHdpbmRvdy5jb25maXJtKFxuICAgICAgICAnWW91IGhhdmUgdW5zYXZlZCBjaGFuZ2VzLiBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gY2FuY2VsPydcbiAgICAgICk7XG4gICAgICBpZiAoIWNvbmZpcm1lZCkgcmV0dXJuO1xuICAgIH1cblxuICAgIG9uVG9nZ2xlKCk7XG4gICAgaWYgKG9uQ2FuY2VsKSBvbkNhbmNlbCgpO1xuICB9O1xuXG4gIGNvbnN0IHNsdWdQcmV2aWV3ID0gZm9ybVNsdWcgPyBnZXRTbHVnUHJldmlldyhmb3JtU2x1ZywgJ3BhZ2VzJykgOiAnJztcblxuICByZXR1cm4gKFxuICAgIDxkaXYgcmVmPXtmb3JtUmVmfSBjbGFzc05hbWU9XCJib3JkZXIgYm9yZGVyLXNhZ2UtMjAwIHJvdW5kZWQtbGcgb3ZlcmZsb3ctaGlkZGVuIGJnLXdoaXRlIHNoYWRvdy1zbVwiPlxuICAgICAgey8qIEhlYWRlciAqL31cbiAgICAgIDxidXR0b25cbiAgICAgICAgb25DbGljaz17b25Ub2dnbGV9XG4gICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcHgtNCBweS0zIGJnLXNhZ2UtNTAgaG92ZXI6Ymctc2FnZS0xMDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICBhcmlhLWV4cGFuZGVkPXtpc09wZW59XG4gICAgICAgIGFyaWEtY29udHJvbHM9XCJjb250ZW50LXBhZ2UtZm9ybS1jb250ZW50XCJcbiAgICAgID5cbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1zYWdlLTkwMFwiPnt0aXRsZX08L3NwYW4+XG4gICAgICAgIDxzcGFuIFxuICAgICAgICAgIGNsYXNzTmFtZT17YHRleHQtc2FnZS02MDAgdHJhbnNpdGlvbi10cmFuc2Zvcm0gZHVyYXRpb24tMzAwICR7aXNPcGVuID8gJ3JvdGF0ZS0xODAnIDogJyd9YH1cbiAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICA+XG4gICAgICAgICAg4pa8XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgIDwvYnV0dG9uPlxuXG4gICAgICB7LyogQ29sbGFwc2libGUgQ29udGVudCAqL31cbiAgICAgIDxkaXZcbiAgICAgICAgcmVmPXtjb250ZW50UmVmfVxuICAgICAgICBpZD1cImNvbnRlbnQtcGFnZS1mb3JtLWNvbnRlbnRcIlxuICAgICAgICBjbGFzc05hbWU9e2B0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDAgZWFzZS1pbi1vdXQgJHtpc09wZW4gPyAnJyA6ICdvdmVyZmxvdy1oaWRkZW4nfWB9XG4gICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgbWF4SGVpZ2h0OiBpc09wZW4gPyAnbm9uZScgOiAnMHB4JyxcbiAgICAgICAgICBvcGFjaXR5OiBpc09wZW4gPyAxIDogMCxcbiAgICAgICAgfX1cbiAgICAgICAgYXJpYS1oaWRkZW49eyFpc09wZW59XG4gICAgICA+XG4gICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9IGNsYXNzTmFtZT1cInAtNCBzcGFjZS15LTRcIj5cbiAgICAgICAgICB7LyogRm9ybS1sZXZlbCBlcnJvciAqL31cbiAgICAgICAgICB7ZXJyb3JzLl9mb3JtICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0zIGJnLXJlZC01MCBib3JkZXIgYm9yZGVyLXJlZC0yMDAgcm91bmRlZC1sZ1wiIHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtcmVkLTcwMFwiPntlcnJvcnMuX2Zvcm19PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cblxuICAgICAgICAgIHsvKiBGaWVsZHMgaW4gR3JpZCBMYXlvdXQgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGdhcC00XCI+XG4gICAgICAgICAgICB7LyogVGl0bGUgRmllbGQgKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMVwiPlxuICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cInRpdGxlXCIgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwXCI+XG4gICAgICAgICAgICAgICAgVGl0bGVcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXJlZC01MDAgbWwtMVwiPio8L3NwYW4+XG4gICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIGlkPVwidGl0bGVcIlxuICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17Zm9ybVRpdGxlfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlVGl0bGVDaGFuZ2UoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiT3VyIFN0b3J5XCJcbiAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHctZnVsbCBweC0zIHB5LTIgYm9yZGVyIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnMgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWdyZWVuLTUwMCAke1xuICAgICAgICAgICAgICAgICAgZXJyb3JzLnRpdGxlID8gJ2JvcmRlci1yZWQtNTAwJyA6ICdib3JkZXItZ3JheS0zMDAnXG4gICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgYXJpYS1pbnZhbGlkPXshIWVycm9ycy50aXRsZX1cbiAgICAgICAgICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PXtlcnJvcnMudGl0bGUgPyAndGl0bGUtZXJyb3InIDogdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB7ZXJyb3JzLnRpdGxlICYmIChcbiAgICAgICAgICAgICAgICA8cCBpZD1cInRpdGxlLWVycm9yXCIgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXJlZC02MDBcIiByb2xlPVwiYWxlcnRcIj5cbiAgICAgICAgICAgICAgICAgIHtlcnJvcnMudGl0bGV9XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIHsvKiBTdGF0dXMgRmllbGQgKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMVwiPlxuICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cInN0YXR1c1wiIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICAgIFN0YXR1c1xuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtcmVkLTUwMCBtbC0xXCI+Kjwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgPHNlbGVjdFxuICAgICAgICAgICAgICAgIGlkPVwic3RhdHVzXCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17Zm9ybVN0YXR1c31cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldEZvcm1TdGF0dXMoZS50YXJnZXQudmFsdWUgYXMgJ2RyYWZ0JyB8ICdwdWJsaXNoZWQnKTtcbiAgICAgICAgICAgICAgICAgIHNldElzRGlydHkodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC0zIHB5LTIgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ncmVlbi01MDBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cImRyYWZ0XCI+RHJhZnQ8L29wdGlvbj5cbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwicHVibGlzaGVkXCI+UHVibGlzaGVkPC9vcHRpb24+XG4gICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIHsvKiBTbHVnIEZpZWxkIC0gRnVsbCBXaWR0aCAqL31cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWQ6Y29sLXNwYW4tMiBzcGFjZS15LTFcIj5cbiAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJzbHVnXCIgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwXCI+XG4gICAgICAgICAgICAgICAgU2x1Z1xuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtcmVkLTUwMCBtbC0xXCI+Kjwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgaWQ9XCJzbHVnXCJcbiAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e2Zvcm1TbHVnfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlU2x1Z0NoYW5nZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJvdXItc3RvcnlcIlxuICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIHB4LTMgcHktMiBib3JkZXIgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctZ3JlZW4tNTAwICR7XG4gICAgICAgICAgICAgICAgICBlcnJvcnMuc2x1ZyA/ICdib3JkZXItcmVkLTUwMCcgOiAnYm9yZGVyLWdyYXktMzAwJ1xuICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgIGFyaWEtaW52YWxpZD17ISFlcnJvcnMuc2x1Z31cbiAgICAgICAgICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PXtlcnJvcnMuc2x1ZyA/ICdzbHVnLWVycm9yIHNsdWctaGVscCcgOiAnc2x1Zy1oZWxwJ31cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPHAgaWQ9XCJzbHVnLWhlbHBcIiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS02MDBcIj5cbiAgICAgICAgICAgICAgICBVUkwtc2FmZSBpZGVudGlmaWVyIChsb3dlcmNhc2UsIGh5cGhlbnMgb25seSkuIEF1dG8tZ2VuZXJhdGVkIGZyb20gdGl0bGUuXG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAge3NsdWdQcmV2aWV3ICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTEgcC0yIGJnLWdyYXktNTAgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS02MDAgbWItMVwiPlVSTCBQcmV2aWV3OjwvcD5cbiAgICAgICAgICAgICAgICAgIDxjb2RlIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmVlbi03MDAgZm9udC1tb25vXCI+e3NsdWdQcmV2aWV3fTwvY29kZT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAge2Vycm9ycy5zbHVnICYmIChcbiAgICAgICAgICAgICAgICA8cCBpZD1cInNsdWctZXJyb3JcIiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtcmVkLTYwMFwiIHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgICAgICAgICAge2Vycm9ycy5zbHVnfVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIEFjdGlvbnMgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGdhcC0zIHB0LTJcIj5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtpc1N1Ym1pdHRpbmd9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTQgcHktMiBiZy1ncmVlbi02MDAgdGV4dC13aGl0ZSByb3VuZGVkLWxnIGhvdmVyOmJnLWdyZWVuLTcwMCBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZCB0cmFuc2l0aW9uLWNvbG9ycyBmb250LW1lZGl1bVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtpc1N1Ym1pdHRpbmcgPyAnU3VibWl0dGluZy4uLicgOiBzdWJtaXRMYWJlbH1cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQ2FuY2VsfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17aXNTdWJtaXR0aW5nfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC00IHB5LTIgYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMzAwIGRpc2FibGVkOm9wYWNpdHktNTAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkIHRyYW5zaXRpb24tY29sb3JzIGZvbnQtbWVkaXVtXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge2NhbmNlbExhYmVsfVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbIkNvbnRlbnRQYWdlRm9ybSIsInRpdGxlIiwib25TdWJtaXQiLCJvbkNhbmNlbCIsImluaXRpYWxEYXRhIiwiaXNPcGVuIiwib25Ub2dnbGUiLCJzdWJtaXRMYWJlbCIsImNhbmNlbExhYmVsIiwiZm9ybVRpdGxlIiwic2V0Rm9ybVRpdGxlIiwidXNlU3RhdGUiLCJmb3JtU2x1ZyIsInNldEZvcm1TbHVnIiwic2x1ZyIsImZvcm1TdGF0dXMiLCJzZXRGb3JtU3RhdHVzIiwic3RhdHVzIiwic2x1Z01hbnVhbGx5RWRpdGVkIiwic2V0U2x1Z01hbnVhbGx5RWRpdGVkIiwiZXJyb3JzIiwic2V0RXJyb3JzIiwiaXNTdWJtaXR0aW5nIiwic2V0SXNTdWJtaXR0aW5nIiwiaXNEaXJ0eSIsInNldElzRGlydHkiLCJmb3JtUmVmIiwidXNlUmVmIiwiY29udGVudFJlZiIsInVzZUVmZmVjdCIsImdlbmVyYXRlU2x1ZyIsImN1cnJlbnQiLCJzZXRUaW1lb3V0Iiwic3R5bGUiLCJtYXhIZWlnaHQiLCJzY3JvbGxIZWlnaHQiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwiYmxvY2siLCJyZWNhbGN1bGF0ZSIsInRpbWVyIiwiY2xlYXJUaW1lb3V0IiwiaGFuZGxlVGl0bGVDaGFuZ2UiLCJ1c2VDYWxsYmFjayIsInZhbHVlIiwicHJldiIsIm5leHQiLCJoYW5kbGVTbHVnQ2hhbmdlIiwiaGFuZGxlU3VibWl0IiwiZSIsInByZXZlbnREZWZhdWx0IiwidmFsaWRhdGlvbkVycm9ycyIsInRyaW0iLCJpc1ZhbGlkU2x1ZyIsIk9iamVjdCIsImtleXMiLCJsZW5ndGgiLCJlcnJvciIsImNvbnNvbGUiLCJfZm9ybSIsIkVycm9yIiwibWVzc2FnZSIsImhhbmRsZUNhbmNlbCIsImNvbmZpcm1lZCIsIndpbmRvdyIsImNvbmZpcm0iLCJzbHVnUHJldmlldyIsImdldFNsdWdQcmV2aWV3IiwiZGl2IiwicmVmIiwiY2xhc3NOYW1lIiwiYnV0dG9uIiwib25DbGljayIsImFyaWEtZXhwYW5kZWQiLCJhcmlhLWNvbnRyb2xzIiwic3BhbiIsImFyaWEtaGlkZGVuIiwiaWQiLCJvcGFjaXR5IiwiZm9ybSIsInJvbGUiLCJwIiwibGFiZWwiLCJodG1sRm9yIiwiaW5wdXQiLCJ0eXBlIiwib25DaGFuZ2UiLCJ0YXJnZXQiLCJwbGFjZWhvbGRlciIsInJlcXVpcmVkIiwiYXJpYS1pbnZhbGlkIiwiYXJpYS1kZXNjcmliZWRieSIsInVuZGVmaW5lZCIsInNlbGVjdCIsIm9wdGlvbiIsImNvZGUiLCJkaXNhYmxlZCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OytCQWdDZ0JBOzs7ZUFBQUE7Ozs7dUJBOUJ5Qzt1QkFDQztBQTZCbkQsU0FBU0EsZ0JBQWdCLEVBQzlCQyxLQUFLLEVBQ0xDLFFBQVEsRUFDUkMsUUFBUSxFQUNSQyxXQUFXLEVBQ1hDLE1BQU0sRUFDTkMsUUFBUSxFQUNSQyxjQUFjLFFBQVEsRUFDdEJDLGNBQWMsUUFBUSxFQUNEO0lBQ3JCLE1BQU0sQ0FBQ0MsV0FBV0MsYUFBYSxHQUFHQyxJQUFBQSxlQUFRLEVBQUNQLGFBQWFILFNBQVM7SUFDakUsTUFBTSxDQUFDVyxVQUFVQyxZQUFZLEdBQUdGLElBQUFBLGVBQVEsRUFBQ1AsYUFBYVUsUUFBUTtJQUM5RCxNQUFNLENBQUNDLFlBQVlDLGNBQWMsR0FBR0wsSUFBQUEsZUFBUSxFQUF3QlAsYUFBYWEsVUFBVTtJQUMzRixNQUFNLENBQUNDLG9CQUFvQkMsc0JBQXNCLEdBQUdSLElBQUFBLGVBQVEsRUFBQztJQUM3RCxNQUFNLENBQUNTLFFBQVFDLFVBQVUsR0FBR1YsSUFBQUEsZUFBUSxFQUF5QixDQUFDO0lBQzlELE1BQU0sQ0FBQ1csY0FBY0MsZ0JBQWdCLEdBQUdaLElBQUFBLGVBQVEsRUFBQztJQUNqRCxNQUFNLENBQUNhLFNBQVNDLFdBQVcsR0FBR2QsSUFBQUEsZUFBUSxFQUFDO0lBQ3ZDLE1BQU1lLFVBQVVDLElBQUFBLGFBQU0sRUFBaUI7SUFDdkMsTUFBTUMsYUFBYUQsSUFBQUEsYUFBTSxFQUFpQjtJQUUxQyxzQ0FBc0M7SUFDdENFLElBQUFBLGdCQUFTLEVBQUM7UUFDUixJQUFJekIsYUFBYTtZQUNmTSxhQUFhTixZQUFZSCxLQUFLO1lBQzlCWSxZQUFZVCxZQUFZVSxJQUFJO1lBQzVCRSxjQUFjWixZQUFZYSxNQUFN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