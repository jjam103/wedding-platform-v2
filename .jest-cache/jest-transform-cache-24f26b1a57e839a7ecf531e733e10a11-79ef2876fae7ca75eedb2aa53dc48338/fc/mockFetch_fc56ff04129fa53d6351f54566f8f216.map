{"version":3,"sources":["/Users/jaron/Desktop/wedding-platform-v2/__tests__/helpers/mockFetch.ts"],"sourcesContent":["/**\n * Helper utilities for mocking fetch in tests\n * \n * This module provides standardized mock implementations for the global fetch API\n * to ensure consistent behavior across all tests.\n */\n\n/**\n * Creates a mock Response object with all required properties\n * \n * @param data - The data to return from response.json()\n * @param options - Optional response configuration\n * @returns A mock Response object\n */\nexport function createMockResponse<T = any>(\n  data: T,\n  options: {\n    ok?: boolean;\n    status?: number;\n    statusText?: string;\n    headers?: Record<string, string>;\n  } = {}\n): Response {\n  const {\n    ok = true,\n    status = 200,\n    statusText = 'OK',\n    headers = {},\n  } = options;\n\n  const headersObj = new Headers(headers);\n\n  return {\n    ok,\n    status,\n    statusText,\n    headers: headersObj,\n    redirected: false,\n    type: 'basic' as ResponseType,\n    url: '',\n    body: null,\n    bodyUsed: false,\n    json: () => Promise.resolve(data),\n    text: () => Promise.resolve(JSON.stringify(data)),\n    blob: () => Promise.resolve(new Blob([JSON.stringify(data)], { type: 'application/json' })),\n    arrayBuffer: () => Promise.resolve(new TextEncoder().encode(JSON.stringify(data)).buffer),\n    formData: () => Promise.resolve(new FormData()),\n    clone: () => createMockResponse(data, options),\n  } as Response;\n}\n\n/**\n * Creates a mock fetch implementation that returns a success response\n * \n * @param data - The data to return from the API\n * @returns A mock fetch function\n */\nexport function mockFetchSuccess<T = any>(data: T) {\n  return jest.fn().mockImplementation(() => \n    Promise.resolve(createMockResponse(data))\n  );\n}\n\n/**\n * Creates a mock fetch implementation that returns an error response\n * \n * @param error - The error to return\n * @param status - HTTP status code (default: 500)\n * @returns A mock fetch function\n */\nexport function mockFetchError(error: { code: string; message: string }, status = 500) {\n  return jest.fn().mockImplementation(() =>\n    Promise.resolve(\n      createMockResponse(\n        { success: false, error },\n        { ok: false, status, statusText: 'Error' }\n      )\n    )\n  );\n}\n\n/**\n * Creates a mock fetch implementation that rejects with a network error\n * \n * @param message - Error message\n * @returns A mock fetch function\n */\nexport function mockFetchNetworkError(message = 'Network error') {\n  return jest.fn().mockImplementation(() =>\n    Promise.reject(new Error(message))\n  );\n}\n\n/**\n * Sets up global.fetch with a mock implementation\n * Call this in beforeEach() to ensure fetch is mocked for all tests\n */\nexport function setupFetchMock() {\n  if (!global.fetch) {\n    global.fetch = jest.fn();\n  }\n}\n\n/**\n * Resets the global.fetch mock\n * Call this in afterEach() to clean up between tests\n */\nexport function resetFetchMock() {\n  if (global.fetch && jest.isMockFunction(global.fetch)) {\n    (global.fetch as jest.Mock).mockReset();\n  }\n}\n\n/**\n * Clears all calls to the global.fetch mock\n * Useful when you want to verify fetch calls in a specific test\n */\nexport function clearFetchMock() {\n  if (global.fetch && jest.isMockFunction(global.fetch)) {\n    (global.fetch as jest.Mock).mockClear();\n  }\n}\n"],"names":["clearFetchMock","createMockResponse","mockFetchError","mockFetchNetworkError","mockFetchSuccess","resetFetchMock","setupFetchMock","data","options","ok","status","statusText","headers","headersObj","Headers","redirected","type","url","body","bodyUsed","json","Promise","resolve","text","JSON","stringify","blob","Blob","arrayBuffer","TextEncoder","encode","buffer","formData","FormData","clone","jest","fn","mockImplementation","error","success","message","reject","Error","global","fetch","isMockFunction","mockReset","mockClear"],"mappings":"AAAA;;;;;CAKC,GAED;;;;;;CAMC;;;;;;;;;;;QAwGeA;eAAAA;;QAvGAC;eAAAA;;QAwDAC;eAAAA;;QAiBAC;eAAAA;;QA9BAC;eAAAA;;QAkDAC;eAAAA;;QAVAC;eAAAA;;;AAnFT,SAASL,mBACdM,IAAO,EACPC,UAKI,CAAC,CAAC;IAEN,MAAM,EACJC,KAAK,IAAI,EACTC,SAAS,GAAG,EACZC,aAAa,IAAI,EACjBC,UAAU,CAAC,CAAC,EACb,GAAGJ;IAEJ,MAAMK,aAAa,IAAIC,QAAQF;IAE/B,OAAO;QACLH;QACAC;QACAC;QACAC,SAASC;QACTE,YAAY;QACZC,MAAM;QACNC,KAAK;QACLC,MAAM;QACNC,UAAU;QACVC,MAAM,IAAMC,QAAQC,OAAO,CAACf;QAC5BgB,MAAM,IAAMF,QAAQC,OAAO,CAACE,KAAKC,SAAS,CAAClB;QAC3CmB,MAAM,IAAML,QAAQC,OAAO,CAAC,IAAIK,KAAK;gBAACH,KAAKC,SAAS,CAAClB;aAAM,EAAE;gBAAES,MAAM;YAAmB;QACxFY,aAAa,IAAMP,QAAQC,OAAO,CAAC,IAAIO,cAAcC,MAAM,CAACN,KAAKC,SAAS,CAAClB,OAAOwB,MAAM;QACxFC,UAAU,IAAMX,QAAQC,OAAO,CAAC,IAAIW;QACpCC,OAAO,IAAMjC,mBAAmBM,MAAMC;IACxC;AACF;AAQO,SAASJ,iBAA0BG,IAAO;IAC/C,OAAO4B,KAAKC,EAAE,GAAGC,kBAAkB,CAAC,IAClChB,QAAQC,OAAO,CAACrB,mBAAmBM;AAEvC;AASO,SAASL,eAAeoC,KAAwC,EAAE5B,SAAS,GAAG;IACnF,OAAOyB,KAAKC,EAAE,GAAGC,kBAAkB,CAAC,IAClChB,QAAQC,OAAO,CACbrB,mBACE;YAAEsC,SAAS;YAAOD;QAAM,GACxB;YAAE7B,IAAI;YAAOC;YAAQC,YAAY;QAAQ;AAIjD;AAQO,SAASR,sBAAsBqC,UAAU,eAAe;IAC7D,OAAOL,KAAKC,EAAE,GAAGC,kBAAkB,CAAC,IAClChB,QAAQoB,MAAM,CAAC,IAAIC,MAAMF;AAE7B;AAMO,SAASlC;IACd,IAAI,CAACqC,OAAOC,KAAK,EAAE;QACjBD,OAAOC,KAAK,GAAGT,KAAKC,EAAE;IACxB;AACF;AAMO,SAAS/B;IACd,IAAIsC,OAAOC,KAAK,IAAIT,KAAKU,cAAc,CAACF,OAAOC,KAAK,GAAG;QACpDD,OAAOC,KAAK,CAAeE,SAAS;IACvC;AACF;AAMO,SAAS9C;IACd,IAAI2C,OAAOC,KAAK,IAAIT,KAAKU,cAAc,CAACF,OAAOC,KAAK,GAAG;QACpDD,OAAOC,KAAK,CAAeG,SAAS;IACvC;AACF"}