1c06e96f28e6be435d08a3f64aed904a
/**
 * Photo Field Name Consistency Regression Tests
 * 
 * Purpose: Prevent regression where components use wrong field name for photo URLs
 * 
 * Background:
 * - Database schema uses 'photo_url' field (not 'url')
 * - All components must consistently use 'photo_url'
 * - API responses must include 'photo_url'
 * - No components should use deprecated 'url' field
 * 
 * This test suite validates:
 * 1. Database schema has photo_url column
 * 2. API responses include photo_url field
 * 3. All photo-related components use photo_url
 * 4. No components use deprecated 'url' field
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _supabasejs = require("@supabase/supabase-js");
const _fs = require("fs");
const _path = require("path");
// Test database connection
const supabase = (0, _supabasejs.createClient)(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY);
describe('Photo Field Name Consistency Regression Tests', ()=>{
    describe('34.9 Database Schema Verification', ()=>{
        it('should have photo_url column in photos table', async ()=>{
            // Query the information schema to verify column exists
            const { data, error } = await supabase.from('photos').select('photo_url').limit(1);
            // Should not error (column exists)
            expect(error).toBeNull();
            // Verify the query structure is correct
            expect(data).toBeDefined();
        });
        it('should not have deprecated url column in photos table', async ()=>{
            // Try to query a non-existent 'url' column
            const { error } = await supabase.from('photos').select('url').limit(1);
            // Should error because 'url' column doesn't exist
            expect(error).not.toBeNull();
            expect(error?.message).toContain('column');
        });
        it('should have photo_url as TEXT NOT NULL in schema', async ()=>{
            // Read the migration file to verify schema definition
            const migrationPath = (0, _path.join)(process.cwd(), 'supabase/migrations/007_create_photos_table.sql');
            const migrationContent = (0, _fs.readFileSync)(migrationPath, 'utf-8');
            // Verify photo_url is defined correctly
            expect(migrationContent).toContain('photo_url TEXT NOT NULL');
            // Verify no 'url' column exists
            expect(migrationContent).not.toMatch(/\burl\s+TEXT/i);
        });
    });
    describe('34.7 API Response Verification', ()=>{
        let testPhotoId;
        beforeAll(async ()=>{
            // Create a test photo for API testing
            const { data: photo, error } = await supabase.from('photos').insert({
                uploader_id: '00000000-0000-0000-0000-000000000000',
                photo_url: 'https://test.example.com/test-photo.jpg',
                storage_type: 'b2',
                page_type: 'memory',
                page_id: '00000000-0000-0000-0000-000000000000',
                caption: 'Test Photo for Field Consistency',
                alt_text: 'Test photo',
                moderation_status: 'approved'
            }).select('id').single();
            if (photo) {
                testPhotoId = photo.id;
            }
        });
        afterAll(async ()=>{
            // Clean up test photo
            if (testPhotoId) {
                await supabase.from('photos').delete().eq('id', testPhotoId);
            }
        });
        it('should return photo_url field in API response', async ()=>{
            if (!testPhotoId) {
                console.warn('Test photo not created, skipping API test');
                return;
            }
            const { data: photo, error } = await supabase.from('photos').select('*').eq('id', testPhotoId).single();
            expect(error).toBeNull();
            expect(photo).toBeDefined();
            expect(photo).toHaveProperty('photo_url');
            expect(typeof photo.photo_url).toBe('string');
        });
        it('should not return deprecated url field in API response', async ()=>{
            if (!testPhotoId) {
                console.warn('Test photo not created, skipping API test');
                return;
            }
            const { data: photo, error } = await supabase.from('photos').select('*').eq('id', testPhotoId).single();
            expect(error).toBeNull();
            expect(photo).toBeDefined();
            expect(photo).not.toHaveProperty('url');
        });
        it('should include photo_url in list responses', async ()=>{
            const { data: photos, error } = await supabase.from('photos').select('id, photo_url, caption').eq('moderation_status', 'approved').limit(5);
            expect(error).toBeNull();
            expect(photos).toBeDefined();
            if (photos && photos.length > 0) {
                photos.forEach((photo)=>{
                    expect(photo).toHaveProperty('photo_url');
                    expect(typeof photo.photo_url).toBe('string');
                    expect(photo).not.toHaveProperty('url');
                });
            }
        });
    });
    describe('34.2 PhotoGallery Component Verification', ()=>{
        it('should use photo_url field in PhotoGallery component', ()=>{
            const componentPath = (0, _path.join)(process.cwd(), 'components/guest/PhotoGallery.tsx');
            const componentContent = (0, _fs.readFileSync)(componentPath, 'utf-8');
            // Verify photo_url is used in interface
            expect(componentContent).toContain('photo_url: string');
            // Verify photo_url is used in Image src
            expect(componentContent).toContain('src={photo.photo_url}');
            expect(componentContent).toContain('src={currentPhoto.photo_url}');
            // Verify no deprecated 'url' field is used
            expect(componentContent).not.toMatch(/photo\.url[^_]/);
            expect(componentContent).not.toMatch(/currentPhoto\.url[^_]/);
        });
        it('should define Photo interface with photo_url', ()=>{
            const componentPath = (0, _path.join)(process.cwd(), 'components/guest/PhotoGallery.tsx');
            const componentContent = (0, _fs.readFileSync)(componentPath, 'utf-8');
            // Verify interface definition
            const interfaceMatch = componentContent.match(/interface Photo \{[^}]+\}/s);
            expect(interfaceMatch).toBeTruthy();
            if (interfaceMatch) {
                const interfaceContent = interfaceMatch[0];
                expect(interfaceContent).toContain('photo_url: string');
                expect(interfaceContent).not.toContain('url: string');
            }
        });
    });
    describe('34.4 PhotoPicker Component Verification', ()=>{
        it('should use photo_url field in PhotoPicker component', ()=>{
            const componentPath = (0, _path.join)(process.cwd(), 'components/admin/PhotoPicker.tsx');
            const componentContent = (0, _fs.readFileSync)(componentPath, 'utf-8');
            // Verify photo_url is used in interface
            expect(componentContent).toContain('photo_url: string');
            // Verify photo_url is used in img src
            expect(componentContent).toContain('src={photo.photo_url}');
            // Verify no deprecated 'url' field is used
            expect(componentContent).not.toMatch(/photo\.url[^_]/);
        });
        it('should display selected photos using photo_url', ()=>{
            const componentPath = (0, _path.join)(process.cwd(), 'components/admin/PhotoPicker.tsx');
            const componentContent = (0, _fs.readFileSync)(componentPath, 'utf-8');
            // Verify selected photos section uses photo_url
            const selectedPhotosSection = componentContent.match(/Selected Photos[\s\S]*?<\/div>/);
            expect(selectedPhotosSection).toBeTruthy();
            // Verify photo_url is used in the selected photos display
            expect(componentContent).toContain('src={photo.photo_url}');
        });
    });
    describe('34.3 PhotoGalleryPreview Component Verification', ()=>{
        it('should use photo_url field if PhotoGalleryPreview component exists', ()=>{
            const componentPath = (0, _path.join)(process.cwd(), 'components/admin/PhotoGalleryPreview.tsx');
            try {
                const componentContent = (0, _fs.readFileSync)(componentPath, 'utf-8');
                // Verify photo_url is used
                expect(componentContent).toContain('photo_url');
                // Verify no deprecated 'url' field is used
                expect(componentContent).not.toMatch(/photo\.url[^_]/);
            } catch (error) {
                // Component might not exist yet, which is okay
                console.warn('PhotoGalleryPreview component not found, skipping test');
            }
        });
    });
    describe('34.6 SectionRenderer Component Verification', ()=>{
        it('should use photo_url field in SectionRenderer component', ()=>{
            const componentPath = (0, _path.join)(process.cwd(), 'components/guest/SectionRenderer.tsx');
            const componentContent = (0, _fs.readFileSync)(componentPath, 'utf-8');
            // Verify PhotoGallery is used (which uses photo_url)
            expect(componentContent).toContain('PhotoGallery');
            expect(componentContent).toContain('photoIds={column.content_data?.photo_ids || []}');
        // SectionRenderer delegates to PhotoGallery, so it indirectly uses photo_url
        // No direct photo_url usage expected in SectionRenderer
        });
    });
    describe('34.5 RichTextEditor Component Verification', ()=>{
        it('should use photo_url field if RichTextEditor handles photos', ()=>{
            const componentPath = (0, _path.join)(process.cwd(), 'components/admin/RichTextEditor.tsx');
            try {
                const componentContent = (0, _fs.readFileSync)(componentPath, 'utf-8');
                // If RichTextEditor handles photos, it should use photo_url
                if (componentContent.includes('photo') || componentContent.includes('image')) {
                    // Check for photo_url usage
                    const hasPhotoUrl = componentContent.includes('photo_url');
                    const hasDeprecatedUrl = componentContent.match(/photo\.url[^_]/);
                    if (hasPhotoUrl || hasDeprecatedUrl) {
                        expect(hasPhotoUrl).toBe(true);
                        expect(hasDeprecatedUrl).toBeFalsy();
                    }
                }
            } catch (error) {
                // Component might not exist yet, which is okay
                console.warn('RichTextEditor component not found, skipping test');
            }
        });
    });
    describe('34.8 No Deprecated url Field Usage', ()=>{
        const componentsToCheck = [
            'components/guest/PhotoGallery.tsx',
            'components/admin/PhotoPicker.tsx',
            'components/guest/SectionRenderer.tsx'
        ];
        componentsToCheck.forEach((componentPath)=>{
            it(`should not use deprecated url field in ${componentPath}`, ()=>{
                const fullPath = (0, _path.join)(process.cwd(), componentPath);
                try {
                    const componentContent = (0, _fs.readFileSync)(fullPath, 'utf-8');
                    // Check for deprecated patterns
                    const deprecatedPatterns = [
                        /photo\.url[^_]/g,
                        /currentPhoto\.url[^_]/g,
                        /\burl:\s*string/g
                    ];
                    deprecatedPatterns.forEach((pattern)=>{
                        const matches = componentContent.match(pattern);
                        if (matches) {
                            console.error(`Found deprecated pattern in ${componentPath}:`, matches);
                        }
                        expect(matches).toBeNull();
                    });
                } catch (error) {
                    // Component might not exist, skip
                    console.warn(`Component ${componentPath} not found, skipping test`);
                }
            });
        });
    });
    describe('34.10 Service Layer Verification', ()=>{
        it('should use photo_url field in photoService', ()=>{
            const servicePath = (0, _path.join)(process.cwd(), 'services/photoService.ts');
            try {
                const serviceContent = (0, _fs.readFileSync)(servicePath, 'utf-8');
                // Verify photo_url is used in service
                expect(serviceContent).toContain('photo_url');
                // Check for any deprecated 'url' field usage
                // Allow 'url' in variable names like 'photoUrl' or 'cdnUrl'
                const deprecatedMatches = serviceContent.match(/\burl:\s*string/g);
                if (deprecatedMatches) {
                    // Filter out valid uses like 'photo_url' or 'cdnUrl'
                    const invalidMatches = deprecatedMatches.filter((match)=>!match.includes('photo_url') && !match.includes('cdnUrl') && !match.includes('storageUrl'));
                    expect(invalidMatches.length).toBe(0);
                }
            } catch (error) {
                console.warn('photoService not found, skipping test');
            }
        });
    });
    describe('Integration: End-to-End Field Consistency', ()=>{
        it('should maintain photo_url consistency from database to UI', async ()=>{
            // This test verifies the complete data flow:
            // Database (photo_url) → API → Service → Component
            // 1. Verify database has photo_url
            const { data: dbPhoto, error: dbError } = await supabase.from('photos').select('photo_url').eq('moderation_status', 'approved').limit(1).single();
            if (dbError && dbError.code !== 'PGRST116') {
                // PGRST116 is "no rows returned", which is okay
                expect(dbError).toBeNull();
            }
            if (dbPhoto) {
                // 2. Verify photo_url is a valid string
                expect(dbPhoto).toHaveProperty('photo_url');
                expect(typeof dbPhoto.photo_url).toBe('string');
                expect(dbPhoto.photo_url.length).toBeGreaterThan(0);
                // 3. Verify no 'url' field exists
                expect(dbPhoto).not.toHaveProperty('url');
            }
        });
        it('should use consistent field naming across all photo-related files', ()=>{
            const filesToCheck = [
                'components/guest/PhotoGallery.tsx',
                'components/admin/PhotoPicker.tsx',
                'components/guest/SectionRenderer.tsx',
                'supabase/migrations/007_create_photos_table.sql'
            ];
            const results = filesToCheck.map((filePath)=>{
                const fullPath = (0, _path.join)(process.cwd(), filePath);
                try {
                    const content = (0, _fs.readFileSync)(fullPath, 'utf-8');
                    return {
                        file: filePath,
                        hasPhotoUrl: content.includes('photo_url'),
                        hasDeprecatedUrl: content.match(/\burl\s*:/g) !== null
                    };
                } catch (error) {
                    return {
                        file: filePath,
                        hasPhotoUrl: false,
                        hasDeprecatedUrl: false,
                        error: 'File not found'
                    };
                }
            });
            // All files should use photo_url
            results.forEach((result)=>{
                if (!result.error) {
                    expect(result.hasPhotoUrl).toBe(true);
                }
            });
            // Log results for debugging
            console.log('Field consistency check results:', results);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXJvbi9EZXNrdG9wL3dlZGRpbmctcGxhdGZvcm0tdjIvX190ZXN0c19fL3JlZ3Jlc3Npb24vcGhvdG9GaWVsZENvbnNpc3RlbmN5LnJlZ3Jlc3Npb24udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBob3RvIEZpZWxkIE5hbWUgQ29uc2lzdGVuY3kgUmVncmVzc2lvbiBUZXN0c1xuICogXG4gKiBQdXJwb3NlOiBQcmV2ZW50IHJlZ3Jlc3Npb24gd2hlcmUgY29tcG9uZW50cyB1c2Ugd3JvbmcgZmllbGQgbmFtZSBmb3IgcGhvdG8gVVJMc1xuICogXG4gKiBCYWNrZ3JvdW5kOlxuICogLSBEYXRhYmFzZSBzY2hlbWEgdXNlcyAncGhvdG9fdXJsJyBmaWVsZCAobm90ICd1cmwnKVxuICogLSBBbGwgY29tcG9uZW50cyBtdXN0IGNvbnNpc3RlbnRseSB1c2UgJ3Bob3RvX3VybCdcbiAqIC0gQVBJIHJlc3BvbnNlcyBtdXN0IGluY2x1ZGUgJ3Bob3RvX3VybCdcbiAqIC0gTm8gY29tcG9uZW50cyBzaG91bGQgdXNlIGRlcHJlY2F0ZWQgJ3VybCcgZmllbGRcbiAqIFxuICogVGhpcyB0ZXN0IHN1aXRlIHZhbGlkYXRlczpcbiAqIDEuIERhdGFiYXNlIHNjaGVtYSBoYXMgcGhvdG9fdXJsIGNvbHVtblxuICogMi4gQVBJIHJlc3BvbnNlcyBpbmNsdWRlIHBob3RvX3VybCBmaWVsZFxuICogMy4gQWxsIHBob3RvLXJlbGF0ZWQgY29tcG9uZW50cyB1c2UgcGhvdG9fdXJsXG4gKiA0LiBObyBjb21wb25lbnRzIHVzZSBkZXByZWNhdGVkICd1cmwnIGZpZWxkXG4gKi9cblxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcbmltcG9ydCB7IHJlYWRGaWxlU3luYyB9IGZyb20gJ2ZzJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcblxuLy8gVGVzdCBkYXRhYmFzZSBjb25uZWN0aW9uXG5jb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChcbiAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMISxcbiAgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSFcbik7XG5cbmRlc2NyaWJlKCdQaG90byBGaWVsZCBOYW1lIENvbnNpc3RlbmN5IFJlZ3Jlc3Npb24gVGVzdHMnLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCczNC45IERhdGFiYXNlIFNjaGVtYSBWZXJpZmljYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYXZlIHBob3RvX3VybCBjb2x1bW4gaW4gcGhvdG9zIHRhYmxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gUXVlcnkgdGhlIGluZm9ybWF0aW9uIHNjaGVtYSB0byB2ZXJpZnkgY29sdW1uIGV4aXN0c1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3Bob3RvcycpXG4gICAgICAgIC5zZWxlY3QoJ3Bob3RvX3VybCcpXG4gICAgICAgIC5saW1pdCgxKTtcblxuICAgICAgLy8gU2hvdWxkIG5vdCBlcnJvciAoY29sdW1uIGV4aXN0cylcbiAgICAgIGV4cGVjdChlcnJvcikudG9CZU51bGwoKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IHRoZSBxdWVyeSBzdHJ1Y3R1cmUgaXMgY29ycmVjdFxuICAgICAgZXhwZWN0KGRhdGEpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCBoYXZlIGRlcHJlY2F0ZWQgdXJsIGNvbHVtbiBpbiBwaG90b3MgdGFibGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBUcnkgdG8gcXVlcnkgYSBub24tZXhpc3RlbnQgJ3VybCcgY29sdW1uXG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgncGhvdG9zJylcbiAgICAgICAgLnNlbGVjdCgndXJsJylcbiAgICAgICAgLmxpbWl0KDEpO1xuXG4gICAgICAvLyBTaG91bGQgZXJyb3IgYmVjYXVzZSAndXJsJyBjb2x1bW4gZG9lc24ndCBleGlzdFxuICAgICAgZXhwZWN0KGVycm9yKS5ub3QudG9CZU51bGwoKTtcbiAgICAgIGV4cGVjdChlcnJvcj8ubWVzc2FnZSkudG9Db250YWluKCdjb2x1bW4nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBwaG90b191cmwgYXMgVEVYVCBOT1QgTlVMTCBpbiBzY2hlbWEnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBSZWFkIHRoZSBtaWdyYXRpb24gZmlsZSB0byB2ZXJpZnkgc2NoZW1hIGRlZmluaXRpb25cbiAgICAgIGNvbnN0IG1pZ3JhdGlvblBhdGggPSBqb2luKHByb2Nlc3MuY3dkKCksICdzdXBhYmFzZS9taWdyYXRpb25zLzAwN19jcmVhdGVfcGhvdG9zX3RhYmxlLnNxbCcpO1xuICAgICAgY29uc3QgbWlncmF0aW9uQ29udGVudCA9IHJlYWRGaWxlU3luYyhtaWdyYXRpb25QYXRoLCAndXRmLTgnKTtcblxuICAgICAgLy8gVmVyaWZ5IHBob3RvX3VybCBpcyBkZWZpbmVkIGNvcnJlY3RseVxuICAgICAgZXhwZWN0KG1pZ3JhdGlvbkNvbnRlbnQpLnRvQ29udGFpbigncGhvdG9fdXJsIFRFWFQgTk9UIE5VTEwnKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IG5vICd1cmwnIGNvbHVtbiBleGlzdHNcbiAgICAgIGV4cGVjdChtaWdyYXRpb25Db250ZW50KS5ub3QudG9NYXRjaCgvXFxidXJsXFxzK1RFWFQvaSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCczNC43IEFQSSBSZXNwb25zZSBWZXJpZmljYXRpb24nLCAoKSA9PiB7XG4gICAgbGV0IHRlc3RQaG90b0lkOiBzdHJpbmc7XG5cbiAgICBiZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGEgdGVzdCBwaG90byBmb3IgQVBJIHRlc3RpbmdcbiAgICAgIGNvbnN0IHsgZGF0YTogcGhvdG8sIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgncGhvdG9zJylcbiAgICAgICAgLmluc2VydCh7XG4gICAgICAgICAgdXBsb2FkZXJfaWQ6ICcwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAnLCAvLyBUZXN0IHVzZXJcbiAgICAgICAgICBwaG90b191cmw6ICdodHRwczovL3Rlc3QuZXhhbXBsZS5jb20vdGVzdC1waG90by5qcGcnLFxuICAgICAgICAgIHN0b3JhZ2VfdHlwZTogJ2IyJyxcbiAgICAgICAgICBwYWdlX3R5cGU6ICdtZW1vcnknLFxuICAgICAgICAgIHBhZ2VfaWQ6ICcwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAnLFxuICAgICAgICAgIGNhcHRpb246ICdUZXN0IFBob3RvIGZvciBGaWVsZCBDb25zaXN0ZW5jeScsXG4gICAgICAgICAgYWx0X3RleHQ6ICdUZXN0IHBob3RvJyxcbiAgICAgICAgICBtb2RlcmF0aW9uX3N0YXR1czogJ2FwcHJvdmVkJyxcbiAgICAgICAgfSlcbiAgICAgICAgLnNlbGVjdCgnaWQnKVxuICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgIGlmIChwaG90bykge1xuICAgICAgICB0ZXN0UGhvdG9JZCA9IHBob3RvLmlkO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgYWZ0ZXJBbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ2xlYW4gdXAgdGVzdCBwaG90b1xuICAgICAgaWYgKHRlc3RQaG90b0lkKSB7XG4gICAgICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oJ3Bob3RvcycpLmRlbGV0ZSgpLmVxKCdpZCcsIHRlc3RQaG90b0lkKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHBob3RvX3VybCBmaWVsZCBpbiBBUEkgcmVzcG9uc2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoIXRlc3RQaG90b0lkKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignVGVzdCBwaG90byBub3QgY3JlYXRlZCwgc2tpcHBpbmcgQVBJIHRlc3QnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB7IGRhdGE6IHBob3RvLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3Bob3RvcycpXG4gICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAuZXEoJ2lkJywgdGVzdFBob3RvSWQpXG4gICAgICAgIC5zaW5nbGUoKTtcblxuICAgICAgZXhwZWN0KGVycm9yKS50b0JlTnVsbCgpO1xuICAgICAgZXhwZWN0KHBob3RvKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHBob3RvKS50b0hhdmVQcm9wZXJ0eSgncGhvdG9fdXJsJyk7XG4gICAgICBleHBlY3QodHlwZW9mIHBob3RvLnBob3RvX3VybCkudG9CZSgnc3RyaW5nJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCByZXR1cm4gZGVwcmVjYXRlZCB1cmwgZmllbGQgaW4gQVBJIHJlc3BvbnNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKCF0ZXN0UGhvdG9JZCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1Rlc3QgcGhvdG8gbm90IGNyZWF0ZWQsIHNraXBwaW5nIEFQSSB0ZXN0Jyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBkYXRhOiBwaG90bywgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdwaG90b3MnKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLmVxKCdpZCcsIHRlc3RQaG90b0lkKVxuICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgIGV4cGVjdChlcnJvcikudG9CZU51bGwoKTtcbiAgICAgIGV4cGVjdChwaG90bykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChwaG90bykubm90LnRvSGF2ZVByb3BlcnR5KCd1cmwnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5jbHVkZSBwaG90b191cmwgaW4gbGlzdCByZXNwb25zZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IGRhdGE6IHBob3RvcywgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdwaG90b3MnKVxuICAgICAgICAuc2VsZWN0KCdpZCwgcGhvdG9fdXJsLCBjYXB0aW9uJylcbiAgICAgICAgLmVxKCdtb2RlcmF0aW9uX3N0YXR1cycsICdhcHByb3ZlZCcpXG4gICAgICAgIC5saW1pdCg1KTtcblxuICAgICAgZXhwZWN0KGVycm9yKS50b0JlTnVsbCgpO1xuICAgICAgZXhwZWN0KHBob3RvcykudG9CZURlZmluZWQoKTtcbiAgICAgIFxuICAgICAgaWYgKHBob3RvcyAmJiBwaG90b3MubGVuZ3RoID4gMCkge1xuICAgICAgICBwaG90b3MuZm9yRWFjaChwaG90byA9PiB7XG4gICAgICAgICAgZXhwZWN0KHBob3RvKS50b0hhdmVQcm9wZXJ0eSgncGhvdG9fdXJsJyk7XG4gICAgICAgICAgZXhwZWN0KHR5cGVvZiBwaG90by5waG90b191cmwpLnRvQmUoJ3N0cmluZycpO1xuICAgICAgICAgIGV4cGVjdChwaG90bykubm90LnRvSGF2ZVByb3BlcnR5KCd1cmwnKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCczNC4yIFBob3RvR2FsbGVyeSBDb21wb25lbnQgVmVyaWZpY2F0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdXNlIHBob3RvX3VybCBmaWVsZCBpbiBQaG90b0dhbGxlcnkgY29tcG9uZW50JywgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcG9uZW50UGF0aCA9IGpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2NvbXBvbmVudHMvZ3Vlc3QvUGhvdG9HYWxsZXJ5LnRzeCcpO1xuICAgICAgY29uc3QgY29tcG9uZW50Q29udGVudCA9IHJlYWRGaWxlU3luYyhjb21wb25lbnRQYXRoLCAndXRmLTgnKTtcblxuICAgICAgLy8gVmVyaWZ5IHBob3RvX3VybCBpcyB1c2VkIGluIGludGVyZmFjZVxuICAgICAgZXhwZWN0KGNvbXBvbmVudENvbnRlbnQpLnRvQ29udGFpbigncGhvdG9fdXJsOiBzdHJpbmcnKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IHBob3RvX3VybCBpcyB1c2VkIGluIEltYWdlIHNyY1xuICAgICAgZXhwZWN0KGNvbXBvbmVudENvbnRlbnQpLnRvQ29udGFpbignc3JjPXtwaG90by5waG90b191cmx9Jyk7XG4gICAgICBleHBlY3QoY29tcG9uZW50Q29udGVudCkudG9Db250YWluKCdzcmM9e2N1cnJlbnRQaG90by5waG90b191cmx9Jyk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBubyBkZXByZWNhdGVkICd1cmwnIGZpZWxkIGlzIHVzZWRcbiAgICAgIGV4cGVjdChjb21wb25lbnRDb250ZW50KS5ub3QudG9NYXRjaCgvcGhvdG9cXC51cmxbXl9dLyk7XG4gICAgICBleHBlY3QoY29tcG9uZW50Q29udGVudCkubm90LnRvTWF0Y2goL2N1cnJlbnRQaG90b1xcLnVybFteX10vKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGVmaW5lIFBob3RvIGludGVyZmFjZSB3aXRoIHBob3RvX3VybCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudFBhdGggPSBqb2luKHByb2Nlc3MuY3dkKCksICdjb21wb25lbnRzL2d1ZXN0L1Bob3RvR2FsbGVyeS50c3gnKTtcbiAgICAgIGNvbnN0IGNvbXBvbmVudENvbnRlbnQgPSByZWFkRmlsZVN5bmMoY29tcG9uZW50UGF0aCwgJ3V0Zi04Jyk7XG5cbiAgICAgIC8vIFZlcmlmeSBpbnRlcmZhY2UgZGVmaW5pdGlvblxuICAgICAgY29uc3QgaW50ZXJmYWNlTWF0Y2ggPSBjb21wb25lbnRDb250ZW50Lm1hdGNoKC9pbnRlcmZhY2UgUGhvdG8gXFx7W159XStcXH0vcyk7XG4gICAgICBleHBlY3QoaW50ZXJmYWNlTWF0Y2gpLnRvQmVUcnV0aHkoKTtcbiAgICAgIFxuICAgICAgaWYgKGludGVyZmFjZU1hdGNoKSB7XG4gICAgICAgIGNvbnN0IGludGVyZmFjZUNvbnRlbnQgPSBpbnRlcmZhY2VNYXRjaFswXTtcbiAgICAgICAgZXhwZWN0KGludGVyZmFjZUNvbnRlbnQpLnRvQ29udGFpbigncGhvdG9fdXJsOiBzdHJpbmcnKTtcbiAgICAgICAgZXhwZWN0KGludGVyZmFjZUNvbnRlbnQpLm5vdC50b0NvbnRhaW4oJ3VybDogc3RyaW5nJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCczNC40IFBob3RvUGlja2VyIENvbXBvbmVudCBWZXJpZmljYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB1c2UgcGhvdG9fdXJsIGZpZWxkIGluIFBob3RvUGlja2VyIGNvbXBvbmVudCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudFBhdGggPSBqb2luKHByb2Nlc3MuY3dkKCksICdjb21wb25lbnRzL2FkbWluL1Bob3RvUGlja2VyLnRzeCcpO1xuICAgICAgY29uc3QgY29tcG9uZW50Q29udGVudCA9IHJlYWRGaWxlU3luYyhjb21wb25lbnRQYXRoLCAndXRmLTgnKTtcblxuICAgICAgLy8gVmVyaWZ5IHBob3RvX3VybCBpcyB1c2VkIGluIGludGVyZmFjZVxuICAgICAgZXhwZWN0KGNvbXBvbmVudENvbnRlbnQpLnRvQ29udGFpbigncGhvdG9fdXJsOiBzdHJpbmcnKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IHBob3RvX3VybCBpcyB1c2VkIGluIGltZyBzcmNcbiAgICAgIGV4cGVjdChjb21wb25lbnRDb250ZW50KS50b0NvbnRhaW4oJ3NyYz17cGhvdG8ucGhvdG9fdXJsfScpO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgbm8gZGVwcmVjYXRlZCAndXJsJyBmaWVsZCBpcyB1c2VkXG4gICAgICBleHBlY3QoY29tcG9uZW50Q29udGVudCkubm90LnRvTWF0Y2goL3Bob3RvXFwudXJsW15fXS8pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHNlbGVjdGVkIHBob3RvcyB1c2luZyBwaG90b191cmwnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnRQYXRoID0gam9pbihwcm9jZXNzLmN3ZCgpLCAnY29tcG9uZW50cy9hZG1pbi9QaG90b1BpY2tlci50c3gnKTtcbiAgICAgIGNvbnN0IGNvbXBvbmVudENvbnRlbnQgPSByZWFkRmlsZVN5bmMoY29tcG9uZW50UGF0aCwgJ3V0Zi04Jyk7XG5cbiAgICAgIC8vIFZlcmlmeSBzZWxlY3RlZCBwaG90b3Mgc2VjdGlvbiB1c2VzIHBob3RvX3VybFxuICAgICAgY29uc3Qgc2VsZWN0ZWRQaG90b3NTZWN0aW9uID0gY29tcG9uZW50Q29udGVudC5tYXRjaCgvU2VsZWN0ZWQgUGhvdG9zW1xcc1xcU10qPzxcXC9kaXY+Lyk7XG4gICAgICBleHBlY3Qoc2VsZWN0ZWRQaG90b3NTZWN0aW9uKS50b0JlVHJ1dGh5KCk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBwaG90b191cmwgaXMgdXNlZCBpbiB0aGUgc2VsZWN0ZWQgcGhvdG9zIGRpc3BsYXlcbiAgICAgIGV4cGVjdChjb21wb25lbnRDb250ZW50KS50b0NvbnRhaW4oJ3NyYz17cGhvdG8ucGhvdG9fdXJsfScpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnMzQuMyBQaG90b0dhbGxlcnlQcmV2aWV3IENvbXBvbmVudCBWZXJpZmljYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB1c2UgcGhvdG9fdXJsIGZpZWxkIGlmIFBob3RvR2FsbGVyeVByZXZpZXcgY29tcG9uZW50IGV4aXN0cycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudFBhdGggPSBqb2luKHByb2Nlc3MuY3dkKCksICdjb21wb25lbnRzL2FkbWluL1Bob3RvR2FsbGVyeVByZXZpZXcudHN4Jyk7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudENvbnRlbnQgPSByZWFkRmlsZVN5bmMoY29tcG9uZW50UGF0aCwgJ3V0Zi04Jyk7XG5cbiAgICAgICAgLy8gVmVyaWZ5IHBob3RvX3VybCBpcyB1c2VkXG4gICAgICAgIGV4cGVjdChjb21wb25lbnRDb250ZW50KS50b0NvbnRhaW4oJ3Bob3RvX3VybCcpO1xuICAgICAgICBcbiAgICAgICAgLy8gVmVyaWZ5IG5vIGRlcHJlY2F0ZWQgJ3VybCcgZmllbGQgaXMgdXNlZFxuICAgICAgICBleHBlY3QoY29tcG9uZW50Q29udGVudCkubm90LnRvTWF0Y2goL3Bob3RvXFwudXJsW15fXS8pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gQ29tcG9uZW50IG1pZ2h0IG5vdCBleGlzdCB5ZXQsIHdoaWNoIGlzIG9rYXlcbiAgICAgICAgY29uc29sZS53YXJuKCdQaG90b0dhbGxlcnlQcmV2aWV3IGNvbXBvbmVudCBub3QgZm91bmQsIHNraXBwaW5nIHRlc3QnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJzM0LjYgU2VjdGlvblJlbmRlcmVyIENvbXBvbmVudCBWZXJpZmljYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB1c2UgcGhvdG9fdXJsIGZpZWxkIGluIFNlY3Rpb25SZW5kZXJlciBjb21wb25lbnQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnRQYXRoID0gam9pbihwcm9jZXNzLmN3ZCgpLCAnY29tcG9uZW50cy9ndWVzdC9TZWN0aW9uUmVuZGVyZXIudHN4Jyk7XG4gICAgICBjb25zdCBjb21wb25lbnRDb250ZW50ID0gcmVhZEZpbGVTeW5jKGNvbXBvbmVudFBhdGgsICd1dGYtOCcpO1xuXG4gICAgICAvLyBWZXJpZnkgUGhvdG9HYWxsZXJ5IGlzIHVzZWQgKHdoaWNoIHVzZXMgcGhvdG9fdXJsKVxuICAgICAgZXhwZWN0KGNvbXBvbmVudENvbnRlbnQpLnRvQ29udGFpbignUGhvdG9HYWxsZXJ5Jyk7XG4gICAgICBleHBlY3QoY29tcG9uZW50Q29udGVudCkudG9Db250YWluKCdwaG90b0lkcz17Y29sdW1uLmNvbnRlbnRfZGF0YT8ucGhvdG9faWRzIHx8IFtdfScpO1xuICAgICAgXG4gICAgICAvLyBTZWN0aW9uUmVuZGVyZXIgZGVsZWdhdGVzIHRvIFBob3RvR2FsbGVyeSwgc28gaXQgaW5kaXJlY3RseSB1c2VzIHBob3RvX3VybFxuICAgICAgLy8gTm8gZGlyZWN0IHBob3RvX3VybCB1c2FnZSBleHBlY3RlZCBpbiBTZWN0aW9uUmVuZGVyZXJcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJzM0LjUgUmljaFRleHRFZGl0b3IgQ29tcG9uZW50IFZlcmlmaWNhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHVzZSBwaG90b191cmwgZmllbGQgaWYgUmljaFRleHRFZGl0b3IgaGFuZGxlcyBwaG90b3MnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnRQYXRoID0gam9pbihwcm9jZXNzLmN3ZCgpLCAnY29tcG9uZW50cy9hZG1pbi9SaWNoVGV4dEVkaXRvci50c3gnKTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50Q29udGVudCA9IHJlYWRGaWxlU3luYyhjb21wb25lbnRQYXRoLCAndXRmLTgnKTtcblxuICAgICAgICAvLyBJZiBSaWNoVGV4dEVkaXRvciBoYW5kbGVzIHBob3RvcywgaXQgc2hvdWxkIHVzZSBwaG90b191cmxcbiAgICAgICAgaWYgKGNvbXBvbmVudENvbnRlbnQuaW5jbHVkZXMoJ3Bob3RvJykgfHwgY29tcG9uZW50Q29udGVudC5pbmNsdWRlcygnaW1hZ2UnKSkge1xuICAgICAgICAgIC8vIENoZWNrIGZvciBwaG90b191cmwgdXNhZ2VcbiAgICAgICAgICBjb25zdCBoYXNQaG90b1VybCA9IGNvbXBvbmVudENvbnRlbnQuaW5jbHVkZXMoJ3Bob3RvX3VybCcpO1xuICAgICAgICAgIGNvbnN0IGhhc0RlcHJlY2F0ZWRVcmwgPSBjb21wb25lbnRDb250ZW50Lm1hdGNoKC9waG90b1xcLnVybFteX10vKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoaGFzUGhvdG9VcmwgfHwgaGFzRGVwcmVjYXRlZFVybCkge1xuICAgICAgICAgICAgZXhwZWN0KGhhc1Bob3RvVXJsKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KGhhc0RlcHJlY2F0ZWRVcmwpLnRvQmVGYWxzeSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gQ29tcG9uZW50IG1pZ2h0IG5vdCBleGlzdCB5ZXQsIHdoaWNoIGlzIG9rYXlcbiAgICAgICAgY29uc29sZS53YXJuKCdSaWNoVGV4dEVkaXRvciBjb21wb25lbnQgbm90IGZvdW5kLCBza2lwcGluZyB0ZXN0Jyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCczNC44IE5vIERlcHJlY2F0ZWQgdXJsIEZpZWxkIFVzYWdlJywgKCkgPT4ge1xuICAgIGNvbnN0IGNvbXBvbmVudHNUb0NoZWNrID0gW1xuICAgICAgJ2NvbXBvbmVudHMvZ3Vlc3QvUGhvdG9HYWxsZXJ5LnRzeCcsXG4gICAgICAnY29tcG9uZW50cy9hZG1pbi9QaG90b1BpY2tlci50c3gnLFxuICAgICAgJ2NvbXBvbmVudHMvZ3Vlc3QvU2VjdGlvblJlbmRlcmVyLnRzeCcsXG4gICAgXTtcblxuICAgIGNvbXBvbmVudHNUb0NoZWNrLmZvckVhY2goY29tcG9uZW50UGF0aCA9PiB7XG4gICAgICBpdChgc2hvdWxkIG5vdCB1c2UgZGVwcmVjYXRlZCB1cmwgZmllbGQgaW4gJHtjb21wb25lbnRQYXRofWAsICgpID0+IHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBqb2luKHByb2Nlc3MuY3dkKCksIGNvbXBvbmVudFBhdGgpO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBjb21wb25lbnRDb250ZW50ID0gcmVhZEZpbGVTeW5jKGZ1bGxQYXRoLCAndXRmLTgnKTtcblxuICAgICAgICAgIC8vIENoZWNrIGZvciBkZXByZWNhdGVkIHBhdHRlcm5zXG4gICAgICAgICAgY29uc3QgZGVwcmVjYXRlZFBhdHRlcm5zID0gW1xuICAgICAgICAgICAgL3Bob3RvXFwudXJsW15fXS9nLCAgLy8gcGhvdG8udXJsIChub3QgcGhvdG8ucGhvdG9fdXJsKVxuICAgICAgICAgICAgL2N1cnJlbnRQaG90b1xcLnVybFteX10vZywgIC8vIGN1cnJlbnRQaG90by51cmxcbiAgICAgICAgICAgIC9cXGJ1cmw6XFxzKnN0cmluZy9nLCAgLy8gdXJsOiBzdHJpbmcgaW4gaW50ZXJmYWNlIChzaG91bGQgYmUgcGhvdG9fdXJsKVxuICAgICAgICAgIF07XG5cbiAgICAgICAgICBkZXByZWNhdGVkUGF0dGVybnMuZm9yRWFjaChwYXR0ZXJuID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBjb21wb25lbnRDb250ZW50Lm1hdGNoKHBhdHRlcm4pO1xuICAgICAgICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRm91bmQgZGVwcmVjYXRlZCBwYXR0ZXJuIGluICR7Y29tcG9uZW50UGF0aH06YCwgbWF0Y2hlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBleHBlY3QobWF0Y2hlcykudG9CZU51bGwoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAvLyBDb21wb25lbnQgbWlnaHQgbm90IGV4aXN0LCBza2lwXG4gICAgICAgICAgY29uc29sZS53YXJuKGBDb21wb25lbnQgJHtjb21wb25lbnRQYXRofSBub3QgZm91bmQsIHNraXBwaW5nIHRlc3RgKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCczNC4xMCBTZXJ2aWNlIExheWVyIFZlcmlmaWNhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHVzZSBwaG90b191cmwgZmllbGQgaW4gcGhvdG9TZXJ2aWNlJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZVBhdGggPSBqb2luKHByb2Nlc3MuY3dkKCksICdzZXJ2aWNlcy9waG90b1NlcnZpY2UudHMnKTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc2VydmljZUNvbnRlbnQgPSByZWFkRmlsZVN5bmMoc2VydmljZVBhdGgsICd1dGYtOCcpO1xuXG4gICAgICAgIC8vIFZlcmlmeSBwaG90b191cmwgaXMgdXNlZCBpbiBzZXJ2aWNlXG4gICAgICAgIGV4cGVjdChzZXJ2aWNlQ29udGVudCkudG9Db250YWluKCdwaG90b191cmwnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGZvciBhbnkgZGVwcmVjYXRlZCAndXJsJyBmaWVsZCB1c2FnZVxuICAgICAgICAvLyBBbGxvdyAndXJsJyBpbiB2YXJpYWJsZSBuYW1lcyBsaWtlICdwaG90b1VybCcgb3IgJ2NkblVybCdcbiAgICAgICAgY29uc3QgZGVwcmVjYXRlZE1hdGNoZXMgPSBzZXJ2aWNlQ29udGVudC5tYXRjaCgvXFxidXJsOlxccypzdHJpbmcvZyk7XG4gICAgICAgIGlmIChkZXByZWNhdGVkTWF0Y2hlcykge1xuICAgICAgICAgIC8vIEZpbHRlciBvdXQgdmFsaWQgdXNlcyBsaWtlICdwaG90b191cmwnIG9yICdjZG5VcmwnXG4gICAgICAgICAgY29uc3QgaW52YWxpZE1hdGNoZXMgPSBkZXByZWNhdGVkTWF0Y2hlcy5maWx0ZXIobWF0Y2ggPT4gXG4gICAgICAgICAgICAhbWF0Y2guaW5jbHVkZXMoJ3Bob3RvX3VybCcpICYmIFxuICAgICAgICAgICAgIW1hdGNoLmluY2x1ZGVzKCdjZG5VcmwnKSAmJlxuICAgICAgICAgICAgIW1hdGNoLmluY2x1ZGVzKCdzdG9yYWdlVXJsJylcbiAgICAgICAgICApO1xuICAgICAgICAgIGV4cGVjdChpbnZhbGlkTWF0Y2hlcy5sZW5ndGgpLnRvQmUoMCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybigncGhvdG9TZXJ2aWNlIG5vdCBmb3VuZCwgc2tpcHBpbmcgdGVzdCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW50ZWdyYXRpb246IEVuZC10by1FbmQgRmllbGQgQ29uc2lzdGVuY3knLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBtYWludGFpbiBwaG90b191cmwgY29uc2lzdGVuY3kgZnJvbSBkYXRhYmFzZSB0byBVSScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRoaXMgdGVzdCB2ZXJpZmllcyB0aGUgY29tcGxldGUgZGF0YSBmbG93OlxuICAgICAgLy8gRGF0YWJhc2UgKHBob3RvX3VybCkg4oaSIEFQSSDihpIgU2VydmljZSDihpIgQ29tcG9uZW50XG5cbiAgICAgIC8vIDEuIFZlcmlmeSBkYXRhYmFzZSBoYXMgcGhvdG9fdXJsXG4gICAgICBjb25zdCB7IGRhdGE6IGRiUGhvdG8sIGVycm9yOiBkYkVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgncGhvdG9zJylcbiAgICAgICAgLnNlbGVjdCgncGhvdG9fdXJsJylcbiAgICAgICAgLmVxKCdtb2RlcmF0aW9uX3N0YXR1cycsICdhcHByb3ZlZCcpXG4gICAgICAgIC5saW1pdCgxKVxuICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgIGlmIChkYkVycm9yICYmIGRiRXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2Jykge1xuICAgICAgICAvLyBQR1JTVDExNiBpcyBcIm5vIHJvd3MgcmV0dXJuZWRcIiwgd2hpY2ggaXMgb2theVxuICAgICAgICBleHBlY3QoZGJFcnJvcikudG9CZU51bGwoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRiUGhvdG8pIHtcbiAgICAgICAgLy8gMi4gVmVyaWZ5IHBob3RvX3VybCBpcyBhIHZhbGlkIHN0cmluZ1xuICAgICAgICBleHBlY3QoZGJQaG90bykudG9IYXZlUHJvcGVydHkoJ3Bob3RvX3VybCcpO1xuICAgICAgICBleHBlY3QodHlwZW9mIGRiUGhvdG8ucGhvdG9fdXJsKS50b0JlKCdzdHJpbmcnKTtcbiAgICAgICAgZXhwZWN0KGRiUGhvdG8ucGhvdG9fdXJsLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuXG4gICAgICAgIC8vIDMuIFZlcmlmeSBubyAndXJsJyBmaWVsZCBleGlzdHNcbiAgICAgICAgZXhwZWN0KGRiUGhvdG8pLm5vdC50b0hhdmVQcm9wZXJ0eSgndXJsJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVzZSBjb25zaXN0ZW50IGZpZWxkIG5hbWluZyBhY3Jvc3MgYWxsIHBob3RvLXJlbGF0ZWQgZmlsZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBmaWxlc1RvQ2hlY2sgPSBbXG4gICAgICAgICdjb21wb25lbnRzL2d1ZXN0L1Bob3RvR2FsbGVyeS50c3gnLFxuICAgICAgICAnY29tcG9uZW50cy9hZG1pbi9QaG90b1BpY2tlci50c3gnLFxuICAgICAgICAnY29tcG9uZW50cy9ndWVzdC9TZWN0aW9uUmVuZGVyZXIudHN4JyxcbiAgICAgICAgJ3N1cGFiYXNlL21pZ3JhdGlvbnMvMDA3X2NyZWF0ZV9waG90b3NfdGFibGUuc3FsJyxcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBmaWxlc1RvQ2hlY2subWFwKGZpbGVQYXRoID0+IHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBqb2luKHByb2Nlc3MuY3dkKCksIGZpbGVQYXRoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gcmVhZEZpbGVTeW5jKGZ1bGxQYXRoLCAndXRmLTgnKTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmlsZTogZmlsZVBhdGgsXG4gICAgICAgICAgICBoYXNQaG90b1VybDogY29udGVudC5pbmNsdWRlcygncGhvdG9fdXJsJyksXG4gICAgICAgICAgICBoYXNEZXByZWNhdGVkVXJsOiBjb250ZW50Lm1hdGNoKC9cXGJ1cmxcXHMqOi9nKSAhPT0gbnVsbCxcbiAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaWxlOiBmaWxlUGF0aCxcbiAgICAgICAgICAgIGhhc1Bob3RvVXJsOiBmYWxzZSxcbiAgICAgICAgICAgIGhhc0RlcHJlY2F0ZWRVcmw6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6ICdGaWxlIG5vdCBmb3VuZCcsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFsbCBmaWxlcyBzaG91bGQgdXNlIHBob3RvX3VybFxuICAgICAgcmVzdWx0cy5mb3JFYWNoKHJlc3VsdCA9PiB7XG4gICAgICAgIGlmICghcmVzdWx0LmVycm9yKSB7XG4gICAgICAgICAgZXhwZWN0KHJlc3VsdC5oYXNQaG90b1VybCkudG9CZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIExvZyByZXN1bHRzIGZvciBkZWJ1Z2dpbmdcbiAgICAgIGNvbnNvbGUubG9nKCdGaWVsZCBjb25zaXN0ZW5jeSBjaGVjayByZXN1bHRzOicsIHJlc3VsdHMpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbInN1cGFiYXNlIiwiY3JlYXRlQ2xpZW50IiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJkZXNjcmliZSIsIml0IiwiZGF0YSIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsImxpbWl0IiwiZXhwZWN0IiwidG9CZU51bGwiLCJ0b0JlRGVmaW5lZCIsIm5vdCIsIm1lc3NhZ2UiLCJ0b0NvbnRhaW4iLCJtaWdyYXRpb25QYXRoIiwiam9pbiIsImN3ZCIsIm1pZ3JhdGlvbkNvbnRlbnQiLCJyZWFkRmlsZVN5bmMiLCJ0b01hdGNoIiwidGVzdFBob3RvSWQiLCJiZWZvcmVBbGwiLCJwaG90byIsImluc2VydCIsInVwbG9hZGVyX2lkIiwicGhvdG9fdXJsIiwic3RvcmFnZV90eXBlIiwicGFnZV90eXBlIiwicGFnZV9pZCIsImNhcHRpb24iLCJhbHRfdGV4dCIsIm1vZGVyYXRpb25fc3RhdHVzIiwic2luZ2xlIiwiaWQiLCJhZnRlckFsbCIsImRlbGV0ZSIsImVxIiwiY29uc29sZSIsIndhcm4iLCJ0b0hhdmVQcm9wZXJ0eSIsInRvQmUiLCJwaG90b3MiLCJsZW5ndGgiLCJmb3JFYWNoIiwiY29tcG9uZW50UGF0aCIsImNvbXBvbmVudENvbnRlbnQiLCJpbnRlcmZhY2VNYXRjaCIsIm1hdGNoIiwidG9CZVRydXRoeSIsImludGVyZmFjZUNvbnRlbnQiLCJzZWxlY3RlZFBob3Rvc1NlY3Rpb24iLCJpbmNsdWRlcyIsImhhc1Bob3RvVXJsIiwiaGFzRGVwcmVjYXRlZFVybCIsInRvQmVGYWxzeSIsImNvbXBvbmVudHNUb0NoZWNrIiwiZnVsbFBhdGgiLCJkZXByZWNhdGVkUGF0dGVybnMiLCJwYXR0ZXJuIiwibWF0Y2hlcyIsInNlcnZpY2VQYXRoIiwic2VydmljZUNvbnRlbnQiLCJkZXByZWNhdGVkTWF0Y2hlcyIsImludmFsaWRNYXRjaGVzIiwiZmlsdGVyIiwiZGJQaG90byIsImRiRXJyb3IiLCJjb2RlIiwidG9CZUdyZWF0ZXJUaGFuIiwiZmlsZXNUb0NoZWNrIiwicmVzdWx0cyIsIm1hcCIsImZpbGVQYXRoIiwiY29udGVudCIsImZpbGUiLCJyZXN1bHQiLCJsb2ciXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7O0NBZ0JDOzs7OzRCQUU0QjtvQkFDQTtzQkFDUjtBQUVyQiwyQkFBMkI7QUFDM0IsTUFBTUEsV0FBV0MsSUFBQUEsd0JBQVksRUFDM0JDLFFBQVFDLEdBQUcsQ0FBQ0Msd0JBQXdCLEVBQ3BDRixRQUFRQyxHQUFHLENBQUNFLHlCQUF5QjtBQUd2Q0MsU0FBUyxp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