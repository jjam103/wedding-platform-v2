{"version":3,"names":["cov_2ir8sxbrcu","actualCoverage","s","PhotoUpload","guest","f","photos","setPhotos","_react","useState","uploading","setUploading","uploadProgress","setUploadProgress","error","setError","success","setSuccess","handleFileSelect","e","files","Array","from","b","target","validFiles","filter","file","type","startsWith","name","size","newPhotos","map","preview","URL","createObjectURL","caption","altText","removePhoto","index","revokeObjectURL","splice","updatePhotoCaption","updatePhotoAltText","handleUpload","length","totalPhotos","uploadedCount","photo","formData","FormData","append","response","fetch","method","body","result","json","Error","message","Math","round","forEach","setTimeout","err","_jsxruntime","jsxs","className","jsx","href","htmlFor","id","accept","multiple","onChange","disabled","src","alt","value","placeholder","toFixed","onClick","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","style","width"],"sources":["/Users/jaron/Desktop/wedding-platform-v2/components/guest/PhotoUpload.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport type { Guest } from '@/types';\n\ninterface PhotoUploadProps {\n  guest: Guest;\n}\n\ninterface PhotoFile {\n  file: File;\n  preview: string;\n  caption: string;\n  altText: string;\n}\n\n/**\n * Photo Upload Component\n * \n * Allows guests to upload wedding photos:\n * - Single and batch photo upload\n * - Caption and alt text input\n * - Preview before upload\n * - Upload progress tracking\n * \n * Requirements: 13.9, 11.1, 11.11\n */\nexport function PhotoUpload({ guest }: PhotoUploadProps) {\n  const [photos, setPhotos] = useState<PhotoFile[]>([]);\n  const [uploading, setUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    \n    // Validate file types\n    const validFiles = files.filter(file => {\n      if (!file.type.startsWith('image/')) {\n        setError(`${file.name} is not an image file`);\n        return false;\n      }\n      if (file.size > 10 * 1024 * 1024) { // 10MB limit\n        setError(`${file.name} is too large (max 10MB)`);\n        return false;\n      }\n      return true;\n    });\n\n    // Create preview URLs\n    const newPhotos = validFiles.map(file => ({\n      file,\n      preview: URL.createObjectURL(file),\n      caption: '',\n      altText: '',\n    }));\n\n    setPhotos([...photos, ...newPhotos]);\n    setError(null);\n  };\n\n  const removePhoto = (index: number) => {\n    const newPhotos = [...photos];\n    URL.revokeObjectURL(newPhotos[index].preview);\n    newPhotos.splice(index, 1);\n    setPhotos(newPhotos);\n  };\n\n  const updatePhotoCaption = (index: number, caption: string) => {\n    const newPhotos = [...photos];\n    newPhotos[index].caption = caption;\n    setPhotos(newPhotos);\n  };\n\n  const updatePhotoAltText = (index: number, altText: string) => {\n    const newPhotos = [...photos];\n    newPhotos[index].altText = altText;\n    setPhotos(newPhotos);\n  };\n\n  const handleUpload = async () => {\n    if (photos.length === 0) {\n      setError('Please select at least one photo to upload');\n      return;\n    }\n\n    try {\n      setUploading(true);\n      setError(null);\n      setSuccess(null);\n      setUploadProgress(0);\n\n      const totalPhotos = photos.length;\n      let uploadedCount = 0;\n\n      for (const photo of photos) {\n        const formData = new FormData();\n        formData.append('file', photo.file);\n        formData.append('caption', photo.caption);\n        formData.append('alt_text', photo.altText);\n        formData.append('page_type', 'memory');\n\n        const response = await fetch('/api/guest/photos/upload', {\n          method: 'POST',\n          body: formData,\n        });\n\n        const result = await response.json();\n\n        if (!result.success) {\n          throw new Error(result.error?.message || 'Failed to upload photo');\n        }\n\n        uploadedCount++;\n        setUploadProgress(Math.round((uploadedCount / totalPhotos) * 100));\n      }\n\n      setSuccess(`Successfully uploaded ${uploadedCount} photo${uploadedCount > 1 ? 's' : ''}!`);\n      \n      // Clear photos after successful upload\n      photos.forEach(photo => URL.revokeObjectURL(photo.preview));\n      setPhotos([]);\n      \n      // Clear success message after 5 seconds\n      setTimeout(() => setSuccess(null), 5000);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'An error occurred during upload');\n    } finally {\n      setUploading(false);\n      setUploadProgress(0);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-jungle-50 via-ocean-50 to-sunset-50\">\n      {/* Header */}\n      <header className=\"bg-white shadow-sm border-b border-sage-200\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-jungle-700\">Upload Photos</h1>\n              <p className=\"text-sage-600 mt-1\">Share your wedding memories</p>\n            </div>\n            <a\n              href=\"/guest/dashboard\"\n              className=\"text-ocean-600 hover:text-ocean-700 font-medium\"\n            >\n              ‚Üê Back to Dashboard\n            </a>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Success Message */}\n        {success && (\n          <div className=\"bg-jungle-50 border border-jungle-200 rounded-lg p-4 mb-6\">\n            <p className=\"text-jungle-800\">‚úì {success}</p>\n            <p className=\"text-sm text-jungle-700 mt-1\">\n              Your photos are pending moderation and will appear in the gallery once approved.\n            </p>\n          </div>\n        )}\n\n        {/* Error Message */}\n        {error && (\n          <div className=\"bg-volcano-50 border border-volcano-200 rounded-lg p-4 mb-6\">\n            <p className=\"text-volcano-800\">‚úó {error}</p>\n          </div>\n        )}\n\n        {/* Upload Instructions */}\n        <div className=\"bg-ocean-50 border border-ocean-200 rounded-lg p-4 mb-6\">\n          <h2 className=\"font-semibold text-ocean-800 mb-2\">üì∏ Photo Upload Guidelines</h2>\n          <ul className=\"text-sm text-ocean-700 space-y-1\">\n            <li>‚Ä¢ Accepted formats: JPG, PNG, GIF, WebP</li>\n            <li>‚Ä¢ Maximum file size: 10MB per photo</li>\n            <li>‚Ä¢ You can upload multiple photos at once</li>\n            <li>‚Ä¢ Photos will be reviewed before appearing in the gallery</li>\n            <li>‚Ä¢ Add captions to help tell the story of your photos</li>\n          </ul>\n        </div>\n\n        {/* File Upload Area */}\n        <div className=\"bg-white rounded-lg shadow-md border border-sage-200 p-6 mb-6\">\n          <label\n            htmlFor=\"photo-upload\"\n            className=\"block w-full cursor-pointer\"\n          >\n            <div className=\"border-2 border-dashed border-sage-300 rounded-lg p-12 text-center hover:border-jungle-400 hover:bg-jungle-50 transition-colors\">\n              <div className=\"text-6xl mb-4\">üì∑</div>\n              <h3 className=\"text-lg font-semibold text-sage-700 mb-2\">\n                Click to select photos\n              </h3>\n              <p className=\"text-sm text-sage-600\">\n                or drag and drop your photos here\n              </p>\n              <p className=\"text-xs text-sage-500 mt-2\">\n                You can select multiple photos at once\n              </p>\n            </div>\n            <input\n              id=\"photo-upload\"\n              type=\"file\"\n              accept=\"image/*\"\n              multiple\n              onChange={handleFileSelect}\n              className=\"hidden\"\n              disabled={uploading}\n            />\n          </label>\n        </div>\n\n        {/* Photo Previews */}\n        {photos.length > 0 && (\n          <div className=\"bg-white rounded-lg shadow-md border border-sage-200 p-6 mb-6\">\n            <h2 className=\"text-xl font-bold text-jungle-700 mb-4\">\n              Selected Photos ({photos.length})\n            </h2>\n            <div className=\"space-y-4\">\n              {photos.map((photo, index) => (\n                <div\n                  key={index}\n                  className=\"border border-sage-200 rounded-lg p-4 flex items-start space-x-4\"\n                >\n                  {/* Preview Image */}\n                  <div className=\"flex-shrink-0\">\n                    <img\n                      src={photo.preview}\n                      alt=\"Preview\"\n                      className=\"w-32 h-32 object-cover rounded-lg\"\n                    />\n                  </div>\n\n                  {/* Photo Details */}\n                  <div className=\"flex-1 space-y-3\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-sage-700 mb-1\">\n                        Caption\n                      </label>\n                      <input\n                        type=\"text\"\n                        value={photo.caption}\n                        onChange={(e) => updatePhotoCaption(index, e.target.value)}\n                        placeholder=\"Add a caption for this photo...\"\n                        className=\"w-full px-3 py-2 border border-sage-300 rounded-lg focus:ring-2 focus:ring-jungle-500 focus:border-jungle-500\"\n                        disabled={uploading}\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-medium text-sage-700 mb-1\">\n                        Alt Text (for accessibility)\n                      </label>\n                      <input\n                        type=\"text\"\n                        value={photo.altText}\n                        onChange={(e) => updatePhotoAltText(index, e.target.value)}\n                        placeholder=\"Describe what's in the photo...\"\n                        className=\"w-full px-3 py-2 border border-sage-300 rounded-lg focus:ring-2 focus:ring-jungle-500 focus:border-jungle-500\"\n                        disabled={uploading}\n                      />\n                    </div>\n                    <div className=\"text-xs text-sage-500\">\n                      {photo.file.name} ({(photo.file.size / 1024 / 1024).toFixed(2)} MB)\n                    </div>\n                  </div>\n\n                  {/* Remove Button */}\n                  <button\n                    onClick={() => removePhoto(index)}\n                    disabled={uploading}\n                    className=\"flex-shrink-0 text-volcano-600 hover:text-volcano-700 disabled:text-sage-400\"\n                  >\n                    <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                  </button>\n                </div>\n              ))}\n            </div>\n\n            {/* Upload Progress */}\n            {uploading && (\n              <div className=\"mt-6\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-sm font-medium text-sage-700\">Uploading...</span>\n                  <span className=\"text-sm font-medium text-jungle-700\">{uploadProgress}%</span>\n                </div>\n                <div className=\"w-full bg-sage-200 rounded-full h-2\">\n                  <div\n                    className=\"bg-jungle-600 h-2 rounded-full transition-all duration-300\"\n                    style={{ width: `${uploadProgress}%` }}\n                  />\n                </div>\n              </div>\n            )}\n\n            {/* Upload Button */}\n            <div className=\"mt-6 flex items-center space-x-3\">\n              <button\n                onClick={handleUpload}\n                disabled={uploading || photos.length === 0}\n                className=\"bg-jungle-600 hover:bg-jungle-700 disabled:bg-sage-400 text-white font-medium py-3 px-8 rounded-lg transition-colors\"\n              >\n                {uploading ? 'Uploading...' : `Upload ${photos.length} Photo${photos.length > 1 ? 's' : ''}`}\n              </button>\n              <button\n                onClick={() => {\n                  photos.forEach(photo => URL.revokeObjectURL(photo.preview));\n                  setPhotos([]);\n                }}\n                disabled={uploading}\n                className=\"bg-sage-200 hover:bg-sage-300 disabled:bg-sage-100 text-sage-700 font-medium py-3 px-8 rounded-lg transition-colors\"\n              >\n                Clear All\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Help Text */}\n        <div className=\"bg-sage-50 border border-sage-200 rounded-lg p-4\">\n          <h3 className=\"font-semibold text-sage-800 mb-2\">What happens after upload?</h3>\n          <p className=\"text-sm text-sage-700\">\n            Your photos will be reviewed by the wedding hosts to ensure they're appropriate for\n            the gallery. Once approved, they'll appear in the wedding photo gallery for all\n            guests to enjoy. This usually takes 1-2 days.\n          </p>\n        </div>\n      </main>\n    </div>\n  );\n}\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}