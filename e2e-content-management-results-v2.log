
> destination-wedding-platform@0.1.0 test:e2e
> playwright test __tests__/e2e/admin/contentManagement.spec.ts

[dotenv@17.2.3] injecting env (24) from .env.e2e -- tip: âš™ï¸  suppress all logs with { quiet: true }
[2m[WebServer] [22m
[2m[WebServer] [22m> destination-wedding-platform@0.1.0 dev
[2m[WebServer] [22m> next dev
[2m[WebServer] [22m
[2m[WebServer] [22m[1m[38;2;173;127;168mâ–² Next.js 16.1.1[39m[22m (Turbopack)
[2m[WebServer] [22m- Local:         http://localhost:3000
[2m[WebServer] [22m- Network:       http://192.168.7.238:3000
[2m[WebServer] [22m- Environments: .env.test
[2m[WebServer] [22m
[2m[WebServer] [22m[32m[1mâœ“[22m[39m Starting...
[2m[WebServer] [22m[33m[1mâš [22m[39m The "middleware" file convention is deprecated. Please use "proxy" instead. Learn more: https://nextjs.org/docs/messages/middleware-to-proxy
[2m[WebServer] [22mðŸš€ Initializing application services...
[2m[WebServer] [22mâœ… B2 client initialized successfully {
[2m[WebServer] [22m  endpoint: [32m'https://s3.us-west-004.backblazeb2.com'[39m,
[2m[WebServer] [22m  region: [32m'us-west-004'[39m,
[2m[WebServer] [22m  bucket: [32m'test-bucket'[39m,
[2m[WebServer] [22m  cdnDomain: [32m'https://test-cdn.example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mâœ… Application services initialized successfully
[2m[WebServer] [22m[32m[1mâœ“[22m[39m Ready in 1696ms

ðŸš€ E2E Global Setup Starting...

ðŸ“Š Verifying test database connection...
[2m[WebServer] [22m GET / [32m200[39m in 3.2s[2m (compile: 2.9s, proxy.ts: 136ms, render: 108ms)[22m
âœ… Test database connected

ðŸ§¹ Cleaning up test data...
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ðŸ‘¤ Creating test guest...
   Warning: Could not create test guest: Failed to create test guest: new row for relation "guests" violates check constraint "valid_guest_email"
   Guest authentication tests may fail
âœ… Test guest created

ðŸŒ Verifying Next.js server...
âœ… Next.js server is running

ðŸ” Setting up admin authentication...
[2m[WebServer] [22m GET / [32m200[39m in 35ms[2m (compile: 3ms, proxy.ts: 4ms, render: 28ms)[22m
   Warning: Could not ensure admin user exists: Failed to create auth user: A user with this email address has already been registered
   Continuing with setup - login may fail if user does not exist
[2m[WebServer] [22m GET /auth/login [32m200[39m in 145ms[2m (compile: 33ms, proxy.ts: 3ms, render: 108ms)[22m
   Navigated to login page
   Filled login form
   Submitted login form, waiting for navigation...
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin [32m200[39m in 953ms[2m (compile: 31ms, proxy.ts: 764ms, render: 158ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
   Current URL after login: http://localhost:3000/admin
   Logged in as: admin@example.com
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
âœ… Admin authentication saved

âœ¨ E2E Global Setup Complete!

[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

Running 18 tests using 4 workers

[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[dotenv@17.2.3] injecting env (0) from .env.e2e -- tip: ðŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops
Setting up authentication for E2E tests...
[2m[WebServer] [22m GET /auth/login [32m200[39m in 35ms[2m (compile: 2ms, proxy.ts: 2ms, render: 31ms)[22m
Credentials filled, clicking submit button...
Browser console [log]: === LOGIN ATTEMPT ===
Browser console [log]: Supabase URL: https://olcqaawrpnanioaorfer.supabase.co
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin [32m200[39m in 385ms[2m (compile: 5ms, proxy.ts: 307ms, render: 73ms)[22m
âœ… Navigation to admin dashboard successful!
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/alerts [32m200[39m in 1600ms[2m (compile: 26ms, proxy.ts: 524ms, render: 1050ms)[22m
[2m[WebServer] [22m GET /api/admin/metrics [32m200[39m in 2.4s[2m (compile: 92ms, proxy.ts: 318ms, render: 1994ms)[22m
âœ… Authentication successful! Saving session state...
âœ… Session saved to /Users/jaron/Desktop/wedding-platform-v2/.auth/user.json
  âœ“   1 [setup] â€º __tests__/e2e/auth.setup.ts:15:6 â€º authenticate as admin (4.6s)
[dotenv@17.2.3] injecting env (0) from .env.e2e -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
[dotenv@17.2.3] injecting env (0) from .env.e2e -- tip: âš™ï¸  write to custom object with { processEnv: myObject }
[dotenv@17.2.3] injecting env (0) from .env.e2e -- tip: ðŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env.e2e -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/content-pages [32m200[39m in 609ms[2m (compile: 61ms, proxy.ts: 338ms, render: 210ms)[22m
[2m[WebServer] [22m GET /admin/content-pages [32m200[39m in 616ms[2m (compile: 44ms, proxy.ts: 359ms, render: 213ms)[22m
[2m[WebServer] [22m GET /admin/content-pages [32m200[39m in 668ms[2m (compile: 22ms, proxy.ts: 434ms, render: 213ms)[22m
[2m[WebServer] [22m GET /admin/home-page [32m200[39m in 691ms[2m (compile: 42ms, proxy.ts: 457ms, render: 192ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/content-pages [32m200[39m in 4.5s[2m (compile: 1859ms, proxy.ts: 2.0s, render: 631ms)[22m
[2m[WebServer] [22m GET /api/admin/content-pages [32m200[39m in 4.0s[2m (compile: 1866ms, proxy.ts: 1481ms, render: 644ms)[22m
[2m[WebServer] [22m GET /api/admin/content-pages [32m200[39m in 2.7s[2m (compile: 1507ms, proxy.ts: 743ms, render: 478ms)[22m
[2m[WebServer] [22m GET /api/admin/home-page [32m200[39m in 3.6s[2m (compile: 1751ms, proxy.ts: 1415ms, render: 415ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
  âœ˜   3 [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:117:7 â€º Content Page Management â€º should validate required fields and handle slug conflicts (9.1s)
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m PUT /api/admin/home-page [32m200[39m in 515ms[2m (compile: 3ms, proxy.ts: 329ms, render: 183ms)[22m
[dotenv@17.2.3] injecting env (0) from .env.e2e -- tip: ðŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/home-page [32m200[39m in 388ms[2m (compile: 3ms, proxy.ts: 332ms, render: 53ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/home-page [32m200[39m in 616ms[2m (compile: 3ms, proxy.ts: 327ms, render: 286ms)[22m
  âœ“   6 [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:234:7 â€º Home Page Editing â€º should edit welcome message with rich text editor (1.5s)
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/home-page [32m200[39m in 376ms[2m (compile: 6ms, proxy.ts: 318ms, render: 52ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/home-page [32m200[39m in 489ms[2m (compile: 1375Âµs, proxy.ts: 293ms, render: 194ms)[22m
  âœ“   7 [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:261:7 â€º Home Page Editing â€º should handle API errors gracefully and disable fields while saving (1.5s)
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/home-page [32m200[39m in 411ms[2m (compile: 2ms, proxy.ts: 373ms, render: 36ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/home-page [32m200[39m in 491ms[2m (compile: 3ms, proxy.ts: 331ms, render: 157ms)[22m
[2m[WebServer] [22m GET / [32m200[39m in 29ms[2m (compile: 3ms, proxy.ts: 5ms, render: 21ms)[22m
  âœ˜   4 [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:193:7 â€º Home Page Editing â€º should edit home page settings and save successfully (14.6s)
  âœ“   8 [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:285:7 â€º Home Page Editing â€º should preview home page in new tab (1.6s)
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/home-page [32m200[39m in 350ms[2m (compile: 2ms, proxy.ts: 302ms, render: 46ms)[22m
[dotenv@17.2.3] injecting env (0) from .env.e2e -- tip: âš™ï¸  override existing env vars with { override: true }
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/home-page [32m200[39m in 576ms[2m (compile: 3ms, proxy.ts: 302ms, render: 271ms)[22m
[2m[WebServer] [22m GET /admin/home-page [32m200[39m in 334ms[2m (compile: 2ms, proxy.ts: 277ms, render: 54ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/home-page [32m200[39m in 663ms[2m (compile: 2ms, proxy.ts: 337ms, render: 323ms)[22m
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/sections/by-page/home/home [32m200[39m in 1144ms[2m (compile: 568ms, proxy.ts: 304ms, render: 271ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/sections/by-page/home/home [32m200[39m in 637ms[2m (compile: 13ms, proxy.ts: 299ms, render: 326ms)[22m
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/sections/by-page/home/home [32m200[39m in 603ms[2m (compile: 3ms, proxy.ts: 312ms, render: 288ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/sections/by-page/home/home [32m200[39m in 584ms[2m (compile: 4ms, proxy.ts: 294ms, render: 286ms)[22m
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m POST /api/admin/sections [32m201[39m in 851ms[2m (compile: 63ms, proxy.ts: 316ms, render: 472ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
  âœ˜   2 [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:141:7 â€º Content Page Management â€º should add and reorder sections with layout options (19.2s)
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
  âœ˜   5 [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:30:7 â€º Content Page Management â€º should complete full content page creation and publication flow (19.3s)
[2m[WebServer] [22m POST /api/admin/sections [32m201[39m in 749ms[2m (compile: 3ms, proxy.ts: 324ms, render: 422ms)[22m
  âœ“  10 [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:309:7 â€º Inline Section Editor â€º should toggle inline section editor and add sections (4.4s)
[dotenv@17.2.3] injecting env (0) from .env.e2e -- tip: ðŸ” prevent committing .env to code: https://dotenvx.com/precommit
[dotenv@17.2.3] injecting env (0) from .env.e2e -- tip: ðŸ“¡ add observability to secrets: https://dotenvx.com/ops
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /admin [32m200[39m in 357ms[2m (compile: 10ms, proxy.ts: 303ms, render: 45ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /admin/home-page [32m200[39m in 390ms[2m (compile: 6ms, proxy.ts: 351ms, render: 33ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/home-page [32m200[39m in 433ms[2m (compile: 3ms, proxy.ts: 358ms, render: 72ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/home-page [32m200[39m in 582ms[2m (compile: 1425Âµs, proxy.ts: 311ms, render: 269ms)[22m
[2m[WebServer] [22m GET /api/admin/home-page [32m200[39m in 500ms[2m (compile: 1338Âµs, proxy.ts: 267ms, render: 231ms)[22m
[2m[WebServer] [22m GET /api/admin/alerts [32m200[39m in 1534ms[2m (compile: 17ms, proxy.ts: 292ms, render: 1225ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/metrics [32m200[39m in 1872ms[2m (compile: 16ms, proxy.ts: 289ms, render: 1567ms)[22m
[2m[WebServer] [22m GET /api/admin/sections/by-page/home/home [32m200[39m in 583ms[2m (compile: 7ms, proxy.ts: 291ms, render: 285ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/sections/by-page/home/home [32m200[39m in 898ms[2m (compile: 5ms, proxy.ts: 604ms, render: 289ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/sections/by-page/home/home [32m200[39m in 582ms[2m (compile: 5ms, proxy.ts: 281ms, render: 296ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/events [32m200[39m in 436ms[2m (compile: 45ms, proxy.ts: 295ms, render: 96ms)[22m
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m POST /api/admin/sections [32m201[39m in 887ms[2m (compile: 1987Âµs, proxy.ts: 450ms, render: 435ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/sections/by-page/home/home [32m200[39m in 666ms[2m (compile: 15ms, proxy.ts: 348ms, render: 303ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/events [32m200[39m in 483ms[2m (compile: 37ms, proxy.ts: 287ms, render: 159ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/locations [32m200[39m in 668ms[2m (compile: 68ms, proxy.ts: 465ms, render: 135ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m POST /api/admin/sections [32m201[39m in 752ms[2m (compile: 5ms, proxy.ts: 322ms, render: 425ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Section Update] Request body: {
[2m[WebServer] [22m  "columns": [
[2m[WebServer] [22m    {
[2m[WebServer] [22m      "column_number": 1,
[2m[WebServer] [22m      "content_type": "references",
[2m[WebServer] [22m      "content_data": {
[2m[WebServer] [22m        "references": []
[2m[WebServer] [22m      }
[2m[WebServer] [22m    }
[2m[WebServer] [22m  ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Section Update] Validation passed, updating section...
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Section Update] Request body: {
[2m[WebServer] [22m  "columns": [
[2m[WebServer] [22m    {
[2m[WebServer] [22m      "column_number": 1,
[2m[WebServer] [22m      "content_type": "photo_gallery",
[2m[WebServer] [22m      "content_data": {
[2m[WebServer] [22m        "photo_ids": [],
[2m[WebServer] [22m        "display_mode": "gallery",
[2m[WebServer] [22m        "autoplaySpeed": 3000,
[2m[WebServer] [22m        "showCaptions": true
[2m[WebServer] [22m      }
[2m[WebServer] [22m    }
[2m[WebServer] [22m  ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Section Update] Validation passed, updating section...
[2m[WebServer] [22m DELETE /api/admin/sections/b8ac348d-0f15-42eb-9ecc-4a5c042323fe [32m200[39m in 1046ms[2m (compile: 522ms, proxy.ts: 276ms, render: 249ms)[22m
  âœ“  12 [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:365:7 â€º Inline Section Editor â€º should delete section with confirmation (5.0s)
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Section Update] Service error: {
[2m[WebServer] [22m  code: [32m'DATABASE_ERROR'[39m,
[2m[WebServer] [22m  message: [32m'duplicate key value violates unique constraint "columns_section_id_column_number_key"'[39m,
[2m[WebServer] [22m  details: {
[2m[WebServer] [22m    code: [32m'23505'[39m,
[2m[WebServer] [22m    details: [32m'Key (section_id, column_number)=(8a956850-8613-44b1-8fdf-2a94c0576205, 1) already exists.'[39m,
[2m[WebServer] [22m    hint: [1mnull[22m,
[2m[WebServer] [22m    message: [32m'duplicate key value violates unique constraint "columns_section_id_column_number_key"'[39m
[2m[WebServer] [22m  }
[2m[WebServer] [22m}
[2m[WebServer] [22m PUT /api/admin/sections/8a956850-8613-44b1-8fdf-2a94c0576205 [31m500[39m in 885ms[2m (compile: 5ms, proxy.ts: 278ms, render: 601ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin [32m200[39m in 349ms[2m (compile: 2ms, proxy.ts: 310ms, render: 37ms)[22m
[2m[WebServer] [22m[Section Update] Success
[2m[WebServer] [22m PUT /api/admin/sections/8a956850-8613-44b1-8fdf-2a94c0576205 [32m200[39m in 1012ms[2m (compile: 2ms, proxy.ts: 303ms, render: 706ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/alerts [32m200[39m in 1398ms[2m (compile: 1260Âµs, proxy.ts: 284ms, render: 1113ms)[22m
  âœ˜  13 [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:390:7 â€º Inline Section Editor â€º should add photo gallery and reference blocks to sections (7.4s)
[2m[WebServer] [22m GET /api/admin/metrics [32m200[39m in 2.0s[2m (compile: 3ms, proxy.ts: 276ms, render: 1729ms)[22m
[dotenv@17.2.3] injecting env (0) from .env.e2e -- tip: ðŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/content-pages [32m200[39m in 321ms[2m (compile: 4ms, proxy.ts: 277ms, render: 39ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/content-pages [32m200[39m in 410ms[2m (compile: 2ms, proxy.ts: 353ms, render: 55ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/content-pages [32m200[39m in 643ms[2m (compile: 20ms, proxy.ts: 285ms, render: 339ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
  âœ˜   9 [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:340:7 â€º Inline Section Editor â€º should edit section content and toggle layout (14.7s)
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/content-pages [32m200[39m in 576ms[2m (compile: 5ms, proxy.ts: 294ms, render: 277ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
  âœ“  14 [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:517:7 â€º Event References â€º should search and filter events in reference lookup (4.9s)
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/home-page [32m200[39m in 876ms[2m (compile: 10ms, proxy.ts: 349ms, render: 517ms)[22m
  âœ“  15 [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:550:7 â€º Content Management Accessibility â€º should have proper keyboard navigation in content pages (2.8s)
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/content-pages [32m200[39m in 511ms[2m (compile: 11ms, proxy.ts: 308ms, render: 192ms)[22m
[2m[WebServer] [22m GET /api/admin/home-page [32m200[39m in 815ms[2m (compile: 9ms, proxy.ts: 357ms, render: 449ms)[22m
[dotenv@17.2.3] injecting env (0) from .env.e2e -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
  âœ˜  11 [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:422:7 â€º Event References â€º should create event and add as reference to content page (12.4s)
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/content-pages [32m200[39m in 681ms[2m (compile: 3ms, proxy.ts: 355ms, render: 323ms)[22m
  âœ“  16 [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:583:7 â€º Content Management Accessibility â€º should have proper keyboard navigation in home page editor (3.1s)
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/content-pages [32m200[39m in 326ms[2m (compile: 1884Âµs, proxy.ts: 295ms, render: 30ms)[22m
  âœ“  17 [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:595:7 â€º Content Management Accessibility â€º should have keyboard navigation in reference lookup (2.4s)
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/content-pages [32m200[39m in 643ms[2m (compile: 1493Âµs, proxy.ts: 320ms, render: 321ms)[22m
  âœ“  18 [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:563:7 â€º Content Management Accessibility â€º should have proper ARIA labels and form labels (2.0s)

ðŸ§¹ E2E Global Teardown Starting...

ðŸ—‘ï¸  Cleaning up test data...
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ðŸ”“ Removing authentication state...
   Removed: .auth/user.json
   Removed empty .auth directory
âœ… Authentication state removed

ðŸ“Š Execution Summary:
   Duration: 2.40s
   Errors: 0
   Status: âœ… Clean teardown

âœ¨ E2E Global Teardown Complete!



  1) [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:30:7 â€º Content Page Management â€º should complete full content page creation and publication flow 

    TimeoutError: locator.fill: Timeout 10000ms exceeded.
    Call log:
    [2m  - waiting for locator('input[name="title"], input[placeholder*="title" i]').first()[22m


      43 |     
      44 |     const titleInput = page.locator('input[name="title"], input[placeholder*="title" i]').first();
    > 45 |     await titleInput.fill(pageTitle);
         |                      ^
      46 |     
      47 |     const slugInput = page.locator('input[name="slug"], input[placeholder*="slug" i]').first();
      48 |     if (await slugInput.count() > 0) {
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/contentManagement.spec.ts:45:22

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-contentManagement-Co-30bad-eation-and-publication-flow-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-contentManagement-Co-30bad-eation-and-publication-flow-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-contentManagement-Co-30bad-eation-and-publication-flow-chromium/error-context.md

  2) [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:117:7 â€º Content Page Management â€º should validate required fields and handle slug conflicts 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('text=/required|invalid|error/i, [role="alert"]').first()
    Expected: visible
    SyntaxError: Invalid flags supplied to RegExp constructor 'i, [role="alert"]'
        at new RegExp (<anonymous>)
        at createTextMatcher (<anonymous>:7998:16)
        at Object.queryAll (<anonymous>:6874:33)
        at InjectedScript._queryEngineAll (<anonymous>:6847:49)
        at InjectedScript.querySelectorAll (<anonymous>:6834:30)
        at eval (eval at evaluate (:290:30), <anonymous>:2:42)
        at UtilityScript.evaluate (<anonymous>:292:16)
        at UtilityScript.<anonymous> (<anonymous>:1:44)

    Call log:
    [2m  - Expect "toBeVisible" with timeout 3000ms[22m
    [2m  - waiting for locator('text=/required|invalid|error/i, [role="alert"]').first()[22m

        at createTextMatcher (<anonymous>:7998:16)
        at Object.queryAll (<anonymous>:6874:33)
        at InjectedScript._queryEngineAll (<anonymous>:6847:49)
        at InjectedScript.querySelectorAll (<anonymous>:6834:30)
        at eval (eval at evaluate (:290:30), <anonymous>:2:42)
        at UtilityScript.evaluate (<anonymous>:292:16)
        at UtilityScript.<anonymous> (<anonymous>:1:44)
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/contentManagement.spec.ts:127:32

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-contentManagement-Co-ce495-s-and-handle-slug-conflicts-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-contentManagement-Co-ce495-s-and-handle-slug-conflicts-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-contentManagement-Co-ce495-s-and-handle-slug-conflicts-chromium/error-context.md

  3) [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:141:7 â€º Content Page Management â€º should add and reorder sections with layout options 

    TimeoutError: locator.fill: Timeout 10000ms exceeded.
    Call log:
    [2m  - waiting for locator('input[name="title"], input[placeholder*="title" i]').first()[22m


      146 |     
      147 |     const titleInput = page.locator('input[name="title"], input[placeholder*="title" i]').first();
    > 148 |     await titleInput.fill(`Section Test ${Date.now()}`);
          |                      ^
      149 |     
      150 |     const createButton = page.locator('button[type="submit"]:has-text("Create"), button:has-text("Add"), button:has-text("Save")').first();
      151 |     await createButton.click();
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/contentManagement.spec.ts:148:22

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-contentManagement-Co-cb94f-ections-with-layout-options-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-contentManagement-Co-cb94f-ections-with-layout-options-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-contentManagement-Co-cb94f-ections-with-layout-options-chromium/error-context.md

  4) [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:193:7 â€º Home Page Editing â€º should edit home page settings and save successfully 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('text=/Last saved:/i, text=/saved successfully/i').first()
    Expected: visible
    Timeout: 5000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 5000ms[22m
    [2m  - waiting for locator('text=/Last saved:/i, text=/saved successfully/i').first()[22m


      221 |     await expect(
      222 |       page.locator('text=/Last saved:/i, text=/saved successfully/i').first()
    > 223 |     ).toBeVisible({ timeout: 5000 });
          |       ^
      224 |     
      225 |     // Verify persistence
      226 |     await page.reload({ waitUntil: 'domcontentloaded' });
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/contentManagement.spec.ts:223:7

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-contentManagement-Ho-60835-tings-and-save-successfully-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-contentManagement-Ho-60835-tings-and-save-successfully-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-contentManagement-Ho-60835-tings-and-save-successfully-chromium/error-context.md

  5) [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:340:7 â€º Inline Section Editor â€º should edit section content and toggle layout 

    TimeoutError: locator.selectOption: Timeout 10000ms exceeded.
    Call log:
    [2m  - waiting for locator('select').last()[22m
    [2m    - locator resolved to <select class="text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500">â€¦</select>[22m
    [2m  - attempting select option action[22m
    [2m    2 Ã— waiting for element to be visible and enabled[22m
    [2m      - did not find some options[22m
    [2m    - retrying select option action[22m
    [2m    - waiting 20ms[22m
    [2m    2 Ã— waiting for element to be visible and enabled[22m
    [2m      - did not find some options[22m
    [2m    - retrying select option action[22m
    [2m      - waiting 100ms[22m
    [2m    20 Ã— waiting for element to be visible and enabled[22m
    [2m       - did not find some options[22m
    [2m     - retrying select option action[22m
    [2m       - waiting 500ms[22m


      356 |     const layoutSelect = page.locator('select').last();
      357 |     if (await layoutSelect.count() > 0 && await layoutSelect.isVisible()) {
    > 358 |       await layoutSelect.selectOption('two-column');
          |                          ^
      359 |       await page.waitForTimeout(500);
      360 |       await layoutSelect.selectOption('one-column');
      361 |       await page.waitForTimeout(500);
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/contentManagement.spec.ts:358:26

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-contentManagement-In-4f880-n-content-and-toggle-layout-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-contentManagement-In-4f880-n-content-and-toggle-layout-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-contentManagement-In-4f880-n-content-and-toggle-layout-chromium/error-context.md

  6) [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:390:7 â€º Inline Section Editor â€º should add photo gallery and reference blocks to sections 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator:  locator('text=/Select|Reference/i').first()
    Expected: visible
    Received: hidden
    Timeout:  3000ms

    Call log:
    [2m  - Expect "toBeVisible" with timeout 3000ms[22m
    [2m  - waiting for locator('text=/Select|Reference/i').first()[22m
    [2m    7 Ã— locator resolved to <option value="references">References</option>[22m
    [2m      - unexpected value "hidden"[22m


      409 |       
      410 |       const referenceSelector = page.locator('text=/Select|Reference/i').first();
    > 411 |       await expect(referenceSelector).toBeVisible({ timeout: 3000 });
          |                                       ^
      412 |     }
      413 |   });
      414 | });
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/contentManagement.spec.ts:411:39

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-contentManagement-In-a7795-eference-blocks-to-sections-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-contentManagement-In-a7795-eference-blocks-to-sections-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-contentManagement-In-a7795-eference-blocks-to-sections-chromium/error-context.md

  7) [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:422:7 â€º Event References â€º should create event and add as reference to content page 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('text=Test Event 1770315032538').first()
    Expected: visible
    Timeout: 5000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 5000ms[22m
    [2m  - waiting for locator('text=Test Event 1770315032538').first()[22m


      444 |     
      445 |     const eventRow = page.locator(`text=${eventName}`).first();
    > 446 |     await expect(eventRow).toBeVisible({ timeout: 5000 });
          |                            ^
      447 |     
      448 |     // Create content page
      449 |     await page.goto('http://localhost:3000/admin/content-pages');
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/contentManagement.spec.ts:446:28

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-contentManagement-Ev-e6ce0-s-reference-to-content-page-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-contentManagement-Ev-e6ce0-s-reference-to-content-page-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-contentManagement-Ev-e6ce0-s-reference-to-content-page-chromium/error-context.md

  7 failed
    [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:30:7 â€º Content Page Management â€º should complete full content page creation and publication flow 
    [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:117:7 â€º Content Page Management â€º should validate required fields and handle slug conflicts 
    [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:141:7 â€º Content Page Management â€º should add and reorder sections with layout options 
    [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:193:7 â€º Home Page Editing â€º should edit home page settings and save successfully 
    [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:340:7 â€º Inline Section Editor â€º should edit section content and toggle layout 
    [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:390:7 â€º Inline Section Editor â€º should add photo gallery and reference blocks to sections 
    [chromium] â€º __tests__/e2e/admin/contentManagement.spec.ts:422:7 â€º Event References â€º should create event and add as reference to content page 
  11 passed (59.5s)

[36m  Serving HTML report at http://localhost:57274. Press Ctrl+C to quit.[39m
