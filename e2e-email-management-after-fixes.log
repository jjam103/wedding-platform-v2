
> destination-wedding-platform@0.1.0 test:e2e
> playwright test __tests__/e2e/admin/emailManagement.spec.ts

[dotenv@17.2.4] injecting env (25) from .env.e2e -- tip: âš™ï¸  suppress all logs with { quiet: true }
[2m[WebServer] [22m
[2m[WebServer] [22m> destination-wedding-platform@0.1.0 dev
[2m[WebServer] [22m> next dev --webpack
[2m[WebServer] [22m
[2m[WebServer] [22m[1m[38;2;173;127;168mâ–² Next.js 16.1.1[39m[22m (webpack)
[2m[WebServer] [22m- Local:         http://localhost:3000
[2m[WebServer] [22m- Network:       http://172.24.67.208:3000
[2m[WebServer] [22m- Environments: .env.test
[2m[WebServer] [22m
[2m[WebServer] [22m[32m[1mâœ“[22m[39m Starting...
[2m[WebServer] [22m[33m[1mâš [22m[39m The "middleware" file convention is deprecated. Please use "proxy" instead. Learn more: https://nextjs.org/docs/messages/middleware-to-proxy
[2m[WebServer] [22mðŸš€ Initializing application services...
[2m[WebServer] [22mâœ… B2 client initialized successfully {
[2m[WebServer] [22m  endpoint: [32m'https://s3.us-west-004.backblazeb2.com'[39m,
[2m[WebServer] [22m  region: [32m'us-west-004'[39m,
[2m[WebServer] [22m  bucket: [32m'test-bucket'[39m,
[2m[WebServer] [22m  cdnDomain: [32m'https://test-cdn.example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mâœ… Application services initialized successfully
[2m[WebServer] [22m[32m[1mâœ“[22m[39m Ready in 4.3s
[2m[WebServer] [22m[37m[1mâ—‹[22m[39m Compiling / ...

ðŸš€ E2E Global Setup Starting...

ðŸ“Š Verifying test database connection...
[2m[WebServer] [22m GET / [32m200[39m in 3.9s[2m (compile: 3.3s, proxy.ts: 249ms, render: 347ms)[22m
âœ… Test database connected

ðŸ§¹ Cleaning up test data...
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ðŸŒ Verifying Next.js server...
âœ… Next.js server is running

ðŸ” Setting up admin authentication...
[2m[WebServer] [22m GET / [32m200[39m in 95ms[2m (compile: 4ms, proxy.ts: 66ms, render: 25ms)[22m
   Warning: Could not ensure admin user exists: Failed to create auth user: A user with this email address has already been registered
   Continuing with setup - login may fail if user does not exist
   Authenticating via Supabase API...
   âœ… API authentication successful (User ID: e7f5ae65-376e-4d05-a18c-10a91295727a)
   Injecting session cookies...
   âœ… Session cookies set (3 cookies)
   Navigating to http://localhost:3000/admin...
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin [32m200[39m in 2.6s[2m (compile: 2.1s, proxy.ts: 332ms, render: 202ms)[22m
   âœ… Page loaded successfully
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
   Current URL: http://localhost:3000/admin
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
   âœ… Admin UI is visible
   Logged in as: admin@example.com
   Auth state saved to: .auth/admin.json
âœ… Admin authentication saved

âœ¨ E2E Global Setup Complete!


Running 13 tests using 4 workers

[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 1170ms[2m (compile: 583ms, proxy.ts: 284ms, render: 303ms)[22m
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 1171ms[2m (compile: 536ms, proxy.ts: 331ms, render: 304ms)[22m
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 1165ms[2m (compile: 531ms, proxy.ts: 327ms, render: 307ms)[22m
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 1176ms[2m (compile: 585ms, proxy.ts: 282ms, render: 309ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 1800ms[2m (compile: 1503ms, proxy.ts: 267ms, render: 30ms)[22m
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 1803ms[2m (compile: 1497ms, proxy.ts: 273ms, render: 33ms)[22m
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 1806ms[2m (compile: 1424ms, proxy.ts: 346ms, render: 36ms)[22m
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 1816ms[2m (compile: 1514ms, proxy.ts: 256ms, render: 46ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/groups GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'true' | 'false'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "include_count"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'true' | 'false', received null"
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/groups/route.ts:57:81)
[2m[WebServer] [22m[0m [90m 55 |[39m
[2m[WebServer] [22m [90m 56 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 57 |[39m       console[33m.[39merror([32m'[API /api/admin/groups GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 58 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 59 |[39m         {
[2m[WebServer] [22m [90m 60 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/groups [33m400[39m in 3.1s[2m (compile: 2.3s, proxy.ts: 273ms, render: 546ms)[22m
[2m[WebServer] [22m[API /api/admin/groups GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'true' | 'false'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "include_count"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'true' | 'false', received null"
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/groups/route.ts:57:81)
[2m[WebServer] [22m[0m [90m 55 |[39m
[2m[WebServer] [22m [90m 56 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 57 |[39m       console[33m.[39merror([32m'[API /api/admin/groups GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 58 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 59 |[39m         {
[2m[WebServer] [22m [90m 60 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/groups [33m400[39m in 3.2s[2m (compile: 2.3s, proxy.ts: 289ms, render: 630ms)[22m
[2m[WebServer] [22m[API /api/admin/groups GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'true' | 'false'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "include_count"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'true' | 'false', received null"
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/groups/route.ts:57:81)
[2m[WebServer] [22m[0m [90m 55 |[39m
[2m[WebServer] [22m [90m 56 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 57 |[39m       console[33m.[39merror([32m'[API /api/admin/groups GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 58 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 59 |[39m         {
[2m[WebServer] [22m [90m 60 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/groups [33m400[39m in 3.3s[2m (compile: 2.3s, proxy.ts: 295ms, render: 703ms)[22m
[2m[WebServer] [22m[API /api/admin/groups GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'true' | 'false'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "include_count"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'true' | 'false', received null"
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/groups/route.ts:57:81)
[2m[WebServer] [22m[0m [90m 55 |[39m
[2m[WebServer] [22m [90m 56 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 57 |[39m       console[33m.[39merror([32m'[API /api/admin/groups GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 58 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 59 |[39m         {
[2m[WebServer] [22m [90m 60 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/groups [33m400[39m in 3.4s[2m (compile: 2.2s, proxy.ts: 341ms, render: 797ms)[22m
[2m[WebServer] [22m[API /api/admin/guests GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "groupId"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'adult' | 'child' | 'senior'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "ageType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'adult' | 'child' | 'senior', received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "guestType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "page"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "pageSize"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/guests/route.ts:75:81)
[2m[WebServer] [22m[0m [90m 73 |[39m
[2m[WebServer] [22m [90m 74 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 75 |[39m       console[33m.[39merror([32m'[API /api/admin/guests GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 76 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 77 |[39m         {
[2m[WebServer] [22m [90m 78 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/guests?format=simple [33m400[39m in 3.4s[2m (compile: 2.3s, proxy.ts: 291ms, render: 881ms)[22m
[2m[WebServer] [22m[API /api/admin/guests GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "groupId"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'adult' | 'child' | 'senior'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "ageType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'adult' | 'child' | 'senior', received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "guestType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "page"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "pageSize"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/guests/route.ts:75:81)
[2m[WebServer] [22m[0m [90m 73 |[39m
[2m[WebServer] [22m [90m 74 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 75 |[39m       console[33m.[39merror([32m'[API /api/admin/guests GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 76 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 77 |[39m         {
[2m[WebServer] [22m [90m 78 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/guests?format=simple [33m400[39m in 3.5s[2m (compile: 2.3s, proxy.ts: 293ms, render: 961ms)[22m
[2m[WebServer] [22m[API /api/admin/guests GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "groupId"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'adult' | 'child' | 'senior'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "ageType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'adult' | 'child' | 'senior', received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "guestType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "page"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "pageSize"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/guests/route.ts:75:81)
[2m[WebServer] [22m[0m [90m 73 |[39m
[2m[WebServer] [22m [90m 74 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 75 |[39m       console[33m.[39merror([32m'[API /api/admin/guests GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 76 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 77 |[39m         {
[2m[WebServer] [22m [90m 78 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/guests?format=simple [33m400[39m in 3.6s[2m (compile: 2.2s, proxy.ts: 360ms, render: 1030ms)[22m
[2m[WebServer] [22m[API /api/admin/guests GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "groupId"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'adult' | 'child' | 'senior'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "ageType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'adult' | 'child' | 'senior', received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "guestType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "page"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "pageSize"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/guests/route.ts:75:81)
[2m[WebServer] [22m[0m [90m 73 |[39m
[2m[WebServer] [22m [90m 74 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 75 |[39m       console[33m.[39merror([32m'[API /api/admin/guests GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 76 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 77 |[39m         {
[2m[WebServer] [22m [90m 78 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/guests?format=simple [33m400[39m in 3.7s[2m (compile: 2.2s, proxy.ts: 361ms, render: 1100ms)[22m
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/emails/templates [32m200[39m in 4.2s[2m (compile: 2.2s, proxy.ts: 343ms, render: 1615ms)[22m
[2m[WebServer] [22m GET /api/admin/emails/templates [32m200[39m in 4.2s[2m (compile: 2.2s, proxy.ts: 346ms, render: 1640ms)[22m
[2m[WebServer] [22m GET /api/admin/emails/templates [32m200[39m in 4.3s[2m (compile: 2.2s, proxy.ts: 376ms, render: 1694ms)[22m
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/emails/templates [32m200[39m in 4.6s[2m (compile: 2.3s, proxy.ts: 263ms, render: 2.0s)[22m
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ“   4 [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:251:7 â€º Email Composition & Templates â€º should validate required fields and email addresses (12.7s)
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 378ms[2m (compile: 61ms, proxy.ts: 223ms, render: 94ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 376ms[2m (compile: 44ms, proxy.ts: 322ms, render: 10ms)[22m
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 425ms[2m (compile: 4ms, proxy.ts: 237ms, render: 184ms)[22m
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 491ms[2m (compile: 13ms, proxy.ts: 288ms, render: 190ms)[22m
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 498ms[2m (compile: 12ms, proxy.ts: 289ms, render: 197ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/guests GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "groupId"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'adult' | 'child' | 'senior'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "ageType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'adult' | 'child' | 'senior', received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "guestType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "page"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "pageSize"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/guests/route.ts:75:81)
[2m[WebServer] [22m[0m [90m 73 |[39m
[2m[WebServer] [22m [90m 74 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 75 |[39m       console[33m.[39merror([32m'[API /api/admin/guests GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 76 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 77 |[39m         {
[2m[WebServer] [22m [90m 78 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/guests?format=simple [33m400[39m in 307ms[2m (compile: 1682Âµs, proxy.ts: 248ms, render: 57ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/groups GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'true' | 'false'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "include_count"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'true' | 'false', received null"
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/groups/route.ts:57:81)
[2m[WebServer] [22m[0m [90m 55 |[39m
[2m[WebServer] [22m [90m 56 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 57 |[39m       console[33m.[39merror([32m'[API /api/admin/groups GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 58 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 59 |[39m         {
[2m[WebServer] [22m [90m 60 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/groups [33m400[39m in 369ms[2m (compile: 3ms, proxy.ts: 313ms, render: 52ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 271ms[2m (compile: 1891Âµs, proxy.ts: 265ms, render: 4ms)[22m
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 335ms[2m (compile: 1990Âµs, proxy.ts: 327ms, render: 6ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 351ms[2m (compile: 2ms, proxy.ts: 342ms, render: 6ms)[22m
[2m[WebServer] [22m GET /api/admin/emails/templates [32m200[39m in 692ms[2m (compile: 3ms, proxy.ts: 315ms, render: 373ms)[22m
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜   2 [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:152:7 â€º Email Composition & Templates â€º should use email template with variable substitution (23.8s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild
ðŸ§¹ Running comprehensive test cleanup...
ðŸ§¹ Running comprehensive test cleanup...
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 351ms[2m (compile: 5ms, proxy.ts: 283ms, render: 63ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 251ms[2m (compile: 1631Âµs, proxy.ts: 244ms, render: 5ms)[22m
âœ… Comprehensive cleanup complete
âœ… Comprehensive cleanup complete
  âœ˜   1 [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:95:7 â€º Email Composition & Templates â€º should complete full email composition and sending workflow (26.7s)
  âœ˜   3 [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:217:7 â€º Email Composition & Templates â€º should select recipients by group (26.7s)
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops
[2m[WebServer] [22m[API /api/admin/guests GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "groupId"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'adult' | 'child' | 'senior'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "ageType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'adult' | 'child' | 'senior', received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "guestType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "page"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "pageSize"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/guests/route.ts:75:81)
[2m[WebServer] [22m[0m [90m 73 |[39m
[2m[WebServer] [22m [90m 74 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 75 |[39m       console[33m.[39merror([32m'[API /api/admin/guests GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 76 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 77 |[39m         {
[2m[WebServer] [22m [90m 78 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/guests?format=simple [33m400[39m in 345ms[2m (compile: 2ms, proxy.ts: 258ms, render: 85ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
[2m[WebServer] [22m[API /api/admin/groups GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'true' | 'false'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "include_count"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'true' | 'false', received null"
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/groups/route.ts:57:81)
[2m[WebServer] [22m[0m [90m 55 |[39m
[2m[WebServer] [22m [90m 56 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 57 |[39m       console[33m.[39merror([32m'[API /api/admin/groups GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 58 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 59 |[39m         {
[2m[WebServer] [22m [90m 60 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/groups [33m400[39m in 411ms[2m (compile: 2ms, proxy.ts: 347ms, render: 62ms)[22m
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/emails/templates [32m200[39m in 647ms[2m (compile: 3ms, proxy.ts: 347ms, render: 296ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 293ms[2m (compile: 3ms, proxy.ts: 239ms, render: 51ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 337ms[2m (compile: 2ms, proxy.ts: 264ms, render: 70ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 279ms[2m (compile: 3ms, proxy.ts: 272ms, render: 5ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/guests GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "groupId"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'adult' | 'child' | 'senior'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "ageType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'adult' | 'child' | 'senior', received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "guestType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "page"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "pageSize"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/guests/route.ts:75:81)
[2m[WebServer] [22m[0m [90m 73 |[39m
[2m[WebServer] [22m [90m 74 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 75 |[39m       console[33m.[39merror([32m'[API /api/admin/guests GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 76 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 77 |[39m         {
[2m[WebServer] [22m [90m 78 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/guests?format=simple [33m400[39m in 309ms[2m (compile: 1564Âµs, proxy.ts: 227ms, render: 81ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[API /api/admin/groups GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'true' | 'false'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "include_count"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'true' | 'false', received null"
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/groups/route.ts:57:81)
[2m[WebServer] [22m[0m [90m 55 |[39m
[2m[WebServer] [22m [90m 56 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 57 |[39m       console[33m.[39merror([32m'[API /api/admin/groups GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 58 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 59 |[39m         {
[2m[WebServer] [22m [90m 60 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/groups [33m400[39m in 370ms[2m (compile: 7ms, proxy.ts: 312ms, render: 51ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 321ms[2m (compile: 9ms, proxy.ts: 308ms, render: 4ms)[22m
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/guests GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "groupId"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'adult' | 'child' | 'senior'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "ageType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'adult' | 'child' | 'senior', received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "guestType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "page"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "pageSize"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/guests/route.ts:75:81)
[2m[WebServer] [22m[0m [90m 73 |[39m
[2m[WebServer] [22m [90m 74 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 75 |[39m       console[33m.[39merror([32m'[API /api/admin/guests GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 76 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 77 |[39m         {
[2m[WebServer] [22m [90m 78 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/guests?format=simple [33m400[39m in 305ms[2m (compile: 1478Âµs, proxy.ts: 249ms, render: 55ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/emails/templates [32m200[39m in 528ms[2m (compile: 6ms, proxy.ts: 311ms, render: 211ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/groups GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'true' | 'false'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "include_count"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'true' | 'false', received null"
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/groups/route.ts:57:81)
[2m[WebServer] [22m[0m [90m 55 |[39m
[2m[WebServer] [22m [90m 56 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 57 |[39m       console[33m.[39merror([32m'[API /api/admin/groups GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 58 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 59 |[39m         {
[2m[WebServer] [22m [90m 60 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/groups [33m400[39m in 425ms[2m (compile: 3ms, proxy.ts: 358ms, render: 64ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/emails/templates [32m200[39m in 765ms[2m (compile: 1545Âµs, proxy.ts: 443ms, render: 321ms)[22m
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜   5 [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:279:7 â€º Email Composition & Templates â€º should preview email before sending (19.6s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ” prevent committing .env to code: https://dotenvx.com/precommit
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 324ms[2m (compile: 3ms, proxy.ts: 266ms, render: 55ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 269ms[2m (compile: 2ms, proxy.ts: 259ms, render: 8ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/groups GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'true' | 'false'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "include_count"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'true' | 'false', received null"
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/groups/route.ts:57:81)
[2m[WebServer] [22m[0m [90m 55 |[39m
[2m[WebServer] [22m [90m 56 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 57 |[39m       console[33m.[39merror([32m'[API /api/admin/groups GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 58 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 59 |[39m         {
[2m[WebServer] [22m [90m 60 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/groups [33m400[39m in 308ms[2m (compile: 5ms, proxy.ts: 255ms, render: 48ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/guests GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "groupId"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'adult' | 'child' | 'senior'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "ageType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'adult' | 'child' | 'senior', received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "guestType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "page"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "pageSize"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/guests/route.ts:75:81)
[2m[WebServer] [22m[0m [90m 73 |[39m
[2m[WebServer] [22m [90m 74 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 75 |[39m       console[33m.[39merror([32m'[API /api/admin/guests GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 76 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 77 |[39m         {
[2m[WebServer] [22m [90m 78 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/guests?format=simple [33m400[39m in 361ms[2m (compile: 3ms, proxy.ts: 310ms, render: 48ms)[22m
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/emails/templates [32m200[39m in 1343ms[2m (compile: 3ms, proxy.ts: 309ms, render: 1031ms)[22m
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜   6 [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:152:7 â€º Email Composition & Templates â€º should use email template with variable substitution (retry #1) (19.7s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
ðŸ§¹ Running comprehensive test cleanup...
ðŸ§¹ Running comprehensive test cleanup...
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 351ms[2m (compile: 4ms, proxy.ts: 296ms, render: 52ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 265ms[2m (compile: 3ms, proxy.ts: 254ms, render: 7ms)[22m
âœ… Comprehensive cleanup complete
  âœ˜   7 [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:95:7 â€º Email Composition & Templates â€º should complete full email composition and sending workflow (retry #1) (19.4s)
âœ… Comprehensive cleanup complete
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
  âœ˜   8 [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:217:7 â€º Email Composition & Templates â€º should select recipients by group (retry #1) (19.8s)
[2m[WebServer] [22m[API /api/admin/guests GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "groupId"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'adult' | 'child' | 'senior'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "ageType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'adult' | 'child' | 'senior', received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "guestType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "page"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "pageSize"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/guests/route.ts:75:81)
[2m[WebServer] [22m[0m [90m 73 |[39m
[2m[WebServer] [22m [90m 74 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 75 |[39m       console[33m.[39merror([32m'[API /api/admin/guests GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 76 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 77 |[39m         {
[2m[WebServer] [22m [90m 78 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/guests?format=simple [33m400[39m in 309ms[2m (compile: 2ms, proxy.ts: 243ms, render: 64ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  enable debug logging with { debug: true }
[2m[WebServer] [22m[API /api/admin/groups GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'true' | 'false'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "include_count"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'true' | 'false', received null"
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/groups/route.ts:57:81)
[2m[WebServer] [22m[0m [90m 55 |[39m
[2m[WebServer] [22m [90m 56 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 57 |[39m       console[33m.[39merror([32m'[API /api/admin/groups GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 58 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 59 |[39m         {
[2m[WebServer] [22m [90m 60 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/groups [33m400[39m in 381ms[2m (compile: 4ms, proxy.ts: 311ms, render: 65ms)[22m
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/emails/templates [32m200[39m in 543ms[2m (compile: 3ms, proxy.ts: 310ms, render: 230ms)[22m
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ” prevent committing .env to code: https://dotenvx.com/precommit
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 274ms[2m (compile: 3ms, proxy.ts: 225ms, render: 47ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 277ms[2m (compile: 5ms, proxy.ts: 228ms, render: 45ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 234ms[2m (compile: 1343Âµs, proxy.ts: 229ms, render: 4ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 253ms[2m (compile: 1568Âµs, proxy.ts: 247ms, render: 5ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/groups GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'true' | 'false'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "include_count"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'true' | 'false', received null"
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/groups/route.ts:57:81)
[2m[WebServer] [22m[0m [90m 55 |[39m
[2m[WebServer] [22m [90m 56 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 57 |[39m       console[33m.[39merror([32m'[API /api/admin/groups GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 58 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 59 |[39m         {
[2m[WebServer] [22m [90m 60 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/groups [33m400[39m in 288ms[2m (compile: 1768Âµs, proxy.ts: 233ms, render: 53ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/guests GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "groupId"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'adult' | 'child' | 'senior'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "ageType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'adult' | 'child' | 'senior', received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "guestType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "page"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "pageSize"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/guests/route.ts:75:81)
[2m[WebServer] [22m[0m [90m 73 |[39m
[2m[WebServer] [22m [90m 74 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 75 |[39m       console[33m.[39merror([32m'[API /api/admin/guests GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 76 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 77 |[39m         {
[2m[WebServer] [22m [90m 78 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/guests?format=simple [33m400[39m in 342ms[2m (compile: 2ms, proxy.ts: 292ms, render: 47ms)[22m
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/emails/templates [32m200[39m in 585ms[2m (compile: 3ms, proxy.ts: 293ms, render: 289ms)[22m
ðŸ§¹ Running comprehensive test cleanup...
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/groups GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'true' | 'false'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "include_count"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'true' | 'false', received null"
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/groups/route.ts:57:81)
[2m[WebServer] [22m[0m [90m 55 |[39m
[2m[WebServer] [22m [90m 56 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 57 |[39m       console[33m.[39merror([32m'[API /api/admin/groups GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 58 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 59 |[39m         {
[2m[WebServer] [22m [90m 60 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/groups [33m400[39m in 296ms[2m (compile: 1125Âµs, proxy.ts: 246ms, render: 49ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/guests GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "groupId"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'adult' | 'child' | 'senior'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "ageType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'adult' | 'child' | 'senior', received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "guestType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "page"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "pageSize"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/guests/route.ts:75:81)
[2m[WebServer] [22m[0m [90m 73 |[39m
[2m[WebServer] [22m [90m 74 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 75 |[39m       console[33m.[39merror([32m'[API /api/admin/guests GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 76 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 77 |[39m         {
[2m[WebServer] [22m [90m 78 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/guests?format=simple [33m400[39m in 354ms[2m (compile: 3ms, proxy.ts: 297ms, render: 53ms)[22m
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/emails/templates [32m200[39m in 541ms[2m (compile: 49ms, proxy.ts: 249ms, render: 243ms)[22m
âœ… Comprehensive cleanup complete
  âœ“  11 [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:398:7 â€º Email Scheduling & Drafts â€º should save email as draft (4.3s)
  -  13 [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:479:8 â€º Bulk Email & Template Management â€º should create and use email template
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
ðŸ§¹ Running comprehensive test cleanup...
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 295ms[2m (compile: 3ms, proxy.ts: 240ms, render: 52ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 248ms[2m (compile: 2ms, proxy.ts: 238ms, render: 8ms)[22m
âœ… Comprehensive cleanup complete
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/groups GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'true' | 'false'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "include_count"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'true' | 'false', received null"
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/groups/route.ts:57:81)
[2m[WebServer] [22m[0m [90m 55 |[39m
[2m[WebServer] [22m [90m 56 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 57 |[39m       console[33m.[39merror([32m'[API /api/admin/groups GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 58 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 59 |[39m         {
[2m[WebServer] [22m [90m 60 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/groups [33m400[39m in 306ms[2m (compile: 1400Âµs, proxy.ts: 237ms, render: 68ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
  âœ˜   9 [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:279:7 â€º Email Composition & Templates â€º should preview email before sending (retry #1) (20.9s)
[2m[WebServer] [22m[API /api/admin/guests GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "groupId"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'adult' | 'child' | 'senior'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "ageType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'adult' | 'child' | 'senior', received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "guestType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "page"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "pageSize"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/guests/route.ts:75:81)
[2m[WebServer] [22m[0m [90m 73 |[39m
[2m[WebServer] [22m [90m 74 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 75 |[39m       console[33m.[39merror([32m'[API /api/admin/guests GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 76 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 77 |[39m         {
[2m[WebServer] [22m [90m 78 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/guests?format=simple [33m400[39m in 369ms[2m (compile: 1296Âµs, proxy.ts: 307ms, render: 60ms)[22m
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/emails/templates [32m200[39m in 492ms[2m (compile: 1333Âµs, proxy.ts: 222ms, render: 268ms)[22m
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ” prevent committing .env to code: https://dotenvx.com/precommit
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 286ms[2m (compile: 3ms, proxy.ts: 228ms, render: 55ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 255ms[2m (compile: 1936Âµs, proxy.ts: 246ms, render: 7ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/groups GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'true' | 'false'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "include_count"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'true' | 'false', received null"
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/groups/route.ts:57:81)
[2m[WebServer] [22m[0m [90m 55 |[39m
[2m[WebServer] [22m [90m 56 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 57 |[39m       console[33m.[39merror([32m'[API /api/admin/groups GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 58 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 59 |[39m         {
[2m[WebServer] [22m [90m 60 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/groups [33m400[39m in 274ms[2m (compile: 1493Âµs, proxy.ts: 222ms, render: 50ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/guests GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "groupId"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'adult' | 'child' | 'senior'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "ageType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'adult' | 'child' | 'senior', received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "guestType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "page"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "pageSize"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/guests/route.ts:75:81)
[2m[WebServer] [22m[0m [90m 73 |[39m
[2m[WebServer] [22m [90m 74 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 75 |[39m       console[33m.[39merror([32m'[API /api/admin/guests GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 76 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 77 |[39m         {
[2m[WebServer] [22m [90m 78 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/guests?format=simple [33m400[39m in 331ms[2m (compile: 3ms, proxy.ts: 276ms, render: 51ms)[22m
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/emails/templates [32m200[39m in 496ms[2m (compile: 2ms, proxy.ts: 275ms, render: 218ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m POST /api/admin/emails/send [32m200[39m in 1447ms[2m (compile: 849ms, proxy.ts: 268ms, render: 329ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 272ms[2m (compile: 7ms, proxy.ts: 257ms, render: 8ms)[22m
  âœ“  15 [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:522:7 â€º Bulk Email & Template Management â€º should sanitize email content for XSS prevention (4.7s)
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 380ms[2m (compile: 61ms, proxy.ts: 226ms, render: 93ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 299ms[2m (compile: 22ms, proxy.ts: 272ms, render: 5ms)[22m
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 463ms[2m (compile: 7ms, proxy.ts: 236ms, render: 219ms)[22m
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 464ms[2m (compile: 3ms, proxy.ts: 241ms, render: 220ms)[22m
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 517ms[2m (compile: 51ms, proxy.ts: 318ms, render: 148ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
  âœ“  14 [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:496:7 â€º Bulk Email & Template Management â€º should send bulk email to all guests (9.6s)
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/groups GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'true' | 'false'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "include_count"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'true' | 'false', received null"
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/groups/route.ts:57:81)
[2m[WebServer] [22m[0m [90m 55 |[39m
[2m[WebServer] [22m [90m 56 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 57 |[39m       console[33m.[39merror([32m'[API /api/admin/groups GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 58 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 59 |[39m         {
[2m[WebServer] [22m [90m 60 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/groups [33m400[39m in 402ms[2m (compile: 24ms, proxy.ts: 295ms, render: 84ms)[22m
[2m[WebServer] [22m[API /api/admin/guests GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "groupId"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'adult' | 'child' | 'senior'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "ageType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'adult' | 'child' | 'senior', received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "guestType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "page"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "pageSize"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/guests/route.ts:75:81)
[2m[WebServer] [22m[0m [90m 73 |[39m
[2m[WebServer] [22m [90m 74 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 75 |[39m       console[33m.[39merror([32m'[API /api/admin/guests GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 76 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 77 |[39m         {
[2m[WebServer] [22m [90m 78 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/guests?format=simple [33m400[39m in 467ms[2m (compile: 111ms, proxy.ts: 302ms, render: 54ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 384ms[2m (compile: 4ms, proxy.ts: 375ms, render: 5ms)[22m
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 386ms[2m (compile: 3ms, proxy.ts: 376ms, render: 7ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/emails/templates [32m200[39m in 598ms[2m (compile: 19ms, proxy.ts: 293ms, render: 286ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 287ms[2m (compile: 1834Âµs, proxy.ts: 238ms, render: 47ms)[22m
  âœ“  16 [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:565:7 â€º Email Management Accessibility â€º should have keyboard navigation in email form (2.8s)
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 254ms[2m (compile: 3ms, proxy.ts: 242ms, render: 9ms)[22m
ðŸ§¹ Running comprehensive test cleanup...
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/guests GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "groupId"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'adult' | 'child' | 'senior'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "ageType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'adult' | 'child' | 'senior', received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "guestType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "page"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "pageSize"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/guests/route.ts:75:81)
[2m[WebServer] [22m[0m [90m 73 |[39m
[2m[WebServer] [22m [90m 74 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 75 |[39m       console[33m.[39merror([32m'[API /api/admin/guests GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 76 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 77 |[39m         {
[2m[WebServer] [22m [90m 78 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/guests?format=simple [33m400[39m in 302ms[2m (compile: 3ms, proxy.ts: 245ms, render: 53ms)[22m
[2m[WebServer] [22m[API /api/admin/groups GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'true' | 'false'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "include_count"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'true' | 'false', received null"
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/groups/route.ts:57:81)
[2m[WebServer] [22m[0m [90m 55 |[39m
[2m[WebServer] [22m [90m 56 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 57 |[39m       console[33m.[39merror([32m'[API /api/admin/groups GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 58 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 59 |[39m         {
[2m[WebServer] [22m [90m 60 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/groups [33m400[39m in 352ms[2m (compile: 4ms, proxy.ts: 247ms, render: 101ms)[22m
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/emails/templates [32m200[39m in 464ms[2m (compile: 1243Âµs, proxy.ts: 233ms, render: 230ms)[22m
  âœ“  17 [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:595:7 â€º Email Management Accessibility â€º should have accessible form elements with ARIA labels (2.5s)
âœ… Comprehensive cleanup complete
  âœ˜  10 [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:359:7 â€º Email Scheduling & Drafts â€º should schedule email for future delivery (19.4s)
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 310ms[2m (compile: 5ms, proxy.ts: 240ms, render: 65ms)[22m
ðŸ§¹ Running comprehensive test cleanup...
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 316ms[2m (compile: 61ms, proxy.ts: 245ms, render: 9ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/guests GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "groupId"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'adult' | 'child' | 'senior'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "ageType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'adult' | 'child' | 'senior', received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "guestType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "page"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "pageSize"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/guests/route.ts:75:81)
[2m[WebServer] [22m[0m [90m 73 |[39m
[2m[WebServer] [22m [90m 74 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 75 |[39m       console[33m.[39merror([32m'[API /api/admin/guests GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 76 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 77 |[39m         {
[2m[WebServer] [22m [90m 78 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/guests?format=simple [33m400[39m in 340ms[2m (compile: 1359Âµs, proxy.ts: 289ms, render: 49ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/groups GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'true' | 'false'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "include_count"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'true' | 'false', received null"
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/groups/route.ts:57:81)
[2m[WebServer] [22m[0m [90m 55 |[39m
[2m[WebServer] [22m [90m 56 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 57 |[39m       console[33m.[39merror([32m'[API /api/admin/groups GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 58 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 59 |[39m         {
[2m[WebServer] [22m [90m 60 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/groups [33m400[39m in 401ms[2m (compile: 7ms, proxy.ts: 341ms, render: 53ms)[22m
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/emails/templates [32m200[39m in 524ms[2m (compile: 1607Âµs, proxy.ts: 245ms, render: 278ms)[22m
âœ… Comprehensive cleanup complete
  âœ˜  12 [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:448:7 â€º Email Scheduling & Drafts â€º should show email history after sending (19.3s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ” prevent committing .env to code: https://dotenvx.com/precommit
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin/emails [32m200[39m in 316ms[2m (compile: 5ms, proxy.ts: 234ms, render: 77ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/emails [33m400[39m in 248ms[2m (compile: 3ms, proxy.ts: 239ms, render: 6ms)[22m
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/groups GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'true' | 'false'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "include_count"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'true' | 'false', received null"
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/groups/route.ts:57:81)
[2m[WebServer] [22m[0m [90m 55 |[39m
[2m[WebServer] [22m [90m 56 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 57 |[39m       console[33m.[39merror([32m'[API /api/admin/groups GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 58 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 59 |[39m         {
[2m[WebServer] [22m [90m 60 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/groups [33m400[39m in 288ms[2m (compile: 1478Âµs, proxy.ts: 237ms, render: 50ms)[22m
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[API /api/admin/guests GET] Validation error: Error [ZodError]: [
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "groupId"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "expected": "'adult' | 'child' | 'senior'",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "ageType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected 'adult' | 'child' | 'senior', received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "invalid_type",
[2m[WebServer] [22m    "expected": "string",
[2m[WebServer] [22m    "received": "null",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "guestType"
[2m[WebServer] [22m    ],
[2m[WebServer] [22m    "message": "Expected string, received null"
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "page"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  },
[2m[WebServer] [22m  {
[2m[WebServer] [22m    "code": "too_small",
[2m[WebServer] [22m    "minimum": 0,
[2m[WebServer] [22m    "type": "number",
[2m[WebServer] [22m    "inclusive": false,
[2m[WebServer] [22m    "exact": false,
[2m[WebServer] [22m    "message": "Number must be greater than 0",
[2m[WebServer] [22m    "path": [
[2m[WebServer] [22m      "pageSize"
[2m[WebServer] [22m    ]
[2m[WebServer] [22m  }
[2m[WebServer] [22m]
[2m[WebServer] [22m    at GET (app/api/admin/guests/route.ts:75:81)
[2m[WebServer] [22m[0m [90m 73 |[39m
[2m[WebServer] [22m [90m 74 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39msuccess) {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 75 |[39m       console[33m.[39merror([32m'[API /api/admin/guests GET] Validation error:'[39m[33m,[39m validation[33m.[39merror)[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                                                                 [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 76 |[39m       [36mreturn[39m [33mNextResponse[39m[33m.[39mjson(
[2m[WebServer] [22m [90m 77 |[39m         {
[2m[WebServer] [22m [90m 78 |[39m           success[33m:[39m [36mfalse[39m[33m,[39m[0m {
[2m[WebServer] [22m  issues: [36m[Array][39m,
[2m[WebServer] [22m  addIssue: [36m[Function (anonymous)][39m,
[2m[WebServer] [22m  addIssues: [36m[Function (anonymous)][39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/admin/guests?format=simple [33m400[39m in 341ms[2m (compile: 1256Âµs, proxy.ts: 289ms, render: 51ms)[22m
[2m[WebServer] [22m[verifyAuth] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m GET /api/admin/emails/templates [32m200[39m in 455ms[2m (compile: 1248Âµs, proxy.ts: 230ms, render: 224ms)[22m
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  18 [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:359:7 â€º Email Scheduling & Drafts â€º should schedule email for future delivery (retry #1) (19.1s)
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  19 [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:448:7 â€º Email Scheduling & Drafts â€º should show email history after sending (retry #1) (19.5s)

ðŸ§¹ E2E Global Teardown Starting...

ðŸ—‘ï¸  Cleaning up test data...
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ðŸ”“ Removing authentication state...
   Removed: .auth/admin.json
   Removed empty .auth directory
âœ… Authentication state removed

ðŸ“Š Execution Summary:
   Duration: 1.66s
   Errors: 0
   Status: âœ… Clean teardown

âœ¨ E2E Global Teardown Complete!



  1) [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:95:7 â€º Email Composition & Templates â€º should complete full email composition and sending workflow 

    TimeoutError: locator.selectOption: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('select#recipients')[22m
    [2m    - locator resolved to <select multiple required="" id="recipients" aria-label="Select guest recipients" class="w-full px-3 py-2 border border-sage-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-jungle-500 min-h-[120px]"></select>[22m
    [2m  - attempting select option action[22m
    [2m    2 Ã— waiting for element to be visible and enabled[22m
    [2m      - did not find some options[22m
    [2m    - retrying select option action[22m
    [2m    - waiting 20ms[22m
    [2m    2 Ã— waiting for element to be visible and enabled[22m
    [2m      - did not find some options[22m
    [2m    - retrying select option action[22m
    [2m      - waiting 100ms[22m
    [2m    8 Ã— waiting for element to be visible and enabled[22m
    [2m      - did not find some options[22m
    [2m    - retrying select option action[22m
    [2m      - waiting 500ms[22m
    [2m    - waiting for" http://localhost:3000/admin/emails" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/admin/emails"[22m
    [2m    - waiting for element to be visible and enabled[22m
    [2m  - element was detached from the DOM, retrying[22m


      113 |     // Select recipients from multi-select dropdown
      114 |     const recipientsSelect = page.locator('select#recipients');
    > 115 |     await recipientsSelect.selectOption([testGuestId1, testGuestId2]);
          |                            ^
      116 |     await page.waitForTimeout(300);
      117 |
      118 |     // Fill in subject
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/emailManagement.spec.ts:115:28

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-751e6-sition-and-sending-workflow-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-751e6-sition-and-sending-workflow-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-emailManagement-Emai-751e6-sition-and-sending-workflow-chromium/error-context.md

    Retry #1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    TimeoutError: locator.selectOption: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('select#recipients')[22m
    [2m    - locator resolved to <select multiple required="" id="recipients" aria-label="Select guest recipients" class="w-full px-3 py-2 border border-sage-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-jungle-500 min-h-[120px]"></select>[22m
    [2m  - attempting select option action[22m
    [2m    2 Ã— waiting for element to be visible and enabled[22m
    [2m      - did not find some options[22m
    [2m    - retrying select option action[22m
    [2m    - waiting 20ms[22m
    [2m    2 Ã— waiting for element to be visible and enabled[22m
    [2m      - did not find some options[22m
    [2m    - retrying select option action[22m
    [2m      - waiting 100ms[22m
    [2m    30 Ã— waiting for element to be visible and enabled[22m
    [2m       - did not find some options[22m
    [2m     - retrying select option action[22m
    [2m       - waiting 500ms[22m


      113 |     // Select recipients from multi-select dropdown
      114 |     const recipientsSelect = page.locator('select#recipients');
    > 115 |     await recipientsSelect.selectOption([testGuestId1, testGuestId2]);
          |                            ^
      116 |     await page.waitForTimeout(300);
      117 |
      118 |     // Fill in subject
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/emailManagement.spec.ts:115:28

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-751e6-sition-and-sending-workflow-chromium-retry1/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-751e6-sition-and-sending-workflow-chromium-retry1/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-emailManagement-Emai-751e6-sition-and-sending-workflow-chromium-retry1/error-context.md

    attachment #4: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-751e6-sition-and-sending-workflow-chromium-retry1/trace.zip
    Usage:

        npx playwright show-trace test-results/admin-emailManagement-Emai-751e6-sition-and-sending-workflow-chromium-retry1/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  2) [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:152:7 â€º Email Composition & Templates â€º should use email template with variable substitution 

    TimeoutError: locator.selectOption: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('select#recipients')[22m
    [2m    - locator resolved to <select multiple required="" id="recipients" aria-label="Select guest recipients" class="w-full px-3 py-2 border border-sage-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-jungle-500 min-h-[120px]"></select>[22m
    [2m  - attempting select option action[22m
    [2m    2 Ã— waiting for element to be visible and enabled[22m
    [2m      - did not find some options[22m
    [2m    - retrying select option action[22m
    [2m    - waiting 20ms[22m
    [2m    2 Ã— waiting for element to be visible and enabled[22m
    [2m      - did not find some options[22m
    [2m    - retrying select option action[22m
    [2m      - waiting 100ms[22m
    [2m    9 Ã— waiting for element to be visible and enabled[22m
    [2m      - did not find some options[22m
    [2m    - retrying select option action[22m
    [2m      - waiting 500ms[22m
    [2m  - element was detached from the DOM, retrying[22m


      183 |     // Select recipient
      184 |     const recipientsSelect = page.locator('select#recipients');
    > 185 |     await recipientsSelect.selectOption([testGuestId1]);
          |                            ^
      186 |     await page.waitForTimeout(300);
      187 |
      188 |     // Fill in subject if not filled by template
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/emailManagement.spec.ts:185:28

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-021d4--with-variable-substitution-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-021d4--with-variable-substitution-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-emailManagement-Emai-021d4--with-variable-substitution-chromium/error-context.md

    Retry #1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    TimeoutError: locator.selectOption: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('select#recipients')[22m
    [2m    - locator resolved to <select multiple required="" id="recipients" aria-label="Select guest recipients" class="w-full px-3 py-2 border border-sage-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-jungle-500 min-h-[120px]"></select>[22m
    [2m  - attempting select option action[22m
    [2m    2 Ã— waiting for element to be visible and enabled[22m
    [2m      - did not find some options[22m
    [2m    - retrying select option action[22m
    [2m    - waiting 20ms[22m
    [2m    2 Ã— waiting for element to be visible and enabled[22m
    [2m      - did not find some options[22m
    [2m    - retrying select option action[22m
    [2m      - waiting 100ms[22m
    [2m    29 Ã— waiting for element to be visible and enabled[22m
    [2m       - did not find some options[22m
    [2m     - retrying select option action[22m
    [2m       - waiting 500ms[22m


      183 |     // Select recipient
      184 |     const recipientsSelect = page.locator('select#recipients');
    > 185 |     await recipientsSelect.selectOption([testGuestId1]);
          |                            ^
      186 |     await page.waitForTimeout(300);
      187 |
      188 |     // Fill in subject if not filled by template
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/emailManagement.spec.ts:185:28

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-021d4--with-variable-substitution-chromium-retry1/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-021d4--with-variable-substitution-chromium-retry1/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-emailManagement-Emai-021d4--with-variable-substitution-chromium-retry1/error-context.md

    attachment #4: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-021d4--with-variable-substitution-chromium-retry1/trace.zip
    Usage:

        npx playwright show-trace test-results/admin-emailManagement-Emai-021d4--with-variable-substitution-chromium-retry1/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  3) [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:217:7 â€º Email Composition & Templates â€º should select recipients by group 

    TimeoutError: locator.selectOption: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('select#groups')[22m
    [2m    - locator resolved to <select multiple id="groups" required="" class="w-full px-3 py-2 border border-sage-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-jungle-500 min-h-[120px]"></select>[22m
    [2m  - attempting select option action[22m
    [2m    2 Ã— waiting for element to be visible and enabled[22m
    [2m      - did not find some options[22m
    [2m    - retrying select option action[22m
    [2m    - waiting 20ms[22m
    [2m    2 Ã— waiting for element to be visible and enabled[22m
    [2m      - did not find some options[22m
    [2m    - retrying select option action[22m
    [2m      - waiting 100ms[22m
    [2m    8 Ã— waiting for element to be visible and enabled[22m
    [2m      - did not find some options[22m
    [2m    - retrying select option action[22m
    [2m      - waiting 500ms[22m
    [2m    - waiting for" http://localhost:3000/admin/emails" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/admin/emails"[22m
    [2m    - waiting for element to be visible and enabled[22m
    [2m  - element was detached from the DOM, retrying[22m


      234 |     // Select group from multi-select dropdown
      235 |     const groupsSelect = page.locator('select#groups');
    > 236 |     await groupsSelect.selectOption([testGroupId]);
          |                        ^
      237 |     await page.waitForTimeout(300);
      238 |
      239 |     // Fill in subject and body
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/emailManagement.spec.ts:236:24

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-eb33e--select-recipients-by-group-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-eb33e--select-recipients-by-group-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-emailManagement-Emai-eb33e--select-recipients-by-group-chromium/error-context.md

    Retry #1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    TimeoutError: locator.selectOption: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('select#groups')[22m
    [2m    - locator resolved to <select multiple id="groups" required="" class="w-full px-3 py-2 border border-sage-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-jungle-500 min-h-[120px]"></select>[22m
    [2m  - attempting select option action[22m
    [2m    2 Ã— waiting for element to be visible and enabled[22m
    [2m      - did not find some options[22m
    [2m    - retrying select option action[22m
    [2m    - waiting 20ms[22m
    [2m    2 Ã— waiting for element to be visible and enabled[22m
    [2m      - did not find some options[22m
    [2m    - retrying select option action[22m
    [2m      - waiting 100ms[22m
    [2m    30 Ã— waiting for element to be visible and enabled[22m
    [2m       - did not find some options[22m
    [2m     - retrying select option action[22m
    [2m       - waiting 500ms[22m


      234 |     // Select group from multi-select dropdown
      235 |     const groupsSelect = page.locator('select#groups');
    > 236 |     await groupsSelect.selectOption([testGroupId]);
          |                        ^
      237 |     await page.waitForTimeout(300);
      238 |
      239 |     // Fill in subject and body
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/emailManagement.spec.ts:236:24

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-eb33e--select-recipients-by-group-chromium-retry1/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-eb33e--select-recipients-by-group-chromium-retry1/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-emailManagement-Emai-eb33e--select-recipients-by-group-chromium-retry1/error-context.md

    attachment #4: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-eb33e--select-recipients-by-group-chromium-retry1/trace.zip
    Usage:

        npx playwright show-trace test-results/admin-emailManagement-Emai-eb33e--select-recipients-by-group-chromium-retry1/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  4) [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:279:7 â€º Email Composition & Templates â€º should preview email before sending 

    TimeoutError: page.waitForFunction: Timeout 15000ms exceeded.

       8 |  */
       9 | async function waitForGuestOptions(page: Page) {
    > 10 |   await page.waitForFunction(() => {
         |              ^
      11 |     const select = document.querySelector('select#recipients');
      12 |     return select && select.options.length > 1; // More than just placeholder
      13 |   }, { timeout: 10000 });
        at waitForGuestOptions (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/emailManagement.spec.ts:10:14)
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/emailManagement.spec.ts:294:11

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-b3508-review-email-before-sending-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-b3508-review-email-before-sending-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-emailManagement-Emai-b3508-review-email-before-sending-chromium/error-context.md

    Retry #1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    TimeoutError: page.waitForFunction: Timeout 15000ms exceeded.

       8 |  */
       9 | async function waitForGuestOptions(page: Page) {
    > 10 |   await page.waitForFunction(() => {
         |              ^
      11 |     const select = document.querySelector('select#recipients');
      12 |     return select && select.options.length > 1; // More than just placeholder
      13 |   }, { timeout: 10000 });
        at waitForGuestOptions (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/emailManagement.spec.ts:10:14)
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/emailManagement.spec.ts:294:11

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-b3508-review-email-before-sending-chromium-retry1/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-b3508-review-email-before-sending-chromium-retry1/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-emailManagement-Emai-b3508-review-email-before-sending-chromium-retry1/error-context.md

    attachment #4: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-b3508-review-email-before-sending-chromium-retry1/trace.zip
    Usage:

        npx playwright show-trace test-results/admin-emailManagement-Emai-b3508-review-email-before-sending-chromium-retry1/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  5) [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:359:7 â€º Email Scheduling & Drafts â€º should schedule email for future delivery 

    TimeoutError: page.waitForFunction: Timeout 15000ms exceeded.

       8 |  */
       9 | async function waitForGuestOptions(page: Page) {
    > 10 |   await page.waitForFunction(() => {
         |              ^
      11 |     const select = document.querySelector('select#recipients');
      12 |     return select && select.options.length > 1; // More than just placeholder
      13 |   }, { timeout: 10000 });
        at waitForGuestOptions (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/emailManagement.spec.ts:10:14)
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/emailManagement.spec.ts:374:11

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-a555c-e-email-for-future-delivery-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-a555c-e-email-for-future-delivery-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-emailManagement-Emai-a555c-e-email-for-future-delivery-chromium/error-context.md

    Retry #1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    TimeoutError: page.waitForFunction: Timeout 15000ms exceeded.

       8 |  */
       9 | async function waitForGuestOptions(page: Page) {
    > 10 |   await page.waitForFunction(() => {
         |              ^
      11 |     const select = document.querySelector('select#recipients');
      12 |     return select && select.options.length > 1; // More than just placeholder
      13 |   }, { timeout: 10000 });
        at waitForGuestOptions (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/emailManagement.spec.ts:10:14)
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/emailManagement.spec.ts:374:11

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-a555c-e-email-for-future-delivery-chromium-retry1/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-a555c-e-email-for-future-delivery-chromium-retry1/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-emailManagement-Emai-a555c-e-email-for-future-delivery-chromium-retry1/error-context.md

    attachment #4: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-a555c-e-email-for-future-delivery-chromium-retry1/trace.zip
    Usage:

        npx playwright show-trace test-results/admin-emailManagement-Emai-a555c-e-email-for-future-delivery-chromium-retry1/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  6) [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:448:7 â€º Email Scheduling & Drafts â€º should show email history after sending 

    TimeoutError: page.waitForFunction: Timeout 15000ms exceeded.

       8 |  */
       9 | async function waitForGuestOptions(page: Page) {
    > 10 |   await page.waitForFunction(() => {
         |              ^
      11 |     const select = document.querySelector('select#recipients');
      12 |     return select && select.options.length > 1; // More than just placeholder
      13 |   }, { timeout: 10000 });
        at waitForGuestOptions (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/emailManagement.spec.ts:10:14)
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/emailManagement.spec.ts:462:11

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-4c68e-email-history-after-sending-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-4c68e-email-history-after-sending-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-emailManagement-Emai-4c68e-email-history-after-sending-chromium/error-context.md

    Retry #1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    TimeoutError: page.waitForFunction: Timeout 15000ms exceeded.

       8 |  */
       9 | async function waitForGuestOptions(page: Page) {
    > 10 |   await page.waitForFunction(() => {
         |              ^
      11 |     const select = document.querySelector('select#recipients');
      12 |     return select && select.options.length > 1; // More than just placeholder
      13 |   }, { timeout: 10000 });
        at waitForGuestOptions (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/emailManagement.spec.ts:10:14)
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/emailManagement.spec.ts:462:11

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-4c68e-email-history-after-sending-chromium-retry1/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-4c68e-email-history-after-sending-chromium-retry1/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-emailManagement-Emai-4c68e-email-history-after-sending-chromium-retry1/error-context.md

    attachment #4: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-emailManagement-Emai-4c68e-email-history-after-sending-chromium-retry1/trace.zip
    Usage:

        npx playwright show-trace test-results/admin-emailManagement-Emai-4c68e-email-history-after-sending-chromium-retry1/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  6 failed
    [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:95:7 â€º Email Composition & Templates â€º should complete full email composition and sending workflow 
    [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:152:7 â€º Email Composition & Templates â€º should use email template with variable substitution 
    [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:217:7 â€º Email Composition & Templates â€º should select recipients by group 
    [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:279:7 â€º Email Composition & Templates â€º should preview email before sending 
    [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:359:7 â€º Email Scheduling & Drafts â€º should schedule email for future delivery 
    [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:448:7 â€º Email Scheduling & Drafts â€º should show email history after sending 
  1 skipped
  6 passed (1.8m)

[36m  Serving HTML report at http://localhost:61816. Press Ctrl+C to quit.[39m
