
> destination-wedding-platform@0.1.0 test:e2e
> playwright test __tests__/e2e/auth/guestAuth.spec.ts

[dotenv@17.2.4] injecting env (24) from .env.e2e -- tip: ðŸ” prevent committing .env to code: https://dotenvx.com/precommit

ðŸš€ E2E Global Setup Starting...

ðŸ“Š Verifying test database connection...
âœ… Test database connected

ðŸ§¹ Cleaning up test data...
   Cleaning up leftover test data...
   Cleaned up sessions for 2 test guests
   Test data cleanup complete
âœ… Test data cleaned

ðŸ‘¤ Creating test guest...
   Warmup guest already exists: warmup@example.com
   Created test guest: test@example.com (ID: cd693691-f06e-4abc-bd33-60a3665b8543)
âœ… Test guest created

ðŸ“¦ Creating comprehensive test data...
   Creating location hierarchy...
   Location hierarchy already exists
   Creating events...
   Events already exist
   Creating activities...
   Warning: Could not create comprehensive test data: Failed to create ceremony activity: Could not find the 'cost_per_guest' column of 'activities' in the schema cache
   Some E2E tests may fail due to missing data
âœ… Comprehensive test data created

ðŸŒ Verifying Next.js server...
âœ… Next.js server is running

ðŸ”¥ Warming up API routes...
   Warming up 3 guest auth routes with retry logic...
   âœ… Route ready: /api/guest-auth/email-match (attempt 1/5, status: 200)
   âœ… Route ready: /api/guest-auth/magic-link/request (attempt 1/5, status: 400)
   âœ… Route ready: /api/guest-auth/magic-link/verify (attempt 1/5, status: 400)
   âœ… Guest auth routes warmup complete
âœ… API routes warmed up

ðŸ” Setting up admin authentication...
   Attempting browser-based admin login: admin@example.com
   Navigating to http://localhost:3000/auth/login...
   Page loaded, filling form...
   Form filled, submitting...
   Current URL after submit: http://localhost:3000/admin
   âœ… Successfully logged in via browser
   âœ… Authentication state saved
âœ… Admin authentication saved

âœ¨ E2E Global Setup Complete!


Running 15 tests using 4 workers

  -   1 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:235:8 â€º Guest Authentication â€º should show loading state during authentication
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  suppress all logs with { quiet: true }
[Worker 0] Created test guest: {
  email: [32m'test-w0-1770446118842-wnar19o9@example.com'[39m,
  id: [32m'5bac6147-20d4-4290-b042-abe5375de947'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'af72a707-25f4-44f8-903d-8425c3afac18'[39m
}
[Worker 2] Created test guest: {
  email: [32m'test-w2-1770446118879-j7puu6zw@example.com'[39m,
  id: [32m'221bdbcc-2f4d-49c6-8ec9-53cf9dc850ce'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'782d4648-23ac-4903-911f-0916ca62e1cd'[39m
}
[Worker 1] Created test guest: {
  email: [32m'test-w1-1770446118925-2d9pcrub@example.com'[39m,
  id: [32m'afc6b5e8-cf97-494c-9cc8-5fba8050f38b'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'753693f5-0c1f-4b6e-a7fc-dca7a189eb76'[39m
}
[Worker 3] Created test guest: {
  email: [32m'test-w3-1770446118949-710aobyo@example.com'[39m,
  id: [32m'66ff2dcd-4d76-49ec-9226-73306c29c6ba'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'39a8bcfb-a247-4f91-b7f9-8e5c0145e3e7'[39m
}
[Worker 0] âœ… Verified guest exists: {
  email: [32m'test-w0-1770446118842-wnar19o9@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 2] âœ… Verified guest exists: {
  email: [32m'test-w2-1770446118879-j7puu6zw@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 1] âœ… Verified guest exists: {
  email: [32m'test-w1-1770446118925-2d9pcrub@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 3] âœ… Verified guest exists: {
  email: [32m'test-w3-1770446118949-710aobyo@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Browser info] %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[Browser log] [HMR] connected
[Test] About to click submit button
  âœ“   3 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:222:7 â€º Guest Authentication â€º should show error for invalid email format (8.8s)
[Worker 2] Created test guest: {
  email: [32m'test-w2-1770446128028-addnyxri@example.com'[39m,
  id: [32m'301df314-14f4-441f-9ea6-2cf39053644f'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'50f0cba9-c5ef-4860-983d-e2a7c5916694'[39m
}
[Browser warning] Cookie not set yet, waiting additional time...
[Worker 2] âœ… Verified guest exists: {
  email: [32m'test-w2-1770446128028-addnyxri@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ“   4 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:207:7 â€º Guest Authentication â€º should show error for non-existent email (9.6s)
[Browser log] [Fast Refresh] rebuilding
[Worker 1] Created test guest: {
  email: [32m'test-w1-1770446128969-fvp4h9wq@example.com'[39m,
  id: [32m'60d52715-0121-43aa-ae2e-2b20b8ee30fc'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'bbff0478-66ec-423f-b783-ec5bd7d05e4c'[39m
}
[Worker 1] âœ… Verified guest exists: {
  email: [32m'test-w1-1770446128969-fvp4h9wq@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Browser log] [Fast Refresh] done in 939ms
[Browser log] [Fast Refresh] rebuilding
[Browser log] [Fast Refresh] done in 288ms
[Browser info] %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[Browser log] %c%s%c [GuestDashboard] Session check: background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px  Server   {hasToken: true, tokenPrefix: e852d0ba}
[Browser log] %c%s%c [GuestDashboard] Session query result: background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px  Server   {found: true, guestId: 5bac6147-20d4-4290-b042-abe5375de947}
[Browser log] %c%s%c [GuestDashboard] Guest query result: background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px  Server   {found: true, email: test-w0-1770446118842-wnar19o9@example.com}
[Browser log] %c%s%c [GuestDashboard] Rendering dashboard for guest: background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px  Server   test-w0-1770446118842-wnar19o9@example.com
  âœ“   5 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:261:7 â€º Guest Authentication â€º should create session cookie on successful authentication (17.6s)
[Browser log] [HMR] connected
[Worker 3] Created test guest: {
  email: [32m'test-w3-1770446136933-xpnuvvql@example.com'[39m,
  id: [32m'fe37d1a4-44a5-47c2-b18a-eb5416b889ab'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'e7408421-d52f-483a-bb59-e1ad8a175a10'[39m
}
[Worker 3] âœ… Verified guest exists: {
  email: [32m'test-w3-1770446136933-xpnuvvql@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Browser log] [Fast Refresh] rebuilding
=== Navigation failed, dumping console logs ===
[Browser info] %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[Browser log] [HMR] connected
[Browser warning] Cookie not set yet, waiting additional time...
[Browser log] [Fast Refresh] rebuilding
[Browser log] [Fast Refresh] done in 939ms
[Browser log] [Fast Refresh] rebuilding
[Browser log] [Fast Refresh] done in 288ms
[Browser info] %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[Browser log] %c%s%c [GuestDashboard] Session check: background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px  Server   {hasToken: true, tokenPrefix: e852d0ba}
[Browser log] %c%s%c [GuestDashboard] Session query result: background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px  Server   {found: true, guestId: 5bac6147-20d4-4290-b042-abe5375de947}
[Browser log] %c%s%c [GuestDashboard] Guest query result: background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px  Server   {found: true, email: test-w0-1770446118842-wnar19o9@example.com}
[Browser log] %c%s%c [GuestDashboard] Rendering dashboard for guest: background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px  Server   test-w0-1770446118842-wnar19o9@example.com
[Browser log] [HMR] connected
[Browser log] [Fast Refresh] rebuilding
=== Current URL === http://localhost:3000/guest/dashboard
[Browser log] [Fast Refresh] done in 1038ms
[Browser log] [Fast Refresh] rebuilding
  âœ˜   2 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:157:7 â€º Guest Authentication â€º should successfully authenticate with email matching (20.6s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  override existing env vars with { override: true }
[Worker 4] Created test guest: {
  email: [32m'test-w4-1770446140831-l2gg82t0@example.com'[39m,
  id: [32m'8e73eef8-a20d-4df7-a671-8cbbdad43d94'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'287ef27c-57fe-4e33-86da-854a863279bf'[39m
}
[Worker 4] âœ… Verified guest exists: {
  email: [32m'test-w4-1770446140831-l2gg82t0@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ˜   7 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:351:7 â€º Guest Authentication â€º should show success message after requesting magic link (20.3s)
  âœ“   6 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:287:7 â€º Guest Authentication â€º should successfully request and verify magic link (21.8s)
  âœ“   8 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:393:7 â€º Guest Authentication â€º should show error for expired magic link (13.1s)
[Worker 2] Created test guest: {
  email: [32m'test-w2-1770446149949-d3ammlqj@example.com'[39m,
  id: [32m'ee774ed3-a1ea-4758-96da-562843841d3d'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'd9a72125-0801-4275-82b4-89b90a3c9299'[39m
}
[Worker 3] Created test guest: {
  email: [32m'test-w3-1770446150084-5azfd3du@example.com'[39m,
  id: [32m'1e2cbcd9-4684-4f8b-bd88-9d3d6d20e1d6'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'd2f3d0a6-08bd-4f2f-a6b3-4c1b8ecbcb9f'[39m
}
[Worker 2] âœ… Verified guest exists: {
  email: [32m'test-w2-1770446149949-d3ammlqj@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 3] âœ… Verified guest exists: {
  email: [32m'test-w3-1770446150084-5azfd3du@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ” prevent committing .env to code: https://dotenvx.com/precommit
[Worker 5] Created test guest: {
  email: [32m'test-w5-1770446151497-5coz5z4e@example.com'[39m,
  id: [32m'48ff5dba-1d65-4034-ab9b-41fa2ec705b7'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'3bffd1fc-b97b-4464-860d-db9ee4ab573f'[39m
}
[Worker 5] âœ… Verified guest exists: {
  email: [32m'test-w5-1770446151497-5coz5z4e@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ˜   9 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:427:7 â€º Guest Authentication â€º should show error for already used magic link (24.6s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  override existing env vars with { override: true }
[Worker 6] Created test guest: {
  email: [32m'test-w6-1770446171335-abyp4h3g@example.com'[39m,
  id: [32m'5272de92-eed9-4690-87f7-ca72d6da2321'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'ddb3073d-b1f1-4c0f-9f38-c574b5145d1e'[39m
}
[Worker 6] âœ… Verified guest exists: {
  email: [32m'test-w6-1770446171335-abyp4h3g@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ˜  10 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:512:7 â€º Guest Authentication â€º should complete logout flow (43.8s)
  âœ˜  11 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:579:7 â€º Guest Authentication â€º should persist authentication across page refreshes (43.7s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild
  âœ“  13 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:607:7 â€º Guest Authentication â€º should switch between authentication tabs (24.6s)
[Worker 7] Created test guest: {
  email: [32m'test-w7-1770446196417-syiebrua@example.com'[39m,
  id: [32m'889c2937-4421-419f-ad97-43677018216e'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'1a9a7b55-2df6-4188-b144-4478357fcef9'[39m
}
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops
[Worker 7] âœ… Verified guest exists: {
  email: [32m'test-w7-1770446196417-syiebrua@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 8] Created test guest: {
  email: [32m'test-w8-1770446197140-5aoo435b@example.com'[39m,
  id: [32m'd99d42ac-dcf8-4f8d-b673-5655025672f9'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'2b9a8f64-5ae2-4d1c-ad27-3d823a0bde06'[39m
}
[Worker 8] âœ… Verified guest exists: {
  email: [32m'test-w8-1770446197140-5aoo435b@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ“  12 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:483:7 â€º Guest Authentication â€º should show error for invalid or missing token (46.4s)
  âœ“  14 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:650:7 â€º Guest Authentication â€º should handle authentication errors gracefully (5.3s)
  âœ˜  15 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:695:7 â€º Guest Authentication â€º should log authentication events in audit log (5.4s)

ðŸ§¹ E2E Global Teardown Starting...

ðŸ—‘ï¸  Cleaning up test data...
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ðŸ”“ Removing authentication state...
   Removed: .auth/user.json
   Removed empty .auth directory
âœ… Authentication state removed

ðŸ“Š Execution Summary:
   Duration: 2.10s
   Errors: 0
   Status: âœ… Clean teardown

âœ¨ E2E Global Teardown Complete!



  1) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:157:7 â€º Guest Authentication â€º should successfully authenticate with email matching 

    TimeoutError: page.waitForURL: Timeout 15000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "/guest/dashboard" until "networkidle"
      navigated to "http://localhost:3000/guest/dashboard"
      "domcontentloaded" event fired
      "load" event fired
    ============================================================

      187 |     try {
      188 |       await Promise.all([
    > 189 |         page.waitForURL('/guest/dashboard', { 
          |              ^
      190 |           timeout: 15000,
      191 |           waitUntil: 'networkidle'
      192 |         }),
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:189:14

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-1ea91-nticate-with-email-matching-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-1ea91-nticate-with-email-matching-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-1ea91-nticate-with-email-matching-chromium/error-context.md

  2) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:351:7 â€º Guest Authentication â€º should show success message after requesting magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoHaveValue[2m([22m[32mexpected[39m[2m)[22m failed

    Locator: locator('#magic-link-input')
    Expected: [32m""[39m
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toHaveValue" with timeout 10000ms[22m
    [2m  - waiting for locator('#magic-link-input')[22m
    [2m    9 Ã— locator resolved to <input value="" required="" type="email" id="magic-link-input" placeholder="your.email@example.com" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 disabled:bg-gray-100 disabled:cursor-not-allowed"/>[22m
    [2m      - unexpected value "test-w1-1770446128969-fvp4h9wq@example.com"[22m
    [2m    - waiting for" http://localhost:3000/auth/guest-login" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/auth/guest-login"[22m


      388 |     // Verify email input was cleared
      389 |     const emailInput = page.locator('#magic-link-input');
    > 390 |     await expect(emailInput).toHaveValue('');
          |                              ^
      391 |   });
      392 |
      393 |   test('should show error for expired magic link', async ({ page }) => {
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:390:30

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-71b1d-after-requesting-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-71b1d-after-requesting-magic-link-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-71b1d-after-requesting-magic-link-chromium/error-context.md

  3) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:427:7 â€º Guest Authentication â€º should show error for already used magic link 

    TimeoutError: page.waitForURL: Timeout 10000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "/guest/dashboard" until "load"
      navigated to "http://localhost:3000/auth/guest-login/verify?token=502af4ecf0d2626be2eaa77959dc827dbd6de8ba5974d317298a7dcb74ab38c3"
      navigated to "http://localhost:3000/guest/dashboard"
      "domcontentloaded" event fired
    ============================================================

      468 |     // Use the token once
      469 |     await page.goto(`/auth/guest-login/verify?token=${token}`);
    > 470 |     await page.waitForURL('/guest/dashboard', { timeout: 10000 });
          |                ^
      471 |
      472 |     // Try to use the same token again
      473 |     await page.goto(`/auth/guest-login/verify?token=${token}`);
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:470:16

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-fb7a8-for-already-used-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-fb7a8-for-already-used-magic-link-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-fb7a8-for-already-used-magic-link-chromium/error-context.md

  4) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:512:7 â€º Guest Authentication â€º should complete logout flow 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/guest/dashboard", waiting until "load"[22m


      556 |     if (!currentUrl.includes('/auth/guest-login')) {
      557 |       // If not redirected yet, try navigating to a protected page
    > 558 |       await page.goto('/guest/dashboard');
          |                  ^
      559 |       await page.waitForTimeout(1000);
      560 |     }
      561 |
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:558:18

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-b7d01-should-complete-logout-flow-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-b7d01-should-complete-logout-flow-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-b7d01-should-complete-logout-flow-chromium/error-context.md

  5) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:579:7 â€º Guest Authentication â€º should persist authentication across page refreshes 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/guest/events", waiting until "load"[22m


      588 |
      589 |     // Step 2: Navigate to different pages
    > 590 |     await page.goto('/guest/events');
          |                ^
      591 |     await expect(page).toHaveURL('/guest/events');
      592 |
      593 |     // Step 3: Refresh page
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:590:16

    attachment #1: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-2d8a3-ation-across-page-refreshes-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-2d8a3-ation-across-page-refreshes-chromium/error-context.md

  6) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:695:7 â€º Guest Authentication â€º should log authentication events in audit log 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoHaveLength[2m([22m[32mexpected[39m[2m)[22m

    Expected length: [32m1[39m
    Received length: [31m0[39m
    Received array:  [31m[][39m

      730 |
      731 |     expect(loginError).toBeNull();
    > 732 |     expect(loginLogs).toHaveLength(1);
          |                       ^
      733 |     expect(loginLogs![0].details.auth_method).toBe('email_matching');
      734 |     expect(loginLogs![0].details.email).toBe(testGuestEmail);
      735 |
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:732:23

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-c413d-ication-events-in-audit-log-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-c413d-ication-events-in-audit-log-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-c413d-ication-events-in-audit-log-chromium/error-context.md

  6 failed
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:157:7 â€º Guest Authentication â€º should successfully authenticate with email matching 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:351:7 â€º Guest Authentication â€º should show success message after requesting magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:427:7 â€º Guest Authentication â€º should show error for already used magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:512:7 â€º Guest Authentication â€º should complete logout flow 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:579:7 â€º Guest Authentication â€º should persist authentication across page refreshes 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:695:7 â€º Guest Authentication â€º should log authentication events in audit log 
  1 skipped
  8 passed (1.7m)

[36m  Serving HTML report at http://localhost:62284. Press Ctrl+C to quit.[39m

[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '66221a56...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '66221a56...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '66221a56...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '57a318df...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '57a318df...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '57a318df...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '57a318df...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Magic Link Request] Processing request for email: test-w1-1770446129953-1l8toqd6@example.com
[2m[WebServer] [22m[Magic Link Request] Looking for guest by email...
[Worker 3] Created test guest: {
  email: [32m'test-w3-1770446137112-tvotz7q0@example.com'[39m,
  id: [32m'310c6011-e833-4e12-a0e3-5419cfc4cbd6'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'8cbef0a5-9207-4dc8-a780-3d9e9d83f5f7'[39m
}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'b0e70f38'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'b0e70f38'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'b0e70f38'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'b0e70f38'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Magic Link Request] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  guestId: [32m'60d52715-0121-43aa-ae2e-2b20b8ee30fc'[39m,
[2m[WebServer] [22m  authMethod: [32m'magic_link'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'e852d0ba...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'e852d0ba...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'e852d0ba...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[Worker 3] âœ… Verified guest exists: {
  email: [32m'test-w3-1770446137112-tvotz7q0@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'e852d0ba...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Magic Link Request] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  guestId: [32m'301df314-14f4-441f-9ea6-2cf39053644f'[39m,
[2m[WebServer] [22m  authMethod: [32m'magic_link'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[Magic Link Request] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  guestId: [32m'40970ce3-c12f-492b-90c1-a14cc949dda7'[39m,
[2m[WebServer] [22m  authMethod: [32m'magic_link'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mMagic link for test-w1-1770446128969-fvp4h9wq@example.com: http://localhost:3000/auth/guest-login/verify?token=5b8bbd0aeb5b1f66e3081db0360b2975a9c620f8b808267da70e95c21239263a
[2m[WebServer] [22m POST /api/guest-auth/magic-link/request [32m200[39m in 3.0s[2m (compile: 1341ms, proxy.ts: 884ms, render: 743ms)[22m
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'e852d0ba'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'e852d0ba'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '66221a56'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '57a318df'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '57a318df'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '66221a56'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '57a318df'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
  âœ“   4 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:157:7 â€º Guest Authentication â€º should successfully authenticate with email matching (18.6s)
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '57a318df'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '66221a56'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '66221a56'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22mMagic link for test-w2-1770446128045-fqhyoh38@example.com: http://localhost:3000/auth/guest-login/verify?token=3abc61d09606db34536ca7feac33f7a9e28890a823906d4b4f0ad7421d980a13
[2m[WebServer] [22m POST /api/guest-auth/magic-link/request [32m200[39m in 2.6s[2m (compile: 304ms, proxy.ts: 1522ms, render: 764ms)[22m
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'e852d0ba'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'e852d0ba'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Magic Link Request] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  guestId: [32m'ae9e4911-708d-40f9-918e-38eaaa1f0c7d'[39m,
[2m[WebServer] [22m  authMethod: [32m'magic_link'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mMagic link for test-w2-1770446128028-addnyxri@example.com: http://localhost:3000/auth/guest-login/verify?token=c47c267388406647536e4cb2afd0ff059c5d87a2443fb93c610ac7e537c5726e
[2m[WebServer] [22m POST /api/guest-auth/magic-link/request [32m200[39m in 2.7s[2m (compile: 304ms, proxy.ts: 1522ms, render: 881ms)[22m
[2m[WebServer] [22mMagic link for test-w1-1770446129953-1l8toqd6@example.com: http://localhost:3000/auth/guest-login/verify?token=05c248eb2165cf6bda427c3be4f70db337c3c9cf50a00849ebe9690a59f97134
[2m[WebServer] [22m POST /api/guest-auth/magic-link/request [32m200[39m in 2.5s[2m (compile: 301ms, proxy.ts: 1500ms, render: 661ms)[22m
[Worker 0] Created test guest: {
  email: [32m'test-w0-1770446137850-zef24ic4@example.com'[39m,
  id: [32m'9e5ac34c-bec7-4f5a-83f0-e9537269e20b'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'ee46a61e-da5b-4293-b24b-6e8b26e85a24'[39m
}
[Worker 0] âœ… Verified guest exists: {
  email: [32m'test-w0-1770446137850-zef24ic4@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 1779ms[2m (compile: 1022ms, proxy.ts: 129ms, render: 628ms)[22m
[2m[WebServer] [22m GET /auth/guest-login/verify?token=d420ccee9a21e6753b060028cf84fad0ddbd006731c1c011e2cb9cbe6b7bb083 [32m200[39m in 3.1s[2m (compile: 2.3s, proxy.ts: 130ms, render: 630ms)[22m
[2m[WebServer] [22m GET /auth/guest-login/verify?token=c47c267388406647536e4cb2afd0ff059c5d87a2443fb93c610ac7e537c5726e [32m200[39m in 1785ms[2m (compile: 1023ms, proxy.ts: 129ms, render: 633ms)[22m
[2m[WebServer] [22m GET /auth/guest-login/verify?token=3abc61d09606db34536ca7feac33f7a9e28890a823906d4b4f0ad7421d980a13 [32m200[39m in 1786ms[2m (compile: 1023ms, proxy.ts: 129ms, render: 634ms)[22m
[2m[WebServer] [22m GET /auth/guest-login/verify?token=73d918f61375679af12a5991870f08a8336dc46c636f9a6db625bddb0d894fce [32m200[39m in 3.1s[2m (compile: 2.4s, proxy.ts: 55ms, render: 644ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 1122ms[2m (compile: 265ms, proxy.ts: 165ms, render: 692ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 1138ms[2m (compile: 265ms, proxy.ts: 165ms, render: 708ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 113ms[2m (compile: 13ms, proxy.ts: 19ms, render: 80ms)[22m
[2m[WebServer] [22m POST /api/guest-auth/magic-link/verify [34m307[39m in 335ms[2m (compile: 23ms, proxy.ts: 30ms, render: 283ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 711ms[2m (compile: 54ms, proxy.ts: 28ms, render: 629ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 727ms[2m (compile: 54ms, proxy.ts: 28ms, render: 645ms)[22m
[2m[WebServer] [22m[Magic Link Request] Processing request for email: test-w0-1770446137850-zef24ic4@example.com
[2m[WebServer] [22m[Magic Link Request] Looking for guest by email...
[2m[WebServer] [22m[Magic Link Request] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  guestId: [32m'9e5ac34c-bec7-4f5a-83f0-e9537269e20b'[39m,
[2m[WebServer] [22m  authMethod: [32m'magic_link'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m POST /api/guest-auth/magic-link/verify [34m307[39m in 517ms[2m (compile: 82ms, proxy.ts: 252ms, render: 184ms)[22m
[2m[WebServer] [22mMagic link for test-w0-1770446137850-zef24ic4@example.com: http://localhost:3000/auth/guest-login/verify?token=680464dfc7d4bb30cf3abeee7663bbd7040b619d44d6cdfde52cacfff7126c9c
[2m[WebServer] [22m POST /api/guest-auth/magic-link/request [32m200[39m in 635ms[2m (compile: 65ms, proxy.ts: 252ms, render: 318ms)[22m
[2m[WebServer] [22m POST /auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link [32m200[39m in 656ms[2m (compile: 115ms, proxy.ts: 252ms, render: 290ms)[22m
[2m[WebServer] [22m POST /api/guest-auth/magic-link/verify [34m307[39m in 1286ms[2m (compile: 23ms, proxy.ts: 30ms, render: 1234ms)[22m
[2m[WebServer] [22m POST /api/guest-auth/magic-link/verify [34m307[39m in 1292ms[2m (compile: 23ms, proxy.ts: 30ms, render: 1239ms)[22m
[2m[WebServer] [22m POST /auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link [32m200[39m in 283ms[2m (compile: 21ms, proxy.ts: 67ms, render: 195ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '1daaa1f9...',
[2m[WebServer] [22m  allCookies: [ '__next_hmr_refresh_hash__', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd8f9ea97...',
[2m[WebServer] [22m  allCookies: [ '__next_hmr_refresh_hash__', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '1daaa1f9'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd8f9ea97'
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /auth/guest-login/verify?token=680464dfc7d4bb30cf3abeee7663bbd7040b619d44d6cdfde52cacfff7126c9c [32m200[39m in 189ms[2m (compile: 16ms, proxy.ts: 25ms, render: 148ms)[22m
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'1daaa1f9'[39m }
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'd8f9ea97'[39m }
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'301df314-14f4-441f-9ea6-2cf39053644f'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'40970ce3-c12f-492b-90c1-a14cc949dda7'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w2-1770446128028-addnyxri@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w2-1770446128028-addnyxri@example.com
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w2-1770446128045-fqhyoh38@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w2-1770446128045-fqhyoh38@example.com
[2m[WebServer] [22m POST /guest/dashboard [32m200[39m in 1054ms[2m (compile: 109ms, proxy.ts: 216ms, render: 729ms)[22m
[2m[WebServer] [22m POST /guest/dashboard [32m200[39m in 1076ms[2m (compile: 90ms, proxy.ts: 236ms, render: 750ms)[22m
[2m[WebServer] [22m[Magic Link Request] Processing request for email: test-w4-1770446140831-l2gg82t0@example.com
[2m[WebServer] [22m[Magic Link Request] Looking for guest by email...
[2m[WebServer] [22m[Magic Link Request] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  guestId: [32m'8e73eef8-a20d-4df7-a671-8cbbdad43d94'[39m,
[2m[WebServer] [22m  authMethod: [32m'magic_link'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mMagic link for test-w4-1770446140831-l2gg82t0@example.com: http://localhost:3000/auth/guest-login/verify?token=502af4ecf0d2626be2eaa77959dc827dbd6de8ba5974d317298a7dcb74ab38c3
[2m[WebServer] [22m POST /api/guest-auth/magic-link/request [32m200[39m in 946ms[2m (compile: 34ms, proxy.ts: 494ms, render: 417ms)[22m
  âœ“   6 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:287:7 â€º Guest Authentication â€º should successfully request and verify magic link (21.8s)
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '1daaa1f9...',
[2m[WebServer] [22m  allCookies: [ '__next_hmr_refresh_hash__', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '1daaa1f9...',
[2m[WebServer] [22m  allCookies: [ '__next_hmr_refresh_hash__', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '1daaa1f9...',
[2m[WebServer] [22m  allCookies: [ '__next_hmr_refresh_hash__', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '1daaa1f9...',
[2m[WebServer] [22m  allCookies: [ '__next_hmr_refresh_hash__', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd8f9ea97...',
[2m[WebServer] [22m  allCookies: [ '__next_hmr_refresh_hash__', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd8f9ea97...',
[2m[WebServer] [22m  allCookies: [ '__next_hmr_refresh_hash__', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd8f9ea97...',
[2m[WebServer] [22m  allCookies: [ '__next_hmr_refresh_hash__', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd8f9ea97...',
[2m[WebServer] [22m  allCookies: [ '__next_hmr_refresh_hash__', 'guest_session' ]
[2m[WebServer] [22m}
  âœ“   8 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:393:7 â€º Guest Authentication â€º should show error for expired magic link (12.9s)
[2m[WebServer] [22m GET /auth/guest-login/verify?token=502af4ecf0d2626be2eaa77959dc827dbd6de8ba5974d317298a7dcb74ab38c3 [32m200[39m in 597ms[2m (compile: 72ms, proxy.ts: 342ms, render: 183ms)[22m
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '1daaa1f9'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '1daaa1f9'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '1daaa1f9'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '1daaa1f9'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
  âœ˜   7 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:351:7 â€º Guest Authentication â€º should show success message after requesting magic link (19.9s)
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd8f9ea97'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd8f9ea97'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd8f9ea97'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[Worker 2] Created test guest: {
  email: [32m'test-w2-1770446149934-vxuise9x@example.com'[39m,
  id: [32m'e29dce50-bb82-448d-8282-271974a301e5'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'4be78dd7-9dab-4957-a8a1-519b3d7f0335'[39m
}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd8f9ea97'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[Worker 3] Created test guest: {
  email: [32m'test-w3-1770446150041-wmj4gazt@example.com'[39m,
  id: [32m'eb8cb3b2-108b-441a-973a-3436024829ed'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'45a2128f-e1c1-4e37-ba17-61f8a0ecf7db'[39m
}
[2m[WebServer] [22m POST /api/guest-auth/magic-link/verify [34m307[39m in 1066ms[2m (compile: 5ms, proxy.ts: 15ms, render: 1046ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'c7d49f3e...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[Worker 2] âœ… Verified guest exists: {
  email: [32m'test-w2-1770446149934-vxuise9x@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 3] âœ… Verified guest exists: {
  email: [32m'test-w3-1770446150041-wmj4gazt@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'c7d49f3e'
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'c7d49f3e'[39m }
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'9e5ac34c-bec7-4f5a-83f0-e9537269e20b'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w0-1770446137850-zef24ic4@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w0-1770446137850-zef24ic4@example.com
[2m[WebServer] [22m GET /auth/guest-login/verify?token=invalid-token [32m200[39m in 691ms[2m (compile: 55ms, proxy.ts: 29ms, render: 607ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 699ms[2m (compile: 80ms, proxy.ts: 29ms, render: 591ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 749ms[2m (compile: 78ms, proxy.ts: 69ms, render: 602ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 821ms[2m (compile: 95ms, proxy.ts: 122ms, render: 603ms)[22m
[2m[WebServer] [22m POST /guest/dashboard [32m200[39m in 1201ms[2m (compile: 20ms, proxy.ts: 144ms, render: 1036ms)[22m
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }
[2m[WebServer] [22m POST /api/guest-auth/magic-link/verify [34m307[39m in 1180ms[2m (compile: 255ms, proxy.ts: 71ms, render: 854ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '99c8c0df...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '99c8c0df'
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'99c8c0df'[39m }
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'8e73eef8-a20d-4df7-a671-8cbbdad43d94'[39m
[2m[WebServer] [22m}
[Worker 4] Created test guest: {
  email: [32m'test-w4-1770446152006-zsq00r7r@example.com'[39m,
  id: [32m'b9fbf2ec-422f-4c8b-aa25-b2a0dc819e5c'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'bacf6fa2-ce75-46a3-92a6-187601ae4974'[39m
}
[Worker 4] âœ… Verified guest exists: {
  email: [32m'test-w4-1770446152006-zsq00r7r@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w4-1770446140831-l2gg82t0@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w4-1770446140831-l2gg82t0@example.com
[2m[WebServer] [22m[API] Looking for guest with email: test-w3-1770446150041-wmj4gazt@example.com
[2m[WebServer] [22m[API] Looking for guest with email: test-w2-1770446149949-d3ammlqj@example.com
[2m[WebServer] [22m[API] Looking for guest with email: test-w3-1770446150084-5azfd3du@example.com
[2m[WebServer] [22m POST /guest/dashboard [32m200[39m in 2.7s[2m (compile: 64ms, proxy.ts: 181ms, render: 2.4s)[22m
[2m[WebServer] [22m[API] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  email: [32m'test-w3-1770446150084-5azfd3du@example.com'[39m,
[2m[WebServer] [22m  authMethod: [32m'email_matching'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[API] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  email: [32m'test-w2-1770446149949-d3ammlqj@example.com'[39m,
[2m[WebServer] [22m  authMethod: [32m'email_matching'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[API] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  email: [32m'test-w3-1770446150041-wmj4gazt@example.com'[39m,
[2m[WebServer] [22m  authMethod: [32m'email_matching'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'c7d49f3e...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'c7d49f3e...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'c7d49f3e...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'c7d49f3e...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /auth/guest-login/verify?token=invalid-token [32m200[39m in 883ms[2m (compile: 140ms, proxy.ts: 152ms, render: 591ms)[22m
[2m[WebServer] [22m GET /auth/guest-login/verify [32m200[39m in 900ms[2m (compile: 140ms, proxy.ts: 152ms, render: 607ms)[22m
[2m[WebServer] [22m[API] Setting guest session cookie: {
[2m[WebServer] [22m  tokenPrefix: [32m'43aed49d'[39m,
[2m[WebServer] [22m  cookieOptions: {
[2m[WebServer] [22m    httpOnly: [33mtrue[39m,
[2m[WebServer] [22m    secure: [33mfalse[39m,
[2m[WebServer] [22m    sameSite: [32m'lax'[39m,
[2m[WebServer] [22m    maxAge: [33m86400[39m,
[2m[WebServer] [22m    path: [32m'/'[39m
[2m[WebServer] [22m  },
[2m[WebServer] [22m  guestId: [32m'eb8cb3b2-108b-441a-973a-3436024829ed'[39m,
[2m[WebServer] [22m  sessionId: [32m'f48c260e-a0dd-4a41-9d3f-2264cca15d24'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m POST /api/guest-auth/email-match [32m200[39m in 934ms[2m (compile: 101ms, proxy.ts: 164ms, render: 670ms)[22m
[2m[WebServer] [22m[API] Setting guest session cookie: {
[2m[WebServer] [22m  tokenPrefix: [32m'672205da'[39m,
[2m[WebServer] [22m  cookieOptions: {
[2m[WebServer] [22m    httpOnly: [33mtrue[39m,
[2m[WebServer] [22m    secure: [33mfalse[39m,
[2m[WebServer] [22m    sameSite: [32m'lax'[39m,
[2m[WebServer] [22m    maxAge: [33m86400[39m,
[2m[WebServer] [22m    path: [32m'/'[39m
[2m[WebServer] [22m  },
[2m[WebServer] [22m  guestId: [32m'ee774ed3-a1ea-4758-96da-562843841d3d'[39m,
[2m[WebServer] [22m  sessionId: [32m'722007cb-3142-4f48-af37-235650939861'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m POST /api/guest-auth/email-match [32m200[39m in 951ms[2m (compile: 100ms, proxy.ts: 164ms, render: 686ms)[22m
[2m[WebServer] [22m[API] Setting guest session cookie: {
[2m[WebServer] [22m  tokenPrefix: [32m'48360d3e'[39m,
[2m[WebServer] [22m  cookieOptions: {
[2m[WebServer] [22m    httpOnly: [33mtrue[39m,
[2m[WebServer] [22m    secure: [33mfalse[39m,
[2m[WebServer] [22m    sameSite: [32m'lax'[39m,
[2m[WebServer] [22m    maxAge: [33m86400[39m,
[2m[WebServer] [22m    path: [32m'/'[39m
[2m[WebServer] [22m  },
[2m[WebServer] [22m  guestId: [32m'1e2cbcd9-4684-4f8b-bd88-9d3d6d20e1d6'[39m,
[2m[WebServer] [22m  sessionId: [32m'4878fb2f-b514-4c8c-aea8-c585c29e06f8'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m POST /api/guest-auth/email-match [32m200[39m in 966ms[2m (compile: 103ms, proxy.ts: 162ms, render: 702ms)[22m
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'c7d49f3e'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'c7d49f3e'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'c7d49f3e'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'c7d49f3e'
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 1114ms[2m (compile: 187ms, proxy.ts: 146ms, render: 781ms)[22m
[2m[WebServer] [22m GET /auth/guest-login/verify?token=680464dfc7d4bb30cf3abeee7663bbd7040b619d44d6cdfde52cacfff7126c9c [32m200[39m in 1001ms[2m (compile: 512ms, proxy.ts: 169ms, render: 320ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '672205da...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '43aed49d...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '48360d3e...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '43aed49d'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '48360d3e'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '672205da'
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'43aed49d'[39m }
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'48360d3e'[39m }
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'672205da'[39m }
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'1e2cbcd9-4684-4f8b-bd88-9d3d6d20e1d6'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'eb8cb3b2-108b-441a-973a-3436024829ed'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'ee774ed3-a1ea-4758-96da-562843841d3d'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w3-1770446150084-5azfd3du@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w3-1770446150084-5azfd3du@example.com
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w3-1770446150041-wmj4gazt@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w3-1770446150041-wmj4gazt@example.com
[2m[WebServer] [22m GET /guest/dashboard [32m200[39m in 1503ms[2m (compile: 62ms, proxy.ts: 268ms, render: 1172ms)[22m
[2m[WebServer] [22m GET /guest/dashboard [32m200[39m in 1632ms[2m (compile: 64ms, proxy.ts: 297ms, render: 1271ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '48360d3e...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w2-1770446149949-d3ammlqj@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w2-1770446149949-d3ammlqj@example.com
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '48360d3e'
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /guest/dashboard [32m200[39m in 2.3s[2m (compile: 61ms, proxy.ts: 300ms, render: 1972ms)[22m
[2m[WebServer] [22m[37m[1mâ—‹[22m[39m Compiling /guest/events ...
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '43aed49d...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '672205da...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '43aed49d'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '672205da'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '99c8c0df...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '99c8c0df...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '99c8c0df...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '99c8c0df...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '99c8c0df'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '99c8c0df'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '99c8c0df'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '99c8c0df'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '48360d3e...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '43aed49d...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '48360d3e...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '48360d3e...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '48360d3e...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '43aed49d...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '43aed49d...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '43aed49d...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '48360d3e'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '48360d3e'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '43aed49d'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '48360d3e'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '48360d3e'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '43aed49d'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '43aed49d'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '43aed49d'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '672205da...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '672205da...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '672205da...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '672205da...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '672205da'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '672205da'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '672205da'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '672205da'
[2m[WebServer] [22m}
  âœ˜  12 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:579:7 â€º Guest Authentication â€º should persist authentication across page refreshes (35.9s)
[2m[WebServer] [22m[API] Looking for guest with email: test-w4-1770446152006-zsq00r7r@example.com
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'43aed49d'[39m }
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'672205da'[39m }
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 15.0s[2m (compile: 13.3s, proxy.ts: 280ms, render: 1371ms)[22m
[2m[WebServer] [22m POST /api/guest-auth/email-match [32m200[39m in 22.9s[2m (compile: 21.4s, proxy.ts: 165ms, render: 1370ms)[22m
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'eb8cb3b2-108b-441a-973a-3436024829ed'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'ee774ed3-a1ea-4758-96da-562843841d3d'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[API] Guest query result: {
[2m[WebServer] [22m  found: [33mfalse[39m,
[2m[WebServer] [22m  email: [90mundefined[39m,
[2m[WebServer] [22m  authMethod: [90mundefined[39m,
[2m[WebServer] [22m  error: [32m'Cannot coerce the result to a single JSON object'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w3-1770446150041-wmj4gazt@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w3-1770446150041-wmj4gazt@example.com
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w2-1770446149949-d3ammlqj@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w2-1770446149949-d3ammlqj@example.com
[2m[WebServer] [22m GET /api/guest/events [32m200[39m in 16.4s[2m (compile: 12.9s, proxy.ts: 651ms, render: 2.8s)[22m
[2m[WebServer] [22m GET /api/guest/rsvps [32m200[39m in 16.4s[2m (compile: 12.3s, proxy.ts: 1283ms, render: 2.8s)[22m
[2m[WebServer] [22m GET /api/guest/announcements [32m200[39m in 16.4s[2m (compile: 12.3s, proxy.ts: 1284ms, render: 2.8s)[22m
[2m[WebServer] [22m GET /api/guest/wedding-info [32m200[39m in 16.4s[2m (compile: 13.0s, proxy.ts: 614ms, render: 2.8s)[22m
[2m[WebServer] [22m GET /api/guest/rsvps [32m200[39m in 16.3s[2m (compile: 12.3s, proxy.ts: 1217ms, render: 2.8s)[22m
[2m[WebServer] [22m GET /api/guest/wedding-info [32m200[39m in 16.3s[2m (compile: 12.2s, proxy.ts: 1331ms, render: 2.8s)[22m
[2m[WebServer] [22m GET /api/guest/events [32m200[39m in 16.4s[2m (compile: 12.4s, proxy.ts: 1175ms, render: 2.8s)[22m
[2m[WebServer] [22m GET /api/guest/announcements [32m200[39m in 16.3s[2m (compile: 12.3s, proxy.ts: 1200ms, render: 2.8s)[22m
[2m[WebServer] [22m GET /api/guest/announcements [32m200[39m in 15.0s[2m (compile: 10.2s, proxy.ts: 1981ms, render: 2.9s)[22m
[2m[WebServer] [22m GET /api/guest/events [32m200[39m in 15.0s[2m (compile: 10.2s, proxy.ts: 1983ms, render: 2.9s)[22m
[2m[WebServer] [22m GET /api/guest/rsvps [32m200[39m in 15.0s[2m (compile: 10.2s, proxy.ts: 1978ms, render: 2.9s)[22m
[2m[WebServer] [22m GET /api/guest/wedding-info [32m200[39m in 15.0s[2m (compile: 10.1s, proxy.ts: 2.0s, render: 2.9s)[22m
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }
[2m[WebServer] [22m GET /auth/guest-login/verify?token=680464dfc7d4bb30cf3abeee7663bbd7040b619d44d6cdfde52cacfff7126c9c [32m200[39m in 17.0s[2m (compile: 13.3s, proxy.ts: 280ms, render: 3.4s)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 18.0s[2m (compile: 13.9s, proxy.ts: 681ms, render: 3.4s)[22m
[2m[WebServer] [22m GET /auth/guest-login/verify?token=cfc3861f476678853d84048d6fbc108e326827f2a9674e66e619ca7dcf28fa68 [32m200[39m in 26.9s[2m (compile: 22.4s, proxy.ts: 1098ms, render: 3.4s)[22m
[2m[WebServer] [22m GET /auth/guest-login/verify [32m200[39m in 25.8s[2m (compile: 22.3s, proxy.ts: 74ms, render: 3.4s)[22m
[2m[WebServer] [22m GET /guest/events [32m200[39m in 35.0s[2m (compile: 30.6s, proxy.ts: 329ms, render: 4.0s)[22m
[2m[WebServer] [22m GET /guest/dashboard [32m200[39m in 31.0s[2m (compile: 26.5s, proxy.ts: 369ms, render: 4.1s)[22m
[2m[WebServer] [22m GET /guest/dashboard [32m200[39m in 31.1s[2m (compile: 26.3s, proxy.ts: 550ms, render: 4.2s)[22m
[Worker 5] Created test guest: {
  email: [32m'test-w5-1770446192261-hekovtmi@example.com'[39m,
  id: [32m'27fa8b43-8ecc-4f22-b0bb-84d0ecc8fa73'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'7a6e3542-e314-4e60-b4c2-07826cf2bf53'[39m
}
[Worker 5] âœ… Verified guest exists: {
  email: [32m'test-w5-1770446192261-hekovtmi@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 147ms[2m (compile: 16ms, proxy.ts: 31ms, render: 100ms)[22m
[2m[WebServer] [22m POST /api/guest-auth/magic-link/verify [34m307[39m in 378ms[2m (compile: 59ms, proxy.ts: 50ms, render: 269ms)[22m
[2m[WebServer] [22m GET /auth/guest-login/verify?token=8b28d8d292c62697d4b7263dcd38bd1703e95730269c62b65d02ad0b946dc9ea [32m200[39m in 315ms[2m (compile: 19ms, proxy.ts: 48ms, render: 248ms)[22m
[2m[WebServer] [22m POST /api/guest-auth/magic-link/verify [34m307[39m in 431ms[2m (compile: 7ms, proxy.ts: 48ms, render: 376ms)[22m
[2m[WebServer] [22m POST /auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link [32m200[39m in 181ms[2m (compile: 13ms, proxy.ts: 31ms, render: 137ms)[22m
  âœ˜  11 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:512:7 â€º Guest Authentication â€º should complete logout flow (43.8s)
[2m[WebServer] [22m POST /auth/guest-login/verify?error=TOKEN_USED&message=This+magic+link+has+already+been+used [32m200[39m in 286ms[2m (compile: 52ms, proxy.ts: 65ms, render: 169ms)[22m
  âœ˜  10 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:483:7 â€º Guest Authentication â€º should show error for invalid or missing token (45.8s)
  âœ˜   9 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:427:7 â€º Guest Authentication â€º should show error for already used magic link (58.1s)
[2m[WebServer] [22m POST /api/guest-auth/magic-link/verify [34m307[39m in 174ms[2m (compile: 3ms, proxy.ts: 14ms, render: 158ms)[22m
[2m[WebServer] [22m POST /auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link [32m200[39m in 76ms[2m (compile: 2ms, proxy.ts: 7ms, render: 67ms)[22m
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops
  âœ“  13 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:607:7 â€º Guest Authentication â€º should switch between authentication tabs (4.7s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  write to custom object with { processEnv: myObject }
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 75ms[2m (compile: 6ms, proxy.ts: 33ms, render: 36ms)[22m
[Worker 6] Created test guest: {
  email: [32m'test-w6-1770446197141-zhxkra17@example.com'[39m,
  id: [32m'54df560d-8690-4329-96e7-33034d14a088'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'c46c6813-9ab9-4530-bde6-3fe7bfc94062'[39m
}
[Worker 6] âœ… Verified guest exists: {
  email: [32m'test-w6-1770446197141-zhxkra17@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 7] Created test guest: {
  email: [32m'test-w7-1770446197602-ieubv6e0@example.com'[39m,
  id: [32m'0fba8b61-35ce-4dd5-b41b-0e24a3d5ff62'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'77bc097b-763a-40ac-8f69-0668fd2e9058'[39m
}
[2m[WebServer] [22m[API] Looking for guest with email: nonexistent@example.com
[Worker 7] âœ… Verified guest exists: {
  email: [32m'test-w7-1770446197602-ieubv6e0@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 94ms[2m (compile: 7ms, proxy.ts: 16ms, render: 71ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 112ms[2m (compile: 12ms, proxy.ts: 44ms, render: 56ms)[22m
[2m[WebServer] [22m[API] Guest query result: {
[2m[WebServer] [22m  found: [33mfalse[39m,
[2m[WebServer] [22m  email: [90mundefined[39m,
[2m[WebServer] [22m  authMethod: [90mundefined[39m,
[2m[WebServer] [22m  error: [32m'Cannot coerce the result to a single JSON object'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m POST /api/guest-auth/email-match [33m404[39m in 174ms[2m (compile: 3ms, proxy.ts: 16ms, render: 155ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 67ms[2m (compile: 9ms, proxy.ts: 9ms, render: 48ms)[22m
[2m[WebServer] [22m GET /auth/guest-login/verify?token=643f52a89aa657a8784036e0a5498c33325e17ef38127ddd0bbe0909c7dfc8d3 [32m200[39m in 68ms[2m (compile: 2ms, proxy.ts: 8ms, render: 58ms)[22m
[2m[WebServer] [22m[API] Looking for guest with email: nonexistent@example.com
[2m[WebServer] [22m[API] Looking for guest with email: test-w8-1770446197140-5aoo435b@example.com
[2m[WebServer] [22m[API] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  email: [32m'test-w8-1770446197140-5aoo435b@example.com'[39m,
[2m[WebServer] [22m  authMethod: [32m'email_matching'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[API] Guest query result: {
[2m[WebServer] [22m  found: [33mfalse[39m,
[2m[WebServer] [22m  email: [90mundefined[39m,
[2m[WebServer] [22m  authMethod: [90mundefined[39m,
[2m[WebServer] [22m  error: [32m'Cannot coerce the result to a single JSON object'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m POST /api/guest-auth/email-match [33m404[39m in 172ms[2m (compile: 4ms, proxy.ts: 23ms, render: 144ms)[22m
[2m[WebServer] [22m[API] Setting guest session cookie: {
[2m[WebServer] [22m  tokenPrefix: [32m'd850f949'[39m,
[2m[WebServer] [22m  cookieOptions: {
[2m[WebServer] [22m    httpOnly: [33mtrue[39m,
[2m[WebServer] [22m    secure: [33mfalse[39m,
[2m[WebServer] [22m    sameSite: [32m'lax'[39m,
[2m[WebServer] [22m    maxAge: [33m86400[39m,
[2m[WebServer] [22m    path: [32m'/'[39m
[2m[WebServer] [22m  },
[2m[WebServer] [22m  guestId: [32m'd99d42ac-dcf8-4f8d-b673-5655025672f9'[39m,
[2m[WebServer] [22m  sessionId: [32m'234038b8-9999-45e1-a10c-2bb701f4888a'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m POST /api/guest-auth/email-match [32m200[39m in 362ms[2m (compile: 4ms, proxy.ts: 23ms, render: 334ms)[22m
[2m[WebServer] [22m[API] Looking for guest with email: test-w7-1770446197602-ieubv6e0@example.com
[2m[WebServer] [22m GET /auth/guest-login/verify?token=bd04a84b9b801d3f1f701f73f07bd9e3ef1e680defb043e36d178c6357bde76b [32m200[39m in 66ms[2m (compile: 3ms, proxy.ts: 7ms, render: 56ms)[22m
[2m[WebServer] [22m POST /api/guest-auth/magic-link/verify [34m307[39m in 154ms[2m (compile: 3ms, proxy.ts: 16ms, render: 135ms)[22m
[2m[WebServer] [22m[API] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  email: [32m'test-w7-1770446197602-ieubv6e0@example.com'[39m,
[2m[WebServer] [22m  authMethod: [32m'email_matching'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m POST /auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link [32m200[39m in 68ms[2m (compile: 6ms, proxy.ts: 9ms, render: 53ms)[22m
[2m[WebServer] [22m[API] Setting guest session cookie: {
[2m[WebServer] [22m  tokenPrefix: [32m'067075f1'[39m,
[2m[WebServer] [22m  cookieOptions: {
[2m[WebServer] [22m    httpOnly: [33mtrue[39m,
[2m[WebServer] [22m    secure: [33mfalse[39m,
[2m[WebServer] [22m    sameSite: [32m'lax'[39m,
[2m[WebServer] [22m    maxAge: [33m86400[39m,
[2m[WebServer] [22m    path: [32m'/'[39m
[2m[WebServer] [22m  },
[2m[WebServer] [22m  guestId: [32m'0fba8b61-35ce-4dd5-b41b-0e24a3d5ff62'[39m,
[2m[WebServer] [22m  sessionId: [32m'4b3aabc3-a0ba-410d-a6c0-b1da393440f2'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m POST /api/guest-auth/email-match [32m200[39m in 511ms[2m (compile: 1855Âµs, proxy.ts: 196ms, render: 314ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd850f949...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd850f949'
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'd850f949'[39m }
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'd99d42ac-dcf8-4f8d-b673-5655025672f9'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w8-1770446197140-5aoo435b@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w8-1770446197140-5aoo435b@example.com
[2m[WebServer] [22m GET /guest/dashboard [32m200[39m in 595ms[2m (compile: 4ms, proxy.ts: 141ms, render: 450ms)[22m
[2m[WebServer] [22m POST /api/guest-auth/magic-link/verify [34m307[39m in 163ms[2m (compile: 4ms, proxy.ts: 11ms, render: 149ms)[22m
[2m[WebServer] [22m POST /auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link [32m200[39m in 71ms[2m (compile: 1504Âµs, proxy.ts: 5ms, render: 64ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '067075f1...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '067075f1'
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'067075f1'[39m }
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'0fba8b61-35ce-4dd5-b41b-0e24a3d5ff62'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w7-1770446197602-ieubv6e0@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w7-1770446197602-ieubv6e0@example.com
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd850f949...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd850f949...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd850f949...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd850f949...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /guest/dashboard [32m200[39m in 663ms[2m (compile: 5ms, proxy.ts: 161ms, render: 497ms)[22m
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd850f949'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd850f949'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd850f949'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd850f949'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '067075f1...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '067075f1...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '067075f1...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '067075f1...',
[2m[WebServer] [22m  allCookies: [ 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/guest/announcements [32m200[39m in 664ms[2m (compile: 9ms, proxy.ts: 240ms, render: 415ms)[22m
[2m[WebServer] [22m GET /api/guest/rsvps [32m200[39m in 670ms[2m (compile: 7ms, proxy.ts: 239ms, render: 424ms)[22m
[2m[WebServer] [22m GET /api/guest/wedding-info [32m200[39m in 789ms[2m (compile: 1921Âµs, proxy.ts: 340ms, render: 447ms)[22m
[2m[WebServer] [22m GET /api/guest/events [32m200[39m in 830ms[2m (compile: 3ms, proxy.ts: 239ms, render: 588ms)[22m
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '067075f1'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '067075f1'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '067075f1'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '067075f1'
[2m[WebServer] [22m}
  âœ“  14 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:650:7 â€º Guest Authentication â€º should handle authentication errors gracefully (5.3s)
[2m[WebServer] [22m GET /api/guest/wedding-info [32m200[39m in 628ms[2m (compile: 6ms, proxy.ts: 231ms, render: 391ms)[22m
[2m[WebServer] [22m GET /api/guest/rsvps [32m200[39m in 644ms[2m (compile: 11ms, proxy.ts: 233ms, render: 401ms)[22m
[2m[WebServer] [22m GET /api/guest/announcements [32m200[39m in 685ms[2m (compile: 11ms, proxy.ts: 236ms, render: 437ms)[22m
[2m[WebServer] [22m GET /api/guest/events [32m200[39m in 810ms[2m (compile: 10ms, proxy.ts: 232ms, render: 568ms)[22m
  âœ˜  15 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:695:7 â€º Guest Authentication â€º should log authentication events in audit log (5.8s)

ðŸ§¹ E2E Global Teardown Starting...

ðŸ—‘ï¸  Cleaning up test data...
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ðŸ”“ Removing authentication state...
   No authentication directory found (already clean)
âœ… Authentication state removed

ðŸ“Š Execution Summary:
   Duration: 1.93s
   Errors: 0
   Status: âœ… Clean teardown

âœ¨ E2E Global Teardown Complete!



  1) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:351:7 â€º Guest Authentication â€º should show success message after requesting magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoHaveValue[2m([22m[32mexpected[39m[2m)[22m failed

    Locator: locator('#magic-link-input')
    Expected: [32m""[39m
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toHaveValue" with timeout 10000ms[22m
    [2m  - waiting for locator('#magic-link-input')[22m
    [2m    8 Ã— locator resolved to <input value="" required="" type="email" id="magic-link-input" placeholder="your.email@example.com" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 disabled:bg-gray-100 disabled:cursor-not-allowed"/>[22m
    [2m      - unexpected value "test-w1-1770446129953-1l8toqd6@example.com"[22m
    [2m    - waiting for" http://localhost:3000/auth/guest-login" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/auth/guest-login"[22m


      388 |     // Verify email input was cleared
      389 |     const emailInput = page.locator('#magic-link-input');
    > 390 |     await expect(emailInput).toHaveValue('');
          |                              ^
      391 |   });
      392 |
      393 |   test('should show error for expired magic link', async ({ page }) => {
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:390:30

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-71b1d-after-requesting-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-71b1d-after-requesting-magic-link-chromium/error-context.md

  2) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:427:7 â€º Guest Authentication â€º should show error for already used magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoContainText[2m([22m[32mexpected[39m[2m)[22m failed

    Locator: locator('h1')
    Expected substring: [32m"Link Already Used"[39m
    Received string:    [31m""[39m
    Timeout: 10000ms

    Call log:
    [2m  - Expect "toContainText" with timeout 10000ms[22m
    [2m  - waiting for locator('h1')[22m


      474 |
      475 |     // Verify error message with more specific selectors
    > 476 |     await expect(page.locator('h1')).toContainText('Link Already Used');
          |                                      ^
      477 |     const errorDescription = page.locator('p.text-gray-600').first();
      478 |     await expect(errorDescription).toContainText('This magic link has already been used');
      479 |     const securityNote = page.locator('p.text-sm.text-gray-500');
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:476:38

    Error Context: test-results/auth-guestAuth-Guest-Authe-fb7a8-for-already-used-magic-link-chromium/error-context.md

  3) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:483:7 â€º Guest Authentication â€º should show error for invalid or missing token 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/auth/guest-login/verify?token=cfc3861f476678853d84048d6fbc108e326827f2a9674e66e619ca7dcf28fa68", waiting until "load"[22m


      500 |       .join('');
      501 |
    > 502 |     await page.goto(`/auth/guest-login/verify?token=${token}`);
          |                ^
      503 |     await expect(page.locator('h1')).toContainText('Invalid Link');
      504 |     const nonExistentDescription = page.locator('p.text-gray-600').first();
      505 |     await expect(nonExistentDescription).toContainText(/invalid|expired/i);
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:502:16

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-ce12c-or-invalid-or-missing-token-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-ce12c-or-invalid-or-missing-token-chromium/error-context.md

  4) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:512:7 â€º Guest Authentication â€º should complete logout flow 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/guest/dashboard", waiting until "load"[22m


      556 |     if (!currentUrl.includes('/auth/guest-login')) {
      557 |       // If not redirected yet, try navigating to a protected page
    > 558 |       await page.goto('/guest/dashboard');
          |                  ^
      559 |       await page.waitForTimeout(1000);
      560 |     }
      561 |
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:558:18

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-b7d01-should-complete-logout-flow-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-b7d01-should-complete-logout-flow-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-b7d01-should-complete-logout-flow-chromium/error-context.md

  5) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:579:7 â€º Guest Authentication â€º should persist authentication across page refreshes 

    TimeoutError: page.waitForURL: Timeout 10000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "/guest/dashboard" until "domcontentloaded"
    ============================================================

      582 |     await page.fill('#email-matching-input', testGuestEmail);
      583 |     await page.click('button[type="submit"]:has-text("Log In")');
    > 584 |     await page.waitForURL('/guest/dashboard', { 
          |                ^
      585 |       timeout: 10000,
      586 |       waitUntil: 'domcontentloaded'
      587 |     });
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:584:16

  6) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:695:7 â€º Guest Authentication â€º should log authentication events in audit log 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoHaveLength[2m([22m[32mexpected[39m[2m)[22m

    Expected length: [32m1[39m
    Received length: [31m0[39m
    Received array:  [31m[][39m

      730 |
      731 |     expect(loginError).toBeNull();
    > 732 |     expect(loginLogs).toHaveLength(1);
          |                       ^
      733 |     expect(loginLogs![0].details.auth_method).toBe('email_matching');
      734 |     expect(loginLogs![0].details.email).toBe(testGuestEmail);
      735 |
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:732:23

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-c413d-ication-events-in-audit-log-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-c413d-ication-events-in-audit-log-chromium/error-context.md

  6 failed
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:351:7 â€º Guest Authentication â€º should show success message after requesting magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:427:7 â€º Guest Authentication â€º should show error for already used magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:483:7 â€º Guest Authentication â€º should show error for invalid or missing token 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:512:7 â€º Guest Authentication â€º should complete logout flow 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:579:7 â€º Guest Authentication â€º should persist authentication across page refreshes 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:695:7 â€º Guest Authentication â€º should log authentication events in audit log 
  1 skipped
  8 passed (1.7m)

[36m  Serving HTML report at http://localhost:62288. Press Ctrl+C to quit.[39m
