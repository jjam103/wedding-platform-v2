
> destination-wedding-platform@0.1.0 test:e2e
> playwright test __tests__/e2e/auth/guestAuth.spec.ts

[dotenv@17.2.4] injecting env (24) from .env.e2e -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }

ðŸš€ E2E Global Setup Starting...

ðŸ“Š Verifying test database connection...
âœ… Test database connected

ðŸ§¹ Cleaning up test data...
   Cleaning up leftover test data...
   Cleaned up sessions for 6 test guests
   Test data cleanup complete
âœ… Test data cleaned

ðŸ‘¤ Creating test guest...
   Warmup guest already exists: warmup@example.com
   Created test guest: test@example.com (ID: 8c41fa79-5417-4506-b315-ef346584637a)
âœ… Test guest created

ðŸ“¦ Creating comprehensive test data...
   Creating location hierarchy...
   Location hierarchy already exists
   Creating events...
   Events already exist
   Creating activities...
   Warning: Could not create comprehensive test data: Failed to create ceremony activity: Could not find the 'cost_per_guest' column of 'activities' in the schema cache
   Some E2E tests may fail due to missing data
âœ… Comprehensive test data created

ðŸŒ Verifying Next.js server...
âœ… Next.js server is running

ðŸ”¥ Warming up API routes...
   Warming up 3 guest auth routes with retry logic...
   âœ… Route ready: /api/guest-auth/email-match (attempt 1/5, status: 200)
   âœ… Route ready: /api/guest-auth/magic-link/request (attempt 1/5, status: 400)
   âœ… Route ready: /api/guest-auth/magic-link/verify (attempt 1/5, status: 400)
   âœ… Guest auth routes warmup complete
âœ… API routes warmed up

ðŸ” Setting up admin authentication...
   Attempting browser-based admin login: admin@example.com
   Navigating to http://localhost:3000/auth/login...
   Page loaded, filling form...
   Form filled, submitting...
   Current URL after submit: http://localhost:3000/admin
   âœ… Successfully logged in via browser
   âœ… Authentication state saved
âœ… Admin authentication saved

âœ¨ E2E Global Setup Complete!


Running 15 tests using 4 workers

[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  override existing env vars with { override: true }
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  write to custom object with { processEnv: myObject }
[Worker 3] Created test guest: {
  email: [32m'test-w3-1770442994256-zfitau9i@example.com'[39m,
  id: [32m'7ea33bad-7860-4ab4-84e5-8986fc76b1fb'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'1f0b53df-4451-4370-8fde-5c328ce627a8'[39m
}
[Worker 3] âœ… Verified guest exists: {
  email: [32m'test-w3-1770442994256-zfitau9i@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 0] Created test guest: {
  email: [32m'test-w0-1770442994181-2t9jdk23@example.com'[39m,
  id: [32m'50f40945-f385-439f-bd25-8afeb4a4bffe'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'82dd5464-22fb-47ec-9fff-0a9e48557282'[39m
}
[Worker 1] Created test guest: {
  email: [32m'test-w1-1770442994371-ua4bvuq8@example.com'[39m,
  id: [32m'd1ad59d6-761e-4caf-a30b-6abdebd2205a'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'c09b8bd5-93aa-457e-8b07-da4007f44c8d'[39m
}
[Worker 0] âœ… Verified guest exists: {
  email: [32m'test-w0-1770442994181-2t9jdk23@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 2] Created test guest: {
  email: [32m'test-w2-1770442994632-7gtuevlz@example.com'[39m,
  id: [32m'5c9ef814-37ef-4643-abad-ec28552f0b22'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'1d58c89d-d245-4ea8-8484-42e2a1816d53'[39m
}
[Worker 1] âœ… Verified guest exists: {
  email: [32m'test-w1-1770442994371-ua4bvuq8@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 2] âœ… Verified guest exists: {
  email: [32m'test-w2-1770442994632-7gtuevlz@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ“   3 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:178:7 â€º Guest Authentication â€º should show error for non-existent email (20.4s)
[Worker 1] Created test guest: {
  email: [32m'test-w1-1770443015496-bthxt6ph@example.com'[39m,
  id: [32m'4b6792d0-b70f-40b2-ac73-d2c894546c96'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'c27ce20f-4f8a-4889-b968-68306f0bfc6f'[39m
}
[Worker 1] âœ… Verified guest exists: {
  email: [32m'test-w1-1770443015496-bthxt6ph@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ“   4 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:193:7 â€º Guest Authentication â€º should show error for invalid email format (28.4s)
[Worker 2] Created test guest: {
  email: [32m'test-w2-1770443023563-mpnoe2ia@example.com'[39m,
  id: [32m'3669f258-59ce-4fcc-939a-b62cfde6535b'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'88d07a4b-465a-46c4-8e2c-67edb977e251'[39m
}
  âœ˜   2 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:158:7 â€º Guest Authentication â€º should successfully authenticate with email matching (29.2s)
[Worker 2] âœ… Verified guest exists: {
  email: [32m'test-w2-1770443023563-mpnoe2ia@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ˜   1 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:206:7 â€º Guest Authentication â€º should show loading state during authentication (29.0s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ” prevent committing .env to code: https://dotenvx.com/precommit
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops
[Worker 4] Created test guest: {
  email: [32m'test-w4-1770443029018-xoima5bp@example.com'[39m,
  id: [32m'9e8490b7-e4f3-43a5-b0fe-042a2d0cda1d'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'd26b9cc8-729b-4712-888e-a9cfb818bcdc'[39m
}
[Worker 4] âœ… Verified guest exists: {
  email: [32m'test-w4-1770443029018-xoima5bp@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 5] Created test guest: {
  email: [32m'test-w5-1770443029096-vemzt42n@example.com'[39m,
  id: [32m'f7e6a3aa-2468-4945-bbe1-3b9d7d4f917f'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'e4771d8a-0d5f-4cf0-b181-1234c41e7e21'[39m
}
[Worker 5] âœ… Verified guest exists: {
  email: [32m'test-w5-1770443029096-vemzt42n@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ“   5 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:220:7 â€º Guest Authentication â€º should create session cookie on successful authentication (17.2s)
[Worker 1] Created test guest: {
  email: [32m'test-w1-1770443032713-a2n2fpax@example.com'[39m,
  id: [32m'9d5e7e66-3a68-4044-ac8c-c503607c8748'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'305bec31-2b71-461a-88da-f9f690376fec'[39m
}
[Worker 1] âœ… Verified guest exists: {
  email: [32m'test-w1-1770443032713-a2n2fpax@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ˜   6 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:244:7 â€º Guest Authentication â€º should successfully request and verify magic link (15.9s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com
[Worker 6] Created test guest: {
  email: [32m'test-w6-1770443041863-32oroemy@example.com'[39m,
  id: [32m'7b4e6832-d4ba-4db3-8022-1bf1dfa9e7fb'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'9106d85b-bc3f-49e5-a0f5-4b2785d129ac'[39m
}
[Worker 6] âœ… Verified guest exists: {
  email: [32m'test-w6-1770443041863-32oroemy@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ˜  10 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:398:7 â€º Guest Authentication â€º should show error for invalid or missing token (1.3s)
  âœ˜   8 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:320:7 â€º Guest Authentication â€º should show error for expired magic link (14.6s)
  âœ˜   7 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:292:7 â€º Guest Authentication â€º should show success message after requesting magic link (15.1s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops
[Worker 7] Created test guest: {
  email: [32m'test-w7-1770443045186-n8kx9w47@example.com'[39m,
  id: [32m'730b8197-3f0e-4fdf-ba7b-da95cb725dd7'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'65ecdc40-2abf-46d5-8c7e-b2162e62d67d'[39m
}
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }
[Worker 7] âœ… Verified guest exists: {
  email: [32m'test-w7-1770443045186-n8kx9w47@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops
[Worker 8] Created test guest: {
  email: [32m'test-w8-1770443045786-plw0qfn0@example.com'[39m,
  id: [32m'820234eb-26ef-4c02-8894-b1c36365c5de'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'35997b34-d133-4de0-9f55-9dbb9c3ebb12'[39m
}
[Worker 8] âœ… Verified guest exists: {
  email: [32m'test-w8-1770443045786-plw0qfn0@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 9] Created test guest: {
  email: [32m'test-w9-1770443046059-g3sv55eh@example.com'[39m,
  id: [32m'4e641e1f-4868-49cd-aae6-b2b70981eca1'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'8f66e539-2db6-4e36-b2ab-9af8c732f0cb'[39m
}
[Worker 9] âœ… Verified guest exists: {
  email: [32m'test-w9-1770443046059-g3sv55eh@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ˜  11 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:427:7 â€º Guest Authentication â€º should complete logout flow (1.4s)
  âœ˜  12 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:466:7 â€º Guest Authentication â€º should persist authentication across page refreshes (1.3s)
  âœ˜  13 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:492:7 â€º Guest Authentication â€º should switch between authentication tabs (1.3s)
  âœ˜   9 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:356:7 â€º Guest Authentication â€º should show error for already used magic link (14.9s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ”„ add secrets lifecycle management: https://dotenvx.com/ops
[Worker 10] Created test guest: {
  email: [32m'test-w10-1770443048624-00a8lv77@example.com'[39m,
  id: [32m'ceb4294e-b17c-4446-8d56-a8675c2c85fa'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'623f9afd-d355-4737-9aa4-a9c791d884d5'[39m
}
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  suppress all logs with { quiet: true }
[Worker 10] âœ… Verified guest exists: {
  email: [32m'test-w10-1770443048624-00a8lv77@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 11] Created test guest: {
  email: [32m'test-w11-1770443049560-mp1or1qa@example.com'[39m,
  id: [32m'91a70a8b-9c50-44b1-bcaa-c67fadd9ff0c'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'475281a3-d3b0-434e-a67b-3eb660ff4e76'[39m
}
[Worker 11] âœ… Verified guest exists: {
  email: [32m'test-w11-1770443049560-mp1or1qa@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ˜  14 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:535:7 â€º Guest Authentication â€º should handle authentication errors gracefully (1.4s)
  âœ˜  15 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:579:7 â€º Guest Authentication â€º should log authentication events in audit log (1.3s)

ðŸ§¹ E2E Global Teardown Starting...

ðŸ—‘ï¸  Cleaning up test data...
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ðŸ”“ Removing authentication state...
   No authentication directory found (already clean)
âœ… Authentication state removed

ðŸ“Š Execution Summary:
   Duration: 2.10s
   Errors: 0
   Status: âœ… Clean teardown

âœ¨ E2E Global Teardown Complete!



  1) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:158:7 â€º Guest Authentication â€º should successfully authenticate with email matching 

    TimeoutError: page.waitForURL: Timeout 10000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "/guest/dashboard" until "load"
      navigated to "http://localhost:3000/guest/dashboard"
      "domcontentloaded" event fired
    ============================================================

      171 |     // Wait for redirect to dashboard (increased timeout for slower loads)
      172 |     await page.waitForLoadState('networkidle');
    > 173 |     await page.waitForURL('/guest/dashboard', { timeout: 10000 });
          |                ^
      174 |     await expect(page).toHaveURL('/guest/dashboard');
      175 |     await expect(page.locator('h1')).toBeVisible();
      176 |   });
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:173:16

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-1ea91-nticate-with-email-matching-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-1ea91-nticate-with-email-matching-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-1ea91-nticate-with-email-matching-chromium/error-context.md

  2) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:206:7 â€º Guest Authentication â€º should show loading state during authentication 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeDisabled[2m([22m[2m)[22m failed

    Locator: locator('button[type="submit"]:has-text("Log In")')
    Expected: disabled
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeDisabled" with timeout 10000ms[22m
    [2m  - waiting for locator('button[type="submit"]:has-text("Log In")')[22m
    [2m    - waiting for" http://localhost:3000/guest/dashboard" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/guest/dashboard"[22m


      215 |
      216 |     // Verify button is disabled during loading
    > 217 |     await expect(submitButton).toBeDisabled();
          |                                ^
      218 |   });
      219 |
      220 |   test('should create session cookie on successful authentication', async ({ page, context }) => {
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:217:32

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-79b6f-state-during-authentication-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-79b6f-state-during-authentication-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-79b6f-state-during-authentication-chromium/error-context.md

  3) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:244:7 â€º Guest Authentication â€º should successfully request and verify magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('.bg-green-50')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('.bg-green-50')[22m


      263 |
      264 |     // Wait for success message
    > 265 |     await expect(page.locator('.bg-green-50')).toBeVisible();
          |                                                ^
      266 |     await expect(page.locator('.text-green-800')).toContainText(/check your email/i);
      267 |     await expect(page.locator('.text-green-800')).toContainText('15 minutes');
      268 |
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:265:48

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-1c592-quest-and-verify-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-1c592-quest-and-verify-magic-link-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-1c592-quest-and-verify-magic-link-chromium/error-context.md

  4) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:292:7 â€º Guest Authentication â€º should show success message after requesting magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('.bg-green-50')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('.bg-green-50')[22m


      309 |
      310 |     // Verify success message
    > 311 |     await expect(page.locator('.bg-green-50')).toBeVisible();
          |                                                ^
      312 |     await expect(page.locator('.text-green-800')).toContainText('Check your email for a login link');
      313 |     await expect(page.locator('.text-green-800')).toContainText('15 minutes');
      314 |
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:311:48

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-71b1d-after-requesting-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-71b1d-after-requesting-magic-link-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-71b1d-after-requesting-magic-link-chromium/error-context.md

  5) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:320:7 â€º Guest Authentication â€º should show error for expired magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoContainText[2m([22m[32mexpected[39m[2m)[22m failed

    Locator: locator('h1')
    Expected substring: [32m"Link Expired"[39m
    Received string:    [31m"Invalid Link"[39m
    Timeout: 10000ms

    Call log:
    [2m  - Expect "toContainText" with timeout 10000ms[22m
    [2m  - waiting for locator('h1')[22m
    [2m    - waiting for" http://localhost:3000/auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link"[22m
    [2m    4 Ã— locator resolved to <h1 class="text-2xl font-bold text-jungle-800 mb-2">Verifying Your Link</h1>[22m
    [2m      - unexpected value "Verifying Your Link"[22m
    [2m    7 Ã— locator resolved to <h1 class="text-2xl font-bold text-red-800 mb-2">Invalid Link</h1>[22m
    [2m      - unexpected value "Invalid Link"[22m


      343 |
      344 |     // Verify error message with more specific selectors
    > 345 |     await expect(page.locator('h1')).toContainText('Link Expired');
          |                                      ^
      346 |     const errorDescription = page.locator('p.text-gray-600').first();
      347 |     await expect(errorDescription).toContainText('This magic link has expired');
      348 |     const securityNote = page.locator('p.text-sm.text-gray-500');
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:345:38

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-fc3b3-rror-for-expired-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-fc3b3-rror-for-expired-magic-link-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-fc3b3-rror-for-expired-magic-link-chromium/error-context.md

  6) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:356:7 â€º Guest Authentication â€º should show error for already used magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('.bg-green-50')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('.bg-green-50')[22m


      368 |     await page.fill('#magic-link-input', testGuestEmail);
      369 |     await page.click('button[type="submit"]:has-text("Send Magic Link")');
    > 370 |     await expect(page.locator('.bg-green-50')).toBeVisible();
          |                                                ^
      371 |
      372 |     // Get token from database
      373 |     const { data: tokens } = await supabase
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:370:48

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-fb7a8-for-already-used-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-fb7a8-for-already-used-magic-link-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-fb7a8-for-already-used-magic-link-chromium/error-context.md

  7) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:398:7 â€º Guest Authentication â€º should show error for invalid or missing token 

    Error: Error reading storage state from .auth/user.json:
    ENOENT: no such file or directory, open '.auth/user.json'

  8) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:427:7 â€º Guest Authentication â€º should complete logout flow 

    Error: Error reading storage state from .auth/user.json:
    ENOENT: no such file or directory, open '.auth/user.json'

  9) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:466:7 â€º Guest Authentication â€º should persist authentication across page refreshes 

    Error: Error reading storage state from .auth/user.json:
    ENOENT: no such file or directory, open '.auth/user.json'

  10) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:492:7 â€º Guest Authentication â€º should switch between authentication tabs 

    Error: Error reading storage state from .auth/user.json:
    ENOENT: no such file or directory, open '.auth/user.json'

  11) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:535:7 â€º Guest Authentication â€º should handle authentication errors gracefully 

    Error: Error reading storage state from .auth/user.json:
    ENOENT: no such file or directory, open '.auth/user.json'

  12) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:579:7 â€º Guest Authentication â€º should log authentication events in audit log 

    Error: Error reading storage state from .auth/user.json:
    ENOENT: no such file or directory, open '.auth/user.json'

  12 failed
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:158:7 â€º Guest Authentication â€º should successfully authenticate with email matching 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:206:7 â€º Guest Authentication â€º should show loading state during authentication 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:244:7 â€º Guest Authentication â€º should successfully request and verify magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:292:7 â€º Guest Authentication â€º should show success message after requesting magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:320:7 â€º Guest Authentication â€º should show error for expired magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:356:7 â€º Guest Authentication â€º should show error for already used magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:398:7 â€º Guest Authentication â€º should show error for invalid or missing token 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:427:7 â€º Guest Authentication â€º should complete logout flow 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:466:7 â€º Guest Authentication â€º should persist authentication across page refreshes 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:492:7 â€º Guest Authentication â€º should switch between authentication tabs 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:535:7 â€º Guest Authentication â€º should handle authentication errors gracefully 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:579:7 â€º Guest Authentication â€º should log authentication events in audit log 
  3 passed (1.5m)

[36m  Serving HTML report at http://localhost:56704. Press Ctrl+C to quit.[39m
