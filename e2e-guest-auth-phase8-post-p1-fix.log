
> destination-wedding-platform@0.1.0 test:e2e
> playwright test __tests__/e2e/auth/guestAuth.spec.ts

[dotenv@17.2.4] injecting env (24) from .env.e2e -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops

ðŸš€ E2E Global Setup Starting...

ðŸ“Š Verifying test database connection...
âœ… Test database connected

ðŸ§¹ Cleaning up test data...
   Cleaning up leftover test data...
   Test data cleanup complete
âœ… Test data cleaned

ðŸ‘¤ Creating test guest...
   Created warmup guest: warmup@example.com (ID: 23e211d8-b34d-49a5-9312-315710ee9c89)
   Created test guest: test@example.com (ID: 6f575cda-849c-4b32-b6a6-877683cae6ae)
âœ… Test guest created

ðŸ“¦ Creating comprehensive test data...
   Creating location hierarchy...
   Location hierarchy already exists
   Creating events...
   Events already exist
   Creating activities...
   Warning: Could not create comprehensive test data: Failed to create ceremony activity: Could not find the 'cost_per_guest' column of 'activities' in the schema cache
   Some E2E tests may fail due to missing data
âœ… Comprehensive test data created

ðŸŒ Verifying Next.js server...
âœ… Next.js server is running

ðŸ”¥ Warming up API routes...
   Warming up 3 guest auth routes with retry logic...
   âœ… Route ready: /api/guest-auth/email-match (attempt 1/5, status: 404)
   âœ… Route ready: /api/guest-auth/magic-link/request (attempt 1/5, status: 404)
   âœ… Route ready: /api/guest-auth/magic-link/verify (attempt 1/5, status: 400)
   âœ… Guest auth routes warmup complete
âœ… API routes warmed up

ðŸ” Setting up admin authentication...
   Attempting browser-based admin login: admin@example.com
   Created .auth directory: /Users/jaron/Desktop/wedding-platform-v2/.auth
   Navigating to http://localhost:3000/auth/login...
   Page loaded, filling form...
   Form filled, submitting...
   Current URL after submit: http://localhost:3000/admin
   âœ… Successfully logged in via browser
   âœ… Authentication state saved
âœ… Admin authentication saved

âœ¨ E2E Global Setup Complete!


Running 15 tests using 4 workers

  -   1 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:235:8 â€º Guest Authentication â€º should show loading state during authentication
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  override existing env vars with { override: true }
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  suppress all logs with { quiet: true }
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops
[Worker 1] Created test guest: {
  email: [32m'test-w1-1770446480190-s7seup28@example.com'[39m,
  id: [32m'63f9ef22-68e9-4eeb-91a9-831d1b0d29a6'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'57598a5f-a9e7-4ddf-bfa3-55d0f7dec9bc'[39m
}
[Worker 0] Created test guest: {
  email: [32m'test-w0-1770446480165-oc96bk10@example.com'[39m,
  id: [32m'788ff537-4814-46bb-a8a3-53ffc35f08b1'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'51fa0cec-09c2-421f-92f4-ecb90abc6a37'[39m
}
[Worker 1] âœ… Verified guest exists: {
  email: [32m'test-w1-1770446480190-s7seup28@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 0] âœ… Verified guest exists: {
  email: [32m'test-w0-1770446480165-oc96bk10@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 3] Created test guest: {
  email: [32m'test-w3-1770446480521-4bsifict@example.com'[39m,
  id: [32m'f6952256-45df-4c90-ace8-7bd323435c97'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'37ad9179-a2a5-4e9a-8a68-3e19e9e6d92a'[39m
}
[Worker 2] Created test guest: {
  email: [32m'test-w2-1770446480530-wru3ra7v@example.com'[39m,
  id: [32m'1ce5a5f2-40e2-4f0d-b987-d82829c7e82f'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'851faf78-a64f-45da-bf43-8f04efb93470'[39m
}
[Worker 3] âœ… Verified guest exists: {
  email: [32m'test-w3-1770446480521-4bsifict@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 2] âœ… Verified guest exists: {
  email: [32m'test-w2-1770446480530-wru3ra7v@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Browser info] %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[Browser log] [HMR] connected
[Test] About to click submit button
  âœ“   5 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:222:7 â€º Guest Authentication â€º should show error for invalid email format (11.9s)
[Worker 2] Created test guest: {
  email: [32m'test-w2-1770446493143-mb3l3fhj@example.com'[39m,
  id: [32m'25f7ac11-a0cc-4545-a583-07721377db91'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'f2578e5e-8796-4a03-b3fe-34dd07cb69d4'[39m
}
[Browser warning] Cookie not set yet, waiting additional time...
[Worker 2] âœ… Verified guest exists: {
  email: [32m'test-w2-1770446493143-mb3l3fhj@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ“   3 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:207:7 â€º Guest Authentication â€º should show error for non-existent email (14.6s)
[Worker 1] Created test guest: {
  email: [32m'test-w1-1770446495171-55iuu485@example.com'[39m,
  id: [32m'1be2ac53-9d37-45f5-a31d-981e2fce3bb7'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'8dce314b-74d1-41e6-bc4b-daa5839c1b33'[39m
}
[Worker 1] âœ… Verified guest exists: {
  email: [32m'test-w1-1770446495171-55iuu485@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Browser log] [Fast Refresh] rebuilding
[Browser log] [Fast Refresh] done in 1575ms
[Browser log] [Fast Refresh] rebuilding
[Browser log] [Fast Refresh] done in 456ms
=== Navigation failed, dumping console logs ===
[Browser info] %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[Browser log] [HMR] connected
[Browser warning] Cookie not set yet, waiting additional time...
[Browser log] [Fast Refresh] rebuilding
[Browser log] [Fast Refresh] done in 1575ms
[Browser log] [Fast Refresh] rebuilding
[Browser log] [Fast Refresh] done in 456ms
=== Current URL === http://localhost:3000/guest/dashboard
  âœ˜   4 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:261:7 â€º Guest Authentication â€º should create session cookie on successful authentication (20.8s)
[Browser info] %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[Browser log] %c%s%c [GuestDashboard] Session check: background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px  Server   {hasToken: true, tokenPrefix: f78b26e4}
[Browser log] %c%s%c [GuestDashboard] Session query result: background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px  Server   {found: true, guestId: 788ff537-4814-46bb-a8a3-53ffc35f08b1}
[Browser log] %c%s%c [GuestDashboard] Guest query result: background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px  Server   {found: true, email: test-w0-1770446480165-oc96bk10@example.com}
[Browser log] %c%s%c [GuestDashboard] Rendering dashboard for guest: background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px  Server   test-w0-1770446480165-oc96bk10@example.com
[Browser log] [HMR] connected
[Browser error] Failed to load resource: the server responded with a status of 401 (Unauthorized)
[Browser error] Failed to load resource: the server responded with a status of 401 (Unauthorized)
[Browser error] Failed to load resource: the server responded with a status of 401 (Unauthorized)
[Browser error] Failed to load resource: the server responded with a status of 401 (Unauthorized)
  âœ˜   2 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:157:7 â€º Guest Authentication â€º should successfully authenticate with email matching (25.6s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com
[Worker 4] Created test guest: {
  email: [32m'test-w4-1770446509028-m3oe6t6j@example.com'[39m,
  id: [32m'e05c6314-2b38-45cd-805e-c5d65d6b3f21'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'4e7bc72a-e3ca-4e3d-a3f5-567bf3d15d5f'[39m
}
[Worker 4] âœ… Verified guest exists: {
  email: [32m'test-w4-1770446509028-m3oe6t6j@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }
[Worker 5] Created test guest: {
  email: [32m'test-w5-1770446511023-fin89m7b@example.com'[39m,
  id: [32m'0a426a2d-8b0f-4b5f-b785-8264218cddde'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'7216d570-e3fb-4b22-a35e-3a4758e01199'[39m
}
[Worker 5] âœ… Verified guest exists: {
  email: [32m'test-w5-1770446511023-fin89m7b@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ˜   7 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:351:7 â€º Guest Authentication â€º should show success message after requesting magic link (19.8s)
  âœ˜   6 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:287:7 â€º Guest Authentication â€º should successfully request and verify magic link (22.0s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ” prevent committing .env to code: https://dotenvx.com/precommit
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops
[Worker 6] Created test guest: {
  email: [32m'test-w6-1770446517667-vurlslpz@example.com'[39m,
  id: [32m'dfc266c2-3fcb-48ec-b25b-6b626274267b'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'bb1ae4c8-99cb-4fad-8a9c-a3784ef501c0'[39m
}
[Worker 6] âœ… Verified guest exists: {
  email: [32m'test-w6-1770446517667-vurlslpz@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 7] Created test guest: {
  email: [32m'test-w7-1770446518820-65394njd@example.com'[39m,
  id: [32m'32a91af3-f33f-4cb7-a30a-28d6eed9befe'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'73bc3a9d-3192-4c6d-8cbc-646acadb0e30'[39m
}
[Worker 7] âœ… Verified guest exists: {
  email: [32m'test-w7-1770446518820-65394njd@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ“   8 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:393:7 â€º Guest Authentication â€º should show error for expired magic link (20.3s)
[Worker 4] Created test guest: {
  email: [32m'test-w4-1770446530508-ocr4qtbh@example.com'[39m,
  id: [32m'22cd77ec-555c-4f38-a4aa-926cbaf429d0'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'9b020a00-0d27-4fbf-ba8d-bf53256c78df'[39m
}
[Worker 4] âœ… Verified guest exists: {
  email: [32m'test-w4-1770446530508-ocr4qtbh@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ˜   9 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:427:7 â€º Guest Authentication â€º should show error for already used magic link (36.7s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops
  âœ˜  11 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:512:7 â€º Guest Authentication â€º should complete logout flow (40.8s)
[Worker 8] Created test guest: {
  email: [32m'test-w8-1770446560697-7k4paf2w@example.com'[39m,
  id: [32m'0468b619-603d-4c2d-ad02-580779cc3513'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'6e88f077-f6cf-42e2-a627-b1af6490581c'[39m
}
[Worker 8] âœ… Verified guest exists: {
  email: [32m'test-w8-1770446560697-7k4paf2w@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ“¡ add observability to secrets: https://dotenvx.com/ops
[Worker 9] Created test guest: {
  email: [32m'test-w9-1770446565520-73oi1k14@example.com'[39m,
  id: [32m'47f1ebb6-4984-475e-8892-6a2ed399a878'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'1078ff6a-6bc2-4369-989e-694f16d855df'[39m
}
[Worker 9] âœ… Verified guest exists: {
  email: [32m'test-w9-1770446565520-73oi1k14@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ˜  10 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:483:7 â€º Guest Authentication â€º should show error for invalid or missing token (58.8s)
  âœ“  13 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:607:7 â€º Guest Authentication â€º should switch between authentication tabs (20.9s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ” prevent committing .env to code: https://dotenvx.com/precommit
[Worker 10] Created test guest: {
  email: [32m'test-w10-1770446584675-6btf4hu7@example.com'[39m,
  id: [32m'c6a8366f-db10-4e2c-9a6c-d48a7cad0504'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'7f476cd3-6dd0-46f4-af3b-4bc2501a1830'[39m
}
[Worker 10] âœ… Verified guest exists: {
  email: [32m'test-w10-1770446584675-6btf4hu7@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ“  14 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:650:7 â€º Guest Authentication â€º should handle authentication errors gracefully (26.8s)
  âœ˜  12 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:579:7 â€º Guest Authentication â€º should persist authentication across page refreshes (1.1m)
  âœ˜  15 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:695:7 â€º Guest Authentication â€º should log authentication events in audit log (10.4s)

ðŸ§¹ E2E Global Teardown Starting...

ðŸ—‘ï¸  Cleaning up test data...
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ðŸ”“ Removing authentication state...
   Removed: .auth/user.json
   Removed empty .auth directory
âœ… Authentication state removed

ðŸ“Š Execution Summary:
   Duration: 2.37s
   Errors: 0
   Status: âœ… Clean teardown

âœ¨ E2E Global Teardown Complete!



  1) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:157:7 â€º Guest Authentication â€º should successfully authenticate with email matching 

    TimeoutError: page.waitForURL: Timeout 15000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "/guest/dashboard" until "networkidle"
      navigated to "http://localhost:3000/guest/dashboard"
      "domcontentloaded" event fired
    ============================================================

      187 |     try {
      188 |       await Promise.all([
    > 189 |         page.waitForURL('/guest/dashboard', { 
          |              ^
      190 |           timeout: 15000,
      191 |           waitUntil: 'networkidle'
      192 |         }),
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:189:14

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-1ea91-nticate-with-email-matching-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-1ea91-nticate-with-email-matching-chromium/error-context.md

  2) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:261:7 â€º Guest Authentication â€º should create session cookie on successful authentication 

    TimeoutError: page.waitForURL: Timeout 10000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "/guest/dashboard" until "domcontentloaded"
    ============================================================

      267 |
      268 |     // Wait for redirect
    > 269 |     await page.waitForURL('/guest/dashboard', { 
          |                ^
      270 |       timeout: 10000,
      271 |       waitUntil: 'domcontentloaded'
      272 |     });
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:269:16

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-8c77d-n-successful-authentication-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-8c77d-n-successful-authentication-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-8c77d-n-successful-authentication-chromium/error-context.md

  3) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:287:7 â€º Guest Authentication â€º should successfully request and verify magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('.bg-green-50')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('.bg-green-50')[22m


      320 |
      321 |     // Wait for success message
    > 322 |     await expect(page.locator('.bg-green-50')).toBeVisible();
          |                                                ^
      323 |     await expect(page.locator('.text-green-800')).toContainText(/check your email/i);
      324 |     await expect(page.locator('.text-green-800')).toContainText('15 minutes');
      325 |
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:322:48

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-1c592-quest-and-verify-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-1c592-quest-and-verify-magic-link-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-1c592-quest-and-verify-magic-link-chromium/error-context.md

  4) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:351:7 â€º Guest Authentication â€º should show success message after requesting magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('.bg-green-50')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('.bg-green-50')[22m


      382 |
      383 |     // Verify success message
    > 384 |     await expect(page.locator('.bg-green-50')).toBeVisible();
          |                                                ^
      385 |     await expect(page.locator('.text-green-800')).toContainText('Check your email for a login link');
      386 |     await expect(page.locator('.text-green-800')).toContainText('15 minutes');
      387 |
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:384:48

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-71b1d-after-requesting-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-71b1d-after-requesting-magic-link-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-71b1d-after-requesting-magic-link-chromium/error-context.md

  5) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:427:7 â€º Guest Authentication â€º should show error for already used magic link 

    TimeoutError: page.waitForURL: Timeout 10000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "/guest/dashboard" until "load"
      navigated to "http://localhost:3000/auth/guest-login/verify?token=89e67618839d425cbef200ea8107c23da256adbf5a378d1fee28b6d9e405fcdd"
      navigated to "http://localhost:3000/guest/dashboard"
      "domcontentloaded" event fired
    ============================================================

      468 |     // Use the token once
      469 |     await page.goto(`/auth/guest-login/verify?token=${token}`);
    > 470 |     await page.waitForURL('/guest/dashboard', { timeout: 10000 });
          |                ^
      471 |
      472 |     // Try to use the same token again
      473 |     await page.goto(`/auth/guest-login/verify?token=${token}`);
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:470:16

    attachment #1: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-fb7a8-for-already-used-magic-link-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-fb7a8-for-already-used-magic-link-chromium/error-context.md

  6) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:483:7 â€º Guest Authentication â€º should show error for invalid or missing token 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoContainText[2m([22m[32mexpected[39m[2m)[22m failed

    Locator: locator('h1')
    Expected substring: [32m"Invalid Link"[39m
    Received string:    [31m""[39m
    Timeout: 10000ms

    Call log:
    [2m  - Expect "toContainText" with timeout 10000ms[22m
    [2m  - waiting for locator('h1')[22m
    [2m    - waiting for" http://localhost:3000/api/guest-auth/magic-link/verify" navigation to finish...[22m


      501 |
      502 |     await page.goto(`/auth/guest-login/verify?token=${token}`);
    > 503 |     await expect(page.locator('h1')).toContainText('Invalid Link');
          |                                      ^
      504 |     const nonExistentDescription = page.locator('p.text-gray-600').first();
      505 |     await expect(nonExistentDescription).toContainText(/invalid|expired/i);
      506 |   });
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:503:38

    Error Context: test-results/auth-guestAuth-Guest-Authe-ce12c-or-invalid-or-missing-token-chromium/error-context.md

  7) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:512:7 â€º Guest Authentication â€º should complete logout flow 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected substring: [32m"/auth/guest-login"[39m
    Received string:    [31m"http://localhost:3000/guest/dashboard"[39m

      562 |     // Step 5: Verify we're on login page or redirected to it
      563 |     const finalUrl = page.url();
    > 564 |     expect(finalUrl).toContain('/auth/guest-login');
          |                      ^
      565 |     await expect(page.locator('h1')).toContainText('Welcome to Our Wedding');
      566 |
      567 |     // Step 6: Verify session cookie was cleared
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:564:22

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-b7d01-should-complete-logout-flow-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-b7d01-should-complete-logout-flow-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-b7d01-should-complete-logout-flow-chromium/error-context.md

  8) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:579:7 â€º Guest Authentication â€º should persist authentication across page refreshes 

    Error: page.goto: net::ERR_ABORTED at http://localhost:3000/guest/activities
    Call log:
    [2m  - navigating to "http://localhost:3000/guest/activities", waiting until "load"[22m


      600 |
      601 |     // Step 5: Navigate to another page
    > 602 |     await page.goto('/guest/activities');
          |                ^
      603 |     await expect(page).toHaveURL('/guest/activities');
      604 |     await expect(page.locator('h1')).toBeVisible();
      605 |   });
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:602:16

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-2d8a3-ation-across-page-refreshes-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-2d8a3-ation-across-page-refreshes-chromium/error-context.md

  9) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:695:7 â€º Guest Authentication â€º should log authentication events in audit log 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoHaveLength[2m([22m[32mexpected[39m[2m)[22m

    Expected length: [32m1[39m
    Received length: [31m0[39m
    Received array:  [31m[][39m

      730 |
      731 |     expect(loginError).toBeNull();
    > 732 |     expect(loginLogs).toHaveLength(1);
          |                       ^
      733 |     expect(loginLogs![0].details.auth_method).toBe('email_matching');
      734 |     expect(loginLogs![0].details.email).toBe(testGuestEmail);
      735 |
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:732:23

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-c413d-ication-events-in-audit-log-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-c413d-ication-events-in-audit-log-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-c413d-ication-events-in-audit-log-chromium/error-context.md

  9 failed
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:157:7 â€º Guest Authentication â€º should successfully authenticate with email matching 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:261:7 â€º Guest Authentication â€º should create session cookie on successful authentication 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:287:7 â€º Guest Authentication â€º should successfully request and verify magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:351:7 â€º Guest Authentication â€º should show success message after requesting magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:427:7 â€º Guest Authentication â€º should show error for already used magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:483:7 â€º Guest Authentication â€º should show error for invalid or missing token 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:512:7 â€º Guest Authentication â€º should complete logout flow 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:579:7 â€º Guest Authentication â€º should persist authentication across page refreshes 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:695:7 â€º Guest Authentication â€º should log authentication events in audit log 
  1 skipped
  5 passed (2.3m)

[36m  Serving HTML report at http://localhost:63132. Press Ctrl+C to quit.[39m
