
> destination-wedding-platform@0.1.0 test:e2e
> playwright test __tests__/e2e/auth/guestAuth.spec.ts

[dotenv@17.2.4] injecting env (24) from .env.e2e -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops

ğŸš€ E2E Global Setup Starting...

ğŸ“Š Verifying test database connection...
âœ… Test database connected

ğŸ§¹ Cleaning up test data...
   Cleaning up leftover test data...
   Test data cleanup complete
âœ… Test data cleaned

ğŸ‘¤ Creating test guest...
   Created warmup guest: warmup@example.com (ID: 1d51c356-2fd3-4e2b-bf62-041c3d309853)
   Created test guest: test@example.com (ID: 3a78d004-8920-4789-9b90-ae318408a753)
âœ… Test guest created

ğŸ“¦ Creating comprehensive test data...
   Creating location hierarchy...
   Location hierarchy already exists
   Creating events...
   Events already exist
   Creating activities...
   Warning: Could not create comprehensive test data: Failed to create ceremony activity: Could not find the 'cost_per_guest' column of 'activities' in the schema cache
   Some E2E tests may fail due to missing data
âœ… Comprehensive test data created

ğŸŒ Verifying Next.js server...
âœ… Next.js server is running

ğŸ”¥ Warming up API routes...
   Warming up 3 guest auth routes with retry logic...
   âœ… Route ready: /api/guest-auth/email-match (attempt 1/5, status: 404)
   âœ… Route ready: /api/guest-auth/magic-link/request (attempt 1/5, status: 404)
   âœ… Route ready: /api/guest-auth/magic-link/verify (attempt 1/5, status: 400)
   âœ… Guest auth routes warmup complete
âœ… API routes warmed up

ğŸ” Setting up admin authentication...
   Attempting browser-based admin login: admin@example.com
   Created .auth directory: /Users/jaron/Desktop/wedding-platform-v2/.auth
   Navigating to http://localhost:3000/auth/login...
   Page loaded, filling form...
   Form filled, submitting...
   Current URL after submit: http://localhost:3000/admin
   âœ… Successfully logged in via browser
   âœ… Authentication state saved
âœ… Admin authentication saved

âœ¨ E2E Global Setup Complete!


Running 15 tests using 4 workers

[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ğŸ”‘ add access controls to secrets: https://dotenvx.com/ops
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ğŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ğŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops
[Worker 1] Created test guest: {
  email: [32m'test-w1-1770443593124-23h0ddjc@example.com'[39m,
  id: [32m'ef1a1583-52ca-4e5f-bf45-b22b164602a5'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'2387791b-d0c9-498b-8afa-31cfac947712'[39m
}
[Worker 3] Created test guest: {
  email: [32m'test-w3-1770443593256-u07cab9u@example.com'[39m,
  id: [32m'5d06c6a9-932c-4f4d-a756-de55044f1f0f'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'78b9048a-3ec2-4791-9283-296573adce62'[39m
}
[Worker 2] Created test guest: {
  email: [32m'test-w2-1770443593154-g7ezwrx5@example.com'[39m,
  id: [32m'4439887c-885a-40ff-9d55-36779eff6395'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'0ebe0f22-0530-4a40-8f6e-df495e0e93f0'[39m
}
[Worker 0] Created test guest: {
  email: [32m'test-w0-1770443593165-ww5gsa0j@example.com'[39m,
  id: [32m'c9a3d2cf-c07a-4317-bca2-85c898b738b7'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'88090366-686c-4016-8edf-f82e88b92f6a'[39m
}
[Worker 1] âœ… Verified guest exists: {
  email: [32m'test-w1-1770443593124-23h0ddjc@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 3] âœ… Verified guest exists: {
  email: [32m'test-w3-1770443593256-u07cab9u@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 2] âœ… Verified guest exists: {
  email: [32m'test-w2-1770443593154-g7ezwrx5@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 0] âœ… Verified guest exists: {
  email: [32m'test-w0-1770443593165-ww5gsa0j@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ“   2 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:195:7 â€º Guest Authentication â€º should show error for invalid email format (7.0s)
[Worker 2] Created test guest: {
  email: [32m'test-w2-1770443600731-vbc1tm7g@example.com'[39m,
  id: [32m'd2eae822-20d4-475f-aca8-93a3b8df9786'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'32456242-9f13-43f3-b475-a59c66078e44'[39m
}
[Worker 2] âœ… Verified guest exists: {
  email: [32m'test-w2-1770443600731-vbc1tm7g@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ“   1 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:180:7 â€º Guest Authentication â€º should show error for non-existent email (8.8s)
[Worker 1] Created test guest: {
  email: [32m'test-w1-1770443602303-qhiqit6h@example.com'[39m,
  id: [32m'df64e629-474f-483d-af50-8413e7b6db6c'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'7c57eaeb-b719-4393-8ea6-78d289941a7d'[39m
}
[Worker 1] âœ… Verified guest exists: {
  email: [32m'test-w1-1770443602303-qhiqit6h@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ“   4 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:158:7 â€º Guest Authentication â€º should successfully authenticate with email matching (17.1s)
[Worker 0] Created test guest: {
  email: [32m'test-w0-1770443610635-m4x24h8r@example.com'[39m,
  id: [32m'0326ab71-64a9-44b4-9459-4962e3d5ae03'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'372d44a5-3221-42f4-b090-8366f101164f'[39m
}
[Worker 0] âœ… Verified guest exists: {
  email: [32m'test-w0-1770443610635-m4x24h8r@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ˜   3 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:208:7 â€º Guest Authentication â€º should show loading state during authentication (17.2s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  enable debug logging with { debug: true }
  âœ“   5 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:222:7 â€º Guest Authentication â€º should create session cookie on successful authentication (12.5s)
[Worker 2] Created test guest: {
  email: [32m'test-w2-1770443613254-ej6mwtqr@example.com'[39m,
  id: [32m'a0e6ac43-1665-4fc6-bd84-af78e9529647'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'56101a41-ced6-48e0-b63f-06a0c7e250ec'[39m
}
[Worker 2] âœ… Verified guest exists: {
  email: [32m'test-w2-1770443613254-ej6mwtqr@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 4] Created test guest: {
  email: [32m'test-w4-1770443613304-8a0dt3ay@example.com'[39m,
  id: [32m'7cfddca9-9c58-4e21-8a1c-716fcc443c4e'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'123d8a58-2449-4f0b-9254-e7d415603f86'[39m
}
[Worker 4] âœ… Verified guest exists: {
  email: [32m'test-w4-1770443613304-8a0dt3ay@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ˜   6 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:248:7 â€º Guest Authentication â€º should successfully request and verify magic link (18.5s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ğŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops
[Worker 5] Created test guest: {
  email: [32m'test-w5-1770443621484-qm3ly5wo@example.com'[39m,
  id: [32m'21ef148c-34e2-4026-a7f2-28fc89092a38'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'b2b64352-00d4-4519-acbc-62e13548460d'[39m
}
[Worker 5] âœ… Verified guest exists: {
  email: [32m'test-w5-1770443621484-qm3ly5wo@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ˜   7 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:298:7 â€º Guest Authentication â€º should show success message after requesting magic link (13.4s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
[Worker 6] Created test guest: {
  email: [32m'test-w6-1770443625292-ej5o5976@example.com'[39m,
  id: [32m'137c057c-bd8c-4759-a18a-f2278715a849'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'98ec6756-d79f-46bc-9372-afa665cf729f'[39m
}
  âœ˜   9 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:362:7 â€º Guest Authentication â€º should show error for already used magic link (12.5s)
[Worker 6] âœ… Verified guest exists: {
  email: [32m'test-w6-1770443625292-ej5o5976@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ“  10 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:404:7 â€º Guest Authentication â€º should show error for invalid or missing token (5.3s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops
[Worker 5] Created test guest: {
  email: [32m'test-w5-1770443626901-vgpwku51@example.com'[39m,
  id: [32m'75316465-50ee-4118-a290-bf46174822f7'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'9081a55e-7b0c-4227-8ddb-025c922fdd9a'[39m
}
[Worker 5] âœ… Verified guest exists: {
  email: [32m'test-w5-1770443626901-vgpwku51@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 7] Created test guest: {
  email: [32m'test-w7-1770443627210-tz7akf2v@example.com'[39m,
  id: [32m'5f60cc76-5ba8-4d1c-b300-2911a9d4f77e'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'508999b4-e5b5-4fb4-985e-fc8b7c3cfc83'[39m
}
[Worker 7] âœ… Verified guest exists: {
  email: [32m'test-w7-1770443627210-tz7akf2v@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ˜   8 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:326:7 â€º Guest Authentication â€º should show error for expired magic link (15.9s)
  âœ“  12 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:504:7 â€º Guest Authentication â€º should switch between authentication tabs (2.8s)
[Worker 5] Created test guest: {
  email: [32m'test-w5-1770443629736-mey1xmd0@example.com'[39m,
  id: [32m'60a42527-82ab-4eee-bc91-6dc28589887f'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'977047e1-c756-40db-b888-f10dc180008b'[39m
}
[Worker 5] âœ… Verified guest exists: {
  email: [32m'test-w5-1770443629736-mey1xmd0@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ğŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops
[Worker 8] Created test guest: {
  email: [32m'test-w8-1770443632150-gdzsybue@example.com'[39m,
  id: [32m'b6531b6b-18da-4f38-ba24-4de1e8d51bb5'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'c513d1cd-0b8b-481e-98d8-a09e362741ac'[39m
}
[Worker 8] âœ… Verified guest exists: {
  email: [32m'test-w8-1770443632150-gdzsybue@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
  âœ˜  11 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:433:7 â€º Guest Authentication â€º should complete logout flow (18.1s)
  âœ˜  13 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:476:7 â€º Guest Authentication â€º should persist authentication across page refreshes (17.0s)
  âœ˜  14 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:591:7 â€º Guest Authentication â€º should log authentication events in audit log (15.9s)
  âœ˜  15 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:547:7 â€º Guest Authentication â€º should handle authentication errors gracefully (24.5s)

ğŸ§¹ E2E Global Teardown Starting...

ğŸ—‘ï¸  Cleaning up test data...
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ğŸ”“ Removing authentication state...
   No authentication directory found (already clean)
âœ… Authentication state removed

ğŸ“Š Execution Summary:
   Duration: 2.40s
   Errors: 0
   Status: âœ… Clean teardown

âœ¨ E2E Global Teardown Complete!



  1) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:208:7 â€º Guest Authentication â€º should show loading state during authentication 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeDisabled[2m([22m[2m)[22m failed

    Locator: locator('button[type="submit"]:has-text("Log In")')
    Expected: disabled
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeDisabled" with timeout 10000ms[22m
    [2m  - waiting for locator('button[type="submit"]:has-text("Log In")')[22m
    [2m    - waiting for" http://localhost:3000/guest/dashboard" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/guest/dashboard"[22m


      217 |
      218 |     // Verify button is disabled during loading
    > 219 |     await expect(submitButton).toBeDisabled();
          |                                ^
      220 |   });
      221 |
      222 |   test('should create session cookie on successful authentication', async ({ page, context }) => {
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:219:32

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-79b6f-state-during-authentication-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-79b6f-state-during-authentication-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-79b6f-state-during-authentication-chromium/error-context.md

  2) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:248:7 â€º Guest Authentication â€º should successfully request and verify magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('.bg-green-50')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('.bg-green-50')[22m


      267 |
      268 |     // Wait for success message
    > 269 |     await expect(page.locator('.bg-green-50')).toBeVisible();
          |                                                ^
      270 |     await expect(page.locator('.text-green-800')).toContainText(/check your email/i);
      271 |     await expect(page.locator('.text-green-800')).toContainText('15 minutes');
      272 |
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:269:48

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-1c592-quest-and-verify-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-1c592-quest-and-verify-magic-link-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-1c592-quest-and-verify-magic-link-chromium/error-context.md

  3) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:298:7 â€º Guest Authentication â€º should show success message after requesting magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('.bg-green-50')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('.bg-green-50')[22m


      315 |
      316 |     // Verify success message
    > 317 |     await expect(page.locator('.bg-green-50')).toBeVisible();
          |                                                ^
      318 |     await expect(page.locator('.text-green-800')).toContainText('Check your email for a login link');
      319 |     await expect(page.locator('.text-green-800')).toContainText('15 minutes');
      320 |
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:317:48

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-71b1d-after-requesting-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-71b1d-after-requesting-magic-link-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-71b1d-after-requesting-magic-link-chromium/error-context.md

  4) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:326:7 â€º Guest Authentication â€º should show error for expired magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoContainText[2m([22m[32mexpected[39m[2m)[22m failed

    Locator: locator('h1')
    Expected substring: [32m"Link Expired"[39m
    Received string:    [31m"Invalid Link"[39m
    Timeout: 10000ms

    Call log:
    [2m  - Expect "toContainText" with timeout 10000ms[22m
    [2m  - waiting for locator('h1')[22m
    [2m    - waiting for" http://localhost:3000/auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link"[22m
    [2m    5 Ã— locator resolved to <h1 class="text-2xl font-bold text-jungle-800 mb-2">Verifying Your Link</h1>[22m
    [2m      - unexpected value "Verifying Your Link"[22m
    [2m    7 Ã— locator resolved to <h1 class="text-2xl font-bold text-red-800 mb-2">Invalid Link</h1>[22m
    [2m      - unexpected value "Invalid Link"[22m


      349 |
      350 |     // Verify error message with more specific selectors
    > 351 |     await expect(page.locator('h1')).toContainText('Link Expired');
          |                                      ^
      352 |     const errorDescription = page.locator('p.text-gray-600').first();
      353 |     await expect(errorDescription).toContainText('This magic link has expired');
      354 |     const securityNote = page.locator('p.text-sm.text-gray-500');
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:351:38

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-fc3b3-rror-for-expired-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-fc3b3-rror-for-expired-magic-link-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-fc3b3-rror-for-expired-magic-link-chromium/error-context.md

  5) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:362:7 â€º Guest Authentication â€º should show error for already used magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('.bg-green-50')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('.bg-green-50')[22m


      374 |     await page.fill('#magic-link-input', testGuestEmail);
      375 |     await page.click('button[type="submit"]:has-text("Send Magic Link")');
    > 376 |     await expect(page.locator('.bg-green-50')).toBeVisible();
          |                                                ^
      377 |
      378 |     // Get token from database
      379 |     const { data: tokens } = await supabase
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:376:48

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-fb7a8-for-already-used-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-fb7a8-for-already-used-magic-link-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-fb7a8-for-already-used-magic-link-chromium/error-context.md

  6) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:433:7 â€º Guest Authentication â€º should complete logout flow 

    TimeoutError: page.waitForURL: Timeout 10000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "/auth/guest-login" until "domcontentloaded"
      navigated to "http://localhost:3000/guest/dashboard"
      navigated to "http://localhost:3000/guest/dashboard"
    ============================================================

      453 |
      454 |     // Step 4: Wait for redirect to login page
    > 455 |     await page.waitForURL('/auth/guest-login', { 
          |                ^
      456 |       timeout: 10000,
      457 |       waitUntil: 'domcontentloaded'
      458 |     });
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:455:16

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-b7d01-should-complete-logout-flow-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-b7d01-should-complete-logout-flow-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-b7d01-should-complete-logout-flow-chromium/error-context.md

  7) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:476:7 â€º Guest Authentication â€º should persist authentication across page refreshes 

    TimeoutError: page.waitForURL: Timeout 10000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "/guest/dashboard" until "domcontentloaded"
      navigated to "http://localhost:3000/auth/guest-login"
      navigated to "http://localhost:3000/auth/guest-login"
    ============================================================

      479 |     await page.fill('#email-matching-input', testGuestEmail);
      480 |     await page.click('button[type="submit"]:has-text("Log In")');
    > 481 |     await page.waitForURL('/guest/dashboard', { 
          |                ^
      482 |       timeout: 10000,
      483 |       waitUntil: 'domcontentloaded'
      484 |     });
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:481:16

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-2d8a3-ation-across-page-refreshes-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-2d8a3-ation-across-page-refreshes-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-2d8a3-ation-across-page-refreshes-chromium/error-context.md

  8) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:547:7 â€º Guest Authentication â€º should handle authentication errors gracefully 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoContainText[2m([22m[32mexpected[39m[2m)[22m failed

    Locator: locator('h1')
    Expected substring: [32m"Link Expired"[39m
    Received string:    [31m"Invalid Link"[39m
    Timeout: 10000ms

    Call log:
    [2m  - Expect "toContainText" with timeout 10000ms[22m
    [2m  - waiting for locator('h1')[22m
    [2m    - waiting for" http://localhost:3000/auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link"[22m
    [2m    4 Ã— locator resolved to <h1 class="text-2xl font-bold text-jungle-800 mb-2">Verifying Your Link</h1>[22m
    [2m      - unexpected value "Verifying Your Link"[22m
    [2m    2 Ã— locator resolved to <h1 class="text-2xl font-bold text-red-800 mb-2">Invalid Link</h1>[22m
    [2m      - unexpected value "Invalid Link"[22m
    [2m    2 Ã— locator resolved to <h1 class="text-2xl font-bold text-jungle-800 mb-2">Verifying Your Link</h1>[22m
    [2m      - unexpected value "Verifying Your Link"[22m
    [2m    4 Ã— locator resolved to <h1 class="text-2xl font-bold text-red-800 mb-2">Invalid Link</h1>[22m
    [2m      - unexpected value "Invalid Link"[22m


      584 |
      585 |     await page.goto(`/auth/guest-login/verify?token=${token}`);
    > 586 |     await expect(page.locator('h1')).toContainText('Link Expired');
          |                                      ^
      587 |     const expiredDescription = page.locator('p.text-gray-600').first();
      588 |     await expect(expiredDescription).toContainText('This magic link has expired');
      589 |   });
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:586:38

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-90796-ntication-errors-gracefully-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-90796-ntication-errors-gracefully-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-90796-ntication-errors-gracefully-chromium/error-context.md

  9) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:591:7 â€º Guest Authentication â€º should log authentication events in audit log 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoHaveLength[2m([22m[32mexpected[39m[2m)[22m

    Expected length: [32m1[39m
    Received length: [31m0[39m
    Received array:  [31m[][39m

      610 |
      611 |     expect(loginError).toBeNull();
    > 612 |     expect(loginLogs).toHaveLength(1);
          |                       ^
      613 |     expect(loginLogs![0].details.auth_method).toBe('email_matching');
      614 |     expect(loginLogs![0].details.email).toBe(testGuestEmail);
      615 |
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:612:23

    attachment #1: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-c413d-ication-events-in-audit-log-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-c413d-ication-events-in-audit-log-chromium/error-context.md

  9 failed
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:208:7 â€º Guest Authentication â€º should show loading state during authentication 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:248:7 â€º Guest Authentication â€º should successfully request and verify magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:298:7 â€º Guest Authentication â€º should show success message after requesting magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:326:7 â€º Guest Authentication â€º should show error for expired magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:362:7 â€º Guest Authentication â€º should show error for already used magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:433:7 â€º Guest Authentication â€º should complete logout flow 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:476:7 â€º Guest Authentication â€º should persist authentication across page refreshes 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:547:7 â€º Guest Authentication â€º should handle authentication errors gracefully 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:591:7 â€º Guest Authentication â€º should log authentication events in audit log 
  6 passed (1.4m)

[36m  Serving HTML report at http://localhost:57837. Press Ctrl+C to quit.[39m
n database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '11867c1b'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '473a370f'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[API] Setting guest session cookie: {
[2m[WebServer] [22m  tokenPrefix: [32m'f6e412b6'[39m,
[2m[WebServer] [22m  cookieOptions: {
[2m[WebServer] [22m    httpOnly: [33mtrue[39m,
[2m[WebServer] [22m    secure: [33mfalse[39m,
[2m[WebServer] [22m    sameSite: [32m'lax'[39m,
[2m[WebServer] [22m    maxAge: [33m86400[39m,
[2m[WebServer] [22m    path: [32m'/'[39m
[2m[WebServer] [22m  },
[2m[WebServer] [22m  guestId: [32m'd2eae822-20d4-475f-aca8-93a3b8df9786'[39m,
[2m[WebServer] [22m  sessionId: [32m'9e413274-e55f-4c19-91ce-03370808aaa9'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m POST /api/guest-auth/email-match [32m200[39m in 3.0s[2m (compile: 551ms, proxy.ts: 1283ms, render: 1153ms)[22m
  âœ˜   2 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:208:7 â€º Guest Authentication â€º should show loading state during authentication (17.4s)
[2m[WebServer] [22m[API] Setting guest session cookie: {
[2m[WebServer] [22m  tokenPrefix: [32m'5b926a1a'[39m,
[2m[WebServer] [22m  cookieOptions: {
[2m[WebServer] [22m    httpOnly: [33mtrue[39m,
[2m[WebServer] [22m    secure: [33mfalse[39m,
[2m[WebServer] [22m    sameSite: [32m'lax'[39m,
[2m[WebServer] [22m    maxAge: [33m86400[39m,
[2m[WebServer] [22m    path: [32m'/'[39m
[2m[WebServer] [22m  },
[2m[WebServer] [22m  guestId: [32m'deb879b8-a400-4e15-9c82-c2a7a64ef3f6'[39m,
[2m[WebServer] [22m  sessionId: [32m'4fbca6be-b09d-4f30-be50-53a5d9fc1b55'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m POST /api/guest-auth/email-match [32m200[39m in 2.1s[2m (compile: 407ms, proxy.ts: 1353ms, render: 338ms)[22m
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '63fd8576'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '63fd8576'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Magic Link Request] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  guestId: [32m'df64e629-474f-483d-af50-8413e7b6db6c'[39m,
[2m[WebServer] [22m  authMethod: [32m'email_matching'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[Magic Link Request] Guest has wrong auth method: email_matching
[Worker 0] âœ… Verified guest exists: {
  email: [32m'test-w0-1770443610635-928ccxuo@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[2m[WebServer] [22m POST /api/guest-auth/magic-link/request [33m400[39m in 1020ms[2m (compile: 16ms, proxy.ts: 660ms, render: 344ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'f6e412b6...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '5b926a1a...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'f6e412b6'
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'f6e412b6'[39m }
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 61ms[2m (compile: 2ms, proxy.ts: 10ms, render: 49ms)[22m
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '5b926a1a'
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'5b926a1a'[39m }
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'd2eae822-20d4-475f-aca8-93a3b8df9786'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 115ms[2m (compile: 5ms, proxy.ts: 58ms, render: 52ms)[22m
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'deb879b8-a400-4e15-9c82-c2a7a64ef3f6'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w2-1770443600731-vbc1tm7g@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w2-1770443600731-vbc1tm7g@example.com
[2m[WebServer] [22m GET /guest/dashboard [32m200[39m in 580ms[2m (compile: 7ms, proxy.ts: 157ms, render: 416ms)[22m
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w2-1770443601419-ciknwvix@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w2-1770443601419-ciknwvix@example.com
[2m[WebServer] [22m GET /guest/dashboard [32m200[39m in 614ms[2m (compile: 22ms, proxy.ts: 167ms, render: 425ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'f6e412b6...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ğŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'f6e412b6...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'f6e412b6...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'f6e412b6...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Magic Link Request] Processing request for email: test-w0-1770443610635-m4x24h8r@example.com
[2m[WebServer] [22m[Magic Link Request] Looking for guest by email...
[2m[WebServer] [22m[Magic Link Request] Processing request for email: test-w0-1770443610635-928ccxuo@example.com
[2m[WebServer] [22m[Magic Link Request] Looking for guest by email...
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'f6e412b6'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'f6e412b6'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'f6e412b6'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'f6e412b6'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Magic Link Request] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  guestId: [32m'0326ab71-64a9-44b4-9459-4962e3d5ae03'[39m,
[2m[WebServer] [22m  authMethod: [32m'email_matching'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[Magic Link Request] Guest has wrong auth method: email_matching
[2m[WebServer] [22m POST /api/guest-auth/magic-link/request [33m400[39m in 184ms[2m (compile: 7ms, proxy.ts: 34ms, render: 143ms)[22m
[2m[WebServer] [22m[Magic Link Request] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  guestId: [32m'47d80adf-fd67-4495-830c-4ad1b38dc711'[39m,
[2m[WebServer] [22m  authMethod: [32m'email_matching'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[Magic Link Request] Guest has wrong auth method: email_matching
[2m[WebServer] [22m POST /api/guest-auth/magic-link/request [33m400[39m in 196ms[2m (compile: 4ms, proxy.ts: 34ms, render: 158ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '5b926a1a...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '5b926a1a...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '5b926a1a...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '5b926a1a...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
  âœ“   5 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:222:7 â€º Guest Authentication â€º should create session cookie on successful authentication (12.1s)
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '5b926a1a'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '5b926a1a'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '5b926a1a'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '5b926a1a'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[Worker 2] Created test guest: {
  email: [32m'test-w2-1770443613493-gj0ohiik@example.com'[39m,
  id: [32m'42be20f8-cc64-4cc7-8351-a3d26bcce57f'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'34a8f27f-6d32-48f1-8551-4ea5f9deb9ef'[39m
}
[Worker 4] Created test guest: {
  email: [32m'test-w4-1770443613354-f3ci3i6y@example.com'[39m,
  id: [32m'b392a325-0754-4ec1-bcf5-c13e5aa2fa84'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'e5f7c6fd-a886-481d-a7e9-af959fbb3c07'[39m
}
[Worker 2] âœ… Verified guest exists: {
  email: [32m'test-w2-1770443613493-gj0ohiik@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[Worker 4] âœ… Verified guest exists: {
  email: [32m'test-w4-1770443613354-f3ci3i6y@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 42ms[2m (compile: 2ms, proxy.ts: 8ms, render: 32ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 192ms[2m (compile: 29ms, proxy.ts: 25ms, render: 137ms)[22m
[2m[WebServer] [22m[Magic Link Request] Processing request for email: test-w2-1770443613254-ej6mwtqr@example.com
[2m[WebServer] [22m[Magic Link Request] Looking for guest by email...
[2m[WebServer] [22m GET /auth/guest-login/verify?token=67867e57687ae969ca6489344cb00cc47491a45343a06583ac0b291a37e0e172 [32m200[39m in 1238ms[2m (compile: 1089ms, proxy.ts: 7ms, render: 142ms)[22m
[2m[WebServer] [22m GET /auth/guest-login/verify?token=4816860de021a1fa0bd5c96ba6cee25bb4541ada8c18862ff250165103867364 [32m200[39m in 1140ms[2m (compile: 946ms, proxy.ts: 47ms, render: 148ms)[22m
[2m[WebServer] [22m[Magic Link Request] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  guestId: [32m'a0e6ac43-1665-4fc6-bd84-af78e9529647'[39m,
[2m[WebServer] [22m  authMethod: [32m'email_matching'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[Magic Link Request] Guest has wrong auth method: email_matching
[2m[WebServer] [22m POST /api/guest-auth/magic-link/request [33m400[39m in 875ms[2m (compile: 553ms, proxy.ts: 113ms, render: 209ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 1195ms[2m (compile: 32ms, proxy.ts: 29ms, render: 1134ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 1196ms[2m (compile: 32ms, proxy.ts: 29ms, render: 1135ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 1206ms[2m (compile: 32ms, proxy.ts: 29ms, render: 1145ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 1208ms[2m (compile: 32ms, proxy.ts: 29ms, render: 1147ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 1213ms[2m (compile: 32ms, proxy.ts: 29ms, render: 1152ms)[22m
[2m[WebServer] [22m[Magic Link Request] Processing request for email: test-w2-1770443613493-gj0ohiik@example.com
[2m[WebServer] [22m[Magic Link Request] Looking for guest by email...
[2m[WebServer] [22m[Magic Link Request] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  guestId: [32m'42be20f8-cc64-4cc7-8351-a3d26bcce57f'[39m,
[2m[WebServer] [22m  authMethod: [32m'email_matching'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[Magic Link Request] Guest has wrong auth method: email_matching
[2m[WebServer] [22m POST /api/guest-auth/magic-link/request [33m400[39m in 1112ms[2m (compile: 72ms, proxy.ts: 866ms, render: 174ms)[22m
[2m[WebServer] [22m POST /api/guest-auth/magic-link/verify [34m307[39m in 224ms[2m (compile: 13ms, proxy.ts: 53ms, render: 159ms)[22m
[2m[WebServer] [22m POST /api/guest-auth/magic-link/verify [34m307[39m in 251ms[2m (compile: 6ms, proxy.ts: 25ms, render: 220ms)[22m
[2m[WebServer] [22m POST /auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link [32m200[39m in 114ms[2m (compile: 11ms, proxy.ts: 25ms, render: 78ms)[22m
[2m[WebServer] [22m POST /auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link [32m200[39m in 144ms[2m (compile: 15ms, proxy.ts: 56ms, render: 72ms)[22m
  âœ˜   6 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:248:7 â€º Guest Authentication â€º should successfully request and verify magic link (17.8s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ğŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops
[Worker 5] Created test guest: {
  email: [32m'test-w5-1770443621489-mky1jjx7@example.com'[39m,
  id: [32m'16ca5194-c6b5-4b61-b875-7660724cc4cc'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'7190c131-dcd7-4b7a-ae03-c2c70a249bd4'[39m
}
[Worker 5] âœ… Verified guest exists: {
  email: [32m'test-w5-1770443621489-mky1jjx7@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[2m[WebServer] [22m GET /auth/guest-login/verify?token=invalid-token [32m200[39m in 92ms[2m (compile: 7ms, proxy.ts: 10ms, render: 75ms)[22m
[2m[WebServer] [22m GET /auth/guest-login/verify?token=invalid-token [32m200[39m in 97ms[2m (compile: 1830Âµs, proxy.ts: 11ms, render: 84ms)[22m
[2m[WebServer] [22m GET /auth/guest-login/verify [32m200[39m in 137ms[2m (compile: 3ms, proxy.ts: 9ms, render: 125ms)[22m
[2m[WebServer] [22m GET /auth/guest-login/verify [32m200[39m in 146ms[2m (compile: 3ms, proxy.ts: 10ms, render: 133ms)[22m
[2m[WebServer] [22m GET /auth/guest-login/verify?token=926abf16442b59a9655e0a97b0620993402e976581ce9feb5403182e54186aeb [32m200[39m in 135ms[2m (compile: 5ms, proxy.ts: 18ms, render: 112ms)[22m
[2m[WebServer] [22m GET /auth/guest-login/verify?token=576715d6693952cc59fa000b4a0392cc9bc1ad528f26656988f8e9f99eb86910 [32m200[39m in 136ms[2m (compile: 5ms, proxy.ts: 18ms, render: 113ms)[22m
  âœ˜   7 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:298:7 â€º Guest Authentication â€º should show success message after requesting magic link (13.5s)
[2m[WebServer] [22m POST /api/guest-auth/magic-link/verify [34m307[39m in 263ms[2m (compile: 1869Âµs, proxy.ts: 13ms, render: 248ms)[22m
[2m[WebServer] [22m POST /api/guest-auth/magic-link/verify [34m307[39m in 265ms[2m (compile: 1968Âµs, proxy.ts: 13ms, render: 250ms)[22m
[2m[WebServer] [22m POST /auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link [32m200[39m in 174ms[2m (compile: 6ms, proxy.ts: 23ms, render: 144ms)[22m
[2m[WebServer] [22m POST /auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link [32m200[39m in 181ms[2m (compile: 7ms, proxy.ts: 23ms, render: 151ms)[22m
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  suppress all logs with { quiet: true }
[Worker 6] Created test guest: {
  email: [32m'test-w6-1770443625375-kej6evlj@example.com'[39m,
  id: [32m'fd006668-6987-4334-8809-befd7d8dbcb0'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'8409d1f6-5aac-4d8a-a152-7c36840b325c'[39m
}
[Worker 6] âœ… Verified guest exists: {
  email: [32m'test-w6-1770443625375-kej6evlj@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 87ms[2m (compile: 3ms, proxy.ts: 12ms, render: 72ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 398ms[2m (compile: 2ms, proxy.ts: 22ms, render: 374ms)[22m
  âœ“  10 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:404:7 â€º Guest Authentication â€º should show error for invalid or missing token (5.2s)
[Worker 5] Created test guest: {
  email: [32m'test-w5-1770443626899-lk1s5cz7@example.com'[39m,
  id: [32m'46555acd-89e8-4d57-9db7-917a6e1aefd6'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'2077d5c1-3214-47b5-bcab-5f18f2e2691a'[39m
}
[Worker 5] âœ… Verified guest exists: {
  email: [32m'test-w5-1770443626899-lk1s5cz7@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[2m[WebServer] [22m[API] Looking for guest with email: test-w6-1770443625292-ej5o5976@example.com
[2m[WebServer] [22m[API] Looking for guest with email: test-w6-1770443625375-kej6evlj@example.com
  âœ˜   9 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:362:7 â€º Guest Authentication â€º should show error for already used magic link (14.0s)
[2m[WebServer] [22m[API] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  email: [32m'test-w6-1770443625292-ej5o5976@example.com'[39m,
[2m[WebServer] [22m  authMethod: [32m'email_matching'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 160ms[2m (compile: 5ms, proxy.ts: 47ms, render: 108ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 181ms[2m (compile: 37ms, proxy.ts: 31ms, render: 113ms)[22m
[2m[WebServer] [22m[API] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  email: [32m'test-w6-1770443625375-kej6evlj@example.com'[39m,
[2m[WebServer] [22m  authMethod: [32m'email_matching'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[API] Setting guest session cookie: {
[2m[WebServer] [22m  tokenPrefix: [32m'2241bae5'[39m,
[2m[WebServer] [22m  cookieOptions: {
[2m[WebServer] [22m    httpOnly: [33mtrue[39m,
[2m[WebServer] [22m    secure: [33mfalse[39m,
[2m[WebServer] [22m    sameSite: [32m'lax'[39m,
[2m[WebServer] [22m    maxAge: [33m86400[39m,
[2m[WebServer] [22m    path: [32m'/'[39m
[2m[WebServer] [22m  },
[2m[WebServer] [22m  guestId: [32m'137c057c-bd8c-4759-a18a-f2278715a849'[39m,
[2m[WebServer] [22m  sessionId: [32m'66c4ef03-8694-4270-80b6-2752e2cb318c'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m POST /api/guest-auth/email-match [32m200[39m in 383ms[2m (compile: 31ms, proxy.ts: 22ms, render: 329ms)[22m
[2m[WebServer] [22m[API] Setting guest session cookie: {
[2m[WebServer] [22m  tokenPrefix: [32m'd7f5fd3c'[39m,
[2m[WebServer] [22m  cookieOptions: {
[2m[WebServer] [22m    httpOnly: [33mtrue[39m,
[2m[WebServer] [22m    secure: [33mfalse[39m,
[2m[WebServer] [22m    sameSite: [32m'lax'[39m,
[2m[WebServer] [22m    maxAge: [33m86400[39m,
[2m[WebServer] [22m    path: [32m'/'[39m
[2m[WebServer] [22m  },
[2m[WebServer] [22m  guestId: [32m'fd006668-6987-4334-8809-befd7d8dbcb0'[39m,
[2m[WebServer] [22m  sessionId: [32m'54008b4e-3df9-4187-985b-9d26144ce0ee'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m POST /api/guest-auth/email-match [32m200[39m in 361ms[2m (compile: 15ms, proxy.ts: 32ms, render: 314ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '2241bae5...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd7f5fd3c...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '2241bae5'
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'2241bae5'[39m }
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd7f5fd3c'
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'd7f5fd3c'[39m }
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'137c057c-bd8c-4759-a18a-f2278715a849'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[API] Looking for guest with email: test-w5-1770443626899-lk1s5cz7@example.com
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'fd006668-6987-4334-8809-befd7d8dbcb0'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[API] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  email: [32m'test-w5-1770443626899-lk1s5cz7@example.com'[39m,
[2m[WebServer] [22m  authMethod: [32m'email_matching'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 460ms[2m (compile: 33ms, proxy.ts: 150ms, render: 276ms)[22m
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w6-1770443625292-ej5o5976@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w6-1770443625292-ej5o5976@example.com
[2m[WebServer] [22m[API] Setting guest session cookie: {
[2m[WebServer] [22m  tokenPrefix: [32m'4fe6d8e8'[39m,
[2m[WebServer] [22m  cookieOptions: {
[2m[WebServer] [22m    httpOnly: [33mtrue[39m,
[2m[WebServer] [22m    secure: [33mfalse[39m,
[2m[WebServer] [22m    sameSite: [32m'lax'[39m,
[2m[WebServer] [22m    maxAge: [33m86400[39m,
[2m[WebServer] [22m    path: [32m'/'[39m
[2m[WebServer] [22m  },
[2m[WebServer] [22m  guestId: [32m'46555acd-89e8-4d57-9db7-917a6e1aefd6'[39m,
[2m[WebServer] [22m  sessionId: [32m'a6f62ee9-5fbc-4917-985e-c4e08237295f'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m POST /api/guest-auth/email-match [32m200[39m in 516ms[2m (compile: 28ms, proxy.ts: 152ms, render: 337ms)[22m
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w6-1770443625375-kej6evlj@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w6-1770443625375-kej6evlj@example.com
  âœ˜   8 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:326:7 â€º Guest Authentication â€º should show error for expired magic link (15.9s)
[2m[WebServer] [22m GET /guest/dashboard [32m200[39m in 1502ms[2m (compile: 83ms, proxy.ts: 189ms, render: 1230ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '4fe6d8e8...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /guest/dashboard [32m200[39m in 1606ms[2m (compile: 75ms, proxy.ts: 643ms, render: 888ms)[22m
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '4fe6d8e8'
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'4fe6d8e8'[39m }
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'46555acd-89e8-4d57-9db7-917a6e1aefd6'[39m
[2m[WebServer] [22m}
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ğŸ” encrypt with Dotenvx: https://dotenvx.com
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w5-1770443626899-lk1s5cz7@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w5-1770443626899-lk1s5cz7@example.com
[2m[WebServer] [22m GET /guest/dashboard [32m200[39m in 709ms[2m (compile: 15ms, proxy.ts: 252ms, render: 441ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '4fe6d8e8...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '4fe6d8e8'
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 276ms[2m (compile: 14ms, proxy.ts: 24ms, render: 238ms)[22m
[Worker 7] Created test guest: {
  email: [32m'test-w7-1770443630352-kxui4lho@example.com'[39m,
  id: [32m'30b9a703-02a7-478b-b863-e88c1151fbe8'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'9f89d65c-c5af-4dd4-a8a2-39a7097ddd1d'[39m
}
[Worker 7] âœ… Verified guest exists: {
  email: [32m'test-w7-1770443630352-kxui4lho@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ğŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`
[Worker 8] Created test guest: {
  email: [32m'test-w8-1770443632421-xxm8nq0h@example.com'[39m,
  id: [32m'bfbf4491-8be6-42f4-a11a-ab1b89fc2f8b'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'3ba6d3dc-b10d-4259-8065-79155dc39ea6'[39m
}
[Worker 8] âœ… Verified guest exists: {
  email: [32m'test-w8-1770443632421-xxm8nq0h@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '2241bae5...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '2241bae5...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '2241bae5...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '2241bae5...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[37m[1mâ—‹[22m[39m Compiling /guest/events ...
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '2241bae5'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '2241bae5'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '2241bae5'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '2241bae5'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd7f5fd3c...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd7f5fd3c...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd7f5fd3c...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd7f5fd3c...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '2241bae5...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd7f5fd3c'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd7f5fd3c'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd7f5fd3c'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '2241bae5'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd7f5fd3c'
[2m[WebServer] [22m}
[2m[WebServer] [22m[API] Looking for guest with email: test-w7-1770443627210-tz7akf2v@example.com
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'2241bae5'[39m }
[2m[WebServer] [22m[API] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  email: [32m'test-w7-1770443627210-tz7akf2v@example.com'[39m,
[2m[WebServer] [22m  authMethod: [32m'email_matching'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m POST /api/guest-auth/email-match [32m200[39m in 4.9s[2m (compile: 4.5s, proxy.ts: 102ms, render: 365ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd7f5fd3c...',
[2m[WebServer] [22m  allCookies: [
[2m[WebServer] [22m  'sb-olcqaawrpnanioaorfer-auth-token',
[2m[WebServer] [22m  'guest_session',
[2m[WebServer] [22m  '__next_hmr_refresh_hash__'
[2m[WebServer] [22m]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '4fe6d8e8...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '4fe6d8e8...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '4fe6d8e8...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[API] Setting guest session cookie: {
[2m[WebServer] [22m  tokenPrefix: [32m'45027418'[39m,
[2m[WebServer] [22m  cookieOptions: {
[2m[WebServer] [22m    httpOnly: [33mtrue[39m,
[2m[WebServer] [22m    secure: [33mfalse[39m,
[2m[WebServer] [22m    sameSite: [32m'lax'[39m,
[2m[WebServer] [22m    maxAge: [33m86400[39m,
[2m[WebServer] [22m    path: [32m'/'[39m
[2m[WebServer] [22m  },
[2m[WebServer] [22m  guestId: [32m'5f60cc76-5ba8-4d1c-b300-2911a9d4f77e'[39m,
[2m[WebServer] [22m  sessionId: [32m'1b217c02-af05-44d6-b32f-def09e2299bc'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'137c057c-bd8c-4759-a18a-f2278715a849'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 3.0s[2m (compile: 2.2s, proxy.ts: 105ms, render: 719ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 3.0s[2m (compile: 2.2s, proxy.ts: 105ms, render: 721ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 5.3s[2m (compile: 4.5s, proxy.ts: 117ms, render: 724ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 3.1s[2m (compile: 2.2s, proxy.ts: 105ms, render: 762ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '4fe6d8e8...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd7f5fd3c...',
[2m[WebServer] [22m  allCookies: [
[2m[WebServer] [22m  'sb-olcqaawrpnanioaorfer-auth-token',
[2m[WebServer] [22m  'guest_session',
[2m[WebServer] [22m  '__next_hmr_refresh_hash__'
[2m[WebServer] [22m]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '4fe6d8e8'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd7f5fd3c'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '4fe6d8e8'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '4fe6d8e8'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd7f5fd3c'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '4fe6d8e8'
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/guest/rsvps [32m200[39m in 3.3s[2m (compile: 1876ms, proxy.ts: 418ms, render: 1055ms)[22m
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w6-1770443625292-ej5o5976@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w6-1770443625292-ej5o5976@example.com
[2m[WebServer] [22m GET /api/guest/rsvps [32m200[39m in 4.2s[2m (compile: 2.3s, proxy.ts: 716ms, render: 1146ms)[22m
[2m[WebServer] [22m GET /api/guest/events [32m200[39m in 4.2s[2m (compile: 2.3s, proxy.ts: 718ms, render: 1159ms)[22m
[2m[WebServer] [22m GET /api/guest/announcements [32m200[39m in 4.2s[2m (compile: 2.3s, proxy.ts: 718ms, render: 1156ms)[22m
[2m[WebServer] [22m GET /api/guest/wedding-info [32m200[39m in 4.2s[2m (compile: 2.3s, proxy.ts: 719ms, render: 1155ms)[22m
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'd7f5fd3c'[39m }
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'fd006668-6987-4334-8809-befd7d8dbcb0'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w6-1770443625375-kej6evlj@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w6-1770443625375-kej6evlj@example.com
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'd7f5fd3c'[39m }
[2m[WebServer] [22m GET /api/guest/events [32m200[39m in 3.6s[2m (compile: 1883ms, proxy.ts: 412ms, render: 1265ms)[22m
[2m[WebServer] [22m GET /api/guest/wedding-info [32m200[39m in 3.6s[2m (compile: 1946ms, proxy.ts: 353ms, render: 1272ms)[22m
[2m[WebServer] [22m GET /api/guest/announcements [32m200[39m in 3.6s[2m (compile: 1885ms, proxy.ts: 414ms, render: 1283ms)[22m
[2m[WebServer] [22m GET /guest/events [32m200[39m in 7.4s[2m (compile: 5.9s, proxy.ts: 184ms, render: 1367ms)[22m
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'fd006668-6987-4334-8809-befd7d8dbcb0'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /guest/dashboard [32m200[39m in 1119ms[2m (compile: 255ms, proxy.ts: 543ms, render: 321ms)[22m
[2m[WebServer] [22m GET /guest/dashboard [32m200[39m in 3.8s[2m (compile: 1883ms, proxy.ts: 417ms, render: 1521ms)[22m
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w6-1770443625375-kej6evlj@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w6-1770443625375-kej6evlj@example.com
[2m[WebServer] [22m GET /guest/dashboard [32m200[39m in 1398ms[2m (compile: 159ms, proxy.ts: 613ms, render: 626ms)[22m
[2m[WebServer] [22m[API] Looking for guest with email: test-w5-1770443629736-mey1xmd0@example.com
[2m[WebServer] [22m[API] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  email: [32m'test-w5-1770443629736-mey1xmd0@example.com'[39m,
[2m[WebServer] [22m  authMethod: [32m'email_matching'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[API] Setting guest session cookie: {
[2m[WebServer] [22m  tokenPrefix: [32m'd098aa8f'[39m,
[2m[WebServer] [22m  cookieOptions: {
[2m[WebServer] [22m    httpOnly: [33mtrue[39m,
[2m[WebServer] [22m    secure: [33mfalse[39m,
[2m[WebServer] [22m    sameSite: [32m'lax'[39m,
[2m[WebServer] [22m    maxAge: [33m86400[39m,
[2m[WebServer] [22m    path: [32m'/'[39m
[2m[WebServer] [22m  },
[2m[WebServer] [22m  guestId: [32m'60a42527-82ab-4eee-bc91-6dc28589887f'[39m,
[2m[WebServer] [22m  sessionId: [32m'6d49f02b-e239-4310-bfc0-aa19d8a93a72'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m POST /api/guest-auth/email-match [32m200[39m in 416ms[2m (compile: 63ms, proxy.ts: 49ms, render: 304ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd098aa8f...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd098aa8f'
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'd098aa8f'[39m }
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'60a42527-82ab-4eee-bc91-6dc28589887f'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w5-1770443629736-mey1xmd0@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w5-1770443629736-mey1xmd0@example.com
[2m[WebServer] [22m GET /guest/dashboard [32m200[39m in 722ms[2m (compile: 35ms, proxy.ts: 198ms, render: 488ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '2241bae5...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '2241bae5...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '2241bae5...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '2241bae5...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '2241bae5'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '2241bae5'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '2241bae5'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '2241bae5'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '4fe6d8e8...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[API] Looking for guest with email: nonexistent@example.com
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '4fe6d8e8...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[API] Looking for guest with email: nonexistent@example.com
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '4fe6d8e8'
[2m[WebServer] [22m}
[2m[WebServer] [22m[API] Guest query result: {
[2m[WebServer] [22m  found: [33mfalse[39m,
[2m[WebServer] [22m  email: [90mundefined[39m,
[2m[WebServer] [22m  authMethod: [90mundefined[39m,
[2m[WebServer] [22m  error: [32m'Cannot coerce the result to a single JSON object'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m POST /api/guest-auth/email-match [33m404[39m in 1600ms[2m (compile: 825ms, proxy.ts: 510ms, render: 265ms)[22m
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '4fe6d8e8'
[2m[WebServer] [22m}
[2m[WebServer] [22m[API] Guest query result: {
[2m[WebServer] [22m  found: [33mfalse[39m,
[2m[WebServer] [22m  email: [90mundefined[39m,
[2m[WebServer] [22m  authMethod: [90mundefined[39m,
[2m[WebServer] [22m  error: [32m'Cannot coerce the result to a single JSON object'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m POST /api/guest-auth/email-match [33m404[39m in 1850ms[2m (compile: 118ms, proxy.ts: 993ms, render: 739ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd7f5fd3c...',
[2m[WebServer] [22m  allCookies: [
[2m[WebServer] [22m  'sb-olcqaawrpnanioaorfer-auth-token',
[2m[WebServer] [22m  'guest_session',
[2m[WebServer] [22m  '__next_hmr_refresh_hash__'
[2m[WebServer] [22m]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd7f5fd3c...',
[2m[WebServer] [22m  allCookies: [
[2m[WebServer] [22m  'sb-olcqaawrpnanioaorfer-auth-token',
[2m[WebServer] [22m  'guest_session',
[2m[WebServer] [22m  '__next_hmr_refresh_hash__'
[2m[WebServer] [22m]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd7f5fd3c...',
[2m[WebServer] [22m  allCookies: [
[2m[WebServer] [22m  'sb-olcqaawrpnanioaorfer-auth-token',
[2m[WebServer] [22m  'guest_session',
[2m[WebServer] [22m  '__next_hmr_refresh_hash__'
[2m[WebServer] [22m]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd7f5fd3c...',
[2m[WebServer] [22m  allCookies: [
[2m[WebServer] [22m  'sb-olcqaawrpnanioaorfer-auth-token',
[2m[WebServer] [22m  'guest_session',
[2m[WebServer] [22m  '__next_hmr_refresh_hash__'
[2m[WebServer] [22m]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd7f5fd3c'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd7f5fd3c'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd7f5fd3c'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd7f5fd3c'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m GET /api/guest/events [32m200[39m in 3.1s[2m (compile: 65ms, proxy.ts: 1326ms, render: 1709ms)[22m
[2m[WebServer] [22m GET /guest/events [32m200[39m in 2.2s[2m (compile: 222ms, proxy.ts: 1001ms, render: 1013ms)[22m
[2m[WebServer] [22m GET /auth/guest-login/verify?token=be4ca7b8b4bb38bee415ba084b788e57d0a632b10b0deb5b695d355fc38d9f1f [32m200[39m in 302ms[2m (compile: 47ms, proxy.ts: 121ms, render: 134ms)[22m
  âœ“  13 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:504:7 â€º Guest Authentication â€º should switch between authentication tabs (14.3s)
[2m[WebServer] [22m GET /auth/guest-login/verify?token=ebc57e20f2af7527e1b96cb3bc5958a58b39688d215fb996ae29c2fd3bf68283 [32m200[39m in 152ms[2m (compile: 18ms, proxy.ts: 47ms, render: 87ms)[22m
  âœ˜  11 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:433:7 â€º Guest Authentication â€º should complete logout flow (19.1s)
[Worker 7] Created test guest: {
  email: [32m'test-w7-1770443644844-kx5ajq2h@example.com'[39m,
  id: [32m'1077eabc-b3de-4c68-a650-b5111977e7a6'[39m,
  authMethod: [32m'email_matching'[39m,
  groupId: [32m'339e76f2-2a98-4468-93b6-3da2cab06e6b'[39m
}
[Worker 7] âœ… Verified guest exists: {
  email: [32m'test-w7-1770443644844-kx5ajq2h@example.com'[39m,
  authMethod: [32m'email_matching'[39m
}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd098aa8f...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd098aa8f...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd098aa8f...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'd098aa8f...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 77ms[2m (compile: 5ms, proxy.ts: 31ms, render: 40ms)[22m
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd098aa8f'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd098aa8f'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd098aa8f'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 0,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'd098aa8f'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No session found in database for token
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '4fe6d8e8...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '4fe6d8e8'
[2m[WebServer] [22m}
[2m[WebServer] [22m POST /api/guest-auth/magic-link/verify [34m307[39m in 170ms[2m (compile: 11ms, proxy.ts: 14ms, render: 145ms)[22m
[2m[WebServer] [22m POST /api/guest-auth/magic-link/verify [34m307[39m in 180ms[2m (compile: 10ms, proxy.ts: 14ms, render: 156ms)[22m
[2m[WebServer] [22m POST /auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link [32m200[39m in 130ms[2m (compile: 3ms, proxy.ts: 12ms, render: 115ms)[22m
[2m[WebServer] [22m POST /auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link [32m200[39m in 133ms[2m (compile: 3ms, proxy.ts: 12ms, render: 118ms)[22m
[2m[WebServer] [22m[API] Looking for guest with email: test-w7-1770443644844-kx5ajq2h@example.com
[2m[WebServer] [22m GET /api/guest/events [32m200[39m in 747ms[2m (compile: 6ms, proxy.ts: 146ms, render: 596ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/activities',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '4fe6d8e8...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[API] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  email: [32m'test-w7-1770443644844-kx5ajq2h@example.com'[39m,
[2m[WebServer] [22m  authMethod: [32m'email_matching'[39m,
[2m[WebServer] [22m  error: [90mundefined[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '4fe6d8e8'
[2m[WebServer] [22m}
[2m[WebServer] [22m[API] Setting guest session cookie: {
[2m[WebServer] [22m  tokenPrefix: [32m'de08eb76'[39m,
[2m[WebServer] [22m  cookieOptions: {
[2m[WebServer] [22m    httpOnly: [33mtrue[39m,
[2m[WebServer] [22m    secure: [33mfalse[39m,
[2m[WebServer] [22m    sameSite: [32m'lax'[39m,
[2m[WebServer] [22m    maxAge: [33m86400[39m,
[2m[WebServer] [22m    path: [32m'/'[39m
[2m[WebServer] [22m  },
[2m[WebServer] [22m  guestId: [32m'1077eabc-b3de-4c68-a650-b5111977e7a6'[39m,
[2m[WebServer] [22m  sessionId: [32m'47bb4c92-3614-4db4-ac8b-95b760cc7376'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m POST /api/guest-auth/email-match [32m200[39m in 297ms[2m (compile: 3ms, proxy.ts: 15ms, render: 280ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/dashboard',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'de08eb76...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'de08eb76'
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Session check: { hasToken: [33mtrue[39m, tokenPrefix: [32m'de08eb76'[39m }
[2m[WebServer] [22m[GuestDashboard] Session query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  guestId: [32m'1077eabc-b3de-4c68-a650-b5111977e7a6'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Guest query result: {
[2m[WebServer] [22m  found: [33mtrue[39m,
[2m[WebServer] [22m  error: [90mundefined[39m,
[2m[WebServer] [22m  email: [32m'test-w7-1770443644844-kx5ajq2h@example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[GuestDashboard] Rendering dashboard for guest: test-w7-1770443644844-kx5ajq2h@example.com
[2m[WebServer] [22m GET /guest/activities [32m200[39m in 2.5s[2m (compile: 1846ms, proxy.ts: 155ms, render: 506ms)[22m
[2m[WebServer] [22m GET /guest/dashboard [32m200[39m in 2.1s[2m (compile: 1346ms, proxy.ts: 245ms, render: 520ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/rsvps',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'de08eb76...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/announcements',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'de08eb76...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/wedding-info',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'de08eb76...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/events',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: 'de08eb76...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/activities',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '4fe6d8e8...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link [32m200[39m in 305ms[2m (compile: 16ms, proxy.ts: 49ms, render: 240ms)[22m
[2m[WebServer] [22m GET /auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link [32m200[39m in 307ms[2m (compile: 16ms, proxy.ts: 50ms, render: 242ms)[22m
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'de08eb76'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'de08eb76'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'de08eb76'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: 'de08eb76'
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '4fe6d8e8'
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/guest/announcements [33m401[39m in 482ms[2m (compile: 18ms, proxy.ts: 265ms, render: 199ms)[22m
[2m[WebServer] [22m GET /api/guest/rsvps [33m401[39m in 484ms[2m (compile: 51ms, proxy.ts: 266ms, render: 167ms)[22m
[2m[WebServer] [22m GET /api/guest/events [33m401[39m in 497ms[2m (compile: 66ms, proxy.ts: 267ms, render: 165ms)[22m
[2m[WebServer] [22m GET /api/guest/wedding-info [33m401[39m in 500ms[2m (compile: 9ms, proxy.ts: 338ms, render: 153ms)[22m
  âœ˜  15 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:591:7 â€º Guest Authentication â€º should log authentication events in audit log (6.0s)
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/activities',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '4fe6d8e8...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/guest/activities [32m200[39m in 1524ms[2m (compile: 600ms, proxy.ts: 402ms, render: 522ms)[22m
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '4fe6d8e8'
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /guest/activities [32m200[39m in 564ms[2m (compile: 17ms, proxy.ts: 189ms, render: 358ms)[22m
[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/api/guest/activities',
[2m[WebServer] [22m  hasCookie: true,
[2m[WebServer] [22m  cookieValue: '4fe6d8e8...',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token', 'guest_session' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] Session query result: {
[2m[WebServer] [22m  sessionsFound: 1,
[2m[WebServer] [22m  hasError: false,
[2m[WebServer] [22m  errorMessage: undefined,
[2m[WebServer] [22m  tokenPrefix: '4fe6d8e8'
[2m[WebServer] [22m}
[2m[WebServer] [22m GET /api/guest/activities [32m200[39m in 546ms[2m (compile: 1799Âµs, proxy.ts: 147ms, render: 397ms)[22m
  âœ“  12 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:476:7 â€º Guest Authentication â€º should persist authentication across page refreshes (26.9s)
  âœ˜  14 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:547:7 â€º Guest Authentication â€º should handle authentication errors gracefully (24.2s)

ğŸ§¹ E2E Global Teardown Starting...

ğŸ—‘ï¸  Cleaning up test data...
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ğŸ”“ Removing authentication state...
   Removed: .auth/user.json
   Removed empty .auth directory
âœ… Authentication state removed

ğŸ“Š Execution Summary:
   Duration: 2.16s
   Errors: 0
   Status: âœ… Clean teardown

âœ¨ E2E Global Teardown Complete!



  1) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:208:7 â€º Guest Authentication â€º should show loading state during authentication 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeDisabled[2m([22m[2m)[22m failed

    Locator: locator('button[type="submit"]:has-text("Log In")')
    Expected: disabled
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeDisabled" with timeout 10000ms[22m
    [2m  - waiting for locator('button[type="submit"]:has-text("Log In")')[22m
    [2m    - waiting for" http://localhost:3000/guest/dashboard" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/guest/dashboard"[22m


      217 |
      218 |     // Verify button is disabled during loading
    > 219 |     await expect(submitButton).toBeDisabled();
          |                                ^
      220 |   });
      221 |
      222 |   test('should create session cookie on successful authentication', async ({ page, context }) => {
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:219:32

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-79b6f-state-during-authentication-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-79b6f-state-during-authentication-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-79b6f-state-during-authentication-chromium/error-context.md

  2) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:248:7 â€º Guest Authentication â€º should successfully request and verify magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('.bg-green-50')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('.bg-green-50')[22m


      267 |
      268 |     // Wait for success message
    > 269 |     await expect(page.locator('.bg-green-50')).toBeVisible();
          |                                                ^
      270 |     await expect(page.locator('.text-green-800')).toContainText(/check your email/i);
      271 |     await expect(page.locator('.text-green-800')).toContainText('15 minutes');
      272 |
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:269:48

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-1c592-quest-and-verify-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-1c592-quest-and-verify-magic-link-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-1c592-quest-and-verify-magic-link-chromium/error-context.md

  3) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:298:7 â€º Guest Authentication â€º should show success message after requesting magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('.bg-green-50')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('.bg-green-50')[22m


      315 |
      316 |     // Verify success message
    > 317 |     await expect(page.locator('.bg-green-50')).toBeVisible();
          |                                                ^
      318 |     await expect(page.locator('.text-green-800')).toContainText('Check your email for a login link');
      319 |     await expect(page.locator('.text-green-800')).toContainText('15 minutes');
      320 |
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:317:48

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-71b1d-after-requesting-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-71b1d-after-requesting-magic-link-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-71b1d-after-requesting-magic-link-chromium/error-context.md

  4) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:326:7 â€º Guest Authentication â€º should show error for expired magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoContainText[2m([22m[32mexpected[39m[2m)[22m failed

    Locator: locator('h1')
    Expected substring: [32m"Link Expired"[39m
    Received string:    [31m"Invalid Link"[39m
    Timeout: 10000ms

    Call log:
    [2m  - Expect "toContainText" with timeout 10000ms[22m
    [2m  - waiting for locator('h1')[22m
    [2m    - waiting for" http://localhost:3000/auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link"[22m
    [2m    4 Ã— locator resolved to <h1 class="text-2xl font-bold text-jungle-800 mb-2">Verifying Your Link</h1>[22m
    [2m      - unexpected value "Verifying Your Link"[22m
    [2m    8 Ã— locator resolved to <h1 class="text-2xl font-bold text-red-800 mb-2">Invalid Link</h1>[22m
    [2m      - unexpected value "Invalid Link"[22m


      349 |
      350 |     // Verify error message with more specific selectors
    > 351 |     await expect(page.locator('h1')).toContainText('Link Expired');
          |                                      ^
      352 |     const errorDescription = page.locator('p.text-gray-600').first();
      353 |     await expect(errorDescription).toContainText('This magic link has expired');
      354 |     const securityNote = page.locator('p.text-sm.text-gray-500');
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:351:38

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-fc3b3-rror-for-expired-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-fc3b3-rror-for-expired-magic-link-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-fc3b3-rror-for-expired-magic-link-chromium/error-context.md

  5) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:362:7 â€º Guest Authentication â€º should show error for already used magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('.bg-green-50')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('.bg-green-50')[22m


      374 |     await page.fill('#magic-link-input', testGuestEmail);
      375 |     await page.click('button[type="submit"]:has-text("Send Magic Link")');
    > 376 |     await expect(page.locator('.bg-green-50')).toBeVisible();
          |                                                ^
      377 |
      378 |     // Get token from database
      379 |     const { data: tokens } = await supabase
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:376:48

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-fb7a8-for-already-used-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-fb7a8-for-already-used-magic-link-chromium/error-context.md

  6) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:433:7 â€º Guest Authentication â€º should complete logout flow 

    TimeoutError: page.waitForURL: Timeout 10000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "/auth/guest-login" until "domcontentloaded"
      navigated to "http://localhost:3000/guest/dashboard"
      navigated to "http://localhost:3000/guest/dashboard"
      navigated to "http://localhost:3000/guest/dashboard"
    ============================================================

      453 |
      454 |     // Step 4: Wait for redirect to login page
    > 455 |     await page.waitForURL('/auth/guest-login', { 
          |                ^
      456 |       timeout: 10000,
      457 |       waitUntil: 'domcontentloaded'
      458 |     });
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:455:16

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-b7d01-should-complete-logout-flow-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-b7d01-should-complete-logout-flow-chromium/error-context.md

  7) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:547:7 â€º Guest Authentication â€º should handle authentication errors gracefully 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoContainText[2m([22m[32mexpected[39m[2m)[22m failed

    Locator: locator('h1')
    Expected substring: [32m"Link Expired"[39m
    Received string:    [31m"Invalid Link"[39m
    Timeout: 10000ms

    Call log:
    [2m  - Expect "toContainText" with timeout 10000ms[22m
    [2m  - waiting for locator('h1')[22m
    [2m    - waiting for" http://localhost:3000/auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/auth/guest-login/verify?error=INVALID_TOKEN&message=Invalid+or+expired+magic+link"[22m
    [2m    3 Ã— locator resolved to <h1 class="text-2xl font-bold text-jungle-800 mb-2">Verifying Your Link</h1>[22m
    [2m      - unexpected value "Verifying Your Link"[22m
    [2m    3 Ã— locator resolved to <h1 class="text-2xl font-bold text-red-800 mb-2">Invalid Link</h1>[22m
    [2m      - unexpected value "Invalid Link"[22m
    [2m    2 Ã— locator resolved to <h1 class="text-2xl font-bold text-jungle-800 mb-2">Verifying Your Link</h1>[22m
    [2m      - unexpected value "Verifying Your Link"[22m
    [2m    4 Ã— locator resolved to <h1 class="text-2xl font-bold text-red-800 mb-2">Invalid Link</h1>[22m
    [2m      - unexpected value "Invalid Link"[22m


      584 |
      585 |     await page.goto(`/auth/guest-login/verify?token=${token}`);
    > 586 |     await expect(page.locator('h1')).toContainText('Link Expired');
          |                                      ^
      587 |     const expiredDescription = page.locator('p.text-gray-600').first();
      588 |     await expect(expiredDescription).toContainText('This magic link has expired');
      589 |   });
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:586:38

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-90796-ntication-errors-gracefully-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-90796-ntication-errors-gracefully-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-90796-ntication-errors-gracefully-chromium/error-context.md

  8) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:591:7 â€º Guest Authentication â€º should log authentication events in audit log 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoHaveLength[2m([22m[32mexpected[39m[2m)[22m

    Expected length: [32m1[39m
    Received length: [31m0[39m
    Received array:  [31m[][39m

      610 |
      611 |     expect(loginError).toBeNull();
    > 612 |     expect(loginLogs).toHaveLength(1);
          |                       ^
      613 |     expect(loginLogs![0].details.auth_method).toBe('email_matching');
      614 |     expect(loginLogs![0].details.email).toBe(testGuestEmail);
      615 |
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:612:23

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-c413d-ication-events-in-audit-log-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-c413d-ication-events-in-audit-log-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-c413d-ication-events-in-audit-log-chromium/error-context.md

  8 failed
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:208:7 â€º Guest Authentication â€º should show loading state during authentication 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:248:7 â€º Guest Authentication â€º should successfully request and verify magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:298:7 â€º Guest Authentication â€º should show success message after requesting magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:326:7 â€º Guest Authentication â€º should show error for expired magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:362:7 â€º Guest Authentication â€º should show error for already used magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:433:7 â€º Guest Authentication â€º should complete logout flow 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:547:7 â€º Guest Authentication â€º should handle authentication errors gracefully 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:591:7 â€º Guest Authentication â€º should log authentication events in audit log 
  7 passed (1.4m)

[36m  Serving HTML report at http://localhost:57836. Press Ctrl+C to quit.[39m
