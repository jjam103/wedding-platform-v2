
> destination-wedding-platform@0.1.0 test:e2e
> playwright test --grep Location Hierarchy Management

[dotenv@17.2.4] injecting env (25) from .env.e2e -- tip: âš™ï¸  write to custom object with { processEnv: myObject }

ğŸš€ E2E Global Setup Starting...

ğŸ“Š Verifying test database connection...
âœ… Test database connected

ğŸ§¹ Cleaning up test data...
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ğŸŒ Verifying Next.js server...
âœ… Next.js server is running

ğŸ” Setting up admin authentication...
   Warning: Could not ensure admin user exists: Failed to create auth user: A user with this email address has already been registered
   Continuing with setup - login may fail if user does not exist
   Authenticating via Supabase API...
   âœ… API authentication successful (User ID: e7f5ae65-376e-4d05-a18c-10a91295727a)
   Logging in via browser form...
   âœ… Login page loaded
   âœ… Credentials ent
âŒ 
âŒ E2E Global Setup Failed: Error: Failed to create admin authentication state: page.waitForURL: Timeout 30000ms exceeded.
=========================== logs ===========================
waiting for navigation to "**/admin**" until "load"
  navigated to "http://localhost:3000/auth/login?"
  navigated to "http://localhost:3000/auth/login"
  navigated to "http://localhost:3000/auth/login"
============================================================
Please ensure:
  1. Admin user exists in test database
  2. Admin credentials are correct (E2E_ADMIN_EMAIL, E2E_ADMIN_PASSWORD)
  3. Next.js server is running
  4. Supabase credentials are correct
    at createAdminAuthState (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/global-setup.ts:277:11)
    at globalSetup (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/global-setup.ts:42:5)
    at Object.setup (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/tasks.js:174:27)
    at taskLoop (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/taskRunner.js:62:11)
    at TaskRunner.runDeferCleanup (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/taskRunner.js:78:5)
    at TaskRunner.run (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/taskRunner.js:42:33)
    at runTasks (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/tasks.js:80:18)
    at runAllTestsWithConfig (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/testRunner.js:388:18)
    at runTests (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/program.js:242:18)
    at i.<anonymous> (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/program.js:70:7)
Error: Failed to create admin authentication state: page.waitForURL: Timeout 30000ms exceeded.
=========================== logs ===========================
waiting for navigation to "**/admin**" until "load"
  navigated to "http://localhost:3000/auth/login?"
  navigated to "http://localhost:3000/auth/login"
  navigated to "http://localhost:3000/auth/login"
============================================================
Please ensure:
  1. Admin user exists in test database
  2. Admin credentials are correct (E2E_ADMIN_EMAIL, E2E_ADMIN_PASSWORD)
  3. Next.js server is running
  4. Supabase credentials are correct

   at global-setup.ts:277

  275 |     console.log(`   Auth state saved to: .auth/admin.json`);
  276 |   } catch (error) {
> 277 |     throw new Error(
      |           ^
  278 |       `Failed to create admin authentication state: ${error instanceof Error ? error.message : String(error)}\n` +
  279 |       'Please ensure:\n' +
  280 |       '  1. Admin user exists in test database\n' +
    at createAdminAuthState (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/global-setup.ts:277:11)
    at globalSetup (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/global-setup.ts:42:5)

ğŸ§¹ E2E Global Teardown Starting...

ğŸ—‘ï¸  Cleaning up test data...
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ğŸ”“ Removing authentication state...
   No authentication directory found (already clean)
âœ… Authentication state removed

ğŸ“Š Execution Summary:
   Duration: 2.04s
   Errors: 0
   Status: âœ… Clean teardown

âœ¨ E2E Global Teardown Complete!



To open last HTML report run:
[36m[39m
[36m  npx playwright show-report[39m
[36m[39m
