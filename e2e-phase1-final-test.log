
> destination-wedding-platform@0.1.0 test:e2e
> playwright test __tests__/e2e/auth/guestAuth.spec.ts

[dotenv@17.2.4] injecting env (24) from .env.e2e -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
[2m[WebServer] [22m
[2m[WebServer] [22m> destination-wedding-platform@0.1.0 dev
[2m[WebServer] [22m> next dev
[2m[WebServer] [22m
[2m[WebServer] [22m[1m[38;2;173;127;168mâ–² Next.js 16.1.1[39m[22m (Turbopack)
[2m[WebServer] [22m- Local:         http://localhost:3000
[2m[WebServer] [22m- Network:       http://192.168.7.238:3000
[2m[WebServer] [22m- Environments: .env.test
[2m[WebServer] [22m
[2m[WebServer] [22m[32m[1mâœ“[22m[39m Starting...
[2m[WebServer] [22m[33m[1mâš [22m[39m The "middleware" file convention is deprecated. Please use "proxy" instead. Learn more: https://nextjs.org/docs/messages/middleware-to-proxy
[2m[WebServer] [22mðŸš€ Initializing application services...
[2m[WebServer] [22mâœ… B2 client initialized successfully {
[2m[WebServer] [22m  endpoint: [32m'https://s3.us-west-004.backblazeb2.com'[39m,
[2m[WebServer] [22m  region: [32m'us-west-004'[39m,
[2m[WebServer] [22m  bucket: [32m'test-bucket'[39m,
[2m[WebServer] [22m  cdnDomain: [32m'https://test-cdn.example.com'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mâœ… Application services initialized successfully
[2m[WebServer] [22m[32m[1mâœ“[22m[39m Ready in 1347ms

ðŸš€ E2E Global Setup Starting...

ðŸ“Š Verifying test database connection...
[2m[WebServer] [22m GET / [32m200[39m in 1528ms[2m (compile: 1373ms, proxy.ts: 79ms, render: 75ms)[22m
âœ… Test database connected

ðŸ§¹ Cleaning up test data...
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ðŸ‘¤ Creating test guest...
   Created test guest: test@example.com (ID: a6e8a159-fb31-44a3-b240-04159dc4a96e)
âœ… Test guest created

ðŸ“¦ Creating comprehensive test data...
   Creating location hierarchy...
   Location hierarchy already exists
   Creating events...
   Events already exist
   Creating activities...
   Warning: Could not create comprehensive test data: Failed to create ceremony activity: Could not find the 'cost_per_guest' column of 'activities' in the schema cache
   Some E2E tests may fail due to missing data
âœ… Comprehensive test data created

ðŸŒ Verifying Next.js server...
âœ… Next.js server is running

ðŸ”¥ Warming up API routes...
   Warming up 3 API routes...
[2m[WebServer] [22m GET / [32m200[39m in 38ms[2m (compile: 3ms, proxy.ts: 6ms, render: 29ms)[22m
[2m[WebServer] [22m POST /api/auth/guest/email-match [33m404[39m in 411ms[2m (compile: 94ms, proxy.ts: 4ms, render: 313ms)[22m
[2m[WebServer] [22m POST /api/auth/guest/request-magic-link [33m404[39m in 91ms[2m (compile: 47ms, proxy.ts: 6ms, render: 37ms)[22m
[2m[WebServer] [22m GET /api/auth/guest/verify-magic-link?token=0000000000000000000000000000000000000000000000000000000000000000 [33m404[39m in 37ms[2m (compile: 12ms, proxy.ts: 3ms, render: 21ms)[22m
   âœ… API routes compilation triggered
âœ… API routes warmed up

ðŸ” Setting up admin authentication...
   Attempting browser-based admin login: admin@example.com
   Created .auth directory: /Users/jaron/Desktop/wedding-platform-v2/.auth
   Navigating to http://localhost:3000/auth/login...
[2m[WebServer] [22m GET /auth/login [32m200[39m in 84ms[2m (compile: 34ms, proxy.ts: 4ms, render: 46ms)[22m
   Page loaded, filling form...
   Form filled, submitting...
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin [32m200[39m in 487ms[2m (compile: 25ms, proxy.ts: 370ms, render: 93ms)[22m
   Current URL after submit: http://localhost:3000/admin
   âœ… Successfully logged in via browser
   âœ… Authentication state saved
âœ… Admin authentication saved

âœ¨ E2E Global Setup Complete!


Running 16 tests using 4 workers

[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops
Setting up authentication for E2E tests...
[2m[WebServer] [22m GET /auth/login [32m200[39m in 31ms[2m (compile: 2ms, proxy.ts: 2ms, render: 26ms)[22m
Credentials filled, clicking submit button...
Browser console [log]: === LOGIN ATTEMPT ===
Browser console [log]: Supabase URL: https://olcqaawrpnanioaorfer.supabase.co
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /admin [32m200[39m in 451ms[2m (compile: 6ms, proxy.ts: 381ms, render: 64ms)[22m
âœ… Navigation to admin dashboard successful!
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m GET /api/admin/alerts [32m200[39m in 1293ms[2m (compile: 26ms, proxy.ts: 325ms, render: 942ms)[22m
[2m[WebServer] [22m GET /api/admin/metrics [32m200[39m in 2.1s[2m (compile: 54ms, proxy.ts: 265ms, render: 1824ms)[22m
âœ… Authentication successful! Saving session state...
âœ… Session saved to /Users/jaron/Desktop/wedding-platform-v2/.auth/user.json
  âœ“   1 [setup] â€º __tests__/e2e/auth.setup.ts:16:6 â€º authenticate as admin (4.2s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ“¡ add observability to secrets: https://dotenvx.com/ops
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 236ms[2m (compile: 40ms, proxy.ts: 1758Âµs, render: 194ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 241ms[2m (compile: 55ms, proxy.ts: 3ms, render: 184ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 256ms[2m (compile: 65ms, proxy.ts: 7ms, render: 184ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 186ms[2m (compile: 34ms, proxy.ts: 11ms, render: 142ms)[22m
ðŸ§¹ Running comprehensive test cleanup...
[2m[WebServer] [22m POST /api/auth/guest/email-match [34m307[39m in 303ms[2m (compile: 16ms, proxy.ts: 19ms, render: 268ms)[22m
[2m[WebServer] [22m POST /auth/guest-login?error=not_found&message=Email+not+found+or+not+configured+for+email+matching+authentication [32m200[39m in 50ms[2m (compile: 1551Âµs, proxy.ts: 3ms, render: 46ms)[22m
[2m[WebServer] [22m POST /api/auth/guest/email-match [34m307[39m in 384ms[2m (compile: 19ms, proxy.ts: 20ms, render: 344ms)[22m
ðŸ§¹ Running comprehensive test cleanup...
[2m[WebServer] [22m POST /api/auth/guest/email-match [34m307[39m in 913ms[2m (compile: 2ms, proxy.ts: 4ms, render: 907ms)[22m
[2m[WebServer] [22m POST /auth/guest-login?returnTo=%2Fguest%2Fdashboard [32m200[39m in 56ms[2m (compile: 1472Âµs, proxy.ts: 3ms, render: 52ms)[22m
[2m[WebServer] [22m POST /auth/guest-login?returnTo=%2Fguest%2Fdashboard [32m200[39m in 89ms[2m (compile: 3ms, proxy.ts: 5ms, render: 80ms)[22m
âœ… Comprehensive cleanup complete
  âœ“   2 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:118:7 â€º Guest Authentication â€º should show error for invalid email format (4.2s)
âœ… Comprehensive cleanup complete
  âœ“   3 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:103:7 â€º Guest Authentication â€º should show error for non-existent email (4.4s)
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 28ms[2m (compile: 1643Âµs, proxy.ts: 1976Âµs, render: 24ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 26ms[2m (compile: 2ms, proxy.ts: 2ms, render: 21ms)[22m
[2m[WebServer] [22m POST /api/auth/guest/email-match [34m307[39m in 310ms[2m (compile: 1765Âµs, proxy.ts: 3ms, render: 305ms)[22m
[2m[WebServer] [22m POST /auth/guest-login?returnTo=%2Fguest%2Fdashboard [32m200[39m in 65ms[2m (compile: 3ms, proxy.ts: 3ms, render: 59ms)[22m
[2m[WebServer] [22m POST /api/auth/guest/magic-link/request [33m404[39m in 194ms[2m (compile: 46ms, proxy.ts: 6ms, render: 142ms)[22m
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜   4 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:84:7 â€º Guest Authentication â€º should successfully authenticate with email matching (9.8s)
ðŸ§¹ Running comprehensive test cleanup...
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 38ms[2m (compile: 3ms, proxy.ts: 3ms, render: 32ms)[22m
[2m[WebServer] [22m POST /api/auth/guest/magic-link/request [33m404[39m in 228ms[2m (compile: 2ms, proxy.ts: 3ms, render: 222ms)[22m
âœ… Comprehensive cleanup complete
  âœ˜   6 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:145:7 â€º Guest Authentication â€º should create session cookie on successful authentication (8.4s)
ðŸ§¹ Running comprehensive test cleanup...
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  suppress all logs with { quiet: true }
[2m[WebServer] [22m GET /auth/guest-login/verify?token=128021fb919f682f515e8927a1284489f8d24f574c8d77d72232a7c4765faf44 [32m200[39m in 57ms[2m (compile: 24ms, proxy.ts: 3ms, render: 31ms)[22m
[2m[WebServer] [22m POST /api/auth/guest/magic-link/verify [34m307[39m in 310ms[2m (compile: 153ms, proxy.ts: 2ms, render: 154ms)[22m
[2m[WebServer] [22m POST /auth/guest-login/verify?error=invalid_token&message=Invalid+or+expired+magic+link [32m200[39m in 41ms[2m (compile: 2ms, proxy.ts: 3ms, render: 36ms)[22m
âœ… Comprehensive cleanup complete
  âœ˜   5 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:131:7 â€º Guest Authentication â€º should show loading state during authentication (14.6s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ”„ add secrets lifecycle management: https://dotenvx.com/ops
ðŸ§¹ Running comprehensive test cleanup...
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 35ms[2m (compile: 2ms, proxy.ts: 3ms, render: 30ms)[22m
[2m[WebServer] [22m POST /api/auth/guest/magic-link/request [33m404[39m in 166ms[2m (compile: 2ms, proxy.ts: 3ms, render: 161ms)[22m
âœ… Comprehensive cleanup complete
  âœ˜   7 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:168:7 â€º Guest Authentication â€º should successfully request and verify magic link (13.0s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
[2m[WebServer] [22m GET /auth/guest-login/verify?token=invalid-token [32m200[39m in 27ms[2m (compile: 1375Âµs, proxy.ts: 1909Âµs, render: 24ms)[22m
[2m[WebServer] [22m GET /auth/guest-login/verify [32m200[39m in 43ms[2m (compile: 3ms, proxy.ts: 3ms, render: 37ms)[22m
[2m[WebServer] [22m GET /auth/guest-login/verify?token=c4f2bc91ef7fdc232ccadb772c662f111e13e10bfdd706815af3245f2b7fa63f [32m200[39m in 32ms[2m (compile: 1241Âµs, proxy.ts: 2ms, render: 29ms)[22m
[2m[WebServer] [22m POST /api/auth/guest/magic-link/verify [34m307[39m in 175ms[2m (compile: 11ms, proxy.ts: 6ms, render: 157ms)[22m
[2m[WebServer] [22m POST /auth/guest-login/verify?error=invalid_token&message=Invalid+or+expired+magic+link [32m200[39m in 39ms[2m (compile: 3ms, proxy.ts: 2ms, render: 34ms)[22m
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  11 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:315:7 â€º Guest Authentication â€º should show error for invalid or missing token (3.3s)
ðŸ§¹ Running comprehensive test cleanup...
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ“¡ add observability to secrets: https://dotenvx.com/ops
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 29ms[2m (compile: 1872Âµs, proxy.ts: 2ms, render: 25ms)[22m
[2m[WebServer] [22m POST /api/auth/guest/email-match [34m307[39m in 144ms[2m (compile: 5ms, proxy.ts: 3ms, render: 136ms)[22m
[2m[WebServer] [22m POST /auth/guest-login?error=not_found&message=Email+not+found+or+not+configured+for+email+matching+authentication [32m200[39m in 39ms[2m (compile: 5ms, proxy.ts: 2ms, render: 31ms)[22m
âœ… Comprehensive cleanup complete
  âœ˜   8 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:215:7 â€º Guest Authentication â€º should show success message after requesting magic link (13.2s)
ðŸ§¹ Running comprehensive test cleanup...
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  enable debug logging with { debug: true }
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 36ms[2m (compile: 2ms, proxy.ts: 3ms, render: 30ms)[22m
[2m[WebServer] [22m POST /api/auth/guest/email-match [34m307[39m in 167ms[2m (compile: 2ms, proxy.ts: 3ms, render: 162ms)[22m
[2m[WebServer] [22m POST /auth/guest-login?error=not_found&message=Email+not+found+or+not+configured+for+email+matching+authentication [32m200[39m in 36ms[2m (compile: 2ms, proxy.ts: 2ms, render: 31ms)[22m
âœ… Comprehensive cleanup complete
  âœ˜   9 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:242:7 â€º Guest Authentication â€º should show error for expired magic link (13.0s)
ðŸ§¹ Running comprehensive test cleanup...
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 34ms[2m (compile: 1683Âµs, proxy.ts: 1862Âµs, render: 30ms)[22m
ðŸ§¹ Running comprehensive test cleanup...
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  10 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:276:7 â€º Guest Authentication â€º should show error for already used magic link (13.2s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  write to custom object with { processEnv: myObject }
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 31ms[2m (compile: 1900Âµs, proxy.ts: 1947Âµs, render: 27ms)[22m
âœ… Comprehensive cleanup complete
  âœ“  14 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:403:7 â€º Guest Authentication â€º should switch between authentication tabs (3.0s)
âœ… Comprehensive cleanup complete
[2m[WebServer] [22m POST /api/auth/guest/email-match [34m307[39m in 225ms[2m (compile: 1847Âµs, proxy.ts: 5ms, render: 219ms)[22m
  âœ˜  12 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:341:7 â€º Guest Authentication â€º should complete logout flow (8.1s)
[2m[WebServer] [22m POST /auth/guest-login?error=not_found&message=Email+not+found+or+not+configured+for+email+matching+authentication [32m200[39m in 49ms[2m (compile: 3ms, proxy.ts: 2ms, render: 44ms)[22m
[2m[WebServer] [22m GET /auth/guest-login [32m200[39m in 37ms[2m (compile: 1464Âµs, proxy.ts: 2ms, render: 33ms)[22m
ðŸ§¹ Running comprehensive test cleanup...
[2m[WebServer] [22m GET /auth/guest-login/verify?token=db2841ba9fd346364fe52c36a4186a0b267079a1fa93261ef82ee857feb577fd [32m200[39m in 52ms[2m (compile: 2ms, proxy.ts: 1957Âµs, render: 48ms)[22m
[2m[WebServer] [22m POST /api/auth/guest/email-match [34m307[39m in 293ms[2m (compile: 3ms, proxy.ts: 3ms, render: 288ms)[22m
[2m[WebServer] [22m POST /api/auth/guest/magic-link/verify [34m307[39m in 248ms[2m (compile: 5ms, proxy.ts: 5ms, render: 238ms)[22m
[2m[WebServer] [22m POST /auth/guest-login/verify?error=invalid_token&message=Invalid+or+expired+magic+link [32m200[39m in 38ms[2m (compile: 1855Âµs, proxy.ts: 3ms, render: 33ms)[22m
[2m[WebServer] [22m POST /auth/guest-login?returnTo=%2Fguest%2Fdashboard [32m200[39m in 45ms[2m (compile: 1952Âµs, proxy.ts: 2ms, render: 41ms)[22m
âœ… Comprehensive cleanup complete
  âœ˜  13 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:378:7 â€º Guest Authentication â€º should persist authentication across page refreshes (8.1s)
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  16 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:488:7 â€º Guest Authentication â€º should log authentication events in audit log (8.5s)
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  15 [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:446:7 â€º Guest Authentication â€º should handle authentication errors gracefully (14.9s)

ðŸ§¹ E2E Global Teardown Starting...

ðŸ—‘ï¸  Cleaning up test data...
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ðŸ”“ Removing authentication state...
   Removed: .auth/user.json
   Removed empty .auth directory
âœ… Authentication state removed

ðŸ“Š Execution Summary:
   Duration: 2.34s
   Errors: 0
   Status: âœ… Clean teardown

âœ¨ E2E Global Teardown Complete!



  1) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:84:7 â€º Guest Authentication â€º should successfully authenticate with email matching 

    TimeoutError: page.waitForURL: Timeout 5000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "/guest/dashboard" until "load"
      navigated to "http://localhost:3000/auth/guest-login?returnTo=%2Fguest%2Fdashboard"
    ============================================================

       96 |
       97 |     // Wait for redirect to dashboard
    >  98 |     await page.waitForURL('/guest/dashboard', { timeout: 5000 });
          |                ^
       99 |     await expect(page).toHaveURL('/guest/dashboard');
      100 |     await expect(page.locator('h1')).toBeVisible();
      101 |   });
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:98:16

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-1ea91-nticate-with-email-matching-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-1ea91-nticate-with-email-matching-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-1ea91-nticate-with-email-matching-chromium/error-context.md

  2) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:131:7 â€º Guest Authentication â€º should show loading state during authentication 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeDisabled[2m([22m[2m)[22m failed

    Locator:  locator('button[type="submit"]:has-text("Log In")')
    Expected: disabled
    Received: enabled
    Timeout:  10000ms

    Call log:
    [2m  - Expect "toBeDisabled" with timeout 10000ms[22m
    [2m  - waiting for locator('button[type="submit"]:has-text("Log In")')[22m
    [2m    14 Ã— locator resolved to <button type="submit" class="w-full bg-emerald-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 transition-colors">Log In</button>[22m
    [2m       - unexpected value "enabled"[22m


      140 |
      141 |     // Verify button is disabled during loading
    > 142 |     await expect(submitButton).toBeDisabled();
          |                                ^
      143 |   });
      144 |
      145 |   test('should create session cookie on successful authentication', async ({ page, context }) => {
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:142:32

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-79b6f-state-during-authentication-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-79b6f-state-during-authentication-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-79b6f-state-during-authentication-chromium/error-context.md

  3) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:145:7 â€º Guest Authentication â€º should create session cookie on successful authentication 

    TimeoutError: page.waitForURL: Timeout 5000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "/guest/dashboard" until "load"
      navigated to "http://localhost:3000/auth/guest-login?returnTo=%2Fguest%2Fdashboard"
    ============================================================

      151 |
      152 |     // Wait for redirect
    > 153 |     await page.waitForURL('/guest/dashboard', { timeout: 5000 });
          |                ^
      154 |
      155 |     // Verify session cookie was set
      156 |     const cookies = await context.cookies();
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:153:16

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-8c77d-n-successful-authentication-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-8c77d-n-successful-authentication-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-8c77d-n-successful-authentication-chromium/error-context.md

  4) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:168:7 â€º Guest Authentication â€º should successfully request and verify magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('.bg-green-50')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('.bg-green-50')[22m


      187 |
      188 |     // Wait for success message
    > 189 |     await expect(page.locator('.bg-green-50')).toBeVisible();
          |                                                ^
      190 |     await expect(page.locator('.text-green-800')).toContainText(/check your email/i);
      191 |     await expect(page.locator('.text-green-800')).toContainText('15 minutes');
      192 |
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:189:48

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-1c592-quest-and-verify-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-1c592-quest-and-verify-magic-link-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-1c592-quest-and-verify-magic-link-chromium/error-context.md

  5) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:215:7 â€º Guest Authentication â€º should show success message after requesting magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('.bg-green-50')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('.bg-green-50')[22m


      231 |
      232 |     // Verify success message
    > 233 |     await expect(page.locator('.bg-green-50')).toBeVisible();
          |                                                ^
      234 |     await expect(page.locator('.text-green-800')).toContainText('Check your email for a login link');
      235 |     await expect(page.locator('.text-green-800')).toContainText('15 minutes');
      236 |
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:233:48

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-71b1d-after-requesting-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-71b1d-after-requesting-magic-link-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-71b1d-after-requesting-magic-link-chromium/error-context.md

  6) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:242:7 â€º Guest Authentication â€º should show error for expired magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoContainText[2m([22m[32mexpected[39m[2m)[22m failed

    Locator: locator('h1')
    Expected substring: [32m"Link Expired"[39m
    Received string:    [31m"Invalid Link"[39m
    Timeout: 10000ms

    Call log:
    [2m  - Expect "toContainText" with timeout 10000ms[22m
    [2m  - waiting for locator('h1')[22m
    [2m    - waiting for" http://localhost:3000/auth/guest-login/verify?error=invalid_token&message=Invalid+or+expired+magic+link" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/auth/guest-login/verify?error=invalid_token&message=Invalid+or+expired+magic+link"[22m
    [2m    - locator resolved to <h1 class="text-2xl font-bold text-jungle-800 mb-2">Verifying Your Link</h1>[22m
    [2m    - unexpected value "Verifying Your Link"[22m
    [2m    11 Ã— locator resolved to <h1 class="text-2xl font-bold text-red-800 mb-2">Invalid Link</h1>[22m
    [2m       - unexpected value "Invalid Link"[22m


      265 |
      266 |     // Verify error message
    > 267 |     await expect(page.locator('h1')).toContainText('Link Expired');
          |                                      ^
      268 |     await expect(page.locator('p')).toContainText('This magic link has expired');
      269 |     await expect(page.locator('p')).toContainText('15 minutes');
      270 |
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:267:38

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-fc3b3-rror-for-expired-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-fc3b3-rror-for-expired-magic-link-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-fc3b3-rror-for-expired-magic-link-chromium/error-context.md

  7) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:276:7 â€º Guest Authentication â€º should show error for already used magic link 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('.bg-green-50')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('.bg-green-50')[22m


      287 |     await page.fill('#magic-link-input', testGuestEmail);
      288 |     await page.click('button[type="submit"]:has-text("Send Magic Link")');
    > 289 |     await expect(page.locator('.bg-green-50')).toBeVisible();
          |                                                ^
      290 |
      291 |     // Get token from database
      292 |     const { data: tokens } = await supabase
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:289:48

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-fb7a8-for-already-used-magic-link-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-fb7a8-for-already-used-magic-link-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-fb7a8-for-already-used-magic-link-chromium/error-context.md

  8) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:315:7 â€º Guest Authentication â€º should show error for invalid or missing token 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoContainText[2m([22m[32mexpected[39m[2m)[22m failed

    Locator: locator('p')
    Expected pattern: [32m/invalid|expired/i[39m
    Error: strict mode violation: locator('p') resolved to 2 elements:
        1) <p class="text-gray-600 mb-6">Invalid or expired magic link</p> aka getByText('Invalid or expired magic link')
        2) <p class="text-sm text-jungle-600">â€¦</p> aka getByText('Need help? Contact us at help')

    Call log:
    [2m  - Expect "toContainText" with timeout 10000ms[22m
    [2m  - waiting for locator('p')[22m


      332 |     await page.goto(`/auth/guest-login/verify?token=${token}`);
      333 |     await expect(page.locator('h1')).toContainText('Invalid Link');
    > 334 |     await expect(page.locator('p')).toContainText(/invalid|expired/i);
          |                                     ^
      335 |   });
      336 |
      337 |   // ============================================================================
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:334:37

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-ce12c-or-invalid-or-missing-token-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-ce12c-or-invalid-or-missing-token-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-ce12c-or-invalid-or-missing-token-chromium/error-context.md

  9) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:341:7 â€º Guest Authentication â€º should complete logout flow 

    TimeoutError: page.waitForURL: Timeout 5000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "/guest/dashboard" until "load"
      navigated to "http://localhost:3000/auth/guest-login?error=not_found&message=Email+not+found+or+not+configured+for+email+matching+authentication"
      navigated to "http://localhost:3000/auth/guest-login"
    ============================================================

      344 |     await page.fill('#email-matching-input', testGuestEmail);
      345 |     await page.click('button[type="submit"]:has-text("Log In")');
    > 346 |     await page.waitForURL('/guest/dashboard', { timeout: 5000 });
          |                ^
      347 |
      348 |     // Step 2: Verify we're logged in
      349 |     await expect(page).toHaveURL('/guest/dashboard');
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:346:16

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-b7d01-should-complete-logout-flow-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-b7d01-should-complete-logout-flow-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-b7d01-should-complete-logout-flow-chromium/error-context.md

  10) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:378:7 â€º Guest Authentication â€º should persist authentication across page refreshes 

    TimeoutError: page.waitForURL: Timeout 5000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "/guest/dashboard" until "load"
      navigated to "http://localhost:3000/auth/guest-login?error=not_found&message=Email+not+found+or+not+configured+for+email+matching+authentication"
      navigated to "http://localhost:3000/auth/guest-login"
    ============================================================

      381 |     await page.fill('#email-matching-input', testGuestEmail);
      382 |     await page.click('button[type="submit"]:has-text("Log In")');
    > 383 |     await page.waitForURL('/guest/dashboard', { timeout: 5000 });
          |                ^
      384 |
      385 |     // Step 2: Navigate to different pages
      386 |     await page.goto('/guest/events');
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:383:16

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-2d8a3-ation-across-page-refreshes-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-2d8a3-ation-across-page-refreshes-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-2d8a3-ation-across-page-refreshes-chromium/error-context.md

  11) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:446:7 â€º Guest Authentication â€º should handle authentication errors gracefully 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoContainText[2m([22m[32mexpected[39m[2m)[22m failed

    Locator: locator('h1')
    Expected substring: [32m"Link Expired"[39m
    Received string:    [31m"Invalid Link"[39m
    Timeout: 10000ms

    Call log:
    [2m  - Expect "toContainText" with timeout 10000ms[22m
    [2m  - waiting for locator('h1')[22m
    [2m    14 Ã— locator resolved to <h1 class="text-2xl font-bold text-red-800 mb-2">Invalid Link</h1>[22m
    [2m       - unexpected value "Invalid Link"[22m


      482 |
      483 |     await page.goto(`/auth/guest-login/verify?token=${token}`);
    > 484 |     await expect(page.locator('h1')).toContainText('Link Expired');
          |                                      ^
      485 |     await expect(page.locator('p')).toContainText('This magic link has expired');
      486 |   });
      487 |
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:484:38

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-90796-ntication-errors-gracefully-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-90796-ntication-errors-gracefully-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-90796-ntication-errors-gracefully-chromium/error-context.md

  12) [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:488:7 â€º Guest Authentication â€º should log authentication events in audit log 

    TimeoutError: page.waitForURL: Timeout 5000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "/guest/dashboard" until "load"
      navigated to "http://localhost:3000/auth/guest-login?returnTo=%2Fguest%2Fdashboard"
    ============================================================

      491 |     await page.fill('#email-matching-input', testGuestEmail);
      492 |     await page.click('button[type="submit"]:has-text("Log In")');
    > 493 |     await page.waitForURL('/guest/dashboard', { timeout: 5000 });
          |                ^
      494 |
      495 |     // Step 2: Verify login audit log entry
      496 |     const supabase = createTestClient();
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/auth/guestAuth.spec.ts:493:16

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-c413d-ication-events-in-audit-log-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/auth-guestAuth-Guest-Authe-c413d-ication-events-in-audit-log-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/auth-guestAuth-Guest-Authe-c413d-ication-events-in-audit-log-chromium/error-context.md

  12 failed
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:84:7 â€º Guest Authentication â€º should successfully authenticate with email matching 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:131:7 â€º Guest Authentication â€º should show loading state during authentication 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:145:7 â€º Guest Authentication â€º should create session cookie on successful authentication 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:168:7 â€º Guest Authentication â€º should successfully request and verify magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:215:7 â€º Guest Authentication â€º should show success message after requesting magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:242:7 â€º Guest Authentication â€º should show error for expired magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:276:7 â€º Guest Authentication â€º should show error for already used magic link 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:315:7 â€º Guest Authentication â€º should show error for invalid or missing token 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:341:7 â€º Guest Authentication â€º should complete logout flow 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:378:7 â€º Guest Authentication â€º should persist authentication across page refreshes 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:446:7 â€º Guest Authentication â€º should handle authentication errors gracefully 
    [chromium] â€º __tests__/e2e/auth/guestAuth.spec.ts:488:7 â€º Guest Authentication â€º should log authentication events in audit log 
  4 passed (1.1m)

[36m  Serving HTML report at http://localhost:54077. Press Ctrl+C to quit.[39m
