
> destination-wedding-platform@0.1.0 test:e2e
> playwright test --timeout=300000

[dotenv@17.2.3] injecting env (24) from .env.e2e -- tip: âš™ï¸  suppress all logs with { quiet: true }

ğŸš€ E2E Global Setup Starting...

ğŸ“Š Verifying test database connection...
âœ… Test database connected

ğŸ§¹ Cleaning up test data...
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ğŸ‘¤ Creating test guest...
   Warning: Could not create test guest: Failed to create test guest: new row for relation "guests" violates check constraint "valid_guest_email"
   Guest authentication tests may fail
âœ… Test guest created

ğŸŒ Verifying Next.js server...
âœ… Next.js server is running

ğŸ” Setting up admin authentication...
   Warning: Could not ensure admin user exists: Failed to create auth user: A user with this email address has already been registered
   Continuing with setup - login may fail if user does not exist
   Navigated to login page
   Filled login form
   Submitted login form, waiting for navigation...
   âš ï¸  Login error message: Invalid login credentials (Status: 400)
   Current URL after login: http://localhost:3000/auth/login

âŒ E2E Global Setup Failed: Error: Failed to create admin authentication state: page.waitForURL: Timeout 10000ms exceeded.
=========================== logs ===========================
waiting for navigation until "load"
============================================================
Please ensure:
  1. Admin user exists in test database
  2. Admin credentials are correct
  3. Login page is accessible
  4. Admin dashboard route exists
    at createAdminAuthState (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/global-setup.ts:323:11)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processTimers (node:internal/timers:511:9)
    at globalSetup (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/global-setup.ts:47:5)
    at Object.setup (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/tasks.js:174:27)
    at taskLoop (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/taskRunner.js:62:11)
    at TaskRunner.runDeferCleanup (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/taskRunner.js:78:5)
    at TaskRunner.run (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/taskRunner.js:42:33)
    at runTasks (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/tasks.js:80:18)
    at runAllTestsWithConfig (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/testRunner.js:388:18)
    at runTests (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/program.js:242:18)
    at i.<anonymous> (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/program.js:70:7)
Error: Failed to create admin authentication state: page.waitForURL: Timeout 10000ms exceeded.
=========================== logs ===========================
waiting for navigation until "load"
============================================================
Please ensure:
  1. Admin user exists in test database
  2. Admin credentials are correct
  3. Login page is accessible
  4. Admin dashboard route exists

   at global-setup.ts:323

  321 |     console.log(`   Logged in as: ${adminEmail}`);
  322 |   } catch (error) {
> 323 |     throw new Error(
      |           ^
  324 |       `Failed to create admin authentication state: ${error instanceof Error ? error.message : String(error)}\n` +
  325 |       'Please ensure:\n' +
  326 |       '  1. Admin user exists in test database\n' +
    at createAdminAuthState (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/global-setup.ts:323:11)
    at globalSetup (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/global-setup.ts:47:5)

ğŸ§¹ E2E Global Teardown Starting...

ğŸ—‘ï¸  Cleaning up test data...
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ğŸ”“ Removing authentication state...
   No authentication directory found (already clean)
âœ… Authentication state removed

ğŸ“Š Execution Summary:
   Duration: 2.71s
   Errors: 0
   Status: âœ… Clean teardown

âœ¨ E2E Global Teardown Complete!



To open last HTML report run:
[36m[39m
[36m  npx playwright show-report[39m
[36m[39m
