
> destination-wedding-platform@0.1.0 test:e2e
> playwright test photoUpload.spec.ts --reporter=line

[dotenv@17.2.4] injecting env (29) from .env.e2e -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
[1A[2K[2m[WebServer] [22m
[2m[WebServer] [22m> destination-wedding-platform@0.1.0 dev
[2m[WebServer] [22m> next dev --webpack
[2m[WebServer] [22m

[1A[2K[2m[WebServer] [22m[1m[38;2;173;127;168mâ–² Next.js 16.1.1[39m[22m (webpack)

[1A[2K[2m[WebServer] [22m- Local:         http://localhost:3000
[2m[WebServer] [22m- Network:       http://192.168.7.243:3000
[2m[WebServer] [22m- Environments: .env.test

[1A[2K[2m[WebServer] [22m
[2m[WebServer] [22m[32m[1mâœ“[22m[39m Starting...

[1A[2K[2m[WebServer] [22m[33m[1mâš [22m[39m The "middleware" file convention is deprecated. Please use "proxy" instead. Learn more: https://nextjs.org/docs/messages/middleware-to-proxy

[1A[2K[2m[WebServer] [22m[32m[1mâœ“[22m[39m Ready in 1318ms

[1A[2K[2m[WebServer] [22m[37m[1mâ—‹[22m[39m Compiling /_not-found ...

[1A[2K[2m[WebServer] [22m GET / [33m404[39m in 3.4s[2m (compile: 3.3s, render: 80ms)[22m

[1A[2K[2m[WebServer] [22m GET /index.html [33m404[39m in 119ms[2m (compile: 7ms, proxy.ts: 97ms, render: 16ms)[22m


ðŸš€ E2E Global Setup Starting...

ðŸ“Š Verifying test database connection...
[1A[2K[2m[WebServer] [22m GET / [32m200[39m in 250ms[2m (compile: 177ms, proxy.ts: 12ms, render: 61ms)[22m

âœ… Test database connected

ðŸ§¹ Cleaning up test data...
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ðŸŒ Verifying Next.js server...
âœ… Next.js server is running

ðŸ” Setting up admin authentication...
[1A[2K[2m[WebServer] [22m GET / [32m200[39m in 26ms[2m (compile: 1893Âµs, proxy.ts: 8ms, render: 16ms)[22m

   Admin user already exists: admin@example.com
   Authenticating via Supabase API...
   âœ… API authentication successful (User ID: e7f5ae65-376e-4d05-a18c-10a91295727a)
   Creating storage state from API session...
   âœ… Storage state created from API session
   Auth state saved to: .auth/admin.json
   Verifying authentication...
[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m GET /admin [32m200[39m in 996ms[2m (compile: 496ms, proxy.ts: 386ms, render: 113ms)[22m

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

   Current URL: http://localhost:3000/admin
   âœ… Admin UI is visible
   âœ… Authentication verified
   Logged in as: admin@example.com
âœ… Admin authentication saved

âœ¨ E2E Global Setup Complete!


Running 17 tests using 4 workers

[1A[2K[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }

[1A[2K[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild

[1A[2K[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  enable debug logging with { debug: true }

[1A[2K[1/17] [chromium] â€º __tests__/e2e/admin/photoUpload.spec.ts:132:9 â€º Photo Upload â€º Photo Moderation Workflow â€º should complete full moderation flow: upload â†’ approve â†’ display
[1A[2K[2/17] [chromium] â€º __tests__/e2e/admin/photoUpload.spec.ts:105:9 â€º Photo Upload â€º Photo Upload & Storage â€º should handle upload errors gracefully
[1A[2K[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`

[1A[2K[3/17] [chromium] â€º __tests__/e2e/admin/photoUpload.spec.ts:47:9 â€º Photo Upload â€º Photo Upload & Storage â€º should upload photo with metadata via API
[1A[2K[4/17] [chromium] â€º __tests__/e2e/admin/photoUpload.spec.ts:79:9 â€º Photo Upload â€º Photo Upload & Storage â€º should store photo in B2 with CDN URL
[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m GET /admin [32m200[39m in 654ms[2m (compile: 36ms, proxy.ts: 397ms, render: 221ms)[22m

[1A[2K[2m[WebServer] [22m GET /admin [32m200[39m in 740ms[2m (compile: 13ms, proxy.ts: 571ms, render: 155ms)[22m
[2m[WebServer] [22m GET /admin [32m200[39m in 742ms[2m (compile: 12ms, proxy.ts: 573ms, render: 158ms)[22m

[1A[2K[2m[WebServer] [22m GET /admin [32m200[39m in 739ms[2m (compile: 14ms, proxy.ts: 564ms, render: 161ms)[22m

[1A[2K[2m[WebServer] [22m[Middleware] Guest auth check: {
[2m[WebServer] [22m  path: '/guest/photos',
[2m[WebServer] [22m  hasCookie: false,
[2m[WebServer] [22m  cookieValue: 'none',
[2m[WebServer] [22m  allCookies: [ 'sb-olcqaawrpnanioaorfer-auth-token' ]
[2m[WebServer] [22m}
[2m[WebServer] [22m[Middleware] No guest session cookie found - redirecting to login

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22mUsing the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1A[2K[2m[WebServer] [22m[Photo API] Calling uploadPhoto service with: {
[2m[WebServer] [22m  fileName: [32m'test-photo.jpg'[39m,
[2m[WebServer] [22m  fileType: [32m'image/jpeg'[39m,
[2m[WebServer] [22m  fileSize: [33m160[39m,
[2m[WebServer] [22m  metadata: {
[2m[WebServer] [22m    page_type: [32m'memory'[39m,
[2m[WebServer] [22m    caption: [32m'E2E test photo'[39m,
[2m[WebServer] [22m    alt_text: [32m'Test photo for validation'[39m,
[2m[WebServer] [22m    uploader_id: [32m'e7f5ae65-376e-4d05-a18c-10a91295727a'[39m,
[2m[WebServer] [22m    moderation_status: [32m'approved'[39m
[2m[WebServer] [22m  }
[2m[WebServer] [22m}

[1A[2K[2m[WebServer] [22mðŸ§ª [PhotoService] Using MOCK B2 service

[1A[2K[2m[WebServer] [22mðŸ§ª [SERVICE DETECTOR] E2E test mode detected: {
[2m[WebServer] [22m  NODE_ENV: [32m'development'[39m,
[2m[WebServer] [22m  E2E_TEST: [90mundefined[39m,
[2m[WebServer] [22m  PLAYWRIGHT_TEST: [32m'1'[39m,
[2m[WebServer] [22m  PLAYWRIGHT: [90mundefined[39m,
[2m[WebServer] [22m  USE_MOCK_B2: [32m'true'[39m,
[2m[WebServer] [22m  testDatabase: [33mfalse[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mðŸ§ª [SERVICE DETECTOR] Using MOCK B2 service (E2E test mode)

[1A[2K[2m[WebServer] [22m[PhotoService] B2 health check: { success: [33mtrue[39m, data: [33mtrue[39m }
[2m[WebServer] [22m[PhotoService] Attempting B2 upload...

[1A[2K[2m[WebServer] [22m[33m[1mâš [22m[39m Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload

[1A[2K[2m[WebServer] [22m GET /api/admin/alerts [32m200[39m in 2.4s[2m (compile: 1845ms, proxy.ts: 377ms, render: 195ms)[22m

[1A[2K[2m[WebServer] [22m GET /api/admin/metrics [32m200[39m in 2.4s[2m (compile: 1865ms, proxy.ts: 358ms, render: 195ms)[22m

[1A[2K[2m[WebServer] [22m[33m[1mâš [22m[39m Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload

[1A[2K[2m[WebServer] [22m GET /api/admin/metrics [32m200[39m in 2.4s[2m (compile: 1797ms, proxy.ts: 425ms, render: 199ms)[22m
[2m[WebServer] [22m GET /api/admin/alerts [32m200[39m in 2.4s[2m (compile: 1760ms, proxy.ts: 462ms, render: 199ms)[22m

[1A[2K[2m[WebServer] [22mðŸ§ª [MOCK B2] File uploaded: {
[2m[WebServer] [22m  fileName: [32m'test-photo.jpg'[39m,
[2m[WebServer] [22m  contentType: [32m'image/jpeg'[39m,
[2m[WebServer] [22m  size: [33m160[39m,
[2m[WebServer] [22m  key: [32m'photos/1770952586191-test-photo.jpg'[39m,
[2m[WebServer] [22m  url: [32m'https://test-cdn.example.com/photos/1770952586191-test-photo.jpg'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m[PhotoService] B2 upload result: {
[2m[WebServer] [22m  success: [33mtrue[39m,
[2m[WebServer] [22m  data: {
[2m[WebServer] [22m    url: [32m'https://test-cdn.example.com/photos/1770952586191-test-photo.jpg'[39m,
[2m[WebServer] [22m    key: [32m'photos/1770952586191-test-photo.jpg'[39m
[2m[WebServer] [22m  }
[2m[WebServer] [22m}
[2m[WebServer] [22m[PhotoService] Using B2 storage: https://test-cdn.example.com/photos/1770952586191-test-photo.jpg

[1A[2K[2m[WebServer] [22m GET /auth/guest-login?returnTo=%2Fguest%2Fphotos [32m200[39m in 2.4s[2m (compile: 2.1s, proxy.ts: 7ms, render: 284ms)[22m

[1A[2K[2m[WebServer] [22m GET /admin/photos [32m200[39m in 2.5s[2m (compile: 1795ms, proxy.ts: 412ms, render: 297ms)[22m

[1A[2K[2m[WebServer] [22m GET /admin/photos [32m200[39m in 2.5s[2m (compile: 1766ms, proxy.ts: 441ms, render: 298ms)[22m

[1A[2K[2m[WebServer] [22m[Photo API] Upload result: {
[2m[WebServer] [22m  success: [33mtrue[39m,
[2m[WebServer] [22m  data: {
[2m[WebServer] [22m    id: [32m'8656c1a9-935b-41ca-b9e2-9eba8bca30d8'[39m,
[2m[WebServer] [22m    uploader_id: [32m'e7f5ae65-376e-4d05-a18c-10a91295727a'[39m,
[2m[WebServer] [22m    photo_url: [32m'https://test-cdn.example.com/photos/1770952586191-test-photo.jpg'[39m,
[2m[WebServer] [22m    storage_type: [32m'b2'[39m,
[2m[WebServer] [22m    page_type: [32m'memory'[39m,
[2m[WebServer] [22m    page_id: [1mnull[22m,
[2m[WebServer] [22m    caption: [32m'E2E test photo'[39m,
[2m[WebServer] [22m    alt_text: [32m'Test photo for validation'[39m,
[2m[WebServer] [22m    moderation_status: [32m'approved'[39m,
[2m[WebServer] [22m    moderation_reason: [1mnull[22m,
[2m[WebServer] [22m    display_order: [1mnull[22m,
[2m[WebServer] [22m    created_at: [32m'2026-02-13T03:16:26.289116+00:00'[39m,
[2m[WebServer] [22m    moderated_at: [1mnull[22m,
[2m[WebServer] [22m    updated_at: [32m'2026-02-13T03:16:26.289116+00:00'[39m,
[2m[WebServer] [22m    deleted_at: [1mnull[22m,
[2m[WebServer] [22m    deleted_by: [1mnull[22m
[2m[WebServer] [22m  }
[2m[WebServer] [22m}

[1A[2K[2m[WebServer] [22m POST /api/admin/photos [32m201[39m in 2.6s[2m (compile: 1734ms, proxy.ts: 423ms, render: 412ms)[22m

[1A[2K[2m[WebServer] [22m GET /api/admin/metrics [32m200[39m in 2.7s[2m (compile: 1865ms, proxy.ts: 357ms, render: 494ms)[22m

[1A[2K[2m[WebServer] [22m GET /api/admin/alerts [32m200[39m in 2.7s[2m (compile: 1798ms, proxy.ts: 424ms, render: 494ms)[22m

[1A[2K[5/17] [chromium] â€º __tests__/e2e/admin/photoUpload.spec.ts:165:9 â€º Photo Upload â€º Photo Moderation Workflow â€º should reject photo with reason
[1A[2K[2m[WebServer] [22m GET /api/admin/alerts [32m200[39m in 3.7s[2m (compile: 1865ms, proxy.ts: 358ms, render: 1441ms)[22m

[1A[2K[6/17] [chromium] â€º __tests__/e2e/admin/photoUpload.spec.ts:179:9 â€º Photo Upload â€º Photo Moderation Workflow â€º should support batch photo operations
[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m GET /api/admin/metrics [32m200[39m in 4.1s[2m (compile: 1866ms, proxy.ts: 356ms, render: 1834ms)[22m

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m GET /admin [32m200[39m in 485ms[2m (compile: 12ms, proxy.ts: 342ms, render: 132ms)[22m

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m GET /api/admin/photos?moderation_status=approved&limit=100&offset=0 [32m200[39m in 513ms[2m (compile: 3ms, proxy.ts: 322ms, render: 188ms)[22m

[1A[2K[2m[WebServer] [22mUsing the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1A[2K[2m[WebServer] [22m[Photo API] Calling uploadPhoto service with: {
[2m[WebServer] [22m  fileName: [32m'test-photo.jpg'[39m,
[2m[WebServer] [22m  fileType: [32m'image/jpeg'[39m,
[2m[WebServer] [22m  fileSize: [33m0[39m,
[2m[WebServer] [22m  metadata: {
[2m[WebServer] [22m    page_type: [32m'memory'[39m,
[2m[WebServer] [22m    caption: [32m''[39m,
[2m[WebServer] [22m    alt_text: [32m''[39m,
[2m[WebServer] [22m    uploader_id: [32m'e7f5ae65-376e-4d05-a18c-10a91295727a'[39m,
[2m[WebServer] [22m    moderation_status: [32m'approved'[39m
[2m[WebServer] [22m  }
[2m[WebServer] [22m}
[2m[WebServer] [22m[PhotoService] B2 health check: { success: [33mtrue[39m, data: [33mtrue[39m }
[2m[WebServer] [22m[PhotoService] Attempting B2 upload...

[1A[2K[2m[WebServer] [22mðŸ§ª [MOCK B2] File uploaded: {
[2m[WebServer] [22m  fileName: [32m'test-photo.jpg'[39m,
[2m[WebServer] [22m  contentType: [32m'image/jpeg'[39m,
[2m[WebServer] [22m  size: [33m0[39m,
[2m[WebServer] [22m  key: [32m'photos/1770952588076-test-photo.jpg'[39m,
[2m[WebServer] [22m  url: [32m'https://test-cdn.example.com/photos/1770952588076-test-photo.jpg'[39m
[2m[WebServer] [22m}

[1A[2K[2m[WebServer] [22m[PhotoService] B2 upload result: {
[2m[WebServer] [22m  success: [33mtrue[39m,
[2m[WebServer] [22m  data: {
[2m[WebServer] [22m    url: [32m'https://test-cdn.example.com/photos/1770952588076-test-photo.jpg'[39m,
[2m[WebServer] [22m    key: [32m'photos/1770952588076-test-photo.jpg'[39m
[2m[WebServer] [22m  }
[2m[WebServer] [22m}
[2m[WebServer] [22m[PhotoService] Using B2 storage: https://test-cdn.example.com/photos/1770952588076-test-photo.jpg

[1A[2K[2m[WebServer] [22m GET /admin [32m200[39m in 1157ms[2m (compile: 130ms, proxy.ts: 697ms, render: 331ms)[22m

[1A[2K[2m[WebServer] [22m GET /admin [32m200[39m in 689ms[2m (compile: 35ms, proxy.ts: 321ms, render: 333ms)[22m

[1A[2K[2m[WebServer] [22m GET /admin/photos [32m200[39m in 895ms[2m (compile: 316ms, proxy.ts: 374ms, render: 205ms)[22m

[1A[2K[2m[WebServer] [22m[Photo API] Upload result: {
[2m[WebServer] [22m  success: [33mtrue[39m,
[2m[WebServer] [22m  data: {
[2m[WebServer] [22m    id: [32m'5d21162b-e0e3-4a13-8263-fd601e70eff0'[39m,
[2m[WebServer] [22m    uploader_id: [32m'e7f5ae65-376e-4d05-a18c-10a91295727a'[39m,
[2m[WebServer] [22m    photo_url: [32m'https://test-cdn.example.com/photos/1770952588076-test-photo.jpg'[39m,
[2m[WebServer] [22m    storage_type: [32m'b2'[39m,
[2m[WebServer] [22m    page_type: [32m'memory'[39m,
[2m[WebServer] [22m    page_id: [1mnull[22m,
[2m[WebServer] [22m    caption: [1mnull[22m,
[2m[WebServer] [22m    alt_text: [1mnull[22m,
[2m[WebServer] [22m    moderation_status: [32m'approved'[39m,
[2m[WebServer] [22m    moderation_reason: [1mnull[22m,
[2m[WebServer] [22m    display_order: [1mnull[22m,
[2m[WebServer] [22m    created_at: [32m'2026-02-13T03:16:28.318923+00:00'[39m,
[2m[WebServer] [22m    moderated_at: [1mnull[22m,
[2m[WebServer] [22m    updated_at: [32m'2026-02-13T03:16:28.318923+00:00'[39m,
[2m[WebServer] [22m    deleted_at: [1mnull[22m,
[2m[WebServer] [22m    deleted_by: [1mnull[22m
[2m[WebServer] [22m  }
[2m[WebServer] [22m}

[1A[2K[2m[WebServer] [22m POST /api/admin/photos [32m201[39m in 1002ms[2m (compile: 88ms, proxy.ts: 428ms, render: 486ms)[22m

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m GET /api/admin/photos?moderation_status=approved&limit=100&offset=0 [32m200[39m in 462ms[2m (compile: 3ms, proxy.ts: 302ms, render: 157ms)[22m

[1A[2K[7/17] [chromium] â€º __tests__/e2e/admin/photoUpload.spec.ts:194:9 â€º Photo Upload â€º Section Editor Photo Integration â€º should select photos via PhotoPicker in section editor
[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a
[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[8/17] [chromium] â€º __tests__/e2e/admin/photoUpload.spec.ts:227:9 â€º Photo Upload â€º Section Editor Photo Integration â€º should display selected photos with thumbnails
[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m GET /api/admin/alerts [32m200[39m in 383ms[2m (compile: 1218Âµs, proxy.ts: 303ms, render: 79ms)[22m

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m GET /api/admin/metrics [32m200[39m in 460ms[2m (compile: 2ms, proxy.ts: 307ms, render: 151ms)[22m

[1A[2K[2m[WebServer] [22m GET /api/admin/alerts [32m200[39m in 460ms[2m (compile: 1171Âµs, proxy.ts: 319ms, render: 140ms)[22m

[1A[2K[2m[WebServer] [22m GET /admin/photos [32m200[39m in 470ms[2m (compile: 1953Âµs, proxy.ts: 352ms, render: 116ms)[22m

[1A[2K[2m[WebServer] [22m GET /admin/photos [32m200[39m in 502ms[2m (compile: 42ms, proxy.ts: 375ms, render: 84ms)[22m

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner
[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m GET /admin [32m200[39m in 459ms[2m (compile: 16ms, proxy.ts: 371ms, render: 72ms)[22m

[1A[2K[2m[WebServer] [22m GET /admin [32m200[39m in 394ms[2m (compile: 25ms, proxy.ts: 295ms, render: 74ms)[22m

[1A[2K[9/17] [chromium] â€º __tests__/e2e/admin/photoUpload.spec.ts:247:9 â€º Photo Upload â€º Section Editor Photo Integration â€º should remove individual photos from section
[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[10/17] [chromium] â€º __tests__/e2e/admin/photoUpload.spec.ts:270:9 â€º Photo Upload â€º Section Editor Photo Integration â€º should change photo display mode (gallery/carousel/loop)
[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m GET /api/admin/alerts [32m200[39m in 2.4s[2m (compile: 1764ms, proxy.ts: 398ms, render: 206ms)[22m

[1A[2K[2m[WebServer] [22m GET /api/admin/metrics [32m200[39m in 2.4s[2m (compile: 1766ms, proxy.ts: 395ms, render: 207ms)[22m

[1A[2K[2m[WebServer] [22m GET /api/admin/metrics [32m200[39m in 2.4s[2m (compile: 1767ms, proxy.ts: 394ms, render: 212ms)[22m

[1A[2K[2m[WebServer] [22m GET /api/admin/alerts [32m200[39m in 2.4s[2m (compile: 1589ms, proxy.ts: 572ms, render: 213ms)[22m

[1A[2K[2m[WebServer] [22m GET /admin [32m200[39m in 2.1s[2m (compile: 1451ms, proxy.ts: 411ms, render: 261ms)[22m

[1A[2K[2m[WebServer] [22m GET /admin [32m200[39m in 2.1s[2m (compile: 1450ms, proxy.ts: 368ms, render: 267ms)[22m

[1A[2K[2m[WebServer] [22m GET /admin/activities [32m200[39m in 2.4s[2m (compile: 1799ms, proxy.ts: 363ms, render: 287ms)[22m

[1A[2K[2m[WebServer] [22m GET /admin/activities [32m200[39m in 2.5s[2m (compile: 1773ms, proxy.ts: 390ms, render: 290ms)[22m

[1A[2K[chromium] â€º __tests__/e2e/admin/photoUpload.spec.ts:194:9 â€º Photo Upload â€º Section Editor Photo Integration â€º should select photos via PhotoPicker in section editor
â­ï¸  Skipping: Manage Sections button not found

[1A[2K[11/17] [chromium] â€º __tests__/e2e/admin/photoUpload.spec.ts:295:9 â€º Photo Upload â€º Guest View Photo Display â€º should display photos on guest activity page
[1A[2K[12/17] [chromium] â€º __tests__/e2e/admin/photoUpload.spec.ts:314:9 â€º Photo Upload â€º Guest View Photo Display â€º should display photos in memories gallery
[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m GET /admin/activities [32m200[39m in 537ms[2m (compile: 3ms, proxy.ts: 444ms, render: 91ms)[22m

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m GET /api/admin/alerts [32m200[39m in 551ms[2m (compile: 10ms, proxy.ts: 494ms, render: 47ms)[22m

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m GET /admin/activities [32m200[39m in 609ms[2m (compile: 20ms, proxy.ts: 493ms, render: 97ms)[22m

[1A[2K[2m[WebServer] [22m GET /admin [32m200[39m in 508ms[2m (compile: 53ms, proxy.ts: 396ms, render: 60ms)[22m

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m GET /admin [32m200[39m in 607ms[2m (compile: 3ms, proxy.ts: 573ms, render: 32ms)[22m

[1A[2K[13/17] [chromium] â€º __tests__/e2e/admin/photoUpload.spec.ts:334:9 â€º Photo Upload â€º Guest View Photo Display â€º should handle photo loading errors gracefully
[1A[2K[14/17] [chromium] â€º __tests__/e2e/admin/photoUpload.spec.ts:353:9 â€º Photo Upload â€º Validation & Error Handling â€º should validate file type on upload
[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22mError: Route "/activities-overview" used `cookies().get`. `cookies()` returns a Promise and must be unwrapped with `await` or `React.use()` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
[2m[WebServer] [22m    at createCookiesAccessError (../../../src/server/request/cookies.ts:298:10)
[2m[WebServer] [22m    at Promise.get (../../../src/server/request/cookies.ts:257:7)
[2m[WebServer] [22m    at ActivitiesOverviewPage (app/activities-overview/page.tsx:29:47)
[2m[WebServer] [22m[0m [90m 296 |[39m ) {
[2m[WebServer] [22m [90m 297 |[39m   [36mconst[39m prefix [33m=[39m route [33m?[39m [32m`Route "${route}" `[39m [33m:[39m [32m'This route '[39m
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 298 |[39m   [36mreturn[39m [36mnew[39m [33mError[39m(
[2m[WebServer] [22m [90m     |[39m          [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 299 |[39m     [32m`${prefix}used ${expression}. `[39m [33m+[39m
[2m[WebServer] [22m [90m 300 |[39m       [32m`\`cookies()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. `[39m [33m+[39m
[2m[WebServer] [22m [90m 301 |[39m       [32m`Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`[39m[0m

[1A[2K[2m[WebServer] [22mTypeError: nextCookies.get is not a function
[2m[WebServer] [22m    at ActivitiesOverviewPage (app/activities-overview/page.tsx:29:47)
[2m[WebServer] [22m[0m [90m 27 |[39m [90m */[39m
[2m[WebServer] [22m [90m 28 |[39m [36mexport[39m [36mdefault[39m [36masync[39m [36mfunction[39m [33mActivitiesOverviewPage[39m() {
[2m[WebServer] [22m[31m[1m>[22m[39m[90m 29 |[39m   [36mconst[39m supabase [33m=[39m createServerComponentClient({ cookies })[33m;[39m
[2m[WebServer] [22m [90m    |[39m                                               [31m[1m^[22m[39m
[2m[WebServer] [22m [90m 30 |[39m   
[2m[WebServer] [22m [90m 31 |[39m   [90m// Check authentication[39m
[2m[WebServer] [22m [90m 32 |[39m   [36mconst[39m { data[33m:[39m { session } } [33m=[39m [36mawait[39m supabase[33m.[39mauth[33m.[39mgetSession()[33m;[39m[0m

[1A[2K[2m[WebServer] [22m[31m[1mâ¨¯[22m[39m TypeError: nextCookies.get is not a function
[2m[WebServer] [22m    at [3mignore-listed frames[23m {
[2m[WebServer] [22m  digest: [32m'2095069349'[39m
[2m[WebServer] [22m}

[1A[2K[2m[WebServer] [22mTypeError: nextCookies.get is not a function
[2m[WebServer] [22m    at [3mignore-listed frames[23m

[1A[2K[2m[WebServer] [22m[31m[1mâ¨¯[22m[39m unhandledRejection: TypeError: nextCookies.get is not a function
[2m[WebServer] [22m    at [3mignore-listed frames[23m

[1A[2K[2m[WebServer] [22m[31m[1mâ¨¯[22m[39m unhandledRejection:  TypeError: nextCookies.get is not a function
[2m[WebServer] [22m    at [3mignore-listed frames[23m

[1A[2K[2m[WebServer] [22m[33m[1mâš [22m[39m Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload

[1A[2K[2m[WebServer] [22m[33m[1mâš [22m[39m Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload

[1A[2K[2m[WebServer] [22m GET /api/admin/alerts [32m200[39m in 2.4s[2m (compile: 1622ms, proxy.ts: 490ms, render: 282ms)[22m

[1A[2K[2m[WebServer] [22m GET /api/admin/metrics [32m200[39m in 2.4s[2m (compile: 1610ms, proxy.ts: 501ms, render: 283ms)[22m
[2m[WebServer] [22m GET /api/admin/alerts [32m200[39m in 2.4s[2m (compile: 1615ms, proxy.ts: 495ms, render: 284ms)[22m
[2m[WebServer] [22m GET /api/admin/metrics [32m200[39m in 2.4s[2m (compile: 1626ms, proxy.ts: 484ms, render: 283ms)[22m

[1A[2K[2m[WebServer] [22m GET /memories [32m200[39m in 2.4s[2m (compile: 2.1s, proxy.ts: 43ms, render: 327ms)[22m

[1A[2K[2m[WebServer] [22m GET /admin [32m200[39m in 2.1s[2m (compile: 1404ms, proxy.ts: 406ms, render: 328ms)[22m

[1A[2K[2m[WebServer] [22m GET /admin [32m200[39m in 2.1s[2m (compile: 1403ms, proxy.ts: 407ms, render: 330ms)[22m

[1A[2K[2m[WebServer] [22m GET /activities-overview [31m500[39m in 2.5s[2m (compile: 2.1s, proxy.ts: 43ms, render: 341ms)[22m

[1A[2K[2m[WebServer] [22m GET /memories [32m200[39m in 112ms[2m (compile: 15ms, proxy.ts: 37ms, render: 60ms)[22m

[1A[2K[15/17] [chromium] â€º __tests__/e2e/admin/photoUpload.spec.ts:372:9 â€º Photo Upload â€º Validation & Error Handling â€º should validate file size limits
[1A[2K[16/17] [chromium] â€º __tests__/e2e/admin/photoUpload.spec.ts:395:9 â€º Photo Upload â€º Validation & Error Handling â€º should sanitize photo captions and descriptions
[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m GET /api/admin/metrics [32m200[39m in 1390ms[2m (compile: 727ms, proxy.ts: 478ms, render: 185ms)[22m

[1A[2K[2m[WebServer] [22m GET /api/admin/alerts [32m200[39m in 1391ms[2m (compile: 880ms, proxy.ts: 336ms, render: 176ms)[22m

[1A[2K[2m[WebServer] [22m GET /admin [32m200[39m in 1195ms[2m (compile: 324ms, proxy.ts: 620ms, render: 251ms)[22m

[1A[2K[2m[WebServer] [22m GET /admin [32m200[39m in 1150ms[2m (compile: 502ms, proxy.ts: 395ms, render: 253ms)[22m

[1A[2K[2m[WebServer] [22m GET /admin/photos [32m200[39m in 1489ms[2m (compile: 724ms, proxy.ts: 491ms, render: 274ms)[22m

[1A[2K[2m[WebServer] [22m GET /api/photos?status=approved [33m404[39m in 116ms[2m (compile: 54ms, proxy.ts: 13ms, render: 49ms)[22m

[1A[2K[17/17] [chromium] â€º __tests__/e2e/admin/photoUpload.spec.ts:423:9 â€º Photo Upload â€º Validation & Error Handling â€º should handle missing metadata gracefully
[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m GET /admin [32m200[39m in 414ms[2m (compile: 5ms, proxy.ts: 346ms, render: 64ms)[22m

[1A[2K[2m[WebServer] [22m GET /api/admin/alerts [32m200[39m in 417ms[2m (compile: 1201Âµs, proxy.ts: 347ms, render: 69ms)[22m

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22mUsing the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1A[2K[2m[WebServer] [22m[Photo API] Calling uploadPhoto service with: {
[2m[WebServer] [22m  fileName: [32m'test-photo.jpg'[39m,
[2m[WebServer] [22m  fileType: [32m'image/jpeg'[39m,
[2m[WebServer] [22m  fileSize: [33m160[39m,
[2m[WebServer] [22m  metadata: {
[2m[WebServer] [22m    page_type: [32m'memory'[39m,
[2m[WebServer] [22m    caption: [32m'<script>alert("xss")</script>Test Caption'[39m,
[2m[WebServer] [22m    alt_text: [32m'<img src=x onerror=alert(1)>Alt Text'[39m,
[2m[WebServer] [22m    uploader_id: [32m'e7f5ae65-376e-4d05-a18c-10a91295727a'[39m,
[2m[WebServer] [22m    moderation_status: [32m'approved'[39m
[2m[WebServer] [22m  }
[2m[WebServer] [22m}

[1A[2K[2m[WebServer] [22mðŸ§ª [PhotoService] Using MOCK B2 service

[1A[2K[2m[WebServer] [22mðŸ§ª [SERVICE DETECTOR] E2E test mode detected: {
[2m[WebServer] [22m  NODE_ENV: [32m'development'[39m,
[2m[WebServer] [22m  E2E_TEST: [90mundefined[39m,
[2m[WebServer] [22m  PLAYWRIGHT_TEST: [32m'1'[39m,
[2m[WebServer] [22m  PLAYWRIGHT: [90mundefined[39m,
[2m[WebServer] [22m  USE_MOCK_B2: [32m'true'[39m,
[2m[WebServer] [22m  testDatabase: [33mfalse[39m
[2m[WebServer] [22m}

[1A[2K[2m[WebServer] [22mðŸ§ª [SERVICE DETECTOR] Using MOCK B2 service (E2E test mode)

[1A[2K[2m[WebServer] [22m[PhotoService] B2 health check: { success: [33mtrue[39m, data: [33mtrue[39m }
[2m[WebServer] [22m[PhotoService] Attempting B2 upload...

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m GET /admin/photos [32m200[39m in 475ms[2m (compile: 9ms, proxy.ts: 372ms, render: 94ms)[22m

[1A[2K[2m[WebServer] [22mðŸ§ª [MOCK B2] File uploaded: {
[2m[WebServer] [22m  fileName: [32m'test-photo.jpg'[39m,
[2m[WebServer] [22m  contentType: [32m'image/jpeg'[39m,
[2m[WebServer] [22m  size: [33m160[39m,
[2m[WebServer] [22m  key: [32m'photos/1770952601920-test-photo.jpg'[39m,
[2m[WebServer] [22m  url: [32m'https://test-cdn.example.com/photos/1770952601920-test-photo.jpg'[39m
[2m[WebServer] [22m}

[1A[2K[2m[WebServer] [22m[PhotoService] B2 upload result: {
[2m[WebServer] [22m  success: [33mtrue[39m,
[2m[WebServer] [22m  data: {
[2m[WebServer] [22m    url: [32m'https://test-cdn.example.com/photos/1770952601920-test-photo.jpg'[39m,
[2m[WebServer] [22m    key: [32m'photos/1770952601920-test-photo.jpg'[39m
[2m[WebServer] [22m  }
[2m[WebServer] [22m}
[2m[WebServer] [22m[PhotoService] Using B2 storage: https://test-cdn.example.com/photos/1770952601920-test-photo.jpg

[1A[2K[2m[WebServer] [22m[Photo API] Upload result: {
[2m[WebServer] [22m  success: [33mtrue[39m,
[2m[WebServer] [22m  data: {
[2m[WebServer] [22m    id: [32m'99f7a014-abb1-4c56-9f7a-c773bbcfc7e5'[39m,
[2m[WebServer] [22m    uploader_id: [32m'e7f5ae65-376e-4d05-a18c-10a91295727a'[39m,
[2m[WebServer] [22m    photo_url: [32m'https://test-cdn.example.com/photos/1770952601920-test-photo.jpg'[39m,
[2m[WebServer] [22m    storage_type: [32m'b2'[39m,
[2m[WebServer] [22m    page_type: [32m'memory'[39m,
[2m[WebServer] [22m    page_id: [1mnull[22m,
[2m[WebServer] [22m    caption: [32m'"xss")Test Caption'[39m,
[2m[WebServer] [22m    alt_text: [32m'Alt Text'[39m,
[2m[WebServer] [22m    moderation_status: [32m'approved'[39m,
[2m[WebServer] [22m    moderation_reason: [1mnull[22m,
[2m[WebServer] [22m    display_order: [1mnull[22m,
[2m[WebServer] [22m    created_at: [32m'2026-02-13T03:16:42.00985+00:00'[39m,
[2m[WebServer] [22m    moderated_at: [1mnull[22m,
[2m[WebServer] [22m    updated_at: [32m'2026-02-13T03:16:42.00985+00:00'[39m,
[2m[WebServer] [22m    deleted_at: [1mnull[22m,
[2m[WebServer] [22m    deleted_by: [1mnull[22m
[2m[WebServer] [22m  }
[2m[WebServer] [22m}

[1A[2K[2m[WebServer] [22m POST /api/admin/photos [32m201[39m in 603ms[2m (compile: 16ms, proxy.ts: 347ms, render: 239ms)[22m

[1A[2K[2m[WebServer] [22m GET /api/admin/alerts [32m200[39m in 765ms[2m (compile: 7ms, proxy.ts: 334ms, render: 424ms)[22m

[1A[2K[2m[WebServer] [22m GET /api/admin/metrics [32m200[39m in 766ms[2m (compile: 9ms, proxy.ts: 472ms, render: 285ms)[22m

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] User authenticated: e7f5ae65-376e-4d05-a18c-10a91295727a

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }

[1A[2K[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22m[Middleware] Admin user data query result: { userData: { role: 'owner', status: 'active' }, userError: null }
[2m[WebServer] [22m[Middleware] Access granted for admin role: owner

[1A[2K[2m[WebServer] [22mUsing the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1A[2K[2m[WebServer] [22m[Photo API] Calling uploadPhoto service with: {
[2m[WebServer] [22m  fileName: [32m'test-photo.jpg'[39m,
[2m[WebServer] [22m  fileType: [32m'image/jpeg'[39m,
[2m[WebServer] [22m  fileSize: [33m160[39m,
[2m[WebServer] [22m  metadata: {
[2m[WebServer] [22m    page_type: [32m'memory'[39m,
[2m[WebServer] [22m    uploader_id: [32m'e7f5ae65-376e-4d05-a18c-10a91295727a'[39m,
[2m[WebServer] [22m    moderation_status: [32m'approved'[39m
[2m[WebServer] [22m  }
[2m[WebServer] [22m}

[1A[2K[2m[WebServer] [22m[PhotoService] B2 health check: { success: [33mtrue[39m, data: [33mtrue[39m }
[2m[WebServer] [22m[PhotoService] Attempting B2 upload...

[1A[2K[2m[WebServer] [22mðŸ§ª [MOCK B2] File uploaded: {
[2m[WebServer] [22m  fileName: [32m'test-photo.jpg'[39m,
[2m[WebServer] [22m  contentType: [32m'image/jpeg'[39m,
[2m[WebServer] [22m  size: [33m160[39m,
[2m[WebServer] [22m  key: [32m'photos/1770952602841-test-photo.jpg'[39m,
[2m[WebServer] [22m  url: [32m'https://test-cdn.example.com/photos/1770952602841-test-photo.jpg'[39m
[2m[WebServer] [22m}

[1A[2K[2m[WebServer] [22m[PhotoService] B2 upload result: {
[2m[WebServer] [22m  success: [33mtrue[39m,
[2m[WebServer] [22m  data: {
[2m[WebServer] [22m    url: [32m'https://test-cdn.example.com/photos/1770952602841-test-photo.jpg'[39m,
[2m[WebServer] [22m    key: [32m'photos/1770952602841-test-photo.jpg'[39m
[2m[WebServer] [22m  }
[2m[WebServer] [22m}
[2m[WebServer] [22m[PhotoService] Using B2 storage: https://test-cdn.example.com/photos/1770952602841-test-photo.jpg

[1A[2K[2m[WebServer] [22m[Photo API] Upload result: {
[2m[WebServer] [22m  success: [33mtrue[39m,
[2m[WebServer] [22m  data: {
[2m[WebServer] [22m    id: [32m'732bbbc6-f7cd-4e6c-b4b8-3bdde5b6c184'[39m,
[2m[WebServer] [22m    uploader_id: [32m'e7f5ae65-376e-4d05-a18c-10a91295727a'[39m,
[2m[WebServer] [22m    photo_url: [32m'https://test-cdn.example.com/photos/1770952602841-test-photo.jpg'[39m,
[2m[WebServer] [22m    storage_type: [32m'b2'[39m,
[2m[WebServer] [22m    page_type: [32m'memory'[39m,
[2m[WebServer] [22m    page_id: [1mnull[22m,
[2m[WebServer] [22m    caption: [1mnull[22m,
[2m[WebServer] [22m    alt_text: [1mnull[22m,
[2m[WebServer] [22m    moderation_status: [32m'approved'[39m,
[2m[WebServer] [22m    moderation_reason: [1mnull[22m,
[2m[WebServer] [22m    display_order: [1mnull[22m,
[2m[WebServer] [22m    created_at: [32m'2026-02-13T03:16:42.925443+00:00'[39m,
[2m[WebServer] [22m    moderated_at: [1mnull[22m,
[2m[WebServer] [22m    updated_at: [32m'2026-02-13T03:16:42.925443+00:00'[39m,
[2m[WebServer] [22m    deleted_at: [1mnull[22m,
[2m[WebServer] [22m    deleted_by: [1mnull[22m
[2m[WebServer] [22m  }
[2m[WebServer] [22m}

[1A[2K[2m[WebServer] [22m POST /api/admin/photos [32m201[39m in 608ms[2m (compile: 2ms, proxy.ts: 374ms, render: 232ms)[22m

[1A[2K[2m[WebServer] [22m GET /api/admin/metrics [32m200[39m in 678ms[2m (compile: 1987Âµs, proxy.ts: 366ms, render: 310ms)[22m

[1A[2K[2m[WebServer] [22m GET /api/admin/alerts [32m200[39m in 678ms[2m (compile: 1958Âµs, proxy.ts: 299ms, render: 377ms)[22m


ðŸ§¹ E2E Global Teardown Starting...

ðŸ—‘ï¸  Cleaning up test data...
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ðŸ”“ Keeping authentication state for debugging...
   Auth files preserved in .auth/ directory
   Run "rm -rf .auth" to clean up manually

ðŸ“Š Execution Summary:
   Duration: 1.82s
   Errors: 0
   Status: âœ… Clean teardown

âœ¨ E2E Global Teardown Complete!

[1A[2K  17 passed (36.0s)
