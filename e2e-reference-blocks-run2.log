
> destination-wedding-platform@0.1.0 test:e2e
> playwright test __tests__/e2e/admin/referenceBlocks.spec.ts

[dotenv@17.2.4] injecting env (29) from .env.e2e -- tip: âš™ï¸  enable debug logging with { debug: true }

ðŸš€ E2E Global Setup Starting...

ðŸ“Š Verifying test database connection...
âœ… Test database connected

ðŸ§¹ Cleaning up test data...
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ðŸŒ Verifying Next.js server...
âœ… Next.js server is running

ðŸ” Setting up admin authentication...
   Admin user already exists: admin@example.com (role: host)
   Authenticating via Supabase API...
   âœ… API authentication successful (User ID: e7f5ae65-376e-4d05-a18c-10a91295727a)
   Creating storage state from API session...
   âœ… Storage state created from API session
   Auth state saved to: .auth/admin.json
   Verifying authentication...
   Current URL: http://localhost:3000/admin
   âœ… Admin UI is visible
   âœ… Authentication verified
   Logged in as: admin@example.com
âœ… Admin authentication saved

âœ¨ E2E Global Setup Complete!


Running 8 tests using 1 worker

[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  enable debug logging with { debug: true }
âœ“ Created test data: {
  eventId: [32m'ccf89914-d298-4fab-aa74-d739f15c4fc0'[39m,
  activityId: [32m'0994720b-f85d-4379-84c6-21745a453724'[39m,
  contentPageId: [32m'cb2cdac1-bea8-4a4e-8d21-6363c9c19e33'[39m,
  sectionId: [32m'6adec848-8f10-4163-8388-53ed14735998'[39m
}
âœ“ Verify content page exists in DB: YES 
âœ“ Test content page is visible and editable in UI
âœ“ Section editor container is visible
âœ“ No sections exist, creating first section
âœ“ Section fully rendered and ready for interaction
âœ“ Found section with ID: 6adec848-8f10-4163-8388-53ed14735998
âœ“ Clicking Edit button to open editing interface
âœ“ Editing interface appeared after Edit button click
âœ“ All editing interface elements verified
âœ“ SimpleReferenceSelector loaded
API Response: {
  "success": true,
  "data": {
    "events": [
      {
        "id": "ccf89914-d298-4fab-aa74-d739f15c4fc0",
        "name": "Test Event for References",
        "description": "Test event for reference blocks",
        "eventType": "ceremony",
        "locationId": null,
        "startDate": "2026-02-22T02:57:15.836+00:00",
        "endDate": null,
        "rsvpRequired": true,
        "rsvpDeadline": null,
        "visibility": [],
        "status": "published",
        "createdAt": "2026-02-15T02:57:16.196906+00:00",
        "updatedAt": "2026-02-15T02:57:16.196906+00:00",
        "contentSections": [],
        "slug": "test-event-ref-1771124235836-f4vr58",
        "deletedAt": null,
        "deletedBy": null
      }
    ],
    "total": 1,
    "page": 1,
    "pageSize": 50,
    "totalPages": 1
  }
}
âœ“ Reference items rendered
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  1 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:274:7 â€º Reference Blocks Management â€º should create event reference block (22.0s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  write to custom object with { processEnv: myObject }
âœ“ Created test data: {
  eventId: [32m'7a05118b-edc4-4d69-bb99-8c2f82620b03'[39m,
  activityId: [32m'bfa92436-d754-4ad4-b851-4e74b7523232'[39m,
  contentPageId: [32m'eb4b6df2-7a3d-4aea-8191-8b7c383c63d7'[39m,
  sectionId: [32m'1cb5cc67-0b79-4d9a-bbcd-cb391c836764'[39m
}
âœ“ Verify content page exists in DB: YES 
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  2 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:274:7 â€º Reference Blocks Management â€º should create event reference block (retry #1) (37.9s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ”‘ add access controls to secrets: https://dotenvx.com/ops
âœ“ Created test data: {
  eventId: [32m'1dc31e4f-4c6a-40d5-88c2-500e8fb92f07'[39m,
  activityId: [32m'11cd31dc-6d46-4749-a91a-485141d64e84'[39m,
  contentPageId: [32m'b3370016-8741-4c2e-943c-06e40c83921e'[39m,
  sectionId: [32m'7482d614-d0f3-47fe-905c-1e7982c6e720'[39m
}
âœ“ Verify content page exists in DB: YES 
âœ“ Test content page is visible and editable in UI
âœ“ Section editor container is visible
âœ“ No sections exist, creating first section
âœ“ Section fully rendered and ready for interaction
âœ“ Found section with ID: 7482d614-d0f3-47fe-905c-1e7982c6e720
âœ“ Clicking Edit button to open editing interface
âœ“ Editing interface appeared after Edit button click
âœ“ All editing interface elements verified
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ“  3 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:401:7 â€º Reference Blocks Management â€º should create activity reference block (15.6s)
âœ“ Created test data: {
  eventId: [32m'07559a7b-3822-4b09-acaa-d6b078314042'[39m,
  activityId: [32m'e8bed281-63ca-4e70-9df5-e2908955b6f8'[39m,
  contentPageId: [32m'3e22dd5f-fbf4-49f9-82e5-e9deb7bce06b'[39m,
  sectionId: [32m'c9babde5-bf44-4164-b912-52cbb23331a0'[39m
}
âœ“ Verify content page exists in DB: YES 
âœ“ Test content page is visible and editable in UI
âœ“ Section editor container is visible
âœ“ No sections exist, creating first section
âœ“ Section fully rendered and ready for interaction
âœ“ Found section with ID: c9babde5-bf44-4164-b912-52cbb23331a0
âœ“ Clicking Edit button to open editing interface
âœ“ Editing interface appeared after Edit button click
âœ“ All editing interface elements verified
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ“  4 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:449:7 â€º Reference Blocks Management â€º should create multiple reference types in one section (23.6s)
âœ“ Created test data: {
  eventId: [32m'f5ef892c-2f03-49eb-8cb0-802ebcdedaf0'[39m,
  activityId: [32m'8e09b8ad-dcee-4c99-8d85-c32395fc90ea'[39m,
  contentPageId: [32m'7e3e8232-9a79-4c5d-809d-fe8b2a37852e'[39m,
  sectionId: [32m'b5cd7ed9-3d67-4d1a-91bd-54bb0d91b08f'[39m
}
âœ“ Verify content page exists in DB: YES 
âœ“ Test content page is visible and editable in UI
âœ“ Found 1 column(s) for section b5cd7ed9-3d67-4d1a-91bd-54bb0d91b08f
âœ“ Using column ID: d67f682a-1451-45a9-8fcb-afe0c67b54a1
âœ“ Reference added to column: {
  "content_type": "references",
  "content_data": {
    "references": [
      {
        "id": "f5ef892c-2f03-49eb-8cb0-802ebcdedaf0",
        "name": "Test Event for References",
        "type": "event",
        "metadata": {}
      }
    ]
  }
}
âœ“ Section editor container is visible
âœ“ No sections exist, creating first section
âœ“ Section fully rendered and ready for interaction
âœ“ Found section with ID: b5cd7ed9-3d67-4d1a-91bd-54bb0d91b08f
âœ“ Clicking Edit button to open editing interface
âœ“ Editing interface appeared after Edit button click
âœ“ All editing interface elements verified
âœ“ Section editor opened
âœ“ Reference preview visible
âœ“ Remove button clicked
âœ“ Database verification successful on attempt 1
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ“  5 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:534:7 â€º Reference Blocks Management â€º should remove reference from section (19.5s)
âœ“ Created test data: {
  eventId: [32m'32406a1f-7f2d-40d6-8abf-ade4d8bb839a'[39m,
  activityId: [32m'a1002162-33a2-4ec1-98c4-f8d095b5d2fe'[39m,
  contentPageId: [32m'793286b0-f961-4b5e-83d4-8f008b491635'[39m,
  sectionId: [32m'0351fe7f-cf76-4289-8702-6b186ab1ae3d'[39m
}
âœ“ Verify content page exists in DB: YES 
âœ“ Test content page is visible and editable in UI
âœ“ Section editor container is visible
âœ“ No sections exist, creating first section
âœ“ Section fully rendered and ready for interaction
âœ“ Found section with ID: 0351fe7f-cf76-4289-8702-6b186ab1ae3d
âœ“ Clicking Edit button to open editing interface
âœ“ Editing interface appeared after Edit button click
âœ“ All editing interface elements verified
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ“  6 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:671:7 â€º Reference Blocks Management â€º should filter references by type in picker (14.6s)
âœ“ Created test data: {
  eventId: [32m'027ee549-62d3-4985-9dfd-eac31e8edaa2'[39m,
  activityId: [32m'c0a5e937-27b0-4464-b4c1-450f996adb07'[39m,
  contentPageId: [32m'b8f2dbac-ad80-4ea6-918d-185cbbea4196'[39m,
  sectionId: [32m'1f7bd79b-8d52-4181-9c55-6fe834e7894b'[39m
}
âœ“ Verify content page exists in DB: YES 
âœ“ Test content page is visible and editable in UI
âœ“ Created circular reference scenario: Page A â†’ Page B
âœ“ Content Page B card visible
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  7 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:710:7 â€º Reference Blocks Management â€º should prevent circular references (22.0s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ“¡ add observability to secrets: https://dotenvx.com/ops
âœ“ Created test data: {
  eventId: [32m'51580253-2762-4866-b496-ef67820923b7'[39m,
  activityId: [32m'a61af632-a229-4235-8c08-9b3c729854d5'[39m,
  contentPageId: [32m'ce8f651b-8302-4e76-a0dc-a95e627bc479'[39m,
  sectionId: [32m'0bb2b4a1-9ce1-4cf1-b78e-89e235112741'[39m
}
âœ“ Verify content page exists in DB: YES 
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  8 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:710:7 â€º Reference Blocks Management â€º should prevent circular references (retry #1) (35.4s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com
âœ“ Created test data: {
  eventId: [32m'773e9ced-2c3b-4b50-9124-896716e06949'[39m,
  activityId: [32m'045f7582-b0e1-48cf-8982-be66f641159c'[39m,
  contentPageId: [32m'e716bbd8-ce31-478d-9c3f-8a8be2f3e40b'[39m,
  sectionId: [32m'36cfe91a-f3a1-4d56-ac44-83d7d3a79b51'[39m
}
âœ“ Verify content page exists in DB: YES 
âœ“ Test content page is visible and editable in UI
âœ“ Section editor container is visible
âœ“ No sections exist, creating first section
âœ“ Section fully rendered and ready for interaction
âœ“ Found section with ID: 36cfe91a-f3a1-4d56-ac44-83d7d3a79b51
âœ“ Clicking Edit button to open editing interface
âœ“ Editing interface appeared after Edit button click
âœ“ All editing interface elements verified
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ“  9 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:883:7 â€º Reference Blocks Management â€º should detect broken references (16.3s)
âœ“ Created test data: {
  eventId: [32m'1590305b-88df-4aab-a8a8-a861951073fc'[39m,
  activityId: [32m'd554c3cc-2dc6-463d-a05d-c5fde9539473'[39m,
  contentPageId: [32m'1b93e540-1ac0-4a7d-9785-add622da94a1'[39m,
  sectionId: [32m'21515df6-1e6a-486d-8545-3932f9b5c8ef'[39m
}
âœ“ Verify content page exists in DB: YES 
âœ“ Test content page is visible and editable in UI
âœ“ References added to column: {
  "content_data": {
    "references": [
      {
        "id": "1590305b-88df-4aab-a8a8-a861951073fc",
        "name": "Test Event for References",
        "type": "event",
        "metadata": {}
      },
      {
        "id": "d554c3cc-2dc6-463d-a05d-c5fde9539473",
        "name": "Test Activity for References",
        "type": "activity",
        "metadata": {}
      }
    ]
  }
}
âœ“ Section data: {
  "id": "21515df6-1e6a-486d-8545-3932f9b5c8ef",
  "page_type": "custom",
  "page_id": "1b93e540-1ac0-4a7d-9785-add622da94a1",
  "display_order": 0,
  "created_at": "2026-02-15T03:00:47.631842+00:00",
  "updated_at": "2026-02-15T03:00:47.631842+00:00",
  "title": null,
  "deleted_at": null,
  "deleted_by": null,
  "columns": [
    {
      "id": "fd0276ef-02b0-4b49-9dfd-7481630e94ae",
      "created_at": "2026-02-15T03:00:47.798699+00:00",
      "deleted_at": null,
      "deleted_by": null,
      "section_id": "21515df6-1e6a-486d-8545-3932f9b5c8ef",
      "updated_at": "2026-02-15T03:00:50.910425+00:00",
      "content_data": {
        "references": [
          {
            "id": "1590305b-88df-4aab-a8a8-a861951073fc",
            "name": "Test Event for References",
            "type": "event",
            "metadata": {}
          },
          {
            "id": "d554c3cc-2dc6-463d-a05d-c5fde9539473",
            "name": "Test Activity for References",
            "type": "activity",
            "metadata": {}
          }
        ]
      },
      "content_type": "references",
      "column_number": 1
    }
  ]
}
âœ“ Navigating to guest view: /custom/test-page-ref-1771124446943-tsxflq
âœ“ Guest view page container loaded
âœ“ Page title visible
âœ“ References container visible
âœ“ Event reference card visible
âœ“ Activity reference card visible
âœ“ Clicked event reference card
âœ“ Event details expanded
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  10 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:916:7 â€º Reference Blocks Management â€º should display reference blocks in guest view with preview modals (22.0s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ðŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops
âœ“ Created test data: {
  eventId: [32m'567be40e-42bf-4d53-933a-861b89dabfdc'[39m,
  activityId: [32m'904160a7-8a77-4e35-a5d6-68fdbd2407e5'[39m,
  contentPageId: [32m'95738684-0ce9-4bea-a1ca-5c02383702a5'[39m,
  sectionId: [32m'd98cdb65-c5b9-473b-85ef-91824716c3c5'[39m
}
âœ“ Verify content page exists in DB: YES 
âœ“ Test content page is visible and editable in UI
âœ“ References added to column: {
  "content_data": {
    "references": [
      {
        "id": "567be40e-42bf-4d53-933a-861b89dabfdc",
        "name": "Test Event for References",
        "type": "event",
        "metadata": {}
      },
      {
        "id": "904160a7-8a77-4e35-a5d6-68fdbd2407e5",
        "name": "Test Activity for References",
        "type": "activity",
        "metadata": {}
      }
    ]
  }
}
âœ“ Section data: {
  "id": "d98cdb65-c5b9-473b-85ef-91824716c3c5",
  "page_type": "custom",
  "page_id": "95738684-0ce9-4bea-a1ca-5c02383702a5",
  "display_order": 0,
  "created_at": "2026-02-15T03:01:11.237305+00:00",
  "updated_at": "2026-02-15T03:01:11.237305+00:00",
  "title": null,
  "deleted_at": null,
  "deleted_by": null,
  "columns": [
    {
      "id": "01741bab-cce3-42a1-8443-1593a804f88d",
      "created_at": "2026-02-15T03:01:11.422522+00:00",
      "deleted_at": null,
      "deleted_by": null,
      "section_id": "d98cdb65-c5b9-473b-85ef-91824716c3c5",
      "updated_at": "2026-02-15T03:01:35.163017+00:00",
      "content_data": {
        "references": [
          {
            "id": "567be40e-42bf-4d53-933a-861b89dabfdc",
            "name": "Test Event for References",
            "type": "event",
            "metadata": {}
          },
          {
            "id": "904160a7-8a77-4e35-a5d6-68fdbd2407e5",
            "name": "Test Activity for References",
            "type": "activity",
            "metadata": {}
          }
        ]
      },
      "content_type": "references",
      "column_number": 1
    }
  ]
}
âœ“ Navigating to guest view: /custom/test-page-ref-1771124469818-ubcui
âœ“ Guest view page container loaded
âœ“ Page title visible
âœ“ References container visible
âœ“ Event reference card visible
âœ“ Activity reference card visible
âœ“ Clicked event reference card
âœ“ Event details expanded
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  11 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:916:7 â€º Reference Blocks Management â€º should display reference blocks in guest view with preview modals (retry #1) (1.1m)

ðŸ§¹ E2E Global Teardown Starting...

ðŸ—‘ï¸  Cleaning up test data...
ðŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ðŸ”“ Keeping authentication state for debugging...
   Auth files preserved in .auth/ directory
   Run "rm -rf .auth" to clean up manually

ðŸ“Š Execution Summary:
   Duration: 2.48s
   Errors: 0
   Status: âœ… Clean teardown

âœ¨ E2E Global Teardown Complete!



  1) [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:274:7 â€º Reference Blocks Management â€º should create event reference block 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('[data-testid="reference-item-ccf89914-d298-4fab-aa74-d739f15c4fc0"]')
    Expected: visible
    Timeout: 5000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 5000ms[22m
    [2m  - waiting for locator('[data-testid="reference-item-ccf89914-d298-4fab-aa74-d739f15c4fc0"]')[22m


      329 |     // Click on the specific event using its ID with improved stability
      330 |     const eventItem = page.locator(`[data-testid="reference-item-${testEventId}"]`);
    > 331 |     await expect(eventItem).toBeVisible({ timeout: 5000 });
          |                             ^
      332 |     
      333 |     // Wait for element to be fully attached and stable
      334 |     await eventItem.waitFor({ state: 'attached', timeout: 5000 });
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/referenceBlocks.spec.ts:331:29

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-referenceBlocks-Refe-25730-reate-event-reference-block-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-referenceBlocks-Refe-25730-reate-event-reference-block-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-referenceBlocks-Refe-25730-reate-event-reference-block-chromium/error-context.md

    Retry #1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('h1:has-text("Content Pages")').first()
    Expected: visible
    Timeout: 5000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 5000ms[22m
    [2m  - waiting for locator('h1:has-text("Content Pages")').first()[22m
    [2m    - waiting for" http://localhost:3000/admin/content-pages" navigation to finish...[22m


    Call Log:
    - Timeout 30000ms exceeded while waiting on the predicate

      258 |       
      259 |       console.log('âœ“ Test content page is visible and editable in UI');
    > 260 |     }).toPass({ 
          |        ^
      261 |       timeout: 30000, 
      262 |       intervals: [1000, 2000, 3000, 5000] // Retry with exponential backoff
      263 |     });
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/referenceBlocks.spec.ts:260:8

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-referenceBlocks-Refe-25730-reate-event-reference-block-chromium-retry1/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-referenceBlocks-Refe-25730-reate-event-reference-block-chromium-retry1/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-referenceBlocks-Refe-25730-reate-event-reference-block-chromium-retry1/error-context.md

    attachment #4: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-referenceBlocks-Refe-25730-reate-event-reference-block-chromium-retry1/trace.zip
    Usage:

        npx playwright show-trace test-results/admin-referenceBlocks-Refe-25730-reate-event-reference-block-chromium-retry1/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  2) [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:710:7 â€º Reference Blocks Management â€º should prevent circular references 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('text=Test Content Page B').first().locator('..').locator('..').locator('button:has-text("Edit")').first()
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('text=Test Content Page B').first().locator('..').locator('..').locator('button:has-text("Edit")').first()[22m


      809 |       : editButtonBFallback;
      810 |     
    > 811 |     await expect(editButton).toBeVisible({ timeout: 10000 });
          |                              ^
      812 |     await editButton.click();
      813 |     await page.waitForTimeout(1500);
      814 |
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/referenceBlocks.spec.ts:811:30

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-referenceBlocks-Refe-76f8e-prevent-circular-references-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-referenceBlocks-Refe-76f8e-prevent-circular-references-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-referenceBlocks-Refe-76f8e-prevent-circular-references-chromium/error-context.md

    Retry #1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error: page.goto: net::ERR_ABORTED at http://localhost:3000/admin/content-pages
    Call log:
    [2m  - navigating to "http://localhost:3000/admin/content-pages", waiting until "load"[22m


    Call Log:
    - Timeout 30000ms exceeded while waiting on the predicate

      258 |       
      259 |       console.log('âœ“ Test content page is visible and editable in UI');
    > 260 |     }).toPass({ 
          |        ^
      261 |       timeout: 30000, 
      262 |       intervals: [1000, 2000, 3000, 5000] // Retry with exponential backoff
      263 |     });
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/referenceBlocks.spec.ts:260:8

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-referenceBlocks-Refe-76f8e-prevent-circular-references-chromium-retry1/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-referenceBlocks-Refe-76f8e-prevent-circular-references-chromium-retry1/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-referenceBlocks-Refe-76f8e-prevent-circular-references-chromium-retry1/error-context.md

    attachment #4: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-referenceBlocks-Refe-76f8e-prevent-circular-references-chromium-retry1/trace.zip
    Usage:

        npx playwright show-trace test-results/admin-referenceBlocks-Refe-76f8e-prevent-circular-references-chromium-retry1/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  3) [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:916:7 â€º Reference Blocks Management â€º should display reference blocks in guest view with preview modals 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoContainText[2m([22m[32mexpected[39m[2m)[22m failed

    Locator: locator('.border-2.border-sage-200').filter({ hasText: 'Test Event for References' }).first().locator('.border-t.border-sage-200').first()
    Expected substring: [32m"Test Event for References"[39m
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toContainText" with timeout 10000ms[22m
    [2m  - waiting for locator('.border-2.border-sage-200').filter({ hasText: 'Test Event for References' }).first().locator('.border-t.border-sage-200').first()[22m
    [2m    4 Ã— locator resolved to <div class="mt-3 pt-3 border-t border-sage-200">â€¦</div>[22m
    [2m      - unexpected value "Loading details..."[22m


      1035 |
      1036 |     // Verify expanded content shows event details
    > 1037 |     await expect(expandedDetails).toContainText('Test Event for References');
           |                                   ^
      1038 |
      1039 |     // Click again to collapse
      1040 |     await eventReferenceCard.click();
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/referenceBlocks.spec.ts:1037:35

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-referenceBlocks-Refe-0abdf-st-view-with-preview-modals-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-referenceBlocks-Refe-0abdf-st-view-with-preview-modals-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/admin-referenceBlocks-Refe-0abdf-st-view-with-preview-modals-chromium/error-context.md

    Retry #1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    [31mTest timeout of 60000ms exceeded.[39m

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoContainText[2m([22m[32mexpected[39m[2m)[22m failed

    Locator: locator('.border-2.border-sage-200').filter({ hasText: 'Test Event for References' }).first().locator('.border-t.border-sage-200').first()
    Expected substring: [32m"Test Event for References"[39m
    Error: element(s) not found

    Call log:
    [2m  - Expect "toContainText" with timeout 10000ms[22m
    [2m  - waiting for locator('.border-2.border-sage-200').filter({ hasText: 'Test Event for References' }).first().locator('.border-t.border-sage-200').first()[22m
    [2m    4 Ã— locator resolved to <div class="mt-3 pt-3 border-t border-sage-200">â€¦</div>[22m
    [2m      - unexpected value "Loading details..."[22m
    [2m    - waiting for" http://localhost:3000/custom/test-page-ref-1771124469818-ubcui" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/custom/test-page-ref-1771124469818-ubcui"[22m


      1035 |
      1036 |     // Verify expanded content shows event details
    > 1037 |     await expect(expandedDetails).toContainText('Test Event for References');
           |                                   ^
      1038 |
      1039 |     // Click again to collapse
      1040 |     await eventReferenceCard.click();
        at /Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/admin/referenceBlocks.spec.ts:1037:35

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-referenceBlocks-Refe-0abdf-st-view-with-preview-modals-chromium-retry1/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-referenceBlocks-Refe-0abdf-st-view-with-preview-modals-chromium-retry1/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #3: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/admin-referenceBlocks-Refe-0abdf-st-view-with-preview-modals-chromium-retry1/trace.zip
    Usage:

        npx playwright show-trace test-results/admin-referenceBlocks-Refe-0abdf-st-view-with-preview-modals-chromium-retry1/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  3 failed
    [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:274:7 â€º Reference Blocks Management â€º should create event reference block 
    [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:710:7 â€º Reference Blocks Management â€º should prevent circular references 
    [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:916:7 â€º Reference Blocks Management â€º should display reference blocks in guest view with preview modals 
  5 passed (5.2m)

[36m  Serving HTML report at http://localhost:62565. Press Ctrl+C to quit.[39m
