
> destination-wedding-platform@0.1.0 test:e2e
> playwright test __tests__/e2e/admin/referenceBlocks.spec.ts

[dotenv@17.2.4] injecting env (29) from .env.e2e -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }

ğŸš€ E2E Global Setup Starting...

ğŸ“Š Verifying test database connection...
âœ… Test database connected

ğŸ§¹ Cleaning up test data...
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ğŸŒ Verifying Next.js server...
   Waiting for server to start (30 seconds max)...

âŒ E2E Global Setup Failed: Error: Next.js server not accessible at http://localhost:3000
Error: fetch failed
Please ensure:
  1. Next.js dev server is running (npm run dev)
  2. Server is listening on the correct port
  3. No firewall blocking the connection
    at verifyNextJsServer (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/global-setup.ts:150:15)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at globalSetup (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/global-setup.ts:37:5)
    at Object.setup (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/tasks.js:174:27)
    at taskLoop (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/taskRunner.js:62:11)
    at TaskRunner.runDeferCleanup (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/taskRunner.js:78:5)
    at TaskRunner.run (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/taskRunner.js:42:33)
    at runTasks (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/tasks.js:80:18)
    at runAllTestsWithConfig (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/testRunner.js:388:18)
    at runTests (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/program.js:242:18)
    at i.<anonymous> (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/program.js:70:7)
Error: Next.js server not accessible at http://localhost:3000
Error: fetch failed
Please ensure:
  1. Next.js dev server is running (npm run dev)
  2. Server is listening on the correct port
  3. No firewall blocking the connection

   at global-setup.ts:150

  148 |     } catch (error) {
  149 |       if (i === maxRetries - 1) {
> 150 |         throw new Error(
      |               ^
  151 |           `Next.js server not accessible at ${baseURL}\n` +
  152 |           `Error: ${error instanceof Error ? error.message : String(error)}\n` +
  153 |           'Please ensure:\n' +
    at verifyNextJsServer (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/global-setup.ts:150:15)
    at globalSetup (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/global-setup.ts:37:5)

ğŸ§¹ E2E Global Teardown Starting...

ğŸ—‘ï¸  Cleaning up test data...
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ğŸ”“ Keeping authentication state for debugging...
   Auth files preserved in .auth/ directory
   Run "rm -rf .auth" to clean up manually

ğŸ“Š Execution Summary:
   Duration: 2.01s
   Errors: 0
   Status: âœ… Clean teardown

âœ¨ E2E Global Teardown Complete!



To open last HTML report run:
[36m[39m
[36m  npx playwright show-report[39m
[36m[39m
