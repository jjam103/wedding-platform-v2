
> destination-wedding-platform@0.1.0 test:e2e
> playwright test

[dotenv@17.2.4] injecting env (25) from .env.e2e -- tip: âš™ï¸  enable debug logging with { debug: true }

ğŸš€ E2E Global Setup Starting...

ğŸ“Š Verifying test database connection...
âœ… Test database connected

ğŸ§¹ Cleaning up test data...
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ğŸŒ Verifying Next.js server...
âœ… Next.js server is running

ğŸ” Setting up admin authentication...
   Warning: Could not ensure admin user exists: Failed to create auth user: A user with this email address has already been registered
   Continuing with setup - login may fail if user does not exist
   Authenticating via Supabase API...
   âœ… API authentication successful (User ID: e7f5ae65-376e-4d05-a18c-10a91295727a)
   Injecting session cookies...
   âœ… Session cookies set (3 cookies)

âŒ E2E Global Setup Failed: Error: Failed to create admin authentication state: page.goto: Timeout 15000ms exceeded.
Call log:
[2m  - navigating to "http://localhost:3000/admin", waiting until "networkidle"[22m

Please ensure:
  1. Admin user exists in test database
  2. Admin credentials are correct (E2E_ADMIN_EMAIL, E2E_ADMIN_PASSWORD)
  3. Next.js server is running
  4. Supabase credentials are correct
    at createAdminAuthState (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/global-setup.ts:310:11)
    at globalSetup (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/global-setup.ts:42:5)
    at Object.setup (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/tasks.js:174:27)
    at taskLoop (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/taskRunner.js:62:11)
    at TaskRunner.runDeferCleanup (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/taskRunner.js:78:5)
    at TaskRunner.run (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/taskRunner.js:42:33)
    at runTasks (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/tasks.js:80:18)
    at runAllTestsWithConfig (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/runner/testRunner.js:388:18)
    at runTests (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/program.js:242:18)
    at i.<anonymous> (/Users/jaron/Desktop/wedding-platform-v2/node_modules/playwright/lib/program.js:70:7)
Error: Failed to create admin authentication state: page.goto: Timeout 15000ms exceeded.
Call log:
[2m  - navigating to "http://localhost:3000/admin", waiting until "networkidle"[22m

Please ensure:
  1. Admin user exists in test database
  2. Admin credentials are correct (E2E_ADMIN_EMAIL, E2E_ADMIN_PASSWORD)
  3. Next.js server is running
  4. Supabase credentials are correct

   at global-setup.ts:310

  308 |     console.log(`   Auth state saved to: .auth/admin.json`);
  309 |   } catch (error) {
> 310 |     throw new Error(
      |           ^
  311 |       `Failed to create admin authentication state: ${error instanceof Error ? error.message : String(error)}\n` +
  312 |       'Please ensure:\n' +
  313 |       '  1. Admin user exists in test database\n' +
    at createAdminAuthState (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/global-setup.ts:310:11)
    at globalSetup (/Users/jaron/Desktop/wedding-platform-v2/__tests__/e2e/global-setup.ts:42:5)

ğŸ§¹ E2E Global Teardown Starting...

ğŸ—‘ï¸  Cleaning up test data...
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ğŸ”“ Removing authentication state...
   Removed: .auth/admin.json
   Removed empty .auth directory
âœ… Authentication state removed

ğŸ“Š Execution Summary:
   Duration: 1.98s
   Errors: 0
   Status: âœ… Clean teardown

âœ¨ E2E Global Teardown Complete!



To open last HTML report run:
[36m[39m
[36m  npx playwright show-report[39m
[36m[39m
