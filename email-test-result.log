
> destination-wedding-platform@0.1.0 test:e2e
> playwright test emailManagement.spec.ts -g should select recipients by group

[dotenv@17.2.4] injecting env (30) from .env.e2e -- tip: ğŸ”‘ add access controls to secrets: https://dotenvx.com/ops

ğŸš€ E2E Global Setup Starting...

ğŸ“Š Verifying test database connection...
âœ… Test database connected

ğŸ§¹ Cleaning up test data...
ğŸ§¹ Running comprehensive test cleanup...
   Cleaned up 4 test guests
   Cleaned up 4 test guest groups
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ğŸŒ Verifying Next.js server...
âœ… Next.js server is running

ğŸ” Setting up admin authentication...
   Admin user already exists: admin@example.com (role: host)
   Authenticating via Supabase API...
   âœ… API authentication successful (User ID: e7f5ae65-376e-4d05-a18c-10a91295727a)
   Creating storage state from API session...
   âœ… Storage state created from API session
   Auth state saved to: .auth/admin.json
   Verifying authentication...
   Current URL: http://localhost:3000/admin
   âœ… Admin UI is visible
   âœ… Authentication verified
   Logged in as: admin@example.com
âœ… Admin authentication saved

âœ¨ E2E Global Setup Complete!


Running 1 test using 1 worker

[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  suppress all logs with { quiet: true }
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
[Test Setup] Cleaned up all test guests
[Test Setup] Created test group: 495d7de2-99df-4128-95be-ed29839d1d0d
[Test Setup] Created test guest 1: ef1a039d-bc77-4282-86d9-e75652c8eab2 guest1-1771285875615@example.com
[Test Setup] Created test guest 2: 09262a03-f103-49e9-a945-4d63d4f2ffc3 guest2-1771285875615@example.com
[Test Setup] Verified guests in database: [
  {
    "id": "ef1a039d-bc77-4282-86d9-e75652c8eab2",
    "first_name": "Test",
    "last_name": "Guest1",
    "email": "guest1-1771285875615@example.com"
  },
  {
    "id": "09262a03-f103-49e9-a945-4d63d4f2ffc3",
    "first_name": "Test",
    "last_name": "Guest2",
    "email": "guest2-1771285875615@example.com"
  }
]
[Test Setup] Navigated to admin dashboard
[Test] Waiting for form to load...
[Test] Form data loaded
ğŸ§¹ Running comprehensive test cleanup...
   Cleaned up 2 test guests
   Cleaned up 1 test guest groups
âœ… Comprehensive cleanup complete
  âœ“  1 [chromium] â€º __tests__/e2e/admin/emailManagement.spec.ts:289:7 â€º Email Composition & Templates â€º should select recipients by group (12.8s)

ğŸ§¹ E2E Global Teardown Starting...

ğŸ—‘ï¸  Cleaning up test data...
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ğŸ”“ Keeping authentication state for debugging...
   Auth files preserved in .auth/ directory
   Run "rm -rf .auth" to clean up manually

ğŸ“Š Execution Summary:
   Duration: 3.00s
   Errors: 0
   Status: âœ… Clean teardown

âœ¨ E2E Global Teardown Complete!


  1 passed (22.0s)

To open last HTML report run:
[36m[39m
[36m  npx playwright show-report[39m
[36m[39m
