
> destination-wedding-platform@0.1.0 test:e2e
> playwright test __tests__/e2e/admin/referenceBlocks.spec.ts --workers=1

[dotenv@17.2.4] injecting env (29) from .env.e2e -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops

ğŸš€ E2E Global Setup Starting...

ğŸ“Š Verifying test database connection...
âœ… Test database connected

ğŸ§¹ Cleaning up test data...
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
âœ… Test data cleaned

ğŸŒ Verifying Next.js server...
âœ… Next.js server is running

ğŸ” Setting up admin authentication...
   Admin user already exists: admin@example.com (role: host)
   Authenticating via Supabase API...
   âœ… API authentication successful (User ID: e7f5ae65-376e-4d05-a18c-10a91295727a)
   Creating storage state from API session...
   âœ… Storage state created from API session
   Auth state saved to: .auth/admin.json
   Verifying authentication...
   Current URL: http://localhost:3000/admin
   âœ… Admin UI is visible
   âœ… Authentication verified
   Logged in as: admin@example.com
âœ… Admin authentication saved

âœ¨ E2E Global Setup Complete!


Running 8 tests using 1 worker

[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  suppress all logs with { quiet: true }
âœ“ Created test data: {
  eventId: [32m'c0a506cf-708a-4dc6-b9ef-deabc6a591cf'[39m,
  activityId: [32m'1e722059-4cf5-429a-9522-cc93a820f509'[39m,
  contentPageId: [32m'c670690e-cbcb-49c3-b725-c2f62103a690'[39m,
  sectionId: [32m'f0dd8936-b115-49b2-aa4b-c30b4c30abaa'[39m
}
âœ“ Verify content page exists in DB: YES 
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  1 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:229:7 â€º Reference Blocks Management â€º should create event reference block (29.0s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ğŸ” encrypt with Dotenvx: https://dotenvx.com
âœ“ Created test data: {
  eventId: [32m'ade66684-a8ab-40cb-84b5-efc0e5a413b7'[39m,
  activityId: [32m'a363eaa6-dff6-44b8-a6b1-685e20ce2331'[39m,
  contentPageId: [32m'505dba99-853d-4787-b977-9150c2c8e923'[39m,
  sectionId: [32m'c9ae18b3-dae4-4730-8916-959138a30234'[39m
}
âœ“ Verify content page exists in DB: YES 
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  2 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:229:7 â€º Reference Blocks Management â€º should create event reference block (retry #1) (37.6s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops
âœ“ Created test data: {
  eventId: [32m'325b55af-aead-4f0f-9b7b-996e74cb9fe0'[39m,
  activityId: [32m'f54c345c-6bcc-4ab9-94aa-1b568372b230'[39m,
  contentPageId: [32m'4f9c8e60-ad9f-4fb0-8bcb-9d4a3679d1c2'[39m,
  sectionId: [32m'0668d031-8a69-4acf-bf80-b23b46945d63'[39m
}
âœ“ Verify content page exists in DB: YES 
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  3 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:305:7 â€º Reference Blocks Management â€º should create activity reference block (29.4s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  override existing env vars with { override: true }
âœ“ Created test data: {
  eventId: [32m'900a65a5-7a17-41df-ad5a-cc86cacf26b7'[39m,
  activityId: [32m'e06b1d3c-60be-419b-a782-9f66bf968fe5'[39m,
  contentPageId: [32m'3c05e9a1-46b4-4a30-90e9-e8133835a35c'[39m,
  sectionId: [32m'723ce1f8-4ce1-4898-93a7-0dd3fb510b00'[39m
}
âœ“ Verify content page exists in DB: YES 
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  4 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:305:7 â€º Reference Blocks Management â€º should create activity reference block (retry #1) (34.7s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ğŸ”„ add secrets lifecycle management: https://dotenvx.com/ops
âœ“ Created test data: {
  eventId: [32m'070b3b88-bee3-4475-b0db-57fce378d49f'[39m,
  activityId: [32m'703f7150-6b04-46cb-af03-560193252f0e'[39m,
  contentPageId: [32m'a3ca179f-3e2f-40da-961d-263b1cb5baba'[39m,
  sectionId: [32m'b36f8ee0-7591-492b-91d2-740e198fb378'[39m
}
âœ“ Verify content page exists in DB: YES 
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  5 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:344:7 â€º Reference Blocks Management â€º should create multiple reference types in one section (28.9s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  write to custom object with { processEnv: myObject }
âœ“ Created test data: {
  eventId: [32m'bb870a85-98ff-4f65-bf72-904734f0834b'[39m,
  activityId: [32m'f21a83a5-c38b-46dc-b259-99825c8cac8d'[39m,
  contentPageId: [32m'eec1cf1a-ca24-43cf-81dc-0b962fc3339b'[39m,
  sectionId: [32m'96ee0bfd-9eff-4394-8154-c4934955fe24'[39m
}
âœ“ Verify content page exists in DB: YES 
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  6 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:344:7 â€º Reference Blocks Management â€º should create multiple reference types in one section (retry #1) (34.6s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops
âœ“ Created test data: {
  eventId: [32m'0359b140-5bad-4bb0-b382-bf5149869965'[39m,
  activityId: [32m'2e9eb27d-62de-4735-bc47-37ea52b73e9d'[39m,
  contentPageId: [32m'533a70bc-28ba-4e6e-9040-0e55c9afb701'[39m,
  sectionId: [32m'fcd128e9-ea36-46ba-9350-334407d33a71'[39m
}
âœ“ Verify content page exists in DB: YES 
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  7 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:397:7 â€º Reference Blocks Management â€º should remove reference from section (32.9s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ğŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops
âœ“ Created test data: {
  eventId: [32m'0b973da8-7c23-4dc4-aed1-fe14748c7dd6'[39m,
  activityId: [32m'ff08af0a-2912-4cfd-8b2f-fb6d27b5db19'[39m,
  contentPageId: [32m'5c7a9f48-7a83-40fc-a7eb-aa00a1124cbb'[39m,
  sectionId: [32m'dab2064a-dea8-403c-a41b-d6e015b54ffb'[39m
}
âœ“ Verify content page exists in DB: YES 
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  8 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:397:7 â€º Reference Blocks Management â€º should remove reference from section (retry #1) (38.1s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
âœ“ Created test data: {
  eventId: [32m'4a12ae7b-f603-44af-862c-9ac6efc9eced'[39m,
  activityId: [32m'd1bb00cd-ebcb-464e-81bc-f4a847858977'[39m,
  contentPageId: [32m'6dc4bc57-6998-4780-81ec-f7a81f4bca22'[39m,
  sectionId: [32m'a95ebc40-dd8b-47b1-a188-45197f856dac'[39m
}
âœ“ Verify content page exists in DB: YES 
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  9 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:442:7 â€º Reference Blocks Management â€º should filter references by type in picker (33.5s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ğŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops
âœ“ Created test data: {
  eventId: [32m'4f2bd3a9-def7-437b-8cef-669dcef51e6c'[39m,
  activityId: [32m'ec29cc00-0da0-44aa-b08c-7e60d5c622b7'[39m,
  contentPageId: [32m'20b7f9df-a6e8-4c4c-97dd-13070df02b93'[39m,
  sectionId: [32m'934d2d5e-de26-4c6e-a305-fd4deb4d20d8'[39m
}
âœ“ Verify content page exists in DB: YES 
ğŸ§¹ Running comprehensive test cleanup...
âœ… Comprehensive cleanup complete
  âœ˜  10 [chromium] â€º __tests__/e2e/admin/referenceBlocks.spec.ts:442:7 â€º Reference Blocks Management â€º should filter references by type in picker (retry #1) (36.8s)
[dotenv@17.2.4] injecting env (0) from .env.e2e -- tip: ğŸ” encrypt with Dotenvx: https://dotenvx.com
âœ“ Created test data: {
  eventId: [32m'029c649a-644f-4a05-9196-4c6fe8b26f75'[39m,
  activityId: [32m'56a3bbed-c820-4733-aed7-3e1fd88d1f77'[39m,
  contentPageId: [32m'259d0cef-55b8-4e49-bff1-2590ac333f80'[39m,
  sectionId: [32m'a244c950-7615-4e72-a849-6f6821a78543'[39m
}
âœ“ Verify content page exists in DB: YES 
